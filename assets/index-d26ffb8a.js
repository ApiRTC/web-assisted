function _mergeNamespaces(a,o){for(var _e=0;_e<o.length;_e++){const tt=o[_e];if(typeof tt!="string"&&!Array.isArray(tt)){for(const ct in tt)if(ct!=="default"&&!(ct in a)){const gt=Object.getOwnPropertyDescriptor(tt,ct);gt&&Object.defineProperty(a,ct,gt.get?gt:{enumerable:!0,get:()=>tt[ct]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))tt(ct);new MutationObserver(ct=>{for(const gt of ct)if(gt.type==="childList")for(const rt of gt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&tt(rt)}).observe(document,{childList:!0,subtree:!0});function _e(ct){const gt={};return ct.integrity&&(gt.integrity=ct.integrity),ct.referrerPolicy&&(gt.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?gt.credentials="include":ct.crossOrigin==="anonymous"?gt.credentials="omit":gt.credentials="same-origin",gt}function tt(ct){if(ct.ep)return;ct.ep=!0;const gt=_e(ct);fetch(ct.href,gt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$2(a){return a===null||typeof a!="object"?null:(a=z$3&&a[z$3]||a["@@iterator"],typeof a=="function"?a:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$2={};function E$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,o){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,o,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$3(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$3(a,o,_e){var tt,ct={},gt=null,rt=null;if(o!=null)for(tt in o.ref!==void 0&&(rt=o.ref),o.key!==void 0&&(gt=""+o.key),o)J$1.call(o,tt)&&!L$1.hasOwnProperty(tt)&&(ct[tt]=o[tt]);var at=arguments.length-2;if(at===1)ct.children=_e;else if(1<at){for(var s=Array(at),et=0;et<at;et++)s[et]=arguments[et+2];ct.children=s}if(a&&a.defaultProps)for(tt in at=a.defaultProps,at)ct[tt]===void 0&&(ct[tt]=at[tt]);return{$$typeof:l$3,type:a,key:gt,ref:rt,props:ct,_owner:K$2.current}}function N$2(a,o){return{$$typeof:l$3,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}}function O$3(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$3}function escape$1(a){var o={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(_e){return o[_e]})}var P$3=/\/+/g;function Q$1(a,o){return typeof a=="object"&&a!==null&&a.key!=null?escape$1(""+a.key):o.toString(36)}function R$3(a,o,_e,tt,ct){var gt=typeof a;(gt==="undefined"||gt==="boolean")&&(a=null);var rt=!1;if(a===null)rt=!0;else switch(gt){case"string":case"number":rt=!0;break;case"object":switch(a.$$typeof){case l$3:case n$3:rt=!0}}if(rt)return rt=a,ct=ct(rt),a=tt===""?"."+Q$1(rt,0):tt,I$1(ct)?(_e="",a!=null&&(_e=a.replace(P$3,"$&/")+"/"),R$3(ct,o,_e,"",function(et){return et})):ct!=null&&(O$3(ct)&&(ct=N$2(ct,_e+(!ct.key||rt&&rt.key===ct.key?"":(""+ct.key).replace(P$3,"$&/")+"/")+a)),o.push(ct)),1;if(rt=0,tt=tt===""?".":tt+":",I$1(a))for(var at=0;at<a.length;at++){gt=a[at];var s=tt+Q$1(gt,at);rt+=R$3(gt,o,_e,s,ct)}else if(s=A$2(a),typeof s=="function")for(a=s.call(a),at=0;!(gt=a.next()).done;)gt=gt.value,s=tt+Q$1(gt,at++),rt+=R$3(gt,o,_e,s,ct);else if(gt==="object")throw o=String(a),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$3(a,o,_e){if(a==null)return a;var tt=[],ct=0;return R$3(a,tt,"","",function(gt){return o.call(_e,gt,ct++)}),tt}function T$2(a){if(a._status===-1){var o=a._result;o=o(),o.then(function(_e){(a._status===0||a._status===-1)&&(a._status=1,a._result=_e)},function(_e){(a._status===0||a._status===-1)&&(a._status=2,a._result=_e)}),a._status===-1&&(a._status=0,a._result=o)}if(a._status===1)return a._result.default;throw a._result}var U$2={current:null},V$1={transition:null},W$3={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};react_production_min.Children={map:S$3,forEach:function(a,o,_e){S$3(a,function(){o.apply(this,arguments)},_e)},count:function(a){var o=0;return S$3(a,function(){o++}),o},toArray:function(a){return S$3(a,function(o){return o})||[]},only:function(a){if(!O$3(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(a,o,_e){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var tt=C$3({},a.props),ct=a.key,gt=a.ref,rt=a._owner;if(o!=null){if(o.ref!==void 0&&(gt=o.ref,rt=K$2.current),o.key!==void 0&&(ct=""+o.key),a.type&&a.type.defaultProps)var at=a.type.defaultProps;for(s in o)J$1.call(o,s)&&!L$1.hasOwnProperty(s)&&(tt[s]=o[s]===void 0&&at!==void 0?at[s]:o[s])}var s=arguments.length-2;if(s===1)tt.children=_e;else if(1<s){at=Array(s);for(var et=0;et<s;et++)at[et]=arguments[et+2];tt.children=at}return{$$typeof:l$3,type:a.type,key:ct,ref:gt,props:tt,_owner:rt}};react_production_min.createContext=function(a){return a={$$typeof:u$2,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$2,_context:a},a.Consumer=a};react_production_min.createElement=M$3;react_production_min.createFactory=function(a){var o=M$3.bind(null,a);return o.type=a,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$3,render:a}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(a){return{$$typeof:y$1,_payload:{_status:-1,_result:a},_init:T$2}};react_production_min.memo=function(a,o){return{$$typeof:x$2,type:a,compare:o===void 0?null:o}};react_production_min.startTransition=function(a){var o=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,o){return U$2.current.useCallback(a,o)};react_production_min.useContext=function(a){return U$2.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$2.current.useDeferredValue(a)};react_production_min.useEffect=function(a,o){return U$2.current.useEffect(a,o)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(a,o,_e){return U$2.current.useImperativeHandle(a,o,_e)};react_production_min.useInsertionEffect=function(a,o){return U$2.current.useInsertionEffect(a,o)};react_production_min.useLayoutEffect=function(a,o){return U$2.current.useLayoutEffect(a,o)};react_production_min.useMemo=function(a,o){return U$2.current.useMemo(a,o)};react_production_min.useReducer=function(a,o,_e){return U$2.current.useReducer(a,o,_e)};react_production_min.useRef=function(a){return U$2.current.useRef(a)};react_production_min.useState=function(a){return U$2.current.useState(a)};react_production_min.useSyncExternalStore=function(a,o,_e){return U$2.current.useSyncExternalStore(a,o,_e)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(a,o,_e){var tt,ct={},gt=null,rt=null;_e!==void 0&&(gt=""+_e),o.key!==void 0&&(gt=""+o.key),o.ref!==void 0&&(rt=o.ref);for(tt in o)m$3.call(o,tt)&&!p$3.hasOwnProperty(tt)&&(ct[tt]=o[tt]);if(a&&a.defaultProps)for(tt in o=a.defaultProps,o)ct[tt]===void 0&&(ct[tt]=o[tt]);return{$$typeof:k$2,type:a,key:gt,ref:rt,props:ct,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function o(cn,un){var fn=cn.length;cn.push(un);e:for(;0<fn;){var vn=fn-1>>>1,Ft=cn[vn];if(0<ct(Ft,un))cn[vn]=un,cn[fn]=Ft,fn=vn;else break e}}function _e(cn){return cn.length===0?null:cn[0]}function tt(cn){if(cn.length===0)return null;var un=cn[0],fn=cn.pop();if(fn!==un){cn[0]=fn;e:for(var vn=0,Ft=cn.length,pn=Ft>>>1;vn<pn;){var gn=2*(vn+1)-1,Tn=cn[gn],In=gn+1,kn=cn[In];if(0>ct(Tn,fn))In<Ft&&0>ct(kn,Tn)?(cn[vn]=kn,cn[In]=fn,vn=In):(cn[vn]=Tn,cn[gn]=fn,vn=gn);else if(In<Ft&&0>ct(kn,fn))cn[vn]=kn,cn[In]=fn,vn=In;else break e}}return un}function ct(cn,un){var fn=cn.sortIndex-un.sortIndex;return fn!==0?fn:cn.id-un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var gt=performance;a.unstable_now=function(){return gt.now()}}else{var rt=Date,at=rt.now();a.unstable_now=function(){return rt.now()-at}}var s=[],et=[],nt=1,ot=null,ht=3,dt=!1,pt=!1,lt=!1,mt=typeof setTimeout=="function"?setTimeout:null,st=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(cn){for(var un=_e(et);un!==null;){if(un.callback===null)tt(et);else if(un.startTime<=cn)tt(et),un.sortIndex=un.expirationTime,o(s,un);else break;un=_e(et)}}function yt(cn){if(lt=!1,ft(cn),!pt)if(_e(s)!==null)pt=!0,tn(vt);else{var un=_e(et);un!==null&&zt(yt,un.startTime-cn)}}function vt(cn,un){pt=!1,lt&&(lt=!1,st(Ut),Ut=-1),dt=!0;var fn=ht;try{for(ft(un),ot=_e(s);ot!==null&&(!(ot.expirationTime>un)||cn&&!Dt());){var vn=ot.callback;if(typeof vn=="function"){ot.callback=null,ht=ot.priorityLevel;var Ft=vn(ot.expirationTime<=un);un=a.unstable_now(),typeof Ft=="function"?ot.callback=Ft:ot===_e(s)&&tt(s),ft(un)}else tt(s);ot=_e(s)}if(ot!==null)var pn=!0;else{var gn=_e(et);gn!==null&&zt(yt,gn.startTime-un),pn=!1}return pn}finally{ot=null,ht=fn,dt=!1}}var St=!1,xt=null,Ut=-1,Tt=5,kt=-1;function Dt(){return!(a.unstable_now()-kt<Tt)}function Vt(){if(xt!==null){var cn=a.unstable_now();kt=cn;var un=!0;try{un=xt(!0,cn)}finally{un?Ot():(St=!1,xt=null)}}else St=!1}var Ot;if(typeof ut=="function")Ot=function(){ut(Vt)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,Gt=Lt.port2;Lt.port1.onmessage=Vt,Ot=function(){Gt.postMessage(null)}}else Ot=function(){mt(Vt,0)};function tn(cn){xt=cn,St||(St=!0,Ot())}function zt(cn,un){Ut=mt(function(){cn(a.unstable_now())},un)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(cn){cn.callback=null},a.unstable_continueExecution=function(){pt||dt||(pt=!0,tn(vt))},a.unstable_forceFrameRate=function(cn){0>cn||125<cn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tt=0<cn?Math.floor(1e3/cn):5},a.unstable_getCurrentPriorityLevel=function(){return ht},a.unstable_getFirstCallbackNode=function(){return _e(s)},a.unstable_next=function(cn){switch(ht){case 1:case 2:case 3:var un=3;break;default:un=ht}var fn=ht;ht=un;try{return cn()}finally{ht=fn}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(cn,un){switch(cn){case 1:case 2:case 3:case 4:case 5:break;default:cn=3}var fn=ht;ht=cn;try{return un()}finally{ht=fn}},a.unstable_scheduleCallback=function(cn,un,fn){var vn=a.unstable_now();switch(typeof fn=="object"&&fn!==null?(fn=fn.delay,fn=typeof fn=="number"&&0<fn?vn+fn:vn):fn=vn,cn){case 1:var Ft=-1;break;case 2:Ft=250;break;case 5:Ft=1073741823;break;case 4:Ft=1e4;break;default:Ft=5e3}return Ft=fn+Ft,cn={id:nt++,callback:un,priorityLevel:cn,startTime:fn,expirationTime:Ft,sortIndex:-1},fn>vn?(cn.sortIndex=fn,o(et,cn),_e(s)===null&&cn===_e(et)&&(lt?(st(Ut),Ut=-1):lt=!0,zt(yt,fn-vn))):(cn.sortIndex=Ft,o(s,cn),pt||dt||(pt=!0,tn(vt))),cn},a.unstable_shouldYield=Dt,a.unstable_wrapCallback=function(cn){var un=ht;return function(){var fn=ht;ht=un;try{return cn.apply(this,arguments)}finally{ht=fn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,_e=1;_e<arguments.length;_e++)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,o){ha(a,o),ha(a+"Capture",o)}function ha(a,o){for(ea[a]=o,a=0;a<o.length;a++)da.add(o[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,o,_e,tt){if(_e!==null&&_e.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return tt?!1:_e!==null?!_e.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,o,_e,tt){if(o===null||typeof o>"u"||pa(a,o,_e,tt))return!0;if(tt)return!1;if(_e!==null)switch(_e.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$2(a,o,_e,tt,ct,gt,rt){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=tt,this.attributeNamespace=ct,this.mustUseProperty=_e,this.propertyName=a,this.type=o,this.sanitizeURL=gt,this.removeEmptyString=rt}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z$2[a]=new v$2(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var o=a[0];z$2[o]=new v$2(o,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z$2[a]=new v$2(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z$2[a]=new v$2(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z$2[a]=new v$2(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z$2[a]=new v$2(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z$2[a]=new v$2(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,o,_e,tt){var ct=z$2.hasOwnProperty(o)?z$2[o]:null;(ct!==null?ct.type!==0:tt||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,_e,ct,tt)&&(_e=null),tt||ct===null?oa(o)&&(_e===null?a.removeAttribute(o):a.setAttribute(o,""+_e)):ct.mustUseProperty?a[ct.propertyName]=_e===null?ct.type===3?!1:"":_e:(o=ct.attributeName,tt=ct.attributeNamespace,_e===null?a.removeAttribute(o):(ct=ct.type,_e=ct===3||ct===4&&_e===!0?"":""+_e,tt?a.setAttributeNS(tt,o,_e):a.setAttribute(o,_e))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A$1=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(_e){var o=_e.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+a}var Na=!1;function Oa(a,o){if(!a||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(et){var tt=et}Reflect.construct(a,[],o)}else{try{o.call()}catch(et){tt=et}a.call(o.prototype)}else{try{throw Error()}catch(et){tt=et}a()}}catch(et){if(et&&tt&&typeof et.stack=="string"){for(var ct=et.stack.split(`
`),gt=tt.stack.split(`
`),rt=ct.length-1,at=gt.length-1;1<=rt&&0<=at&&ct[rt]!==gt[at];)at--;for(;1<=rt&&0<=at;rt--,at--)if(ct[rt]!==gt[at]){if(rt!==1||at!==1)do if(rt--,at--,0>at||ct[rt]!==gt[at]){var s=`
`+ct[rt].replace(" at new "," at ");return a.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",a.displayName)),s}while(1<=rt&&0<=at);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return o=a.displayName||null,o!==null?o:Qa(a.type)||"Memo";case Ha:o=a._payload,a=a._init;try{return Qa(a(o))}catch{}}return null}function Ra(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=o.render,a=a.displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(a){var o=Ta(a)?"checked":"value",_e=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),tt=""+a[o];if(!a.hasOwnProperty(o)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var ct=_e.get,gt=_e.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return ct.call(this)},set:function(rt){tt=""+rt,gt.call(this,rt)}}),Object.defineProperty(a,o,{enumerable:_e.enumerable}),{getValue:function(){return tt},setValue:function(rt){tt=""+rt},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var _e=o.getValue(),tt="";return a&&(tt=Ta(a)?a.checked?"true":"false":a.value),a=tt,a!==_e?(o.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,o){var _e=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??a._wrapperState.initialChecked})}function Za(a,o){var _e=o.defaultValue==null?"":o.defaultValue,tt=o.checked!=null?o.checked:o.defaultChecked;_e=Sa(o.value!=null?o.value:_e),a._wrapperState={initialChecked:tt,initialValue:_e,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(a,o){o=o.checked,o!=null&&ta(a,"checked",o,!1)}function bb(a,o){ab(a,o);var _e=Sa(o.value),tt=o.type;if(_e!=null)tt==="number"?(_e===0&&a.value===""||a.value!=_e)&&(a.value=""+_e):a.value!==""+_e&&(a.value=""+_e);else if(tt==="submit"||tt==="reset"){a.removeAttribute("value");return}o.hasOwnProperty("value")?cb(a,o.type,_e):o.hasOwnProperty("defaultValue")&&cb(a,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(a.defaultChecked=!!o.defaultChecked)}function db(a,o,_e){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var tt=o.type;if(!(tt!=="submit"&&tt!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+a._wrapperState.initialValue,_e||o===a.value||(a.value=o),a.defaultValue=o}_e=a.name,_e!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,_e!==""&&(a.name=_e)}function cb(a,o,_e){(o!=="number"||Xa(a.ownerDocument)!==a)&&(_e==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+_e&&(a.defaultValue=""+_e))}var eb=Array.isArray;function fb(a,o,_e,tt){if(a=a.options,o){o={};for(var ct=0;ct<_e.length;ct++)o["$"+_e[ct]]=!0;for(_e=0;_e<a.length;_e++)ct=o.hasOwnProperty("$"+a[_e].value),a[_e].selected!==ct&&(a[_e].selected=ct),ct&&tt&&(a[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),o=null,ct=0;ct<a.length;ct++){if(a[ct].value===_e){a[ct].selected=!0,tt&&(a[ct].defaultSelected=!0);return}o!==null||a[ct].disabled||(o=a[ct])}o!==null&&(o.selected=!0)}}function gb(a,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,o){var _e=o.value;if(_e==null){if(_e=o.children,o=o.defaultValue,_e!=null){if(o!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}o=_e}o==null&&(o=""),_e=o}a._wrapperState={initialValue:Sa(_e)}}function ib(a,o){var _e=Sa(o.value),tt=Sa(o.defaultValue);_e!=null&&(_e=""+_e,_e!==a.value&&(a.value=_e),o.defaultValue==null&&a.defaultValue!==_e&&(a.defaultValue=_e)),tt!=null&&(a.defaultValue=""+tt)}function jb(a){var o=a.textContent;o===a._wrapperState.initialValue&&o!==""&&o!==null&&(a.value=o)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,o){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(o):a==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,_e,tt,ct){MSApp.execUnsafeLocalFunction(function(){return a(o,_e,tt,ct)})}:a}(function(a,o){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;o.firstChild;)a.appendChild(o.firstChild)}});function ob(a,o){if(o){var _e=a.firstChild;if(_e&&_e===a.lastChild&&_e.nodeType===3){_e.nodeValue=o;return}}a.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(o){o=o+a.charAt(0).toUpperCase()+a.substring(1),pb[o]=pb[a]})});function rb(a,o,_e){return o==null||typeof o=="boolean"||o===""?"":_e||typeof o!="number"||o===0||pb.hasOwnProperty(a)&&pb[a]?(""+o).trim():o+"px"}function sb(a,o){a=a.style;for(var _e in o)if(o.hasOwnProperty(_e)){var tt=_e.indexOf("--")===0,ct=rb(_e,o[_e],tt);_e==="float"&&(_e="cssFloat"),tt?a.setProperty(_e,ct):a[_e]=ct}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,o){if(o){if(tb[a]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$2(137,a));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$2(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$2(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$2(62))}}function vb(a,o){if(a.indexOf("-")===-1)return typeof o.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p$2(280));var o=a.stateNode;o&&(o=Db(o),yb(a.stateNode,a.type,o))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,o=Ab;if(Ab=zb=null,Bb(a),o)for(a=0;a<o.length;a++)Bb(o[a])}}function Gb(a,o){return a(o)}function Hb(){}var Ib=!1;function Jb(a,o,_e){if(Ib)return a(o,_e);Ib=!0;try{return Gb(a,o,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,o){var _e=a.stateNode;if(_e===null)return null;var tt=Db(_e);if(tt===null)return null;_e=tt[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(a=a.type,tt=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!tt;break e;default:a=!1}if(a)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,o,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,o,_e,tt,ct,gt,rt,at,s){var et=Array.prototype.slice.call(arguments,3);try{o.apply(_e,et)}catch(nt){this.onError(nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,o,_e,tt,ct,gt,rt,at,s){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,o,_e,tt,ct,gt,rt,at,s){if(Tb.apply(this,arguments),Ob){if(Ob){var et=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=et)}}function Vb(a){var o=a,_e=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,o.flags&4098&&(_e=o.return),a=o.return;while(a)}return o.tag===3?_e:null}function Wb(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p$2(188))}function Yb(a){var o=a.alternate;if(!o){if(o=Vb(a),o===null)throw Error(p$2(188));return o!==a?null:a}for(var _e=a,tt=o;;){var ct=_e.return;if(ct===null)break;var gt=ct.alternate;if(gt===null){if(tt=ct.return,tt!==null){_e=tt;continue}break}if(ct.child===gt.child){for(gt=ct.child;gt;){if(gt===_e)return Xb(ct),a;if(gt===tt)return Xb(ct),o;gt=gt.sibling}throw Error(p$2(188))}if(_e.return!==tt.return)_e=ct,tt=gt;else{for(var rt=!1,at=ct.child;at;){if(at===_e){rt=!0,_e=ct,tt=gt;break}if(at===tt){rt=!0,tt=ct,_e=gt;break}at=at.sibling}if(!rt){for(at=gt.child;at;){if(at===_e){rt=!0,_e=gt,tt=ct;break}if(at===tt){rt=!0,tt=gt,_e=ct;break}at=at.sibling}if(!rt)throw Error(p$2(189))}}if(_e.alternate!==tt)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?a:o}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=$b(a);if(o!==null)return o;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,o){var _e=a.pendingLanes;if(_e===0)return 0;var tt=0,ct=a.suspendedLanes,gt=a.pingedLanes,rt=_e&268435455;if(rt!==0){var at=rt&~ct;at!==0?tt=tc(at):(gt&=rt,gt!==0&&(tt=tc(gt)))}else rt=_e&~ct,rt!==0?tt=tc(rt):gt!==0&&(tt=tc(gt));if(tt===0)return 0;if(o!==0&&o!==tt&&!(o&ct)&&(ct=tt&-tt,gt=o&-o,ct>=gt||ct===16&&(gt&4194240)!==0))return o;if(tt&4&&(tt|=_e&16),o=a.entangledLanes,o!==0)for(a=a.entanglements,o&=tt;0<o;)_e=31-oc(o),ct=1<<_e,tt|=a[_e],o&=~ct;return tt}function vc(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,o){for(var _e=a.suspendedLanes,tt=a.pingedLanes,ct=a.expirationTimes,gt=a.pendingLanes;0<gt;){var rt=31-oc(gt),at=1<<rt,s=ct[rt];s===-1?(!(at&_e)||at&tt)&&(ct[rt]=vc(at,o)):s<=o&&(a.expiredLanes|=at),gt&=~at}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var o=[],_e=0;31>_e;_e++)o.push(a);return o}function Ac(a,o,_e){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,o=31-oc(o),a[o]=_e}function Bc(a,o){var _e=a.pendingLanes&~o;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=o,a.mutableReadLanes&=o,a.entangledLanes&=o,o=a.entanglements;var tt=a.eventTimes;for(a=a.expirationTimes;0<_e;){var ct=31-oc(_e),gt=1<<ct;o[ct]=0,tt[ct]=-1,a[ct]=-1,_e&=~gt}}function Cc(a,o){var _e=a.entangledLanes|=o;for(a=a.entanglements;_e;){var tt=31-oc(_e),ct=1<<tt;ct&o|a[tt]&o&&(a[tt]|=o),_e&=~ct}}var C$2=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,o){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(a,o,_e,tt,ct,gt){return a===null||a.nativeEvent!==gt?(a={blockedOn:o,domEventName:_e,eventSystemFlags:tt,nativeEvent:gt,targetContainers:[ct]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),a):(a.eventSystemFlags|=tt,o=a.targetContainers,ct!==null&&o.indexOf(ct)===-1&&o.push(ct),a)}function Uc(a,o,_e,tt,ct){switch(o){case"focusin":return Lc=Tc(Lc,a,o,_e,tt,ct),!0;case"dragenter":return Mc=Tc(Mc,a,o,_e,tt,ct),!0;case"mouseover":return Nc=Tc(Nc,a,o,_e,tt,ct),!0;case"pointerover":var gt=ct.pointerId;return Oc.set(gt,Tc(Oc.get(gt)||null,a,o,_e,tt,ct)),!0;case"gotpointercapture":return gt=ct.pointerId,Pc.set(gt,Tc(Pc.get(gt)||null,a,o,_e,tt,ct)),!0}return!1}function Vc(a){var o=Wc(a.target);if(o!==null){var _e=Vb(o);if(_e!==null){if(o=_e.tag,o===13){if(o=Wb(_e),o!==null){a.blockedOn=o,Ic(a.priority,function(){Gc(_e)});return}}else if(o===3&&_e.stateNode.current.memoizedState.isDehydrated){a.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var _e=Yc(a.domEventName,a.eventSystemFlags,o[0],a.nativeEvent);if(_e===null){_e=a.nativeEvent;var tt=new _e.constructor(_e.type,_e);wb=tt,_e.target.dispatchEvent(tt),wb=null}else return o=Cb(_e),o!==null&&Fc(o),a.blockedOn=_e,!1;o.shift()}return!0}function Zc(a,o,_e){Xc(a)&&_e.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,o){a.blockedOn===o&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function o(ct){return ad(ct,a)}if(0<Kc.length){ad(Kc[0],a);for(var _e=1;_e<Kc.length;_e++){var tt=Kc[_e];tt.blockedOn===a&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(o),Pc.forEach(o),_e=0;_e<Qc.length;_e++)tt=Qc[_e],tt.blockedOn===a&&(tt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(a,o,_e,tt){var ct=C$2,gt=cd.transition;cd.transition=null;try{C$2=1,fd(a,o,_e,tt)}finally{C$2=ct,cd.transition=gt}}function gd(a,o,_e,tt){var ct=C$2,gt=cd.transition;cd.transition=null;try{C$2=4,fd(a,o,_e,tt)}finally{C$2=ct,cd.transition=gt}}function fd(a,o,_e,tt){if(dd){var ct=Yc(a,o,_e,tt);if(ct===null)hd(a,o,tt,id,_e),Sc(a,tt);else if(Uc(ct,a,o,_e,tt))tt.stopPropagation();else if(Sc(a,tt),o&4&&-1<Rc.indexOf(a)){for(;ct!==null;){var gt=Cb(ct);if(gt!==null&&Ec(gt),gt=Yc(a,o,_e,tt),gt===null&&hd(a,o,tt,id,_e),gt===ct)break;ct=gt}ct!==null&&tt.stopPropagation()}else hd(a,o,tt,null,_e)}}var id=null;function Yc(a,o,_e,tt){if(id=null,a=xb(tt),a=Wc(a),a!==null)if(o=Vb(a),o===null)a=null;else if(_e=o.tag,_e===13){if(a=Wb(o),a!==null)return a;a=null}else if(_e===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,o=ld,_e=o.length,tt,ct="value"in kd?kd.value:kd.textContent,gt=ct.length;for(a=0;a<_e&&o[a]===ct[a];a++);var rt=_e-a;for(tt=1;tt<=rt&&o[_e-tt]===ct[gt-tt];tt++);return md=ct.slice(a,1<tt?1-tt:void 0)}function od(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function o(_e,tt,ct,gt,rt){this._reactName=_e,this._targetInst=ct,this.type=tt,this.nativeEvent=gt,this.target=rt,this.currentTarget=null;for(var at in a)a.hasOwnProperty(at)&&(_e=a[at],this[at]=_e?_e(gt):gt[at]);return this.isDefaultPrevented=(gt.defaultPrevented!=null?gt.defaultPrevented:gt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Od[a])?!!o[a]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(a){if(a.key){var o=Md[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge(a,o){switch(a){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie$1=!1;function je(a,o){switch(a){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee$1);case"textInput":return a=o.data,a===ee$1&&fe?null:a;default:return null}}function ke(a,o){if(ie$1)return a==="compositionend"||!ae&&ge(a,o)?(a=nd(),md=ld=kd=null,ie$1=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!le[a.type]:o==="textarea"}function ne(a,o,_e,tt){Eb(tt),o=oe(o,"onChange"),0<o.length&&(_e=new td("onChange","change",null,_e,tt),a.push({event:_e,listeners:o}))}var pe=null,qe=null;function re(a){se(a,0)}function te$1(a){var o=ue(a);if(Wa(o))return a}function ve(a,o){if(a==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var o=[];ne(o,qe,a,xb(a)),Jb(re,o)}}function Ce(a,o,_e){a==="focusin"?(Ae(),pe=o,qe=_e,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee(a,o){if(a==="click")return te$1(o)}function Fe(a,o){if(a==="input"||a==="change")return te$1(o)}function Ge(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,o){if(He(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var _e=Object.keys(a),tt=Object.keys(o);if(_e.length!==tt.length)return!1;for(tt=0;tt<_e.length;tt++){var ct=_e[tt];if(!ja.call(o,ct)||!He(a[ct],o[ct]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,o){var _e=Je(a);a=0;for(var tt;_e;){if(_e.nodeType===3){if(tt=a+_e.textContent.length,a<=o&&tt>=o)return{node:_e,offset:o-a};a=tt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Le(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var a=window,o=Xa();o instanceof a.HTMLIFrameElement;){try{var _e=typeof o.contentWindow.location.href=="string"}catch{_e=!1}if(_e)a=o.contentWindow;else break;o=Xa(a.document)}return o}function Ne(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function Oe(a){var o=Me(),_e=a.focusedElem,tt=a.selectionRange;if(o!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(tt!==null&&Ne(_e)){if(o=tt.start,a=tt.end,a===void 0&&(a=o),"selectionStart"in _e)_e.selectionStart=o,_e.selectionEnd=Math.min(a,_e.value.length);else if(a=(o=_e.ownerDocument||document)&&o.defaultView||window,a.getSelection){a=a.getSelection();var ct=_e.textContent.length,gt=Math.min(tt.start,ct);tt=tt.end===void 0?gt:Math.min(tt.end,ct),!a.extend&&gt>tt&&(ct=tt,tt=gt,gt=ct),ct=Ke(_e,gt);var rt=Ke(_e,tt);ct&&rt&&(a.rangeCount!==1||a.anchorNode!==ct.node||a.anchorOffset!==ct.offset||a.focusNode!==rt.node||a.focusOffset!==rt.offset)&&(o=o.createRange(),o.setStart(ct.node,ct.offset),a.removeAllRanges(),gt>tt?(a.addRange(o),a.extend(rt.node,rt.offset)):(o.setEnd(rt.node,rt.offset),a.addRange(o)))}}for(o=[],a=_e;a=a.parentNode;)a.nodeType===1&&o.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<o.length;_e++)a=o[_e],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,o,_e){var tt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(o=new td("onSelect","select",null,o,_e),a.push({event:o,listeners:tt}),o.target=Qe)))}function Ve(a,o){var _e={};return _e[a.toLowerCase()]=o.toLowerCase(),_e["Webkit"+a]="webkit"+o,_e["Moz"+a]="moz"+o,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var o=We[a],_e;for(_e in o)if(o.hasOwnProperty(_e)&&_e in Ye)return Xe[a]=o[_e];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,o){df.set(a,o),fa(o,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,o,_e){var tt=a.type||"unknown-event";a.currentTarget=_e,Ub(tt,o,void 0,a),a.currentTarget=null}function se(a,o){o=(o&4)!==0;for(var _e=0;_e<a.length;_e++){var tt=a[_e],ct=tt.event;tt=tt.listeners;e:{var gt=void 0;if(o)for(var rt=tt.length-1;0<=rt;rt--){var at=tt[rt],s=at.instance,et=at.currentTarget;if(at=at.listener,s!==gt&&ct.isPropagationStopped())break e;nf(ct,at,et),gt=s}else for(rt=0;rt<tt.length;rt++){if(at=tt[rt],s=at.instance,et=at.currentTarget,at=at.listener,s!==gt&&ct.isPropagationStopped())break e;nf(ct,at,et),gt=s}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,o){var _e=o[of];_e===void 0&&(_e=o[of]=new Set);var tt=a+"__bubble";_e.has(tt)||(pf(o,a,2,!1),_e.add(tt))}function qf(a,o,_e){var tt=0;o&&(tt|=4),pf(_e,a,tt,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,a),qf(_e,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(a,o,_e,tt){switch(jd(o)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}_e=ct.bind(null,o,_e,a),ct=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(ct=!0),tt?ct!==void 0?a.addEventListener(o,_e,{capture:!0,passive:ct}):a.addEventListener(o,_e,!0):ct!==void 0?a.addEventListener(o,_e,{passive:ct}):a.addEventListener(o,_e,!1)}function hd(a,o,_e,tt,ct){var gt=tt;if(!(o&1)&&!(o&2)&&tt!==null)e:for(;;){if(tt===null)return;var rt=tt.tag;if(rt===3||rt===4){var at=tt.stateNode.containerInfo;if(at===ct||at.nodeType===8&&at.parentNode===ct)break;if(rt===4)for(rt=tt.return;rt!==null;){var s=rt.tag;if((s===3||s===4)&&(s=rt.stateNode.containerInfo,s===ct||s.nodeType===8&&s.parentNode===ct))return;rt=rt.return}for(;at!==null;){if(rt=Wc(at),rt===null)return;if(s=rt.tag,s===5||s===6){tt=gt=rt;continue e}at=at.parentNode}}tt=tt.return}Jb(function(){var et=gt,nt=xb(_e),ot=[];e:{var ht=df.get(a);if(ht!==void 0){var dt=td,pt=a;switch(a){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":dt=Rd;break;case"focusin":pt="focus",dt=Fd;break;case"focusout":pt="blur",dt=Fd;break;case"beforeblur":case"afterblur":dt=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Vd;break;case $e:case af:case bf:dt=Hd;break;case cf:dt=Xd;break;case"scroll":dt=vd;break;case"wheel":dt=Zd;break;case"copy":case"cut":case"paste":dt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Td}var lt=(o&4)!==0,mt=!lt&&a==="scroll",st=lt?ht!==null?ht+"Capture":null:ht;lt=[];for(var ut=et,ft;ut!==null;){ft=ut;var yt=ft.stateNode;if(ft.tag===5&&yt!==null&&(ft=yt,st!==null&&(yt=Kb(ut,st),yt!=null&&lt.push(tf(ut,yt,ft)))),mt)break;ut=ut.return}0<lt.length&&(ht=new dt(ht,pt,null,_e,nt),ot.push({event:ht,listeners:lt}))}}if(!(o&7)){e:{if(ht=a==="mouseover"||a==="pointerover",dt=a==="mouseout"||a==="pointerout",ht&&_e!==wb&&(pt=_e.relatedTarget||_e.fromElement)&&(Wc(pt)||pt[uf]))break e;if((dt||ht)&&(ht=nt.window===nt?nt:(ht=nt.ownerDocument)?ht.defaultView||ht.parentWindow:window,dt?(pt=_e.relatedTarget||_e.toElement,dt=et,pt=pt?Wc(pt):null,pt!==null&&(mt=Vb(pt),pt!==mt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(dt=null,pt=et),dt!==pt)){if(lt=Bd,yt="onMouseLeave",st="onMouseEnter",ut="mouse",(a==="pointerout"||a==="pointerover")&&(lt=Td,yt="onPointerLeave",st="onPointerEnter",ut="pointer"),mt=dt==null?ht:ue(dt),ft=pt==null?ht:ue(pt),ht=new lt(yt,ut+"leave",dt,_e,nt),ht.target=mt,ht.relatedTarget=ft,yt=null,Wc(nt)===et&&(lt=new lt(st,ut+"enter",pt,_e,nt),lt.target=ft,lt.relatedTarget=mt,yt=lt),mt=yt,dt&&pt)t:{for(lt=dt,st=pt,ut=0,ft=lt;ft;ft=vf(ft))ut++;for(ft=0,yt=st;yt;yt=vf(yt))ft++;for(;0<ut-ft;)lt=vf(lt),ut--;for(;0<ft-ut;)st=vf(st),ft--;for(;ut--;){if(lt===st||st!==null&&lt===st.alternate)break t;lt=vf(lt),st=vf(st)}lt=null}else lt=null;dt!==null&&wf(ot,ht,dt,lt,!1),pt!==null&&mt!==null&&wf(ot,mt,pt,lt,!0)}}e:{if(ht=et?ue(et):window,dt=ht.nodeName&&ht.nodeName.toLowerCase(),dt==="select"||dt==="input"&&ht.type==="file")var vt=ve;else if(me(ht))if(we)vt=Fe;else{vt=De;var St=Ce}else(dt=ht.nodeName)&&dt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(vt=Ee);if(vt&&(vt=vt(a,et))){ne(ot,vt,_e,nt);break e}St&&St(a,ht,et),a==="focusout"&&(St=ht._wrapperState)&&St.controlled&&ht.type==="number"&&cb(ht,"number",ht.value)}switch(St=et?ue(et):window,a){case"focusin":(me(St)||St.contentEditable==="true")&&(Qe=St,Re=et,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ot,_e,nt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ot,_e,nt)}var xt;if(ae)e:{switch(a){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else ie$1?ge(a,_e)&&(Ut="onCompositionEnd"):a==="keydown"&&_e.keyCode===229&&(Ut="onCompositionStart");Ut&&(de&&_e.locale!=="ko"&&(ie$1||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ie$1&&(xt=nd()):(kd=nt,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),St=oe(et,Ut),0<St.length&&(Ut=new Ld(Ut,a,null,_e,nt),ot.push({event:Ut,listeners:St}),xt?Ut.data=xt:(xt=he(_e),xt!==null&&(Ut.data=xt)))),(xt=ce?je(a,_e):ke(a,_e))&&(et=oe(et,"onBeforeInput"),0<et.length&&(nt=new Ld("onBeforeInput","beforeinput",null,_e,nt),ot.push({event:nt,listeners:et}),nt.data=xt))}se(ot,o)})}function tf(a,o,_e){return{instance:a,listener:o,currentTarget:_e}}function oe(a,o){for(var _e=o+"Capture",tt=[];a!==null;){var ct=a,gt=ct.stateNode;ct.tag===5&&gt!==null&&(ct=gt,gt=Kb(a,_e),gt!=null&&tt.unshift(tf(a,gt,ct)),gt=Kb(a,o),gt!=null&&tt.push(tf(a,gt,ct))),a=a.return}return tt}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,o,_e,tt,ct){for(var gt=o._reactName,rt=[];_e!==null&&_e!==tt;){var at=_e,s=at.alternate,et=at.stateNode;if(s!==null&&s===tt)break;at.tag===5&&et!==null&&(at=et,ct?(s=Kb(_e,gt),s!=null&&rt.unshift(tf(_e,s,at))):ct||(s=Kb(_e,gt),s!=null&&rt.push(tf(_e,s,at)))),_e=_e.return}rt.length!==0&&a.push({event:o,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,o,_e){if(o=zf(o),zf(a)!==o&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,o){var _e=o,tt=0;do{var ct=_e.nextSibling;if(a.removeChild(_e),ct&&ct.nodeType===8)if(_e=ct.data,_e==="/$"){if(tt===0){a.removeChild(ct),bd(o);return}tt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tt++;_e=ct}while(_e);bd(o)}function Lf(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(o===0)return a;o--}else _e==="/$"&&o++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var o=a[Of];if(o)return o;for(var _e=a.parentNode;_e;){if(o=_e[uf]||_e[Of]){if(_e=o.alternate,o.child!==null||_e!==null&&_e.child!==null)for(a=Mf(a);a!==null;){if(_e=a[Of])return _e;a=Mf(a)}return o}a=_e,_e=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$2(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E$1(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(a,o){Tf++,Sf[Tf]=a.current,a.current=o}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,o){var _e=a.type.contextTypes;if(!_e)return Vf;var tt=a.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===o)return tt.__reactInternalMemoizedMaskedChildContext;var ct={},gt;for(gt in _e)ct[gt]=o[gt];return tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(a,o,_e){if(H$1.current!==Vf)throw Error(p$2(168));G$1(H$1,o),G$1(Wf,_e)}function bg(a,o,_e){var tt=a.stateNode;if(o=o.childContextTypes,typeof tt.getChildContext!="function")return _e;tt=tt.getChildContext();for(var ct in tt)if(!(ct in o))throw Error(p$2(108,Ra(a)||"Unknown",ct));return A$1({},_e,tt)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,a),G$1(Wf,Wf.current),!0}function dg(a,o,_e){var tt=a.stateNode;if(!tt)throw Error(p$2(169));_e?(a=bg(a,o,Xf),tt.__reactInternalMemoizedMergedChildContext=a,E$1(Wf),E$1(H$1),G$1(H$1,a)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,o=C$2;try{var _e=eg;for(C$2=1;a<_e.length;a++){var tt=_e[a];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),ct}finally{C$2=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,o){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=o}function ug(a,o,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var tt=rg;a=sg;var ct=32-oc(tt)-1;tt&=~(1<<ct),_e+=1;var gt=32-oc(o)+ct;if(30<gt){var rt=ct-ct%5;gt=(tt&(1<<rt)-1).toString(32),tt>>=rt,ct-=rt,rg=1<<32-oc(o)+ct|_e<<ct|tt,sg=gt+a}else rg=1<<gt|_e<<ct|tt,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,o){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=o,_e.return=a,o=a.deletions,o===null?(a.deletions=[_e],a.flags|=16):o.push(_e)}function Cg(a,o){switch(a.tag){case 5:var _e=a.type;return o=o.nodeType!==1||_e.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(a.stateNode=o,xg=a,yg=Lf(o.firstChild),!0):!1;case 6:return o=a.pendingProps===""||o.nodeType!==3?null:o,o!==null?(a.stateNode=o,xg=a,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:o,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=o,_e.return=a,a.child=_e,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var o=yg;if(o){var _e=o;if(!Cg(a,o)){if(Dg(a))throw Error(p$2(418));o=Lf(_e.nextSibling);var tt=xg;o&&Cg(a,o)?Ag(tt,_e):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p$2(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var o;if((o=a.tag!==3)&&!(o=a.tag!==5)&&(o=a.type,o=o!=="head"&&o!=="body"&&!Ef(a.type,a.memoizedProps)),o&&(o=yg)){if(Dg(a))throw Hg(),Error(p$2(418));for(;o;)Ag(a,o),o=Lf(o.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$2(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="/$"){if(o===0){yg=Lf(a.nextSibling);break e}o--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||o++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(a,o){if(a&&a.defaultProps){o=A$1({},o),a=a.defaultProps;for(var _e in a)o[_e]===void 0&&(o[_e]=a[_e]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var o=Mg.current;E$1(Mg),a._currentValue=o}function Sg(a,o,_e){for(;a!==null;){var tt=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,tt!==null&&(tt.childLanes|=o)):tt!==null&&(tt.childLanes&o)!==o&&(tt.childLanes|=o),a===_e)break;a=a.return}}function Tg(a,o){Ng=a,Pg=Og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&o&&(Ug=!0),a.firstContext=null)}function Vg(a){var o=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=a,Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return o}var Wg=null;function Xg(a){Wg===null?Wg=[a]:Wg.push(a)}function Yg(a,o,_e,tt){var ct=o.interleaved;return ct===null?(_e.next=_e,Xg(o)):(_e.next=ct.next,ct.next=_e),o.interleaved=_e,Zg(a,tt)}function Zg(a,o){a.lanes|=o;var _e=a.alternate;for(_e!==null&&(_e.lanes|=o),_e=a,a=a.return;a!==null;)a.childLanes|=o,_e=a.alternate,_e!==null&&(_e.childLanes|=o),_e=a,a=a.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(a,o,_e){var tt=a.updateQueue;if(tt===null)return null;if(tt=tt.shared,K$1&2){var ct=tt.pending;return ct===null?o.next=o:(o.next=ct.next,ct.next=o),tt.pending=o,Zg(a,_e)}return ct=tt.interleaved,ct===null?(o.next=o,Xg(tt)):(o.next=ct.next,ct.next=o),tt.interleaved=o,Zg(a,_e)}function eh(a,o,_e){if(o=o.updateQueue,o!==null&&(o=o.shared,(_e&4194240)!==0)){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}function fh(a,o){var _e=a.updateQueue,tt=a.alternate;if(tt!==null&&(tt=tt.updateQueue,_e===tt)){var ct=null,gt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var rt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};gt===null?ct=gt=rt:gt=gt.next=rt,_e=_e.next}while(_e!==null);gt===null?ct=gt=o:gt=gt.next=o}else ct=gt=o;_e={baseState:tt.baseState,firstBaseUpdate:ct,lastBaseUpdate:gt,shared:tt.shared,effects:tt.effects},a.updateQueue=_e;return}a=_e.lastBaseUpdate,a===null?_e.firstBaseUpdate=o:a.next=o,_e.lastBaseUpdate=o}function gh(a,o,_e,tt){var ct=a.updateQueue;$g=!1;var gt=ct.firstBaseUpdate,rt=ct.lastBaseUpdate,at=ct.shared.pending;if(at!==null){ct.shared.pending=null;var s=at,et=s.next;s.next=null,rt===null?gt=et:rt.next=et,rt=s;var nt=a.alternate;nt!==null&&(nt=nt.updateQueue,at=nt.lastBaseUpdate,at!==rt&&(at===null?nt.firstBaseUpdate=et:at.next=et,nt.lastBaseUpdate=s))}if(gt!==null){var ot=ct.baseState;rt=0,nt=et=s=null,at=gt;do{var ht=at.lane,dt=at.eventTime;if((tt&ht)===ht){nt!==null&&(nt=nt.next={eventTime:dt,lane:0,tag:at.tag,payload:at.payload,callback:at.callback,next:null});e:{var pt=a,lt=at;switch(ht=o,dt=_e,lt.tag){case 1:if(pt=lt.payload,typeof pt=="function"){ot=pt.call(dt,ot,ht);break e}ot=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=lt.payload,ht=typeof pt=="function"?pt.call(dt,ot,ht):pt,ht==null)break e;ot=A$1({},ot,ht);break e;case 2:$g=!0}}at.callback!==null&&at.lane!==0&&(a.flags|=64,ht=ct.effects,ht===null?ct.effects=[at]:ht.push(at))}else dt={eventTime:dt,lane:ht,tag:at.tag,payload:at.payload,callback:at.callback,next:null},nt===null?(et=nt=dt,s=ot):nt=nt.next=dt,rt|=ht;if(at=at.next,at===null){if(at=ct.shared.pending,at===null)break;ht=at,at=ht.next,ht.next=null,ct.lastBaseUpdate=ht,ct.shared.pending=null}}while(1);if(nt===null&&(s=ot),ct.baseState=s,ct.firstBaseUpdate=et,ct.lastBaseUpdate=nt,o=ct.shared.interleaved,o!==null){ct=o;do rt|=ct.lane,ct=ct.next;while(ct!==o)}else gt===null&&(ct.shared.lanes=0);hh|=rt,a.lanes=rt,a.memoizedState=ot}}function ih(a,o,_e){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var tt=a[o],ct=tt.callback;if(ct!==null){if(tt.callback=null,tt=_e,typeof ct!="function")throw Error(p$2(191,ct));ct.call(tt)}}}var jh=new aa.Component().refs;function kh(a,o,_e,tt){o=a.memoizedState,_e=_e(tt,o),_e=_e==null?o:A$1({},o,_e),a.memoizedState=_e,a.lanes===0&&(a.updateQueue.baseState=_e)}var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),gt=ch(tt,ct);gt.payload=o,_e!=null&&(gt.callback=_e),o=dh(a,gt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueReplaceState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),gt=ch(tt,ct);gt.tag=1,gt.payload=o,_e!=null&&(gt.callback=_e),o=dh(a,gt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var _e=L(),tt=lh(a),ct=ch(_e,tt);ct.tag=2,o!=null&&(ct.callback=o),o=dh(a,ct,tt),o!==null&&(mh(o,a,tt,_e),eh(o,a,tt))}};function oh(a,o,_e,tt,ct,gt,rt){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(tt,gt,rt):o.prototype&&o.prototype.isPureReactComponent?!Ie(_e,tt)||!Ie(ct,gt):!0}function ph(a,o,_e){var tt=!1,ct=Vf,gt=o.contextType;return typeof gt=="object"&&gt!==null?gt=Vg(gt):(ct=Zf(o)?Xf:H$1.current,tt=o.contextTypes,gt=(tt=tt!=null)?Yf(a,ct):Vf),o=new o(_e,gt),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,a.stateNode=o,o._reactInternals=a,tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=ct,a.__reactInternalMemoizedMaskedChildContext=gt),o}function qh(a,o,_e,tt){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(_e,tt),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(_e,tt),o.state!==a&&nh.enqueueReplaceState(o,o.state,null)}function rh(a,o,_e,tt){var ct=a.stateNode;ct.props=_e,ct.state=a.memoizedState,ct.refs=jh,ah(a);var gt=o.contextType;typeof gt=="object"&&gt!==null?ct.context=Vg(gt):(gt=Zf(o)?Xf:H$1.current,ct.context=Yf(a,gt)),ct.state=a.memoizedState,gt=o.getDerivedStateFromProps,typeof gt=="function"&&(kh(a,o,gt,_e),ct.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(o=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),o!==ct.state&&nh.enqueueReplaceState(ct,ct.state,null),gh(a,_e,ct,tt),ct.state=a.memoizedState),typeof ct.componentDidMount=="function"&&(a.flags|=4194308)}function sh(a,o,_e){if(a=_e.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var tt=_e.stateNode}if(!tt)throw Error(p$2(147,a));var ct=tt,gt=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===gt?o.ref:(o=function(rt){var at=ct.refs;at===jh&&(at=ct.refs={}),rt===null?delete at[gt]:at[gt]=rt},o._stringRef=gt,o)}if(typeof a!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,a))}return a}function th(a,o){throw a=Object.prototype.toString.call(o),Error(p$2(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function uh(a){var o=a._init;return o(a._payload)}function vh(a){function o(st,ut){if(a){var ft=st.deletions;ft===null?(st.deletions=[ut],st.flags|=16):ft.push(ut)}}function _e(st,ut){if(!a)return null;for(;ut!==null;)o(st,ut),ut=ut.sibling;return null}function tt(st,ut){for(st=new Map;ut!==null;)ut.key!==null?st.set(ut.key,ut):st.set(ut.index,ut),ut=ut.sibling;return st}function ct(st,ut){return st=wh(st,ut),st.index=0,st.sibling=null,st}function gt(st,ut,ft){return st.index=ft,a?(ft=st.alternate,ft!==null?(ft=ft.index,ft<ut?(st.flags|=2,ut):ft):(st.flags|=2,ut)):(st.flags|=1048576,ut)}function rt(st){return a&&st.alternate===null&&(st.flags|=2),st}function at(st,ut,ft,yt){return ut===null||ut.tag!==6?(ut=xh(ft,st.mode,yt),ut.return=st,ut):(ut=ct(ut,ft),ut.return=st,ut)}function s(st,ut,ft,yt){var vt=ft.type;return vt===ya?nt(st,ut,ft.props.children,yt,ft.key):ut!==null&&(ut.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===ut.type)?(yt=ct(ut,ft.props),yt.ref=sh(st,ut,ft),yt.return=st,yt):(yt=yh(ft.type,ft.key,ft.props,null,st.mode,yt),yt.ref=sh(st,ut,ft),yt.return=st,yt)}function et(st,ut,ft,yt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==ft.containerInfo||ut.stateNode.implementation!==ft.implementation?(ut=zh(ft,st.mode,yt),ut.return=st,ut):(ut=ct(ut,ft.children||[]),ut.return=st,ut)}function nt(st,ut,ft,yt,vt){return ut===null||ut.tag!==7?(ut=Ah(ft,st.mode,yt,vt),ut.return=st,ut):(ut=ct(ut,ft),ut.return=st,ut)}function ot(st,ut,ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=xh(""+ut,st.mode,ft),ut.return=st,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case va:return ft=yh(ut.type,ut.key,ut.props,null,st.mode,ft),ft.ref=sh(st,null,ut),ft.return=st,ft;case wa:return ut=zh(ut,st.mode,ft),ut.return=st,ut;case Ha:var yt=ut._init;return ot(st,yt(ut._payload),ft)}if(eb(ut)||Ka(ut))return ut=Ah(ut,st.mode,ft,null),ut.return=st,ut;th(st,ut)}return null}function ht(st,ut,ft,yt){var vt=ut!==null?ut.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return vt!==null?null:at(st,ut,""+ft,yt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===vt?s(st,ut,ft,yt):null;case wa:return ft.key===vt?et(st,ut,ft,yt):null;case Ha:return vt=ft._init,ht(st,ut,vt(ft._payload),yt)}if(eb(ft)||Ka(ft))return vt!==null?null:nt(st,ut,ft,yt,null);th(st,ft)}return null}function dt(st,ut,ft,yt,vt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return st=st.get(ft)||null,at(ut,st,""+yt,vt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return st=st.get(yt.key===null?ft:yt.key)||null,s(ut,st,yt,vt);case wa:return st=st.get(yt.key===null?ft:yt.key)||null,et(ut,st,yt,vt);case Ha:var St=yt._init;return dt(st,ut,ft,St(yt._payload),vt)}if(eb(yt)||Ka(yt))return st=st.get(ft)||null,nt(ut,st,yt,vt,null);th(ut,yt)}return null}function pt(st,ut,ft,yt){for(var vt=null,St=null,xt=ut,Ut=ut=0,Tt=null;xt!==null&&Ut<ft.length;Ut++){xt.index>Ut?(Tt=xt,xt=null):Tt=xt.sibling;var kt=ht(st,xt,ft[Ut],yt);if(kt===null){xt===null&&(xt=Tt);break}a&&xt&&kt.alternate===null&&o(st,xt),ut=gt(kt,ut,Ut),St===null?vt=kt:St.sibling=kt,St=kt,xt=Tt}if(Ut===ft.length)return _e(st,xt),I&&tg(st,Ut),vt;if(xt===null){for(;Ut<ft.length;Ut++)xt=ot(st,ft[Ut],yt),xt!==null&&(ut=gt(xt,ut,Ut),St===null?vt=xt:St.sibling=xt,St=xt);return I&&tg(st,Ut),vt}for(xt=tt(st,xt);Ut<ft.length;Ut++)Tt=dt(xt,st,Ut,ft[Ut],yt),Tt!==null&&(a&&Tt.alternate!==null&&xt.delete(Tt.key===null?Ut:Tt.key),ut=gt(Tt,ut,Ut),St===null?vt=Tt:St.sibling=Tt,St=Tt);return a&&xt.forEach(function(Dt){return o(st,Dt)}),I&&tg(st,Ut),vt}function lt(st,ut,ft,yt){var vt=Ka(ft);if(typeof vt!="function")throw Error(p$2(150));if(ft=vt.call(ft),ft==null)throw Error(p$2(151));for(var St=vt=null,xt=ut,Ut=ut=0,Tt=null,kt=ft.next();xt!==null&&!kt.done;Ut++,kt=ft.next()){xt.index>Ut?(Tt=xt,xt=null):Tt=xt.sibling;var Dt=ht(st,xt,kt.value,yt);if(Dt===null){xt===null&&(xt=Tt);break}a&&xt&&Dt.alternate===null&&o(st,xt),ut=gt(Dt,ut,Ut),St===null?vt=Dt:St.sibling=Dt,St=Dt,xt=Tt}if(kt.done)return _e(st,xt),I&&tg(st,Ut),vt;if(xt===null){for(;!kt.done;Ut++,kt=ft.next())kt=ot(st,kt.value,yt),kt!==null&&(ut=gt(kt,ut,Ut),St===null?vt=kt:St.sibling=kt,St=kt);return I&&tg(st,Ut),vt}for(xt=tt(st,xt);!kt.done;Ut++,kt=ft.next())kt=dt(xt,st,Ut,kt.value,yt),kt!==null&&(a&&kt.alternate!==null&&xt.delete(kt.key===null?Ut:kt.key),ut=gt(kt,ut,Ut),St===null?vt=kt:St.sibling=kt,St=kt);return a&&xt.forEach(function(Vt){return o(st,Vt)}),I&&tg(st,Ut),vt}function mt(st,ut,ft,yt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var vt=ft.key,St=ut;St!==null;){if(St.key===vt){if(vt=ft.type,vt===ya){if(St.tag===7){_e(st,St.sibling),ut=ct(St,ft.props.children),ut.return=st,st=ut;break e}}else if(St.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===St.type){_e(st,St.sibling),ut=ct(St,ft.props),ut.ref=sh(st,St,ft),ut.return=st,st=ut;break e}_e(st,St);break}else o(st,St);St=St.sibling}ft.type===ya?(ut=Ah(ft.props.children,st.mode,yt,ft.key),ut.return=st,st=ut):(yt=yh(ft.type,ft.key,ft.props,null,st.mode,yt),yt.ref=sh(st,ut,ft),yt.return=st,st=yt)}return rt(st);case wa:e:{for(St=ft.key;ut!==null;){if(ut.key===St)if(ut.tag===4&&ut.stateNode.containerInfo===ft.containerInfo&&ut.stateNode.implementation===ft.implementation){_e(st,ut.sibling),ut=ct(ut,ft.children||[]),ut.return=st,st=ut;break e}else{_e(st,ut);break}else o(st,ut);ut=ut.sibling}ut=zh(ft,st.mode,yt),ut.return=st,st=ut}return rt(st);case Ha:return St=ft._init,mt(st,ut,St(ft._payload),yt)}if(eb(ft))return pt(st,ut,ft,yt);if(Ka(ft))return lt(st,ut,ft,yt);th(st,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,ut!==null&&ut.tag===6?(_e(st,ut.sibling),ut=ct(ut,ft),ut.return=st,st=ut):(_e(st,ut),ut=xh(ft,st.mode,yt),ut.return=st,st=ut),rt(st)):_e(st,ut)}return mt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p$2(174));return a}function Ih(a,o){switch(G$1(Gh,o),G$1(Fh,a),G$1(Eh,Dh),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:a=a===8?o.parentNode:o,o=a.namespaceURI||null,a=a.tagName,o=lb(o,a)}E$1(Eh),G$1(Eh,o)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(a){Hh(Gh.current);var o=Hh(Eh.current),_e=lb(o,a.type);o!==_e&&(G$1(Fh,a),G$1(Eh,_e))}function Lh(a){Fh.current===a&&(E$1(Eh),E$1(Fh))}var M$2=Uf(0);function Mh(a){for(var o=a;o!==null;){if(o.tag===13){var _e=o.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$1=null,O$2=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$2(321))}function Wh(a,o){if(o===null)return!1;for(var _e=0;_e<o.length&&_e<a.length;_e++)if(!He(a[_e],o[_e]))return!1;return!0}function Xh(a,o,_e,tt,ct,gt){if(Rh=gt,N$1=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=a===null||a.memoizedState===null?Yh:Zh,a=_e(tt,ct),Th){gt=0;do{if(Th=!1,Uh=0,25<=gt)throw Error(p$2(301));gt+=1,P$2=O$2=null,o.updateQueue=null,Ph.current=$h,a=_e(tt,ct)}while(Th)}if(Ph.current=ai,o=O$2!==null&&O$2.next!==null,Rh=0,P$2=O$2=N$1=null,Sh=!1,o)throw Error(p$2(300));return a}function bi(){var a=Uh!==0;return Uh=0,a}function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$1.memoizedState=P$2=a:P$2=P$2.next=a,P$2}function di(){if(O$2===null){var a=N$1.alternate;a=a!==null?a.memoizedState:null}else a=O$2.next;var o=P$2===null?N$1.memoizedState:P$2.next;if(o!==null)P$2=o,O$2=a;else{if(a===null)throw Error(p$2(310));O$2=a,a={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$1.memoizedState=P$2=a:P$2=P$2.next=a}return P$2}function ei(a,o){return typeof o=="function"?o(a):o}function fi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=O$2,ct=tt.baseQueue,gt=_e.pending;if(gt!==null){if(ct!==null){var rt=ct.next;ct.next=gt.next,gt.next=rt}tt.baseQueue=ct=gt,_e.pending=null}if(ct!==null){gt=ct.next,tt=tt.baseState;var at=rt=null,s=null,et=gt;do{var nt=et.lane;if((Rh&nt)===nt)s!==null&&(s=s.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),tt=et.hasEagerState?et.eagerState:a(tt,et.action);else{var ot={lane:nt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};s===null?(at=s=ot,rt=tt):s=s.next=ot,N$1.lanes|=nt,hh|=nt}et=et.next}while(et!==null&&et!==gt);s===null?rt=tt:s.next=at,He(tt,o.memoizedState)||(Ug=!0),o.memoizedState=tt,o.baseState=rt,o.baseQueue=s,_e.lastRenderedState=tt}if(a=_e.interleaved,a!==null){ct=a;do gt=ct.lane,N$1.lanes|=gt,hh|=gt,ct=ct.next;while(ct!==a)}else ct===null&&(_e.lanes=0);return[o.memoizedState,_e.dispatch]}function gi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=_e.dispatch,ct=_e.pending,gt=o.memoizedState;if(ct!==null){_e.pending=null;var rt=ct=ct.next;do gt=a(gt,rt.action),rt=rt.next;while(rt!==ct);He(gt,o.memoizedState)||(Ug=!0),o.memoizedState=gt,o.baseQueue===null&&(o.baseState=gt),_e.lastRenderedState=gt}return[gt,tt]}function hi(){}function ii(a,o){var _e=N$1,tt=di(),ct=o(),gt=!He(tt.memoizedState,ct);if(gt&&(tt.memoizedState=ct,Ug=!0),tt=tt.queue,ji(ki.bind(null,_e,tt,a),[a]),tt.getSnapshot!==o||gt||P$2!==null&&P$2.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tt,ct,o),void 0,null),R$2===null)throw Error(p$2(349));Rh&30||ni(_e,o,ct)}return ct}function ni(a,o,_e){a.flags|=16384,a={getSnapshot:o,value:_e},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.stores=[a]):(_e=o.stores,_e===null?o.stores=[a]:_e.push(a))}function mi(a,o,_e,tt){o.value=_e,o.getSnapshot=tt,oi(o)&&pi(a)}function ki(a,o,_e){return _e(function(){oi(o)&&pi(a)})}function oi(a){var o=a.getSnapshot;a=a.value;try{var _e=o();return!He(a,_e)}catch{return!0}}function pi(a){var o=Zg(a,1);o!==null&&mh(o,a,1,-1)}function qi(a){var o=ci();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},o.queue=a,a=a.dispatch=ri.bind(null,N$1,a),[o.memoizedState,a]}function li(a,o,_e,tt){return a={tag:a,create:o,destroy:_e,deps:tt,next:null},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.lastEffect=a.next=a):(_e=o.lastEffect,_e===null?o.lastEffect=a.next=a:(tt=_e.next,_e.next=a,a.next=tt,o.lastEffect=a)),a}function si(){return di().memoizedState}function ti(a,o,_e,tt){var ct=ci();N$1.flags|=a,ct.memoizedState=li(1|o,_e,void 0,tt===void 0?null:tt)}function ui(a,o,_e,tt){var ct=di();tt=tt===void 0?null:tt;var gt=void 0;if(O$2!==null){var rt=O$2.memoizedState;if(gt=rt.destroy,tt!==null&&Wh(tt,rt.deps)){ct.memoizedState=li(o,_e,gt,tt);return}}N$1.flags|=a,ct.memoizedState=li(1|o,_e,gt,tt)}function vi(a,o){return ti(8390656,8,a,o)}function ji(a,o){return ui(2048,8,a,o)}function wi(a,o){return ui(4,2,a,o)}function xi(a,o){return ui(4,4,a,o)}function yi(a,o){if(typeof o=="function")return a=a(),o(a),function(){o(null)};if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function zi(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ui(4,4,yi.bind(null,o,a),_e)}function Ai(){}function Bi(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(_e.memoizedState=[a,o],a)}function Ci(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(a=a(),_e.memoizedState=[a,o],a)}function Di(a,o,_e){return Rh&21?(He(_e,o)||(_e=yc(),N$1.lanes|=_e,hh|=_e,a.baseState=!0),o):(a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=_e)}function Ei(a,o){var _e=C$2;C$2=_e!==0&&4>_e?_e:4,a(!0);var tt=Qh.transition;Qh.transition={};try{a(!1),o()}finally{C$2=_e,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(a,o,_e){var tt=lh(a);if(_e={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(a))Ii(o,_e);else if(_e=Yg(a,o,_e,tt),_e!==null){var ct=L();mh(_e,a,tt,ct),Ji(_e,o,tt)}}function ri(a,o,_e){var tt=lh(a),ct={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(o,ct);else{var gt=a.alternate;if(a.lanes===0&&(gt===null||gt.lanes===0)&&(gt=o.lastRenderedReducer,gt!==null))try{var rt=o.lastRenderedState,at=gt(rt,_e);if(ct.hasEagerState=!0,ct.eagerState=at,He(at,rt)){var s=o.interleaved;s===null?(ct.next=ct,Xg(o)):(ct.next=s.next,s.next=ct),o.interleaved=ct;return}}catch{}finally{}_e=Yg(a,o,ct,tt),_e!==null&&(ct=L(),mh(_e,a,tt,ct),Ji(_e,o,tt))}}function Hi(a){var o=a.alternate;return a===N$1||o!==null&&o===N$1}function Ii(a,o){Th=Sh=!0;var _e=a.pending;_e===null?o.next=o:(o.next=_e.next,_e.next=o),a.pending=o}function Ji(a,o,_e){if(_e&4194240){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,o){return ci().memoizedState=[a,o===void 0?null:o],a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ti(4194308,4,yi.bind(null,o,a),_e)},useLayoutEffect:function(a,o){return ti(4194308,4,a,o)},useInsertionEffect:function(a,o){return ti(4,2,a,o)},useMemo:function(a,o){var _e=ci();return o=o===void 0?null:o,a=a(),_e.memoizedState=[a,o],a},useReducer:function(a,o,_e){var tt=ci();return o=_e!==void 0?_e(o):o,tt.memoizedState=tt.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},tt.queue=a,a=a.dispatch=Gi.bind(null,N$1,a),[tt.memoizedState,a]},useRef:function(a){var o=ci();return a={current:a},o.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),o=a[0];return a=Ei.bind(null,a[1]),ci().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,_e){var tt=N$1,ct=ci();if(I){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=o(),R$2===null)throw Error(p$2(349));Rh&30||ni(tt,o,_e)}ct.memoizedState=_e;var gt={value:_e,getSnapshot:o};return ct.queue=gt,vi(ki.bind(null,tt,gt,a),[a]),tt.flags|=2048,li(9,mi.bind(null,tt,gt,_e,o),void 0,null),_e},useId:function(){var a=ci(),o=R$2.identifierPrefix;if(I){var _e=sg,tt=rg;_e=(tt&~(1<<32-oc(tt)-1)).toString(32)+_e,o=":"+o+"R"+_e,_e=Uh++,0<_e&&(o+="H"+_e.toString(32)),o+=":"}else _e=Vh++,o=":"+o+"r"+_e.toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return Di(o,O$2.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return O$2===null?o.memoizedState=a:Di(o,O$2.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,o){try{var _e="",tt=o;do _e+=Pa(tt),tt=tt.return;while(tt);var ct=_e}catch(gt){ct=`
Error generating stack: `+gt.message+`
`+gt.stack}return{value:a,source:o,stack:ct,digest:null}}function Li(a,o,_e){return{value:a,source:null,stack:_e??null,digest:o??null}}function Mi(a,o){try{console.error(o.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(a,o,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tt=o.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(a,o)},_e}function Ri(a,o,_e){_e=ch(-1,_e),_e.tag=3;var tt=a.type.getDerivedStateFromError;if(typeof tt=="function"){var ct=o.value;_e.payload=function(){return tt(ct)},_e.callback=function(){Mi(a,o)}}var gt=a.stateNode;return gt!==null&&typeof gt.componentDidCatch=="function"&&(_e.callback=function(){Mi(a,o),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rt=o.stack;this.componentDidCatch(o.value,{componentStack:rt!==null?rt:""})}),_e}function Ti(a,o,_e){var tt=a.pingCache;if(tt===null){tt=a.pingCache=new Ni;var ct=new Set;tt.set(o,ct)}else ct=tt.get(o),ct===void 0&&(ct=new Set,tt.set(o,ct));ct.has(_e)||(ct.add(_e),a=Ui.bind(null,a,o,_e),o.then(a,a))}function Vi(a){do{var o;if((o=a.tag===13)&&(o=a.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return a;a=a.return}while(a!==null);return null}function Wi(a,o,_e,tt,ct){return a.mode&1?(a.flags|=65536,a.lanes=ct,a):(a===o?a.flags|=65536:(a.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(o=ch(-1,1),o.tag=2,dh(_e,o,1))),_e.lanes|=1),a)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(a,o,_e,tt){o.child=a===null?Ch(o,null,_e,tt):Bh(o,a.child,_e,tt)}function Zi(a,o,_e,tt,ct){_e=_e.render;var gt=o.ref;return Tg(o,ct),tt=Xh(a,o,_e,tt,gt,ct),_e=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I&&_e&&vg(o),o.flags|=1,Yi(a,o,tt,ct),o.child)}function aj(a,o,_e,tt,ct){if(a===null){var gt=_e.type;return typeof gt=="function"&&!bj(gt)&&gt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(o.tag=15,o.type=gt,cj(a,o,gt,tt,ct)):(a=yh(_e.type,null,tt,o,o.mode,ct),a.ref=o.ref,a.return=o,o.child=a)}if(gt=a.child,!(a.lanes&ct)){var rt=gt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(rt,tt)&&a.ref===o.ref)return $i(a,o,ct)}return o.flags|=1,a=wh(gt,tt),a.ref=o.ref,a.return=o,o.child=a}function cj(a,o,_e,tt,ct){if(a!==null){var gt=a.memoizedProps;if(Ie(gt,tt)&&a.ref===o.ref)if(Ug=!1,o.pendingProps=tt=gt,(a.lanes&ct)!==0)a.flags&131072&&(Ug=!0);else return o.lanes=a.lanes,$i(a,o,ct)}return dj(a,o,_e,tt,ct)}function ej(a,o,_e){var tt=o.pendingProps,ct=tt.children,gt=a!==null?a.memoizedState:null;if(tt.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return a=gt!==null?gt.baseLanes|_e:_e,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,G$1(fj,gj),gj|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=gt!==null?gt.baseLanes:_e,G$1(fj,gj),gj|=tt}else gt!==null?(tt=gt.baseLanes|_e,o.memoizedState=null):tt=_e,G$1(fj,gj),gj|=tt;return Yi(a,o,ct,_e),o.child}function hj(a,o){var _e=o.ref;(a===null&&_e!==null||a!==null&&a.ref!==_e)&&(o.flags|=512,o.flags|=2097152)}function dj(a,o,_e,tt,ct){var gt=Zf(_e)?Xf:H$1.current;return gt=Yf(o,gt),Tg(o,ct),_e=Xh(a,o,_e,tt,gt,ct),tt=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I&&tt&&vg(o),o.flags|=1,Yi(a,o,_e,ct),o.child)}function ij(a,o,_e,tt,ct){if(Zf(_e)){var gt=!0;cg(o)}else gt=!1;if(Tg(o,ct),o.stateNode===null)jj(a,o),ph(o,_e,tt),rh(o,_e,tt,ct),tt=!0;else if(a===null){var rt=o.stateNode,at=o.memoizedProps;rt.props=at;var s=rt.context,et=_e.contextType;typeof et=="object"&&et!==null?et=Vg(et):(et=Zf(_e)?Xf:H$1.current,et=Yf(o,et));var nt=_e.getDerivedStateFromProps,ot=typeof nt=="function"||typeof rt.getSnapshotBeforeUpdate=="function";ot||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(at!==tt||s!==et)&&qh(o,rt,tt,et),$g=!1;var ht=o.memoizedState;rt.state=ht,gh(o,tt,rt,ct),s=o.memoizedState,at!==tt||ht!==s||Wf.current||$g?(typeof nt=="function"&&(kh(o,_e,nt,tt),s=o.memoizedState),(at=$g||oh(o,_e,at,tt,ht,s,et))?(ot||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&(o.flags|=4194308)):(typeof rt.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=tt,o.memoizedState=s),rt.props=tt,rt.state=s,rt.context=et,tt=at):(typeof rt.componentDidMount=="function"&&(o.flags|=4194308),tt=!1)}else{rt=o.stateNode,bh(a,o),at=o.memoizedProps,et=o.type===o.elementType?at:Lg(o.type,at),rt.props=et,ot=o.pendingProps,ht=rt.context,s=_e.contextType,typeof s=="object"&&s!==null?s=Vg(s):(s=Zf(_e)?Xf:H$1.current,s=Yf(o,s));var dt=_e.getDerivedStateFromProps;(nt=typeof dt=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(at!==ot||ht!==s)&&qh(o,rt,tt,s),$g=!1,ht=o.memoizedState,rt.state=ht,gh(o,tt,rt,ct);var pt=o.memoizedState;at!==ot||ht!==pt||Wf.current||$g?(typeof dt=="function"&&(kh(o,_e,dt,tt),pt=o.memoizedState),(et=$g||oh(o,_e,et,tt,ht,pt,s)||!1)?(nt||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(tt,pt,s),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(tt,pt,s)),typeof rt.componentDidUpdate=="function"&&(o.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof rt.componentDidUpdate!="function"||at===a.memoizedProps&&ht===a.memoizedState||(o.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||at===a.memoizedProps&&ht===a.memoizedState||(o.flags|=1024),o.memoizedProps=tt,o.memoizedState=pt),rt.props=tt,rt.state=pt,rt.context=s,tt=et):(typeof rt.componentDidUpdate!="function"||at===a.memoizedProps&&ht===a.memoizedState||(o.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||at===a.memoizedProps&&ht===a.memoizedState||(o.flags|=1024),tt=!1)}return kj(a,o,_e,tt,gt,ct)}function kj(a,o,_e,tt,ct,gt){hj(a,o);var rt=(o.flags&128)!==0;if(!tt&&!rt)return ct&&dg(o,_e,!1),$i(a,o,gt);tt=o.stateNode,Xi.current=o;var at=rt&&typeof _e.getDerivedStateFromError!="function"?null:tt.render();return o.flags|=1,a!==null&&rt?(o.child=Bh(o,a.child,null,gt),o.child=Bh(o,null,at,gt)):Yi(a,o,at,gt),o.memoizedState=tt.state,ct&&dg(o,_e,!0),o.child}function lj(a){var o=a.stateNode;o.pendingContext?ag(a,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(a,o.context,!1),Ih(a,o.containerInfo)}function mj(a,o,_e,tt,ct){return Ig(),Jg(ct),o.flags|=256,Yi(a,o,_e,tt),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}function pj(a,o,_e){var tt=o.pendingProps,ct=M$2.current,gt=!1,rt=(o.flags&128)!==0,at;if((at=rt)||(at=a!==null&&a.memoizedState===null?!1:(ct&2)!==0),at?(gt=!0,o.flags&=-129):(a===null||a.memoizedState!==null)&&(ct|=1),G$1(M$2,ct&1),a===null)return Eg(o),a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(o.mode&1?a.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(rt=tt.children,a=tt.fallback,gt?(tt=o.mode,gt=o.child,rt={mode:"hidden",children:rt},!(tt&1)&&gt!==null?(gt.childLanes=0,gt.pendingProps=rt):gt=qj(rt,tt,0,null),a=Ah(a,tt,_e,null),gt.return=o,a.return=o,gt.sibling=a,o.child=gt,o.child.memoizedState=oj(_e),o.memoizedState=nj,a):rj(o,rt));if(ct=a.memoizedState,ct!==null&&(at=ct.dehydrated,at!==null))return sj(a,o,rt,tt,at,ct,_e);if(gt){gt=tt.fallback,rt=o.mode,ct=a.child,at=ct.sibling;var s={mode:"hidden",children:tt.children};return!(rt&1)&&o.child!==ct?(tt=o.child,tt.childLanes=0,tt.pendingProps=s,o.deletions=null):(tt=wh(ct,s),tt.subtreeFlags=ct.subtreeFlags&14680064),at!==null?gt=wh(at,gt):(gt=Ah(gt,rt,_e,null),gt.flags|=2),gt.return=o,tt.return=o,tt.sibling=gt,o.child=tt,tt=gt,gt=o.child,rt=a.child.memoizedState,rt=rt===null?oj(_e):{baseLanes:rt.baseLanes|_e,cachePool:null,transitions:rt.transitions},gt.memoizedState=rt,gt.childLanes=a.childLanes&~_e,o.memoizedState=nj,tt}return gt=a.child,a=gt.sibling,tt=wh(gt,{mode:"visible",children:tt.children}),!(o.mode&1)&&(tt.lanes=_e),tt.return=o,tt.sibling=null,a!==null&&(_e=o.deletions,_e===null?(o.deletions=[a],o.flags|=16):_e.push(a)),o.child=tt,o.memoizedState=null,tt}function rj(a,o){return o=qj({mode:"visible",children:o},a.mode,0,null),o.return=a,a.child=o}function tj(a,o,_e,tt){return tt!==null&&Jg(tt),Bh(o,a.child,null,_e),a=rj(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function sj(a,o,_e,tt,ct,gt,rt){if(_e)return o.flags&256?(o.flags&=-257,tt=Li(Error(p$2(422))),tj(a,o,rt,tt)):o.memoizedState!==null?(o.child=a.child,o.flags|=128,null):(gt=tt.fallback,ct=o.mode,tt=qj({mode:"visible",children:tt.children},ct,0,null),gt=Ah(gt,ct,rt,null),gt.flags|=2,tt.return=o,gt.return=o,tt.sibling=gt,o.child=tt,o.mode&1&&Bh(o,a.child,null,rt),o.child.memoizedState=oj(rt),o.memoizedState=nj,gt);if(!(o.mode&1))return tj(a,o,rt,null);if(ct.data==="$!"){if(tt=ct.nextSibling&&ct.nextSibling.dataset,tt)var at=tt.dgst;return tt=at,gt=Error(p$2(419)),tt=Li(gt,tt,void 0),tj(a,o,rt,tt)}if(at=(rt&a.childLanes)!==0,Ug||at){if(tt=R$2,tt!==null){switch(rt&-rt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(tt.suspendedLanes|rt)?0:ct,ct!==0&&ct!==gt.retryLane&&(gt.retryLane=ct,Zg(a,ct),mh(tt,a,ct,-1))}return uj(),tt=Li(Error(p$2(421))),tj(a,o,rt,tt)}return ct.data==="$?"?(o.flags|=128,o.child=a.child,o=vj.bind(null,a),ct._reactRetry=o,null):(a=gt.treeContext,yg=Lf(ct.nextSibling),xg=o,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=o),o=rj(o,tt.children),o.flags|=4096,o)}function wj(a,o,_e){a.lanes|=o;var tt=a.alternate;tt!==null&&(tt.lanes|=o),Sg(a.return,o,_e)}function xj(a,o,_e,tt,ct){var gt=a.memoizedState;gt===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:tt,tail:_e,tailMode:ct}:(gt.isBackwards=o,gt.rendering=null,gt.renderingStartTime=0,gt.last=tt,gt.tail=_e,gt.tailMode=ct)}function yj(a,o,_e){var tt=o.pendingProps,ct=tt.revealOrder,gt=tt.tail;if(Yi(a,o,tt.children,_e),tt=M$2.current,tt&2)tt=tt&1|2,o.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wj(a,_e,o);else if(a.tag===19)wj(a,_e,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}tt&=1}if(G$1(M$2,tt),!(o.mode&1))o.memoizedState=null;else switch(ct){case"forwards":for(_e=o.child,ct=null;_e!==null;)a=_e.alternate,a!==null&&Mh(a)===null&&(ct=_e),_e=_e.sibling;_e=ct,_e===null?(ct=o.child,o.child=null):(ct=_e.sibling,_e.sibling=null),xj(o,!1,ct,_e,gt);break;case"backwards":for(_e=null,ct=o.child,o.child=null;ct!==null;){if(a=ct.alternate,a!==null&&Mh(a)===null){o.child=ct;break}a=ct.sibling,ct.sibling=_e,_e=ct,ct=a}xj(o,!0,_e,null,gt);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(a,o){!(o.mode&1)&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function $i(a,o,_e){if(a!==null&&(o.dependencies=a.dependencies),hh|=o.lanes,!(_e&o.childLanes))return null;if(a!==null&&o.child!==a.child)throw Error(p$2(153));if(o.child!==null){for(a=o.child,_e=wh(a,a.pendingProps),o.child=_e,_e.return=o;a.sibling!==null;)a=a.sibling,_e=_e.sibling=wh(a,a.pendingProps),_e.return=o;_e.sibling=null}return o.child}function zj(a,o,_e){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var tt=o.type._context,ct=o.memoizedProps.value;G$1(Mg,tt._currentValue),tt._currentValue=ct;break;case 13:if(tt=o.memoizedState,tt!==null)return tt.dehydrated!==null?(G$1(M$2,M$2.current&1),o.flags|=128,null):_e&o.child.childLanes?pj(a,o,_e):(G$1(M$2,M$2.current&1),a=$i(a,o,_e),a!==null?a.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(tt=(_e&o.childLanes)!==0,a.flags&128){if(tt)return yj(a,o,_e);o.flags|=128}if(ct=o.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(M$2,M$2.current),tt)break;return null;case 22:case 23:return o.lanes=0,ej(a,o,_e)}return $i(a,o,_e)}var Aj,Bj,Cj,Dj;Aj=function(a,o){for(var _e=o.child;_e!==null;){if(_e.tag===5||_e.tag===6)a.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===o)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===o)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(a,o,_e,tt){var ct=a.memoizedProps;if(ct!==tt){a=o.stateNode,Hh(Eh.current);var gt=null;switch(_e){case"input":ct=Ya(a,ct),tt=Ya(a,tt),gt=[];break;case"select":ct=A$1({},ct,{value:void 0}),tt=A$1({},tt,{value:void 0}),gt=[];break;case"textarea":ct=gb(a,ct),tt=gb(a,tt),gt=[];break;default:typeof ct.onClick!="function"&&typeof tt.onClick=="function"&&(a.onclick=Bf)}ub(_e,tt);var rt;_e=null;for(et in ct)if(!tt.hasOwnProperty(et)&&ct.hasOwnProperty(et)&&ct[et]!=null)if(et==="style"){var at=ct[et];for(rt in at)at.hasOwnProperty(rt)&&(_e||(_e={}),_e[rt]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?gt||(gt=[]):(gt=gt||[]).push(et,null));for(et in tt){var s=tt[et];if(at=ct!=null?ct[et]:void 0,tt.hasOwnProperty(et)&&s!==at&&(s!=null||at!=null))if(et==="style")if(at){for(rt in at)!at.hasOwnProperty(rt)||s&&s.hasOwnProperty(rt)||(_e||(_e={}),_e[rt]="");for(rt in s)s.hasOwnProperty(rt)&&at[rt]!==s[rt]&&(_e||(_e={}),_e[rt]=s[rt])}else _e||(gt||(gt=[]),gt.push(et,_e)),_e=s;else et==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,at=at?at.__html:void 0,s!=null&&at!==s&&(gt=gt||[]).push(et,s)):et==="children"?typeof s!="string"&&typeof s!="number"||(gt=gt||[]).push(et,""+s):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(ea.hasOwnProperty(et)?(s!=null&&et==="onScroll"&&D$1("scroll",a),gt||at===s||(gt=[])):(gt=gt||[]).push(et,s))}_e&&(gt=gt||[]).push("style",_e);var et=gt;(o.updateQueue=et)&&(o.flags|=4)}};Dj=function(a,o,_e,tt){_e!==tt&&(o.flags|=4)};function Ej(a,o){if(!I)switch(a.tailMode){case"hidden":o=a.tail;for(var _e=null;o!==null;)o.alternate!==null&&(_e=o),o=o.sibling;_e===null?a.tail=null:_e.sibling=null;break;case"collapsed":_e=a.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:tt.sibling=null}}function S$2(a){var o=a.alternate!==null&&a.alternate.child===a.child,_e=0,tt=0;if(o)for(var ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags&14680064,tt|=ct.flags&14680064,ct.return=a,ct=ct.sibling;else for(ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags,tt|=ct.flags,ct.return=a,ct=ct.sibling;return a.subtreeFlags|=tt,a.childLanes=_e,o}function Fj(a,o,_e){var tt=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(o),null;case 1:return Zf(o.type)&&$f(),S$2(o),null;case 3:return tt=o.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(a===null||a.child===null)&&(Gg(o)?o.flags|=4:a===null||a.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(a,o),S$2(o),null;case 5:Lh(o);var ct=Hh(Gh.current);if(_e=o.type,a!==null&&o.stateNode!=null)Cj(a,o,_e,tt,ct),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!tt){if(o.stateNode===null)throw Error(p$2(166));return S$2(o),null}if(a=Hh(Eh.current),Gg(o)){tt=o.stateNode,_e=o.type;var gt=o.memoizedProps;switch(tt[Of]=o,tt[Pf]=gt,a=(o.mode&1)!==0,_e){case"dialog":D$1("cancel",tt),D$1("close",tt);break;case"iframe":case"object":case"embed":D$1("load",tt);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],tt);break;case"source":D$1("error",tt);break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt);break;case"details":D$1("toggle",tt);break;case"input":Za(tt,gt),D$1("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!gt.multiple},D$1("invalid",tt);break;case"textarea":hb(tt,gt),D$1("invalid",tt)}ub(_e,gt),ct=null;for(var rt in gt)if(gt.hasOwnProperty(rt)){var at=gt[rt];rt==="children"?typeof at=="string"?tt.textContent!==at&&(gt.suppressHydrationWarning!==!0&&Af(tt.textContent,at,a),ct=["children",at]):typeof at=="number"&&tt.textContent!==""+at&&(gt.suppressHydrationWarning!==!0&&Af(tt.textContent,at,a),ct=["children",""+at]):ea.hasOwnProperty(rt)&&at!=null&&rt==="onScroll"&&D$1("scroll",tt)}switch(_e){case"input":Va(tt),db(tt,gt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof gt.onClick=="function"&&(tt.onclick=Bf)}tt=ct,o.updateQueue=tt,tt!==null&&(o.flags|=4)}else{rt=ct.nodeType===9?ct:ct.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(_e)),a==="http://www.w3.org/1999/xhtml"?_e==="script"?(a=rt.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof tt.is=="string"?a=rt.createElement(_e,{is:tt.is}):(a=rt.createElement(_e),_e==="select"&&(rt=a,tt.multiple?rt.multiple=!0:tt.size&&(rt.size=tt.size))):a=rt.createElementNS(a,_e),a[Of]=o,a[Pf]=tt,Aj(a,o,!1,!1),o.stateNode=a;e:{switch(rt=vb(_e,tt),_e){case"dialog":D$1("cancel",a),D$1("close",a),ct=tt;break;case"iframe":case"object":case"embed":D$1("load",a),ct=tt;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],a);ct=tt;break;case"source":D$1("error",a),ct=tt;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),ct=tt;break;case"details":D$1("toggle",a),ct=tt;break;case"input":Za(a,tt),ct=Ya(a,tt),D$1("invalid",a);break;case"option":ct=tt;break;case"select":a._wrapperState={wasMultiple:!!tt.multiple},ct=A$1({},tt,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,tt),ct=gb(a,tt),D$1("invalid",a);break;default:ct=tt}ub(_e,ct),at=ct;for(gt in at)if(at.hasOwnProperty(gt)){var s=at[gt];gt==="style"?sb(a,s):gt==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&nb(a,s)):gt==="children"?typeof s=="string"?(_e!=="textarea"||s!=="")&&ob(a,s):typeof s=="number"&&ob(a,""+s):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(ea.hasOwnProperty(gt)?s!=null&&gt==="onScroll"&&D$1("scroll",a):s!=null&&ta(a,gt,s,rt))}switch(_e){case"input":Va(a),db(a,tt,!1);break;case"textarea":Va(a),jb(a);break;case"option":tt.value!=null&&a.setAttribute("value",""+Sa(tt.value));break;case"select":a.multiple=!!tt.multiple,gt=tt.value,gt!=null?fb(a,!!tt.multiple,gt,!1):tt.defaultValue!=null&&fb(a,!!tt.multiple,tt.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(a.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S$2(o),null;case 6:if(a&&o.stateNode!=null)Dj(a,o,a.memoizedProps,tt);else{if(typeof tt!="string"&&o.stateNode===null)throw Error(p$2(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(tt=o.stateNode,_e=o.memoizedProps,tt[Of]=o,(gt=tt.nodeValue!==_e)&&(a=xg,a!==null))switch(a.tag){case 3:Af(tt.nodeValue,_e,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,_e,(a.mode&1)!==0)}gt&&(o.flags|=4)}else tt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tt),tt[Of]=o,o.stateNode=tt}return S$2(o),null;case 13:if(E$1(M$2),tt=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,gt=!1;else if(gt=Gg(o),tt!==null&&tt.dehydrated!==null){if(a===null){if(!gt)throw Error(p$2(318));if(gt=o.memoizedState,gt=gt!==null?gt.dehydrated:null,!gt)throw Error(p$2(317));gt[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S$2(o),gt=!1}else zg!==null&&(Gj(zg),zg=null),gt=!0;if(!gt)return o.flags&65536?o:null}return o.flags&128?(o.lanes=_e,o):(tt=tt!==null,tt!==(a!==null&&a.memoizedState!==null)&&tt&&(o.child.flags|=8192,o.mode&1&&(a===null||M$2.current&1?T$1===0&&(T$1=3):uj())),o.updateQueue!==null&&(o.flags|=4),S$2(o),null);case 4:return Jh(),Bj(a,o),a===null&&sf(o.stateNode.containerInfo),S$2(o),null;case 10:return Rg(o.type._context),S$2(o),null;case 17:return Zf(o.type)&&$f(),S$2(o),null;case 19:if(E$1(M$2),gt=o.memoizedState,gt===null)return S$2(o),null;if(tt=(o.flags&128)!==0,rt=gt.rendering,rt===null)if(tt)Ej(gt,!1);else{if(T$1!==0||a!==null&&a.flags&128)for(a=o.child;a!==null;){if(rt=Mh(a),rt!==null){for(o.flags|=128,Ej(gt,!1),tt=rt.updateQueue,tt!==null&&(o.updateQueue=tt,o.flags|=4),o.subtreeFlags=0,tt=_e,_e=o.child;_e!==null;)gt=_e,a=tt,gt.flags&=14680066,rt=gt.alternate,rt===null?(gt.childLanes=0,gt.lanes=a,gt.child=null,gt.subtreeFlags=0,gt.memoizedProps=null,gt.memoizedState=null,gt.updateQueue=null,gt.dependencies=null,gt.stateNode=null):(gt.childLanes=rt.childLanes,gt.lanes=rt.lanes,gt.child=rt.child,gt.subtreeFlags=0,gt.deletions=null,gt.memoizedProps=rt.memoizedProps,gt.memoizedState=rt.memoizedState,gt.updateQueue=rt.updateQueue,gt.type=rt.type,a=rt.dependencies,gt.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),_e=_e.sibling;return G$1(M$2,M$2.current&1|2),o.child}a=a.sibling}gt.tail!==null&&B$1()>Hj&&(o.flags|=128,tt=!0,Ej(gt,!1),o.lanes=4194304)}else{if(!tt)if(a=Mh(rt),a!==null){if(o.flags|=128,tt=!0,_e=a.updateQueue,_e!==null&&(o.updateQueue=_e,o.flags|=4),Ej(gt,!0),gt.tail===null&&gt.tailMode==="hidden"&&!rt.alternate&&!I)return S$2(o),null}else 2*B$1()-gt.renderingStartTime>Hj&&_e!==1073741824&&(o.flags|=128,tt=!0,Ej(gt,!1),o.lanes=4194304);gt.isBackwards?(rt.sibling=o.child,o.child=rt):(_e=gt.last,_e!==null?_e.sibling=rt:o.child=rt,gt.last=rt)}return gt.tail!==null?(o=gt.tail,gt.rendering=o,gt.tail=o.sibling,gt.renderingStartTime=B$1(),o.sibling=null,_e=M$2.current,G$1(M$2,tt?_e&1|2:_e&1),o):(S$2(o),null);case 22:case 23:return Ij(),tt=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==tt&&(o.flags|=8192),tt&&o.mode&1?gj&1073741824&&(S$2(o),o.subtreeFlags&6&&(o.flags|=8192)):S$2(o),null;case 24:return null;case 25:return null}throw Error(p$2(156,o.tag))}function Jj(a,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),a=o.flags,a&65536&&!(a&128)?(o.flags=a&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E$1(M$2),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(p$2(340));Ig()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return E$1(M$2),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(a,o){var _e=a.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tt){W$2(a,o,tt)}else _e.current=null}function Nj(a,o,_e){try{_e()}catch(tt){W$2(a,o,tt)}}var Oj=!1;function Pj(a,o){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var _e={start:a.selectionStart,end:a.selectionEnd};else e:{_e=(_e=a.ownerDocument)&&_e.defaultView||window;var tt=_e.getSelection&&_e.getSelection();if(tt&&tt.rangeCount!==0){_e=tt.anchorNode;var ct=tt.anchorOffset,gt=tt.focusNode;tt=tt.focusOffset;try{_e.nodeType,gt.nodeType}catch{_e=null;break e}var rt=0,at=-1,s=-1,et=0,nt=0,ot=a,ht=null;t:for(;;){for(var dt;ot!==_e||ct!==0&&ot.nodeType!==3||(at=rt+ct),ot!==gt||tt!==0&&ot.nodeType!==3||(s=rt+tt),ot.nodeType===3&&(rt+=ot.nodeValue.length),(dt=ot.firstChild)!==null;)ht=ot,ot=dt;for(;;){if(ot===a)break t;if(ht===_e&&++et===ct&&(at=rt),ht===gt&&++nt===tt&&(s=rt),(dt=ot.nextSibling)!==null)break;ot=ht,ht=ot.parentNode}ot=dt}_e=at===-1||s===-1?null:{start:at,end:s}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:a,selectionRange:_e},dd=!1,V=o;V!==null;)if(o=V,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,V=a;else for(;V!==null;){o=V;try{var pt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var lt=pt.memoizedProps,mt=pt.memoizedState,st=o.stateNode,ut=st.getSnapshotBeforeUpdate(o.elementType===o.type?lt:Lg(o.type,lt),mt);st.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var ft=o.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(yt){W$2(o,o.return,yt)}if(a=o.sibling,a!==null){a.return=o.return,V=a;break}V=o.return}return pt=Oj,Oj=!1,pt}function Qj(a,o,_e){var tt=o.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var ct=tt=tt.next;do{if((ct.tag&a)===a){var gt=ct.destroy;ct.destroy=void 0,gt!==void 0&&Nj(o,_e,gt)}ct=ct.next}while(ct!==tt)}}function Rj(a,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var _e=o=o.next;do{if((_e.tag&a)===a){var tt=_e.create;_e.destroy=tt()}_e=_e.next}while(_e!==o)}}function Sj(a){var o=a.ref;if(o!==null){var _e=a.stateNode;switch(a.tag){case 5:a=_e;break;default:a=_e}typeof o=="function"?o(a):o.current=a}}function Tj(a){var o=a.alternate;o!==null&&(a.alternate=null,Tj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Uj(a){return a.tag===5||a.tag===3||a.tag===4}function Vj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Uj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.nodeType===8?_e.parentNode.insertBefore(a,o):_e.insertBefore(a,o):(_e.nodeType===8?(o=_e.parentNode,o.insertBefore(a,_e)):(o=_e,o.appendChild(a)),_e=_e._reactRootContainer,_e!=null||o.onclick!==null||(o.onclick=Bf));else if(tt!==4&&(a=a.child,a!==null))for(Wj(a,o,_e),a=a.sibling;a!==null;)Wj(a,o,_e),a=a.sibling}function Xj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.insertBefore(a,o):_e.appendChild(a);else if(tt!==4&&(a=a.child,a!==null))for(Xj(a,o,_e),a=a.sibling;a!==null;)Xj(a,o,_e),a=a.sibling}var X$1=null,Yj=!1;function Zj(a,o,_e){for(_e=_e.child;_e!==null;)ak(a,o,_e),_e=_e.sibling}function ak(a,o,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$1||Mj(_e,o);case 6:var tt=X$1,ct=Yj;X$1=null,Zj(a,o,_e),X$1=tt,Yj=ct,X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?a.parentNode.removeChild(_e):a.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?Kf(a.parentNode,_e):a.nodeType===1&&Kf(a,_e),bd(a)):Kf(X$1,_e.stateNode));break;case 4:tt=X$1,ct=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(a,o,_e),X$1=tt,Yj=ct;break;case 0:case 11:case 14:case 15:if(!U$1&&(tt=_e.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){ct=tt=tt.next;do{var gt=ct,rt=gt.destroy;gt=gt.tag,rt!==void 0&&(gt&2||gt&4)&&Nj(_e,o,rt),ct=ct.next}while(ct!==tt)}Zj(a,o,_e);break;case 1:if(!U$1&&(Mj(_e,o),tt=_e.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=_e.memoizedProps,tt.state=_e.memoizedState,tt.componentWillUnmount()}catch(at){W$2(_e,o,at)}Zj(a,o,_e);break;case 21:Zj(a,o,_e);break;case 22:_e.mode&1?(U$1=(tt=U$1)||_e.memoizedState!==null,Zj(a,o,_e),U$1=tt):Zj(a,o,_e);break;default:Zj(a,o,_e)}}function bk(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var _e=a.stateNode;_e===null&&(_e=a.stateNode=new Lj),o.forEach(function(tt){var ct=ck.bind(null,a,tt);_e.has(tt)||(_e.add(tt),tt.then(ct,ct))})}}function dk(a,o){var _e=o.deletions;if(_e!==null)for(var tt=0;tt<_e.length;tt++){var ct=_e[tt];try{var gt=a,rt=o,at=rt;e:for(;at!==null;){switch(at.tag){case 5:X$1=at.stateNode,Yj=!1;break e;case 3:X$1=at.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=at.stateNode.containerInfo,Yj=!0;break e}at=at.return}if(X$1===null)throw Error(p$2(160));ak(gt,rt,ct),X$1=null,Yj=!1;var s=ct.alternate;s!==null&&(s.return=null),ct.return=null}catch(et){W$2(ct,o,et)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,a),o=o.sibling}function ek(a,o){var _e=a.alternate,tt=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(dk(o,a),fk(a),tt&4){try{Qj(3,a,a.return),Rj(3,a)}catch(lt){W$2(a,a.return,lt)}try{Qj(5,a,a.return)}catch(lt){W$2(a,a.return,lt)}}break;case 1:dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return),a.flags&32){var ct=a.stateNode;try{ob(ct,"")}catch(lt){W$2(a,a.return,lt)}}if(tt&4&&(ct=a.stateNode,ct!=null)){var gt=a.memoizedProps,rt=_e!==null?_e.memoizedProps:gt,at=a.type,s=a.updateQueue;if(a.updateQueue=null,s!==null)try{at==="input"&&gt.type==="radio"&&gt.name!=null&&ab(ct,gt),vb(at,rt);var et=vb(at,gt);for(rt=0;rt<s.length;rt+=2){var nt=s[rt],ot=s[rt+1];nt==="style"?sb(ct,ot):nt==="dangerouslySetInnerHTML"?nb(ct,ot):nt==="children"?ob(ct,ot):ta(ct,nt,ot,et)}switch(at){case"input":bb(ct,gt);break;case"textarea":ib(ct,gt);break;case"select":var ht=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!gt.multiple;var dt=gt.value;dt!=null?fb(ct,!!gt.multiple,dt,!1):ht!==!!gt.multiple&&(gt.defaultValue!=null?fb(ct,!!gt.multiple,gt.defaultValue,!0):fb(ct,!!gt.multiple,gt.multiple?[]:"",!1))}ct[Pf]=gt}catch(lt){W$2(a,a.return,lt)}}break;case 6:if(dk(o,a),fk(a),tt&4){if(a.stateNode===null)throw Error(p$2(162));ct=a.stateNode,gt=a.memoizedProps;try{ct.nodeValue=gt}catch(lt){W$2(a,a.return,lt)}}break;case 3:if(dk(o,a),fk(a),tt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(lt){W$2(a,a.return,lt)}break;case 4:dk(o,a),fk(a);break;case 13:dk(o,a),fk(a),ct=a.child,ct.flags&8192&&(gt=ct.memoizedState!==null,ct.stateNode.isHidden=gt,!gt||ct.alternate!==null&&ct.alternate.memoizedState!==null||(gk=B$1())),tt&4&&bk(a);break;case 22:if(nt=_e!==null&&_e.memoizedState!==null,a.mode&1?(U$1=(et=U$1)||nt,dk(o,a),U$1=et):dk(o,a),fk(a),tt&8192){if(et=a.memoizedState!==null,(a.stateNode.isHidden=et)&&!nt&&a.mode&1)for(V=a,nt=a.child;nt!==null;){for(ot=V=nt;V!==null;){switch(ht=V,dt=ht.child,ht.tag){case 0:case 11:case 14:case 15:Qj(4,ht,ht.return);break;case 1:Mj(ht,ht.return);var pt=ht.stateNode;if(typeof pt.componentWillUnmount=="function"){tt=ht,_e=ht.return;try{o=tt,pt.props=o.memoizedProps,pt.state=o.memoizedState,pt.componentWillUnmount()}catch(lt){W$2(tt,_e,lt)}}break;case 5:Mj(ht,ht.return);break;case 22:if(ht.memoizedState!==null){hk(ot);continue}}dt!==null?(dt.return=ht,V=dt):hk(ot)}nt=nt.sibling}e:for(nt=null,ot=a;;){if(ot.tag===5){if(nt===null){nt=ot;try{ct=ot.stateNode,et?(gt=ct.style,typeof gt.setProperty=="function"?gt.setProperty("display","none","important"):gt.display="none"):(at=ot.stateNode,s=ot.memoizedProps.style,rt=s!=null&&s.hasOwnProperty("display")?s.display:null,at.style.display=rb("display",rt))}catch(lt){W$2(a,a.return,lt)}}}else if(ot.tag===6){if(nt===null)try{ot.stateNode.nodeValue=et?"":ot.memoizedProps}catch(lt){W$2(a,a.return,lt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===a)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===a)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===a)break e;nt===ot&&(nt=null),ot=ot.return}nt===ot&&(nt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:dk(o,a),fk(a),tt&4&&bk(a);break;case 21:break;default:dk(o,a),fk(a)}}function fk(a){var o=a.flags;if(o&2){try{e:{for(var _e=a.return;_e!==null;){if(Uj(_e)){var tt=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(tt.tag){case 5:var ct=tt.stateNode;tt.flags&32&&(ob(ct,""),tt.flags&=-33);var gt=Vj(a);Xj(a,gt,ct);break;case 3:case 4:var rt=tt.stateNode.containerInfo,at=Vj(a);Wj(a,at,rt);break;default:throw Error(p$2(161))}}catch(s){W$2(a,a.return,s)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function ik(a,o,_e){V=a,jk(a)}function jk(a,o,_e){for(var tt=(a.mode&1)!==0;V!==null;){var ct=V,gt=ct.child;if(ct.tag===22&&tt){var rt=ct.memoizedState!==null||Kj;if(!rt){var at=ct.alternate,s=at!==null&&at.memoizedState!==null||U$1;at=Kj;var et=U$1;if(Kj=rt,(U$1=s)&&!et)for(V=ct;V!==null;)rt=V,s=rt.child,rt.tag===22&&rt.memoizedState!==null?kk(ct):s!==null?(s.return=rt,V=s):kk(ct);for(;gt!==null;)V=gt,jk(gt),gt=gt.sibling;V=ct,Kj=at,U$1=et}lk(a)}else ct.subtreeFlags&8772&&gt!==null?(gt.return=ct,V=gt):lk(a)}}function lk(a){for(;V!==null;){var o=V;if(o.flags&8772){var _e=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U$1||Rj(5,o);break;case 1:var tt=o.stateNode;if(o.flags&4&&!U$1)if(_e===null)tt.componentDidMount();else{var ct=o.elementType===o.type?_e.memoizedProps:Lg(o.type,_e.memoizedProps);tt.componentDidUpdate(ct,_e.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var gt=o.updateQueue;gt!==null&&ih(o,gt,tt);break;case 3:var rt=o.updateQueue;if(rt!==null){if(_e=null,o.child!==null)switch(o.child.tag){case 5:_e=o.child.stateNode;break;case 1:_e=o.child.stateNode}ih(o,rt,_e)}break;case 5:var at=o.stateNode;if(_e===null&&o.flags&4){_e=at;var s=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&_e.focus();break;case"img":s.src&&(_e.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var et=o.alternate;if(et!==null){var nt=et.memoizedState;if(nt!==null){var ot=nt.dehydrated;ot!==null&&bd(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||o.flags&512&&Sj(o)}catch(ht){W$2(o,o.return,ht)}}if(o===a){V=null;break}if(_e=o.sibling,_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function hk(a){for(;V!==null;){var o=V;if(o===a){V=null;break}var _e=o.sibling;if(_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function kk(a){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var _e=o.return;try{Rj(4,o)}catch(s){W$2(o,_e,s)}break;case 1:var tt=o.stateNode;if(typeof tt.componentDidMount=="function"){var ct=o.return;try{tt.componentDidMount()}catch(s){W$2(o,ct,s)}}var gt=o.return;try{Sj(o)}catch(s){W$2(o,gt,s)}break;case 5:var rt=o.return;try{Sj(o)}catch(s){W$2(o,rt,s)}}}catch(s){W$2(o,o.return,s)}if(o===a){V=null;break}var at=o.sibling;if(at!==null){at.return=o.return,V=at;break}V=o.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$2=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(a){return a.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(a=C$2,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function mh(a,o,_e,tt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(a,_e,tt),(!(K$1&2)||a!==R$2)&&(a===R$2&&(!(K$1&2)&&(rk|=_e),T$1===4&&Dk(a,Z$1)),Ek(a,tt),_e===1&&K$1===0&&!(o.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(a,o){var _e=a.callbackNode;wc(a,o);var tt=uc(a,a===R$2?Z$1:0);if(tt===0)_e!==null&&bc(_e),a.callbackNode=null,a.callbackPriority=0;else if(o=tt&-tt,a.callbackPriority!==o){if(_e!=null&&bc(_e),o===1)a.tag===0?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(tt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,a))}a.callbackPriority=o,a.callbackNode=_e}}function Hk(a,o){if(Bk=-1,Ck=0,K$1&6)throw Error(p$2(327));var _e=a.callbackNode;if(Ik()&&a.callbackNode!==_e)return null;var tt=uc(a,a===R$2?Z$1:0);if(tt===0)return null;if(tt&30||tt&a.expiredLanes||o)o=Jk(a,tt);else{o=tt;var ct=K$1;K$1|=2;var gt=Kk();(R$2!==a||Z$1!==o)&&(vk=null,Hj=B$1()+500,Lk(a,o));do try{Mk();break}catch(at){Nk(a,at)}while(1);Qg(),nk.current=gt,K$1=ct,Y$1!==null?o=0:(R$2=null,Z$1=0,o=T$1)}if(o!==0){if(o===2&&(ct=xc(a),ct!==0&&(tt=ct,o=Ok(a,ct))),o===1)throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;if(o===6)Dk(a,tt);else{if(ct=a.current.alternate,!(tt&30)&&!Pk(ct)&&(o=Jk(a,tt),o===2&&(gt=xc(a),gt!==0&&(tt=gt,o=Ok(a,gt))),o===1))throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;switch(a.finishedWork=ct,a.finishedLanes=tt,o){case 0:case 1:throw Error(p$2(345));case 2:Qk(a,uk,vk);break;case 3:if(Dk(a,tt),(tt&130023424)===tt&&(o=gk+500-B$1(),10<o)){if(uc(a,0)!==0)break;if(ct=a.suspendedLanes,(ct&tt)!==tt){L(),a.pingedLanes|=a.suspendedLanes&ct;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),o);break}Qk(a,uk,vk);break;case 4:if(Dk(a,tt),(tt&4194240)===tt)break;for(o=a.eventTimes,ct=-1;0<tt;){var rt=31-oc(tt);gt=1<<rt,rt=o[rt],rt>ct&&(ct=rt),tt&=~gt}if(tt=ct,tt=B$1()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),tt);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(a,B$1()),a.callbackNode===_e?Hk.bind(null,a):null}function Ok(a,o){var _e=tk;return a.current.memoizedState.isDehydrated&&(Lk(a,o).flags|=256),a=Jk(a,o),a!==2&&(o=uk,uk=_e,o!==null&&Gj(o)),a}function Gj(a){uk===null?uk=a:uk.push.apply(uk,a)}function Pk(a){for(var o=a;;){if(o.flags&16384){var _e=o.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tt=0;tt<_e.length;tt++){var ct=_e[tt],gt=ct.getSnapshot;ct=ct.value;try{if(!He(gt(),ct))return!1}catch{return!1}}}if(_e=o.child,o.subtreeFlags&16384&&_e!==null)_e.return=o,o=_e;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(a,o){for(o&=~sk,o&=~rk,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var _e=31-oc(o),tt=1<<_e;a[_e]=-1,o&=~tt}}function Fk(a){if(K$1&6)throw Error(p$2(327));Ik();var o=uc(a,0);if(!(o&1))return Ek(a,B$1()),null;var _e=Jk(a,o);if(a.tag!==0&&_e===2){var tt=xc(a);tt!==0&&(o=tt,_e=Ok(a,tt))}if(_e===1)throw _e=qk,Lk(a,0),Dk(a,o),Ek(a,B$1()),_e;if(_e===6)throw Error(p$2(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,Qk(a,uk,vk),Ek(a,B$1()),null}function Rk(a,o){var _e=K$1;K$1|=1;try{return a(o)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(a){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var o=K$1;K$1|=1;var _e=pk.transition,tt=C$2;try{if(pk.transition=null,C$2=1,a)return a()}finally{C$2=tt,pk.transition=_e,K$1=o,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(a,o){a.finishedWork=null,a.finishedLanes=0;var _e=a.timeoutHandle;if(_e!==-1&&(a.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tt=_e;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$2);break;case 19:E$1(M$2);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$2=a,Y$1=a=wh(a.current,null),Z$1=gj=o,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(_e=Wg[o],tt=_e.interleaved,tt!==null){_e.interleaved=null;var ct=tt.next,gt=_e.pending;if(gt!==null){var rt=gt.next;gt.next=ct,tt.next=rt}_e.pending=tt}Wg=null}return a}function Nk(a,o){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var ct=tt.queue;ct!==null&&(ct.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P$2=O$2=N$1=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$1=1,qk=o,Y$1=null;break}e:{var gt=a,rt=_e.return,at=_e,s=o;if(o=Z$1,at.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var et=s,nt=at,ot=nt.tag;if(!(nt.mode&1)&&(ot===0||ot===11||ot===15)){var ht=nt.alternate;ht?(nt.updateQueue=ht.updateQueue,nt.memoizedState=ht.memoizedState,nt.lanes=ht.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var dt=Vi(rt);if(dt!==null){dt.flags&=-257,Wi(dt,rt,at,gt,o),dt.mode&1&&Ti(gt,et,o),o=dt,s=et;var pt=o.updateQueue;if(pt===null){var lt=new Set;lt.add(s),o.updateQueue=lt}else pt.add(s);break e}else{if(!(o&1)){Ti(gt,et,o),uj();break e}s=Error(p$2(426))}}else if(I&&at.mode&1){var mt=Vi(rt);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),Wi(mt,rt,at,gt,o),Jg(Ki(s,at));break e}}gt=s=Ki(s,at),T$1!==4&&(T$1=2),tk===null?tk=[gt]:tk.push(gt),gt=rt;do{switch(gt.tag){case 3:gt.flags|=65536,o&=-o,gt.lanes|=o;var st=Oi(gt,s,o);fh(gt,st);break e;case 1:at=s;var ut=gt.type,ft=gt.stateNode;if(!(gt.flags&128)&&(typeof ut.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Si===null||!Si.has(ft)))){gt.flags|=65536,o&=-o,gt.lanes|=o;var yt=Ri(gt,at,o);fh(gt,yt);break e}}gt=gt.return}while(gt!==null)}Tk(_e)}catch(vt){o=vt,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(1)}function Kk(){var a=nk.current;return nk.current=ai,a===null?ai:a}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z$1)}function Jk(a,o){var _e=K$1;K$1|=2;var tt=Kk();(R$2!==a||Z$1!==o)&&(vk=null,Lk(a,o));do try{Uk();break}catch(ct){Nk(a,ct)}while(1);if(Qg(),K$1=_e,nk.current=tt,Y$1!==null)throw Error(p$2(261));return R$2=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(a){var o=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps,o===null?Tk(a):Y$1=o,ok.current=null}function Tk(a){var o=a;do{var _e=o.alternate;if(a=o.return,o.flags&32768){if(_e=Jj(_e,o),_e!==null){_e.flags&=32767,Y$1=_e;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T$1=6,Y$1=null;return}}else if(_e=Fj(_e,o,gj),_e!==null){Y$1=_e;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=a}while(o!==null);T$1===0&&(T$1=5)}function Qk(a,o,_e){var tt=C$2,ct=pk.transition;try{pk.transition=null,C$2=1,Xk(a,o,_e,tt)}finally{pk.transition=ct,C$2=tt}return null}function Xk(a,o,_e,tt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$2(327));_e=a.finishedWork;var ct=a.finishedLanes;if(_e===null)return null;if(a.finishedWork=null,a.finishedLanes=0,_e===a.current)throw Error(p$2(177));a.callbackNode=null,a.callbackPriority=0;var gt=_e.lanes|_e.childLanes;if(Bc(a,gt),a===R$2&&(Y$1=R$2=null,Z$1=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),gt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||gt){gt=pk.transition,pk.transition=null;var rt=C$2;C$2=1;var at=K$1;K$1|=4,ok.current=null,Pj(a,_e),ek(_e,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=_e,ik(_e),dc(),K$1=at,C$2=rt,pk.transition=gt}else a.current=_e;if(wk&&(wk=!1,xk=a,yk=ct),gt=a.pendingLanes,gt===0&&(Si=null),mc(_e.stateNode),Ek(a,B$1()),o!==null)for(tt=a.onRecoverableError,_e=0;_e<o.length;_e++)ct=o[_e],tt(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;return yk&1&&a.tag!==0&&Ik(),gt=a.pendingLanes,gt&1?a===Ak?zk++:(zk=0,Ak=a):zk=0,jg(),null}function Ik(){if(xk!==null){var a=Dc(yk),o=pk.transition,_e=C$2;try{if(pk.transition=null,C$2=16>a?16:a,xk===null)var tt=!1;else{if(a=xk,xk=null,yk=0,K$1&6)throw Error(p$2(331));var ct=K$1;for(K$1|=4,V=a.current;V!==null;){var gt=V,rt=gt.child;if(V.flags&16){var at=gt.deletions;if(at!==null){for(var s=0;s<at.length;s++){var et=at[s];for(V=et;V!==null;){var nt=V;switch(nt.tag){case 0:case 11:case 15:Qj(8,nt,gt)}var ot=nt.child;if(ot!==null)ot.return=nt,V=ot;else for(;V!==null;){nt=V;var ht=nt.sibling,dt=nt.return;if(Tj(nt),nt===et){V=null;break}if(ht!==null){ht.return=dt,V=ht;break}V=dt}}}var pt=gt.alternate;if(pt!==null){var lt=pt.child;if(lt!==null){pt.child=null;do{var mt=lt.sibling;lt.sibling=null,lt=mt}while(lt!==null)}}V=gt}}if(gt.subtreeFlags&2064&&rt!==null)rt.return=gt,V=rt;else e:for(;V!==null;){if(gt=V,gt.flags&2048)switch(gt.tag){case 0:case 11:case 15:Qj(9,gt,gt.return)}var st=gt.sibling;if(st!==null){st.return=gt.return,V=st;break e}V=gt.return}}var ut=a.current;for(V=ut;V!==null;){rt=V;var ft=rt.child;if(rt.subtreeFlags&2064&&ft!==null)ft.return=rt,V=ft;else e:for(rt=ut;V!==null;){if(at=V,at.flags&2048)try{switch(at.tag){case 0:case 11:case 15:Rj(9,at)}}catch(vt){W$2(at,at.return,vt)}if(at===rt){V=null;break e}var yt=at.sibling;if(yt!==null){yt.return=at.return,V=yt;break e}V=at.return}}if(K$1=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}tt=!0}return tt}finally{C$2=_e,pk.transition=o}}return!1}function Yk(a,o,_e){o=Ki(_e,o),o=Oi(a,o,1),a=dh(a,o,1),o=L(),a!==null&&(Ac(a,1,o),Ek(a,o))}function W$2(a,o,_e){if(a.tag===3)Yk(a,a,_e);else for(;o!==null;){if(o.tag===3){Yk(o,a,_e);break}else if(o.tag===1){var tt=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){a=Ki(_e,a),a=Ri(o,a,1),o=dh(o,a,1),a=L(),o!==null&&(Ac(o,1,a),Ek(o,a));break}}o=o.return}}function Ui(a,o,_e){var tt=a.pingCache;tt!==null&&tt.delete(o),o=L(),a.pingedLanes|=a.suspendedLanes&_e,R$2===a&&(Z$1&_e)===_e&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(a,0):sk|=_e),Ek(a,o)}function Zk(a,o){o===0&&(a.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var _e=L();a=Zg(a,o),a!==null&&(Ac(a,o,_e),Ek(a,_e))}function vj(a){var o=a.memoizedState,_e=0;o!==null&&(_e=o.retryLane),Zk(a,_e)}function ck(a,o){var _e=0;switch(a.tag){case 13:var tt=a.stateNode,ct=a.memoizedState;ct!==null&&(_e=ct.retryLane);break;case 19:tt=a.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(o),Zk(a,_e)}var Wk;Wk=function(a,o,_e){if(a!==null)if(a.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(a.lanes&_e)&&!(o.flags&128))return Ug=!1,zj(a,o,_e);Ug=!!(a.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var tt=o.type;jj(a,o),a=o.pendingProps;var ct=Yf(o,H$1.current);Tg(o,_e),ct=Xh(null,o,tt,a,ct,_e);var gt=bi();return o.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(tt)?(gt=!0,cg(o)):gt=!1,o.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,ah(o),ct.updater=nh,o.stateNode=ct,ct._reactInternals=o,rh(o,tt,a,_e),o=kj(null,o,tt,!0,gt,_e)):(o.tag=0,I&&gt&&vg(o),Yi(null,o,ct,_e),o=o.child),o;case 16:tt=o.elementType;e:{switch(jj(a,o),a=o.pendingProps,ct=tt._init,tt=ct(tt._payload),o.type=tt,ct=o.tag=$k(tt),a=Lg(tt,a),ct){case 0:o=dj(null,o,tt,a,_e);break e;case 1:o=ij(null,o,tt,a,_e);break e;case 11:o=Zi(null,o,tt,a,_e);break e;case 14:o=aj(null,o,tt,Lg(tt.type,a),_e);break e}throw Error(p$2(306,tt,""))}return o;case 0:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),dj(a,o,tt,ct,_e);case 1:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),ij(a,o,tt,ct,_e);case 3:e:{if(lj(o),a===null)throw Error(p$2(387));tt=o.pendingProps,gt=o.memoizedState,ct=gt.element,bh(a,o),gh(o,tt,null,_e);var rt=o.memoizedState;if(tt=rt.element,gt.isDehydrated)if(gt={element:tt,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},o.updateQueue.baseState=gt,o.memoizedState=gt,o.flags&256){ct=Ki(Error(p$2(423)),o),o=mj(a,o,tt,_e,ct);break e}else if(tt!==ct){ct=Ki(Error(p$2(424)),o),o=mj(a,o,tt,_e,ct);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,_e=Ch(o,null,tt,_e),o.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tt===ct){o=$i(a,o,_e);break e}Yi(a,o,tt,_e)}o=o.child}return o;case 5:return Kh(o),a===null&&Eg(o),tt=o.type,ct=o.pendingProps,gt=a!==null?a.memoizedProps:null,rt=ct.children,Ef(tt,ct)?rt=null:gt!==null&&Ef(tt,gt)&&(o.flags|=32),hj(a,o),Yi(a,o,rt,_e),o.child;case 6:return a===null&&Eg(o),null;case 13:return pj(a,o,_e);case 4:return Ih(o,o.stateNode.containerInfo),tt=o.pendingProps,a===null?o.child=Bh(o,null,tt,_e):Yi(a,o,tt,_e),o.child;case 11:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),Zi(a,o,tt,ct,_e);case 7:return Yi(a,o,o.pendingProps,_e),o.child;case 8:return Yi(a,o,o.pendingProps.children,_e),o.child;case 12:return Yi(a,o,o.pendingProps.children,_e),o.child;case 10:e:{if(tt=o.type._context,ct=o.pendingProps,gt=o.memoizedProps,rt=ct.value,G$1(Mg,tt._currentValue),tt._currentValue=rt,gt!==null)if(He(gt.value,rt)){if(gt.children===ct.children&&!Wf.current){o=$i(a,o,_e);break e}}else for(gt=o.child,gt!==null&&(gt.return=o);gt!==null;){var at=gt.dependencies;if(at!==null){rt=gt.child;for(var s=at.firstContext;s!==null;){if(s.context===tt){if(gt.tag===1){s=ch(-1,_e&-_e),s.tag=2;var et=gt.updateQueue;if(et!==null){et=et.shared;var nt=et.pending;nt===null?s.next=s:(s.next=nt.next,nt.next=s),et.pending=s}}gt.lanes|=_e,s=gt.alternate,s!==null&&(s.lanes|=_e),Sg(gt.return,_e,o),at.lanes|=_e;break}s=s.next}}else if(gt.tag===10)rt=gt.type===o.type?null:gt.child;else if(gt.tag===18){if(rt=gt.return,rt===null)throw Error(p$2(341));rt.lanes|=_e,at=rt.alternate,at!==null&&(at.lanes|=_e),Sg(rt,_e,o),rt=gt.sibling}else rt=gt.child;if(rt!==null)rt.return=gt;else for(rt=gt;rt!==null;){if(rt===o){rt=null;break}if(gt=rt.sibling,gt!==null){gt.return=rt.return,rt=gt;break}rt=rt.return}gt=rt}Yi(a,o,ct.children,_e),o=o.child}return o;case 9:return ct=o.type,tt=o.pendingProps.children,Tg(o,_e),ct=Vg(ct),tt=tt(ct),o.flags|=1,Yi(a,o,tt,_e),o.child;case 14:return tt=o.type,ct=Lg(tt,o.pendingProps),ct=Lg(tt.type,ct),aj(a,o,tt,ct,_e);case 15:return cj(a,o,o.type,o.pendingProps,_e);case 17:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),jj(a,o),o.tag=1,Zf(tt)?(a=!0,cg(o)):a=!1,Tg(o,_e),ph(o,tt,ct),rh(o,tt,ct,_e),kj(null,o,tt,!0,a,_e);case 19:return yj(a,o,_e);case 22:return ej(a,o,_e)}throw Error(p$2(156,o.tag))};function Gk(a,o){return ac(a,o)}function al(a,o,_e,tt){this.tag=a,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,o,_e,tt){return new al(a,o,_e,tt)}function bj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $k(a){if(typeof a=="function")return bj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function wh(a,o){var _e=a.alternate;return _e===null?(_e=Bg(a.tag,o,a.key,a.mode),_e.elementType=a.elementType,_e.type=a.type,_e.stateNode=a.stateNode,_e.alternate=a,a.alternate=_e):(_e.pendingProps=o,_e.type=a.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=a.flags&14680064,_e.childLanes=a.childLanes,_e.lanes=a.lanes,_e.child=a.child,_e.memoizedProps=a.memoizedProps,_e.memoizedState=a.memoizedState,_e.updateQueue=a.updateQueue,o=a.dependencies,_e.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},_e.sibling=a.sibling,_e.index=a.index,_e.ref=a.ref,_e}function yh(a,o,_e,tt,ct,gt){var rt=2;if(tt=a,typeof a=="function")bj(a)&&(rt=1);else if(typeof a=="string")rt=5;else e:switch(a){case ya:return Ah(_e.children,ct,gt,o);case za:rt=8,ct|=8;break;case Aa:return a=Bg(12,_e,o,ct|2),a.elementType=Aa,a.lanes=gt,a;case Ea:return a=Bg(13,_e,o,ct),a.elementType=Ea,a.lanes=gt,a;case Fa:return a=Bg(19,_e,o,ct),a.elementType=Fa,a.lanes=gt,a;case Ia:return qj(_e,ct,gt,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,tt=null;break e}throw Error(p$2(130,a==null?a:typeof a,""))}return o=Bg(rt,_e,o,ct),o.elementType=a,o.type=tt,o.lanes=gt,o}function Ah(a,o,_e,tt){return a=Bg(7,a,tt,o),a.lanes=_e,a}function qj(a,o,_e,tt){return a=Bg(22,a,tt,o),a.elementType=Ia,a.lanes=_e,a.stateNode={isHidden:!1},a}function xh(a,o,_e){return a=Bg(6,a,null,o),a.lanes=_e,a}function zh(a,o,_e){return o=Bg(4,a.children!==null?a.children:[],a.key,o),o.lanes=_e,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function bl(a,o,_e,tt,ct){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function cl(a,o,_e,tt,ct,gt,rt,at,s){return a=new bl(a,o,_e,at,s),o===1?(o=1,gt===!0&&(o|=8)):o=0,gt=Bg(3,null,null,o),a.current=gt,gt.stateNode=a,gt.memoizedState={element:tt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(gt),a}function dl(a,o,_e){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:a,containerInfo:o,implementation:_e}}function el(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p$2(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$2(171))}if(a.tag===1){var _e=a.type;if(Zf(_e))return bg(a,_e,o)}return o}function fl(a,o,_e,tt,ct,gt,rt,at,s){return a=cl(_e,tt,!0,a,ct,gt,rt,at,s),a.context=el(null),_e=a.current,tt=L(),ct=lh(_e),gt=ch(tt,ct),gt.callback=o??null,dh(_e,gt,ct),a.current.lanes=ct,Ac(a,ct,tt),Ek(a,tt),a}function gl(a,o,_e,tt){var ct=o.current,gt=L(),rt=lh(ct);return _e=el(_e),o.context===null?o.context=_e:o.pendingContext=_e,o=ch(gt,rt),o.payload={element:a},tt=tt===void 0?null:tt,tt!==null&&(o.callback=tt),a=dh(ct,o,rt),a!==null&&(mh(a,ct,rt,gt),eh(a,ct,rt)),rt}function hl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var _e=a.retryLane;a.retryLane=_e!==0&&_e<o?_e:o}}function jl(a,o){il(a,o),(a=a.alternate)&&il(a,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}nl.prototype.render=ml.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(p$2(409));gl(a,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Sk(function(){gl(null,a,null,null)}),o[uf]=null}};function nl(a){this._internalRoot=a}nl.prototype.unstable_scheduleHydration=function(a){if(a){var o=Hc();a={blockedOn:null,target:a,priority:o};for(var _e=0;_e<Qc.length&&o!==0&&o<Qc[_e].priority;_e++);Qc.splice(_e,0,a),_e===0&&Vc(a)}};function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(a,o,_e,tt,ct){if(ct){if(typeof tt=="function"){var gt=tt;tt=function(){var et=hl(rt);gt.call(et)}}var rt=fl(o,tt,a,0,null,!1,!1,"",ql);return a._reactRootContainer=rt,a[uf]=rt.current,sf(a.nodeType===8?a.parentNode:a),Sk(),rt}for(;ct=a.lastChild;)a.removeChild(ct);if(typeof tt=="function"){var at=tt;tt=function(){var et=hl(s);at.call(et)}}var s=cl(a,0,!1,null,null,!1,!1,"",ql);return a._reactRootContainer=s,a[uf]=s.current,sf(a.nodeType===8?a.parentNode:a),Sk(function(){gl(o,s,_e,tt)}),s}function sl(a,o,_e,tt,ct){var gt=_e._reactRootContainer;if(gt){var rt=gt;if(typeof ct=="function"){var at=ct;ct=function(){var s=hl(rt);at.call(s)}}gl(o,rt,a,ct)}else rt=rl(_e,o,a,ct,tt);return hl(rt)}Ec=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var _e=tc(o.pendingLanes);_e!==0&&(Cc(o,_e|1),Ek(o,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(a,1);if(tt!==null){var ct=L();mh(tt,a,1,ct)}}),jl(a,1)}};Fc=function(a){if(a.tag===13){var o=Zg(a,134217728);if(o!==null){var _e=L();mh(o,a,134217728,_e)}jl(a,134217728)}};Gc=function(a){if(a.tag===13){var o=lh(a),_e=Zg(a,o);if(_e!==null){var tt=L();mh(_e,a,o,tt)}jl(a,o)}};Hc=function(){return C$2};Ic=function(a,o){var _e=C$2;try{return C$2=a,o()}finally{C$2=_e}};yb=function(a,o,_e){switch(o){case"input":if(bb(a,_e),o=_e.name,_e.type==="radio"&&o!=null){for(_e=a;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<_e.length;o++){var tt=_e[o];if(tt!==a&&tt.form===a.form){var ct=Db(tt);if(!ct)throw Error(p$2(90));Wa(tt),bb(tt,ct)}}}break;case"textarea":ib(a,_e);break;case"select":o=_e.value,o!=null&&fb(a,!!_e.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(a,o){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$2(200));return dl(a,o,null,_e)};reactDom_production_min.createRoot=function(a,o){if(!ol(a))throw Error(p$2(299));var _e=!1,tt="",ct=ll;return o!=null&&(o.unstable_strictMode===!0&&(_e=!0),o.identifierPrefix!==void 0&&(tt=o.identifierPrefix),o.onRecoverableError!==void 0&&(ct=o.onRecoverableError)),o=cl(a,1,!1,null,null,_e,!1,tt,ct),a[uf]=o.current,sf(a.nodeType===8?a.parentNode:a),new ml(o)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(p$2(188)):(a=Object.keys(a).join(","),Error(p$2(268,a)));return a=Zb(o),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Sk(a)};reactDom_production_min.hydrate=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!0,_e)};reactDom_production_min.hydrateRoot=function(a,o,_e){if(!ol(a))throw Error(p$2(405));var tt=_e!=null&&_e.hydratedSources||null,ct=!1,gt="",rt=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(ct=!0),_e.identifierPrefix!==void 0&&(gt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),o=fl(o,null,a,1,_e??null,ct,!1,gt,rt),a[uf]=o.current,sf(a),tt)for(a=0;a<tt.length;a++)_e=tt[a],ct=_e._getVersion,ct=ct(_e._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[_e,ct]:o.mutableSourceEagerHydrationData.push(_e,ct);return new nl(o)};reactDom_production_min.render=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p$2(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,o,_e,tt){if(!pl(_e))throw Error(p$2(200));if(a==null||a._reactInternals===void 0)throw Error(p$2(38));return sl(a,o,_e,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;/**
 * @remix-run/router v1.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$3.apply(this,arguments)}var Action;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(a){a===void 0&&(a={});function o(tt,ct){let{pathname:gt,search:rt,hash:at}=tt.location;return createLocation("",{pathname:gt,search:rt,hash:at},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function _e(tt,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(o,_e,null,a)}function invariant(a,o){if(a===!1||a===null||typeof a>"u")throw new Error(o)}function warning(a,o){if(!a){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(a,o){return{usr:a.state,key:a.key,idx:o}}function createLocation(a,o,_e,tt){return _e===void 0&&(_e=null),_extends$3({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof o=="string"?parsePath(o):o,{state:_e,key:o&&o.key||tt||createKey()})}function createPath(a){let{pathname:o="/",search:_e="",hash:tt=""}=a;return _e&&_e!=="?"&&(o+=_e.charAt(0)==="?"?_e:"?"+_e),tt&&tt!=="#"&&(o+=tt.charAt(0)==="#"?tt:"#"+tt),o}function parsePath(a){let o={};if(a){let _e=a.indexOf("#");_e>=0&&(o.hash=a.substr(_e),a=a.substr(0,_e));let tt=a.indexOf("?");tt>=0&&(o.search=a.substr(tt),a=a.substr(0,tt)),a&&(o.pathname=a)}return o}function getUrlBasedHistory(a,o,_e,tt){tt===void 0&&(tt={});let{window:ct=document.defaultView,v5Compat:gt=!1}=tt,rt=ct.history,at=Action.Pop,s=null,et=nt();et==null&&(et=0,rt.replaceState(_extends$3({},rt.state,{idx:et}),""));function nt(){return(rt.state||{idx:null}).idx}function ot(){at=Action.Pop;let mt=nt(),st=mt==null?null:mt-et;et=mt,s&&s({action:at,location:lt.location,delta:st})}function ht(mt,st){at=Action.Push;let ut=createLocation(lt.location,mt,st);_e&&_e(ut,mt),et=nt()+1;let ft=getHistoryState(ut,et),yt=lt.createHref(ut);try{rt.pushState(ft,"",yt)}catch(vt){if(vt instanceof DOMException&&vt.name==="DataCloneError")throw vt;ct.location.assign(yt)}gt&&s&&s({action:at,location:lt.location,delta:1})}function dt(mt,st){at=Action.Replace;let ut=createLocation(lt.location,mt,st);_e&&_e(ut,mt),et=nt();let ft=getHistoryState(ut,et),yt=lt.createHref(ut);rt.replaceState(ft,"",yt),gt&&s&&s({action:at,location:lt.location,delta:0})}function pt(mt){let st=ct.location.origin!=="null"?ct.location.origin:ct.location.href,ut=typeof mt=="string"?mt:createPath(mt);return invariant(st,"No window.location.(origin|href) available to create URL for href: "+ut),new URL(ut,st)}let lt={get action(){return at},get location(){return a(ct,rt)},listen(mt){if(s)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,ot),s=mt,()=>{ct.removeEventListener(PopStateEventType,ot),s=null}},createHref(mt){return o(ct,mt)},createURL:pt,encodeLocation(mt){let st=pt(mt);return{pathname:st.pathname,search:st.search,hash:st.hash}},push:ht,replace:dt,go(mt){return rt.go(mt)}};return lt}var ResultType;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ResultType||(ResultType={}));function matchRoutes(a,o,_e){_e===void 0&&(_e="/");let tt=typeof o=="string"?parsePath(o):o,ct=stripBasename(tt.pathname||"/",_e);if(ct==null)return null;let gt=flattenRoutes(a);rankRouteBranches(gt);let rt=null;for(let at=0;rt==null&&at<gt.length;++at)rt=matchRouteBranch(gt[at],safelyDecodeURI(ct));return rt}function flattenRoutes(a,o,_e,tt){o===void 0&&(o=[]),_e===void 0&&(_e=[]),tt===void 0&&(tt="");let ct=(gt,rt,at)=>{let s={relativePath:at===void 0?gt.path||"":at,caseSensitive:gt.caseSensitive===!0,childrenIndex:rt,route:gt};s.relativePath.startsWith("/")&&(invariant(s.relativePath.startsWith(tt),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+tt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(tt.length));let et=joinPaths([tt,s.relativePath]),nt=_e.concat(s);gt.children&&gt.children.length>0&&(invariant(gt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+et+'".')),flattenRoutes(gt.children,o,nt,et)),!(gt.path==null&&!gt.index)&&o.push({path:et,score:computeScore(et,gt.index),routesMeta:nt})};return a.forEach((gt,rt)=>{var at;if(gt.path===""||!((at=gt.path)!=null&&at.includes("?")))ct(gt,rt);else for(let s of explodeOptionalSegments(gt.path))ct(gt,rt,s)}),o}function explodeOptionalSegments(a){let o=a.split("/");if(o.length===0)return[];let[_e,...tt]=o,ct=_e.endsWith("?"),gt=_e.replace(/\?$/,"");if(tt.length===0)return ct?[gt,""]:[gt];let rt=explodeOptionalSegments(tt.join("/")),at=[];return at.push(...rt.map(s=>s===""?gt:[gt,s].join("/"))),ct&&at.push(...rt),at.map(s=>a.startsWith("/")&&s===""?"/":s)}function rankRouteBranches(a){a.sort((o,_e)=>o.score!==_e.score?_e.score-o.score:compareIndexes(o.routesMeta.map(tt=>tt.childrenIndex),_e.routesMeta.map(tt=>tt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=a=>a==="*";function computeScore(a,o){let _e=a.split("/"),tt=_e.length;return _e.some(isSplat)&&(tt+=splatPenalty),o&&(tt+=indexRouteValue),_e.filter(ct=>!isSplat(ct)).reduce((ct,gt)=>ct+(paramRe.test(gt)?dynamicSegmentValue:gt===""?emptySegmentValue:staticSegmentValue),tt)}function compareIndexes(a,o){return a.length===o.length&&a.slice(0,-1).every((tt,ct)=>tt===o[ct])?a[a.length-1]-o[o.length-1]:0}function matchRouteBranch(a,o){let{routesMeta:_e}=a,tt={},ct="/",gt=[];for(let rt=0;rt<_e.length;++rt){let at=_e[rt],s=rt===_e.length-1,et=ct==="/"?o:o.slice(ct.length)||"/",nt=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:s},et);if(!nt)return null;Object.assign(tt,nt.params);let ot=at.route;gt.push({params:tt,pathname:joinPaths([ct,nt.pathname]),pathnameBase:normalizePathname(joinPaths([ct,nt.pathnameBase])),route:ot}),nt.pathnameBase!=="/"&&(ct=joinPaths([ct,nt.pathnameBase]))}return gt}function matchPath(a,o){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[_e,tt]=compilePath(a.path,a.caseSensitive,a.end),ct=o.match(_e);if(!ct)return null;let gt=ct[0],rt=gt.replace(/(.)\/+$/,"$1"),at=ct.slice(1);return{params:tt.reduce((et,nt,ot)=>{if(nt==="*"){let ht=at[ot]||"";rt=gt.slice(0,gt.length-ht.length).replace(/(.)\/+$/,"$1")}return et[nt]=safelyDecodeURIComponent(at[ot]||"",nt),et},{}),pathname:gt,pathnameBase:rt,pattern:a}}function compilePath(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!0),warning(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let tt=[],ct="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(rt,at)=>(tt.push(at),"/([^\\/]+)"));return a.endsWith("*")?(tt.push("*"),ct+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?ct+="\\/*$":a!==""&&a!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,o?void 0:"i"),tt]}function safelyDecodeURI(a){try{return decodeURI(a)}catch(o){return warning(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),a}}function safelyDecodeURIComponent(a,o){try{return decodeURIComponent(a)}catch(_e){return warning(!1,'The value for the URL param "'+o+'" will not be decoded because'+(' the string "'+a+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_e+").")),a}}function stripBasename(a,o){if(o==="/")return a;if(!a.toLowerCase().startsWith(o.toLowerCase()))return null;let _e=o.endsWith("/")?o.length-1:o.length,tt=a.charAt(_e);return tt&&tt!=="/"?null:a.slice(_e)||"/"}function resolvePath(a,o){o===void 0&&(o="/");let{pathname:_e,search:tt="",hash:ct=""}=typeof a=="string"?parsePath(a):a;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,o):o,search:normalizeSearch(tt),hash:normalizeHash(ct)}}function resolvePathname(a,o){let _e=o.replace(/\/+$/,"").split("/");return a.split("/").forEach(ct=>{ct===".."?_e.length>1&&_e.pop():ct!=="."&&_e.push(ct)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(a,o,_e,tt){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(tt)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(a){return a.filter((o,_e)=>_e===0||o.route.path&&o.route.path.length>0)}function resolveTo(a,o,_e,tt){tt===void 0&&(tt=!1);let ct;typeof a=="string"?ct=parsePath(a):(ct=_extends$3({},a),invariant(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let gt=a===""||ct.pathname==="",rt=gt?"/":ct.pathname,at;if(tt||rt==null)at=_e;else{let ot=o.length-1;if(rt.startsWith("..")){let ht=rt.split("/");for(;ht[0]==="..";)ht.shift(),ot-=1;ct.pathname=ht.join("/")}at=ot>=0?o[ot]:"/"}let s=resolvePath(ct,at),et=rt&&rt!=="/"&&rt.endsWith("/"),nt=(gt||rt===".")&&_e.endsWith("/");return!s.pathname.endsWith("/")&&(et||nt)&&(s.pathname+="/"),s}const joinPaths=a=>a.join("/").replace(/\/\/+/g,"/"),normalizePathname=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,normalizeHash=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function isRouteErrorResponse(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(a){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(a)}function useNavigate(){let{isDataRoute:a}=reactExports.useContext(RouteContext);return a?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let a=reactExports.useContext(DataRouterContext),{basename:o,navigator:_e}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),gt=JSON.stringify(getPathContributingMatches(tt).map(s=>s.pathnameBase)),rt=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{rt.current=!0}),reactExports.useCallback(function(s,et){if(et===void 0&&(et={}),!rt.current)return;if(typeof s=="number"){_e.go(s);return}let nt=resolveTo(s,JSON.parse(gt),ct,et.relative==="path");a==null&&o!=="/"&&(nt.pathname=nt.pathname==="/"?o:joinPaths([o,nt.pathname])),(et.replace?_e.replace:_e.push)(nt,et.state,et)},[o,_e,gt,ct,a])}function useParams(){let{matches:a}=reactExports.useContext(RouteContext),o=a[a.length-1];return o?o.params:{}}function useRoutes(a,o){return useRoutesImpl(a,o)}function useRoutesImpl(a,o,_e){useInRouterContext()||invariant(!1);let{navigator:tt}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),gt=ct[ct.length-1],rt=gt?gt.params:{};gt&&gt.pathname;let at=gt?gt.pathnameBase:"/";gt&&gt.route;let s=useLocation(),et;if(o){var nt;let lt=typeof o=="string"?parsePath(o):o;at==="/"||(nt=lt.pathname)!=null&&nt.startsWith(at)||invariant(!1),et=lt}else et=s;let ot=et.pathname||"/",ht=at==="/"?ot:ot.slice(at.length)||"/",dt=matchRoutes(a,{pathname:ht}),pt=_renderMatches(dt&&dt.map(lt=>Object.assign({},lt,{params:Object.assign({},rt,lt.params),pathname:joinPaths([at,tt.encodeLocation?tt.encodeLocation(lt.pathname).pathname:lt.pathname]),pathnameBase:lt.pathnameBase==="/"?at:joinPaths([at,tt.encodeLocation?tt.encodeLocation(lt.pathnameBase).pathname:lt.pathnameBase])})),ct,_e);return o&&pt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},et),navigationType:Action.Pop}},pt):pt}function DefaultErrorComponent(){let a=useRouteError(),o=isRouteErrorResponse(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),_e=a instanceof Error?a.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},gt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},o),_e?reactExports.createElement("pre",{style:ct},_e):null,gt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,_e){return _e.location!==o.location||_e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error||_e.error,location:_e.location,revalidation:o.revalidation||_e.revalidation}}componentDidCatch(o,_e){console.error("React Router caught the following error during render",o,_e)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(a){let{routeContext:o,match:_e,children:tt}=a,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(_e.route.errorElement||_e.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:o},tt)}function _renderMatches(a,o,_e){var tt;if(o===void 0&&(o=[]),_e===void 0&&(_e=null),a==null){var ct;if((ct=_e)!=null&&ct.errors)a=_e.matches;else return null}let gt=a,rt=(tt=_e)==null?void 0:tt.errors;if(rt!=null){let at=gt.findIndex(s=>s.route.id&&(rt==null?void 0:rt[s.route.id]));at>=0||invariant(!1),gt=gt.slice(0,Math.min(gt.length,at+1))}return gt.reduceRight((at,s,et)=>{let nt=s.route.id?rt==null?void 0:rt[s.route.id]:null,ot=null;_e&&(ot=s.route.errorElement||defaultErrorElement);let ht=o.concat(gt.slice(0,et+1)),dt=()=>{let pt;return nt?pt=ot:s.route.Component?pt=reactExports.createElement(s.route.Component,null):s.route.element?pt=s.route.element:pt=at,reactExports.createElement(RenderedRoute,{match:s,routeContext:{outlet:at,matches:ht,isDataRoute:_e!=null},children:pt})};return _e&&(s.route.ErrorBoundary||s.route.errorElement||et===0)?reactExports.createElement(RenderErrorBoundary,{location:_e.location,revalidation:_e.revalidation,component:ot,error:nt,children:dt(),routeContext:{outlet:null,matches:ht,isDataRoute:!0}}):dt()},null)}var DataRouterHook$1=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(DataRouterHook$1||{}),DataRouterStateHook$1=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(DataRouterStateHook$1||{});function useDataRouterContext(a){let o=reactExports.useContext(DataRouterContext);return o||invariant(!1),o}function useDataRouterState(a){let o=reactExports.useContext(DataRouterStateContext);return o||invariant(!1),o}function useRouteContext(a){let o=reactExports.useContext(RouteContext);return o||invariant(!1),o}function useCurrentRouteId(a){let o=useRouteContext(),_e=o.matches[o.matches.length-1];return _e.route.id||invariant(!1),_e.route.id}function useRouteError(){var a;let o=reactExports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),tt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return o||((a=_e.errors)==null?void 0:a[tt])}function useNavigateStable(){let{router:a}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),o=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{_e.current=!0}),reactExports.useCallback(function(ct,gt){gt===void 0&&(gt={}),_e.current&&(typeof ct=="number"?a.navigate(ct):a.navigate(ct,_extends$2({fromRouteId:o},gt)))},[a,o])}function Route(a){invariant(!1)}function Router(a){let{basename:o="/",children:_e=null,location:tt,navigationType:ct=Action.Pop,navigator:gt,static:rt=!1}=a;useInRouterContext()&&invariant(!1);let at=o.replace(/^\/*/,"/"),s=reactExports.useMemo(()=>({basename:at,navigator:gt,static:rt}),[at,gt,rt]);typeof tt=="string"&&(tt=parsePath(tt));let{pathname:et="/",search:nt="",hash:ot="",state:ht=null,key:dt="default"}=tt,pt=reactExports.useMemo(()=>{let lt=stripBasename(et,at);return lt==null?null:{location:{pathname:lt,search:nt,hash:ot,state:ht,key:dt},navigationType:ct}},[at,et,nt,ot,ht,dt,ct]);return pt==null?null:reactExports.createElement(NavigationContext.Provider,{value:s},reactExports.createElement(LocationContext.Provider,{children:_e,value:pt}))}function Routes(a){let{children:o,location:_e}=a;return useRoutes(createRoutesFromChildren(o),_e)}new Promise(()=>{});function createRoutesFromChildren(a,o){o===void 0&&(o=[]);let _e=[];return reactExports.Children.forEach(a,(tt,ct)=>{if(!reactExports.isValidElement(tt))return;let gt=[...o,ct];if(tt.type===reactExports.Fragment){_e.push.apply(_e,createRoutesFromChildren(tt.props.children,gt));return}tt.type!==Route&&invariant(!1),!tt.props.index||!tt.props.children||invariant(!1);let rt={id:tt.props.id||gt.join("-"),caseSensitive:tt.props.caseSensitive,element:tt.props.element,Component:tt.props.Component,index:tt.props.index,path:tt.props.path,loader:tt.props.loader,action:tt.props.action,errorElement:tt.props.errorElement,ErrorBoundary:tt.props.ErrorBoundary,hasErrorBoundary:tt.props.ErrorBoundary!=null||tt.props.errorElement!=null,shouldRevalidate:tt.props.shouldRevalidate,handle:tt.props.handle,lazy:tt.props.lazy};tt.props.children&&(rt.children=createRoutesFromChildren(tt.props.children,gt)),_e.push(rt)}),_e}/**
 * React Router DOM v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createSearchParams(a){return a===void 0&&(a=""),new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((o,_e)=>{let tt=a[_e];return o.concat(Array.isArray(tt)?tt.map(ct=>[_e,ct]):[[_e,tt]])},[]))}function getSearchParamsForLocation(a,o){let _e=createSearchParams(a);return o&&o.forEach((tt,ct)=>{_e.has(ct)||o.getAll(ct).forEach(gt=>{_e.append(ct,gt)})}),_e}const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(a){let{basename:o,children:_e,future:tt,window:ct}=a,gt=reactExports.useRef();gt.current==null&&(gt.current=createBrowserHistory({window:ct,v5Compat:!0}));let rt=gt.current,[at,s]=reactExports.useState({action:rt.action,location:rt.location}),{v7_startTransition:et}=tt||{},nt=reactExports.useCallback(ot=>{et&&startTransitionImpl?startTransitionImpl(()=>s(ot)):s(ot)},[s,et]);return reactExports.useLayoutEffect(()=>rt.listen(nt),[rt,nt]),reactExports.createElement(Router,{basename:o,children:_e,location:at.location,navigationType:at.action,navigator:rt})}var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useSearchParams(a){let o=reactExports.useRef(createSearchParams(a)),_e=reactExports.useRef(!1),tt=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(tt.search,_e.current?null:o.current),[tt.search]),gt=useNavigate(),rt=reactExports.useCallback((at,s)=>{const et=createSearchParams(typeof at=="function"?at(ct):at);_e.current=!0,gt("?"+et,s)},[gt,ct]);return[ct,rt]}var lib={},uaParser_min={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",gt="",rt="?",at="function",s="undefined",et="object",nt="string",ot="major",ht="model",dt="name",pt="type",lt="vendor",mt="version",st="architecture",ut="console",ft="mobile",yt="tablet",vt="smarttv",St="wearable",xt="embedded",Ut=350,Tt="Amazon",kt="Apple",Dt="ASUS",Vt="BlackBerry",Ot="Browser",Lt="Chrome",Gt="Edge",tn="Firefox",zt="Google",cn="Huawei",un="LG",fn="Microsoft",vn="Motorola",Ft="Opera",pn="Samsung",gn="Sharp",Tn="Sony",In="Xiaomi",kn="Zebra",Nn="Facebook",hn="Chromium OS",Sn="Mac OS",Rn=function(An,_n){var On={};for(var Pn in An)_n[Pn]&&_n[Pn].length%2===0?On[Pn]=_n[Pn].concat(An[Pn]):On[Pn]=An[Pn];return On},wn=function(An){for(var _n={},On=0;On<An.length;On++)_n[An[On].toUpperCase()]=An[On];return _n},xn=function(An,_n){return typeof An===nt?Xn(_n).indexOf(Xn(An))!==-1:!1},Xn=function(An){return An.toLowerCase()},Ln=function(An){return typeof An===nt?An.replace(/[^\d\.]/g,gt).split(".")[0]:tt},Un=function(An,_n){if(typeof An===nt)return An=An.replace(/^\s\s*/,gt),typeof _n===s?An:An.substring(0,Ut)},rr=function(An,_n){for(var On=0,Pn,Vn,ir,Mn,$n,Kt;On<_n.length&&!$n;){var At=_n[On],it=_n[On+1];for(Pn=Vn=0;Pn<At.length&&!$n&&At[Pn];)if($n=At[Pn++].exec(An),$n)for(ir=0;ir<it.length;ir++)Kt=$n[++Vn],Mn=it[ir],typeof Mn===et&&Mn.length>0?Mn.length===2?typeof Mn[1]==at?this[Mn[0]]=Mn[1].call(this,Kt):this[Mn[0]]=Mn[1]:Mn.length===3?typeof Mn[1]===at&&!(Mn[1].exec&&Mn[1].test)?this[Mn[0]]=Kt?Mn[1].call(this,Kt,Mn[2]):tt:this[Mn[0]]=Kt?Kt.replace(Mn[1],Mn[2]):tt:Mn.length===4&&(this[Mn[0]]=Kt?Mn[3].call(this,Kt.replace(Mn[1],Mn[2])):tt):this[Mn]=Kt||tt;On+=2}},tr=function(An,_n){for(var On in _n)if(typeof _n[On]===et&&_n[On].length>0){for(var Pn=0;Pn<_n[On].length;Pn++)if(xn(_n[On][Pn],An))return On===rt?tt:On}else if(xn(_n[On],An))return On===rt?tt:On;return An},Qn={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},jn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Bn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[mt,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[mt,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,mt],[/opios[\/ ]+([\w\.]+)/i],[mt,[dt,Ft+" Mini"]],[/\bopr\/([\w\.]+)/i],[mt,[dt,Ft]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,mt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[mt,[dt,"UC"+Ot]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[mt,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[mt,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[mt,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[mt,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[mt,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ot],mt],[/\bfocus\/([\w\.]+)/i],[mt,[dt,tn+" Focus"]],[/\bopt\/([\w\.]+)/i],[mt,[dt,Ft+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[mt,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[mt,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[mt,[dt,Ft+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[mt,[dt,"MIUI "+Ot]],[/fxios\/([-\w\.]+)/i],[mt,[dt,tn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ot]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ot],mt],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],mt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,mt],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,Nn],mt],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,mt],[/\bgsa\/([\w\.]+) .*safari\//i],[mt,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[mt,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[mt,[dt,Lt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Lt+" WebView"],mt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[mt,[dt,"Android "+Ot]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,mt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[mt,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[mt,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[mt,tr,Qn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,mt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],mt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[mt,[dt,tn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,mt],[/(cobalt)\/([\w\.]+)/i],[dt,[mt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[st,"amd64"]],[/(ia32(?=;))/i],[[st,Xn]],[/((?:i[346]|x)86)[;\)]/i],[[st,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[st,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[st,"armhf"]],[/windows (ce|mobile); ppc;/i],[[st,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[st,/ower/,gt,Xn]],[/(sun4\w)[;\)]/i],[[st,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[st,Xn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ht,[lt,pn],[pt,yt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ht,[lt,pn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ht,[lt,kt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ht,[lt,kt],[pt,yt]],[/(macintosh);/i],[ht,[lt,kt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ht,[lt,gn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ht,[lt,cn],[pt,yt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ht,[lt,cn],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ht,/_/g," "],[lt,In],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ht,/_/g," "],[lt,In],[pt,yt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ht,[lt,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ht,[lt,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[ht,[lt,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ht,[lt,vn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ht,[lt,vn],[pt,yt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ht,[lt,un],[pt,yt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ht,[lt,un],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ht,[lt,"Lenovo"],[pt,yt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ht,/_/g," "],[lt,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[ht,[lt,zt],[pt,yt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ht,[lt,zt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ht,[lt,Tn],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ht,"Xperia Tablet"],[lt,Tn],[pt,yt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ht,[lt,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ht,[lt,Tt],[pt,yt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ht,/(.+)/g,"Fire Phone $1"],[lt,Tt],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[ht,lt,[pt,yt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ht,[lt,Vt],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ht,[lt,Dt],[pt,yt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ht,[lt,Dt],[pt,ft]],[/(nexus 9)/i],[ht,[lt,"HTC"],[pt,yt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[lt,[ht,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ht,[lt,"Acer"],[pt,yt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ht,[lt,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[lt,ht,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[lt,ht,[pt,yt]],[/(surface duo)/i],[ht,[lt,fn],[pt,yt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ht,[lt,"Fairphone"],[pt,ft]],[/(u304aa)/i],[ht,[lt,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[ht,[lt,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[ht,[lt,"RCA"],[pt,yt]],[/\b(venue[\d ]{2,7}) b/i],[ht,[lt,"Dell"],[pt,yt]],[/\b(q(?:mv|ta)\w+) b/i],[ht,[lt,"Verizon"],[pt,yt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[ht,[lt,"Barnes & Noble"],[pt,yt]],[/\b(tm\d{3}\w+) b/i],[ht,[lt,"NuVision"],[pt,yt]],[/\b(k88) b/i],[ht,[lt,"ZTE"],[pt,yt]],[/\b(nx\d{3}j) b/i],[ht,[lt,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[ht,[lt,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[ht,[lt,"Swiss"],[pt,yt]],[/\b((zeki)?tb.*\b) b/i],[ht,[lt,"Zeki"],[pt,yt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[lt,"Dragon Touch"],ht,[pt,yt]],[/\b(ns-?\w{0,9}) b/i],[ht,[lt,"Insignia"],[pt,yt]],[/\b((nxa|next)-?\w{0,9}) b/i],[ht,[lt,"NextBook"],[pt,yt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[lt,"Voice"],ht,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[lt,"LvTel"],ht,[pt,ft]],[/\b(ph-1) /i],[ht,[lt,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[ht,[lt,"Envizen"],[pt,yt]],[/\b(trio[-\w\. ]+) b/i],[ht,[lt,"MachSpeed"],[pt,yt]],[/\btu_(1491) b/i],[ht,[lt,"Rotor"],[pt,yt]],[/(shield[\w ]+) b/i],[ht,[lt,"Nvidia"],[pt,yt]],[/(sprint) (\w+)/i],[lt,ht,[pt,ft]],[/(kin\.[onetw]{3})/i],[[ht,/\./g," "],[lt,fn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ht,[lt,kn],[pt,yt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ht,[lt,kn],[pt,ft]],[/smart-tv.+(samsung)/i],[lt,[pt,vt]],[/hbbtv.+maple;(\d+)/i],[[ht,/^/,"SmartTV"],[lt,pn],[pt,vt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[lt,un],[pt,vt]],[/(apple) ?tv/i],[lt,[ht,kt+" TV"],[pt,vt]],[/crkey/i],[[ht,Lt+"cast"],[lt,zt],[pt,vt]],[/droid.+aft(\w+)( bui|\))/i],[ht,[lt,Tt],[pt,vt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ht,[lt,gn],[pt,vt]],[/(bravia[\w ]+)( bui|\))/i],[ht,[lt,Tn],[pt,vt]],[/(mitv-\w{5}) bui/i],[ht,[lt,In],[pt,vt]],[/Hbbtv.*(technisat) (.*);/i],[lt,ht,[pt,vt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[lt,Un],[ht,Un],[pt,vt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,vt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[lt,ht,[pt,ut]],[/droid.+; (shield) bui/i],[ht,[lt,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[ht,[lt,Tn],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ht,[lt,fn],[pt,ut]],[/((pebble))app/i],[lt,ht,[pt,St]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ht,[lt,kt],[pt,St]],[/droid.+; (glass) \d/i],[ht,[lt,zt],[pt,St]],[/droid.+; (wt63?0{2,3})\)/i],[ht,[lt,kn],[pt,St]],[/(quest( 2| pro)?)/i],[ht,[lt,Nn],[pt,St]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[lt,[pt,xt]],[/(aeobc)\b/i],[ht,[lt,Tt],[pt,xt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[ht,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ht,[pt,yt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,yt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[ht,[lt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[mt,[dt,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[mt,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,mt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[mt,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,mt],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[mt,tr,jn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[mt,tr,jn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[mt,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,Sn],[mt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[mt,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,mt],[/\(bb(10);/i],[mt,[dt,Vt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[mt,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[mt,[dt,tn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[mt,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[mt,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[mt,[dt,Lt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,hn],mt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,mt],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],mt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,mt]]},an=function(An,_n){if(typeof An===et&&(_n=An,An=tt),!(this instanceof an))return new an(An,_n).getResult();var On=typeof _e!==s&&_e.navigator?_e.navigator:tt,Pn=An||(On&&On.userAgent?On.userAgent:gt),Vn=On&&On.userAgentData?On.userAgentData:tt,ir=_n?Rn(Bn,_n):Bn,Mn=On&&On.userAgent==Pn;return this.getBrowser=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.browser),$n[ot]=Ln($n[mt]),Mn&&On&&On.brave&&typeof On.brave.isBrave==at&&($n[dt]="Brave"),$n},this.getCPU=function(){var $n={};return $n[st]=tt,rr.call($n,Pn,ir.cpu),$n},this.getDevice=function(){var $n={};return $n[lt]=tt,$n[ht]=tt,$n[pt]=tt,rr.call($n,Pn,ir.device),Mn&&!$n[pt]&&Vn&&Vn.mobile&&($n[pt]=ft),Mn&&$n[ht]=="Macintosh"&&On&&typeof On.standalone!==s&&On.maxTouchPoints&&On.maxTouchPoints>2&&($n[ht]="iPad",$n[pt]=yt),$n},this.getEngine=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.engine),$n},this.getOS=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.os),Mn&&!$n[dt]&&Vn&&Vn.platform!="Unknown"&&($n[dt]=Vn.platform.replace(/chrome os/i,hn).replace(/macos/i,Sn)),$n},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Pn},this.setUA=function($n){return Pn=typeof $n===nt&&$n.length>Ut?Un($n,Ut):$n,this},this.setUA(Pn),this};an.VERSION=ct,an.BROWSER=wn([dt,mt,ot]),an.CPU=wn([st]),an.DEVICE=wn([ht,lt,pt,ut,ft,vt,yt,St,xt]),an.ENGINE=an.OS=wn([dt,mt]),a.exports&&(o=a.exports=an),o.UAParser=an;var zn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(zn&&!zn.ua){var Kn=new an;zn.ua=Kn.getResult(),zn.ua.get=function(){return Kn.getUA()},zn.ua.set=function(An){Kn.setUA(An);var _n=Kn.getResult();for(var On in _n)zn.ua[On]=_n[On]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);var uaParser_minExports=uaParser_min.exports;Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(a){return a&&typeof a=="object"&&"default"in a?a.default:a}var React=reactExports,React__default=_interopDefault(React),UAParser$1=uaParser_minExports,ClientUAInstance=new UAParser$1,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function(o){return ClientUAInstance.setUA(o)},parseUserAgent=function(o){if(!o){console.error("No userAgent string was provided");return}var _e=new UAParser$1(o);return{UA:_e,browser:_e.getBrowser(),cpu:_e.getCPU(),device:_e.getDevice(),engine:_e.getEngine(),os:_e.getOS(),ua:_e.getUA(),setUserAgent:function(ct){return _e.setUA(ct)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(a,o){var _e=Object.keys(a);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(a);o&&(tt=tt.filter(function(ct){return Object.getOwnPropertyDescriptor(a,ct).enumerable})),_e.push.apply(_e,tt)}return _e}function _objectSpread2(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(_e),!0).forEach(function(tt){_defineProperty(a,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(tt){Object.defineProperty(a,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return a}function _typeof(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(a)}function _classCallCheck(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,o){for(var _e=0;_e<o.length;_e++){var tt=o[_e];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(a,tt.key,tt)}}function _createClass(a,o,_e){return o&&_defineProperties(a.prototype,o),_e&&_defineProperties(a,_e),a}function _defineProperty(a,o,_e){return o in a?Object.defineProperty(a,o,{value:_e,enumerable:!0,configurable:!0,writable:!0}):a[o]=_e,a}function _extends$1(){return _extends$1=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$1.apply(this,arguments)}function _inherits(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&_setPrototypeOf$1(a,o)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf(a)}function _setPrototypeOf$1(a,o){return _setPrototypeOf$1=Object.setPrototypeOf||function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf$1(a,o)}function _objectWithoutPropertiesLoose$1(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,gt;for(gt=0;gt<tt.length;gt++)ct=tt[gt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _objectWithoutProperties(a,o){if(a==null)return{};var _e=_objectWithoutPropertiesLoose$1(a,o),tt,ct;if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(a);for(ct=0;ct<gt.length;ct++)tt=gt[ct],!(o.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(a,tt)&&(_e[tt]=a[tt])}return _e}function _assertThisInitialized$1(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _possibleConstructorReturn(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(a)}function _slicedToArray(a,o){return _arrayWithHoles(a)||_iterableToArrayLimit(a,o)||_unsupportedIterableToArray(a,o)||_nonIterableRest()}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _iterableToArrayLimit(a,o){var _e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(_e!=null){var tt=[],ct=!0,gt=!1,rt,at;try{for(_e=_e.call(a);!(ct=(rt=_e.next()).done)&&(tt.push(rt.value),!(o&&tt.length===o));ct=!0);}catch(s){gt=!0,at=s}finally{try{!ct&&_e.return!=null&&_e.return()}finally{if(gt)throw at}}return tt}}function _unsupportedIterableToArray(a,o){if(a){if(typeof a=="string")return _arrayLikeToArray(a,o);var _e=Object.prototype.toString.call(a).slice(8,-1);if(_e==="Object"&&a.constructor&&(_e=a.constructor.name),_e==="Map"||_e==="Set")return Array.from(a);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(a,o)}}function _arrayLikeToArray(a,o){(o==null||o>a.length)&&(o=a.length);for(var _e=0,tt=new Array(o);_e<o;_e++)tt[_e]=a[_e];return tt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function(o){switch(o){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function(o){return setUa(o)},setDefaults=function(o){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return o||_e},getNavigatorInstance=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function(o){var _e=getNavigatorInstance();return _e&&_e.platform&&(_e.platform.indexOf(o)!==-1||_e.platform==="MacIntel"&&_e.maxTouchPoints>1&&!window.MSStream)},browserPayload=function(o,_e,tt,ct,gt){return{isBrowser:o,browserMajorVersion:setDefaults(_e.major),browserFullVersion:setDefaults(_e.version),browserName:setDefaults(_e.name),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(gt)}},mobilePayload=function(o,_e,tt,ct){return _objectSpread2({},o,{vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),os:setDefaults(tt.name),osVersion:setDefaults(tt.version),ua:setDefaults(ct)})},smartTvPayload=function(o,_e,tt,ct){return{isSmartTV:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},consolePayload=function(o,_e,tt,ct){return{isConsole:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},wearablePayload=function(o,_e,tt,ct){return{isWearable:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},embeddedPayload=function(o,_e,tt,ct,gt){return{isEmbedded:o,vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(gt)}};function deviceDetect(a){var o=a?parseUserAgent(a):UAHelper,_e=o.device,tt=o.browser,ct=o.engine,gt=o.os,rt=o.ua,at=checkDeviceType(_e.type),s=at.isBrowser,et=at.isMobile,nt=at.isTablet,ot=at.isSmartTV,ht=at.isConsole,dt=at.isWearable,pt=at.isEmbedded;if(s)return browserPayload(s,tt,ct,gt,rt);if(ot)return smartTvPayload(ot,ct,gt,rt);if(ht)return consolePayload(ht,ct,gt,rt);if(et||nt)return mobilePayload(at,_e,gt,rt);if(dt)return wearablePayload(dt,ct,gt,rt);if(pt)return embeddedPayload(pt,_e,ct,gt,rt)}var isMobileType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile},isTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Tablet},isMobileAndTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile||_e===DeviceTypes.Tablet},isSmartTVType=function(o){var _e=o.type;return _e===DeviceTypes.SmartTv},isBrowserType=function(o){var _e=o.type;return _e===DeviceTypes.Browser},isWearableType=function(o){var _e=o.type;return _e===DeviceTypes.Wearable},isConsoleType=function(o){var _e=o.type;return _e===DeviceTypes.Console},isEmbeddedType=function(o){var _e=o.type;return _e===DeviceTypes.Embedded},getMobileVendor=function(o){var _e=o.vendor;return setDefaults(_e)},getMobileModel=function(o){var _e=o.model;return setDefaults(_e)},getDeviceType=function(o){var _e=o.type;return setDefaults(_e,"browser")},isAndroidType=function(o){var _e=o.name;return _e===OsTypes.Android},isWindowsType=function(o){var _e=o.name;return _e===OsTypes.Windows},isMacOsType=function(o){var _e=o.name;return _e===OsTypes.MAC_OS},isWinPhoneType=function(o){var _e=o.name;return _e===OsTypes.WindowsPhone},isIOSType=function(o){var _e=o.name;return _e===OsTypes.IOS},getOsVersion=function(o){var _e=o.version;return setDefaults(_e)},getOsName=function(o){var _e=o.name;return setDefaults(_e)},isChromeType=function(o){var _e=o.name;return _e===BrowserTypes.Chrome},isFirefoxType=function(o){var _e=o.name;return _e===BrowserTypes.Firefox},isChromiumType=function(o){var _e=o.name;return _e===BrowserTypes.Chromium},isEdgeType=function(o){var _e=o.name;return _e===BrowserTypes.Edge},isYandexType=function(o){var _e=o.name;return _e===BrowserTypes.Yandex},isSafariType=function(o){var _e=o.name;return _e===BrowserTypes.Safari||_e===BrowserTypes.MobileSafari},isMobileSafariType=function(o){var _e=o.name;return _e===BrowserTypes.MobileSafari},isOperaType=function(o){var _e=o.name;return _e===BrowserTypes.Opera},isIEType=function(o){var _e=o.name;return _e===BrowserTypes.InternetExplorer||_e===BrowserTypes.Ie},isMIUIType=function(o){var _e=o.name;return _e===BrowserTypes.MIUI},isSamsungBrowserType=function(o){var _e=o.name;return _e===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function(o){var _e=o.version;return setDefaults(_e)},getBrowserVersion=function(o){var _e=o.major;return setDefaults(_e)},getBrowserName=function(o){var _e=o.name;return setDefaults(_e)},getEngineName=function(o){var _e=o.name;return setDefaults(_e)},getEngineVersion=function(o){var _e=o.version;return setDefaults(_e)},isElectronType=function(){var o=getNavigatorInstance(),_e=o&&o.userAgent&&o.userAgent.toLowerCase();return typeof _e=="string"?/electron/.test(_e):!1},isEdgeChromiumType=function(o){return typeof o=="string"&&o.indexOf("Edg/")!==-1},getIOS13=function(){var o=getNavigatorInstance();return o&&(/iPad|iPhone|iPod/.test(o.platform)||o.platform==="MacIntel"&&o.maxTouchPoints>1)&&!window.MSStream},getIPad13=function(){return isIOS13Check("iPad")},getIphone13=function(){return isIOS13Check("iPhone")},getIPod13=function(){return isIOS13Check("iPod")},getUseragent=function(o){return setDefaults(o)};function buildSelectorsObject(a){var o=a||UAHelper,_e=o.device,tt=o.browser,ct=o.os,gt=o.engine,rt=o.ua;return{isSmartTV:isSmartTVType(_e),isConsole:isConsoleType(_e),isWearable:isWearableType(_e),isEmbedded:isEmbeddedType(_e),isMobileSafari:isMobileSafariType(tt)||getIPad13(),isChromium:isChromiumType(tt),isMobile:isMobileAndTabletType(_e)||getIPad13(),isMobileOnly:isMobileType(_e),isTablet:isTabletType(_e)||getIPad13(),isBrowser:isBrowserType(_e),isDesktop:isBrowserType(_e),isAndroid:isAndroidType(ct),isWinPhone:isWinPhoneType(ct),isIOS:isIOSType(ct)||getIPad13(),isChrome:isChromeType(tt),isFirefox:isFirefoxType(tt),isSafari:isSafariType(tt),isOpera:isOperaType(tt),isIE:isIEType(tt),osVersion:getOsVersion(ct),osName:getOsName(ct),fullBrowserVersion:getBrowserFullVersion(tt),browserVersion:getBrowserVersion(tt),browserName:getBrowserName(tt),mobileVendor:getMobileVendor(_e),mobileModel:getMobileModel(_e),engineName:getEngineName(gt),engineVersion:getEngineVersion(gt),getUA:getUseragent(rt),isEdge:isEdgeType(tt)||isEdgeChromiumType(rt),isYandex:isYandexType(tt),deviceType:getDeviceType(_e),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(rt),isLegacyEdge:isEdgeType(tt)&&!isEdgeChromiumType(rt),isWindows:isWindowsType(ct),isMacOs:isMacOsType(ct),isMIUI:isMIUIType(tt),isSamsungBrowser:isSamsungBrowserType(tt)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser$1=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function(o){if(!o||typeof o!="string"){console.error("No valid user agent string was provided");return}var _e=parseUserAgent(o),tt=_e.device,ct=_e.browser,gt=_e.os,rt=_e.engine,at=_e.ua;return buildSelectorsObject({device:tt,browser:ct,os:gt,engine:rt,ua:at})},AndroidView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isAndroid?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},BrowserView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isBrowser$1?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IEView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIE?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IOSView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIOS?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isMobile?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},TabletView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isTablet?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WinPhoneView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWinPhone?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileOnlyView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},SmartTVView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isSmartTV?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},ConsoleView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isConsole?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WearableView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWearable?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},CustomView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=o.condition,gt=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style","condition"]);return ct?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",gt,tt):null};function withOrientationChange(a){return function(o){_inherits(_e,o);function _e(tt){var ct;return _classCallCheck(this,_e),ct=_possibleConstructorReturn(this,_getPrototypeOf(_e).call(this,tt)),ct.isEventListenerAdded=!1,ct.handleOrientationChange=ct.handleOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onOrientationChange=ct.onOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onPageLoad=ct.onPageLoad.bind(_assertThisInitialized$1(ct)),ct.state={isLandscape:!1,isPortrait:!1},ct}return _createClass(_e,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var ct=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:ct===0,isLandscape:ct===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(a,_extends$1({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),_e}(React__default.Component)}function useMobileOrientation(){var a=React.useState(function(){var gt=window.innerWidth>window.innerHeight?90:0;return{isPortrait:gt===0,isLandscape:gt===90,orientation:gt===0?"portrait":"landscape"}}),o=_slicedToArray(a,2),_e=o[0],tt=o[1],ct=React.useCallback(function(){var gt=window.innerWidth>window.innerHeight?90:0,rt={isPortrait:gt===0,isLandscape:gt===90,orientation:gt===0?"portrait":"landscape"};_e.orientation!==rt.orientation&&tt(rt)},[_e.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(ct(),window.addEventListener("load",ct,!1),window.addEventListener("resize",ct,!1)),function(){window.removeEventListener("resize",ct,!1),window.removeEventListener("load",ct,!1)}},[ct]),_e}function useDeviceData(a){var o=a||window.navigator.userAgent;return parseUserAgent(o)}function useDeviceSelectors(a){var o=a||window.navigator.userAgent,_e=useDeviceData(o),tt=buildSelectorsObject(_e);return[tt,_e]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser$1;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;var isMobile_1=lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;var uaParser={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",gt="",rt="?",at="function",s="undefined",et="object",nt="string",ot="major",ht="model",dt="name",pt="type",lt="vendor",mt="version",st="architecture",ut="console",ft="mobile",yt="tablet",vt="smarttv",St="wearable",xt="embedded",Ut=350,Tt="Amazon",kt="Apple",Dt="ASUS",Vt="BlackBerry",Ot="Browser",Lt="Chrome",Gt="Edge",tn="Firefox",zt="Google",cn="Huawei",un="LG",fn="Microsoft",vn="Motorola",Ft="Opera",pn="Samsung",gn="Sharp",Tn="Sony",In="Xiaomi",kn="Zebra",Nn="Facebook",hn="Chromium OS",Sn="Mac OS",Rn=function(An,_n){var On={};for(var Pn in An)_n[Pn]&&_n[Pn].length%2===0?On[Pn]=_n[Pn].concat(An[Pn]):On[Pn]=An[Pn];return On},wn=function(An){for(var _n={},On=0;On<An.length;On++)_n[An[On].toUpperCase()]=An[On];return _n},xn=function(An,_n){return typeof An===nt?Xn(_n).indexOf(Xn(An))!==-1:!1},Xn=function(An){return An.toLowerCase()},Ln=function(An){return typeof An===nt?An.replace(/[^\d\.]/g,gt).split(".")[0]:tt},Un=function(An,_n){if(typeof An===nt)return An=An.replace(/^\s\s*/,gt),typeof _n===s?An:An.substring(0,Ut)},rr=function(An,_n){for(var On=0,Pn,Vn,ir,Mn,$n,Kt;On<_n.length&&!$n;){var At=_n[On],it=_n[On+1];for(Pn=Vn=0;Pn<At.length&&!$n&&At[Pn];)if($n=At[Pn++].exec(An),$n)for(ir=0;ir<it.length;ir++)Kt=$n[++Vn],Mn=it[ir],typeof Mn===et&&Mn.length>0?Mn.length===2?typeof Mn[1]==at?this[Mn[0]]=Mn[1].call(this,Kt):this[Mn[0]]=Mn[1]:Mn.length===3?typeof Mn[1]===at&&!(Mn[1].exec&&Mn[1].test)?this[Mn[0]]=Kt?Mn[1].call(this,Kt,Mn[2]):tt:this[Mn[0]]=Kt?Kt.replace(Mn[1],Mn[2]):tt:Mn.length===4&&(this[Mn[0]]=Kt?Mn[3].call(this,Kt.replace(Mn[1],Mn[2])):tt):this[Mn]=Kt||tt;On+=2}},tr=function(An,_n){for(var On in _n)if(typeof _n[On]===et&&_n[On].length>0){for(var Pn=0;Pn<_n[On].length;Pn++)if(xn(_n[On][Pn],An))return On===rt?tt:On}else if(xn(_n[On],An))return On===rt?tt:On;return An},Qn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},jn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Bn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[mt,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[mt,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,mt],[/opios[\/ ]+([\w\.]+)/i],[mt,[dt,Ft+" Mini"]],[/\bopr\/([\w\.]+)/i],[mt,[dt,Ft]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,mt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[mt,[dt,"UC"+Ot]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[mt,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[mt,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[mt,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[mt,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[mt,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ot],mt],[/\bfocus\/([\w\.]+)/i],[mt,[dt,tn+" Focus"]],[/\bopt\/([\w\.]+)/i],[mt,[dt,Ft+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[mt,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[mt,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[mt,[dt,Ft+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[mt,[dt,"MIUI "+Ot]],[/fxios\/([-\w\.]+)/i],[mt,[dt,tn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ot]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ot],mt],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],mt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,mt],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,Nn],mt],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,mt],[/\bgsa\/([\w\.]+) .*safari\//i],[mt,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[mt,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[mt,[dt,Lt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Lt+" WebView"],mt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[mt,[dt,"Android "+Ot]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,mt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[mt,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[mt,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[mt,tr,Qn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,mt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],mt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[mt,[dt,tn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,mt],[/(cobalt)\/([\w\.]+)/i],[dt,[mt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[st,"amd64"]],[/(ia32(?=;))/i],[[st,Xn]],[/((?:i[346]|x)86)[;\)]/i],[[st,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[st,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[st,"armhf"]],[/windows (ce|mobile); ppc;/i],[[st,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[st,/ower/,gt,Xn]],[/(sun4\w)[;\)]/i],[[st,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[st,Xn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ht,[lt,pn],[pt,yt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ht,[lt,pn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ht,[lt,kt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ht,[lt,kt],[pt,yt]],[/(macintosh);/i],[ht,[lt,kt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ht,[lt,gn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ht,[lt,cn],[pt,yt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ht,[lt,cn],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ht,/_/g," "],[lt,In],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ht,/_/g," "],[lt,In],[pt,yt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ht,[lt,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ht,[lt,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[ht,[lt,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ht,[lt,vn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ht,[lt,vn],[pt,yt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ht,[lt,un],[pt,yt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ht,[lt,un],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ht,[lt,"Lenovo"],[pt,yt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ht,/_/g," "],[lt,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[ht,[lt,zt],[pt,yt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ht,[lt,zt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ht,[lt,Tn],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ht,"Xperia Tablet"],[lt,Tn],[pt,yt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ht,[lt,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ht,[lt,Tt],[pt,yt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ht,/(.+)/g,"Fire Phone $1"],[lt,Tt],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[ht,lt,[pt,yt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ht,[lt,Vt],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ht,[lt,Dt],[pt,yt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ht,[lt,Dt],[pt,ft]],[/(nexus 9)/i],[ht,[lt,"HTC"],[pt,yt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[lt,[ht,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ht,[lt,"Acer"],[pt,yt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ht,[lt,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[lt,ht,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[lt,ht,[pt,yt]],[/(surface duo)/i],[ht,[lt,fn],[pt,yt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ht,[lt,"Fairphone"],[pt,ft]],[/(u304aa)/i],[ht,[lt,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[ht,[lt,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[ht,[lt,"RCA"],[pt,yt]],[/\b(venue[\d ]{2,7}) b/i],[ht,[lt,"Dell"],[pt,yt]],[/\b(q(?:mv|ta)\w+) b/i],[ht,[lt,"Verizon"],[pt,yt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[ht,[lt,"Barnes & Noble"],[pt,yt]],[/\b(tm\d{3}\w+) b/i],[ht,[lt,"NuVision"],[pt,yt]],[/\b(k88) b/i],[ht,[lt,"ZTE"],[pt,yt]],[/\b(nx\d{3}j) b/i],[ht,[lt,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[ht,[lt,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[ht,[lt,"Swiss"],[pt,yt]],[/\b((zeki)?tb.*\b) b/i],[ht,[lt,"Zeki"],[pt,yt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[lt,"Dragon Touch"],ht,[pt,yt]],[/\b(ns-?\w{0,9}) b/i],[ht,[lt,"Insignia"],[pt,yt]],[/\b((nxa|next)-?\w{0,9}) b/i],[ht,[lt,"NextBook"],[pt,yt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[lt,"Voice"],ht,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[lt,"LvTel"],ht,[pt,ft]],[/\b(ph-1) /i],[ht,[lt,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[ht,[lt,"Envizen"],[pt,yt]],[/\b(trio[-\w\. ]+) b/i],[ht,[lt,"MachSpeed"],[pt,yt]],[/\btu_(1491) b/i],[ht,[lt,"Rotor"],[pt,yt]],[/(shield[\w ]+) b/i],[ht,[lt,"Nvidia"],[pt,yt]],[/(sprint) (\w+)/i],[lt,ht,[pt,ft]],[/(kin\.[onetw]{3})/i],[[ht,/\./g," "],[lt,fn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ht,[lt,kn],[pt,yt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ht,[lt,kn],[pt,ft]],[/smart-tv.+(samsung)/i],[lt,[pt,vt]],[/hbbtv.+maple;(\d+)/i],[[ht,/^/,"SmartTV"],[lt,pn],[pt,vt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[lt,un],[pt,vt]],[/(apple) ?tv/i],[lt,[ht,kt+" TV"],[pt,vt]],[/crkey/i],[[ht,Lt+"cast"],[lt,zt],[pt,vt]],[/droid.+aft(\w+)( bui|\))/i],[ht,[lt,Tt],[pt,vt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ht,[lt,gn],[pt,vt]],[/(bravia[\w ]+)( bui|\))/i],[ht,[lt,Tn],[pt,vt]],[/(mitv-\w{5}) bui/i],[ht,[lt,In],[pt,vt]],[/Hbbtv.*(technisat) (.*);/i],[lt,ht,[pt,vt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[lt,Un],[ht,Un],[pt,vt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,vt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[lt,ht,[pt,ut]],[/droid.+; (shield) bui/i],[ht,[lt,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[ht,[lt,Tn],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ht,[lt,fn],[pt,ut]],[/((pebble))app/i],[lt,ht,[pt,St]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ht,[lt,kt],[pt,St]],[/droid.+; (glass) \d/i],[ht,[lt,zt],[pt,St]],[/droid.+; (wt63?0{2,3})\)/i],[ht,[lt,kn],[pt,St]],[/(quest( 2| pro)?)/i],[ht,[lt,Nn],[pt,St]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[lt,[pt,xt]],[/(aeobc)\b/i],[ht,[lt,Tt],[pt,xt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[ht,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ht,[pt,yt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,yt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[ht,[lt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[mt,[dt,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[mt,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,mt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[mt,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,mt],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[mt,tr,jn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[mt,tr,jn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[mt,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,Sn],[mt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[mt,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,mt],[/\(bb(10);/i],[mt,[dt,Vt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[mt,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[mt,[dt,tn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[mt,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[mt,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[mt,[dt,Lt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,hn],mt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,mt],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],mt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,mt]]},an=function(An,_n){if(typeof An===et&&(_n=An,An=tt),!(this instanceof an))return new an(An,_n).getResult();var On=typeof _e!==s&&_e.navigator?_e.navigator:tt,Pn=An||(On&&On.userAgent?On.userAgent:gt),Vn=On&&On.userAgentData?On.userAgentData:tt,ir=_n?Rn(Bn,_n):Bn,Mn=On&&On.userAgent==Pn;return this.getBrowser=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.browser),$n[ot]=Ln($n[mt]),Mn&&On&&On.brave&&typeof On.brave.isBrave==at&&($n[dt]="Brave"),$n},this.getCPU=function(){var $n={};return $n[st]=tt,rr.call($n,Pn,ir.cpu),$n},this.getDevice=function(){var $n={};return $n[lt]=tt,$n[ht]=tt,$n[pt]=tt,rr.call($n,Pn,ir.device),Mn&&!$n[pt]&&Vn&&Vn.mobile&&($n[pt]=ft),Mn&&$n[ht]=="Macintosh"&&On&&typeof On.standalone!==s&&On.maxTouchPoints&&On.maxTouchPoints>2&&($n[ht]="iPad",$n[pt]=yt),$n},this.getEngine=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.engine),$n},this.getOS=function(){var $n={};return $n[dt]=tt,$n[mt]=tt,rr.call($n,Pn,ir.os),Mn&&!$n[dt]&&Vn&&Vn.platform!="Unknown"&&($n[dt]=Vn.platform.replace(/chrome os/i,hn).replace(/macos/i,Sn)),$n},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Pn},this.setUA=function($n){return Pn=typeof $n===nt&&$n.length>Ut?Un($n,Ut):$n,this},this.setUA(Pn),this};an.VERSION=ct,an.BROWSER=wn([dt,mt,ot]),an.CPU=wn([st]),an.DEVICE=wn([ht,lt,pt,ut,ft,vt,yt,St,xt]),an.ENGINE=an.OS=wn([dt,mt]),a.exports&&(o=a.exports=an),o.UAParser=an;var zn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(zn&&!zn.ua){var Kn=new an;zn.ua=Kn.getResult(),zn.ua.get=function(){return Kn.getUA()},zn.ua.set=function(An){Kn.setUA(An);var _n=Kn.getResult();for(var On in _n)zn.ua[On]=_n[On]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports,base64={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */base64.exports;(function(a,o){(function(_e){var tt=o,ct=a&&a.exports==tt&&a,gt=typeof commonjsGlobal=="object"&&commonjsGlobal;(gt.global===gt||gt.window===gt)&&(_e=gt);var rt=function(pt){this.message=pt};rt.prototype=new Error,rt.prototype.name="InvalidCharacterError";var at=function(pt){throw new rt(pt)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=/[\t\n\f\r ]/g,nt=function(pt){pt=String(pt).replace(et,"");var lt=pt.length;lt%4==0&&(pt=pt.replace(/==?$/,""),lt=pt.length),(lt%4==1||/[^+a-zA-Z0-9/]/.test(pt))&&at("Invalid character: the string to be decoded is not correctly encoded.");for(var mt=0,st,ut,ft="",yt=-1;++yt<lt;)ut=s.indexOf(pt.charAt(yt)),st=mt%4?st*64+ut:ut,mt++%4&&(ft+=String.fromCharCode(255&st>>(-2*mt&6)));return ft},ot=function(pt){pt=String(pt),/[^\0-\xFF]/.test(pt)&&at("The string to be encoded contains characters outside of the Latin1 range.");for(var lt=pt.length%3,mt="",st=-1,ut,ft,yt,vt,St=pt.length-lt;++st<St;)ut=pt.charCodeAt(st)<<16,ft=pt.charCodeAt(++st)<<8,yt=pt.charCodeAt(++st),vt=ut+ft+yt,mt+=s.charAt(vt>>18&63)+s.charAt(vt>>12&63)+s.charAt(vt>>6&63)+s.charAt(vt&63);return lt==2?(ut=pt.charCodeAt(st)<<8,ft=pt.charCodeAt(++st),vt=ut+ft,mt+=s.charAt(vt>>10)+s.charAt(vt>>4&63)+s.charAt(vt<<2&63)+"="):lt==1&&(vt=pt.charCodeAt(st),mt+=s.charAt(vt>>2)+s.charAt(vt<<4&63)+"=="),mt},ht={encode:ot,decode:nt,version:"1.0.0"};if(tt&&!tt.nodeType)if(ct)ct.exports=ht;else for(var dt in ht)ht.hasOwnProperty(dt)&&(tt[dt]=ht[dt]);else _e.base64=ht})(commonjsGlobal)})(base64,base64.exports);var base64Exports=base64.exports;function _objectWithoutPropertiesLoose(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,gt;for(gt=0;gt<tt.length;gt++)ct=tt[gt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends.apply(this,arguments)}function r$1(a){var o,_e,tt="";if(typeof a=="string"||typeof a=="number")tt+=a;else if(typeof a=="object")if(Array.isArray(a))for(o=0;o<a.length;o++)a[o]&&(_e=r$1(a[o]))&&(tt&&(tt+=" "),tt+=_e);else for(o in a)a[o]&&(tt&&(tt+=" "),tt+=o);return tt}function clsx(){for(var a,o,_e=0,tt="";_e<arguments.length;)(a=arguments[_e++])&&(o=r$1(a))&&(tt&&(tt+=" "),tt+=o);return tt}function isPlainObject(a){return a!==null&&typeof a=="object"&&a.constructor===Object}function deepClone(a){if(!isPlainObject(a))return a;const o={};return Object.keys(a).forEach(_e=>{o[_e]=deepClone(a[_e])}),o}function deepmerge(a,o,_e={clone:!0}){const tt=_e.clone?_extends({},a):a;return isPlainObject(a)&&isPlainObject(o)&&Object.keys(o).forEach(ct=>{ct!=="__proto__"&&(isPlainObject(o[ct])&&ct in a&&isPlainObject(a[ct])?tt[ct]=deepmerge(a[ct],o[ct],_e):_e.clone?tt[ct]=isPlainObject(o[ct])?deepClone(o[ct]):o[ct]:tt[ct]=o[ct])}),tt}function formatMuiErrorMessage(a){let o="https://mui.com/production-error/?code="+a;for(let _e=1;_e<arguments.length;_e+=1)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified MUI error #"+a+"; visit "+o+" for the full message."}var reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$3=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$1=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case b$2:switch(a=a.type,a){case d$3:case f$1:case e$1:case m$1:case n$1:return a;default:switch(a=a&&a.$$typeof,a){case k$1:case h$1:case l$1:case q$1:case p$1:case g$2:return a;default:return o}}case c$2:return o}}}reactIs_production_min$1.ContextConsumer=h$1;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$2;reactIs_production_min$1.ForwardRef=l$1;reactIs_production_min$1.Fragment=d$3;reactIs_production_min$1.Lazy=q$1;reactIs_production_min$1.Memo=p$1;reactIs_production_min$1.Portal=c$2;reactIs_production_min$1.Profiler=f$1;reactIs_production_min$1.StrictMode=e$1;reactIs_production_min$1.Suspense=m$1;reactIs_production_min$1.SuspenseList=n$1;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(a){return v$1(a)===h$1};reactIs_production_min$1.isContextProvider=function(a){return v$1(a)===g$2};reactIs_production_min$1.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===b$2};reactIs_production_min$1.isForwardRef=function(a){return v$1(a)===l$1};reactIs_production_min$1.isFragment=function(a){return v$1(a)===d$3};reactIs_production_min$1.isLazy=function(a){return v$1(a)===q$1};reactIs_production_min$1.isMemo=function(a){return v$1(a)===p$1};reactIs_production_min$1.isPortal=function(a){return v$1(a)===c$2};reactIs_production_min$1.isProfiler=function(a){return v$1(a)===f$1};reactIs_production_min$1.isStrictMode=function(a){return v$1(a)===e$1};reactIs_production_min$1.isSuspense=function(a){return v$1(a)===m$1};reactIs_production_min$1.isSuspenseList=function(a){return v$1(a)===n$1};reactIs_production_min$1.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===d$3||a===f$1||a===e$1||a===m$1||a===n$1||a===t$1||typeof a=="object"&&a!==null&&(a.$$typeof===q$1||a.$$typeof===p$1||a.$$typeof===g$2||a.$$typeof===h$1||a.$$typeof===l$1||a.$$typeof===u$1||a.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$1;function capitalize(a){if(typeof a!="string")throw new Error(formatMuiErrorMessage(7));return a.charAt(0).toUpperCase()+a.slice(1)}function createChainedFunction(...a){return a.reduce((o,_e)=>_e==null?o:function(...ct){o.apply(this,ct),_e.apply(this,ct)},()=>{})}function debounce$1(a,o=166){let _e;function tt(...ct){const gt=()=>{a.apply(this,ct)};clearTimeout(_e),_e=setTimeout(gt,o)}return tt.clear=()=>{clearTimeout(_e)},tt}function ownerDocument(a){return a&&a.ownerDocument||document}function ownerWindow(a){return ownerDocument(a).defaultView||window}function setRef(a,o){typeof a=="function"?a(o):a&&(a.current=o)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(a){const[o,_e]=reactExports.useState(a),tt=a||o;return reactExports.useEffect(()=>{o==null&&(globalId+=1,_e(`mui-${globalId}`))},[o]),tt}const maybeReactUseId=React$2["useId".toString()];function useId(a){if(maybeReactUseId!==void 0){const o=maybeReactUseId();return a??o}return useGlobalId(a)}function useControlled({controlled:a,default:o,name:_e,state:tt="value"}){const{current:ct}=reactExports.useRef(a!==void 0),[gt,rt]=reactExports.useState(o),at=ct?a:gt,s=reactExports.useCallback(et=>{ct||rt(et)},[]);return[at,s]}function useEventCallback(a){const o=reactExports.useRef(a);return useEnhancedEffect$1(()=>{o.current=a}),reactExports.useCallback((..._e)=>(0,o.current)(..._e),[])}function useForkRef(...a){return reactExports.useMemo(()=>a.every(o=>o==null)?null:o=>{a.forEach(_e=>{setRef(_e,o)})},a)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(a){const{type:o,tagName:_e}=a;return!!(_e==="INPUT"&&inputTypesWhitelist[o]&&!a.readOnly||_e==="TEXTAREA"&&!a.readOnly||a.isContentEditable)}function handleKeyDown(a){a.metaKey||a.altKey||a.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(a){a.addEventListener("keydown",handleKeyDown,!0),a.addEventListener("mousedown",handlePointerDown,!0),a.addEventListener("pointerdown",handlePointerDown,!0),a.addEventListener("touchstart",handlePointerDown,!0),a.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(a){const{target:o}=a;try{return o.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(o)}function useIsFocusVisible(){const a=reactExports.useCallback(ct=>{ct!=null&&prepare(ct.ownerDocument)},[]),o=reactExports.useRef(!1);function _e(){return o.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),o.current=!1,!0):!1}function tt(ct){return isFocusVisible(ct)?(o.current=!0,!0):!1}return{isFocusVisibleRef:o,onFocus:tt,onBlur:_e,ref:a}}function getScrollbarSize(a){const o=a.documentElement.clientWidth;return Math.abs(window.innerWidth-o)}function resolveProps(a,o){const _e=_extends({},o);return Object.keys(a).forEach(tt=>{if(tt.toString().match(/^(components|slots)$/))_e[tt]=_extends({},a[tt],_e[tt]);else if(tt.toString().match(/^(componentsProps|slotProps)$/)){const ct=a[tt]||{},gt=o[tt];_e[tt]={},!gt||!Object.keys(gt)?_e[tt]=ct:!ct||!Object.keys(ct)?_e[tt]=gt:(_e[tt]=_extends({},gt),Object.keys(ct).forEach(rt=>{_e[tt][rt]=resolveProps(ct[rt],gt[rt])}))}else _e[tt]===void 0&&(_e[tt]=a[tt])}),_e}function composeClasses(a,o,_e=void 0){const tt={};return Object.keys(a).forEach(ct=>{tt[ct]=a[ct].reduce((gt,rt)=>{if(rt){const at=o(rt);at!==""&&gt.push(at),_e&&_e[rt]&&gt.push(_e[rt])}return gt},[]).join(" ")}),tt}const defaultGenerator=a=>a,createClassNameGenerator=()=>{let a=defaultGenerator;return{configure(o){a=o},generate(o){return a(o)},reset(){a=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(a,o,_e="Mui"){const tt=globalStateClassesMapping[o];return tt?`${_e}-${tt}`:`${ClassNameGenerator$1.generate(a)}-${o}`}function generateUtilityClasses(a,o,_e="Mui"){const tt={};return o.forEach(ct=>{tt[ct]=generateUtilityClass(a,ct,_e)}),tt}function memoize$1(a){var o=Object.create(null);return function(_e){return o[_e]===void 0&&(o[_e]=a(_e)),o[_e]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(a){return reactPropsRegex.test(a)||a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)<91});function sheetForTag(a){if(a.sheet)return a.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===a)return document.styleSheets[o]}function createStyleElement(a){var o=document.createElement("style");return o.setAttribute("data-emotion",a.key),a.nonce!==void 0&&o.setAttribute("nonce",a.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function a(_e){var tt=this;this._insertTag=function(ct){var gt;tt.tags.length===0?tt.insertionPoint?gt=tt.insertionPoint.nextSibling:tt.prepend?gt=tt.container.firstChild:gt=tt.before:gt=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(ct,gt),tt.tags.push(ct)},this.isSpeedy=_e.speedy===void 0?!0:_e.speedy,this.tags=[],this.ctr=0,this.nonce=_e.nonce,this.key=_e.key,this.container=_e.container,this.prepend=_e.prepend,this.insertionPoint=_e.insertionPoint,this.before=null}var o=a.prototype;return o.hydrate=function(tt){tt.forEach(this._insertTag)},o.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ct=this.tags[this.tags.length-1];if(this.isSpeedy){var gt=sheetForTag(ct);try{gt.insertRule(tt,gt.cssRules.length)}catch{}}else ct.appendChild(document.createTextNode(tt));this.ctr++},o.flush=function(){this.tags.forEach(function(tt){return tt.parentNode&&tt.parentNode.removeChild(tt)}),this.tags=[],this.ctr=0},a}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(a,o){return charat(a,0)^45?(((o<<2^charat(a,0))<<2^charat(a,1))<<2^charat(a,2))<<2^charat(a,3):0}function trim(a){return a.trim()}function match(a,o){return(a=o.exec(a))?a[0]:a}function replace(a,o,_e){return a.replace(o,_e)}function indexof(a,o){return a.indexOf(o)}function charat(a,o){return a.charCodeAt(o)|0}function substr(a,o,_e){return a.slice(o,_e)}function strlen(a){return a.length}function sizeof(a){return a.length}function append(a,o){return o.push(a),a}function combine(a,o){return a.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(a,o,_e,tt,ct,gt,rt){return{value:a,root:o,parent:_e,type:tt,props:ct,children:gt,line,column,length:rt,return:""}}function copy(a,o){return assign(node("",null,null,"",null,null,0),a,{length:-a.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(a,o){return substr(characters,a,o)}function token(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(a){return line=column=1,length=strlen(characters=a),position=0,[]}function dealloc(a){return characters="",a}function delimit(a){return trim(slice(position-1,delimiter(a===91?a+2:a===40?a+1:a)))}function whitespace(a){for(;(character=peek())&&character<33;)next();return token(a)>2||token(character)>3?"":" "}function escaping(a,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(a,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(a){for(;next();)switch(character){case a:return position;case 34:case 39:a!==34&&a!==39&&delimiter(character);break;case 40:a===41&&delimiter(a);break;case 92:next();break}return position}function commenter(a,o){for(;next()&&a+character!==47+10;)if(a+character===42+42&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(a===47?a:next())}function identifier(a){for(;!token(peek());)next();return slice(a,position)}function compile(a){return dealloc(parse("",null,null,null,[""],a=alloc(a),0,[0],a))}function parse(a,o,_e,tt,ct,gt,rt,at,s){for(var et=0,nt=0,ot=rt,ht=0,dt=0,pt=0,lt=1,mt=1,st=1,ut=0,ft="",yt=ct,vt=gt,St=tt,xt=ft;mt;)switch(pt=ut,ut=next()){case 40:if(pt!=108&&charat(xt,ot-1)==58){indexof(xt+=replace(delimit(ut),"&","&\f"),"&\f")!=-1&&(st=-1);break}case 34:case 39:case 91:xt+=delimit(ut);break;case 9:case 10:case 13:case 32:xt+=whitespace(pt);break;case 92:xt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,_e),s);break;default:xt+="/"}break;case 123*lt:at[et++]=strlen(xt)*st;case 125*lt:case 59:case 0:switch(ut){case 0:case 125:mt=0;case 59+nt:st==-1&&(xt=replace(xt,/\f/g,"")),dt>0&&strlen(xt)-ot&&append(dt>32?declaration(xt+";",tt,_e,ot-1):declaration(replace(xt," ","")+";",tt,_e,ot-2),s);break;case 59:xt+=";";default:if(append(St=ruleset(xt,o,_e,et,nt,ct,at,ft,yt=[],vt=[],ot),gt),ut===123)if(nt===0)parse(xt,o,St,St,yt,gt,ot,at,vt);else switch(ht===99&&charat(xt,3)===110?100:ht){case 100:case 108:case 109:case 115:parse(a,St,St,tt&&append(ruleset(a,St,St,0,0,ct,at,ft,ct,yt=[],ot),vt),ct,vt,ot,at,tt?yt:vt);break;default:parse(xt,St,St,St,[""],vt,0,at,vt)}}et=nt=dt=0,lt=st=1,ft=xt="",ot=rt;break;case 58:ot=1+strlen(xt),dt=pt;default:if(lt<1){if(ut==123)--lt;else if(ut==125&&lt++==0&&prev()==125)continue}switch(xt+=from(ut),ut*lt){case 38:st=nt>0?1:(xt+="\f",-1);break;case 44:at[et++]=(strlen(xt)-1)*st,st=1;break;case 64:peek()===45&&(xt+=delimit(next())),ht=peek(),nt=ot=strlen(ft=xt+=identifier(caret())),ut++;break;case 45:pt===45&&strlen(xt)==2&&(lt=0)}}return gt}function ruleset(a,o,_e,tt,ct,gt,rt,at,s,et,nt){for(var ot=ct-1,ht=ct===0?gt:[""],dt=sizeof(ht),pt=0,lt=0,mt=0;pt<tt;++pt)for(var st=0,ut=substr(a,ot+1,ot=abs(lt=rt[pt])),ft=a;st<dt;++st)(ft=trim(lt>0?ht[st]+" "+ut:replace(ut,/&\f/g,ht[st])))&&(s[mt++]=ft);return node(a,o,_e,ct===0?RULESET:at,s,et,nt)}function comment(a,o,_e){return node(a,o,_e,COMMENT,from(char()),substr(a,2,-2),0)}function declaration(a,o,_e,tt){return node(a,o,_e,DECLARATION,substr(a,0,tt),substr(a,tt+1,-1),tt)}function serialize(a,o){for(var _e="",tt=sizeof(a),ct=0;ct<tt;ct++)_e+=o(a[ct],ct,a,o)||"";return _e}function stringify(a,o,_e,tt){switch(a.type){case LAYER:if(a.children.length)break;case IMPORT:case DECLARATION:return a.return=a.return||a.value;case COMMENT:return"";case KEYFRAMES:return a.return=a.value+"{"+serialize(a.children,tt)+"}";case RULESET:a.value=a.props.join(",")}return strlen(_e=serialize(a.children,tt))?a.return=a.value+"{"+_e+"}":""}function middleware(a){var o=sizeof(a);return function(_e,tt,ct,gt){for(var rt="",at=0;at<o;at++)rt+=a[at](_e,tt,ct,gt)||"";return rt}}function rulesheet(a){return function(o){o.root||(o=o.return)&&a(o)}}var identifierWithPointTracking=function(o,_e,tt){for(var ct=0,gt=0;ct=gt,gt=peek(),ct===38&&gt===12&&(_e[tt]=1),!token(gt);)next();return slice(o,position)},toRules=function(o,_e){var tt=-1,ct=44;do switch(token(ct)){case 0:ct===38&&peek()===12&&(_e[tt]=1),o[tt]+=identifierWithPointTracking(position-1,_e,tt);break;case 2:o[tt]+=delimit(ct);break;case 4:if(ct===44){o[++tt]=peek()===58?"&\f":"",_e[tt]=o[tt].length;break}default:o[tt]+=from(ct)}while(ct=next());return o},getRules=function(o,_e){return dealloc(toRules(alloc(o),_e))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var _e=o.value,tt=o.parent,ct=o.column===tt.column&&o.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(o.props.length===1&&_e.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!ct){fixedElements.set(o,!0);for(var gt=[],rt=getRules(_e,gt),at=tt.props,s=0,et=0;s<rt.length;s++)for(var nt=0;nt<at.length;nt++,et++)o.props[et]=gt[s]?rt[s].replace(/&\f/g,at[nt]):at[nt]+" "+rt[s]}}},removeLabel=function(o){if(o.type==="decl"){var _e=o.value;_e.charCodeAt(0)===108&&_e.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(a,o){switch(hash$2(a,o)){case 5103:return WEBKIT+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+a+MOZ+a+MS+a+a;case 6828:case 4268:return WEBKIT+a+MS+a+a;case 6165:return WEBKIT+a+MS+"flex-"+a+a;case 5187:return WEBKIT+a+replace(a,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+a;case 5443:return WEBKIT+a+MS+"flex-item-"+replace(a,/flex-|-self/,"")+a;case 4675:return WEBKIT+a+MS+"flex-line-pack"+replace(a,/align-content|flex-|-self/,"")+a;case 5548:return WEBKIT+a+MS+replace(a,"shrink","negative")+a;case 5292:return WEBKIT+a+MS+replace(a,"basis","preferred-size")+a;case 6060:return WEBKIT+"box-"+replace(a,"-grow","")+WEBKIT+a+MS+replace(a,"grow","positive")+a;case 4554:return WEBKIT+replace(a,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+a;case 6187:return replace(replace(replace(a,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),a,"")+a;case 5495:case 3959:return replace(a,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(a,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+a+a;case 4095:case 3583:case 4068:case 2532:return replace(a,/(.+)-inline(.+)/,WEBKIT+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(a)-1-o>6)switch(charat(a,o+1)){case 109:if(charat(a,o+4)!==45)break;case 102:return replace(a,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(a,o+3)==108?"$3":"$2-$3"))+a;case 115:return~indexof(a,"stretch")?prefix(replace(a,"stretch","fill-available"),o)+a:a}break;case 4949:if(charat(a,o+1)!==115)break;case 6444:switch(charat(a,strlen(a)-3-(~indexof(a,"!important")&&10))){case 107:return replace(a,":",":"+WEBKIT)+a;case 101:return replace(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(a,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+a}break;case 5936:switch(charat(a,o+11)){case 114:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return WEBKIT+a+MS+a+a}return a}var prefixer=function(o,_e,tt,ct){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],ct);case RULESET:if(o.length)return combine(o.props,function(gt){switch(match(gt,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(gt,/:(read-\w+)/,":"+MOZ+"$1")]})],ct);case"::placeholder":return serialize([copy(o,{props:[replace(gt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(gt,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(gt,/:(plac\w+)/,MS+"input-$1")]})],ct)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var _e=o.key;if(_e==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(lt){var mt=lt.getAttribute("data-emotion");mt.indexOf(" ")!==-1&&(document.head.appendChild(lt),lt.setAttribute("data-s",""))})}var ct=o.stylisPlugins||defaultStylisPlugins,gt={},rt,at=[];rt=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+_e+' "]'),function(lt){for(var mt=lt.getAttribute("data-emotion").split(" "),st=1;st<mt.length;st++)gt[mt[st]]=!0;at.push(lt)});var s,et=[compat,removeLabel];{var nt,ot=[stringify,rulesheet(function(lt){nt.insert(lt)})],ht=middleware(et.concat(ct,ot)),dt=function(mt){return serialize(compile(mt),ht)};s=function(mt,st,ut,ft){nt=ut,dt(mt?mt+"{"+st.styles+"}":st.styles),ft&&(pt.inserted[st.name]=!0)}}var pt={key:_e,sheet:new StyleSheet({key:_e,container:rt,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:gt,registered:{},insert:s};return pt.sheet.hydrate(at),pt},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$2=b$1?Symbol.for("react.portal"):60106,e=b$1?Symbol.for("react.fragment"):60107,f=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h=b$1?Symbol.for("react.provider"):60109,k=b$1?Symbol.for("react.context"):60110,l=b$1?Symbol.for("react.async_mode"):60111,m=b$1?Symbol.for("react.concurrent_mode"):60111,n=b$1?Symbol.for("react.forward_ref"):60112,p=b$1?Symbol.for("react.suspense"):60113,q=b$1?Symbol.for("react.suspense_list"):60120,r=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v=b$1?Symbol.for("react.block"):60121,w=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y=b$1?Symbol.for("react.scope"):60119;function z$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case c$1:switch(a=a.type,a){case l:case m:case e:case g$1:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return o}}case d$2:return o}}}function A(a){return z$1(a)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d$2;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(a){return A(a)||z$1(a)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(a){return z$1(a)===k};reactIs_production_min.isContextProvider=function(a){return z$1(a)===h};reactIs_production_min.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===c$1};reactIs_production_min.isForwardRef=function(a){return z$1(a)===n};reactIs_production_min.isFragment=function(a){return z$1(a)===e};reactIs_production_min.isLazy=function(a){return z$1(a)===t};reactIs_production_min.isMemo=function(a){return z$1(a)===r};reactIs_production_min.isPortal=function(a){return z$1(a)===d$2};reactIs_production_min.isProfiler=function(a){return z$1(a)===g$1};reactIs_production_min.isStrictMode=function(a){return z$1(a)===f};reactIs_production_min.isSuspense=function(a){return z$1(a)===p};reactIs_production_min.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===e||a===m||a===g$1||a===f||a===p||a===q||typeof a=="object"&&a!==null&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x$1||a.$$typeof===y||a.$$typeof===v)};reactIs_production_min.typeOf=z$1;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(a,o,_e){var tt="";return _e.split(" ").forEach(function(ct){a[ct]!==void 0?o.push(a[ct]+";"):tt+=ct+" "}),tt}var registerStyles=function(o,_e,tt){var ct=o.key+"-"+_e.name;(tt===!1||isBrowser===!1)&&o.registered[ct]===void 0&&(o.registered[ct]=_e.styles)},insertStyles=function(o,_e,tt){registerStyles(o,_e,tt);var ct=o.key+"-"+_e.name;if(o.inserted[_e.name]===void 0){var gt=_e;do o.insert(_e===gt?"."+ct:"",gt,o.sheet,!0),gt=gt.next;while(gt!==void 0)}};function murmur2(a){for(var o=0,_e,tt=0,ct=a.length;ct>=4;++tt,ct-=4)_e=a.charCodeAt(tt)&255|(a.charCodeAt(++tt)&255)<<8|(a.charCodeAt(++tt)&255)<<16|(a.charCodeAt(++tt)&255)<<24,_e=(_e&65535)*1540483477+((_e>>>16)*59797<<16),_e^=_e>>>24,o=(_e&65535)*1540483477+((_e>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(ct){case 3:o^=(a.charCodeAt(tt+2)&255)<<16;case 2:o^=(a.charCodeAt(tt+1)&255)<<8;case 1:o^=a.charCodeAt(tt)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(a){return isCustomProperty(a)?a:a.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,_e){switch(o){case"animation":case"animationName":if(typeof _e=="string")return _e.replace(animationRegex,function(tt,ct,gt){return cursor={name:ct,styles:gt,next:cursor},ct})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof _e=="number"&&_e!==0?_e+"px":_e},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(a,o,_e){if(_e==null)return"";if(_e.__emotion_styles!==void 0)return _e;switch(typeof _e){case"boolean":return"";case"object":{if(_e.anim===1)return cursor={name:_e.name,styles:_e.styles,next:cursor},_e.name;if(_e.styles!==void 0){var tt=_e.next;if(tt!==void 0)for(;tt!==void 0;)cursor={name:tt.name,styles:tt.styles,next:cursor},tt=tt.next;var ct=_e.styles+";";return ct}return createStringFromObject(a,o,_e)}case"function":{if(a!==void 0){var gt=cursor,rt=_e(a);return cursor=gt,handleInterpolation(a,o,rt)}break}}if(o==null)return _e;var at=o[_e];return at!==void 0?at:_e}function createStringFromObject(a,o,_e){var tt="";if(Array.isArray(_e))for(var ct=0;ct<_e.length;ct++)tt+=handleInterpolation(a,o,_e[ct])+";";else for(var gt in _e){var rt=_e[gt];if(typeof rt!="object")o!=null&&o[rt]!==void 0?tt+=gt+"{"+o[rt]+"}":isProcessableValue(rt)&&(tt+=processStyleName(gt)+":"+processStyleValue(gt,rt)+";");else if(Array.isArray(rt)&&typeof rt[0]=="string"&&(o==null||o[rt[0]]===void 0))for(var at=0;at<rt.length;at++)isProcessableValue(rt[at])&&(tt+=processStyleName(gt)+":"+processStyleValue(gt,rt[at])+";");else{var s=handleInterpolation(a,o,rt);switch(gt){case"animation":case"animationName":{tt+=processStyleName(gt)+":"+s+";";break}default:tt+=gt+"{"+s+"}"}}}return tt}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,_e,tt){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var ct=!0,gt="";cursor=void 0;var rt=o[0];rt==null||rt.raw===void 0?(ct=!1,gt+=handleInterpolation(tt,_e,rt)):gt+=rt[0];for(var at=1;at<o.length;at++)gt+=handleInterpolation(tt,_e,o[at]),ct&&(gt+=rt[at]);labelPattern.lastIndex=0;for(var s="",et;(et=labelPattern.exec(gt))!==null;)s+="-"+et[1];var nt=murmur2(gt)+s;return{name:nt,styles:gt,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports.forwardRef(function(_e,tt){var ct=reactExports.useContext(EmotionCacheContext);return o(_e,ct,tt)})},ThemeContext$2=reactExports.createContext({}),Global=withEmotionCache(function(a,o){var _e=a.styles,tt=serializeStyles([_e],void 0,reactExports.useContext(ThemeContext$2)),ct=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var gt=o.key+"-global",rt=new o.sheet.constructor({key:gt,nonce:o.sheet.nonce,container:o.sheet.container,speedy:o.sheet.isSpeedy}),at=!1,s=document.querySelector('style[data-emotion="'+gt+" "+tt.name+'"]');return o.sheet.tags.length&&(rt.before=o.sheet.tags[0]),s!==null&&(at=!0,s.setAttribute("data-emotion",gt),rt.hydrate([s])),ct.current=[rt,at],function(){rt.flush()}},[o]),useInsertionEffectWithLayoutFallback(function(){var gt=ct.current,rt=gt[0],at=gt[1];if(at){gt[1]=!1;return}if(tt.next!==void 0&&insertStyles(o,tt.next,!0),rt.tags.length){var s=rt.tags[rt.tags.length-1].nextElementSibling;rt.before=s,rt.flush()}o.insert("",tt,rt,!1)},[o,tt.name]),null});function css(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return serializeStyles(o)}var keyframes=function(){var o=css.apply(void 0,arguments),_e="animation-"+o.name;return{name:_e,styles:"@keyframes "+_e+"{"+o.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,_e,tt){var ct;if(_e){var gt=_e.shouldForwardProp;ct=o.__emotion_forwardProp&&gt?function(rt){return o.__emotion_forwardProp(rt)&&gt(rt)}:gt}return typeof ct!="function"&&tt&&(ct=o.__emotion_forwardProp),ct},Insertion=function(o){var _e=o.cache,tt=o.serialized,ct=o.isStringTag;return registerStyles(_e,tt,ct),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(_e,tt,ct)}),null},createStyled$1=function a(o,_e){var tt=o.__emotion_real===o,ct=tt&&o.__emotion_base||o,gt,rt;_e!==void 0&&(gt=_e.label,rt=_e.target);var at=composeShouldForwardProps(o,_e,tt),s=at||getDefaultShouldForwardProp(ct),et=!s("as");return function(){var nt=arguments,ot=tt&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(gt!==void 0&&ot.push("label:"+gt+";"),nt[0]==null||nt[0].raw===void 0)ot.push.apply(ot,nt);else{ot.push(nt[0][0]);for(var ht=nt.length,dt=1;dt<ht;dt++)ot.push(nt[dt],nt[0][dt])}var pt=withEmotionCache(function(lt,mt,st){var ut=et&&lt.as||ct,ft="",yt=[],vt=lt;if(lt.theme==null){vt={};for(var St in lt)vt[St]=lt[St];vt.theme=reactExports.useContext(ThemeContext$2)}typeof lt.className=="string"?ft=getRegisteredStyles(mt.registered,yt,lt.className):lt.className!=null&&(ft=lt.className+" ");var xt=serializeStyles(ot.concat(yt),mt.registered,vt);ft+=mt.key+"-"+xt.name,rt!==void 0&&(ft+=" "+rt);var Ut=et&&at===void 0?getDefaultShouldForwardProp(ut):s,Tt={};for(var kt in lt)et&&kt==="as"||Ut(kt)&&(Tt[kt]=lt[kt]);return Tt.className=ft,Tt.ref=st,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:mt,serialized:xt,isStringTag:typeof ut=="string"}),reactExports.createElement(ut,Tt))});return pt.displayName=gt!==void 0?gt:"Styled("+(typeof ct=="string"?ct:ct.displayName||ct.name||"Component")+")",pt.defaultProps=o.defaultProps,pt.__emotion_real=pt,pt.__emotion_base=ct,pt.__emotion_styles=ot,pt.__emotion_forwardProp=at,Object.defineProperty(pt,"toString",{value:function(){return"."+rt}}),pt.withComponent=function(lt,mt){return a(lt,_extends({},_e,mt,{shouldForwardProp:composeShouldForwardProps(pt,mt,!0)})).apply(void 0,ot)},pt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(a){newStyled[a]=newStyled(a)});function isEmpty$4(a){return a==null||Object.keys(a).length===0}function GlobalStyles$2(a){const{styles:o,defaultTheme:_e={}}=a,tt=typeof o=="function"?ct=>o(isEmpty$4(ct)?_e:ct):o;return jsxRuntimeExports.jsx(Global,{styles:tt})}/**
 * @mui/styled-engine v5.14.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$3(a,o){return newStyled(a,o)}const internal_processStyles=(a,o)=>{Array.isArray(a.__emotion_styles)&&(a.__emotion_styles=o(a.__emotion_styles))},_excluded$T=["values","unit","step"],sortBreakpointsValues=a=>{const o=Object.keys(a).map(_e=>({key:_e,val:a[_e]}))||[];return o.sort((_e,tt)=>_e.val-tt.val),o.reduce((_e,tt)=>_extends({},_e,{[tt.key]:tt.val}),{})};function createBreakpoints(a){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:_e="px",step:tt=5}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$T),gt=sortBreakpointsValues(o),rt=Object.keys(gt);function at(ht){return`@media (min-width:${typeof o[ht]=="number"?o[ht]:ht}${_e})`}function s(ht){return`@media (max-width:${(typeof o[ht]=="number"?o[ht]:ht)-tt/100}${_e})`}function et(ht,dt){const pt=rt.indexOf(dt);return`@media (min-width:${typeof o[ht]=="number"?o[ht]:ht}${_e}) and (max-width:${(pt!==-1&&typeof o[rt[pt]]=="number"?o[rt[pt]]:dt)-tt/100}${_e})`}function nt(ht){return rt.indexOf(ht)+1<rt.length?et(ht,rt[rt.indexOf(ht)+1]):at(ht)}function ot(ht){const dt=rt.indexOf(ht);return dt===0?at(rt[1]):dt===rt.length-1?s(rt[dt]):et(ht,rt[rt.indexOf(ht)+1]).replace("@media","@media not all and")}return _extends({keys:rt,values:gt,up:at,down:s,between:et,only:nt,not:ot,unit:_e},ct)}const shape={borderRadius:4},shape$1=shape;function merge(a,o){return o?deepmerge(a,o,{clone:!1}):a}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:a=>`@media (min-width:${values$1[a]}px)`};function handleBreakpoints(a,o,_e){const tt=a.theme||{};if(Array.isArray(o)){const gt=tt.breakpoints||defaultBreakpoints;return o.reduce((rt,at,s)=>(rt[gt.up(gt.keys[s])]=_e(o[s]),rt),{})}if(typeof o=="object"){const gt=tt.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((rt,at)=>{if(Object.keys(gt.values||values$1).indexOf(at)!==-1){const s=gt.up(at);rt[s]=_e(o[at],at)}else{const s=at;rt[s]=o[s]}return rt},{})}return _e(o)}function createEmptyBreakpointObject(a={}){var o;return((o=a.keys)==null?void 0:o.reduce((tt,ct)=>{const gt=a.up(ct);return tt[gt]={},tt},{}))||{}}function removeUnusedBreakpoints(a,o){return a.reduce((_e,tt)=>{const ct=_e[tt];return(!ct||Object.keys(ct).length===0)&&delete _e[tt],_e},o)}function mergeBreakpointsInOrder(a,...o){const _e=createEmptyBreakpointObject(a),tt=[_e,...o].reduce((ct,gt)=>deepmerge(ct,gt),{});return removeUnusedBreakpoints(Object.keys(_e),tt)}function computeBreakpointsBase(a,o){if(typeof a!="object")return{};const _e={},tt=Object.keys(o);return Array.isArray(a)?tt.forEach((ct,gt)=>{gt<a.length&&(_e[ct]=!0)}):tt.forEach(ct=>{a[ct]!=null&&(_e[ct]=!0)}),_e}function resolveBreakpointValues({values:a,breakpoints:o,base:_e}){const tt=_e||computeBreakpointsBase(a,o),ct=Object.keys(tt);if(ct.length===0)return a;let gt;return ct.reduce((rt,at,s)=>(Array.isArray(a)?(rt[at]=a[s]!=null?a[s]:a[gt],gt=s):typeof a=="object"?(rt[at]=a[at]!=null?a[at]:a[gt],gt=at):rt[at]=a,rt),{})}function getPath(a,o,_e=!0){if(!o||typeof o!="string")return null;if(a&&a.vars&&_e){const tt=`vars.${o}`.split(".").reduce((ct,gt)=>ct&&ct[gt]?ct[gt]:null,a);if(tt!=null)return tt}return o.split(".").reduce((tt,ct)=>tt&&tt[ct]!=null?tt[ct]:null,a)}function getStyleValue$1(a,o,_e,tt=_e){let ct;return typeof a=="function"?ct=a(_e):Array.isArray(a)?ct=a[_e]||tt:ct=getPath(a,_e)||tt,o&&(ct=o(ct,tt,a)),ct}function style$2(a){const{prop:o,cssProperty:_e=a.prop,themeKey:tt,transform:ct}=a,gt=rt=>{if(rt[o]==null)return null;const at=rt[o],s=rt.theme,et=getPath(s,tt)||{};return handleBreakpoints(rt,at,ot=>{let ht=getStyleValue$1(et,ct,ot);return ot===ht&&typeof ot=="string"&&(ht=getStyleValue$1(et,ct,`${o}${ot==="default"?"":capitalize(ot)}`,ot)),_e===!1?ht:{[_e]:ht}})};return gt.propTypes={},gt.filterProps=[o],gt}function memoize(a){const o={};return _e=>(o[_e]===void 0&&(o[_e]=a(_e)),o[_e])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(a=>{if(a.length>2)if(aliases[a])a=aliases[a];else return[a];const[o,_e]=a.split(""),tt=properties[o],ct=directions[_e]||"";return Array.isArray(ct)?ct.map(gt=>tt+gt):[tt+ct]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(a,o,_e,tt){var ct;const gt=(ct=getPath(a,o,!1))!=null?ct:_e;return typeof gt=="number"?rt=>typeof rt=="string"?rt:gt*rt:Array.isArray(gt)?rt=>typeof rt=="string"?rt:gt[rt]:typeof gt=="function"?gt:()=>{}}function createUnarySpacing(a){return createUnaryUnit(a,"spacing",8)}function getValue(a,o){if(typeof o=="string"||o==null)return o;const _e=Math.abs(o),tt=a(_e);return o>=0?tt:typeof tt=="number"?-tt:`-${tt}`}function getStyleFromPropValue(a,o){return _e=>a.reduce((tt,ct)=>(tt[ct]=getValue(o,_e),tt),{})}function resolveCssProperty(a,o,_e,tt){if(o.indexOf(_e)===-1)return null;const ct=getCssProperties(_e),gt=getStyleFromPropValue(ct,tt),rt=a[_e];return handleBreakpoints(a,rt,gt)}function style$1(a,o){const _e=createUnarySpacing(a.theme);return Object.keys(a).map(tt=>resolveCssProperty(a,o,tt,_e)).reduce(merge,{})}function margin(a){return style$1(a,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(a){return style$1(a,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(a=8){if(a.mui)return a;const o=createUnarySpacing({spacing:a}),_e=(...tt)=>(tt.length===0?[1]:tt).map(gt=>{const rt=o(gt);return typeof rt=="number"?`${rt}px`:rt}).join(" ");return _e.mui=!0,_e}function compose(...a){const o=a.reduce((tt,ct)=>(ct.filterProps.forEach(gt=>{tt[gt]=ct}),tt),{}),_e=tt=>Object.keys(tt).reduce((ct,gt)=>o[gt]?merge(ct,o[gt](tt)):ct,{});return _e.propTypes={},_e.filterProps=a.reduce((tt,ct)=>tt.concat(ct.filterProps),[]),_e}function borderTransform(a){return typeof a!="number"?a:`${a}px solid`}const border=style$2({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$2({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$2({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$2({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$2({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$2({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$2({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$2({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$2({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$2({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=a=>{if(a.borderRadius!==void 0&&a.borderRadius!==null){const o=createUnaryUnit(a.theme,"shape.borderRadius",4),_e=tt=>({borderRadius:getValue(o,tt)});return handleBreakpoints(a,a.borderRadius,_e)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=a=>{if(a.gap!==void 0&&a.gap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({gap:getValue(o,tt)});return handleBreakpoints(a,a.gap,_e)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=a=>{if(a.columnGap!==void 0&&a.columnGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({columnGap:getValue(o,tt)});return handleBreakpoints(a,a.columnGap,_e)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=a=>{if(a.rowGap!==void 0&&a.rowGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({rowGap:getValue(o,tt)});return handleBreakpoints(a,a.rowGap,_e)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(a,o){return o==="grey"?o:a}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(a){return a<=1&&a!==0?`${a*100}%`:a}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=a=>{if(a.maxWidth!==void 0&&a.maxWidth!==null){const o=_e=>{var tt,ct;const gt=((tt=a.theme)==null||(tt=tt.breakpoints)==null||(tt=tt.values)==null?void 0:tt[_e])||values$1[_e];return gt?((ct=a.theme)==null||(ct=ct.breakpoints)==null?void 0:ct.unit)!=="px"?{maxWidth:`${gt}${a.theme.breakpoints.unit}`}:{maxWidth:gt}:{maxWidth:sizingTransform(_e)}};return handleBreakpoints(a,a.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:a=>({"@media print":{display:a}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...a){const o=a.reduce((tt,ct)=>tt.concat(Object.keys(ct)),[]),_e=new Set(o);return a.every(tt=>_e.size===Object.keys(tt).length)}function callIfFn(a,o){return typeof a=="function"?a(o):a}function unstable_createStyleFunctionSx(){function a(_e,tt,ct,gt){const rt={[_e]:tt,theme:ct},at=gt[_e];if(!at)return{[_e]:tt};const{cssProperty:s=_e,themeKey:et,transform:nt,style:ot}=at;if(tt==null)return null;if(et==="typography"&&tt==="inherit")return{[_e]:tt};const ht=getPath(ct,et)||{};return ot?ot(rt):handleBreakpoints(rt,tt,pt=>{let lt=getStyleValue$1(ht,nt,pt);return pt===lt&&typeof pt=="string"&&(lt=getStyleValue$1(ht,nt,`${_e}${pt==="default"?"":capitalize(pt)}`,pt)),s===!1?lt:{[s]:lt}})}function o(_e){var tt;const{sx:ct,theme:gt={}}=_e||{};if(!ct)return null;const rt=(tt=gt.unstable_sxConfig)!=null?tt:defaultSxConfig$1;function at(s){let et=s;if(typeof s=="function")et=s(gt);else if(typeof s!="object")return s;if(!et)return null;const nt=createEmptyBreakpointObject(gt.breakpoints),ot=Object.keys(nt);let ht=nt;return Object.keys(et).forEach(dt=>{const pt=callIfFn(et[dt],gt);if(pt!=null)if(typeof pt=="object")if(rt[dt])ht=merge(ht,a(dt,pt,gt,rt));else{const lt=handleBreakpoints({theme:gt},pt,mt=>({[dt]:mt}));objectsHaveSameKeys(lt,pt)?ht[dt]=o({sx:pt,theme:gt}):ht=merge(ht,lt)}else ht=merge(ht,a(dt,pt,gt,rt))}),removeUnusedBreakpoints(ot,ht)}return Array.isArray(ct)?ct.map(at):at(ct)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$S=["breakpoints","palette","spacing","shape"];function createTheme$1(a={},...o){const{breakpoints:_e={},palette:tt={},spacing:ct,shape:gt={}}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$S),at=createBreakpoints(_e),s=createSpacing(ct);let et=deepmerge({breakpoints:at,direction:"ltr",components:{},palette:_extends({mode:"light"},tt),spacing:s,shape:_extends({},shape$1,gt)},rt);return et=o.reduce((nt,ot)=>deepmerge(nt,ot),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,rt==null?void 0:rt.unstable_sxConfig),et.unstable_sx=function(ot){return styleFunctionSx$1({sx:ot,theme:this})},et}function isObjectEmpty(a){return Object.keys(a).length===0}function useTheme$3(a=null){const o=reactExports.useContext(ThemeContext$2);return!o||isObjectEmpty(o)?a:o}const systemDefaultTheme$1=createTheme$1();function useTheme$2(a=systemDefaultTheme$1){return useTheme$3(a)}function GlobalStyles$1({styles:a,themeId:o,defaultTheme:_e={}}){const tt=useTheme$2(_e),ct=typeof a=="function"?a(o&&tt[o]||tt):a;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:ct})}const _excluded$R=["sx"],splitProps=a=>{var o,_e;const tt={systemProps:{},otherProps:{}},ct=(o=a==null||(_e=a.theme)==null?void 0:_e.unstable_sxConfig)!=null?o:defaultSxConfig$1;return Object.keys(a).forEach(gt=>{ct[gt]?tt.systemProps[gt]=a[gt]:tt.otherProps[gt]=a[gt]}),tt};function extendSxProp(a){const{sx:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$R),{systemProps:tt,otherProps:ct}=splitProps(_e);let gt;return Array.isArray(o)?gt=[tt,...o]:typeof o=="function"?gt=(...rt)=>{const at=o(...rt);return isPlainObject(at)?_extends({},tt,at):tt}:gt=_extends({},tt,o),_extends({},ct,{sx:gt})}const _excluded$Q=["className","component"];function createBox(a={}){const{themeId:o,defaultTheme:_e,defaultClassName:tt="MuiBox-root",generateClassName:ct}=a,gt=styled$3("div",{shouldForwardProp:at=>at!=="theme"&&at!=="sx"&&at!=="as"})(styleFunctionSx$1);return reactExports.forwardRef(function(s,et){const nt=useTheme$2(_e),ot=extendSxProp(s),{className:ht,component:dt="div"}=ot,pt=_objectWithoutPropertiesLoose(ot,_excluded$Q);return jsxRuntimeExports.jsx(gt,_extends({as:dt,ref:et,className:clsx(ht,ct?ct(tt):tt),theme:o&&nt[o]||nt},pt))})}const _excluded$P=["variant"];function isEmpty$3(a){return a.length===0}function propsToClassKey(a){const{variant:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$P);let tt=o||"";return Object.keys(_e).sort().forEach(ct=>{ct==="color"?tt+=isEmpty$3(tt)?a[ct]:capitalize(a[ct]):tt+=`${isEmpty$3(tt)?ct:capitalize(ct)}${capitalize(a[ct].toString())}`}),tt}const _excluded$O=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty$2(a){return Object.keys(a).length===0}function isStringTag(a){return typeof a=="string"&&a.charCodeAt(0)>96}const getStyleOverrides=(a,o)=>o.components&&o.components[a]&&o.components[a].styleOverrides?o.components[a].styleOverrides:null,transformVariants=a=>{const o={};return a&&a.forEach(_e=>{const tt=propsToClassKey(_e.props);o[tt]=_e.style}),o},getVariantStyles=(a,o)=>{let _e=[];return o&&o.components&&o.components[a]&&o.components[a].variants&&(_e=o.components[a].variants),transformVariants(_e)},variantsResolver=(a,o,_e)=>{const{ownerState:tt={}}=a,ct=[];return _e&&_e.forEach(gt=>{let rt=!0;Object.keys(gt.props).forEach(at=>{tt[at]!==gt.props[at]&&a[at]!==gt.props[at]&&(rt=!1)}),rt&&ct.push(o[propsToClassKey(gt.props)])}),ct},themeVariantsResolver=(a,o,_e,tt)=>{var ct;const gt=_e==null||(ct=_e.components)==null||(ct=ct[tt])==null?void 0:ct.variants;return variantsResolver(a,o,gt)};function shouldForwardProp(a){return a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=a=>a&&a.charAt(0).toLowerCase()+a.slice(1);function resolveTheme({defaultTheme:a,theme:o,themeId:_e}){return isEmpty$2(o)?a:o[_e]||o}function defaultOverridesResolver(a){return a?(o,_e)=>_e[a]:null}const muiStyledFunctionResolver=({styledArg:a,props:o,defaultTheme:_e,themeId:tt})=>{const ct=a(_extends({},o,{theme:resolveTheme(_extends({},o,{defaultTheme:_e,themeId:tt}))}));let gt;if(ct&&ct.variants&&(gt=ct.variants,delete ct.variants),gt){const rt=variantsResolver(o,transformVariants(gt),gt);return[ct,...rt]}return ct};function createStyled(a={}){const{themeId:o,defaultTheme:_e=systemDefaultTheme,rootShouldForwardProp:tt=shouldForwardProp,slotShouldForwardProp:ct=shouldForwardProp}=a,gt=rt=>styleFunctionSx$1(_extends({},rt,{theme:resolveTheme(_extends({},rt,{defaultTheme:_e,themeId:o}))}));return gt.__mui_systemSx=!0,(rt,at={})=>{internal_processStyles(rt,yt=>yt.filter(vt=>!(vt!=null&&vt.__mui_systemSx)));const{name:s,slot:et,skipVariantsResolver:nt,skipSx:ot,overridesResolver:ht=defaultOverridesResolver(lowercaseFirstLetter(et))}=at,dt=_objectWithoutPropertiesLoose(at,_excluded$O),pt=nt!==void 0?nt:et&&et!=="Root"&&et!=="root"||!1,lt=ot||!1;let mt,st=shouldForwardProp;et==="Root"||et==="root"?st=tt:et?st=ct:isStringTag(rt)&&(st=void 0);const ut=styled$3(rt,_extends({shouldForwardProp:st,label:mt},dt)),ft=(yt,...vt)=>{const St=vt?vt.map(kt=>{if(typeof kt=="function"&&kt.__emotion_real!==kt)return Dt=>muiStyledFunctionResolver({styledArg:kt,props:Dt,defaultTheme:_e,themeId:o});if(isPlainObject(kt)){let Dt=kt,Vt;return kt&&kt.variants&&(Vt=kt.variants,delete Dt.variants,Dt=Ot=>{let Lt=kt;return variantsResolver(Ot,transformVariants(Vt),Vt).forEach(tn=>{Lt=deepmerge(Lt,tn)}),Lt}),Dt}return kt}):[];let xt=yt;if(isPlainObject(yt)){let kt;yt&&yt.variants&&(kt=yt.variants,delete xt.variants,xt=Dt=>{let Vt=yt;return variantsResolver(Dt,transformVariants(kt),kt).forEach(Lt=>{Vt=deepmerge(Vt,Lt)}),Vt})}else typeof yt=="function"&&yt.__emotion_real!==yt&&(xt=kt=>muiStyledFunctionResolver({styledArg:yt,props:kt,defaultTheme:_e,themeId:o}));s&&ht&&St.push(kt=>{const Dt=resolveTheme(_extends({},kt,{defaultTheme:_e,themeId:o})),Vt=getStyleOverrides(s,Dt);if(Vt){const Ot={};return Object.entries(Vt).forEach(([Lt,Gt])=>{Ot[Lt]=typeof Gt=="function"?Gt(_extends({},kt,{theme:Dt})):Gt}),ht(kt,Ot)}return null}),s&&!pt&&St.push(kt=>{const Dt=resolveTheme(_extends({},kt,{defaultTheme:_e,themeId:o}));return themeVariantsResolver(kt,getVariantStyles(s,Dt),Dt,s)}),lt||St.push(gt);const Ut=St.length-vt.length;if(Array.isArray(yt)&&Ut>0){const kt=new Array(Ut).fill("");xt=[...yt,...kt],xt.raw=[...yt.raw,...kt]}const Tt=ut(xt,...St);return rt.muiName&&(Tt.muiName=rt.muiName),Tt};return ut.withConfig&&(ft.withConfig=ut.withConfig),ft}}const styled$2=createStyled(),systemStyled=styled$2;function getThemeProps(a){const{theme:o,name:_e,props:tt}=a;return!o||!o.components||!o.components[_e]||!o.components[_e].defaultProps?tt:resolveProps(o.components[_e].defaultProps,tt)}function useThemeProps$1({props:a,name:o,defaultTheme:_e,themeId:tt}){let ct=useTheme$2(_e);return tt&&(ct=ct[tt]||ct),getThemeProps({theme:ct,name:o,props:a})}function clamp(a,o=0,_e=1){return Math.min(Math.max(o,a),_e)}function hexToRgb(a){a=a.slice(1);const o=new RegExp(`.{1,${a.length>=6?2:1}}`,"g");let _e=a.match(o);return _e&&_e[0].length===1&&(_e=_e.map(tt=>tt+tt)),_e?`rgb${_e.length===4?"a":""}(${_e.map((tt,ct)=>ct<3?parseInt(tt,16):Math.round(parseInt(tt,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(a){if(a.type)return a;if(a.charAt(0)==="#")return decomposeColor(hexToRgb(a));const o=a.indexOf("("),_e=a.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(_e)===-1)throw new Error(formatMuiErrorMessage(9,a));let tt=a.substring(o+1,a.length-1),ct;if(_e==="color"){if(tt=tt.split(" "),ct=tt.shift(),tt.length===4&&tt[3].charAt(0)==="/"&&(tt[3]=tt[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ct)===-1)throw new Error(formatMuiErrorMessage(10,ct))}else tt=tt.split(",");return tt=tt.map(gt=>parseFloat(gt)),{type:_e,values:tt,colorSpace:ct}}function recomposeColor(a){const{type:o,colorSpace:_e}=a;let{values:tt}=a;return o.indexOf("rgb")!==-1?tt=tt.map((ct,gt)=>gt<3?parseInt(ct,10):ct):o.indexOf("hsl")!==-1&&(tt[1]=`${tt[1]}%`,tt[2]=`${tt[2]}%`),o.indexOf("color")!==-1?tt=`${_e} ${tt.join(" ")}`:tt=`${tt.join(", ")}`,`${o}(${tt})`}function hslToRgb(a){a=decomposeColor(a);const{values:o}=a,_e=o[0],tt=o[1]/100,ct=o[2]/100,gt=tt*Math.min(ct,1-ct),rt=(et,nt=(et+_e/30)%12)=>ct-gt*Math.max(Math.min(nt-3,9-nt,1),-1);let at="rgb";const s=[Math.round(rt(0)*255),Math.round(rt(8)*255),Math.round(rt(4)*255)];return a.type==="hsla"&&(at+="a",s.push(o[3])),recomposeColor({type:at,values:s})}function getLuminance(a){a=decomposeColor(a);let o=a.type==="hsl"||a.type==="hsla"?decomposeColor(hslToRgb(a)).values:a.values;return o=o.map(_e=>(a.type!=="color"&&(_e/=255),_e<=.03928?_e/12.92:((_e+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(a,o){const _e=getLuminance(a),tt=getLuminance(o);return(Math.max(_e,tt)+.05)/(Math.min(_e,tt)+.05)}function alpha(a,o){return a=decomposeColor(a),o=clamp(o),(a.type==="rgb"||a.type==="hsl")&&(a.type+="a"),a.type==="color"?a.values[3]=`/${o}`:a.values[3]=o,recomposeColor(a)}function darken(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]*=1-o;else if(a.type.indexOf("rgb")!==-1||a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]*=1-o;return recomposeColor(a)}function lighten(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]+=(100-a.values[2])*o;else if(a.type.indexOf("rgb")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(255-a.values[_e])*o;else if(a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(1-a.values[_e])*o;return recomposeColor(a)}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$1(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(a,o){return typeof o=="function"?o(a):_extends({},a,o)}function ThemeProvider$2(a){const{children:o,theme:_e}=a,tt=useTheme$1(),ct=reactExports.useMemo(()=>{const gt=tt===null?_e:mergeOuterLocalTheme(tt,_e);return gt!=null&&(gt[nested]=tt!==null),gt},[_e,tt]);return jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:ct,children:o})}const EMPTY_THEME={};function useThemeScoping(a,o,_e,tt=!1){return reactExports.useMemo(()=>{const ct=a&&o[a]||o;if(typeof _e=="function"){const gt=_e(ct),rt=a?_extends({},o,{[a]:gt}):gt;return tt?()=>rt:rt}return a?_extends({},o,{[a]:_e}):_extends({},o,_e)},[a,o,_e,tt])}function ThemeProvider$1(a){const{children:o,theme:_e,themeId:tt}=a,ct=useTheme$3(EMPTY_THEME),gt=useTheme$1()||EMPTY_THEME,rt=useThemeScoping(tt,ct,_e),at=useThemeScoping(tt,gt,_e,!0);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:at,children:jsxRuntimeExports.jsx(ThemeContext$2.Provider,{value:rt,children:o})})}const _excluded$N=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$1=systemStyled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemePropsDefault$1=a=>useThemeProps$1({props:a,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$z=(a,o)=>{const _e=s=>generateUtilityClass(o,s),{classes:tt,fixed:ct,disableGutters:gt,maxWidth:rt}=a,at={root:["root",rt&&`maxWidth${capitalize(String(rt))}`,ct&&"fixed",gt&&"disableGutters"]};return composeClasses(at,_e,tt)};function createContainer(a={}){const{createStyledComponent:o=defaultCreateStyledComponent$1,useThemeProps:_e=useThemePropsDefault$1,componentName:tt="MuiContainer"}=a,ct=o(({theme:rt,ownerState:at})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!at.disableGutters&&{paddingLeft:rt.spacing(2),paddingRight:rt.spacing(2),[rt.breakpoints.up("sm")]:{paddingLeft:rt.spacing(3),paddingRight:rt.spacing(3)}}),({theme:rt,ownerState:at})=>at.fixed&&Object.keys(rt.breakpoints.values).reduce((s,et)=>{const nt=et,ot=rt.breakpoints.values[nt];return ot!==0&&(s[rt.breakpoints.up(nt)]={maxWidth:`${ot}${rt.breakpoints.unit}`}),s},{}),({theme:rt,ownerState:at})=>_extends({},at.maxWidth==="xs"&&{[rt.breakpoints.up("xs")]:{maxWidth:Math.max(rt.breakpoints.values.xs,444)}},at.maxWidth&&at.maxWidth!=="xs"&&{[rt.breakpoints.up(at.maxWidth)]:{maxWidth:`${rt.breakpoints.values[at.maxWidth]}${rt.breakpoints.unit}`}}));return reactExports.forwardRef(function(at,s){const et=_e(at),{className:nt,component:ot="div",disableGutters:ht=!1,fixed:dt=!1,maxWidth:pt="lg"}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$N),mt=_extends({},et,{component:ot,disableGutters:ht,fixed:dt,maxWidth:pt}),st=useUtilityClasses$z(mt,tt);return jsxRuntimeExports.jsx(ct,_extends({as:ot,ownerState:mt,className:clsx(st.root,nt),ref:s},lt))})}const _excluded$M=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=systemStyled("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root});function useThemePropsDefault(a){return useThemeProps$1({props:a,name:"MuiStack",defaultTheme:defaultTheme$3})}function joinChildren(a,o){const _e=reactExports.Children.toArray(a).filter(Boolean);return _e.reduce((tt,ct,gt)=>(tt.push(ct),gt<_e.length-1&&tt.push(reactExports.cloneElement(o,{key:`separator-${gt}`})),tt),[])}const getSideFromDirection=a=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[a],style=({ownerState:a,theme:o})=>{let _e=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:o},resolveBreakpointValues({values:a.direction,breakpoints:o.breakpoints.values}),tt=>({flexDirection:tt})));if(a.spacing){const tt=createUnarySpacing(o),ct=Object.keys(o.breakpoints.values).reduce((s,et)=>((typeof a.spacing=="object"&&a.spacing[et]!=null||typeof a.direction=="object"&&a.direction[et]!=null)&&(s[et]=!0),s),{}),gt=resolveBreakpointValues({values:a.direction,base:ct}),rt=resolveBreakpointValues({values:a.spacing,base:ct});typeof gt=="object"&&Object.keys(gt).forEach((s,et,nt)=>{if(!gt[s]){const ht=et>0?gt[nt[et-1]]:"column";gt[s]=ht}}),_e=deepmerge(_e,handleBreakpoints({theme:o},rt,(s,et)=>a.useFlexGap?{gap:getValue(tt,s)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(et?gt[et]:a.direction)}`]:getValue(tt,s)}}))}return _e=mergeBreakpointsInOrder(o.breakpoints,_e),_e};function createStack(a={}){const{createStyledComponent:o=defaultCreateStyledComponent,useThemeProps:_e=useThemePropsDefault,componentName:tt="MuiStack"}=a,ct=()=>composeClasses({root:["root"]},s=>generateUtilityClass(tt,s),{}),gt=o(style);return reactExports.forwardRef(function(s,et){const nt=_e(s),ot=extendSxProp(nt),{component:ht="div",direction:dt="column",spacing:pt=0,divider:lt,children:mt,className:st,useFlexGap:ut=!1}=ot,ft=_objectWithoutPropertiesLoose(ot,_excluded$M),yt={direction:dt,spacing:pt,useFlexGap:ut},vt=ct();return jsxRuntimeExports.jsx(gt,_extends({as:ht,ownerState:yt,ref:et,className:clsx(vt.root,st)},ft,{children:lt?joinChildren(mt,lt):mt}))})}function createMixins(a,o){return _extends({toolbar:{minHeight:56,[a.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[a.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$L=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(a,o,_e,tt){const ct=tt.light||tt,gt=tt.dark||tt*1.5;a[o]||(a.hasOwnProperty(_e)?a[o]=a[_e]:o==="light"?a.light=lighten(a.main,ct):o==="dark"&&(a.dark=darken(a.main,gt)))}function getDefaultPrimary(a="light"){return a==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(a="light"){return a==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(a="light"){return a==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(a="light"){return a==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(a="light"){return a==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(a="light"){return a==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(a){const{mode:o="light",contrastThreshold:_e=3,tonalOffset:tt=.2}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$L),gt=a.primary||getDefaultPrimary(o),rt=a.secondary||getDefaultSecondary(o),at=a.error||getDefaultError(o),s=a.info||getDefaultInfo(o),et=a.success||getDefaultSuccess(o),nt=a.warning||getDefaultWarning(o);function ot(lt){return getContrastRatio(lt,dark.text.primary)>=_e?dark.text.primary:light.text.primary}const ht=({color:lt,name:mt,mainShade:st=500,lightShade:ut=300,darkShade:ft=700})=>{if(lt=_extends({},lt),!lt.main&&lt[st]&&(lt.main=lt[st]),!lt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,mt?` (${mt})`:"",st));if(typeof lt.main!="string")throw new Error(formatMuiErrorMessage(12,mt?` (${mt})`:"",JSON.stringify(lt.main)));return addLightOrDark(lt,"light",ut,tt),addLightOrDark(lt,"dark",ft,tt),lt.contrastText||(lt.contrastText=ot(lt.main)),lt},dt={dark,light};return deepmerge(_extends({common:_extends({},common$1),mode:o,primary:ht({color:gt,name:"primary"}),secondary:ht({color:rt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:ht({color:at,name:"error"}),warning:ht({color:nt,name:"warning"}),info:ht({color:s,name:"info"}),success:ht({color:et,name:"success"}),grey:grey$1,contrastThreshold:_e,getContrastText:ot,augmentColor:ht,tonalOffset:tt},dt[o]),ct)}const _excluded$K=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(a){return Math.round(a*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(a,o){const _e=typeof o=="function"?o(a):o,{fontFamily:tt=defaultFontFamily,fontSize:ct=14,fontWeightLight:gt=300,fontWeightRegular:rt=400,fontWeightMedium:at=500,fontWeightBold:s=700,htmlFontSize:et=16,allVariants:nt,pxToRem:ot}=_e,ht=_objectWithoutPropertiesLoose(_e,_excluded$K),dt=ct/14,pt=ot||(st=>`${st/et*dt}rem`),lt=(st,ut,ft,yt,vt)=>_extends({fontFamily:tt,fontWeight:st,fontSize:pt(ut),lineHeight:ft},tt===defaultFontFamily?{letterSpacing:`${round$2(yt/ut)}em`}:{},vt,nt),mt={h1:lt(gt,96,1.167,-1.5),h2:lt(gt,60,1.2,-.5),h3:lt(rt,48,1.167,0),h4:lt(rt,34,1.235,.25),h5:lt(rt,24,1.334,0),h6:lt(at,20,1.6,.15),subtitle1:lt(rt,16,1.75,.15),subtitle2:lt(at,14,1.57,.1),body1:lt(rt,16,1.5,.15),body2:lt(rt,14,1.43,.15),button:lt(at,14,1.75,.4,caseAllCaps),caption:lt(rt,12,1.66,.4),overline:lt(rt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends({htmlFontSize:et,pxToRem:pt,fontFamily:tt,fontSize:ct,fontWeightLight:gt,fontWeightRegular:rt,fontWeightMedium:at,fontWeightBold:s},mt),ht,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...a){return[`${a[0]}px ${a[1]}px ${a[2]}px ${a[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${a[4]}px ${a[5]}px ${a[6]}px ${a[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${a[8]}px ${a[9]}px ${a[10]}px ${a[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$J=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(a){return`${Math.round(a)}ms`}function getAutoHeightDuration(a){if(!a)return 0;const o=a/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(a){const o=_extends({},easing,a.easing),_e=_extends({},duration,a.duration);return _extends({getAutoHeightDuration,create:(ct=["all"],gt={})=>{const{duration:rt=_e.standard,easing:at=o.easeInOut,delay:s=0}=gt;return _objectWithoutPropertiesLoose(gt,_excluded$J),(Array.isArray(ct)?ct:[ct]).map(et=>`${et} ${typeof rt=="string"?rt:formatMs(rt)} ${at} ${typeof s=="string"?s:formatMs(s)}`).join(",")}},a,{easing:o,duration:_e})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$I=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(a={},...o){const{mixins:_e={},palette:tt={},transitions:ct={},typography:gt={}}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$I);if(a.vars)throw new Error(formatMuiErrorMessage(18));const at=createPalette(tt),s=createTheme$1(a);let et=deepmerge(s,{mixins:createMixins(s.breakpoints,_e),palette:at,shadows:shadows$1.slice(),typography:createTypography(at,gt),transitions:createTransitions(ct),zIndex:_extends({},zIndex$1)});return et=deepmerge(et,rt),et=o.reduce((nt,ot)=>deepmerge(nt,ot),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,rt==null?void 0:rt.unstable_sxConfig),et.unstable_sx=function(ot){return styleFunctionSx$1({sx:ot,theme:this})},et}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1,THEME_ID="$$material",rootShouldForwardProp=a=>shouldForwardProp(a)&&a!=="classes",slotShouldForwardProp=shouldForwardProp,styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled;function useThemeProps({props:a,name:o}){return useThemeProps$1({props:a,name:o,defaultTheme:defaultTheme$2,themeId:THEME_ID})}const getOverlayAlpha=a=>{let o;return a<1?o=5.11916*a**2:o=4.5*Math.log(a+1)+2,(o/100).toFixed(2)},getOverlayAlpha$1=getOverlayAlpha;function useTheme(){const a=useTheme$2(defaultTheme$2);return a[THEME_ID]||a}function getPaperUtilityClass(a){return generateUtilityClass("MuiPaper",a)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$H=["className","component","elevation","square","variant"],useUtilityClasses$y=a=>{const{square:o,elevation:_e,variant:tt,classes:ct}=a,gt={root:["root",tt,!o&&"rounded",tt==="elevation"&&`elevation${_e}`]};return composeClasses(gt,getPaperUtilityClass,ct)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],!_e.square&&o.rounded,_e.variant==="elevation"&&o[`elevation${_e.elevation}`]]}})(({theme:a,ownerState:o})=>{var _e;return _extends({backgroundColor:(a.vars||a).palette.background.paper,color:(a.vars||a).palette.text.primary,transition:a.transitions.create("box-shadow")},!o.square&&{borderRadius:a.shape.borderRadius},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.divider}`},o.variant==="elevation"&&_extends({boxShadow:(a.vars||a).shadows[o.elevation]},!a.vars&&a.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha$1(o.elevation))}, ${alpha("#fff",getOverlayAlpha$1(o.elevation))})`},a.vars&&{backgroundImage:(_e=a.vars.overlays)==null?void 0:_e[o.elevation]}))}),Paper=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiPaper"}),{className:ct,component:gt="div",elevation:rt=1,square:at=!1,variant:s="elevation"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$H),nt=_extends({},tt,{component:gt,elevation:rt,square:at,variant:s}),ot=useUtilityClasses$y(nt);return jsxRuntimeExports.jsx(PaperRoot,_extends({as:gt,ownerState:nt,className:clsx(ot.root,ct),ref:_e},et))}),Paper$1=Paper;function getAlertUtilityClass(a){return generateUtilityClass("MuiAlert",a)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),alertClasses$1=alertClasses;function _setPrototypeOf(a,o){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf(a,o)}function _inheritsLoose(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,_setPrototypeOf(a,o)}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(o){return o.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(o,a);function o(tt,ct){var gt;gt=a.call(this,tt,ct)||this;var rt=ct,at=rt&&!rt.isMounting?tt.enter:tt.appear,s;return gt.appearStatus=null,tt.in?at?(s=EXITED,gt.appearStatus=ENTERING):s=ENTERED:tt.unmountOnExit||tt.mountOnEnter?s=UNMOUNTED:s=EXITED,gt.state={status:s},gt.nextCallback=null,gt}o.getDerivedStateFromProps=function(ct,gt){var rt=ct.in;return rt&&gt.status===UNMOUNTED?{status:EXITED}:null};var _e=o.prototype;return _e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},_e.componentDidUpdate=function(ct){var gt=null;if(ct!==this.props){var rt=this.state.status;this.props.in?rt!==ENTERING&&rt!==ENTERED&&(gt=ENTERING):(rt===ENTERING||rt===ENTERED)&&(gt=EXITING)}this.updateStatus(!1,gt)},_e.componentWillUnmount=function(){this.cancelNextCallback()},_e.getTimeouts=function(){var ct=this.props.timeout,gt,rt,at;return gt=rt=at=ct,ct!=null&&typeof ct!="number"&&(gt=ct.exit,rt=ct.enter,at=ct.appear!==void 0?ct.appear:rt),{exit:gt,enter:rt,appear:at}},_e.updateStatus=function(ct,gt){if(ct===void 0&&(ct=!1),gt!==null)if(this.cancelNextCallback(),gt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);rt&&forceReflow(rt)}this.performEnter(ct)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},_e.performEnter=function(ct){var gt=this,rt=this.props.enter,at=this.context?this.context.isMounting:ct,s=this.props.nodeRef?[at]:[ReactDOM.findDOMNode(this),at],et=s[0],nt=s[1],ot=this.getTimeouts(),ht=at?ot.appear:ot.enter;if(!ct&&!rt||config.disabled){this.safeSetState({status:ENTERED},function(){gt.props.onEntered(et)});return}this.props.onEnter(et,nt),this.safeSetState({status:ENTERING},function(){gt.props.onEntering(et,nt),gt.onTransitionEnd(ht,function(){gt.safeSetState({status:ENTERED},function(){gt.props.onEntered(et,nt)})})})},_e.performExit=function(){var ct=this,gt=this.props.exit,rt=this.getTimeouts(),at=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!gt||config.disabled){this.safeSetState({status:EXITED},function(){ct.props.onExited(at)});return}this.props.onExit(at),this.safeSetState({status:EXITING},function(){ct.props.onExiting(at),ct.onTransitionEnd(rt.exit,function(){ct.safeSetState({status:EXITED},function(){ct.props.onExited(at)})})})},_e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},_e.safeSetState=function(ct,gt){gt=this.setNextCallback(gt),this.setState(ct,gt)},_e.setNextCallback=function(ct){var gt=this,rt=!0;return this.nextCallback=function(at){rt&&(rt=!1,gt.nextCallback=null,ct(at))},this.nextCallback.cancel=function(){rt=!1},this.nextCallback},_e.onTransitionEnd=function(ct,gt){this.setNextCallback(gt);var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),at=ct==null&&!this.props.addEndListener;if(!rt||at){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[rt,this.nextCallback],et=s[0],nt=s[1];this.props.addEndListener(et,nt)}ct!=null&&setTimeout(this.nextCallback,ct)},_e.render=function(){var ct=this.state.status;if(ct===UNMOUNTED)return null;var gt=this.props,rt=gt.children;gt.in,gt.mountOnEnter,gt.unmountOnExit,gt.appear,gt.enter,gt.exit,gt.timeout,gt.addEndListener,gt.onEnter,gt.onEntering,gt.onEntered,gt.onExit,gt.onExiting,gt.onExited,gt.nodeRef;var at=_objectWithoutPropertiesLoose(gt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof rt=="function"?rt(ct,at):React$1.cloneElement(React$1.Children.only(rt),at))},o}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function _assertThisInitialized(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function getChildMapping(a,o){var _e=function(gt){return o&&reactExports.isValidElement(gt)?o(gt):gt},tt=Object.create(null);return a&&reactExports.Children.map(a,function(ct){return ct}).forEach(function(ct){tt[ct.key]=_e(ct)}),tt}function mergeChildMappings(a,o){a=a||{},o=o||{};function _e(nt){return nt in o?o[nt]:a[nt]}var tt=Object.create(null),ct=[];for(var gt in a)gt in o?ct.length&&(tt[gt]=ct,ct=[]):ct.push(gt);var rt,at={};for(var s in o){if(tt[s])for(rt=0;rt<tt[s].length;rt++){var et=tt[s][rt];at[tt[s][rt]]=_e(et)}at[s]=_e(s)}for(rt=0;rt<ct.length;rt++)at[ct[rt]]=_e(ct[rt]);return at}function getProp(a,o,_e){return _e[o]!=null?_e[o]:a.props[o]}function getInitialChildMapping(a,o){return getChildMapping(a.children,function(_e){return reactExports.cloneElement(_e,{onExited:o.bind(null,_e),in:!0,appear:getProp(_e,"appear",a),enter:getProp(_e,"enter",a),exit:getProp(_e,"exit",a)})})}function getNextChildMapping(a,o,_e){var tt=getChildMapping(a.children),ct=mergeChildMappings(o,tt);return Object.keys(ct).forEach(function(gt){var rt=ct[gt];if(reactExports.isValidElement(rt)){var at=gt in o,s=gt in tt,et=o[gt],nt=reactExports.isValidElement(et)&&!et.props.in;s&&(!at||nt)?ct[gt]=reactExports.cloneElement(rt,{onExited:_e.bind(null,rt),in:!0,exit:getProp(rt,"exit",a),enter:getProp(rt,"enter",a)}):!s&&at&&!nt?ct[gt]=reactExports.cloneElement(rt,{in:!1}):s&&at&&reactExports.isValidElement(et)&&(ct[gt]=reactExports.cloneElement(rt,{onExited:_e.bind(null,rt),in:et.props.in,exit:getProp(rt,"exit",a),enter:getProp(rt,"enter",a)}))}}),ct}var values=Object.values||function(a){return Object.keys(a).map(function(o){return a[o]})},defaultProps={component:"div",childFactory:function(o){return o}},TransitionGroup=function(a){_inheritsLoose(o,a);function o(tt,ct){var gt;gt=a.call(this,tt,ct)||this;var rt=gt.handleExited.bind(_assertThisInitialized(gt));return gt.state={contextValue:{isMounting:!0},handleExited:rt,firstRender:!0},gt}var _e=o.prototype;return _e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_e.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(ct,gt){var rt=gt.children,at=gt.handleExited,s=gt.firstRender;return{children:s?getInitialChildMapping(ct,at):getNextChildMapping(ct,rt,at),firstRender:!1}},_e.handleExited=function(ct,gt){var rt=getChildMapping(this.props.children);ct.key in rt||(ct.props.onExited&&ct.props.onExited(gt),this.mounted&&this.setState(function(at){var s=_extends({},at.children);return delete s[ct.key],{children:s}}))},_e.render=function(){var ct=this.props,gt=ct.component,rt=ct.childFactory,at=_objectWithoutPropertiesLoose(ct,["component","childFactory"]),s=this.state.contextValue,et=values(this.state.children).map(rt);return delete at.appear,delete at.enter,delete at.exit,gt===null?React$1.createElement(TransitionGroupContext.Provider,{value:s},et):React$1.createElement(TransitionGroupContext.Provider,{value:s},React$1.createElement(gt,at,et))},o}(React$1.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup;function Ripple(a){const{className:o,classes:_e,pulsate:tt=!1,rippleX:ct,rippleY:gt,rippleSize:rt,in:at,onExited:s,timeout:et}=a,[nt,ot]=reactExports.useState(!1),ht=clsx(o,_e.ripple,_e.rippleVisible,tt&&_e.ripplePulsate),dt={width:rt,height:rt,top:-(rt/2)+gt,left:-(rt/2)+ct},pt=clsx(_e.child,nt&&_e.childLeaving,tt&&_e.childPulsate);return!at&&!nt&&ot(!0),reactExports.useEffect(()=>{if(!at&&s!=null){const lt=setTimeout(s,et);return()=>{clearTimeout(lt)}}},[s,at,et]),jsxRuntimeExports.jsx("span",{className:ht,style:dt,children:jsxRuntimeExports.jsx("span",{className:pt})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),touchRippleClasses$1=touchRippleClasses,_excluded$G=["center","classes","className"];let _$3=a=>a,_t$2,_t2$2,_t3$2,_t4$2;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t$2||(_t$2=_$3`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2$2||(_t2$2=_$3`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3$2||(_t3$2=_$3`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4$2||(_t4$2=_$3`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:a})=>a.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:a})=>a.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTouchRipple"}),{center:ct=!1,classes:gt={},className:rt}=tt,at=_objectWithoutPropertiesLoose(tt,_excluded$G),[s,et]=reactExports.useState([]),nt=reactExports.useRef(0),ot=reactExports.useRef(null);reactExports.useEffect(()=>{ot.current&&(ot.current(),ot.current=null)},[s]);const ht=reactExports.useRef(!1),dt=reactExports.useRef(0),pt=reactExports.useRef(null),lt=reactExports.useRef(null);reactExports.useEffect(()=>()=>{dt.current&&clearTimeout(dt.current)},[]);const mt=reactExports.useCallback(yt=>{const{pulsate:vt,rippleX:St,rippleY:xt,rippleSize:Ut,cb:Tt}=yt;et(kt=>[...kt,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(gt.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(gt.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(gt.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(gt.child,touchRippleClasses$1.child),childLeaving:clsx(gt.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(gt.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:vt,rippleX:St,rippleY:xt,rippleSize:Ut},nt.current)]),nt.current+=1,ot.current=Tt},[gt]),st=reactExports.useCallback((yt={},vt={},St=()=>{})=>{const{pulsate:xt=!1,center:Ut=ct||vt.pulsate,fakeElement:Tt=!1}=vt;if((yt==null?void 0:yt.type)==="mousedown"&&ht.current){ht.current=!1;return}(yt==null?void 0:yt.type)==="touchstart"&&(ht.current=!0);const kt=Tt?null:lt.current,Dt=kt?kt.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Vt,Ot,Lt;if(Ut||yt===void 0||yt.clientX===0&&yt.clientY===0||!yt.clientX&&!yt.touches)Vt=Math.round(Dt.width/2),Ot=Math.round(Dt.height/2);else{const{clientX:Gt,clientY:tn}=yt.touches&&yt.touches.length>0?yt.touches[0]:yt;Vt=Math.round(Gt-Dt.left),Ot=Math.round(tn-Dt.top)}if(Ut)Lt=Math.sqrt((2*Dt.width**2+Dt.height**2)/3),Lt%2===0&&(Lt+=1);else{const Gt=Math.max(Math.abs((kt?kt.clientWidth:0)-Vt),Vt)*2+2,tn=Math.max(Math.abs((kt?kt.clientHeight:0)-Ot),Ot)*2+2;Lt=Math.sqrt(Gt**2+tn**2)}yt!=null&&yt.touches?pt.current===null&&(pt.current=()=>{mt({pulsate:xt,rippleX:Vt,rippleY:Ot,rippleSize:Lt,cb:St})},dt.current=setTimeout(()=>{pt.current&&(pt.current(),pt.current=null)},DELAY_RIPPLE)):mt({pulsate:xt,rippleX:Vt,rippleY:Ot,rippleSize:Lt,cb:St})},[ct,mt]),ut=reactExports.useCallback(()=>{st({},{pulsate:!0})},[st]),ft=reactExports.useCallback((yt,vt)=>{if(clearTimeout(dt.current),(yt==null?void 0:yt.type)==="touchend"&&pt.current){pt.current(),pt.current=null,dt.current=setTimeout(()=>{ft(yt,vt)});return}pt.current=null,et(St=>St.length>0?St.slice(1):St),ot.current=vt},[]);return reactExports.useImperativeHandle(_e,()=>({pulsate:ut,start:st,stop:ft}),[ut,st,ft]),jsxRuntimeExports.jsx(TouchRippleRoot,_extends({className:clsx(touchRippleClasses$1.root,gt.root,rt),ref:lt},at,{children:jsxRuntimeExports.jsx(TransitionGroup$1,{component:null,exit:!0,children:s})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(a){return generateUtilityClass("MuiButtonBase",a)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),buttonBaseClasses$1=buttonBaseClasses,_excluded$F=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$x=a=>{const{disabled:o,focusVisible:_e,focusVisibleClassName:tt,classes:ct}=a,rt=composeClasses({root:["root",o&&"disabled",_e&&"focusVisible"]},getButtonBaseUtilityClass,ct);return _e&&tt&&(rt.root+=` ${tt}`),rt},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(a,o)=>o.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiButtonBase"}),{action:ct,centerRipple:gt=!1,children:rt,className:at,component:s="button",disabled:et=!1,disableRipple:nt=!1,disableTouchRipple:ot=!1,focusRipple:ht=!1,LinkComponent:dt="a",onBlur:pt,onClick:lt,onContextMenu:mt,onDragLeave:st,onFocus:ut,onFocusVisible:ft,onKeyDown:yt,onKeyUp:vt,onMouseDown:St,onMouseLeave:xt,onMouseUp:Ut,onTouchEnd:Tt,onTouchMove:kt,onTouchStart:Dt,tabIndex:Vt=0,TouchRippleProps:Ot,touchRippleRef:Lt,type:Gt}=tt,tn=_objectWithoutPropertiesLoose(tt,_excluded$F),zt=reactExports.useRef(null),cn=reactExports.useRef(null),un=useForkRef(cn,Lt),{isFocusVisibleRef:fn,onFocus:vn,onBlur:Ft,ref:pn}=useIsFocusVisible(),[gn,Tn]=reactExports.useState(!1);et&&gn&&Tn(!1),reactExports.useImperativeHandle(ct,()=>({focusVisible:()=>{Tn(!0),zt.current.focus()}}),[]);const[In,kn]=reactExports.useState(!1);reactExports.useEffect(()=>{kn(!0)},[]);const Nn=In&&!nt&&!et;reactExports.useEffect(()=>{gn&&ht&&!nt&&In&&cn.current.pulsate()},[nt,ht,gn,In]);function hn(Vn,ir,Mn=ot){return useEventCallback($n=>(ir&&ir($n),!Mn&&cn.current&&cn.current[Vn]($n),!0))}const Sn=hn("start",St),Rn=hn("stop",mt),wn=hn("stop",st),xn=hn("stop",Ut),Xn=hn("stop",Vn=>{gn&&Vn.preventDefault(),xt&&xt(Vn)}),Ln=hn("start",Dt),Un=hn("stop",Tt),rr=hn("stop",kt),tr=hn("stop",Vn=>{Ft(Vn),fn.current===!1&&Tn(!1),pt&&pt(Vn)},!1),Qn=useEventCallback(Vn=>{zt.current||(zt.current=Vn.currentTarget),vn(Vn),fn.current===!0&&(Tn(!0),ft&&ft(Vn)),ut&&ut(Vn)}),jn=()=>{const Vn=zt.current;return s&&s!=="button"&&!(Vn.tagName==="A"&&Vn.href)},Bn=reactExports.useRef(!1),an=useEventCallback(Vn=>{ht&&!Bn.current&&gn&&cn.current&&Vn.key===" "&&(Bn.current=!0,cn.current.stop(Vn,()=>{cn.current.start(Vn)})),Vn.target===Vn.currentTarget&&jn()&&Vn.key===" "&&Vn.preventDefault(),yt&&yt(Vn),Vn.target===Vn.currentTarget&&jn()&&Vn.key==="Enter"&&!et&&(Vn.preventDefault(),lt&&lt(Vn))}),zn=useEventCallback(Vn=>{ht&&Vn.key===" "&&cn.current&&gn&&!Vn.defaultPrevented&&(Bn.current=!1,cn.current.stop(Vn,()=>{cn.current.pulsate(Vn)})),vt&&vt(Vn),lt&&Vn.target===Vn.currentTarget&&jn()&&Vn.key===" "&&!Vn.defaultPrevented&&lt(Vn)});let Kn=s;Kn==="button"&&(tn.href||tn.to)&&(Kn=dt);const An={};Kn==="button"?(An.type=Gt===void 0?"button":Gt,An.disabled=et):(!tn.href&&!tn.to&&(An.role="button"),et&&(An["aria-disabled"]=et));const _n=useForkRef(_e,pn,zt),On=_extends({},tt,{centerRipple:gt,component:s,disabled:et,disableRipple:nt,disableTouchRipple:ot,focusRipple:ht,tabIndex:Vt,focusVisible:gn}),Pn=useUtilityClasses$x(On);return jsxRuntimeExports.jsxs(ButtonBaseRoot,_extends({as:Kn,className:clsx(Pn.root,at),ownerState:On,onBlur:tr,onClick:lt,onContextMenu:Rn,onFocus:Qn,onKeyDown:an,onKeyUp:zn,onMouseDown:Sn,onMouseLeave:Xn,onMouseUp:xn,onDragLeave:wn,onTouchEnd:Un,onTouchMove:rr,onTouchStart:Ln,ref:_n,tabIndex:et?-1:Vt,type:Gt},An,tn,{children:[rt,Nn?jsxRuntimeExports.jsx(TouchRipple$1,_extends({ref:un,center:gt},Ot)):null]}))}),ButtonBase$1=ButtonBase;function getIconButtonUtilityClass(a){return generateUtilityClass("MuiIconButton",a)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),iconButtonClasses$1=iconButtonClasses,_excluded$E=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$w=a=>{const{classes:o,disabled:_e,color:tt,edge:ct,size:gt}=a,rt={root:["root",_e&&"disabled",tt!=="default"&&`color${capitalize(tt)}`,ct&&`edge${capitalize(ct)}`,`size${capitalize(gt)}`]};return composeClasses(rt,getIconButtonUtilityClass,o)},IconButtonRoot=styled$1(ButtonBase$1,{name:"MuiIconButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="default"&&o[`color${capitalize(_e.color)}`],_e.edge&&o[`edge${capitalize(_e.edge)}`],o[`size${capitalize(_e.size)}`]]}})(({theme:a,ownerState:o})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:a.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(a.vars||a).palette.action.active,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest})},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.activeChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.edge==="start"&&{marginLeft:o.size==="small"?-3:-12},o.edge==="end"&&{marginRight:o.size==="small"?-3:-12}),({theme:a,ownerState:o})=>{var _e;const tt=(_e=(a.vars||a).palette)==null?void 0:_e[o.color];return _extends({},o.color==="inherit"&&{color:"inherit"},o.color!=="inherit"&&o.color!=="default"&&_extends({color:tt==null?void 0:tt.main},!o.disableRipple&&{"&:hover":_extends({},tt&&{backgroundColor:a.vars?`rgba(${tt.mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(tt.main,a.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),o.size==="small"&&{padding:5,fontSize:a.typography.pxToRem(18)},o.size==="large"&&{padding:12,fontSize:a.typography.pxToRem(28)},{[`&.${iconButtonClasses$1.disabled}`]:{backgroundColor:"transparent",color:(a.vars||a).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIconButton"}),{edge:ct=!1,children:gt,className:rt,color:at="default",disabled:s=!1,disableFocusRipple:et=!1,size:nt="medium"}=tt,ot=_objectWithoutPropertiesLoose(tt,_excluded$E),ht=_extends({},tt,{edge:ct,color:at,disabled:s,disableFocusRipple:et,size:nt}),dt=useUtilityClasses$w(ht);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(dt.root,rt),centerRipple:!0,focusRipple:!et,disabled:s,ref:_e,ownerState:ht},ot,{children:gt}))}),IconButton$1=IconButton;function getSvgIconUtilityClass(a){return generateUtilityClass("MuiSvgIcon",a)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$D=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$v=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getSvgIconUtilityClass,tt)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>{var _e,tt,ct,gt,rt,at,s,et,nt,ot,ht,dt,pt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:o.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(_e=a.transitions)==null||(tt=_e.create)==null?void 0:tt.call(_e,"fill",{duration:(ct=a.transitions)==null||(ct=ct.duration)==null?void 0:ct.shorter}),fontSize:{inherit:"inherit",small:((gt=a.typography)==null||(rt=gt.pxToRem)==null?void 0:rt.call(gt,20))||"1.25rem",medium:((at=a.typography)==null||(s=at.pxToRem)==null?void 0:s.call(at,24))||"1.5rem",large:((et=a.typography)==null||(nt=et.pxToRem)==null?void 0:nt.call(et,35))||"2.1875rem"}[o.fontSize],color:(ot=(ht=(a.vars||a).palette)==null||(ht=ht[o.color])==null?void 0:ht.main)!=null?ot:{action:(dt=(a.vars||a).palette)==null||(dt=dt.action)==null?void 0:dt.active,disabled:(pt=(a.vars||a).palette)==null||(pt=pt.action)==null?void 0:pt.disabled,inherit:void 0}[o.color]}}),SvgIcon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSvgIcon"}),{children:ct,className:gt,color:rt="inherit",component:at="svg",fontSize:s="medium",htmlColor:et,inheritViewBox:nt=!1,titleAccess:ot,viewBox:ht="0 0 24 24"}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$D),pt=reactExports.isValidElement(ct)&&ct.type==="svg",lt=_extends({},tt,{color:rt,component:at,fontSize:s,instanceFontSize:o.fontSize,inheritViewBox:nt,viewBox:ht,hasSvgAsChild:pt}),mt={};nt||(mt.viewBox=ht);const st=useUtilityClasses$v(lt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends({as:at,className:clsx(st.root,gt),focusable:"false",color:et,"aria-hidden":ot?void 0:!0,role:ot?"img":void 0,ref:_e},mt,dt,pt&&ct.props,{ownerState:lt,children:[pt?ct.props.children:ct,ot?jsxRuntimeExports.jsx("title",{children:ot}):null]}))});SvgIcon.muiName="SvgIcon";const SvgIcon$1=SvgIcon;function createSvgIcon(a,o){function _e(tt,ct){return jsxRuntimeExports.jsx(SvgIcon$1,_extends({"data-testid":`${o}Icon`,ref:ct},tt,{children:a}))}return _e.muiName=SvgIcon$1.muiName,reactExports.memo(reactExports.forwardRef(_e))}const SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$C=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$u=a=>{const{variant:o,color:_e,severity:tt,classes:ct}=a,gt={root:["root",`${o}${capitalize(_e||tt)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(gt,getAlertUtilityClass,ct)},AlertRoot=styled$1(Paper$1,{name:"MuiAlert",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color||_e.severity)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?darken:lighten,tt=a.palette.mode==="light"?lighten:darken,ct=o.color||o.severity;return _extends({},a.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},ct&&o.variant==="standard"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),backgroundColor:a.vars?a.vars.palette.Alert[`${ct}StandardBg`]:tt(a.palette[ct].light,.9),[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="outlined"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),border:`1px solid ${(a.vars||a).palette[ct].light}`,[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="filled"&&_extends({fontWeight:a.typography.fontWeightMedium},a.vars?{color:a.vars.palette.Alert[`${ct}FilledColor`],backgroundColor:a.vars.palette.Alert[`${ct}FilledBg`]}:{backgroundColor:a.palette.mode==="dark"?a.palette[ct].dark:a.palette[ct].main,color:a.palette.getContrastText(a.palette[ct].main)}))}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(a,o)=>o.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(a,o)=>o.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(a,o)=>o.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,at,s;const et=useThemeProps({props:o,name:"MuiAlert"}),{action:nt,children:ot,className:ht,closeText:dt="Close",color:pt,components:lt={},componentsProps:mt={},icon:st,iconMapping:ut=defaultIconMapping,onClose:ft,role:yt="alert",severity:vt="success",slotProps:St={},slots:xt={},variant:Ut="standard"}=et,Tt=_objectWithoutPropertiesLoose(et,_excluded$C),kt=_extends({},et,{color:pt,severity:vt,variant:Ut}),Dt=useUtilityClasses$u(kt),Vt=(tt=(ct=xt.closeButton)!=null?ct:lt.CloseButton)!=null?tt:IconButton$1,Ot=(gt=(rt=xt.closeIcon)!=null?rt:lt.CloseIcon)!=null?gt:ClearIcon,Lt=(at=St.closeButton)!=null?at:mt.closeButton,Gt=(s=St.closeIcon)!=null?s:mt.closeIcon;return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:yt,elevation:0,ownerState:kt,className:clsx(Dt.root,ht),ref:_e},Tt,{children:[st!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:kt,className:Dt.icon,children:st||ut[vt]||defaultIconMapping[vt]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:kt,className:Dt.message,children:ot}),nt!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:kt,className:Dt.action,children:nt}):null,nt==null&&ft?jsxRuntimeExports.jsx(AlertAction,{ownerState:kt,className:Dt.action,children:jsxRuntimeExports.jsx(Vt,_extends({size:"small","aria-label":dt,title:dt,color:"inherit",onClick:ft},Lt,{children:jsxRuntimeExports.jsx(Ot,_extends({fontSize:"small"},Gt))}))}):null]}))}),Alert$1=Alert;function getUnit(a){return String(a).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(a){return parseFloat(a)}const _excluded$B=["theme"];function ThemeProvider(a){let{theme:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$B);const tt=o[THEME_ID];return jsxRuntimeExports.jsx(ThemeProvider$1,_extends({},_e,{themeId:tt?THEME_ID:void 0,theme:tt||o}))}const defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getCardUtilityClass(a){return generateUtilityClass("MuiCard",a)}generateUtilityClasses("MuiCard",["root"]);const _excluded$A=["className","raised"],useUtilityClasses$t=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardUtilityClass,o)},CardRoot=styled$1(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCard"}),{className:ct,raised:gt=!1}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$A),at=_extends({},tt,{raised:gt}),s=useUtilityClasses$t(at);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(s.root,ct),elevation:gt?8:void 0,ref:_e,ownerState:at},rt))}),Card$1=Card;function getCardContentUtilityClass(a){return generateUtilityClass("MuiCardContent",a)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$z=["className","component"],useUtilityClasses$s=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardContentUtilityClass,o)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCardContent"}),{className:ct,component:gt="div"}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$z),at=_extends({},tt,{component:gt}),s=useUtilityClasses$s(at);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:gt,className:clsx(s.root,ct),ownerState:at,ref:_e},rt))}),CardContent$1=CardContent,Container=createContainer({createStyledComponent:styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemeProps:a=>useThemeProps({props:a,name:"MuiContainer"})}),Container$1=Container,StepperContext=reactExports.createContext({}),StepperContext$1=StepperContext,StepContext=reactExports.createContext({}),StepContext$1=StepContext;function getStepUtilityClass(a){return generateUtilityClass("MuiStep",a)}generateUtilityClasses("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const _excluded$y=["active","children","className","component","completed","disabled","expanded","index","last"],useUtilityClasses$r=a=>{const{classes:o,orientation:_e,alternativeLabel:tt,completed:ct}=a;return composeClasses({root:["root",_e,tt&&"alternativeLabel",ct&&"completed"]},getStepUtilityClass,o)},StepRoot=styled$1("div",{name:"MuiStep",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.orientation],_e.alternativeLabel&&o.alternativeLabel,_e.completed&&o.completed]}})(({ownerState:a})=>_extends({},a.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},a.alternativeLabel&&{flex:1,position:"relative"})),Step=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiStep"}),{active:ct,children:gt,className:rt,component:at="div",completed:s,disabled:et,expanded:nt=!1,index:ot,last:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$y),{activeStep:pt,connector:lt,alternativeLabel:mt,orientation:st,nonLinear:ut}=reactExports.useContext(StepperContext$1);let[ft=!1,yt=!1,vt=!1]=[ct,s,et];pt===ot?ft=ct!==void 0?ct:!0:!ut&&pt>ot?yt=s!==void 0?s:!0:!ut&&pt<ot&&(vt=et!==void 0?et:!0);const St=reactExports.useMemo(()=>({index:ot,last:ht,expanded:nt,icon:ot+1,active:ft,completed:yt,disabled:vt}),[ot,ht,nt,ft,yt,vt]),xt=_extends({},tt,{active:ft,orientation:st,alternativeLabel:mt,completed:yt,disabled:vt,expanded:nt,component:at}),Ut=useUtilityClasses$r(xt),Tt=jsxRuntimeExports.jsxs(StepRoot,_extends({as:at,className:clsx(Ut.root,rt),ref:_e,ownerState:xt},dt,{children:[lt&&mt&&ot!==0?lt:null,gt]}));return jsxRuntimeExports.jsx(StepContext$1.Provider,{value:St,children:lt&&!mt&&ot!==0?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[lt,Tt]}):Tt})}),Step$1=Step;function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var apiRTC_min={exports:{}};(function(a,o){(function(tt){a.exports=tt()})(function(){return function(){function tt(ct,gt,rt){function at(nt,ot){if(!gt[nt]){if(!ct[nt]){var ht=typeof commonjsRequire=="function"&&commonjsRequire;if(!ot&&ht)return ht(nt,!0);if(s)return s(nt,!0);var dt=new Error("Cannot find module '"+nt+"'");throw dt.code="MODULE_NOT_FOUND",dt}var pt=gt[nt]={exports:{}};ct[nt][0].call(pt.exports,function(lt){return at(ct[nt][1][lt]||lt)},pt,pt.exports,tt,ct,gt,rt)}return gt[nt].exports}for(var s=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<rt.length;et++)at(rt[et]);return at}return tt}()({1:[function(tt,ct,gt){var rt=(0,tt("./adapter_factory.js").adapterFactory)({window});ct.exports=rt},{"./adapter_factory.js":2}],2:[function(tt,ct,gt){function rt(dt){if(dt&&dt.__esModule)return dt;var pt={};if(dt!=null)for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(pt[lt]=dt[lt]);return pt.default=dt,pt}Object.defineProperty(gt,"__esModule",{value:!0}),gt.adapterFactory=function(){var dt=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},lt=at.log,mt=at.detectBrowser(dt),st={browserDetails:mt,commonShim:ht,extractVersion:at.extractVersion,disableLog:at.disableLog,disableWarnings:at.disableWarnings};switch(mt.browser){case"chrome":if(!s||!s.shimPeerConnection||!pt.shimChrome)return lt("Chrome shim is not included in this adapter release."),st;lt("adapter.js shimming chrome."),st.browserShim=s,s.shimGetUserMedia(dt),s.shimMediaStream(dt),s.shimPeerConnection(dt),s.shimOnTrack(dt),s.shimAddTrackRemoveTrack(dt),s.shimGetSendersWithDtmf(dt),s.shimGetStats(dt),s.shimSenderReceiverGetStats(dt),s.fixNegotiationNeeded(dt),ht.shimRTCIceCandidate(dt),ht.shimConnectionState(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt),ht.removeAllowExtmapMixed(dt);break;case"firefox":if(!nt||!nt.shimPeerConnection||!pt.shimFirefox)return lt("Firefox shim is not included in this adapter release."),st;lt("adapter.js shimming firefox."),st.browserShim=nt,nt.shimGetUserMedia(dt),nt.shimPeerConnection(dt),nt.shimOnTrack(dt),nt.shimRemoveStream(dt),nt.shimSenderGetStats(dt),nt.shimReceiverGetStats(dt),nt.shimRTCDataChannel(dt),ht.shimRTCIceCandidate(dt),ht.shimConnectionState(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt);break;case"edge":if(!et||!et.shimPeerConnection||!pt.shimEdge)return lt("MS edge shim is not included in this adapter release."),st;lt("adapter.js shimming edge."),st.browserShim=et,et.shimGetUserMedia(dt),et.shimGetDisplayMedia(dt),et.shimPeerConnection(dt),et.shimReplaceTrack(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt);break;case"safari":if(!ot||!pt.shimSafari)return lt("Safari shim is not included in this adapter release."),st;lt("adapter.js shimming safari."),st.browserShim=ot,ot.shimRTCIceServerUrls(dt),ot.shimCreateOfferLegacy(dt),ot.shimCallbacksAPI(dt),ot.shimLocalStreamsAPI(dt),ot.shimRemoteStreamsAPI(dt),ot.shimTrackEventTransceiver(dt),ot.shimGetUserMedia(dt),ht.shimRTCIceCandidate(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt),ht.removeAllowExtmapMixed(dt);break;default:lt("Unsupported browser!")}return st};var at=rt(tt("./utils")),s=rt(tt("./chrome/chrome_shim")),et=rt(tt("./edge/edge_shim")),nt=rt(tt("./firefox/firefox_shim")),ot=rt(tt("./safari/safari_shim")),ht=rt(tt("./common_shim"))},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(tt,ct,gt){function rt(ot){ot.RTCPeerConnection.prototype.getLocalStreams=function(){var mt=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(st){return mt._shimmedLocalStreams[st][0]})};var ht=ot.RTCPeerConnection.prototype.addTrack;ot.RTCPeerConnection.prototype.addTrack=function(mt,st){if(!st)return ht.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ut=ht.apply(this,arguments);return this._shimmedLocalStreams[st.id]?this._shimmedLocalStreams[st.id].indexOf(ut)===-1&&this._shimmedLocalStreams[st.id].push(ut):this._shimmedLocalStreams[st.id]=[st,ut],ut};var dt=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(mt){var st=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},mt.getTracks().forEach(function(yt){if(st.getSenders().find(function(vt){return vt.track===yt}))throw new DOMException("Track already exists.","InvalidAccessError")});var ut=this.getSenders();dt.apply(this,arguments);var ft=this.getSenders().filter(function(yt){return ut.indexOf(yt)===-1});this._shimmedLocalStreams[mt.id]=[mt].concat(ft)};var pt=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(mt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[mt.id],pt.apply(this,arguments)};var lt=ot.RTCPeerConnection.prototype.removeTrack;ot.RTCPeerConnection.prototype.removeTrack=function(mt){var st=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},mt&&Object.keys(this._shimmedLocalStreams).forEach(function(ut){var ft=st._shimmedLocalStreams[ut].indexOf(mt);ft!==-1&&st._shimmedLocalStreams[ut].splice(ft,1),st._shimmedLocalStreams[ut].length===1&&delete st._shimmedLocalStreams[ut]}),lt.apply(this,arguments)}}Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ot){return typeof ot}:function(ot){return ot&&typeof Symbol=="function"&&ot.constructor===Symbol&&ot!==Symbol.prototype?"symbol":typeof ot},s=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});var et=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return et.shimGetDisplayMedia}}),gt.shimMediaStream=function(ot){ot.MediaStream=ot.MediaStream||ot.webkitMediaStream},gt.shimOnTrack=function(ot){if((ot===void 0?"undefined":at(ot))!=="object"||!ot.RTCPeerConnection||"ontrack"in ot.RTCPeerConnection.prototype)nt.wrapPeerConnectionEvent(ot,"track",function(dt){return dt.transceiver||Object.defineProperty(dt,"transceiver",{value:{receiver:dt.receiver}}),dt});else{Object.defineProperty(ot.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(dt){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=dt)},enumerable:!0,configurable:!0});var ht=ot.RTCPeerConnection.prototype.setRemoteDescription;ot.RTCPeerConnection.prototype.setRemoteDescription=function(){var dt=this;return this._ontrackpoly||(this._ontrackpoly=function(pt){pt.stream.addEventListener("addtrack",function(lt){var mt=void 0;mt=ot.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===lt.track.id}):{track:lt.track};var st=new Event("track");st.track=lt.track,st.receiver=mt,st.transceiver={receiver:mt},st.streams=[pt.stream],dt.dispatchEvent(st)}),pt.stream.getTracks().forEach(function(lt){var mt=void 0;mt=ot.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===lt.id}):{track:lt};var st=new Event("track");st.track=lt,st.receiver=mt,st.transceiver={receiver:mt},st.streams=[pt.stream],dt.dispatchEvent(st)})},this.addEventListener("addstream",this._ontrackpoly)),ht.apply(this,arguments)}}},gt.shimGetSendersWithDtmf=function(ot){if((ot===void 0?"undefined":at(ot))==="object"&&ot.RTCPeerConnection&&!("getSenders"in ot.RTCPeerConnection.prototype)&&"createDTMFSender"in ot.RTCPeerConnection.prototype){var ht=function(ut,ft){return{track:ft,get dtmf(){return this._dtmf===void 0&&(ft.kind==="audio"?this._dtmf=ut.createDTMFSender(ft):this._dtmf=null),this._dtmf},_pc:ut}};if(!ot.RTCPeerConnection.prototype.getSenders){ot.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var dt=ot.RTCPeerConnection.prototype.addTrack;ot.RTCPeerConnection.prototype.addTrack=function(ut,ft){var yt=dt.apply(this,arguments);return yt||(yt=ht(this,ut),this._senders.push(yt)),yt};var pt=ot.RTCPeerConnection.prototype.removeTrack;ot.RTCPeerConnection.prototype.removeTrack=function(ut){pt.apply(this,arguments);var ft=this._senders.indexOf(ut);ft!==-1&&this._senders.splice(ft,1)}}var lt=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(ut){var ft=this;this._senders=this._senders||[],lt.apply(this,[ut]),ut.getTracks().forEach(function(yt){ft._senders.push(ht(ft,yt))})};var mt=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(ut){var ft=this;this._senders=this._senders||[],mt.apply(this,[ut]),ut.getTracks().forEach(function(yt){var vt=ft._senders.find(function(St){return St.track===yt});vt&&ft._senders.splice(ft._senders.indexOf(vt),1)})}}else if((ot===void 0?"undefined":at(ot))==="object"&&ot.RTCPeerConnection&&"getSenders"in ot.RTCPeerConnection.prototype&&"createDTMFSender"in ot.RTCPeerConnection.prototype&&ot.RTCRtpSender&&!("dtmf"in ot.RTCRtpSender.prototype)){var st=ot.RTCPeerConnection.prototype.getSenders;ot.RTCPeerConnection.prototype.getSenders=function(){var ut=this,ft=st.apply(this,[]);return ft.forEach(function(yt){return yt._pc=ut}),ft},Object.defineProperty(ot.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},gt.shimGetStats=function(ot){if(ot.RTCPeerConnection){var ht=ot.RTCPeerConnection.prototype.getStats;ot.RTCPeerConnection.prototype.getStats=function(dt,pt,lt){var mt=this,st=arguments;if(arguments.length>0&&typeof dt=="function")return ht.apply(this,arguments);if(ht.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return ht.apply(this,[]);var ut=function(vt){var St={};return vt.result().forEach(function(xt){var Ut={id:xt.id,timestamp:xt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[xt.type]||xt.type};xt.names().forEach(function(Tt){Ut[Tt]=xt.stat(Tt)}),St[Ut.id]=Ut}),St},ft=function(vt){return new Map(Object.keys(vt).map(function(St){return[St,vt[St]]}))};if(arguments.length>=2){var yt=function(vt){st[1](ft(ut(vt)))};return ht.apply(this,[yt,arguments[0]])}return new Promise(function(vt,St){ht.apply(mt,[function(xt){vt(ft(ut(xt)))},St])}).then(pt,lt)}}},gt.shimSenderReceiverGetStats=function(ot){if((ot===void 0?"undefined":at(ot))==="object"&&ot.RTCPeerConnection&&ot.RTCRtpSender&&ot.RTCRtpReceiver){if(!("getStats"in ot.RTCRtpSender.prototype)){var ht=ot.RTCPeerConnection.prototype.getSenders;ht&&(ot.RTCPeerConnection.prototype.getSenders=function(){var mt=this,st=ht.apply(this,[]);return st.forEach(function(ut){return ut._pc=mt}),st});var dt=ot.RTCPeerConnection.prototype.addTrack;dt&&(ot.RTCPeerConnection.prototype.addTrack=function(){var mt=dt.apply(this,arguments);return mt._pc=this,mt}),ot.RTCRtpSender.prototype.getStats=function(){var mt=this;return this._pc.getStats().then(function(st){return nt.filterStats(st,mt.track,!0)})}}if(!("getStats"in ot.RTCRtpReceiver.prototype)){var pt=ot.RTCPeerConnection.prototype.getReceivers;pt&&(ot.RTCPeerConnection.prototype.getReceivers=function(){var mt=this,st=pt.apply(this,[]);return st.forEach(function(ut){return ut._pc=mt}),st}),nt.wrapPeerConnectionEvent(ot,"track",function(mt){return mt.receiver._pc=mt.srcElement,mt}),ot.RTCRtpReceiver.prototype.getStats=function(){var mt=this;return this._pc.getStats().then(function(st){return nt.filterStats(st,mt.track,!1)})}}if("getStats"in ot.RTCRtpSender.prototype&&"getStats"in ot.RTCRtpReceiver.prototype){var lt=ot.RTCPeerConnection.prototype.getStats;ot.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof ot.MediaStreamTrack){var mt=arguments[0],st=void 0,ut=void 0,ft=void 0;return this.getSenders().forEach(function(yt){yt.track===mt&&(st?ft=!0:st=yt)}),this.getReceivers().forEach(function(yt){return yt.track===mt&&(ut?ft=!0:ut=yt),yt.track===mt}),ft||st&&ut?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):st?st.getStats():ut?ut.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return lt.apply(this,arguments)}}}},gt.shimAddTrackRemoveTrackWithNative=rt,gt.shimAddTrackRemoveTrack=function(ot){function ht(yt,vt){var St=vt.sdp;return Object.keys(yt._reverseStreams||[]).forEach(function(xt){var Ut=yt._reverseStreams[xt],Tt=yt._streams[Ut.id];St=St.replace(new RegExp(Tt.id,"g"),Ut.id)}),new RTCSessionDescription({type:vt.type,sdp:St})}function dt(yt,vt){var St=vt.sdp;return Object.keys(yt._reverseStreams||[]).forEach(function(xt){var Ut=yt._reverseStreams[xt],Tt=yt._streams[Ut.id];St=St.replace(new RegExp(Ut.id,"g"),Tt.id)}),new RTCSessionDescription({type:vt.type,sdp:St})}if(ot.RTCPeerConnection){var pt=nt.detectBrowser(ot);if(ot.RTCPeerConnection.prototype.addTrack&&pt.version>=65)return rt(ot);var lt=ot.RTCPeerConnection.prototype.getLocalStreams;ot.RTCPeerConnection.prototype.getLocalStreams=function(){var yt=this,vt=lt.apply(this);return this._reverseStreams=this._reverseStreams||{},vt.map(function(St){return yt._reverseStreams[St.id]})};var mt=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(yt){var vt=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},yt.getTracks().forEach(function(xt){if(vt.getSenders().find(function(Ut){return Ut.track===xt}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[yt.id]){var St=new ot.MediaStream(yt.getTracks());this._streams[yt.id]=St,this._reverseStreams[St.id]=yt,yt=St}mt.apply(this,[yt])};var st=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(yt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},st.apply(this,[this._streams[yt.id]||yt]),delete this._reverseStreams[this._streams[yt.id]?this._streams[yt.id].id:yt.id],delete this._streams[yt.id]},ot.RTCPeerConnection.prototype.addTrack=function(yt,vt){var St=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var xt=[].slice.call(arguments,1);if(xt.length!==1||!xt[0].getTracks().find(function(kt){return kt===yt}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(kt){return kt.track===yt}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var Ut=this._streams[vt.id];if(Ut)Ut.addTrack(yt),Promise.resolve().then(function(){St.dispatchEvent(new Event("negotiationneeded"))});else{var Tt=new ot.MediaStream([yt]);this._streams[vt.id]=Tt,this._reverseStreams[Tt.id]=vt,this.addStream(Tt)}return this.getSenders().find(function(kt){return kt.track===yt})},["createOffer","createAnswer"].forEach(function(yt){var vt=ot.RTCPeerConnection.prototype[yt];ot.RTCPeerConnection.prototype[yt]=function(){var St=this,xt=arguments;return arguments.length&&typeof arguments[0]=="function"?vt.apply(this,[function(Ut){var Tt=ht(St,Ut);xt[0].apply(null,[Tt])},function(Ut){xt[1]&&xt[1].apply(null,Ut)},arguments[2]]):vt.apply(this,arguments).then(function(Ut){return ht(St,Ut)})}});var ut=ot.RTCPeerConnection.prototype.setLocalDescription;ot.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=dt(this,arguments[0]),ut.apply(this,arguments)):ut.apply(this,arguments)};var ft=Object.getOwnPropertyDescriptor(ot.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(ot.RTCPeerConnection.prototype,"localDescription",{get:function(){var yt=ft.get.apply(this);return yt.type===""?yt:ht(this,yt)}}),ot.RTCPeerConnection.prototype.removeTrack=function(yt){var vt=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!yt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(yt._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var St=void 0;Object.keys(this._streams).forEach(function(xt){vt._streams[xt].getTracks().find(function(Ut){return yt.track===Ut})&&(St=vt._streams[xt])}),St&&(St.getTracks().length===1?this.removeStream(this._reverseStreams[St.id]):St.removeTrack(yt.track),this.dispatchEvent(new Event("negotiationneeded")))}}},gt.shimPeerConnection=function(ot){if(!ot.RTCPeerConnection&&ot.webkitRTCPeerConnection&&(ot.RTCPeerConnection=ot.webkitRTCPeerConnection),ot.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(dt){var pt=ot.RTCPeerConnection.prototype[dt];ot.RTCPeerConnection.prototype[dt]=function(){return arguments[0]=new(dt==="addIceCandidate"?ot.RTCIceCandidate:ot.RTCSessionDescription)(arguments[0]),pt.apply(this,arguments)}});var ht=ot.RTCPeerConnection.prototype.addIceCandidate;ot.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ht.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},gt.fixNegotiationNeeded=function(ot){nt.wrapPeerConnectionEvent(ot,"negotiationneeded",function(ht){if(ht.target.signalingState==="stable")return ht})};var nt=function(ot){if(ot&&ot.__esModule)return ot;var ht={};if(ot!=null)for(var dt in ot)Object.prototype.hasOwnProperty.call(ot,dt)&&(ht[dt]=ot[dt]);return ht.default=ot,ht}(tt("../utils.js"))},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt,at){rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||rt.navigator.mediaDevices&&(typeof at=="function"?rt.navigator.mediaDevices.getDisplayMedia=function(s){return at(s).then(function(et){var nt=s.video&&s.video.width,ot=s.video&&s.video.height,ht=s.video&&s.video.frameRate;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:et,maxFrameRate:ht||3}},nt&&(s.video.mandatory.maxWidth=nt),ot&&(s.video.mandatory.maxHeight=ot),rt.navigator.mediaDevices.getUserMedia(s)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimGetUserMedia=function(et){var nt=et&&et.navigator;if(nt.mediaDevices){var ot=at.detectBrowser(et),ht=function(mt){if((mt===void 0?"undefined":rt(mt))!=="object"||mt.mandatory||mt.optional)return mt;var st={};return Object.keys(mt).forEach(function(ut){if(ut!=="require"&&ut!=="advanced"&&ut!=="mediaSource"){var ft=rt(mt[ut])==="object"?mt[ut]:{ideal:mt[ut]};ft.exact!==void 0&&typeof ft.exact=="number"&&(ft.min=ft.max=ft.exact);var yt=function(St,xt){return St?St+xt.charAt(0).toUpperCase()+xt.slice(1):xt==="deviceId"?"sourceId":xt};if(ft.ideal!==void 0){st.optional=st.optional||[];var vt={};typeof ft.ideal=="number"?(vt[yt("min",ut)]=ft.ideal,st.optional.push(vt),(vt={})[yt("max",ut)]=ft.ideal,st.optional.push(vt)):(vt[yt("",ut)]=ft.ideal,st.optional.push(vt))}ft.exact!==void 0&&typeof ft.exact!="number"?(st.mandatory=st.mandatory||{},st.mandatory[yt("",ut)]=ft.exact):["min","max"].forEach(function(St){ft[St]!==void 0&&(st.mandatory=st.mandatory||{},st.mandatory[yt(St,ut)]=ft[St])})}}),mt.advanced&&(st.optional=(st.optional||[]).concat(mt.advanced)),st},dt=function(mt,st){if(ot.version>=61)return st(mt);if((mt=JSON.parse(JSON.stringify(mt)))&&rt(mt.audio)==="object"){var ut=function(St,xt,Ut){xt in St&&!(Ut in St)&&(St[Ut]=St[xt],delete St[xt])};ut((mt=JSON.parse(JSON.stringify(mt))).audio,"autoGainControl","googAutoGainControl"),ut(mt.audio,"noiseSuppression","googNoiseSuppression"),mt.audio=ht(mt.audio)}if(mt&&rt(mt.video)==="object"){var ft=mt.video.facingMode;ft=ft&&((ft===void 0?"undefined":rt(ft))==="object"?ft:{ideal:ft});var yt=ot.version<66;if(ft&&(ft.exact==="user"||ft.exact==="environment"||ft.ideal==="user"||ft.ideal==="environment")&&(!nt.mediaDevices.getSupportedConstraints||!nt.mediaDevices.getSupportedConstraints().facingMode||yt)){delete mt.video.facingMode;var vt=void 0;if(ft.exact==="environment"||ft.ideal==="environment"?vt=["back","rear"]:ft.exact!=="user"&&ft.ideal!=="user"||(vt=["front"]),vt)return nt.mediaDevices.enumerateDevices().then(function(St){var xt=(St=St.filter(function(Ut){return Ut.kind==="videoinput"})).find(function(Ut){return vt.some(function(Tt){return Ut.label.toLowerCase().includes(Tt)})});return!xt&&St.length&&vt.includes("back")&&(xt=St[St.length-1]),xt&&(mt.video.deviceId=ft.exact?{exact:xt.deviceId}:{ideal:xt.deviceId}),mt.video=ht(mt.video),s("chrome: "+JSON.stringify(mt)),st(mt)})}mt.video=ht(mt.video)}return s("chrome: "+JSON.stringify(mt)),st(mt)},pt=function(mt){return ot.version>=64?mt:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[mt.name]||mt.name,message:mt.message,constraint:mt.constraint||mt.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(nt.getUserMedia=(function(mt,st,ut){dt(mt,function(ft){nt.webkitGetUserMedia(ft,st,function(yt){ut&&ut(pt(yt))})})}).bind(nt),nt.mediaDevices.getUserMedia){var lt=nt.mediaDevices.getUserMedia.bind(nt.mediaDevices);nt.mediaDevices.getUserMedia=function(mt){return dt(mt,function(st){return lt(st).then(function(ut){if(st.audio&&!ut.getAudioTracks().length||st.video&&!ut.getVideoTracks().length)throw ut.getTracks().forEach(function(ft){ft.stop()}),new DOMException("","NotFoundError");return ut},function(ut){return Promise.reject(pt(ut))})})}}}};var at=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(nt[ot]=et[ot]);return nt.default=et,nt}(tt("../utils.js")),s=at.log},{"../utils.js":15}],6:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimRTCIceCandidate=function(et){if(et.RTCIceCandidate&&!(et.RTCIceCandidate&&"foundation"in et.RTCIceCandidate.prototype)){var nt=et.RTCIceCandidate;et.RTCIceCandidate=function(ot){if((ot===void 0?"undefined":rt(ot))==="object"&&ot.candidate&&ot.candidate.indexOf("a=")===0&&((ot=JSON.parse(JSON.stringify(ot))).candidate=ot.candidate.substr(2)),ot.candidate&&ot.candidate.length){var ht=new nt(ot),dt=at.default.parseCandidate(ot.candidate),pt=Object.assign(ht,dt);return pt.toJSON=function(){return{candidate:pt.candidate,sdpMid:pt.sdpMid,sdpMLineIndex:pt.sdpMLineIndex,usernameFragment:pt.usernameFragment}},pt}return new nt(ot)},et.RTCIceCandidate.prototype=nt.prototype,s.wrapPeerConnectionEvent(et,"icecandidate",function(ot){return ot.candidate&&Object.defineProperty(ot,"candidate",{value:new et.RTCIceCandidate(ot.candidate),writable:"false"}),ot})}},gt.shimMaxMessageSize=function(et){if(!et.RTCSctpTransport&&et.RTCPeerConnection){var nt=s.detectBrowser(et);"sctp"in et.RTCPeerConnection.prototype||Object.defineProperty(et.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var ot=function(mt){if(!mt||!mt.sdp)return!1;var st=at.default.splitSections(mt.sdp);return st.shift(),st.some(function(ut){var ft=at.default.parseMLine(ut);return ft&&ft.kind==="application"&&ft.protocol.indexOf("SCTP")!==-1})},ht=function(mt){var st=mt.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(st===null||st.length<2)return-1;var ut=parseInt(st[1],10);return ut!==ut?-1:ut},dt=function(mt){var st=65536;return nt.browser==="firefox"&&(st=nt.version<57?mt===-1?16384:2147483637:nt.version<60?nt.version===57?65535:65536:2147483637),st},pt=function(mt,st){var ut=65536;nt.browser==="firefox"&&nt.version===57&&(ut=65535);var ft=at.default.matchPrefix(mt.sdp,"a=max-message-size:");return ft.length>0?ut=parseInt(ft[0].substr(19),10):nt.browser==="firefox"&&st!==-1&&(ut=2147483637),ut},lt=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,ot(arguments[0])){var mt=ht(arguments[0]),st=dt(mt),ut=pt(arguments[0],mt),ft=void 0;ft=st===0&&ut===0?Number.POSITIVE_INFINITY:st===0||ut===0?Math.max(st,ut):Math.min(st,ut);var yt={};Object.defineProperty(yt,"maxMessageSize",{get:function(){return ft}}),this._sctp=yt}return lt.apply(this,arguments)}}},gt.shimSendThrowTypeError=function(et){function nt(ht,dt){var pt=ht.send;ht.send=function(){var lt=arguments[0],mt=lt.length||lt.size||lt.byteLength;if(ht.readyState==="open"&&dt.sctp&&mt>dt.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+dt.sctp.maxMessageSize+" bytes)");return pt.apply(ht,arguments)}}if(et.RTCPeerConnection&&"createDataChannel"in et.RTCPeerConnection.prototype){var ot=et.RTCPeerConnection.prototype.createDataChannel;et.RTCPeerConnection.prototype.createDataChannel=function(){var ht=ot.apply(this,arguments);return nt(ht,this),ht},s.wrapPeerConnectionEvent(et,"datachannel",function(ht){return nt(ht.channel,ht.target),ht})}},gt.shimConnectionState=function(et){if(et.RTCPeerConnection&&!("connectionState"in et.RTCPeerConnection.prototype)){var nt=et.RTCPeerConnection.prototype;Object.defineProperty(nt,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(nt,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(ot){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),ot&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=ot)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(ot){var ht=nt[ot];nt[ot]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(dt){var pt=dt.target;if(pt._lastConnectionState!==pt.connectionState){pt._lastConnectionState=pt.connectionState;var lt=new Event("connectionstatechange",dt);pt.dispatchEvent(lt)}return dt},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),ht.apply(this,arguments)}})}},gt.removeAllowExtmapMixed=function(et){if(et.RTCPeerConnection){var nt=s.detectBrowser(et);if(!(nt.browser==="chrome"&&nt.version>=71||nt.browser==="safari"&&nt.version>=605)){var ot=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(ht){return ht&&ht.sdp&&ht.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(ht.sdp=ht.sdp.split(`
`).filter(function(dt){return dt.trim()!=="a=extmap-allow-mixed"}).join(`
`)),ot.apply(this,arguments)}}}};var at=function(et){return et&&et.__esModule?et:{default:et}}(tt("sdp")),s=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(nt[ot]=et[ot]);return nt.default=et,nt}(tt("./utils"))},{"./utils":15,sdp:17}],7:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var rt=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return rt.shimGetUserMedia}});var at=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return at.shimGetDisplayMedia}}),gt.shimPeerConnection=function(ot){var ht=s.detectBrowser(ot);if(ot.RTCIceGatherer&&(ot.RTCIceCandidate||(ot.RTCIceCandidate=function(lt){return lt}),ot.RTCSessionDescription||(ot.RTCSessionDescription=function(lt){return lt}),ht.version<15025)){var dt=Object.getOwnPropertyDescriptor(ot.MediaStreamTrack.prototype,"enabled");Object.defineProperty(ot.MediaStreamTrack.prototype,"enabled",{set:function(lt){dt.set.call(this,lt);var mt=new Event("enabled");mt.enabled=lt,this.dispatchEvent(mt)}})}!ot.RTCRtpSender||"dtmf"in ot.RTCRtpSender.prototype||Object.defineProperty(ot.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new ot.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),ot.RTCDtmfSender&&!ot.RTCDTMFSender&&(ot.RTCDTMFSender=ot.RTCDtmfSender);var pt=(0,nt.default)(ot,ht.version);ot.RTCPeerConnection=function(lt){return lt&&lt.iceServers&&(lt.iceServers=(0,et.filterIceServers)(lt.iceServers,ht.version),s.log("ICE servers after filtering:",lt.iceServers)),new pt(lt)},ot.RTCPeerConnection.prototype=pt.prototype},gt.shimReplaceTrack=function(ot){!ot.RTCRtpSender||"replaceTrack"in ot.RTCRtpSender.prototype||(ot.RTCRtpSender.prototype.replaceTrack=ot.RTCRtpSender.prototype.setTrack)};var s=function(ot){if(ot&&ot.__esModule)return ot;var ht={};if(ot!=null)for(var dt in ot)Object.prototype.hasOwnProperty.call(ot,dt)&&(ht[dt]=ot[dt]);return ht.default=ot,ht}(tt("../utils")),et=tt("./filtericeservers"),nt=function(ot){return ot&&ot.__esModule?ot:{default:ot}}(tt("rtcpeerconnection-shim"))},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.filterIceServers=function(at,s){var et=!1;return(at=JSON.parse(JSON.stringify(at))).filter(function(nt){if(nt&&(nt.urls||nt.url)){var ot=nt.urls||nt.url;nt.url&&!nt.urls&&rt.deprecated("RTCIceServer.url","RTCIceServer.urls");var ht=typeof ot=="string";return ht&&(ot=[ot]),ot=ot.filter(function(dt){if(dt.indexOf("stun:")===0)return!1;var pt=dt.startsWith("turn")&&!dt.startsWith("turn:[")&&dt.includes("transport=udp");return pt&&!et?(et=!0,!0):pt&&!et}),delete nt.url,nt.urls=ht?ot[0]:ot,!!ot.length}})};var rt=function(at){if(at&&at.__esModule)return at;var s={};if(at!=null)for(var et in at)Object.prototype.hasOwnProperty.call(at,et)&&(s[et]=at[et]);return s.default=at,s}(tt("../utils"))},{"../utils":15}],9:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt){"getDisplayMedia"in rt.navigator&&rt.navigator.mediaDevices&&(rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||(rt.navigator.mediaDevices.getDisplayMedia=rt.navigator.getDisplayMedia.bind(rt.navigator)))}},{}],10:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetUserMedia=function(rt){var at=rt&&rt.navigator,s=function(nt){return{name:{PermissionDeniedError:"NotAllowedError"}[nt.name]||nt.name,message:nt.message,constraint:nt.constraint,toString:function(){return this.name}}},et=at.mediaDevices.getUserMedia.bind(at.mediaDevices);at.mediaDevices.getUserMedia=function(nt){return et(nt).catch(function(ot){return Promise.reject(s(ot))})}}},{}],11:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},at=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return at.shimGetUserMedia}});var s=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}}),gt.shimOnTrack=function(nt){(nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCTrackEvent&&"receiver"in nt.RTCTrackEvent.prototype&&!("transceiver"in nt.RTCTrackEvent.prototype)&&Object.defineProperty(nt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},gt.shimPeerConnection=function(nt){var ot=et.detectBrowser(nt);if((nt===void 0?"undefined":rt(nt))==="object"&&(nt.RTCPeerConnection||nt.mozRTCPeerConnection)){!nt.RTCPeerConnection&&nt.mozRTCPeerConnection&&(nt.RTCPeerConnection=nt.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(lt){var mt=nt.RTCPeerConnection.prototype[lt];nt.RTCPeerConnection.prototype[lt]=function(){return arguments[0]=new(lt==="addIceCandidate"?nt.RTCIceCandidate:nt.RTCSessionDescription)(arguments[0]),mt.apply(this,arguments)}});var ht=nt.RTCPeerConnection.prototype.addIceCandidate;nt.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ht.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var dt={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},pt=nt.RTCPeerConnection.prototype.getStats;nt.RTCPeerConnection.prototype.getStats=function(lt,mt,st){return pt.apply(this,[lt||null]).then(function(ut){if(ot.version<53&&!mt)try{ut.forEach(function(ft){ft.type=dt[ft.type]||ft.type})}catch(ft){if(ft.name!=="TypeError")throw ft;ut.forEach(function(yt,vt){ut.set(vt,Object.assign({},yt,{type:dt[yt.type]||yt.type}))})}return ut}).then(mt,st)}}},gt.shimSenderGetStats=function(nt){if((nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCPeerConnection&&nt.RTCRtpSender&&!(nt.RTCRtpSender&&"getStats"in nt.RTCRtpSender.prototype)){var ot=nt.RTCPeerConnection.prototype.getSenders;ot&&(nt.RTCPeerConnection.prototype.getSenders=function(){var dt=this,pt=ot.apply(this,[]);return pt.forEach(function(lt){return lt._pc=dt}),pt});var ht=nt.RTCPeerConnection.prototype.addTrack;ht&&(nt.RTCPeerConnection.prototype.addTrack=function(){var dt=ht.apply(this,arguments);return dt._pc=this,dt}),nt.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},gt.shimReceiverGetStats=function(nt){if((nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCPeerConnection&&nt.RTCRtpSender&&!(nt.RTCRtpSender&&"getStats"in nt.RTCRtpReceiver.prototype)){var ot=nt.RTCPeerConnection.prototype.getReceivers;ot&&(nt.RTCPeerConnection.prototype.getReceivers=function(){var ht=this,dt=ot.apply(this,[]);return dt.forEach(function(pt){return pt._pc=ht}),dt}),et.wrapPeerConnectionEvent(nt,"track",function(ht){return ht.receiver._pc=ht.srcElement,ht}),nt.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},gt.shimRemoveStream=function(nt){!nt.RTCPeerConnection||"removeStream"in nt.RTCPeerConnection.prototype||(nt.RTCPeerConnection.prototype.removeStream=function(ot){var ht=this;et.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(dt){dt.track&&ot.getTracks().includes(dt.track)&&ht.removeTrack(dt)})})},gt.shimRTCDataChannel=function(nt){nt.DataChannel&&!nt.RTCDataChannel&&(nt.RTCDataChannel=nt.DataChannel)};var et=function(nt){if(nt&&nt.__esModule)return nt;var ot={};if(nt!=null)for(var ht in nt)Object.prototype.hasOwnProperty.call(nt,ht)&&(ot[ht]=nt[ht]);return ot.default=nt,ot}(tt("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt,at){rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||rt.navigator.mediaDevices&&(rt.navigator.mediaDevices.getDisplayMedia=function(s){if(!s||!s.video){var et=new DOMException("getDisplayMedia without video constraints is undefined");return et.name="NotFoundError",et.code=8,Promise.reject(et)}return s.video===!0?s.video={mediaSource:at}:s.video.mediaSource=at,rt.navigator.mediaDevices.getUserMedia(s)})}},{}],13:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};gt.shimGetUserMedia=function(s){var et=at.detectBrowser(s),nt=s&&s.navigator,ot=s&&s.MediaStreamTrack;if(nt.getUserMedia=function(mt,st,ut){at.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),nt.mediaDevices.getUserMedia(mt).then(st,ut)},!(et.version>55&&"autoGainControl"in nt.mediaDevices.getSupportedConstraints())){var ht=function(mt,st,ut){st in mt&&!(ut in mt)&&(mt[ut]=mt[st],delete mt[st])},dt=nt.mediaDevices.getUserMedia.bind(nt.mediaDevices);if(nt.mediaDevices.getUserMedia=function(mt){return(mt===void 0?"undefined":rt(mt))==="object"&&rt(mt.audio)==="object"&&(mt=JSON.parse(JSON.stringify(mt)),ht(mt.audio,"autoGainControl","mozAutoGainControl"),ht(mt.audio,"noiseSuppression","mozNoiseSuppression")),dt(mt)},ot&&ot.prototype.getSettings){var pt=ot.prototype.getSettings;ot.prototype.getSettings=function(){var mt=pt.apply(this,arguments);return ht(mt,"mozAutoGainControl","autoGainControl"),ht(mt,"mozNoiseSuppression","noiseSuppression"),mt}}if(ot&&ot.prototype.applyConstraints){var lt=ot.prototype.applyConstraints;ot.prototype.applyConstraints=function(mt){return this.kind==="audio"&&(mt===void 0?"undefined":rt(mt))==="object"&&(mt=JSON.parse(JSON.stringify(mt)),ht(mt,"autoGainControl","mozAutoGainControl"),ht(mt,"noiseSuppression","mozNoiseSuppression")),lt.apply(this,[mt])}}}};var at=function(s){if(s&&s.__esModule)return s;var et={};if(s!=null)for(var nt in s)Object.prototype.hasOwnProperty.call(s,nt)&&(et[nt]=s[nt]);return et.default=s,et}(tt("../utils"))},{"../utils":15}],14:[function(tt,ct,gt){function rt(et){return et&&et.video!==void 0?Object.assign({},et,{video:s.compactObject(et.video)}):et}Object.defineProperty(gt,"__esModule",{value:!0});var at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimLocalStreamsAPI=function(et){if((et===void 0?"undefined":at(et))==="object"&&et.RTCPeerConnection){if("getLocalStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in et.RTCPeerConnection.prototype)){var nt=et.RTCPeerConnection.prototype.addTrack;et.RTCPeerConnection.prototype.addStream=function(ot){var ht=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(ot)||this._localStreams.push(ot),ot.getTracks().forEach(function(dt){return nt.call(ht,dt,ot)})},et.RTCPeerConnection.prototype.addTrack=function(ot,ht){return ht&&(this._localStreams?this._localStreams.includes(ht)||this._localStreams.push(ht):this._localStreams=[ht]),nt.call(this,ot,ht)}}"removeStream"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.removeStream=function(ot){var ht=this;this._localStreams||(this._localStreams=[]);var dt=this._localStreams.indexOf(ot);if(dt!==-1){this._localStreams.splice(dt,1);var pt=ot.getTracks();this.getSenders().forEach(function(lt){pt.includes(lt.track)&&ht.removeTrack(lt)})}})}},gt.shimRemoteStreamsAPI=function(et){if((et===void 0?"undefined":at(et))==="object"&&et.RTCPeerConnection&&("getRemoteStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in et.RTCPeerConnection.prototype))){Object.defineProperty(et.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(ot){var ht=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=ot),this.addEventListener("track",this._onaddstreampoly=function(dt){dt.streams.forEach(function(pt){if(ht._remoteStreams||(ht._remoteStreams=[]),!ht._remoteStreams.includes(pt)){ht._remoteStreams.push(pt);var lt=new Event("addstream");lt.stream=pt,ht.dispatchEvent(lt)}})})}});var nt=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){var ot=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(ht){ht.streams.forEach(function(dt){if(ot._remoteStreams||(ot._remoteStreams=[]),!(ot._remoteStreams.indexOf(dt)>=0)){ot._remoteStreams.push(dt);var pt=new Event("addstream");pt.stream=dt,ot.dispatchEvent(pt)}})}),nt.apply(ot,arguments)}}},gt.shimCallbacksAPI=function(et){if((et===void 0?"undefined":at(et))==="object"&&et.RTCPeerConnection){var nt=et.RTCPeerConnection.prototype,ot=nt.createOffer,ht=nt.createAnswer,dt=nt.setLocalDescription,pt=nt.setRemoteDescription,lt=nt.addIceCandidate;nt.createOffer=function(st,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],yt=ot.apply(this,[ft]);return ut?(yt.then(st,ut),Promise.resolve()):yt},nt.createAnswer=function(st,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],yt=ht.apply(this,[ft]);return ut?(yt.then(st,ut),Promise.resolve()):yt};var mt=function(st,ut,ft){var yt=dt.apply(this,[st]);return ft?(yt.then(ut,ft),Promise.resolve()):yt};nt.setLocalDescription=mt,mt=function(st,ut,ft){var yt=pt.apply(this,[st]);return ft?(yt.then(ut,ft),Promise.resolve()):yt},nt.setRemoteDescription=mt,mt=function(st,ut,ft){var yt=lt.apply(this,[st]);return ft?(yt.then(ut,ft),Promise.resolve()):yt},nt.addIceCandidate=mt}},gt.shimGetUserMedia=function(et){var nt=et&&et.navigator;if(nt.mediaDevices&&nt.mediaDevices.getUserMedia){var ot=nt.mediaDevices,ht=ot.getUserMedia.bind(ot);nt.mediaDevices.getUserMedia=function(dt){return ht(rt(dt))}}!nt.getUserMedia&&nt.mediaDevices&&nt.mediaDevices.getUserMedia&&(nt.getUserMedia=(function(dt,pt,lt){nt.mediaDevices.getUserMedia(dt).then(pt,lt)}).bind(nt))},gt.shimConstraints=rt,gt.shimRTCIceServerUrls=function(et){var nt=et.RTCPeerConnection;et.RTCPeerConnection=function(ot,ht){if(ot&&ot.iceServers){for(var dt=[],pt=0;pt<ot.iceServers.length;pt++){var lt=ot.iceServers[pt];!lt.hasOwnProperty("urls")&&lt.hasOwnProperty("url")?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),(lt=JSON.parse(JSON.stringify(lt))).urls=lt.url,delete lt.url,dt.push(lt)):dt.push(ot.iceServers[pt])}ot.iceServers=dt}return new nt(ot,ht)},et.RTCPeerConnection.prototype=nt.prototype,"generateCertificate"in et.RTCPeerConnection&&Object.defineProperty(et.RTCPeerConnection,"generateCertificate",{get:function(){return nt.generateCertificate}})},gt.shimTrackEventTransceiver=function(et){(et===void 0?"undefined":at(et))==="object"&&et.RTCPeerConnection&&"receiver"in et.RTCTrackEvent.prototype&&!et.RTCTransceiver&&Object.defineProperty(et.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},gt.shimCreateOfferLegacy=function(et){var nt=et.RTCPeerConnection.prototype.createOffer;et.RTCPeerConnection.prototype.createOffer=function(ot){if(ot){ot.offerToReceiveAudio!==void 0&&(ot.offerToReceiveAudio=!!ot.offerToReceiveAudio);var ht=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="audio"});ot.offerToReceiveAudio===!1&&ht?ht.direction==="sendrecv"?ht.setDirection?ht.setDirection("sendonly"):ht.direction="sendonly":ht.direction==="recvonly"&&(ht.setDirection?ht.setDirection("inactive"):ht.direction="inactive"):ot.offerToReceiveAudio!==!0||ht||this.addTransceiver("audio"),ot.offerToReceiveVideo!==void 0&&(ot.offerToReceiveVideo=!!ot.offerToReceiveVideo);var dt=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="video"});ot.offerToReceiveVideo===!1&&dt?dt.direction==="sendrecv"?dt.setDirection?dt.setDirection("sendonly"):dt.direction="sendonly":dt.direction==="recvonly"&&(dt.setDirection?dt.setDirection("inactive"):dt.direction="inactive"):ot.offerToReceiveVideo!==!0||dt||this.addTransceiver("video")}return nt.apply(this,arguments)}};var s=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(nt[ot]=et[ot]);return nt.default=et,nt}(tt("../utils"))},{"../utils":15}],15:[function(tt,ct,gt){function rt(dt,pt,lt){return pt in dt?Object.defineProperty(dt,pt,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[pt]=lt,dt}function at(dt,pt,lt){var mt=dt.match(pt);return mt&&mt.length>=lt&&parseInt(mt[lt],10)}function s(dt){return(dt===void 0?"undefined":nt(dt))!=="object"?dt:Object.keys(dt).reduce(function(pt,lt){var mt=nt(dt[lt])==="object",st=mt?s(dt[lt]):dt[lt],ut=mt&&!Object.keys(st).length;return st===void 0||ut?pt:Object.assign(pt,rt({},lt,st))},{})}function et(dt,pt,lt){pt&&!lt.has(pt.id)&&(lt.set(pt.id,pt),Object.keys(pt).forEach(function(mt){mt.endsWith("Id")?et(dt,dt.get(pt[mt]),lt):mt.endsWith("Ids")&&pt[mt].forEach(function(st){et(dt,dt.get(st),lt)})}))}Object.defineProperty(gt,"__esModule",{value:!0});var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dt){return typeof dt}:function(dt){return dt&&typeof Symbol=="function"&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt};gt.extractVersion=at,gt.wrapPeerConnectionEvent=function(dt,pt,lt){if(dt.RTCPeerConnection){var mt=dt.RTCPeerConnection.prototype,st=mt.addEventListener;mt.addEventListener=function(ft,yt){if(ft!==pt)return st.apply(this,arguments);var vt=function(St){var xt=lt(St);xt&&yt(xt)};return this._eventMap=this._eventMap||{},this._eventMap[yt]=vt,st.apply(this,[ft,vt])};var ut=mt.removeEventListener;mt.removeEventListener=function(ft,yt){if(ft!==pt||!this._eventMap||!this._eventMap[yt])return ut.apply(this,arguments);var vt=this._eventMap[yt];return delete this._eventMap[yt],ut.apply(this,[ft,vt])},Object.defineProperty(mt,"on"+pt,{get:function(){return this["_on"+pt]},set:function(ft){this["_on"+pt]&&(this.removeEventListener(pt,this["_on"+pt]),delete this["_on"+pt]),ft&&this.addEventListener(pt,this["_on"+pt]=ft)},enumerable:!0,configurable:!0})}},gt.disableLog=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":nt(dt))+". Please use a boolean."):(ot=dt,dt?"adapter.js logging disabled":"adapter.js logging enabled")},gt.disableWarnings=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":nt(dt))+". Please use a boolean."):(ht=!dt,"adapter.js deprecation warnings "+(dt?"disabled":"enabled"))},gt.log=function(){if((typeof window>"u"?"undefined":nt(window))==="object"){if(ot)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},gt.deprecated=function(dt,pt){ht&&console.warn(dt+" is deprecated, please use "+pt+" instead.")},gt.detectBrowser=function(dt){var pt=dt.navigator,lt={browser:null,version:null};if(dt===void 0||!dt.navigator)return lt.browser="Not a browser.",lt;if(pt.mozGetUserMedia)lt.browser="firefox",lt.version=at(pt.userAgent,/Firefox\/(\d+)\./,1);else if(pt.webkitGetUserMedia||dt.isSecureContext===!1&&dt.webkitRTCPeerConnection&&!dt.RTCIceGatherer)lt.browser="chrome",lt.version=at(pt.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(pt.mediaDevices&&pt.userAgent.match(/Edge\/(\d+).(\d+)$/))lt.browser="edge",lt.version=at(pt.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!dt.RTCPeerConnection||!pt.userAgent.match(/AppleWebKit\/(\d+)\./))return lt.browser="Not a supported browser.",lt;lt.browser="safari",lt.version=at(pt.userAgent,/AppleWebKit\/(\d+)\./,1)}return lt},gt.compactObject=s,gt.walkStats=et,gt.filterStats=function(dt,pt,lt){var mt=lt?"outbound-rtp":"inbound-rtp",st=new Map;if(pt===null)return st;var ut=[];return dt.forEach(function(ft){ft.type==="track"&&ft.trackIdentifier===pt.id&&ut.push(ft)}),ut.forEach(function(ft){dt.forEach(function(yt){yt.type===mt&&yt.trackId===ft.id&&et(dt,yt,st)})}),st};var ot=!0,ht=!0},{}],16:[function(tt,ct,gt){function rt(pt){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[pt.type]||pt.type}function at(pt,lt,mt,st,ut){var ft=dt.writeRtpDescription(pt.kind,lt);if(ft+=dt.writeIceParameters(pt.iceGatherer.getLocalParameters()),ft+=dt.writeDtlsParameters(pt.dtlsTransport.getLocalParameters(),mt==="offer"?"actpass":ut||"active"),ft+="a=mid:"+pt.mid+`\r
`,pt.rtpSender&&pt.rtpReceiver?ft+=`a=sendrecv\r
`:pt.rtpSender?ft+=`a=sendonly\r
`:pt.rtpReceiver?ft+=`a=recvonly\r
`:ft+=`a=inactive\r
`,pt.rtpSender){var yt=pt.rtpSender._initialTrackId||pt.rtpSender.track.id;pt.rtpSender._initialTrackId=yt;var vt="msid:"+(st?st.id:"-")+" "+yt+`\r
`;ft+="a="+vt,ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" "+vt,pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" "+vt,ft+="a=ssrc-group:FID "+pt.sendEncodingParameters[0].ssrc+" "+pt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" cname:"+dt.localCName+`\r
`,pt.rtpSender&&pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" cname:"+dt.localCName+`\r
`),ft}function s(pt,lt){var mt=!1;return(pt=JSON.parse(JSON.stringify(pt))).filter(function(st){if(st&&(st.urls||st.url)){var ut=st.urls||st.url;st.url&&!st.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var ft=typeof ut=="string";return ft&&(ut=[ut]),ut=ut.filter(function(yt){return yt.indexOf("turn:")===0&&yt.indexOf("transport=udp")!==-1&&yt.indexOf("turn:[")===-1&&!mt?(mt=!0,!0):yt.indexOf("stun:")===0&&lt>=14393&&yt.indexOf("?transport=udp")===-1}),delete st.url,st.urls=ft?ut[0]:ut,!!ut.length}})}function et(pt,lt){var mt={codecs:[],headerExtensions:[],fecMechanisms:[]},st=function(ft,yt){ft=parseInt(ft,10);for(var vt=0;vt<yt.length;vt++)if(yt[vt].payloadType===ft||yt[vt].preferredPayloadType===ft)return yt[vt]},ut=function(ft,yt,vt,St){var xt=st(ft.parameters.apt,vt),Ut=st(yt.parameters.apt,St);return xt&&Ut&&xt.name.toLowerCase()===Ut.name.toLowerCase()};return pt.codecs.forEach(function(ft){for(var yt=0;yt<lt.codecs.length;yt++){var vt=lt.codecs[yt];if(ft.name.toLowerCase()===vt.name.toLowerCase()&&ft.clockRate===vt.clockRate){if(ft.name.toLowerCase()==="rtx"&&ft.parameters&&vt.parameters.apt&&!ut(ft,vt,pt.codecs,lt.codecs))continue;(vt=JSON.parse(JSON.stringify(vt))).numChannels=Math.min(ft.numChannels,vt.numChannels),mt.codecs.push(vt),vt.rtcpFeedback=vt.rtcpFeedback.filter(function(St){for(var xt=0;xt<ft.rtcpFeedback.length;xt++)if(ft.rtcpFeedback[xt].type===St.type&&ft.rtcpFeedback[xt].parameter===St.parameter)return!0;return!1});break}}}),pt.headerExtensions.forEach(function(ft){for(var yt=0;yt<lt.headerExtensions.length;yt++){var vt=lt.headerExtensions[yt];if(ft.uri===vt.uri){mt.headerExtensions.push(vt);break}}}),mt}function nt(pt,lt,mt){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[lt][pt].indexOf(mt)!==-1}function ot(pt,lt){var mt=pt.getRemoteCandidates().find(function(st){return lt.foundation===st.foundation&&lt.ip===st.ip&&lt.port===st.port&&lt.priority===st.priority&&lt.protocol===st.protocol&&lt.type===st.type});return mt||pt.addRemoteCandidate(lt),!mt}function ht(pt,lt){var mt=new Error(lt);return mt.name=pt,mt.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[pt],mt}var dt=tt("sdp");ct.exports=function(pt,lt){function mt(vt,St){St.addTrack(vt),St.dispatchEvent(new pt.MediaStreamTrackEvent("addtrack",{track:vt}))}function st(vt,St){St.removeTrack(vt),St.dispatchEvent(new pt.MediaStreamTrackEvent("removetrack",{track:vt}))}function ut(vt,St,xt,Ut){var Tt=new Event("track");Tt.track=St,Tt.receiver=xt,Tt.transceiver={receiver:xt},Tt.streams=Ut,pt.setTimeout(function(){vt._dispatchEvent("track",Tt)})}var ft=function(vt){var St=this,xt=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(Tt){St[Tt]=xt[Tt].bind(xt)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",vt=JSON.parse(JSON.stringify(vt||{})),this.usingBundle=vt.bundlePolicy==="max-bundle",vt.rtcpMuxPolicy==="negotiate")throw ht("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(vt.rtcpMuxPolicy||(vt.rtcpMuxPolicy="require"),vt.iceTransportPolicy){case"all":case"relay":break;default:vt.iceTransportPolicy="all"}switch(vt.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:vt.bundlePolicy="balanced"}if(vt.iceServers=s(vt.iceServers||[],lt),this._iceGatherers=[],vt.iceCandidatePoolSize)for(var Ut=vt.iceCandidatePoolSize;Ut>0;Ut--)this._iceGatherers.push(new pt.RTCIceGatherer({iceServers:vt.iceServers,gatherPolicy:vt.iceTransportPolicy}));else vt.iceCandidatePoolSize=0;this._config=vt,this.transceivers=[],this._sdpSessionId=dt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(ft.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(ft.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),ft.prototype.onicecandidate=null,ft.prototype.onaddstream=null,ft.prototype.ontrack=null,ft.prototype.onremovestream=null,ft.prototype.onsignalingstatechange=null,ft.prototype.oniceconnectionstatechange=null,ft.prototype.onconnectionstatechange=null,ft.prototype.onicegatheringstatechange=null,ft.prototype.onnegotiationneeded=null,ft.prototype.ondatachannel=null,ft.prototype._dispatchEvent=function(vt,St){this._isClosed||(this.dispatchEvent(St),typeof this["on"+vt]=="function"&&this["on"+vt](St))},ft.prototype._emitGatheringStateChange=function(){var vt=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",vt)},ft.prototype.getConfiguration=function(){return this._config},ft.prototype.getLocalStreams=function(){return this.localStreams},ft.prototype.getRemoteStreams=function(){return this.remoteStreams},ft.prototype._createTransceiver=function(vt,St){var xt=this.transceivers.length>0,Ut={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:vt,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&xt)Ut.iceTransport=this.transceivers[0].iceTransport,Ut.dtlsTransport=this.transceivers[0].dtlsTransport;else{var Tt=this._createIceAndDtlsTransports();Ut.iceTransport=Tt.iceTransport,Ut.dtlsTransport=Tt.dtlsTransport}return St||this.transceivers.push(Ut),Ut},ft.prototype.addTrack=function(vt,St){if(this._isClosed)throw ht("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(Tt){return Tt.track===vt}))throw ht("InvalidAccessError","Track already exists.");for(var xt,Ut=0;Ut<this.transceivers.length;Ut++)this.transceivers[Ut].track||this.transceivers[Ut].kind!==vt.kind||(xt=this.transceivers[Ut]);return xt||(xt=this._createTransceiver(vt.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(St)===-1&&this.localStreams.push(St),xt.track=vt,xt.stream=St,xt.rtpSender=new pt.RTCRtpSender(vt,xt.dtlsTransport),xt.rtpSender},ft.prototype.addStream=function(vt){var St=this;if(lt>=15025)vt.getTracks().forEach(function(Ut){St.addTrack(Ut,vt)});else{var xt=vt.clone();vt.getTracks().forEach(function(Ut,Tt){var kt=xt.getTracks()[Tt];Ut.addEventListener("enabled",function(Dt){kt.enabled=Dt.enabled})}),xt.getTracks().forEach(function(Ut){St.addTrack(Ut,xt)})}},ft.prototype.removeTrack=function(vt){if(this._isClosed)throw ht("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(vt instanceof pt.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var St=this.transceivers.find(function(Ut){return Ut.rtpSender===vt});if(!St)throw ht("InvalidAccessError","Sender was not created by this connection.");var xt=St.stream;St.rtpSender.stop(),St.rtpSender=null,St.track=null,St.stream=null,this.transceivers.map(function(Ut){return Ut.stream}).indexOf(xt)===-1&&this.localStreams.indexOf(xt)>-1&&this.localStreams.splice(this.localStreams.indexOf(xt),1),this._maybeFireNegotiationNeeded()},ft.prototype.removeStream=function(vt){var St=this;vt.getTracks().forEach(function(xt){var Ut=St.getSenders().find(function(Tt){return Tt.track===xt});Ut&&St.removeTrack(Ut)})},ft.prototype.getSenders=function(){return this.transceivers.filter(function(vt){return!!vt.rtpSender}).map(function(vt){return vt.rtpSender})},ft.prototype.getReceivers=function(){return this.transceivers.filter(function(vt){return!!vt.rtpReceiver}).map(function(vt){return vt.rtpReceiver})},ft.prototype._createIceGatherer=function(vt,St){var xt=this;if(St&&vt>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Ut=new pt.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Ut,"state",{value:"new",writable:!0}),this.transceivers[vt].bufferedCandidateEvents=[],this.transceivers[vt].bufferCandidates=function(Tt){var kt=!Tt.candidate||Object.keys(Tt.candidate).length===0;Ut.state=kt?"completed":"gathering",xt.transceivers[vt].bufferedCandidateEvents!==null&&xt.transceivers[vt].bufferedCandidateEvents.push(Tt)},Ut.addEventListener("localcandidate",this.transceivers[vt].bufferCandidates),Ut},ft.prototype._gather=function(vt,St){var xt=this,Ut=this.transceivers[St].iceGatherer;if(!Ut.onlocalcandidate){var Tt=this.transceivers[St].bufferedCandidateEvents;this.transceivers[St].bufferedCandidateEvents=null,Ut.removeEventListener("localcandidate",this.transceivers[St].bufferCandidates),Ut.onlocalcandidate=function(kt){if(!(xt.usingBundle&&St>0)){var Dt=new Event("icecandidate");Dt.candidate={sdpMid:vt,sdpMLineIndex:St};var Vt=kt.candidate,Ot=!Vt||Object.keys(Vt).length===0;if(Ot)Ut.state!=="new"&&Ut.state!=="gathering"||(Ut.state="completed");else{Ut.state==="new"&&(Ut.state="gathering"),Vt.component=1,Vt.ufrag=Ut.getLocalParameters().usernameFragment;var Lt=dt.writeCandidate(Vt);Dt.candidate=Object.assign(Dt.candidate,dt.parseCandidate(Lt)),Dt.candidate.candidate=Lt,Dt.candidate.toJSON=function(){return{candidate:Dt.candidate.candidate,sdpMid:Dt.candidate.sdpMid,sdpMLineIndex:Dt.candidate.sdpMLineIndex,usernameFragment:Dt.candidate.usernameFragment}}}var Gt=dt.getMediaSections(xt._localDescription.sdp);Gt[Dt.candidate.sdpMLineIndex]+=Ot?`a=end-of-candidates\r
`:"a="+Dt.candidate.candidate+`\r
`,xt._localDescription.sdp=dt.getDescription(xt._localDescription.sdp)+Gt.join("");var tn=xt.transceivers.every(function(zt){return zt.iceGatherer&&zt.iceGatherer.state==="completed"});xt.iceGatheringState!=="gathering"&&(xt.iceGatheringState="gathering",xt._emitGatheringStateChange()),Ot||xt._dispatchEvent("icecandidate",Dt),tn&&(xt._dispatchEvent("icecandidate",new Event("icecandidate")),xt.iceGatheringState="complete",xt._emitGatheringStateChange())}},pt.setTimeout(function(){Tt.forEach(function(kt){Ut.onlocalcandidate(kt)})},0)}},ft.prototype._createIceAndDtlsTransports=function(){var vt=this,St=new pt.RTCIceTransport(null);St.onicestatechange=function(){vt._updateIceConnectionState(),vt._updateConnectionState()};var xt=new pt.RTCDtlsTransport(St);return xt.ondtlsstatechange=function(){vt._updateConnectionState()},xt.onerror=function(){Object.defineProperty(xt,"state",{value:"failed",writable:!0}),vt._updateConnectionState()},{iceTransport:St,dtlsTransport:xt}},ft.prototype._disposeIceAndDtlsTransports=function(vt){var St=this.transceivers[vt].iceGatherer;St&&(delete St.onlocalcandidate,delete this.transceivers[vt].iceGatherer);var xt=this.transceivers[vt].iceTransport;xt&&(delete xt.onicestatechange,delete this.transceivers[vt].iceTransport);var Ut=this.transceivers[vt].dtlsTransport;Ut&&(delete Ut.ondtlsstatechange,delete Ut.onerror,delete this.transceivers[vt].dtlsTransport)},ft.prototype._transceive=function(vt,St,xt){var Ut=et(vt.localCapabilities,vt.remoteCapabilities);St&&vt.rtpSender&&(Ut.encodings=vt.sendEncodingParameters,Ut.rtcp={cname:dt.localCName,compound:vt.rtcpParameters.compound},vt.recvEncodingParameters.length&&(Ut.rtcp.ssrc=vt.recvEncodingParameters[0].ssrc),vt.rtpSender.send(Ut)),xt&&vt.rtpReceiver&&Ut.codecs.length>0&&(vt.kind==="video"&&vt.recvEncodingParameters&&lt<15019&&vt.recvEncodingParameters.forEach(function(Tt){delete Tt.rtx}),vt.recvEncodingParameters.length?Ut.encodings=vt.recvEncodingParameters:Ut.encodings=[{}],Ut.rtcp={compound:vt.rtcpParameters.compound},vt.rtcpParameters.cname&&(Ut.rtcp.cname=vt.rtcpParameters.cname),vt.sendEncodingParameters.length&&(Ut.rtcp.ssrc=vt.sendEncodingParameters[0].ssrc),vt.rtpReceiver.receive(Ut))},ft.prototype.setLocalDescription=function(vt){var St=this;if(["offer","answer"].indexOf(vt.type)===-1)return Promise.reject(ht("TypeError",'Unsupported type "'+vt.type+'"'));if(!nt("setLocalDescription",vt.type,St.signalingState)||St._isClosed)return Promise.reject(ht("InvalidStateError","Can not set local "+vt.type+" in state "+St.signalingState));var xt,Ut;if(vt.type==="offer")xt=dt.splitSections(vt.sdp),Ut=xt.shift(),xt.forEach(function(kt,Dt){var Vt=dt.parseRtpParameters(kt);St.transceivers[Dt].localCapabilities=Vt}),St.transceivers.forEach(function(kt,Dt){St._gather(kt.mid,Dt)});else if(vt.type==="answer"){xt=dt.splitSections(St._remoteDescription.sdp),Ut=xt.shift();var Tt=dt.matchPrefix(Ut,"a=ice-lite").length>0;xt.forEach(function(kt,Dt){var Vt=St.transceivers[Dt],Ot=Vt.iceGatherer,Lt=Vt.iceTransport,Gt=Vt.dtlsTransport,tn=Vt.localCapabilities,zt=Vt.remoteCapabilities;if(!(dt.isRejected(kt)&&dt.matchPrefix(kt,"a=bundle-only").length===0)&&!Vt.rejected){var cn=dt.getIceParameters(kt,Ut),un=dt.getDtlsParameters(kt,Ut);Tt&&(un.role="server"),St.usingBundle&&Dt!==0||(St._gather(Vt.mid,Dt),Lt.state==="new"&&Lt.start(Ot,cn,Tt?"controlling":"controlled"),Gt.state==="new"&&Gt.start(un));var fn=et(tn,zt);St._transceive(Vt,fn.codecs.length>0,!1)}})}return St._localDescription={type:vt.type,sdp:vt.sdp},vt.type==="offer"?St._updateSignalingState("have-local-offer"):St._updateSignalingState("stable"),Promise.resolve()},ft.prototype.setRemoteDescription=function(vt){var St=this;if(["offer","answer"].indexOf(vt.type)===-1)return Promise.reject(ht("TypeError",'Unsupported type "'+vt.type+'"'));if(!nt("setRemoteDescription",vt.type,St.signalingState)||St._isClosed)return Promise.reject(ht("InvalidStateError","Can not set remote "+vt.type+" in state "+St.signalingState));var xt={};St.remoteStreams.forEach(function(Lt){xt[Lt.id]=Lt});var Ut=[],Tt=dt.splitSections(vt.sdp),kt=Tt.shift(),Dt=dt.matchPrefix(kt,"a=ice-lite").length>0,Vt=dt.matchPrefix(kt,"a=group:BUNDLE ").length>0;St.usingBundle=Vt;var Ot=dt.matchPrefix(kt,"a=ice-options:")[0];return St.canTrickleIceCandidates=!!Ot&&Ot.substr(14).split(" ").indexOf("trickle")>=0,Tt.forEach(function(Lt,Gt){var tn=dt.splitLines(Lt),zt=dt.getKind(Lt),cn=dt.isRejected(Lt)&&dt.matchPrefix(Lt,"a=bundle-only").length===0,un=tn[0].substr(2).split(" ")[2],fn=dt.getDirection(Lt,kt),vn=dt.parseMsid(Lt),Ft=dt.getMid(Lt)||dt.generateIdentifier();if(cn||zt==="application"&&(un==="DTLS/SCTP"||un==="UDP/DTLS/SCTP"))St.transceivers[Gt]={mid:Ft,kind:zt,protocol:un,rejected:!0};else{!cn&&St.transceivers[Gt]&&St.transceivers[Gt].rejected&&(St.transceivers[Gt]=St._createTransceiver(zt,!0));var pn,gn,Tn,In,kn,Nn,hn,Sn,Rn,wn,xn,Xn=dt.parseRtpParameters(Lt);cn||(wn=dt.getIceParameters(Lt,kt),(xn=dt.getDtlsParameters(Lt,kt)).role="client"),hn=dt.parseRtpEncodingParameters(Lt);var Ln=dt.parseRtcpParameters(Lt),Un=dt.matchPrefix(Lt,"a=end-of-candidates",kt).length>0,rr=dt.matchPrefix(Lt,"a=candidate:").map(function(jn){return dt.parseCandidate(jn)}).filter(function(jn){return jn.component===1});if((vt.type==="offer"||vt.type==="answer")&&!cn&&Vt&&Gt>0&&St.transceivers[Gt]&&(St._disposeIceAndDtlsTransports(Gt),St.transceivers[Gt].iceGatherer=St.transceivers[0].iceGatherer,St.transceivers[Gt].iceTransport=St.transceivers[0].iceTransport,St.transceivers[Gt].dtlsTransport=St.transceivers[0].dtlsTransport,St.transceivers[Gt].rtpSender&&St.transceivers[Gt].rtpSender.setTransport(St.transceivers[0].dtlsTransport),St.transceivers[Gt].rtpReceiver&&St.transceivers[Gt].rtpReceiver.setTransport(St.transceivers[0].dtlsTransport)),vt.type!=="offer"||cn)vt.type!=="answer"||cn||(gn=(pn=St.transceivers[Gt]).iceGatherer,Tn=pn.iceTransport,In=pn.dtlsTransport,kn=pn.rtpReceiver,Nn=pn.sendEncodingParameters,Sn=pn.localCapabilities,St.transceivers[Gt].recvEncodingParameters=hn,St.transceivers[Gt].remoteCapabilities=Xn,St.transceivers[Gt].rtcpParameters=Ln,rr.length&&Tn.state==="new"&&(!Dt&&!Un||Vt&&Gt!==0?rr.forEach(function(jn){ot(pn.iceTransport,jn)}):Tn.setRemoteCandidates(rr)),Vt&&Gt!==0||(Tn.state==="new"&&Tn.start(gn,wn,"controlling"),In.state==="new"&&In.start(xn)),!et(pn.localCapabilities,pn.remoteCapabilities).codecs.filter(function(jn){return jn.name.toLowerCase()==="rtx"}).length&&pn.sendEncodingParameters[0].rtx&&delete pn.sendEncodingParameters[0].rtx,St._transceive(pn,fn==="sendrecv"||fn==="recvonly",fn==="sendrecv"||fn==="sendonly"),!kn||fn!=="sendrecv"&&fn!=="sendonly"?delete pn.rtpReceiver:(Rn=kn.track,vn?(xt[vn.stream]||(xt[vn.stream]=new pt.MediaStream),mt(Rn,xt[vn.stream]),Ut.push([Rn,kn,xt[vn.stream]])):(xt.default||(xt.default=new pt.MediaStream),mt(Rn,xt.default),Ut.push([Rn,kn,xt.default]))));else{(pn=St.transceivers[Gt]||St._createTransceiver(zt)).mid=Ft,pn.iceGatherer||(pn.iceGatherer=St._createIceGatherer(Gt,Vt)),rr.length&&pn.iceTransport.state==="new"&&(!Un||Vt&&Gt!==0?rr.forEach(function(jn){ot(pn.iceTransport,jn)}):pn.iceTransport.setRemoteCandidates(rr)),Sn=pt.RTCRtpReceiver.getCapabilities(zt),lt<15019&&(Sn.codecs=Sn.codecs.filter(function(jn){return jn.name!=="rtx"})),Nn=pn.sendEncodingParameters||[{ssrc:1001*(2*Gt+2)}];var tr=!1;if(fn==="sendrecv"||fn==="sendonly"){if(tr=!pn.rtpReceiver,kn=pn.rtpReceiver||new pt.RTCRtpReceiver(pn.dtlsTransport,zt),tr){var Qn;Rn=kn.track,vn&&vn.stream==="-"||(vn?(xt[vn.stream]||(xt[vn.stream]=new pt.MediaStream,Object.defineProperty(xt[vn.stream],"id",{get:function(){return vn.stream}})),Object.defineProperty(Rn,"id",{get:function(){return vn.track}}),Qn=xt[vn.stream]):(xt.default||(xt.default=new pt.MediaStream),Qn=xt.default)),Qn&&(mt(Rn,Qn),pn.associatedRemoteMediaStreams.push(Qn)),Ut.push([Rn,kn,Qn])}}else pn.rtpReceiver&&pn.rtpReceiver.track&&(pn.associatedRemoteMediaStreams.forEach(function(jn){var Bn=jn.getTracks().find(function(an){return an.id===pn.rtpReceiver.track.id});Bn&&st(Bn,jn)}),pn.associatedRemoteMediaStreams=[]);pn.localCapabilities=Sn,pn.remoteCapabilities=Xn,pn.rtpReceiver=kn,pn.rtcpParameters=Ln,pn.sendEncodingParameters=Nn,pn.recvEncodingParameters=hn,St._transceive(St.transceivers[Gt],!1,tr)}}}),St._dtlsRole===void 0&&(St._dtlsRole=vt.type==="offer"?"active":"passive"),St._remoteDescription={type:vt.type,sdp:vt.sdp},vt.type==="offer"?St._updateSignalingState("have-remote-offer"):St._updateSignalingState("stable"),Object.keys(xt).forEach(function(Lt){var Gt=xt[Lt];if(Gt.getTracks().length){if(St.remoteStreams.indexOf(Gt)===-1){St.remoteStreams.push(Gt);var tn=new Event("addstream");tn.stream=Gt,pt.setTimeout(function(){St._dispatchEvent("addstream",tn)})}Ut.forEach(function(zt){var cn=zt[0],un=zt[1];Gt.id===zt[2].id&&ut(St,cn,un,[Gt])})}}),Ut.forEach(function(Lt){Lt[2]||ut(St,Lt[0],Lt[1],[])}),pt.setTimeout(function(){St&&St.transceivers&&St.transceivers.forEach(function(Lt){Lt.iceTransport&&Lt.iceTransport.state==="new"&&Lt.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Lt.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},ft.prototype.close=function(){this.transceivers.forEach(function(vt){vt.iceTransport&&vt.iceTransport.stop(),vt.dtlsTransport&&vt.dtlsTransport.stop(),vt.rtpSender&&vt.rtpSender.stop(),vt.rtpReceiver&&vt.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},ft.prototype._updateSignalingState=function(vt){this.signalingState=vt;var St=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",St)},ft.prototype._maybeFireNegotiationNeeded=function(){var vt=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,pt.setTimeout(function(){if(vt.needNegotiation){vt.needNegotiation=!1;var St=new Event("negotiationneeded");vt._dispatchEvent("negotiationneeded",St)}},0))},ft.prototype._updateIceConnectionState=function(){var vt,St={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Ut){Ut.iceTransport&&!Ut.rejected&&St[Ut.iceTransport.state]++}),vt="new",St.failed>0?vt="failed":St.checking>0?vt="checking":St.disconnected>0?vt="disconnected":St.new>0?vt="new":St.connected>0?vt="connected":St.completed>0&&(vt="completed"),vt!==this.iceConnectionState){this.iceConnectionState=vt;var xt=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",xt)}},ft.prototype._updateConnectionState=function(){var vt,St={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Ut){Ut.iceTransport&&Ut.dtlsTransport&&!Ut.rejected&&(St[Ut.iceTransport.state]++,St[Ut.dtlsTransport.state]++)}),St.connected+=St.completed,vt="new",St.failed>0?vt="failed":St.connecting>0?vt="connecting":St.disconnected>0?vt="disconnected":St.new>0?vt="new":St.connected>0&&(vt="connected"),vt!==this.connectionState){this.connectionState=vt;var xt=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",xt)}},ft.prototype.createOffer=function(){var vt=this;if(vt._isClosed)return Promise.reject(ht("InvalidStateError","Can not call createOffer after close"));var St=vt.transceivers.filter(function(Dt){return Dt.kind==="audio"}).length,xt=vt.transceivers.filter(function(Dt){return Dt.kind==="video"}).length,Ut=arguments[0];if(Ut){if(Ut.mandatory||Ut.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Ut.offerToReceiveAudio!==void 0&&(St=Ut.offerToReceiveAudio===!0?1:Ut.offerToReceiveAudio===!1?0:Ut.offerToReceiveAudio),Ut.offerToReceiveVideo!==void 0&&(xt=Ut.offerToReceiveVideo===!0?1:Ut.offerToReceiveVideo===!1?0:Ut.offerToReceiveVideo)}for(vt.transceivers.forEach(function(Dt){Dt.kind==="audio"?--St<0&&(Dt.wantReceive=!1):Dt.kind==="video"&&--xt<0&&(Dt.wantReceive=!1)});St>0||xt>0;)St>0&&(vt._createTransceiver("audio"),St--),xt>0&&(vt._createTransceiver("video"),xt--);var Tt=dt.writeSessionBoilerplate(vt._sdpSessionId,vt._sdpSessionVersion++);vt.transceivers.forEach(function(Dt,Vt){var Ot=Dt.track,Lt=Dt.kind,Gt=Dt.mid||dt.generateIdentifier();Dt.mid=Gt,Dt.iceGatherer||(Dt.iceGatherer=vt._createIceGatherer(Vt,vt.usingBundle));var tn=pt.RTCRtpSender.getCapabilities(Lt);lt<15019&&(tn.codecs=tn.codecs.filter(function(cn){return cn.name!=="rtx"})),tn.codecs.forEach(function(cn){cn.name==="H264"&&cn.parameters["level-asymmetry-allowed"]===void 0&&(cn.parameters["level-asymmetry-allowed"]="1"),Dt.remoteCapabilities&&Dt.remoteCapabilities.codecs&&Dt.remoteCapabilities.codecs.forEach(function(un){cn.name.toLowerCase()===un.name.toLowerCase()&&cn.clockRate===un.clockRate&&(cn.preferredPayloadType=un.payloadType)})}),tn.headerExtensions.forEach(function(cn){(Dt.remoteCapabilities&&Dt.remoteCapabilities.headerExtensions||[]).forEach(function(un){cn.uri===un.uri&&(cn.id=un.id)})});var zt=Dt.sendEncodingParameters||[{ssrc:1001*(2*Vt+1)}];Ot&&lt>=15019&&Lt==="video"&&!zt[0].rtx&&(zt[0].rtx={ssrc:zt[0].ssrc+1}),Dt.wantReceive&&(Dt.rtpReceiver=new pt.RTCRtpReceiver(Dt.dtlsTransport,Lt)),Dt.localCapabilities=tn,Dt.sendEncodingParameters=zt}),vt._config.bundlePolicy!=="max-compat"&&(Tt+="a=group:BUNDLE "+vt.transceivers.map(function(Dt){return Dt.mid}).join(" ")+`\r
`),Tt+=`a=ice-options:trickle\r
`,vt.transceivers.forEach(function(Dt,Vt){Tt+=at(Dt,Dt.localCapabilities,"offer",Dt.stream,vt._dtlsRole),Tt+=`a=rtcp-rsize\r
`,!Dt.iceGatherer||vt.iceGatheringState==="new"||Vt!==0&&vt.usingBundle||(Dt.iceGatherer.getLocalCandidates().forEach(function(Ot){Ot.component=1,Tt+="a="+dt.writeCandidate(Ot)+`\r
`}),Dt.iceGatherer.state==="completed"&&(Tt+=`a=end-of-candidates\r
`))});var kt=new pt.RTCSessionDescription({type:"offer",sdp:Tt});return Promise.resolve(kt)},ft.prototype.createAnswer=function(){var vt=this;if(vt._isClosed)return Promise.reject(ht("InvalidStateError","Can not call createAnswer after close"));if(vt.signalingState!=="have-remote-offer"&&vt.signalingState!=="have-local-pranswer")return Promise.reject(ht("InvalidStateError","Can not call createAnswer in signalingState "+vt.signalingState));var St=dt.writeSessionBoilerplate(vt._sdpSessionId,vt._sdpSessionVersion++);vt.usingBundle&&(St+="a=group:BUNDLE "+vt.transceivers.map(function(Tt){return Tt.mid}).join(" ")+`\r
`),St+=`a=ice-options:trickle\r
`;var xt=dt.getMediaSections(vt._remoteDescription.sdp).length;vt.transceivers.forEach(function(Tt,kt){if(!(kt+1>xt)){if(Tt.rejected)return Tt.kind==="application"?Tt.protocol==="DTLS/SCTP"?St+=`m=application 0 DTLS/SCTP 5000\r
`:St+="m=application 0 "+Tt.protocol+` webrtc-datachannel\r
`:Tt.kind==="audio"?St+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:Tt.kind==="video"&&(St+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(St+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+Tt.mid+`\r
`);if(Tt.stream){var Dt;Tt.kind==="audio"?Dt=Tt.stream.getAudioTracks()[0]:Tt.kind==="video"&&(Dt=Tt.stream.getVideoTracks()[0]),Dt&&lt>=15019&&Tt.kind==="video"&&!Tt.sendEncodingParameters[0].rtx&&(Tt.sendEncodingParameters[0].rtx={ssrc:Tt.sendEncodingParameters[0].ssrc+1})}var Vt=et(Tt.localCapabilities,Tt.remoteCapabilities);!Vt.codecs.filter(function(Ot){return Ot.name.toLowerCase()==="rtx"}).length&&Tt.sendEncodingParameters[0].rtx&&delete Tt.sendEncodingParameters[0].rtx,St+=at(Tt,Vt,"answer",Tt.stream,vt._dtlsRole),Tt.rtcpParameters&&Tt.rtcpParameters.reducedSize&&(St+=`a=rtcp-rsize\r
`)}});var Ut=new pt.RTCSessionDescription({type:"answer",sdp:St});return Promise.resolve(Ut)},ft.prototype.addIceCandidate=function(vt){var St,xt=this;return vt&&vt.sdpMLineIndex===void 0&&!vt.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(Ut,Tt){if(!xt._remoteDescription)return Tt(ht("InvalidStateError","Can not add ICE candidate without a remote description"));if(vt&&vt.candidate!==""){var kt=vt.sdpMLineIndex;if(vt.sdpMid){for(var Dt=0;Dt<xt.transceivers.length;Dt++)if(xt.transceivers[Dt].mid===vt.sdpMid){kt=Dt;break}}var Vt=xt.transceivers[kt];if(!Vt)return Tt(ht("OperationError","Can not add ICE candidate"));if(Vt.rejected)return Ut();var Ot=Object.keys(vt.candidate).length>0?dt.parseCandidate(vt.candidate):{};if(Ot.protocol==="tcp"&&(Ot.port===0||Ot.port===9)||Ot.component&&Ot.component!==1)return Ut();if((kt===0||kt>0&&Vt.iceTransport!==xt.transceivers[0].iceTransport)&&!ot(Vt.iceTransport,Ot))return Tt(ht("OperationError","Can not add ICE candidate"));var Lt=vt.candidate.trim();Lt.indexOf("a=")===0&&(Lt=Lt.substr(2)),(St=dt.getMediaSections(xt._remoteDescription.sdp))[kt]+="a="+(Ot.type?Lt:"end-of-candidates")+`\r
`,xt._remoteDescription.sdp=dt.getDescription(xt._remoteDescription.sdp)+St.join("")}else for(var Gt=0;Gt<xt.transceivers.length&&(xt.transceivers[Gt].rejected||(xt.transceivers[Gt].iceTransport.addRemoteCandidate({}),St=dt.getMediaSections(xt._remoteDescription.sdp),St[Gt]+=`a=end-of-candidates\r
`,xt._remoteDescription.sdp=dt.getDescription(xt._remoteDescription.sdp)+St.join(""),!xt.usingBundle));Gt++);Ut()})},ft.prototype.getStats=function(vt){if(vt&&vt instanceof pt.MediaStreamTrack){var St=null;if(this.transceivers.forEach(function(Ut){Ut.rtpSender&&Ut.rtpSender.track===vt?St=Ut.rtpSender:Ut.rtpReceiver&&Ut.rtpReceiver.track===vt&&(St=Ut.rtpReceiver)}),!St)throw ht("InvalidAccessError","Invalid selector.");return St.getStats()}var xt=[];return this.transceivers.forEach(function(Ut){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(Tt){Ut[Tt]&&xt.push(Ut[Tt].getStats())})}),Promise.all(xt).then(function(Ut){var Tt=new Map;return Ut.forEach(function(kt){kt.forEach(function(Dt){Tt.set(Dt.id,Dt)})}),Tt})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(vt){var St=pt[vt];if(St&&St.prototype&&St.prototype.getStats){var xt=St.prototype.getStats;St.prototype.getStats=function(){return xt.apply(this).then(function(Ut){var Tt=new Map;return Object.keys(Ut).forEach(function(kt){Ut[kt].type=rt(Ut[kt]),Tt.set(kt,Ut[kt])}),Tt})}}});var yt=["createOffer","createAnswer"];return yt.forEach(function(vt){var St=ft.prototype[vt];ft.prototype[vt]=function(){var xt=arguments;return typeof xt[0]=="function"||typeof xt[1]=="function"?St.apply(this,[arguments[2]]).then(function(Ut){typeof xt[0]=="function"&&xt[0].apply(null,[Ut])},function(Ut){typeof xt[1]=="function"&&xt[1].apply(null,[Ut])}):St.apply(this,arguments)}}),(yt=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(vt){var St=ft.prototype[vt];ft.prototype[vt]=function(){var xt=arguments;return typeof xt[1]=="function"||typeof xt[2]=="function"?St.apply(this,arguments).then(function(){typeof xt[1]=="function"&&xt[1].apply(null)},function(Ut){typeof xt[2]=="function"&&xt[2].apply(null,[Ut])}):St.apply(this,arguments)}}),["getStats"].forEach(function(vt){var St=ft.prototype[vt];ft.prototype[vt]=function(){var xt=arguments;return typeof xt[1]=="function"?St.apply(this,arguments).then(function(){typeof xt[1]=="function"&&xt[1].apply(null)}):St.apply(this,arguments)}}),ft}},{sdp:17}],17:[function(tt,ct,gt){var rt={};rt.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},rt.localCName=rt.generateIdentifier(),rt.splitLines=function(at){return at.trim().split(`
`).map(function(s){return s.trim()})},rt.splitSections=function(at){return at.split(`
m=`).map(function(s,et){return(et>0?"m="+s:s).trim()+`\r
`})},rt.getDescription=function(at){var s=rt.splitSections(at);return s&&s[0]},rt.getMediaSections=function(at){var s=rt.splitSections(at);return s.shift(),s},rt.matchPrefix=function(at,s){return rt.splitLines(at).filter(function(et){return et.indexOf(s)===0})},rt.parseCandidate=function(at){for(var s,et={foundation:(s=at.indexOf("a=candidate:")===0?at.substring(12).split(" "):at.substring(10).split(" "))[0],component:parseInt(s[1],10),protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]},nt=8;nt<s.length;nt+=2)switch(s[nt]){case"raddr":et.relatedAddress=s[nt+1];break;case"rport":et.relatedPort=parseInt(s[nt+1],10);break;case"tcptype":et.tcpType=s[nt+1];break;case"ufrag":et.ufrag=s[nt+1],et.usernameFragment=s[nt+1];break;default:et[s[nt]]=s[nt+1]}return et},rt.writeCandidate=function(at){var s=[];s.push(at.foundation),s.push(at.component),s.push(at.protocol.toUpperCase()),s.push(at.priority),s.push(at.address||at.ip),s.push(at.port);var et=at.type;return s.push("typ"),s.push(et),et!=="host"&&at.relatedAddress&&at.relatedPort&&(s.push("raddr"),s.push(at.relatedAddress),s.push("rport"),s.push(at.relatedPort)),at.tcpType&&at.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(at.tcpType)),(at.usernameFragment||at.ufrag)&&(s.push("ufrag"),s.push(at.usernameFragment||at.ufrag)),"candidate:"+s.join(" ")},rt.parseIceOptions=function(at){return at.substr(14).split(" ")},rt.parseRtpMap=function(at){var s=at.substr(9).split(" "),et={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),et.name=s[0],et.clockRate=parseInt(s[1],10),et.channels=s.length===3?parseInt(s[2],10):1,et.numChannels=et.channels,et},rt.writeRtpMap=function(at){var s=at.payloadType;at.preferredPayloadType!==void 0&&(s=at.preferredPayloadType);var et=at.channels||at.numChannels||1;return"a=rtpmap:"+s+" "+at.name+"/"+at.clockRate+(et!==1?"/"+et:"")+`\r
`},rt.parseExtmap=function(at){var s=at.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},rt.writeExtmap=function(at){return"a=extmap:"+(at.id||at.preferredId)+(at.direction&&at.direction!=="sendrecv"?"/"+at.direction:"")+" "+at.uri+`\r
`},rt.parseFmtp=function(at){for(var s,et={},nt=at.substr(at.indexOf(" ")+1).split(";"),ot=0;ot<nt.length;ot++)et[(s=nt[ot].trim().split("="))[0].trim()]=s[1];return et},rt.writeFmtp=function(at){var s="",et=at.payloadType;if(at.preferredPayloadType!==void 0&&(et=at.preferredPayloadType),at.parameters&&Object.keys(at.parameters).length){var nt=[];Object.keys(at.parameters).forEach(function(ot){at.parameters[ot]?nt.push(ot+"="+at.parameters[ot]):nt.push(ot)}),s+="a=fmtp:"+et+" "+nt.join(";")+`\r
`}return s},rt.parseRtcpFb=function(at){var s=at.substr(at.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},rt.writeRtcpFb=function(at){var s="",et=at.payloadType;return at.preferredPayloadType!==void 0&&(et=at.preferredPayloadType),at.rtcpFeedback&&at.rtcpFeedback.length&&at.rtcpFeedback.forEach(function(nt){s+="a=rtcp-fb:"+et+" "+nt.type+(nt.parameter&&nt.parameter.length?" "+nt.parameter:"")+`\r
`}),s},rt.parseSsrcMedia=function(at){var s=at.indexOf(" "),et={ssrc:parseInt(at.substr(7,s-7),10)},nt=at.indexOf(":",s);return nt>-1?(et.attribute=at.substr(s+1,nt-s-1),et.value=at.substr(nt+1)):et.attribute=at.substr(s+1),et},rt.parseSsrcGroup=function(at){var s=at.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(function(et){return parseInt(et,10)})}},rt.getMid=function(at){var s=rt.matchPrefix(at,"a=mid:")[0];if(s)return s.substr(6)},rt.parseFingerprint=function(at){var s=at.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1]}},rt.getDtlsParameters=function(at,s){return{role:"auto",fingerprints:rt.matchPrefix(at+s,"a=fingerprint:").map(rt.parseFingerprint)}},rt.writeDtlsParameters=function(at,s){var et="a=setup:"+s+`\r
`;return at.fingerprints.forEach(function(nt){et+="a=fingerprint:"+nt.algorithm+" "+nt.value+`\r
`}),et},rt.getIceParameters=function(at,s){var et=rt.splitLines(at);return{usernameFragment:(et=et.concat(rt.splitLines(s))).filter(function(nt){return nt.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:et.filter(function(nt){return nt.indexOf("a=ice-pwd:")===0})[0].substr(10)}},rt.writeIceParameters=function(at){return"a=ice-ufrag:"+at.usernameFragment+`\r
a=ice-pwd:`+at.password+`\r
`},rt.parseRtpParameters=function(at){for(var s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},et=rt.splitLines(at)[0].split(" "),nt=3;nt<et.length;nt++){var ot=et[nt],ht=rt.matchPrefix(at,"a=rtpmap:"+ot+" ")[0];if(ht){var dt=rt.parseRtpMap(ht),pt=rt.matchPrefix(at,"a=fmtp:"+ot+" ");switch(dt.parameters=pt.length?rt.parseFmtp(pt[0]):{},dt.rtcpFeedback=rt.matchPrefix(at,"a=rtcp-fb:"+ot+" ").map(rt.parseRtcpFb),s.codecs.push(dt),dt.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(dt.name.toUpperCase())}}}return rt.matchPrefix(at,"a=extmap:").forEach(function(lt){s.headerExtensions.push(rt.parseExtmap(lt))}),s},rt.writeRtpDescription=function(at,s){var et="";et+="m="+at+" ",et+=s.codecs.length>0?"9":"0",et+=" UDP/TLS/RTP/SAVPF ",et+=s.codecs.map(function(ot){return ot.preferredPayloadType!==void 0?ot.preferredPayloadType:ot.payloadType}).join(" ")+`\r
`,et+=`c=IN IP4 0.0.0.0\r
`,et+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(function(ot){et+=rt.writeRtpMap(ot),et+=rt.writeFmtp(ot),et+=rt.writeRtcpFb(ot)});var nt=0;return s.codecs.forEach(function(ot){ot.maxptime>nt&&(nt=ot.maxptime)}),nt>0&&(et+="a=maxptime:"+nt+`\r
`),et+=`a=rtcp-mux\r
`,s.headerExtensions&&s.headerExtensions.forEach(function(ot){et+=rt.writeExtmap(ot)}),et},rt.parseRtpEncodingParameters=function(at){var s,et=[],nt=rt.parseRtpParameters(at),ot=nt.fecMechanisms.indexOf("RED")!==-1,ht=nt.fecMechanisms.indexOf("ULPFEC")!==-1,dt=rt.matchPrefix(at,"a=ssrc:").map(function(st){return rt.parseSsrcMedia(st)}).filter(function(st){return st.attribute==="cname"}),pt=dt.length>0&&dt[0].ssrc,lt=rt.matchPrefix(at,"a=ssrc-group:FID").map(function(st){return st.substr(17).split(" ").map(function(ut){return parseInt(ut,10)})});lt.length>0&&lt[0].length>1&&lt[0][0]===pt&&(s=lt[0][1]),nt.codecs.forEach(function(st){if(st.name.toUpperCase()==="RTX"&&st.parameters.apt){var ut={ssrc:pt,codecPayloadType:parseInt(st.parameters.apt,10)};pt&&s&&(ut.rtx={ssrc:s}),et.push(ut),ot&&((ut=JSON.parse(JSON.stringify(ut))).fec={ssrc:pt,mechanism:ht?"red+ulpfec":"red"},et.push(ut))}}),et.length===0&&pt&&et.push({ssrc:pt});var mt=rt.matchPrefix(at,"b=");return mt.length&&(mt=mt[0].indexOf("b=TIAS:")===0?parseInt(mt[0].substr(7),10):mt[0].indexOf("b=AS:")===0?1e3*parseInt(mt[0].substr(5),10)*.95-16e3:void 0,et.forEach(function(st){st.maxBitrate=mt})),et},rt.parseRtcpParameters=function(at){var s={},et=rt.matchPrefix(at,"a=ssrc:").map(function(ht){return rt.parseSsrcMedia(ht)}).filter(function(ht){return ht.attribute==="cname"})[0];et&&(s.cname=et.value,s.ssrc=et.ssrc);var nt=rt.matchPrefix(at,"a=rtcp-rsize");s.reducedSize=nt.length>0,s.compound=nt.length===0;var ot=rt.matchPrefix(at,"a=rtcp-mux");return s.mux=ot.length>0,s},rt.parseMsid=function(at){var s,et=rt.matchPrefix(at,"a=msid:");if(et.length===1)return s=et[0].substr(7).split(" "),{stream:s[0],track:s[1]};var nt=rt.matchPrefix(at,"a=ssrc:").map(function(ot){return rt.parseSsrcMedia(ot)}).filter(function(ot){return ot.attribute==="msid"});return nt.length>0?(s=nt[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},rt.generateSessionId=function(){return Math.random().toString().substr(2,21)},rt.writeSessionBoilerplate=function(at,s,et){var nt,ot=s!==void 0?s:2;return nt=at||rt.generateSessionId(),`v=0\r
o=`+(et||"thisisadapterortc")+" "+nt+" "+ot+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},rt.writeMediaSection=function(at,s,et,nt){var ot=rt.writeRtpDescription(at.kind,s);if(ot+=rt.writeIceParameters(at.iceGatherer.getLocalParameters()),ot+=rt.writeDtlsParameters(at.dtlsTransport.getLocalParameters(),et==="offer"?"actpass":"active"),ot+="a=mid:"+at.mid+`\r
`,at.direction?ot+="a="+at.direction+`\r
`:at.rtpSender&&at.rtpReceiver?ot+=`a=sendrecv\r
`:at.rtpSender?ot+=`a=sendonly\r
`:at.rtpReceiver?ot+=`a=recvonly\r
`:ot+=`a=inactive\r
`,at.rtpSender){var ht="msid:"+nt.id+" "+at.rtpSender.track.id+`\r
`;ot+="a="+ht,ot+="a=ssrc:"+at.sendEncodingParameters[0].ssrc+" "+ht,at.sendEncodingParameters[0].rtx&&(ot+="a=ssrc:"+at.sendEncodingParameters[0].rtx.ssrc+" "+ht,ot+="a=ssrc-group:FID "+at.sendEncodingParameters[0].ssrc+" "+at.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ot+="a=ssrc:"+at.sendEncodingParameters[0].ssrc+" cname:"+rt.localCName+`\r
`,at.rtpSender&&at.sendEncodingParameters[0].rtx&&(ot+="a=ssrc:"+at.sendEncodingParameters[0].rtx.ssrc+" cname:"+rt.localCName+`\r
`),ot},rt.getDirection=function(at,s){for(var et=rt.splitLines(at),nt=0;nt<et.length;nt++)switch(et[nt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return et[nt].substr(2)}return s?rt.getDirection(s):"sendrecv"},rt.getKind=function(at){return rt.splitLines(at)[0].split(" ")[0].substr(2)},rt.isRejected=function(at){return at.split(" ",2)[1]==="0"},rt.parseMLine=function(at){var s=rt.splitLines(at)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},rt.parseOLine=function(at){var s=rt.matchPrefix(at,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},rt.isValidSDP=function(at){if(typeof at!="string"||at.length===0)return!1;for(var s=rt.splitLines(at),et=0;et<s.length;et++)if(s[et].length<2||s[et].charAt(1)!=="=")return!1;return!0},typeof ct=="object"&&(ct.exports=rt)},{}]},{},[1])(1)}),function(tt){function ct(kt){if(typeof kt!="string"&&(kt=String(kt)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(kt))throw new TypeError("Invalid character in header field name");return kt.toLowerCase()}function gt(kt){return typeof kt!="string"&&(kt=String(kt)),kt}function rt(kt){var Dt={next:function(){var Vt=kt.shift();return{done:Vt===void 0,value:Vt}}};return yt.iterable&&(Dt[Symbol.iterator]=function(){return Dt}),Dt}function at(kt){this.map={},kt instanceof at?kt.forEach(function(Dt,Vt){this.append(Vt,Dt)},this):Array.isArray(kt)?kt.forEach(function(Dt){this.append(Dt[0],Dt[1])},this):kt&&Object.getOwnPropertyNames(kt).forEach(function(Dt){this.append(Dt,kt[Dt])},this)}function s(kt){if(kt.bodyUsed)return Promise.reject(new TypeError("Already read"));kt.bodyUsed=!0}function et(kt){return new Promise(function(Dt,Vt){kt.onload=function(){Dt(kt.result)},kt.onerror=function(){Vt(kt.error)}})}function nt(kt){var Dt=new FileReader,Vt=et(Dt);return Dt.readAsArrayBuffer(kt),Vt}function ot(kt){var Dt=new FileReader,Vt=et(Dt);return Dt.readAsText(kt),Vt}function ht(kt){for(var Dt=new Uint8Array(kt),Vt=new Array(Dt.length),Ot=0;Ot<Dt.length;Ot++)Vt[Ot]=String.fromCharCode(Dt[Ot]);return Vt.join("")}function dt(kt){if(kt.slice)return kt.slice(0);var Dt=new Uint8Array(kt.byteLength);return Dt.set(new Uint8Array(kt)),Dt.buffer}function pt(){return this.bodyUsed=!1,this._initBody=function(kt){if(this._bodyInit=kt,kt)if(typeof kt=="string")this._bodyText=kt;else if(yt.blob&&Blob.prototype.isPrototypeOf(kt))this._bodyBlob=kt;else if(yt.formData&&FormData.prototype.isPrototypeOf(kt))this._bodyFormData=kt;else if(yt.searchParams&&URLSearchParams.prototype.isPrototypeOf(kt))this._bodyText=kt.toString();else if(yt.arrayBuffer&&yt.blob&&St(kt))this._bodyArrayBuffer=dt(kt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!yt.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(kt)&&!xt(kt))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=dt(kt)}else this._bodyText="";this.headers.get("content-type")||(typeof kt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):yt.searchParams&&URLSearchParams.prototype.isPrototypeOf(kt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},yt.blob&&(this.blob=function(){var kt=s(this);if(kt)return kt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(nt)}),this.text=function(){var kt=s(this);if(kt)return kt;if(this._bodyBlob)return ot(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ht(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},yt.formData&&(this.formData=function(){return this.text().then(st)}),this.json=function(){return this.text().then(JSON.parse)},this}function lt(kt){var Dt=kt.toUpperCase();return Ut.indexOf(Dt)>-1?Dt:kt}function mt(kt,Dt){var Vt=(Dt=Dt||{}).body;if(kt instanceof mt){if(kt.bodyUsed)throw new TypeError("Already read");this.url=kt.url,this.credentials=kt.credentials,Dt.headers||(this.headers=new at(kt.headers)),this.method=kt.method,this.mode=kt.mode,Vt||kt._bodyInit==null||(Vt=kt._bodyInit,kt.bodyUsed=!0)}else this.url=String(kt);if(this.credentials=Dt.credentials||this.credentials||"omit",!Dt.headers&&this.headers||(this.headers=new at(Dt.headers)),this.method=lt(Dt.method||this.method||"GET"),this.mode=Dt.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Vt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Vt)}function st(kt){var Dt=new FormData;return kt.trim().split("&").forEach(function(Vt){if(Vt){var Ot=Vt.split("="),Lt=Ot.shift().replace(/\+/g," "),Gt=Ot.join("=").replace(/\+/g," ");Dt.append(decodeURIComponent(Lt),decodeURIComponent(Gt))}}),Dt}function ut(kt){var Dt=new at;return kt.split(/\r?\n/).forEach(function(Vt){var Ot=Vt.split(":"),Lt=Ot.shift().trim();if(Lt){var Gt=Ot.join(":").trim();Dt.append(Lt,Gt)}}),Dt}function ft(kt,Dt){Dt||(Dt={}),this.type="default",this.status="status"in Dt?Dt.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Dt?Dt.statusText:"OK",this.headers=new at(Dt.headers),this.url=Dt.url||"",this._initBody(kt)}if(!tt.fetch){var yt={searchParams:"URLSearchParams"in tt,iterable:"Symbol"in tt&&"iterator"in Symbol,blob:"FileReader"in tt&&"Blob"in tt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in tt,arrayBuffer:"ArrayBuffer"in tt};if(yt.arrayBuffer)var vt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],St=function(kt){return kt&&DataView.prototype.isPrototypeOf(kt)},xt=ArrayBuffer.isView||function(kt){return kt&&vt.indexOf(Object.prototype.toString.call(kt))>-1};at.prototype.append=function(kt,Dt){kt=ct(kt),Dt=gt(Dt);var Vt=this.map[kt];this.map[kt]=Vt?Vt+","+Dt:Dt},at.prototype.delete=function(kt){delete this.map[ct(kt)]},at.prototype.get=function(kt){return kt=ct(kt),this.has(kt)?this.map[kt]:null},at.prototype.has=function(kt){return this.map.hasOwnProperty(ct(kt))},at.prototype.set=function(kt,Dt){this.map[ct(kt)]=gt(Dt)},at.prototype.forEach=function(kt,Dt){for(var Vt in this.map)this.map.hasOwnProperty(Vt)&&kt.call(Dt,this.map[Vt],Vt,this)},at.prototype.keys=function(){var kt=[];return this.forEach(function(Dt,Vt){kt.push(Vt)}),rt(kt)},at.prototype.values=function(){var kt=[];return this.forEach(function(Dt){kt.push(Dt)}),rt(kt)},at.prototype.entries=function(){var kt=[];return this.forEach(function(Dt,Vt){kt.push([Vt,Dt])}),rt(kt)},yt.iterable&&(at.prototype[Symbol.iterator]=at.prototype.entries);var Ut=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];mt.prototype.clone=function(){return new mt(this,{body:this._bodyInit})},pt.call(mt.prototype),pt.call(ft.prototype),ft.prototype.clone=function(){return new ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new at(this.headers),url:this.url})},ft.error=function(){var kt=new ft(null,{status:0,statusText:""});return kt.type="error",kt};var Tt=[301,302,303,307,308];ft.redirect=function(kt,Dt){if(Tt.indexOf(Dt)===-1)throw new RangeError("Invalid status code");return new ft(null,{status:Dt,headers:{location:kt}})},tt.Headers=at,tt.Request=mt,tt.Response=ft,tt.fetch=function(kt,Dt){return new Promise(function(Vt,Ot){var Lt=new mt(kt,Dt),Gt=new XMLHttpRequest;Gt.onload=function(){var tn={status:Gt.status,statusText:Gt.statusText,headers:ut(Gt.getAllResponseHeaders()||"")};tn.url="responseURL"in Gt?Gt.responseURL:tn.headers.get("X-Request-URL");var zt="response"in Gt?Gt.response:Gt.responseText;Vt(new ft(zt,tn))},Gt.onerror=function(){Ot(new TypeError("Network request failed"))},Gt.ontimeout=function(){Ot(new TypeError("Network request failed"))},Gt.open(Lt.method,Lt.url,!0),Lt.credentials==="include"&&(Gt.withCredentials=!0),"responseType"in Gt&&yt.blob&&(Gt.responseType="blob"),Lt.headers.forEach(function(tn,zt){Gt.setRequestHeader(zt,tn)}),Gt.send(Lt._bodyInit===void 0?null:Lt._bodyInit)})},tt.fetch.polyfill=!0}}(typeof self<"u"?self:commonjsGlobal);var _e={};_e=function(){function tt(pt,lt){var mt,st,ut,ft=[],yt=(pt=pt.push?pt:[pt]).length,vt=yt;for(mt=function(St,xt){xt.length&&ft.push(St),--vt||lt(ft)};yt--;)st=pt[yt],(ut=ot[st])?mt(st,ut):(ht[st]=ht[st]||[]).push(mt)}function ct(pt,lt){if(pt){var mt=ht[pt];if(ot[pt]=lt,mt)for(;mt.length;)mt[0](pt,lt),mt.splice(0,1)}}function gt(pt,lt){pt.call&&(pt={success:pt}),lt.length?(pt.error||et)(lt):(pt.success||et)(pt)}function rt(pt,lt,mt,st){var ut,ft,yt=document,vt=mt.async,St=(mt.numRetries||0)+1,xt=mt.before||et,Ut=pt.replace(/^(css|img)!/,""),Tt=mt.reqdelay||0;st=st||0,/(^css!|\.css$)/.test(pt)?(ut=!0,(ft=yt.createElement("link")).rel="stylesheet",ft.href=Ut):/(^img!|\.(png|gif|jpg|svg)$)/.test(pt)?(ft=yt.createElement("img")).src=Ut:((ft=yt.createElement("script")).src=pt,ft.async=vt===void 0||vt),ft.onload=ft.onerror=ft.onbeforeload=function(kt){var Dt=kt.type[0];if(ut&&"hideFocus"in ft)try{ft.sheet.cssText.length||(Dt="e")}catch{Dt="e"}if(Dt=="e"&&(st+=1)<St)return dt=Tt*st,setTimeout(function(){rt(pt,lt,mt,st)},dt),void(mt.retrycb&&mt.retrycb(st,dt));lt(pt,Dt,kt.defaultPrevented)},xt(pt,ft)!==!1&&yt.head.appendChild(ft)}function at(pt,lt,mt){var st,ut,ft=(pt=pt.push?pt:[pt]).length,yt=ft,vt=[];for(st=function(St,xt,Ut){if(xt=="e"&&vt.push(St),xt=="b"){if(!Ut)return;vt.push(St)}--ft||lt(vt)},ut=0;ut<yt;ut++)rt(pt[ut],st,mt)}function s(pt,lt,mt){var st,ut;lt&&lt.trim&&(st=lt),at(pt,function(ft){gt(ut,ft),ct(st,ft)},ut=(st?mt:lt)||{})}var et=function(){},nt={},ot={},ht={},dt=0;return s.ready=function(pt,lt){return tt(pt,function(mt){gt(lt,mt)}),s},s.done=function(pt){ct(pt,[])},s.reset=function(){nt={},ot={},ht={}},s.isDefined=function(pt){return pt in nt},s}(),function(tt,ct){var gt={};gt.load=function(rt,at,s){if(typeof _e!==void 0&&typeof apiRTC_React>"u"){var et={async:!0,numRetries:at.extJsLoadingRetryNb||100,reqdelay:at.extJsLoadingRetryDelay||200,success:function(){tt.rtcio=io,s.success()},error:function(nt){console.error("socket.io loading error"),s.error()},retrycb:function(nt,ot){console.warn("socket.io loading retry :"+nt+" ,delay before retry :"+ot),s.retrycb()}};at.socketioUrl!==void 0?_e([at.socketioUrl],"socketio",et):_e([rt+"://"+at.ccsServer+"/socket.io/v3/socket.io.js"],"socketio",et)}else console.log("Else loadjs io"),tt.rtcio=io,s.success()},tt.apiRTC_sioLoader=gt}(window);/*! For license information please see apiRTC-srcTmp.js.LICENSE.txt */(function(tt,ct){a.exports=ct()})(self,()=>(()=>{var tt={8364:function(rt,at,s){var et,nt=this&&this.__extends||(et=function(St,xt){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(Ut,Tt){Ut.__proto__=Tt}:function(Ut,Tt){for(var kt in Tt)Object.prototype.hasOwnProperty.call(Tt,kt)&&(Ut[kt]=Tt[kt])}))(St,xt)},function(St,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Class extends value "+String(xt)+" is not a constructor or null");function Ut(){this.constructor=St}et(St,xt),St.prototype=xt===null?Object.create(xt):(Ut.prototype=xt.prototype,new Ut)}),ot=(Object.defineProperty(at,"__esModule",{value:!0}),s(2043)),ht=s(7987),dt=ot.getLogger("CloudAPI"),pt=(ht.reg(ot),ht.apply(dt,{format:function(St,xt,Ut){return"".concat(Ut," - [").concat(St,"] ").concat(xt," : ")}}),dt.setDefaultLevel("error"),dt.setLevel("error"),"https://cloud.apizee.com"),lt="/api/v2/media/upload",mt="/api/v2/conversation/{convId}/media",st="/api/v2/conferences",ut={updateWebconfTags:{fetchRetryCount:3,fetchRetryDelay:500}},ft=null,yt=function(){function St(){if(this.cloudUrl=pt,this.JWTApzToken="",this.fetchRetries=100,this.fetchRetryDelay=200,ft!==null)return dt.debug("Cannot construct multiple CloudAPI, this is a singleton."),ft;ft=this}return St.get=function(){return ft=ft===null?new St:ft},St.prototype.setLogLevel=function(xt){dt.setLevel(xt)},St.prototype.getLogLevel=function(){var xt="";switch(dt.getLevel()){case 0:xt="trace";break;case 1:xt="debug";break;case 2:xt="info";break;case 3:xt="warn";break;case 4:xt="error";break;case 5:xt="silent"}return xt},St.prototype.setCloudURL=function(xt){dt.debug("setCloudURL :",xt),this.cloudUrl=xt},St.prototype.setJWTApzToken=function(xt){this.JWTApzToken=xt},St.prototype.setFetchRetries=function(xt){dt.debug("setFetchRetries :",xt),xt!=null&&(this.fetchRetries=xt)},St.prototype.setFetchRetryDelay=function(xt){dt.log("setFetchRetryDelay :",xt),xt!=null&&(this.fetchRetryDelay=xt)},St.prototype.request=function(xt,Ut,Tt,kt,Dt,Vt){Dt===void 0&&(Dt={}),Vt===void 0&&(Vt={});var Ot=xt.indexOf(this.cloudUrl)===-1?this.cloudUrl+xt:xt,Lt=null;return new Promise(function(Gt,tn){var zt,cn=new XMLHttpRequest;if(Vt.hasOwnProperty("withCredentials")&&(cn.withCredentials=Vt.withCredentials),cn.onreadystatechange=function(gn){if(cn.readyState===XMLHttpRequest.DONE)if(dt.debug("request onreadystatechange status :",cn.status),200<=cn.status&&cn.status<300)if(cn.responseText){var Tn=null;try{Tn=JSON.parse(cn.responseText)}catch{Tn=cn.responseText}Gt(Tn)}else Gt("No_responseTest");else{if(Tn={status:cn.status,text:cn.statusText},cn.responseText)try{Tn.response=JSON.parse(cn.responseText)}catch{Tn.responseText=cn.responseText}tn(Tn)}},cn.onprogress=function(gn){typeof kt=="function"&&kt(gn)},cn.onerror=function(gn){tn(gn)},Tt==="GET")0<Object.keys(Ut).length&&(zt=new URLSearchParams(Ut),dt.debug("johann",zt,zt.toString,Ut),Ot+="?"+zt.toString());else{Lt=new FormData;for(var un=0,fn=Object.keys(Ut);un<fn.length;un++){var vn=fn[un];Lt.append(vn,Ut[vn])}}if(cn.open(Tt,Ot,!0),Dt!=null)for(var Ft=0,pn=Object.keys(Dt);Ft<pn.length;Ft++)vn=pn[Ft],cn.setRequestHeader(vn,Dt[vn]);cn.send(Lt)})},St.prototype.get=function(xt,Ut,Tt,kt){return Tt===void 0&&(Tt={}),kt===void 0&&(kt={}),dt.log("Send HTTP request : GET ".concat(xt)),this.request(xt,Ut,"GET",null,Tt,kt)},St.prototype.post=function(xt,Ut,Tt,kt,Dt){return kt===void 0&&(kt={}),Dt===void 0&&(Dt={}),dt.log("Send HTTP request : POST ".concat(xt)),this.request(xt,Ut,"POST",Tt,kt,Dt)},St.prototype.put=function(xt,Ut,Tt,kt){return dt.log("Send HTTP request : PUT ".concat(xt)),(Ut=Ut!==null&&typeof Ut=="object"?Ut:{})._method="PUT",this.request(xt,Ut,"POST",Tt,kt)},St.prototype.delete=function(xt,Ut,Tt){return dt.log("Send HTTP request : DELETE ".concat(xt)),(Ut=Ut!==null&&typeof Ut=="object"?Ut:{})._method="DELETE",this.request(xt,Ut,"POST",null,Tt)},St.prototype.cloudRequest=function(xt,Ut,Tt,kt){var Dt=this;return kt===void 0&&(kt={}),new Promise(function(Vt,Ot){dt.trace(Tt+" cloudRequest to "+ft.cloudUrl,Ut);var Lt={method:Tt.toUpperCase()},Gt=ft.cloudUrl+xt;if(Lt.method==="GET")0<Object.keys(Ut).length&&(Gt+="?"+new URLSearchParams(Ut).toString());else{for(var tn=new FormData,zt=0,cn=Object.keys(Ut);zt<cn.length;zt++){var un=cn[zt];tn.append(un,Ut[un])}Lt.body=tn}kt.hasOwnProperty("bearerToken")?Lt.headers={Authorization:"Bearer "+kt.bearerToken}:Dt.JWTApzToken!==""&&(Lt.headers={Authorization:"Bearer "+Dt.JWTApzToken}),kt.hasOwnProperty("fetchRetryCount")?Lt.retries=kt.fetchRetryCount:Lt.retries=Dt.fetchRetries,kt.hasOwnProperty("fetchRetryDelay")?Lt.retryDelay=kt.fetchRetryDelay:Lt.retryDelay=Dt.fetchRetryDelay,function(fn,vn){dt.log("fetchRetry");var Ft=3,pn=1e3,gn=[];if(vn&&vn.retries&&(Ft=vn.retries),vn&&vn.retryDelay&&(pn=vn.retryDelay),vn&&vn.retryOn){if(!(vn.retryOn instanceof Array))throw{name:"ArgumentError",message:"retryOn property expects an array"};gn=vn.retryOn}return new Promise(function(Tn,In){function kn(hn){var Sn,Rn;dt.log("wrappedFetch n:",hn),window.fetch!==void 0?fetch(fn,vn).then(function(wn){gn.indexOf(wn.status)===-1?Tn(wn):0<hn?Nn(hn):In(wn)}).catch(function(wn){0<hn?Nn(hn):In(wn)}):(dt.debug("Cannot use fetch in this browser, using XHR"),Sn=yt.get(),Rn={},vn.body&&vn.body.forEach(function(wn,xn){return Rn[xn]=wn}),Sn.request(fn,Rn,vn.method,null,vn.headers).then(function(wn){Tn({gettype:"cloudApiNoFetch",response:wn})}).catch(function(wn){dt.error("error :",wn),In(wn)}))}function Nn(hn){dt.error("retry n:",hn);var Sn=Ft-hn+1;dt.error("retry number is :",Sn),setTimeout(function(){kn(--hn)},pn*Sn)}kn(Ft)})}(Gt,Lt).then(function(fn){if(fn.gettype==="cloudApiNoFetch")return Vt(fn.response);fn.json().then(function(vn){var Ft;if(fn.status<200||299<fn.status)return Ft="cloudRequest - response status Code: "+fn.status,dt.warn(Ft),Ft=new vt(Ft,13,fn.status,vn),Ot(Ft);Vt(vn)}).catch(function(vn){return dt.error("json err :",vn),Ot(new vt("cloudRequest - json() Error: "+vn.text,0,fn.status,{}))})}).catch(function(fn){return dt.error("Fetch Error :",fn),Ot(new vt("cloudRequest - Fetch Error: "+fn.text,13,fn.status,fn.response))})})},St.prototype.cloudFetchMedia=function(xt){var Ut=this;return new Promise(function(Tt,kt){var Dt={};Ut.JWTApzToken!==""&&(Dt={Authorization:"Bearer "+Ut.JWTApzToken}),fetch(xt,{headers:Dt}).then(function(Vt){return Vt.blob()}).then(function(Vt){Tt(Vt)}).catch(function(Vt){kt(Vt)})})},St.prototype.authentication=function(xt,Ut,Tt){return dt.debug("authentication to "+ft.cloudUrl),xt={username:xt,password:Ut},Tt!==void 0&&Tt!==""&&(xt.captcha_token=Tt),this.cloudRequest("/api/v3/authenticate",xt,"POST")},St.prototype.getConnectedUserInformation=function(xt){return dt.debug("getConnectedUserInformation to "+ft.cloudUrl),this.cloudRequest("/api/v2/users/me",{},"GET",{bearerToken:xt})},St.prototype.getUserProfile=function(xt,Ut,Tt){return dt.debug("getUserProfile to "+ft.cloudUrl),typeof xt!="string"||typeof Ut!="string"?Promise.reject("wrongArguments"):(xt={apiKey:xt},this.cloudRequest("/api/v3/users/{userId}/profile".replace("{userId}",Ut),xt,"GET",{bearerToken:Tt}))},St.prototype.getSiteAgents=function(xt,Ut,Tt){return Tt===void 0&&(Tt={}),dt.debug("getSiteAgents to "+ft.cloudUrl),typeof xt!="string"||typeof Ut!="string"?Promise.reject("wrongArguments"):(xt={apiKey:xt},Tt.useAcd&&(xt.useAcd=1),Tt.usePresence&&(xt.usePresence=1),Tt.convId&&(xt.convId=Tt.convId),this.cloudRequest("/api/v2/sites/{siteKey}/agents".replace("{siteKey}",Ut),xt,"GET"))},St.prototype.getEnterpriseInformation=function(xt,Ut){return xt===void 0&&(xt={}),dt.debug("getEnterpriseInformation to "+ft.cloudUrl),this.cloudRequest("/api/v3/enterpriseInformation",xt,"GET",{bearerToken:Ut})},St.prototype.getPreferredCCS=function(xt){return dt.debug("getPreferredCCS to "+ft.cloudUrl),this.cloudRequest("/api/v2/preferredCCS",{apiKey:xt},"GET")},St.prototype.checkUserToken=function(xt){return dt.debug("checkUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/checkToken",{},"GET",{bearerToken:xt})},St.prototype.invalidateUserToken=function(xt){return dt.debug("invalidateUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/invalidateToken",{},"POST",{bearerToken:xt})},St.prototype.uploadFile=function(xt,Ut,Tt){dt.debug("uploadMedia to "+ft.cloudUrl);var kt={file:xt};if(Tt!=null)for(var Dt=0,Vt=Object.keys(Tt);Dt<Vt.length;Dt++){var Ot=Vt[Dt];kt[Ot]=Tt[Ot]}return this.cloudRequest(lt,kt,"POST",{bearerToken:Ut})},St.prototype.uploadSnapshot=function(xt,Ut,Tt){Tt===void 0&&(Tt={}),dt.debug("uploadSnapshot to "+ft.cloudUrl);for(var kt={dataUri:1,file:xt},Dt=0,Vt=Object.keys(Tt);Dt<Vt.length;Dt++){var Ot=Vt[Dt];kt[Ot]=Tt[Ot]}return this.cloudRequest(lt,kt,"POST",{bearerToken:Ut})},St.prototype.getEnterpriseUserList=function(xt,Ut){return dt.debug("getEnterpriseUserList to "+ft.cloudUrl),this.cloudRequest("/api/v2/enterprises/{enterpriseId}/users".replace("{enterpriseId}",xt),{json:!0},"GET",{bearerToken:Ut})},St.prototype.getEnterpriseTagList=function(xt,Ut,Tt){return Tt===void 0&&(Tt={}),dt.debug("getEnterpriseTagList to "+ft.cloudUrl),Tt.hasOwnProperty("webconfId")&&Tt.webconfId,this.cloudRequest("/api/v2/enterprises/{enterpriseId}/tags".replace("{enterpriseId}",xt),{},"GET",{bearerToken:Ut})},St.prototype.updateWebconfTags=function(xt,Ut,Tt,kt){return dt.debug("updateWebconfTags to "+ft.cloudUrl),Tt={_method:"PUT",tags:Tt.join(",")},function(Dt,Vt){if(Dt!==null&&typeof Dt=="object"||(Dt={}),ut.hasOwnProperty(Vt))for(var Ot=ut[Vt],Lt=0,Gt=["fetchRetryCount","fetchRetryDelay"];Lt<Gt.length;Lt++){var tn=Gt[Lt];Ot.hasOwnProperty(tn)&&(Dt[tn]=Ot[tn])}}(kt={bearerToken:kt},"updateWebconfTags"),this.cloudRequest("/api/enterprises/{enterpriseId}/conferences/{conferenceId}".replace("{enterpriseId}",xt).replace("{conferenceId}",Ut),Tt,"POST",kt)},St.prototype.getConferenceList=function(xt){return dt.debug("getConferenceList to "+ft.cloudUrl),this.cloudRequest(st,{},"GET",{bearerToken:xt})},St.prototype.getOrCreateConversation=function(xt,Ut,Tt){return Tt===void 0&&(Tt={}),dt.debug("getOrCreateConversation to "+ft.cloudUrl),xt===null||typeof xt!="object"||typeof Ut!="string"?Promise.reject("wrongArguments"):(xt={name:xt._getTechnicalName(),type:xt.getType(),apiKey:Ut},Ut={},Tt.hasOwnProperty("token")&&Tt.token&&(Ut.bearerToken=Tt.token),Tt.hasOwnProperty("active")&&typeof Tt.active=="boolean"&&(xt.active=1),this.cloudRequest("/api/v2/conversation",xt,"POST",Ut))},St.prototype.createConference=function(xt,Ut,Tt){return Tt===void 0&&(Tt={}),dt.debug("createConference to "+ft.cloudUrl),Ut={name:Ut},Tt.hasOwnProperty("password")&&(Ut.password=Tt.password),this.cloudRequest(st,Ut,"POST",{bearerToken:xt})},St.prototype.checkConferenceAccess=function(xt,Ut,Tt){var kt;return Tt===void 0&&(Tt={}),dt.debug("checkConferenceAccess for "+xt+" to "+ft.cloudUrl),typeof Ut!="string"?Promise.reject("wrongArguments"):(Ut={apiKey:Ut},Tt.convId&&(Ut.conv_id=Tt.convId),Tt.hasOwnProperty("password")&&(Ut.password=Tt.password),kt={},Tt.hasOwnProperty("session")&&typeof Tt.session.getToken=="function"&&Tt.session.getToken()!==null&&(kt.bearerToken=Tt.session.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/checkAccess".replace("{roomname}",xt),Ut,"POST",kt))},St.prototype.getWebconf=function(xt,Ut){Ut===void 0&&(Ut={}),dt.debug("getWebconf for "+xt+" to "+ft.cloudUrl);var Tt={};return Ut.hasOwnProperty("token")&&Ut.token&&(Tt.bearerToken=Ut.token),this.cloudRequest("/api/v2/conferences/{roomname}".replace("{roomname}",xt),{},"GET",Tt)},St.prototype.getWebconfConversation=function(xt,Ut,Tt){var kt;return Tt===void 0&&(Tt={}),dt.debug("getWebconfConversation for "+xt+" to "+ft.cloudUrl),typeof Ut!="string"?Promise.reject("wrongArguments"):(Ut={apiKey:Ut},kt={},Tt.hasOwnProperty("token")&&Tt.token&&(kt.bearerToken=Tt.token),this.cloudRequest("/api/v2/conferences/{roomname}/conversation".replace("{roomname}",xt),Ut,"GET",kt))},St.prototype.updateConferencePresence=function(xt,Ut,Tt){dt.trace("updateConferencePresence for "+xt.getName()+" to "+ft.cloudUrl),Tt={ccid:Ut.getId(),name:Ut.getUserAgent().getUsername(),instanceId:xt.getInstanceId(),apiKey:Tt};var kt={};return Ut.getToken()!==null&&(kt.bearerToken=Ut.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/updatePresence".replace("{roomname}",xt._getTechnicalName()),Tt,"POST",kt)},St.prototype.closeConferenceInstance=function(xt,Ut){dt.debug("closeConferenceInstance for "+xt.getName()+" to "+ft.cloudUrl);var Tt={instanceId:xt.getInstanceId()};return this.cloudRequest("/api/v2/conferences/{roomname}/closeInstance".replace("{roomname}",xt._getTechnicalName()),Tt,"POST",{bearerToken:Ut.getToken()})},St.prototype.getConversationMediaList=function(xt,Ut,Tt){var kt;return Tt===void 0&&(Tt={}),dt.debug("getConversationMediaList for "+xt+" to "+ft.cloudUrl),xt&&typeof Ut=="string"?(Ut={apiKey:Ut},kt={},Tt.hasOwnProperty("token")&&Tt.token&&(kt.bearerToken=Tt.token),Tt.hasOwnProperty("offset")&&(Ut.offset=Tt.offset),Tt.hasOwnProperty("limit")&&(Ut.limit=Tt.limit),this.cloudRequest(mt.replace("{convId}",xt.toString()),Ut,"GET",kt)):Promise.reject("wrongArguments")},St.prototype.pushConversationMedia=function(xt,Ut,Tt,kt){return kt===void 0&&(kt={}),dt.debug("pushConversationMedia for "+xt+" to "+ft.cloudUrl),xt&&Ut&&typeof Tt=="string"?(Ut={media:Ut,apiKey:Tt},Tt={},kt.hasOwnProperty("token")&&kt.token&&(Tt.bearerToken=kt.token),kt.hasOwnProperty("metadata")&&kt.metadata&&(Ut.metadata=kt.metadata),kt.hasOwnProperty("asFile")&&kt.asFile&&(Ut.asFile=kt.asFile),kt.hasOwnProperty("filename")&&kt.filename&&(Ut.filename=kt.filename),kt.overwrite===!0&&(Ut.overwrite=1),typeof kt.ttl=="number"&&0<kt.ttl&&(Ut.ttl=kt.ttl),this.cloudRequest(mt.replace("{convId}",xt.toString()),Ut,"POST",Tt)):Promise.reject("wrongArguments")},St.prototype.setConversationData=function(xt,Ut,Tt,kt){return kt===void 0&&(kt={}),dt.debug("setConversationData for "+xt+" to "+ft.cloudUrl),xt&&typeof Ut=="string"&&typeof Tt=="string"?(Ut={data:Ut,apiKey:Tt},Tt={},kt.hasOwnProperty("token")&&kt.token&&(Tt.bearerToken=kt.token),this.cloudRequest("/api/v2/conversation/{convId}/data".replace("{convId}",xt.toString()),Ut,"POST",Tt)):Promise.reject("wrongArguments")},St.prototype.getSessionHistory=function(xt,Ut,Tt){Tt===void 0&&(Tt={}),dt.debug("getSessionHistory to "+ft.cloudUrl);var kt={sessionId:xt};if(Tt!=null)for(var Dt=0,Vt=Object.keys(Tt);Dt<Vt.length;Dt++){var Ot=Vt[Dt];kt[Ot]=Tt[Ot]}return this.cloudRequest("/api/v2/messages",kt,"GET",{bearerToken:Ut})},St.prototype.getWebSession=function(xt,Ut,Tt){return dt.debug("getSessionHistory to "+ft.cloudUrl),typeof Tt!="string"?Promise.reject("wrongArguments"):(Ut={destId:Ut.getId(),apiKey:Tt},Tt={},xt.getToken()!==null?Tt.bearerToken=xt.getToken():Ut.userId=xt.getId(),this.cloudRequest("/api/v2/webSession",Ut,"GET",Tt))},St.prototype.saveNewMessage=function(xt,Ut,Tt,kt,Dt,Vt){return dt.debug("saveNewMessage to "+ft.cloudUrl),Dt={uuid:Dt,destId:Tt,message:kt,sessionId:xt,userId:Ut.getId(),apiKey:Vt},Tt={},Ut.getToken()!==null&&(Tt.bearerToken=Ut.getToken()),this.cloudRequest("/api/v2/messages",Dt,"POST",Tt)},St.prototype.saveGroupChatMessage=function(xt,Ut,Tt,kt,Dt,Vt){return Vt===void 0&&(Vt={}),dt.debug("saveGroupChatMessage to "+ft.cloudUrl),Tt={apiKey:Tt,message:kt,ccid:Ut.getId(),name:Ut.getUserAgent().getUsername(),parent_conv_id:xt.getCloudConversationId(),uuid:Dt,htmlEnable:Vt.metadata&&Vt.metadata.htmlEnable||!1},kt={},Vt.token!==void 0&&Vt.token!==null?kt.bearerToken=Vt.token:Ut.getToken()!==null?kt.bearerToken=Ut.getToken():Tt.userId=Ut.getId(),this.cloudRequest("/api/v2/groupChatMessages",Tt,"POST",kt)},St.prototype.loadGroupChatMessages=function(xt,Ut,Tt){Tt===void 0&&(Tt=""),dt.debug("loadGroupChatMessages to "+ft.cloudUrl),xt={parent_conv_id:xt.getCloudConversationId()};var kt={};return kt.bearerToken=Tt!==""?Tt:Ut.getToken(),this.cloudRequest("/api/v2/groupChatMessages",xt,"GET",kt)},St}(),vt=(at.default=yt,function(St){function xt(Ut,Tt,kt,Dt){return(Ut=St.call(this,Ut)||this).name=Ut.constructor.name,Ut.code=Tt,Ut.httpCode=kt,Ut.cloudResponse=Dt,Ut}return nt(xt,St),xt}(Error))},128:(rt,at,s)=>{s.d(at,{_:()=>ot}),s(2564);var et=s(1549).Y.get("ApiCCDataClient"),nt=apiCC.myWebRTC_Event,ot=function(ht){this.sendData=function(dt,pt,lt){et.info("Call sending data function .... to :"+dt+" message :",pt);var mt,st,ut=ht.channel.getNewCSeq(),ft=null;return mt={type:"dataMessage",senderId:ht.apiCCId,dstRoomId:dt,data:pt,cSeq:ut},st=JSON.stringify(mt),et.log("C->S: "+st),lt!==void 0?(et.log("Ack management activated"),ft=setTimeout(function(){lt({reason:"timeoutReached",cSeq:ut}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]},ht.messageTimeOutTimer),et.log("timeOutId: "+ft),ht.messageTimeOutTable[ut]=ft,ht.channel.socket.emit("dataMessage",st,function(yt){et.log("callback on dataMessage"),et.log("callback reason :"+yt.reason),et.log("cSeq :"+yt.cSeq),lt(yt),apiCC.session.messageTimeOutTable[ut]!==void 0?(et.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[ut]),clearTimeout(apiCC.session.messageTimeOutTable[ut]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]):et.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(et.log("Ack management not activated"),ht.channel.socket.emit("dataMessage",st)),ut},this.sendDataToGroup=function(dt,pt){et.info("[ApiCCDataClient] sendDataToGroup - "+dt);var lt,mt=ht.getConnectedUsersList(dt);for(lt=0;lt<mt.length;lt++)ht.apiCCId!=mt[lt].userId&&this.sendData(mt[lt].userId,pt)},this.receiveData=function(dt){et.info("receiveData :"+dt.data),nt.createReceiveDataEvent(dt.senderId,dt.dstRoomId,dt.data)}}},6844:(rt,at,s)=>{s.d(at,{U:()=>pt}),s(9554),s(1539),s(4747),s(2564),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948);var et=s(1549),nt=s(4708),ot=s(940);function ht(lt){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},ht(lt)}var dt=et.Y.get("ApiCCIMClient"),pt=function(lt,mt){this.convTable=[],this.myWebRTC_Event=apiCC.myWebRTC_Event,this.nickname=lt.nickname,this.photoURL=null,this.userDataSetted=!1,this.myWebRTC_Stack=new ot.S(lt.channel.socket),this.findIMIdWithDestID=function(st){var ut,ft=this.convTable.length;for(dt.log("findIMIdWithDestID = "+st),ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==st)return this.convTable[ut].IMId;return dt.log("Conversation IMId not found"),0},this.addInConvTable=function(st){dt.debug("addInConvTable");var ut,ft=this.convTable.length;for(ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==st.dest_roomId)return void(this.convTable[ut].IMId=st.IMId);dt.log("Conversation not found in the table, adding .."),this.convTable.push(st)},this.sendMessage=function(st,ut,ft,yt){dt.info("Call sending message function .... from :"+this.nickname+" message :"+ut);var vt,St=this.findIMIdWithDestID(st),xt=null,Ut=null,Tt=null,kt=lt.channel.getNewCSeq();return St===0?dt.log("Creation of a new IM conversation"):dt.log("Message is for existing conversation with ID : "+St),dt.log("IMConvId :"+St),xt={type:"IMMessage",IMId:St,senderId:lt.apiCCId,nickname:this.nickname,photoURL:this.photoURL,dstRoomId:st,data:ut,cSeq:kt,convData:yt},lt.getConnectedUserIdsList().forEach(function(Dt){Dt.userId==st&&Dt.hasOwnProperty("userData")&&Dt.userData!==null&&ht(Dt.userData.hasOwnProperty("isChatbot"))&&Dt.userData.isChatbot&&(xt.pubSub="BotConnector")}),vt=JSON.stringify(xt),Ut=document.createElement("message"),dt.log("C->S: "+vt),ft!==void 0?(dt.log("Ack management activated"),Tt=setTimeout(function(){ft({reason:"timeoutReached",cSeq:kt}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[kt]},lt.messageTimeOutTimer),dt.log("timeOutId: "+Tt),lt.messageTimeOutTable[kt]=Tt,lt.channel.socket.emit("IMMessage",vt,function(Dt){dt.log("callback on IMMessage"),dt.log("data :",Dt),dt.log("callback reason :"+Dt.reason),dt.log("callback convId :"+Dt.convId),dt.log("cSeq :"+Dt.cSeq),ft(Dt),apiCC.session.messageTimeOutTable[kt]!==void 0?(dt.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[kt]),clearTimeout(apiCC.session.messageTimeOutTable[kt]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[kt]):dt.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(dt.log("Ack management not activated"),lt.channel.socket.emit("IMMessage",vt)),this.conversation!==null&&(Ut.innerHTML="<b>me :</b> "+yt+"<br>",this.conversation.appendChild(Ut),this.conversation.scrollTop=this.conversation.scrollHeight),kt},this.newConversationCreated=function(st){dt.debug("newConversationCreated :"+st),dt.log("msg.dstRoomId :"+st.dstRoomId),dt.log("msg.IMId :"+st.IMId);var ut={dest_roomId:st.dstRoomId,IMId:st.IMId};this.addInConvTable(ut)},this.receiveMessage=function(st){dt.info("Call receiveMessage message :"+st);var ut,ft=null;ut={dest_roomId:st.senderId,IMId:st.IMId},this.addInConvTable(ut),this.conversation!==null&&((ft=document.createElement("message")).innerHTML="<b>"+st.nickname+":</b> "+st.data+"<br>",this.conversation.appendChild(ft),this.conversation.scrollTop=this.conversation.scrollHeight),this.myWebRTC_Event.createReceiveIMMessageEvent(st.senderId,st.nickname,st.photoURL,st.data,st.UUCSeq,st.IMId)},this.createGroupChat=function(st,ut){var ft,yt;dt.info("createGroupChat with contacts : "+st+","+ut),ft={type:"createGroupChat",nickname:this.nickname,photoURL:this.photoURL,contactId1:st,contactId2:ut},yt=JSON.stringify(ft),dt.log("C->S: "+yt),lt.channel.socket.emit("createGroupChat",yt)},this.groupChatCreation=function(st){dt.debug("groupChatCreation"),this.myWebRTC_Event.createGroupChatCreationEvent(st.status,st.groupChatId,st.contactId1,st.invitationSendedToInitialDestId,st.contactId2,st.invitationSendedToNewContactId)},this.joinGroupChat=function(st){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dt.debug("joinGroupChat : "+st);var ft=null,yt=null;ft={type:"joinGroupChat",groupChatId:st},ut.convId&&(ft.data={},ft.data.cloudConvId=ut.convId),yt=JSON.stringify(ft),dt.log("C->S: "+yt),lt.channel.socket.emit("joinGroupChat",yt)},this.groupChatInvitation=function(st){dt.debug("groupChatInvitation"),this.myWebRTC_Event.createGroupChatInvitationEvent(st.groupChatId,st.senderId,st.senderNickname,st.senderPhotoURL,st.contactList)},this.answerToGroupChatInvitation=function(st,ut){var ft,yt;dt.debug("answerToGroupChatInvitation: "+st+" : "+ut),ut===!0||ut===!1?(ft={type:"groupChatInvitationAnswer",groupChatId:st,senderId:lt.apiCCId,nickname:this.nickname,photoURL:this.photoURL,accept:ut},yt=JSON.stringify(ft),dt.log("C->S: "+yt),lt.channel.socket.emit("groupChatInvitationAnswer",yt)):dt.log("accept value is not correct")},this.groupChatMemberUpdate=function(st){dt.info("groupChatMemberUpdate"),this.myWebRTC_Event.createGroupChatMemberUpdateEvent(st.groupChatId,st.contactList,st.status)},this.addUserInGroupChat=function(st,ut){var ft,yt;dt.debug("addUser : "+ut+"in Group Chat with Id :"+st),ft={type:"addUserInGroupChat",groupChatId:st,nickname:this.nickname,photoURL:this.photoURL,contactId:ut},yt=JSON.stringify(ft),dt.log("C->S: "+yt),lt.channel.socket.emit("addUserInGroupChat",yt)},this.addUserInGroupChatAnswer=function(st){dt.info("addUserInGroupChatAnswer"),this.myWebRTC_Event.createAddUserInGroupChatEvent(st.invitationSended,st.groupChatId,st.contactId)},this.leaveGroupChat=function(st){var ut,ft;dt.info("Leave Group Chat with Id :"+st),ut={type:"leaveGroupChat",groupChatId:st,nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("leaveGroupChat",ft)},this.sendMessageToGroupChat=function(st,ut,ft){var yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};dt.info("Call sending message to Group Chat .... from :"+this.nickname+" message :"+ut);var vt=null,St=null,xt=apiCC.session.channel.getNewCSeq();vt={type:"groupChatMessage",groupChatId:st,senderId:lt.apiCCId,nickname:this.nickname,cSeq:xt,data:ut},(0,nt.Ym)(yt,"metadata","object")&&(vt.metadata=yt.metadata),St=JSON.stringify(vt),ft!==null&&typeof ft=="function"?(apiCC.session.messageTimeOutTable[xt]=setTimeout(function(){ft({reason:"timeoutReached",cSeq:xt}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[xt]},apiCC.session.messageTimeOutTimer),dt.log("C->S: "+St),lt.channel.socket.emit("groupChatMessage",St,function(Ut){clearTimeout(apiCC.session.messageTimeOutTable[Ut.cSeq]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[Ut.cSeq],ft(Ut)})):(dt.log("C->S: "+St),lt.channel.socket.emit("groupChatMessage",St))},this.receiveGroupChatMessage=function(st){dt.info("receiveGroupChatMessage"),this.myWebRTC_Event.createReceiveGroupChatMessageEvent(st.groupChatId,st.senderId,st.nickname,st.data,st.metadata)},this.getConversationHistory=function(st){var ut,ft;dt.debug("getConversationHistory"),ut={type:"getConversationHistory",convId:st},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("getConversationHistory",ft)},this.receiveConversationHistory=function(st){dt.debug("receiveConversationHistory"),dt.log("msg.convId :"+st.convId);var ut,ft=0,yt=[],vt=null;if(st.convHistory!==null)for(dt.log("msg.convHistory.length :"+st.convHistory.length),ft=st.convHistory.length,yt=[],ut=0;ut<ft;ut+=1)vt=JSON.parse(st.convHistory[ut]),yt.push(vt);this.myWebRTC_Event.createReceiveConversationHistoryEvent(st.convId,yt,st.status)},this.setUserData=function(st){var ut,ft;dt.info("setUserData"),this.photoURL=st.photoURL,lt.photoURL=st.photoURL,dt.log("photoURL :"+this.photoURL),ut={type:"setUserData",nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("setUserData",ft),this.userDataSetted=!0},this.getUserData=function(st){var ut,ft;dt.info("getUserData"),ut={type:"getUserData",contactId:st},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("getUserData",ft)},this.receiveUserDataAnswer=function(st){dt.info("receiveUserDataAnswer"),this.myWebRTC_Event.createUserDataAnswerEvent(st.userFound,st.contactId,st.nickname,st.photoURL)},this.receiveFetchUserDataAnswer=function(st){dt.info("receiveFetchUserDataAnswer"),this.myWebRTC_Event.createFetchUserDataAnswerEvent(st)},this.initialize=function(st){var ut,ft;this.conversation=document.getElementById(st),this.conversation===null&&(dt.log("conversationElementId Div Name is not correct : INCORRECT_DIV_NAME_CONVERSATION"),dt.log("conversationElementId is null")),ut={type:"registerIM",username:this.nickname},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("registerIM",ft)},this.initialize(mt)}},9213:(rt,at,s)=>{s.d(at,{X:()=>ht}),s(2564),s(2526),s(1817),s(1539);var et=s(1549),nt=s(4708),ot=et.Y.get("ApiCCPointerSharingClient"),ht=function dt(pt){this.roomTable={},this.getRoomIds=function(){var lt=[],mt=null;for(mt in this.roomTable)lt.push(mt);return lt},this.roomExists=function(lt){return this.roomTable.hasOwnProperty(lt)},this.roomActive=function(lt){return this.roomTable.hasOwnProperty(lt)&&this.roomTable[lt].state===dt.STATE_ACTIVE},this.joinRoom=function(lt,mt){var st=this;ot.info("ApiCCPointerSharingClient::joinRoom()"),(0,nt.Ym)(mt,"object")||(mt={}),(0,nt.ki)(mt,"success","function")||(mt.success=function(){}),(0,nt.ki)(mt,"failure","function")||(mt.failure=function(){}),this.roomTable.hasOwnProperty(lt)?mt.failure("room already joined",lt):(this.roomTable[lt]={roomId:lt,state:dt.STATE_JOINING,joinRoomCallbacks:mt},this.roomTable[lt].joinRoomTimeoutId=setTimeout(function(){delete st.roomTable[lt],mt.failure("timeout",lt)},15e3),apiCC.session.roomMgr.joinRoom(lt,"pointerSharing"))},this.leaveRoom=function(lt){this.roomTable.hasOwnProperty(lt)&&delete this.roomTable[lt],apiCC.session.roomMgr.leaveRoom(lt,"pointerSharing")},this.inviteInRoom=function(lt,mt,st){ot.info("ApiCCPointerSharingClient::inviteInRoom()"),apiCC.session.roomMgr.inviteInRoom(lt,mt,"pointerSharing",st)},this.sendPointerLocation=function(lt,mt,st,ut,ft){var yt;return!(!this.roomTable.hasOwnProperty(lt)||this.roomTable[lt].state!==dt.STATE_ACTIVE||(yt={type:"pointerLocation",source:mt,x:st,y:ut},(0,nt.Ym)(ft,"object")&&(yt.data=ft),apiCC.session.roomMgr.sendMessageToRoom(lt,"pointerSharing",yt),0))},this.processMessageRoomJoin=function(lt){this.roomTable.hasOwnProperty(lt.roomId)&&this.roomTable[lt.roomId].state===dt.STATE_JOINING&&(clearTimeout(this.roomTable[lt.roomId].joinRoomTimeoutId),delete this.roomTable[lt.roomId].joinRoomTimeoutId,this.roomTable[lt.roomId].state=dt.STATE_ACTIVE,this.roomTable[lt.roomId].joinRoomCallbacks.success(lt.roomId),delete this.roomTable[lt.roomId].joinRoomCallbacks)},this.stop=function(){for(var lt=this.getRoomIds(),mt=lt.length;--mt>=0;)this.leaveRoom(lt[mt])}};ht.STATE_IDLE=Symbol("idle"),ht.STATE_JOINING=Symbol("joining"),ht.STATE_ACTIVE=Symbol("active"),ht.STATE_ERROR=Symbol("error")},3720:(rt,at,s)=>{s.d(at,{K:()=>Ut}),s(1058),s(8309),s(3710),s(1539),s(9714),s(2564),s(9554),s(4747),s(2772),s(561),s(6699),s(2479),s(2707),s(9601),s(8674),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),s(2443),s(3680),s(3706),s(2703),s(9070),s(8011),s(489),s(8304),s(7042);var et=s(1549),nt=et.Y.get("RoomManager"),ot=function(Tt,kt){nt.debug("RoomManager"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.createRoom=function(Dt){var Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nt.info("RoomManager:createRoom with roomType : "+Dt);var Ot={type:"createRoom",roomType:Dt,nickname:Tt.nickname,photoURL:Tt.photoURL};Vt.convId&&(Ot.data||(Ot.data={}),Ot.data.cloudConvId=Vt.convId),Vt.webconf===!0&&(Ot.data||(Ot.data={}),Ot.data.webconf=!0);var Lt=JSON.stringify(Ot);nt.log("C->S: "+Lt),Tt.channel.socket.emit("createRoom",Lt)},this.roomCreation=function(Dt){nt.info("RoomManager:roomCreation"),this.myWebRTC_Event.createRoomCreationEvent(Dt.status,Dt.roomId,Dt.roomType),kt(Dt)},this.roomJoin=function(Dt){nt.info("RoomManager:roomJoin"),this.myWebRTC_Event.createRoomJoinedEvent(Dt.status,Dt.roomId,Dt.roomType),kt(Dt)},this.inviteInRoom=function(Dt,Vt,Ot,Lt){var Gt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};nt.info("RoomManager:inviteInRoom with roomType:",Ot);var tn={type:"inviteInRoom",roomId:Dt,contactId:Vt,roomType:Ot,nickname:Tt.nickname,photoURL:Tt.photoURL,context:Lt};Gt.convId&&(tn.data||(tn.data={}),tn.data.cloudConvId=Gt.convId),Gt.webconf===!0&&(tn.data||(tn.data={}),tn.data.webconf=!0);var zt=JSON.stringify(tn);nt.log("C->S: "+zt),Tt.channel.socket.emit("inviteInRoom",zt)},this.inviteInRoomStatus=function(Dt){nt.info("inviteInRoomStatus"),kt(Dt)},this.roomInvitation=function(Dt){nt.info("roomInvitation",Dt);var Vt={};Dt.data&&(Dt.data.cloudConvId&&(Vt.cloudConvId=Dt.data.cloudConvId),Dt.data.webconf===!0&&(Vt.webconf=!0)),this.myWebRTC_Event.createRoomInvitationEvent(Dt.roomId,Dt.senderId,Dt.senderNickname,Dt.senderPhotoURL,Dt.contactList,Dt.roomType,Vt),kt(Dt)},this.requestContactListInRoom=function(Dt){nt.info("requestContactListInRoom :"+Dt);var Vt={type:"requestContactListInRoom",roomId:Dt},Ot=JSON.stringify(Vt);Tt.channel.socket.emit("requestContactListInRoom",Ot)},this.onContactListInRoom=function(Dt){nt.info("onContactListInRoom :"+Dt),this.myWebRTC_Event.createContactListInRoomEvent(Dt.roomId,Dt.contactList,Dt.roomType),kt(Dt)},this.answerToRoomInvitation=function(Dt,Vt,Ot){if(nt.info("answerToRoomInvitation:",Dt,Vt),Vt===!0||Vt===!1){var Lt={type:"roomInvitationAnswer",roomId:Dt,senderId:Tt.apiCCId,nickname:Tt.nickname,photoURL:Tt.photoURL,accept:Vt,roomType:Ot},Gt=JSON.stringify(Lt);nt.log("C->S: "+Gt),Tt.channel.socket.emit("roomInvitationAnswer",Gt)}else nt.log("accept value is not correct")},this.roomMemberUpdate=function(Dt){nt.info("roomMemberUpdate"),this.myWebRTC_Event.createRoomMemberUpdateEvent(Dt.roomId,Dt.contactList,Dt.status,Dt.roomType),kt(Dt)},this.sendMessageToRoom=function(Dt,Vt,Ot){nt.info("Call sending message to Room .... from :"+Tt.apiCCId+" message :"+Ot);var Lt={type:"roomMessage",roomId:Dt,senderId:Tt.apiCCId,nickname:Tt.nickname,roomType:Vt,data:Ot},Gt=JSON.stringify(Lt);nt.log("C->S: "+Gt),Tt.channel.socket.emit("roomMessage",Gt)},this.receiveRoomMessage=function(Dt){nt.info("receiveRoomMessage"),this.myWebRTC_Event.createReceiveRoomMessageEvent(Dt.roomId,Dt.senderId,Dt.nickname,Dt.data,Dt.roomType),kt(Dt)},this.joinRoom=function(Dt,Vt){var Ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};nt.info("Join Room with Id:",Dt);var Lt={type:"joinRoom",roomId:Dt,nickname:Tt.nickname,photoURL:Tt.photoURL,roomType:Vt};Ot.convId&&(Lt.data||(Lt.data={}),Lt.data.cloudConvId=Ot.convId),Ot.webconf===!0&&(Lt.data||(Lt.data={}),Lt.data.webconf=!0);var Gt=JSON.stringify(Lt);nt.log("C->S: "+Gt),Tt.channel.socket.emit("joinRoom",Gt)},this.leaveRoom=function(Dt,Vt){nt.info("Leave Room with Id:",Dt);var Ot={type:"leaveRoom",roomId:Dt,nickname:Tt.nickname,photoURL:Tt.photoURL,roomType:Vt},Lt=JSON.stringify(Ot);nt.log("C->S: "+Lt),Tt.channel.socket.emit("leaveRoom",Lt)}},ht=(s(2023),s(1038),s(4916),s(9753),s(8765)),dt=s(5945);function pt(Tt,kt){(kt==null||kt>Tt.length)&&(kt=Tt.length);for(var Dt=0,Vt=new Array(kt);Dt<kt;Dt++)Vt[Dt]=Tt[Dt];return Vt}var lt=et.Y.get("ApiCC_Channel"),mt=function(Tt){lt.debug("ApiCC_Channel"),this.channelReady=!1,this.socket=null,this.channelId=Tt.apiCCId,this.myWebRTC_Event=new ht.K,this.channelHasBeenDisconnected=!1,this.cSeq=0,this.updatePresenceGroupIsNeeded=!1,this.oldPresenceGroup=null,this.newPresenceGroup=null,this.updateSubscribeToPresenceGroupIsNeeded=!1,this.oldSubscribeToPresenceGroup=null,this.newSubscribeToPresenceGroup=null,this.initialize=function(){lt.info("ApiCC_Channel::initialize()"),this.openChannel()},this.getNewCSeq=function(){return this.cSeq=this.cSeq+1,this.cSeq},this.openChannel=function(){var kt,Dt,Vt,Ot="",Lt=null,Gt=null,tn=null,zt=null;lt.debug("openChannel channelId :"+this.channelId),lt.debug("session.apiKey :"+Tt.apiKey),lt.log("session.sessionId :"+Tt.sessionId),Tt.xhrPolling=!0,lt.log("CCSserver used : "+Tt.ccsServer),Dt=Tt.appId!==void 0?"&appId="+Tt.appId:"",Vt=Tt.siteId!==void 0?"&siteId="+Tt.siteId:"",Tt.userData!==void 0&&(lt.log("Defined userData : ",Tt.userData),Lt=JSON.stringify(Tt.userData),lt.log("stringUserData.length :"+Lt.length),Lt.length<=1e3?Ot="&userData="+encodeURIComponent(Lt):lt.warn("userData length is too long :"+Lt.length+" .Need to be <= 500")),Tt.presenceGroup!==void 0&&(lt.log("Defined presenceGroup : "+Tt.presenceGroup),Gt=JSON.stringify(Tt.presenceGroup),lt.log("stringPresenceGroup.length :"+Gt.length),Gt.length<=750?Ot+="&presenceGroup="+encodeURIComponent(Gt):lt.warn("presenceGroup length is too long :"+Gt.length+" .Need to be <= 750")),Tt.subscribeToPresenceGroup!==void 0&&(lt.log("Defined subscribeToPresenceGroup : "+Tt.subscribeToPresenceGroup),tn=JSON.stringify(Tt.subscribeToPresenceGroup),lt.log("stringsubscribeToPresenceGroup.length :"+tn.length),tn.length<=750?Ot+="&subscribeToPresenceGroup="+encodeURIComponent(tn):lt.warn("subscribeToPresenceGroup length is too long :"+tn.length+" .Need to be <= 750")),Tt.token!==void 0&&(lt.log("Defined token : "+Tt.token),Ot+="&token="+Tt.token),Tt.conversationSpace!==void 0&&Tt.conversationSpace!==null&&(lt.log("Defined conversationSpace : "+Tt.conversationSpace),Ot+="&conversationSpace="+Tt.conversationSpace),typeof apiRTC_React>"u"?(lt.log("ApplicationUUID : "+window.location.hostname),Ot+="&applicationUUID="+window.location.hostname):(lt.log("ApplicationUUID for react native : "+DeviceInfo.getBundleId()),Ot+="&applicationUUID="+DeviceInfo.getBundleId()),Ot+="&apiLibType=apiRTC_JS",lt.log("requestOptions on connect :"+Ot),lt.log("session.ccsServer :"+Tt.ccsServer),kt="?channelId="+this.channelId+"&apiKey="+Tt.apiKey+"&apiVersion="+apiCC.version+"&apiCCSessionId="+Tt.apiCCSessionId+"&sessionId="+Tt.sessionId+Dt+Vt+Ot,zt=typeof apiRTC_React<"u"?"https":window.location.protocol==="http:"?"http":"https",dt.ag.name!=="iOS"&&dt.ag.name!=="Android"||(lt.log(dt.ag.name+" detected forcing protocol to https"),zt="https"),lt.info("CCS Connect, socket url is : "+zt+"://"+Tt.ccsServer+"/"+kt),this.ccsConnectionRetryNb=Tt.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=Tt.ccsConnectionRetryDelay,this.socket=window.rtcio.connect(zt+"://"+Tt.ccsServer+"/"+kt,{forceNew:!0,multiplex:!1,withCredentials:!0,reconnectionAttempts:this.ccsConnectionRetryNb,reconnectionDelay:this.ccsConnectionRetryDelay}),this.socket.on("connect",this.callback(this,"onChannelOpened")).on("connect_error",this.callback(this,"onChannelConnectError")).on("message",this.callbackWithParams(this,"onChannelMessage")).on("disconnect",this.callback(this,"onChannelDisconnect")),this.socket.io.on("error",this.callback(this,"onChannelError")).on("reconnect",this.callback(this,"onChannelReconnect")).on("reconnect_attempt",this.callback(this,"onChannelReconnectAttempt")).on("reconnect_error",this.callback(this,"onChannelReconnectError")).on("reconnect_failed",this.callback(this,"onChannelReconnect_failed"))},this.onWhiteBoardDisconnection=function(){lt.info("onWhiteBoardDisconnection"),apiCC.session.closeWhiteBoardClient("NETWORK_DISCONNECTION")},this.onChannelDisconnect=function(kt){lt.info("onChannelDisconnect");var Dt=Date();lt.debug("date :"+Dt),apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length),this.myWebRTC_Event.createChannelEvent("onChannelDisconnect",kt),this.channelHasBeenDisconnected=!0,apiCC.myApiCCWhiteBoardClient!==null&&(lt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(lt.log("Disconnection with an ongoing whiteboard"),lt.error("Whiteboard disconnectionTimer is set to:",apiCC.myApiCCWhiteBoardClient.disconnectionTimer),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=setTimeout(this.callback(this,"onWhiteBoardDisconnection"),apiCC.myApiCCWhiteBoardClient.disconnectionTimer)):lt.log("Disconnection without an ongoing whiteboard")),apiCC.session.JWTApzTokentimeOutId!==-1&&clearTimeout(apiCC.session.JWTApzTokentimeOutId)},this.onChannelReconnect_failed=function(){lt.info("onChannelReconnect_failed"),this.myWebRTC_Event.createChannelEvent("onChannelReconnect_failed")},this.onChannelReconnect=function(kt){lt.error("onChannelReconnect",kt);var Dt,Vt=null,Ot=0,Lt=[],Gt=null,tn=null,zt=null,cn=!1,un=0,fn=null,vn=null;if(Tt.conversationSpace!==null&&Tt.conversationSpace!==void 0?(lt.debug("conversationSpace is set :",Tt.conversationSpace),Tt.joinConversationSpace(Tt.conversationSpace)):lt.debug("no conversationSpace defined"),Tt.userData!==void 0&&Tt.userData!==null&&(lt.debug("sending userData :",Tt.userData),Tt.setUserData(Tt.userData,!0)),Tt.presenceGroup!==null?(lt.debug("presenceGroup is set :",Tt.presenceGroup),Tt.sendPresenceGroupManagementCommand("join",Tt.presenceGroup)):lt.debug("no presenceGroup defined"),Tt.subscribeToPresenceGroup!==null?(lt.debug("subscribeToPresenceGroup is set :",Tt.subscribeToPresenceGroup),Tt.sendPresenceGroupManagementCommand("subscribe",Tt.subscribeToPresenceGroup)):lt.debug("no subscribeToPresenceGroup defined"),apiCC.session.apiCCIMClient!==null?apiCC.session.apiCCIMClient.userDataSetted===!0?(Vt={photoURL:apiCC.session.apiCCIMClient.photoURL},apiCC.session.apiCCIMClient.setUserData(Vt)):lt.log("apiCC.session.apiCCIMClient.userDataSetted !== true"):lt.log("apiCC.session.apiCCIMClient === null"),apiCC.session.apiCCWebRTCClient!==null){if(apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length>0)for(cn=!0,Dt=0;Dt<apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length;Dt+=1)Gt={destId:(vn=apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable[Dt]).remoteId,convId:vn.userMediaId,callType:vn.callType,roomId:vn.roomId,data:vn.data,meshPublish:!0},Lt.push(Gt);if((Ot=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length)!==0){for(lt.log("Reconnecting with calls ongoing"),Dt=0;Dt<Ot;Dt+=1)apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Dt]!==null&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Dt]!==void 0?(vn=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Dt],lt.debug("call.iceState =",vn.iceState),vn.data!==null?vn.data.type!=="publish"&&vn.data.type!=="subscribe"?(lt.log("Call is P2P, updating media"),vn.updateMediaWithRetryManagement(!0),Gt={destId:vn.remoteId,convId:vn.callId,callType:vn.callType,roomId:vn.dest_roomId,data:vn.data},Lt.push(Gt)):(lt.log("Call is in an MCU session"),Gt={destId:vn.remoteId,convId:vn.callId,callType:vn.callType,roomId:vn.dest_roomId,data:vn.data},Lt.push(Gt)):(lt.log("Call is P2P, updating media - no data"),vn.updateMediaWithRetryManagement(!0),Gt={destId:vn.remoteId,convId:vn.callId,callType:vn.callType,roomId:vn.dest_roomId,data:vn.data},Lt.push(Gt))):lt.log("call no more exist");cn=!0}else lt.log("Reconnecting without calls ongoing");for(var Ft=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs,pn=0;pn<Ft.length;pn+=1){lt.log("Reconnecting with an ongoing sessionMCU");var gn=[];gn.push(Ft[pn].roomName),apiCC.session.sendPresenceGroupManagementCommand("join",gn),apiCC.session.sendPresenceGroupManagementCommand("subscribe",gn)}}if(apiCC.myApiCCWhiteBoardClient!==null&&(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId!==0&&(lt.debug("clearing whiteBoardDisconnectionTimeoutId"),clearTimeout(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=0),lt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(lt.log("Reconnection with an ongoing whiteboard"),un=apiCC.myApiCCWhiteBoardClient.roomId,cn=!0,lt.debug("Reconnection , sending request to get most recent whiteboard data"),apiCC.myApiCCWhiteBoardClient.paperSheetId=0,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})):lt.log("Reconnecting without an ongoing whiteboard")),apiCC.session.apiCCPointerSharingClient!==null&&(fn=apiCC.session.apiCCPointerSharingClient.getRoomIds()).length>0&&(cn=!0),cn===!0){lt.log("Sending reconnectContext to CCS"),tn={type:"reconnectContext",callList:Lt,whiteBoardRoomId:un},fn!==null&&fn.length>0&&(tn.pointerSharingRoomIds=fn);var Tn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs;if(Tn.length>0){tn.updateSession=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null),tn.updateSession.type="updateSession",tn.updateSessions=[];var In,kn=function(Sn,Rn){var wn=typeof Symbol<"u"&&Sn[Symbol.iterator]||Sn["@@iterator"];if(!wn){if(Array.isArray(Sn)||(wn=function(tr,Qn){if(tr){if(typeof tr=="string")return pt(tr,Qn);var jn=Object.prototype.toString.call(tr).slice(8,-1);return jn==="Object"&&tr.constructor&&(jn=tr.constructor.name),jn==="Map"||jn==="Set"?Array.from(tr):jn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jn)?pt(tr,Qn):void 0}}(Sn))||Rn&&Sn&&typeof Sn.length=="number"){wn&&(Sn=wn);var xn=0,Xn=function(){};return{s:Xn,n:function(){return xn>=Sn.length?{done:!0}:{done:!1,value:Sn[xn++]}},e:function(tr){throw tr},f:Xn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ln,Un=!0,rr=!1;return{s:function(){wn=wn.call(Sn)},n:function(){var tr=wn.next();return Un=tr.done,tr},e:function(tr){rr=!0,Ln=tr},f:function(){try{Un||wn.return==null||wn.return()}finally{if(rr)throw Ln}}}}(Tn);try{for(kn.s();!(In=kn.n()).done;){var Nn=In.value,hn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null,{sessionMCU:Nn});hn.type="updateSession",tn.updateSessions.push(hn)}}catch(Sn){kn.e(Sn)}finally{kn.f()}}zt=JSON.stringify(tn),lt.log("C->S: "+zt),apiCC.session.channel.socket.emit("reconnectContext",zt)}Lt.splice(0,Lt.length),this.myWebRTC_Event.createChannelEvent("onChannelReconnect",kt)},this.onChannelReconnecting=function(kt){lt.info("onChannelReconnecting",kt);var Dt=Date();lt.debug("date :"+Dt),this.myWebRTC_Event.createChannelEvent("onChannelReconnecting",kt)},this.onChannelOpened=function(){lt.info("Channel opened"),lt.log("this.channelId :"+this.channelId),this.channelReady=!0,this.channelHasBeenDisconnected===!1?Tt.onChannelOpened():(lt.log("onChannelOpened after a disconnection, no change on session"),this.channelHasBeenDisconnected=!1,Tt.ApiDBActivated!==!1&&Tt.ApiDBActivated!==void 0&&Tt.ApiDBActivated!==null&&(lt.log("apiDB initialisation"),apiDB.init(Tt.channel.socket))),this.updatePresenceGroupIsNeeded===!0&&(lt.log("Updating presence group"),Tt.leavePresenceGroup(this.oldPresenceGroup),Tt.joinPresenceGroup(this.newPresenceGroup)),this.updateSubscribeToPresenceGroupIsNeeded===!0&&(lt.log("Updating subscribe to presence group"),Tt.unsubscribePresenceGroup(this.oldSubscribeToPresenceGroup),Tt.subscribePresenceGroup(this.newSubscribeToPresenceGroup)),this.myWebRTC_Event.createChannelEvent("onChannelOpened")},this.onChannelMessage=function(kt,Dt){var Vt,Ot=null,Lt=null;try{Ot=JSON.parse(kt)}catch{return}(Vt=Ot.type==="checkCallStatus"||Ot.type==="apiRTCDataMessage"&&Ot.data&&["activeSpeaker","stopSpeaking"].indexOf(Ot.data.type)>=0)||lt.info("onChannelMessage S->C: "+kt),Ot.type==="IMMessage"&&(lt.log("IMMessage convId :"+Ot.IMId),Lt=Ot.IMId),Dt!==void 0&&(lt.trace("ack on message reception"),lt.trace("convId :"+Lt),Dt({reason:"ack",convId:Lt})),Tt.processSignalingMessage(Ot,{quiet:Vt})},this.onChannelConnectError=function(kt){lt.error("onChannelConnectError :",kt.message),this.myWebRTC_Event.createChannelEvent("onChannelConnectError",kt),this.checkIfConnectionAttemptNeedToBeStopped(kt)},this.onChannelReconnectError=function(kt){lt.log("onChannelReconnectError :",kt.message),this.myWebRTC_Event.createChannelEvent("onChannelReconnectError",kt),this.checkIfConnectionAttemptNeedToBeStopped(kt)},this.onChannelReconnectAttempt=function(kt){lt.log("onChannelReconnectAttempt :",kt),this.myWebRTC_Event.createChannelEvent("onChannelReconnectAttempt",kt),this.onChannelReconnecting(kt)},this.onChannelError=function(kt){lt.error("Channel error :",kt.message),this.checkIfConnectionAttemptNeedToBeStopped(kt),this.myWebRTC_Event.createChannelEvent("onChannelError",kt)},this.checkIfConnectionAttemptNeedToBeStopped=function(kt){lt.debug("checkIfConnectionAttemptNeedToBeStopped"),(kt.message==="not authorized"||kt.message.includes("access token failure:")||kt.message.includes("DISABLED_ENTERPRISE")||kt.message.includes("An account is needed")||kt.message.includes("ApiRTC update is needed")||kt.message.includes("applicationUUID is not authorized"))&&(lt.error("Stopping connection attempts"),this.socket.disconnect())},this.callback=function(kt,Dt){return this.closureHandler=function(Vt){return kt[Dt](Vt)},this.closureHandler},this.callbackWithParams=function(kt,Dt){return this.closureHandler=function(Vt,Ot,Lt){return kt[Dt](Vt,Ot,Lt)},this.closureHandler}},st=s(4708),ut=s(940);function ft(Tt){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},ft(Tt)}function yt(){yt=function(){return Tt};var Tt={},kt=Object.prototype,Dt=kt.hasOwnProperty,Vt=typeof Symbol=="function"?Symbol:{},Ot=Vt.iterator||"@@iterator",Lt=Vt.asyncIterator||"@@asyncIterator",Gt=Vt.toStringTag||"@@toStringTag";function tn(Ln,Un,rr){return Object.defineProperty(Ln,Un,{value:rr,enumerable:!0,configurable:!0,writable:!0}),Ln[Un]}try{tn({},"")}catch{tn=function(Un,rr,tr){return Un[rr]=tr}}function zt(Ln,Un,rr,tr){var Qn=Un&&Un.prototype instanceof fn?Un:fn,jn=Object.create(Qn.prototype),Bn=new wn(tr||[]);return jn._invoke=function(an,zn,Kn){var An="suspendedStart";return function(_n,On){if(An==="executing")throw new Error("Generator is already running");if(An==="completed"){if(_n==="throw")throw On;return{value:void 0,done:!0}}for(Kn.method=_n,Kn.arg=On;;){var Pn=Kn.delegate;if(Pn){var Vn=hn(Pn,Kn);if(Vn){if(Vn===un)continue;return Vn}}if(Kn.method==="next")Kn.sent=Kn._sent=Kn.arg;else if(Kn.method==="throw"){if(An==="suspendedStart")throw An="completed",Kn.arg;Kn.dispatchException(Kn.arg)}else Kn.method==="return"&&Kn.abrupt("return",Kn.arg);An="executing";var ir=cn(an,zn,Kn);if(ir.type==="normal"){if(An=Kn.done?"completed":"suspendedYield",ir.arg===un)continue;return{value:ir.arg,done:Kn.done}}ir.type==="throw"&&(An="completed",Kn.method="throw",Kn.arg=ir.arg)}}}(Ln,rr,Bn),jn}function cn(Ln,Un,rr){try{return{type:"normal",arg:Ln.call(Un,rr)}}catch(tr){return{type:"throw",arg:tr}}}Tt.wrap=zt;var un={};function fn(){}function vn(){}function Ft(){}var pn={};tn(pn,Ot,function(){return this});var gn=Object.getPrototypeOf,Tn=gn&&gn(gn(xn([])));Tn&&Tn!==kt&&Dt.call(Tn,Ot)&&(pn=Tn);var In=Ft.prototype=fn.prototype=Object.create(pn);function kn(Ln){["next","throw","return"].forEach(function(Un){tn(Ln,Un,function(rr){return this._invoke(Un,rr)})})}function Nn(Ln,Un){function rr(Qn,jn,Bn,an){var zn=cn(Ln[Qn],Ln,jn);if(zn.type!=="throw"){var Kn=zn.arg,An=Kn.value;return An&&ft(An)=="object"&&Dt.call(An,"__await")?Un.resolve(An.__await).then(function(_n){rr("next",_n,Bn,an)},function(_n){rr("throw",_n,Bn,an)}):Un.resolve(An).then(function(_n){Kn.value=_n,Bn(Kn)},function(_n){return rr("throw",_n,Bn,an)})}an(zn.arg)}var tr;this._invoke=function(Qn,jn){function Bn(){return new Un(function(an,zn){rr(Qn,jn,an,zn)})}return tr=tr?tr.then(Bn,Bn):Bn()}}function hn(Ln,Un){var rr=Ln.iterator[Un.method];if(rr===void 0){if(Un.delegate=null,Un.method==="throw"){if(Ln.iterator.return&&(Un.method="return",Un.arg=void 0,hn(Ln,Un),Un.method==="throw"))return un;Un.method="throw",Un.arg=new TypeError("The iterator does not provide a 'throw' method")}return un}var tr=cn(rr,Ln.iterator,Un.arg);if(tr.type==="throw")return Un.method="throw",Un.arg=tr.arg,Un.delegate=null,un;var Qn=tr.arg;return Qn?Qn.done?(Un[Ln.resultName]=Qn.value,Un.next=Ln.nextLoc,Un.method!=="return"&&(Un.method="next",Un.arg=void 0),Un.delegate=null,un):Qn:(Un.method="throw",Un.arg=new TypeError("iterator result is not an object"),Un.delegate=null,un)}function Sn(Ln){var Un={tryLoc:Ln[0]};1 in Ln&&(Un.catchLoc=Ln[1]),2 in Ln&&(Un.finallyLoc=Ln[2],Un.afterLoc=Ln[3]),this.tryEntries.push(Un)}function Rn(Ln){var Un=Ln.completion||{};Un.type="normal",delete Un.arg,Ln.completion=Un}function wn(Ln){this.tryEntries=[{tryLoc:"root"}],Ln.forEach(Sn,this),this.reset(!0)}function xn(Ln){if(Ln){var Un=Ln[Ot];if(Un)return Un.call(Ln);if(typeof Ln.next=="function")return Ln;if(!isNaN(Ln.length)){var rr=-1,tr=function Qn(){for(;++rr<Ln.length;)if(Dt.call(Ln,rr))return Qn.value=Ln[rr],Qn.done=!1,Qn;return Qn.value=void 0,Qn.done=!0,Qn};return tr.next=tr}}return{next:Xn}}function Xn(){return{value:void 0,done:!0}}return vn.prototype=Ft,tn(In,"constructor",Ft),tn(Ft,"constructor",vn),vn.displayName=tn(Ft,Gt,"GeneratorFunction"),Tt.isGeneratorFunction=function(Ln){var Un=typeof Ln=="function"&&Ln.constructor;return!!Un&&(Un===vn||(Un.displayName||Un.name)==="GeneratorFunction")},Tt.mark=function(Ln){return Object.setPrototypeOf?Object.setPrototypeOf(Ln,Ft):(Ln.__proto__=Ft,tn(Ln,Gt,"GeneratorFunction")),Ln.prototype=Object.create(In),Ln},Tt.awrap=function(Ln){return{__await:Ln}},kn(Nn.prototype),tn(Nn.prototype,Lt,function(){return this}),Tt.AsyncIterator=Nn,Tt.async=function(Ln,Un,rr,tr,Qn){Qn===void 0&&(Qn=Promise);var jn=new Nn(zt(Ln,Un,rr,tr),Qn);return Tt.isGeneratorFunction(Un)?jn:jn.next().then(function(Bn){return Bn.done?Bn.value:jn.next()})},kn(In),tn(In,Gt,"Generator"),tn(In,Ot,function(){return this}),tn(In,"toString",function(){return"[object Generator]"}),Tt.keys=function(Ln){var Un=[];for(var rr in Ln)Un.push(rr);return Un.reverse(),function tr(){for(;Un.length;){var Qn=Un.pop();if(Qn in Ln)return tr.value=Qn,tr.done=!1,tr}return tr.done=!0,tr}},Tt.values=xn,wn.prototype={constructor:wn,reset:function(Ln){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Rn),!Ln)for(var Un in this)Un.charAt(0)==="t"&&Dt.call(this,Un)&&!isNaN(+Un.slice(1))&&(this[Un]=void 0)},stop:function(){this.done=!0;var Ln=this.tryEntries[0].completion;if(Ln.type==="throw")throw Ln.arg;return this.rval},dispatchException:function(Ln){if(this.done)throw Ln;var Un=this;function rr(zn,Kn){return jn.type="throw",jn.arg=Ln,Un.next=zn,Kn&&(Un.method="next",Un.arg=void 0),!!Kn}for(var tr=this.tryEntries.length-1;tr>=0;--tr){var Qn=this.tryEntries[tr],jn=Qn.completion;if(Qn.tryLoc==="root")return rr("end");if(Qn.tryLoc<=this.prev){var Bn=Dt.call(Qn,"catchLoc"),an=Dt.call(Qn,"finallyLoc");if(Bn&&an){if(this.prev<Qn.catchLoc)return rr(Qn.catchLoc,!0);if(this.prev<Qn.finallyLoc)return rr(Qn.finallyLoc)}else if(Bn){if(this.prev<Qn.catchLoc)return rr(Qn.catchLoc,!0)}else{if(!an)throw new Error("try statement without catch or finally");if(this.prev<Qn.finallyLoc)return rr(Qn.finallyLoc)}}}},abrupt:function(Ln,Un){for(var rr=this.tryEntries.length-1;rr>=0;--rr){var tr=this.tryEntries[rr];if(tr.tryLoc<=this.prev&&Dt.call(tr,"finallyLoc")&&this.prev<tr.finallyLoc){var Qn=tr;break}}Qn&&(Ln==="break"||Ln==="continue")&&Qn.tryLoc<=Un&&Un<=Qn.finallyLoc&&(Qn=null);var jn=Qn?Qn.completion:{};return jn.type=Ln,jn.arg=Un,Qn?(this.method="next",this.next=Qn.finallyLoc,un):this.complete(jn)},complete:function(Ln,Un){if(Ln.type==="throw")throw Ln.arg;return Ln.type==="break"||Ln.type==="continue"?this.next=Ln.arg:Ln.type==="return"?(this.rval=this.arg=Ln.arg,this.method="return",this.next="end"):Ln.type==="normal"&&Un&&(this.next=Un),un},finish:function(Ln){for(var Un=this.tryEntries.length-1;Un>=0;--Un){var rr=this.tryEntries[Un];if(rr.finallyLoc===Ln)return this.complete(rr.completion,rr.afterLoc),Rn(rr),un}},catch:function(Ln){for(var Un=this.tryEntries.length-1;Un>=0;--Un){var rr=this.tryEntries[Un];if(rr.tryLoc===Ln){var tr=rr.completion;if(tr.type==="throw"){var Qn=tr.arg;Rn(rr)}return Qn}}throw new Error("illegal catch attempt")},delegateYield:function(Ln,Un,rr){return this.delegate={iterator:xn(Ln),resultName:Un,nextLoc:rr},this.method==="next"&&(this.arg=void 0),un}},Tt}function vt(Tt,kt,Dt,Vt,Ot,Lt,Gt){try{var tn=Tt[Lt](Gt),zt=tn.value}catch(cn){return void Dt(cn)}tn.done?kt(zt):Promise.resolve(zt).then(Vt,Ot)}var St=et.Y.get("ApiCCSession"),xt=apiCC.myWebRTC_Event,Ut=function(Tt){var kt=this;this.apiCCId=null,this.apiCCSessionId=apiCC.randomString(22),this.apiKey=null,this.nickname=null,this.photoURL=null,this.apiCCWebRTCClient=null,this.apiCCIMClient=null,this.apiCCDataClient=null,this.apiCCIDSessionStorage=null,this.apiKeySessionStorage=null,this.apiCCIdPersistenceTimeout=5e3,this.channel=null,this.recordActivated=Tt.recordActivated,this.sessionId=null,this.apiCCPointerSharingClient=null,this.apiCCWhiteBoardClient=null,this.ccsServer=Tt.ccsServer,this.userData=Tt.userData,this.apiDBActivated=!0,Tt.ApiDBActivated=!0,this.webRTCPluginActivated=Tt.webRTCPluginActivated,this.token=Tt.token,this.JWTApzToken=null,this.JWTApzTokenRefreshTimer=396e5,this.JWTApzTokentimeOutId=-1,this.conversationSpace=Tt.conversationSpace,this.tryAudioOnlyAfterUserMediaError=Tt.tryAudioOnlyAfterUserMediaError,this.deactivateReloadOnCancel=Tt.deactivateReloadOnCancel,this.connectedUsersList=[],this.messageTimeOutTable=[],this.ccsConnectionRetryNb=Tt.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=Tt.ccsConnectionRetryDelay,this.sequentialMessagesStorage={},this.cloudIsSecured=Tt.cloudIsSecured,Tt.messageTimeOutTimer!==void 0?this.messageTimeOutTimer=Tt.messageTimeOutTimer:this.messageTimeOutTimer=1e4,St.log("messageTimeOutTimer set to : "+this.messageTimeOutTimer),Tt.presenceGroup!==void 0?this.presenceGroup=Tt.presenceGroup:this.presenceGroup=["default"],Tt.subscribeToPresenceGroup!==void 0?this.subscribeToPresenceGroup=Tt.subscribeToPresenceGroup:this.subscribeToPresenceGroup=["default"],this.presenceGroupAddedByApiRTC=[],this.subscribeToPresenceGroupAddedByApiRTC=[],this.remoteAccessInvitation=null,this.isDeviceWebRTCCompliant=function(){return apiCC.isWebRTCCompliant()},this.isDeviceDTLSCompliant=function(){var Ot=dt.E2.getBrowser(),Lt=parseInt(Ot.version,10);return!(Ot.name==="Chrome"&&Lt<44&&(St.log("isDeviceDTLSCompliant FALSE : Chrome V < 44"),1))},this.userData===void 0||this.userData===null?(this.userData={},this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):this.userData.webRtcCompliant===void 0||this.userData.webRtcCompliant===null?(this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):St.log("userData webRtcCompliant set to :",this.userData.webRtcCompliant),this.userData.osName=dt.BF,this.userData.browser=dt.Xh,this.userData.deviceType=dt.vO,this.userData.deviceVendor=dt.Cm,this.userData.browser_version=dt.dc,this.userData.browser_major_version=dt.PR,this.userData.apiRTCVersion=apiCC.version,this.userData.cpuArchitecture=dt.Ne,this.userData.engineName=dt.AA,this.userData.engineVersion=dt.TI,apiRTC.userAgentInstance!==void 0&&(this.userData.remoteAccessUserSupport=apiRTC.userAgentInstance.getCapabilities().remoteAccessUser),dt.BF==="Android"&&typeof cordova<"u"&&(this.userData.platform="Android"),typeof apiRTC_React<"u"&&(this.userData.react=!0);var Dt=function(){var Ot,Lt=(Ot=yt().mark(function Gt(){var tn,zt;return yt().wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.next=2,(0,dt.Ak)();case 2:return tn=cn.sent,kt.userData.deviceModel=tn,cn.next=6,(0,dt.RX)();case 6:zt=cn.sent,kt.userData.osVersion=zt,apiCC.osVersion=zt,kt.startApiCCSession(Tt);case 10:case"end":return cn.stop()}},Gt)}),function(){var Gt=this,tn=arguments;return new Promise(function(zt,cn){var un=Ot.apply(Gt,tn);function fn(Ft){vt(un,zt,cn,fn,vn,"next",Ft)}function vn(Ft){vt(un,zt,cn,fn,vn,"throw",Ft)}fn(void 0)})});return function(){return Lt.apply(this,arguments)}}();function Vt(Ot){return Ot instanceof Array?(St.log("data instanceof Array"),!0):(St.log("data not instanceof Array"),!1)}this.roomManagerEventHandler=function(Ot){if(St.debug("roomManagerEventHandler, roomId :"+Ot.roomId+", type :"+Ot.type+", roomType :"+Ot.roomType),Ot.roomType==="whiteBoard"){if(apiCC.myApiCCWhiteBoardClient===null||apiCC.myApiCCWhiteBoardClient===void 0)return void St.log("No whiteBoard created, leaving msg processing");Ot.type==="roomCreation"&&(St.log("whiteBoard : roomCreation"),apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId,apiCC.myApiCCWhiteBoardClient.paperSheetId++,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),Ot.type==="roomInvitation"&&(St.log("whiteBoard : roomInvitation"),apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId),Ot.type==="roomMessage"&&apiCC.myApiCCWhiteBoardClient.messageProcessing(Ot.data),Ot.type==="roomJoin"&&(St.log("whiteBoard : roomJoin"),apiCC.myApiCCWhiteBoardClient.roomJoined=!0,apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId)}else Ot.roomType==="pointerSharing"?apiCC.session.apiCCPointerSharingClient&&Ot.type==="roomJoin"&&apiCC.session.apiCCPointerSharingClient.processMessageRoomJoin(Ot):Ot.roomType==="coBrowsing"?Ot.type==="roomMessage"&&St.log("coBrowsing : roomMessage :"+Ot):St.log("roomManagerEventHandler for msg.roomType :"+Ot.roomType)},this.callback=function(Ot,Lt){return this.closureHandler=function(Gt){return Ot[Lt](Gt)},this.closureHandler},this.getSessionStorage=function(Ot){var Lt=sessionStorage.getItem(Ot);if(Lt===null)return null;try{var Gt=JSON.parse(Lt),tn=new Date(Gt.expiresAt);return new Date>=tn?(sessionStorage.removeItem(Ot),null):Gt.value}catch{St.error("Something went wrong when parsing JSON from session storage values")}},this.generateApiCCID=function(){St.debug("apiCCId is not defined by user, checking if apiCCId exist in sessionStorage"),typeof apiRTC_React>"u"&&(this.apiCCIDSessionStorage=this.getSessionStorage("apiCCId"),this.apiKeySessionStorage=this.getSessionStorage("apiKey")),this.apiCCIDSessionStorage!==null?(St.log("apiCCId exist in sessionStorage : "+this.apiCCIDSessionStorage),this.apiKeySessionStorage!==null?(St.log("apiKey exist in sessionStorage : "+this.apiKeySessionStorage),this.apiKeySessionStorage===this.apiKey?(St.log("apiKey is the same, keeping apiCCId"),this.apiCCId=this.apiCCIDSessionStorage):(St.log("apiKey is not the same, generating an  apiCCId"),this.apiCCId=Math.floor(1000001*Math.random()).toString(),St.log("Creation of new ApiRTC session with Id : "+this.apiCCId))):this.apiCCId=this.apiCCIDSessionStorage):(St.log(" No apiCCId found on sessionStorage : generating an apiCCId"),this.apiCCId=String(1e5+Math.floor(9e5*Math.random())),St.log("Creation of new ApiRTC session with Id : "+this.apiCCId))},this.getNumericIdFromAlpha=function(Ot){St.log("getNumericIdFromAlpha new : "+Ot);var Lt,Gt=0;if(Ot.length===0)return Gt;for(Lt=0;Lt<Ot.length;Lt++)Gt=(Gt<<5)-Gt+Ot.charCodeAt(Lt),Gt&=Gt;return St.log("getNumericIdFromAlpha returned value: "+(Gt>>>0)),Gt>>>0},this.startApiCCSession=function(Ot){if(St.debug("startApiCCSession"),this.roomMgr=new ot(this,this.callback(this,"roomManagerEventHandler")),Ot.xhrPolling===!0?this.xhrPolling=!0:this.xhrPolling=!1,Ot.appId!==void 0&&(this.appId=Ot.appId),Ot.siteId!==void 0&&(this.siteId=Ot.siteId),Ot.apiKey===void 0)return St.error('Error : Initialisation parameters: "apikey" for session creation is not defined'),null;if(St.log("Session creation with apiKey : "+Ot.apiKey),St.log("Session creation with apiCCId : "+Ot.apiCCId),this.apiKey=Ot.apiKey,Ot.onReady===void 0&&typeof apiRTC_React>"u")return St.error('Error : Initialisation parameters: "onReady" for session creation is not defined'),null;if(apiCC.addEventListener("sessionReady",Ot.onReady),typeof apiRTC_React>"u"&&(this.sessionId=this.getSessionStorage("sessionId")),Ot.apiCCId===void 0||Ot.apiCCId===""||Ot.apiCCId===null)this.generateApiCCID();else if(St.log("Session creation with apiCCId defined by user : "+Ot.apiCCId),St.debug("params.idConversionActivated : "+Ot.idConversionActivated),Ot.idConversionActivated===void 0||Ot.idConversionActivated===!0)if((0,st._C)(Ot.apiCCId))this.apiCCId=Ot.apiCCId.toString();else{St.log("Converting this Id in a numeric one");var Lt=this.getNumericIdFromAlpha(Ot.apiCCId);Lt+="",St.log("Numeric Id is : "+Lt),(0,st._C)(Lt)?(St.warn("Id has been converted to a numeric one"),this.apiCCId=Lt.toString()):(St.warn("Error : Defined apiCCId :"+Ot.apiCCId+" is not numeric. ApiCCID is generated"),this.generateApiCCID())}else St.log("String id convertion is deactivated"),this.apiCCId=Ot.apiCCId.toString();Ot.apiCCIdPersistenceTimeout!==null&&typeof Ot.apiCCIdPersistenceTimeout=="number"&&Ot.apiCCIdPersistenceTimeout>=0&&(this.apiCCIdPersistenceTimeout=Ot.apiCCIdPersistenceTimeout),this.channel!==null&&(St.log("this.channel is defined"),delete this.channel),this.channel=new mt(this),this.channel.initialize(),Ot.nickname!==null&&Ot.nickname!==void 0?(St.log("Nickname is defined :"+Ot.nickname),this.nickname=Ot.nickname):(St.log("Nickname is not defined, setting to apiCCId value :"+this.apiCCId),this.nickname=this.apiCCId),Ot.photoURL!==null&&Ot.photoURL!==void 0?(St.log("photoURL is defined :"+Ot.photoURL),this.photoURL=Ot.photoURL):(St.log("photoURL is not defined"),this.photoURL=null)},typeof apiRTC_React<"u"?this.startApiCCSession(Tt):Dt(),this.reOpenChannel=function(Ot,Lt){St.info("reOpenChannel"),this.apiCCId=Ot.toString(),this.apiKey=Lt,this.channel.socket!==void 0&&this.channel.socket!==null&&this.channel.socket.disconnect(),this.channel.channelReady=!1,this.channel.socket=null,this.channel.channelId=this.apiCCId,this.channel.initialize(),this.apiCCWebRTCClient!==null&&this.apiCCWebRTCClient.webRTCClient!==null&&(this.apiCCWebRTCClient.webRTCClient.socket=this.channel.socket)},this.onChannelOpened=function(){St.debug("ApiCCSession onChannelOpened"),Tt.ApiDBActivated!==!1&&Tt.ApiDBActivated!==void 0&&Tt.ApiDBActivated!==null&&(St.log("apiDB initialisation"),apiDB.init(this.channel.socket)),xt.createSessionReadyEvent(apiCC.session.apiCCId)},this.createWebRTCClient=function(Ot){St.debug("createWebRTCClient");var Lt={};this.apiCCWebRTCClient=new apiCC.ApiCCWebRTCClient(this),apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),Lt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,Lt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(Lt),setTimeout(function(){xt.createWebRTCClientCreatedEvent()});var Gt=apiCC.getUserMediaStreamIds(),tn=Gt.length;for(St.debug("listing accessToLocalMedia "+tn);--tn>=0;)if(apiCC.getUserMediaStream(Gt[tn]).accessToLocalMedia()){St.debug("setting accessToLocalMedia to true"),this.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0;break}return this.apiCCWebRTCClient},this.createPointerSharingClient=function(){return this.apiCCPointerSharingClient===null&&(this.apiCCPointerSharingClient=new apiCC.ApiCCPointerSharingClient(this)),this.apiCCPointerSharingClient},this.closePointerSharingClient=function(){this.apiCCPointerSharingClient!==null&&this.apiCCPointerSharingClient instanceof apiCC.ApiCCPointerSharingClient&&(this.apiCCPointerSharingClient.stop(),this.apiCCPointerSharingClient=null)},this.createWhiteBoard=function(Ot,Lt,Gt,tn){return St.info("createWhiteBoard"),this.apiCCWhiteBoardClient=apiCC.createWhiteBoard(Ot,Lt,Gt,tn),this.apiCCWhiteBoardClient},this.closeWhiteBoardClient=function(Ot){St.info("closeWhiteBoardClient"),apiCC.closeWhiteBoardClient(Ot)},this.createIMClient=function(Ot){return St.debug("createIMClient"),this.apiCCIMClient=new apiCC.ApiCCIMClient(this,Ot),this.apiCCIMClient},this.createDataClient=function(){return St.info("createDataClient"),this.apiCCDataClient=new apiCC.ApiCCDataClient(this),this.apiCCDataClient},this.updatingQuery=function(Ot){St.debug("updatingQuery");var Lt=null,Gt=null,tn=null;return Lt=(0,st.dD)(Ot),this.userData!==void 0?(Gt=JSON.stringify(this.userData),tn=encodeURIComponent(Gt),Lt.userData=tn,(0,st.Wc)(Lt)):Ot},this.setUserData=function(Ot,Lt){St.debug("setUserData in session :",Ot);var Gt,tn,zt,cn=[],un=this.userData;if(this.userData!==void 0){if(this.userData=(0,st.S6)(this.userData,Ot),St.debug("this.userData :",this.userData),St.debug("actualUserData :",un),St.debug("forceSendData :",Lt),Lt!==!0&&JSON.stringify(this.userData)===JSON.stringify(un))return void St.debug("userData is not changed, leaving userData processing")}else this.userData=Ot;for(Gt={type:"setUserData",userData:Ot},tn=JSON.stringify(Gt),St.log("C->S: "+tn),this.channel.socket.emit("setUserData",tn),St.log("socket.io 1.X : socket.io.opts.query :"+this.channel.socket.io.opts.query),this.channel.socket.io.opts.query=this.updatingQuery(this.channel.socket.io.opts.query),St.log("socket.io 1.X : after update : socket.io.opts.query :"+this.channel.socket.io.opts.query),zt=0;zt<this.connectedUsersList.length;zt+=1)this.apiCCId===this.connectedUsersList[zt].userId&&(this.connectedUsersList[zt].userData=this.userData,cn[0]=this.apiCCId,xt.createConnectedUsersListUpdateEvent(this.connectedUsersList[zt].group,cn,"userDataUpdate","userDataUpdate"))},this.sendPresenceGroupManagementCommand=function(Ot,Lt){if(St.debug("sendPresenceGroupManagementCommand :"+Ot+" for group : "+Lt),Vt(Lt)===!0){var Gt,tn,zt,cn=Lt.length;if(Ot==="unsubscribe")for(zt=0;zt<cn;zt+=1)this.removeGroupDataFromConnectedUsersList(Lt[zt]);cn!==1||Lt[0]!=="deactivated"?(Gt={type:"presenceGroupManagement",command:Ot,group:Lt},tn=JSON.stringify(Gt),St.log("C->S: "+tn),this.channel.socket.emit("presenceGroupManagement",tn)):St.debug("leaving sendPresenceGroupManagementCommand for group deactivated")}else St.error("group parameter value is not correct, need to be a JSON array")},this.sendConversationSpaceCommand=function(Ot,Lt){var Gt,tn;St.debug("sendConversationSpaceCommand :"+Ot+" for conversationSpace : "+Lt),Gt={type:"conversationSpaceManagement",command:Ot,conversationSpace:Lt},tn=JSON.stringify(Gt),St.log("C->S: "+tn),this.channel.socket.emit("conversationSpaceManagement",tn)},this.joinPresenceGroup=function(Ot,Lt){var Gt=this;Lt||((Lt={}).doneByApiRTC=!1),St.debug("joinPresenceGroup :"+Ot),Vt(Ot)===!0?(this.sendPresenceGroupManagementCommand("join",Ot),Ot.forEach(function(tn){var zt=Gt.presenceGroupAddedByApiRTC.indexOf(tn);Gt.presenceGroup.indexOf(tn)===-1&&(Gt.presenceGroup.push(tn),Lt.doneByApiRTC&&zt===-1&&Gt.presenceGroupAddedByApiRTC.push(tn)),Lt.doneByApiRTC===!1&&zt!==-1&&Gt.presenceGroupAddedByApiRTC.splice(zt,1)})):St.log("group parameter value is not correct, need to be a JSON array"),St.debug("this.presenceGroup :"+this.presenceGroup)},this.leavePresenceGroup=function(Ot,Lt){var Gt=this;Lt||((Lt={}).doneByApiRTC=!1),St.debug("leavePresenceGroup :"+Ot),Vt(Ot)===!0?Ot.forEach(function(tn){var zt=Gt.presenceGroupAddedByApiRTC.indexOf(tn);if(Lt.doneByApiRTC===!1||Lt.doneByApiRTC===!0&&zt!==-1){var cn=Gt.presenceGroup.indexOf(tn);cn!==-1&&Gt.presenceGroup.splice(cn,1),Gt.sendPresenceGroupManagementCommand("leave",[tn])}zt!==-1&&Gt.presenceGroupAddedByApiRTC.splice(zt,1)}):St.log("group parameter value is not correct, need to be a JSON array"),St.debug("this.presenceGroup :"+this.presenceGroup)},this.subscribePresenceGroup=function(Ot,Lt){var Gt=this;Lt||((Lt={}).doneByApiRTC=!1),St.debug("subscribePresenceGroup :"+Ot),Vt(Ot)===!0?(this.sendPresenceGroupManagementCommand("subscribe",Ot),Ot.forEach(function(tn){var zt=Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(tn);Gt.subscribeToPresenceGroup.indexOf(tn)===-1&&(Gt.subscribeToPresenceGroup.push(tn),Lt.doneByApiRTC&&Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(tn)===-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.push(tn)),Lt.doneByApiRTC===!1&&zt!==-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.splice(zt,1)})):St.log("group parameter value is not correct, need to be a JSON array"),St.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.unsubscribePresenceGroup=function(Ot,Lt){var Gt=this;Lt||((Lt={}).doneByApiRTC=!1),St.debug("unsubscribePresenceGroup :"+Ot),Vt(Ot)===!0?Ot.forEach(function(tn){var zt=Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(tn);if(Lt.doneByApiRTC===!1||Lt.doneByApiRTC===!0&&zt!==-1){var cn=Gt.subscribeToPresenceGroup.indexOf(tn);cn!==-1&&Gt.subscribeToPresenceGroup.splice(cn,1),Gt.sendPresenceGroupManagementCommand("unsubscribe",[tn])}zt!==-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.splice(zt,1)}):St.log("group parameter value is not correct, need to be a JSON array"),St.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.joinConversationSpace=function(Ot){St.info("joinConversationSpace :"+Ot),this.sendConversationSpaceCommand("join",Ot),this.conversationSpace=Ot},this.leaveConversationSpace=function(Ot){St.info("leaveConversationSpace :"+Ot),Ot!=null&&this.conversationSpace===Ot?(this.sendConversationSpaceCommand("leave",Ot),this.conversationSpace=null):St.debug("socket is not in the conversationSpace, we request to leave")},this.subscribeToCloudEvent=function(Ot,Lt){this.sendCloudEventsCommand("subscribe",Ot,Lt)},this.unsubscribeToCloudEvent=function(Ot,Lt){this.sendCloudEventsCommand("unsubscribe",Ot,Lt)},this.sendCloudEventsCommand=function(Ot,Lt,Gt){if(["subscribe","unsubscribe"].includes(Ot))if(Lt&&typeof Lt=="string"){if(Gt){if(ft(Gt)!=="object")return void St.error("wrong headers format");for(var tn=0,zt=Object.values(Gt);tn<zt.length;tn++){var cn=zt[tn];if(!cn||typeof cn!="string")return void St.error("wrong headers format")}}var un={type:"cloudEvents",command:Ot,topic:Lt};Gt&&(un.headers=Gt);var fn=JSON.stringify(un);St.log("C->S:",fn),this.channel.socket.emit("cloudEvents",fn)}else St.error("wrong topic format");else St.error("wrong command")},this.getConversationList=function(Ot){St.info("getConversationList request");var Lt,Gt;Gt=Ot!==void 0?{type:"getConversationList",lastConversationNb:Ot}:{type:"getConversationList",lastConversationNb:50},Lt=JSON.stringify(Gt),St.log("C->S: "+Lt),this.channel.socket.emit("getConversationList",Lt)},this.receiveConversationListAnswer=function(Ot){St.info("receiveConversationListAnswer"),St.log("msg.convList.length :"+Ot.convList.length);var Lt,Gt=Ot.convList.length,tn=[],zt=null;for(Lt=0;Lt<Gt;Lt+=1)St.log("i ="+Lt),zt=JSON.parse(Ot.convList[Lt]),tn.push(zt);xt.createReceiveConversationListAnswerEvent(tn)},this.getContactOccurrencesFromConversationList=function(Ot){St.info("getContactOccurrencesFromConversationList request");var Lt,Gt;Gt=Ot!==void 0?{type:"getContactOccurrencesFromConversationList",lastConversationNb:Ot}:{type:"getContactOccurrencesFromConversationList",lastConversationNb:50},Lt=JSON.stringify(Gt),St.log("C->S: "+Lt),this.channel.socket.emit("getContactOccurrencesFromConversationList",Lt)},this.receiveContactOccurrencesFromConversationListAnswer=function(Ot){St.info("receiveContactOccurrencesFromConversationListAnswer"),St.log("msg.contactOccurrencesTable.length :"+Ot.contactOccurrencesTable.length),xt.createReceiveContactOccurrencesFromConversationListAnswerEvent(Ot.contactOccurrencesTable)},this.getConversationDetailReport=function(Ot){var Lt,Gt;St.info("getConversationDetailReport for convId :"+Ot),Lt={type:"getConversationDetailReport",convId:Ot},Gt=JSON.stringify(Lt),St.log("C->S: "+Gt),this.channel.socket.emit("getConversationDetailReport",Gt)},this.receiveConversationDetailReportAnswer=function(Ot){St.info("receiveConversationDetailReportAnswer"),St.log("msg.CDR :"+Ot.CDR),xt.createReceiveConversationDetailReportAnswerEvent(Ot.CDR)},this.manageConnectedUsersList=function(Ot,Lt,Gt,tn){St.debug("manageConnectedUsersList");var zt,cn,un,fn=!1,vn=0,Ft=!1,pn="unset";for(St.trace("manageConnectedUsersList.length :"+Ot.length),St.trace("this.connectedUsersList.length :"+this.connectedUsersList.length),St.log("state :"+Lt),St.log("group :"+Gt),un=0;un<Ot.length;un+=1)Ot[un].group=Gt;if(Lt==="online")for(St.log("state : online"),zt=0;zt<Ot.length;zt+=1){if(St.log("msgConnectedUsersListWithStatus  :"+zt),fn=!1,this.connectedUsersList.length===0){St.log("this.connectedUsersList is empty"),this.connectedUsersList=Ot,St.log("this.connectedUsersList[0].group :"+this.connectedUsersList[0].group),xt.createConnectedUsersListUpdateEvent(Gt,tn,Lt,"newConnectionState");break}for(cn=0;cn<this.connectedUsersList.length;cn+=1)if(Ft=!1,Ot[zt].userId===this.connectedUsersList[cn].userId&&Ot[zt].group===this.connectedUsersList[cn].group){fn=!0,JSON.stringify(this.connectedUsersList[cn].userData)!==JSON.stringify(Ot[zt].userData)&&(St.log("userData is updated"),this.connectedUsersList[cn].userData=Ot[zt].userData,Ft=!0,pn="userDataUpdate"),this.connectedUsersList[cn].callState!==Ot[zt].callState&&(St.log("callState is updated"),this.connectedUsersList[cn].callState=Ot[zt].callState,Ft=!0,pn="callState"),Ft===!0&&xt.createConnectedUsersListUpdateEvent(Gt,tn,Lt,pn);break}if(fn===!1){St.log("Adding user in connectedUsersList :"+Ot[zt].userId),this.connectedUsersList.push(Ot[zt]);var gn=[];gn[0]=Ot[zt].userId,xt.createConnectedUsersListUpdateEvent(Gt,gn,Lt,"newConnectionState")}}else for(St.log("state : offline"),zt=0;zt<Ot.length;zt+=1)for(St.log("msgConnectedUsersListWithStatus  :"+zt),vn=this.connectedUsersList.length,cn=0;cn<vn;cn+=1)if(Ot[zt].userId===this.connectedUsersList[cn].userId&&Ot[zt].group===this.connectedUsersList[cn].group){St.log("Removing user in connectedUsersList :"+Ot[zt].userId),St.log("... in group :"+Ot[zt].group),this.connectedUsersList.splice(cn,1),xt.createConnectedUsersListUpdateEvent(Gt,tn,Lt,"newConnectionState");break}},this.removeGroupDataFromConnectedUsersList=function(Ot){St.debug("removeGroupDataFromConnectedUsersList for group :",Ot);var Lt,Gt=this.connectedUsersList.length,tn=[],zt=0;for(St.debug("this.connectedUsersList.length :",this.connectedUsersList.length),Lt=0;Lt<Gt;Lt+=1)St.debug("this.connectedUsersList[j].group :",this.connectedUsersList[Lt-zt].group),St.debug("group :",Ot),this.connectedUsersList[Lt-zt].group===Ot&&(St.log("Removing user in connectedUsersList :"+this.connectedUsersList[Lt-zt].userId),tn[0]=this.connectedUsersList[Lt-zt].userId,this.connectedUsersList.splice(Lt-zt,1),zt+=1,xt.createConnectedUsersListUpdateEvent(Ot,tn,"offline","newConnectionState"))},this.getConnectedUsersList=function(Ot){Ot!==void 0?St.log("getConnectedUsersList for group : "+Ot):St.log("getConnectedUsersList : complete users list");var Lt,Gt=[];if(Ot==null)return this.connectedUsersList;for(St.log("filtering list for group : "+Ot),Lt=0;Lt<this.connectedUsersList.length;Lt+=1)this.connectedUsersList[Lt].group===Ot&&Gt.push(this.connectedUsersList[Lt]);return Gt},this.isClientWebRtcCompliant=function(Ot){var Lt,Gt,tn=null,zt=null;if(Ot!==void 0)for(Lt=this.getConnectedUsersList(),Gt=0;Gt<Lt.length;Gt++)Lt[Gt].userId===Ot&&(zt=Lt[Gt].userData)!=null&&zt.webRtcCompliant!==void 0&&(tn=zt.webRtcCompliant);return tn},this.isClientDTLSCompliant=function(Ot){var Lt,Gt,tn=!0,zt=null;if(Ot!==void 0)for(Lt=this.getConnectedUsersList(),Gt=0;Gt<Lt.length;Gt++)Lt[Gt].userId===Ot&&(zt=Lt[Gt].userData,St.log("userData :",zt),zt!=null&&zt.dtlsCompliant!==void 0&&(tn=zt.dtlsCompliant));return tn},this.getConnectedUserIdsList=function(Ot){St.info("getConnectedUserIdsList, group :",Ot);var Lt,Gt,tn=[],zt=!1,cn={},un=[];if(Ot!==void 0?St.log("getConnectedUserIdsList for group : "+Ot):St.log("getConnectedUserIdsList : complete users list"),Ot==null)un=JSON.parse(JSON.stringify(this.connectedUsersList));else for(Lt=0;Lt<this.connectedUsersList.length;Lt+=1)this.connectedUsersList[Lt].group===Ot&&un.push(this.connectedUsersList[Lt]);for(Lt=0;Lt<un.length;Lt+=1){for(zt=!1,Gt=0;Gt<tn.length;Gt++)if(tn[Gt].userId===un[Lt].userId){zt=!0;break}zt===!1&&((cn={}).userId=un[Lt].userId,cn.callState=un[Lt].callState,cn.userData=un[Lt].userData,tn.push(cn))}return tn},this.getGroupsFromConnectedUsersList=function(Ot){St.info("getGroupsFroConnectedUsersList");var Lt,Gt=[],tn=!1;for(Lt=0;Lt<this.connectedUsersList.length;Lt+=1)this.connectedUsersList[Lt].userId===Ot&&(St.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Lt].group)),tn=!0,Gt.push(this.connectedUsersList[Lt].group));return tn===!0?JSON.stringify(Gt):"User_Not_Found"},this.getConnectedUserInfo=function(Ot,Lt){St.info("getConnectedUserInfo"),St.log("getConnectedUserInfo userId :",Ot),St.log("getConnectedUserInfo infoType :",Lt);var Gt,tn=null,zt=null;switch(Lt){case"all":for(St.log("all"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return St.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt])),tn=this.getGroupsFromConnectedUsersList(Ot),(zt=JSON.parse(JSON.stringify(this.connectedUsersList[Gt]))).groups=tn,delete zt.group,JSON.stringify(zt);break;case"callState":for(St.log("callState"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return St.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt].callState)),this.connectedUsersList[Gt].callState;break;case"userData":for(St.log("userData"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return St.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt].userData)),JSON.stringify(this.connectedUsersList[Gt].userData);break;case"groups":return St.log("groups"),this.getGroupsFromConnectedUsersList(Ot);default:St.log("infoType not defined switch case : "+Lt)}return"User_Not_Found"},this.isConnectedUser=function(Ot){St.info("isConnectedUser");var Lt,Gt=!1;for(Lt=0;Lt<this.connectedUsersList.length;Lt+=1)if(St.log(JSON.stringify(this.connectedUsersList[Lt])),this.connectedUsersList[Lt].userId===Ot)return Gt=!0,St.log("isConnected :"+Gt),Gt;return St.log("isConnected :"+Gt),Gt},this.displayConnectedUsersList=function(){var Ot;for(St.debug("displayConnectedUsersList"),Ot=0;Ot<this.connectedUsersList.length;Ot+=1)St.log("User :"+this.connectedUsersList[Ot].userId+" on group :"+this.connectedUsersList[Ot].group)},this.updatePresence=function(Ot){try{St.debug("updatePresence : ",JSON.stringify(Ot))}catch(Lt){St.debug(Lt)}St.log("updatePresence for group :"+Ot.group),this.manageConnectedUsersList(Ot.connectedUsersListWithStatus,Ot.state,Ot.group,Ot.connectedUsersList),xt.createUpdatePresenceEvent(Ot.connectedUsersList,Ot.state,Ot.connectedUsersListWithStatus)},this.processCloudEventOccurred=function(Ot){St.debug("processCloudEventOccurred",Ot),xt.createCloudEventOccurredEvent(Ot.event.type,Ot.event.target)},this.updateUserStatus=function(Ot){St.info("updateUserStatus"+Ot),xt.createUpdateUserStatusEvent(Ot)},this.sendDebugCommand=function(Ot,Lt,Gt){St.info("sendDebugCommand :"+Ot),new ut.S(this.channel.socket).sendDebugCommand("getClientSocketsInfo",Lt,Gt)},this.processSignalingMessage=function(Ot){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=null,tn=null,zt=!1,cn=null,un=null,fn=!1,vn=null;if(Ot.type==="invite")this.apiCCWebRTCClient?(St.log("this.webRTCPluginActivated =",this.webRTCPluginActivated),(dt.Xh==="IE"||dt.Xh==="Safari"&&dt.PR<11)&&this.webRTCPluginActivated===!0?(St.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){St.log("manageWebRTCPlugin cb on Invite"),apiCC.session.apiCCWebRTCClient.webRTCClient.processInvite(Ot)},function(){St.log("actionOnInstallationNeeded"),St.log("sending bye to be done"),new ut.S(apiCC.session.channel.socket).sendBye(Ot.callId,Ot.calleeId,Ot.roomId,Ot.callerId,"WebRTC_Plugin_Installation_needed",Ot.data)})):(St.log("managing call with browser"),this.apiCCWebRTCClient.webRTCClient.processInvite(Ot))):St.warn("WebRTCClient is not created");else if(Ot.type==="200OK")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200OK(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="candidate")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCandidate(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="bye")this.apiCCWebRTCClient?(St.log("bye message from:"+Ot.clientId+" for callId : "+Ot.callId),this.apiCCWebRTCClient.webRTCClient.onRemoteHangup(Ot.callId,Ot.clientId,Ot.roomId,Ot.reason,Ot.confId,Ot.data)):St.warn("WebRTCClient is not created");else if(Ot.type==="update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processUpdate(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="200update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200Update(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="newConversationCreated")this.apiCCIMClient?this.apiCCIMClient.newConversationCreated(Ot):St.warn("IMClient is not created");else if(Ot.type==="IMMessage")this.apiCCIMClient?this.apiCCIMClient.receiveMessage(Ot):St.warn("IMClient is not created");else if(Ot.type==="groupChatCreation")this.apiCCIMClient?this.apiCCIMClient.groupChatCreation(Ot):St.warn("IMClient is not created");else if(Ot.type==="groupChatInvitation")this.apiCCIMClient?this.apiCCIMClient.groupChatInvitation(Ot):St.warn("IMClient is not created");else if(Ot.type==="groupChatMemberUpdate")this.apiCCIMClient?this.apiCCIMClient.groupChatMemberUpdate(Ot):St.warn("IMClient is not created");else if(Ot.type==="addUserInGroupChatAnswer")this.apiCCIMClient?this.apiCCIMClient.addUserInGroupChatAnswer(Ot):St.warn("IMClient is not created");else if(Ot.type==="groupChatMessage")this.apiCCIMClient?this.apiCCIMClient.receiveGroupChatMessage(Ot):St.warn("IMClient is not created");else if(Ot.type==="conversationHistoryAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveConversationHistory(Ot):St.warn("IMClient is not created");else if(Ot.type==="getUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveUserDataAnswer(Ot):St.warn("IMClient is not created");else if(Ot.type==="fetchUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveFetchUserDataAnswer(Ot):St.warn("IMClient is not created");else if(Ot.type==="dataMessage")this.apiCCDataClient?this.apiCCDataClient.receiveData(Ot):St.warn("DataClient is not created");else if(Ot.type==="dataAck")this.apiCCWebRTCClient.webRTCClient.processDataAck(Ot);else if(Ot.type==="dataEndAck")this.apiCCWebRTCClient.webRTCClient.processDataEndAck(Ot);else if(Ot.type==="updateVideoQuality")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processUpdateVideoQuality(Ot.callId,Ot.profile);else if(Ot.type==="apiRTCDataMessage")if(Lt.quiet||St.debug("apiRTCDataMessage:",Ot),(0,st.Ym)(Ot.data,"object"))if(Ot.data.type==="joinSessionAnswer")if(this.apiCCWebRTCClient){var Ft={roomName:Ot.data.roomId};(0,st.ki)(Ot.data,"convId","string")&&(Ft.convId=Ot.data.convId),(0,st.ki)(Ot.data,["data","mode"],"string")&&(Ft.data={mode:Ot.data.data.mode}),(0,st.ki)(Ot.data,["data","transition"],"string")&&Ot.data.data.transition==="mesh2janus"?this.apiCCWebRTCClient.webRTCClient.MCUClient.changeSessionMode(Ft,"mesh2janus"):this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(Ft,{createSession:!0})}else St.warn("WebRTCClient is not created");else if(Ot.data.type==="slowLink"){if(this.apiCCWebRTCClient){var pn={};Ot.data.advice&&(pn.advice=Ot.data.advice),this.apiCCWebRTCClient.webRTCClient.processSlowLink(Ot.data.callId,pn)}}else if(Ot.data.type==="videoQualityChanged")xt.createVideoQualityChangedEvent(Ot.data.callId,Ot.data.roomId,Ot.data.hint,Ot.data.profile);else if(Ot.data.type==="distantIceError")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantIceError(Ot.data);else if(Ot.data.type==="streamTrackChanged")this.apiCCWebRTCClient&&Ot.data.hasOwnProperty("mline")&&Ot.data.hasOwnProperty("muted")&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackMuteChanged(Ot.data.callId,Ot.data.mline,Ot.data.muted);else if(Ot.data.type==="streamTrackStatusChanged")this.apiCCWebRTCClient&&Ot.data.hasOwnProperty("mline")&&Ot.data.hasOwnProperty("change")&&Ot.data.hasOwnProperty(Ot.data.change)&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackStatusChanged(Ot.data.callId,Ot.data.mline,Ot.data[Ot.data.change]);else if(Ot.data.type==="configureEncodings")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processConfigureEncodings(Ot.data);else if(Ot.data.type==="activeSpeaker")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(Ot.data,!0);else if(Ot.data.type==="stopSpeaking")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(Ot.data,!1);else if(Ot.data.type==="updateStream")this.apiCCWebRTCClient&&Ot.data.callId&&Ot.data.mline&&Ot.data.direction&&this.apiCCWebRTCClient.webRTCClient.processUpdateStream(Ot.data.callId,Ot.data.mline,Ot.data.direction);else if(Ot.data.type==="startRecording"){if(this.apiCCWebRTCClient)if(Ot.data.callId==="COMPOSITE")this.apiCCWebRTCClient.webRTCClient.MCUClient.startCompositeRecording(Ot.data.mediaType,Ot.data.customIdInFilename,Ot.data.convId,Ot.data.data);else{for(vn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--vn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[vn].callId===Ot.data.callId){fn=!0;break}fn?this.apiCCWebRTCClient.webRTCClient.MCUClient.startRecording(Ot.data.mediaType,Ot.data.customIdInFilename,Ot.data.convId,Ot.data.callId,Ot.data.data):St.info("cannot start recording (call not found)")}}else if(Ot.data.type==="startStreaming"){if(this.apiCCWebRTCClient){for(vn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--vn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[vn].callId===Ot.data.callId){fn=!0;break}fn?this.apiCCWebRTCClient.webRTCClient.MCUClient.startStreaming(Ot.data.service,Ot.data.server,Ot.data.streamKey,Ot.data.callId):St.info("cannot start streaming (call not found)")}}else if(Ot.data.type==="startCallStatsMonitoring"){if(this.apiCCWebRTCClient){for(St.debug("startCallStatsMonitoring",Ot.data.callId),vn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--vn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[vn].callId===Ot.data.callId){tn=this.apiCCWebRTCClient.webRTCClient.callsTable[vn];break}tn?["chrome","firefox"].indexOf(st.wL.type)>=0?tn.csmIntervalId?St.debug("call stats monitoring already started"):tn.csmIntervalId=setInterval(tn.callback(tn,"csmHandler"),tn.csmIntervalMs):St.debug("call stats are only supported on chrome and firefox"):St.debug("no such call")}}else if(Ot.data.type==="callOrder")if(St.log("callOrder received"),this.apiCCWebRTCClient){this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=Ot.senderId,Gt=this.apiCCWebRTCClient.webRTCClient.callWithNumber(Ot.data.caller,!0,{MCUType:"MCU-Callee",confId:Ot.data.confId,convId:Ot.data.convId,remoteMediaStreamId:Ot.data.mediaStreamId},cn);var gn={clientId:this.clientId,callerId:Ot.data.caller,callerNickname:Ot.data.caller,callId:Gt,autoAnswerActivated:!1,callNumber:1,audioOnly:!1,callType:"video",recordedCall:!0,remoteType:"web",destCallType:"media"};this.apiCCWebRTCClient.webRTCClient.myWebRTC_Event.createIncomingCallEvent(gn)}else St.warn("WebRTCClient is not created");else Ot.data.type==="subscribeOrder"?(St.log("subscribeOrder received :",Ot.data),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=Ot.senderId,Ot.data.data.subscribeOrder=!0,(un=[]).push(Ot.data.stream),this.apiCCWebRTCClient.webRTCClient.MCUClient.subscribeToStreams(un,"VIDEO",Ot.data.data,cn,{noStreamCheck:!0})):St.warn("WebRTCClient is not created")):Ot.data.type==="distantCallEstablished"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantCallEstablished(Ot.data):Ot.data.type==="simulcastFeedChanged"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processSimulcastFeedChanged(Ot.data):St.log("msg.data.type is not managed :"+Ot.data.type);else St.log("msg.data === undefined");else if(Ot.type==="conversationListAnswer")this.receiveConversationListAnswer(Ot);else if(Ot.type==="contactOccurrencesFromConversationListAnswer")this.receiveContactOccurrencesFromConversationListAnswer(Ot);else if(Ot.type==="conversationDetailReport")this.receiveConversationDetailReportAnswer(Ot);else if(Ot.type==="updatePresence")St.log("updatePresence"),this.updatePresence(Ot);else if(Ot.type==="updateUserStatus")St.log("updateUserStatus"),this.updateUserStatus(Ot);else if(Ot.type==="receiveMCUSessionId")St.log("receiveMCUSessionId"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionId(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="joinSessionAnswer")St.log("joinSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionAnswer(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="updateSessionAnswer")St.log("updateSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(Ot,{updateCalls:!0}):St.warn("WebRTCClient is not created");else if(Ot.type==="availableStreams")this.apiCCWebRTCClient?(St.log("message availableStreams received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(Ot.msg,"regular",function(In,kn,Nn){xt.createMCUAvailableStreamEvent([kn],In)}):St.warn("WebRTCClient is not created")):St.warn("WebRTCClient is not created");else if(Ot.type==="availableReplay")this.apiCCWebRTCClient?(St.log("message availableReplay received"),this.apiCCWebRTCClient?(zt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableReplay(Ot.msg),xt.createMCUAvailableReplayEvent(Ot.msg,zt)):St.warn("WebRTCClient is not created")):St.warn("WebRTCClient is not created");else if(Ot.type==="availableComposite")this.apiCCWebRTCClient?(St.log("message availableComposite received"),this.apiCCWebRTCClient?(zt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(Ot.msg,"composite"),xt.createMCUAvailableCompositeEvent(Ot.msg,zt)):St.warn("WebRTCClient is not created")):St.warn("WebRTCClient is not created");else if(Ot.type==="onRemoveStream")this.apiCCWebRTCClient?(St.log("message onRemoveStream received:",Ot),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.removeMCUStream(Ot.callId,Ot.msg.id,Ot.msg.reason):St.warn("WebRTCClient is not created")):St.warn("WebRTCClient is not created");else if(Ot.type==="availableStreamsUpdate")this.apiCCWebRTCClient?(St.log("message availableStreamsUpdate received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateAvailableStream(Ot.msg,"regular",function(In,kn,Nn,hn){xt.createMCUAvailableStreamUpdateEvent([kn],In)}):St.warn("WebRTCClient is not created")):St.warn("WebRTCClient is not created");else if(Ot.type==="checkCallStatus")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCheckCallStatus(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="MCUSessionInvitation")St.log("MCUSessionInvitation"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="MCUSessionInvitationToGroupChat")St.log("MCUSessionInvitationToGroupChat"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="participantEjected")St.log("participantEjected"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.participantEjected(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="recordingStarted")St.log("recordingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStarted(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="recordingStopped")St.log("recordingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStopped(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="recordingStreamAvailable")St.log("recordingStreamAvailable"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStreamAvailable(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="streamingStarted")St.log("streamingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStarted(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="streamingStopped")St.log("streamingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStopped(Ot):St.warn("WebRTCClient is not created");else if(Ot.type==="sessionId")St.log("sessionId :"+Ot.sessionId),this.sessionId=Ot.sessionId,Ot.JWTApzToken!==void 0&&this.handleJWTApzToken(Ot.JWTApzToken);else if(Ot.type==="JWTTokenRefreshAnswer")St.log("JWTTokenRefreshAnswer"),Ot.JWTApzToken!==void 0&&this.handleJWTApzToken(Ot.JWTApzToken);else if(Ot.type==="roomCreation")St.log("roomCreation"),this.roomMgr.roomCreation(Ot);else if(Ot.type==="roomJoin")St.log("roomJoined"),this.roomMgr.roomJoin(Ot);else if(Ot.type==="inviteInRoomStatus")St.log("inviteInRoomStatus"),this.roomMgr.inviteInRoomStatus(Ot);else if(Ot.type==="contactListInRoom")St.log("contactListInRoom"),this.roomMgr.onContactListInRoom(Ot);else if(Ot.type==="roomInvitation")St.log("roomInvitation"),this.roomMgr.roomInvitation(Ot);else if(Ot.type==="roomMessage")St.log("roomMessage"),this.roomMgr.receiveRoomMessage(Ot);else if(Ot.type==="roomMemberUpdate")St.log("roomMemberUpdate"),this.roomMgr.roomMemberUpdate(Ot);else if(Ot.type==="agentReconnect"){var Tn=this.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Ot.callId);Tn!=null&&Tn.getUserMediaOnCall()}else Ot.type==="sequence"?(St.log("Sequential message"),this.handleSequentialMessage(Ot)):Ot.type==="Ack"?St.log("Ack received"):Ot.type==="receipt"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processReceipt(Ot):Ot.type==="error"?(St.log("error received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processError(Ot):xt.createErrorEvent(Ot.errorInfo,Ot.errorCode,Ot.callId,Ot.roomId,null,null,Ot.convId)):Ot.type==="enterpriseConfig"?(St.log("enterpriseConfig received"),this.handleEnterpriseConfigMessage(Ot)):Ot.type==="AIEMessage"?(St.log("AIEMessage received"),this.handleAIEMessage(Ot)):Ot.type==="cloudEventOccurred"?this.processCloudEventOccurred(Ot):St.log("Error : No type for this message")},this.handleSequentialMessage=function(Ot){if(Ot.id!==void 0&&Ot.packetNum!==void 0&&Ot.totalPacketsNum!==void 0&&Ot.data!==void 0){St.debug("Handle sequential message packet "+Ot.packetNum+"/"+Ot.totalPacketsNum,Ot);var Lt=[];if(kt.sequentialMessagesStorage[Ot.id]!==void 0&&(Lt=kt.sequentialMessagesStorage[Ot.id]),Lt.push(Ot),kt.sequentialMessagesStorage[Ot.id]=Lt,Lt.length===Ot.totalPacketsNum){Lt.sort(function(zt,cn){return zt.packetNum-cn.packetNum});var Gt="";Lt.forEach(function(zt){Gt+=zt.data}),delete kt.sequentialMessagesStorage[Ot.id];var tn=null;try{tn=JSON.parse(Gt)}catch(zt){return void St.error("Error : can't parse sequential message JSON :",zt)}if(!tn)return void St.error("Error : can't restore sequential message, it's null");St.debug("Restored sequential message :",Gt),kt.processSignalingMessage(tn)}}else St.error("Error : sequential message is inconsistent :",Ot)},this.handleEnterpriseConfigMessage=function(Ot){if(St.debug("handleEnterpriseConfigMessage :",Ot),(0,st.ki)(Ot,"sentry","boolean")&&Ot.sentry===!0){var Lt;Lt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!=="https:"?"http":"https",apiCC.loadSentry(apiCC.initApiKey,Lt)}if((0,st.ki)(Ot,"customJson","string")&&Ot.customJson!=="")try{St.debug("customJson :",Ot.customJson),Ot.customJson=JSON.parse(Ot.customJson)}catch(Gt){St.error(Gt)}if((0,st.ki)(Ot,"iceServers","string")&&Ot.iceServers!=="")try{St.debug("iceServers :",Ot.iceServers),Ot.iceServers=JSON.parse(Ot.iceServers),kt.apiCCWebRTCClient.setPcConfig(Ot.iceServers)}catch(Gt){St.error(Gt)}(0,st.ki)(Ot,"logLevel","string")&&Ot.logLevel!==""&&!isNaN(parseInt(Ot.logLevel))&&apiRTC.setLogLevel(parseInt(Ot.logLevel)),(0,st.ki)(Ot,"ccs","object")&&(kt.ccsInfo=Object.assign({},Ot.ccs))},this.handleAIEMessage=function(Ot){switch(St.debug("handleAIEMessage :",Ot),Ot.detail){case"modelLoaded":if(apiCC!==void 0&&Ot.userMediaStreamId!==void 0){var Lt=apiCC.getUserMediaStream(Ot.userMediaStreamId).mediaFilterManager;for(var Gt in Lt.filters)Lt.filters[Gt]!==void 0&&Lt.filters[Gt].streamAIE!==null&&Lt.filters[Gt].streamAIE.modelLoaded(Ot)}break;case"unknownModelName":St.error("Unknown model name :",Ot.modelName);break;case"loadModelError":St.error("Error while loading model :",Ot.info);break;default:St.debug("Unknown detail :",Ot.detail)}},this.handleJWTApzToken=function(Ot){St.debug("handleJWTApzToken :",Ot),kt.JWTApzToken=Ot,kt.cloudIsSecured===!0?(St.debug("Setting JWTApzToken on cloudAPI"),apiCC.CloudApi.setJWTApzToken(kt.JWTApzToken)):St.debug("JWTApzToken is not set on cloudAPI"),kt.JWTApzTokentimeOutId!==-1&&clearTimeout(kt.JWTApzTokentimeOutId),kt.JWTApzTokentimeOutId=setTimeout(function(){var Lt=JSON.stringify({type:"JWTTokenRefreshRequest"});St.log("C->S: "+Lt),apiCC.session.channel.socket.emit("JWTTokenRefreshRequest",Lt)},kt.JWTApzTokenRefreshTimer)},this.fetchUserData=function(Ot){var Lt,Gt;St.debug("fetchUserData"),Lt={type:"fetchUserData",id:Ot.id,apiKey:Ot.apiKey,timeout:Ot.timeout},Gt=JSON.stringify(Lt),St.log("C->S: "+Gt),this.channel.socket.emit("fetchUserData",Gt)}}},7323:(rt,at,s)=>{s.d(at,{q:()=>Rt}),s(4363),s(9653),s(3710),s(1539),s(9714),s(561),s(2564),s(4812),s(8309),s(9753),s(9554),s(4747),s(8674),s(7042),s(1038),s(8783),s(4916),s(2526),s(1817),s(2165),s(6992),s(3948);var et=s(1549),nt=s(5945),ot=s(4708);function ht(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}s(2479),s(9070),s(8304),s(489),s(2419),s(8011);var dt=function(){function bt(){(function(Mt,Nt){if(!(Mt instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,bt)}var wt,Et;return wt=bt,(Et=[{key:"applyFilter",value:function(Mt,Nt){}},{key:"release",value:function(){}}])&&ht(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function pt(bt,wt){return function(Et){if(Array.isArray(Et))return Et}(bt)||function(Et,Mt){var Nt=Et==null?null:typeof Symbol<"u"&&Et[Symbol.iterator]||Et["@@iterator"];if(Nt!=null){var Yt,Qt,on=[],nn=!0,dn=!1;try{for(Nt=Nt.call(Et);!(nn=(Yt=Nt.next()).done)&&(on.push(Yt.value),!Mt||on.length!==Mt);nn=!0);}catch(yn){dn=!0,Qt=yn}finally{try{nn||Nt.return==null||Nt.return()}finally{if(dn)throw Qt}}return on}}(bt,wt)||function(Et,Mt){if(Et){if(typeof Et=="string")return lt(Et,Mt);var Nt=Object.prototype.toString.call(Et).slice(8,-1);return Nt==="Object"&&Et.constructor&&(Nt=Et.constructor.name),Nt==="Map"||Nt==="Set"?Array.from(Et):Nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nt)?lt(Et,Mt):void 0}}(bt,wt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lt(bt,wt){(wt==null||wt>bt.length)&&(wt=bt.length);for(var Et=0,Mt=new Array(wt);Et<wt;Et++)Mt[Et]=bt[Et];return Mt}function mt(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}function st(bt,wt){var Et;return Et=(bt/=255)<.09804?.01894124847001224*bt:bt<.2?.5695370733621028*(bt-.09804)+.001857:bt<.298?1.292329661362709*(bt-.2)+.05993:bt<.4?1.5339348764221266*(bt-.298)+.1866:bt<.498?1.5697674418604652*(bt-.4)+.343:bt<.6?1.570223617104747*(bt-.498)+.4969:bt<.698?1.536107711138311*(bt-.6)+.657:bt<.8?1.2995292271479013*(bt-.698)+.8076:bt<.898?.5868013055895552*(bt-.8)+.9401:.023568065908199296*(bt-.898)+.9976,255*Math.pow(Et,wt)}function ut(bt,wt){return 255*Math.pow(bt/255,wt)}s(9575),s(9743),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7327);var ft=function(){function bt(Mt,Nt,Yt){(function(Qt,on){if(!(Qt instanceof on))throw new TypeError("Cannot call a class as a function")})(this,bt),this.image=Mt,this.width=Nt,this.height=Yt,this.length=this.width*this.height}var wt,Et;return wt=bt,Et=[{key:"mean",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Nt=0,Yt=0,Qt=0;if(Mt)for(var on=0;on<this.length;on++)Nt+=Math.pow(this.image.data[4*on+0],2)/(255*this.length),Yt+=Math.pow(this.image.data[4*on+1],2)/(255*this.length),Qt+=Math.pow(this.image.data[4*on+2],2)/(255*this.length);else for(var nn=0;nn<this.length;nn++)Nt+=this.image.data[4*nn+0]/this.length,Yt+=this.image.data[4*nn+1]/this.length,Qt+=this.image.data[4*nn+2]/this.length;return[Nt,Yt,Qt]}},{key:"mad",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Nt=this.mean(Mt),Yt=pt(Nt,3),Qt=Yt[0],on=Yt[1],nn=Yt[2],dn=0,yn=0,mn=0;if(Mt)for(var Cn=0;Cn<this.length;Cn++)dn+=Math.abs(Math.pow(this.image.data[4*Cn+0],2)/255-Qt)/this.length,yn+=Math.abs(Math.pow(this.image.data[4*Cn+1],2)/255-on)/this.length,mn+=Math.abs(Math.pow(this.image.data[4*Cn+2],2)/255-nn)/this.length;else for(var En=0;En<this.length;En++)dn+=Math.abs(this.image.data[4*En+0]-Qt)/this.length,yn+=Math.abs(this.image.data[4*En+1]-on)/this.length,mn+=Math.abs(this.image.data[4*En+2]-nn)/this.length;return[dn,yn,mn]}},{key:"std",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Nt=this.mean(Mt),Yt=pt(Nt,3),Qt=Yt[0],on=Yt[1],nn=Yt[2],dn=0,yn=0,mn=0;if(Mt)for(var Cn=0;Cn<this.length;Cn++)dn+=Math.pow(Math.pow(this.image.data[4*Cn+0],2)/255-Qt,2)/this.length,yn+=Math.pow(Math.pow(this.image.data[4*Cn+1],2)/255-on,2)/this.length,mn+=Math.pow(Math.pow(this.image.data[4*Cn+2],2)/255-nn,2)/this.length;else for(var En=0;En<this.length;En++)dn+=Math.pow(this.image.data[4*En+0]-Qt,2)/this.length,yn+=Math.pow(this.image.data[4*En+1]-on,2)/this.length,mn+=Math.pow(this.image.data[4*En+2]-nn,2)/this.length;return[dn=Math.sqrt(dn),yn=Math.sqrt(yn),mn=Math.sqrt(mn)]}},{key:"blur",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,Nt=new OffscreenCanvas(this.width,this.height),Yt=Nt.getContext("2d");Nt.width=this.width,Nt.height=this.height,Yt.putImageData(this.image,0,0),Yt.filter="blur("+Mt+"px)",Yt.drawImage(Nt,0,0);var Qt=Yt.getImageData(0,0,this.width,this.height);return Qt}},{key:"threshold",value:function(Mt,Nt,Yt){var Qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,on=arguments.length>4&&arguments[4]!==void 0&&arguments[4],nn=new ImageData(this.image.data,this.width,this.height),dn=0;if(on){var yn=dn;dn=Qt,Qt=yn}for(var mn=0;mn<this.length;mn++)this.image.data[4*mn+0]<Mt?nn.data[4*mn+0]=dn:nn.data[4*mn+0]=Qt,this.image.data[4*mn+1]<Nt?nn.data[4*mn+1]=dn:nn.data[4*mn+1]=Qt,this.image.data[4*mn+2]<Yt?nn.data[4*mn+2]=dn:nn.data[4*mn+2]=Qt;return nn}},{key:"powerFilter",value:function(Mt){var Nt=new Uint8ClampedArray(4*this.length);if(Mt===1)return this.image;for(var Yt=0;Yt<this.length;Yt++)Nt[4*Yt+0]=ut(this.image.data[4*Yt+0],Mt),Nt[4*Yt+1]=ut(this.image.data[4*Yt+1],Mt),Nt[4*Yt+2]=ut(this.image.data[4*Yt+2],Mt),Nt[4*Yt+3]=255;return new ImageData(Nt,this.width,this.height)}},{key:"sigmoidFilter",value:function(Mt){for(var Nt=new Uint8ClampedArray(4*this.length),Yt=0;Yt<this.length;Yt++)Nt[4*Yt+0]=st(this.image.data[4*Yt+0],Mt),Nt[4*Yt+1]=st(this.image.data[4*Yt+1],Mt),Nt[4*Yt+2]=st(this.image.data[4*Yt+2],Mt),Nt[4*Yt+3]=255;return new ImageData(Nt,this.width,this.height)}},{key:"weightedSum",value:function(Mt,Nt){for(var Yt=new Uint8ClampedArray(4*this.length),Qt=0;Qt<this.length;Qt++)Yt[4*Qt+0]=Nt*this.image.data[4*Qt+0]+(1-Nt)*Mt.data[4*Qt+0],Yt[4*Qt+1]=Nt*this.image.data[4*Qt+1]+(1-Nt)*Mt.data[4*Qt+1],Yt[4*Qt+2]=Nt*this.image.data[4*Qt+2]+(1-Nt)*Mt.data[4*Qt+2],Yt[4*Qt+3]=255;return new ImageData(Yt,this.width,this.height)}},{key:"weightedSumMask",value:function(Mt,Nt){for(var Yt=new Uint8ClampedArray(4*this.length),Qt=0;Qt<this.length;Qt++){var on=Nt.data[4*Qt]/255;Yt[4*Qt+0]=on*this.image.data[4*Qt+0]+(1-on)*Mt.data[4*Qt+0],Yt[4*Qt+1]=on*this.image.data[4*Qt+1]+(1-on)*Mt.data[4*Qt+1],Yt[4*Qt+2]=on*this.image.data[4*Qt+2]+(1-on)*Mt.data[4*Qt+2],Yt[4*Qt+3]=255}return new ImageData(Yt,this.width,this.height)}}],Et&&mt(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function yt(bt,wt){if(!(bt instanceof wt))throw new TypeError("Cannot call a class as a function")}function vt(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}var St=function(){function bt(){var Mt=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,Qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;yt(this,bt),this.blurMask=Mt,this.smoothBorder=Nt,this.blurFactor=Yt,this.smoothingFactor=Qt,this.maskImage=null,this.net=null}var wt,Et;return wt=bt,Et=[{key:"loadModel",value:function(){var Mt=this;return new Promise(function(Nt,Yt){bodyPix.load({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}).then(function(Qt){Mt.net=Qt,Nt()})})}},{key:"computeMask",value:function(Mt){var Nt=this;return new Promise(function(Yt,Qt){Nt.net.segmentPerson(Mt).then(function(on){Nt.width=on.width,Nt.height=on.height,Nt.length=Nt.width*Nt.height;for(var nn=new Uint8ClampedArray(4*Nt.length),dn=0;dn<Nt.length;dn++){var yn=255*on.data[dn];nn[4*dn+0]=yn,nn[4*dn+1]=yn,nn[4*dn+2]=yn,nn[4*dn+3]=255}var mn=document.createElement("canvas"),Cn=mn.getContext("2d");mn.width=Nt.width,mn.height=Nt.height;var En=new ImageData(nn,Nt.width,Nt.height);if(Cn.putImageData(En,0,0),Nt.blurMask&&(Cn.filter="blur("+Nt.blurFactor+"px)"),Cn.drawImage(mn,0,0,Nt.width,Nt.height),Nt.maskImage=Cn.getImageData(0,0,Nt.width,Nt.height),Nt.blurMask)if(Nt.smoothBorder){if(Nt.smoothingFactor!==-1){var Wn=new ft(Nt.maskImage,Nt.width,Nt.height);Nt.maskImage=Wn.sigmoidFilter(Nt.smoothingFactor)}}else{var Fn=new ft(Nt.maskImage,Nt.width,Nt.height);Nt.maskImage=Fn.threshold(40,40,40,255,!1)}Yt(Nt.maskImage)})})}},{key:"applyTransparency",value:function(Mt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Nt===null&&(Nt=this.maskImage);for(var Yt=new Uint8ClampedArray(Mt.width*Mt.height*4),Qt=0;Qt<Mt.width*Mt.height;Qt++)Yt[4*Qt+0]=Mt.data[4*Qt+0],Yt[4*Qt+1]=Mt.data[4*Qt+1],Yt[4*Qt+2]=Mt.data[4*Qt+2],Yt[4*Qt+3]=Nt.data[4*Qt];var on=new ImageData(Yt,Mt.width,Mt.height);return on}},{key:"superposeImages",value:function(Mt,Nt,Yt){var Qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Qt===null&&(Qt=this.maskImage);var on=new ft(Nt,Mt.width,Mt.height),nn=on.weightedSumMask(Yt,Qt);return nn}},{key:"setBackground",value:function(Mt,Nt){var Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return this.superposeImages(Mt,Mt,Nt,Yt)}},{key:"blurBackground",value:function(Mt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Qt=new ft(Mt,Mt.width,Mt.height),on=Qt.blur(Nt);return this.setBackground(Mt,on,Yt)}}],Et&&vt(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function xt(bt,wt){if(!(bt instanceof wt))throw new TypeError("Cannot call a class as a function")}function Ut(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}var Tt=et.Y.get("StreamSegmentation"),kt=apiCC.myWebRTC_Event,Dt=function(){function bt(Mt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:480,Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:360,Qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;xt(this,bt),this.mediaStream=Mt,this.backgroundMode="none",this.backgroundBlurFactor=10,this.canvasWidth=Nt,this.canvasHeight=Yt,this.length=this.canvasWidth*this.canvasHeight,this.userMediaStreamId=Qt;for(var on=new Uint8ClampedArray(4*this.length),nn=0;nn<4*this.length;nn++)on[nn]=255;this.backgroundImage=new ImageData(on,this.canvasWidth,this.canvasHeight);var dn=!0,yn=!0,mn=5,Cn=-1;this.backSub=new St(dn,yn,mn,Cn),this.modelLoaded=!1,this.maskStreamLaunched=!1,this.backgroundSubtractionActivated=!1}var wt,Et;return wt=bt,Et=[{key:"setBackgroundMode",value:function(Mt){this.backgroundMode=Mt}},{key:"setBackgroundImage",value:function(Mt){this.backgroundImage=Mt}},{key:"setBackgroundBlurFactor",value:function(Mt){this.backgroundBlurFactor=Mt}},{key:"loadModel",value:function(){Tt.debug("Loading model");var Mt=this;return new Promise(function(Nt,Yt){Mt.backSub.loadModel().then(function(Qt){Mt.modelLoaded=!0,Tt.debug("Model loaded"),Nt()})})}},{key:"getMaskStream",value:function(){var Mt=document.createElement("video");Mt.srcObject=this.mediaStream;var Nt=document.createElement("canvas"),Yt=Nt.getContext("2d");Nt.width=this.canvasWidth,Nt.height=this.canvasHeight;var Qt=document.createElement("canvas"),on=Qt.getContext("2d");Qt.width=this.canvasWidth,Qt.height=this.canvasHeight;var nn=this;Mt.addEventListener("loadeddata",function(){Mt.play(),requestAnimationFrame(ar),nn.modelLoaded?En=!0:nn.loadModel().then(function(or){En=!0})});for(var dn=!0,yn=new Uint8ClampedArray(4*this.length),mn=0;mn<4*this.length;mn++)yn[mn]=255;var Cn=new ImageData(yn,this.canvasWidth,this.canvasHeight);on.putImageData(Cn,0,0);var En=!1,Wn=0,Fn=!0;function ar(){Yt.drawImage(Mt,0,0,Nt.width,Nt.height);var or=Yt.getImageData(0,0,Nt.width,Nt.height);if(nn.modelLoaded&&dn&&En&&(Fn||nn.backgroundMode!=="none")){Fn&&(Fn=!1);var nr=new Date;dn=!1,nn.backSub.computeMask(or).then(function(ur){dn=!0,1/((new Date-nr)/1e3)<1&&++Wn>=10&&(En=!1,Tt.error("The segmentation process cannot be handled"),kt.createBackgroundSubstractionStopComputeTimeEvent(nn.userMediaStreamId))})}nn.modelLoaded&&nn.backSub.maskImage!==null&&En?on.putImageData(nn.backSub.maskImage,0,0):on.putImageData(Cn,0,0),nn.continueMaskComputation?requestAnimationFrame(ar):(Tt.debug("Mask computation stoped"),nn.continueMaskComputation=!0)}return this.continueMaskComputation=!0,this.maskMediaStream=Qt.captureStream(),this.maskStreamLaunched=!0,this.maskMediaStream}},{key:"activateBackgroundSubtraction",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(Mt!==null&&this.setBackgroundMode(Mt),this.backgroundSubtractionActivated)return this.processedMediaStream;this.maskStreamLaunched||this.getMaskStream();var Nt=document.createElement("video");Nt.srcObject=this.mediaStream;var Yt=document.createElement("video");Yt.srcObject=this.maskMediaStream;var Qt=document.createElement("canvas"),on=Qt.getContext("2d");Qt.width=this.canvasWidth,Qt.height=this.canvasHeight;var nn=document.createElement("canvas"),dn=nn.getContext("2d");nn.width=this.canvasWidth,nn.height=this.canvasHeight,this.continueBackgroundSubtraction=!0;var yn=this;function mn(){on.drawImage(Nt,0,0,Qt.width,Qt.height);var Cn=on.getImageData(0,0,Qt.width,Qt.height);if(yn.backgroundMode==="none")dn.putImageData(Cn,0,0);else{on.drawImage(Yt,0,0,Qt.width,Qt.height);var En=on.getImageData(0,0,Qt.width,Qt.height),Wn=null;switch(yn.backgroundMode){case"image":Wn=yn.backSub.setBackground(Cn,yn.backgroundImage,En);break;case"blur":default:Wn=yn.backSub.blurBackground(Cn,yn.backgroundBlurFactor,En);break;case"transparent":Wn=yn.backSub.applyTransparency(Cn,En)}dn.putImageData(Wn,0,0)}yn.continueBackgroundSubtraction?requestAnimationFrame(mn):(Tt.debug("Mask application stoped"),yn.continueBackgroundSubtraction=!0)}return Nt.addEventListener("loadeddata",function(){Nt.play(),Yt.play(),requestAnimationFrame(mn)}),this.processedMediaStream=nn.captureStream(30),this.backgroundSubtractionActivated=!0,this.processedMediaStream}},{key:"deactivateBackgroundSubtraction",value:function(){this.setBackgroundMode("none"),this.processedMediaStream=this.mediaStream,this.backgroundSubtractionActivated=!1,this.continueBackgroundSubtraction=!1,this.maskMediaStream=null,this.maskStreamLaunched=!1,this.continueMaskComputation=!1}}],Et&&Ut(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function Vt(bt){return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},Vt(bt)}function Ot(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}function Lt(bt,wt){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Et,Mt){return Et.__proto__=Mt,Et},Lt(bt,wt)}function Gt(bt,wt){if(wt&&(Vt(wt)==="object"||typeof wt=="function"))return wt;if(wt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Et){if(Et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}(bt)}function tn(bt){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(wt){return wt.__proto__||Object.getPrototypeOf(wt)},tn(bt)}var zt=et.Y.get("OldMediaFilterBackgroundSubtraction"),cn=function(bt){(function(on,nn){if(typeof nn!="function"&&nn!==null)throw new TypeError("Super expression must either be null or a function");on.prototype=Object.create(nn&&nn.prototype,{constructor:{value:on,writable:!0,configurable:!0}}),Object.defineProperty(on,"prototype",{writable:!1}),nn&&Lt(on,nn)})(Qt,bt);var wt,Et,Mt,Nt,Yt=(Mt=Qt,Nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var on,nn=tn(Mt);if(Nt){var dn=tn(this).constructor;on=Reflect.construct(nn,arguments,dn)}else on=nn.apply(this,arguments);return Gt(this,on)});function Qt(){var on;return function(nn,dn){if(!(nn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Qt),(on=Yt.call(this)).streamSegmentation=null,on.userMediaStreamId=null,on}return wt=Qt,(Et=[{key:"applyFilter",value:function(on,nn){var dn=this;zt.debug("Apply filter with descriptor:",nn);var yn=on.getAudioTracks();yn.length>0&&yn.forEach(function(En){on.removeTrack(En)});var mn=on.getVideoTracks();if(mn.length===0)return Promise.reject("MediaStream has no video tracks");var Cn=mn[0].getSettings();return nn.options!==void 0&&nn.options.userMediaStreamId!==void 0&&(this.userMediaStreamId=nn.options.userMediaStreamId),this.streamSegmentation=new Dt(on,Cn.width,Cn.height,this.userMediaStreamId),this.loadTensorflow().then(function(En){return dn.loadTensorflowModel()}).then(function(En){return new Promise(function(Wn,Fn){zt.debug("Model loading..."),dn.streamSegmentation.loadModel().then(function(ar){zt.debug("Model loaded");var or=null;nn.options!==void 0&&nn.options.backgroundMode!==void 0&&(nn.options.backgroundMode==="image"&&nn.options.image instanceof ImageData&&dn.streamSegmentation.setBackgroundImage(nn.options.image),or=nn.options.backgroundMode);var nr=dn.streamSegmentation.activateBackgroundSubtraction(or);yn.forEach(function(ur){nr.addTrack(ur)}),Wn(nr)})})}).catch(function(En){return Promise.reject(En)})}},{key:"release",value:function(){this.streamSegmentation.deactivateBackgroundSubtraction(),this.streamSegmentation=null}},{key:"loadTensorflow",value:function(){return zt.debug("Tensorflow script loading..."),new Promise(function(on,nn){var dn={async:!0,numRetries:20,reqdelay:200,success:function(){zt.debug("Tensorflow script loaded"),on()},error:function(yn){nn("Resources loading failed, depsNotFound: "+yn)},retrycb:function(yn,mn){zt.warn("Tensorflow loading retry :"+yn+" ,delay before retry :"+mn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",dn)})}},{key:"loadTensorflowModel",value:function(){return zt.debug("Tensorflow model script loading..."),new Promise(function(on,nn){var dn={async:!0,numRetries:20,reqdelay:200,success:function(){zt.debug("Tensorflow model script loaded"),on()},error:function(yn){nn("Resources loading failed, depsNotFound: "+yn)},retrycb:function(yn,mn){zt.warn("Tensorflow model loading retry :"+yn+" ,delay before retry :"+mn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",dn)})}}])&&Ot(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),Qt}(dt);function un(bt,wt){var Et=typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(!Et){if(Array.isArray(bt)||(Et=function(nn,dn){if(nn){if(typeof nn=="string")return fn(nn,dn);var yn=Object.prototype.toString.call(nn).slice(8,-1);return yn==="Object"&&nn.constructor&&(yn=nn.constructor.name),yn==="Map"||yn==="Set"?Array.from(nn):yn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yn)?fn(nn,dn):void 0}}(bt))||wt&&bt&&typeof bt.length=="number"){Et&&(bt=Et);var Mt=0,Nt=function(){};return{s:Nt,n:function(){return Mt>=bt.length?{done:!0}:{done:!1,value:bt[Mt++]}},e:function(nn){throw nn},f:Nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt,Qt=!0,on=!1;return{s:function(){Et=Et.call(bt)},n:function(){var nn=Et.next();return Qt=nn.done,nn},e:function(nn){on=!0,Yt=nn},f:function(){try{Qt||Et.return==null||Et.return()}finally{if(on)throw Yt}}}}function fn(bt,wt){(wt==null||wt>bt.length)&&(wt=bt.length);for(var Et=0,Mt=new Array(wt);Et<wt;Et++)Mt[Et]=bt[Et];return Mt}function vn(bt){return(bt[2]-bt[0])*(bt[3]-bt[1])}function Ft(bt,wt){var Et=bt[0],Mt=bt[1],Nt=bt[2],Yt=bt[3],Qt=wt[0],on=wt[1],nn=wt[2],dn=wt[3],yn=vn([Math.max(Et,Qt),Math.max(Mt,on),Math.min(Nt,nn),Math.min(Yt,dn)]);return yn/(vn(bt)+vn(wt)-yn)}function pn(bt){var wt,Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.2,Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Nt=bt.yolo,Yt={yolo:[]},Qt=un(Nt);try{for(Qt.s();!(wt=Qt.n()).done;){var on=wt.value,nn=on.objectness;if(nn>Et)if(Mt!==null){var dn,yn=on.bounding_box,mn=vn(yn),Cn=0,En=null,Wn=0,Fn=un(Nt);try{for(Fn.s();!(dn=Fn.n()).done;){var ar=dn.value,or=ar.bounding_box,nr=Ft(yn,or);nr!==1&&nr>Cn&&(Cn=nr,En=ar,Wn=vn(ar.bounding_box))}}catch(ur){Fn.e(ur)}finally{Fn.f()}(En===null||Cn<Mt||Wn<mn)&&Yt.yolo.push(on)}else Yt.yolo.push(on)}}catch(ur){Qt.e(ur)}finally{Qt.f()}return Yt}function gn(bt,wt){var Et,Mt=bt.yolo,Nt={yolo:[]},Yt=un(wt.yolo);try{for(Yt.s();!(Et=Yt.n()).done;){var Qt,on=Et.value,nn=on.class,dn=on.bounding_box,yn=on.objectness,mn=yn,Cn=un(Mt);try{for(Cn.s();!(Qt=Cn.n()).done;){var En=Qt.value;if(En.class===nn){var Wn=Ft(En.bounding_box,dn);Wn>0&&(mn=yn+.75*(1-yn)*Wn*En.objectness)}}}catch(ar){Cn.e(ar)}finally{Cn.f()}var Fn={class:nn,objectness:mn,bounding_box:dn};Nt.yolo.push(Fn)}}catch(ar){Yt.e(ar)}finally{Yt.f()}return Nt}function Tn(bt,wt){return function(Et){if(Array.isArray(Et))return Et}(bt)||function(Et,Mt){var Nt=Et==null?null:typeof Symbol<"u"&&Et[Symbol.iterator]||Et["@@iterator"];if(Nt!=null){var Yt,Qt,on=[],nn=!0,dn=!1;try{for(Nt=Nt.call(Et);!(nn=(Yt=Nt.next()).done)&&(on.push(Yt.value),!Mt||on.length!==Mt);nn=!0);}catch(yn){dn=!0,Qt=yn}finally{try{nn||Nt.return==null||Nt.return()}finally{if(dn)throw Qt}}return on}}(bt,wt)||function(Et,Mt){if(Et){if(typeof Et=="string")return In(Et,Mt);var Nt=Object.prototype.toString.call(Et).slice(8,-1);return Nt==="Object"&&Et.constructor&&(Nt=Et.constructor.name),Nt==="Map"||Nt==="Set"?Array.from(Et):Nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nt)?In(Et,Mt):void 0}}(bt,wt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function In(bt,wt){(wt==null||wt>bt.length)&&(wt=bt.length);for(var Et=0,Mt=new Array(wt);Et<wt;Et++)Mt[Et]=bt[Et];return Mt}function kn(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}s(3123),s(4723),s(2472),s(6699),s(2023),s(9720),s(9600),s(2707),s(1058);var Nn=et.Y.get("StreamAIE"),hn=apiCC.myWebRTC_Event,Sn=function(){function bt(Mt,Nt){(function(Qt,on){if(!(Qt instanceof on))throw new TypeError("Cannot call a class as a function")})(this,bt),this.mediaStream=Mt,this.descriptorOptions=Nt,this.modelName=Nt.modelName,this.maxBoxes=Nt.maxBoxes||null,this.scoreThresh=Nt.scoreThresh||null,this.forceReload=Nt.forceReload||!1,this.classFilter=this.descriptorOptions.classFilter||"all",this.drawingConfig=this.descriptorOptions.drawingConfig||{},this.userMediaStreamId=Nt.userMediaStreamId,this.clientId=Nt.clientId;var Yt=this.mediaStream.getVideoTracks();Yt.length===0&&(this.mediaSettings=null),this.mediaSettings=Yt[0].getSettings(),this.canvasWidth=this.mediaSettings.width||480,this.canvasHeight=this.mediaSettings.height||480,this.length=this.canvasWidth*this.canvasHeight,this.snapshot=!1,this.log=!1,this.minSnapshotPeriod=0,this.memoryTime=0,this.lastAnnotations={yolo:[]},this.lastRawAnnotations={yolo:[]},this.objectDetectionActivated=!1,this.drawAnnotationsBool=!1,this.aieUrl=null,this.token=null,this.loadedModel=null,this.promises=[],this.isReleased=!1,this.resinzingSize=416,this.callId=null}var wt,Et;return wt=bt,Et=[{key:"activateLogs",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.memoryTime=Mt,this.log=!0}},{key:"stopLogs",value:function(){this.log=!1,this.memoryTime=0}},{key:"activateSnapshots",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.snapshot=!0,this.minSnapshotPeriod=Mt}},{key:"stopSnapshots",value:function(){this.snapshot=!1,this.minSnapshotPeriod=0}},{key:"activateAnnotations",value:function(){this.lastAnnotations={yolo:[]},this.drawAnnotationsBool=!0,this.getAnnotations()}},{key:"stopAnnotations",value:function(){this.drawAnnotationsBool=!1}},{key:"getAnnotations",value:function(){var Mt=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Nt=document.createElement("video");Nt.srcObject=this.mediaStream;var Yt=document.createElement("canvas"),Qt=Yt.getContext("2d");Yt.width=this.canvasWidth,Yt.height=this.canvasHeight;var on=document.createElement("canvas"),nn=on.getContext("2d");on.width=this.canvasWidth,on.height=this.canvasHeight;var dn=this;function yn(Jn,er){for(var hr=Jn.split(","),Sr=hr[0].match(/:(.*?);/)[1],yr=atob(hr[1]),Pr=yr.length,jr=new Uint8Array(Pr);Pr--;)jr[Pr]=yr.charCodeAt(Pr);return new File([jr],er,{type:Sr})}Nt.addEventListener("loadeddata",function(){Nt.play(),requestAnimationFrame(function(){wr(dn.aieUrl,dn.token,dn.loadedModel)})});var mn=!0,Cn={},En=null,Wn=new Date;function Fn(Jn,er,hr){var Sr=yn(Yt.toDataURL("image/jpeg")),yr={pipelineCallId:dn.getOrCreatePipeline(),file:Sr,transferType:"plugin",pluginName:"httpPost",pluginData:{url:Jn,headers:{Authorization:"Token "+er},formData:{file:"$DATA",angled:1,model:hr,size:dn.resinzingSize}}};apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,yr,null,{success:function(Pr){var jr=(new Date-En)/1e3,Zn=1/jr;return Nn.debug("Computation time:",jr,"s ,FPS:",Zn),wr(Jn,er,hr),Pr.data.error!==void 0?Nn.error("http post error :",Pr.data.error):Pr.data.result===void 0?Nn.error("An error occured when trying to annotate a snapshot"):void ar(Pr.data)},failure:function(Pr,jr,Zn){Nn.error("## pushData:failure",jr,Zn,Pr)}})}function ar(Jn){var er=Jn.result;dn.isReleased||(dn.lastRawAnnotations=er,er.yolo!==void 0&&nr(er),er.ocr===void 0&&er.codes===void 0||or(er))}function or(Jn){dn.lastAnnotations={ocr:Jn.ocr,codes:Jn.codes};var er="";if(Jn.ocr.length>1){er+="Words found : ";for(var hr=0;hr<Jn.ocr.length;hr++)er=er+Jn.ocr[hr].text+", "}if(Jn.codes.length>1){er+="Codes found : ";for(var Sr=0;Sr<Jn.codes.length;Sr++)er=er+Jn.codes[Sr].code+", "}ur(er),mr()}function nr(Jn){Jn.yolo.length>0&&(Mt&&(Jn=gn(dn.lastRawAnnotations,Jn)),dn.scoreThresh!==null&&(Jn=pn(Jn,dn.scoreThresh)));for(var er={yolo:[]},hr={},Sr=dn.classFilter.split(", "),yr=0;yr<Jn.yolo.length;yr++){var Pr=Jn.yolo[yr];(dn.classFilter==="all"||Sr.includes(Pr.class))&&(Pr.class in hr||(hr[Pr.class]=0),hr[Pr.class]+=1,er.yolo.push(Pr))}if(Jn=er,dn.lastAnnotations=Jn,dn.log||dn.snapshot){for(var jr=new Date,Zn=[],fr=0,qn=Object.entries(hr);fr<qn.length;fr++){var Er=Tn(qn[fr],2),sr=Er[0],Br=Er[1];Zn.push(Br+" "+sr+"(s) detected."),(!(sr in Cn)||jr-Cn[sr]>1e3*dn.memoryTime)&&(Cn[sr]=jr)}var Dr=Zn.sort().join(" ");Dr!==""&&(ur(Dr),mr())}}function ur(Jn){dn.log&&hn.createAIELogEvent(dn.userMediaStreamId,Jn)}function mr(){if(dn.snapshot){var Jn=new Date,er=Qt.getImageData(0,0,Yt.width,Yt.height);if(Jn-Wn>1e3*dn.minSnapshotPeriod){nn.putImageData(er,0,0),dn.drawAnnotations(dn.lastAnnotations,nn,dn.drawingConfig);var hr=on.toDataURL("image/png"),Sr=new Image;Sr.src=hr,hn.createAIESnapshotEvent(dn.userMediaStreamId,Sr),Wn=Jn}}}function wr(Jn,er,hr){Qt.drawImage(Nt,0,0,Yt.width,Yt.height),(mn||dn.drawAnnotationsBool)&&(mn&&(mn=!1),En=new Date,Fn(Jn,er,hr))}}},{key:"getOrCreatePipeline",value:function(){if(this.callId!==null)return this.callId;var Mt=this;return this.callId=apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,{transferType:"pipeline"},null,{failure:function(Nt){Nt==="dataChannelClosed"?(Nn.debug("dataChannelClosed : no activity on dataChannel timeout"),Mt.callId=null):Nn.error("dataChannel failure",Nt)}}),this.callId}},{key:"drawAnnotations",value:function(Mt,Nt){var Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Qt=Yt.color||"#ED5131",on=Yt.textColor||"#FFFFFF",nn=Yt.colorMap||null,dn=Object.prototype.hasOwnProperty.call(Yt,dn)?Yt.lineWidth:3,yn=Yt.font||"15px Arial";if(Mt.yolo!==void 0&&Mt.yolo.length>0)for(var mn=0;mn<Mt.yolo.length;mn++){var Cn=Mt.yolo[mn],En=Cn.bounding_box,Wn=En[0],Fn=En[1],ar=En[2],or=En[3];this.modelName==="mask_augmented_refined"&&(ar-=Wn,or-=Fn);var nr=Qt;nn!==null&&Cn.class in nn&&(nr=nn[Cn.class]),Nt.lineWidth=dn,Nt.strokeStyle=nr,Nt.strokeRect(Wn,Fn,ar,or),Nt.font=yn;var ur=parseInt(yn,10),mr=Cn.class,wr=Nt.measureText(mr).width;Nt.fillStyle=nr,Nt.fillRect(Wn-dn/2,Fn-Math.round(4*ur/3),wr+ur+dn,Math.round(4*ur/3)),Nt.fillStyle=on,Nt.fillText(mr,Wn+Math.round(ur/2)-dn/2,Fn-Math.round(ur/2))}if(Mt.ocr!==void 0&&Mt.ocr.length>0){yn=Yt.font||"25px Arial";for(var Jn=0;Jn<Mt.ocr.length;Jn++){var er=Mt.ocr[Jn],hr=er.bounding_box,Sr=hr[0],yr=hr[1],Pr=hr[2],jr=hr[3];this.modelName==="mask_augmented_refined"&&(Pr-=Sr,jr-=yr),Nt.lineWidth=dn,Nt.strokeStyle=Qt,Nt.strokeRect(Sr,yr,Pr,jr),Nt.font=yn;var Zn=parseInt(yn,10),fr=er.text,qn=Nt.measureText(fr).width;Nt.fillStyle=Qt,Nt.fillRect(Sr-dn/2,yr-Math.round(4*Zn/3),qn+Zn+dn,Math.round(4*Zn/3)),Nt.fillStyle=on,Nt.fillText(fr,Sr+Math.round(Zn/2)-dn/2,yr-Math.round(Zn/2))}}if(Mt.codes!==void 0&&Mt.codes.length>0){yn=Yt.font||"25px Arial";for(var Er=0;Er<Mt.codes.length;Er++){var sr=Mt.codes[Er],Br=sr.bounding_box,Dr=Br[0],xr=Br[1],Yn=Br[2],Ir=Br[3];this.modelName==="mask_augmented_refined"&&(Yn-=Dr,Ir-=xr),Nt.lineWidth=dn,Nt.strokeStyle=Qt,Nt.strokeRect(Dr,xr,Yn,Ir),Nt.font=yn;var $r=parseInt(yn,10),Ar=sr.code,Qr=Nt.measureText(Ar).width;Nt.fillStyle=Qt,Nt.fillRect(Dr-dn/2,xr-Math.round(4*$r/3),Qr+$r+dn,Math.round(4*$r/3)),Nt.fillStyle=on,Nt.fillText(Ar,Dr+Math.round($r/2)-dn/2,xr-Math.round($r/2))}}}},{key:"activateObjectDetection",value:function(){if(this.objectDetectionActivated)return this.processedMediaStream;var Mt=document.createElement("video");Mt.srcObject=this.mediaStream;var Nt=document.createElement("canvas"),Yt=Nt.getContext("2d");Nt.width=this.canvasWidth,Nt.height=this.canvasHeight;var Qt=document.createElement("canvas"),on=Qt.getContext("2d");Qt.width=this.canvasWidth,Qt.height=this.canvasHeight;var nn=this;function dn(){Yt.drawImage(Mt,0,0,Nt.width,Nt.height);var yn=Yt.getImageData(0,0,Nt.width,Nt.height);on.putImageData(yn,0,0),nn.drawAnnotationsBool&&nn.drawAnnotations(nn.lastAnnotations,on,nn.drawingConfig),requestAnimationFrame(dn)}return Mt.addEventListener("loadeddata",function(){Mt.play(),requestAnimationFrame(dn)}),this.processedMediaStream=Qt.captureStream(),this.objectDetectionActivated=!0,this.processedMediaStream}},{key:"loadModel",value:function(){var Mt=this;return new Promise(function(Nt,Yt){Nn.debug("loading model");var Qt={modelName:Mt.modelName,maxBoxes:Mt.maxBoxes,scoreThresh:Mt.scoreThresh,forceReload:Mt.forceReload};Mt.sendMessage(Qt,"AIELoadModel",Nt,Yt)})}},{key:"sendMessage",value:function(Mt,Nt,Yt,Qt){var on=setTimeout(Qt,5e3);this.promises.push({timeout:on,resolve:Yt}),Mt.timeout=on,this.sendMessageToCCS(Mt,Nt)}},{key:"sendMessageToCCS",value:function(Mt,Nt){if(Mt.userMediaStreamId=this.userMediaStreamId,Mt.clientId=this.clientId,Mt.data={pubSub:"AieConnector"},Mt.type=Nt,apiCC!==void 0){var Yt=apiCC.session.apiCCWebRTCClient.webRTCClient.socket;try{var Qt=JSON.stringify(Mt);Yt.emit(Nt,Qt)}catch(on){Nn.error("JSON Stringify error : ",on)}}}},{key:"modelLoaded",value:function(Mt){Nn.debug("Loaded model name :",Mt.modelName),this.aieUrl=Mt.url,this.loadedModel=Mt.modelName,this.token=Mt.token;var Nt=this.activateObjectDetection();this.promises.forEach(function(Yt){Mt.timeout===Yt.timeout&&(clearTimeout(Yt.timeout),Yt.resolve(Nt))})}},{key:"release",value:function(){this.isReleased=!0,this.stopLogs(),this.stopSnapshots(),this.stopAnnotations(),this.sendMessageToCCS({},"AIELogout")}}],Et&&kn(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function Rn(bt){return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},Rn(bt)}function wn(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}function xn(bt,wt){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Et,Mt){return Et.__proto__=Mt,Et},xn(bt,wt)}function Xn(bt,wt){if(wt&&(Rn(wt)==="object"||typeof wt=="function"))return wt;if(wt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Et){if(Et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}(bt)}function Ln(bt){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(wt){return wt.__proto__||Object.getPrototypeOf(wt)},Ln(bt)}var Un=et.Y.get("MediaFilterAIE"),rr=function(bt){(function(on,nn){if(typeof nn!="function"&&nn!==null)throw new TypeError("Super expression must either be null or a function");on.prototype=Object.create(nn&&nn.prototype,{constructor:{value:on,writable:!0,configurable:!0}}),Object.defineProperty(on,"prototype",{writable:!1}),nn&&xn(on,nn)})(Qt,bt);var wt,Et,Mt,Nt,Yt=(Mt=Qt,Nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var on,nn=Ln(Mt);if(Nt){var dn=Ln(this).constructor;on=Reflect.construct(nn,arguments,dn)}else on=nn.apply(this,arguments);return Xn(this,on)});function Qt(){var on;return function(nn,dn){if(!(nn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Qt),(on=Yt.call(this)).userMediaStreamId=null,on.streamAIE=null,on}return wt=Qt,(Et=[{key:"applyFilter",value:function(on,nn){var dn=this;return new Promise(function(yn,mn){if(Un.debug("Apply filter with descriptor :",nn),nn.options===void 0&&mn("Filter options object required"),nn.options.modelName===void 0)mn("modelName options required");else{var Cn=on.getAudioTracks();Cn.length>0&&Cn.forEach(function(En){on.removeTrack(En)}),dn.streamAIE=new Sn(on,nn.options),dn.streamAIE.loadModel().then(function(En){Cn.forEach(function(Wn){En.addTrack(Wn)}),yn(En)}).catch(function(En){mn(En)})}})}},{key:"release",value:function(){this.streamAIE.release()}}])&&wn(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),Qt}(dt);function tr(bt){return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},tr(bt)}function Qn(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}function jn(bt,wt){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Et,Mt){return Et.__proto__=Mt,Et},jn(bt,wt)}function Bn(bt,wt){if(wt&&(tr(wt)==="object"||typeof wt=="function"))return wt;if(wt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Et){if(Et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}(bt)}function an(bt){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(wt){return wt.__proto__||Object.getPrototypeOf(wt)},an(bt)}var zn=et.Y.get("MediaFilterBackgroundSubstraction"),Kn=function(bt){(function(on,nn){if(typeof nn!="function"&&nn!==null)throw new TypeError("Super expression must either be null or a function");on.prototype=Object.create(nn&&nn.prototype,{constructor:{value:on,writable:!0,configurable:!0}}),Object.defineProperty(on,"prototype",{writable:!1}),nn&&jn(on,nn)})(Qt,bt);var wt,Et,Mt,Nt,Yt=(Mt=Qt,Nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var on,nn=an(Mt);if(Nt){var dn=an(this).constructor;on=Reflect.construct(nn,arguments,dn)}else on=nn.apply(this,arguments);return Bn(this,on)});function Qt(){var on;return function(nn,dn){if(!(nn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Qt),(on=Yt.call(this)).mediaStream=null,on.mediaStreamSettings=null,on.processedMediaStream=null,on.net=null,on.lossRatio=null,on.processBackground=!1,on.bgImageData=null,on.videoElement=document.createElement("video"),on.canvas=document.createElement("canvas"),on.canvasContext=on.canvas.getContext("2d"),on}return wt=Qt,(Et=[{key:"applyFilter",value:function(on,nn){var dn=this;return new Promise(function(yn,mn){var Cn=on.getAudioTracks();Cn.length>0&&Cn.forEach(function(En){on.removeTrack(En)}),dn.loadTensorflow().then(function(){dn.loadTensorflowModel().then(function(){dn.videoElement.srcObject=on;var En=dn;dn.videoElement.addEventListener("loadeddata",function(){En.videoElement.play(),En.mediaStream=on,En.descriptors=nn,En.processedMediaStream=En.canvas.captureStream(),En.mediaStreamSettings=En.mediaStream.getVideoTracks()[0].getSettings(),En.videoElement.height=240,En.lossRatio=En.mediaStreamSettings.height/En.videoElement.height,En.videoElement.width=En.videoElement.height*En.mediaStreamSettings.aspectRatio,En.videoElement.onplaying=function(){En.canvas.height=En.videoElement.videoHeight,En.canvas.width=En.videoElement.videoWidth},En.loadBodyPix().then(function(){Cn.forEach(function(Wn){En.processedMediaStream.addTrack(Wn)}),yn(En.processedMediaStream)}).catch(function(Wn){zn.error(Wn)})})}).catch(function(En){zn.error(En)})}).catch(function(En){zn.error(En)})})}},{key:"loadTensorflow",value:function(){return zn.debug("Tensorflow script loading..."),new Promise(function(on,nn){var dn={async:!0,numRetries:20,reqdelay:200,success:function(){zn.debug("Tensorflow script loaded"),on()},error:function(yn){nn("Resources loading failed, depsNotFound: "+yn)},retrycb:function(yn,mn){zn.warn("Tensorflow loading retry :"+yn+" ,delay before retry :"+mn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",dn)})}},{key:"loadTensorflowModel",value:function(){return zn.debug("Tensorflow model script loading..."),new Promise(function(on,nn){var dn={async:!0,numRetries:20,reqdelay:200,success:function(){zn.debug("Tensorflow model script loaded"),on()},error:function(yn){nn("Resources loading failed, depsNotFound: "+yn)},retrycb:function(yn,mn){zn.warn("Tensorflow model loading retry :"+yn+" ,delay before retry :"+mn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",dn)})}},{key:"loadBodyPix",value:function(){var on=this;return new Promise(function(nn,dn){bodyPix.load({multiplier:.75,stride:32,quantBytes:4}).then(function(yn){on.net=yn,on.perform(),nn()}).catch(function(yn){return dn(yn)})})}},{key:"perform",value:function(){if(this.descriptors.options!==void 0&&this.descriptors.options.backgroundMode!==void 0)switch(this.processBackground=!0,this.descriptors.options.backgroundMode){case"blur":zn.warn("This method is deprecated, please use Stream#blur method now."),this.videoElement.height=this.mediaStreamSettings.height,this.videoElement.width=this.mediaStreamSettings.width,this.canvas.height=this.videoElement.height,this.canvas.width=this.videoElement.width,this.blurBackground();break;case"transparent":this.noBackground();break;case"image":this.descriptors.options.image!==void 0?(this.resizeImageData(this.descriptors.options.image),this.imageBackground()):zn.error("image option is required when creating the filter");break;default:zn.debug("The backgroundMode : ",this.descriptors.options.backgroundMode," is not implemented. Refer to documentation for accepted values."),this.blurBackground()}else zn.error("backgroundMode option is required")}},{key:"blurBackground",value:function(){var on=this;this.net.segmentPerson(this.videoElement).then(function(nn){on.blurBackground(),bodyPix.drawBokehEffect(on.canvas,on.videoElement,nn,9,2,!1)})}},{key:"noBackground",value:function(){var on=this;this.net.segmentPerson(this.videoElement).then(function(nn){on.canvasContext.drawImage(on.videoElement,0,0,on.videoElement.width,on.videoElement.height);for(var dn=on.canvasContext.getImageData(0,0,on.videoElement.width,on.videoElement.height),yn=dn.data,mn=0;mn<yn.length;mn+=4)nn.data[mn/4]===0&&(yn[mn+3]=0);var Cn=on.scaleImageData(dn,on.lossRatio);on.canvasContext.imageSmoothingEnabled=!0,on.canvasContext.putImageData(Cn,0,0),on.processBackground&&on.noBackground()})}},{key:"imageBackground",value:function(){var on=this;this.net.segmentPerson(this.videoElement).then(function(nn){on.canvasContext.putImageData(on.bgImageData,0,0,0,0,on.videoElement.width,on.videoElement.height);var dn=on.canvasContext.getImageData(0,0,on.videoElement.width,on.videoElement.height);on.canvasContext.drawImage(on.videoElement,0,0,on.videoElement.width,on.videoElement.height);for(var yn=on.canvasContext.getImageData(0,0,on.videoElement.width,on.videoElement.height),mn=yn.data,Cn=0;Cn<mn.length;Cn+=4)nn.data[Cn/4]===0&&(mn[Cn]=dn.data[Cn],mn[Cn+1]=dn.data[Cn+1],mn[Cn+2]=dn.data[Cn+2],mn[Cn+3]=dn.data[Cn+3]);var En=on.scaleImageData(yn,on.lossRatio);on.canvasContext.imageSmoothingEnabled=!0,on.canvasContext.putImageData(En,0,0),on.processBackground&&on.imageBackground()})}},{key:"resizeImageData",value:function(on){var nn=this.videoElement.width/on.width,dn=this.videoElement.height/on.height;this.bgImageData=nn>=dn?this.scaleImageData(on,nn):this.scaleImageData(on,dn)}},{key:"noBackgroundWithFullResolution",value:function(){var on=this;this.net.segmentPerson(this.videoElement).then(function(nn){on.canvasContext.drawImage(on.videoElement,0,0,on.canvas.width,on.canvas.height);for(var dn=on.canvasContext.getImageData(0,0,on.canvas.width,on.canvas.height),yn=new Uint8ClampedArray(4*nn.width*nn.height),mn=0;mn<yn.length;mn+=4)nn.data[mn/4]!==0&&(yn[mn+3]=255);var Cn=new ImageData(yn,nn.width,nn.height);Cn=on.scaleImageData(Cn,on.lossRatio);for(var En=0;En<dn.data.length;En+=4)Cn.data[En+3]===0&&(dn.data[En+3]=0);on.canvasContext.imageSmoothingEnabled=!0,on.canvasContext.putImageData(dn,0,0),on.processBackground&&on.noBackgroundWithFullResolution()})}},{key:"scaleImageData",value:function(on,nn){var dn=document.createElement("canvas");dn.width=on.width,dn.height=on.height,dn.getContext("2d").putImageData(on,0,0);var yn=document.createElement("canvas");yn.width=this.canvas.width,yn.height=this.canvas.height;var mn=yn.getContext("2d");return mn.scale(nn,nn),mn.drawImage(dn,0,0),mn.getImageData(0,0,yn.width,yn.height)}},{key:"release",value:function(){this.processedMediaStream=this.mediaStream,this.processBackground=!1}}])&&Qn(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),Qt}(dt);function An(bt,wt){for(var Et=0;Et<wt.length;Et++){var Mt=wt[Et];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(bt,Mt.key,Mt)}}var _n=et.Y.get("MediaFilterManager"),On=apiCC.myWebRTC_Event,Pn={oldBackgroundSubtraction:cn,AIEFilter:rr,backgroundSubtraction:Kn},Vn=function(){function bt(Mt,Nt,Yt){(function(Qt,on){if(!(Qt instanceof on))throw new TypeError("Cannot call a class as a function")})(this,bt),this.mediaStream=Mt,this.descriptors=Nt,this.userMediaStreamId=Yt,this.filters={}}var wt,Et;return wt=bt,(Et=[{key:"getOrCreateFilter",value:function(Mt){if(this.filters[Mt.type]!==void 0)return this.filters[Mt.type];var Nt=Pn[Mt.type];if(Nt===void 0)return _n.error("Unknown filter type: "+Mt.type),null;var Yt=new Nt;return this.filters[Yt]=Yt,Yt}},{key:"applyFilters",value:function(){var Mt=this;if(_n.info("Apply filters",this.descriptors),!Array.isArray(this.descriptors)||this.descriptors.length===0)return _n.error("No filter can be applied, filter descriptors have wrong format, it should be an array and contain at least one element",this.descriptors),Promise.reject(this.mediaStream);var Nt=Promise.resolve(this.mediaStream);return this.descriptors.forEach(function(Yt){var Qt=Mt.getOrCreateFilter(Yt);Qt!==null?(Yt.options!==void 0&&(Yt.options.userMediaStreamId=Mt.userMediaStreamId,Yt.options.clientId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId),Nt=Nt.then(function(on){return Qt.applyFilter(on,Yt)})):_n.error("Filter "+Yt.type+" will be skipped. No implemented filter has this type")}),_n.info("Filters attached"),document.addEventListener("visibilitychange",function(){Mt.createBackgroundSubstractionStopVisibilityChangeEvent(Mt.userMediaStreamId)}),Nt.catch(function(Yt){return _n.error(Yt)}),Nt}},{key:"createBackgroundSubstractionStopVisibilityChangeEvent",value:function(Mt){document.hidden&&On.createBackgroundSubstractionStopVisibilityChangeEvent(Mt)}},{key:"release",value:function(){Object.values(this.filters).forEach(function(Mt){Mt.release()}),document.removeEventListener("visibilitychange",this.createBackgroundSubstractionStopVisibilityChangeEvent),this.filters=null,this.mediaStream=null}}])&&An(wt.prototype,Et),Object.defineProperty(wt,"prototype",{writable:!1}),bt}();function ir(bt){return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},ir(bt)}function Mn(bt,wt){var Et=typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(!Et){if(Array.isArray(bt)||(Et=function(nn,dn){if(nn){if(typeof nn=="string")return $n(nn,dn);var yn=Object.prototype.toString.call(nn).slice(8,-1);return yn==="Object"&&nn.constructor&&(yn=nn.constructor.name),yn==="Map"||yn==="Set"?Array.from(nn):yn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yn)?$n(nn,dn):void 0}}(bt))||wt&&bt&&typeof bt.length=="number"){Et&&(bt=Et);var Mt=0,Nt=function(){};return{s:Nt,n:function(){return Mt>=bt.length?{done:!0}:{done:!1,value:bt[Mt++]}},e:function(nn){throw nn},f:Nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt,Qt=!0,on=!1;return{s:function(){Et=Et.call(bt)},n:function(){var nn=Et.next();return Qt=nn.done,nn},e:function(nn){on=!0,Yt=nn},f:function(){try{Qt||Et.return==null||Et.return()}finally{if(on)throw Yt}}}}function $n(bt,wt){(wt==null||wt>bt.length)&&(wt=bt.length);for(var Et=0,Mt=new Array(wt);Et<wt;Et++)Mt[Et]=bt[Et];return Mt}var Kt=et.Y.get("ApiCCUserMediaStream"),At=apiCC.myWebRTC_Event,it="getUserMediaAccessAllowed",Rt=function(){Number.MAX_SAFE_INTEGER!==void 0?this.userMediaStreamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaStreamId=Math.floor(1000001*Math.random()).toString(),nt.Xh==="Edge"&&nt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:nt.Xh==="Chrome"&&nt.PR<49||nt.Xh==="Firefox"&&nt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}},this.inputs={},this.callbacks={},this.callType=null,this.audio=!1,this.audioDeviceLabel=null,this.audioMuted=!1,this.audioSilent=!1,this.video=!1,this.videoDeviceLabel=null,this.videoMuted=!1,this.videoSilent=!1,this.stream=null,this.streamStolen=!1,this.notifyUserMediaSuccess=!0,this.notifyUserMediaStop=!0,apiCC.session!==null&&apiCC.session!==void 0?this.tryAudioOnlyAfterUserMediaError=apiCC.session.tryAudioOnlyAfterUserMediaError:this.tryAudioOnlyAfterUserMediaError=!1,this.callInfoList=[],this.iOSMediaSelectionWorkAroundApplied=!1,this.getUserMediaTimeoutId=null,ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},this.forceExtensionOnChrome=!1,this.filters=null,this.mediaFilterManager=null,this.videoSettings=!1,this.getVideoTrack=function(){if(!this.stream||typeof this.stream.getVideoTracks!="function")return null;var bt=this.stream.getVideoTracks();return bt&&bt.length===1?bt[0]:null},this.release=function(){var bt=0,wt=null,Et=null,Mt=null;if(Kt.debug("[ApiCCUserMediaStream] release; userMediaStreamId: "+this.userMediaStreamId),this.mediaFilterManager!==null&&(this.mediaFilterManager.release(),this.mediaFilterManager=null),apiCC.audioProcessor.stopAudioNodeCtx(this.nodeCtx),apiRTC.userAgentInstance!==void 0&&apiRTC.userAgentInstance!==null&&apiRTC.userAgentInstance.apiRTCStreamsList!==void 0&&apiRTC.userAgentInstance.apiRTCStreamsList!==null&&apiRTC.userAgentInstance.apiRTCStreamsList.delete(Number(this.userMediaStreamId)),this.stream!==null){if(this.streamStolen!==!0)if(typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)cordova!==void 0&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0&&(Kt.debug("[ApiCCUserMediaStream] release on iosrtc cordova"),this.stream.onended=null);else if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)this.stream.onended=null,this.stream.stop();else for(this.stream.onended=null,bt=(wt=this.stream.getTracks()).length;--bt>=0;)wt[bt].onended=null,wt[bt].stop();this.stream=null,this.streamStolen=!1,this.notifyUserMediaStop===!0&&((Mt=this.getOwnerCallInfo())!==null&&(Et=Mt.callId),At.createUserMediaStopEvent(Et,this.callType,this.userMediaStreamId)),this.callbacks.release(this)}},this.getUserMedia=function(){var bt=this;if(Kt.debug("[ApiCCUserMediaStream] getUserMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)try{if(this.callType==="media")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config);else if(this.callType==="audio")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config.video=!1;else{if(this.callType!=="videoOnly")return function(wt){for(var Et=apiCC.userMediaStreamTable.length;--Et>=0;)if(apiCC.userMediaStreamTable[Et].userMediaStreamId===wt){apiCC.userMediaStreamTable.splice(Et,1);break}}(this.userMediaStreamId),void setTimeout(this.callbacks.failure.bind(this,this,"wrong type"));this.gum_config.audio=!1,this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config)}apiCC.checkConstraintDependingOnDevice(this.gum_config),nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):(nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||this.isUserMediaAccessAllowed()===!0&&(this.getUserMediaTimeoutId=setTimeout(function(){bt.onUserMediaError("timeout")},1e4)),apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError")))}catch(wt){Kt.error("getUserMedia() failed. Is this a WebRTC capable browser?"),Kt.log("getUserMedia failed with exception: "+wt.message)}},this.listenForMuteEvents=function(){var bt,wt=this,Et=function(Qt){var on=null,nn=null;Qt.onmute=function(dn){Kt.debug("mute event :",Qt),Qt.kind==="audio"&&on===null?on=setTimeout(function(){wt.audioSilent=!0,on=null,wt.notifyMLineMuted(Qt.kind,!0,"muted")},2520):Qt.kind==="video"&&nn===null&&(nn=setTimeout(function(){wt.videoSilent=!0,nn=null,wt.notifyMLineMuted(Qt.kind,!0,"muted")},2520))},Qt.onunmute=function(dn){Kt.debug(Qt.kind+" unmute event"),Qt.kind==="audio"&&on!==null?(clearTimeout(on),on=null):Qt.kind==="video"&&nn!==null?(clearTimeout(nn),nn=null):(Qt.kind==="audio"?wt.audioSilent=!1:Qt.kind==="video"&&(wt.videoSilent=!1),wt.notifyMLineMuted(Qt.kind,!1,"muted"))},Qt.onended=function(dn){Kt.debug(Qt.kind+" ended event"),Qt.kind==="audio"&&on!==null?(clearTimeout(on),on=null):Qt.kind==="video"&&(nn!==null&&(clearTimeout(nn),nn=null),wt.callType!=="screenSharing"&&wt.callType!=="screenSharingWithAudio"||wt.stopScreenSharing())}},Mt=Mn(this.stream.getVideoTracks());try{for(Mt.s();!(bt=Mt.n()).done;)Et(bt.value)}catch(Qt){Mt.e(Qt)}finally{Mt.f()}var Nt,Yt=Mn(this.stream.getAudioTracks());try{for(Yt.s();!(Nt=Yt.n()).done;)Et(Nt.value)}catch(Qt){Yt.e(Qt)}finally{Yt.f()}this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"||(this.stream.onended=this.callback(this,"stopScreenSharing"))},this.onUserMediaSuccess=function(bt){var wt=this;this.applyFiltersIfNeeded(bt).then(function(Et){var Mt=null,Nt=null,Yt=!1,Qt=wt.getOwnerCallInfo(),on=wt.getCall(Qt);Kt.info("[ApiCCUserMediaStream] onUserMediaSuccess; userMediaStreamId: "+wt.userMediaStreamId),wt.getUserMediaTimeoutId!==null&&(clearTimeout(wt.getUserMediaTimeoutId),wt.getUserMediaTimeoutId=null),on&&(Kt.debug("call exist"),Nt=on.callee?on.callerId:on.calleeId,Yt=on.restarted),wt.updateMediaProperties(Et),wt.stream=Et,nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Safari"||wt.setUserMediaAccessAllowed(!0),wt.notifyUserMediaSuccess===!0&&(Qt&&(Mt=Qt.callId),At.createUserMediaSuccessEvent(Mt!==null,wt.audio,wt.audioDeviceLabel,wt.video,wt.videoDeviceLabel,wt.callType,Mt,Et,Nt,Yt,wt.userMediaStreamId)),wt.listenForMuteEvents(),Kt.debug("Starting a new getMediaDevices after userMediaSuccess"),apiCC.mediaDeviceMgr.getMediaDevices("updatedAfterGetUserMediaSuccess"),wt.callbacks.success(wt)})},this.updateMediaProperties=function(bt){var wt=!1,Et="Unknown",Mt="Unknown",Nt=!1,Yt="Unknown";bt.getAudioTracks().length>0&&(wt=!0,bt.getAudioTracks()[0].label&&(Et=bt.getAudioTracks()[0].label,Mt=bt.getAudioTracks()[0].id,apiCC.audioProcessor.listenToAudio(bt,this)),bt.getAudioTracks()[0].enabled===!1&&(this.audioMuted=!0),bt.getAudioTracks()[0].muted===!0&&(this.audioSilent=!0)),bt.getVideoTracks().length>0&&(Nt=!0,bt.getVideoTracks()[0].label&&(Yt=bt.getVideoTracks()[0].label),bt.getVideoTracks()[0].enabled===!1&&(this.videoMuted=!0),bt.getVideoTracks()[0].muted===!0&&(this.videoSilent=!0)),this.audio=wt,this.audioDeviceLabel=Et,this.audioDeviceId=Mt,this.video=Nt,this.videoDeviceLabel=Yt},this.manageFailure=function(bt){var wt={};ir(bt)==="object"?(wt.message=bt.message,wt.code=bt.code,wt.name=bt.name):wt=bt,this.callbacks.failure(this,wt)},this.onUserMediaError=function(bt){var wt=function(Yt){for(var Qt=apiCC.userMediaStreamTable.length;--Qt>=0;)if(apiCC.userMediaStreamTable[Qt].userMediaStreamId===Yt){apiCC.userMediaStreamTable.splice(Qt,1);break}},Et=null,Mt=this.getOwnerCallInfo();if(Kt.info("[ApiCCUserMediaStream] onUserMediaError; userMediaStreamId: "+this.userMediaStreamId+", error: "+bt),this.getUserMediaTimeoutId!==null&&(bt!=="timeout"&&clearTimeout(this.getUserMediaTimeoutId),this.getUserMediaTimeoutId=null),nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&window.location.protocol!=="https:"&&Kt.error("HTTPS is now mandatory to use getUserMedia()"),Mt!==null&&(Et=Mt.callId),this.callType==="media"&&nt.ag.name==="iOS"&&nt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1||At.createUserMediaErrorEvent(Et!==null,this.callType,bt,this.userMediaStreamId,Et,this.tryAudioOnlyAfterUserMediaError,this.gum_config),bt!=="timeout"&&this.callType==="media")if(nt.ag.name==="iOS"&&nt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1){Kt.warn("try mediaDevice selection workaround on iOS / Mobile Safari - after MediaError"),this.iOSMediaSelectionWorkAroundApplied=!0,this.gum_config.video={};var Nt=apiCC.getMediaDeviceLabelFromDeviceid(this.inputs.videoSourceId);Kt.log("getMediaDeviceLabelFromDeviceid :",Nt),Nt==="Camra arrire"||Nt==="Back Camera"?(Kt.log("Setting FacingMode to environment :",Nt),this.gum_config=apiCC.setVideoFacingModeInConstraint("environment",this.gum_config)):(Kt.log("Setting FacingMode to user :",Nt),this.gum_config=apiCC.setVideoFacingModeInConstraint("user",this.gum_config)),this.inputs.videoSourceId=null,this.getUserMedia()}else this.tryAudioOnlyAfterUserMediaError===!0?(Kt.warn("try AudioCall after UserMediaError is activated"),this.tryAudioOnlyAfterUserMediaError=!1,this.gum_config.video!==!1?(Kt.debug("[ApiCCUserMediaStream] Trying to getUserMedia with audioOnly"),this.inputs.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):(wt(this.userMediaStreamId),this.manageFailure(bt))):(wt(this.userMediaStreamId),this.manageFailure(bt));else wt(this.userMediaStreamId),this.manageFailure(bt)},this.getDisplayMediaProcess=function(){var bt=this;Kt.debug("using getDisplayMedia with browser :",nt.Xh),Kt.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints),ir(this.displayMediaStreamConstraints)==="object"&&Array.isArray(this.displayMediaStreamConstraints)!==!0||(Kt.warn("Defined displayMediaStreamConstraints format is not correct, reinitialization ..."),ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},Kt.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints)),typeof apiRTC_React<"u"?(Kt.debug("getDisplayMedia - React version"),mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(wt){Kt.info("getDisplayMedia React stream available"),bt.onUserMediaSuccess(wt)}).catch(function(wt){Kt.debug("getDisplayMedia - React version error : ",wt),bt.onUserMediaError(wt)})):navigator.getDisplayMedia?(Kt.debug("navigator.getDisplayMedia defined"),navigator.getDisplayMedia(this.displayMediaStreamConstraints).then(function(wt){Kt.debug("getDisplayMedia stream available"),bt.onUserMediaSuccess(wt)}).catch(function(wt){Kt.debug("getDisplayMedia error :",wt),bt.onUserMediaError(wt)})):navigator.mediaDevices.getDisplayMedia?(Kt.debug("navigator.mediaDevices.getDisplayMedia defined"),navigator.mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(wt){Kt.debug("getDisplayMedia stream available"),bt.onUserMediaSuccess(wt)}).catch(function(wt){Kt.debug("getDisplayMedia error :",wt),bt.onUserMediaError(wt)})):(Kt.debug("getDisplayMedia not available"),At.createDesktopCaptureEvent("Browser_Not_Compatible"))},this.getScreenMedia=function(){if(Kt.debug("[ApiCCUserMediaStream] getScreenMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)if(nt.Xh==="Chrome"||nt.Xh==="Firefox"&&nt.PR>=52)if(nt.Xh==="Chrome")if(Kt.log("shareScreen on Chrome"),nt.PR>=72&&this.forceExtensionOnChrome===!1)this.getDisplayMediaProcess();else{if(Kt.debug("this.captureSourceType :",this.captureSourceType),apiCC.apiRTCExtensionInstalled===!1)return apiCC.waitingShareScreenUserMediaStreamId=this.userMediaStreamId,function(bt){Kt.debug("[ApiCCUserMediaStream] moveUserMediaEntryInWaitingScreen: "+bt);for(var wt=apiCC.userMediaStreamTable.length;--wt>=0;)if(apiCC.userMediaStreamTable[wt].userMediaStreamId===bt){apiCC.waitingShareScreenUserMediaStream=apiCC.userMediaStreamTable.splice(wt,1);break}}(this.userMediaStreamId),void apiCC.manageNotInstalledExtension("getScreenMedia","getScreenMedia",this.captureSourceType);this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType=["screen","window","tab"]),Array.isArray(this.captureSourceType)===!1&&(Kt.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType=["screen","window","tab"],Kt.debug("this.captureSourceType :",this.captureSourceType)),window.postMessage({command:"getDesktopId",callNumber:this.userMediaStreamId,remoteId:"getScreenMedia",captureSourceType:this.captureSourceType,browser_major_version:nt.PR},"*")}else Kt.log("shareScreen on Firefox"),nt.PR>=67?this.getDisplayMediaProcess():(this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType="screen"),typeof this.captureSourceType=="string"&&(Kt.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType="screen",Kt.debug("this.captureSourceType :",this.captureSourceType)),this.registerScreenMedia(this.captureSourceType));else this.getDisplayMediaProcess()},this.registerScreenMedia=function(bt,wt){var Et=null,Mt=this.getOwnerCallInfo(),Nt=this.getCall(Mt),Yt=null;if(Kt.debug("[ApiCCUserMediaStream] registerScreenMedia; userMediaStreamId: "+this.userMediaStreamId),wt==="mediaError")Nt!==null?(Yt=Nt.callee===!0?Nt.callerId:Nt.calleeId,Nt.callType==="screenSharing"||Nt.callType==="screenSharingWithAudio"?apiCC.session.apiCCWebRTCClient.webRTCClient.removeCallFromTableWithCallIdandRemoteId(Nt.callId,Yt,"Media_Error"):Kt.log("switch video / screen : call is not removed"),window.location.protocol!=="https:"&&Kt.log("Please connect to your web page using 'HTTPS'. This is mandatory for desktop capture"),At.createDesktopCaptureEvent("UserMediaError",Nt.callId,Yt)):(Kt.log("Call not found on message EventListener"),At.createDesktopCaptureEvent("UserMediaError")),function(Qt){for(var on=apiCC.userMediaStreamTable.length;--on>=0;)if(apiCC.userMediaStreamTable[on].userMediaStreamId===Qt){apiCC.userMediaStreamTable.splice(on,1);break}}(this.userMediaStreamId),this.callbacks.failure(this,"UserMediaError");else try{if(nt.Xh==="Chrome")Kt.log("desktopId: "+wt),Et={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:wt}}};else{if(Kt.log("captureSourceType: "+bt),bt!=="screen"&&bt!=="window"&&bt!=="application")return void Kt.error("captureSourceType value is not correct");Et={video:{mediaSource:bt}}}nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(Et,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(Et).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(Qt){Kt.error("getUserMedia() failed. Is this a WebRTC capable browser?"),Kt.log("getUserMedia failed with exception: "+Qt.message)}},this.stopScreenSharing=function(){Kt.debug("[ApiCCUserMediaStream] stopScreenSharing; userMediaStreamId: "+this.userMediaStreamId);var bt=!0;if(apiRTC.session.remoteAccessInvitation!==null&&this.userMediaStreamId===apiRTC.session.remoteAccessInvitation.screenSharingStreamId&&(Kt.debug("this is a remote access screenSharing, need to stop remote access"),apiRTC.session.remoteAccessInvitation.stop(!0,{code:"SCREEN_SHARING_STOP"})),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var wt=this.callInfoList.length;--wt>=0;)this.callInfoList[wt].owner===!0&&(bt=!1),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(this.callInfoList[wt].callId);bt===!0&&this.release()},this.getCall=function(bt){var wt=null;return bt&&apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&(bt.flavor==="call"?wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(bt.callId):bt.flavor==="userMedia"&&(wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(bt.callId))),wt},this.getOwnerCallInfo=function(){for(var bt=this.callInfoList.length;--bt>=0;)if(this.callInfoList[bt].owner===!0)return this.callInfoList[bt];return null},this.getCallInfo=function(bt){for(var wt=this.callInfoList.length;--wt>=0;)if(this.callInfoList[wt].callId===bt)return this.callInfoList[wt];return null},this.containsCallInfo=function(bt){for(var wt=!1,Et=this.callInfoList.length;--Et>=0;)if(this.callInfoList[Et].callId===bt){wt=!0;break}return wt},this.addCallInfo=function(bt,wt,Et){return bt!==null&&typeof bt=="string"&&(wt!=="call"&&wt!=="userMedia"&&(wt="call"),Et!==null&&typeof Et=="boolean"||(Et=!1),!this.containsCallInfo(bt))&&(this.callInfoList.push({callId:bt,flavor:wt,owner:Et}),!0)},this.removeCallInfo=function(bt){for(var wt=!1,Et=this.callInfoList.length;--Et>=0;)if(this.callInfoList[Et].callId===bt){this.callInfoList.splice(Et,1),wt=!0;break}return wt},this.accessToLocalMedia=function(){return this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"&&this.callType!=="data"&&this.stream!==null},this.muteAudioOnStreams=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Kt.debug("[ApiCCUserMediaStream] muteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(wt){wt.enabled=!1}),bt==="enabled"?this.audioMuted=!0:bt==="muted"&&(this.audioSilent=!0),this.notifyMLineMuted("audio",!0,bt),{type:"audio",muted:!0}},this.unMuteAudioOnStreams=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Kt.debug("[ApiCCUserMediaStream] unMuteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(wt){wt.enabled=!0}),bt==="enabled"?this.audioMuted=!1:bt==="muted"&&(this.audioSilent=!1),this.notifyMLineMuted("audio",!1,bt),{type:"audio",muted:!1}},this.muteVideoOnStreams=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Kt.debug("[ApiCCUserMediaStream] muteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(wt){wt.enabled=!1}),bt==="enabled"?this.videoMuted=!0:bt==="muted"&&(this.videoSilent=!0),this.notifyMLineMuted("video",!0,bt),{type:"video",muted:!0}},this.unMuteVideoOnStreams=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Kt.debug("[ApiCCUserMediaStream] unMuteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(wt){wt.enabled=!0}),bt==="enabled"?this.videoMuted=!1:bt==="muted"&&(this.videoSilent=!1),this.notifyMLineMuted("video",!1,bt),{type:"video",muted:!1}},this.removeVideoTrackOnStreams=function(){var bt;return Kt.debug("[ApiCCUserMediaStream] removeVideoTrackOnStreams; userMediaStreamId: "+this.userMediaStreamId),(bt=this.stream.getVideoTracks()).length>0&&this.stream.removeTrack(bt[0]),this.video=!1,{type:"video",present:!1}},this.notifyMLineMuted=function(bt,wt,Et){var Mt,Nt,Yt=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Qt=this.callInfoList.length;--Qt>=0;)this.callInfoList[Qt].flavor==="call"?(Mt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[Qt].callId),this.notifyMLineMutedCall(bt,wt,Et,Mt,null)):this.callInfoList[Qt].flavor==="userMedia"&&(Nt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[Qt].callId),this.notifyMLineMutedCall(bt,wt,Et,null,Nt)),this.callInfoList[Qt].owner===!0&&(Yt=!1);Yt===!0&&this.notifyMLineMutedCall(bt,wt,Et,null,null)},this.notifyMLineMutedCall=function(bt,wt,Et,Mt,Nt){Kt.debug("notifyMLineMutedCall; mline: "+bt+", muted: "+wt);var Yt=[];Et==="enabled"?Yt=[bt+"IsMuted"]:Et==="muted"&&(Yt=[bt+"IsSilent"]);var Qt={available:this.audio,deviceLabel:this.audioDeviceLabel,active:!0,muted:this.audioMuted,silent:this.audioSilent},on={available:this.video,deviceLabel:this.videoDeviceLabel,active:!0,muted:this.videoMuted,silent:this.videoSilent},nn=null;Mt?(bt==="audio"?Mt.isLocalAudioMuted=wt:bt==="video"&&(Mt.isLocalVideoMuted=wt),Mt.belongsToRoom()?(nn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Mt.callId,roomId:Mt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:bt},Mt.data.mesh&&(nn.mesh=Mt.data.mesh),Et==="muted"?(nn.change="silent",nn.silent=wt,Mt.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",nn)):Et==="enabled"&&(nn.muted=wt,Mt.myWebRTC_Stack.sendInfo("streamTrackChanged",nn))):(nn={callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:Mt.callee?Mt.callerId:Mt.calleeId,callId:Mt.callId,mline:bt},Et==="muted"?(nn.type="streamTrackStatusChanged",nn.change="silent",nn.silent=wt):Et==="enabled"&&(nn.type="streamTrackChanged",nn.muted=wt),Mt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,nn)),Qt.active=Mt.localCallProfile.audioActive,on.active=Mt.localCallProfile.videoActive,At.createLocalStreamUpdatedEvent(Yt,Qt,on,!0,Mt.callType,Mt.callId,this.stream,this.userMediaStreamId,"userAction")):Nt?(nn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Nt.userMediaId,roomId:Nt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:bt},Et==="muted"?(nn.change="silent",nn.silent=wt,Nt.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",nn)):Et==="enabled"&&(nn.muted=wt,Nt.myWebRTC_Stack.sendInfo("streamTrackChanged",nn)),Nt.audioSdpDirection==="inactive"&&(Qt.active=!1),Nt.videoSdpDirection==="inactive"&&(on.active=!1),At.createLocalStreamUpdatedEvent(Yt,Qt,on,!0,Nt.callType,Nt.userMediaId,this.stream,this.userMediaStreamId,"userAction")):At.createLocalStreamUpdatedEvent(Yt,Qt,on,!1,null,null,this.stream,this.userMediaStreamId,"userAction")},this.notifyActiveSpeaker=function(bt){var wt,Et,Mt=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Nt=this.callInfoList.length;--Nt>=0;)this.callInfoList[Nt].flavor==="call"?(wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[Nt].callId),this.notifyActiveSpeakerCall(bt,wt,null)):this.callInfoList[Nt].flavor==="userMedia"&&(Et=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[Nt].callId),this.notifyActiveSpeakerCall(bt,null,Et)),this.callInfoList[Nt].owner===!0&&(Mt=!1);Mt===!0&&this.notifyActiveSpeakerCall(bt,null,null)},this.notifyActiveSpeakerCall=function(bt,wt,Et){var Mt=null;wt?(wt.belongsToRoom()?(Mt={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:wt.callId,roomId:wt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},wt.data.mesh&&(Mt.mesh=wt.data.mesh),wt.myWebRTC_Stack.sendInfo("activeSpeaker",Mt)):(Mt={type:"activeSpeaker",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:wt.callee?wt.callerId:wt.calleeId,callId:wt.callId,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},wt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Mt)),At.createAudioAmplitudeEvent(bt,!0,wt.callId,this.userMediaStreamId)):Et?(Mt={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Et.userMediaId,roomId:Et.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},Et.myWebRTC_Stack.sendInfo("activeSpeaker",Mt),At.createAudioAmplitudeEvent(bt,!0,Et.userMediaId,this.userMediaStreamId)):At.createAudioAmplitudeEvent(bt,!0,null,this.userMediaStreamId)},this.notifyNotActiveSpeaker=function(bt){var wt,Et,Mt=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Nt=this.callInfoList.length;--Nt>=0;)this.callInfoList[Nt].flavor==="call"?(wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[Nt].callId),this.notifyNotActiveSpeakerCall(bt,wt,null)):this.callInfoList[Nt].flavor==="userMedia"&&(Et=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[Nt].callId),this.notifyNotActiveSpeakerCall(bt,null,Et)),this.callInfoList[Nt].owner===!0&&(Mt=!1);Mt===!0&&this.notifyNotActiveSpeakerCall(bt,null,null)},this.notifyNotActiveSpeakerCall=function(bt,wt,Et){var Mt=null;wt?(wt.belongsToRoom()?(Mt={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:wt.callId,roomId:wt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},wt.data.mesh&&(Mt.mesh=wt.data.mesh),wt.myWebRTC_Stack.sendInfo("stopSpeaking",Mt)):(Mt={type:"stopSpeaking",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:wt.callee?wt.callerId:wt.calleeId,callId:wt.callId,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},wt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Mt)),At.createAudioAmplitudeEvent(bt,!1,wt.callId,this.userMediaStreamId)):Et?(Mt={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Et.userMediaId,roomId:Et.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:bt,streamID:this.userMediaStreamId}},Et.myWebRTC_Stack.sendInfo("stopSpeaking",Mt),At.createAudioAmplitudeEvent(bt,!1,Et.userMediaId,this.userMediaStreamId)):At.createAudioAmplitudeEvent(bt,!1,null,this.userMediaStreamId)},this.callback=function(bt,wt){return this.closureHandler=function(Et,Mt){return bt[wt](Et,Mt)},this.closureHandler},this.isUserMediaAccessAllowed=function(){return localStorage!==null&&(typeof localStorage>"u"?"undefined":ir(localStorage))==="object"&&typeof localStorage.getItem=="function"?localStorage.getItem(it)==="true":null},this.setUserMediaAccessAllowed=function(bt){return localStorage!==null&&(typeof localStorage>"u"?"undefined":ir(localStorage))==="object"&&typeof localStorage.setItem=="function"?(localStorage.setItem(it,bt?"true":"false"),!!bt):null},this.applyFiltersIfNeeded=function(bt){return this.filters===null?Promise.resolve(bt):(this.mediaFilterManager=new Vn(bt,this.filters,this.userMediaStreamId),this.mediaFilterManager.applyFilters())},this.getVideoSettings=function(){if(this.videoSettings!==!1)return this.videoSettings;var bt=this.getVideoTrack();if(!bt||typeof bt.getSettings!="function")return this.videoSettings=null,this.videoSettings;var wt=bt.getSettings();return wt?(this.videoSettings={},Object.prototype.hasOwnProperty.call(wt,"width")&&(this.videoSettings.width=wt.width),Object.prototype.hasOwnProperty.call(wt,"height")&&(this.videoSettings.height=wt.height),Object.prototype.hasOwnProperty.call(wt,"frameRate")&&(this.videoSettings.frameRate=wt.frameRate),this.videoSettings):(this.videoSettings=null,this.videoSettings)},this.isSimulcastCompliant=function(){return!!this.getVideoSettings()},this.getSimulcastProfile=function(){var bt=this.getVideoSettings();if(!bt)return null;var wt={substream:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}},temporal:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}}};return ot.wL.type==="chrome"&&((bt.width<1280||bt.height<720)&&(wt.substream.low.selectable=!1),wt.temporal.high.active=!1,wt.temporal.high.selectable=!1),wt}}},1192:(rt,at,s)=>{s.d(at,{D:()=>$n}),s(3710),s(1539),s(9714),s(2772),s(8674);var et=s(1549),nt=(s(4916),s(5306),s(2564),s(4812),s(561),s(5735),s(3753),s(4603),s(6755),s(9554),s(4747),s(6992),s(8783),s(3948),s(9601),s(8309),s(8264),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7042),s(7941),s(2526),s(1817),s(2165),s(5945)),ot=s(4708),ht=s(940);function dt(Kt){return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},dt(Kt)}function pt(){this.sdp={original:null,global:[],mlines:[]},this.mlines=[]}function lt(Kt){var At=new pt,it=Kt.split(`\r
`),Rt=0,bt=null,wt=null,Et=null,Mt=null;for(At.sdp.original=Kt;Rt<it.length;)if((bt=it[Rt]).length!==0)if(Et!==null)if(bt.match(/^m=/))wt=null,Et=null;else if(bt.match(/^a=/)){if(wt.push(bt),!(Mt=bt.match(/^a=([\w-]+):(\d+) (.+)$/))||Mt[1]!=="rtpmap"&&Mt[1]!=="rtcp-fb"&&Mt[1]!=="fmtp"){if(Mt=bt.match(/^a=mid:(\w+)$/))Et.mid=Mt[1];else if(bt==="a=sendrecv")Et.direction="sendrecv";else if(bt==="a=recvonly")Et.direction="recvonly";else if(bt==="a=sendonly")Et.direction="sendonly";else if(bt==="a=inactive")Et.direction="inactive";else if(Mt=bt.match(/^a=ssrc-group:SIM (.+)$/)){var Nt=Mt[1].split(" ");Et.ssrc_groups.sim.push(Nt.slice())}else if(Mt=bt.match(/^a=ssrc-group:FID (.+)$/)){var Yt=Mt[1].split(" ");Et.ssrc_groups.fid.push(Yt.slice())}else if(Mt=bt.match(/^a=ssrc:(\d+) (.+)$/)){var Qt=Et.ssrcs.find(function(En){return En.original===Mt[1]});Qt||(Qt={original:Mt[1],ssrc:Mt[1],content:{}},Et.ssrcs.push(Qt));var on=Mt[2].match(/^(\w+):(.+)$/);if(!on)throw new Error("cannot parse ssrc parameters (regex failure): "+Mt[2]);if(on[1]==="cname")Qt.content.cname=on[2];else if(on[1]==="msid")Qt.content.msid=on[2];else if(on[1]==="mslabel")Qt.content.mslabel=on[2];else{if(on[1]!=="label")throw new Error("cannot parse ssrc parameters (wrong attribute): "+on[1]);Qt.content.label=on[2]}}}else if(Mt[1]==="rtpmap")Et.codecs[Mt[2]].codec=Mt[3].split("/")[0].toLowerCase(),Et.codecs[Mt[2]].rtpmap=Mt[3];else if(Mt[1]==="rtcp-fb")Et.codecs[Mt[2]]["rtcp-fb"]||(Et.codecs[Mt[2]]["rtcp-fb"]=[]),Et.codecs[Mt[2]]["rtcp-fb"].push(Mt[3]);else if(Mt[1]==="fmtp"){Et.codecs[Mt[2]].fmtp=[];for(var nn=Mt[3].split(";"),dn=0;dn<nn.length;dn+=1){var yn=nn[dn].split("=");yn.length===2&&Et.codecs[Mt[2]].fmtp.push(yn)}}Rt+=1}else if(bt.match(/^b=/)){if(wt.push(bt),Mt=bt.match(/^b=AS:(\d+)$/)){Et.bandwidth=parseInt(Mt[1],10),Rt+=1;continue}Rt+=1}else wt.push(bt),Rt+=1;else{if(Mt=bt.match(/^m=([a-z]+) (\d+) ([A-Z/]+) ([0-9 ]+)$/)){wt=[],At.sdp.mlines.push(wt),wt.push(bt),Et={type:Mt[1],port:parseInt(Mt[2],10),proto:Mt[3],payload_types:[],direction:"sendrecv",mid:Mt[1],bandwidth:0,codecs:{},ssrc_groups:{sim:[],fid:[]},ssrcs:[]};for(var mn=Mt[4].split(" "),Cn=0;Cn<mn.length;Cn+=1)Et.payload_types.push(mn[Cn]),Et.codecs[mn[Cn]]={};At.mlines.push(Et),Rt+=1;continue}At.sdp.global.push(bt),Rt+=1}else Rt+=1;for(At.unifiedPlan=!0,Rt=At.mlines.length;--Rt>=0;)At.mlines[Rt].type!=="audio"||At.audio?At.mlines[Rt].type!=="video"||At.video||(At.video=At.mlines[Rt]):At.audio=At.mlines[Rt],At.unifiedPlan===!0&&At.mlines[Rt].mid!==String(Rt)&&(At.unifiedPlan=!1);return At.isAudioActive=mt.bind(null,At,"audio"),At.isVideoActive=mt.bind(null,At,"video"),At}function mt(Kt,At){return!(At!=="audio"&&At!=="video"||Kt===null||dt(Kt)!=="object"||!Object.prototype.hasOwnProperty.call(Kt,At)||Kt[At]===null||dt(Kt[At])!=="object"||Kt[At].direction!=="sendrecv"&&Kt[At].direction!=="sendonly"&&Kt[At].direction!=="recvonly")}s(3123),s(4765),s(4723),s(9600),s(1058),s(9826),pt.prototype.mungeForSimulcasting=function(){if(this.simulcasting!==!0){this.simulcasting=!0;for(var Kt=0;Kt<this.mlines.length;Kt+=1){var At=this.mlines[Kt];if(At.type==="video"){var it=At.ssrcs[0].content.cname,Rt=At.ssrcs[0].content.msid,bt=At.ssrcs[0].content.mslabel,wt=At.ssrcs[0].content.label,Et=[];Et.push(At.ssrcs[0].ssrc);for(var Mt=2;--Mt>=0;){var Nt=Math.floor(4294967295*Math.random());At.ssrcs.push({original:Nt,ssrc:Nt,content:{cname:it,msid:Rt,mslabel:bt,label:wt}});var Yt=Math.floor(4294967295*Math.random());At.ssrcs.push({original:Yt,ssrc:Yt,content:{cname:it,msid:Rt,mslabel:bt,label:wt}}),At.ssrc_groups.fid.push([Nt,Yt]),Et.push(Nt)}At.ssrc_groups.sim.push(Et)}}}},pt.prototype.generate=function(){for(var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},At=[],it=0;it<this.sdp.global.length;it+=1){var Rt=this.sdp.global[it],bt=Rt.match(/^a=group:BUNDLE([\w ]+)$/);if(bt){At.push("a=group:BUNDLE");for(var wt=0;wt<this.mlines.length;wt+=1)this.mlines[wt].direction==="inactive"&&Kt.stripInactiveMLines===!0||(At.push(" "),At.push(this.mlines[wt].mid));At.push(`\r
`)}else At.push(Rt),At.push(`\r
`)}for(var Et=0;Et<this.sdp.mlines.length;Et+=1){var Mt=this.mlines[Et];if(Mt.direction!=="inactive"||Kt.stripInactiveMLines!==!0)for(var Nt=!1,Yt=this.sdp.mlines[Et],Qt=0;Qt<Yt.length;Qt+=1){var on=Yt[Qt];if(on.match(/^m=/))At.push("m="),At.push(Mt.type),At.push(" "),At.push(Mt.port),At.push(" "),At.push(Mt.proto),At.push(" "),At.push(Mt.payload_types.join(" ")),At.push(`\r
`);else if(on.match(/^a=/)){var nn=on.match(/^a=([\w-]+):(\d+) (.+)$/);if(nn&&(nn[1]==="rtpmap"||nn[1]==="rtcp-fb"||nn[1]==="fmtp")){if(nn[1]==="rtpmap"){var dn=nn[2];if(Mt.codecs[dn]){At.push("a=rtpmap:"),At.push(dn),At.push(" "),At.push(Mt.codecs[dn].rtpmap),At.push(`\r
`);var yn=Mt.codecs[dn]["rtcp-fb"];if(yn)for(var mn=0;mn<yn.length;mn+=1)At.push("a=rtcp-fb:"),At.push(dn),At.push(" "),At.push(yn[mn]),At.push(`\r
`);var Cn=Mt.codecs[dn].fmtp;if(Cn){for(var En=[],Wn=0;Wn<Cn.length;Wn+=1)En.push(Cn[Wn].join("="));En.length>0&&(At.push("a=fmtp:"),At.push(dn),At.push(" "),At.push(En.join(";")),At.push(`\r
`))}continue}continue}if(nn[1]==="rtcp-fb"||nn[1]==="fmtp")continue;throw new Error("internal error")}if(on.match(/^a=mid:(\w+)$/))At.push("a=mid:"),At.push(Mt.mid),At.push(`\r
`),Mt.bandwidth>0&&(At.push("b=AS:"),At.push(Mt.bandwidth),At.push(`\r
`),At.push("b=TIAS:"),At.push(Mt.bandwidth),At.push("000"),At.push(`\r
`));else if(on!=="a=sendrecv"&&on!=="a=recvonly"&&on!=="a=sendonly"&&on!=="a=inactive"){if(!on.match(/^a=ssrc-group:SIM (.+)$/)){if(!on.match(/^a=ssrc-group:FID (.+)$/)){if(on.match(/^a=ssrc:(\d+) (.+)$/)){if(Nt)continue;Nt=!0;for(var Fn=0;Fn<Mt.ssrc_groups.sim.length;Fn+=1)At.push("a=ssrc-group:SIM "),At.push(Mt.ssrc_groups.sim[Fn].join(" ")),At.push(`\r
`);for(var ar=0;ar<Mt.ssrc_groups.fid.length;ar+=1)At.push("a=ssrc-group:FID "),At.push(Mt.ssrc_groups.fid[ar].join(" ")),At.push(`\r
`);for(var or=function(ur){var mr=Mt.ssrcs[ur];["cname","msid","mslabel","label"].forEach(function(wr){Object.prototype.hasOwnProperty.call(mr.content,wr)&&(At.push("a=ssrc:"),At.push(mr.ssrc),At.push(" "),At.push(wr),At.push(":"),At.push(mr.content[wr]),At.push(`\r
`))})},nr=0;nr<Mt.ssrcs.length;nr+=1)or(nr);continue}At.push(on),At.push(`\r
`);continue}}}else At.push("a="),At.push(Mt.direction),At.push(`\r
`)}else{if(on.match(/^b=/))continue;At.push(on),At.push(`\r
`)}}}return At.join("")};var st=et.Y.get("SDPManager"),ut=function(){st.debug("SDPManager"),this.getSDPLines=function(Kt){st.debug("SDPManager::getSDPLines");var At,it=Kt.split(`\r
`);for(At=0;At<it.length;At+=1)st.log("sdpLines[i] : "+it[At]);return it},this.getAudioMediaDescriptionPart=function(Kt){st.debug("SDPManager::getAudioMediaDescriptionPart");var At=Kt.split("m=audio"),it=null;return At[1]!==void 0&&At[1]!==null?(it=At[1].split("m=video"),st.log("SDP audio part : "+it[0]),it[0]):null},this.getVideoMediaDescriptionPart=function(Kt){st.debug("SDPManager::getVideoMediaDescriptionPart");var At,it=Kt.split("m=video");for(At=0;At<it.length;At+=1)st.log("sdpMediaPart[i] : "+it[At]);return it[1]},this.searchMediaDescriptionForRecvOnly=function(Kt){return st.debug("searchMediaDescriptionForRecvOnly"),Kt.search("a=recvonly")!==-1?(st.log("recvonly found in media description"),!0):(st.log("recvonly not found in media description"),!1)},this.searchSDPForRecvOnly=function(Kt){return Kt!==void 0?(st.log("sdpPart !== undefined"),this.searchMediaDescriptionForRecvOnly(Kt)):(st.log("recvonly not found in SDP"),!1)},this.searchMediaDescriptionForSendOnly=function(Kt){return st.debug("searchMediaDescriptionForSendOnly"),Kt.search("a=sendonly")!==-1?(st.log("sendonly found in media description"),!0):(st.log("sendonly not found in media description"),!1)},this.searchSDPForSendOnly=function(Kt){return Kt!==void 0?(st.log("sdpPart !== undefined"),this.searchMediaDescriptionForSendOnly(Kt)):(st.log("sendonly not found in SDP"),!1)},this.searchMediaDescriptionForInactive=function(Kt){return st.debug("searchMediaDescriptionForInactive"),Kt.search("a=inactive")!==-1?(st.log("inactive found in media description"),!0):(st.log("inactive not found in media description"),!1)},this.searchSDPForInactive=function(Kt){return Kt!==void 0?(st.log("sdpPart !== undefined"),this.searchMediaDescriptionForInactive(Kt)):(st.log("inactive not found in SDP"),!1)},this.stripAudioMediaDescriptionFromSDP=function(Kt){st.debug("SDPManager::stripAudioMediaDescriptionFromSDP");var At=this.createGuideline(Kt);return At.audio?(At.audio.direction="inactive",At.generate({stripInactiveMLines:!0})):Kt},this.stripVideoMediaDescriptionFromSDP=function(Kt){st.debug("SDPManager::stripVideoMediaDescriptionFromSDP");var At=this.createGuideline(Kt);return At.video?(At.video.direction="inactive",At.generate({stripInactiveMLines:!0})):Kt},this.setAudioBandwidth=function(Kt,At){return st.info("SDPManager::setAudioBandwidth",At),At?Kt=Kt.replace(/a=mid:audio\r\n/g,`a=mid:audio\r
b=AS:`+At+`\r
`):(st.warn("No maxAudioBW !"),Kt)},this.setVideoBandwidth=function(Kt,At){if(st.info("SDPManager::setVideoBandwidth",At),!At)return st.warn("No maxVideoBW !"),Kt;for(var it=[],Rt=Kt.split(`\r
`),bt=0,wt=null,Et=null;bt<Rt.length;)if((wt=Rt[bt]).length!==0)if(Et!==null)wt.match(/^m=/)?Et=null:wt.match(/^a=mid:(\w+)$/)?(it.push(wt),it.push(`\r
`),it.push("b=AS:"),it.push(At),it.push(`\r
`),it.push("b=TIAS:"),it.push(At),it.push("000"),it.push(`\r
`),bt+=1):(wt.match(/^b=([A-Z]+):(\w+)$/)||(it.push(wt),it.push(`\r
`)),bt+=1);else{var Mt=wt.match(/^m=([a-z]+)(.+)$/);if(Mt&&Mt[1]==="video"){Et="video",it.push(wt),it.push(`\r
`),bt+=1;continue}it.push(wt),it.push(`\r
`),bt+=1}else bt+=1;return it.join("")},this.setDataBandwidth=function(Kt,At){return st.info("SDPManager::setDataBandwidth",At),At?Kt=Kt.replace(/a=mid:data\r\n/g,`a=mid:data\r
b=AS:`+At+`\r
`):(st.warn("No maxDataBW !"),Kt)},this.setSendOnlyForAudio=function(Kt){st.debug("SDPManager::setSendOnlyForAudio");var At=this.createGuideline(Kt);return(0,ot.ki)(At,"audio","object")&&(At.audio.direction="sendonly"),At.generate()},this.setSendOnlyForVideo=function(Kt){st.debug("SDPManager::setSendOnlyForVideo");var At=this.createGuideline(Kt);return(0,ot.ki)(At,"video","object")&&(At.video.direction="sendonly"),At.generate()},this.setSendOnly=function(Kt){st.debug("SDPManager::setSendOnly : global");var At=this.createGuideline(Kt);return(0,ot.ki)(At,"audio","object")&&(At.audio.direction="sendonly"),(0,ot.ki)(At,"video","object")&&(At.video.direction="sendonly"),At.generate()},this.setRecvOnlyForAudio=function(Kt){st.debug("SDPManager::setRecvOnlyForAudio");var At=this.createGuideline(Kt);return At.audio&&At.audio.direction!=="inactive"&&(At.audio.direction="recvonly"),At.generate()},this.setRecvOnlyForVideo=function(Kt){st.debug("SDPManager::setRecvOnlyForVideo");var At=this.createGuideline(Kt);return At.video&&At.video.direction!=="inactive"&&(At.video.direction="recvonly"),At.generate()},this.setRecvOnly=function(Kt){st.debug("SDPManager::setRecvOnly : global");var At=this.createGuideline(Kt);return At.audio&&At.audio.direction!=="inactive"&&(At.audio.direction="recvonly"),At.video&&At.video.direction!=="inactive"&&(At.video.direction="recvonly"),At.generate()},this.updateSDPcodecs=function(Kt,At,it,Rt){var bt,wt,Et,Mt,Nt,Yt,Qt,on,nn=!1,dn=new RegExp(`\r
$`),yn=!1,mn=null,Cn="",En="",Wn="",Fn="",ar="",or="",nr="",ur="";if(st.log(`updateSDPcodecs():
	sdpType = `+At+`
	mediaType = `+it+`
	availableCodecSet = `+Rt+`
`),Rt=="")return Kt;for(Et=(Et=RTCSessionDescription&&Kt instanceof RTCSessionDescription?Kt.sdp:window.SessionDescription&&Kt instanceof SessionDescription?Kt.toSdp():Kt).split(`\r
m=`),dn.test(Et[Et.length-2])===!1&&(Et[Et.length-2]=Et[Et.length-2]+`\r
`,yn=!0),bt=0;bt<Et.length;bt++)if(Et[bt].indexOf(it)===0){for(mn=Et[bt].split(`\r
`)[0].split(" "),wt=3;wt<mn.length;wt++)if(Mt=!0,isNaN(mn[wt])===!1){switch(En="a=rtpmap:"+mn[wt]+" ",(Nt=Et[bt].indexOf(En))!==-1&&(Yt=Et[bt].indexOf(`\r
`,Nt)),mn[wt]){case 0:Cn="PCMU/8000";break;case 8:Cn="PCMA/8000";break;case 9:Cn="G722/8000";break;case 13:Cn="CN/8000";break;case 18:Cn="G729/8000";break;default:Nt!==-1&&(Cn=Et[bt].substring(Nt+En.length,Yt))}Cn!=""&&Rt.indexOf(Cn)!==-1?st.log("PT("+mn[wt]+"): "+Cn+` FOUND in availableCodecSet.
`):(Mt=!1,st.log("PT("+mn[wt]+"): "+Cn+` NOT FOUND in availableCodecSet.
`)),Mt||(Wn=En+`.*\r
`,Fn="a=fmtp:"+mn[wt]+` .*\r
`,nr="a=rtcp-fb:"+mn[wt]+` .*\r
`,ar=" "+mn[wt]+" ",or=" "+mn[wt]+"\r",Et[bt]=Et[bt].replace(new RegExp(Wn,"g"),""),Et[bt]=Et[bt].replace(new RegExp(Fn,"g"),""),Et[bt]=Et[bt].replace(new RegExp(nr,"g"),""),(on=(Qt=Et[bt].split(`
`))[0].split("RTP"))[1]=on[1].replace(ar," "),on[1]=on[1].replace(or,"\r"),Qt[0]=on.join("RTP"),Et[bt]=Qt.join(`
`),it==="video"&&(nr="a=rtcp-fb:"+mn[wt]+` .*\r
`,Et[bt]=Et[bt].replace(new RegExp(nr,"g"),""),Cn!=""&&Cn.substr(0,4)==="rtx/"&&(ur=`a=ssrc-group:FID .*\r
`,Et[bt]=Et[bt].replace(new RegExp(ur,"g"),""),(Qt=Et[bt].split(`\r
a=`)).splice(Qt.length-8,4),Et[bt]=Qt.join(`\r
a=`))),nn=!0)}break}return yn&&(Et[Et.length-2]=Et[Et.length-2].substr(0,Et[Et.length-2].length-2)),Et=Et.join(`\r
m=`),nn===!0?(st.log("updateSDPcodecs(), SDP has been updated."),RTCSessionDescription&&Kt instanceof RTCSessionDescription?new RTCSessionDescription({type:At,sdp:Et}):window.SessionDescription&&Kt instanceof SessionDescription?new SessionDescription(Et):Et):(st.log("updateSDPcodecs(), SDP has not been updated."),Kt)},this.preferOpus=function(Kt){var At,it=Kt.split(`\r
`),Rt=0,bt=null;for(At=0;At<it.length;At+=1)if(it[At].search("m=audio")!==-1){Rt=At;break}if(Rt===0)return Kt;for(At=0;At<it.length;At+=1)if(it[At].search("opus/48000")!==-1){(bt=this.extractSdp(it[At],/:(\d+) opus\/48000/i))&&(it[Rt]=this.setDefaultCodec(it[Rt],bt));break}return(it=this.removeCN(it,Rt)).join(`\r
`)},this.removeCN=function(Kt,At){var it=0,Rt=Kt[At].split(" "),bt=null,wt=0;for(it=Kt.length-1;it>=0;it--)(bt=this.extractSdp(Kt[it],/a=rtpmap:(\d+) CN\/\d+/i))&&((wt=Rt.indexOf(bt))!==-1&&Rt.splice(wt,1),Kt.splice(it,1));return Kt[At]=Rt.join(" "),Kt},this.extractSdp=function(Kt,At){var it=Kt.match(At);return it&&it.length==2?it[1]:null},this.setDefaultCodec=function(Kt,At){var it=0,Rt=Kt.split(" "),bt=Rt.slice(0,3);for(bt.push(At),it=3;it<Rt.length;it++)Rt[it]!==At&&bt.push(Rt[it]);return bt.join(" ")},this.findLineInRange=function(Kt,At,it,Rt,bt){var wt,Et=it!==-1?it:Kt.length;for(wt=At;wt<Et;++wt)if(Kt[wt].indexOf(Rt)===0&&(!bt||Kt[wt].toLowerCase().indexOf(bt.toLowerCase())!==-1))return wt;return null},this.findLine=function(Kt,At,it){return this.findLineInRange(Kt,0,-1,At,it)},this.getCodecPayloadType=function(Kt,At){var it=this.findLine(Kt,"a=rtpmap",At);return it?this.getCodecPayloadTypeFromLine(Kt[it]):null},this.getCodecPayloadTypeFromLine=function(Kt){var At=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),it=Kt.match(At);return it&&it.length===2?it[1]:null},this.findFmtpLine=function(Kt,At){var it=this.getCodecPayloadType(Kt,At);return it?this.findLine(Kt,"a=fmtp:"+it.toString()):null},this.writeFmtpLine=function(Kt){if(!Kt.hasOwnProperty("pt")||!Kt.hasOwnProperty("params"))return null;var At=Kt.pt,it=Kt.params,Rt=[],bt=0,wt=null;for(wt in it)Rt[bt]=wt+"="+it[wt],++bt;return bt===0?null:"a=fmtp:"+At.toString()+" "+Rt.join("; ")},this.setCodecParam=function(Kt,At,it,Rt){var bt=Kt.split(`\r
`),wt=this.findFmtpLine(bt,At),Et={},Mt=null,Nt=null;if(wt===null){if((Nt=this.findLine(bt,"a=rtpmap",At))===null)return Kt;Mt=this.getCodecPayloadTypeFromLine(bt[Nt]),Et.pt=Mt.toString(),Et.params={},Et.params[it]=Rt,bt.splice(Nt+1,0,this.writeFmtpLine(Et))}else(Et=function(Yt){var Qt,on={},nn=Yt.indexOf(" "),dn=Yt.substring(nn+1).split("; "),yn=new RegExp("a=fmtp:(\\d+)"),mn=Yt.match(yn),Cn={},En=null;if(!mn||mn.length!==2)return null;for(on.pt=mn[1],Qt=0;Qt<dn.length;++Qt)(En=dn[Qt].split("=")).length===2&&(Cn[En[0]]=En[1]);return on.params=Cn,on}(bt[wt])).params[it]=Rt,bt[wt]=this.writeFmtpLine(Et);return bt.join(`\r
`)},this.maybePreferCodec=function(Kt,At,it){var Rt,bt,wt=At+" codec",Et=null;return it?(st.log("Prefer "+wt+": "+it),Et=Kt.split(`\r
`),(Rt=this.findLine(Et,"m=",At))===null?(st.log("mLineIndex === null"),Kt):((bt=this.getCodecPayloadType(Et,it))&&(Et[Rt]=this.setDefaultCodec(Et[Rt],bt)),Kt=Et.join(`\r
`))):(st.log("No preference on "+wt+"."),Kt)},this.createGuideline=lt};function ft(Kt,At){(At==null||At>Kt.length)&&(At=Kt.length);for(var it=0,Rt=new Array(At);it<At;it++)Rt[it]=Kt[it];return Rt}function yt(Kt,At){for(var it=0;it<At.length;it++){var Rt=At[it];Rt.enumerable=Rt.enumerable||!1,Rt.configurable=!0,"value"in Rt&&(Rt.writable=!0),Object.defineProperty(Kt,Rt.key,Rt)}}function vt(){return!0}function St(Kt){return Kt===null}function xt(Kt){return Kt!==null}s(9753),s(1038),s(4553),s(9070);var Ut=function(){function Kt(){(function(Rt,bt){if(!(Rt instanceof bt))throw new TypeError("Cannot call a class as a function")})(this,Kt),this._callbacks=[],this._timeout=null,this._err=null,this._data=null,this._interrupted=null,this._fulfilled=!1}var At,it;return At=Kt,it=[{key:"err",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._err}},{key:"data",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._data}},{key:"interrupted",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._interrupted}},{key:"fulfilled",get:function(){return this._fulfilled}},{key:"_fulfill",value:function(Rt,bt,wt){this._err=Rt,this._data=bt,this._interrupted=wt,this._fulfilled=!0;var Et=this._callbacks.slice();this.clear();var Mt,Nt=function(nn,dn){var yn=typeof Symbol<"u"&&nn[Symbol.iterator]||nn["@@iterator"];if(!yn){if(Array.isArray(nn)||(yn=function(ar,or){if(ar){if(typeof ar=="string")return ft(ar,or);var nr=Object.prototype.toString.call(ar).slice(8,-1);return nr==="Object"&&ar.constructor&&(nr=ar.constructor.name),nr==="Map"||nr==="Set"?Array.from(ar):nr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nr)?ft(ar,or):void 0}}(nn))||dn&&nn&&typeof nn.length=="number"){yn&&(nn=yn);var mn=0,Cn=function(){};return{s:Cn,n:function(){return mn>=nn.length?{done:!0}:{done:!1,value:nn[mn++]}},e:function(ar){throw ar},f:Cn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var En,Wn=!0,Fn=!1;return{s:function(){yn=yn.call(nn)},n:function(){var ar=yn.next();return Wn=ar.done,ar},e:function(ar){Fn=!0,En=ar},f:function(){try{Wn||yn.return==null||yn.return()}finally{if(Fn)throw En}}}}(Et);try{for(Nt.s();!(Mt=Nt.n()).done;){var Yt=Mt.value,Qt=Yt.match,on=Yt.callback;Qt(this._err)&&on(this._err,this._data,this._interrupted)}}catch(nn){Nt.e(nn)}finally{Nt.f()}}},{key:"clear",value:function(){this.clearTimeout(),this.removeCallback()}},{key:"setTimeout",value:function(Rt){function bt(wt,Et,Mt){return Rt.apply(this,arguments)}return bt.toString=function(){return Rt.toString()},bt}(function(Rt,bt,wt){var Et=this;this.clearTimeout(),this._timeout=setTimeout(bt===null?function(){Et._fulfill(null,wt,!0)}:function(){Et._fulfill(typeof bt=="string"?new Error(bt):bt,void 0,!0)},Rt)})},{key:"clearTimeout",value:function(Rt){function bt(){return Rt.apply(this,arguments)}return bt.toString=function(){return Rt.toString()},bt}(function(){this._timeout!==null&&(clearTimeout(this._timeout),this._timeout=null)})},{key:"onFulfillment",value:function(Rt){this._callbacks.push({match:vt,callback:Rt})}},{key:"onSuccess",value:function(Rt){this._callbacks.push({match:St,callback:Rt})}},{key:"onFailure",value:function(Rt){this._callbacks.push({match:xt,callback:Rt})}},{key:"removeCallback",value:function(Rt){if(typeof Rt=="function"){var bt=this._callbacks.findIndex(function(wt){return wt.callback===Rt});bt>=0&&this._callbacks.splice(bt,1)}else this._callbacks.splice(0,this._callbacks.length)}},{key:"fulfill",value:function(Rt,bt){Rt===null?this._fulfill(null,bt,!1):this._fulfill(typeof Rt=="string"?new Error(Rt):Rt,void 0,!1)}}],it&&yt(At.prototype,it),Object.defineProperty(At,"prototype",{writable:!1}),Kt}(),Tt=(s(1249),s(7327),s(3843),function(Kt,At,it,Rt,bt,wt,Et,Mt){this.rawStats={},this.rawStats.connectedPair=[],this.rawStats.audio_send=[],this.rawStats.audio_recv=[],this.rawStats.video_send=[],this.rawStats.video_recv=[],this.instantRTT=0,this.moyRttCP=[0,0,0,0,0,0,0,0,0,0],this.moyRttAS=[0,0,0,0,0,0,0,0,0,0],this.moyRttVS=[0,0,0,0,0,0,0,0,0,0],this.tauxPacketLossAS=[0],this.oldLostAS=this.oldSentAS=0,this.oldLostVS=this.oldLostVS=0,this.cptTaux=0,this.tauxPacketLossVS=[0],this.oldBandwidthAS=0,this.oldBandwidthVS=0,this.oldBandwidthAR=0,this.oldBandwidthVR=0,this.bandwidthAS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthAR=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVR=[0,0,0,0,0,0,0,0,0,0],this.qosIn=0,this.qosInAverage=0,this.qosInAverageCount=0,this.qosAudioIn=0,this.qosAudioInAverage=0,this.qosAudioInAverageCount=0,this.qosVideoIn=0,this.qosVideoInAverage=0,this.qosVideoInAverageCount=0,this.qosOut=0,this.qosOutAverage=0,this.qosOutAverageCount=0,this.qosAudioOut=0,this.qosAudioOutAverage=0,this.qosAudioOutAverageCount=0,this.qosVideoOut=0,this.qosVideoOutAverage=0,this.qosVideoOutAverageCount=0,this.onQosChange=At,this.onQosAudioChange=it,this.onQosVideoChange=Rt,this.cpt=0,this.cptRes=5,this.cptDb=60,this.saveStatsFlag=!0,this.tabQosIn=[],this.tabQosAudioIn=[],this.tabQosVideoIn=[],this.tabQosOut=[],this.tabQosAudioOut=[],this.tabQosVideoOut=[],this.tabTimestamp=[],this.tabDelay=[],this.tabJitterBufferAudio=[],this.tabJitterBufferVideo=[],this.tabAudioRtt=[],this.tabVideoRtt=[],this.tabAudioBW=[],this.tabVideoBW=[],this.clientId=Et,this.callId=bt,this.apiKey=wt,this.socket=Mt,this.interval=Kt,this.insertStats=function(Nt,Yt,Qt,on){var nn,dn,yn,mn=null;for(this.cpt=this.cpt+this.interval,nn=0;nn<Nt.length;++nn){var Cn=Nt[nn];switch(Cn.type){case"googCandidatePair":for(mn=Cn.names(),yn=0;yn<mn.length;++yn)if(mn[yn]=="googActiveConnection"&&Cn.stat(mn[yn])=="true")for(dn=0;dn<mn.length;++dn)mn[dn]=="bytesSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.connectedPair.bytesSent=Cn.stat(mn[dn])),mn[dn]=="bytesReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.connectedPair.bytesReceived=Cn.stat(mn[dn])),mn[dn]=="googRtt"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.connectedPair.googRtt=Cn.stat(mn[dn]));break;case"ssrc":for(mn=Cn.names(),yn=0;yn<mn.length;++yn){if(mn[yn]=="audioOutputLevel")for(dn=0;dn<mn.length;++dn)mn[dn]=="packetsLost"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.packetsLost=Cn.stat(mn[dn])),mn[dn]=="googDecodingPLC"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.googDecodingPLC=Cn.stat(mn[dn])),mn[dn]=="googJitterReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.googJitterReceived=Cn.stat(mn[dn])),mn[dn]=="googJitterBufferMs"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.googJitterBufferMs=Cn.stat(mn[dn])),mn[dn]=="googCurrentDelayMs"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.googCurrentDelayMs=Cn.stat(mn[dn])),mn[dn]=="bytesReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_recv.bytesReceived=Cn.stat(mn[dn]));if(mn[yn]=="audioInputLevel")for(dn=0;dn<mn.length;++dn)mn[dn]=="googRtt"&&Cn.stat(mn[dn])!==void 0&&Cn.stat(mn[dn])!=-1&&(this.rawStats.audio_send.googRtt=Cn.stat(mn[dn])),mn[dn]=="packetsLost"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_send.packetsLost=Cn.stat(mn[dn])),mn[dn]=="packetsSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_send.packetsSent=Cn.stat(mn[dn])),mn[dn]=="bytesSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_send.bytesSent=Cn.stat(mn[dn])),mn[dn]=="googJitterReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.audio_send.googJitterReceived=Cn.stat(mn[dn]));if(mn[yn]=="googFrameHeightReceived")for(dn=0;dn<mn.length;++dn)mn[dn]=="googFrameHeightReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.FrameHeight=Cn.stat(mn[dn])),mn[dn]=="googFrameWidthReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.FrameWidth=Cn.stat(mn[dn])),mn[dn]=="googCurrentDelayMs"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.delay=Cn.stat(mn[dn])),mn[dn]=="packetsLost"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.packetsLost=Cn.stat(mn[dn])),mn[dn]=="googNacksSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.googNacksSent=Cn.stat(mn[dn])),mn[dn]=="googJitterBufferMs"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.googJitterBufferMs=Cn.stat(mn[dn])),mn[dn]=="bytesReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.bytesReceived=Cn.stat(mn[dn])),mn[dn]=="googFrameRateReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_recv.googFrameRateReceived=Cn.stat(mn[dn]));if(mn[yn]=="googFrameHeightSent")for(dn=0;dn<mn.length;++dn)mn[dn]=="googFrameHeightSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.FrameHeight=Cn.stat(mn[dn])),mn[dn]=="googFrameWidthSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.FrameWidth=Cn.stat(mn[dn])),mn[dn]=="packetsLost"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.packetsLost=Cn.stat(mn[dn])),mn[dn]=="googNacksReceived"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.googNacksReceived=Cn.stat(mn[dn])),mn[dn]=="googRtt"&&Cn.stat(mn[dn])!==void 0&&Cn.stat(mn[dn])!=-1&&(this.rawStats.video_send.googRtt=Cn.stat(mn[dn])),mn[dn]=="packetsSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.packetsSent=Cn.stat(mn[dn])),mn[dn]=="bytesSent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.bytesSent=Cn.stat(mn[dn])),mn[dn]=="googEncodeUsagePercent"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.googEncodeUsagePercent=Cn.stat(mn[dn])),mn[dn]=="googCpuLimitedResolution"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.googCpuLimitedResolution=Cn.stat(mn[dn])),mn[dn]=="googBandwidthLimitedResolution"&&Cn.stat(mn[dn])!==void 0&&(this.rawStats.video_send.googBandwidthLimitedResolution=Cn.stat(mn[dn]))}}}this.computeStats(Yt,Qt,on),this.cpt%this.cptRes==0&&this.saveStatsLocal(),this.cpt%this.cptDb==0&&this.saveStatsToDb(!1)},this.saveStatsLocal=function(){if(this.saveStatsFlag){var Nt=Date.now();this.tabTimestamp.push(Nt),this.tabQosIn.push(this.qosIn),this.tabQosAudioIn.push(this.qosAudioIn),this.qosVideoIn!==0&&this.tabQosVideoIn.push(this.qosVideoIn),this.tabQosOut.push(this.qosOut),this.tabQosAudioOut.push(this.qosAudioOut),this.qosVideoOut!==0&&this.tabQosVideoOut.push(this.qosVideoOut),this.tabJitterBufferAudio.push(this.rawStats.audio_recv.googJitterBufferMs),this.rawStats.video_recv.googJitterBufferMs!==void 0&&this.tabJitterBufferVideo.push(this.rawStats.video_recv.googJitterBufferMs),this.rawStats.video_send.googRtt!==void 0&&this.tabVideoRtt.push(this.rawStats.video_send.googRtt),this.tabAudioRtt.push(this.rawStats.audio_send.googRtt),this.bandwidthAS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAS)/1024),this.bandwidthVS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVS)/1024),this.bandwidthAR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAR)/1024),this.bandwidthVR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVR)/1024)}},this.saveStatsToDb=function(Nt){},this.saveStatsToDb=function(Nt){this.saveStatsFlag=Nt},this.computeStats=function(Nt,Yt,Qt){var on=0;this.rawStats.connectedPair.googRtt!==-1&&this.rawStats.connectedPair.googRtt!==0&&this.rawStats.connectedPair.googRtt!==void 0&&this.add(this.rawStats.connectedPair.googRtt,this.moyRttCP),this.rawStats.video_send.googRtt!==-1&&this.rawStats.video_send.googRtt!==0&&this.rawStats.video_send.googRtt!==void 0&&(this.add(this.rawStats.video_send.googRtt,this.moyRttVS),this.instantRTT=this.rawStats.video_send.googRtt),this.rawStats.audio_send.googRtt!==-1&&this.rawStats.audio_send.googRtt!==0&&this.rawStats.audio_send.googRtt!==void 0&&this.add(this.rawStats.audio_send.googRtt,this.moyRttAS),this.rawStats.audio_send.packetsLost!==-1&&this.rawStats.audio_send.packetsLost!==void 0&&this.rawStats.audio_send.packetsSent!==-1&&this.rawStats.audio_send.packetsSent!==0&&this.rawStats.audio_send.packetsSent!==void 0&&(on=100*(this.rawStats.audio_send.packetsLost-this.oldLostAS)/(this.rawStats.audio_send.packetsSent-this.oldSentAS),this.oldLostAS=this.rawStats.audio_send.packetsLost,this.oldSentAS=this.rawStats.audio_send.packetsSent,this.add(on,this.tauxPacketLossAS)),this.rawStats.video_send.packetsLost!==-1&&this.rawStats.video_send.packetsLost!==void 0&&this.rawStats.video_send.packetsSent!==-1&&this.rawStats.video_send.packetsSent!==0&&this.rawStats.video_send.packetsSent!==void 0&&(on=100*(this.rawStats.video_send.packetsLost-this.oldLostVS)/(this.rawStats.video_send.packetsSent-this.oldSentVS),this.oldLostVS=this.rawStats.video_send.packetsLost,this.oldSentVS=this.rawStats.video_send.packetsSent,this.add(on,this.tauxPacketLossVS)),this.rawStats.audio_recv.bytesReceived!==-1&&this.rawStats.audio_recv.bytesReceived!==void 0&&(this.oldBandwidthAR===void 0&&(this.oldBandwidthAR=0),this.add((this.rawStats.audio_recv.bytesReceived-this.oldBandwidthAR)/this.interval,this.bandwidthAR),this.oldBandwidthAR=this.rawStats.audio_recv.bytesReceived),this.rawStats.video_recv.bytesReceived!==-1&&this.rawStats.video_recv.bytesReceived!==void 0&&(this.oldBandwidthVR===void 0&&(this.oldBandwidthVR=0),this.add((this.rawStats.video_recv.bytesReceived-this.oldBandwidthVR)/this.interval,this.bandwidthVR),this.oldBandwidthVR=this.rawStats.video_recv.bytesReceived),this.rawStats.audio_send.bytesSent!==-1&&this.rawStats.audio_send.bytesSent!==void 0&&(this.oldBandwidthAS===void 0&&(this.oldBandwidthAS=0),this.add((this.rawStats.audio_send.bytesSent-this.oldBandwidthAS)/this.interval,this.bandwidthAS),this.oldBandwidthAS=this.rawStats.audio_send.bytesSent),this.rawStats.video_send.bytesSent!==-1&&this.rawStats.video_send.bytesSent!==void 0&&(this.oldBandwidthVS===void 0&&(this.oldBandwidthVS=0),this.add((this.rawStats.video_send.bytesSent-this.oldBandwidthVS)/this.interval,this.bandwidthVS),this.oldBandwidthVS=this.rawStats.video_send.bytesSent);var nn=0,dn=0,yn=0,mn=0,Cn=0,En=0,Wn=0,Fn=0,ar=0,or=0,nr=this.getCodecs(Yt),ur=8*this.Average(this.bandwidthAS)/1024;if(ur<5?nn=1:ur>=5&&ur<10?nn=2:ur>=10&&(nn=3),nr!==null&&nr[1]){var mr=8*this.Average(this.bandwidthVS)/1024;mr<240?mn=1:mr>=240&&mr<330?mn=2:mr>=330&&(mn=3)}this.rawStats.audio_recv.googJitterBufferMs<60?dn=3:this.rawStats.audio_recv.googJitterBufferMs>=60&&this.rawStats.audio_recv.googJitterBufferMs<100?dn=2:this.rawStats.audio_recv.googJitterBufferMs>=100&&(dn=1),this.rawStats.audio_recv.googCurrentDelayMs<100?yn=3:this.rawStats.audio_recv.googCurrentDelayMs>=100&&this.rawStats.audio_recv.googCurrentDelayMs<200?yn=2:this.rawStats.audio_recv.googCurrentDelayMs>=200&&(yn=1),nr!==null&&nr[1]&&(this.rawStats.video_recv.googJitterBufferMs<100?Cn=3:this.rawStats.video_recv.googJitterBufferMs>=100&&this.rawStats.video_recv.googJitterBufferMs<200?Cn=2:this.rawStats.video_recv.googJitterBufferMs>=200&&(Cn=1));var wr=!1,Jn=!1,er=!1;nr!==null&&nr[1]?(Math.ceil((nn+2*mn+Cn+dn+yn)/6)!=this.qosIn&&(wr=!0),this.qosIn=Math.ceil((nn+2*mn+Cn+dn+yn)/6),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((nn+dn+yn)/3)!=this.qosAudioIn&&(Jn=!0),this.qosAudioIn=Math.ceil((nn+dn+yn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++,Math.ceil((2*mn+Cn)/3)!=this.qosVideoIn&&(er=!0),this.qosVideoIn=Math.ceil((2*mn+Cn)/3),this.qosVideoInAverage=(this.qosVideoInAverage*this.qosVideoInAverageCount+this.qosVideoIn)/(this.qosVideoInAverageCount+1),this.qosVideoInAverageCount++):(Math.ceil((nn+dn+yn)/3)!=this.qosOut&&(wr=!0),this.qosIn=Math.ceil((nn+dn+yn)/3),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((nn+dn+yn)/3)!=this.qosAudioIn&&(Jn=!0),this.qosAudioIn=Math.ceil((nn+dn+yn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++),this.RttAverage(this.moyRttAS)<80?Wn=3:this.RttAverage(this.moyRttAS)>=80&&this.RttAverage(this.moyRttAS)<150?Wn=2:this.RttAverage(this.moyRttAS)>=150&&(Wn=1),this.tauxPacketLossAS<=5?En=3:this.tauxPacketLossAS>5&&this.tauxPacketLossAS<10?En=2:this.tauxPacketLossAS>=10&&(En=1),this.rawStats.audio_recv.googJitterReceived<80?Fn=3:this.rawStats.audio_recv.googJitterReceived>=80&&this.rawStats.audio_recv.googJitterReceived<150?Fn=2:this.rawStats.audio_recv.googJitterReceived>=150&&(Fn=1),nr!==null&&nr[1]&&(this.tauxPacketLossVS<=5?ar=3:this.tauxPacketLossVS>5&&this.tauxPacketLossVS<10?ar=2:this.tauxPacketLossVS>=10&&(ar=1),this.RttAverage(this.moyRttVS)<80?or=3:this.RttAverage(this.moyRttVS)>=80&&this.RttAverage(this.moyRttVS)<150?or=2:this.RttAverage(this.moyRttVS)>=150&&(or=1)),nr!==null&&nr[1]?(Math.ceil((Wn+2*En+Fn+2*ar+or)/7)!=this.qosOut&&(wr=!0),this.qosOut=Math.ceil((Wn+2*En+Fn+2*ar+or)/7),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Wn+2*En+Fn)/4)!=this.qosAudioOut&&(Jn=!0),this.qosAudioOut=Math.ceil((Wn+2*En+Fn)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++,Math.ceil((2*ar+or)/3)!=this.qosVideoOut&&(er=!0),this.qosVideoOut=Math.ceil((2*ar+or)/3),this.qosVideoOutAverage=(this.qosVideoOutAverage*this.qosVideoOutAverageCount+this.qosVideoOut)/(this.qosVideoOutAverageCount+1),this.qosVideoOutAverageCount++):(Math.ceil((Wn+2*En+Fn)/4)!=this.qosOut&&(wr=!0),this.qosOut=Math.ceil((Wn+2*En+Fn)/4),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Wn+2*En+Fn)/4)!=this.qosAudioOut&&(Jn=!0),this.qosAudioOut=Math.ceil((Wn+2*En+Fn)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++),wr&&this.onQosChange(this.qosIn,this.qosOut),Jn&&this.onQosAudioChange(this.qosAudioIn,this.qosAudioOut),er&&this.onQosVideoChange(this.qosVideoIn,this.qosVideoOut)},this.getCodecs=function(Nt){var Yt=!1,Qt=!1,on=null,nn=null;if(Nt!=null&&Nt.sdp!==void 0){for(var dn=Nt.sdp.split(`
`),yn=0;yn<dn.length;yn++)dn[yn].indexOf("a=mid:audio")!=-1&&(Yt=!0),dn[yn].indexOf("a=mid:video")!=-1&&(Qt=!0),Yt&&dn[yn].indexOf("a=rtpmap:")!=-1&&(on=dn[yn],Yt=!1),Qt&&dn[yn].indexOf("a=rtpmap:")!=-1&&(nn=dn[yn],Qt=!1);return[on,nn]}return null},this.getQosScore=function(){return[this.qosIn,this.qosOut,this.qosAudioIn,this.qosAudioOut,this.qosVideoIn,this.qosVideoOut]},this.getStat=function(Nt){switch(Nt){case"AudioOutBandwidth":return 8*this.Average(this.bandwidthAS)/1024;case"VideoOutBandwidth":return 8*this.Average(this.bandwidthVS)/1024;case"AudioInBandwidth":return 8*this.Average(this.bandwidthAR)/1024;case"VideoInBandwidth":return 8*this.Average(this.bandwidthVR)/1024;case"AudioInJitterReceived":return this.rawStats.audio_recv.googJitterReceived;case"AudioInJitterBufferMs":return this.rawStats.audio_recv.googJitterBufferMs;case"AudioInDelay":return this.rawStats.audio_recv.googCurrentDelayMs;case"AudioOutLossRate":return this.tauxPacketLossAS;case"AudioOutRtt":return this.RttAverage(this.moyRttAS);case"AudioOutJitterReceived":return this.rawStats.audio_send.googJitterReceived;case"VideoInJitterBufferMs":return this.rawStats.video_recv.googJitterBufferMs;case"VideoOutLossRate":return this.tauxPacketLossVS;case"VideoOutRtt":return this.RttAverage(this.moyRttVS)}},this.getAllStats=function(){for(var Nt={AudioRecv:{},AudioSend:{},VideoRecv:{},VideoSend:{}},Yt={AudioRecv:"audio_recv",VideoRecv:"video_recv",AudioSend:"audio_send",VideoSend:"video_send"},Qt=Object.keys(Yt),on=0;on<Qt.length;on++)for(var nn=Object.keys(this.rawStats[Yt[Qt[on]]]),dn=0;dn<nn.length;dn++)Nt[Qt[on]][nn[dn]]=this.rawStats[Yt[Qt[on]]][nn[dn]];return Nt.AudioRecv.bandwidth=8*this.Average(this.bandwidthAR)/1024,Nt.VideoRecv.bandwidth=8*this.Average(this.bandwidthVR)/1024,Nt.AudioSend.bandwidth=8*this.Average(this.bandwidthAS)/1024,Nt.VideoSend.bandwidth=8*this.Average(this.bandwidthVS)/1024,Nt.AudioRecv.jitterReceived=this.rawStats.audio_recv.googJitterReceived,Nt.AudioRecv.jitterBufferMs=this.rawStats.audio_recv.googJitterBufferMs,Nt.VideoRecv.jitterBufferMs=this.rawStats.video_recv.googJitterBufferMs,Nt.AudioRecv.delay=this.rawStats.audio_recv.googCurrentDelayMs,Nt.AudioSend.rtt=this.RttAverage(this.moyRttAS),Nt.VideoSend.moyRtt=this.RttAverage(this.moyRttVS),Nt.VideoSend.rtt=this.instantRTT,Nt.VideoSend.FrameHeight=this.rawStats.video_send.FrameHeight,Nt.VideoSend.FrameWidth=this.rawStats.video_send.FrameWidth,Nt.AudioSend.packetLostRatio=this.tauxPacketLossAS[this.tauxPacketLossAS.length-1],Nt.VideoSend.packetLostRatio=this.tauxPacketLossVS[this.tauxPacketLossVS.length-1],Nt.VideoSend.googEncodeUsagePercent=this.rawStats.video_send.googEncodeUsagePercent,Nt.VideoSend.googCpuLimitedResolution=this.rawStats.video_send.googCpuLimitedResolution,Nt.VideoSend.googBandwidthLimitedResolution=this.rawStats.video_send.googBandwidthLimitedResolution,delete Nt.AudioRecv.googCurrentDelayMs,delete Nt.AudioRecv.googJitterReceived,delete Nt.AudioRecv.googJitterBufferMs,delete Nt.VideoRecv.googJitterBufferMs,delete Nt.AudioSend.googRtt,delete Nt.VideoSend.googRtt,Nt},this.displayComputedStats=function(){console.log("Audio IN JitterReceived:"+this.rawStats.audio_recv.googJitterReceived+" jitterbufferMs:"+this.rawStats.audio_recv.googJitterBufferMs+" delay:"+this.rawStats.audio_recv.googCurrentDelayMs+" bandwidth :"+8*this.Average(this.bandwidthAS)/1024+" kBits/s"),console.log("Audio OUT  lossRate:"+this.tauxPacketLossAS+" rtt:"+this.RttAverage(this.moyRttAS)+" googJitterReceived:"+this.rawStats.audio_recv.googJitterReceived),console.log("Video IN jitter buffer ms:"+this.rawStats.video_recv.googJitterBufferMs+" bandwidth:"+8*this.Average(this.bandwidthVS)/1024+" kBits/s"),console.log("Video OUT loss rate:"+this.tauxPacketLossVS+" rtt:"+this.RttAverage(this.moyRttVS))},this.RttAverage=function(Nt){for(var Yt=0,Qt=0,on=0;on<Nt.length;++on)Nt[on]!==0&&Nt[on]!==-1&&Nt[on]!==void 0&&(Yt+=parseInt(Nt[on],10),Qt++);return parseInt(Yt/Qt,10)},this.Average=function(Nt){for(var Yt=0,Qt=0,on=0;on<Nt.length;++on)Nt[on]!=-1&&Nt[on]!==void 0&&(Yt+=parseInt(Nt[on],10),Qt++);return parseInt(Yt/Qt,10)},this.add=function(Nt,Yt){Yt.pop(),Yt.unshift(Nt)},this.displayTab=function(Nt){for(var Yt in Nt)console.log(Yt+" = "+Nt[Yt])}});function kt(Kt){return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},kt(Kt)}function Dt(){Dt=function(){return Kt};var Kt={},At=Object.prototype,it=At.hasOwnProperty,Rt=typeof Symbol=="function"?Symbol:{},bt=Rt.iterator||"@@iterator",wt=Rt.asyncIterator||"@@asyncIterator",Et=Rt.toStringTag||"@@toStringTag";function Mt(Jn,er,hr){return Object.defineProperty(Jn,er,{value:hr,enumerable:!0,configurable:!0,writable:!0}),Jn[er]}try{Mt({},"")}catch{Mt=function(er,hr,Sr){return er[hr]=Sr}}function Nt(Jn,er,hr,Sr){var yr=er&&er.prototype instanceof on?er:on,Pr=Object.create(yr.prototype),jr=new ur(Sr||[]);return Pr._invoke=function(Zn,fr,qn){var Er="suspendedStart";return function(sr,Br){if(Er==="executing")throw new Error("Generator is already running");if(Er==="completed"){if(sr==="throw")throw Br;return{value:void 0,done:!0}}for(qn.method=sr,qn.arg=Br;;){var Dr=qn.delegate;if(Dr){var xr=ar(Dr,qn);if(xr){if(xr===Qt)continue;return xr}}if(qn.method==="next")qn.sent=qn._sent=qn.arg;else if(qn.method==="throw"){if(Er==="suspendedStart")throw Er="completed",qn.arg;qn.dispatchException(qn.arg)}else qn.method==="return"&&qn.abrupt("return",qn.arg);Er="executing";var Yn=Yt(Zn,fr,qn);if(Yn.type==="normal"){if(Er=qn.done?"completed":"suspendedYield",Yn.arg===Qt)continue;return{value:Yn.arg,done:qn.done}}Yn.type==="throw"&&(Er="completed",qn.method="throw",qn.arg=Yn.arg)}}}(Jn,hr,jr),Pr}function Yt(Jn,er,hr){try{return{type:"normal",arg:Jn.call(er,hr)}}catch(Sr){return{type:"throw",arg:Sr}}}Kt.wrap=Nt;var Qt={};function on(){}function nn(){}function dn(){}var yn={};Mt(yn,bt,function(){return this});var mn=Object.getPrototypeOf,Cn=mn&&mn(mn(mr([])));Cn&&Cn!==At&&it.call(Cn,bt)&&(yn=Cn);var En=dn.prototype=on.prototype=Object.create(yn);function Wn(Jn){["next","throw","return"].forEach(function(er){Mt(Jn,er,function(hr){return this._invoke(er,hr)})})}function Fn(Jn,er){function hr(yr,Pr,jr,Zn){var fr=Yt(Jn[yr],Jn,Pr);if(fr.type!=="throw"){var qn=fr.arg,Er=qn.value;return Er&&kt(Er)=="object"&&it.call(Er,"__await")?er.resolve(Er.__await).then(function(sr){hr("next",sr,jr,Zn)},function(sr){hr("throw",sr,jr,Zn)}):er.resolve(Er).then(function(sr){qn.value=sr,jr(qn)},function(sr){return hr("throw",sr,jr,Zn)})}Zn(fr.arg)}var Sr;this._invoke=function(yr,Pr){function jr(){return new er(function(Zn,fr){hr(yr,Pr,Zn,fr)})}return Sr=Sr?Sr.then(jr,jr):jr()}}function ar(Jn,er){var hr=Jn.iterator[er.method];if(hr===void 0){if(er.delegate=null,er.method==="throw"){if(Jn.iterator.return&&(er.method="return",er.arg=void 0,ar(Jn,er),er.method==="throw"))return Qt;er.method="throw",er.arg=new TypeError("The iterator does not provide a 'throw' method")}return Qt}var Sr=Yt(hr,Jn.iterator,er.arg);if(Sr.type==="throw")return er.method="throw",er.arg=Sr.arg,er.delegate=null,Qt;var yr=Sr.arg;return yr?yr.done?(er[Jn.resultName]=yr.value,er.next=Jn.nextLoc,er.method!=="return"&&(er.method="next",er.arg=void 0),er.delegate=null,Qt):yr:(er.method="throw",er.arg=new TypeError("iterator result is not an object"),er.delegate=null,Qt)}function or(Jn){var er={tryLoc:Jn[0]};1 in Jn&&(er.catchLoc=Jn[1]),2 in Jn&&(er.finallyLoc=Jn[2],er.afterLoc=Jn[3]),this.tryEntries.push(er)}function nr(Jn){var er=Jn.completion||{};er.type="normal",delete er.arg,Jn.completion=er}function ur(Jn){this.tryEntries=[{tryLoc:"root"}],Jn.forEach(or,this),this.reset(!0)}function mr(Jn){if(Jn){var er=Jn[bt];if(er)return er.call(Jn);if(typeof Jn.next=="function")return Jn;if(!isNaN(Jn.length)){var hr=-1,Sr=function yr(){for(;++hr<Jn.length;)if(it.call(Jn,hr))return yr.value=Jn[hr],yr.done=!1,yr;return yr.value=void 0,yr.done=!0,yr};return Sr.next=Sr}}return{next:wr}}function wr(){return{value:void 0,done:!0}}return nn.prototype=dn,Mt(En,"constructor",dn),Mt(dn,"constructor",nn),nn.displayName=Mt(dn,Et,"GeneratorFunction"),Kt.isGeneratorFunction=function(Jn){var er=typeof Jn=="function"&&Jn.constructor;return!!er&&(er===nn||(er.displayName||er.name)==="GeneratorFunction")},Kt.mark=function(Jn){return Object.setPrototypeOf?Object.setPrototypeOf(Jn,dn):(Jn.__proto__=dn,Mt(Jn,Et,"GeneratorFunction")),Jn.prototype=Object.create(En),Jn},Kt.awrap=function(Jn){return{__await:Jn}},Wn(Fn.prototype),Mt(Fn.prototype,wt,function(){return this}),Kt.AsyncIterator=Fn,Kt.async=function(Jn,er,hr,Sr,yr){yr===void 0&&(yr=Promise);var Pr=new Fn(Nt(Jn,er,hr,Sr),yr);return Kt.isGeneratorFunction(er)?Pr:Pr.next().then(function(jr){return jr.done?jr.value:Pr.next()})},Wn(En),Mt(En,Et,"Generator"),Mt(En,bt,function(){return this}),Mt(En,"toString",function(){return"[object Generator]"}),Kt.keys=function(Jn){var er=[];for(var hr in Jn)er.push(hr);return er.reverse(),function Sr(){for(;er.length;){var yr=er.pop();if(yr in Jn)return Sr.value=yr,Sr.done=!1,Sr}return Sr.done=!0,Sr}},Kt.values=mr,ur.prototype={constructor:ur,reset:function(Jn){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(nr),!Jn)for(var er in this)er.charAt(0)==="t"&&it.call(this,er)&&!isNaN(+er.slice(1))&&(this[er]=void 0)},stop:function(){this.done=!0;var Jn=this.tryEntries[0].completion;if(Jn.type==="throw")throw Jn.arg;return this.rval},dispatchException:function(Jn){if(this.done)throw Jn;var er=this;function hr(fr,qn){return Pr.type="throw",Pr.arg=Jn,er.next=fr,qn&&(er.method="next",er.arg=void 0),!!qn}for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var yr=this.tryEntries[Sr],Pr=yr.completion;if(yr.tryLoc==="root")return hr("end");if(yr.tryLoc<=this.prev){var jr=it.call(yr,"catchLoc"),Zn=it.call(yr,"finallyLoc");if(jr&&Zn){if(this.prev<yr.catchLoc)return hr(yr.catchLoc,!0);if(this.prev<yr.finallyLoc)return hr(yr.finallyLoc)}else if(jr){if(this.prev<yr.catchLoc)return hr(yr.catchLoc,!0)}else{if(!Zn)throw new Error("try statement without catch or finally");if(this.prev<yr.finallyLoc)return hr(yr.finallyLoc)}}}},abrupt:function(Jn,er){for(var hr=this.tryEntries.length-1;hr>=0;--hr){var Sr=this.tryEntries[hr];if(Sr.tryLoc<=this.prev&&it.call(Sr,"finallyLoc")&&this.prev<Sr.finallyLoc){var yr=Sr;break}}yr&&(Jn==="break"||Jn==="continue")&&yr.tryLoc<=er&&er<=yr.finallyLoc&&(yr=null);var Pr=yr?yr.completion:{};return Pr.type=Jn,Pr.arg=er,yr?(this.method="next",this.next=yr.finallyLoc,Qt):this.complete(Pr)},complete:function(Jn,er){if(Jn.type==="throw")throw Jn.arg;return Jn.type==="break"||Jn.type==="continue"?this.next=Jn.arg:Jn.type==="return"?(this.rval=this.arg=Jn.arg,this.method="return",this.next="end"):Jn.type==="normal"&&er&&(this.next=er),Qt},finish:function(Jn){for(var er=this.tryEntries.length-1;er>=0;--er){var hr=this.tryEntries[er];if(hr.finallyLoc===Jn)return this.complete(hr.completion,hr.afterLoc),nr(hr),Qt}},catch:function(Jn){for(var er=this.tryEntries.length-1;er>=0;--er){var hr=this.tryEntries[er];if(hr.tryLoc===Jn){var Sr=hr.completion;if(Sr.type==="throw"){var yr=Sr.arg;nr(hr)}return yr}}throw new Error("illegal catch attempt")},delegateYield:function(Jn,er,hr){return this.delegate={iterator:mr(Jn),resultName:er,nextLoc:hr},this.method==="next"&&(this.arg=void 0),Qt}},Kt}function Vt(Kt,At,it,Rt,bt,wt,Et){try{var Mt=Kt[wt](Et),Nt=Mt.value}catch(Yt){return void it(Yt)}Mt.done?At(Nt):Promise.resolve(Nt).then(Rt,bt)}function Ot(Kt){return function(){var At=this,it=arguments;return new Promise(function(Rt,bt){var wt=Kt.apply(At,it);function Et(Nt){Vt(wt,Rt,bt,Et,Mt,"next",Nt)}function Mt(Nt){Vt(wt,Rt,bt,Et,Mt,"throw",Nt)}Et(void 0)})}}s(2443),s(3680),s(3706),s(2703),s(8011),s(489),s(8304);var Lt=et.Y.get("DataChannelFileSender"),Gt=apiCC.myWebRTC_Event,tn=1<<17,zt=function(Kt){this.call=Kt,this.sendChunkNb=0,this.convertBlob=function(){var At=Ot(Dt().mark(function it(Rt){var bt;return Dt().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.next=2,Rt.arrayBuffer();case 2:return bt=wt.sent,wt.abrupt("return",bt);case 4:case"end":return wt.stop()}},it)}));return function(it){return At.apply(this,arguments)}}(),this.send=function(){var At=Ot(Dt().mark(function it(Rt,bt,wt){var Et,Mt,Nt,Yt,Qt,on;return Dt().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(Et=12e3,Mt={},Nt=null,Yt={},Qt=!1,on={},Lt.info("DataChannelFileSender send"),Lt.log("data.name :"+Rt.name),!(Rt.file instanceof Blob)){nn.next=13;break}return Lt.log("Blob"),nn.next=7,this.convertBlob(Rt.file);case 7:this.blob=nn.sent,this.contentType=this.blob.type,this.size=this.blob.byteLength,this.originalDataType="Blob",nn.next=14;break;case 13:Rt.file instanceof ArrayBuffer?(Lt.log("ArrayBuffer"),this.blob=Rt.file,this.contentType="application/octet-stream",this.size=Rt.file.byteLength,this.originalDataType="ArrayBuffer"):Rt.file instanceof String||typeof Rt.file=="string"?(Lt.log("string"),this.blob=Rt.file,this.size=Rt.file.length,this.contentType="application/octet-stream",this.originalDataType="String"):(Lt.log("unknown type"),this.blob=Rt.file,this.contentType="application/octet-stream",this.size=Rt.file.length||Rt.file.byteLength||Rt.file.size,this.originalDataType="Unknown");case 14:if(this.contentType||(this.contentType="application/octet-stream"),this.size!==0){nn.next=21;break}return Lt.log("sending done"),wt!==void 0&&(Lt.log("onProgress"),this.transferDuration=new Date-this.startingDate,wt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,lastPacket:Qt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0})),Gt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,lastPacket:Qt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0}),Gt.createEvent({eventType:"onFileSended",callId:Kt.callId,remoteId:Kt.remoteId,name:Rt.name,uuid:Rt.uuid}),nn.abrupt("return");case 21:if(bt){nn.next=24;break}return Lt.log("No data channel to send data"),nn.abrupt("return");case 24:if(bt.readyState==="open"){nn.next=27;break}return Lt.log("Trying to send on a closed channel"),nn.abrupt("return");case 27:if(this.sendChunkNb===0&&Lt.log("first packet"),this.sendChunkNb===0){Rt.uuid=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-"),Yt={name:Rt.name,type:Rt.type,size:this.size,contentType:this.contentType,uuid:Rt.uuid,originalDataType:this.originalDataType},Lt.log("first packet",Yt),this.fileSize=this.size,wt!==void 0&&(Lt.log("onProgress"),this.startingDate=new Date,this.transferDuration=0,wt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,lastPacket:Qt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),Gt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,lastPacket:Qt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{bt.send(JSON.stringify(Yt))}catch(dn){Lt.warn("error detected when sending on datachannel :",bt),Lt.warn("error is :",dn)}Gt.createEvent({eventType:"onFileSending",callId:Kt.callId,remoteId:Kt.remoteId,name:Rt.name,uuid:Rt.uuid})}else{Et<this.size?(Lt.log("sending chunk"),Mt=this.blob.slice(0,Et)):(Lt.log("sending last chunk"),Mt=this.blob.slice(0),Qt=!0),Lt.log("dataToSend.byteLength ="+Mt.byteLength),this.originalDataType==="ArrayBuffer"?on.message=ot.cw.encode(Mt):on.message=Mt,Rt.file instanceof Blob?on.messageSize=Mt.size:on.messageSize=Mt.byteLength,on.uuid=Rt.uuid,on.originalDataType=this.originalDataType,wt!==void 0&&(Lt.log("onProgress"),this.transferDuration=new Date-this.startingDate,wt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,startingDate:this.startingDate,lastPacket:Qt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),Gt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Rt.uuid,remoteId:Kt.remoteId,startingDate:this.startingDate,lastPacket:Qt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{bt.send(JSON.stringify(on))}catch(dn){Lt.warn("error detected when sending on datachannel :",bt),Lt.warn("error is :",dn)}}Nt=this.sendChunkNb===0?this.blob:this.blob.slice(Et),Qt===!1?this.sendChunkNb++:this.sendChunkNb=0,Rt.file=Nt,setTimeout((function(){this.send(Rt,bt,wt)}).bind(this));case 33:case"end":return nn.stop()}},it,this)}));return function(it,Rt,bt){return At.apply(this,arguments)}}(),this.terminateTransfer=function(){var At=this;Lt.debug("terminateTransfer; terminated: "+this.terminated),this.channel!==null?this.useBufferedAmount===!0&&this.channel.bufferedAmount>0&&this.canceled!==!0?setTimeout(this.terminateTransfer.bind(this)):this.terminated!==!0&&(this.terminated=!0,this.recvDataEndAckTimeoutId&&(clearTimeout(this.recvDataEndAckTimeoutId),delete this.recvDataEndAckTimeoutId),delete this.call.dcfs,Lt.debug("terminateTransfer; terminating"),this.call.pipelineCallId?(this.call.pipelineCall&&(delete this.call.pipelineCall.clientCall,delete this.call.pipelineCall,this.call.sendDataChannel=null),this.channel=null):setTimeout(function(){At.channel.close(),At.channel=null}),setTimeout(function(){if(At.canceled===!0)Gt.createEvent({eventType:"onFileSended",callId:At.call.callId,remoteId:At.call.remoteId,name:At.call.data.filename,error:"canceled"}),At.call.callbacks.failure("canceled");else if(At.call.failure)Gt.createEvent({eventType:"onFileSended",callId:At.call.callId,remoteId:At.call.remoteId,name:At.call.data.filename,error:At.call.failure}),At.call.callbacks.failure(At.call.failure);else{var it={eventType:"onFileSended",callId:At.call.callId,remoteId:At.call.remoteId,name:At.call.data.filename};At.call.success.data&&(it.data=At.call.success.data),Gt.createEvent(it),At.call.callbacks.success(At.call.success)}apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(At.call.callId)})):Lt.warn("No data channel to send data, leaving terminateTransfer")},this.recvDataEndAckTimeout=function(){Lt.error("recvDataEndAckTimeout"),this.call.failure="ackNotReceived",setTimeout(this.terminateTransfer.bind(this))},this.subsequentTransfer=function(){var At,it=!1;if(Lt.debug("subsequentTransfer; remByteCount: "+this.remByteCount),this.canceled!==!0)if(this.channel!==null)if(this.useBufferedAmount===!0&&this.channel.bufferedAmount>tn)setTimeout(this.subsequentTransfer.bind(this));else try{for(;;){if(!(this.remByteCount>=this.chunkLength)){At=this.data.slice(this.offset,this.offset+this.remByteCount),this.channel.send(At),this.packetsSent+=1,Lt.debug("packetSent "+this.packetsSent+" "+this.remByteCount),this.offset+=this.remByteCount,this.remByteCount-=this.remByteCount,it=!0;break}if(At=this.data.slice(this.offset,this.offset+this.chunkLength),this.channel.send(At),this.packetsSent+=1,Lt.debug("packetSent "+this.packetsSent+" "+this.chunkLength),this.offset+=this.chunkLength,this.remByteCount-=this.chunkLength,this.remByteCount<=0){it=!0;break}if(this.useBufferedAmount!==!0||this.channel.bufferedAmount>tn)break}it===!0?(Gt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:100}),this.call.callbacks.progress({state:"complete",filename:this.call.data.filename,size:this.call.data.size,remBytes:0,progress:100}),this.call.success={state:"complete",filename:this.call.data.filename,size:this.call.data.size,mediaURL:this.call.mediaURL,mediaId:this.call.mediaId},this.recvDataEndAckTimeoutId=setTimeout(this.recvDataEndAckTimeout.bind(this),3e4)):(Gt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:Math.floor(100*this.offset/this.call.data.size)}),this.call.callbacks.progress({state:"incomplete",filename:this.call.data.filename,size:this.call.data.size,remBytes:this.remByteCount,progress:Math.floor(100*this.offset/this.call.data.size)}),setTimeout(this.subsequentTransfer.bind(this)))}catch(Rt){return Lt.error("transfer: "+Rt),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}else Lt.warn("No data channel to send data, leaving subsequentTransfer");else setTimeout(this.terminateTransfer.bind(this))},this.transfer=function(At,it,Rt){var bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},wt=bt.hasOwnProperty("delay")?bt.delay:100;if(Lt.info("transfer",it,wt),this.call.beginTimeoutId&&(clearTimeout(this.call.beginTimeoutId),delete this.call.beginTimeoutId),this.data=At,this.channel=Rt,this.channel!==null){typeof this.channel.bufferedAmount=="number"&&this.channel.bufferedAmount>=0&&(Lt.debug("browserDetails",ot.wL),ot.wL.type==="chrome"?ot.wL.version>=37&&(this.useBufferedAmount=!0,Lt.debug("useBufferedAmount enabled")):(this.useBufferedAmount=!0,Lt.debug("useBufferedAmount enabled"))),this.chunkLength=8192,it>0?(this.offset=Math.floor(it/this.chunkLength)*this.chunkLength,this.remByteCount=this.data.byteLength-this.offset):(this.offset=0,this.remByteCount=this.data.byteLength),this.packetsSent=0;try{var Et={chunkLength:this.chunkLength,offset:this.offset,remBytes:this.remByteCount};this.call.pipelineCallId&&(Et.pluginName=Kt.data.pluginName,Et.pluginData=Kt.data.pluginData,Kt.data.context&&(Et.context=Kt.data.context)),this.channel.send(JSON.stringify(Et))}catch(Mt){return Lt.error("transfer:",Mt),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}Gt.createEvent({eventType:"onFileSending",callId:this.call.callId,remoteId:this.call.remoteId,name:this.call.data.filename}),setTimeout(this.subsequentTransfer.bind(this),wt)}else Lt.warn("No data channel to send data, leaving transfer")}},cn=(et.Y.get("CallStatsMonitor"),function(Kt,At,it,Rt){this.interval=Kt,this.browserType=At,this.browserVersion=it,this.flavor=Rt,this.prevData={},this.prevDataThreshold=10/Kt,this.prevDataThreshold<2&&(this.prevDataThreshold=2),this.STANDARD_STAT_KEYS={audioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},audioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1}},this.refineStats_chrome_proprietary=function(bt,wt){var Et,Mt;for(Et=0;Et<wt.length;Et+=1){var Nt=wt[Et],Yt=null,Qt=null;if(Nt.type==="ssrc"){if(Nt.id.indexOf("recv")>=0){if(Nt.stat("mediaType")==="audio")for(bt.audioReceived={timestamp:Math.floor(Date.parse(Nt.timestamp))/1e3,type:"inbound-rtp",isRemote:!1,mediaType:"audio",packetsReceived:0,bytesReceived:0},Yt=Nt.names(),Mt=0;Mt<Yt.length;Mt+=1)(Qt=Yt[Mt])==="packetsReceived"?bt.audioReceived.packetsReceived=parseInt(Nt.stat("packetsReceived"),10):Qt==="bytesReceived"&&(bt.audioReceived.bytesReceived=parseInt(Nt.stat("bytesReceived"),10));else if(Nt.stat("mediaType")==="video")for(bt.videoReceived={timestamp:Math.floor(Date.parse(Nt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesDecoded:0,packetsReceived:0,bytesReceived:0},Yt=Nt.names(),Mt=0;Mt<Yt.length;Mt+=1)(Qt=Yt[Mt])==="framesDecoded"?bt.videoReceived.framesDecoded=parseInt(Nt.stat("framesDecoded"),10):Qt==="packetsReceived"?bt.videoReceived.packetsReceived=parseInt(Nt.stat("packetsReceived"),10):Qt==="bytesReceived"&&(bt.videoReceived.bytesReceived=parseInt(Nt.stat("bytesReceived"),10))}else if(Nt.id.indexOf("send")>=0){if(Nt.stat("mediaType")==="audio")for(bt.audioSent={timestamp:Math.floor(Date.parse(Nt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"audio",packetsSent:0,bytesSent:0},Yt=Nt.names(),Mt=0;Mt<Yt.length;Mt+=1)(Qt=Yt[Mt])==="packetsSent"?bt.audioSent.packetsSent=parseInt(Nt.stat("packetsSent"),10):Qt==="bytesSent"&&(bt.audioSent.bytesSent=parseInt(Nt.stat("bytesSent"),10));else if(Nt.stat("mediaType")==="video")for(bt.videoSent={timestamp:Math.floor(Date.parse(Nt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesEncoded:0,packetsSent:0,bytesSent:0},Yt=Nt.names(),Mt=0;Mt<Yt.length;Mt+=1)(Qt=Yt[Mt])==="framesEncoded"?bt.videoSent.framesEncoded=parseInt(Nt.stat("framesEncoded"),10):Qt==="packetsSent"?bt.videoSent.packetsSent=parseInt(Nt.stat("packetsSent"),10):Qt==="bytesSent"&&(bt.videoSent.bytesSent=parseInt(Nt.stat("bytesSent"),10))}}}return!1},this.refineStats_chrome_legacy=function(bt,wt){var Et=!1;return wt.forEach(function(Mt){var Nt=null,Yt=null;if(Mt.type==="ssrc"&&Mt.id.indexOf("recv")>=0){if(Mt.mediaType==="audio"){for(Yt in bt.audioReceived={},Nt=Math.floor(Date.parse(Mt.timestamp)/1e3),Mt)Yt==="timestamp"?bt.audioReceived.timestamp=Nt:bt.audioReceived[Yt]=Mt[Yt];Et=!0}else if(Mt.mediaType==="video"){for(Yt in bt.videoReceived={},Nt=Math.floor(Date.parse(Mt.timestamp)/1e3),Mt)Yt==="timestamp"?bt.videoReceived.timestamp=Nt:bt.videoReceived[Yt]=Mt[Yt];Et=!0}}else if(Mt.type==="ssrc"&&Mt.id.indexOf("send")>=0){if(Mt.mediaType==="audio"){for(Yt in bt.audioSent={},Nt=Math.floor(Date.parse(Mt.timestamp)/1e3),Mt)Yt==="timestamp"?bt.audioSent.timestamp=Nt:bt.audioSent[Yt]=Mt[Yt];Et=!0}else if(Mt.mediaType==="video"){for(Yt in bt.videoSent={},Nt=Math.floor(Date.parse(Mt.timestamp)/1e3),Mt)Yt==="timestamp"?bt.videoSent.timestamp=Nt:bt.videoSent[Yt]=Mt[Yt];Et=!0}}}),Et},this.refineStats_chrome_58=function(bt,wt){var Et=this,Mt=!1;return wt.forEach(function(Nt){if(Nt.type!=="inbound-rtp"||Nt.isRemote){if(Nt.type==="outbound-rtp"&&!Nt.isRemote){if(Nt.mediaType==="audio"){bt.audioSent={};var Yt=Math.floor(Nt.timestamp/1e3);for(var Qt in Nt)Et.STANDARD_STAT_KEYS.audioSent[Qt]!==!1&&(Qt==="timestamp"?bt.audioSent.timestamp=Yt:bt.audioSent[Qt]=Nt[Qt]);Mt=!0}else if(Nt.mediaType==="video"){bt.videoSent={};var on=Math.floor(Nt.timestamp/1e3);for(var nn in Nt)Et.STANDARD_STAT_KEYS.videoSent[nn]!==!1&&(nn==="timestamp"?bt.videoSent.timestamp=on:bt.videoSent[nn]=Nt[nn]);Mt=!0}}}else if(Nt.mediaType==="audio"||Nt.id.indexOf("Audio")>=0){bt.audioReceived={};var dn=Math.floor(Nt.timestamp/1e3);for(var yn in Nt)Et.STANDARD_STAT_KEYS.audioReceived[yn]!==!1&&(yn==="timestamp"?bt.audioReceived.timestamp=dn:bt.audioReceived[yn]=Nt[yn]);Mt=!0}else if(Nt.mediaType==="video"||Nt.id.indexOf("Video")>=0){bt.videoReceived={};var mn=Math.floor(Nt.timestamp/1e3);for(var Cn in Nt)Et.STANDARD_STAT_KEYS.videoReceived[Cn]!==!1&&(Cn==="timestamp"?bt.videoReceived.timestamp=mn:bt.videoReceived[Cn]=Nt[Cn]);Mt=!0}}),Mt},this.refineStats_firefox_legacy=function(bt,wt){var Et=!1,Mt=this;return wt.forEach(function(Nt){var Yt=null,Qt=null;if(Nt.type==="inbound-rtp"&&Nt.isRemote===!1){if(Nt.mediaType==="audio"){for(Yt in bt.audioReceived={packetsReceived:0,bytesReceived:0},Qt=Math.floor(Nt.timestamp/1e3),Nt)Mt.STANDARD_STAT_KEYS.audioReceived[Yt]!==!1&&(Yt==="timestamp"?bt.audioReceived.timestamp=Qt:bt.audioReceived[Yt]=Nt[Yt]);Et=!0}else if(Nt.mediaType==="video"){for(Yt in bt.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0},Qt=Math.floor(Nt.timestamp/1e3),Nt)Mt.STANDARD_STAT_KEYS.videoReceived[Yt]!==!1&&(Yt==="timestamp"?bt.videoReceived.timestamp=Qt:bt.videoReceived[Yt]=Nt[Yt]);Et=!0}}else if(Nt.type==="outbound-rtp"&&Nt.isRemote===!1){if(Nt.mediaType==="audio"){for(Yt in bt.audioSent={packetsSent:0,bytesSent:0},Qt=Math.floor(Nt.timestamp/1e3),Nt)Mt.STANDARD_STAT_KEYS.audioSent[Yt]!==!1&&(Yt==="timestamp"?bt.audioSent.timestamp=Qt:bt.audioSent[Yt]=Nt[Yt]);Et=!0}else if(Nt.mediaType==="video"){for(Yt in bt.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0},Qt=Math.floor(Nt.timestamp/1e3),Nt)Mt.STANDARD_STAT_KEYS.videoSent[Yt]!==!1&&(Yt==="timestamp"?bt.videoSent.timestamp=Qt:bt.videoSent[Yt]=Nt[Yt]);Et=!0}}}),Et},this.refineStats_firefox_63=function(bt,wt){var Et=!1,Mt=this;return wt.forEach(function(Nt){if(Nt.type!=="inbound-rtp"||Nt.isRemote){if(Nt.type==="outbound-rtp"&&!Nt.isRemote){if(Nt.kind==="audio"){bt.audioSent={packetsSent:0,bytesSent:0};var Yt=Math.floor(Nt.timestamp/1e3);for(var Qt in Nt)Mt.STANDARD_STAT_KEYS.audioSent[Qt]!==!1&&(Qt==="timestamp"?bt.audioSent.timestamp=Yt:bt.audioSent[Qt]=Nt[Qt]);Et=!0}else if(Nt.kind==="video"){bt.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0};var on=Math.floor(Nt.timestamp/1e3);for(var nn in Nt)Mt.STANDARD_STAT_KEYS.videoSent[nn]!==!1&&(nn==="timestamp"?bt.videoSent.timestamp=on:bt.videoSent[nn]=Nt[nn]);Et=!0}}}else if(Nt.kind==="audio"){bt.audioReceived={packetsReceived:0,bytesReceived:0};var dn=Math.floor(Nt.timestamp/1e3);for(var yn in Nt)Mt.STANDARD_STAT_KEYS.audioReceived[yn]!==!1&&(yn==="timestamp"?bt.audioReceived.timestamp=dn:bt.audioReceived[yn]=Nt[yn]);Et=!0}else if(Nt.kind==="video"){bt.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0};var mn=Math.floor(Nt.timestamp/1e3);for(var Cn in Nt)Mt.STANDARD_STAT_KEYS.videoReceived[Cn]!==!1&&(Cn==="timestamp"?bt.videoReceived.timestamp=mn:bt.videoReceived[Cn]=Nt[Cn]);Et=!0}}),Et},this.addCallStats=function(bt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et={};if(this.refineStats!==void 0){if(this.refineStats(Et,bt),Et.audioReceived!==void 0){if(this.prevData.audioReceived!==void 0){var Mt=Et.audioReceived.timestamp-this.prevData.audioReceived[0].timestamp;Mt>0?(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=Math.floor((Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)/Mt)),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=Math.floor(8*(Et.audioReceived.bytesReceived-this.prevData.audioReceived[0].bytesReceived)/Mt)),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=Math.floor((Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/Mt)),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=100*(Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/(Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)),Et.audioReceived.samplingInterval=Mt):(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0)}else Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0,this.prevData.audioReceived=[];for(this.prevData.audioReceived.push(Et.audioReceived);this.prevData.audioReceived.length>this.prevDataThreshold;)this.prevData.audioReceived.shift()}if(Et.videoReceived!==void 0){if(this.prevData.videoReceived!==void 0){var Nt=Et.videoReceived.timestamp-this.prevData.videoReceived[0].timestamp;Nt>0?(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=Math.floor((Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)/Nt)),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=Math.floor(8*(Et.videoReceived.bytesReceived-this.prevData.videoReceived[0].bytesReceived)/Nt)),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=Math.floor((Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/Nt)),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=Math.floor((Et.videoReceived.framesDecoded-this.prevData.videoReceived[0].framesDecoded)/Nt)),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=100*(Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/(Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)),Et.videoReceived.samplingInterval=Nt):(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0)}else Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0,this.prevData.videoReceived=[];for(this.prevData.videoReceived.push(Et.videoReceived);this.prevData.videoReceived.length>this.prevDataThreshold;)this.prevData.videoReceived.shift()}if(Et.audioSent!==void 0){if(this.prevData.audioSent!==void 0){var Yt=Et.audioSent.timestamp-this.prevData.audioSent[0].timestamp;Yt>0?(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=Math.floor((Et.audioSent.packetsSent-this.prevData.audioSent[0].packetsSent)/Yt)),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=Math.floor(8*(Et.audioSent.bytesSent-this.prevData.audioSent[0].bytesSent)/Yt)),Et.audioSent.samplingInterval=Yt):(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0)}else Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0,this.prevData.audioSent=[];for(this.prevData.audioSent.push(Et.audioSent);this.prevData.audioSent.length>this.prevDataThreshold;)this.prevData.audioSent.shift()}if(Et.videoSent!==void 0){if(this.prevData.videoSent!==void 0){var Qt=Et.videoSent.timestamp-this.prevData.videoSent[0].timestamp;Qt>0?(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=Math.floor((Et.videoSent.packetsSent-this.prevData.videoSent[0].packetsSent)/Qt)),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=Math.floor(8*(Et.videoSent.bytesSent-this.prevData.videoSent[0].bytesSent)/Qt)),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=Math.floor((Et.videoSent.framesEncoded-this.prevData.videoSent[0].framesEncoded)/Qt)),Et.videoSent.samplingInterval=Qt):(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0)}else Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0,this.prevData.videoSent=[];for(this.prevData.videoSent.push(Et.videoSent);this.prevData.videoSent.length>this.prevDataThreshold;)this.prevData.videoSent.shift()}}return Object.keys(Et).length>0&&typeof wt.post=="function"&&wt.post(Et),Et},this.browserType==="chrome"?Rt==="proprietary"?this.refineStats=this.refineStats_chrome_proprietary:this.browserVersion>=58?this.refineStats=this.refineStats_chrome_58:this.refineStats=this.refineStats_chrome_legacy:this.browserType==="firefox"?this.browserVersion>=63?this.refineStats=this.refineStats_firefox_63:this.refineStats=this.refineStats_firefox_legacy:this.browserType==="safari"&&(this.refineStats=this.refineStats_chrome_58)}),un=(s(658),function(){this.NarrowBandSpeechQuality=function(Kt,At){var it,Rt,bt=1,wt=1+Kt/10,Et=1+Kt/150,Mt=(94.769-(it=80+2.5*(65-40*Math.log10(wt/Et)+6*Math.exp(Kt*Kt*-.3)-14)))*(94.769-it)/4+100;return(Rt=93.193-((94.769-it)/2+Math.sqrt(Mt)-1)*(1-Math.exp(-Kt))-(0+At/(At+4.3)*95))<0&&(bt=1),Rt<100&Rt>0&&(bt=1+.035*Rt+Rt*(Rt-60)*(100-Rt)*7*1e-6),Rt>100&&(bt=4.5),bt},this.WideBandspeechQuality=function(Kt,At){var it,Rt,bt,wt=0,Et=1;Kt<100&&(wt=.08-Kt+10),Kt>=100&&(wt=18);var Mt=1+Kt/10,Nt=1+Kt/150,Yt=(129-(it=80+3*(65+wt-40*Math.log10(Mt/Nt)+6*Math.exp(Kt*Kt*-.3)-14)))*(129-it)/4+100;return(bt=(Rt=129-((129-it)/2+Math.sqrt(Yt)-1)*(1-Math.exp(-Kt))-(0+At/(At+4.3)*95))/1.29)<=0&&(Et=1),bt<100&bt>0&&(Et=1+.035*Rt+Rt*(Rt-60)*(100-Rt)*7*1e-6),bt>=100&&(Et=4.5),Et},this.videoQuality=function(Kt,At,it,Rt,bt){var wt,Et,Mt,Nt,Yt,Qt,on,nn,dn;return dn=At>720?[0,2.77,.009,3.95,460,1.28,2.12,32e-5,1.28,262,1.98,22.84,7.999]:At>576?[0,6.31,.008,3.68,262,1.28,1.97,33e-5,1.24,343,2.76,6.25,6.013]:At>480?[0,6.96,.007,3.58,214,1.2,1.75,63e-5,1.13,171,4.25,7.98,12.001]:At>288?[0,5.61,.01,3.38,182,1.31,2.23,75e-5,1.51,136,4.05,20.16,22.332]:[0,3.988,.013,3.625,89.25,1.125,.713,0,1.542,245.5,3.011,39.31,16.67],Qt=1+Math.pow(Rt/dn[4],dn[5]),wt=dn[3]-dn[3]/Qt,Et=dn[1]+dn[2]*Rt,Mt=dn[6]+dn[7]*Rt,on=Math.pow(Math.log(bt)-Math.log(Et),2),nn=2*Math.pow(Mt,2),Nt=wt*Math.exp(-on/nn),Yt=dn[10]+dn[11]*Math.exp(-bt/dn[8])+dn[12]*Math.exp(-Rt/dn[9]),1+Nt*Math.exp(-it/Yt)},this.audiovisualQuality=function(Kt,At,it,Rt){var bt,wt,Et,Mt,Nt;return Kt>0&&At>0?(bt=(Nt=[0,-.6966,-.8127,.4562,3.003,-.1638,.3626,.1291,.5457,-1251e-7,3.763,-.001065,.01465,-.001002,0])[9]*(it+Rt)+Nt[10],it>=Rt&&(wt=Math.min(Nt[11]*(it-Rt)+Nt[12],0)),it<Rt&&(wt=Math.min(Nt[13]*(Rt-it)+Nt[14],0)),Et=Math.max(bt+wt,1),Nt[1]*(Mt=Nt[5]*Kt+Nt[6]*At+Nt[7]*Kt*At+Nt[8])+Nt[2]*Et+Nt[3]*Mt*Et+Nt[4]):"NoAudiovisualStream"}});function fn(Kt,At){var it=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(!it){if(Array.isArray(Kt)||(it=function(Nt,Yt){if(Nt){if(typeof Nt=="string")return vn(Nt,Yt);var Qt=Object.prototype.toString.call(Nt).slice(8,-1);return Qt==="Object"&&Nt.constructor&&(Qt=Nt.constructor.name),Qt==="Map"||Qt==="Set"?Array.from(Nt):Qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qt)?vn(Nt,Yt):void 0}}(Kt))||At&&Kt&&typeof Kt.length=="number"){it&&(Kt=it);var Rt=0,bt=function(){};return{s:bt,n:function(){return Rt>=Kt.length?{done:!0}:{done:!1,value:Kt[Rt++]}},e:function(Nt){throw Nt},f:bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt,Et=!0,Mt=!1;return{s:function(){it=it.call(Kt)},n:function(){var Nt=it.next();return Et=Nt.done,Nt},e:function(Nt){Mt=!0,wt=Nt},f:function(){try{Et||it.return==null||it.return()}finally{if(Mt)throw wt}}}}function vn(Kt,At){(At==null||At>Kt.length)&&(At=Kt.length);for(var it=0,Rt=new Array(At);it<At;it++)Rt[it]=Kt[it];return Rt}var Ft=et.Y.get("WebRTC_Call"),pn=apiCC.myWebRTC_Event,gn=function(Kt){this.dest_roomId="",this.pc=null,this.callId=0,this.callee=!1,this.callerId=0,this.calleeId=0,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.myWebRTC_Stack=new ht.S(Kt.socket),this.remoteMediaStreams=[],this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.dtmfSender=null,this.incomingcandidatesQueue=[],nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox"?nt.PR>43?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!1}},this.mediaConstraints={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}):nt.Xh==="Chrome"?nt.PR<55?(this.mediaConstraintsAudioOnly={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this.mediaConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}),nt.ag.name==="iOS"&&(Ft.log("Defining mediaConstraints for iOS "),this.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),this.trickleIce=Kt.trickleIce,this.callLocalStream=null,this.generatedLocalStream=!1,this.audioOnly=!1,this.inviteSended=!1,this.sendInviteTrickleIceFalseTimeOutId=0,this.sendInviteTrickleIceFalseTimer=5e3,this.message200OKSended=!1,this.send200OKTrickleIceFalseTimeOutId=0,this.send200OKTrickleIceFalseTimer=5e3,this.message200OKReceived=!1,this.callCancelled=!1,this.screenSharing=!1,this.desktopId=0,this.pc_config=Kt.pc_config,this.pc_constraints=Kt.pc_constraints,this.audioFileMediaElement=null,this.videoReceivedWidth=640,this.videoReceivedHeight=480,this.videoSendWidth=640,this.videoSendHeight=480,this.videoReceivedDelay=0,this.audioReceivedDelay=0,this.audioSendDelay=0,this.videoSendDelay=0,this.videoSendPacketLossRatio=0,this.audioSendPacketLossRatio=0,this.getStatsInterval=Kt.qosInterval,this.qm=null,this.statisticId=null,this.csmIntervalMs=Kt.csmIntervalMs,this.csmIntervalId=null,this.remoteId=0,this.callType="media",this.localCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.remoteCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.disconnectionTimeoutId=0,this.disconnectionTimer=4e4,this.disconnectionWarningDelay=9e3,this.disconnectionWarningInterval=0,this.disconnectionWarningTimeout=0,this.disconnectionWarningCount=0,this.checkCandidateTypesTimer=1e4,this.checkCandidateTypesTimeoutId=0,this.checkCandidateTypesTimeoutTable=[],this.data={},this.screenStream=null,this.screenIsDisplayed=!1,this.addingDataChannelOnCallOngoing=!1,this.sendDataChannel=null,this.receiveDataChannel=null,this.receiveChunkNb={},this.firstDataPacket={},this.receivedSize={},this.receiveArrayToStoreChunks={},this.destCallType="media",this.mcuRemoteStream=null,this.userMediaAccessRequired=!0,this.settingUpMode="normal",this.remoteType="web",this.mediaTypeForIncomingCall=Kt.mediaTypeForIncomingCall,this.mediaTypeForOutgoingCall=Kt.mediaTypeForOutgoingCall,this.mediaRoutingMode=Kt.mediaRoutingMode,this.stripAudioSDPActivated=!1,this.stripVideoSDPActivated=!1,this.iceState="notdefined",this.restarted=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.isLocalAudioMuted=!1,this.isLocalVideoMuted=!1,this.isRemoteAudioMuted=!1,this.isRemoteVideoMuted=!1,this.isRemoteAudioSilent=!1,this.isRemoteVideoSilent=!1,this.isAccepted=!1,this.accessToMedia=!1,this.callConfiguration=null,this.captureSourceType=null,this.preferH264Codec=!1,this.preferVP8Codec=!1,this.preferVP9Codec=!1,this.candidateNb=0,this.sessionMCU=null,this.instanceId=0,this.retryUpdateMedia=!1,this.updateMediaOngoing=!1,this.setCallTurnServer=function(At){Ft.info("setCallTurnServer :",At);var it=JSON.stringify(this.pc_config);it=it.replace(/mp1.apizee.com/g,At),this.pc_config=JSON.parse(it)},this.setCallMediaRoutingMode=function(At){Ft.info("setCallMediaRoutingMode :",At),At==="hostOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.hostOnly:At==="stun"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.stun:At==="stunOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.stunOnly:At==="turn"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.turn:At==="turnOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.turnOnly:(Ft.log("parameter error when calling function : setCallMediaRoutingMode()"),this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setCallMediaRoutingMode()","PARAMETER_ERROR_SETCALLMEDIAROUTINGMODE"))},this.checkDTLSCompliancy=function(){if(Ft.debug("checkDTLSCompliancy"),apiCC.session.isDeviceDTLSCompliant()===!1)Ft.log("Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]};else{var At=apiCC.session.isClientDTLSCompliant(this.remoteId);At!==!1&&At!=="false"||(Ft.log("Remote Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]})}},this.sendData=function(At,it){Ft.info("datachannel - sendData");var Rt=null,bt=null;if(At.file instanceof File)return Ft.log("File"),this.contentType=At.file.type,this.originalDataType="File",Rt=new FileReader,bt=this,Rt.onload=function(wt){var Et=wt.target.result||Rt.result;bt.sendData({file:Et,name:At.name,type:At.type},it)},void Rt.readAsArrayBuffer(At.file);new zt(this).send(At,this.sendDataChannel,it)},Ft.log("New Call for client with Id :"+Kt.clientId),this.generateCallId=function(){this.callId=apiCC.generateCallId(),Ft.info("new call with callId :"+this.callId)},this.sendInviteTrickleIceFalse=function(){Ft.log("sendInviteTrickleIceFalse"),Ft.log("sendInvite on candidate timer reached"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0},this.send200OkTrickleIceFalse=function(){Ft.log("send200OkTrickleIceFalse"),this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,this.pc.localDescription,this.data),this.message200OKSended=!0},this.onSetLocalDescriptionSuccess=function(){Ft.info("onSetLocalDescriptionSuccess"),this.localDescriptionSetted=!0,this.asyncCallbacks&&this.asyncCallbacks.type==="subscribe"&&delete this.asyncCallbacks,this.trickleIce===!1&&(this.callee===!0?(Ft.info("starting send200OKTrickleIceFalseTimeOutId"),this.send200OKTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"send200OkTrickleIceFalse"),this.send200OKTrickleIceFalseTimer)):(Ft.info("starting sendInviteTrickleIceFalseTimeOutId"),this.sendInviteTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"sendInviteTrickleIceFalse"),this.sendInviteTrickleIceFalseTimer))),Kt.rtpSenderSetParamatersCapable&&Kt.evaluateVideoCap(this)},this.onSetLocalDescriptionFailure=function(At){Ft.warn("onSetLocalDescriptionFailure",At);var it=null,Rt=null;this.callControl&&(it=this.callControl.roomName,Rt=this.callControl.type),pn.createErrorEvent("Set local Description Failure","SET_LOCAL_DESCRIPTION_FAILURE",this.callId,it,Rt),Kt.onHangup(this.callId,"Local_Description_Failure")},this.onSetRemoteDescriptionSuccess=function(){Ft.info("onSetRemoteDescriptionSuccess");var At=null;for(this.remoteDescriptionSetted=!0,this.restarting===!0&&delete this.restarting,this.data&&(this.data.mesh||this.data.subscribeOrder)||pn.createCallEstablishedEvent(this.calleeId,this.callType,this.callId,this.destCallType);this.incomingcandidatesQueue.length;)At=this.incomingcandidatesQueue.shift(),this.processCandidateMsg(At);if(Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]!==void 0){for(Ft.debug("Restoring candidate from client, this.callId :"+this.callId+" , instanceId :"+this.instanceId);Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].length;)At=Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].shift(),this.processCandidateMsg(At);delete Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]}if(this.asyncCallbacks&&(this.asyncCallbacks.type==="addingUserMedia"?(this.asyncCallbacks.resolve(this.callConfiguration.userMediaStreamId),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks):this.asyncCallbacks.type==="updateCallConfiguration"&&(this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)),this.updateMediaOngoing=!1,this.retryUpdateMedia===!0){Ft.debug("an updateMedia was waiting for sig stable state or an other updateMedia end, updating Media now ..."),this.retryUpdateMedia=!1;var it=this.updateMedia(!1);Ft.debug("Retried updateMediaResult :",it)}},this.processCandidateMsg=function(At){Ft.info("processCandidateMsg :",At);var it=null;this.pc!==null?(At.completeCandidate!==void 0?(Ft.trace("new behavior of 2.13.8"),it=new apiCC.myWebRTC_Adapter.RTCIceCandidate(At.completeCandidate)):(Ft.log("old behavior < 2.13.8"),it=new apiCC.myWebRTC_Adapter.RTCIceCandidate({sdpMLineIndex:At.label,candidate:At.candidate})),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("addIceCandidate"),this.pc.addIceCandidate(it,function(){Ft.trace("addIceCandidate success")},function(Rt){Ft.warn("addIceCandidate failure: "+Rt),Rt=null})):(Ft.log("addIceCandidate - Promise version"),this.pc.addIceCandidate(it).then(function(){Ft.trace("addIceCandidate success")}).catch(function(Rt){Ft.warn("addIceCandidate failure: "+Rt),Rt=null}))):Ft.error("Error, call is not null but pc is null")},this.onSetRemoteDescriptionFailure=function(At){Ft.warn("onSetRemoteDescriptionFailure :",At);var it=null,Rt=null;this.callControl&&(it=this.callControl.roomName,Rt=this.callControl.type),pn.createErrorEvent("Set remote Description Failure","SET_REMOTE_DESCRIPTION_FAILURE",this.callId,it,Rt),Kt.onHangup(this.callId,"Remote_Description_Failure")},this.getUserMediaOnCall=function(){var At=this,it=!1;if(Ft.info("getUserMediaOnCall, audio Only :"+this.audioOnly),Ft.info("getUserMediaOnCall, screenSharing activated :"+this.screenSharing),Ft.log("webRTCClient.gum_config :",Kt.gum_config),this.callerId===Kt.clientId){if(Ft.log("outgoing call"),this.mediaTypeForOutgoingCall==="VIDEO"||this.mediaTypeForOutgoingCall==="VIDEOONLY")if(Ft.log("mediaTypeForOutgoingCall :"+this.mediaTypeForOutgoingCall),this.mediaTypeForOutgoingCall==="VIDEOONLY"&&(it=!0),this.screenSharing!==!0){if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return Ft.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();Ft.log("video is not present :"+this.callType),this.callType==="media"&&(Ft.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else Ft.log("screenSharing, no device checking");else if(this.mediaTypeForOutgoingCall==="AUDIO")Ft.log("mediaTypeForOutgoingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForOutgoingCall==="NONE"||this.mediaTypeForOutgoingCall==="DATA")return Ft.log("mediaTypeForOutgoingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall()}else if(Ft.log("incoming call"),this.mediaTypeForIncomingCall==="VIDEO"||this.mediaTypeForIncomingCall==="VIDEOONLY"){if(Ft.log("mediaTypeForIncomingCall :"+this.mediaTypeForIncomingCall),this.mediaTypeForIncomingCall==="VIDEOONLY"&&(it=!0),apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return Ft.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();Ft.log("video is not present :"+this.callType),this.callType==="media"&&(Ft.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else if(this.mediaTypeForIncomingCall==="AUDIO")Ft.log("mediaTypeForIncomingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForIncomingCall==="NONE"||this.mediaTypeForIncomingCall==="DATA")return Ft.log("mediaTypeForIncomingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall();Kt.getUserMediaOnGoing=!0;var Rt=null,bt=null;if(Ft.log("this.screenSharing :"+this.screenSharing),Ft.log("this.audioOnly :"+this.audioOnly),this.screenSharing===!0)if(Ft.log("getScreenMedia"),nt.Xh==="Chrome")Ft.log("this.desktopId :"+this.desktopId),Rt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.desktopId}}};else{if(Ft.log("this.captureSourceType :"+this.captureSourceType),this.captureSourceType!=="screen"&&this.captureSourceType!=="window"&&this.captureSourceType!=="application")return void Ft.error("captureSourceType value is not correct");Rt={video:{mediaSource:this.captureSourceType}}}else this.audioOnly===!0?(Ft.log("this.audioOnly = true"),Kt.gum_config=apiCC.setAudioSourceIdInConstraint(Kt.audioSourceId,Kt.gum_config),bt=JSON.parse(JSON.stringify(Kt.gum_config)),Kt.allowAsymetricMediaCalls===!1?bt.video=!1:Ft.log("allow AsymetricMediaCalls is activated"),Rt=bt):(Ft.log("audio and video call"),Rt=(0,ot.ws)({},Kt.gum_config),it?Rt.audio=!1:Rt=apiCC.setAudioSourceIdInConstraint(Kt.audioSourceId,Rt),Rt=apiCC.setVideoSourceIdInConstraint(Kt.videoSourceId,Rt),Rt=apiCC.setVideoFacingModeInConstraint(Kt.facingMode,Rt),typeof apiRTC_React<"u"&&(Rt={audio:!0,video:{mandatory:{minWidth:500,minHeight:300,minFrameRate:30},facingMode:"user"}}));apiCC.createUserMediaStream({callId:this.callId,type:this.callType,gum_config:Rt,success:function(wt){Ft.debug("[getUserMediaOnCall] success; userMediaStreamId: "+wt.userMediaStreamId),At.callConfiguration!==void 0&&At.callConfiguration!==null||(At.callConfiguration={}),At.callConfiguration.userMediaStreamId=wt.userMediaStreamId,At.onUserMediaSuccessOnCall(wt.stream)},failure:function(wt,Et){Ft.debug("[getUserMediaOnCall] failure; userMediaStreamId: "+wt.userMediaStreamId),At.onUserMediaErrorOnCall(Et)}})},this.handleToneChangeEvent=function(At){Ft.debug("handleToneChangeEvent :",At.tone),At.tone!==""?Ft.debug("Tone played: "+At.tone):Ft.debug("All tones have played.")},this.sendTones=function(At,it,Rt){Ft.debug("sendTones :"),this.dtmfSender&&(Ft.debug("sendTones : Tones, duration, gap: ",At,it,Rt),this.dtmfSender.insertDTMF(At,it,Rt))},this.addStream=function(At){var it,Rt=null,bt=null,wt=0,Et=!1,Mt=null,Nt=[];if(nt.Xh==="Firefox"&&nt.PR<51||nt.Xh==="Chrome"&&nt.PR<65||nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)Ft.info("using addStream method"),this.pc.addStream(At),Ft.debug("end addStream method");else{if(!(nt.Xh==="Firefox"&&nt.PR<59||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||typeof apiRTC_React<"u")){for(Ft.info("using addTrack/replaceTrack method"),Rt=At.getTracks(),it=0;it<Rt.length;it+=1){for(Et=!1,bt=this.rtpSenders[Rt[it].kind],wt=0;wt<bt.length;wt+=1)if(bt[wt].track===null){Et=!0;break}if(Et===!0)Nt.push(bt[wt].replaceTrack(Rt[it])),Ft.debug("addStream -> replaceTrack",bt[wt]);else{if(this.simulcast==="RID"&&Rt[it].kind==="video"&&ot.wL.type==="chrome"){var Yt=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}];this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings&&(Yt=this.callControl.callConfiguration.simulcast.sendEncodings.slice()),Mt=this.pc.addTransceiver(Rt[it],{direction:"sendonly",streams:[At],sendEncodings:Yt}).sender}else if(Mt=this.pc.addTrack(Rt[it],At),this.simulcast==="RID"&&Rt[it].kind==="video"&&ot.wL.type==="firefox"){var Qt=Mt.getParameters();Qt||(Qt={}),this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings?Qt.encodings=this.callControl.callConfiguration.simulcast.sendEncodings.slice():Qt.encodings=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],Nt.push(Mt.setParameters(Qt))}Ft.debug("addStream -> addTrack",Mt),this.rtpSenders[Rt[it].kind].push(Mt)}}return Ft.debug("end addTrack/replaceTrack method"),this.rtpSenders.audio.length>0&&(this.dtmfSender=this.rtpSenders.audio[0].dtmf,this.dtmfSender&&(this.dtmfSender.ontonechange=this.handleToneChangeEvent)),new Promise(function(on,nn){Promise.all(Nt).then(function(dn){on()}).catch(nn)})}for(Ft.info("using addTrack method"),Rt=At.getTracks(),it=0;it<Rt.length;it+=1)this.pc.addTrack(Rt[it],At);Ft.debug("end addTrack method")}return Promise.resolve()},this.removeStream=function(At){var it,Rt=null,bt=[];if(Ft.info("removeStream in call",At.id),nt.Xh==="Firefox"&&nt.PR<51||nt.Xh==="Chrome"&&nt.PR<65||nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)Ft.info("using removeStream method"),this.pc.removeStream(At),Ft.debug("end removeStream method");else{if(!(nt.Xh==="Firefox"&&nt.PR<59||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome")){for(Ft.info("using replaceTrack method"),it=0;it<this.rtpSenders.audio.length;it+=1)bt.push(this.rtpSenders.audio[it].replaceTrack(null));for(it=0;it<this.rtpSenders.video.length;it+=1)bt.push(this.rtpSenders.video[it].replaceTrack(null));return Ft.debug("end replaceTrack method"),new Promise(function(wt,Et){Promise.all(bt).then(function(Mt){wt()}).catch(Et)})}for(Ft.info("using removeTrack method"),Rt=this.pc.getSenders(),Ft.debug("senders :",Rt),it=0;it<Rt.length;it+=1)this.pc.removeTrack(Rt[it]);Ft.debug("end removeTrack method")}return Promise.resolve()},this.stopStream=function(At){Ft.info("stopStream in call");var it,Rt=null;if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)Ft.log("... using MediaStream.stop"),At.stop();else{for(Ft.log("... using MediaStreamTrack.stop"),Rt=At.getTracks(),it=0;it<Rt.length;it+=1)Rt[it].stop();Ft.log("... tracks stopped")}At=null},this.addVideoMedia=function(){var At=this;Ft.info("addVideoMedia");var it=Kt.gum_config;apiCC.createUserMediaStream({callId:this.callId,type:"media",gum_config:it,success:function(Rt){Ft.debug("[addVideoMedia] success; userMediaStreamId: "+Rt.userMediaStreamId);var bt=apiCC.getUserMediaStream(At.callConfiguration.userMediaStreamId),wt=Promise.resolve();bt&&(wt=At.removeStream(bt.stream).then(function(){Kt.myWebRTC_Event.createLocalStreamRemovedEvent(At.callType,At.callId,bt.stream,At.remoteId,At.destCallType),apiCC.releaseUserMediaStream(bt.userMediaStreamId,At.callId)})),wt.then(function(){At.callConfiguration.userMediaStreamId=Rt.userMediaStreamId,At.callLocalStream=Rt.stream,At.addStream(Rt.stream),At.updateMediaWithRetryManagement(!1)}).catch(function(Et){Ft.error("Failed to addVideoMedia",Et);var Mt=null,Nt=null;At.callControl&&(Mt=At.callControl.roomName,Nt=At.callControl.type),Kt.myWebRTC_Event.createErrorEvent("Failed to addVideoMedia","MEDIA_UPDATE_ERROR",At.callId,Mt,Nt)})},failure:function(Rt,bt){Ft.debug("[addVideoMedia] failure; userMediaStreamId: "+Rt.userMediaStreamId),At.onUserMediaErrorOnCall(bt)}})},this.stopScreenSharing=function(){Ft.debug("stopScreenSharing detected"),Kt.removeCallFromTableWithCallIdAndSendBye(this.callId,"stop_ScreenSharing")},this.checkingMutingState=function(){var At=this,it=null;Ft.debug("checkingMutingState");var Rt=function(){(0,ot.ki)(At,"mcuRemoteStream","object")||(At.mcuRemoteStream={}),At.mcuRemoteStream.videoMuted=!0},bt=function(){(0,ot.ki)(At,"mcuRemoteStream","object")||(At.mcuRemoteStream={}),At.mcuRemoteStream.audioMuted=!0};(0,ot.ki)(this.callConfiguration,"userMediaStreamId","string")&&(it=apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId))&&(it.videoMuted?(Rt(),this.isLocalVideoMuted=!0):this.isLocalVideoMuted=!1,it.audioMuted?(bt(),this.isLocalAudioMuted=!0):this.isLocalAudioMuted=!1);var wt=function(){At.isLocalVideoMuted||(it?it.video&&!it.videoMuted&&it.muteVideoOnStreams("enabled"):At.callLocalStream&&(Kt.muteTracks(At.callLocalStream.getVideoTracks()),At.isLocalVideoMuted=!0),Rt())},Et=function(){At.isLocalAudioMuted||(it?it.audio&&!it.audioMuted&&it.muteAudioOnStreams("enabled"):At.callLocalStream&&(Kt.muteTracks(At.callLocalStream.getAudioTracks()),At.isLocalAudioMuted=!0),bt())};Kt.isVideoMuted===!0&&(Ft.log("Client is video muted, applying to call"),wt()),Kt.isAudioMuted===!0&&(Ft.log("Client is audio muted, applying to call"),Et()),(0,ot.ki)(this.callConfiguration,"muted","string")&&(Ft.log("callConfiguration muted is set :",this.callConfiguration.muted),this.callConfiguration.muted==="VIDEO"&&(wt(),Et()),this.callConfiguration.muted==="AUDIOONLY"&&Et(),this.callConfiguration.muted==="VIDEOONLY"&&wt(),delete this.callConfiguration.muted)},this.onUserMediaSuccessOnCall=function(At){Ft.info("onUserMediaSuccessOnCall");var it=(0,ot.Pj)(),Rt={};Kt.userMediaErrorDetected===!0&&(Kt.userMediaErrorDetected=!1,Rt.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(Rt)),Ft.log("isHTTPS()"+it),Kt.getUserMediaOnGoing=!1,Ft.log("User has granted access to local media."),Kt.accessToLocalMedia=!0,this.accessToMedia=!0,this.screenSharing===!0?(this.callType="screenSharing",At!=null&&(At.onended=this.callback(this,"stopScreenSharing"),At.getVideoTracks().length>0&&(At.getVideoTracks()[0].onended=this.callback(this,"stopScreenSharing")))):this.audioOnly===!0&&(this.callType="audio"),At!==void 0&&(this.callLocalStream=At),(0,ot.yJ)()?(Ft.log("isHTTP true"),this.establishCall()):(Ft.log("webRTCClient.userAcceptOnIncomingCall :"+Kt.userAcceptOnIncomingCall),Ft.log("this.callee :"+this.callee),this.data!==void 0&&Ft.log("this.data.MCUType :"+this.data.MCUType),Kt.userAcceptOnIncomingCall!==!0||this.callee!==!0&&this.data.MCUType!=="MCU-Callee"||this.isAccepted!==!1?this.calleeId!=="LOCAL"?this.establishCall():Ft.log("call is not established as this is a LOCAL stream request"):Ft.log("Stand-by :: wait for establishCall"))},this.establishCall=function(){var At=this;Ft.debug("establishCall()"),this.started!==!0||this.addingUserMedia!==!0||!this.belongsToRoom()||this.settingUpType!=="publish"||this.data&&this.data.hasOwnProperty("MCUType")||!this.sessionMCU||this.sessionMCU.hasOwnProperty("roomMode")||(this.restarting=!0,this.pc.close(),this.pc=null,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.updateUserMedia=!1,this.updateCause=null,this.incomingcandidatesQueue=[],this.message200OKReceived=!1,this.statisticId&&(clearInterval(this.statisticId),this.statisticId=null),this.csmIntervalId&&(clearInterval(this.csmIntervalId),this.csmIntervalId=null),this.instanceId=apiCC.generateInstanceId(),this.data.instanceId=this.instanceId),this.dataCall!==!0&&this.checkingMutingState(),this.maybeStart();var it=null;this.callee&&this.addingUserMedia!==!0&&this.updateUserMedia!==!0?(it=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),Ft.log("Avant setRemote pour le callee :",it),this.pc!==null?(Kt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),it.sdp=Kt.mySDPManager.maybePreferCodec(it.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("establishCall : before setRemoteDescription for callee"),this.pc.setRemoteDescription(it,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("establishCall : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(it).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure")))):Ft.log("Error : PC is null"),this.doAnswer()):this.addingUserMedia===!0?(Ft.log("Adding local stream 1."),this.pc!==null?(this.callLocalStream===null&&Kt.localStream!==null&&(this.callLocalStream=Kt.localStream),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream).then(function(){At.updateMediaWithRetryManagement(!1)}).catch(function(Rt){Ft.error("failed to add stream",Rt)})):(Ft.log("No Stream to addStream"),this.updateMediaWithRetryManagement(!1))):Ft.error("Error : PC is null")):this.updateUserMedia===!0&&this.updateMediaWithRetryManagement(!1),Ft.log("End of establishCall()")},this.onUserMediaSuccessTestUni=function(){Kt.getUserMediaOnGoing=!1,Ft.info("onUserMediaSuccessTestUni : User has not granted access to local media.");var At=null,it={};Kt.userMediaErrorDetected===!0&&(Kt.userMediaErrorDetected=!1,it.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(it)),Kt.accessToLocalMedia=!0,this.maybeStart(),this.callee&&(At=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),Kt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),At.sdp=Kt.mySDPManager.maybePreferCodec(At.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee"),this.pc.setRemoteDescription(At,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(At).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))),this.doAnswer())},this.onUserMediaErrorOnCall=function(At){var it=this;Ft.log("onUserMediaErrorOnCall");var Rt={};Kt.getUserMediaOnGoing=!1,setTimeout(function(){pn.createErrorEvent(At,"USER_MEDIA_ERROR",it.callId)}),Ft.error("Failed to get access to local media. Error code was "+At.code),Ft.error(At),At=null,nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&(Ft.log("browser_version > 47"),window.location.protocol!=="https:"&&Ft.error("HTTPS is now mandatory to use getUserMedia()")),this.screenSharing===!0&&(this.callType="screenSharing",window.location.protocol!=="https:"?(Ft.log("You need to be connected using HTTPS for screenSharing"),pn.createDesktopCaptureEvent("UserMediaError_HTTPS_needed",this.callId,this.remoteId)):(Ft.log("screenSharing UserMediaError"),pn.createDesktopCaptureEvent("UserMediaError",this.callId,this.remoteId))),this.callee===!0?(this.myWebRTC_Stack.sendBye(this.callId,this.calleeId,this.dest_roomId,this.callerId,"User_Media_Error",this.data),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.callerId,"User_Media_Error")):(this.data!==void 0&&this.data!==null&&this.data.MCUType==="MCU-Callee"&&this.myWebRTC_Stack.sendBye(this.callId,this.callerId,this.dest_roomId,this.calleeId,"User_Media_Error",this.data),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"User_Media_Error")),this.screenSharing===!1&&(Kt.userMediaErrorDetected=!0,Rt.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(Rt))},this.maybeStart=function(){Ft.debug("maybeStart"),!this.started&&Kt.channelReady&&(Kt.accessToLocalMedia||this.dataCall)&&(Ft.log("Creating PeerConnection."),this.createPeerConnection(),Kt.unidirectionelCallOnly||this.screenSharing===!0?this.callee===!1&&(Ft.log("Adding local stream 2."),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Kt.localStream!==null?(Ft.log("Add Stream of client.localStream"),this.addStream(Kt.localStream),this.callLocalStream=Kt.localStream):Ft.log("No Stream to add")):this.dataCall||(Ft.log("Adding local stream 3."),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Kt.localStream!==null?(Ft.log("Add Stream of client.localStream"),this.addStream(Kt.localStream),this.callLocalStream=Kt.localStream):(Ft.log("No Stream to add"),this.belongsToRoom()||ot.wL.type!=="safari"||typeof this.pc.addTransceiver!="function"||(Ft.debug("add transceivers"),this.pc.addTransceiver("audio",{direction:"recvonly"}),this.pc.addTransceiver("video",{direction:"recvonly"})))),this.started=!0,this.callee===!1&&(Ft.log("Before doCall()"),this.doCall())),Ft.log("End of maybeStart")},this.createDataChannel=function(){if(Ft.info("createDataChannel"),nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome")Ft.warn("Cannot create DataChannel as it is not supported on Edge");else if(this.sendDataChannel===null)try{this.sendDataChannel=this.pc.createDataChannel("apiRTCDataChannel",{}),this.sendDataChannel.binaryType="arraybuffer",Ft.log("Created data channel"),Ft.log("Subscribing to dc events"),this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")}catch(At){Ft.log("createDataChannel() failed with exception: "+At.message)}else Ft.log("Datachannel already exist")},this.createPeerConnection=function(){Ft.info("createPeerConnection");try{Ft.log("createPeerConnection with pc_config:",JSON.stringify(this.pc_config)),Ft.log("and pc_constraints:",JSON.stringify(this.pc_constraints)),ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<78?(Ft.debug("Chrome 72=+ and 78-, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0?(Ft.debug("Cordova, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):Ft.debug("sdpSemantics unified-plan is being used"),this.pc=new apiCC.myWebRTC_Adapter.RTCPeerConnection(this.pc_config,this.pc_constraints),this.dataCall&&this.createDataChannel(),this.pc.onicecandidate=this.callback(this,"onIceCandidate")}catch(At){return Ft.log("Failed to create PeerConnection, exception: "+At.message),void Ft.error("Cannot create RTCPeerConnection object; WebRTC is not supported by this browser.")}(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=53||nt.Xh==="Edge"||ot.wL.type==="chrome"&&ot.wL.version>=64?(this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"),this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded")):nt.Xh==="Safari"&&nt.PR>=12||nt.Xh==="Mobile Safari"&&nt.PR>=12||typeof apiRTC_React<"u"?this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"):this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded"),this.pc.onremovestream=this.callback(this,"onRemoteStreamRemoved"),this.pc.onnegotiationneeded=this.callback(this,"onNegotiationNeeded"),this.pc.onsignalingstatechange=this.callback(this,"onSignalingStateChange"),this.pc.oniceconnectionstatechange=this.callback(this,"onIceConnectionStateChange"),this.pc.ondatachannel=this.callback(this,"onDataChannel"),this.pc.onicegatheringstatechange=this.callback(this,"onIceGatheringStateChange"),this.pc.onconnectionstatechange=this.callback(this,"onConnectionStateChange"),Kt.qosEnable&&(this.statisticId=setInterval(this.callback(this,"getStatistics"),this.getStatsInterval)),Kt.csmEnable&&(this.csmLastResults={},this.csmIntervalId=setInterval(this.callback(this,"csmHandler"),this.csmIntervalMs))},this.onIceGatheringStateChange=function(At){Ft.log("onIceGatheringStateChange"),this.pc!==null&&(Ft.info("onIceGatheringStateChange, Ice Gathering State is now : "+this.pc.iceGatheringState),this.pc.iceGatheringState==="complete"&&this.candidateNb===0&&Ft.warn("Warning, no candidate where retrieved for this call on client"))},this.onConnectionStateChange=function(At){Ft.log("onConnectionStateChange event :",At)},this.onDataChannel=function(At){Ft.info("onDataChannel event"),this.receiveDataChannel=At.channel,this.receiveDataChannel.binaryType="arraybuffer",this.sendDataChannel===null&&(Ft.log("Setting this.sendDataChannel with receivedDataChannel"),this.sendDataChannel=At.channel,this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")),Ft.log("got dataChannel",At.channel.label),Ft.log("Subscribing to dc events"),this.receiveDataChannel.onopen=this.callback(this,"onReceiveDataChannelOpen"),this.receiveDataChannel.onclose=this.callback(this,"onReceiveDataChannelClose"),this.receiveDataChannel.onmessage=this.callback(this,"onReceiveDataChannelMessage"),this.receiveDataChannel.onerror=this.callback(this,"onReceiveDataChannelError")},this.onSendDataChannelOpen=function(At){Ft.info("onSendDataChannelOpen"),this.callType==="data"&&this.calleeId==="dataChannelConnector"&&(this.pushDataStatus&&this.pushDataStatus.type==="pipeline"?(this.pushDataStatus.state="ready",setTimeout(function(){Kt.startNextPushData()})):this.transferStarted!==!0&&this.startTransfer()),pn.createEvent({eventType:"sendDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:At})},this.onSendDataChannelClose=function(At){Ft.info("onSendDataChannelClose"),this.sendDataChannel=null,pn!==null&&pn.createEvent({eventType:"sendDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:At})},this.processOnDataChannelMessage=function(At){var it,Rt,bt=null,wt=null,Et="",Mt=0;if(Ft.info("processOnDataChannelMessage"),bt=JSON.parse(At.data),Ft.log("data.uuid :"+bt.uuid),Ft.log("data.messageSize :"+bt.messageSize),Ft.log("data.originalDataType :"+bt.originalDataType),it=bt.uuid,bt.originalDataType==="ArrayBuffer"&&(Ft.log("ArrayBuffer conversion"),bt.message=ot.cw.decode(bt.message)),Ft.log("data :"+bt),Ft.log("data.uuid :"+it),Ft.log("receiveChunkNb[uuid] :"+this.receiveChunkNb[it]),this.receiveChunkNb[it]===void 0)Ft.log("receiving first packet for uuid :"+it),Ft.log("evt.data.message :"+At.data),this.firstDataPacket[it]=bt,this.receiveChunkNb[it]=1,this.receivedSize[it]=0,this.startingDate=new Date,this.transferDuration=0,pn.createEvent({eventType:"onFileReceiving",remoteId:this.remoteId,callId:this.callId,name:bt.name,uuid:it}),pn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[it],fileSize:this.firstDataPacket[it].size,remainingSize:this.firstDataPacket[it].size,callId:this.callId,uuid:it,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:0,transferEnded:!1});else if(Ft.log("new packet for uuid :"+it),this.receiveChunkNb[it]+=1,Ft.log("data.messageSize :"+bt.messageSize),Ft.log("data.message.length :"+bt.message.length),Mt=bt.messageSize||bt.message.length,Ft.log("receivedSize :"+Mt),this.receiveArrayToStoreChunks[it]||(this.receiveArrayToStoreChunks[it]=[]),this.receiveArrayToStoreChunks[it].push(bt.message),this.receivedSize[it]+=Mt,this.transferDuration=new Date-this.startingDate,this.receivedSize[it]===this.firstDataPacket[it].size){if(Ft.log("End of data transfert"),Ft.log("this.firstDataPacket.type :"+this.firstDataPacket[it].type),this.firstDataPacket[it].type==="image/png-dataUrl"){for(Ft.log("Photo received from a takeSnapshot"),Rt=0;Rt<this.receiveArrayToStoreChunks[it].length;Rt+=1)Et+=this.receiveArrayToStoreChunks[it][Rt];wt=Et}else wt=new Blob(this.receiveArrayToStoreChunks[it]);pn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[it],fileSize:this.firstDataPacket[it].size,remainingSize:0,callId:this.callId,uuid:it,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:100,transferEnded:!0}),pn.createEvent({eventType:"onFileReceived",callId:this.callId,uuid:it,remoteId:this.remoteId,callerId:this.callerId,calleeId:this.calleeId,data:{file:wt,name:this.firstDataPacket[it].name,type:this.firstDataPacket[it].type,uuid:it,originalDataType:this.firstDataPacket[it].originalDataType},details:At}),delete this.receiveArrayToStoreChunks[it],delete this.receivedSize[it],delete this.receiveChunkNb[it],delete this.firstDataPacket[it]}else pn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[it],fileSize:this.firstDataPacket[it].size,remainingSize:this.firstDataPacket[it].size-this.receivedSize[it],callId:this.callId,uuid:it,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*this.receivedSize[it]/this.firstDataPacket[it].size,10),transferEnded:!1})},this.onSendDataChannelMessage=function(At){Ft.info("onSendDataChannelMessage :",At),this.processOnDataChannelMessage(At)},this.onSendDataChannelError=function(At){Ft.info("onSendDataChannelError"),this.sendDataChannel=null,pn.createEvent({eventType:"sendDataChannelError",callId:this.callId,remoteId:this.remoteId,details:At})},this.onReceiveDataChannelOpen=function(At){Ft.info("onReceiveChannelOpen"),pn.createEvent({eventType:"receiveDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:At})},this.onReceiveDataChannelClose=function(At){Ft.info("onReceiveDataChannelClose"),this.receiveDataChannel=null,pn!==null&&pn.createEvent({eventType:"receiveDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:At})},this.onReceiveDataChannelMessage=function(At){Ft.info("onReceiveChannelMessage"),this.processOnDataChannelMessage(At)},this.onReceiveDataChannelError=function(At){Ft.info("onReceiveChannelError"),pn.createEvent({eventType:"receiveDataChannelError",callId:this.callId,remoteId:this.remoteId,details:At})},this.startTransfer=function(){var At=this,it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=it.hasOwnProperty("delay")?it.delay:100;this.transferStarted!==!0&&(Ft.info("startTransfer",Rt),this.transferStarted=!0,setTimeout(function(){At.dcfs||(At.dcfs=new zt(At),At.data.offset>0?At.dcfs.transfer(At.fileContent.buffer,At.data.offset,At.sendDataChannel,{delay:Rt}):At.dcfs.transfer(At.fileContent.buffer,0,At.sendDataChannel,{delay:Rt}))},Rt))},this.statisticsAnswer=function(At){var it=At.result(),Rt=null;this.qm||(this.qm=new Tt(this.getStatsInterval/1e3,this.callback(this,"onQosChange"),this.callback(this,"onQosAudioChange"),this.callback(this,"onQosVideoChange"),this.callId,Kt.apiKey,Kt.clientId,Kt.socket)),it&&(this.qm.insertStats(it,this.sendedSdpOfferMessage,this.receivedSdpOfferMessage,Kt.remoteVideo),Rt=this.qm.getAllStats(),Kt.qosEnable&&pn.createEvent({eventType:"onQosStatsUpdate",callId:this.callId,remoteId:this.remoteId,stats:Rt}),this.videoReceivedWidth=Rt.VideoRecv.FrameWidth,this.videoReceivedHeight=Rt.VideoRecv.FrameHeight,this.videoSendWidth=Rt.VideoSend.FrameWidth,this.videoSendHeight=Rt.VideoSend.FrameHeight,this.videoReceivedDelay=Rt.VideoRecv.delay,this.audioReceivedDelay=Rt.AudioRecv.delay,this.audioSendDelay=Rt.AudioSend.rtt,this.videoSendDelay=Rt.VideoSend.rtt,this.videoSendMoyDelay=Rt.VideoSend.moyRtt,this.videoSendPacketLossRatio=Rt.VideoSend.packetLostRatio,this.audioSendPacketLossRatio=Rt.AudioSend.packetLostRatio,this.videoSendEncodeUsagePercent=Rt.VideoSend.googEncodeUsagePercent,this.videoSendCpuLimitedResolution=Rt.VideoSend.googCpuLimitedResolution,this.videoSendBandwidthLimitedResolution=Rt.VideoSend.googBandwidthLimitedResolution,this.videoSendCpuLimitedResolution!==void 0&&JSON.parse(this.videoSendCpuLimitedResolution)===!0&&pn.createEvent({eventType:"cpuLimited",callId:this.callId,encodeUsagePercent:this.videoSendEncodeUsagePercent}),this.videoSendBandwidthLimitedResolution!==void 0&&JSON.parse(this.videoSendBandwidthLimitedResolution)===!0&&pn.createEvent({eventType:"bandwidthLimited",callId:this.callId}))},this.csmGetStatsHandler=function(At){var it,Rt=this,bt=null,wt=null,Et={};if(this.csm||(this.csm=new cn(this.csmIntervalMs/1e3,ot.wL.type,ot.wL.version,"standard"),this.csm.browserInfo={browserAbout:nt.Xh+" "+nt.dc,browserType:ot.wL.type,browserVersion:ot.wL.version},(0,ot.Ym)(this.mcuRemoteStream,"attributes","object")&&(this.mcuRemoteStream.replay===!0?(0,ot.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.recId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId,modifier:"replay",recId:this.mcuRemoteStream.attributes.recId}):(0,ot.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId}))),Et.post=function(Nt){Rt.mos||(Rt.mos=new un),Nt.quality={},Nt.audioReceived?Rt.isRemoteAudioMuted?Nt.quality.mosS="Muted":Nt.audioReceived.bitsReceivedPerSecond!==0?(Nt.audioReceived.delay=parseInt(Rt.audioReceivedDelay,10),Nt.quality.mosS=Rt.mos.NarrowBandSpeechQuality(Nt.audioReceived.delay,Nt.audioReceived.packetLossRatio)):Nt.quality.mosS="NoStream":Nt.quality.mosS="NoStream",Nt.videoReceived?Rt.isRemoteVideoMuted?Nt.quality.mosV="Muted":Nt.videoReceived.bitsReceivedPerSecond!==0?(Nt.videoReceived.width=Rt.videoReceivedWidth,Nt.videoReceived.height=Rt.videoReceivedHeight,Nt.videoReceived.delay=parseInt(Rt.videoReceivedDelay,10),Nt.quality.mosV=Rt.mos.videoQuality(Nt.videoReceived.width,Nt.videoReceived.height,Nt.videoReceived.packetLossRatio,Math.floor(Nt.videoReceived.bitsReceivedPerSecond/1e3),Nt.videoReceived.framesDecodedPerSecond)):Nt.quality.mosV="NoStream":Nt.quality.mosV="NoStream",Nt.audioReceived&&Nt.videoReceived&&(Nt.quality.mosAV=Rt.mos.audiovisualQuality(Nt.quality.mosS,Nt.quality.mosV,Nt.audioReceived.delay,Nt.videoReceived.delay)),Nt.audioSent?Rt.isLocalAudioMuted?Nt.quality.mosSS="Muted":Nt.audioSent.bitsSentPerSecond!==0?(Nt.audioSent.delay=parseInt(Rt.audioSendDelay,10),Nt.audioSent.packetLossRatio=Rt.audioSendPacketLossRatio,Nt.quality.mosSS=Rt.mos.NarrowBandSpeechQuality(Nt.audioSent.delay,Nt.audioSent.packetLossRatio)):Nt.quality.mosSS="NoStream":Nt.quality.mosSS="NoStream",Nt.videoSent?Rt.isLocalVideoMuted?Nt.quality.mosSV="Muted":Nt.videoSent.bitsSentPerSecond!==0?(Nt.videoSent.width=Rt.videoSendWidth,Nt.videoSent.height=Rt.videoSendHeight,Nt.videoSent.delay=parseInt(Rt.videoSendDelay,10),Nt.videoSent.moyDelay=parseInt(Rt.videoSendMoyDelay,10),Nt.videoSent.packetLossRatio=Rt.videoSendPacketLossRatio,Nt.videoSent.encodeUsagePercent=Rt.videoSendEncodeUsagePercent,Nt.videoSent.cpuLimitedResolution=Rt.videoSendCpuLimitedResolution,Nt.videoSent.bandwidthLimitedResolution=Rt.videoSendBandwidthLimitedResolution,Nt.quality.mosSV=Rt.mos.videoQuality(Nt.videoSent.width,Nt.videoSent.height,Nt.videoSent.packetLossRatio,Math.floor(Nt.videoSent.bitsSentPerSecond/1e3),Nt.videoSent.framesEncodedPerSecond)):Nt.quality.mosSV="NoStream":Nt.quality.mosSV="NoStream",Nt.audioSent&&Nt.videoSent&&(Nt.quality.mosSAV=Rt.mos.audiovisualQuality(Nt.quality.mosSS,Nt.quality.mosSV,Nt.audioSent.delay,Nt.videoSent.delay))},it=this.csm.addCallStats(At,Et),Object.keys(it).length!==0){!it.quality||it.quality.mosS==="Muted"&&it.quality.mosV==="Muted"&&it.quality.mosSS==="Muted"&&it.quality.mosSV==="Muted"||Kt.qualityScoreEnable&&pn.createEvent({eventType:"onCallScoreUpdate",callId:this.callId,score:it.quality}),this.csmLastResults=it,this.callLocalStream&&typeof this.callLocalStream.getVideoTracks=="function"&&(bt=this.callLocalStream.getVideoTracks())&&bt[0]&&typeof bt[0].getSettings=="function"&&(wt=bt[0].getSettings());var Mt={save:!0,clientId:Kt.clientId,callId:this.callId,instanceId:this.instanceId,browserInfo:this.csm.browserInfo,stats:it};this.sessionMCU&&(Mt.roomId=this.sessionMCU.roomName,Mt.pubSub=Kt.MCUClient.pubConnector),this.csm.callFeed&&(Mt.callFeed=this.csm.callFeed),wt&&(Mt.videoSettings=wt),this.data.mesh&&(Mt.mesh=this.data.mesh),this.myWebRTC_Stack.sendInfo("callStats",Mt),Kt.csmEnable&&(this.data&&this.data.mesh&&(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Kt.compositeClientId:this.data.mesh.calleeId===Kt.clientId)?pn.createEvent({eventType:"onCallStatsUpdate",callId:this.data.mesh.calleeCallId,userId:this.data.mesh.callerId,stats:it}):pn.createEvent({eventType:"onCallStatsUpdate",callId:this.callId,stats:it}))}},this.onQosChange=function(At,it){pn.createEvent({eventType:"onQosChange",callId:this.callId,remoteId:this.remoteId,qosIn:At,qosOut:it})},this.onQosAudioChange=function(At,it){pn.createEvent({eventType:"onQosAudioChange",callId:this.callId,remoteId:this.remoteId,qosAudioIn:At,qosAudioOut:it})},this.onQosVideoChange=function(At,it){pn.createEvent({eventType:"onQosVideoChange",callId:this.callId,remoteId:this.remoteId,qosVideoIn:At,qosVideoOut:it})},this.getStatistics=function(){this.pc&&((nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>112?Ft.debug("getStats with callback in now deprecated on Chrome, getStatistics() / QoSMonitor can no more be used"):!this.pc.getStats||nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||this.pc.getStats(this.callback(this,"statisticsAnswer")))},this.csmHandler=function(){this.statisticId||this.getStatistics(),this.pc&&typeof this.pc.getStats=="function"&&this.pc.getStats(null).then(this.callback(this,"csmGetStatsHandler")).catch(function(At){Ft.warn("failed to get stats",At)})},this.doCall=function(){var At=null;Ft.log("Sending offer to peer"),this.audioOnly?(Ft.log("audioOnly call :",this.mediaConstraintsAudioOnly),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.screenSharing===!0?(Ft.log("screenSharing call : one way media :",At),At={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),At)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(At).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.dataCall===!0?(Ft.log("call is data only :",At),At=(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>43?{offerToReceiveAudio:!1,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),At)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(At).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):(Ft.log("call is audio & video :",this.mediaConstraints),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure"))))},this.doAnswer=function(){Ft.info("doAnswer");var At=null;this.audioOnly?(Ft.log("audioOnly call"),At=this.mediaConstraintsAudioOnly):At=this.mediaConstraints,nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessage"),this.callback(this,"onCreateAnswerFailure"),At)):(Ft.log("createAnswer - Promise version"),this.pc.createAnswer(At).then(this.callback(this,"setLocalAndSendMessage")).catch(this.callback(this,"onCreateAnswerFailure")))},this.doUpdateAnswer=function(){Ft.info("doUpdateAnswer");var At=null;this.audioOnly?(Ft.log("audioOnly call"),At=this.mediaConstraintsAudioOnly):At=this.mediaConstraints,nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessageUpdate"),this.callback(this,"onCreateAnswerFailure"),At)):(Ft.log("createAnswer - Promise version"),this.pc.createAnswer(At).then(this.callback(this,"setLocalAndSendMessageUpdate")).catch(this.callback(this,"onCreateAnswerFailure")))},this.updateMediaWithRetryManagement=function(At){Ft.debug("updateMediaWithRetryManagement");var it=this.updateMedia(At);Ft.debug("updateMediaResult :",it),it.reason!=="Sig_state_not_stable"&&it.reason!=="Update_already_ongoing"||(Ft.debug("updateMedia will be retried later for reason :",it.reason),this.retryUpdateMedia=!0)},this.updateMedia=function(At){return Ft.debug("updateMedia, callId :",this.callId),Ft.log("iceRestartActivated :",At),this.pc===null?(Ft.log("updateMedia, pc no more exist"),{status:"Not_Done",reason:"PC_Not_Exit"}):this.updateMediaOngoing===!0?(Ft.log("updateMedia, already ongoing"),{status:"Not_Done",reason:"Update_already_ongoing"}):(this.updateMediaOngoing=!0,this.pc.signalingState!=="stable"?{status:"Not_Done",reason:"Sig_state_not_stable"}:(Ft.log("Sending Update offer to peer."),this.audioOnly?(Ft.log("audioOnly call :",this.mediaConstraintsAudioOnly),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.mediaConstraintsAudioOnly.mandatory!==void 0?this.mediaConstraintsAudioOnly.mandatory.IceRestart=!0:this.mediaConstraintsAudioOnly.iceRestart=!0,Ft.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(Ft.log("createOffer - Promise version"),At===!0&&(this.mediaConstraintsAudioOnly.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure")))):nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),At===!0&&(this.mediaConstraints.mandatory!==void 0?this.mediaConstraints.mandatory.IceRestart=!0:this.mediaConstraints.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(Ft.log("createOffer - Promise version"),At===!0&&(this.mediaConstraints.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure"))),{status:"OnGoing",reason:"OK"}))},this.manipulateSDP=function(At,it){var Rt=null,bt=!1;return Ft.log("manipulateSDP with type :",it),Kt.receiveMediaDeactivated===!0&&(Ft.log("setting receiveMediaDeactivated in SDP :"+Kt.receiveMediaDeactivated),At.sdp=Kt.mySDPManager.setSendOnly(At.sdp)),Kt.RTPMedia===!0&&(At.sdp=At.sdp.replace(/RTP\/SAVPF/g,"RTP/SF")),Kt.audioBandwidth!==null&&(Ft.log("setting audioBandwidth in SDP :"+Kt.audioBandwidth),At.sdp=Kt.mySDPManager.setAudioBandwidth(At.sdp,Kt.audioBandwidth)),Kt.videoBandwidth!==null&&(Ft.log("setting videoBandwidth in SDP :"+Kt.videoBandwidth),At.sdp=Kt.mySDPManager.setVideoBandwidth(At.sdp,Kt.videoBandwidth)),Kt.dataBandwidth!==null&&(Ft.log("setting dataBandwidth in SDP :"+Kt.dataBandwidth),At.sdp=Kt.mySDPManager.setDataBandwidth(At.sdp,Kt.dataBandwidth)),Kt.preferOpusCodec===!0&&(Ft.log("setting preferOpusCodec"),At.sdp=Kt.mySDPManager.preferOpus(At.sdp)),Kt.preferVP9Codec!==!0&&this.preferVP9Codec!==!0||(Ft.log("Call prefer VP9 Codec"),At.sdp=Kt.mySDPManager.maybePreferCodec(At.sdp,"video","VP9")),Kt.preferH264Codec!==!0&&this.preferH264Codec!==!0||(Ft.log("Call prefer H264 Codec"),At.sdp=Kt.mySDPManager.maybePreferCodec(At.sdp,"video","H264")),this.preferVP8Codec===!0&&(Ft.log("Call prefer VP8 Codec"),At.sdp=Kt.mySDPManager.maybePreferCodec(At.sdp,"video","VP8")),Kt.setStereo===!0&&(Ft.log("Set Stereo"),At.sdp=Kt.mySDPManager.setCodecParam(At.sdp,"opus/48000","stereo","1")),At=Kt.mySDPManager.updateSDPcodecs(At,At.type,"audio",Kt.allowedAudioCodecs),At=Kt.mySDPManager.updateSDPcodecs(At,At.type,"video",Kt.allowedVideoCodecs),it==="OFFER"?this.settingUpType==="publish"&&this.mediaTypeForIncomingCall==="NONE"?(Rt=Kt.mySDPManager.createGuideline(At.sdp),this.mediaTypeForOutgoingCall==="VIDEO"?((0,ot.ki)(Rt,"audio","object")&&Rt.audio.direction!=="sendonly"&&(Rt.audio.direction="sendonly",bt=!0),(0,ot.ki)(Rt,"video","object")&&Rt.video.direction!=="sendonly"&&(Rt.video.direction="sendonly",bt=!0)):this.mediaTypeForOutgoingCall==="AUDIO"?((0,ot.ki)(Rt,"audio","object")&&Rt.audio.direction!=="sendonly"&&(Rt.audio.direction="sendonly",bt=!0),(0,ot.ki)(Rt,"video","object")&&Rt.video.direction!=="inactive"&&(Rt.video.direction="inactive",bt=!0)):this.mediaTypeForOutgoingCall==="VIDEOONLY"&&((0,ot.ki)(Rt,"audio","object")&&Rt.audio.direction!=="inactive"&&(Rt.audio.direction="inactive",bt=!0),(0,ot.ki)(Rt,"video","object")&&Rt.video.direction!=="sendonly"&&(Rt.video.direction="sendonly",bt=!0)),bt===!0&&(At.sdp=Rt.generate())):this.mediaTypeForOutgoingCall==="VIDEO"?Ft.log("mediaTypeForOutgoingCall is VIDEO"):this.mediaTypeForOutgoingCall==="AUDIO"||this.audioOnly===!0?(Ft.log("mediaTypeForOutgoingCall is AUDIO"),At.sdp=Kt.mySDPManager.setRecvOnlyForVideo(At.sdp)):this.mediaTypeForOutgoingCall==="VIDEOONLY"?(Ft.log("mediaTypeForOutgoingCall is VIDEOONLY"),At.sdp=Kt.mySDPManager.setRecvOnlyForAudio(At.sdp)):this.mediaTypeForOutgoingCall==="NONE"&&(Ft.log("mediaTypeForOutgoingCall is NONE"),At.sdp=Kt.mySDPManager.setRecvOnly(At.sdp)):it==="ANSWER"&&(this.mediaTypeForIncomingCall==="VIDEO"?Ft.log("mediaTypeForIncomingCall is VIDEO"):this.mediaTypeForIncomingCall==="AUDIO"||this.audioOnly===!0?(Ft.log("mediaTypeForIncomingCall is AUDIO"),At.sdp=Kt.mySDPManager.setRecvOnlyForVideo(At.sdp)):this.mediaTypeForIncomingCall==="VIDEOONLY"?(Ft.log("mediaTypeForIncomingCall is VIDEOONLY"),At.sdp=Kt.mySDPManager.setRecvOnlyForAudio(At.sdp)):this.mediaTypeForIncomingCall==="NONE"&&(Ft.log("mediaTypeForIncomingCall is NONE"),At.sdp=Kt.mySDPManager.setRecvOnly(At.sdp))),this.simulcast==="SDP"&&it==="OFFER"&&this.settingUpType==="publish"&&((Rt=Kt.mySDPManager.createGuideline(At.sdp)).mungeForSimulcasting(),At.sdp=Rt.generate()),At},this.setLocalAndSendMessageonOffer=function(At){Ft.info("setLocalAndSendMessageonOffer"),Ft.log("sessionDescription = ",At),Ft.log("sessionDescription.sdp = ",At.sdp);var it=null;At.sdp=this.manipulateSDP(At,"OFFER").sdp,Ft.log("manipulated sessionDescription.sdp = ",At.sdp),this.stripAudioSDPActivated===!0&&(At.sdp=Kt.mySDPManager.stripAudioMediaDescriptionFromSDP(At.sdp)),this.stripVideoSDPActivated===!0&&(At.sdp=Kt.mySDPManager.stripVideoMediaDescriptionFromSDP(At.sdp)),this.setLocalCallProfile(Kt.evalCallProfileWithSdp(At.sdp,"local","send")),this.sendedSdpOfferMessage=At,this.dataCall===!0&&(Ft.log("setLocalAndSendMessageonOffer : data Call"),this.callType="data"),this.callCancelled===!1?Kt.NtoNConf===!1?(Ft.log("Conf N to 1"),this.screenSharing===!0&&(it=Kt.mySDPManager.getAudioMediaDescriptionPart(this.sendedSdpOfferMessage.sdp),this.callType=it!=null?"screenSharingWithAudio":"screenSharing"),this.data&&this.data.MCUType==="MCU-Caller"&&(this.data.mediaStreamId=this.callLocalStream.id),this.trickleIce===!0&&(this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:At,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOffer : before setLocalDescription"),this.pc.setLocalDescription(this.sendedSdpOfferMessage,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOffer : before setLocalDescription - Promise version"),this.pc.setLocalDescription(this.sendedSdpOfferMessage).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(Ft.log("Conf N to N"),this.myWebRTC_Stack.sendInviteBroadcast(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,At),this.inviteSended=!0):(Ft.warn("Invite is not sent has call has been canceled"),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"Call_Cancelled"),Kt.callsTable.length===0&&Ft.log("No more established calls for client"))},this.setLocalAndSendMessageonOfferUpdate=function(At){var it,Rt=null;Ft.info("setLocalAndSendMessageonOfferUpdate, sessionDescription :"+At),this.sendedSdpOfferMessage=At,Ft.log("sessionDescription.sdp = ",At.sdp),((0,ot.Ym)(this.audioSdpDirection,"string")||(0,ot.Ym)(this.videoSdpDirection,"string"))&&(Rt=Kt.mySDPManager.createGuideline(At.sdp),(0,ot.ki)(Rt,"audio","object")&&(0,ot.Ym)(this.audioSdpDirection,"string")&&(Rt.audio.direction=this.audioSdpDirection),(0,ot.ki)(Rt,"video","object")&&(0,ot.Ym)(this.videoSdpDirection,"string")&&(Rt.video.direction=this.videoSdpDirection),At.sdp=Rt.generate()),this.setLocalCallProfile(Kt.evalCallProfileWithSdp(At.sdp,"local","send"),!0),it=this.callee?this.callerId:this.calleeId,this.trickleIce===!0?(this.myWebRTC_Stack.sendUpdate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At,this.callType,this.data),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(At,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(At).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(Ft.log("Updating PC offer and answer after switch Stream"),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(At,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(At).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),Kt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),this.pc.remoteDescription.sdp=Kt.mySDPManager.maybePreferCodec(this.pc.remoteDescription.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription"),this.pc.setRemoteDescription(this.pc.remoteDescription,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription - Promise version"),this.pc.setRemoteDescription(this.pc.remoteDescription).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))))},this.onCreateOfferFailure=function(At){Ft.info("onCreateOfferFailure"+At),At=null},this.onCreateAnswerFailure=function(At){Ft.info("onCreateAnswerFailure"+At),At=null},this.setLocalAndSendMessage=function(At){var it;Ft.info("setLocalAndSendMessage"),Ft.log("sessionDescription.sdp = ",At.sdp),this.pc!==null?(At=this.manipulateSDP(At,"ANSWER"),it=Kt.mySDPManager.createGuideline(At.sdp),this.setLocalCallProfile(Kt.evalCallProfileWithSdpGuideline(it,At.sdp,"local","send")),this.setRemoteCallProfile(Kt.evalCallProfileWithSdpGuideline(it,At.sdp,"local","receive")),Ft.log("manipulated sessionDescription.sdp = ",At.sdp),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessage : before setLocalDescription"),this.pc.setLocalDescription(At,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessage : before setLocalDescription - Promise version"),this.pc.setLocalDescription(At).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),this.sendedSdpOfferMessage=At,this.trickleIce===!0&&this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,At,this.data)):Ft.log("setLocalAndSendMessage, pc no more exist")},this.setLocalAndSendMessageUpdate=function(At){var it;if(this.pc!==null){ot.wL.type==="safari"&&(At.sdp=this.manipulateSDP(At,"OFFER").sdp),it=Kt.mySDPManager.createGuideline(At.sdp),this.mediaType==="AUDIOONLY"?it.hasOwnProperty("video")&&it.video.direction!=="inactive"&&(Ft.debug("Only audio was requested at call setup: deactivating video"),it.video.direction="inactive",At.sdp=it.generate()):this.mediaType==="VIDEOONLY"&&it.hasOwnProperty("audio")&&it.audio.direction!=="inactive"&&(Ft.debug("Only video was requested at call setup: deactivating audio"),it.audio.direction="inactive",At.sdp=it.generate()),this.setLocalCallProfile(Kt.evalCallProfileWithSdpGuideline(it,At.sdp,"local","send"),!0),this.setRemoteCallProfile(Kt.evalCallProfileWithSdpGuideline(it,At.sdp,"local","receive"),!0),this.updateOngoingTimeoutId&&(clearTimeout(this.updateOngoingTimeoutId),delete this.updateOngoingTimeoutId),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageUpdate : before setLocalDescription"),this.pc.setLocalDescription(At,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(At).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")));var Rt;Rt=this.callee?this.callerId:this.calleeId,this.myWebRTC_Stack.send200Update(this.callId,this.callerId,this.calleeId,this.dest_roomId,Rt,At,this.data),this.asyncCallbacks&&this.asyncCallbacks.type==="updateMediaType"&&(Ft.debug("asyncCallbacks resolve"),this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)}else Ft.log("setLocalAndSendMessageUpdate, pc no more exist")},this.onIceCandidate=function(At){try{Ft.debug("onIceCandidate :",JSON.stringify(At.candidate))}catch(wt){Ft.error(wt)}var it,Rt=0,bt=0;it=this.callee?this.callerId:this.calleeId,this.pc!==null&&(Ft.debug("Ice Connection State is now : "+this.pc.iceConnectionState),Ft.debug("Ice Gathering State is now : "+this.pc.iceGatheringState)),At.candidate?(this.candidateNb+=1,this.trickleIce===!0?this.mediaRoutingMode===Kt.mediaRoutingModeEnum.hostOnly?(Rt=At.candidate.candidate.search("host"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At.candidate.sdpMLineIndex,At.candidate.sdpMid,At.candidate.candidate,this.data,At.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is hostOnly and not a HOST Candidate : ignoring message"):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.stun?(Rt=At.candidate.candidate.search("host"),bt=At.candidate.candidate.search("srflx"),Rt!==-1||bt!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At.candidate.sdpMLineIndex,At.candidate.sdpMid,At.candidate.candidate,this.data,At.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is stun and not a HOST or SRFLX Candidate : ignoring message")):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.stunOnly?(Rt=At.candidate.candidate.search("srflx"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At.candidate.sdpMLineIndex,At.candidate.sdpMid,At.candidate.candidate,this.data,At.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is stunOnly and not a SRFLX Candidate : ignoring message"):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.turn?(Ft.log("Media routing mode is turn : all candidates are considered"),this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At.candidate.sdpMLineIndex,At.candidate.sdpMid,At.candidate.candidate,this.data,At.candidate,{volatile:!!this.restarted})):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.turnOnly&&((Rt=At.candidate.candidate.search("relay"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,it,At.candidate.sdpMLineIndex,At.candidate.sdpMid,At.candidate.candidate,this.data,At.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is TurnOnly and not a RELAY Candidate : ignoring message")):Ft.log("trickleIce is deactivated : candidates are not sended")):(Ft.info("End of candidates."),this.trickleIce===!1&&(Ft.log("trickleIce === false"),this.callee===!0?(this.send200OKTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.send200OKTrickleIceFalseTimeOutId),this.send200OKTrickleIceFalseTimeOutId=0),this.message200OKSended===!1?this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,this.pc.localDescription,this.data):Ft.log("200OK already sended")):this.pc!==null&&(this.sendInviteTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.sendInviteTrickleIceFalseTimeOutId),this.sendInviteTrickleIceFalseTimeOutId=0),this.inviteSended===!1?(Ft.log("sendInvite on end of candidate"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0):Ft.log("Invite already sended"))))},this.combineRemoteStreams=function(At,it,Rt,bt){var wt=At.getTracks(),Et=Rt.getTracks();if(wt.length===1&&Et.length===1&&(wt[0].kind==="audio"&&Et[0].kind==="video"||wt[0].kind==="video"&&Et[0].kind==="audio")){Ft.debug("combineRemoteStreams");var Mt=new MediaStream;return Mt.addTrack(wt[0]),Mt.addTrack(Et[0]),bt==="internal"&&(Rt.removeTrack(Et[0]),this.onRemoteStreamRemoved({stream:Rt})),it==="internal"&&(At.removeTrack(wt[0]),this.onRemoteStreamRemoved({stream:At})),this.onRemoteStreamAdded({stream:Mt}),!0}return!1},this.checkRemoteStreamExists=function(At,it){var Rt=!1,bt=null,wt=null,Et=null,Mt=null,Nt=null;for(it&&Array.isArray(it)&&(Mt=it.slice(0)),bt=this.remoteMediaStreams.length;--bt>=0;){if(this.remoteMediaStreams[bt].id===At){Rt=!0;break}if(Mt)for(Et=(wt=this.remoteMediaStreams[bt].getTracks()).length;--Et>=0;)(Nt=it.indexOf(wt[Et].id))>=0&&(Mt[Nt]=!0)}if(!Rt&&Mt){for(Nt=0,Et=Mt.length;--Et>=0;)Mt[Et]===!0&&(Nt+=1);Nt===Mt.length&&(Rt=!0)}return Rt},this.onRemoteStreamAdded=function(At){var it,Rt,bt=this;if(Ft.info("onRemoteStreamAdded",At),this.checkRemoteStreamExists(At.stream.id,At.stream.getTracks().map(function(nn){return nn.id})))Ft.debug("onRemoteStreamAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",At.stream,"event")){Ft.debug("onRemoteStreamAdded adding",At.stream.id),At.stream.id==="janus"&&this.data.remoteMediaStreamId&&(Ft.debug("onRemoteStreamAdded adding remoteMediaStreamId on stream :",this.data.remoteMediaStreamId),At.stream.remoteMediaStreamId=this.data.remoteMediaStreamId),this.remoteMediaStreams.push(At.stream),Ft.log("CallId is :"+this.callId),Ft.log("ClientId is :"+Kt.clientId),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Kt.processRemoteStreamAdded(this,At.stream),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio");var wt,Et=function(nn){var dn=null,yn=null;nn.onmute=function(mn){Ft.debug(nn.kind+" mute event");var Cn="";nn.kind==="audio"&&dn===null?dn=setTimeout(function(){bt.isRemoteAudioSilent=!0,Cn="audioIsSilentLocally";var En={},Wn={},Fn=[];Fn.push(Cn),En.available=bt.remoteCallProfile.audio,En.active=bt.remoteCallProfile.audioActive,En.muted=bt.isRemoteAudioMuted,En.silent=bt.isRemoteAudioSilent,Wn.available=bt.remoteCallProfile.video,Wn.active=bt.remoteCallProfile.videoActive,Wn.muted=bt.isRemoteVideoMuted,Wn.silent=bt.isRemoteVideoSilent,bt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Fn,En,Wn,bt.destCallType,bt.callId,"browserAction"),dn=null},2520):nn.kind==="video"&&yn===null&&(yn=setTimeout(function(){bt.isRemoteVideoSilent=!0,Cn="videoIsSilentLocally";var En={},Wn={},Fn=[];Fn.push(Cn),En.available=bt.remoteCallProfile.audio,En.active=bt.remoteCallProfile.audioActive,En.muted=bt.isRemoteAudioMuted,En.silent=bt.isRemoteAudioSilent,Wn.available=bt.remoteCallProfile.video,Wn.active=bt.remoteCallProfile.videoActive,Wn.muted=bt.isRemoteVideoMuted,Wn.silent=bt.isRemoteVideoSilent,bt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Fn,En,Wn,bt.destCallType,bt.callId,"browserAction"),yn=null},2520))},nn.onunmute=function(mn){if(Ft.debug(nn.kind+" unmute event"),nn.kind==="audio"&&dn!==null)clearTimeout(dn),dn=null;else if(nn.kind==="video"&&yn!==null)clearTimeout(yn),yn=null;else{var Cn="";nn.kind==="audio"?(bt.isRemoteAudioSilent=!1,Cn="audioIsSilentLocally"):nn.kind==="video"&&(bt.isRemoteVideoSilent=!1,Cn="videoIsSilentLocally");var En={},Wn={},Fn=[];Fn.push(Cn),En.available=bt.remoteCallProfile.audio,En.active=bt.remoteCallProfile.audioActive,En.muted=bt.isRemoteAudioMuted,En.silent=bt.isRemoteAudioSilent,Wn.available=bt.remoteCallProfile.video,Wn.active=bt.remoteCallProfile.videoActive,Wn.muted=bt.isRemoteVideoMuted,Wn.silent=bt.isRemoteVideoSilent,bt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Fn,En,Wn,bt.destCallType,bt.callId,"browserAction")}},nn.onended=function(mn){Ft.debug(nn.kind+" ended event"),nn.kind==="audio"&&dn!==null?(clearTimeout(dn),dn=null):nn.kind==="video"&&yn!==null&&(clearTimeout(yn),yn=null)}},Mt=fn(At.stream.getVideoTracks());try{for(Mt.s();!(wt=Mt.n()).done;){var Nt=wt.value;Et(Nt),this.isRemoteVideoSilent=Nt.muted}}catch(nn){Mt.e(nn)}finally{Mt.f()}var Yt,Qt=fn(At.stream.getAudioTracks());try{for(Qt.s();!(Yt=Qt.n()).done;){var on=Yt.value;Et(on),this.isRemoteAudioSilent=on.muted}}catch(nn){Qt.e(nn)}finally{Qt.f()}it={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Rt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.stream,this.remoteId,this.destCallType,it,Rt):this.data.type==="publish"&&this.data.mode!=="passive"?Ft.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(Ft.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,At.stream,this.remoteId,this.destCallType,it,Rt)):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.stream,this.remoteId,this.destCallType,it,Rt):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.stream,this.remoteId,this.destCallType,it,Rt)}},this.onRemoteTrackAdded=function(At){var it,Rt;if(Ft.info("onRemoteTrackAdded",At),At.streams[0]!==void 0&&At.track!==void 0){if(this.checkRemoteStreamExists(At.streams[0].id,[At.track.id]))Ft.debug("onRemoteTrackAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",At.streams[0],"event")){if(this.belongsToRoom()){if(this.callType==="audio"&&At.track.kind!=="audio"||this.callType==="videoOnly"&&At.track.kind!=="video"||this.callType==="media"&&At.track.kind!=="video"||this.callType==="screenSharing"&&At.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&At.track.kind!=="video")return void Ft.debug("onRemoteTrackAdded: ignoring event; callType: "+this.callType+", event.track.kind: "+At.track.kind)}else if(this.destCallType==="audio"&&At.track.kind!=="audio"||this.destCallType==="videoOnly"&&At.track.kind!=="video"||this.destCallType==="media"&&At.track.kind!=="video"||this.destCallType==="screenSharing"&&At.track.kind!=="video"||this.destCallType==="screenSharingWithAudio"&&At.track.kind!=="video")return Ft.debug("onRemoteTrackAdded: ignoring event; destCallType: "+this.destCallType+", event.track.kind: "+At.track.kind),void(this.remoteMediaStreams.length===2&&this.combineRemoveStreams(this.remoteMediaStreams[0],"internal",this.remoteMediaStreams[1],"internal"));Ft.debug("onRemoteTrackAdded adding; stream.id: "+At.streams[0].id),this.remoteMediaStreams.push(At.streams[0]),Ft.log("CallId is :"+this.callId),Ft.log("ClientId is :"+Kt.clientId),Ft.log("this.callType :"+this.callType),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio"),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Kt.processRemoteStreamAdded(this,At.streams[0]),At.streams[0].onaddtrack=function(bt){Ft.debug("onRemoteTrackAdded ontrack.onaddtrack",bt)},At.streams[0].onremovetrack=(function(bt){var wt=null;if(Ft.debug("onRemoteTrackAdded ontrack.onremovetrack",bt),this.updateOngoingTimeoutId)return Ft.debug("onRemoteTrackAdded onremovetrack: update ongoing"),void Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event",bt.track.kind);if(this.callType==="audio"&&bt.track.kind!=="audio"||this.callType==="videoOnly"&&bt.track.kind!=="video"||this.callType==="media"&&bt.track.kind!=="video"||this.callType==="screenSharing"&&bt.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&bt.track.kind!=="video")Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event",bt.track.kind);else if(bt.target instanceof MediaStream){for(wt=this.remoteMediaStreams.length;--wt>=0;)if(this.remoteMediaStreams[wt].id===bt.target.id){Ft.debug("onRemoteTrackAdded onremovetrack removing",bt.target.id),this.remoteMediaStreams.splice(wt,1);break}Kt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,bt.target,this.remoteId,this.destCallType)}else Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event target not MediaStream")}).bind(this),it={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Rt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?(this.callType==="audio"&&At.track.kind==="audio"||this.callType==="videoOnly"&&At.track.kind==="video"||this.callType==="media"&&At.track.kind==="video"||this.callType==="screenSharing"&&At.track.kind==="video"||this.callType==="screenSharingWithAudio"&&At.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.streams[0],this.remoteId,this.destCallType,it,Rt):this.data.type==="publish"&&this.data.mode!=="passive"?Ft.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.belongsToRoom()?(this.callType==="audio"&&At.track.kind==="audio"||this.callType==="videoOnly"&&At.track.kind==="video"||this.callType==="media"&&At.track.kind==="video"||this.callType==="screenSharing"&&At.track.kind==="video"||this.callType==="screenSharingWithAudio"&&At.track.kind==="video")&&(this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(Ft.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,At.streams[0],this.remoteId,this.destCallType,it,Rt)):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.streams[0],this.remoteId,this.destCallType,it,Rt)):(this.destCallType==="audio"&&At.track.kind==="audio"||this.destCallType==="videoOnly"&&At.track.kind==="video"||this.destCallType==="media"&&At.track.kind==="video"||this.destCallType==="screenSharing"&&At.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&At.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.streams[0],this.remoteId,this.destCallType,it,Rt):this.belongsToRoom()?(this.callType==="audio"&&At.track.kind==="audio"||this.callType==="videoOnly"&&At.track.kind==="video"||this.callType==="media"&&At.track.kind==="video"||this.callType==="screenSharing"&&At.track.kind==="video"||this.callType==="screenSharingWithAudio"&&At.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.streams[0],this.remoteId,this.destCallType,it,Rt):(this.destCallType==="audio"&&At.track.kind==="audio"||this.destCallType==="videoOnly"&&At.track.kind==="video"||this.destCallType==="media"&&At.track.kind==="video"||this.destCallType==="screenSharing"&&At.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&At.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,At.streams[0],this.remoteId,this.destCallType,it,Rt)}}else Ft.debug("onRemoteTrackAdded: ignoring event; event data are not correct")},this.onRemoteStreamRemoved=function(At){var it=null;for(Ft.info("onRemoteStreamRemoved",At),it=this.remoteMediaStreams.length;--it>=0;)if(this.remoteMediaStreams[it].id===At.stream.id){Ft.debug("onRemoteStreamRemoved removing",At.stream.id),this.remoteMediaStreams.splice(it,1);break}Kt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,At.stream,this.remoteId,this.destCallType),At=null},this.onNegotiationNeeded=function(At){Ft.debug("onNegotiationNeeded",At),At=null,this.addingDataChannelOnCallOngoing&&(this.updateMediaWithRetryManagement(!1),this.addingDataChannelOnCallOngoing=!1)},this.onSignalingStateChange=function(At){Ft.debug("onSignalingStateChange",At),At=null},this.onCallDisconnection=function(){Ft.info("onCallDisconnection; callId: "+this.callId);var At=new Date;Ft.debug("date:",At),this.disconnectionWarningInterval!==0&&(Ft.debug("date:",At),Ft.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.disconnectionWarningTimeout!==0&&(Ft.debug("date:",At),Ft.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.disconnectionWarningTimeout),this.disconnectionWarningTimeout=0),this.belongsToRoom()?Kt.onHangup(this.callId,"disconnected"):Kt.onHangup(this.callId,"Ice_disconnected")},this.sendDisconnectionWarning=function(){Ft.log("sendDisconnectionWarning()");var At=null,it=null;if(this.callControl&&(At=this.callControl.roomName,it=this.callControl.type),this.disconnectionWarningCount++,pn.createEvent({eventType:"disconnectionWarning",callId:this.callId,remoteId:this.remoteId,tries:this.disconnectionWarningCount,roomName:At,settingUpType:it}),(this.disconnectionWarningCount-1)*this.disconnectionWarningDelay>=this.disconnectionTimer&&this.disconnectionWarningInterval!==0){var Rt=Date();Ft.debug("date :"+Rt),Ft.debug("clearing disconnectionWarningInterval : no more warnings"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0}},this.createIceErrorDescriptor=function(At,it){var Rt={};return At==="disconnected"?Rt.iceState="disconnected":At==="failed"?(Rt.iceState="failed",it===!0&&(Rt.previousIceState="disconnected")):Rt.iceState="unknown",Rt.callType=this.callType,this.belongsToRoom()?(Rt.context="conf",this.data.mesh?(Rt.mode="mesh",(this.data.mesh.callerCompositeUserId?this.data.mesh.callerCompositeUserId===Kt.compositeClientId:this.data.mesh.callerId===Kt.clientId)?(Rt.type="subscribe",Rt.clientId=this.data.mesh.callerId,Rt.remoteId=this.data.mesh.calleeId):(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Kt.compositeClientId:this.data.mesh.calleeId===Kt.clientId)?(Rt.type="publish",Rt.clientId=this.data.mesh.calleeId,Rt.remoteId=this.data.mesh.callerId):Rt.type="unknown",Rt.mesh=this.data.mesh):(Rt.mode="sfu",this.settingUpType==="publish"||this.settingUpType==="shareScreen"?Rt.type="publish":this.settingUpType==="subscribe"?Rt.type="subscribe":Rt.type="unknown",this.callee?(Rt.clientId=this.calleeId,Rt.remoteId=this.callerId):(Rt.clientId=this.callerId,Rt.remoteId=this.calleeId)),this.mcuRemoteStream&&(Rt.stream=this.mcuRemoteStream)):(Rt.context="call",Rt.mode="p2p",this.callerId===Kt.clientId?(Rt.clientId=this.callerId,Rt.remoteId=this.calleeId):this.calleeId===Kt.clientId&&(Rt.clientId=this.calleeId,Rt.remoteId=this.callerId)),Rt},this.onIceConnectionStateChange=function(At){Ft.debug("onIceConnectionStateChange: ",At),At=null;var it=0,Rt=null,bt=null,wt=null;this.pc!==null?(Ft.info("Ice Connection State is now : "+this.pc.iceConnectionState),this.iceState=this.pc.iceConnectionState,this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"||this.pc.iceConnectionState==="checking"?(Ft.debug("iceConnectionState === connected or completed or checking"),Ft.debug("this.disconnectionTimeoutId :"+this.disconnectionTimeoutId),this.disconnectionTimeoutId!==0&&(it=Date(),Ft.debug("date:",it),Ft.debug("clearing disconnectionTimeout"),clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0),this.disconnectionWarningInterval!==0&&(it=Date(),Ft.debug("date:",it),Ft.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.pc.iceConnectionState!=="checking"&&(this.checkCandidateTypesTimeoutId=setTimeout(this.callback(this,"checkCandidateTypes"),this.checkCandidateTypesTimer),this.checkCandidateTypesTimeoutTable.push(this.checkCandidateTypesTimeoutId))):this.pc.iceConnectionState==="disconnected"?(this.callControl&&(Rt=this.callControl.roomName,bt=this.callControl.type),(wt=this.createIceErrorDescriptor("disconnected")).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Kt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Kt.MCUClient.pubConnector,descriptor:wt}),Ft.warn("disconnection detected"),pn.createErrorEvent("iceDisconnection detected","ICE_CONNECTION_STATE_DISCONNECTED",this.callId,Rt,bt,wt),it=new Date,Ft.debug("date:",it),this.disconnectionTimeoutId=setTimeout(this.callback(this,"onCallDisconnection"),this.disconnectionTimer),this.disconnectionWarningCount=0,this.disconnectionWarningTimeout=setTimeout(this.callback(this,"sendDisconnectionWarning"),2e3),this.disconnectionWarningInterval=setInterval(this.callback(this,"sendDisconnectionWarning"),this.disconnectionWarningDelay)):this.pc.iceConnectionState==="failed"&&(this.callControl&&(Rt=this.callControl.roomName,bt=this.callControl.type),(wt=this.createIceErrorDescriptor("failed",this.disconnectionTimeoutId!==0)).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Kt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Kt.MCUClient.pubConnector,descriptor:wt}),Ft.warn("iceConnection failed detected"),pn.createErrorEvent("iceConnection failed detected","ICE_CONNECTION_STATE_FAILED",this.callId,Rt,bt,wt),this.disconnectionTimeoutId!==0?this.belongsToRoom()&&(clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0,Kt.onHangup(this.callId,"disconnected")):this.belongsToRoom()&&(0,ot.ki)(this.callControl,["autoRestart","counter"],"number")&&this.callControl.autoRestart.counter>0?Kt.onHangup(this.callId,"disconnected"):(Ft.warn("Removing call with callId: "+this.callId),Kt.removeCallFromTableWithCallIdAndSendBye(this.callId,"Ice_failed")))):Ft.log("Ice Connection State change with pc is null")},this.callback=function(At,it){return this.closureHandler=function(Rt,bt){return At[it](Rt,bt)},this.closureHandler},this.onSelectedCandidate=function(At){if(this.selectedCandidate===void 0||this.selectedCandidate===null||this.selectedCandidate.LocalCandidateType!==At.LocalCandidateType||this.selectedCandidate.RemoteCandidateType!==At.RemoteCandidateType||this.selectedCandidate.LocalAddress!==At.LocalAddress||this.selectedCandidate.RemoteAddress!==At.RemoteAddress||this.selectedCandidate.TransportType!==At.TransportType||this.selectedCandidate.LocalTransportType!==At.LocalTransportType){Ft.debug("WebRTC_Call::onSelectedCandidate() :",At),this.selectedCandidate=At,this.callControl&&this.callControl.autoRestart&&(Ft.debug("selectedCandidate, this.callControl.autoRestart.counter:",this.callControl.autoRestart.counter),Ft.debug("selectedCandidate, this.callControl.autoRestart.callIdWhenStartingTimer:",this.callControl.autoRestart.callIdWhenStartingTimer),this.callControl.autoRestart.counter&&(Ft.debug("Reinit of autoRestart.counter"),this.callControl.autoRestart.counter=0,this.callControl.autoRestart.callIdWhenStartingTimer!==void 0&&Kt.stopMaxCallRetriesTimer(this.callControl.autoRestart.callIdWhenStartingTimer))),this.myWebRTC_Event.createSelectedICECandidateEvent(this.callId,At.LocalCandidateType,At.RemoteCandidateType,At.LocalAddress,At.RemoteAddress,At.TransportType,At.LocalTransportType);var it=At;it.callId=this.callId,it.clientId=Kt.clientId,it.roomId=this.dest_roomId,this.data.pubSub!==void 0&&(it.pubSub=this.data.pubSub),this.data.confId!==void 0&&(it.confId=this.data.confId),this.data.mesh!==void 0&&(it.mesh=this.data.mesh),this.data.instanceId!==void 0&&(it.instanceId=this.data.instanceId),this.myWebRTC_Stack.sendInfo("callSelectedCandidate",it)}else Ft.debug("filtering duplicate candidate")},this.checkCandidateTypes=function(){Ft.debug("WebRTC_Call::checkCandidatesTypes()");var At=this,it={LocalCandidateType:"unknow",RemoteCandidateType:"unknow",LocalAddress:"unknow",RemoteAddress:"unknow",TransportType:"unknow",LocalTransportType:"unknow",relayTransportType:"unknow"},Rt=["googLocalAddress","googLocalCandidateType","googRemoteAddress","googRemoteCandidateType","googTransportType"];this.pc===null?(Ft.warn("Peer connection is null : no candidates"),At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it)):typeof apiRTC_React<"u"?(Ft.debug("apiRTC_React : WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats().then(function(bt){var wt=null;if(bt.forEach(function(Nt){Nt.nominated===!0&&(wt=Nt)}),wt!==null){var Et=bt.get(wt.localCandidateId),Mt=bt.get(wt.remoteCandidateId);it.LocalCandidateType=Et.candidateType,it.RemoteCandidateType=Mt.candidateType,Et.address&&Et.port&&(it.LocalAddress=Et.address+":"+Et.port),Mt.address&&Mt.port&&(it.RemoteAddress=Mt.address+":"+Mt.port),it.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(it.relayTransportType=Et.relayProtocol),At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it)}}).catch(function(bt){Ft.error(bt)})):ot.wL.type==="chrome"&&nt.PR<=112?(Ft.debug("WebRTC_Call::checkCandidatesTypes() chrome <= 112"),this.pc.getStats(function(bt){var wt=bt.result().filter(function(Et){return Et.id.indexOf("Conn-")===0&&Et.stat("googActiveConnection")==="true"})[0];wt?(Rt.forEach(function(Et){it[Et.replace("goog","")]=wt.stat(Et)}),At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it)):(At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it))})):ot.wL.type==="chrome"||ot.wL.type==="firefox"||ot.wL.type==="safari"?(Ft.debug("WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats(null).then(function(bt){var wt=null;if(bt.forEach(function(Nt){Nt.selected===!0&&ot.wL.type==="firefox"?(wt!==null&&Ft.warn("multiple selected candidate-pairs"),wt=Nt):Nt.nominated===!0&&(wt=Nt)}),wt!==null){var Et=bt.get(wt.localCandidateId),Mt=bt.get(wt.remoteCandidateId);it.LocalCandidateType=Et.candidateType,it.RemoteCandidateType=Mt.candidateType,Et.address&&Et.port?it.LocalAddress=Et.address+":"+Et.port:Et.ipAddress&&Et.portNumber&&(it.LocalAddress=Et.ipAddress+":"+Et.portNumber),Mt.address&&Mt.port?it.RemoteAddress=Mt.address+":"+Mt.port:Mt.ipAddress&&Mt.portNumber&&(it.RemoteAddress=Mt.ipAddress+":"+Mt.portNumber),it.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(it.relayTransportType=Et.relayProtocol),At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it)}}).catch(function(bt){Ft.warn("failed to get stats",bt)})):(Ft.debug("checkCandidateTypes not Chrome or Firefox"),At.myWebRTC_Event.createICECandidateTypeUpdateEvent(At.callId,it.LocalCandidateType,it.RemoteCandidateType),At.onSelectedCandidate(it))},this.belongsToRoom=function(){return!!(0,ot.ki)(this.sessionMCU,"roomName","string")&&((0,ot.ki)(this.data,"MCUType","string")&&(this.data.MCUType==="MCU-Caller"||this.data.MCUType==="MCU-Callee")&&(0,ot.ki)(this.data,"confId","string")?this.data.confId===this.sessionMCU.roomName:this.dest_roomId===this.sessionMCU.roomName)},this.setLocalCallProfile=function(At){var it=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Rt=[],bt={},wt={},Et=null,Mt=null,Nt="adaptation";this.dataCall!==!0&&this.settingUpType!=="subscribe"&&(this.localCallProfile.audioActive!==At.audioActive&&Rt.push("audioIsActive"),this.localCallProfile.videoActive!==At.videoActive&&Rt.push("videoIsActive"),this.localCallProfile=At,this.screenSharing===!0?this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Rt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Rt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Rt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Rt.push("callType")):this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Rt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Rt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Rt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Rt.push("callType")),it===!0&&Rt.length>0&&(bt.available=this.localCallProfile.audio,bt.active=this.localCallProfile.audioActive,bt.muted=this.isLocalAudioMuted,bt.silent=this.isRemoteAudioSilent,wt.available=this.localCallProfile.video,wt.active=this.localCallProfile.videoActive,wt.muted=this.isLocalVideoMuted,wt.silent=this.isRemoteVideoSilent,this.callConfiguration&&this.callConfiguration.userMediaStreamId&&(Et=this.callConfiguration.userMediaStreamId,(Mt=apiCC.getUserMediaStream(Et))&&(bt.deviceLabel=Mt.audioDeviceLabel,wt.deviceLabel=Mt.videoDeviceLabel)),this.updateCause&&(Nt=this.updateCause),this.myWebRTC_Event.createLocalStreamUpdatedEvent(Rt,bt,wt,!0,this.callType,this.callId,this.callLocalStream,Et,Nt)))},this.setRemoteCallProfile=function(At){var it=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Rt=[],bt={},wt={},Et="adaptation";this.dataCall!==!0&&(this.remoteCallProfile.audioActive!==At.audioActive&&Rt.push("audioIsActive"),this.remoteCallProfile.videoActive!==At.videoActive&&Rt.push("videoIsActive"),this.remoteCallProfile=At,this.settingUpType==="subscribe"?(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Rt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Rt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Rt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Rt.push("callType")):this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Rt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Rt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Rt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Rt.push("callType")),it===!0&&Rt.length>0&&(bt.available=this.remoteCallProfile.audio,bt.active=this.remoteCallProfile.audioActive,bt.muted=this.isRemoteAudioMuted,bt.silent=this.isRemoteAudioSilent,wt.available=this.remoteCallProfile.video,wt.active=this.remoteCallProfile.videoActive,wt.muted=this.isRemoteVideoMuted,wt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Rt,bt,wt,this.callType,this.callId,Et))):(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharingWithAudio"&&(this.destCallType="screenSharingWithAudio",Rt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Rt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharing"&&(this.destCallType="screenSharing",Rt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Rt.push("callType")):this.settingUpType!=="publish"&&this.settingUpType!=="shareScreen"||(this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="media"&&(this.destCallType="media",Rt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Rt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="videoOnly"&&(this.destCallType="videoOnly",Rt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Rt.push("callType"))),it===!0&&Rt.length>0&&(bt.available=this.remoteCallProfile.audio,bt.active=this.remoteCallProfile.audioActive,bt.muted=this.isRemoteAudioMuted,bt.silent=this.isRemoteAudioSilent,wt.available=this.remoteCallProfile.video,wt.active=this.remoteCallProfile.videoActive,wt.muted=this.isRemoteVideoMuted,wt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Rt,bt,wt,this.destCallType,this.callId,Et))))},this.setMediaConstraintsToSendOnlyOffer=function(){ot.wL.type==="firefox"?nt.PR>43?this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:ot.wL.type==="edge"?this.mediaConstraints={offerToReceiveAudio:0,offerToReceiveVideo:0}:ot.wL.type==="chrome"&&ot.wL.version<55?this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1,mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},this.mediaConstraintsAudioOnly=this.mediaConstraints},this.applyOutgoingBitrate=function(At){var it=this;Ft.debug("applyOutgoingBitrate",this.callId,At);for(var Rt=null,bt=0;bt<this.rtpSenders.video.length;bt+=1)if(this.rtpSenders.video[bt].track){Rt=this.rtpSenders.video[bt];break}if(Rt)if(typeof Rt.getParameters=="function"&&typeof Rt.setParameters=="function"){var wt=Rt.getParameters();if(Object.prototype.hasOwnProperty.call(wt,"encodings")){if(wt.encodings.length!==1)return void Ft.debug("encodings cannot be changed",this.callId,wt.encodings.length)}else wt.encodings=[{}];if(At!==null&&typeof At=="number"){At<50&&(At=50);var Et=1e3*At;if(wt.encodings[0].maxBitrate===Et)return;wt.encodings[0].maxBitrate=Et}else{if(!Object.prototype.hasOwnProperty.call(wt.encodings[0],"maxBitrate"))return;delete wt.encodings[0].maxBitrate}Rt.setParameters(wt).catch(function(Mt){Ft.error("applyOutgoingBitrate - setParameters",it.callId,Mt)})}else Ft.warn("no such functions: getParameters/setParameters",this.callId);else Ft.warn("no such video rtpSender",this.callId)},this.configureSimulcastEncodings=function(At){var it=this,Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ft.debug("configureSimulcastEncodings",this.callId,At,Rt.maxBitrate),this.simulcast==="RID"){for(var bt=null,wt=0;wt<this.rtpSenders.video.length;wt+=1)if(this.rtpSenders.video[wt].track){bt=this.rtpSenders.video[wt];break}if(bt)if(typeof bt.getParameters=="function"&&typeof bt.setParameters=="function"){var Et=bt.getParameters();if(Object.prototype.hasOwnProperty.call(Et,"encodings"))if(Et.encodings.length===3){for(var Mt=null,Nt=null,Yt=null,Qt=Et.encodings.length;--Qt>=0;){var on=Et.encodings[Qt];Mt||on.rid!=="h"?Nt||on.rid!=="m"?Yt||on.rid!=="l"||(Yt=on):Nt=on:Mt=on}if(Mt&&Object.prototype.hasOwnProperty.call(Mt,"maxBitrate")&&Nt&&Object.prototype.hasOwnProperty.call(Nt,"maxBitrate")&&Yt&&Object.prototype.hasOwnProperty.call(Yt,"maxBitrate")){var nn=!1,dn=Math.floor(Yt.maxBitrate/1e3),yn=!1,mn=!1;if(Mt.active&&Mt.maxBitrate>1&&(dn+=Math.floor(Mt.maxBitrate/1e3),yn=!0),Nt.active&&Nt.maxBitrate>1&&(dn+=Math.floor(Nt.maxBitrate/1e3),mn=!0),Ft.debug("currentStatus",dn,yn,mn),At==="changeMaxBitrate"){if(!(0,ot.ki)(Rt,"maxBitrate","number"))return;var Cn=Rt.maxBitrate;dn<=Cn?(mn||dn+this.callConfiguration.simulcast.encodings.medium.maxBitrate<=Cn&&(ot.wL.type==="chrome"?Nt.active=!0:ot.wL.type==="firefox"&&(Nt.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.medium.maxBitrate),this.callConfiguration.simulcast.encodings.medium.active=!0,mn=!0,dn+=this.callConfiguration.simulcast.encodings.medium.maxBitrate,nn=!0),yn||dn+this.callConfiguration.simulcast.encodings.high.maxBitrate<=Cn&&(ot.wL.type==="chrome"?Mt.active=!0:ot.wL.type==="firefox"&&(Mt.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.high.maxBitrate),this.callConfiguration.simulcast.encodings.high.active=!0,yn=!0,dn+=this.callConfiguration.simulcast.encodings.high.maxBitrate,nn=!0)):(yn&&(yn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,dn-=Math.floor(Mt.maxBitrate/1e3),ot.wL.type==="chrome"?Mt.active=!1:ot.wL.type==="firefox"&&(Mt.maxBitrate=1),nn=!0),dn>Cn&&mn&&(mn=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,dn-=Math.floor(Nt.maxBitrate/1e3),ot.wL.type==="chrome"?Nt.active=!1:ot.wL.type==="firefox"&&(Nt.maxBitrate=1),nn=!0))}else At==="disableEncoding"&&(yn?(yn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,dn-=Math.floor(Mt.maxBitrate/1e3),ot.wL.type==="chrome"?Mt.active=!1:ot.wL.type==="firefox"&&(Mt.maxBitrate=1),nn=!0):mn&&(mn=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,dn-=Math.floor(Nt.maxBitrate/1e3),ot.wL.type==="chrome"?Nt.active=!1:ot.wL.type==="firefox"&&(Nt.maxBitrate=1),nn=!0));Ft.debug("applyChanges",dn,yn,mn,nn),nn&&(bt.setParameters(Et).catch(function(En){Ft.error("configureEncodings - setParameters",it.callId,En)}),this.myWebRTC_Stack.sendInfo("configureEncodings",{pubSub:Kt.MCUClient.pubConnector,clientId:Kt.clientId,roomId:this.sessionMCU.roomName,callId:this.callId,instanceId:this.instanceId,hint:"simulcast",encodings:this.callConfiguration.simulcast.encodings}))}else Ft.warn("cannot find h/m/l encodings",this.callId)}else Ft.warn("wrong encodings",this.callId,Et.encodings.length);else Ft.warn("no encodings configured",this.callId)}else Ft.warn("no such functions: getParameters/setParameters",this.callId);else Ft.warn("no such video rtpSender",this.callId)}}},Tn=(s(4363),s(9653),function(Kt){this.disconnectionTimer=15e3,Number.MAX_SAFE_INTEGER!==void 0?this.userMediaId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaId=Math.floor(1000001*Math.random()).toString(),this.callType="media",this.audio=!1,this.video=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.callConfiguration={},this.sessionMCU=null,this.myWebRTC_Stack=new ht.S(Kt.socket),this.getUserMediaStream=function(){return this.callConfiguration&&this.callConfiguration.userMediaStreamId?apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId):null},this.releaseUserMediaStream=function(){if(this.callConfiguration&&this.callConfiguration.userMediaStreamId){var At=this.callConfiguration.userMediaStreamId;return delete this.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(At,this.userMediaId)}return!1},this.close=function(){(this.addAck||this.addTimeoutId)&&(delete this.addAck,clearTimeout(this.addTimeoutId),delete this.addTimeoutId)}});function In(Kt){return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},In(Kt)}function kn(Kt,At){var it=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(!it){if(Array.isArray(Kt)||(it=function(Nt,Yt){if(Nt){if(typeof Nt=="string")return Nn(Nt,Yt);var Qt=Object.prototype.toString.call(Nt).slice(8,-1);return Qt==="Object"&&Nt.constructor&&(Qt=Nt.constructor.name),Qt==="Map"||Qt==="Set"?Array.from(Nt):Qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qt)?Nn(Nt,Yt):void 0}}(Kt))||At&&Kt&&typeof Kt.length=="number"){it&&(Kt=it);var Rt=0,bt=function(){};return{s:bt,n:function(){return Rt>=Kt.length?{done:!0}:{done:!1,value:Kt[Rt++]}},e:function(Nt){throw Nt},f:bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt,Et=!0,Mt=!1;return{s:function(){it=it.call(Kt)},n:function(){var Nt=it.next();return Et=Nt.done,Nt},e:function(Nt){Mt=!0,wt=Nt},f:function(){try{Et||it.return==null||it.return()}finally{if(Mt)throw wt}}}}function Nn(Kt,At){(At==null||At>Kt.length)&&(At=Kt.length);for(var it=0,Rt=new Array(At);it<At;it++)Rt[it]=Kt[it];return Rt}var hn=et.Y.get("ApiCCMCUClient"),Sn=apiCC.myWebRTC_Event,Rn=3e4,wn=function(Kt,At){hn.debug("ApiCCMCUClient creation"),this.pubConnector="janusConnector",this.meshModeEnabled=!1,this.sessionMCUs=[],this.distantCalls=[],this.streamList=[],this.disputableStreamList=[],this.publishCallId=null,this.joinSessionReqs=[],this.transitionCount=0,this.browserCapabilities={updateStream:!0,mesh2janusTransition:!0,checkCallStatus:!0},this.receiveSessionId=function(it){hn.debug("receiveSessionId()"),Sn.createMCUSessionCreationEvent(it.sessionId,it.token),this.publish(it.sessionId,it.token)},this.sendSessionInvitation=function(it,Rt,bt){var wt,Et;hn.debug("sendSessionInvitation()"),Rt!=null?(bt===void 0&&(bt=0),wt={type:"MCUSessionInvitation",srcId:At,destId:it,sessionId:Rt,groupChatId:bt},Et=JSON.stringify(wt),hn.log("C->S: "+Et),apiCC.session.channel.socket.emit("MCUSessionInvitation",Et)):hn.log("Session is null or undefined, MCU Session invitation is not sended")},this.sendSessionInvitationToGroupChat=function(it,Rt){if(hn.debug("sendSessionInvitationToGroupChat()"),it!=null)if(Rt!=null){var bt,wt;bt={type:"MCUSessionInvitationToGroupChat",srcId:At,groupChatId:it,sessionId:Rt},wt=JSON.stringify(bt),hn.log("C->S: "+wt),apiCC.session.channel.socket.emit("MCUSessionInvitationToGroupChat",wt)}else hn.log("Session is null or undefined, MCU Session invitation is not sended");else hn.log("groupChatId is null or undefined, MCU Session invitation is not sended")},this.receiveSessionInvitation=function(it){hn.debug("receiveSessionInvitation()"),hn.log("msg.sessionId :"+it.sessionId),hn.log("msg.token :"+it.token),hn.log("msg.groupChatId :"+it.groupChatId),Sn.createReceiveMCUSessionInvitationEvent(it.sessionId,it.token,it.groupChatId,it.srcId)},this.acceptSessionInvitation=function(it,Rt){hn.debug("acceptSessionInvitation()"),hn.log("sessionId :"+it),hn.log("token :"+Rt),this.publish(it,Rt)},this.leaveSession=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};hn.info("leaveSession()");var bt=null,wt=null,Et=null;if(!(Et=it?this.getSessionMCU(it):this.getSessionMCU(null,{first:!0})))return new Error("leaveSession: session not set");Rt.noHangup!==!0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.removeAllCallsFromRoom(Et.roomName,"leaveSession"),this.meshOnHangup(null,null,{roomId:Et.roomName}));var Mt=[],Nt={};Mt.push(Et.roomName),Nt.doneByApiRTC=!0,apiCC.session.leavePresenceGroup(Mt,Nt),apiCC.session.unsubscribePresenceGroup(Mt,Nt),bt={type:"leaveSession",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},wt=JSON.stringify(bt),hn.log("C->S: "+wt),apiCC.session.channel.socket.emit("leaveSession",wt),hn.debug("leaveSession: distant call clean up");for(var Yt=this.distantCalls.length;--Yt>=0;)this.distantCalls[Yt].roomId===Et.roomName&&(hn.debug("leaveSession: remove distant call descriptor",this.distantCalls[Yt]),this.distantCalls.splice(Yt,1));apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({multi:!0,roomName:Et.roomName});for(var Qt=this.streamList.length;--Qt>=0;)this.streamList[Qt].roomId===Et.roomName&&this.streamList.splice(Qt,1);return this.removeSessionMCU(Et),"OK"},this.createJoinSessionMessage=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=null;it||(bt=Rt.hasOwnProperty("sessionMCU")?Rt.sessionMCU:this.getSessionMCU(null,{first:!0}))&&(it=bt.roomName);var wt=bt&&bt.roomMode==="mesh"||this.meshModeEnabled===!0||Rt.meshModeEnabled===!0,Et=bt&&bt.meshOnly===!0||Rt.meshOnlyEnabled===!0,Mt={type:"joinSession",roomId:it,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,meshModeEnabled:wt,meshOnlyEnabled:Et,videoBandwidthSettings:apiCC.session.apiCCWebRTCClient.webRTCClient.videoBandwidthSettings,browserInfo:{browserAbout:nt.Xh+" "+nt.dc,browserType:ot.wL.type,browserVersion:ot.wL.version,osName:nt.BF,osVersion:apiCC.osVersion,deviceType:nt.vO}}};if(Rt.hasOwnProperty("transactionId")&&(Mt.transactionId=Rt.transactionId),Rt.hasOwnProperty("convId")?Mt.data.convId=Rt.convId:bt&&bt.hasOwnProperty("convId")&&(Mt.data.convId=bt.convId),Rt.moderationEnabled&&(Mt.data.moderationEnabled=!0),Rt.moderator&&(Mt.data.moderator=!0),Rt.qualityAdaptationEnabled&&(Mt.data.qualityAdaptationEnabled=!0),Array.isArray(Rt.supportedVideoCodecs)){Mt.data.supportedVideoCodecs=[];var Nt,Yt=kn(Rt.supportedVideoCodecs);try{for(Yt.s();!(Nt=Yt.n()).done;){var Qt=Nt.value;Qt==="h264"?Mt.data.supportedVideoCodecs.push({codec:"h264",profilelevelid:"42e01f"}):typeof Qt=="string"?Mt.data.supportedVideoCodecs.push({codec:Qt}):Mt.data.supportedVideoCodecs.push(Qt)}}catch(on){Yt.e(on)}finally{Yt.f()}}else ot.wL.type==="safari"&&(nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1)&&(Mt.data.supportedVideoCodecs=[{codec:"h264",profilelevelid:"42e01f"}]);return Mt.data.capabilities=this.browserCapabilities,Mt},this.createSessionDescriptor=function(it){var Rt={roomId:it.roomName};return it.convId&&(Rt.convId=it.convId),it.roomMode&&(Rt.roomMode=it.roomMode),it.modeChangeKind&&(Rt.modeChangeKind=it.modeChangeKind),Rt},this.joinSession=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.getSessionMCU(it))return hn.warn("joinSession: session already set"),new Error("joinSession: session already set");if(this.getJoinSessionReq(it))return hn.warn("joinSession: session already requested"),new Error("joinSession: session already requested");var bt={};bt.roomId=it,bt.transactionId=apiCC.randomString(12),this.joinSessionReqs.push(bt);var wt=Object.assign({},Rt);wt.transactionId=bt.transactionId,hn.info("joinSession() on ApiRTC MCU with roomId:",it);var Et=this.createJoinSessionMessage(it,wt),Mt=JSON.stringify(Et);return hn.log("C->S: "+Mt),apiCC.session.channel.socket.emit("joinSession",Mt),"OK"},this.joinSessionAnswer=function(it){if(hn.debug("joinSessionAnswer()"),this.getSessionMCU(it.roomName))hn.warn("joinSessionAnswer: session already set");else{var Rt=null;if(it.hasOwnProperty("transactionId")&&(Rt=this.getJoinSessionReq(null,{transactionId:it.transactionId})),Rt||(Rt=this.getJoinSessionReq(it.roomName)),Rt){this.removeJoinSessionReq(Rt);var bt={};if(bt.roomID=it.sessionId,bt.roomName=it.roomName,it.hasOwnProperty("convId")&&(bt.convId=it.convId),bt.joinSessionAnswer={},(0,ot.ki)(it,"data","object")?(it.data.failed===!0?(bt.joinSessionAnswer.failed=!0,bt.joinSessionAnswer.reason=it.data.reason):bt.joinSessionAnswer.failed=!1,it.data.mode&&typeof it.data.mode=="string"&&(bt.roomMode=it.data.mode,hn.debug("session joined with mode; roomMode: "+bt.roomMode)),bt.roomMode==="mesh"&&it.data.meshOnly===!0&&(bt.meshOnly=!0,hn.debug("meshOnly"))):bt.joinSessionAnswer.failed=!1,this.sessionMCUs.push(bt),!bt.joinSessionAnswer.failed){var wt=[],Et={};wt.push(it.roomName),Et.doneByApiRTC=!0,apiCC.session.joinPresenceGroup(wt,Et),apiCC.session.subscribePresenceGroup(wt,Et)}Sn.createJoinMCUSessionAnswerEvent(it.sessionId,it.token,it.groupChatId,it.initiator,bt)}else hn.debug("joinSessionAnswer: no joinSession requested")}},this.changeSessionMode=function(it,Rt){var bt=this.getSessionMCU(it.roomName);if(bt)if(bt.roomMode==="mesh"){for(var wt=0,Et=Kt.userMediaTable.length;--Et>=0;)if(Kt.userMediaTable[Et].sessionMCU===bt){hn.debug("changeSessionMode: userMedia",Kt.userMediaTable[Et]),Kt.userMediaTable[Et].distantCalls=[],wt+=1;for(var Mt=this.distantCalls.length;--Mt>=0;)hn.debug("changeSessionMode: distantCall",this.distantCalls[Mt]),this.distantCalls[Mt].callMode==="mesh"&&this.distantCalls[Mt].callFeed.callId===Kt.userMediaTable[Et].userMediaId&&(hn.debug("changeSessionMode: match"),Kt.userMediaTable[Et].distantCalls.push(this.distantCalls[Mt]))}for(var Nt=0,Yt=Kt.callControlTable.length;--Yt>=0;)Kt.callControlTable[Yt].type==="subscribe"&&Kt.callControlTable[Yt].roomName===bt.roomName&&(Nt+=1,Kt.callControlTable[Yt].autoRestart.force=!0);if(Sn.createMCURoomModeChangedEvent(bt.roomName,"mesh","sfu","ongoing"),wt===0&&Nt===0)delete bt.roomMode,Sn.createMCURoomModeChangedEvent(bt.roomName,"mesh","sfu","complete");else{bt.modeChangeKind="old";var Qt={};Qt.roomID=it.roomName,Qt.roomName=it.roomName,it.hasOwnProperty("convId")&&(Qt.convId=it.convId),Qt.joinSessionAnswer={failed:!1},Qt.modeChangeKind="new",Qt.transitionTimeoutId=setTimeout((function(on,nn){delete nn.transitionTimeoutId,Kt.finalizeMeshToJanusTransition(on,nn,{force:!0})}).bind(this,bt,Qt),3e4),this.sessionMCUs.push(Qt),this.transitionCount+=1}}else hn.warn("changeSessionMode: session not using mesh mode");else hn.warn("changeSessionMode: no session")},this.updateSessionAnswer=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};hn.debug("updateSessionAnswer");var bt=this.getSessionMCU(it.roomName);if(!bt){if(!Rt.createSession)return void hn.warn("updateSessionAnswer: no such session",it.roomName);hn.debug("force session creation; roomName: "+it.roomName),(bt={}).roomID=it.roomName,bt.roomName=it.roomName,it.hasOwnProperty("convId")&&(bt.convId=it.convId),bt.joinSessionAnswer={failed:!1},this.sessionMCUs.push(bt);for(var wt=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;--wt>=0;){var Et=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[wt];!Et.data||Et.data.MCUType!=="MCU-Caller"&&Et.data.MCUType!=="MCU-Callee"||Et.data.confId!==bt.roomName||(Et.sessionMCU=bt)}}var Mt=!1;if(it.data&&it.data.mode==="mesh"?(bt.roomMode="mesh",it.data.meshOnly===!0&&(bt.meshOnly=!0)):(bt.roomMode==="mesh"&&(Mt=!0),delete bt.roomMode),bt.modeChangeKind==="new"){hn.debug("transition already ongoing");var Nt=this.getSessionMCU(null,{callback:function(Cn){return Cn.roomName===bt.roomName&&Cn.modeChangeKind==="old"}});Nt&&Kt.finalizeMeshToJanusTransition(Nt,bt,{force:!0})}else if(Mt){hn.debug("transition NOT ongoing but should be"),Sn.createMCURoomModeChangedEvent(bt.roomName,"mesh","sfu","ongoing"),bt.modeChangeKind="old";var Yt={};Yt.roomID=bt.roomID,Yt.roomName=bt.roomName,bt.hasOwnProperty("convId")&&(Yt.convId=bt.convId),Yt.joinSessionAnswer={failed:!1},Yt.modeChangeKind="new",this.sessionMCUs.push(Yt),this.transitionCount+=1,Kt.finalizeMeshToJanusTransition(bt,Yt,{force:!0})}if(Rt.updateCalls)if(hn.debug("update stream list (prune)"),this.updateStreamList(it,{prune:!0}),bt.roomMode==="mesh"){hn.debug("restart publish/shareScreen calls");for(var Qt=Kt.userMediaTable.slice(),on=Qt.length;--on>=0;){var nn=Qt[on];nn.sessionMCU===bt&&Kt.onHangup(nn.userMediaId,"disconnected")}}else{hn.debug("roomMode is SFU, checking calls");for(var dn=Kt.callsTable.slice(),yn=dn.length;--yn>=0;){var mn=dn[yn];mn.sessionMCU===bt&&(mn.settingUpType!=="publish"&&mn.settingUpType!=="shareScreen"||mn.data&&mn.data.mesh||mn.pc?mn.message200OKReceived===!1&&(hn.debug("restart call without 200OK received"),Kt.onHangup(mn.callId,"disconnected")):(hn.debug("restart publish/shareScreen calls with no PeerConnection"),Kt.onHangup(mn.callId,"disconnected")))}}},this.processCheckCallStatus=function(it){this.updateStreamList(it)},this.updateStreamList=function(it){for(var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=(0,ot.ki)(it,"availableStreams","array")?it.availableStreams.slice():null,wt=(0,ot.ki)(it,"availableComposite","array")?it.availableComposite.slice():null,Et=(0,ot.ki)(it,"availableReplay","array")?it.availableReplay.slice():null,Mt=this.streamList.length;--Mt>=0;){var Nt=this.streamList[Mt];if(Nt.type==="regular"){if(!bt)continue;for(var Yt=bt.length;--Yt>=0&&bt[Yt].id!==Nt.streamInfo.id;);if(Yt>=0){(0,ot.ki)(Nt,"clearDisputableEntry","function")&&Nt.clearDisputableEntry(),bt.splice(Yt,1);continue}Rt.prune===!0?((0,ot.ki)(Nt,"clearDisputableEntry","function")&&Nt.clearDisputableEntry(),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:Nt.streamInfo}),Sn.createMCURemovedStreamEvent(Nt.streamInfo.id),this.streamList.splice(Mt,1)):Nt.disputableTimeoutId||(Nt.disputableTimeoutId=setTimeout(xn.bind(this,Nt.streamInfo.id),Rn),Nt.clearDisputableEntry=Xn.bind(this,Nt.streamInfo.id),this.disputableStreamList.push(Nt))}else if(Nt.type==="composite"){if(!wt)continue;for(var Qt=wt.length;--Qt>=0&&wt[Qt].id!==Nt.streamInfo.id;);if(Qt>=0){wt.splice(Qt,1);continue}apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:Nt.streamInfo}),Sn.createMCURemovedStreamEvent(Nt.streamInfo.id),this.streamList.splice(Mt,1)}else if(Nt.type==="replay"){if(!Et)continue;for(var on=Et.length;--on>=0&&Et[on].id!==Nt.streamInfo.id;);on>=0&&Et.splice(on,1)}}if(bt)for(var nn=0;nn<bt.length;nn+=1){var dn=[];dn.push(bt[nn]);var yn=this.newAvailableStream(dn,"regular");Sn.createMCUAvailableStreamEvent(dn,yn)}if(wt)for(var mn=0;mn<wt.length;mn+=1){var Cn=[];Cn.push(wt[mn]);var En=this.newAvailableStream(Cn,"composite");Sn.createMCUAvailableCompositeEvent(Cn,En)}if(Et)for(var Wn=0;Wn<Et.length;Wn+=1){var Fn=[];Fn.push(Et[Wn]);var ar=this.newAvailableReplay(Fn);Sn.createMCUAvailableReplayEvent(Fn,ar)}},this.getStreamList=function(){return hn.debug("getStreamList :",this.streamList),this.streamList},this.getStreamFromList=function(it){var Rt;for(hn.debug("getStreamFromList() with Id :",it),hn.log("this.streamList :",this.streamList),Rt=0;Rt<this.streamList.length;Rt+=1){if(this.streamList[Rt].streamInfo.id===it)return hn.log("stream found",this.streamList[Rt].streamInfo),this.streamList[Rt].streamInfo;hn.log("not the same stream",it)}return null},this.getStreamIdOfUser=function(it){var Rt;for(hn.debug("getStreamIdOfUser() with Id :",it),hn.log("this.streamList :",this.streamList),Rt=0;Rt<this.streamList.length;Rt+=1)if(this.streamList[Rt].type!=="replay"){if(this.streamList[Rt].userId===it)return hn.log("stream found",this.streamList[Rt].streamInfo),this.streamList[Rt].streamInfo.id;hn.log("not the same userId",it)}return null},this.getStreamOfUserCall=function(it,Rt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wt=this.streamList.length,Et=!1;for((0,ot.ki)(bt,"replay","boolean")&&bt.replay===!0&&(Et=!0);--wt>=0;){if(Et===!0){if(this.streamList[wt].type!=="replay")continue}else if(this.streamList[wt].type==="replay")continue;if(this.streamList[wt].userId===it&&this.streamList[wt].streamInfo.attributes.callId===Rt)return this.streamList[wt].streamInfo}return null},this.newAvailableStream=function(it,Rt,bt){hn.debug("newAvailableStream():",it);var wt=!1,Et=!1,Mt=this.getSessionMCU(it[0].room);if(Mt){it[0].attributes.callerId!==At&&(wt=!0);for(var Nt=Kt.getCallControls(["publish","shareScreen"],{addUserMedia:!0}),Yt=0;Yt<it.length;Yt+=1){for(var Qt=this.streamList.length;--Qt>=0&&(this.streamList[Qt].type!=="regular"||it[Yt].id!==this.streamList[Qt].streamInfo.id););Qt>=0?(Et=!0,(0,ot.ki)(this.streamList[Qt],"clearDisputableEntry","function")?this.streamList[Qt].clearDisputableEntry():hn.debug("clearDisputableEntry is not set")):hn.debug("streamList is empty"),wt=!Object.prototype.hasOwnProperty.call(Nt,it[Yt].attributes.callId);var on={type:Rt,userId:it[Yt].attributes.callerId,roomId:Mt.roomName,isRemoteStream:wt,streamInfo:it[Yt]};if(Et===!0?this.streamList[Qt]=on:this.streamList.push(on),hn.log("this.streamList :",this.streamList),wt!==!0)if(Mt.roomMode==="mesh"){var nn=Kt.findUserMediaById(it[Yt].attributes.callId);nn&&nn.addAck===!0&&(delete nn.addAck,clearTimeout(nn.addTimeoutId),delete nn.addTimeoutId,Sn.createCallEstablishedEvent(Mt.roomName,nn.callType,nn.userMediaId,"none"))}else{var dn=Kt.findCallWithCallId(it[Yt].attributes.callId),yn=apiCC.getUserMediaStream(dn.callConfiguration.userMediaStreamId);if(dn&&yn)for(var mn=0,Cn=["audioMuted","videoMuted"];mn<Cn.length;mn++){var En=Cn[mn],Wn=En==="audioMuted"?"audio":"video";yn[En]!==it[Yt][En]&&yn.notifyMLineMutedCall(Wn,yn[En],"enabled",dn,null)}}var Fn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:it[Yt]});if(Fn&&!Fn.autoRestart.pending){hn.info("[newAvailableStream] auto subscribing to stream");var ar=!!Fn.autoRestart.force;delete Fn.autoRestart.force;var or=Fn.callId,nr=Kt.findCallWithCallId(or);nr!==null&&nr.sessionMCU!==null&&nr.sessionMCU.modeChangeKind==="old"&&(hn.debug("Re-init of autoRestart.counter"),delete Fn.autoRestart.counter);var ur=this.subscribeToStreams([it[Yt]],Fn.mediaType,Fn.data,Fn.callConfiguration,{noStreamCheck:!0,force:ar});or&&ur[0]&&Sn.createCallRestartingEvent(Fn.callType,Fn.audioOnly,or,ur[0],"subscribe",apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Fn.roomName,Fn.roomName,it[Yt].id)}if(Et!==!0&&(0,ot.Ym)(bt,"function")&&bt(wt,it[Yt],Rt),it[Yt].context!==void 0&&it[Yt].context.remoteAccessCtx!==void 0){var mr=it[Yt].context.remoteAccessCtx.invitationId;hn.debug("remoteAccess stream for invitationId : ",mr),apiRTC.session.remoteAccessInvitation!==null&&mr===apiRTC.session.remoteAccessInvitation.id&&wt===!0?(hn.debug("Setting screenSharingStreamId for remote"),apiRTC.session.remoteAccessInvitation.screenSharingStreamId=it[Yt].id,hn.debug("apiRTC.session.remoteAccessInvitation.screenSharingStreamId :",apiRTC.session.remoteAccessInvitation.screenSharingStreamId),apiRTC.session.remoteAccessInvitation.screenWidth=it[Yt].context.remoteAccessCtx.screenWidth,apiRTC.session.remoteAccessInvitation.screenHeight=it[Yt].context.remoteAccessCtx.screenHeight):hn.debug("Stream not linked to remoteAccessInvitation or this is localStream")}}return wt}hn.debug("newAvailableStream() but client is not in session")},this.updateAvailableStream=function(it,Rt,bt){hn.info("updateAvailableStream():",it);var wt=!1;if(this.getSessionMCU(it[0].room)){it[0].attributes.callerId!==At&&(wt=!0);for(var Et=0;Et<it.length;Et+=1)for(var Mt=this.streamList.length;--Mt>=0;)if(this.streamList[Mt].streamInfo.id===it[Et].id){for(var Nt=[],Yt=0,Qt=["audio","audioMuted","video","videoMuted"];Yt<Qt.length;Yt++){var on=Qt[Yt];this.streamList[Mt].streamInfo[on]!==it[Et][on]&&(this.streamList[Mt].streamInfo[on]=it[Et][on],Nt.push(on))}this.streamList[Mt].streamInfo.attributes.callType!==it[Et].attributes.callType&&(this.streamList[Mt].streamInfo.attributes.callType=it[Et].attributes.callType,Nt.push("callType")),this.streamList[Mt].streamInfo.attributes.descriptor&&it[Et].attributes.descriptor&&this.streamList[Mt].streamInfo.attributes.descriptor.priority!==it[Et].attributes.descriptor.priority&&(this.streamList[Mt].streamInfo.attributes.descriptor.priority=it[Et].attributes.descriptor.priority,Nt.push("priority")),Nt.length>0&&(0,ot.Ym)(bt,"function")&&bt(wt,it[Et],Rt,Nt);break}return wt}hn.log("updateAvailableStream() but client is not in session")},this.newAvailableReplay=function(it){hn.info("newAvailableReplay() :",it);var Rt=!1,bt=this.getSessionMCU(it[0].room);if(bt){it[0].attributes.callerId!==At&&(Rt=!0);for(var wt=0;wt<it.length;wt+=1){var Et={type:"replay",userId:it[wt].attributes.callerId,roomId:bt.roomName,isRemoteStream:Rt,streamInfo:it[wt]};this.streamList.push(Et)}return Rt}hn.log("newAvailableReplay() but client is not in session")},this.subscribeToStreams=function(it,Rt,bt,wt){var Et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};hn.info("subscribeToStreams():",it);var Mt,Nt,Yt=[],Qt=null,on=null,nn=null,dn=function(mn){return setTimeout(function(){hn.warn("invite + SDP offer not received -> restart call"),Kt.onHangup(mn,"disconnected")},15e3)};for(nn in it){if(Mt=it[nn],apiCC.session===null||apiCC.session===void 0)return hn.debug("no session, leaving subscribeToStreams()"),Yt;if((Qt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(Mt.id,{ignoreModeChangeKindOld:!0}))!==null){if(hn.debug("call already exists"),Et.force!==!0){Yt[nn]=Qt.callId;continue}hn.debug("Force is true")}else hn.debug("call does not exist");for(Nt=this.streamList.length;--Nt>=0&&this.streamList[Nt].streamInfo.id!==Mt.id;);if(Nt>=0){if(hn.debug("stream exists"),this.streamList[Nt].disputableTimeoutId){hn.debug("stream temporarily not available"),Yt[nn]=null,Et.autoSub===!0&&((on=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:Mt}))||apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:Mt.room,mediaType:Rt,callConfiguration:wt,data:bt,stream:Mt}));continue}}else if(hn.debug("stream does not exist"),Et.noStreamCheck!==!0){Yt[nn]=null,Sn.createErrorEvent("stream not available","STREAM_NOT_AVAILABLE",null,Mt.room,null,{stream:Mt});continue}hn.info("stream:",Mt);var yn=this.getSessionMCU(Mt.room);yn&&((on=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:Mt}))||(on=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:yn.roomName,mediaType:Rt,callConfiguration:wt,data:bt,stream:Mt})),Mt.attributes.callType!=="COMPOSITE"&&this.pubConnector==="janusConnector"?(bt===void 0&&(bt={}),bt.mesh&&delete bt.mesh,(0,ot.Ym)(wt,"qos","object")?(bt.qos={},wt.qos.videoForbidInactive===!1?bt.qos.videoForbidInactive=!1:bt.qos.videoForbidInactive=!0):(bt.qos={},bt.qos.videoForbidInactive=!0),(0,ot.Ym)(wt,"simulcast","object")&&(bt.simulcast={},wt.simulcast.streamQuality&&(wt.simulcast.streamQuality==="high"?bt.simulcast.substream=2:wt.simulcast.streamQuality==="medium"?bt.simulcast.substream=1:wt.simulcast.streamQuality==="low"&&(bt.simulcast.substream=0)),wt.simulcast.streamFrameRate&&(wt.simulcast.streamFrameRate==="high"?bt.simulcast.temporal=2:wt.simulcast.streamFrameRate==="medium"?bt.simulcast.temporal=1:wt.simulcast.streamFrameRate==="low"&&(bt.simulcast.temporal=0))),(Qt=new gn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Qt.callControl=on,(0,ot.ki)(Qt.callControl.autoRestart,"counter","number")?(Qt.callControl.autoRestart.counter+=1,Qt.restarted=!0):Qt.callControl.autoRestart.counter=0,Qt.settingUpType="subscribe",wt!=null&&wt.turnServerAddress!==void 0&&wt.turnServerAddress!==null&&Qt.setCallTurnServer(wt.turnServerAddress),Qt.generateCallId(),on.callId=Qt.callId,Qt.setupTimeoutId=dn(Qt.callId),Qt.callerId=yn.roomName,Qt.calleeId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Qt.callee=!0,Qt.mcuRemoteStream=Mt,Qt.dest_roomId=yn.roomName,Qt.callType=Mt.attributes.callType,Qt.callControl.callType=Mt.attributes.callType,Mt.attributes.callType!=="audio"&&Rt!=="AUDIOONLY"||(Qt.audioOnly=!0,Qt.callControl.audioOnly=!0),Qt.remoteId=Mt.attributes.callerId,Qt.remoteMailAddress=Mt.attributes.mailAddress,Qt.streamId=Mt.id,Qt.mediaType=Rt,Qt.sessionMCU=yn,hn.log("call.streamId: "+Qt.streamId),(0,ot.Ym)(bt,"object")?Qt.data=(0,ot.ws)({},bt):Qt.data={},Qt.data.pubSub="janusConnector",Qt.data.type="subscribe",Qt.data.mode="passive",Qt.data.mediaType=Rt,Qt.data.capabilities=this.browserCapabilities,Qt.data.cloudConvId=yn.convId,Qt.data.instanceId=Qt.instanceId,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Qt),Yt[nn]=Qt.callId,Qt.myWebRTC_Stack.sendInvite(Qt.callId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,yn.roomName,yn.roomName,Mt.attributes.callType,{mode:"passive",data:Qt.data,stream:Mt,volatile:!!Qt.restarted})):((Qt=new gn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Qt.callControl=on,(0,ot.ki)(Qt.callControl.autoRestart,"counter","number")?(Qt.callControl.autoRestart.counter+=1,Qt.restarted=!0):Qt.callControl.autoRestart.counter=0,Qt.settingUpType="subscribe",wt!=null&&wt.turnServerAddress!==void 0&&wt.turnServerAddress!==null&&Qt.setCallTurnServer(wt.turnServerAddress),bt===void 0&&(bt={}),Qt.data=bt,Qt.data.pubSub=this.pubConnector,Qt.data.type="subscribe",Qt.data.capabilities=this.browserCapabilities,Qt.data.cloudConvId=yn.convId,Qt.data.instanceId=Qt.instanceId,hn.log("mediaType: ",Rt),hn.log("stream.attributes.callType: ",Mt.attributes.callType),Qt.callType=Mt.attributes.callType,Qt.callControl.callType=Mt.attributes.callType,Mt.attributes.callType==="COMPOSITE"&&this.pubConnector==="janusConnector"||Mt.attributes.callType==="audio"||Rt==="AUDIOONLY"?(hn.log("Setting call as audioOnly"),Qt.audioOnly=!0,Qt.callControl.audioOnly=!0,Qt.stripVideoSDPActivated=!0):Rt==="VIDEOONLY"&&(Qt.stripAudioSDPActivated=!0,Qt.callType="videoOnly",Qt.callControl.callType="videoOnly"),Qt.mcuRemoteStream=Mt,Qt.dest_roomId=yn.roomName,Qt.calleeId=yn.roomName,Qt.generateCallId(),on.callId=Qt.callId,Qt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Qt.sessionMCU=yn,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Qt),Qt.createPeerConnection(),Qt.doCall(),Qt.started=!0,Qt.callType=Mt.attributes.callType,Qt.remoteId=Mt.attributes.callerId,Qt.remoteMailAddress=Mt.attributes.mailAddress,Mt.audio===!0?Mt.video===!0?Qt.destCallType="media":Qt.destCallType="audio":Mt.video===!0&&(Qt.destCallType="videoOnly"),Mt.id===void 0&&hn.log("stream.id is undefined :",Mt),Qt.streamId=Mt.id,Qt.mediaType=Rt,hn.log("stream.attributes.callType: ",Mt.attributes.callType),Yt[nn]=Qt.callId),Qt.asyncCallbacks={},Qt.asyncCallbacks.type="subscribe")}return Yt},this.unsubscribe=function(it){hn.info("unsubscribe() :",it);var Rt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(it);Rt===null?hn.log("error call not found on unsubscribe"):Rt.callId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Rt.callId)},this.publish=function(it,Rt,bt,wt,Et,Mt){hn.info("publish roomName :",it),hn.log("publish sessionId :",Rt),hn.log("publish token :",bt),hn.log("publish callConfiguration :",wt);var Nt=null,Yt=!1,Qt=!1,on=null,nn=null,dn=this.getSessionMCU(it);if(!dn)return hn.error("roomName does not match any sessionMCU"),null;if(Et!==null&&In(Et)==="object"||(Et={}),this.pubConnector==="janusConnector"&&!Et.mesh&&Mt&&Mt.callControl&&Mt.callControl.callId&&apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Mt.callControl.callId))return hn.debug("call already exists",Mt.callControl.callId),Mt.callControl.callId;if(wt===!0||wt==="true"?(hn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Yt=!0,wt={}):wt===!1||wt==="false"?(hn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),wt={}):wt!==null&&In(wt)==="object"||(wt={}),wt.audioOnly===!0&&wt.videoOnly===!0)return Sn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,it),null;if(wt.audioOnly===!0&&(Yt=!0),wt.videoOnly===!0&&(Qt=!0),["audioOnly","videoOnly","record","private"].forEach(function(mn){wt.hasOwnProperty(mn)&&((0,ot.ki)(Et,"callConfiguration","object")||(Et.callConfiguration={}),Et.callConfiguration[mn]=wt[mn])}),dn.convId&&(Et.cloudConvId=dn.convId),(0,ot.Ym)(wt,"qos","object")?(Et.qos={},wt.qos.videoMinBitrate?Et.qos.videoMinBitrate=wt.qos.videoMinBitrate:wt.qos.videoMinQuality&&["excellent","good","medium","bad"].indexOf(wt.qos.videoMinQuality)>=0?Et.qos.videoMinQuality=wt.qos.videoMinQuality:Et.qos.videoMinQuality="bad",wt.qos.videoStartBitrate?Et.qos.videoStartBitrate=wt.qos.videoStartBitrate:wt.qos.videoStartQuality&&["upper","excellent","good","medium","bad"].indexOf(wt.qos.videoStartQuality)>=0&&(Et.qos.videoStartQuality=wt.qos.videoStartQuality),wt.qos.videoForbidInactive===!1?Et.qos.videoForbidInactive=!1:Et.qos.videoForbidInactive=!0):Et.qos={videoMinQuality:"bad",videoForbidInactive:!0},wt.simulcast&&(wt.userMediaStreamId&&(nn=apiCC.getUserMediaStream(wt.userMediaStreamId))&&nn.isSimulcastCompliant()||delete wt.simulcast),function(mn){if(!(0,ot.ki)(mn,"simulcast","object")||ot.wL.type==="safari"&&mn.simulcast.mode!=="SDP")return delete mn.simulcast,!1;delete mn.simulcast.sendEncodings,(0,ot.ki)(mn.simulcast,"maxBitrate","number")?ot.wL.type==="chrome"&&ot.wL.version>=78&&mn.simulcast.mode!=="SDP"?(hn.debug("configure simulcast RID chrome maxBitrate"),!rr(mn.simulcast,mn.simulcast.maxBitrate)&&(hn.warn("cannot configure simulcast"),delete mn.simulcast)):ot.wL.type==="firefox"?(hn.debug("configure simulcast RID firefox maxBitrate"),!rr(mn.simulcast,mn.simulcast.maxBitrate)&&(hn.warn("cannot configure simulcast"),delete mn.simulcast)):delete mn.simulcast.encodings:(0,ot.ki)(mn.simulcast,"encodings","object")?ot.wL.type==="chrome"&&ot.wL.version>=78&&mn.simulcast.mode!=="SDP"?(hn.debug("configure simulcast RID chrome encodings"),!Un(mn.simulcast)&&(hn.warn("cannot configure simulcast"),delete mn.simulcast)):ot.wL.type==="firefox"?(hn.debug("configure simulcast RID firefox encodings"),!Un(mn.simulcast)&&(hn.warn("cannot configure simulcast"),delete mn.simulcast)):delete mn.simulcast.encodings:ot.wL.type==="chrome"&&ot.wL.version>=78&&mn.simulcast.mode!=="SDP"?(hn.debug("configure simulcast RID chrome default"),mn.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!Un(mn.simulcast)&&delete mn.simulcast):ot.wL.type==="firefox"&&(hn.debug("configure simulcast RID firefox default"),mn.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!Un(mn.simulcast))&&delete mn.simulcast}(wt),wt.distributedBroadcastEnabled&&!wt.simulcast&&(Et.distributedBroadcastEnabled=!0),["audioLabels","videoLabels"].forEach(function(mn){(0,ot.Ym)(wt[mn],"array")&&(Et[mn]=[],wt[mn].forEach(function(Cn){(0,ot.Ym)(Cn,"string")&&Et[mn].push(Cn)}))}),(0,ot.Ym)(wt,"context","object"))try{JSON.stringify(wt.context),Et.context=wt.context}catch{}if((0,ot.Ym)(wt,"profileType","string")&&(Et.profileType=wt.profileType),(0,ot.Ym)(wt,"priority","number")&&wt.priority>=0&&(Et.priority=wt.priority),(0,ot.Ym)(wt,"downgradeProfileList","array")&&(Et.downgradeProfileList=wt.downgradeProfileList),hn.debug("callConfiguration; audioOnly: "+Yt+", videoOnly: "+Qt),Mt&&Mt.forceScreenSharingCallType===!0)hn.debug("publish screenSharing");else if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return hn.debug("publish without any device, leaving publish ..."),Et.publishWithoutMediaDeviceDetected=!0,apiCC.session.setUserData(Et),Sn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,it),null;Yt!==!0&&(hn.debug("publish video, but no webcam present, forcing callType to audio"),Yt=!0)}else apiCC.mediaDeviceMgr.audioDevicePresent===!1&&Qt!==!0&&(hn.debug("publish video, but no microphone present, forcing callType to videoOnly"),Qt=!0);if(Nt=new gn(apiCC.session.apiCCWebRTCClient.webRTCClient),Et.mesh!==void 0&&Et.instanceId!==void 0?(hn.debug("keeping instanceId "),Nt.instanceId=Et.instanceId):Nt.instanceId=apiCC.generateInstanceId(),this.pubConnector!=="janusConnector"||Et.mesh?(Nt.settingUpType="publish",Nt.generateCallId()):(Nt.settingUpType="publish",Mt&&Mt.callControl?(Nt.callControl=Mt.callControl,Nt.callControl.autoRestart.counter+=1,Nt.callId=Nt.callControl.callId,Nt.restarted=!0):(Nt.callControl=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"publish",roomName:it,callConfiguration:wt,data:Et}),Nt.callControl.sessionId=Rt,Nt.callControl.token=bt,Nt.callControl.autoRestart.counter=0,Nt.generateCallId(),Nt.callControl.callId=Nt.callId)),wt!=null&&wt.turnServerAddress!==void 0&&wt.turnServerAddress!==null&&Nt.setCallTurnServer(wt.turnServerAddress),wt.userMediaStreamId&&((nn=apiCC.getUserMediaStream(wt.userMediaStreamId))?(Nt.callType=nn.callType,hn.debug("Setting callType to "+Nt.callType),Nt.callType==="screenSharing"&&(Nt.screenSharing=!0)):(hn.debug("callConfiguration.userMediaStreamId is setted but stream is not present"),delete wt.userMediaStreamId)),Nt.data=Et,Nt.data.instanceId=Nt.instanceId,Rt==="restarted"&&(Nt.restarted=!0),Nt.mediaTypeForIncomingCall="NONE",Yt===!0?(hn.log("Setting call as audioOnly"),Nt.audioOnly=!0,Nt.callType="audio",Nt.mediaTypeForOutgoingCall="AUDIO"):Qt===!0?(hn.log("Setting call as videoOnly"),Nt.callType="videoOnly",Nt.mediaTypeForOutgoingCall="VIDEOONLY"):hn.log("Not Setting call as audioOnly nor videoOnly"),Nt.dest_roomId=dn.roomName,Nt.calleeId=dn.roomName,Nt.data.pubSub=this.pubConnector,Nt.data.type="publish",Nt.data.capabilities=this.browserCapabilities,Nt.data.cloudConvId=dn.convId,Nt.callConfiguration=wt,Nt.sessionMCU=dn,Nt.setMediaConstraintsToSendOnlyOffer(),Nt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,(0,ot.Ym)(wt,"simulcast","object")){var yn=null;nn&&(yn=nn.getSimulcastProfile()),ot.wL.type==="chrome"&&ot.wL.version>=78&&wt.simulcast.mode!=="SDP"?(hn.debug("simulcast chrome 78+ -> RID",wt.simulcast),Nt.simulcast="RID",Nt.data.simulcast={enabled:!0,mode:"RID"},Nt.data.simulcast.encodings=Object.assign({},wt.simulcast.encodings),yn&&(Nt.data.simulcast.profile=yn)):ot.wL.type==="chrome"?(hn.debug("simulcast chrome -> SDP",wt.simulcast),Nt.simulcast="SDP",Nt.data.simulcast={enabled:!0,mode:"SDP"}):ot.wL.type==="firefox"?(hn.debug("simulcast firefox -> RID",wt.simulcast),Nt.simulcast="RID",Nt.data.simulcast={enabled:!0,mode:"RID"},Nt.data.simulcast.encodings=Object.assign({},wt.simulcast.encodings),yn&&(Nt.data.simulcast.profile=yn)):ot.wL.type==="safari"&&(hn.debug("simulcast safari -> SDP",wt.simulcast),Nt.simulcast="SDP",Nt.data.simulcast={enabled:!0,mode:"SDP"})}return hn.log("webRTCClient.accessToLocalMedia :",Kt.accessToLocalMedia),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Nt),this.publishCallId=Nt.callId,Nt.callControl&&Nt.callControl.autoRestart.stream&&hn.debug("call.callControl.autoRestart.stream.active :",Nt.callControl.autoRestart.stream.active),this.pubConnector==="janusConnector"&&Nt.callControl&&Nt.callControl.autoRestart.stream&&Nt.callControl.autoRestart.stream.active?(apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Nt.callLocalStream=Nt.callControl.autoRestart.stream,Nt.establishCall(),Nt.callId):(Et.mesh!==void 0&&(on=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Et.mesh.calleeCallId))!==null&&on.callConfiguration&&on.callConfiguration.userMediaStreamId&&(Nt.callType=on.callType,wt.userMediaStreamId=on.callConfiguration.userMediaStreamId),wt.userMediaStreamId?((nn=apiCC.getUserMediaStream(wt.userMediaStreamId)).addCallInfo(Nt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&Nt.callControl&&(Nt.callControl.autoRestart.stream=nn.stream),Nt.callConfiguration.userMediaStreamId=nn.userMediaStreamId,Nt.callLocalStream=nn.stream,Nt.establishCall(),Nt.callId):apiCC.userMediaStreamTable.length>0?((nn=apiCC.userMediaStreamTable[0]).addCallInfo(Nt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&Nt.callControl&&(Nt.callControl.autoRestart.stream=nn.stream),Nt.callConfiguration.userMediaStreamId=nn.userMediaStreamId,Nt.callLocalStream=nn.stream,Nt.establishCall(),Nt.callId):(apiCC.createUserMediaStream({callId:Nt.callId,type:Nt.callType,audioSourceId:Kt.audioSourceId,videoSourceId:Kt.videoSourceId,success:function(mn){hn.debug("[publish] success; userMediaStreamId: "+mn.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Nt.callControl&&(Nt.callControl.autoRestart.stream=mn.stream),Nt.callConfiguration.userMediaStreamId=mn.userMediaStreamId,Nt.callLocalStream=mn.stream,Nt.establishCall()}}),Nt.callId))},this.publishScreen=function(it,Rt,bt,wt){hn.info("publishScreen()");var Et=this.getSessionMCU(it);return Et?(Rt==null&&(Rt={}),bt==null&&(bt={}),bt.record!==void 0&&(Rt.callConfiguration!==void 0||(Rt.callConfiguration={}),Rt.callConfiguration.record=bt.record),bt.private!==void 0&&(Rt.callConfiguration!==void 0||(Rt.callConfiguration={}),Rt.callConfiguration.private=bt.private),Rt.pubSub=this.pubConnector,Rt.type="publish",apiCC.session.apiCCWebRTCClient.webRTCClient.shareScreen(Et.roomName,Rt,wt,bt)):(hn.error("roomId does not match any sessionMCU"),null)},this.unpublish=function(it){hn.info("unpublish call with callId :",it),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(it),this.publishCallId=null},this.removeMCUStream=function(it,Rt,bt){var wt,Et=!1;for(bt!=="Broken_by_MCU"&&bt!=="disconnected"||(Et=!0),hn.debug("streamId:",Rt),hn.debug("reason:",bt),hn.debug("quiet:",Et),wt=0;wt<this.streamList.length;wt+=1)if(hn.log("this.streamList[i].streamInfo.id :",this.streamList[wt].streamInfo.id),this.streamList[wt].streamInfo.id===Rt){Et===!0?(hn.debug("add stream into disputableStreamList: ",Rt),this.streamList[wt].disputableTimeoutId=setTimeout(xn.bind(this,this.streamList[wt].streamInfo.id),Rn),this.streamList[wt].clearDisputableEntry=Xn.bind(this,this.streamList[wt].streamInfo.id),this.disputableStreamList.push(this.streamList[wt])):(hn.debug("remove stream from streamList:",Rt),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:this.streamList[wt].streamInfo}),this.streamList.splice(wt,1));break}it!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(it),Et!==!0&&Sn.createMCURemovedStreamEvent(Rt)},this.startStreaming=function(it,Rt,bt,wt){hn.info("startStreaming");var Et,Mt,Nt=it!=null&&it.length>0,Yt=Rt!=null&&Rt.length>0,Qt={};if(!Nt&&!Yt||bt==null||bt.length===0)return!1;if(wt===void 0){if(this.publishCallId===null)return hn.log("Cannot start streaming as no stream is published"),!1;wt=this.publishCallId}var on=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(wt);return on||(on=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(wt))?on.sessionMCU?(Nt||(it="custom"),Qt.pubSub=this.pubConnector,Qt.service=it,Yt&&(Qt.server=Rt),Qt.streamKey=bt,hn.log("startStreaming() on ApiRTC MCU with roomId:",on.sessionMCU.roomName),Et={type:"startStreaming",roomId:on.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:wt,data:Qt},Mt=JSON.stringify(Et),hn.log("C->S: "+Mt),apiCC.session.channel.socket.emit("startStreaming",Mt),!0):(hn.error("no such sessionMCU"),!1):(hn.error("callIdToStream does not match any call"),!1)},this.stopStreaming=function(it){var Rt,bt;if(hn.info("stopStreaming"),it===void 0){if(this.publishCallId===null)return hn.log("Cannot stop streaming as no stream is published"),!1;it=this.publishCallId}var wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(it);if(!wt)return hn.error("callIdToStream does not match any call"),!1;var Et=this.getSessionMCU(wt.dest_roomId);return Et?(hn.log("stopStreaming() on ApiRTC MCU with roomId:",Et.roomName),Rt={type:"stopStreaming",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:it,data:{pubSub:this.pubConnector}},bt=JSON.stringify(Rt),hn.log("C->S: "+bt),apiCC.session.channel.socket.emit("stopStreaming",bt),!0):(hn.error("dest_roomId does not match any sessionMCU"),!1)},this.startRecording=function(it,Rt,bt,wt,Et){var Mt,Nt;if(hn.info("startRecording"),wt==null){if(this.publishCallId===null)return void hn.log("Call recording can not start as stream is not published");wt=this.publishCallId}var Yt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(wt);return Yt||(Yt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(wt))?Yt.sessionMCU?(it!=="AUDIO-ONLY"&&it!=="VIDEO-ONLY"&&(it="AUDIO-VIDEO"),Et==null&&(Et={}),Et.pubSub=this.pubConnector,hn.log("startRecording() on ApiRTC MCU with roomId :",Yt.sessionMCU.roomName),Mt={type:"startRecording",roomId:Yt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:wt,data:Et,customIdInFilename:Rt,mediaType:it,convId:bt},Nt=JSON.stringify(Mt),hn.log("C->S: "+Nt),void apiCC.session.channel.socket.emit("startRecording",Nt)):(hn.error("no such sessionMCU"),!1):(hn.error("callIdToRecord does not match any call"),!1)},this.stopRecording=function(it){var Rt,bt;if(hn.info("stopRecording"),it===void 0){if(this.publishCallId===null)return void hn.log("Call recording can not stop as stream is not published");it=this.publishCallId}var wt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(it);if(!wt)return hn.error("callIdToRecord does not match any call"),!1;var Et=this.getSessionMCU(wt.dest_roomId);if(!Et)return hn.error("dest_roomId does not match any sessionMCU"),!1;hn.log("stopRecording() on ApiRTC MCU with roomId :",Et.roomName),Rt={type:"stopRecording",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:it,data:{pubSub:this.pubConnector}},bt=JSON.stringify(Rt),hn.log("C->S: "+bt),apiCC.session.channel.socket.emit("stopRecording",bt)},this.recordingStarted=function(it){hn.info("recordingStarted:",it),Sn.createMCURecordingStartedEvent(it.roomName,it.callId,it.clientId,it.recordType,it.time,it.convId,it.mediaId,it.mediaURL,it.remoteId,it.recordedFileName,it.mediaType,it.descriptor)},this.recordingStopped=function(it){hn.info("recordingStopped:",it),Sn.createMCURecordingStoppedEvent(it.roomName,it.callId,it.clientId,it.recordType,it.time,it.convId,it.mediaId,it.mediaURL,it.remoteId,it.recordedFileName,it.mediaType,it.descriptor)},this.recordingStreamAvailable=function(it){hn.info("recordingStreamAvailable :",it),Sn.createMCURecordedStreamsAvailableEvent(it.roomName,it.callId,it.clientId,it.recordedFileName,it.convId,it.mediaId,it.mediaURL,it.recordType,it.remoteId,it.mediaType,it.descriptor),this.pubConnector==="janusConnector"&&it.hasOwnProperty("confId")&&it.hasOwnProperty("remoteId")&&Sn.createRecordedStreamsAvailableEvent(it.confId,it.clientId,it.remoteId,it.callId,it.convId,it.mediaId,it.mediaURL)},this.streamingStarted=function(it){hn.info("streamingStarted: ",it),Sn.createMCUStreamingStartedEvent(it.roomName,it.callId,it.clientId,it.time)},this.streamingStopped=function(it){hn.info("streamingStopped: ",it),Sn.createMCUStreamingStoppedEvent(it.roomName,it.callId,it.clientId,it.time)},this.startComposite=function(it){var Rt,bt,wt;(wt=it?this.getSessionMCU(it):this.getSessionMCU(null,{first:!0}))?(hn.log("startComposite() on ApiRTC MCU with roomId :",wt.roomName),Rt={type:"startComposite",roomId:wt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},bt=JSON.stringify(Rt),hn.log("C->S: "+bt),apiCC.session.channel.socket.emit("startComposite",bt)):hn.log("startComposite() but client is not in session")},this.stopComposite=function(it){var Rt,bt,wt;(wt=it?this.getSessionMCU(it):this.getSessionMCU(null,{first:!0}))?(hn.log("stopComposite() on ApiRTC MCU with roomId :",wt.roomName),Rt={type:"stopComposite",roomId:wt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},bt=JSON.stringify(Rt),hn.log("C->S: "+bt),apiCC.session.channel.socket.emit("stopComposite",bt)):hn.log("stopComposite() but client is not in session")},this.startCompositeRecording=function(it,Rt,bt,wt,Et){hn.info("startCompositeRecording with convId :",bt);var Mt,Nt,Yt;(Yt=Et?this.getSessionMCU(Et):this.getSessionMCU(null,{first:!0}))?(it!=="AUDIO-ONLY"&&it!=="VIDEO-ONLY"&&(it="AUDIO-VIDEO"),(wt=(0,ot.Ym)(wt,"object")?(0,ot.ws)({},wt):{}).pubSub=this.pubConnector,["complete","efficient","audioOnly"].indexOf(wt.mode)<0&&(wt.mode="complete"),wt.labelEnabled=wt.labelEnabled===!0,(0,ot.Ym)(wt,"labels","array")||(wt.labels=["microphone","camera","screenSharing","sip"]),hn.log("startRecording() on ApiRTC MCU with roomId :",Yt.roomName),Mt={type:"startRecording",roomId:Yt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:wt,customIdInFilename:Rt,mediaType:it,convId:bt},Nt=JSON.stringify(Mt),hn.log("C->S: "+Nt),apiCC.session.channel.socket.emit("startRecording",Nt)):hn.log("startCompositeRecording() but client is not in session")},this.stopCompositeRecording=function(it){hn.info("stopCompositeRecording");var Rt,bt,wt;(wt=it?this.getSessionMCU(it):this.getSessionMCU(null,{first:!0}))?(hn.log("stopRecording() on ApiRTC MCU with roomId :",wt.roomName),Rt={type:"stopRecording",roomId:wt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:{pubSub:this.pubConnector}},bt=JSON.stringify(Rt),hn.log("C->S: "+bt),apiCC.session.channel.socket.emit("stopRecording",bt)):hn.log("stopCompositeRecording() but client is not in session")},this.inviteVoIP=function(it,Rt,bt){var wt=this;return new Promise(function(Et,Mt){if(!it||typeof it!="string")return Mt(new Error("wrong roomId"));if(!wt.getSessionMCU(it))return Mt(new Error("no such session"));if(!Rt||typeof Rt!="string")return Mt(new Error("wrong convId"));if(!bt||typeof bt!="string")return Mt(new Error("wrong phoneNumber"));var Nt="inviteVoIP-"+bt;try{if(Kt.hasReceiptHook(Nt))return Mt(new Error("busy"));var Yt=new Ut;Yt.onSuccess(function(){return Et()}),Yt.onFailure(function(nn){return Mt(nn)}),Yt.setTimeout(1e4,"timeout"),Kt.createReceiptHook(Nt,Yt)}catch(nn){return hn.debug("inviteVoIP: createReceiptHook",nn),Mt(new Error("internal error"))}var Qt={type:"inviteVoIP",clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:it,convId:Rt,phoneNumber:bt,receiptId:Nt,data:{pubSub:"sipConnector"}},on=JSON.stringify(Qt);hn.debug("C->S:",on),apiCC.session.channel.socket.emit("inviteVoIP",on)})},this.enforceMCU=function(it){var Rt;if(Rt=it?this.getSessionMCU(it):this.getSessionMCU(null,{first:!0})){var bt={type:"info",infoType:"enforceMCU",data:{clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:Rt.roomName,pubSub:this.pubConnector}},wt=JSON.stringify(bt);hn.log("C->S: "+wt),apiCC.session.channel.socket.emit("info",wt)}else hn.log("enforceMCU() but client is not in session")},this.meshPublish=function(it,Rt,bt,wt,Et,Mt){var Nt=!1,Yt=null,Qt=null,on=this.getSessionMCU(it);if(!on)return hn.error("meshPublish() - missing sessionMCU"),null;if(wt===!0||wt===!1||wt==="true"||wt==="false"?(hn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Nt=wt,wt={}):wt!==null&&In(wt)==="object"||(wt={}),Et!==null&&In(Et)==="object"||(Et={}),(0,ot.Ym)(wt,"profileType","string")&&(Et.profileType=wt.profileType),(0,ot.Ym)(wt,"priority","number")&&wt.priority>=0&&(Et.priority=wt.priority),(0,ot.Ym)(wt,"downgradeProfileList","array")&&(Et.downgradeProfileList=wt.downgradeProfileList),wt.audioOnly!==void 0&&(Nt=wt.audioOnly,Et.callConfiguration!==void 0||(Et.callConfiguration={}),Et.callConfiguration.audioOnly=wt.audioOnly),(0,ot.Ym)(wt,"context","object"))try{JSON.stringify(wt.context),Et.context=wt.context}catch{}return Yt=new Tn(apiCC.session.apiCCWebRTCClient.webRTCClient),Nt!==!0&&Nt!=="true"||(hn.log("Setting call as audioOnly"),Yt.callType="audio"),Yt.roomId=it,Yt.sessionId=Rt,Yt.token=bt,Yt.callConfiguration=wt,Yt.data=Et,Yt.options=Mt,Yt.sessionMCU=on,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(Yt),wt.userMediaStreamId?((Qt=apiCC.getUserMediaStream(wt.userMediaStreamId)).addCallInfo(Yt.userMediaId,"userMedia"),Yt.callConfiguration.userMediaStreamId=Qt.userMediaStreamId,Yt.callType=Qt.callType,Yt.audio=Qt.audio,Yt.video=Qt.video,Yt.audioMuted=Qt.audioMuted,Yt.videoMuted=Qt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Yt),apiCC.checkMutingStateForUserMedia(wt,Qt)):apiCC.createUserMediaStream({callId:Yt.userMediaId,callFlavor:"userMedia",type:Yt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(nn){hn.debug("[meshPublish] success; userMediaStreamId: "+nn.userMediaStreamId),Yt.callConfiguration.userMediaStreamId=nn.userMediaStreamId,Yt.callType=nn.callType,Yt.audio=nn.audio,Yt.video=nn.video,Yt.audioMuted=nn.audioMuted,Yt.videoMuted=nn.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Yt),apiCC.checkMutingStateForUserMedia(wt,nn)}}),Yt.userMediaId},this.meshOnUserMediaSuccess=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],bt=null,wt=null;Rt===!0?((bt={}).type="streamStatusChanged",bt.callerId=Kt.clientId,bt.roomId=it.roomId,bt.streams={},bt.streams[it.userMediaId]={eventType:"modify",callId:it.userMediaId,callType:it.callType,audio:it.audio,video:it.video,audioMuted:it.audioMuted,videoMuted:it.videoMuted},bt.data={},bt.data.meshPublish=!0,bt.data.pubSub=this.pubConnector,wt=JSON.stringify(bt),hn.log("C->S: "+wt),apiCC.session.channel.socket.emit("streamStatusChanged",wt)):(this.publishCallId=it.userMediaId,it.addAck=!0,it.addTimeoutId=setTimeout(function(){Kt.onRemoteHangup(it.userMediaId,Kt.clientId,it.roomId,"Unable_to_establish",null,null)},it.disconnectionTimer),(bt={}).type="streamStatusChanged",bt.callerId=Kt.clientId,bt.roomId=it.roomId,bt.streams={},bt.streams[it.userMediaId]={eventType:"add",callId:it.userMediaId,callType:it.callType,audio:it.audio,video:it.video,audioMuted:it.audioMuted,videoMuted:it.videoMuted},bt.data=it.data,bt.data.meshPublish=!0,bt.data.pubSub=this.pubConnector,wt=JSON.stringify(bt),hn.log("C->S: "+wt),apiCC.session.channel.socket.emit("streamStatusChanged",wt))},this.meshPublishScreen=function(it,Rt,bt,wt,Et){var Mt=null,Nt=null,Yt=this.getSessionMCU(it);return Yt?(bt!==null&&In(bt)==="object"||(bt={}),(Mt=new Tn(apiCC.session.apiCCWebRTCClient.webRTCClient)).roomId=it,Mt.data=Rt,Mt.callConfiguration=bt,Mt.captureSourceType=wt,Mt.sessionMCU=Yt,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(Mt),bt.userMediaStreamId?((Nt=apiCC.getUserMediaStream(bt.userMediaStreamId)).addCallInfo(Mt.userMediaId,"userMedia"),Mt.callConfiguration.userMediaStreamId=Nt.userMediaStreamId,Mt.callType=Nt.callType,Mt.audio=Nt.audio,Mt.video=Nt.video,Mt.audioMuted=Nt.audioMuted,Mt.videoMuted=Nt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Mt)):apiCC.createUserMediaStream({callId:Mt.userMediaId,callFlavor:"userMedia",type:"screenSharing",captureSourceType:wt,success:function(Qt){hn.debug("[meshPublishScreen] success; userMediaStreamId: "+Qt.userMediaStreamId),Mt.callConfiguration.userMediaStreamId=Qt.userMediaStreamId,Mt.callType=Qt.callType,Mt.audio=Qt.audio,Mt.video=Qt.video,Mt.audioMuted=Qt.audioMuted,Mt.videoMuted=Qt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnScreenMediaSuccess(Mt)}}),Mt.userMediaId):(hn.error("meshPublishScreen() - missing sessionMCU"),null)},this.meshOnScreenMediaSuccess=function(it){var Rt,bt=null;it.addAck=!0,it.addTimeoutId=setTimeout(function(){Kt.onRemoteHangup(it.userMediaId,Kt.clientId,it.roomId,"Unable_to_establish",null,null)},it.disconnectionTimer),(bt={}).type="streamStatusChanged",bt.callerId=Kt.clientId,bt.roomId=it.roomId,bt.streams={},bt.streams[it.userMediaId]={eventType:"add",callId:it.userMediaId,callType:it.callType,audio:it.audio,video:it.video,audioMuted:it.audioMuted,videoMuted:it.videoMuted},bt.data={},bt.data.pubSub=this.pubConnector,Rt=JSON.stringify(bt),hn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("streamStatusChanged",Rt)},this.meshOnHangup=function(it,Rt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},wt=0,Et=null,Mt=null,Nt=null;if(Rt!==null&&In(Rt)==="object"||(Rt={}),it){if((Et=Kt.findUserMediaById(it))!==null){for(Et.close(),Et.streamStolen!==!0&&(Kt.myWebRTC_Event.createHangupEvent("local",Kt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.releaseUserMediaStream()),(Mt={}).type="streamStatusChanged",Mt.callerId=Kt.clientId,Mt.roomId=Et.roomId,Mt.streams={},Mt.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},bt.restart&&(Mt.streams[Et.userMediaId].restart=!0),Mt.data={},Mt.data.pubSub=this.pubConnector,Nt=JSON.stringify(Mt),hn.log("C->S: "+Nt),apiCC.session.channel.socket.emit("streamStatusChanged",Nt),wt=Kt.userMediaTable.length;--wt>=0;)if(Kt.userMediaTable[wt]===Et){Kt.userMediaTable.splice(wt,1);break}}}else for(wt=Kt.userMediaTable.length;--wt>=0;)Et=Kt.userMediaTable[wt],bt.hasOwnProperty("roomId")&&Et.sessionMCU.roomName!==bt.roomId||(Kt.myWebRTC_Event.createHangupEvent("local",Kt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.close(),Et.releaseUserMediaStream(),(Mt={}).type="streamStatusChanged",Mt.callerId=Kt.clientId,Mt.roomId=Et.roomId,Mt.streams={},Mt.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},Mt.data={},Mt.data.pubSub=this.pubConnector,Nt=JSON.stringify(Mt),hn.log("C->S: "+Nt),apiCC.session.channel.socket.emit("streamStatusChanged",Nt),Kt.userMediaTable.splice(wt,1))},this.participantEjected=function(it){(0,ot.Ym)(it.data,"clientId","string")&&Kt.myWebRTC_Event.createMCUParticipantEjectedEvent(it.roomId,it.data.clientId,it.data.info)},this.ejectParticipant=function(it,Rt,bt){var wt;if(wt=bt?this.getSessionMCU(bt):this.getSessionMCU(null,{first:!0})){var Et={type:"ejectParticipant",roomId:wt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,clientId:it}};Rt&&(Et.data.info=Rt);var Mt=JSON.stringify(Et);hn.log("C->S: "+Mt),apiCC.session.channel.socket.emit("ejectParticipant",Mt)}else hn.debug("ejectParticipant() - missing sessionMCU")},this.getJoinSessionReq=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=null;if(!it){if(Rt.hasOwnProperty("transactionId")){for(var wt=this.joinSessionReqs.length;--wt>=0;)if(this.joinSessionReqs[wt].transactionId===Rt.transactionId){bt=this.joinSessionReqs[wt];break}return bt}return null}for(var Et=this.joinSessionReqs.length;--Et>=0;)if(this.joinSessionReqs[Et].roomId===it){bt=this.joinSessionReqs[Et];break}return bt},this.removeJoinSessionReq=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!it){if(Rt.all===!0)return this.joinSessionReqs.splice(0,this.joinSessionReqs.length),!0;Rt.hasOwnProperty("roomId")&&(it=this.getJoinSessionReq(Rt.roomId))}if(!it)return!1;for(var bt=this.joinSessionReqs.length;--bt>=0&&this.joinSessionReqs[bt]!==it;);return bt>=0&&(this.joinSessionReqs.splice(bt,1),!0)},this.getSessionMCU=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=null;if(!it){if(Rt.first===!0)return this.sessionMCUs[0];if((0,ot.Ym)(Rt.callback,"function")){hn.debug("getSessionMCU callback");for(var wt=this.sessionMCUs.length;--wt>=0;)if(Rt.callback(this.sessionMCUs[wt])){bt=this.sessionMCUs[wt];break}}return bt}for(var Et=this.sessionMCUs.length;--Et>=0;)if(this.sessionMCUs[Et].roomName===it){bt=this.sessionMCUs[Et];break}return bt},this.removeSessionMCU=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!it&&Rt.all===!0)return this.sessionMCUs.splice(0,this.sessionMCUs.length),!0;if(!it)return!1;for(var bt=this.sessionMCUs.length;--bt>=0&&this.sessionMCUs[bt]!==it;);return bt>=0&&(this.sessionMCUs.splice(bt,1),!0)},this.callback=function(it,Rt){return this.closureHandler=function(bt){return it[Rt](bt)},this.closureHandler}};function xn(Kt){hn.debug("disputableEntryTimeout",Kt);for(var At=apiCC.session.apiCCWebRTCClient.webRTCClient,it=this.disputableStreamList.length;--it>=0;)if(this.disputableStreamList[it].streamInfo.id===Kt){this.disputableStreamList.splice(it,1);break}for(var Rt=null,bt=this.streamList.length;--bt>=0;)if(this.streamList[bt].streamInfo.id===Kt){Rt=At.destroyCallControl({type:"subscribe",stream:this.streamList[bt].streamInfo}),this.streamList.splice(bt,1);break}Rt&&Rt.callId&&Sn.createHangupEvent("remote",At.clientId,Rt.roomName,!1,"Hangup_From_Callee",Rt.callId,Rt.callType),Sn.createMCURemovedStreamEvent(Kt)}function Xn(Kt){hn.debug("clearDisputableEntry",Kt);for(var At=this.disputableStreamList.length;--At>=0;)if(this.disputableStreamList[At].streamInfo.id===Kt){this.disputableStreamList.splice(At,1);break}for(var it=this.streamList.length;--it>=0;)if(this.streamList[it].streamInfo.id===Kt){this.streamList[it].disputableTimeoutId&&(clearTimeout(this.streamList[it].disputableTimeoutId),delete this.streamList[it].disputableTimeoutId),delete this.streamList[it].clearDisputableEntry;break}}function Ln(Kt){var At={};return(0,ot.ki)(Kt,"maxBitrate","number")&&(At.maxBitrate=Kt.maxBitrate),(0,ot.ki)(Kt,"scaleResolutionDownBy","number")&&(At.scaleResolutionDownBy=Kt.scaleResolutionDownBy),At}function Un(Kt){return(0,ot.Ym)(Kt.encodings,"object")?(0,ot.ki)(Kt.encodings.high,"maxBitrate","number")&&(0,ot.ki)(Kt.encodings.medium,"maxBitrate","number")&&(0,ot.ki)(Kt.encodings.low,"maxBitrate","number")?(Kt.encodings.high=Object.assign({active:!0},Ln(Kt.encodings.high)),Kt.encodings.medium=Object.assign({active:!0},Ln(Kt.encodings.medium)),Kt.encodings.low=Object.assign({active:!0},Ln(Kt.encodings.low)),Kt.sendEncodings=[{rid:"h",active:!0},{rid:"m",active:!0},{rid:"l",active:!0}],Kt.sendEncodings[0].maxBitrate=1e3*Kt.encodings.high.maxBitrate,Kt.sendEncodings[1].maxBitrate=1e3*Kt.encodings.medium.maxBitrate,Kt.sendEncodings[2].maxBitrate=1e3*Kt.encodings.low.maxBitrate,(0,ot.ki)(Kt.encodings.medium,"scaleResolutionDownBy","number")&&(Kt.sendEncodings[1].scaleResolutionDownBy=Kt.encodings.medium.scaleResolutionDownBy),(0,ot.ki)(Kt.encodings.low,"scaleResolutionDownBy","number")&&(Kt.sendEncodings[2].scaleResolutionDownBy=Kt.encodings.low.scaleResolutionDownBy),!0):(hn.warn("no such maxBitrate"),!1):(hn.warn("no such encodings"),!1)}function rr(Kt,At){if(At<650)return!1;var it=Math.floor(9*At/13),Rt=Math.floor(3*At/13),bt=At-it-Rt;return Kt.encodings={high:{maxBitrate:it},medium:{maxBitrate:Rt,scaleResolutionDownBy:2},low:{maxBitrate:bt,scaleResolutionDownBy:4}},Un(Kt)}et.Y.get("CallControl");var tr=function(Kt){this.type=Kt.type,Kt.callId&&(this.callId=Kt.callId),Kt.callType?this.callType=Kt.callType:this.callType="media",Object.prototype.hasOwnProperty.call(Kt,"audioOnly")&&(this.audioOnly=!!Kt.audioOnly),Kt.roomName&&(this.roomName=Kt.roomName),Kt.mediaType&&(this.mediaType=Kt.mediaType),Kt.callConfiguration&&(this.callConfiguration=Kt.callConfiguration),Kt.data&&(this.data=Kt.data),Kt.stream&&(this.stream=Kt.stream),this.autoRestart={}},Qn=function(){var Kt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];this.a=1,this.b=0,this.c=7,this.d=0,this.update=function(At,it,Rt){var bt=0;for(it==null&&(it=0),Rt==null&&(Rt=At.length);bt<Rt;bt+=1)this.a=(this.a+At[it+bt])%65521,this.b=(this.b+this.a)%65521,this.c=(this.c+3)*(At[it+bt]+5)%65521,this.d=(this.d+this.c)%65521},this.digest=function(At){return Kt[this.d>>12&15]+Kt[this.d>>8&15]+Kt[this.d>>4&15]+Kt[15&this.d]+Kt[this.c>>12&15]+Kt[this.c>>8&15]+Kt[this.c>>4&15]+Kt[15&this.c]+Kt[this.b>>12&15]+Kt[this.b>>8&15]+Kt[this.b>>4&15]+Kt[15&this.b]+Kt[this.a>>12&15]+Kt[this.a>>8&15]+Kt[this.a>>4&15]+Kt[15&this.a]}};function jn(Kt,At){return Kt==="checksum64"?new Qn:null}function Bn(Kt){return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},Bn(Kt)}var an=et.Y.get("WebRTC_Client"),zn=apiCC.myWebRTC_Event,Kn=4e4,An=function(Kt){function At(it,Rt,bt){var wt,Et=it.width,Mt=Et<<2,Nt=it.height,Yt=null,Qt=0,on=0,nn=0,dn=0,yn=0,mn=0,Cn=0,En=0,Wn=0,Fn=0,ar=0,or=0,nr=0,ur=0,mr=0,wr=0;if(Rt){for(Yt=Rt.data,bt<0&&(bt=0),En=1-((yn=(2.44413*(Qt=bt>=2.5?.98711*bt-.9633:bt>=.5?3.97156-4.14554*Math.sqrt(1-.26891*bt):2*bt*(3.97156-4.14554*Math.sqrt(.865545)))+2.85619*(on=Qt*Qt)+1.26661*(nn=on*Qt))/(dn=1.57825+2.44413*Qt+1.4281*on+.422205*nn))+(mn=-(1.4281*on+1.26661*nn)/dn)+(Cn=.422205*nn/dn)),wt=0;wt<3;wt++)for(Wn=0;Wn<Nt;Wn++){for(ar=Wn*Mt+(Et-1<<2)+wt,mr=ur=nr=or=Yt[Fn=Wn*Mt+wt],Fn=Wn*Mt+wt;Fn<=ar;Fn+=4)or=En*Yt[Fn]+yn*nr+mn*ur+Cn*mr,Yt[Fn]=or,mr=ur,ur=nr,nr=or;for(ar=Wn*Mt+wt,mr=ur=nr=or=Yt[Fn=Wn*Mt+(Et-1<<2)+wt],Fn=Wn*Mt+(Et-1<<2)+wt;Fn>=ar;Fn-=4)or=En*Yt[Fn]+yn*nr+mn*ur+Cn*mr,Yt[Fn]=or,mr=ur,ur=nr,nr=or}for(wt=0;wt<3;wt++)for(wr=0;wr<Et;wr++){for(ar=(Nt-1)*Mt+(wr<<2)+wt,mr=ur=nr=or=Yt[Fn=(wr<<2)+wt],Fn=(wr<<2)+wt;Fn<=ar;Fn+=Mt)or=En*Yt[Fn]+yn*nr+mn*ur+Cn*mr,Yt[Fn]=or,mr=ur,ur=nr,nr=or;for(ar=(wr<<2)+wt,mr=ur=nr=or=Yt[Fn=(Nt-1)*Mt+(wr<<2)+wt],Fn=(Nt-1)*Mt+(wr<<2)+wt;Fn>=ar;Fn-=Mt)or=En*Yt[Fn]+yn*nr+mn*ur+Cn*mr,Yt[Fn]=or,mr=ur,ur=nr,nr=or}return Rt}}this.localStream=null,this.remoteStream=null,this.channelReady=!1,this.socket=Kt.channel.socket,this.clientId=Kt.apiCCId,this.compositeClientId=Kt.apiCCId+"@"+Kt.apiCCSessionId,this.apiKey=Kt.apiKey,this.isVideoMuted=!1,this.isAudioMuted=!1,this.receiptHooks={},this.callControlTable=[],this.userMediaTable=[],this.callsTable=[],this.callsRetriesTable={},this.restartCallDelay=1e3,this.maxCallsRetriesDuration=15e4,this.accessToLocalMedia=!1,this.unidirectionelCallOnly=!1,this.NtoNConf=!1,this.autoAnswer=!1,this.RTPMedia=!1,this.logoAdded=!1,this.preferOpusCodec=!1,this.preferVP9Codec=!1,typeof apiRTC_React<"u"&&nt.BF==="iOS"?(an.log("React and iOS : Setting H264 as preferred codec"),this.preferH264Codec=!0):this.preferH264Codec=!1,this.preferSendingH264Codec=!1,this.setStereo=!1,this.allowedAudioCodecs="",this.allowedVideoCodecs="",this.mediaRoutingModeEnum={hostOnly:1,stun:2,stunOnly:3,turn:4,turnOnly:5},this.mediaRoutingMode=this.mediaRoutingModeEnum.turn,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.getUserMediaOnGoing=!1,this.userAcceptOnIncomingCall=!1,this.userAcceptOnIncomingCallBeforeGetUserMedia=!1,this.userAcceptOnIncomingDataCall=!1,this.userAcceptOnIncomingScreenSharingCall=!1,this.maxWidthRemoteVideo=0,this.maxHeightRemoteVideo=0,this.nickname=Kt.nickname,this.allowMultipleCalls=!1,this.mySDPManager=new ut,this.MCUClient=new wn(this,this.clientId),this.audioSourceId=null,this.audioOutputId=null,this.videoSourceId=null,this.facingMode=null,this.apiRTCExtensionInstalled=!1,this.trickleIce=!0,this.waitingShareScreenCallId=0,this.waitingShareScreenDestNumber=0,this.waitingCaptureSourceType=null,this.qosEnable=!1,this.qosInterval=5e3,this.csmEnable=!1,this.qualityScoreEnable=!1,this.qualityScoreIntervalMs=5e3,this.csmIntervalMs=5e3,this.recordedCall=!1,this.audioBandwidth=null,this.videoBandwidth=null,this.videoRemoteBandwidth=null,this.videoBandwidthSettings={},this.dataBandwidth=null,this.pc_config="",this.clientIncomingCandidatesQueue=[],this.cleanStoredCallCandidateTimer=6e4,this.initializeGumConfig=function(){nt.Xh==="Edge"&&nt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:nt.Xh==="Chrome"&&nt.PR<49||nt.Xh==="Firefox"&&nt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}}},this.initializeGumConfig(),this.setGumConfigWithDevicePresent=function(){apiCC.mediaDeviceMgr.audioDevicePresent===!1&&(this.gum_config.audio=!1),apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.gum_config.video=!1),apiCC.mediaDeviceMgr.audioDevicePresent===!1&&apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.unidirectionelCallOnly=!0),an.log("this.gum_config:",this.gum_config)},this.userMediaErrorDetected=!1,this.lastUsedUserMediaConstraint=null,this.mediaTypeForIncomingCall="VIDEO",this.mediaTypeForOutgoingCall="VIDEO",this.allowAsymetricMediaCalls=!1,this.receiveMediaDeactivated=!1,this.configTurnServer=null,apiCC.myWebRTC_Adapter.adaptForIoSCordova(),this.pc_config={iceServers:[{urls:["turns:mp1.apizee.com:443?transport=udp","turns:mp1.apizee.com:443?transport=tcp","turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turns:mp2.apizee.com:443?transport=udp","turns:mp2.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]},nt.Xh==="Firefox"&&nt.PR<53?(an.log("createPeerConnection FIREFOX"),an.log("webrtcDetectedVersion : "+apiCC.myWebRTC_Adapter.webrtcDetectedVersion),nt.PR<38?this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}:nt.PR>=42?this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}:this.pc_config={iceServers:[{urls:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"}]}):nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11?(an.log("Browser is :"+nt.Xh+" - using Plugin"),this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}):nt.Xh==="Edge"&&nt.PR<45&&apiRTC.browserDetails.type!=="chrome"?(an.log("Browser is Edge < 45 - removing Turns config"),this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}):an.log("default this.pc_config configuration"),this.pc_constraints={optional:[]},ot.wL.type==="edge"?an.debug("not data channel capable"):ot.wL.type==="safari"?ot.wL.version>=11?this.dataChannelCapable=!0:an.debug("not data channel capable"):this.dataChannelCapable=!0,ot.wL.type==="chrome"&&ot.wL.version>=68||ot.wL.type==="firefox"&&ot.wL.version>=64||ot.wL.type==="safari"&&ot.wL.version>=12?(an.debug("RTCRtpSender#setParameters is available"),this.rtpSenderSetParamatersCapable=!0):(an.debug("RTCRtpSender#setParameters is NOT available"),this.rtpSenderSetParamatersCapable=!1),this.setClientTurnServer=function(it){an.info("setClientTurnServer :",it);var Rt=JSON.stringify(this.pc_config);Rt=Rt.replace(/mp1.apizee.com/g,it),this.pc_config=JSON.parse(Rt)},this.activateScreenSharing=function(it){apiCC.activateScreenSharing(it)},this.setGetUserMediaConfig=function(it){if(an.log("setGetUserMediaConfig :",it),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0){var Rt=navigator.mediaDevices.getSupportedConstraints();an.log("Supported Constraints :",Rt)}it.video!==void 0&&(it.video.height===void 0&&it.video.width===void 0||it.optional!==void 0&&(an.warn("contraints with both optional/mandatory and specific or advanced constraints usage : this may failed depending of browsers"),an.log("setGetUserMediaConfig : contraints modification to avoid both optional/mandatory and specific or advanced constraints usage"),it.optional.sourceId!==void 0&&(an.log("sourceId contraints modification to deviceId"),it.video.deviceId===void 0&&(it.video.deviceId={}),it.video.deviceId.ideal=it.optional.sourceId),delete it.optional)),an.log("this.gum_config :",this.gum_config),this.gum_config=it},this.getUserMedia=function(){try{this.gum_config=apiCC.setAudioSourceIdInConstraint(this.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,this.gum_config),this.lastUsedUserMediaConstraint=this.gum_config,nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(it){an.error("getUserMedia() failed. Is this a WebRTC capable browser?"),an.log("getUserMedia failed with exception: "+it.message)}},this.onUserMediaSuccess=function(it){an.info("onUserMediaSuccess : User has granted access to local media."),this.accessToLocalMedia=!0;var Rt=!1,bt="Unknown",wt=!1,Et="Unknown";this.localStream=it,it.getAudioTracks().length>0&&(Rt=!0,it.getAudioTracks()[0].label&&(bt=it.getAudioTracks()[0].label),an.log("Using audio device: "+bt)),it.getVideoTracks().length>0&&(wt=!0,it.getVideoTracks()[0].label&&(Et=it.getVideoTracks()[0].label),an.log("Using video device: "+Et)),this.myWebRTC_Event.createUserMediaSuccessEvent(!1,Rt,bt,wt,Et,"media",null,it,null,!1)},this.onUserMediaError=function(it){an.info("onUserMediaError : Failed to get access to local media. Error : ",it),an.error(it),this.accessToLocalMedia=!1,nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&(an.log("browser_version > 47"),window.location.protocol!=="https:"&&an.error("HTTPS is now mandatory to use getUserMedia()")),this.myWebRTC_Event.createUserMediaErrorEvent(!1,"media",it,null,null,null,this.gum_config),it=null,apiCC.session.tryAudioOnlyAfterUserMediaError===!0?(an.log("this.lastUsedUserMediaConstraint :",this.lastUsedUserMediaConstraint),an.log("this.lastUsedUserMediaConstraint.video :",this.lastUsedUserMediaConstraint.video),this.lastUsedUserMediaConstraint.video!==!1?(an.log("this.lastUsedUserMediaConstraint.audio :",this.lastUsedUserMediaConstraint.audio),an.log("UserMediaError, Trying to getUserMedia with audioOnly"),this.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):an.log("onUserMediaError without video")):an.log("try AudioCall after UserMediaError is not activated")},this.evalCallProfileWithSdp=function(it,Rt,bt){return this.evalCallProfileWithSdpGuideline(this.mySDPManager.createGuideline(it),it,Rt,bt)},this.evalCallProfileWithSdpGuideline=function(it,Rt,bt,wt){var Et={};return it.hasOwnProperty("audio")?(Et.audio=!0,Et.audioActive=bt==="local"&&wt==="send"?it.audio.direction==="sendrecv"||it.audio.direction==="sendonly":bt==="local"&&wt==="receive"||bt==="remote"&&wt==="send"?it.audio.direction==="sendrecv"||it.audio.direction==="recvonly":bt==="remote"&&wt==="receive"&&(it.audio.direction==="sendrecv"||it.audio.direction==="sendonly")):(Et.audio=!1,Et.audioActive=!1),it.hasOwnProperty("video")?(Et.video=!0,Et.videoActive=bt==="local"&&wt==="send"?it.video.direction==="sendrecv"||it.video.direction==="sendonly":bt==="local"&&wt==="receive"||bt==="remote"&&wt==="send"?it.video.direction==="sendrecv"||it.video.direction==="recvonly":bt==="remote"&&wt==="receive"&&(it.video.direction==="sendrecv"||it.video.direction==="sendonly")):(Et.video=!1,Et.videoActive=!1),Et},this.checkDestCallTypeWithSDP=function(it,Rt){an.debug("checkDestCallTypeWithSDP");var bt=this.mySDPManager.createGuideline(it),wt=!1,Et=!1;!bt.audio||bt.audio.direction!=="sendrecv"&&bt.audio.direction!=="sendonly"||(wt=!0),!bt.video||bt.video.direction!=="sendrecv"&&bt.video.direction!=="sendonly"||(Et=!0),Rt.destCallType=wt===!0?Et===!0?"media":"audio":Et===!0?"videoOnly":"inactive",an.debug("call.destCallType: "+Rt.destCallType),Rt.callee!==!0||bt.audio&&bt.audio.direction!=="sendonly"||bt.video&&bt.video.direction!=="sendonly"||(Rt.userMediaAccessRequired=!1,Rt.mediaTypeForOutgoingCall="NONE",an.debug("access to user media not required"))},this.evaluateVideoCap=function(it){delete it.videoCap,it.belongsToRoom()?it.settingUpType!=="publish"&&it.settingUpType!=="shareScreen"||it.localCallProfile&&it.localCallProfile.video&&it.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(it):(this.rtpSenderSetParamatersCapable||!it.callee)&&it.localCallProfile&&it.localCallProfile.video&&it.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(it)},this.processInvite=function(it){an.info("processInvite() - invite received from :"+it.callerId);var Rt,bt=0,wt=null,Et=null,Mt=null,Nt=null,Yt=!1,Qt=null,on=null,nn=null,dn={};if(it.data!==void 0&&it.data.type==="publish"&&it.data.mesh!==void 0){if(an.info("received invite publish mesh; mesh: "+JSON.stringify(it.data.mesh)),(wt=this.findCallWithCallIdAndInstanceId(it.data.mesh.callerCallId,it.data.instanceId))==null)return void an.error("cannot find call; callId: "+it.data.mesh.callerCallId);wt.userMediaAccessRequired=!1,wt.data.mesh=it.data.mesh,wt.setupTimeoutId&&(clearTimeout(wt.setupTimeoutId),delete wt.setupTimeoutId),Yt=!0}else{if(it.data!==void 0&&it.data.type==="subscribe"&&it.data.mesh!==void 0){if(an.debug("received invite subscribe mesh; mesh: ",it.data.mesh),(Et=this.findUserMediaById(it.data.mesh.calleeCallId))!==null)if(this.MCUClient.distantCalls.push({early:!0,roomId:it.roomId,clientId:it.data.mesh.callerId,callId:it.data.mesh.callerCallId,callMode:"mesh",callDirection:"recvonly",callFeed:{clientId:it.data.mesh.calleeId,callId:it.data.mesh.calleeCallId}}),setTimeout((function(ar,or,nr){an.debug("early distant call descriptor timeout");for(var ur=this.MCUClient.distantCalls.length;--ur>=0;)if(this.MCUClient.distantCalls[ur].early&&this.MCUClient.distantCalls[ur].roomId===ar&&this.MCUClient.distantCalls[ur].clientId===or&&this.MCUClient.distantCalls[ur].callId===nr){an.debug("remove early distant call descriptor: timeout"),this.MCUClient.distantCalls.splice(ur,1);break}}).bind(this,it.roomId,it.data.callerId,it.data.callerCallId),3e4),Et.callType==="screenSharing"||Et.callType==="screenSharingWithAudio")dn.type="publish",dn.mesh=it.data.mesh,dn.instanceId=it.data.instanceId,this.MCUClient.publishScreen(it.roomId,dn,null,Et.captureSourceType);else{var yn=(0,ot.ws)({},Et.callConfiguration);it.data.mediaType==="AUDIOONLY"?yn.audioOnly=!0:it.data.mediaType==="VIDEOONLY"&&(yn.videoOnly=!0),(Mt=apiCC.getUserMediaStream(yn.userMediaStreamId))&&(Mt.audioMuted&&Mt.videoMuted?yn.muted="VIDEO":Mt.audioMuted?yn.muted="AUDIOONLY":Mt.videoMuted?yn.muted="VIDEOONLY":delete yn.muted),delete yn.distributedBroadcastEnabled,delete yn.simulcast,dn.type="publish",dn.mesh=it.data.mesh,dn.instanceId=it.data.instanceId,this.MCUClient.publish(it.roomId,null,null,yn,dn,null)}else an.debug("media not found: sending bye : Call_not_found"),new ht.S(apiCC.session.channel.socket).sendBye(it.callId,it.calleeId,it.roomId,it.callerId,"Call_not_found",it.data);return}if(it.data!==void 0&&it.data.type==="publish"&&it.data.mode==="passive"){if((wt=this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.callerId,it.data.instanceId))==null)return void an.debug("cannot find call; callId: "+it.callId+", callerId: "+it.callerId+", instanceId: "+it.data.instanceId);wt.userMediaAccessRequired=!1,wt.setupTimeoutId&&(clearTimeout(wt.setupTimeoutId),delete wt.setupTimeoutId),Yt=!0}else(wt=new gn(this)).callId=it.callId,wt.instanceId=it.data.instanceId,wt.callerId=it.callerId,wt.calleeId=this.clientId,wt.callee=!0,wt.remoteId=it.callerId}if(wt.dest_roomId=it.roomId,wt.data!==void 0&&Yt===!0)for(nn in it.data)it.data.hasOwnProperty(nn)&&(wt.data[nn]=it.data[nn]);else wt.data=it.data;if(wt.data.instanceId=wt.instanceId,it.data!==void 0&&it.data.pubSub==="sipConnector"&&(wt.trickleIce=!1,wt.remoteType="sip"),wt.checkDTLSCompliancy(),nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"&&(Qt=apiCC.session.getConnectedUserInfo(it.callerId,"userData"),an.log("destUserInfo :",Qt),Qt!=="User_Not_Found"&&Qt!==void 0&&((on=JSON.parse(Qt)).browser!=="Chrome"&&on.browser!=="Mobile Chrome"||on.osName!=="Android"||(an.log("Browser is Edge and caller is Chrome on Android, setting VP8 as prefered codec for the call"),wt.preferVP8Codec=!0))),it.data!==void 0&&it.data.type==="publish"&&it.data.mode==="passive"&&it.stream!==void 0&&it.stream.id!==void 0&&(wt.streamId=it.stream.id,an.log("call.streamId: "+wt.streamId)),bt=this.callsTable.length,an.log("processInvite() - Actual call Number is :"+bt),it.callType==="screenSharing"||it.callType==="screenSharingWithAudio")wt.screenSharing=!0,wt.callType=it.callType;else if(it.callType!=="data"){if(this.allowMultipleCalls===!1){for(an.log("processInvite() - Refusing double call checking ..."),Rt=0;Rt<bt;Rt+=1)if(this.callsTable[Rt].callType!=="screenSharing"&&this.callsTable[Rt].callType!=="screenSharingWithAudio"&&this.callsTable[Rt].callType!=="data")return an.log("processInvite() - Refusing double call"),Yt===!1?this.callsTable.push(wt):an.log("callAlreadyExist in table"),this.myWebRTC_Event.createCallAttemptEvent(this.clientId,it.callerId,it.callerNickname,wt.callId),void this.refuseCall(wt.callId,"User_Busy");an.log("NOT Refusing double call")}}Yt===!1?(bt=this.callsTable.push(wt),an.log("processInvite() - New call Number is :"+bt)):(an.log("callAlreadyExist in table"),an.log("processInvite() - call Number is :"+bt)),this.checkDestCallTypeWithSDP(it.sdpoffer.sdp,wt);var mn=this.mySDPManager.createGuideline(it.sdpoffer.sdp);if(wt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(mn,it.sdpoffer.sdp,"remote","send")),wt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(mn,it.sdpoffer.sdp,"remote","receive")),this.rtpSenderSetParamatersCapable||(this.evaluateVideoCap(wt),wt.videoCap&&(mn.video.bandwidth=wt.videoCap,it.sdpoffer.sdp=mn.generate())),wt.receivedSdpOfferMessage=it.sdpoffer,(0,ot.ki)(it,"stream","object")&&(it.stream.audioMuted===!0&&(wt.isRemoteAudioMuted=!0),it.stream.videoMuted===!0&&(wt.isRemoteVideoMuted=!0)),it.callType==="data"){if(an.log("Receiving DATA call"),wt.callType="data",wt.dataCall=!0,nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome")return an.warn("Cannot create DataChannel as it is not supported on Edge"),void this.refuseCall(wt.callId,"DataChannel_Not_Supported");this.userAcceptOnIncomingDataCall||wt.onUserMediaSuccessTestUni();var Cn={clientId:this.clientId,callerId:it.callerId,callerNickname:it.callerNickname,callId:wt.callId,autoAnswerActivated:!1,callNumber:bt,audioOnly:!1,callType:it.callType,recordedCall:!1,remoteType:wt.remoteType,destCallType:wt.destCallType,data:wt.data};this.myWebRTC_Event.createIncomingCallEvent(Cn)}else if(wt.userMediaAccessRequired===!1||this.unidirectionelCallOnly||wt.screenSharing===!0){if(an.log("call.userMediaAccessRequired :",wt.userMediaAccessRequired),an.log("this.unidirectionelCallOnly :",this.unidirectionelCallOnly),an.log("call.screenSharing :",wt.screenSharing),wt.screenSharing===!0?this.userAcceptOnIncomingScreenSharingCall===!1?wt.onUserMediaSuccessTestUni():an.debug("userAcceptOnIncomingScreenSharingCall is activated : need user accept"):Yt===!0?(an.log("processInvite() - callAlreadyExist"),wt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?an.log("processInvite() - Waiting for call accept or refuse from user - 1"):(an.log("processInvite() - userAcceptOnIncomingCall is not activated"),wt.onUserMediaSuccessTestUni()),(it.data===void 0||it.data.subscribeOrder!==!0)&&Yt===!1){var En={clientId:this.clientId,callerId:it.callerId,callerNickname:it.callerNickname,callId:wt.callId,autoAnswerActivated:!1,callNumber:bt,audioOnly:!1,callType:it.callType,recordedCall:!1,remoteType:wt.remoteType,destCallType:wt.destCallType};this.myWebRTC_Event.createIncomingCallEvent(En)}}else if(apiCC.userMediaStreamTable.length>0&&(Nt=apiCC.userMediaStreamTable[0].userMediaStreamId),this.accessToLocalMedia!==!0&&!Nt||this.autoAnswer!==!0){if(wt.audioOnly===!0&&apiCC.mediaDeviceMgr.audioDevicePresent===!1?(an.log("processInvite() - audio and video media are not transmitted"),wt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?an.log("Stand-by :: wait for getUserMediaOnCall && establishCall"):(an.debug("processInvite() - call.getUserMediaOnCall()"),an.log("processInvite() - this.autoAnswer :"+this.autoAnswer),wt.getUserMediaOnCall()),Yt===!1){var Wn={clientId:this.clientId,callerId:it.callerId,callerNickname:it.callerNickname,callId:wt.callId,autoAnswerActivated:!1,callNumber:bt,audioOnly:wt.audioOnly,callType:it.callType,recordedCall:!1,remoteType:wt.remoteType,destCallType:wt.destCallType};this.myWebRTC_Event.createIncomingCallEvent(Wn)}}else if(an.log("processInvite() :: User has already granted access to local media and AutoAnswer activated : establishing call"),this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?an.log("processInvite() - Waiting for call accept or refuse from user - 2"):Nt?(an.log("using First available stream on apiRTC"),(Mt=apiCC.getUserMediaStream(Nt)).addCallInfo(wt.callId),wt.callConfiguration!==void 0&&wt.callConfiguration!==null||(wt.callConfiguration={}),wt.callConfiguration.userMediaStreamId=Mt.userMediaStreamId,wt.onUserMediaSuccessOnCall(Mt.stream)):wt.establishCall(),Yt===!1){var Fn={clientId:this.clientId,callerId:it.callerId,callerNickname:it.callerNickname,callId:wt.callId,autoAnswerActivated:!0,callNumber:bt,audioOnly:wt.audioOnly,callType:it.callType,recordedCall:!1,remoteType:wt.remoteType,destCallType:wt.destCallType};this.myWebRTC_Event.createIncomingCallEvent(Fn)}},this.setRemoteDescriptionProcess=function(it,Rt){this.preferSendingH264Codec&&(an.log("Modification of SDP to set H264 as prefered sending codec"),Rt.sdp=this.mySDPManager.maybePreferCodec(Rt.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?it.pc!==null?it.pc.setRemoteDescription(Rt,it.callback(it,"onSetRemoteDescriptionSuccess"),it.callback(it,"onSetRemoteDescriptionFailure")):an.debug("setRemoteDescriptionProcess - pc is null"):(an.log("before setRemoteDescription - Promise version"),it.pc!==null?it.pc.setRemoteDescription(Rt).then(it.callback(it,"onSetRemoteDescriptionSuccess")).catch(it.callback(it,"onSetRemoteDescriptionFailure")):an.debug("setRemoteDescriptionProcess - pc is null"))},this.process200OK=function(it){var Rt,bt=null,wt=null;if(it.data!==void 0&&it.data.instanceId!==void 0?(an.info("200OK received from callId :"+it.calleeId+", intanceId is :"+it.data.instanceId),bt=this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.calleeId,it.data.instanceId)):(an.info("200OK received from callId :"+it.calleeId),bt=this.findCallWithCallIdAndRemoteId(it.callId,it.calleeId)),bt===null)return an.warn("200OK received but callId and instanceId are not matching, no process"),void this.myWebRTC_Event.createErrorEvent("200OK received but callId is not matching, no process","NOT_MATCHING_CALLID_ON_200OK");bt.calleeId=it.calleeId,it.sdpanswer&&it.sdpanswer.type!=="no-answer"?bt.message200OKReceived===!1?(an.debug("first 200OK for the call"),bt.message200OKReceived=!0,bt.data.type!=="subscribe"&&this.checkDestCallTypeWithSDP(it.sdpanswer.sdp,bt),Rt=this.mySDPManager.createGuideline(it.sdpanswer.sdp),bt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Rt,it.sdpanswer.sdp,"remote","send")),bt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Rt,it.sdpanswer.sdp,"remote","receive")),this.evaluateVideoCap(bt),!this.rtpSenderSetParamatersCapable&&bt.videoCap&&(Rt.video.bandwidth=bt.videoCap,it.sdpanswer.sdp=Rt.generate()),bt.receivedSdpOfferMessage=it.sdpanswer,an.log("process200OK : before setRemoteDescription"),wt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(it.sdpanswer),this.videoRemoteBandwidth&&(an.log("Modification of SDP to set remote video bandwidth"),wt.sdp=this.mySDPManager.setVideoBandwidth(wt.sdp,this.videoRemoteBandwidth)),this.setRemoteDescriptionProcess(bt,wt),it.data!==null&&it.data!==void 0&&(bt.data!==null&&bt.data!==void 0?bt.data=(0,ot.S6)(bt.data,it.data):bt.data=it.data)):an.debug("200OK has already been received for this call, leaving process200OK"):zn.createCallEstablishedEvent(bt.calleeId,bt.callType,bt.callId,bt.destCallType)},this.cleanStoredCallCandidate=function(it,Rt){an.debug("cleanStoredCallCandidate from callId :"+it+", instanceId is :"+Rt),this.clientIncomingCandidatesQueue[it+"-"+Rt]!==void 0&&this.clientIncomingCandidatesQueue[it+"-"+Rt].length!==0&&(this.clientIncomingCandidatesQueue[it+"-"+Rt].splice(0,this.clientIncomingCandidatesQueue[it+"-"+Rt].length),delete this.clientIncomingCandidatesQueue[it+"-"+Rt])},this.processCandidate=function(it){var Rt=null,bt=it.data&&it.data.instanceId?it.data.instanceId:null;an.debug("Candidate received from callId :"+it.callId+", instanceId is :"+bt),Rt=it.callerId===this.clientId?bt?this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.calleeId,bt):this.findCallWithCallIdAndRemoteId(it.callId,it.calleeId):bt?this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.callerId,bt):this.findCallWithCallIdAndRemoteId(it.callId,it.callerId),an.trace("msg.label :"+it.label),an.log("msg.candidate :"+it.candidate),Rt!==null?Rt.started&&Rt.remoteDescriptionSetted?Rt.processCandidateMsg(it):(an.log("Call not started or remoteDescription is not yet setted"),Rt.incomingcandidatesQueue.push(it)):bt&&(an.debug("Call not found, Candidate message is not handled, storing candidate message in client"),this.clientIncomingCandidatesQueue[it.callId+"-"+bt]!==null&&this.clientIncomingCandidatesQueue[it.callId+"-"+bt]!==void 0||(this.clientIncomingCandidatesQueue[it.callId+"-"+bt]=[],an.debug("First candidate for this call, starting a timeout before candidate storage cleaning"),setTimeout(this.cleanStoredCallCandidate.bind(this),this.cleanStoredCallCandidateTimer,it.callId,bt)),this.clientIncomingCandidatesQueue[it.callId+"-"+bt].push(it))},this.processUpdate=function(it){an.info("Update message on:"+it.roomId);var Rt,bt=null;if((bt=it.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.calleeId,it.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.callerId,it.data.instanceId))!==null)if(it.hasOwnProperty("sdpoffer")&&it.sdpoffer.hasOwnProperty("sdp"))bt.setRemoteCallProfile(this.evalCallProfileWithSdp(it.sdpoffer.sdp,"remote","receive"),!0),bt.updateOngoingTimeoutId=setTimeout(function(){delete bt.updateOngoingTimeoutId},Kn),this.checkDestCallTypeWithSDP(it.sdpoffer.sdp,bt),an.log("processUpdate : before setRemoteDescription"),Rt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(it.sdpoffer),this.setRemoteDescriptionProcess(bt,Rt),bt.doUpdateAnswer();else if((0,ot.ki)(it.data,"mesh","object")&&(it.data.mesh.calleeCompositeUserId?it.data.mesh.calleeCompositeUserId===this.compositeClientId:it.data.mesh.calleeId===this.clientId)){an.debug("mesh update from subscriber");var wt={};it.data.mediaType==="AUDIOONLY"?wt.audioOnly=!0:it.data.mediaType==="VIDEOONLY"&&(wt.videoOnly=!0),this.updateCallConfigurationOnCall(it.callId,wt).then(function(){an.debug("updateCallConfigurationOnCall OK")}).catch(function(Et){an.error("updateCallConfigurationOnCall failed",Et)})}else an.error("update without SDP offer");else this.myWebRTC_Event.createErrorEvent("Cannot find call to process Update","CALL_NOT_FOUND_ON_UPDATE")},this.process200Update=function(it){an.info("200 Update received from :"+it.calleeId);var Rt,bt=null,wt=null;if((bt=it.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.calleeId,it.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(it.callId,it.callerId,it.data.instanceId))===null)return an.info("Call not found on 200 Update"),void this.myWebRTC_Event.createErrorEvent("Cannot find call to process 200 Update","CALL_NOT_FOUND_ON_200UPDATE");bt.calleeId=it.calleeId,Rt=this.mySDPManager.createGuideline(it.sdpanswer.sdp),bt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Rt,it.sdpanswer.sdp,"remote","send"),!0),bt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Rt,it.sdpanswer.sdp,"remote","receive"),!0),this.evaluateVideoCap(bt),!this.rtpSenderSetParamatersCapable&&bt.videoCap&&(Rt.video.bandwidth=bt.videoCap,it.sdpanswer.sdp=Rt.generate()),an.log("process200Update : before setRemoteDescription"),wt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(it.sdpanswer),this.videoBandwidth&&(an.log("Modification of SDP to set remote video bandwidth"),wt.sdp=this.mySDPManager.setVideoBandwidth(wt.sdp,this.videoBandwidth)),this.setRemoteDescriptionProcess(bt,wt),an.log("msg.sdpanswer.sdp :",it.sdpanswer.sdp),bt.addingUserMedia===!0&&(bt.addingUserMedia=!1),bt.updateUserMedia===!0&&(bt.updateUserMedia=!1),bt.updateCause&&(bt.updateCause=null)},this.processSlowLink=function(it,Rt){for(var bt=this.callsTable.length,wt=null;--bt>=0;)if(this.callsTable[bt].callId===it){wt=this.callsTable[bt];break}if(wt!==null){var Et=null;Rt&&Rt.advice&&(Et=Rt.advice),this.myWebRTC_Event.createSlowLinkEvent(wt.callId,Et)}},this.processAudioAmplitude=function(it,Rt){zn.createAudioAmplitudeEvent(it.descriptor.audioAmplitude,Rt,it.callId,it.descriptor.streamID)},this.processDistantIceError=function(it){it.descriptor.iceState==="disconnected"?this.myWebRTC_Event.createErrorEvent("distant iceDisconnection detected","DISTANT_ICE_CONNECTION_STATE_DISCONNECTED",null,it.roomId,null,it.descriptor):it.descriptor.iceState==="failed"&&zn.createErrorEvent("distant iceConnection failed detected","DISTANT_ICE_CONNECTION_STATE_FAILED",null,it.roomId,null,it.descriptor)},this.processStreamTrackMuteChanged=function(it,Rt,bt){for(var wt=this.callsTable.length,Et=null,Mt=[],Nt={},Yt={};--wt>=0;)if(this.callsTable[wt].callId===it){Et=this.callsTable[wt];break}Et!==null&&(Rt==="audio"?(Et.isRemoteAudioMuted=bt,Mt.push("audioIsMuted"),Nt.available=Et.remoteCallProfile.audio,Nt.active=Et.remoteCallProfile.audioActive,Nt.muted=Et.isRemoteAudioMuted,Nt.silent=Et.isRemoteAudioSilent,Yt.available=Et.remoteCallProfile.video,Yt.active=Et.remoteCallProfile.videoActive,Yt.muted=Et.isRemoteVideoMuted,Yt.silent=Et.isRemoteVideoSilent):Rt==="video"&&(Et.isRemoteVideoMuted=bt,Mt.push("videoIsMuted"),Nt.available=Et.remoteCallProfile.audio,Nt.active=Et.remoteCallProfile.audioActive,Nt.muted=Et.isRemoteAudioMuted,Nt.silent=Et.isRemoteAudioSilent,Yt.available=Et.remoteCallProfile.video,Yt.active=Et.remoteCallProfile.videoActive,Yt.muted=Et.isRemoteVideoMuted,Yt.silent=Et.isRemoteVideoSilent),Mt.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Mt,Nt,Yt,Et.destCallType,Et.callId,"userAction"))},this.processStreamTrackStatusChanged=function(it,Rt,bt){for(var wt=this.callsTable.length,Et=null,Mt=[],Nt={},Yt={};--wt>=0;)if(this.callsTable[wt].callId===it){Et=this.callsTable[wt];break}Et!==null&&(Rt==="audio"?(Et.isRemoteAudioSilent=bt,Mt.push("audioIsSilent"),Nt.available=Et.remoteCallProfile.audio,Nt.active=Et.remoteCallProfile.audioActive,Nt.muted=Et.isRemoteAudioMuted,Nt.silent=Et.isRemoteAudioSilent,Yt.available=Et.remoteCallProfile.video,Yt.active=Et.remoteCallProfile.videoActive,Yt.muted=Et.isRemoteVideoMuted,Yt.silent=Et.isRemoteVideoSilent):Rt==="video"&&(Et.isRemoteVideoSilent=bt,Mt.push("videoIsSilent"),Nt.available=Et.remoteCallProfile.audio,Nt.active=Et.remoteCallProfile.audioActive,Nt.muted=Et.isRemoteAudioMuted,Nt.silent=Et.isRemoteAudioSilent,Yt.available=Et.remoteCallProfile.video,Yt.active=Et.remoteCallProfile.videoActive,Yt.muted=Et.isRemoteVideoMuted,Yt.silent=Et.isRemoteVideoSilent),Mt.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Mt,Nt,Yt,Et.destCallType,Et.callId,"userAction"))},this.processUpdateStream=function(it,Rt,bt){for(var wt=this.callsTable.length,Et=null;--wt>=0;)if((0,ot.ki)(this.callsTable[wt].data,"mesh","object")&&this.callsTable[wt].data.mesh.calleeCallId===it||this.callsTable[wt].callId===it){Et=this.callsTable[wt];break}if(!Et)return!1;var Mt=!1;return Rt==="audio"?bt==="inactive"?Et.callType==="media"&&(Et.callType="videoOnly",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection="inactive",Et.establishCall(),Mt=!0):Et.callType==="videoOnly"&&(Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection=null,Et.establishCall(),Mt=!0):Rt==="video"&&(bt==="inactive"?Et.callType==="media"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="audio",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection="inactive",Et.establishCall(),Mt=!0):Et.callType==="audio"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection=null,Et.establishCall(),Mt=!0)),Mt},this.processUpdateVideoQuality=function(it,Rt){an.debug("processUpdateVideoQuality",it,Rt);var bt=this.findCallWithCallId(it);if(bt)if(bt.sessionMCU&&bt.sessionMCU.roomMode!=="mesh"){var wt=apiCC.getUserMediaStream(bt.callConfiguration.userMediaStreamId);if(wt){var Et=wt.getVideoTrack();if(Et){var Mt={};Rt.width&&Rt.height&&(Mt.width=Rt.width,Mt.height=Rt.height),Rt.frameRate&&(Mt.frameRate=Rt.frameRate),Et.applyConstraints(Mt).then(function(Nt){an.debug("processUpdateVideoQuality - applyConstraints; OK")}).catch(function(Nt){an.error("processUpdateVideoQuality - applyConstraints",Nt)})}else an.warn("processUpdateVideoQuality - no such video track; callId:",it)}else an.warn("processUpdateVideoQuality - no such userMediaStream; callId:",it)}else an.warn("processUpdateVideoQuality - wrong roomMode; callId:",it);else an.warn("processUpdateVideoQuality - no such call; callId:",it)},this.removeAllCallsFromRoom=function(it,Rt){an.info("removeAllCallsFromRoom :"+it+" with reason :"+Rt);var bt,wt,Et=this.callsTable.length,Mt=[],Nt={};for(bt=0;bt<Et;bt+=1)this.callsTable[bt].dest_roomId==it&&(an.log("Call is attached to the room, removing ..."),Nt={callId:this.callsTable[bt].callId},Mt.push(Nt));for(wt=0;wt<Mt.length;wt+=1)this.removeCallFromTableWithCallIdAndSendBye(Mt[wt].callId,Rt);Mt.splice(0,Mt.length)},this.onHangup=function(it,Rt){var bt=null,wt=null,Et=null,Mt=null,Nt=[],Yt=!1,Qt=!1,on=null,nn=null;if(it?typeof it!="string"&&(it=String(it)):it=null,Rt?typeof Rt!="string"&&(Rt=null):Rt=null,an.info("Hanging up."),it===null)an.log("Leaving all calls that are established"),this.MCUClient&&this.MCUClient.meshOnHangup(),this.removeAllCalls(),this.callControlTable.splice(0,this.callControlTable.length);else if((wt=this.findUserMediaById(it))!==null){for(this.MCUClient.pubConnector!=="janusConnector"||Rt!=="RTC_Setup_Timeout"&&Rt!=="disconnected"||(Et=wt.getUserMediaStream())&&Et.stream&&(Yt=!0,on=Et.stream,wt.streamStolen=!0,wt.sessionMCU.roomMode==="mesh"?Qt=!0:(nn=Et.getCallInfo(wt.userMediaId))&&(nn.flavor="call")),Mt=this.callsTable.length;--Mt>=0;)(0,ot.Ym)(this.callsTable[Mt].data,"object")&&(0,ot.Ym)(this.callsTable[Mt].data.mesh,"object")&&this.callsTable[Mt].data.mesh.calleeCallId===it&&Nt.push(this.callsTable[Mt].callId);for(Mt=Nt.length;--Mt>=0;)this.removeCallFromTableWithCallIdAndSendBye(Nt[Mt],Rt);this.MCUClient.meshOnHangup(it,null,{restart:Yt})}else(bt=this.findCallWithCallId(it))!==null&&(this.MCUClient.pubConnector!=="janusConnector"||Rt!=="RTC_Setup_Timeout"&&Rt!=="disconnected"||(bt.settingUpType==="publish"||bt.settingUpType==="shareScreen"?bt.data&&bt.data.mesh||(Yt=!0,bt.streamStolen=!0):bt.settingUpType==="subscribe"&&(Yt=!0)),an.log("Leaving call with callId :"+it),this.removeCallFromTableWithCallIdAndSendBye(it,Rt));Yt===!0?bt!==null?this.restartCall(bt):wt&&(Qt===!0?this.restartCall(wt,{userMedia:!0,mesh:!0}):this.restartCall(wt,{userMedia:!0,stream:on})):(bt&&bt.callControl&&this.destroyCallControl(bt.callControl),this.stopMaxCallRetriesTimer(it),this.stopRestartCallTimer(it),delete this.callsRetriesTable[it])},this.stopStream=function(it){an.info("stopStream in client");var Rt,bt=null;if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)it.onended=null,it.stop();else{for(it.onended=null,an.log("MediaStream.stop is now deprecated, using MediaStreamTrack.stop"),bt=it.getTracks(),Rt=0;Rt<bt.length;Rt+=1)bt[Rt].onended=null,bt[Rt].stop();an.log("... tracks stopped")}it=null},this.clearCallTimeouts=function(it){var Rt;for(an.debug("clearCallTimeouts"),it.send200OKTrickleIceFalseTimeOutId!==0&&(an.debug("clearing send200OKTrickleIceFalseTimeOutId"),clearTimeout(it.send200OKTrickleIceFalseTimeOutId),it.send200OKTrickleIceFalseTimeOutId=0),it.sendInviteTrickleIceFalseTimeOutId!==0&&(an.debug("clearing sendInviteTrickleIceFalseTimeOutId"),clearTimeout(it.sendInviteTrickleIceFalseTimeOutId),it.sendInviteTrickleIceFalseTimeOutId=0),it.disconnectionTimeoutId!==0&&(an.debug("clearing disconnectionTimeout"),clearTimeout(it.disconnectionTimeoutId),it.disconnectionTimeoutId=0),it.disconnectionWarningInterval!==0&&(an.debug("clearing disconnectionWarningInterval"),clearInterval(it.disconnectionWarningInterval),it.disconnectionWarningInterval=0),Rt=0;Rt<it.checkCandidateTypesTimeoutTable.length;Rt+=1)an.debug("clearing checkCandidateTypesTimeout :",it.checkCandidateTypesTimeoutTable[Rt]),clearTimeout(it.checkCandidateTypesTimeoutTable[Rt]);it.checkCandidateTypesTimeoutTable.splice(0,it.checkCandidateTypesTimeoutTable.length)},this.removeAllCalls=function(){an.info("removeAllCalls");var it,Rt=this.callsTable.length,bt=0,wt=null,Et=0,Mt=null;for(an.log("callsNumber = "+Rt),it=0;it<Rt;it+=1){if(bt=this.callsTable[it-Et].callee?this.callsTable[it-Et].callerId:this.callsTable[it-Et].calleeId,this.callsTable[it-Et].callee===!0)wt="Hangup_From_Callee",this.callsTable[it-Et].myWebRTC_Stack.sendBye(this.callsTable[it-Et].callId,this.clientId,this.callsTable[it-Et].dest_roomId,bt,wt,this.callsTable[it-Et].data);else{if(wt="Hangup_From_Caller",this.callsTable[it-Et].inviteSended!==!0){this.callsTable[it-Et].callCancelled=!0,an.warn("Leaving call iteration on removeAllCalls");continue}this.callsTable[it-Et].myWebRTC_Stack.sendBye(this.callsTable[it-Et].callId,this.clientId,this.callsTable[it-Et].dest_roomId,bt,wt,this.callsTable[it-Et].data)}(0,ot.ki)(this.callsTable[it-Et].sessionMCU,"roomName","string")&&(0,ot.ki)(this.callsTable[it-Et].data,"MCUType","string")&&(this.callsTable[it-Et].data.MCUType==="MCU-Caller"||this.callsTable[it-Et].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[it-Et].sessionMCU.roomName,{noHangup:!0}),this.callsTable[it-Et].callConfiguration&&this.callsTable[it-Et].callConfiguration.userMediaStreamId&&(Mt=apiCC.getUserMediaStream(this.callsTable[it-Et].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(Mt.userMediaStreamId,this.callsTable[it-Et].callId),this.callsTable[it-Et].screenStream!==null&&(an.log("stopping screenStream"),this.stopStream(this.callsTable[it-Et].screenStream),zn.createUserMediaStopEvent(this.callsTable[it-Et].callId,"screen")),this.callsTable[it-Et].pc!==null&&(an.log("Closing PC"),this.qosEnable&&this.callsTable[it-Et].qm!==void 0&&this.callsTable[it-Et].qm!==null&&typeof this.callsTable[it-Et].qm.saveStatsToDb=="function"&&(this.callsTable[it-Et].qm.saveStatsToDb(!0),clearInterval(this.callsTable[it-Et].statisticId)),this.callsTable[it-Et].csmIntervalId&&clearInterval(this.callsTable[it-Et].csmIntervalId),this.callsTable[it-Et].pc.close(),this.callsTable[it-Et].pc=null),this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[it-Et].remoteId,!0,wt,this.callsTable[it-Et].callId,this.callsTable[it-Et].callType),this.callsTable[it-Et].data!==void 0&&this.callsTable[it-Et].data!==null&&(this.callsTable[it-Et].data.pubSub==="janusConnector"||this.callsTable[it-Et].data.MCUType!=="MCU-Caller"&&this.callsTable[it-Et].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[it-Et].data.confId,this.callsTable[it-Et].callerId,this.callsTable[it-Et].calleeId,this.callsTable[it-Et].callId)),this.clearCallTimeouts(this.callsTable[it-Et]),this.callsTable[it-Et].incomingcandidatesQueue.length!==0&&this.callsTable[it-Et].incomingcandidatesQueue.splice(0,this.callsTable[it-Et].incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[this.callsTable[it-Et].callId+"-"+this.callsTable[it-Et].instanceId]!==void 0&&this.clientIncomingCandidatesQueue[this.callsTable[it-Et].callId+"-"+this.callsTable[it-Et].instanceId].length!==0&&this.clientIncomingCandidatesQueue[this.callsTable[it-Et].callId+"-"+this.callsTable[it-Et].instanceId].splice(0,this.clientIncomingCandidatesQueue[this.callsTable[it-Et].callId+"-"+this.callsTable[it-Et].instanceId].length),an.log("Removing call from table"),this.callsTable.splice(it-Et,1),Et+=1}},this.onRemoteHangup=function(it,Rt,bt,wt,Et,Mt){var Nt=this;an.debug("onRemoteHangup");var Yt=null,Qt=null,on=null,nn=null,dn=!1,yn=!1,mn=!1,Cn=null,En=null;if(an.log("callId :"+it),an.log("confId :"+Et),this.MCUClient.pubConnector==="janusConnector")if(wt==="RTC_Setup_Timeout"||wt==="Broken_by_MCU"||wt==="disconnected")if((Qt=Mt==null?this.findCallWithCallId(it):this.findCallWithCallIdAndInstanceId(it,Mt.instanceId))!=null){if(Qt.setupTimeoutId&&(clearTimeout(Qt.setupTimeoutId),delete Qt.setupTimeoutId),Qt.restarting===!0)return void an.debug("call restarting");if(Qt.settingUpType==="publish"||Qt.settingUpType==="shareScreen"?Qt.data&&Qt.data.mesh||(dn=!0,Qt.streamStolen=!0):Qt.settingUpType==="subscribe"&&(dn=!0),Qt.sessionMCU!==null&&Qt.sessionMCU.modeChangeKind==="old")return void an.debug("onRemoteHangup ignore")}else(on=this.findUserMediaById(it))!==null?(on.close(),(nn=on.getUserMediaStream())&&nn.stream&&(on.sessionMCU!==null&&on.sessionMCU.modeChangeKind==="old"?(dn=!0,Cn=nn.stream,on.streamStolen=!0,on.distantCalls.length>0&&(mn=!0),(En=nn.getCallInfo(on.userMediaId))&&(En.flavor="call")):on.sessionMCU!==null&&on.sessionMCU.roomMode==="mesh"?(dn=!0,yn=!0,Cn=nn.stream,on.streamStolen=!0):(dn=!0,Cn=nn.stream,on.streamStolen=!0,(En=nn.getCallInfo(on.userMediaId))&&(En.flavor="call")))):an.debug("No call and no userMedia found");else(Qt=Mt==null?this.findCallWithCallId(it):this.findCallWithCallIdAndInstanceId(it,Mt.instanceId))?(Qt.setupTimeoutId&&(clearTimeout(Qt.setupTimeoutId),delete Qt.setupTimeoutId),Qt.settingUpType==="subscribe"&&wt!=="Ejected"&&(dn=!0)):(on=this.findUserMediaById(it))&&on.close();if(!mn)if(on!==null){var Wn=null,Fn=[];for(Wn=this.callsTable.length;--Wn>=0;)(0,ot.ki)(this.callsTable[Wn].data,"mesh","object")&&this.callsTable[Wn].data.mesh.calleeCallId===it&&this.callsTable[Wn].settingUpType!=="subscribe"&&Fn.push(this.callsTable[Wn].callId);for(Wn=Fn.length;--Wn>=0;)this.removeCallFromTableWithCallIdAndSendBye(Fn[Wn],wt);if(this.MCUClient.meshOnHangup(it),on.sessionMCU.modeChangeKind==="old"){var ar=this.MCUClient.getSessionMCU(null,{callback:function(or){return or.roomName===on.sessionMCU.roomName&&or.modeChangeKind==="new"}});ar&&this.finalizeMeshToJanusTransition(on.sessionMCU,ar)}}else it!==void 0?Yt=Mt==null?this.removeCallFromTableWithCallIdandRemoteId(it,Rt,wt):this.removeCallFromTableWithCallIdandInstanceId(it,Mt.instanceId,wt):Et!==void 0&&(Yt=this.removeCallFromTableWithConfIdandRemoteId(Et,Rt,wt));an.log("Reason : "+wt),Qt&&dn!==!0?this.callsTable.length===0&&this.userMediaTable.length===0?(an.log("No more established calls for client"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Rt,!0,wt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Rt,!0,wt,it,Yt),this.getUserMediaOnGoing===!0&&Kt.deactivateReloadOnCancel!==!0&&(an.log("Cancel from Remote"),typeof apiRTC_React>"u"&&location.reload(),this.getUserMediaOnGoing=!1)):(an.log("Other calls are still established"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Rt,!1,wt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Rt,!1,wt,it,Yt)):Qt&&Qt.settingUpType==="subscribe"&&(this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Rt,!1,"restarted"),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Rt,!1,"restarted",it,Yt)),Mt!=null&&(this.MCUClient.pubConnector==="janusConnector"||Mt.MCUType!=="MCU-Caller"&&Mt.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(Et,this.clientId,Rt,it)),dn===!0?Qt!==null?this.restartCall(Qt):on&&(yn===!0?this.restartCall(on,{userMedia:!0,mesh:!0}):this.randomDelayOnRestart?(an.debug("onRemoteHangup - randomDelayOnRestart"),setTimeout(function(){Nt.restartCall(on,{userMedia:!0,stream:Cn})},5e3*Math.random())):this.restartCall(on,{userMedia:!0,stream:Cn})):(Qt&&Qt.callControl&&this.destroyCallControl(Qt.callControl),(Qt||on)&&(this.stopMaxCallRetriesTimer(it),this.stopRestartCallTimer(it),delete this.callsRetriesTable[it]))},this.startMaxCallRetriesTimer=function(it){var Rt=this;an.debug("startMaxCallRetriesTimer for callIdWhenStartingTimer :",it);var bt=setTimeout(function(){an.debug("[restartCall] MaxCallRetriesTimer reached for callIdWhenStartingTimer :",it),Rt.callsRetriesTable[it].allowedStatus=!1,delete Rt.callsRetriesTable[it].maxCallsRetriesDurationTimeOutId},this.maxCallsRetriesDuration);this.callsRetriesTable[it]={},this.callsRetriesTable[it].maxCallsRetriesDurationTimeOutId=bt},this.stopMaxCallRetriesTimer=function(it){an.debug("stopMaxCallRetriesTimer for callId :",it),this.callsRetriesTable[it]!==void 0&&this.callsRetriesTable[it].maxCallsRetriesDurationTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[it].maxCallsRetriesDurationTimeOutId),an.debug("[restartCall] MaxCallRetriesTimer cleared for callId :",it),delete this.callsRetriesTable[it])},this.stopRestartCallTimer=function(it){an.debug("stopRestartCallTimer for callId :",it),this.callsRetriesTable[it]!==void 0&&this.callsRetriesTable[it].restartCallTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[it].restartCallTimeOutId),an.error("[restartCall] RestartCallTimer cleared for callId :",it),delete this.callsRetriesTable[it].restartCallTimeOutId)},this.restartCall=function(it){var Rt=this,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};an.debug("[restartCall] restartCall for callId :",it.callId);var wt=-1;if(bt.userMedia!==!0)if(it.callControl&&it.callControl.autoRestart)if((wt=it.callControl.autoRestart.counter)===0&&(it.callControl.autoRestart.callIdWhenStartingTimer=it.callId,this.startMaxCallRetriesTimer(it.callId)),this.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&this.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer].allowedStatus===void 0){an.debug("[restartCall] ... for callIdWhenStartingTimer :",it.callControl.autoRestart.callIdWhenStartingTimer),an.debug("AutoRestartCounter :",wt),an.debug("Calling restartCallProcess in :",this.restartCallDelay*Math.pow(2,wt));var Et=setTimeout(function(){an.debug("Timer reached for restartCall"),delete it.callControl.autoRestart.pending,Rt.restartCallProcess(it,bt),Rt.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&Rt.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId!==void 0&&delete Rt.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId},this.restartCallDelay*Math.pow(2,wt));it.callControl.autoRestart.pending=!0,this.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId=Et}else an.warn("CALL_ABORTED, retries not allowed (maxCallsRetriesDuration reached) for callIdWhenStartingTimer :",it.callControl.autoRestart.callIdWhenStartingTimer),this.destroyCallControl(it.callControl),zn.createErrorEvent("call aborted after calls retries (maxCallsRetriesDuration reached)","CALL_ABORTED",it.callId,it.callControl.roomName),this.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&delete this.callsRetriesTable[it.callControl.autoRestart.callIdWhenStartingTimer];else an.debug("[restartCall] autoRestart options not defined");else this.restartCallProcess(it,bt)},this.restartCallProcess=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};an.debug("restartCallProcess ");var bt=!1,wt=!1,Et=null;if(it.restarting!==!0){if(it.restarting=!0,Rt.userMedia===!0&&(bt=!0),Rt.mesh===!0&&(wt=!0),bt===!0)if(wt===!0)it.callType==="screenSharing"||it.callType==="screenSharingWithAudio"?(it.restarting=!1,this.userMediaTable.push(it),this.MCUClient.meshOnScreenMediaSuccess(it)):(it.restarting=!1,this.userMediaTable.push(it),this.MCUClient.meshOnUserMediaSuccess(it));else if(it.callType==="screenSharing"||it.callType==="screenSharingWithAudio"){delete it.data.meshPublish,it.data.type="publish";var Mt=this.createCallControl({type:"shareScreen",callId:it.userMediaId,roomName:it.roomId,callConfiguration:it.callConfiguration,data:it.data});Mt.captureSourceType=it.captureSourceType,Mt.autoRestart.counter=0,Mt.autoRestart.stream=Rt.stream,this.shareScreen(it.roomId,it.data,it.captureSourceType,it.callConfiguration,{callControl:Mt}),this.myWebRTC_Event.createCallRestartingEvent(it.callType,it.audioOnly,it.userMediaId,it.userMediaId,"publish",this.clientId,it.roomId,it.roomId,null)}else{delete it.data.meshPublish;var Nt=this.createCallControl({type:"publish",callId:it.userMediaId,callType:it.callType,roomName:it.roomId,callConfiguration:it.callConfiguration,data:it.data});Nt.audioOnly=it.callType==="audio",Nt.sessionId=it.sessionId,Nt.token=it.token,Nt.autoRestart.counter=0,Nt.autoRestart.stream=Rt.stream,this.MCUClient.publish(it.roomId,it.sessionId,it.token,it.callConfiguration,it.data,{callControl:Nt}),this.myWebRTC_Event.createCallRestartingEvent(it.callType,it.callType==="audio",it.userMediaId,it.userMediaId,"publish",this.clientId,it.roomId,it.roomId,null)}else if(it.settingUpType==="publish")(0,ot.Ym)(it.callControl,"object")?(an.debug("[restartCall] restarting call publish"),this.MCUClient.publish(it.callControl.roomName,it.callControl.sessionId,it.callControl.token,it.callControl.callConfiguration,it.callControl.data,{callControl:it.callControl}),this.myWebRTC_Event.createCallRestartingEvent(it.callType,it.audioOnly,it.callId,it.callId,"publish",this.clientId,it.callControl.roomName,it.callControl.roomName,null)):an.warn("[restartCall] cannot auto restart; missing info");else if(it.settingUpType==="shareScreen")(0,ot.Ym)(it.callControl,"object")?(an.debug("[restartCall] restarting call shareScreen"),this.shareScreen(it.callControl.roomName,it.callControl.data,it.callControl.captureSourceType,it.callControl.callConfiguration,{callControl:it.callControl}),this.myWebRTC_Event.createCallRestartingEvent(it.callType,it.audioOnly,it.callId,it.callId,"publish",this.clientId,it.callControl.roomName,it.callControl.roomName,null)):an.warn("[restartCall] cannot auto restart; missing info");else if(it.settingUpType==="subscribe"&&(an.debug("[restartCall] restarting call subscribe"),Et=it.mcuRemoteStream.replay===!0?this.MCUClient.getStreamOfUserCall(it.mcuRemoteStream.attributes.callerId,it.mcuRemoteStream.attributes.callId,{replay:!0}):this.MCUClient.getStreamOfUserCall(it.mcuRemoteStream.attributes.callerId,it.mcuRemoteStream.attributes.callId),(0,ot.Ym)(it.callControl,"object")&&Et)){an.debug("[restartCall] stream exists, subscribing to it");var Yt=!!it.callControl.autoRestart.force;delete it.callControl.autoRestart.force;var Qt=it.callControl.callId,on=this.MCUClient.subscribeToStreams([Et],it.callControl.mediaType,it.callControl.data,it.callControl.callConfiguration,{noStreamCheck:!0,autoSub:!0,force:Yt});Qt&&on[0]&&this.myWebRTC_Event.createCallRestartingEvent(it.callType,it.audioOnly,Qt,on[0],"subscribe",this.clientId,it.callControl.roomName,it.callControl.roomName,Et.id)}}else an.debug("[restartCall] call already restarting")},this.closingCallProcess=function(it,Rt){an.log("Session terminated.");var bt=null;(0,ot.ki)(this.callsTable[it].sessionMCU,"roomName","string")&&(0,ot.ki)(this.callsTable[it].data,"MCUType","string")&&(this.callsTable[it].data.MCUType==="MCU-Caller"||this.callsTable[it].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[it].sessionMCU.roomName),this.callsTable[it].callConfiguration&&this.callsTable[it].callConfiguration.userMediaStreamId&&this.callsTable[it].streamStolen!==!0&&(bt=apiCC.getUserMediaStream(this.callsTable[it].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(bt.userMediaStreamId,this.callsTable[it].callId),this.callsTable[it].screenStream!==null&&(an.log("stopping screenStream"),this.stopStream(this.callsTable[it].screenStream),zn.createUserMediaStopEvent(this.callsTable[it].callId,"screen")),this.callsTable[it].pc!==null&&(an.log("Closing PC"),this.qosEnable&&this.callsTable[it].qm!==void 0&&this.callsTable[it].qm!==null&&typeof this.callsTable[it].qm.saveStatsToDb=="function"&&(this.callsTable[it].qm.saveStatsToDb(!0),clearInterval(this.callsTable[it].statisticId)),this.callsTable[it].csmIntervalId&&clearInterval(this.callsTable[it].csmIntervalId),this.callsTable[it].beginTimeoutId&&(clearTimeout(this.callsTable[it].beginTimeoutId),delete this.callsTable[it].beginTimeoutId),this.callsTable[it].dcfs?Rt==="Ice_failed"?this.callsTable[it].dcfs.failure="iceFailed":this.callsTable[it].dcfs.canceled=!0:this.callsTable[it].callType==="data"&&this.callsTable[it].calleeId==="dataChannelConnector"&&(this.callsTable[it].failure||this.callsTable[it].success||setTimeout(function(wt,Et){zn.createEvent({eventType:"onFileSended",callId:wt.callId,remoteId:wt.remoteId,name:wt.data.filename,error:Et}),wt.callbacks&&wt.callbacks.failure&&wt.callbacks.failure(Et)},0,this.callsTable[it],Rt==="Ice_failed"?"iceFailed":"canceled")),this.callsTable[it].pc.close(),this.callsTable[it].pc=null)},this.removeCallProcess=function(it){var Rt=this,bt=this.callsTable[it];this.clearCallTimeouts(bt),bt.incomingcandidatesQueue.length!==0&&bt.incomingcandidatesQueue.splice(0,bt.incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[bt.callId+"-"+bt.instanceId]!==void 0&&this.clientIncomingCandidatesQueue[bt.callId+"-"+bt.instanceId].length!==0&&this.clientIncomingCandidatesQueue[bt.callId+"-"+bt.instanceId].splice(0,this.clientIncomingCandidatesQueue[bt.callId+"-"+bt.instanceId].length),an.log("Removing call from table"),this.callsTable.splice(it,1),an.log("this.callsTable.length :",this.callsTable.length),an.log("Call is terminated"),setTimeout(function(){Rt.startNextPushData()}),this.evalOutgoingVideoBandwithCap()},this.removeCallFromTableWithCallIdAndSendBye=function(it,Rt){an.debug("removeCallFromTableWithCallIdAndSendBye()",it);var bt,wt=null;if((bt=this.findCallIndexWithCallId(it))!==-1){if(this.closingCallProcess(bt,Rt),this.callsTable[bt].callId,this.callsTable[bt].calleeId,this.callsTable[bt].callee?(wt=this.callsTable[bt].callerId,Rt===null&&(Rt="Hangup_From_Callee")):(wt=this.callsTable[bt].calleeId,Rt===null&&(Rt="Hangup_From_Caller")),an.log("reason is :"+Rt),this.callsTable[bt].calleeId!=="LOCAL"&&apiCC.session!==null){var Et=apiCC.session.getConnectedUserInfo(this.callsTable[bt].calleeId,"userData"),Mt=null;if(Et!=="User_Not_Found")try{Mt=JSON.parse(Et)}catch{an.error("userInfo parse fail",Et)}Mt!=null&&Mt.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCancelCallRequest",{number:this.callsTable[bt].calleeId,callId:it}):this.callsTable[bt].myWebRTC_Stack.sendBye(this.callsTable[bt].callId,this.clientId,this.callsTable[bt].dest_roomId,wt,Rt,this.callsTable[bt].data)}Rt!=="Broken_by_MCU"&&this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[bt].remoteId,!0,Rt,this.callsTable[bt].callId,this.callsTable[bt].callType),this.callsTable[bt].data!==void 0&&this.callsTable[bt].data!==null&&(this.callsTable[bt].data.pubSub==="janusConnector"||this.callsTable[bt].data.MCUType!=="MCU-Caller"&&this.callsTable[bt].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[bt].data.confId,this.callsTable[bt].callerId,this.callsTable[bt].calleeId,this.callsTable[bt].callId)),this.removeCallProcess(bt)}else an.log("No call removed");this.MCUClient.publishCallId===it&&(this.publishCallId=null)},this.removeCall=function(it){an.info("removeCall");var Rt=null;return it!==-1?(this.closingCallProcess(it,null),this.callsTable[it].disconnectionWarningTimeout!==0&&(an.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.callsTable[it].disconnectionWarningTimeout),this.callsTable[it].disconnectionWarningTimeout=0),Rt=this.callsTable[it].callType,this.removeCallProcess(it)):an.debug("No call removed"),Rt},this.removeCallFromTableWithConfIdandRemoteId=function(it,Rt,bt){var wt;return an.debug("removeCallFromTableWithConfIdandRemoteId() with reason :"+bt),bt=null,wt=this.findCallIndexWithConfIdAndRemoteId(it,Rt),this.removeCall(wt)},this.removeCallFromTableWithCallIdandRemoteId=function(it,Rt,bt){var wt;return an.debug("removeCallFromTableWithCallIdandRemoteId() with reason :"+bt),an.log("callId :"+it),an.log("remoteId :"+Rt),bt=null,wt=this.findCallIndexWithCallIdAndRemoteId(it,Rt),this.removeCall(wt)},this.removeCallFromTableWithCallIdandInstanceId=function(it,Rt,bt){var wt;return an.debug("removeCallFromTableWithCallIdandInstanceId() with reason :"+bt),an.log("callId :"+it),an.log("instanceId :"+Rt),bt=null,wt=this.findCallIndexWithCallIdAndInstanceId(it,Rt),this.removeCall(wt)},this.toggleVideoMute=function(it){an.debug("toggleVideoMute");var Rt,bt,wt=this.callsTable.length,Et=null,Mt=null;if(it==null){for(an.debug("no callId defined, toggleVideoMute all local video"),this.isVideoMuted?this.localStream!==null&&(an.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getVideoTracks())):this.localStream!==null&&(an.debug("localStream muteTracks"),this.muteTracks(this.localStream.getVideoTracks())),this.isVideoMuted=!this.isVideoMuted,Rt=0;Rt<wt;Rt+=1)this.callsTable[Rt].data&&this.callsTable[Rt].data.mesh||(Mt=null,this.callsTable[Rt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.callsTable[Rt].callConfiguration.userMediaStreamId)),Mt?Mt.videoMuted?Mt.unMuteVideoOnStreams("enabled"):Mt.muteVideoOnStreams("enabled"):this.callsTable[Rt].callLocalStream!==null&&(this.callsTable[Rt].isLocalVideoMuted?(an.debug("unmuting call :",this.callsTable[Rt].callId),this.unMuteTracks(this.callsTable[Rt].callLocalStream.getVideoTracks())):(an.debug("muting call :",this.callsTable[Rt].callId),this.muteTracks(this.callsTable[Rt].callLocalStream.getVideoTracks())),this.callsTable[Rt].isLocalVideoMuted=!this.callsTable[Rt].isLocalVideoMuted));for(wt=this.userMediaTable.length,Rt=0;Rt<wt;Rt+=1)Mt=null,this.userMediaTable[Rt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.userMediaTable[Rt].callConfiguration.userMediaStreamId)),Mt&&(Mt.videoMuted?Mt.unMuteVideoOnStreams("enabled"):Mt.muteVideoOnStreams("enabled"));return{muteState:this.isVideoMuted,callId:"ALL"}}return an.debug("callId is defined :",it),(bt=this.findCallIndexWithCallId(it))>=0?(this.callsTable[bt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.callsTable[bt].callConfiguration.userMediaStreamId)),Mt?(Mt.videoMuted?Mt.unMuteVideoOnStreams("enabled"):Mt.muteVideoOnStreams("enabled"),{muteState:Mt.videoMuted,callId:it}):this.callsTable[bt].callLocalStream!==null?(this.callsTable[bt].isLocalVideoMuted?(an.debug("unmuting call :",this.callsTable[bt].callId),this.unMuteTracks(this.callsTable[bt].callLocalStream.getVideoTracks())):(an.debug("muting call :",this.callsTable[bt].callId),this.muteTracks(this.callsTable[bt].callLocalStream.getVideoTracks())),this.callsTable[bt].isLocalVideoMuted=!this.callsTable[bt].isLocalVideoMuted,{muteState:this.callsTable[bt].isLocalVideoMuted,callId:it}):{muteState:"STREAM_NOT_FOUND",callId:it}):(Et=this.findUserMediaById(it))&&(Et.callConfiguration&&(Mt=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),Mt)?(Mt.videoMuted?Mt.unMuteVideoOnStreams("enabled"):Mt.muteVideoOnStreams("enabled"),{muteState:Mt.videoMuted,callId:it}):{muteState:"CALL_NOT_FOUND",callId:it}},this.unMuteTracks=function(it){var Rt;if(it.length!==0){for(Rt=0;Rt<it.length;Rt+=1)it[Rt].enabled=!0;an.log("tracks unMuted.")}else an.log("No tracks available.")},this.muteTracks=function(it){var Rt;if(it.length!==0){for(Rt=0;Rt<it.length;Rt+=1)it[Rt].enabled=!1;an.log("tracks muted.")}else an.log("No tracks available.")},this.toggleAudioMute=function(it){an.debug("toggleAudioMute");var Rt,bt,wt=this.callsTable.length,Et=null,Mt=null;if(it==null){for(an.debug("no callId defined, toggleAudioMute all local audio"),this.isAudioMuted?this.localStream!==null&&(an.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getAudioTracks())):this.localStream!==null&&(an.debug("localStream muteTracks"),this.muteTracks(this.localStream.getAudioTracks())),this.isAudioMuted=!this.isAudioMuted,Rt=0;Rt<wt;Rt+=1)this.callsTable[Rt].data&&this.callsTable[Rt].data.mesh||(Mt=null,this.callsTable[Rt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.callsTable[Rt].callConfiguration.userMediaStreamId)),Mt?Mt.audioMuted?Mt.unMuteAudioOnStreams("enabled"):Mt.muteAudioOnStreams("enabled"):this.callsTable[Rt].callLocalStream!==null&&(this.callsTable[Rt].isLocalAudioMuted?(an.debug("unmuting call :",this.callsTable[Rt].callId),this.unMuteTracks(this.callsTable[Rt].callLocalStream.getAudioTracks())):(an.debug("muting call :",this.callsTable[Rt].callId),this.muteTracks(this.callsTable[Rt].callLocalStream.getAudioTracks())),this.callsTable[Rt].isLocalAudioMuted=!this.callsTable[Rt].isLocalAudioMuted));for(wt=this.userMediaTable.length,Rt=0;Rt<wt;Rt+=1)Mt=null,this.userMediaTable[Rt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.userMediaTable[Rt].callConfiguration.userMediaStreamId)),Mt&&(Mt.audioMuted?Mt.unMuteAudioOnStreams("enabled"):Mt.muteAudioOnStreams("enabled"));return{muteState:this.isAudioMuted,callId:"ALL"}}return an.debug("callId is defined :",it),(bt=this.findCallIndexWithCallId(it))>=0?(this.callsTable[bt].callConfiguration&&(Mt=apiCC.getUserMediaStream(this.callsTable[bt].callConfiguration.userMediaStreamId)),Mt?(Mt.audioMuted?Mt.unMuteAudioOnStreams("enabled"):Mt.muteAudioOnStreams("enabled"),{muteState:Mt.audioMuted,callId:it}):this.callsTable[bt].callLocalStream!==null?(this.callsTable[bt].isLocalAudioMuted?(an.debug("unmuting call :",this.callsTable[bt].callId),this.unMuteTracks(this.callsTable[bt].callLocalStream.getAudioTracks())):(an.debug("muting call :",this.callsTable[bt].callId),this.muteTracks(this.callsTable[bt].callLocalStream.getAudioTracks())),this.callsTable[bt].isLocalAudioMuted=!this.callsTable[bt].isLocalAudioMuted,{muteState:this.callsTable[bt].isLocalAudioMuted,callId:it}):{muteState:"STREAM_NOT_FOUND",callId:it}):(Et=this.findUserMediaById(it))&&(Et.callConfiguration&&(Mt=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),Mt)?(Mt.audioMuted?Mt.unMuteAudioOnStreams("enabled"):Mt.muteAudioOnStreams("enabled"),{muteState:Mt.audioMuted,callId:it}):{muteState:"CALL_NOT_FOUND",callId:it}},this.sendDTMF=function(it,Rt,bt,wt){an.debug("sendDTMF");var Et=0;it!=null?(an.debug("callId is defined :",it),Et=this.findCallIndexWithCallId(it),an.debug("index :",Et),Et>=0&&(an.debug("index :",Et),this.callsTable[Et].sendTones(Rt,bt,wt))):an.debug("no callId defined, leaving sendDTMF")},this.xhr=function(it,Rt,bt,wt,Et){var Mt=new XMLHttpRequest;Mt.onreadystatechange=function(){Mt.readyState===4&&Mt.status===200&&bt(Mt.responseText)},wt!==void 0&&(Mt.upload.onprogress=wt),Mt.open("POST",it),Et!=null&&Mt.setRequestHeader("Authorization","Bearer "+Et),Mt.send(Rt)},this.takeSnapshot=function(it,Rt,bt,wt,Et,Mt,Nt){var Yt=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{};an.info("takeSnapshot");var Qt,on=null,nn=null,dn=document.createElement("canvas"),yn=null,mn=null,Cn=new Date,En=Cn.toJSON(),Wn=En.replace(new RegExp(":","g"),"-"),Fn=null,ar=Yt.token;switch(wt){case"Desactivated":Qt=0;break;case"Low":Qt=2;break;case"Medium":Qt=4;break;case"High":Qt=6;break;default:an.log("blurLevel not defined switch case : "+wt),Qt=0}return Nt===void 0?(an.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot"),an.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("Deprecated - localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(an.log("takeSnapshot of defined video Id :"+Nt),(Fn=document.getElementById(Nt))===null?(an.log("Cannot find video with Id :"+Nt),an.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(dn.width=Fn.videoWidth,dn.height=Fn.videoHeight,Yt.hasOwnProperty("width")&&(an.debug("options.width is set :"+Yt.width),dn.width=Yt.width),Yt.hasOwnProperty("height")&&(an.debug("options.height is set :"+Yt.height),dn.height=Yt.height),an.log("snapshot.width : "+dn.width),an.log("snapshot.height :"+dn.height),(on=dn.getContext("2d")).drawImage(Fn,0,0,dn.width,dn.height),(nn=document.createElement("img")).src=dn.toDataURL("image/png"),nn.style.padding=5,nn.width=dn.width,nn.height=dn.height,Qt!==0?(an.log("Adding Blur on Photo"),yn=on.getImageData(0,0,dn.width,dn.height),an.log("av pixels data : "+yn.data),yn=At(nn,yn,Qt),an.log("ap pixels data : "+yn.data),on.putImageData(yn,0,0),nn.src=dn.toDataURL("image/png")):an.log("blur on photo is desactivated"),Bn(Rt)==="object"?Rt!==null?Rt.src=nn.src:an.log("localPhotoIdOrDiv is null"):document.getElementById(Rt)!==null?document.getElementById(Rt).src=nn.src:an.log("localPhotoId is not defined"),mn=new FormData,Et!==void 0?(an.log("sessionId !== undefined :"+Et),mn.append("destFileName",this.clientId+"-"+Wn+".png"),mn.append("data",dn.toDataURL("image/png")),mn.append("sessionId",Et)):(an.log("Upload on data1"),mn.append("photo",dn.toDataURL("image/png")),mn.append("clientId",this.clientId),mn.append("apiKey",apiCC.session.apiKey)),void this.xhr(it,mn,function(or){if(an.log("fileName :",or),or!==null)try{var nr=JSON.parse(or);nr.resultCode==="OK"&&(an.log("files loaded, filename :"+nr.fileUrl),zn.createSnapShotPhotoUploaded(nr.fileUrl))}catch(ur){an.log("Parsing error:",ur)}or!=="Photo received"&&or!=="An error occurred."&&or.substring(0,6)!=="Photo-"||zn.createSnapShotPhotoUploaded(or)},Mt,ar)))},this.takeSnapshotAndSendOnDataChannel=function(it,Rt,bt,wt){an.info("takeSnapshotAndSendOnDataChannel");var Et,Mt=null,Nt=document.createElement("canvas"),Yt=null;if(Rt!==void 0){if(an.log("takeSnapshot of defined video Id :"+Rt),(Yt=document.getElementById(Rt))===null)return an.log("Cannot find video with Id :"+Rt),an.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")}else an.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot");Yt!=null&&(Nt.width=Yt.clientWidth,Nt.height=Yt.clientHeight),an.log("snapshot.width : "+Nt.width),an.log("snapshot.height :"+Nt.height),Nt.getContext("2d").drawImage(Yt,0,0,Nt.width,Nt.height),(Mt=document.createElement("img")).src=Nt.toDataURL("image/png"),Mt.style.padding=5,Mt.width=Nt.width,Mt.height=Nt.height,Bn(it)==="object"?it!==null?it.src=Mt.src:an.log("localPhotoIdOrDiv is null"):document.getElementById(it)!==null?document.getElementById(it).src=Mt.src:an.log("localPhotoId is not defined"),Et=Nt.toDataURL("image/png"),this.sendDataWithCallId(bt,{file:Et,name:"nomFichier",type:"image/png-dataUrl"},wt)},this.callWithNumber=function(it,Rt,bt,wt){an.info("Click on Call Button, video activated : "+Rt),an.log("callConfiguration : ",wt);var Et=null,Mt=0,Nt=null,Yt=null,Qt=null,on=null,nn=null;if(typeof it=="number"&&(an.log("called number type is number, converting to string"),it=it.toString()),it!==""&&it!==this.clientId){if((Et=new gn(this)).instanceId=apiCC.generateInstanceId(),an.log("Calling destination number :"+it),wt==null||wt.apzcallId===void 0||wt.apzcallId===null?Et.generateCallId():Et.callId=wt.apzcallId,apiCC.isSIPNumber(it)===!0?(an.log("Prefix 0 , + , or 'sip:' detected, calling a SIP device"),it.toString().startsWith("sip:")===!0&&(it=it.toString().replace("sip:",""),an.log("called SIP number is :",it)),bt!=null?bt.pubSub="sipConnector":(bt={}).pubSub="sipConnector",Et.trickleIce=!1):an.log("Establishing Web call"),Et.callerId=this.clientId,Et.calleeId=it,Et.dest_roomId=it,Et.audioOnly=!Rt,Et.remoteId=it,Et.callConfiguration=wt,wt!=null?(wt.mediaTypeForOutgoingCall==="VIDEO"||wt.mediaTypeForOutgoingCall==="AUDIO"||wt.mediaTypeForOutgoingCall==="VIDEOONLY"||wt.mediaTypeForOutgoingCall==="NONE"?(an.log("Setting mediaTypeForOutgoingCall :"+wt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=wt.mediaTypeForOutgoingCall):(an.log("mediaTypeForOutgoingCall is not set"),Rt===!1&&(an.log("videoActivated is false, setting mediaTypeForOutgoingCall to AUDIO"),Et.mediaTypeForOutgoingCall="AUDIO")),wt.mediaRoutingMode!==void 0&&wt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(wt.mediaRoutingMode),wt.turnServerAddress!==void 0&&wt.turnServerAddress!==null&&Et.setCallTurnServer(wt.turnServerAddress),wt.preferVP9Codec!==!0&&wt.preferVP9Codec!==!1||(Et.preferVP9Codec=wt.preferVP9Codec),wt.hasOwnProperty("forceCallType")&&(Et.callType=wt.forceCallType,Et.callType!=="screenSharing"&&Et.callType!=="screenSharingWithAudio"||(Et.screenSharing=!0))):an.log("callConfiguration is not set"),bt!==void 0&&bt.MCUType!==void 0&&(bt.MCUType!=="MCU-Caller"&&bt.MCUType!=="MCU-Callee"||(this.MCUClient.pubConnector==="janusConnector"&&(nt.Xh!=="Firefox"&&nt.Xh!=="Mobile Firefox"||(nt.PR>43?Et.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:Et.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}})),bt.remoteMediaStreamId&&(Et.remoteMediaStreamId=bt.remoteMediaStreamId),bt.pubSub=this.MCUClient.pubConnector,bt.videoBandwidthSettings=this.videoBandwidthSettings,bt.pubSub==="groupKurentoConnector"&&(bt.pubSub="kurentoConnector"))),Et.checkDTLSCompliancy(),Nt=Et.callId,Yt=apiCC.session.getConnectedUserInfo(it,"userData"),an.log("userInfo :",Yt),Yt!=="User_Not_Found"&&Yt!==void 0&&(Qt=JSON.parse(Yt))!==void 0&&Qt.react==="true"&&(an.log("userInfoJson.react :",JSON.stringify(Qt.react)),an.log("userInfoJson.osName :",JSON.stringify(Qt.osName)),Qt.osName==="iOS"&&(an.log("Callee : React and iOS detected, setting H264 as preferred codec for the call"),Et.preferH264Codec=!0)),Et.audioOnly===!0&&(Et.callType="audio"),bt!==void 0?Et.data=bt:bt={},bt.convId&&(bt.cloudConvId||(bt.cloudConvId=bt.convId),delete bt.convId),bt.dataCall===!0&&(Et.dataCall=!0),Et.data.instanceId=Et.instanceId,Mt=this.callsTable.push(Et),an.log("Call Number is :"+Mt),Et.data&&Et.data.MCUType==="MCU-Caller"&&Et.mediaTypeForOutgoingCall==="NONE")return Et.inviteSended=!0,Et.myWebRTC_Stack.sendInvite(Et.callId,Et.callerId,this.nickname,Et.dest_roomId,Et.dest_roomId,"none",{offer:{type:"no-offer"},data:Et.data}),Et.callId;Et.data&&Et.data.MCUType==="MCU-Caller"&&(Et.settingUpType="publish",Et.callControl=this.createCallControl({type:"publish",callId:Et.callId,roomName:Et.data.confId,callConfiguration:Et.callConfiguration,data:Et.data}),Et.callControl.sessionId=Et.data.confId,Et.callControl.token=Et.data.confId,Et.callControl.autoRestart.counter=0,Et.setMediaConstraintsToSendOnlyOffer()),(0,ot.ki)(wt,"userMediaStreamId","string")&&(nn=wt.userMediaStreamId),Qt!=null&&Qt.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCallRequest",{number:it,call:Et,videoActivated:Rt,data:bt,callConfiguration:{apzcallId:Et.callId}}):this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||nn?Et.dataCall?(an.log("Datachannel call"),Et.establishCall()):(an.log("callWithNumber :: User has already granted access to local media and AutoAnswer activated : establishing call"),nn?((on=apiCC.getUserMediaStream(nn)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=on.userMediaStreamId,Et.onUserMediaSuccessOnCall(on.stream)):Et.establishCall()):bt.MCUType==="MCU-Callee"&&this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?an.log("Stand-by :: wait for AcceptCall on recorded 1to1 call"):Et.getUserMediaOnCall()}else an.log("Call Number is incorrect");return Nt},this.startTestCall=function(it,Rt){an.info("startTestCall : video activated : "+it);var bt,wt,Et=null,Mt=null,Nt={};return(Et=new gn(this)).generateCallId(),Et.instanceId=apiCC.generateInstanceId(),Et.callerId=this.clientId,Et.calleeId=12345,Et.dest_roomId=12345,Et.audioOnly=!it,Et.remoteId=12345,Et.callConfiguration=Rt,Rt!=null?(Rt.mediaTypeForOutgoingCall==="VIDEO"||Rt.mediaTypeForOutgoingCall==="AUDIO"||Rt.mediaTypeForOutgoingCall==="VIDEOONLY"||Rt.mediaTypeForOutgoingCall==="NONE"?(an.log("Setting mediaTypeForOutgoingCall :"+Rt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=Rt.mediaTypeForOutgoingCall):an.log("mediaTypeForOutgoingCall is not set"),Rt.mediaRoutingMode!==void 0&&Rt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(Rt.mediaRoutingMode),Rt.turnServerAddress!==void 0&&Rt.turnServerAddress!==null&&Et.setCallTurnServer(Rt.turnServerAddress),Rt.preferVP9Codec!==!0&&Rt.preferVP9Codec!==!1||(Et.preferVP9Codec=Rt.preferVP9Codec)):(an.log("callConfiguration is not set"),Rt={}),Et.checkDTLSCompliancy(),wt=Et.callId,Nt.pubSub="testCallKurentoConnector",Et.data=Nt,Et.data.instanceId=Et.instanceId,Et.audioOnly===!0&&(Et.callType="audio"),bt=this.callsTable.push(Et),an.log("Call Number is :"+bt),this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||Rt.userMediaStreamId||apiCC.userMediaStreamTable.length>0?Et.dataCall?(an.log("Datachannel call"),Et.establishCall()):(an.log("startTestCall :: User has already granted access to local media and AutoAnswer activated : establishing call"),Rt.userMediaStreamId?((Mt=apiCC.getUserMediaStream(Rt.userMediaStreamId)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=Mt.userMediaStreamId,Et.callLocalStream=Mt.stream,Et.establishCall()):(apiCC.userMediaStreamTable.length>0&&((Mt=apiCC.userMediaStreamTable[0]).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=Mt.userMediaStreamId,Et.callLocalStream=Mt.stream),Et.establishCall())):Et.getUserMediaOnCall(),wt},this.extensionInstallationSuccessCallback=function(){an.debug("extensionInstallationSuccessCallback"),apiCC.session.apiCCWebRTCClient.webRTCClient.apiRTCExtensionInstalled=!0},this.extensionInstallationFailureCallback=function(it,Rt){an.debug("extensionInstallationFailureCallback : Error :"+it+", "+Rt),it=null,Rt=null,zn.createDesktopCaptureEvent("Extension_installation_Error",this.waitingShareScreenCallId,this.waitingShareScreenDestNumber,this.waitingCaptureSourceType)},this.manageNotInstalledExtension=function(it,Rt,bt){an.debug("manageNotInstalledExtension"),an.warn("apiRTC extension not installed"),zn.createDesktopCaptureEvent("Extension_not_installed",it,Rt),an.warn("Starting apiRTC extension installation"),this.waitingShareScreenDestNumber=Rt,this.waitingShareScreenCallId=it,this.waitingCaptureSourceType=bt,chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",this.callback(this,"extensionInstallationSuccessCallback"),this.callback(this,"extensionInstallationFailureCallback"))},this.shareScreen=function(it,Rt,bt,wt,Et){an.info("shareScreen");var Mt=null,Nt=null,Yt=null,Qt=null;if(apiCC.isScreenSharingCompliant()===!0)if(it!==""&&it!==this.clientId){if(Rt!==null&&Bn(Rt)==="object"||(Rt={}),this.MCUClient.pubConnector==="janusConnector"&&!Rt.mesh&&Et&&Et.callControl&&Et.callControl.callId&&this.findCallWithCallId(Et.callControl.callId))return an.debug("call already exists",Et.callControl.callId),Et.callControl.callId;if(wt!==null&&Bn(wt)==="object"||(wt={}),wt.qos!==null&&Bn(wt.qos)==="object"?(Rt.qos={},wt.qos.videoMinQuality==="excellent"?Rt.qos.videoMinQuality="excellent":wt.qos.videoMinQuality==="good"?Rt.qos.videoMinQuality="good":wt.qos.videoMinQuality==="medium"?Rt.qos.videoMinQuality="medium":(wt.qos.videoMinQuality,Rt.qos.videoMinQuality="bad"),wt.qos.videoForbidInactive===!0&&(Rt.qos.videoForbidInactive=!0)):Rt.qos={videoMinQuality:"bad"},["audioLabels","videoLabels"].forEach(function(nn){(0,ot.Ym)(wt[nn],"array")&&(Rt[nn]=[],wt[nn].forEach(function(dn){(0,ot.Ym)(dn,"string")&&Rt[nn].push(dn)}))}),(0,ot.Ym)(wt,"context","object"))try{JSON.stringify(wt.context),Rt.context=wt.context}catch{}an.log("shareScreen; callConfiguration: "+JSON.stringify(wt)),Nt=new gn(apiCC.session.apiCCWebRTCClient.webRTCClient),Rt.mesh!==void 0&&Rt.instanceId!==void 0?(an.debug("keeping instanceId "),Nt.instanceId=Rt.instanceId):Nt.instanceId=apiCC.generateInstanceId(),an.log("Calling destination number :"+it);var on=this.MCUClient.getSessionMCU(it);if(on&&(Nt.sessionMCU=on),Nt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&!Rt.mesh?(Nt.settingUpType="shareScreen",Et&&Et.callControl?(Nt.callControl=Et.callControl,Nt.callControl.autoRestart.counter+=1,Nt.callId=Nt.callControl.callId,Nt.restarted=!0):(Nt.callControl=this.createCallControl({type:"shareScreen",roomName:it,callConfiguration:wt,data:Rt}),Nt.callControl.captureSourceType=bt,Nt.callControl.autoRestart.counter=0,Nt.generateCallId(),Nt.callControl.callId=Nt.callId)):(Nt.settingUpType="shareScreen",Nt.generateCallId()),Mt=Nt.callId,Nt.callerId=this.clientId,Nt.calleeId=it,Nt.dest_roomId=it,Nt.audioOnly=!1,Nt.screenSharing=!0,Nt.remoteId=it,Nt.callType="screenSharing",Nt.captureSourceType=bt,Nt.callConfiguration=wt,Nt.data=Rt,Nt.data.instanceId=Nt.instanceId,on&&on.convId&&(Nt.data.cloudConvId=on.convId),wt!=null&&wt.turnServerAddress!==void 0&&wt.turnServerAddress!==null&&Nt.setCallTurnServer(wt.turnServerAddress),Nt.checkDTLSCompliancy(),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Nt),Nt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&Nt.callControl&&Nt.callControl.autoRestart.stream)return an.debug("shareScreen; autoRestart"),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Nt.callLocalStream=Nt.callControl.autoRestart.stream,Nt.establishCall(),Nt.callId;if(Rt!==void 0&&Rt.mesh!==void 0&&(Yt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Rt.mesh.calleeCallId))!==null&&Yt.callConfiguration&&Yt.callConfiguration.userMediaStreamId)return(Qt=apiCC.getUserMediaStream(Yt.callConfiguration.userMediaStreamId)).addCallInfo(Nt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Nt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Nt.callControl&&(Nt.callControl.autoRestart.stream=Qt.stream),Nt.callConfiguration.userMediaStreamId=Qt.userMediaStreamId,Nt.callLocalStream=Qt.stream,Nt.establishCall(),Nt.callId;apiCC.createUserMediaStream({callId:Nt.callId,type:Nt.callType,captureSourceType:bt,success:function(nn){an.debug("[shareScreen] success; userMediaStreamId: "+nn.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Nt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Nt.callControl&&(Nt.callControl.autoRestart.stream=nn.stream),Nt.callConfiguration.userMediaStreamId=nn.userMediaStreamId,Nt.callLocalStream=nn.stream,Nt.establishCall()}})}else an.log("Call Number is incorrect");else an.log("shareScreen is not supported on this browser"),zn.createDesktopCaptureEvent("Browser_Not_Compatible",Mt,it);return an.info("shareScreen, callId :",Mt),Mt},this.startScreenSharingOnCall=function(it,Rt){an.info("getScreenMedia for callId :"+it);var bt=null;if(nt.Xh==="Chrome")if((bt=this.findCallWithCallId(it))!==null){if(this.apiRTCExtensionInstalled===!1)return void this.manageNotInstalledExtension(bt.callId,bt.remoteId,Rt);Rt==null&&(Rt=["screen","window","tab"]),window.postMessage({command:"getDesktopId",callNumber:bt.callId,remoteId:bt.remoteId,captureSourceType:Rt,browser_major_version:nt.PR},"*")}else an.log("call not found");else an.log("shareScreen is only available for chrome Browser"),zn.createDesktopCaptureEvent("Browser_Not_Compatible",it,null)},this.toggleVideoScreen=function(it){an.info("toggleVideoScreen for callId :"+it);var Rt=this.findCallWithCallId(it);Rt!==null?Rt.toggleVideoScreen():an.log("call not found")},this.addVideoMedia=function(it){an.info("webRTCClient::addVideoMedia for callId :"+it);var Rt=this.findCallWithCallId(it);Rt!==null?Rt.addVideoMedia():an.log("call not found")},this.callbymail=function(it){var Rt;an.info("Click on Call per mail Button"),Rt=it,new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i").test(Rt)?(an.log("Calling Destination mail :"+it),this.socket.emit("webrtc_invite_permail",it),Kt.channel.socket.emit("webrtc_invite_permail",it)):an.log("Mail address is not correct :"+it)},this.callperURL=function(it){an.info("Call per URL");var Rt,bt=null;(bt=new gn(this)).instanceId=apiCC.generateInstanceId(),an.log("Calling Destination number :"+it),bt.generateCallId(),bt.callerId=this.clientId,bt.calleeId=it,bt.dest_roomId=it,bt.audioOnly=!1,bt.getUserMediaOnCall(),bt.remoteId=it,bt.checkDTLSCompliancy(),Rt=this.callsTable.push(bt),an.log("Call Number is :"+Rt)},this.acceptCall=function(it,Rt){an.info("acceptCall for callId :"+it),an.log("acceptCall() - callConfiguration : ",Rt);var bt=null,wt=null;if((bt=this.findCallWithCallId(it))!==null){if(an.log("acceptCall() - Call found"),bt.isAccepted=!0,Rt!=null?(Rt.mediaTypeForIncomingCall==="VIDEO"||Rt.mediaTypeForIncomingCall==="AUDIO"||Rt.mediaTypeForIncomingCall==="VIDEOONLY"||Rt.mediaTypeForIncomingCall==="NONE"||Rt.mediaTypeForIncomingCall==="DATA"?(an.log("acceptCall() - Setting mediaTypeForIncomingCall :"+Rt.mediaTypeForIncomingCall),bt.mediaTypeForIncomingCall=Rt.mediaTypeForIncomingCall):an.log("acceptCall() - mediaTypeForIncomingCall is not set"),Rt.mediaRoutingMode!==void 0&&Rt.mediaRoutingMode!==null&&bt.setCallMediaRoutingMode(Rt.mediaRoutingMode),Rt.turnServerAddress!==void 0&&Rt.turnServerAddress!==null&&bt.setCallTurnServer(Rt.turnServerAddress),Rt.preferVP9Codec!==!0&&Rt.preferVP9Codec!==!1||(bt.preferVP9Codec=Rt.preferVP9Codec)):(an.log("acceptCall() - callConfiguration is not set"),Rt={}),bt.screenSharing===!0&&(an.log("acceptCall() for screenSharing : forcing mediaTypeForIncomingCall to NONE"),Rt.mediaTypeForIncomingCall="NONE",bt.mediaTypeForIncomingCall="NONE"),bt.callConfiguration=(0,ot.S6)(bt.callConfiguration,Rt),bt.mediaTypeForIncomingCall==="VIDEO"?bt.setLocalCallProfile({audio:!0,audioActive:!0,video:!0,videoActive:!0}):bt.mediaTypeForIncomingCall==="AUDIO"?bt.setLocalCallProfile({audio:!0,audioActive:!0,video:!1,videoActive:!1}):bt.mediaTypeForIncomingCall==="VIDEOONLY"?bt.setLocalCallProfile({audio:!1,audioActive:!1,video:!0,videoActive:!0}):bt.mediaTypeForIncomingCall==="NONE"&&bt.setLocalCallProfile({audio:!1,audioActive:!1,video:!1,videoActive:!1}),bt.data&&bt.data.MCUType==="MCU-Callee"&&bt.mediaTypeForIncomingCall==="NONE")return void bt.myWebRTC_Stack.sendInvite(bt.callId,bt.callerId,this.nickname,bt.dest_roomId,bt.dest_roomId,"none",{offer:{type:"no-offer"},data:bt.data});bt.data&&bt.data.MCUType==="MCU-Callee"&&(bt.mediaTypeForOutgoingCall=bt.mediaTypeForIncomingCall,bt.settingUpType="publish",bt.callControl=this.createCallControl({type:"publish",callId:bt.callId,roomName:bt.data.confId,callConfiguration:bt.callConfiguration,data:bt.data}),bt.callControl.sessionId=bt.data.confId,bt.callControl.token=bt.data.confId,bt.callControl.autoRestart.counter=0,bt.setMediaConstraintsToSendOnlyOffer()),this.unidirectionelCallOnly?(an.log("acceptCall() - unidirectional call"),bt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?(an.log("acceptCall with userAcceptOnIncomingCallBeforeGetUserMedia"),Rt.userMediaStreamId?((wt=apiCC.getUserMediaStream(Rt.userMediaStreamId)).addCallInfo(bt.callId),bt.callConfiguration!==void 0&&bt.callConfiguration!==null||(bt.callConfiguration={}),bt.callConfiguration.userMediaStreamId=wt.userMediaStreamId,bt.onUserMediaSuccessOnCall(wt.stream)):bt.getUserMediaOnCall()):bt.accessToMedia===!0||Rt.userMediaStreamId||bt.dataCall?(an.log("acceptCall() :: User has already granted access to local media and AutoAnswer activated : establishing call"),bt.dataCall||Rt.userMediaStreamId&&((wt=apiCC.getUserMediaStream(Rt.userMediaStreamId)).addCallInfo(bt.callId),bt.callConfiguration!==void 0&&bt.callConfiguration!==null||(bt.callConfiguration={}),bt.callConfiguration.userMediaStreamId=wt.userMediaStreamId,bt.callLocalStream=wt.stream),bt.establishCall()):an.log("acceptCall() - call will be established when user accept his media")}else an.log("Call not found")},this.refuseCall=function(it,Rt){an.info("refuseCall for callId :"+it);var bt,wt=null;bt=Rt!==void 0?Rt:"User_Refused_Call",(wt=this.findCallWithCallId(it))!==null?(an.log("Call found"),wt.data.MCUType==="MCU-Callee"?(wt.myWebRTC_Stack.sendBye(wt.callId,wt.callerId,wt.dest_roomId,wt.calleeId,"User_Media_Error",wt.data),this.removeCallFromTableWithCallIdandRemoteId(wt.callId,wt.calleeId,bt)):(wt.myWebRTC_Stack.sendBye(wt.callId,wt.calleeId,wt.dest_roomId,wt.callerId,bt,wt.data),this.removeCallFromTableWithCallIdandRemoteId(wt.callId,wt.callerId,bt)),this.callsTable.length===0&&an.log("No more established calls for client")):an.log("Call not found")},this.stopMedia=function(it){var Rt=this,bt=null,wt=null;return new Promise(function(Et,Mt){var Nt=null,Yt=null;return(Nt=Rt.findCallWithCallId(it))?Nt.callLocalStream?void Nt.removeStream(Nt.callLocalStream).then(function(){return wt=Nt.callLocalStream.id,Nt.callLocalStream=null,(0,ot.ki)(Nt.callConfiguration,"userMediaStreamId","string")&&(bt=Nt.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(Nt.callConfiguration.userMediaStreamId,Nt.callId),delete Nt.callConfiguration.userMediaStreamId),Et({oldUserMediaStreamId:bt,oldMediaStreamId:wt})}).catch(Mt):Et({oldUserMediaStreamId:bt,oldMediaStreamId:wt}):((Yt=Rt.findUserMediaById(it))&&(bt=it,Yt.releaseUserMediaStream()),Et({oldUserMediaStreamId:bt,oldMediaStreamId:wt}))})},this.addMedia=function(it,Rt,bt,wt){var Et=this;an.info("addMedia for callId :"+it);var Mt=null,Nt=null,Yt=null,Qt=function(){return Promise.resolve()},on=function(){return Promise.resolve()};Rt===!0&&(Qt=function(){return Et.stopMedia(it)}),(0,ot.Ym)(bt,"string")&&(Yt=apiCC.getUserMediaStream(bt),bt=null);var nn=function(){an.error("[addMedia] success; userMediaStreamId: "+Yt.userMediaStreamId),Nt.callConfiguration!==void 0&&Nt.callConfiguration!==null||(Nt.callConfiguration={}),Nt.callConfiguration.userMediaStreamId=Yt.userMediaStreamId,Nt.callType=Yt.callType,Nt.audio=Yt.audio,Nt.video=Yt.video,Nt.audioMuted=Yt.audioMuted,Nt.videoMuted=Yt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Nt,!0)},dn=function(Cn){Cn.callConfiguration!==void 0&&Cn.callConfiguration!==null||(Cn.callConfiguration={}),Cn.isLocalAudioMuted&&Cn.isLocalVideoMuted?Cn.callConfiguration.muted="VIDEO":Cn.isLocalAudioMuted?Cn.callConfiguration.muted="AUDIOONLY":Cn.isLocalVideoMuted&&(Cn.callConfiguration.muted="VIDEOONLY")},yn=function(Cn,En,Wn){En==="audio"?Wn?Cn.audioSdpDirection=null:(0,ot.ki)(Cn.remoteCallProfile,"audio","boolean")&&Cn.remoteCallProfile.audio===!0&&Cn.remoteCallProfile.audioActive===!0?Cn.audioSdpDirection="recvonly":Cn.audioSdpDirection="inactive":En==="video"&&(Wn?Cn.videoSdpDirection=null:(0,ot.ki)(Cn.remoteCallProfile,"video","boolean")&&Cn.remoteCallProfile.video===!0&&Cn.remoteCallProfile.videoActive===!0?Cn.videoSdpDirection="recvonly":Cn.videoSdpDirection="inactive")},mn=function(Cn,En,Wn,Fn){Cn.callConfiguration!==void 0&&Cn.callConfiguration!==null||(Cn.callConfiguration={}),Cn.callConfiguration.userMediaStreamId=En.userMediaStreamId,yn(Cn,"audio",En.audio),yn(Cn,"video",En.video),dn(Cn),function(ar,or,nr){or&&nr?(ar.audioOnly=!1,ar.mediaTypeForIncomingCall="VIDEO",ar.mediaTypeForOutgoingCall="VIDEO"):or?(ar.audioOnly=!1,ar.mediaTypeForIncomingCall="AUDIO",ar.mediaTypeForOutgoingCall="AUDIO"):nr?(ar.audioOnly=!1,ar.mediaTypeForIncomingCall="VIDEOONLY",ar.mediaTypeForOutgoingCall="VIDEOONLY"):(ar.audioOnly=!1,ar.mediaTypeForIncomingCall="NONE",ar.mediaTypeForOutgoingCall="NONE")}(Cn,En.audio,En.video),Cn.callLocalStream=En.stream,Cn.started?Cn.addingUserMedia=!0:Et.accessToLocalMedia=!0,Cn.asyncCallbacks={},Cn.asyncCallbacks.type="addingUserMedia",Cn.asyncCallbacks.resolve=Wn,Cn.asyncCallbacks.reject=Fn,Cn.asyncCallbacks.timeoutId=setTimeout(function(){Cn.asyncCallbacks&&typeof Cn.asyncCallbacks.reject=="function"&&(Cn.asyncCallbacks.reject("addMedia timeout"),delete Cn.asyncCallbacks)},Kn),Cn.establishCall()};if((Mt=this.findCallWithCallId(it))!==null){if(Mt.asyncCallbacks)return Promise.reject("job already ongoing");on=function(){return new Promise(function(Cn,En){Yt?(Yt.addCallInfo(Mt.callId),mn(Mt,Yt,Cn,En)):bt?apiCC.createUserMediaStream({type:"media",callId:Mt.callId,stream:bt,sync:!0,success:function(Wn){an.debug("[addMedia] success; userMediaStreamId: "+Wn.userMediaStreamId),mn(Mt,Wn,Cn,En)},failure:function(Wn,Fn){return En(Fn)}}):(0,ot.ki)(wt,"getUserMediaStreamId","function")?wt.getUserMediaStreamId().then(function(Wn){if(!(Yt=apiCC.getUserMediaStream(Wn)))return En("wrong userMediaStreamId");Yt.addCallInfo(Mt.callId),mn(Mt,Yt,Cn,En)}).catch(En):apiCC.userMediaStreamTable.length>0?((Yt=apiCC.userMediaStreamTable[0]).addCallInfo(Mt.callId),mn(Mt,Yt,Cn,En)):(dn(Mt),Mt.addingUserMedia=!0,Mt.asyncCallbacks={},Mt.asyncCallbacks.type="addingUserMedia",Mt.asyncCallbacks.resolve=Cn,Mt.asyncCallbacks.reject=En,Mt.asyncCallbacks.timeoutId=setTimeout(function(){Mt.asyncCallbacks&&typeof Mt.asyncCallbacks.reject=="function"&&(Mt.asyncCallbacks.reject("addMedia timeout"),delete Mt.asyncCallbacks)},Kn),Mt.getUserMediaOnCall())})}}else if(Nt=this.findUserMediaById(it)){if(Nt.addingUserMedia===!0)return Promise.reject("addMedia already ongoing");on=function(){return new Promise(function(Cn,En){Nt.addingUserMedia=!0,new Promise(function(Wn,Fn){if(Yt)return Yt.addCallInfo(Nt.userMediaId,"userMedia"),Nt.callConfiguration!==void 0&&Nt.callConfiguration!==null||(Nt.callConfiguration={}),Nt.callConfiguration.userMediaStreamId=Yt.userMediaStreamId,Nt.callType=Yt.callType,Nt.audio=Yt.audio,Nt.video=Yt.video,Nt.audioMuted=Yt.audioMuted,Nt.videoMuted=Yt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Nt,!0),Wn(Yt.userMediaStreamId);if(bt)apiCC.createUserMediaStream({callId:Nt.userMediaId,callFlavor:"userMedia",type:Nt.callType,stream:bt,sync:!0,success:function(){return nn(),Wn(Yt.userMediaStreamId)},failure:function(ar,or){return Fn(or)}});else if((0,ot.ki)(wt,"getUserMediaStreamId","function"))wt.getUserMediaStreamId().then(function(ar){return(Yt=apiCC.getUserMediaStream(ar))?(Yt.addCallInfo(Nt.userMediaId,"userMedia"),Nt.callConfiguration!==void 0&&Nt.callConfiguration!==null||(Nt.callConfiguration={}),Nt.callConfiguration.userMediaStreamId=Yt.userMediaStreamId,Nt.callType=Yt.callType,Nt.audio=Yt.audio,Nt.video=Yt.video,Nt.audioMuted=Yt.audioMuted,Nt.videoMuted=Yt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Nt,!0),Wn(Yt.userMediaStreamId)):Fn("wrong userMediaStreamId")}).catch(Fn);else{if(apiCC.userMediaStreamTable.length>0)return(Yt=apiCC.userMediaStreamTable[0]).addCallInfo(Nt.userMediaId,"userMedia"),Nt.callConfiguration!==void 0&&Nt.callConfiguration!==null||(Nt.callConfiguration={}),Nt.callConfiguration.userMediaStreamId=Yt.userMediaStreamId,Nt.callType=Yt.callType,Nt.audio=Yt.audio,Nt.video=Yt.video,Nt.audioMuted=Yt.audioMuted,Nt.videoMuted=Yt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Nt,!0),Wn(Yt.userMediaStreamId);apiCC.createUserMediaStream({callId:Nt.userMediaId,callFlavor:"userMedia",type:Nt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(){return nn(),Wn(Yt.userMediaStreamId)},failure:function(ar,or){return Fn(or)}})}}).then(function(Wn){return function(Fn){return new Promise(function(ar,or){for(var nr=[],ur=0;ur<apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;ur+=1){var mr=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[ur];if(mr.data!==void 0&&mr.data.mesh!==void 0&&mr.data.mesh.calleeCallId===it){var wr=apiCC.session.apiCCWebRTCClient.webRTCClient.addMedia(mr.callId,!0,Fn);nr.push(wr.userMediaStreamId)}}Promise.all(nr).then(function(){return ar(Fn)}).catch(or)})}(Wn)}).then(function(Wn){return delete Nt.addingUserMedia,Cn(Wn)}).catch(function(Wn){return delete Nt.addingUserMedia,En(Wn)})})}}else on=function(){return Promise.reject("no suitable replacement")};return new Promise(function(Cn,En){var Wn=null,Fn=null;Qt().then(function(ar){return Wn=ar.oldUserMediaStreamId,Fn=ar.oldMediaStreamId,on()}).then(function(ar){return an.info("addMedia success; userMediaStreamId: "+ar),Cn({userMediaStreamId:ar,oldUserMediaStreamId:Wn,oldMediaStreamId:Fn})}).catch(function(ar){an.error("addMedia failure: "+ar);var or=null,nr=null;return Mt?(Mt.callControl&&(or=Mt.callControl.roomName,nr=Mt.callControl.type),zn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",Mt.callId,or,nr)):Nt&&zn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",Nt.userMediaId,null,"publish"),En(ar)})})},this.updateMediaDeviceOnCall=function(it,Rt){return an.info("updateMediaDeviceOnCall for callId :"+it),this.addMedia(it,!0,Rt),it},this.updateMediaTypeOnCall=function(it,Rt){var bt=function(Mt,Nt,Yt){return new Promise(function(Qt,on){var nn,dn={};Mt.callControl.mediaType=Yt,Mt.mediaType=Yt,Mt.data.mediaType=Yt,Mt.updateCause="userAction",dn.type="update",dn.mode="passive",dn.callId=Mt.callId,dn.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,dn.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,dn.calleeId=Mt.sessionMCU.roomName,dn.roomId=Mt.sessionMCU.roomName,dn.callType=Nt.attributes.callType,dn.data=(0,ot.S6)(Mt.data),dn.data.type="subscribe",dn.stream=Nt,nn=JSON.stringify(dn),an.log("C->S: "+nn),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("update",nn),Mt.asyncCallbacks={},Mt.asyncCallbacks.type="updateMediaType",Mt.asyncCallbacks.resolve=Qt,Mt.asyncCallbacks.reject=on,Mt.asyncCallbacks.timeoutId=setTimeout(function(){Mt.asyncCallbacks&&typeof Mt.asyncCallbacks.reject=="function"&&(Mt.asyncCallbacks.reject("timeout"),delete Mt.asyncCallbacks)},2e4)})},wt=this.findCallWithCallId(it);if(!wt)return Promise.reject("call not found");if(wt.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(wt.asyncCallbacks)return Promise.reject("job already ongoing");var Et=this.MCUClient.getStreamFromList(wt.streamId);if(!Et)return Promise.reject("wrong streamId");if(wt.callControl.mediaType==="VIDEO"){if(Rt==="AUDIOONLY"&&Et.audio||Rt==="VIDEOONLY"&&Et.video)return bt(wt,Et,Rt)}else if(wt.callControl.mediaType==="AUDIOONLY"){if(Rt==="VIDEO"&&Et.video||Rt==="VIDEOONLY"&&Et.video)return bt(wt,Et,Rt)}else if(wt.callControl.mediaType==="VIDEOONLY"&&(Rt==="VIDEO"&&Et.video||Rt==="AUDIOONLY"&&Et.audio))return bt(wt,Et,Rt);return Promise.reject("wrong mediaType")},this.updateSimulcastFeedOnCall=function(it,Rt){var bt=this.findCallWithCallId(it);if(!bt)return Promise.reject("call not found");if(bt.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(bt.asyncCallbacks)return Promise.reject("job already ongoing");var wt=this.MCUClient.getStreamFromList(bt.streamId);if(!wt)return Promise.reject("wrong streamId");if(!Rt)return Promise.reject("wrong simulcast");bt.callControl.callConfiguration.simulcast||(bt.callControl.callConfiguration.simulcast={}),bt.data.simulcast||(bt.data.simulcast={}),Rt.streamQuality&&(Rt.streamQuality==="high"?(bt.callControl.callConfiguration.simulcast.substream=2,bt.data.simulcast.substream=2):Rt.streamQuality==="medium"?(bt.callControl.callConfiguration.simulcast.substream=1,bt.data.simulcast.substream=1):Rt.streamQuality==="low"?(bt.callControl.callConfiguration.simulcast.substream=0,bt.data.simulcast.substream=0):(bt.callControl.callConfiguration.simulcast.substream=-1,bt.data.simulcast.substream=-1)),Rt.streamFrameRate&&(Rt.streamFrameRate==="high"?(bt.callControl.callConfiguration.simulcast.temporal=2,bt.data.simulcast.temporal=2):Rt.streamFrameRate==="medium"?(bt.callControl.callConfiguration.simulcast.temporal=1,bt.data.simulcast.temporal=1):Rt.streamFrameRate==="low"?(bt.callControl.callConfiguration.simulcast.temporal=0,bt.data.simulcast.temporal=0):(bt.callControl.callConfiguration.simulcast.temporal=-1,bt.data.simulcast.temporal=-1));var Et={type:"updateSimulcastFeed"};Et.callId=bt.callId,Et.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.calleeId=bt.sessionMCU.roomName,Et.roomId=bt.sessionMCU.roomName,Et.callType=wt.attributes.callType,Et.data=(0,ot.S6)(bt.data),Et.stream=wt;var Mt=JSON.stringify(Et);return an.log("C->S: "+Mt),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("updateSimulcastFeed",Mt),Promise.resolve()},this.updateCallConfigurationOnCall=function(it,Rt){var bt=function(Et,Mt,Nt){Mt==="audio"?Et.audioSdpDirection=Nt?null:"inactive":Mt==="video"&&(Et.videoSdpDirection=Nt?null:"inactive")},wt=this.findCallWithCallId(it);return wt?wt.settingUpType!=="publish"?Promise.reject("wrong call type"):wt.asyncCallbacks?Promise.reject("job already ongoing"):((0,ot.Ym)(Rt,"object")||(Rt={}),(0,ot.ki)(Rt,"audioOnly","boolean")||(Rt.audioOnly=!1),(0,ot.ki)(Rt,"videoOnly","boolean")||(Rt.videoOnly=!1),function(Et,Mt){return new Promise(function(Nt,Yt){Et.mediaTypeForIncomingCall="NONE",Mt.audioOnly===!0?(an.log("Setting call as audioOnly"),Et.audioOnly=!0,Et.callType="audio",Et.mediaTypeForOutgoingCall="AUDIO",bt(Et,"audio",!0),bt(Et,"video",!1)):Mt.videoOnly===!0?(an.log("Setting call as videoOnly"),Et.audioOnly=!1,Et.callType="videoOnly",Et.mediaTypeForOutgoingCall="VIDEOONLY",bt(Et,"audio",!1),bt(Et,"video",!0)):(an.log("Setting call as media"),Et.audioOnly=!1,Et.callType="media",Et.mediaTypeForOutgoingCall="VIDEO",bt(Et,"audio",!0),bt(Et,"video",!0)),Et.updateUserMedia=!0,Et.updateCause="userAction",Et.establishCall(),Et.asyncCallbacks={},Et.asyncCallbacks.type="updateCallConfiguration",Et.asyncCallbacks.resolve=Nt,Et.asyncCallbacks.reject=Yt,Et.asyncCallbacks.timeoutId=setTimeout(function(){Et.asyncCallbacks&&typeof Et.asyncCallbacks.reject=="function"&&(Et.asyncCallbacks.reject("timeout"),delete Et.asyncCallbacks)},2e4)})}(wt,Rt)):Promise.reject("call not found")},this.findUserMediaById=function(it){for(var Rt=this.userMediaTable.length;--Rt>=0;)if(this.userMediaTable[Rt].userMediaId===it)return this.userMediaTable[Rt];return null},this.findCallIndexWithCallIdAndRemoteId=function(it,Rt){an.debug("findCallIndexWithCallIdAndRemoteId");var bt,wt=this.callsTable.length;for(an.trace("callsNumber : "+wt),bt=0;bt<wt;bt+=1)if(this.callsTable[bt].callId===it&&(an.log("callId found"),an.log("this.callsTable[i].callee :"+this.callsTable[bt].callee),an.log("this.callsTable[i].calleeId :"+this.callsTable[bt].calleeId),this.callsTable[bt].callee===!0&&this.callsTable[bt].callerId===Rt||this.callsTable[bt].callee===!1&&this.callsTable[bt].calleeId===Rt))return bt;return an.log("Call not found"),-1},this.findCallIndexWithConfIdAndRemoteId=function(it,Rt){an.debug("findCallIndexWithConfIdAndRemoteId"),an.log("confId :"+it),an.log("remoteId :"+Rt);var bt,wt=this.callsTable.length;for(bt=0;bt<wt;bt+=1)if(an.log("this.callsTable[i].data.confId :"+this.callsTable[bt].data.confId),this.callsTable[bt].data.confId===it){if(this.callsTable[bt].callee===!0&&this.callsTable[bt].callerId===Rt||this.callsTable[bt].callee===!1&&this.callsTable[bt].calleeId===Rt)return bt}else an.debug("ConfId is different");return an.debug("Call not found - findCallIndexWithConfIdAndRemoteId"),-1},this.findCallIndexWithCallId=function(it){an.debug("findCallIndexWithCallId");var Rt,bt=this.callsTable.length;for(Rt=0;Rt<bt;Rt+=1)if(this.callsTable[Rt].callId===it)return an.log("Call found with callId"),Rt;return an.debug("Call not found - findCallIndexWithCallId"),-1},this.findCallWithCallIdAndInstanceId=function(it,Rt){an.debug("findCallWithCallIdAndInstanceId :"+it+" ,instanceId : "+Rt),Rt===void 0&&an.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var bt,wt=this.callsTable.length;for(an.trace("callsNumber :"+wt),bt=0;bt<wt;bt+=1)if(this.callsTable[bt].callId===it&&this.callsTable[bt].instanceId===Rt)return this.callsTable[bt];return an.debug("Call not found, findCallWithCallIdAndInstanceId"),null},this.findCallIndexWithCallIdAndInstanceId=function(it,Rt){an.debug("findCallIndexWithCallIdAndInstanceId :"+it+" ,instanceId : "+Rt),Rt===void 0&&an.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var bt,wt=this.callsTable.length;for(an.trace("callsNumber :"+wt),bt=0;bt<wt;bt+=1)if(this.callsTable[bt].callId===it&&this.callsTable[bt].instanceId===Rt)return bt;return an.debug("Call not found, findCallIndexWithCallIdAndInstanceId"),-1},this.findCallWithCallId=function(it){an.trace("findCallWithCallId :"+it);var Rt,bt=this.callsTable.length;for(an.trace("callsNumber :"+bt),Rt=0;Rt<bt;Rt+=1)if(an.trace("this.callsTable[i].callId :"+this.callsTable[Rt].callId),this.callsTable[Rt].callId===it)return this.callsTable[Rt];return an.debug("Call not found"),null},this.findCallWithStreamId=function(it,Rt){an.debug("findCallWithStreamId :"+it);var bt,wt=!(!Rt||!Rt.ignoreModeChangeKindOld),Et=this.callsTable.length;for(an.trace("callsNumber :"+Et),bt=0;bt<Et;bt+=1)if(an.log("this.callsTable[i].streamId :"+this.callsTable[bt].streamId),!(this.callsTable[bt].streamId!=it||wt&&this.callsTable[bt].sessionMCU&&this.callsTable[bt].sessionMCU.modeChangeKind==="old"))return an.log("Call found"),this.callsTable[bt];return an.log("Call not found"),null},this.findCallWithCallIdAndRemoteIdAndInstanceId=function(it,Rt,bt){an.debug("findCallWithCallIdAndRemoteIdAndInstanceId callId : "+it+" ,instanceId : "+bt);var wt,Et=this.callsTable.length;for(an.trace("callsNumber :"+Et),wt=0;wt<Et;wt+=1)if(this.callsTable[wt].callId===it&&this.callsTable[wt].instanceId===bt&&(this.callsTable[wt].callee===!0&&this.callsTable[wt].callerId===Rt||this.callsTable[wt].callee===!1&&this.callsTable[wt].calleeId===Rt))return this.callsTable[wt];return an.debug("Call not found"),null},this.findCallWithCallIdAndRemoteId=function(it,Rt){an.log("findCallWithCallIdAndRemoteId");var bt,wt=this.callsTable.length;for(an.trace("callsNumber :"+wt),bt=0;bt<wt;bt+=1)if(this.callsTable[bt].callId===it&&(this.callsTable[bt].callee===!0&&this.callsTable[bt].callerId===Rt||this.callsTable[bt].callee===!1&&this.callsTable[bt].calleeId===Rt))return this.callsTable[bt];return an.log("Call not found"),null},this.releaseUserMedia=function(){an.info("releaseUserMedia"),this.localStream!==null&&(an.log("stopping localStream"),this.stopStream(this.localStream),zn.createUserMediaStopEvent(null,"media"),this.accessToLocalMedia=!1,this.autoAnswer=!1,an.log("this.autoAnswer :"+this.autoAnswer)),this.screenStream!==null&&this.screenStream!==void 0&&(an.log("stopping screenStream"),this.stopStream(this.screenStream),zn.createUserMediaStopEvent(null,"screen"))},this.startDataChannelOnCall=function(it){an.info("startDataChannelOnCall with callId :"+it);var Rt=this.findCallWithCallId(it);Rt?(an.log("Call found with callId :",it),Rt.addingDataChannelOnCallOngoing=!0,Rt.createDataChannel()):an.log("Call not found")},this.sendDataWithCallId=function(it,Rt,bt){an.info("sendDataWithCallId :"+it);var wt=this.findCallWithCallId(it);wt?(an.log("Call found with callId :",it),wt.sendData(Rt,bt)):an.log("Call not found")},this.processDataAck=function(it){an.debug("processDataAck",it);var Rt=this.findCallWithCallId(it.callId);if(Rt)if(it.result==="ok")if((0,ot.ki)(it,"capabilities","object")&&(0,ot.ki)(it.capabilities,"dataEndAckEnabled","boolean")&&(Rt.dataEndAckEnabled=it.capabilities.dataEndAckEnabled,an.debug("dataEndAckEnabled",Rt.dataEndAckEnabled)),it.state==="complete")Rt.beginTimeoutId&&(clearTimeout(Rt.beginTimeoutId),delete Rt.beginTimeoutId),Rt.callbacks.success({state:"complete",filename:Rt.data.filename,size:Rt.data.size,mediaURL:it.mediaURL,mediaId:it.mediaId}),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Rt.callId);else if(it.state==="incomplete"){var bt,wt,Et=131072,Mt=[],Nt=Math.floor(Rt.data.size/Et),Yt=Rt.data.size%Et;for(bt=0;bt<Nt;bt+=1)(wt=jn("checksum64")).update(Rt.fileContent,bt*Et,Et),Mt.push(wt.digest("hex"));if(Yt>0&&((wt=jn("checksum64")).update(Rt.fileContent,Nt*Et,Yt),Mt.push(wt.digest("hex"))),an.debug(JSON.stringify(Mt)),it.checksums.length===Mt.length){for(bt=0;bt<Mt.length&&it.checksums[bt]===Mt[bt];bt+=1);Rt.data.offset=Et*bt}Rt.mediaURL=it.mediaURL,Rt.mediaId=it.mediaId,Rt.establishCall()}else it.state==="missing"?(Rt.mediaURL=it.mediaURL,Rt.mediaId=it.mediaId,Rt.establishCall()):it.state==="ready"?Rt.establishCall():(an.debug("wrong state "+it.state),Rt.beginTimeoutId&&(clearTimeout(Rt.beginTimeoutId),delete Rt.beginTimeoutId),Rt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Rt.callId));else an.debug("wrong result "+it.result),Rt.beginTimeoutId&&(clearTimeout(Rt.beginTimeoutId),delete Rt.beginTimeoutId),Rt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Rt.callId);else an.debug("no such call",it.callId)},this.processDataEndAck=function(it){an.debug("processDataEndAck",it);var Rt=this.findCallWithCallId(it.callId);if(Rt){var bt=null;if(!Rt.dcfs){if(!Rt.data||Rt.data.transferType!=="pipeline")return void an.debug("not pipeline");an.debug("pipeline"),bt=Rt,Rt.clientCall?(an.debug("resolve client call"),Rt=Rt.clientCall):(an.debug("no client call"),Rt=null)}Rt&&(Rt.success&&it.data&&(Rt.success.data=it.data),it.result==="ok"?(it.complete===!0||(delete Rt.success,Rt.failure="transferIncomplete"),Rt.dcfs.terminateTransfer()):it.result==="error"&&(delete Rt.success,Rt.failure=it.errorInfo,Rt.dcfs.terminateTransfer())),bt&&it.result==="error"&&(an.debug("error on pipeline"),bt.failure=it.errorInfo,zn.createEvent({eventType:"onFileSended",callId:bt.callId,remoteId:bt.remoteId,name:bt.filename,error:bt.failure}),bt.callbacks.failure(bt.failure),this.onHangup(bt.callId))}else an.debug("no such call",it.callId)},this.pushData=function(it,Rt,bt,wt){var Et=this;if(!(0,ot.Ym)(Rt,"object")||((Rt=Object.assign({},Rt)).transferType||(Rt.transferType="file"),Rt.transferType==="file"&&!it)||Rt.transferType!=="file"&&Rt.transferType!=="pipeline"&&Rt.transferType!=="plugin"||!(Rt.transferType!=="plugin"||Rt.pluginName&&Rt.pluginData))return null;(0,ot.Ym)(wt,"object")||(wt={}),typeof wt.pending!="function"&&(wt.pending=function(){}),typeof wt.progress!="function"&&(wt.progress=function(){}),typeof wt.success!="function"&&(wt.success=function(){}),typeof wt.failure!="function"&&(wt.failure=function(){});var Mt=new gn(apiCC.session.apiCCWebRTCClient.webRTCClient);if(Mt.generateCallId(),Mt.instanceId=apiCC.generateInstanceId(),Mt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Mt.calleeId="dataChannelConnector",Mt.dest_roomId="dataChannelConnector",Mt.callType="data",Mt.dataCall=!0,Mt.remoteId="dataChannelConnector",Rt.pipelineCallId&&(Mt.pipelineCallId=Rt.pipelineCallId),Mt.data={},Mt.data.pubSub="dataChannelConnector",Mt.data.transferType=Rt.transferType,Rt.transferType==="pipeline"?(Rt.checksumEnabled=!1,Mt.transferCount=0):Rt.transferType==="plugin"&&(Rt.checksumEnabled=!1,Mt.data.pluginName=Rt.pluginName,Mt.data.pluginData=Object.assign({},Rt.pluginData),Mt.data.pluginData.headers&&(Mt.data.pluginData.headers=Object.assign({},Mt.data.pluginData.headers)),Mt.data.pluginData.data&&(Mt.data.pluginData.data=Object.assign({},Mt.data.pluginData.data)),Mt.data.pluginData.formData&&(Mt.data.pluginData.formData=Object.assign({},Mt.data.pluginData.formData))),(0,ot.ki)(Rt,"context","object"))try{JSON.stringify(Rt.context),Mt.data.context=Object.assign({},Rt.context)}catch{}if(Rt.overwrite===!0&&(Mt.data.overwrite=!0),(0,ot.Ym)(Rt,"ttl","number")&&Rt.ttl>0&&(Mt.data.ttl=Rt.ttl),Mt.data.instanceId=Mt.instanceId,it&&(Mt.data.cloudConvId=it),Mt.callbacks=wt,bt!=null&&bt.turnServerAddress!==void 0&&bt.turnServerAddress!==null&&Mt.setCallTurnServer(bt.turnServerAddress),Mt.data.transferType==="pipeline")Mt.data.size=0,Mt.pushDataStatus={type:"pipeline",state:"pending",data:Rt},this.callsTable.push(Mt),setTimeout(function(){Et.startNextPushData()});else if((0,ot.Ym)(Rt,"file","object")&&(Rt.file instanceof File||Rt.file.constructor===File||Rt.asFile===!0))(0,ot.Ym)(Rt,"filename","string")?Mt.data.filename=Rt.filename:Mt.data.filename=Rt.file.name,(0,ot.Ym)(Rt,"filetype","string")?Mt.data.contentType=Rt.filetype:Mt.data.contentType=Rt.file.type,(0,ot.Ym)(Rt,"sourceType","string")&&Rt.sourceType.length>0&&(Mt.data.sourceType=Rt.sourceType),Mt.data.size=Rt.file.size,Mt.data.metadata=Rt.metadata,Mt.pushDataStatus={type:"file",state:"pending",convId:String(it),data:Rt},this.callsTable.push(Mt),setTimeout(function(){Et.startNextPushData()});else{if(!(0,ot.Ym)(Rt,"buffer","object")||!(Rt.buffer instanceof ArrayBuffer||Rt.buffer.constructor===ArrayBuffer||Rt.asBuffer===!0)||!(0,ot.Ym)(Rt,"filename","string")||!(0,ot.Ym)(Rt,"filetype","string"))return null;Mt.data.filename=Rt.filename,Mt.data.contentType=Rt.filetype,(0,ot.Ym)(Rt,"sourceType","string")&&Rt.sourceType.length>0&&(Mt.data.sourceType=Rt.sourceType),Mt.data.size=Rt.buffer.byteLength,Mt.data.metadata=Rt.metadata,Mt.pushDataStatus={type:"buffer",state:"pending",convId:String(it),data:Rt},this.callsTable.push(Mt),setTimeout(function(){Et.startNextPushData()})}return Mt.callId},this.startNextPushData=function(){for(var it=this,Rt=[],bt=0;bt<this.callsTable.length;bt+=1){var wt=this.callsTable[bt];if(wt.callType==="data"&&wt.dataCall&&wt.remoteId==="dataChannelConnector"&&wt.pushDataStatus){if(wt.pushDataStatus.state==="ready")continue;Rt.push(wt)}}if(Rt.length===0)return!1;var Et=null;Rt[0].pushDataStatus.state==="active"?Rt.splice(0,1):Rt[0].pushDataStatus.state==="pending"&&(Et=Rt[0],Rt.splice(0,1));for(var Mt=0;Mt<Rt.length;Mt+=1){var Nt=Rt[Mt];Nt.pushDataStatus.rank!==Mt&&(Nt.pushDataStatus.rank=Mt,zn.createEvent({eventType:"onFilePending",callId:Nt.callId,remoteId:Nt.remoteId,name:Nt.data.filename,rank:Mt}),Nt.callbacks.pending({state:"pending",callId:Nt.callId,rank:Mt}))}if(!Et)return!1;an.debug("startNextPushData",Et.callId);var Yt=Et.pushDataStatus.data;if(delete Et.pushDataStatus.data,Et.pushDataStatus.type==="pipeline"){Et.pushDataStatus.state="active";var Qt={type:"pushData",callerId:apiCC.session.apiCCId,callId:Et.callId,data:Et.data},on=JSON.stringify(Qt);return an.debug("C->S: "+on),apiCC.session.channel.socket.emit("pushData",on),!0}if(Et.pushDataStatus.type==="file"){Et.pushDataStatus.state="active";var nn=new FileReader;nn.onload=function(dn){apiCC.session.apiCCWebRTCClient.webRTCClient.startPushData(Et,Yt,dn.target.result)},nn.readAsArrayBuffer(Yt.file)}else{if(Et.pushDataStatus.type!=="buffer")return an.error("startNextPushData - wrong type"),Et.callbacks.failure("start",Et.callId),this.onHangup(Et.callId),!1;Et.pushDataStatus.state="active",this.startPushData(Et,Yt,Yt.buffer)}return Et.beginTimeoutId=setTimeout(function(){delete Et.beginTimeoutId,Et.callbacks.failure("timeout",Et.callId),it.onHangup(Et.callId)},2e4),!0},this.startPushData=function(it,Rt,bt){if(it.fileContent=new Uint8Array(bt),it.pipelineCallId){var wt=this.findCallWithCallId(it.pipelineCallId);if(!wt)return an.error("no such pipeline call"),void this.onHangup(it.callId);it.pipelineCall=wt,wt.clientCall=it,it.sendDataChannel=wt.sendDataChannel;var Et=wt.transferCount===0?100:0;it.startTransfer({delay:Et}),wt.transferCount+=1}else{if(!Object.prototype.hasOwnProperty.call(Rt,"checksumEnabled")||Rt.checksumEnabled){var Mt=jn("checksum64");Mt.update(it.fileContent),it.data.checksum=Mt.digest("hex")}else it.data.checksumEnabled=!1;var Nt={type:"pushData",callerId:apiCC.session.apiCCId,convId:it.pushDataStatus.convId,callId:it.callId,data:it.data},Yt=JSON.stringify(Nt);an.debug("C->S: "+Yt),apiCC.session.channel.socket.emit("pushData",Yt)}},this.cancelPushData=function(it){for(var Rt=null,bt=this.callsTable.length;--bt>=0;){var wt=this.callsTable[bt];if(wt.callId===it&&wt.callType==="data"&&wt.dataCall&&wt.remoteId==="dataChannelConnector"&&wt.pushDataStatus){Rt=wt;break}}if(!Rt)return an.error("cancelPushData - no such call",it),"no such call";if(Rt.pushDataStatus.state==="pending")zn.createEvent({eventType:"onFileSended",callId:Rt.callId,remoteId:Rt.remoteId,name:Rt.data.filename,error:"canceled"}),Rt.callbacks.failure("canceled"),this.onHangup(Rt.callId);else if(Rt.pushDataStatus.state==="active")this.onHangup(Rt.callId);else{if(Rt.pushDataStatus.state!=="ready")return an.error("cancelPushData - wrong state"),"wrong state";Rt.clientCall&&this.cancelPushData(Rt.clientCall.callId),Rt.success={state:"complete"},zn.createEvent({eventType:"onFileSended",callId:Rt.callId,remoteId:Rt.remoteId}),Rt.callbacks.success(Rt.success),this.onHangup(Rt.callId)}return null},this.setVideoBandwidth=function(it,Rt,bt){if(typeof it=="number"){var wt=!1,Et=!1;if(Rt==="overall"?bt==="incoming"?it>0?(this.videoBandwidthSettings.overallIncoming=it,wt=!0):(delete this.videoBandwidthSettings.overallIncoming,wt=!0):bt==="outgoing"&&(it>0?(this.videoBandwidthSettings.overallOutgoing=it,wt=!0,Et=!0):(delete this.videoBandwidthSettings.overallOutgoing,wt=!0,Et=!0)):Rt==="perCall"?bt==="incoming"?it>0?(this.videoBandwidthSettings.perCallIncoming=it,wt=!0):(delete this.videoBandwidthSettings.perCallIncoming,wt=!0):bt==="outgoing"&&(it>0?(this.videoBandwidthSettings.perCallOutgoing=it,wt=!0,Et=!0):(delete this.videoBandwidthSettings.perCallOutgoing,wt=!0,Et=!0)):Rt==="remote"&&(this.videoRemoteBandwidth=it),wt)for(var Mt=this.MCUClient.sessionMCUs.length;--Mt>=0;){var Nt={type:"info",infoType:"setVideoBandwidthSettings",data:{clientId:this.clientId,roomId:this.MCUClient.sessionMCUs[Mt].roomName,pubSub:this.MCUClient.pubConnector,videoBandwidthSettings:this.videoBandwidthSettings}},Yt=JSON.stringify(Nt);an.log("C->S: "+Yt),apiCC.session.channel.socket.emit("info",Yt)}Et&&this.evalOutgoingVideoBandwithCap()}else an.error("Unvalid target bandwidth usage value needs to be a number :",it)},this.setAudioBandwidth=function(it){this.audioBandwidth=it},this.setDataBandwidth=function(it){this.dataBandwidth=it},this.processCheckCallStatus=function(it){this.MCUClient.processCheckCallStatus(it);var Rt={type:"updateCallStatus",clientId:this.clientId,data:{}};it.data.pubSub&&(Rt.data.pubSub=it.data.pubSub),Rt.sessions=[];for(var bt=0;bt<this.MCUClient.sessionMCUs.length;bt+=1)Rt.sessions.push(this.MCUClient.createSessionDescriptor(this.MCUClient.sessionMCUs[bt]));Rt.calls=[];for(var wt=0;wt<this.userMediaTable.length;wt+=1){var Et=this.userMediaTable[wt];Rt.calls.push({callId:Et.userMediaId,callType:Et.callType,remoteId:Et.remoteId,roomId:Et.roomId,data:Et.data,meshPublish:!0})}for(var Mt=0;Mt<this.callsTable.length;Mt+=1){var Nt=this.callsTable[Mt];Rt.calls.push({callId:Nt.callId,callType:Nt.callType,remoteId:Nt.remoteId,roomId:Nt.roomId,data:Nt.data,remoteStream:Nt.mcuRemoteStream})}var Yt=JSON.stringify(Rt);apiCC.session.channel.socket.emit("updateCallStatus",Yt)},this.processRemoteStreamAdded=function(it,Rt){if(it.sessionMCU&&it.sessionMCU.modeChangeKind==="new"){an.debug("processRemoteStreamAdded, call with callId :",it.callId);var bt=this.MCUClient.getSessionMCU(null,{callback:function(Et){return Et.roomName===it.sessionMCU.roomName&&Et.modeChangeKind==="old"}});if(!bt)return void an.error("wrong roomId: no such old session");an.debug("oldSessionMCU",bt);for(var wt=this.callsTable.length;--wt>=0;)if(this.callsTable[wt].sessionMCU===bt&&(0,ot.ki)(this.callsTable[wt],["mcuRemoteStream","attributes","callId"],"string")&&this.callsTable[wt].mcuRemoteStream.attributes.callId===it.mcuRemoteStream.attributes.callId){an.debug("processRemoteStreamAdded: bye",this.callsTable[wt]),this.removeCallFromTableWithCallIdAndSendBye(this.callsTable[wt].callId);break}}},this.processDistantCallEstablished=function(it){if(an.debug("processDistantCallEstablished",it),(0,ot.ki)(it,["descriptor","callFeed","callId"],"string"))if(it.descriptor.callFeed.clientId===this.clientId){var Rt=null;if(it.descriptor.callMode==="mesh"?Rt=this.MCUClient.getSessionMCU(null,{callback:function(Fn){return Fn.roomName===it.descriptor.roomId&&Fn.roomMode==="mesh"}}):it.descriptor.callMode==="sfu"&&(Rt=this.MCUClient.getSessionMCU(null,{callback:function(Fn){return Fn.roomName===it.descriptor.roomId&&!Fn.hasOwnProperty("roomMode")}})),Rt){an.debug("sessionMCU",Rt);var bt=null,wt=null;if(it.descriptor.callMode==="mesh"?(bt=this.findUserMediaById(it.descriptor.callFeed.callId),an.debug("userMedia",bt)):(wt=this.findCallWithCallId(it.descriptor.callFeed.callId))?an.debug("call found with callId :",wt.callId):an.debug("no call found with callId :",it.descriptor.callFeed.callId),it.active){if(!bt&&!wt)return void an.debug("wrong callId: no such call");for(var Et=this.MCUClient.distantCalls.length;--Et>=0&&(this.MCUClient.distantCalls[Et].roomId!==it.descriptor.roomId||this.MCUClient.distantCalls[Et].clientId!==it.descriptor.clientId||this.MCUClient.distantCalls[Et].callId!==it.descriptor.callId););if(Et>=0){if(!this.MCUClient.distantCalls[Et].early)return void an.debug("processDistantCallEstablished: descriptor already exists");an.debug("processDistantCallEstablished: replace early descriptor",this.MCUClient.distantCalls[Et],it.descriptor),this.MCUClient.distantCalls[Et]=it.descriptor}else an.debug("processDistantCallEstablished: add descriptor",it.descriptor),this.MCUClient.distantCalls.push(it.descriptor)}else if(Rt.modeChangeKind==="old"){for(var Mt=this.MCUClient.distantCalls.length;--Mt>=0;)if(this.MCUClient.distantCalls[Mt].roomId===it.descriptor.roomId&&this.MCUClient.distantCalls[Mt].clientId===it.descriptor.clientId&&this.MCUClient.distantCalls[Mt].callId===it.descriptor.callId){an.debug("processDistantCallEstablished: set descriptor to removed",this.MCUClient.distantCalls[Mt]),this.MCUClient.distantCalls[Mt].removed=!0;break}}else for(var Nt=this.MCUClient.distantCalls.length;--Nt>=0;)if(this.MCUClient.distantCalls[Nt].roomId===it.descriptor.roomId&&this.MCUClient.distantCalls[Nt].clientId===it.descriptor.clientId&&this.MCUClient.distantCalls[Nt].callId===it.descriptor.callId){an.debug("processDistantCallEstablished: remove descriptor",this.MCUClient.distantCalls[Nt]),this.MCUClient.distantCalls.splice(Nt,1);break}if(Rt.modeChangeKind==="new"){var Yt=this.MCUClient.getSessionMCU(null,{callback:function(Fn){return Fn.roomName===it.descriptor.roomId&&Fn.modeChangeKind==="old"}});if(!Yt)return void an.error("wrong roomId: no such old session");an.debug("oldSessionMCU",Yt),an.debug("processDistantCallEstablished: replacement");for(var Qt=!1,on=this.userMediaTable.length;--on>=0;){var nn=this.userMediaTable[on];if(nn.sessionMCU===Yt){var dn=!1,yn=0;an.debug("processDistantCallEstablished: userMedia",nn);for(var mn=nn.distantCalls.length;--mn>=0;)nn.distantCalls[mn].replaced?yn+=1:nn.distantCalls[mn].callFeed.callId===it.descriptor.callFeed.callId&&(an.debug("processDistantCallEstablished: distantCall",nn.distantCalls[mn]),dn=!0,nn.distantCalls[mn].replaced=!0,yn+=1);if(dn){if(yn===nn.distantCalls.length){an.debug("processDistantCallEstablished: remove replaced distant call descriptors");for(var Cn=this.MCUClient.distantCalls.length;--Cn>=0;)this.MCUClient.distantCalls[Cn].callMode==="mesh"&&this.MCUClient.distantCalls[Cn].callFeed.callId===nn.userMediaId&&this.MCUClient.distantCalls[Cn].replaced&&(an.debug("processDistantCallEstablished: remove distantCall",this.MCUClient.distantCalls[Cn]),this.MCUClient.distantCalls.splice(Cn,1));an.debug("processDistantCallEstablished: close old calls");for(var En=this.callsTable.slice(),Wn=En.length;--Wn>=0;)(0,ot.ki)(En[Wn].data,"mesh","object")&&En[Wn].data.mesh.calleeCallId===nn.userMediaId&&En[Wn].settingUpType!=="subscribe"&&this.removeCallFromTableWithCallIdAndSendBye(En[Wn].callId);this.MCUClient.meshOnHangup(nn.userMediaId),Qt=!0}break}}}Qt&&this.finalizeMeshToJanusTransition(Yt,Rt)}}else an.debug("wrong roomId: no such session")}else an.debug("wrong clientId: message not intended for self");else an.debug("wrong format: missing callFeed")},this.finalizeMeshToJanusTransition=function(it,Rt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};an.debug("finalizeMeshToJanusTransition");var wt=0,Et=0;if(bt.force===!0){for(var Mt=this.callsTable.slice(),Nt=Mt.length;--Nt>=0;){var Yt=Mt[Nt];Yt.sessionMCU===it&&((Yt.settingUpType==="publish"||Yt.settingUpType==="shareScreen")&&Yt.data&&Yt.data.mesh?this.onHangup(Yt.callId):this.onHangup(Yt.callId,"disconnected"))}for(var Qt=this.userMediaTable.slice(),on=Qt.length;--on>=0;){var nn=Qt[on];nn.sessionMCU===it&&this.onHangup(nn.userMediaId,"disconnected")}}else for(var dn=this.userMediaTable.length;--dn>=0;){var yn=this.userMediaTable[dn];if(yn.sessionMCU===it){wt+=1;for(var mn=0,Cn=yn.distantCalls.length;--Cn>=0;)an.debug("finalizeMeshToJanusTransition: distantCall",yn.distantCalls[Cn]),yn.distantCalls[Cn].replaced&&(mn+=1);mn===yn.distantCalls.length&&(Et+=1)}}wt===Et&&(an.debug("finalizeMeshToJanusTransition: finalize transition"),Rt.transitionTimeoutId&&(clearTimeout(Rt.transitionTimeoutId),delete Rt.transitionTimeoutId),this.MCUClient.removeSessionMCU(it),delete Rt.modeChangeKind,this.MCUClient.transitionCount-=1,this.MCUClient.transitionCount<=0&&this.evalOutgoingVideoBandwithCap(),zn.createMCURoomModeChangedEvent(Rt.roomName,"mesh","sfu","complete"))},this.processConfigureEncodings=function(it){var Rt=this.findCallWithCallId(it.callId);if(Rt&&Object.prototype.hasOwnProperty.call(it,"command")&&Rt.simulcast==="RID"){var bt={};Object.prototype.hasOwnProperty.call(it,"maxBitrate")&&(bt.maxBitrate=it.maxBitrate),Rt.configureSimulcastEncodings(it.command,bt)}},this.processSimulcastFeedChanged=function(it){var Rt=this.findCallWithCallId(it.callId);if(Rt){var bt={};it.substream===2?bt.streamQuality="high":it.substream===1?bt.streamQuality="medium":it.substream===0&&(bt.streamQuality="low"),it.temporal===2?bt.streamFrameRate="high":it.temporal===1?bt.streamFrameRate="medium":it.temporal===0&&(bt.streamFrameRate="low"),Object.keys(bt).length>0&&zn.createSimulcastFeedChanged(Rt.callId,bt)}},this.hasReceiptHook=function(it){if(!it||typeof it!="string")throw new Error("wrong receiptId");return Object.prototype.hasOwnProperty.call(this.receiptHooks,it)},this.createReceiptHook=function(it,Rt){var bt=this;if(this.hasReceiptHook(it))throw new Error("receiptHook already exists");if(!Rt||Rt.fulfilled!==!1)throw new Error("wrong future");Rt.onFulfillment(function(){delete bt.receiptHooks[it]}),this.receiptHooks[it]=Rt},this.finalizeReceiptHookFailure=function(it,Rt){if(an.debug("finalizeReceiptHookFailure",it,Rt),!it||typeof it!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,it))throw new Error("receiptHook does not exist");this.receiptHooks[it].fulfill(Rt)},this.finalizeReceiptHookSuccess=function(it,Rt){if(an.debug("finalizeReceiptHookSuccess",it,Rt),!it||typeof it!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,it))throw new Error("receiptHook does not exist");this.receiptHooks[it].fulfill(null,Rt)},this.processReceipt=function(it){if(it&&Bn(it)==="object"){var Rt=it.receiptId,bt=it.result;if(Rt&&typeof Rt=="string")try{this.finalizeReceiptHookSuccess(Rt,bt)}catch(wt){an.debug("processReceipt: finalizeReceiptHookSuccess",wt)}else an.warn("processReceipt: wrong receiptId")}else an.warn("processReceipt: wrong msg")},this.processError=function(it){var Rt=it.receiptId,bt=it.errorInfo,wt=it.errorCode,Et=it.callId,Mt=it.roomId,Nt=it.convId;if(Rt&&typeof Rt=="string")try{this.finalizeReceiptHookFailure(Rt,new Error(bt))}catch(Yt){an.debug("processError: finalizeReceiptHookFailure",Yt)}zn.createErrorEvent(bt,wt,Et,Mt,null,null,Nt)},this.createCallControl=function(it){var Rt=new tr(it);return this.callControlTable.push(Rt),Rt},this.destroyCallControl=function(it){if(it.multi){if(!it.roomName)return an.warn("findCallControl: cannot destroy without roomName"),null;for(var Rt=[],bt=this.callControlTable.length;--bt>=0;)this.callControlTable[bt].roomName===it.roomName&&(Rt.push(this.callControlTable[bt]),this.callControlTable.splice(bt,1));return Rt}var wt=this.findCallControl(it,{accept:"index"});if(wt!==null&&wt>=0){var Et=this.callControlTable[wt];return this.callControlTable.splice(wt,1),Et}return null},this.findCallControl=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=Rt.accept==="index";if(it.type==="publish"||it.type==="shareScreen"){if(!it.callId)return an.warn("findCallControl: cannot search without callId"),null;for(var wt=null,Et=null,Mt=this.callControlTable.length;--Mt>=0;)if((this.callControlTable[Mt].type==="publish"||this.callControlTable[Mt].type==="shareScreen")&&this.callControlTable[Mt].callId===it.callId){wt=this.callControlTable[Mt],Et=Mt;break}return wt?bt?Et:wt:null}if(it.type==="subscribe"){if(!(0,ot.ki)(it,"stream","object")||!Object.prototype.hasOwnProperty.call(it.stream,"id")||!(0,ot.ki)(it.stream,"attributes","object"))return an.warn("findCallControl: cannot search without stream"),null;for(var Nt=null,Yt=null,Qt=this.callControlTable.length;--Qt>=0;)if(this.callControlTable[Qt].type==="subscribe"&&(this.callControlTable[Qt].stream.id===it.stream.id||this.callControlTable[Qt].stream.attributes.callerId===it.stream.attributes.callerId&&this.callControlTable[Qt].stream.attributes.callId===it.stream.attributes.callId)){Nt=this.callControlTable[Qt],Yt=Qt;break}return Nt?bt?Yt:Nt:null}return an.warn("findCallControl: wrong type",it.type),null},this.getCallControls=function(it){var Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt={};if(Rt.addUserMedia)for(var wt=this.userMediaTable.length;--wt>=0;){var Et=this.userMediaTable[wt];bt[Et.userMediaId]=Et}if(it){for(var Mt=this.callControlTable.length;--Mt>=0;){var Nt=this.callControlTable[Mt];it.indexOf(Nt.type)>=0&&(bt[Nt.callId]=Nt)}return bt}for(var Yt=this.callControlTable.length;--Yt>=0;){var Qt=this.callControlTable[Yt];bt[Qt.callId]=Qt}return bt},this.getCallIds=function(it){for(var Rt=[],bt=this.callControlTable.length;--bt>=0;){var wt=this.callControlTable[bt];it.indexOf(wt.type)>=0&&Rt.push(wt.callId)}return Rt},this.evalOutgoingVideoBandwithCap=function(it){if(an.debug("evalOutgoingVideoBandwithCap"),!(this.MCUClient.transitionCount>0)){var Rt=null;this.videoBandwidthSettings.perCallOutgoing&&(Rt=this.videoBandwidthSettings.perCallOutgoing);for(var bt=[],wt=this.callsTable.length;--wt>=0;)this.callsTable[wt].belongsToRoom()&&this.callsTable[wt].settingUpType!=="publish"&&this.callsTable[wt].settingUpType!=="shareScreen"||this.callsTable[wt].localCallProfile&&this.callsTable[wt].localCallProfile.video&&this.callsTable[wt].localCallProfile.videoActive&&bt.push(this.callsTable[wt]);if(bt.length===0)return Rt;if(this.videoBandwidthSettings.overallOutgoing){var Et=Math.floor(this.videoBandwidthSettings.overallOutgoing/bt.length);Rt=Rt?Math.min(Rt,Et):Et}for(var Mt=bt.length;--Mt>=0;)it&&bt[Mt]===it?Rt&&bt[Mt].videoCap!==Rt?(bt[Mt].videoCap=Rt,this.rtpSenderSetParamatersCapable&&bt[Mt].applyOutgoingBitrate(bt[Mt].videoCap)):!Rt&&bt[Mt].videoCap&&(delete bt[Mt].videoCap,this.rtpSenderSetParamatersCapable&&bt[Mt].applyOutgoingBitrate(null)):Rt&&bt[Mt].videoCap!==Rt?(bt[Mt].videoCap=Rt,this.rtpSenderSetParamatersCapable?bt[Mt].applyOutgoingBitrate(bt[Mt].videoCap):setTimeout(function(Nt){Nt.belongsToRoom()||!Nt.callee?(Nt.updateUserMedia=!0,Nt.establishCall()):an.debug("Call is not to be updated")},0,bt[Mt])):!Rt&&bt[Mt].videoCap&&(delete bt[Mt].videoCap,this.rtpSenderSetParamatersCapable?bt[Mt].applyOutgoingBitrate(null):setTimeout(function(Nt){Nt.belongsToRoom()||!Nt.callee?(Nt.updateUserMedia=!0,Nt.establishCall()):an.debug("Call is not to be updated")},0,bt[Mt]));return Rt}an.debug("evalOutgoingVideoBandwithCap - transition ongoing")},this.callback=function(it,Rt){return this.closureHandler=function(bt){return it[Rt](bt)},this.closureHandler},this.callbackWithParams=function(it,Rt){return this.closureHandler=function(bt,wt,Et){return it[Rt](bt,wt,Et)},this.closureHandler},this.simulatedAgentLaunchWaitingCall=function(){this.socket.emit("simulatedAgentLaunchWaitingCall",{type:"simulatedAgentLaunchWaitingCall"})}},_n=(s(2707),et.Y.get("PreCallTest")),On=125e3,Pn=2e4,Vn=apiCC.myWebRTC_Event,ir=function(Kt,At,it,Rt,bt){var wt=this;this.webRTCClient=Kt.webRTCClient,this.notifyTerminated=Kt.notifyTerminated,this.audioSourceId=Rt,this.videoSourceId=bt,this.testId="initial",this.stepId="initial",this.report={tests:[],resolutions:[],failurCause:""},this.maxHeight=240,this.maxWidth=320,this.resolutions=[[320,240,"QVGA"],[640,480,"VGA"],[1024,576,"SD"],[1280,720,"HD 720p"],[1920,1080,"HD 1080p"]],this.currentResolution=0,this.userMediastreamId=null,it==="simpleVideoRecordTest"&&(_n.warn("Simple video record test is activated"),this.simpleVideoRecordTest=!0),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled===!0&&(_n.debug("Forcing meshModeEnabled to false for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!1,this.modifyMeshModeEnabledValueBeforePreCall=!0),this.generateId=function(Et){for(var Mt="",Nt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Yt=0;Yt<Et;Yt+=1)Mt+=Nt.charAt(Math.floor(Math.random()*Nt.length));return Mt},this.generateRoomId=function(){return"PC-"+this.generateId(4)+"-"+this.generateId(4)+"-"+this.generateId(4)},this.pushStats=function(Et,Mt){return Et.data.push(Mt),!0},this.evalQuartiles=function(Et,Mt,Nt){var Yt=[];if(Nt===void 0?Et.forEach(function(hr){typeof hr[Mt]=="number"&&Yt.push(hr[Mt])}):Et.forEach(function(hr){Yt.push(Nt(hr[Mt]))}),Yt.sort(function(hr,Sr){return hr<Sr?-1:hr===Sr?0:1}),Yt.length%2==0){var Qt=Yt.length/2,on=Math.floor((Yt[Qt-1]+Yt[Qt])/2);if(Qt%2==0){var nn=Qt/2,dn=Math.floor((Yt[nn-1]+Yt[nn])/2),yn=Qt+nn,mn=Math.floor((Yt[yn-1]+Yt[yn])/2);return{min:Yt[0],firstQuartile:dn,median:on,thirdQuartile:mn,max:Yt[Yt.length-1]}}var Cn=Math.floor(Qt/2),En=Yt[Cn],Wn=Yt[Qt+Cn];return{min:Yt[0],firstQuartile:En,median:on,thirdQuartile:Wn,max:Yt[Yt.length-1]}}var Fn=Math.floor(Yt.length/2),ar=Yt[Fn];if((Fn+1)%2==0){var or=(Fn+1)/2,nr=Math.floor((Yt[or-1]+Yt[or])/2),ur=Fn+or,mr=Math.floor((Yt[ur-1]+Yt[ur])/2);return{min:Yt[0],firstQuartile:nr,median:ar,thirdQuartile:mr,max:Yt[Yt.length-1]}}var wr=Math.floor(Fn/2),Jn=Yt[wr],er=Yt[Fn+wr];return{min:Yt[0],firstQuartile:Jn,median:ar,thirdQuartile:er,max:Yt[Yt.length-1]}},this.runBitRateTest=function(){apiCC.webRTCCompliant?(_n.debug("Run bitrate test"),this.testId==="initial"&&(this.handlers=[{type:"joinMCUSessionAnswer",callback:this.handleJoinMCUSessionAnswer.bind(this)},{type:"MCUAvailableStream",callback:this.handleMCUAvailableStream.bind(this)},{type:"onCallStatsUpdate",callback:this.handleOnCallStatsUpdate.bind(this)},{type:"remoteStreamAdded",callback:this.handleRemoteStreamAdded.bind(this)},{type:"userMediaSuccess",callback:this.handleuserMediaSuccess.bind(this)},{type:"MCURecordedStreamsAvailable",callback:this.handleRecordingStreamAvailable.bind(this)}],this.handlers.forEach(function(Et){apiRTC.addEventListener(Et.type,Et.callback)}),this.webRTCClient.setMCUConnector("mcu4.apizee.com"),this.webRTCClient.setAllowMultipleCalls(!0),this.webRTCClient.enableCallStatsMonitoring(!0,1e3),this.webRTCClient.enableQualityEvaluating(!0,1e3),this.startNextTest())):(this.report.failurCause="Your device is not WebRTC Compliant",this.terminate())},this.startNextTest=function(){if(this.simpleVideoRecordTest===!0)this.testId==="initial"?(_n.debug("initial simple test"),At?this.runResolutionTest():this.startTestAudioNlVideo(2e3)):this.testId==="resolution-test"?(_n.debug("resolution-test simple"),this.startTestAudioNlVideo(2e3)):this.testId==="audio-and-video-2000"&&(_n.debug("Before recordThenTerminate simple"),this.recordThenTerminate());else if(this.testId==="initial")At?this.runResolutionTest():this.startTestAudioNlVideo(it);else if(this.testId==="resolution-test")this.startTestAudioNlVideo(it);else if(this.testId==="audio-and-video-"+it)if(this.report[this.testId].status==="success"){var Et=this.report[this.testId].subscribeCallIds[0],Mt=this.stats[Et].videoReceived;Mt.bitsReceivedPerSecond.max!==void 0&&Mt.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():Mt.bitsReceivedPerSecond.max>=15e5?this.startTestAudioNlVideo(1500):Mt.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):Mt.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):Mt.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1500")if(this.report[this.testId].status==="success"){var Nt=this.report[this.testId].subscribeCallIds[0],Yt=this.stats[Nt].videoReceived;Yt.bitsReceivedPerSecond.max!==void 0&&Yt.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():Yt.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):Yt.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):Yt.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1000")if(this.report[this.testId].status==="success"){var Qt=this.report[this.testId].subscribeCallIds[0],on=this.stats[Qt].videoReceived;on.bitsReceivedPerSecond.max!==void 0&&on.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():on.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):on.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-600")if(this.report[this.testId].status==="success"){var nn=this.report[this.testId].subscribeCallIds[0],dn=this.stats[nn].videoReceived;dn.bitsReceivedPerSecond.max!==void 0&&dn.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():dn.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-250")if(this.report[this.testId].status==="success"){var yn=this.report[this.testId].subscribeCallIds[0],mn=this.stats[yn].videoReceived;mn.bitsReceivedPerSecond.max!==void 0&&mn.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else this.recordThenTerminate()},this.startTestAudioNlVideo=function(Et){this.prepareEnvForNewTest(),_n.debug("%ctestAudioNlVideo"+Et),this.testId="audio-and-video-"+Et,this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!0,this.videoBandwidth=Et,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!0,videoLimited:!0,videoBandwidth:this.videoBandwidth,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Pn)},this.startTestAudioNlOnly=function(){this.prepareEnvForNewTest(),_n.debug("%cstartTestAudioNlOnly"),this.testId="audio-only",this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!1,this.webRTCClient.setRemoteVideoBandwidth(null),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!1,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Pn)},this.startTestVideoNlOnly=function(){this.prepareEnvForNewTest(),_n.debug("%cstartTestVideoNlOnly"),this.testId="video-only",this.report.tests.push(this.testId),this.audioEnabled=!1,this.videoEnabled=!0,this.videoBandwidth=600,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!1,audioLimited:!1,videoEnabled:!0,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Pn)},this.recordThenTerminate=function(){wt.modifyMeshModeEnabledValueBeforePreCall===!0&&(_n.debug("Restoring meshModeEnabled to true, as it was modified for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!0);var Et=null;if(wt.videoEnabled&&wt.audioEnabled?Et="AUDIO-VIDEO":wt.audioEnabled?Et="AUDIO-ONLY":wt.videoEnabled&&(Et="VIDEO-ONLY"),!Et)return _n.error("Can't define record type"),void wt.terminate();_n.debug("Start recording with type:",Et),wt.webRTCClient.startRecording(Et,"recordPreCall",null,null,{ttl:900}),setTimeout(function(){_n.debug("Stop recording"),wt.webRTCClient.stopRecording()},1e4)},this.terminate=function(){_n.debug("Terminate"),this.testId="terminated",this.handlers&&this.handlers.forEach(function(Et){apiRTC.removeEventListener(Et.type,Et.callback)}),this.notifyTerminated(this.report),this.leaveSession()},this.succeed=function(){Vn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"success",stepId:this.stepId}),this.report[this.testId].status="success",this.startNextTest()},this.fail=function(){_n.debug("fail"),Vn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId}),this.report[this.testId].status="failure",this.report[this.testId].stepId=this.stepId,this.leaveSession(),this.startNextTest()},this.prepareEnvForNewTest=function(){wt.mcuSession!==void 0&&wt.leaveSession()},this.abortJoinMCUSession=function(){_n.debug("abortJoinMCUSession"),this.fail()},this.abortStreamPublishing=function(){_n.debug("abortStreamPublishing"),this.fail()},this.abortStreamSubscribing=function(){_n.debug("abortStreamSubscribing"),this.fail()},this.observeStreamPublished=function(){if(_n.debug("observeStreamPublished"),apiRTC.browser==="Safari"||apiRTC.browser==="Mobile Safari")return _n.info("Safari"),_n.error("observeStreamPublished not supported on Safari"),clearInterval(this.intervalId),void this.fail();if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.fail();if(this.audioEnabled&&this.videoEnabled){var Et=0;if(this.stats[this.publishCallId]!==void 0&&(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4&&(Et+=1),this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=On&&(Et+=1)),Et===2){clearInterval(this.intervalId);var Mt=this.streams[0];this.subscribeToUserStream(Mt.attributes.callerId,Mt.id,"VIDEO"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Pn)}else _n.debug("okCnt !== 2")}else if(this.audioEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4){clearInterval(this.intervalId);var Nt=this.streams[0];this.subscribeToUserStream(Nt.attributes.callerId,Nt.id,"AUDIOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Pn)}else _n.debug("no stats audio 1 ");else _n.debug("no stats audio 2");else _n.debug("no stats audio 3");else if(this.videoEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=On){clearInterval(this.intervalId);var Yt=this.streams[0];this.subscribeToUserStream(Yt.attributes.callerId,Yt.id,"VIDEOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Pn)}else _n.debug("no stats video 1 ");else _n.debug("no stats video 2");else _n.debug("no stats video 3");else _n.debug("no audio or video"),clearInterval(this.intervalId),this.fail()},this.observeStreamSubscribed=function(){if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.succeed();var Et=null,Mt=null,Nt=0,Yt=0;this.audioEnabled&&(Et=this.stats[this.publishCallId].audioSent),this.videoEnabled&&(Mt=this.stats[this.publishCallId].videoSent);for(var Qt=0;Qt<this.subscribeCallIds.length;Qt+=1){var on=this.subscribeCallIds[Qt];if(this.audioEnabled&&this.videoEnabled){var nn=0;this.stats[on]!==void 0&&(this.stats[on].audioReceived!==void 0&&this.stats[on].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[on].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile-2e3&&(nn+=1),this.stats[on].videoReceived!==void 0&&this.stats[on].videoReceived.bitsReceivedPerSecond!==void 0&&Mt!=null&&Mt.bitsSentPerSecond!==void 0&&this.stats[on].videoReceived.bitsReceivedPerSecond.thirdQuartile>=Mt.bitsSentPerSecond.firstQuartile&&(nn+=1)),nn===2&&(Nt+=1)}else this.audioEnabled?this.stats[on]!==void 0&&this.stats[on].audioReceived!==void 0&&this.stats[on].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[on].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile&&(Nt+=1):Yt+=1}Yt>0?(clearInterval(this.intervalId),this.fail()):Nt===this.subscribeCallIds.length&&(clearInterval(this.intervalId),this.succeed())},this.handleJoinMCUSessionAnswer=function(Et){if(this.stepId==="joining-mcu-session"){if(Vn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),clearTimeout(this.timeoutId),this.mcuSession.sessionId=Et.detail.sessionId,this.mcuSession.token=Et.detail.token,this.audioEnabled&&this.videoEnabled){var Mt=this,Nt={audio:{},video:{}};Nt=apiCC.setResolutionInConstraint(this.maxWidth,this.maxHeight,Nt),_n.debug("constraints :",Nt),apiRTC.createUserMediaStream({type:"media",audioSourceId:this.audioSourceId,videoSourceId:this.videoSourceId,gum_config:Nt,release:function(Yt){_n.debug("createUserMediaStream release",Yt.userMediaStreamId)},success:function(Yt){_n.debug("createUserMediaStream success",Yt.userMediaStreamId),_n.debug("audioSourceId",Rt),_n.debug("videoSourceId",bt)},failure:function(Yt,Qt){_n.error("createUserMediaStream failure",Yt.userMediaStreamId),_n.error("failure; userMediaStreamId: "+Yt.userMediaStreamId),_n.error("failure; error: "+Qt),Vn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId,createUserMediaStreamError:Qt}),Mt.terminate()}})}else if(this.audioEnabled)this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{audioOnly:!0});else{if(!this.videoEnabled)return void this.fail();this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{videoOnly:!0,qos:{videoStartQuality:"upper"}})}this.subscribeCallIds=[],this.report[this.testId].publishCallId=this.publishCallId,this.report[this.testId].subscribeCallIds=[],this.streams=[],this.stepId="stream-publishing",this.timeoutId=setTimeout(this.abortStreamPublishing.bind(this),Pn)}},this.handleuserMediaSuccess=function(Et){var Mt={userMediaStreamId:Et.detail.userMediaStreamId,qos:{videoStartQuality:"upper"}};this.userMediastreamId=Et.detail.userMediaStreamId,this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,Mt),this.report[this.testId].publishCallId=this.publishCallId},this.handleRecordingStreamAvailable=function(Et){_n.debug("handleRecordingStreamAvailable"),this.terminate()},this.handleMCUAvailableStream=function(Et){if(this.stepId==="stream-publishing"&&Et.detail.isRemoteStream===!1)for(var Mt=0;Mt<Et.detail.streams.length;Mt+=1){var Nt=Et.detail.streams[Mt];if(Nt.room===this.mcuSession.roomId&&Nt.attributes.callId===this.publishCallId&&this.stepId==="stream-publishing"){if(clearTimeout(this.timeoutId),this.stepId="stream-published",this.streams.push(Nt),this.simpleVideoRecordTest===!0){var Yt="VIDEO";Nt.audio===!1&&(Yt="VIDEOONLY"),Nt.video===!1&&(Yt="AUDIOONLY"),this.subscribeToUserStream(Nt.attributes.callerId,Nt.id,Yt),this.stepId="stream-subscribing"}else this.intervalId=setInterval(this.observeStreamPublished.bind(this),1e3);this.intervalCounter=0}}},this.handleRemoteStreamAdded=function(Et){this.stepId==="stream-subscribing"&&this.subscribeCallIds.find(function(Mt){return Mt===Et.detail.callId})!==void 0&&(clearTimeout(this.timeoutId),this.stepId="stream-subscribed",this.intervalId=setInterval(this.observeStreamSubscribed.bind(this),1e3),this.intervalCounter=0)},this.handleOnCallStatsUpdate=function(Et){var Mt=this;if(this.stepId!=="stream-published"&&this.stepId!=="stream-subscribing"&&this.stepId!=="stream-subscribed"||(this.stats[this.publishCallId]===void 0&&(this.stats[this.publishCallId]={}),Et.detail.stats.audioSent!==void 0&&(this.stats[this.publishCallId].audioSent===void 0&&(this.stats[this.publishCallId].audioSent={startTime:Et.detail.stats.audioSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].audioSent,Et.detail.stats.audioSent)?this.stats[this.publishCallId].audioSent.data.length>=5&&["bitsSentPerSecond","packetsSentPerSecond"].forEach(function(on){var nn=Mt.evalQuartiles(Mt.stats[Mt.publishCallId].audioSent.data,on);nn.sampleCount=Mt.stats[Mt.publishCallId].audioSent.data.length,nn.time=Et.detail.stats.audioSent.timestamp-Mt.stats[Mt.publishCallId].audioSent.startTime,Mt.stats[Mt.publishCallId].audioSent[on]=nn}):_n.debug("audio stats not pushed for :",this.publishCallId)),Et.detail.stats.videoSent!==void 0&&(this.stats[this.publishCallId].videoSent===void 0&&(this.stats[this.publishCallId].videoSent={startTime:Et.detail.stats.videoSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].videoSent,Et.detail.stats.videoSent)?this.stats[this.publishCallId].videoSent.data.length>=5&&(["bitsSentPerSecond","packetsSentPerSecond","framesEncodedPerSecond"].forEach(function(on){var nn=Mt.evalQuartiles(Mt.stats[Mt.publishCallId].videoSent.data,on);nn.sampleCount=Mt.stats[Mt.publishCallId].videoSent.data.length,nn.time=Et.detail.stats.videoSent.timestamp-Mt.stats[Mt.publishCallId].videoSent.startTime,Mt.stats[Mt.publishCallId].videoSent[on]=nn}),this.stats[this.publishCallId].videoSent.width=Et.detail.stats.videoSent.width,this.stats[this.publishCallId].videoSent.height=Et.detail.stats.videoSent.height):_n.debug("video stats not pushed for :",this.publishCallId))),this.stepId==="stream-subscribed")for(var Nt=function(on){Qt=0;var nn=Mt.subscribeCallIds[on];Mt.stats[nn]===void 0&&(Mt.stats[nn]={}),Et.detail.stats.audioReceived!==void 0&&(Mt.stats[nn].audioReceived===void 0&&(Mt.stats[nn].audioReceived={startTime:Et.detail.stats.audioReceived.timestamp,data:[]}),Mt.pushStats(Mt.stats[nn].audioReceived,Et.detail.stats.audioReceived)?(Qt=Mt.stats[nn].audioReceived.data.length,Mt.stats[nn].audioReceived.data[Qt-1].mosS===void 0&&(Mt.stats[nn].audioReceived.data[Qt-1].mosS={}),Mt.stats[nn].audioReceived.data[Qt-1].mosS=Et.detail.stats.quality.mosS,Mt.stats[nn].audioReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","delay"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].audioReceived.data,dn);yn.sampleCount=Mt.stats[nn].audioReceived.data.length,yn.time=Et.detail.stats.audioReceived.timestamp-Mt.stats[nn].audioReceived.startTime,Mt.stats[nn].audioReceived[dn]=yn}),Mt.stats[nn].audioReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].audioReceived.data,dn,function(mn){return Math.floor(1e3*mn)});yn.sampleCount=Mt.stats[nn].audioReceived.data.length,yn.time=Et.detail.stats.audioReceived.timestamp-Mt.stats[nn].audioReceived.startTime,Mt.stats[nn].audioReceived[dn]=yn}),Mt.stats[nn].audioReceived.packetsLost={max:Et.detail.stats.audioReceived.packetsLost,sampleCount:Mt.stats[nn].audioReceived.data.length,time:Et.detail.stats.audioReceived.timestamp-Mt.stats[nn].audioReceived.startTime},["packetsLostRatio"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].audioReceived.data,dn);yn.sampleCount=Mt.stats[nn].audioReceived.data.length,yn.time=Et.detail.stats.audioReceived.timestamp-Mt.stats[nn].audioReceived.startTime,Mt.stats[nn].audioReceived[dn]=yn}),Mt.stats[nn].audioReceived.mosS===void 0&&(Mt.stats[nn].audioReceived.mosS={}),["mosS"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].audioReceived.data,dn);yn.sampleCount=Mt.stats[nn].audioReceived.data.length,Mt.stats[nn].audioReceived[dn]=yn}))):_n.error("audio stats not pushed for callId :",nn)),Et.detail.stats.videoReceived!==void 0&&(Mt.stats[nn].videoReceived===void 0&&(Mt.stats[nn].videoReceived={startTime:Et.detail.stats.videoReceived.timestamp,data:[]}),Mt.pushStats(Mt.stats[nn].videoReceived,Et.detail.stats.videoReceived)?(Qt=Mt.stats[nn].videoReceived.data.length,Mt.stats[nn].videoReceived.data[Qt-1].mosV===void 0&&(Mt.stats[nn].videoReceived.data[Qt-1].mosV={}),Mt.stats[nn].videoReceived.data[Qt-1].mosAV===void 0&&(Mt.stats[nn].videoReceived.data[Qt-1].mosAV={}),Mt.stats[nn].videoReceived.data[Qt-1].mosV=Et.detail.stats.quality.mosV,Mt.stats[nn].videoReceived.data[Qt-1].mosAV=Et.detail.stats.quality.mosAV,Mt.stats[nn].videoReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","framesDecodedPerSecond"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].videoReceived.data,dn);yn.sampleCount=Mt.stats[nn].videoReceived.data.length,yn.time=Et.detail.stats.videoReceived.timestamp-Mt.stats[nn].videoReceived.startTime,Mt.stats[nn].videoReceived[dn]=yn}),Mt.stats[nn].videoReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].videoReceived.data,dn,function(mn){return Math.floor(1e3*mn)});yn.sampleCount=Mt.stats[nn].videoReceived.data.length,yn.time=Et.detail.stats.videoReceived.timestamp-Mt.stats[nn].videoReceived.startTime,Mt.stats[nn].videoReceived[dn]=yn}),Mt.stats[nn].videoReceived.packetsLost={max:Et.detail.stats.videoReceived.packetsLost,sampleCount:Mt.stats[nn].videoReceived.data.length,time:Et.detail.stats.videoReceived.timestamp-Mt.stats[nn].videoReceived.startTime},["packetsLostRatio"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].videoReceived.data,dn);yn.sampleCount=Mt.stats[nn].videoReceived.data.length,yn.time=Et.detail.stats.videoReceived.timestamp-Mt.stats[nn].videoReceived.startTime,Mt.stats[nn].videoReceived[dn]=yn}),Mt.stats[nn].videoReceived.mosV===void 0&&(Mt.stats[nn].videoReceived.mosV={}),["mosV"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].videoReceived.data,dn);yn.sampleCount=Mt.stats[nn].videoReceived.data.length,Mt.stats[nn].videoReceived[dn]=yn}),Mt.stats[nn].videoReceived.mosAV===void 0&&(Mt.stats[nn].videoReceived.mosAV={}),["mosAV"].forEach(function(dn){var yn=Mt.evalQuartiles(Mt.stats[nn].videoReceived.data,dn);yn.sampleCount=Mt.stats[nn].videoReceived.data.length,Mt.stats[nn].videoReceived[dn]=yn}),Mt.stats[nn].videoReceived.width=Et.detail.stats.videoReceived.width,Mt.stats[nn].videoReceived.height=Et.detail.stats.videoReceived.height)):_n.error("video stats not pushed for callId :",nn))},Yt=0;Yt<this.subscribeCallIds.length;Yt+=1){var Qt;Nt(Yt)}},this.subscribeToUserStream=function(Et,Mt,Nt){var Yt=this,Qt=this.webRTCClient.getStreamFromList(Mt);if(Qt!=null){var on=[];on.push(Qt),this.webRTCClient.subscribe(on,Nt).forEach(function(nn){Yt.subscribeCallIds.push(nn),Yt.report[Yt.testId].subscribeCallIds.push(nn)})}},this.leaveSession=function(){_n.debug("leaveSession"),this.streams!==void 0&&typeof this.streams[0]=="number"&&this.webRTCClient!==null&&this.webRTCClient.unsubscribe(this.streams[0]),this.userMediastreamId!==null&&apiRTC.releaseUserMediaStream(this.userMediastreamId),delete this.streams,delete this.subscribeCallIds,typeof this.publishCallId=="string"&&this.webRTCClient.unpublish(this.publishCallId),delete this.publishCallId,this.mcuSession!==void 0&&this.mcuSession.sessionId!==void 0&&(this.webRTCClient.leaveMCUSession(),delete this.mcuSession.sessionId),delete this.mcuSession,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.length),_n.debug("leaveSession done")},this.runResolutionTest=function(){this.testId="resolution-test",this.stepId="resolution-test",Vn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),_n.debug("Run resolution test"),this.startGetUserMedia(this.resolutions[this.currentResolution])},this.startGetUserMedia=function(Et){_n.debug("startGetUserMedia :",Et);var Mt={audio:!1,video:{}};Mt=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,Mt),Mt=apiCC.setResolutionInConstraint(Et[0],Et[1],Mt),_n.debug("startGetUserMedia constraints:",Mt),apiCC.getUserMedia(Mt).then((function(Nt){this.resolutions.length>1?(this.report.resolutions.push(Et[2]+":   "+Et[0]+"x"+Et[1]),this.maxWidth=Et[0],this.maxHeight=Et[1],Nt.getTracks().forEach(function(Yt){Yt.stop()}),this.maybeContinueGetUserMedia()):_n.debug("No video track in returned stream.")}).bind(this)).catch((function(Nt){_n.debug("startGetUserMedia catch error:",Nt),this.resolutions.length>1?_n.debug(Et[0]+"x"+Et[1]+" not supported"):_n.error("getUserMedia failed with error: "+Nt.name),this.maybeContinueGetUserMedia()}).bind(this))},this.maybeContinueGetUserMedia=function(){this.currentResolution!==this.resolutions.length-1?(this.currentResolution++,this.startGetUserMedia(this.resolutions[this.currentResolution])):this.startNextTest()}},Mn=et.Y.get("ApiCCWebRTCClient"),$n=function(Kt){Mn.debug("apiCC.ApiCCWebRTCClient"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.webRTCClient=new An(Kt),this.webRTCClient.channelReady=!0,this.callTest=null,this.call=function(At,it,Rt){return it==="RECORD"&&Mn.warn("DEPRECATED : usage of data parameter on call() as a string with 'RECORD' value will be deprecated in a next version of apiRTC. Please consider using a JSON Data parameter instead : data = {isRecorded : true}"),this.webRTCClient.recordedCall===!0&&(Mn.log("recordedCall option is activated"),it!==void 0&&it!=="RECORD"||(it={}),it.MCUType="MCU-Caller",it.confId=Math.floor(1000001*Math.random()).toString()),it!==void 0&&(it!=="RECORD"&&it.isRecorded!==!0||(Mn.log("recordedCall option is activated"),it==="RECORD"&&(it={}),it.MCUType="MCU-Caller",it.confId=Math.floor(1000001*Math.random()).toString())),Rt!=null&&Rt.record===!0&&(Mn.log("callConfiguration record option is activated"),it!==void 0&&it!=="RECORD"||(it={}),it.MCUType="MCU-Caller",it.confId=Math.floor(1000001*Math.random()).toString()),Mn.log("session.webRTCPluginActivated =",Kt.webRTCPluginActivated),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&Kt.webRTCPluginActivated===!0?(Mn.log("managing call with WebRTC Plugin"),Rt==null&&(Rt={}),Rt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){Mn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.callWithNumber(At,!0,it,Rt)},function(){Mn.log("actionOnInstallationNeeded")}),Rt.apzcallId):(Mn.log("managing call with browser"),this.webRTCClient.callWithNumber(At,!0,it,Rt))},this.getStatsFromCall=function(At,it){var Rt=this.webRTCClient.findCallWithCallId(At);Rt===null?it(new Error("Call was not found"),null):Rt.pc===null?it(new Error("Call has no peerconnection"),null):this.webRTCClient.csmEnable===!0?it(null,this.webRTCClient.csmLastResults):it(new Error("Call stats monitoring not activated"),null)},this.testCall=function(At){return Mn.log("session.webRTCPluginActivated =",Kt.webRTCPluginActivated),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&Kt.webRTCPluginActivated===!0?(Mn.log("managing call with WebRTC Plugin"),At==null&&(At={}),At.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){Mn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.startTestCall(!0,At)},function(){Mn.log("actionOnInstallationNeeded")}),At.apzcallId):(Mn.log("managing call with browser"),this.webRTCClient.startTestCall(!0,At))},this.setClientTurnServer=function(At){this.webRTCClient.setClientTurnServer(At)},this.activateScreenSharing=function(At){this.webRTCClient.activateScreenSharing(At)},this.shareScreen=function(At,it,Rt){return Mn.info("shareScreen"),this.webRTCClient.shareScreen(At,it,Rt)},this.startScreenSharingOnCall=function(At,it){Mn.info("startScreenSharingOnCall"),this.webRTCClient.startScreenSharingOnCall(At,it)},this.startDataChannel=function(At,it){if(Mn.info("startDataChannel"),!(nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome"))return it!==void 0?it.dataCall=!0:(it={}).dataCall=!0,this.webRTCClient.callWithNumber(At,!0,it,null);Mn.warn("Cannot startDataChannel as it is not supported on Edge")},this.startDataChannelOnCall=function(At){this.webRTCClient.startDataChannelOnCall(At)},this.sendDataWithCallId=function(At,it,Rt){this.webRTCClient.sendDataWithCallId(At,it,Rt)},this.callAudio=function(At,it,Rt){return Mn.info("callAudio"),this.webRTCClient.callWithNumber(At,!1,it,Rt)},this.callbymail=function(At){this.webRTCClient.callbymail(At)},this.addMedia=function(At){return this.webRTCClient.addMedia(At),At},this.hangUp=function(At){this.webRTCClient.onHangup(At)},this.getMyMedia=function(At,it){Mn.info("getMyMedia : ",At),At==="screen"?this.webRTCClient.shareScreen("LOCAL",{},it):this.webRTCClient.getUserMedia()},this.releaseStream=function(At){Mn.info("releaseStream : ",At),Mn.info("releaseStream.callId : ",At.callId),At.callId!==void 0?this.webRTCClient.removeCallFromTableWithCallIdAndSendBye(At.callId,"stop_ScreenSharing"):this.webRTCClient.stopStream(At)},this.autoAnswerUserMediaSuccessHandler=function(At){Mn.info("autoAnswerUserMediaSuccessHandler :"+At),At=null,this.webRTCClient.autoAnswer=!0},this.autoAnswerUserMediaErrorHandler=function(At){Mn.info("autoAnswerUserMediaErrorHandler :"+At),At=null,this.webRTCClient.autoAnswer=!1},this.activateAutoAnswer=function(){apiCC.addEventListener("userMediaSuccess",this.callback(this,"autoAnswerUserMediaSuccessHandler")),apiCC.addEventListener("userMediaError",this.callback(this,"autoAnswerUserMediaErrorHandler")),this.webRTCClient.getUserMedia()},this.getAutoAnswer=function(){return this.webRTCClient.autoAnswer},this.setUnidirectionalCall=function(At){At===!0||At===!1?this.webRTCClient.unidirectionelCallOnly=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUnidirectionalCall()","PARAMETER_ERROR_SETUNIDIRCALL")},this.setReceiveMediaDeactivated=function(At){At===!0||At===!1?this.webRTCClient.receiveMediaDeactivated=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setReceiveMediaDeactivated()","PARAMETER_ERROR_SETRECVMEDIADEACTIVATED")},this.setPreferVP9Codec=function(At){At===!0||At===!1?this.webRTCClient.preferVP9Codec=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferVP9Codec()","PARAMETER_ERROR_SETPREFERVP9CODEC")},this.setPreferH264Codec=function(At){At===!0||At===!1?this.webRTCClient.preferH264Codec=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferH264Codec()","PARAMETER_ERROR_SETPREFERH264CODEC")},this.getUnidirectionalCall=function(){return this.webRTCClient.unidirectionelCallOnly},this.toggleVideoMute=function(At){return this.webRTCClient.toggleVideoMute(At)},this.isVideoMuted=function(At){var it;return Mn.debug("isVideoMuted :",At),At==null?this.webRTCClient.isVideoMuted:(Mn.debug("callId is defined :",At),(it=this.webRTCClient.findCallIndexWithCallId(At))!==-1?this.webRTCClient.callsTable[it].isLocalVideoMuted:void 0)},this.toggleAudioMute=function(At){return this.webRTCClient.toggleAudioMute(At)},this.sendDTMF=function(At,it,Rt,bt){return this.webRTCClient.sendDTMF(At,it,Rt,bt)},this.isAudioMuted=function(At){var it;return Mn.debug("isAudioMuted :",At),At==null?this.webRTCClient.isAudioMuted:(Mn.debug("callId is defined :",At),(it=this.webRTCClient.findCallIndexWithCallId(At))!==-1?this.webRTCClient.callsTable[it].isLocalAudioMuted:void 0)},this.setNtoNConf=function(At){At===!0||At===!1?this.webRTCClient.NtoNConf=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setNtoNConf()","PARAMETER_ERROR_SETNTONCONF")},this.getNtoNConf=function(){return this.webRTCClient.NtoNConf},this.setRTPMedia=function(At){At===!0||At===!1?this.webRTCClient.RTPMedia=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRTPMedia()","PARAMETER_ERROR_SETRTPMEDIA")},this.getRTPMedia=function(){return this.webRTCClient.RTPMedia},this.setMediaRoutingMode=function(At){At==="hostOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.hostOnly:At==="stun"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stun:At==="stunOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stunOnly:At==="turn"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turn:At==="turnOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turnOnly:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setMediaRoutingMode()","PARAMETER_ERROR_SETMEDIAROUTINGMODE")},this.enableQos=function(At,it){apiCC.browser!=="Chrome"&&apiCC.browser!=="Firefox"&&(Mn.warn("enableQos() is only supported on Chrome and Firefox, support on other browsers will be added soon"),At=!1),Mn.info("this.enableQos="+At),this.webRTCClient.qosEnable=At,this.webRTCClient.qosInterval=it||this.webRTCClient.qosInterval},this.enableCallStatsMonitoring=function(At,it){["chrome","firefox","safari"].indexOf(ot.wL.type)<0?Mn.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):(this.webRTCClient.csmEnable=At,it&&(this.webRTCClient.csmIntervalMs=it))},this.enableQualityEvaluating=function(At,it){["chrome","firefox"].indexOf(ot.wL.type)<0?Mn.warn("enableQualityEvaluating() is only supported on Chrome and Firefox, support on other browsers will be added soon"):(this.webRTCClient.qualityScoreEnable=At,it&&(this.webRTCClient.qualityScoreIntervalMs=it))},this.getMediaRoutingMode=function(){var At=null;return this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.hostOnly?At="hostOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stun?At="stun":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stunOnly?At="stunOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turn?At="turn":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turnOnly&&(At="turnOnly"),At},this.setMediaTypeForIncomingCall=function(At){Mn.debug("setMediaTypeForIncomingCall :",At),At==="VIDEO"||At==="AUDIO"||At==="VIDEOONLY"||At==="NONE"?this.webRTCClient.mediaTypeForIncomingCall=At:Mn.log("setMediaTypeForIncomingCall, value is not correct",At)},this.setMediaTypeForOutgoingCall=function(At){Mn.debug("setMediaTypeForOutgoingCall :",At),At==="VIDEO"||At==="AUDIO"||At==="VIDEOONLY"||At==="NONE"?this.webRTCClient.mediaTypeForOutgoingCall=At:Mn.log("setMediaTypeForOutgoingCall, value is not correct",At)},this.setStereo=function(At){Mn.info("setStereo :",At),At===!0?(this.webRTCClient.setStereo=At,this.webRTCClient.gum_config={audio:{mandatory:{echoCancellation:!1,googEchoCancellation:!1},optional:[]},video:{mandatory:{},optional:[]}}):At===!1?this.webRTCClient.setStereo=At:Mn.log("setStereo, value is not correct",At)},this.setMCUConnector=function(At){Mn.info("setMCUConnector :",At),Mn.log("setting value :",At),At==="mcu4.apizee.com"?this.webRTCClient.MCUClient.pubConnector="janusConnector":At==="mcu3.apizee.com"?this.webRTCClient.MCUClient.pubConnector="groupKurentoConnector":Mn.log("value is incorrect :",At)},this.enableMeshRoomMode=function(At){Mn.info("enableMeshRoomMode :",At),nt.Xh==="IE"?(Mn.log("IE detected, MeshRoomMode is not supported"),this.webRTCClient.MCUClient.meshModeEnabled=!1):this.webRTCClient.MCUClient.meshModeEnabled=At},this.setAllowAsymetricMediaCalls=function(At){Mn.info("setAllowAsymetricMediaCalls :",At),At===!0||At===!1?this.webRTCClient.allowAsymetricMediaCalls=At:Mn.log("setAllowAsymetricMediaCalls, value is not correct",At)},this.takeSnapshot=function(At,it,Rt,bt,wt,Et,Mt){this.webRTCClient.takeSnapshot(At,it,Kt.apiKey,Rt,bt,wt,Et,Mt)},this.takeSnapshotAndSendOnDataChannel=function(At,it,Rt,bt){this.webRTCClient.takeSnapshotAndSendOnDataChannel(At,it,Rt,bt)},this.setUserAcceptOnIncomingCall=function(At){Mn.info("setUserAcceptOnIncomingCall :",At),At===!0||At===!1?this.webRTCClient.userAcceptOnIncomingCall=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingCallBeforeGetUserMedia=function(At){Mn.info("setUserAcceptOnIncomingCallBeforeGetUserMedia :",At),At===!0||At===!1?this.webRTCClient.userAcceptOnIncomingCallBeforeGetUserMedia=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCallBeforeGetUserMedia()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALLBEFOREGUM")},this.setUserAcceptOnIncomingDataCall=function(At){At===!0||At===!1?this.webRTCClient.userAcceptOnIncomingDataCall=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingDataCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingScreenSharingCall=function(At){At===!0||At===!1?this.webRTCClient.userAcceptOnIncomingScreenSharingCall=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingScreenSharingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOSCREENSHARINGCALL")},this.setAllowMultipleCalls=function(At){At===!0||At===!1?this.webRTCClient.allowMultipleCalls=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setAllowMultipleCalls()","PARAMETER_ERROR_SETALLOWMULTIPLECALLS")},this.setPcConfig=function(At){Mn.info("Setting PC_config to :",At),this.webRTCClient.pc_config=At},this.setPcConstraints=function(At){Mn.info("Setting PC_constraints to :"+At),this.webRTCClient.pc_constraints=At},this.setGetUserMediaConfig=function(At){this.webRTCClient.setGetUserMediaConfig(At)},this.setTrickleIce=function(At){Mn.info("Setting trickleIce to :"+At),At===!0||At===!1?this.webRTCClient.trickleIce=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setTrickleIce()","PARAMETER_ERROR_SETTRICKLEICE")},this.setRecordedCall=function(At){At===!0||At===!1?this.webRTCClient.recordedCall=At:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRecordedCall()","PARAMETER_ERROR_SETRECORDEDCALL")},this.getRecordedCall=function(){return this.webRTCClient.recordedCall},this.acceptCall=function(At,it){this.webRTCClient.acceptCall(At,it)},this.refuseCall=function(At){Mn.info("refuseCall"),this.webRTCClient.refuseCall(At)},this.addVideoMedia=function(At){Mn.info("addVideoMedia"),this.webRTCClient.addVideoMedia(At)},this.updateMediaDeviceOnCall=function(At,it){return Mn.info("updateMediaDeviceOnCall"),this.webRTCClient.updateMediaDeviceOnCall(At,it)},this.updateMediaTypeOnCall=function(At,it){return!(0,ot.Ym)(At,"string")||it!=="VIDEO"&&it!=="AUDIOONLY"&&it!=="VIDEOONLY"?Promise.reject("wrong arguments"):this.webRTCClient.updateMediaTypeOnCall(At,it)},this.releaseUserMedia=function(){this.webRTCClient.releaseUserMedia()},this.setAllowedAudioCodecs=function(At){this.webRTCClient.allowedAudioCodecs=At},this.setAllowedVideoCodecs=function(At){this.webRTCClient.allowedVideoCodecs=At},this.setAudioBandwidth=function(At){this.webRTCClient.setAudioBandwidth(At)},this.setVideoBandwidth=function(At){},this.setRemoteVideoBandwidth=function(At){typeof At=="number"?this.webRTCClient.setVideoBandwidth(At,"remote"):Mn.error("Unvalid target bandwidth usage value needs to be a number :",At)},this.setOverallIncomingVideoBandwidth=function(At){typeof At=="number"?this.webRTCClient.setVideoBandwidth(At,"overall","incoming"):Mn.error("Unvalid target bandwidth usage value needs to be a number :",At)},this.setOverallOutgoingVideoBandwidth=function(At){typeof At=="number"?this.webRTCClient.setVideoBandwidth(At,"overall","outgoing"):Mn.error("Unvalid target bandwidth usage value needs to be a number :",At)},this.setPerCallIncomingVideoBandwidth=function(At){typeof At=="number"?this.webRTCClient.setVideoBandwidth(At,"perCall","incoming"):Mn.error("Unvalid target bandwidth usage value needs to be a number :",At)},this.setPerCallOutgoingVideoBandwidth=function(At){typeof At=="number"?this.webRTCClient.setVideoBandwidth(At,"perCall","outgoing"):Mn.error("Unvalid target bandwidth usage value needs to be a number :",At)},this.setDataBandwidth=function(At){this.webRTCClient.setDataBandwidth(At)},this.createMCUSession=function(At,it){Mn.info("createMCUSession"),this.webRTCClient.MCUClient.initDivElements(At,it),this.webRTCClient.MCUClient.createSession()},this.joinMCUSession=function(At){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mn.debug("joinMCUSession"),At?this.webRTCClient.MCUClient.joinSession(At,it):new Error("wrong roomId")},this.getMCUStreamList=function(){return Mn.debug("getMCUStreamList"),this.webRTCClient.MCUClient.getStreamList()},this.getStreamFromList=function(At){return Mn.debug("getStreamFromList"),this.webRTCClient.MCUClient.getStreamFromList(At)},this.getStreamIdOfUser=function(At){return Mn.debug("getStreamIdOfUser"),this.webRTCClient.MCUClient.getStreamIdOfUser(At)},this.getCallIdFromStreamId=function(At){Mn.debug("getCallIdFromStreamId");var it=this.webRTCClient.findCallWithStreamId(At);return it===null?(Mn.log("call not found in getCallIdFromStreamId"),null):it.callId},this.getCallIdFromRemoteMCUUser=function(At){var it,Rt;return Mn.debug("getCallIdFromRemoteMCUUser"),it=this.webRTCClient.MCUClient.getStreamIdOfUser(At),(Rt=this.webRTCClient.findCallWithStreamId(it))===null?(Mn.log("call not found in getCallIdFromRemoteMCUUser"),null):Rt.callId},this.ejectParticipantFromMCUSession=function(At,it,Rt){this.webRTCClient.MCUClient.ejectParticipant(At,it,Rt)},this.publish=function(At,it,Rt,bt,wt,Et){if(nt.Xh==="IE"&&(Mn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),Mn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1)return Mn.log("managing call with WebRTC Plugin"),bt==null&&(bt={}),bt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){apiCC.webRTCPluginInstalled=!0,Mn.info("manageWebRTCPlugin cb in call");var Nt=this.webRTCClient.MCUClient.getSessionMCU(At);return Nt&&Nt.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(At,it,Rt,bt,wt,Et):(Mn.debug("publish"),this.webRTCClient.MCUClient.publish(At,it,Rt,bt,wt,Et))},function(){Mn.log("actionOnInstallationNeeded")}),bt.apzcallId;var Mt=this.webRTCClient.MCUClient.getSessionMCU(At);return Mt&&Mt.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(At,it,Rt,bt,wt,Et):(Mn.debug("publish"),this.webRTCClient.MCUClient.publish(At,it,Rt,bt,wt,Et))},this.unpublish=function(At){Mn.info("unpublish"),this.webRTCClient.MCUClient.unpublish(At)},this.publishScreen=function(At,it,Rt,bt){var wt=this.webRTCClient.MCUClient.getSessionMCU(At);return wt&&wt.roomMode==="mesh"?(Mn.info("publishScreen"),this.webRTCClient.MCUClient.meshPublishScreen(At,it,Rt,bt)):(Mn.info("publishScreen"),this.webRTCClient.MCUClient.publishScreen(At,it,Rt,bt))},this.subscribe=function(At,it,Rt,bt,wt){return Mn.info("subscribe :",At),nt.Xh==="IE"&&(Mn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),Mn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1?(Mn.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){return apiCC.webRTCPluginInstalled=!0,Mn.log("manageWebRTCPlugin cb in subscribe"),typeof it=="boolean"&&(Mn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),it=it===!0?"AUDIOONLY":"VIDEO"),apiCC.session.apiCCWebRTCClient.subscribe(At,it,Rt,bt)},function(){Mn.log("actionOnInstallationNeeded")}),"WebRTC_Plugin"):(typeof it=="boolean"&&(Mn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),it=it===!0?"AUDIOONLY":"VIDEO"),this.webRTCClient.MCUClient.subscribeToStreams(At,it,Rt,bt,wt))},this.unsubscribe=function(At){Mn.info("unsubscribe :",At),this.webRTCClient!==null&&this.webRTCClient.MCUClient!==null&&this.webRTCClient.MCUClient.unsubscribe(At)},this.startStreaming=function(At,it,Rt,bt){return Mn.info("startStreaming"),this.webRTCClient.MCUClient.startStreaming(At,it,Rt,bt)},this.stopStreaming=function(At){return Mn.info("stopStreaming"),this.webRTCClient.MCUClient.stopStreaming(At)},this.startRecording=function(At,it,Rt,bt,wt){Mn.info("startRecording"),this.webRTCClient.MCUClient.startRecording(At,it,Rt,bt,wt)},this.stopRecording=function(At){Mn.info("stopRecording"),this.webRTCClient.MCUClient.stopRecording(At)},this.changeStreamPriority=function(At,it){var Rt=this.webRTCClient.findCallWithCallId(At);if(!Rt&&!(Rt=this.webRTCClient.findUserMediaById(At)))return Mn.error("changeStreamPriority - no such call",At),!1;if(!Rt.sessionMCU)return Mn.error("changeStreamPriority - no such sessionMCU"),!1;if(!(0,ot.Ym)(it,"number")||it<0)return Mn.error("changeStreamPriority - wrong priority",it),!1;var bt=JSON.stringify({type:"changeStreamPriority",roomId:Rt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:At,data:{pubSub:this.webRTCClient.MCUClient.pubConnector,priority:it}});return Mn.log("C->S: "+bt),apiCC.session.channel.socket.emit("changeStreamPriority",bt),!0},this.startComposite=function(At){Mn.info("startComposite"),this.webRTCClient.MCUClient.startComposite(At)},this.stopComposite=function(At){Mn.info("stopComposite"),this.webRTCClient.MCUClient.stopComposite(At)},this.startCompositeRecording=function(At,it,Rt,bt,wt){Mn.info("startCompositeRecording"),this.webRTCClient.MCUClient.startCompositeRecording(At,it,Rt,bt,wt)},this.stopCompositeRecording=function(At){Mn.info("stopCompositeRecording"),this.webRTCClient.MCUClient.stopCompositeRecording(At)},this.checkCallExist=function(At){for(var it=null,Rt=this.webRTCClient.callsTable.length;--Rt>=0;){var bt=this.webRTCClient.callsTable[Rt];if(bt.callId===At&&bt.data&&bt.sessionMCU&&(bt.data.MCUType==="MCU-Caller"||bt.data.MCUType==="MCU-Callee")&&bt.data.confId===bt.sessionMCU.roomName){it=bt;break}}return it||Mn.error("startCallRecording: no such call"),it},this.startCallRecording=function(At){var it;if(it=this.checkCallExist(At)){var Rt=(0,ot.ws)({},it.data);this.webRTCClient.MCUClient.startCompositeRecording("AUDIO-VIDEO",null,it.sessionMCU.convId,Rt,it.sessionMCU.roomName)}},this.stopCallRecording=function(At){var it;(it=this.checkCallExist(At))&&this.webRTCClient.MCUClient.stopCompositeRecording(it.sessionMCU.roomName)},this.enforceMCU=function(At){this.webRTCClient.MCUClient.enforceMCU(At)},this.takeSnapshotOnMCUSession=function(At){return Mn.info("takeSnapshotOnMCUSession"),this.webRTCClient.MCUClient.takeSnapshot(At)},this.sendMCUSessionInvitation=function(At,it,Rt){this.webRTCClient.MCUClient.sendSessionInvitation(At,it,Rt)},this.sendMCUSessionInvitationToGroupChat=function(At,it){this.webRTCClient.MCUClient.sendSessionInvitationToGroupChat(At,it)},this.acceptMCUSessionInvitation=function(At,it,Rt,bt){this.webRTCClient.MCUClient.initDivElements(Rt,bt),this.webRTCClient.MCUClient.acceptSessionInvitation(At,it)},this.leaveMCUSession=function(At){this.webRTCClient.MCUClient.leaveSession(At)},this.recordStream=function(At){Mn.info("recordStream :",At),MediaRecorder!==void 0?apiCC.recordMgr.record(At).then(function(){Mn.log("Recording started")}).catch(function(it){Mn.error("startRecord failed :",it)}):Mn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.stopRecordStream=function(At){Mn.info("stopRecordStream"),MediaRecorder!==void 0?apiCC.recordMgr.stop().then(function(it){Mn.log("Recording stopped"),At(it)}).catch(function(it){Mn.error("stopRecord failed :",it)}):Mn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.getMediaDevices=function(At){Mn.debug("getMediaDevices 2"),apiCC.getMediaDevices().then(function(it){At(it),apiCC.mediaDeviceMgr.gotSources(it)}).catch(function(it){At(null),apiCC.mediaDeviceMgr.gotSources(null)})},this.setAudioSourceId=function(At){Mn.info("setAudioSourceId :"+At),this.webRTCClient.audioSourceId=At},this.setAudioOutputId=function(At){Mn.info("setaudioOutputId :"+At),this.webRTCClient.audioOutputId=At},this.setVideoSourceId=function(At){Mn.info("setVideoSourceId :"+At),this.webRTCClient.videoSourceId=At},this.setVideoFacingMode=function(At){Mn.info("setVideoFacingMode :"+At),At==="user"||At==="environment"||At==="left"||At==="right"||At==="deactivated"?this.webRTCClient.facingMode=At==="deactivated"?null:At:Mn.log("facingMode value is not correct")},this.attachMediaStream=function(At,it){Mn.debug("attachMediaStream"),apiCC.attachMediaStream(At,it)},this.addStreamInDiv=function(At,it,Rt,bt,wt,Et){Mn.debug("addStreamInDiv"),apiCC.addStreamInDiv(At,it,Rt,bt,wt,Et)},this.removeElementFromDiv=function(At,it){Mn.debug("removeElementFromDiv"),apiCC.removeElementFromDiv(At,it)},this.setSelectedStream=function(At){Mn.warn("setSelectedStream() is now deprecated")},this.callback=function(At,it){return this.closureHandler=function(Rt){return At[it](Rt)},this.closureHandler},this.startPrecallTest=function(At,it,Rt,bt,wt){var Et={webRTCClient:this,notifyTerminated:At};this.callTest=new ir(Et,it,Rt,bt,wt),this.callTest.runBitRateTest()}}},6527:(rt,at,s)=>{s.d(at,{p:()=>nt}),s(3843),s(3710),s(7941),s(4916),s(2772),s(2564),s(561),s(1058),s(9653),s(3290),s(6755),s(3123),s(2222),s(4812);var et=s(1549).Y.get("ApiCCWhiteBoardClient"),nt=function(ot,ht,dt,pt,lt){function mt(st){st.style.display="none"}et.debug("Loading apiCC.ApiCCWhiteBoardClient"),this.roomId=null,this.whiteBoardDisconnectionTimeoutId=0,this.sessionStarted=!1,this.prev={},this.lastEmit=Date.now(),this.clients={},this.listenedPeers={},this.touchScreenActivated=!1,this.touchControlPoint={},this.drawElements=[],this.ghostElements={},this.redoStack=[],this.undoIndex=0,this.userCursorColor=null,this.cursors={},this.cursorStyle="cross",this.CURSOR_STYLES=["circle","cross"],this.currentScale=1,this.dx=0,this.dy=0,this.instructionsFaded=!1,this.canvas=null,this.ctx=null,this.currentTool="pen",this.currentColor="rgba(0, 0, 0, 1)",this.currentBrushWidth=1,this.readOnly=!1,this.isDrawing=!1,this.focusOnDrawing=!1,this.paperSheetId=0,this.drawingId=0,this.offline=!1,this.roomJoined=!1,this.laserModeActivated=!1,this.AVAILABLE_TOOLS=["pen","ellipse","rectangle","erase","void","arrow"],this.GEOMETRY_TOOLS=["arrow","rectangle","ellipse"],this.disconnectionTimer=lt!==void 0?lt:3e4,et.log("Setting Whiteboard disconnectionTimer to : "+this.disconnectionTimer),this.setCanvas=function(st){et.debug("[Whiteboard] setCanvas() :",st),this.canvas!==null&&(et.log("Unsetting old canvas events"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)))),st!==null&&document.getElementById(st)!==null?(this.canvas=document.getElementById(st),this.ctx=this.canvas.getContext("2d"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))):(st!==null&&document.getElementById(st)===null&&et.warn("No such element whose id is : "+st),this.canvas=null,this.ctx=null)},this.setCanvas(ht),this.sendDataToRoom=function(st){if(et.info("[Whiteboard] sendDataToRoom()"),this.offline===!1&&this.roomId!==null){if(apiCC.session===null||apiCC.session===void 0)return void et.info("apiCC.session does not exist, leaving process");et.debug("this.drawElements :",this.drawElements),et.debug("data.tool :",st.tool);var ut=[];et.debug("drawElementsToSend :",ut);var ft,yt={x:0,y:0,drawing:!1,tool:this.currentTool,cursorColor:this.userCursorColor,color:this.currentColor,width:this.currentBrushWidth,paperSheetId:this.paperSheetId,drawElements:ut,id:apiCC.session.apiCCId},vt=Object.keys(st);for(ft=0;ft<vt.length;ft++)yt[vt[ft]]=st[vt[ft]];apiCC.session.roomMgr.sendMessageToRoom(this.roomId,"whiteBoard",yt)}},this.setCursorsDiv=function(){et.warn("[Whiteboard] setCursorsDiv() - method obsolete, please use setUserCursorColor to set a cursor pointer that will be seen by other users")},this.setUserCursorColor=function(st){et.debug("[Whiteboard] setUserCursorColor() : "+st),st===null||st==="invisible"?this.userCursorColor="invisible":/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(st)?this.userCursorColor=st:(et.warn("[Whiteboard] setUserCursorColor() color "+st+" is invalid, defaulting to invisible"),this.userCursorColor="invisible")},this.setUserCursorColor(dt),this.setCursorStyle=function(st){et.debug("[Whiteboard] setCursorStyle() : "+st),this.CURSOR_STYLES.indexOf(st)>-1?(this.userCursorColor="invisible",this.cursorStyle=st):et.error("[Whiteboard] setCursorStyle() style "+st+" is invalid")},this.setFocusOnDrawing=function(st){et.debug("[Whiteboard] setFocusOnDrawing()"),this.focusOnDrawing=st},this.createRoom=function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et.debug("[Whiteboard] createRoom()"),apiCC.session.roomMgr.createRoom("whiteBoard",st)},this.requestContactListInRoom=function(st){et.log("[Whiteboard] requestContactListInRoom :"+st),apiCC.session.roomMgr.requestContactListInRoom(st)},this.setDrawingTool=function(st){et.debug("[Whiteboard] setDrawingTool()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.AVAILABLE_TOOLS.indexOf(st)>-1&&(this.currentTool=st,this.ghostElements[ut]=null)},this.setReadOnly=function(st){et.debug("[Whiteboard] setReadOnly()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.ghostElements[ut]=null,this.readOnly=st===!0,this.readOnly&&this.canvas!==null?(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))):this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))},this.laserModeProcess=function(st){var ut=this;setTimeout(function(){return ut.undo(st)},5e3)},this.undo=function(st){et.debug("[Whiteboard] undo()");var ut=this.drawElements.length-1,ft=null,yt=[],vt=[],St=null,xt=0;if(apiCC.session!==null&&(xt=apiCC.session.apiCCId),st===void 0)for(;ut>=0;)this.drawElements[ut].userId==xt&&(ft===null&&(ft=this.drawElements[ut].undoIndex),ft===this.drawElements[ut].undoIndex&&(St=this.drawElements.splice(ut,1)[0],yt.push(St),vt.push(St.drawingId))),ut--;else for(ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].userId==xt&&this.drawElements[ut].drawingId===st&&(et.debug("[Whiteboard] element found with drawingId in undo laser :",st),St=this.drawElements.splice(ut,1)[0],yt.push(St),vt.push(St.drawingId));yt.length>0&&(this.redraw(),this.sendDataToRoom({tool:"void",delete:vt,undoneElements:yt}),this.redoStack.push(yt))},this.redo=function(){et.debug("[Whiteboard] redo()");var st,ut=[];if(this.redoStack.length>0){for(ut=this.redoStack.pop(),st=0;st<ut.length;st++)this.addNewDrawing(ut[st]);this.sendDataToRoom({tool:"void",drawObjectsArray:ut}),this.redraw()}},this.setBrushSize=function(st){et.debug("[Whiteboard] setBrushSize()"),!isNaN(st)&&st>0&&(this.currentBrushWidth=st)},this.setBrushColor=function(st){et.debug("[Whiteboard] setBrushColor()"),this.currentColor=st},this.setScale=function(st){et.debug("[Whiteboard] setScale()"),st>0?(this.currentScale=st,this.redraw()):et.warn("Scale factor must be > 0!")},this.getScale=function(){return et.debug("[Whiteboard] getScale()"),this.currentScale},this.setOffset=function(st,ut){et.debug("[Whiteboard] setOffset()");var ft=parseInt(st,10),yt=parseInt(ut,10);isNaN(ft)||isNaN(yt)||(this.dx=Number(ft),this.dy=Number(yt),this.redraw())},this.getOffset=function(){return et.debug("[Whiteboard] getOffset()"),{x:this.dx,y:this.dy}},this.printSharedText=function(st,ut,ft,yt,vt,St){et.debug("[Whiteboard] printSharedText()"),this.setBrushStyle(this.currentColor,this.currentBrushWidth),this.undoIndex++,this.redoStack=[];var xt=0;apiCC.session!==null&&(xt=apiCC.session.apiCCId);var Ut={type:"text",x:st,y:ut,text:ft,size:yt,font:vt,border:St,userId:xt,drawingId:this.drawingId,color:this.currentColor,width:this.currentBrushWidth,undoIndex:this.undoIndex,time:Date.now()};this.sendDataToRoom({x:st,y:ut,tool:"void",drawObject:Ut}),this.drawingId++,this.addNewDrawing(Ut)},this.addPeerListener=function(st,ut){et.debug("[Whiteboard] addPeerListener()"),this.listenedPeers.hasOwnProperty(st)||(this.listenedPeers[st]=[]),this.listenedPeers[st].push(ut)},this.inviteInRoom=function(st,ut,ft){var yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};et.debug("[Whiteboard] inviteInRoom()"),st!==null?ut!==null?apiCC.session.roomMgr.inviteInRoom(st,ut,"whiteBoard",ft,yt):et.debug("wrong destId"):et.debug("wrong roomId")},this.answerToRoomInvitation=function(st,ut){et.info("[Whiteboard] answerToRoomInvitation()");var ft=ut&&!this.isInRoom();return this.isInRoom()?et.error("[Whiteboard] cannot answer room invitation : user is already in a room"):apiCC.session.roomMgr.answerToRoomInvitation(st,ut,"whiteBoard"),ft&&(et.log("[Whiteboard] user joining room"),this.paperSheetId=0,this.drawingId=0,this.roomId=st,this.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),ft},this.joinRoom=function(st){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};et.info("[Whiteboard] joinRoom() roomId :",st),st==null?et.error("[Whiteboard] cannot join room : room is null or undefined"):this.isInRoom()&&this.roomJoined===!0?et.error("[Whiteboard] cannot join room : user is already in a room"):apiCC.session.roomMgr.joinRoom(st,"whiteBoard",ut)},this.leaveRoom=function(){et.info("[Whiteboard] leaveRoom()"),this.isInRoom()&&(apiCC.session.roomMgr.leaveRoom(this.roomId,"whiteBoard"),this.roomId=null,this.paperSheetId=0,this.drawingId=0,this.listenedPeers={},this.roomJoined=!1)},this.isInRoom=function(){return this.roomId!==null},this.clearPaper=function(){et.debug("[Whiteboard] clearPaper()"),this.deleteHistory()},this.refreshCanvas=function(){if(this.canvas!==null&&this.ctx!==null){var st=this.canvas.width;this.canvas.width=st}},this.deleteHistory=function(){et.info("[Whiteboard] deleteHistory()");var st=0;apiCC.session!==null&&(st=apiCC.session.apiCCId),this.refreshCanvas(),this.drawElements=[],this.ghostElements[st]=null,this.paperSheetId++,this.drawingId=0,this.sendDataToRoom({tool:"void",deleteHistory:!0})},this.setBrushStyle=function(st,ut){this.ctx!==null&&(this.ctx.strokeStyle=st,this.ctx.fillStyle=st,this.ctx.lineWidth=ut)},this.redraw=function(){var st,ut,ft;for(et.debug("[Whiteboard] redraw()"),this.refreshCanvas(),st=0;st<this.drawElements.length;st++)this.drawSingleObject(this.drawElements[st]);for(ut=Object.keys(this.ghostElements),st=0;st<ut.length;st++)this.ghostElements[ut[st]]!==null&&this.drawSingleObject(this.ghostElements[ut[st]]);for(ut=Object.keys(this.cursors),st=0;st<ut.length;st++)if(this.cursors[ut[st]]!==null&&this.cursors[ut[st]].color!=="invisible"&&(this.cursors[ut[st]].x!==0||this.cursors[ut[st]].y!==0))switch(ft={fromx:(this.cursors[ut[st]].x-this.dx)*this.currentScale-13,fromy:(this.cursors[ut[st]].y-this.dy)*this.currentScale-13,tox:(this.cursors[ut[st]].x-this.dx)*this.currentScale+13,toy:(this.cursors[ut[st]].y-this.dy)*this.currentScale+13},this.setBrushStyle(this.cursors[ut[st]].color,4),this.cursorStyle){case"circle":this.ctx!==null&&(this.ctx.globalAlpha=.4,this.fillEllipse(ft.fromx,ft.fromy,ft.tox,ft.toy),this.drawEllipse(ft.fromx+2,ft.fromy+2,ft.tox-2,ft.toy-2),this.ctx.globalAlpha=1);break;case"cross":this.ctx!==null&&(this.ctx.globalAlpha=.7,this.ctx.beginPath(),this.ctx.moveTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.fromy),this.ctx.lineTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.toy),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(ft.fromx,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineTo(ft.tox,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.globalAlpha=1)}},this.addNewDrawing=function(st){var ut=0;this.drawElements.push(st),this.drawSingleObject(st),apiCC.session!==null&&(ut=apiCC.session.apiCCId),st.userId===ut&&this.laserModeActivated===!0&&this.laserModeProcess(st.drawingId)},this.drawSingleObject=function(st){if(this.ctx!==null&&this.canvas!==null){var ut={};switch(this.setBrushStyle(st.color,st.width),this.ctx.scale(this.currentScale,this.currentScale),ut.fromx=st.fromx-this.dx,ut.tox=st.tox-this.dx,ut.x=st.x-this.dx,ut.fromy=st.fromy-this.dy,ut.toy=st.toy-this.dy,ut.y=st.y-this.dy,st.type){case"arrow":this.drawArrow(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"ellipse":this.drawEllipse(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"rectangle":this.drawRectangle(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"pen":this.drawLine(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"erase":this.eraseArea(ut.fromx,ut.fromy);break;case"text":this.drawText(ut.x,ut.y,st.text,st.size,st.font,st.border)}this.ctx.scale(1/this.currentScale,1/this.currentScale)}},this.drawLine=function(st,ut,ft,yt){this.ctx!==null&&(this.ctx.beginPath(),this.ctx.moveTo(st,ut),this.ctx.lineTo(ft,yt),this.ctx.lineCap="round",this.ctx.stroke())},this.drawText=function(st,ut,ft,yt,vt,St){if(this.ctx!==null){var xt,Ut,Tt="Arial";vt!=null&&(Tt=vt),this.ctx.font=yt+"px "+Tt,this.ctx.fillText(ft,st,ut),St!=null&&(xt=this.ctx.strokeStyle,Ut=this.ctx.lineWidth,this.ctx.strokeStyle=St,this.ctx.lineWidth=1,this.ctx.strokeText(ft,st,ut),this.ctx.strokeStyle=xt,this.ctx.lineWidth=Ut)}},this.eraseArea=function(st,ut){this.ctx!==null&&this.ctx.clearRect(st-this.ctx.lineWidth-1,ut-this.ctx.lineWidth-1,2*this.ctx.lineWidth+2,2*this.ctx.lineWidth+2)},this.drawArrow=function(st,ut,ft,yt){if(this.ctx!==null){var vt=Math.atan2(yt-ut,ft-st);this.ctx.beginPath(),this.ctx.lineCap="butt",this.ctx.moveTo(st,ut),this.ctx.lineTo(ft,yt),this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(ft,yt),this.ctx.rotate(vt+Math.PI/2),this.ctx.moveTo(0,-this.ctx.lineWidth),this.ctx.lineTo(5*this.ctx.lineWidth*.5+1,10+.25*this.ctx.lineWidth),this.ctx.lineTo(-5*this.ctx.lineWidth*.5-1,10+.25*this.ctx.lineWidth),this.ctx.closePath(),this.ctx.restore(),this.ctx.fill()}},this.drawEllipse=function(st,ut,ft,yt){var vt=null,St=null;this.ctx!==null&&(vt={x:Math.abs(st-ft)/2,y:Math.abs(ut-yt)/2},St={x:st-(st-ft)/2,y:ut-(ut-yt)/2},this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(St.x,St.y,vt.x,vt.y,0,0,2*Math.PI),this.ctx.stroke())},this.fillEllipse=function(st,ut,ft,yt){if(this.ctx!==null){var vt={x:Math.abs(st-ft)/2,y:Math.abs(ut-yt)/2},St={x:st-(st-ft)/2,y:ut-(ut-yt)/2};this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(St.x,St.y,vt.x,vt.y,0,0,2*Math.PI),this.ctx.fill()}},this.drawRectangle=function(st,ut,ft,yt){if(this.ctx!==null){this.ctx.beginPath();var vt=st,St=ut;st>ft&&(vt=ft),ut>yt&&(St=yt),this.ctx.rect(vt,St,Math.abs(st-ft),Math.abs(ut-yt)),this.ctx.stroke()}},this.getContext=function(){return this.ctx},this.loadPhotoInBackground=function(st){et.debug("[Whiteboard] loadPhotoInBackground :"+st);var ut=document.getElementsByTagName("body")[0];ut.style.backgroundImage="url("+st+")",ut.style.backgroundPosition="50% 50%",ut.style.backgroundRepeat="no-repeat"},this.messageProcessing=function(st){et.debug("[Whiteboard] messageProcessing");var ut,ft=null,yt=null,vt=!1,St=null,xt=null,Ut=null,Tt=null,kt=null;if(this.cursors[st.id]||(et.log("[Whiteboard] messageProcessing - creating cursor for new user : "+st.id),this.cursors[st.id]={id:st.id},this.clients[st.id]={}),this.cursors[st.id].x=st.x,this.cursors[st.id].y=st.y,this.cursors[st.id].lastUpdate=Date.now(),st.cursorColor&&st.cursorColor!==null?this.cursors[st.id].color=st.cursorColor:this.cursors[st.id].color="invisible",apiRTC.userAgentInstance===void 0||apiRTC.userAgentInstance.capabilities.whiteboardCursor==="ON"?this.cursors[st.id].color!=="invisible"&&(vt=!0):(et.debug("[Whiteboard] - cursor is not supported on userAgent"),this.cursors[st.id].color="invisible"),this.ghostElements[st.id]!==null&&(this.ghostElements[st.id]=null,vt=!0),this.listenedPeers.hasOwnProperty(st.id))for(St={id:st.id,x:st.x,y:st.y,tool:st.tool,drawing:st.drawing},ut=0;ut<this.listenedPeers[st.id].length;ut++)typeof this.listenedPeers[st.id][ut]=="function"?this.listenedPeers[st.id][ut](St):et.warn("[Whiteboard] Peer listenener is not a function!");if(st.drawing&&this.clients[st.id]&&(et.debug("data.drawing && this.clients[data.id]"),yt={fromx:st.prevX!==void 0?st.prevX:this.clients[st.id].x,fromy:st.prevY!==void 0?st.prevY:this.clients[st.id].y,tox:st.x,toy:st.y,type:st.tool!==null?st.tool:"pen",color:st.color,width:st.width,userId:st.id,drawingId:st.drawingId},this.GEOMETRY_TOOLS.indexOf(yt.type)>-1?st.prevX&&st.prevY&&(this.ghostElements[st.id]=yt,vt=!0):this.addNewDrawing(yt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(st.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(st.y-this.dy)-ft.clientHeight/2)),st.drawObject&&((yt=st.drawObject).color=st.color,yt.width=st.width,this.ghostElements[st.id]=null,this.addNewDrawing(yt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(st.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(st.y-this.dy)-ft.clientHeight/2)),st.hasOwnProperty("drawObjectsArray"))for(ut=0;ut<st.drawObjectsArray.length;ut++)this.addNewDrawing(st.drawObjectsArray[ut]);if(st.hasOwnProperty("delete"))for(ut=this.drawElements.length-1,vt=!0;ut>=0;)st.delete.indexOf(this.drawElements[ut].drawingId)>-1&&this.drawElements[ut].userId==st.id&&this.drawElements.splice(ut,1),ut--;if(st.hasOwnProperty("paperSheetId")){if(st.paperSheetId<this.paperSheetId)et.debug("[Whiteboard] - data.paperSheetId < this.paperSheetId");else if(st.paperSheetId>this.paperSheetId){if(et.debug("[Whiteboard] - messageProcessing : peer has a more recent version : "+this.paperSheetId+" vs "+st.paperSheetId),st.hasOwnProperty("deleteHistory")&&et.debug("User : "+st.id+" ,has deleted the history"),st.hasOwnProperty("drawElements")){for(et.debug("[Whiteboard] - messageProcessing : receiving update from peer"),st.drawElements!==null?this.drawElements=st.drawElements:this.drawElements=[],ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].hasOwnProperty("userId")&&this.drawElements[ut].hasOwnProperty("drawingId")&&(this.clients[this.drawElements[ut].userId]={x:0,y:0,drawing:!1,tool:"pen",cursorColor:null,color:null,width:1,paperSheetId:this.paperSheetId,drawingId:this.drawElements[ut].drawingId,id:this.drawElements[ut].userId});this.paperSheetId=st.paperSheetId,this.drawingId=0,vt=!0}}else if(st.hasOwnProperty("drawingId"))if(et.debug("[Whiteboard] - data.hasOwnProperty(drawingId): "),st.drawingId!==0&&this.clients[st.id]===void 0||this.clients[st.id]!==void 0&&this.clients[st.id].hasOwnProperty("drawingId")&&st.drawingId-this.clients[st.id].drawingId>1)et.log("[Whiteboard] - messageProcessing : catchup from peer required : "+st.drawingId),Tt=st.id+"||-1",this.clients[st.id]!==void 0&&this.clients[st.id].hasOwnProperty("drawingId")&&(Tt=st.id+"||"+this.clients[st.id].drawingId),this.sendDataToRoom({tool:"void",needCatchUp:Tt});else if(st.hasOwnProperty("needCatchUp")&&(st.needCatchUp.startsWith(apiCC.session.apiCCId+"||")||st.needCatchUp.startsWith("*||"))){for(et.debug("[Whiteboard] - messageProcessing : letting peer catchup: "+st.id),xt=st.needCatchUp.split("||")[1],Ut=[],ut=0;ut<this.drawElements.length;ut++)(kt=this.drawElements[ut]).hasOwnProperty("userId")&&kt.hasOwnProperty("drawingId")&&kt.userId===apiCC.session.apiCCId&&kt.drawingId>parseInt(xt,10)&&Ut.push(kt);this.sendDataToRoom({tool:"void",catchUpData:Ut,catchupIndex:xt})}else et.debug("[Whiteboard] - else - drawingId");else if(st.hasOwnProperty("needCatchUp")){for(et.debug("[Whiteboard] - messageProcessing : needCatchUp"+st.id),xt=st.needCatchUp.split("||")[1],Ut=[],ut=0;ut<this.drawElements.length;ut++)kt=this.drawElements[ut],Ut.push(kt);et.debug("[Whiteboard] - sending catchUpData : ",Ut),this.sendDataToRoom({tool:"void",catchUpData:Ut,catchupIndex:xt})}else et.debug("[Whiteboard] - else - paperSheetId");if(st.hasOwnProperty("catchUpData")){for(et.debug("[Whiteboard] - messageProcessing : catching up: "+st.id),st.catchUpStatus==="complete"&&(et.debug("catchUpData is complete, cleaning drawElements"),this.drawElements.splice(0,this.drawElements.length)),ut=0;ut<st.catchUpData.length;ut++)kt=st.catchUpData[ut],st.userId===apiCC.session.apiCCId&&kt.hasOwnProperty("drawingId")&&this.drawingId<kt.drawingId&&(this.drawingId=kt.drawingId+1);this.drawElements=st.catchUpData.concat(this.drawElements),this.paperSheetId=st.paperSheetId,vt=!0}}vt&&this.redraw(),this.clients[st.id]=st},this.isStarted=function(){return this.sessionStarted},this.start=function(){this.isStarted()?et.warn("[Whiteboard] WhiteBoardClient is already started"):(et.info("[Whiteboard] starting WhiteBoardClient"),this.isDrawing=!1,this.prev={},this.lastEmit=Date.now(),this.currentScale=1,this.dx=0,this.dy=0,this.drawingId=0,this.clients={},this.listenedPeers={},this.cursors={},this.drawElements=[],this.touchScreenActivated=!1,this.sessionStarted=!0,this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove),this.redraw()),apiCC.session!==null&&apiCC.session.roomMgr!==void 0||(et.log("[Whiteboard] roomMgr is not defined, setting offline mode"),this.offline=!0)},this.stop=function(){this.isStarted()?(et.info("[Whiteboard] Stopping WhiteBoardClient"),this.isInRoom()&&this.leaveRoom(),this.sessionStarted=!1,this.canvas!==null&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))),this.drawElements=[],this.ghostElements={},this.redoStack=[]):et.info("[Whiteboard] cannot stop WhiteboardClient as it is not started")},this.getTouchOffSet=function(st){et.debug("[Whiteboard] getTouchOffSet():");var ut,ft,yt,vt,St=null,xt={offsetX:0,offsetY:0};return St=st.target,ut=window.getComputedStyle(St,null),ft=parseInt(ut.borderLeftWidth,10),yt=parseInt(ut.borderTopWidth,10),vt=St.getBoundingClientRect(),xt.offsetX=st.clientX-ft-vt.left,xt.offsetY=st.clientY-yt-vt.top,et.log("offset.offsetX :"+xt.offsetX),et.log("offset.offsetY :"+xt.offsetY),xt},this.toggleTouchScreen=function(){this.touchScreenActivated===!0?this.deactivateTouchScreen():this.activateTouchScreen()},this.activateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!0,this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to activateTouchScreen() while canvas is null.")},this.deactivateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!1,this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to deactivateTouchScreen() while canvas is null.")},this.activateLaserMode=function(){this.laserModeActivated=!0},this.deactivateLaserMode=function(){this.laserModeActivated=!1},this.sendDrawingData=function(st,ut,ft){et.debug("[Whiteboard] sendDrawingData()");var yt={x:st.offsetX,y:st.offsetY,drawing:ut,prevX:this.prev.x,prevY:this.prev.y};if(ut!==!1||this.userCursorColor!=="invisible"){var vt=0;apiCC.session!==null&&(vt=apiCC.session.apiCCId),ft!==null&&(yt.drawObject=ft,yt.drawObject.drawingId=this.drawingId,yt.drawObject.userId=vt,this.drawingId++),yt.drawingId=this.drawingId,this.sendDataToRoom(yt)}else et.debug("isDrawing false and userCursorColor invisible - leaving sendDrawingData")},this.onmousedown=(function(st){st.preventDefault();var ut,ft,yt=st.target||st.srcElement,vt=yt.currentStyle||window.getComputedStyle(yt,null),St=parseInt(vt.borderLeftWidth,10)||0,xt=parseInt(vt.borderTopWidth,10)||0,Ut=yt.getBoundingClientRect(),Tt={offsetX:this.dx+1/this.currentScale*(st.clientX-St-Ut.left),offsetY:this.dy+1/this.currentScale*(st.clientY-xt-Ut.top)};if(this.prev.x=Tt.offsetX,this.prev.y=Tt.offsetY,this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(ut=document.getElementById(pt))===null||this.instructionsFaded||(mt(ut),this.instructionsFaded=!0),this.currentTool==="erase"){this.sendDrawingData(Tt,this.isDrawing,null);var kt=0;apiCC.session!==null&&(kt=apiCC.session.apiCCId),this.lastEmit=Date.now(),ft={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:kt,drawingId:this.drawingId,undoIndex:this.undoIndex,time:Date.now()},this.drawingId++,this.addNewDrawing(ft),this.redraw()}}).bind(this),this.onmouseup=(function(st){var ut,ft=null,yt=null,vt=0,St=0,xt=null,Ut={offsetX:0,offsetY:0},Tt=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(yt=(ft=st.target||st.srcElement).currentStyle||window.getComputedStyle(ft,null),vt=parseInt(yt.borderLeftWidth,10)||0,St=parseInt(yt.borderTopWidth,10)||0,xt=ft.getBoundingClientRect(),Ut.offsetX=this.dx+1/this.currentScale*(st.clientX-vt-xt.left),Ut.offsetY=this.dy+1/this.currentScale*(st.clientY-St-xt.top),apiCC.session!==null&&(Tt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:Ut.offsetX,toy:Ut.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:Tt,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(Ut,this.isDrawing,ut),this.ghostElements[Tt]=null,this.redraw(),this.addNewDrawing(ut),this.prev.x=Ut.offsetX,this.prev.y=Ut.offsetY),this.isDrawing=!1,this.ghostElements[Tt]=null}).bind(this),this.onmouseleave=(function(){var st=0;apiCC.session!==null&&(st=apiCC.session.apiCCId),this.isDrawing=!1,this.sendDrawingData({offsetX:0,offsetY:0},this.isDrawing,null),this.ghostElements[st]=null}).bind(this),this.onmousemove=(function(st){var ut,ft,yt,vt,St,xt=null,Ut={};if(ut=(xt=st.target||st.srcElement).currentStyle||window.getComputedStyle(xt,null),ft=parseInt(ut.borderLeftWidth,10)||0,yt=parseInt(ut.borderTopWidth,10)||0,vt=xt.getBoundingClientRect(),Ut.offsetX=this.dx+1/this.currentScale*(st.clientX-ft-vt.left),Ut.offsetY=this.dy+1/this.currentScale*(st.clientY-yt-vt.top),Date.now()-this.lastEmit>30)if(this.sendDrawingData(Ut,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing){var Tt=0;apiCC.session!==null&&(Tt=apiCC.session.apiCCId),St={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:Tt,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(St.tox=Ut.offsetX,St.toy=Ut.offsetY),St.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(St),this.prev.x=Ut.offsetX,this.prev.y=Ut.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(St.tox=Ut.offsetX,St.toy=Ut.offsetY,this.ghostElements[Tt]=St),this.currentTool!=="pen"&&this.redraw()}else this.currentTool==="erase"&&(this.redraw(),St={type:"rectangle",fromx:Ut.offsetX-this.currentBrushWidth,fromy:Ut.offsetY-this.currentBrushWidth,tox:parseInt(Ut.offsetX,10)+parseInt(this.currentBrushWidth,10),toy:parseInt(Ut.offsetY,10)+parseInt(this.currentBrushWidth,10),color:"#444444",width:1},this.drawSingleObject(St),St.color="#DDDDDD",St.fromx=St.fromx-1,St.fromy=St.fromy-1,St.tox=St.tox+1,St.toy=St.toy+1,this.drawSingleObject(St))}).bind(this),this.onTouchStart=(function(st){et.debug("[Whiteboard] handleStart"),st.preventDefault();var ut,ft=st.changedTouches,yt={};this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(yt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*yt.offsetX,yt.offsetY=this.dy+1/this.currentScale*yt.offsetY,this.prev.x=yt.offsetX,this.prev.y=yt.offsetY,this.sendDrawingData(yt,!1,null),(ut=document.getElementById(pt))!==null&&mt(ut)}).bind(this),this.onTouchEnd=(function(st){et.debug("[Whiteboard] handleEnd :"+st);var ut,ft={},yt=st.changedTouches,vt=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&((ft=this.getTouchOffSet(yt[0])).offsetX=this.dx+1/this.currentScale*ft.offsetX,ft.offsetY=this.dy+1/this.currentScale*ft.offsetY,apiCC.session!==null&&(vt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:ft.offsetX,toy:ft.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:vt,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(ft,this.isDrawing,ut),this.addNewDrawing(ut),this.prev.x=ft.offsetX,this.prev.y=ft.offsetY),this.isDrawing=!1,this.ghostElements[vt]=null,st=null}).bind(this),this.onTouchCancel=(function(st){et.debug("[Whiteboard] handleCancel :"+st);var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.isDrawing=!1,this.ghostElements[ut]=null,st=null}).bind(this),this.onTouchMove=(function(st){et.debug("[Whiteboard] handleMove :"+st);var ut,ft=st.changedTouches,yt={};if(Date.now()-this.lastEmit>30&&((yt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*yt.offsetX,yt.offsetY=this.dy+1/this.currentScale*yt.offsetY,this.sendDrawingData(yt,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing)){(yt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*yt.offsetX,yt.offsetY=this.dy+1/this.currentScale*yt.offsetY;var vt=0;apiCC.session!==null&&(vt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:vt,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(ut.tox=yt.offsetX,ut.toy=yt.offsetY),ut.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(ut),this.prev.x=yt.offsetX,this.prev.y=yt.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(ut.tox=yt.offsetX,ut.toy=yt.offsetY,this.ghostElements[vt]=ut,this.redraw())}}).bind(this)}},8560:(rt,at,s)=>{s.r(at),s(2772),s(3710),s(9554),s(1539),s(8674),s(561),s(2564),s(8309),s(4916),s(3123),s(1058),s(6992),s(8783),s(3948),s(285),s(1637),s(4363),s(9653),s(9714),s(3843),s(7941),s(4812),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2222),s(9600),s(6755),s(4747),s(2526),s(1817),s(2165);var et=s(1549),nt=s(5945),ot=s(8765),ht=s(1215),dt=s(3173),pt=et.Y.get("RecordManager"),lt=s(4708);function mt(Tt,kt){for(var Dt=0;Dt<kt.length;Dt++){var Vt=kt[Dt];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(Tt,Vt.key,Vt)}}s(2707),s(7042),s(9070);var st=et.Y.get("AudioProcessor"),ut=window.AudioContext||window.webkitAudioContext||!1,ft=function(){function Tt(){(function(Vt,Ot){if(!(Vt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,Tt),this.audioContext=null}var kt,Dt;return kt=Tt,(Dt=[{key:"getOrCreateAudioContext",value:function(){return st.debug("getOrCreateAudioContext"),apiRTC.osName==="iOS"&&typeof cordova<"u"?st.debug("No audioContext for iOS cordova"):ut&&(this.audioContext=new ut),this.audioContext.state==="suspended"&&this.audioContext.resume().then(function(){st.debug("AudioContext is resumed")}),this.audioContext}},{key:"listenToAudio",value:function(Vt,Ot){if(st.debug("listenToAudio()"),Ot!=null&&apiCC.activeSpeakerDetect===!0&&Ot.childStreamType!=="noiseReduction"){st.debug("activeSpeakerDetect()");var Lt=null,Gt=!1,tn=this.getOrCreateAudioContext();tn!=null?(Ot.nodeCtx={},Ot.nodeCtx.sourceNode=tn.createMediaStreamSource(Vt),Ot.nodeCtx.analyserNode=tn.createAnalyser(),Ot.nodeCtx.analyserNode.fftSize=2048,Ot.nodeCtx.sourceNode.connect(Ot.nodeCtx.analyserNode),Ot.nodeCtx.listenToAudioIntervalId=setInterval(function(){var zt,cn,un=new Uint8Array(Ot.nodeCtx.analyserNode.frequencyBinCount),fn=0;for(Ot.nodeCtx.analyserNode.getByteFrequencyData(un),un.sort(function(vn,Ft){return Ft-vn}),un=un.slice(0,50),cn=0;cn<un.length;cn++)fn+=un[cn];(zt=fn/un.length)>255*apiCC.activeSpeakerThreshold&&(Gt||(Gt=!0,Ot.notifyActiveSpeaker(zt),st.debug("notifyActiveSpeaker this.userMediaStreamId :",Ot.userMediaStreamId)),Lt!==null&&clearTimeout(Lt),Lt=setTimeout(function(){Ot.notifyNotActiveSpeaker(zt),st.debug("notifyNotActiveSpeaker this.userMediaStreamId :",Ot.userMediaStreamId),Gt=!1},1e3))},100)):st.error("listenToAudio() - Unable to create audio context")}else st.debug("activeSpeakerDetecting is not activated or stream type is noiseReduction")}},{key:"checkstopAudioNodeCtxConditions",value:function(Vt){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Vt===void 0?"nodeCtx undefined":"OK"}},{key:"stopAudioNodeCtx",value:function(Vt){st.debug("stopAudioNodeCtx :",Vt);var Ot=this.checkstopAudioNodeCtxConditions(Vt);if(Ot!=="OK")return Ot;Vt.sourceNode!==void 0&&Vt.sourceNode!==null&&(Vt.sourceNode.disconnect(),Vt.sourceNode=null),Vt.analyserNode!==void 0&&Vt.analyserNode!==null&&(Vt.analyserNode.disconnect(),Vt.analyserNode=null),Vt.audioDestination!==void 0&&Vt.audioDestination!==null&&(Vt.audioDestination.disconnect(),Vt.audioDestination=null),Vt.originalMediaTrack!==void 0&&Vt.originalMediaTrack!==null&&(Vt.originalMediaTrack=null),Vt.outputMediaTrack!==void 0&&Vt.outputMediaTrack!==null&&(Vt.outputMediaTrack=null),Vt.listenToAudioIntervalId!==void 0&&Vt.listenToAudioIntervalId!==null&&(clearInterval(Vt.listenToAudioIntervalId),Vt.listenToAudioIntervalId=null),Vt.noiseSuppressorNode!==void 0&&Vt.noiseSuppressorNode!==null&&(Vt.noiseSuppressorNode.port.onmessage=null,Vt.noiseSuppressorNode.port.close(),Vt.noiseSuppressorNode=null)}},{key:"checkChildTypeConditions",value:function(Vt){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Vt.childType!==void 0&&Vt.childType==="noiseReduction"?"This stream has already a noiseReduction effect applied : "+Vt.childType:Vt.childrenTypeExists("noiseReduction")?"This stream has already has a noiseReduction sub instance running":"OK"}},{key:"startNoiseReduction",value:function(Vt){var Ot=this,Lt=null,Gt=!1;return new Promise(function(tn,zt){st.debug("startNoiseReduction");var cn=Ot.checkChildTypeConditions(Vt);if(cn!=="OK")return zt(cn);Vt.nodeCtx={},Vt.nodeCtx.originalMediaTrack=Vt.data.getAudioTracks()[0];var un=apiCC.audioProcessor.getOrCreateAudioContext();Vt.nodeCtx.sourceNode=un.createMediaStreamSource(Vt.data);var fn={channelCount:Vt.data.getAudioTracks()[0].getSettings().channelCount,channelCountMode:"explicit"};Vt.nodeCtx.audioDestination=new MediaStreamAudioDestinationNode(un,fn),Vt.nodeCtx.outputMediaTrack=Vt.nodeCtx.audioDestination.stream.getAudioTracks()[0],un.audioWorklet.addModule("https://cdn.apizee.com/apiRTC/lib/noiseReduction/ApiRTC_NR_Worklet_1.0.1.js").then(function(){Vt.nodeCtx.noiseSuppressorNode=new AudioWorkletNode(un,"NoiseSuppressorWorklet",{parameterData:{activeSpeakerDetect:apiCC.activeSpeakerDetect}}),Vt.nodeCtx.sourceNode.connect(Vt.nodeCtx.noiseSuppressorNode).connect(Vt.nodeCtx.audioDestination);var vn={audioFilterIsApplied:Vt.audioFilterIsApplied,audioAppliedFilter:Vt.audioAppliedFilter,videoFilterIsApplied:Vt.videoFilterIsApplied,videoAppliedFilter:Vt.videoAppliedFilter,childType:Vt.childType},Ft=Vt.nodeCtx.audioDestination.stream;Vt.data.getVideoTracks().forEach(function(pn){Ft.addTrack(pn.clone())}),Vt.createChildStreamFromStream(Ft,"noiseReduction",vn).then(function(pn){Vt.addChildren(pn,"noiseReduction"),pn.applyMuteStatusFromParent();var gn=apiCC.getUserMediaStream(Vt.userMediaStreamId);apiCC.audioProcessor.stopAudioNodeCtx(gn.nodeCtx);var Tn=apiCC.getUserMediaStream(pn.userMediaStreamId);return Vt.nodeCtx.noiseSuppressorNode.port.onmessage=function(In){In.data.vadScore>apiCC.activeSpeakerThreshold&&(Gt||(Gt=!0,Tn.notifyActiveSpeaker(In.data.vadScore),st.debug("notifyActiveSpeaker this.userMediaStreamId :",Tn.userMediaStreamId)),Lt!==null&&clearTimeout(Lt),Lt=setTimeout(function(){Tn.notifyNotActiveSpeaker(In.data.vadScore),st.debug("notifyNotActiveSpeaker this.userMediaStreamId :",Tn.userMediaStreamId),Gt=!1},1e3))},tn(pn)}).catch(zt)}).catch(function(vn){console.error("Error while adding audio worklet module: ",vn)})})}}])&&mt(kt.prototype,Dt),Object.defineProperty(kt,"prototype",{writable:!1}),Tt}();function yt(Tt){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},yt(Tt)}var vt=et.Y.get("ApiCC_Methods"),St=s(6075).F;apiCC.myWebRTC_Adapter=new St,apiCC.myWebRTC_Event=new ot.K;var xt=apiCC.myWebRTC_Event;apiCC.myEventTable=[],apiCC.ApiCCSession=s(3720).K,apiCC.ApiCCWebRTCClient=s(1192).D,apiCC.ApiCCUserMediaStream=s(7323).q,apiCC.ApiCCPointerSharingClient=s(9213).X,apiCC.ApiCCWhiteBoardClient=s(6527).p,apiCC.ApiCCDataClient=s(128)._,apiCC.ApiCCIMClient=s(6844).U,apiCC.recordMgr=new function(){pt.debug("RecordManager creation"),this.mediaRecorder=null,this.recordedBlobs=[],this.mimeType=null,this.record=function(Tt,kt){var Dt=this;return pt.info("record"),pt.log("stream :"+Tt),pt.log("stream :",Tt),new Promise(function(Vt,Ot){var Lt=null;if(MediaRecorder===void 0)return pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt));if(Tt===null)return pt.debug("Stream has no data, cannot record"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"Stream has no data, cannot record",pt));if(Dt.mediaRecorder!==null&&(pt.log("this.mediaRecorder.state :"+Dt.mediaRecorder.state),Dt.mediaRecorder.state==="recording"||Dt.mediaRecorder.state==="paused"))return pt.log("mediaRecorder is already ongoing, use stopRecordStream before trying another record"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already ongoing, use stopRecordStream before trying another record",pt));if(pt.debug("checking MediaRecorderOptions mimeType support"),kt!=null?(pt.debug("options is defined :",kt),kt.mimeType!==null&&kt.mimeType!==void 0&&(pt.debug("contentType is defined :",kt.mimeType),MediaRecorder.isTypeSupported(kt.mimeType)&&(Lt=kt.mimeType))):kt={},Lt===null){var Gt="video/webm;codecs=vp8,opus";MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt="video/webm;codecs=vp9,opus",MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt="video/webm",MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt=""))),kt.mimeType=Gt}Dt.mimeType=kt.mimeType,pt.debug("Start record with MediaRecorderOptions :",kt);try{Dt.recordedBlobs=[],Dt.mediaRecorder=new MediaRecorder(Tt,kt)}catch(tn){return pt.error("Exception while creating MediaRecorder: "+tn+". mimeType: "+kt.mimeType),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"Exception while creating MediaRecorder: "+tn+". mimeType: "+kt.mimeType,pt))}Dt.mediaRecorder.onstart=function(tn){pt.log("onstart :"+tn),this.onerror=null,Vt()},Dt.mediaRecorder.ondataavailable=function(tn){tn.data&&tn.data.size>0&&apiCC.recordMgr.recordedBlobs.push(tn.data)},Dt.mediaRecorder.onerror=function(tn){pt.log("onerror :"+tn),Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+tn,pt)),this.onerror=null},Dt.mediaRecorder.start(10),pt.log("MediaRecorder started",Dt.mediaRecorder)})},this.stop=function(){var Tt=this;return pt.info("stop"),new Promise(function(kt,Dt){return Tt.mediaRecorder.onstop=function(Vt){pt.log("mediaRecorder onstop :"+Vt),this.onstart=null,this.onstop=null,this.onerror=null,this.onpause=null,this.onresume=null,this.ondataavailable=null;var Ot=new Blob(apiCC.recordMgr.recordedBlobs,{type:this.mimeType});kt(Ot)},MediaRecorder===void 0?(pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt))):Tt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to stop"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to stop",pt))):(pt.log("this.mediaRecorder.state :"+Tt.mediaRecorder.state),Tt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is already inactive"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already inactive",pt))):void Tt.mediaRecorder.stop())})},this.pause=function(){var Tt=this;return pt.info("pause"),new Promise(function(kt,Dt){return Tt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to pause"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to pause",pt))):(pt.log("this.mediaRecorder.state :"+Tt.mediaRecorder.state),Tt.mediaRecorder.state==="paused"?(pt.log("mediaRecorder is already paused"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already paused",pt))):Tt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(Tt.mediaRecorder.onerror=function(Vt){pt.log("onerror :"+Vt),Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Vt,pt)),this.onerror=null},Tt.mediaRecorder.onpause=function(Vt){pt.log("onpause :"+Vt),this.onerror=null,kt()},void Tt.mediaRecorder.pause()))})},this.resume=function(){var Tt=this;return pt.info("resume"),new Promise(function(kt,Dt){return Tt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to resume"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to resume",pt))):(pt.log("this.mediaRecorder.state :"+Tt.mediaRecorder.state),Tt.mediaRecorder.state==="recording"?(pt.log("mediaRecorder is already recording"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already recording",pt))):Tt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(Tt.mediaRecorder.onerror=function(Vt){pt.log("onerror :"+Vt),Dt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Vt,pt)),this.onerror=null},Tt.mediaRecorder.onresume=function(Vt){pt.log("onresume :"+Vt),this.onerror=null,kt()},void Tt.mediaRecorder.resume()))})}},apiCC.audioProcessor=new ft,apiCC.pendingPromises=[],apiCC.pendingPromisesId=0,nt.$6!=="electron"?s(2746):vt.debug("Electron detected, not loading onbeforeunload"),apiCC.addEventListener=function(Tt,kt,Dt){var Vt={},Ot=null;["sessionReady","incomingCall","callEstablished","remoteHangup","userMediaSuccess","userMediaError","userMediaStop","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCUAvailableReplay","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","localStreamRemoved","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onCallScoreUpdate","activeSpeaker","stopSpeaking","audioAmplitude","preCallTestStatus","onQosVideoChange","onCallStatsUpdate","cpuLimited","bandwidthLimited","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","callRestarting","selectedICECandidate","MCUParticipantEjected","MCURoomModeChanged","MCUStreamingStarted","MCUStreamingStopped","mediaDeviceChanged","externalJsLoadingStatus","slowLink","localStreamUpdated","remoteStreamUpdated","simulcastFeedChanged","videoQualityChanged","bandwidthResourceManagement","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","cloudEventOccurred"].indexOf(Tt)>-1?(Tt==="remoteHangup"&&vt.warn("DEPRECATED : ApiRTC : remoteHangup event is now deprecated, please use hangup event instead"),vt.log("Adding listener on type :"+Tt),typeof apiRTC_React<"u"?eventManager.addEventListener(Tt,kt):document.addEventListener?document.addEventListener(Tt,kt,!1):typeof $jqApz<"u"?(vt.log("using $jqApz"),$jqApz(document).on(Tt,kt)):typeof jQuery<"u"?(vt.log("using jQuery"),jQuery(document).on(Tt,kt)):vt.warn("Custom Events not supported on this browser : addEventListener()"),Vt={type:Tt,listener:kt,setBy:Dt},Ot=apiCC.myEventTable.push(Vt),vt.trace("number of myEventTable:"+Ot)):(xt.createErrorEvent("ERROR: Trying to add a listener on an unknow event","UNKNOWN_EVENT_ON_ADDLISTENER"),vt.log("ERROR: Trying to add a listener on an unknow event :"+Tt))},apiCC.removeEventListener=function(Tt,kt){vt.debug("Removing listener on type :"+Tt),document.removeEventListener?document.removeEventListener(Tt,kt,!1):typeof jQuery<"u"?jQuery(document).off(Tt,kt):vt.log("Custom Events not supported on this browser")},apiCC.setSessionStorage=function(Tt,kt,Dt){vt.debug("setSessionStorage"),Dt=Dt||36e5;var Vt=new Date,Ot=new Date;Ot.setTime(Vt.getTime()+Dt);try{var Lt=JSON.stringify({value:kt,expiresAt:Ot});sessionStorage.setItem(Tt,Lt)}catch{vt.error("Sotheming went wrong during json strigify to set session storage values")}},apiCC.isWebRTCCompliant=function(){vt.debug("isWebRTCCompliant");var Tt=!1,kt=!1;return["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(Dt){Tt||Dt in window&&(Tt=!0)}),Tt===!1?(vt.debug("isWebRTCCompliant::isWebRTCSupported false"),!1):(["getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia"].forEach(function(Dt){kt||Dt in navigator&&(kt=!0)}),kt===!1?(vt.debug("isWebRTCCompliant::isWebRTCGUMSupported false or you are connected with HTTP"),!1):nt.Xh==="MIUI Browser"?(vt.debug("isWebRTCCompliant::MIUI Browser detected false"),!1):nt.Xh==="UCBrowser"?(vt.debug("isWebRTCCompliant::UCBrowser detected false"),!1):nt.Xh==="QQ"||nt.Xh==="QQBrowser"||nt.Xh==="QQBrowserLite"?(vt.debug("isWebRTCCompliant::QQ or QQBrowser or QQBrowserLite detected false"),!1):nt.Xh==="Baidu"||nt.Xh==="baidu"?(vt.debug("isWebRTCCompliant::Baidu or baidu detected false"),!1):(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&this.webRTCPluginActivated!==!0?(vt.debug("isWebRTCCompliant FALSE : IE or Safari"),!1):(vt.debug("isWebRTCCompliant:: WebRTC is supported"),!0))},apiCC.isQoSStatCompliant=function(){var Tt=!1;return["chrome","firefox","safari"].indexOf(apiCC.browserDetails.type)<0?(vt.debug("QoS Statistics is only supported on Chrome, Firefox and Safari"),Tt):Tt=!0},apiCC.isScreenSharingCompliant=function(){var Tt=!1;return typeof apiRTC_React<"u"?Tt=!0:(nt.Xh==="IE"||nt.BF==="Android"||apiRTC.osName==="iOS"&&typeof cordova<"u"||(nt.Xh==="Chrome"||nt.Xh==="Firefox"&&nt.PR>=52||navigator.getDisplayMedia||navigator.mediaDevices.getDisplayMedia?Tt=!0:vt.debug("ScreenSharing is not supported")),Tt)},apiCC.getMediaDevices=function(){return vt.debug("getMediaDevices"),new Promise(function(Tt,kt){if(typeof apiRTC_React<"u")vt.log("enumerateDevices() is supported - React Native"),mediaDevices.enumerateDevices().then(function(Dt){vt.log("enumerateDevices(), sources :",Dt),apiCC.mediaDeviceMgr.mediaSourceInfos=Dt,Tt(Dt)}).catch(function(Dt){vt.log("enumerateDevices(), error :",Dt),kt(Dt)});else if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)vt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(function(Dt){vt.log("enumerateDevices(), sources :",Dt),apiCC.mediaDeviceMgr.mediaSourceInfos=Dt,Tt(Dt)}).catch(function(Dt){vt.log("enumerateDevices(), error :",Dt),kt(Dt)});else if(vt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")vt.warn("This browser does not support MediaStreamTrack"),kt(new Error("getMediaDevices() - MediaStreamTrack undefined"));else try{MediaStreamTrack.getSources(Tt)}catch(Dt){vt.debug("catch MediaStreamTrack.getSources :"+Dt),kt(new Error("getMediaDevices() - Error on MediaStreamTrack.getSources :"+Dt))}})},apiCC.getMediaDevicesWithCB=function(Tt){if(vt.debug("getMediaDevicesWithCB"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)vt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(Tt).catch(function(kt){vt.log("navigator.mediaDevices.enumerateDevices error: ",kt),kt=null});else if(vt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")Tt(null),vt.warn("This browser does not support MediaStreamTrack");else try{MediaStreamTrack.getSources(Tt)}catch(kt){vt.debug("catch MediaStreamTrack.getSources :"+kt),Tt(null)}},apiCC.getUserMedia=function(Tt){return vt.info("getUserMedia"),vt.debug("with constraints :",Tt),new Promise(function(kt,Dt){navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(vt.debug("webRTC getUserMedia with promises"),navigator.mediaDevices.getUserMedia(Tt).then(kt).catch(Dt)):typeof apiRTC_React<"u"?(vt.debug("webRTC getUserMedia with promises on React Native"),mediaDevices.getUserMedia(Tt).then(kt).catch(Dt)):(vt.debug("webRTC getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(Tt,kt,Dt))})},apiCC.getUserMediaWithCB=function(Tt,kt,Dt){vt.info("getUserMediaWithCB"),vt.debug("with constraints :"+JSON.stringify(Tt)),navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(vt.log("getUserMedia with promises"),navigator.mediaDevices.getUserMedia(Tt).then(kt).catch(Dt)):(vt.log("getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(Tt,kt,Dt))},apiCC.userMediaStreamTable=[],apiCC.getUserMediaStreamIds=function(){for(var Tt=[],kt=apiCC.userMediaStreamTable.length;--kt>=0;)Tt.push(apiCC.userMediaStreamTable[kt].userMediaStreamId);return Tt},apiCC.getUserMediaStream=function(Tt,kt){var Dt=null,Vt=apiCC.userMediaStreamTable.length;if(Tt==null){if(kt&&typeof kt.accept=="function"){for(;--Vt>=0;)if(kt.accept(apiCC.userMediaStreamTable[Vt])===!0){Dt=apiCC.userMediaStreamTable[Vt];break}}}else for(;--Vt>=0;)if(apiCC.userMediaStreamTable[Vt].userMediaStreamId===Tt){Dt=apiCC.userMediaStreamTable[Vt];break}return Dt},apiCC.getFirstUserMediaStream=function(){return apiCC.userMediaStreamTable.length>0?apiCC.userMediaStreamTable[0]:null},apiCC.createUserMediaStream=function(Tt){var kt=function(Ot){for(var Lt=apiCC.userMediaStreamTable.length;--Lt>=0;)if(apiCC.userMediaStreamTable[Lt].userMediaStreamId===Ot){apiCC.userMediaStreamTable.splice(Lt,1);break}},Dt=new apiCC.ApiCCUserMediaStream,Vt="call";return vt.debug("[createUserMediaStream] userMediaStreamId: "+Dt.userMediaStreamId),Tt==null&&(Tt={}),Tt.type&&(Dt.callType=Tt.type),Tt.stream?(Dt.stream=Tt.stream,Dt.streamStolen=!0,Dt.notifyUserMediaStop=!1,Dt.listenForMuteEvents()):Tt.gum_config&&(Dt.gum_config=(0,lt.S6)(Tt.gum_config)),Tt.audioSourceId&&(Dt.inputs.audioSourceId=Tt.audioSourceId),Tt.videoSourceId&&(Dt.inputs.videoSourceId=Tt.videoSourceId),Tt.facingMode&&(Dt.inputs.facingMode=Tt.facingMode),Tt.captureSourceType&&(Dt.captureSourceType=Tt.captureSourceType),Tt.notifyUserMediaSuccess&&(Dt.notifyUserMediaSuccess=Tt.notifyUserMediaSuccess),Tt.notifyUserMediaError&&(Dt.notifyUserMediaError=Tt.notifyUserMediaError),Tt.tryAudioOnlyAfterUserMediaError!==void 0&&(Dt.tryAudioOnlyAfterUserMediaError=Tt.tryAudioOnlyAfterUserMediaError),Tt.displayMediaStreamConstraints&&(Dt.displayMediaStreamConstraints=Tt.displayMediaStreamConstraints),Tt.forceExtensionOnChrome&&(Dt.forceExtensionOnChrome=Tt.forceExtensionOnChrome),Tt.filters&&(Dt.filters=Tt.filters),Tt.callId&&(Tt.callFlavor!=="call"&&Tt.callFlavor!=="userMedia"||(Vt=Tt.callFlavor),Dt.stream===null?Dt.addCallInfo(Tt.callId,Vt,!0):Dt.addCallInfo(Tt.callId,Vt,!1)),Tt.childStreamType&&(Dt.childStreamType=Tt.childStreamType),Dt.callbacks.release=typeof Tt.release=="function"?Tt.release:function(){},Dt.callbacks.success=typeof Tt.success=="function"?Tt.success:function(){},Dt.callbacks.failure=typeof Tt.failure=="function"?Tt.failure:function(){},apiCC.userMediaStreamTable.push(Dt),Dt.stream===null?Dt.callType==="screenSharing"||Dt.callType==="screenSharingWithAudio"?Dt.getScreenMedia():Dt.callType!=="data"?Dt.getUserMedia():Tt.sync===!0?(kt(Dt.userMediaStreamId),Dt.callbacks.failure(Dt,"wrong type")):setTimeout(function(){kt(Dt.userMediaStreamId),Dt.callbacks.failure(Dt,"wrong type")},0):(Dt.updateMediaProperties(Dt.stream),Tt.sync===!0?Dt.callbacks.success(Dt):setTimeout(function(){Dt.callbacks.success(Dt)},0)),Dt},apiCC.releaseUserMediaStream=function(Tt,kt,Dt){var Vt=!1,Ot=apiCC.userMediaStreamTable.length,Lt=null;if(kt!==null&&typeof kt!="string"&&(kt=null),Tt==null){if(Dt&&typeof Dt.accept=="function"){for(;--Ot>=0;)if(Dt.accept(apiCC.userMediaStreamTable[Ot])===!0){if(kt){if((Lt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())===null||Lt.callId!==kt){apiCC.userMediaStreamTable[Ot].removeCallInfo(kt);break}}else if((Lt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())!==null)break;vt.debug("[releaseUserMediaStream] match; userMediaStreamId: "+apiCC.userMediaStreamTable[Ot].userMediaStreamId),apiCC.userMediaStreamTable[Ot].release(),kt&&apiCC.userMediaStreamTable[Ot].removeCallInfo(kt),apiCC.userMediaStreamTable.splice(Ot,1),Vt=!0;break}}}else for(;--Ot>=0;)if(apiCC.userMediaStreamTable[Ot].userMediaStreamId===Tt){if(kt){if((Lt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())===null||Lt.callId!==kt){apiCC.userMediaStreamTable[Ot].removeCallInfo(kt);break}}else if((Lt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())!==null)break;vt.debug("[releaseUserMediaStream] id; userMediaStreamId: "+apiCC.userMediaStreamTable[Ot].userMediaStreamId),apiCC.userMediaStreamTable[Ot].release(),kt&&apiCC.userMediaStreamTable[Ot].removeCallInfo(kt),apiCC.userMediaStreamTable.splice(Ot,1),Vt=!0;break}return Vt},apiCC.activeSpeakerDetect=!1,apiCC.activeSpeakerThreshold=.4,apiCC.enableActiveSpeakerDetecting=function(Tt,kt){apiCC.activeSpeakerDetect=Tt,kt&&(apiCC.activeSpeakerThreshold=kt)},apiCC.apiRTCExtensionInstalled=!1,apiCC.extensionInstallationSuccessCallback=function(){vt.debug("extensionInstallationSuccessCallback"),apiCC.apiRTCExtensionInstalled=!0},apiCC.extensionInstallationFailureCallback=function(Tt,kt){vt.debug("extensionInstallationFailureCallback : Error :"+Tt+", "+kt),Tt=null,kt=null,xt.createDesktopCaptureEvent("Extension_installation_Error",apiRTC.waitingShareScreenCallId,apiRTC.waitingShareScreenDestNumber,apiRTC.waitingCaptureSourceType)},apiCC.manageNotInstalledExtension=function(Tt,kt,Dt){vt.debug("manageNotInstalledExtension"),vt.warn("apiRTC extension not installed"),xt.createDesktopCaptureEvent("Extension_not_installed",Tt,kt),vt.warn("Starting apiRTC extension installation"),apiRTC.waitingShareScreenDestNumber=kt,apiRTC.waitingShareScreenCallId=Tt,apiRTC.waitingCaptureSourceType=Dt,nt.PR>=71?(vt.debug("Chrome >= 71, opening Chrome web Store"),apiRTC.extensionInstallationFailureCallback("Chrome71 : chrome.webstore.install() no more supported","Chrome71-screenShare"),window.open("https://chrome.google.com/webstore/detail/apizee-desktop-capture/mjjnofoemoepfididplbfimokpnpcoeg")):chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",apiRTC.extensionInstallationSuccessCallback,apiRTC.extensionInstallationFailureCallback)},apiCC.activateScreenSharing=function(Tt){vt.debug("activateScreenSharing");var kt=null;Tt!==void 0?vt.log("extensionId is defined :"+Tt):(vt.log("using apirtc extension's Id"),Tt="mjjnofoemoepfididplbfimokpnpcoeg"),nt.Xh==="Chrome"?document.getElementById(Tt)!==null?(vt.log("extensionLink is present, screenSharing is already activated"),window.postMessage("apiRTC-extension","*")):(vt.log("screenSharing is not yet activated"),(kt=document.createElement("link")).href="https://chrome.google.com/webstore/detail/"+Tt,kt.rel="chrome-webstore-item",kt.id=Tt,document.getElementsByTagName("head")[0].appendChild(kt),window.addEventListener("message",function(Dt){var Vt=null;if(vt.log("message: event: "+JSON.stringify(Dt.data)),Dt.origin==window.location.origin){if(Dt.data!=="apiRTC-DeskstopCapture-loaded")return Dt.data==="extensionInstalledAndLoaded"?(apiCC.apiRTCExtensionInstalled=!0,apiCC.waitingShareScreenUserMediaStream!==null&&apiCC.waitingShareScreenUserMediaStream!==void 0&&(apiCC.userMediaStreamTable.push(apiCC.waitingShareScreenUserMediaStream[0]),delete apiCC.waitingShareScreenUserMediaStream),void(apiCC.waitingShareScreenUserMediaStreamId&&(Vt=apiCC.getUserMediaStream(apiCC.waitingShareScreenUserMediaStreamId),delete apiCC.waitingShareScreenUserMediaStreamId,Vt&&Vt.getScreenMedia()))):void(yt(Dt.data)==="object"&&Dt.data.desktopId!==void 0&&(Dt.data.remoteId!=="getScreenMedia"||(Vt=apiCC.getUserMediaStream(Dt.data.callNumber))===null||Vt.registerScreenMedia(Dt.data.captureSourceType,Dt.data.desktopId)));apiCC.apiRTCExtensionInstalled=!0}}),window.postMessage("apiRTC-extension","*")):(vt.log("activateScreenSharing is only available for chrome Browser"),xt.createDesktopCaptureEvent("Browser_Not_Compatible",null,null))},apiCC.checkIfAudioSourceIdExistOnDevice=function(Tt){vt.log("checkIfAudioSourceIdExistOnDevice :",Tt);var kt,Dt=!1,Vt=null;if(apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Vt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).kind!=="audio"&&Vt.kind!=="audioinput"||(Vt.deviceId===Tt?(vt.log("Audio device present :",Tt),Dt=!0):vt.log("not this deviceId"));return Dt},apiCC.setAudioSourceIdInConstraint=function(Tt,kt){return vt.log("setAudioSourceIdInConstraint:",kt),Tt==null?vt.log("audioSourceId not defined"):kt.audio===!1?vt.log("constraints.audio === false, no audio device present"):apiCC.checkIfAudioSourceIdExistOnDevice(Tt)===!1?(vt.log("audioSourceId not found on device"),kt.audio={}):(kt.audio!==!0&&kt.audio!==void 0||(kt.audio={}),vt.log("audioSourceId is defined :",Tt),nt.ag.name==="iOS"?nt.Xh==="Mobile Safari"||(kt.audio.deviceId=Tt):(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?kt.audio.deviceId=Tt:nt.Xh==="Chrome"&&nt.PR<48||nt.Xh==="Safari"&&nt.PR<11?kt.audio.optional=[{sourceId:Tt}]:kt.audio.deviceId=Tt?{ideal:Tt}:void 0),vt.debug("constraints =",kt),kt},apiCC.checkIfVideoSourceIdExistOnDevice=function(Tt){vt.log("checkIfVideoSourceIdExistOnDevice :",Tt);var kt,Dt=!1,Vt=null;if(vt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Vt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).kind!=="video"&&Vt.kind!=="videoinput"||(Vt.deviceId===Tt?(vt.log("Video device present :",Tt),Dt=!0):vt.log("not this deviceId"));return Dt},apiCC.getMediaDeviceLabelFromDeviceid=function(Tt){vt.log("getMediaDeviceLabelFromDeviceid :",Tt);var kt,Dt="Not_Found",Vt=null;if(vt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Vt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).deviceId===Tt?(vt.log("Video device present :",Tt),Dt=Vt.label):vt.log("not this deviceId");return Dt},apiCC.setVideoSourceIdInConstraint=function(Tt,kt){if(vt.log("setVideoSourceIdInConstraint : ",kt),Tt==null)vt.log("videoSourceId not defined");else if(kt.video===!1)vt.log("constraints.video === false, no video device present");else if(apiCC.checkIfVideoSourceIdExistOnDevice(Tt)===!1)vt.log("videoSourceId not found on device"),kt.video={};else if(vt.log("videoSourceId is defined :",Tt),kt.video!==!0&&kt.video!==void 0||(kt.video={}),nt.ag.name==="iOS")if(nt.Xh==="Mobile Safari"){if(Tt){var Dt=!1,Vt=nt.ag.version.split(".");Vt.length>0&&parseInt(Vt[0])<13&&(Dt=!0),kt.video.deviceId=Dt?{exact:Tt}:{ideal:Tt}}}else kt.video.deviceId=Tt;else(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=77?(vt.debug("FX > 77 using exact to set deviceId"),kt.video.deviceId={exact:Tt}):kt.video.deviceId=Tt:nt.Xh==="Chrome"&&nt.PR<48||nt.Xh==="Safari"&&nt.PR<11?kt.video.optional=[{sourceId:Tt}]:kt.video.deviceId=Tt?{ideal:Tt}:void 0;return vt.log("constraints =",kt),kt},apiCC.setVideoFacingModeInConstraint=function(Tt,kt){vt.log("setVideoFacingModeInConstraint");var Dt={};return kt.video===!1?(vt.log("facingMode value is not setted, constraints.video is false"),kt):Tt==null?(vt.log("facingMode value is not setted"),kt):Tt!=="user"&&Tt!=="environment"&&Tt!=="left"&&Tt!=="right"?(vt.log("facingMode value is not correct"),kt):(navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0&&(Dt=navigator.mediaDevices.getSupportedConstraints()),Dt.hasOwnProperty("facingMode")?(vt.log("Setting FacingMode in constraint"),kt.video===!0&&(kt.video={}),kt.video.facingMode={ideal:Tt}):vt.log("FacingMode not supported by device"),vt.debug("constraints =",kt),kt)},apiCC.setResolutionInConstraint=function(Tt,kt,Dt){return vt.log("setResolutionInConstraint"),Tt<=0||kt<=0?(vt.log("Resolution value must be positif non null"),Dt):(Dt.video===!0||Dt.video!==void 0?nt.ag.name==="iOS"?nt.Xh==="Mobile Safari"?(Dt.video.width=Tt?{exact:Tt}:void 0,Dt.video.height=kt?{exact:kt}:void 0):(Dt.video.width=Tt,Dt.video.height=kt):(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?(Dt.video.width=Tt,Dt.video.height=kt):nt.Xh==="Safari"&&nt.PR>=11||nt.Xh==="Mobile Safari"||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||nt.Xh==="Chrome"&&nt.PR>=49||nt.Xh==="Firefox"&&nt.PR>=50||nt.Xh==="Mobile Chrome"||nt.Xh==="Mobile Firefox"?(Dt.video.width=Tt?{exact:Tt}:void 0,Dt.video.height=kt?{exact:kt}:void 0):Dt.video.mandatory=[{width:Tt,height:kt}]:vt.error("setResolutionInConstraint : contraint.video must be true or defined"),vt.debug("constraints =",Dt),Dt)},apiCC.checkConstraintDependingOnDevice=function(Tt){vt.debug("checkConstraintDependingOnDevice :",Tt),nt.Xh==="Mobile Safari"&&nt.PR>=13&&Tt.video!==void 0&&Tt.video.height!==void 0&&Tt.video.width!==void 0&&Tt.video.height.ideal===1080&&Tt.video.width.ideal===1920&&(vt.debug("Downgrading selected height and width resolution on iOS, to avoid stream issue"),Tt.video.height.ideal=720,Tt.video.width.ideal=1280)},apiCC.attachMediaStream=function(Tt,kt){vt.debug("attachMediaStream"),Tt!==null?(Tt.srcObject!==void 0?Tt.srcObject=kt:Tt.mozSrcObject!==void 0?Tt.mozSrcObject=kt:Tt.src!==void 0?nt.Xh==="Chrome"&&nt.PR<46?(vt.log("Attaching media stream for Chrome < 46"),Tt.src=webkitURL.createObjectURL(kt)):Tt.src=URL.createObjectURL(kt):vt.error("Error attaching stream to element."),nt.ag.name==="iOS"&&(vt.log("iOS detected"),Tt.setAttribute("playsinline",!0))):vt.log("videoElt is null")},apiCC.addStreamInDiv=function(Tt,kt,Dt,Vt,Ot,Lt,Gt){vt.debug("addStreamInDiv");var tn,zt=null,cn=null,un=!1,fn=null;(0,lt.Ym)(Gt,"object")&&Gt.type!=null&&(kt=Gt.type),(0,lt.Ym)(Gt,"object")&&Gt.forceAudioAndVideoMediaElementSeparation!==void 0&&(vt.debug("forceAudioAndVideoMediaElementSeparation is set"),un=!0),kt==="audio"?zt=document.createElement("audio"):(nt.BF==="iOS"&&nt.Xh==="Mobile Safari"&&(vt.debug("iOS && Mobile Safari"),un=!0),zt=document.createElement("video")),zt.id=Vt,zt.autoplay=!0,un===!0&&Lt===!1?(vt.debug("before adding separated MediaEltAudio"),(fn=document.createElement("audio")).id=Vt+"_sepAudio",fn.muted=Lt,fn.autoplay=!0,zt.muted=!0):zt.muted=Lt,zt.style.width=Ot.width,zt.style.height=Ot.height,Ot.controls===!0&&(zt.controls=!0),tn=function(vn){var Ft=null,pn=vn.play();Ft=function(){var gn=vn.play();vt.log("funcFixIoS"),gn!==void 0&&gn.then(function(){vt.log("Autoplay started"),document.removeEventListener("touchstart",Ft)}).catch(function(Tn){vt.error("Autoplay was prevented")})},pn!==void 0&&pn.then(function(){vt.log("Autoplay started")}).catch(function(gn){nt.ag.name==="iOS"?(vt.warn("iOS : Autoplay was prevented, activating touch event to start media play"),apiCC.myWebRTC_Event.createErrorEvent("ERROR: iOS : Autoplay was prevented","IOS_AUTOPLAY_PREVENTED"),document.addEventListener("touchstart",Ft)):vt.warn("Autoplay was prevented")})},nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||nt.PR!=="61"||nt.BF!=="Android"||(zt.style.borderRadius="1px",vt.log("Patch for video display on Chrome 61 Android")),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==null?(vt.log("audioOutputId set to: "+apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId),zt.setSinkId(apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId).then(function(){vt.log("Success, audio output device attached")})):vt.log("No audioOutputId set"),nt.BF!=="iOS"&&(cn=document.getElementById(Dt)).appendChild(zt),Tt!==void 0&&(apiCC.attachMediaStream(zt,Tt),un===!0&&Lt===!1&&apiCC.attachMediaStream(fn,Tt)),nt.BF==="iOS"&&(cn=document.getElementById(Dt)).appendChild(zt),un===!0&&Lt===!1&&cn!==null&&cn.appendChild(fn),tn(zt),un===!0&&Lt===!1&&tn(fn)},apiCC.removeElementFromDiv=function(Tt,kt){vt.debug("removeElementFromDiv");var Dt,Vt,Ot=null;Dt=document.getElementById(kt),Ot=document.getElementById(Tt),Dt!==null&&(vt.log("Removing video element with Id : "+kt),Ot!==null&&Ot.removeChild(Dt)),(Vt=document.getElementById(kt+"_sepAudio"))!==null&&(vt.log("iOS : Removing audio element with Id : "+kt+"_sepAudio"),Ot!==null&&Ot.removeChild(Vt))},apiCC.randomString=function(Tt,kt){for(var Dt=typeof kt=="string"&&kt.length>0?kt:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Vt="";--Tt>=0;)Vt+=Dt.charAt(Math.floor(Math.random()*Dt.length));return Vt},apiCC.generateCallId=function(){var Tt;return Tt=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),vt.debug("new callId :"+Tt),Tt},apiCC.generateInstanceId=function(){var Tt;return Tt=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),vt.debug("new instanceId :"+Tt),Tt},apiCC.myApiCCWhiteBoardClient=null,apiCC.createWhiteBoard=function(Tt,kt,Dt,Vt){return vt.debug("createWhiteBoard"),apiCC.myApiCCWhiteBoardClient=new apiCC.ApiCCWhiteBoardClient(apiCC.session,Tt,kt,Dt,Vt),apiCC.myApiCCWhiteBoardClient},apiCC.closeWhiteBoardClient=function(Tt){vt.info("closeWhiteBoardClient"),xt.createClosingWhiteBoardEvent(apiCC.myApiCCWhiteBoardClient.roomId,Tt),apiCC.myApiCCWhiteBoardClient.isInRoom()&&apiCC.myApiCCWhiteBoardClient.leaveRoom(),apiCC.myApiCCWhiteBoardClient.stop()},apiCC.registerIOsDevice=function(Tt){vt.debug("call registerIOsDevice 1");var kt={type:"registerIOsDevice",senderId:apiCC.session.apiCCId,token:Tt},Dt=JSON.stringify(kt);vt.debug("call registerIOsDevice "+Dt),apiCC.session.channel.socket.emit("registerIOsDevice",Dt),vt.debug("call registerIOsDevice  done")},apiCC.registerAndroidDevice=function(Tt){vt.debug("registerAndroidDevice");var kt={type:"registerAndroidDevice",senderId:apiCC.session.apiCCId,token:Tt},Dt=JSON.stringify(kt);apiCC.session.channel.socket.emit("registerAndroidDevice",Dt)},apiCC.unRegisterIOsDevice=function(Tt){vt.debug("unRegisterIOsDevice");var kt={type:"unRegisterIOsDevice",senderId:apiCC.session.apiCCId,token:Tt},Dt=JSON.stringify(kt);apiCC.session.channel.socket.emit("unRegisterIOsDevice",Dt)},apiCC.unRegisterAndroidDevice=function(Tt){vt.debug("unRegisterAndroidDevice");var kt={type:"unRegisterAndroidDevice",senderId:apiCC.session.apiCCId,token:Tt},Dt=JSON.stringify(kt);apiCC.session.channel.socket.emit("unRegisterAndroidDevice",Dt)},apiCC.storeSessionInfoInSessionStorage=function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(vt.info("storeSessionInfoInSessionStorage",Tt),apiCC.session){var kt=5e3;(0,lt.ki)(apiCC.session,"apiCCIdPersistenceTimeout","number")&&apiCC.session.apiCCIdPersistenceTimeout>=0&&(kt=apiCC.session.apiCCIdPersistenceTimeout),(0,lt.Ym)(Tt.apiCCIdPersistenceTimeout,"number")&&Tt.apiCCIdPersistenceTimeout>=0&&(kt=Tt.apiCCIdPersistenceTimeout),apiCC.setSessionStorage("apiCCId",apiCC.session.apiCCId,kt),apiCC.setSessionStorage("apiKey",apiCC.session.apiKey,kt),apiCC.session.sessionId!==null&&apiCC.setSessionStorage("sessionId",apiCC.session.sessionId,kt)}},apiCC.disconnect=function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt.info("disconnect",Tt),apiCC!==null&&apiCC.cleanAllEventListener(Tt),apiCC.session!==null&&apiCC.session!==void 0&&(typeof apiRTC_React>"u"&&Tt.invalidateApiCCId!==!0&&apiCC.storeSessionInfoInSessionStorage(Tt),apiCC.myApiCCWhiteBoardClient!==null&&(vt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null&&apiCC.closeWhiteBoardClient("USER_DISCONNECTION")),vt.log("Disconnecting from Server"),apiCC.session.channel.socket!==void 0&&apiCC.session.channel.socket!==null&&apiCC.session.channel.socket.disconnect(),apiCC.session.channel.channelHasBeenDisconnected=!1,apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length)),apiCC&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiCC.reconnect=function(){vt.log("Reconnect"),vt.log("apiCC.session.channel.socket:",apiCC.session.channel.socket),apiCC.session.channel.socket.socket.connect()},apiCC.cleanApiRTCContext=function(){apiCC.session!==null&&apiCC.session!==void 0&&(apiCC.session.apiCCWebRTCClient!==null&&apiCC.session.apiCCWebRTCClient!==void 0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length!==0&&vt.warn("Call is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length>0&&vt.log("MCU session is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.hangUp(),apiCC.session.apiCCWebRTCClient.webRTCClient.localStream!==null&&(apiCC.session.apiCCWebRTCClient.webRTCClient.stopStream(apiCC.session.apiCCWebRTCClient.webRTCClient.localStream),xt.createUserMediaStopEvent(null,"media")),apiCC.session.apiCCWebRTCClient=null),apiCC.session.apiCCIMClient!==null&&apiCC.session.apiCCIMClient!==void 0&&(apiCC.session.apiCCIMClient=null),apiCC.session.apiCCDataClient!==null&&apiCC.session.apiCCDataClient!==void 0&&(apiCC.session.apiCCDataClient=null),apiCC.myApiCCWhiteBoardClient!==null&&apiCC.myApiCCWhiteBoardClient!==void 0&&(apiCC.myApiCCWhiteBoardClient=null))},apiCC.cleanAllEventListener=function(){var Tt,kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=0;if(apiCC!==null&&apiCC.myEventTable!==null&&(Dt=apiCC.myEventTable.length),Dt!==0){for(vt.trace("number of myEventTable:"+Dt),Tt=0;Tt<Dt;Tt+=1)kt.unregister===!0&&apiCC.myEventTable[Tt].setBy==="UserAgent"?vt.debug("Keeping event for UserAgent process"):apiCC.removeEventListener(apiCC.myEventTable[Tt].type,apiCC.myEventTable[Tt].listener);apiCC.myEventTable.splice(0,Dt),Dt=apiCC.myEventTable.length,vt.trace("number of myEventTable after splice:"+Dt)}},apiCC.testUserPing=function(Tt){vt.debug("testUserPing()");var kt,Dt,Vt,Ot,Lt=apiCC.bandwidthTestServer+"/upload-test",Gt=new XMLHttpRequest,tn=new FormData,zt=Math.round(5*Math.random()),cn=!1;"withCredentials"in Gt?Gt.open("POST",Lt,!0):typeof XDomainRequest<"u"?(Gt=new XDomainRequest).open("POST",Lt):Gt=null,kt=new Blob([zt],{type:"text/xml"}),tn.append("file",kt),Gt?(Gt.onload=function(){Gt.status===200&&(Ot=Date.now()-Dt,cn||(clearTimeout(Vt),Tt(null,Ot)))},Gt.onerror=function(un){vt.log("testUserUpload onerror status :",un.target.status),Tt({err:"An error occured during XMLHttpRequest",msg:un.target.status},null)},Vt=setTimeout(function(){cn=!0,Tt("Ping timeout",-1)},5e3),Gt.send(tn),Dt=Date.now()):Tt({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserDownload=function(Tt,kt){vt.debug("testUserDownload()");var Dt,Vt,Ot,Lt,Gt,tn,zt=apiCC.bandwidthTestServer+"/files/noise_"+Tt+"ko.jpg",cn=0,un=new Image,fn=0;zt+="?nnn="+Date.now();var vn=[[256,257529],[500,525944],[768,787234],[1e3,1055741],[1500,1541044],[2e3,1992034],[2500,2596028],[3e3,2904977],[3500,3648299],[4e3,4151187],[4500,4741712],[5e3,5264577],[5500,5776081],[6e3,6318553],[6500,6779868],[7e3,7334256],[7500,7874040],[8e3,8081460],[8500,8651795],[9e3,9081899],[9500,9503574],[1e4,10082008],[10500,10543425],[11e3,11200424],[11500,11200424],[12e3,12110671],[12500,12715962],[13e3,13222120],[13500,13605073],[14e3,13954769],[14500,14777594],[15e3,15178928],[15500,15602106],[16e3,16054618],[16500,16578623],[17e3,17048069],[17500,17456403],[18e3,17910332],[18500,18725846],[19e3,19284746],[19500,19771902],[2e4,20121527],[21e3,20975042],[22e3,22189200],[23e3,23027928],[24e3,24027870],[25e3,24878845],[26e3,26237503],[27e3,27112004],[28e3,27953446],[29e3,29313013],[3e4,30474095]];for(Gt=0;Gt<vn.length;Gt++)Tt===vn[Gt][0]&&(cn=vn[Gt][1]);apiCC.testUserPing(function(Ft,pn){un.onload=function(){for((Vt=Date.now()-Dt)-pn>10&&(Vt-=pn),Ot=cn/(Vt/1e3),Lt=Math.round(Ot/1e3),tn={type:"download",kBPerSec:Lt},Gt=0;Gt<apiCC.bandwidthRatingThresholds.length;Gt++)8*tn.kBPerSec>=apiCC.bandwidthRatingThresholds[Gt]&&fn++;tn.rating=fn+"/"+apiCC.bandwidthRatingThresholds.length,kt(null,tn)},un.onerror=function(gn,Tn){kt({label:"Error when downloading",err:gn,msg:Tn},null)},Dt=new Date().getTime(),un.src=zt})},apiCC.testUserUpload=function(Tt,kt){vt.debug("testUserUpload()");var Dt,Vt,Ot,Lt,Gt,tn,zt,cn=apiCC.bandwidthTestServer+"/upload-test",un=new XMLHttpRequest,fn=new FormData,vn="",Ft=0;for(("withCredentials"in un)?un.open("POST",cn,!0):typeof XDomainRequest<"u"?(un=new XDomainRequest).open("POST",cn):un=null,Vt=0;Vt<Tt;Vt++)vn+=Math.round(5*Math.random());Dt=new Blob([vn],{type:"text/xml"}),fn.append("file",Dt),un?(un.onload=function(){if(un.status===200){for(Gt=Date.now()-Lt,tn=Tt/(Gt/1e3),zt=Math.round(tn/1e3),Ot={type:"upload",kBPerSec:zt},Vt=0;Vt<apiCC.bandwidthRatingThresholds.length;Vt++)8*Ot.kBPerSec>=apiCC.bandwidthRatingThresholds[Vt]&&Ft++;Ot.rating=Ft+"/"+apiCC.bandwidthRatingThresholds.length,kt(null,Ot)}else kt({err:"An error occured during XMLHttpRequest",msg:un.status},null)},un.onerror=function(pn){vt.log("testUserUpload onerror status :",pn.target.status),kt({err:"An error occured during XMLHttpRequest",msg:pn.target.status},null)},un.send(fn),Lt=Date.now()):kt({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserUploadLoop=function(Tt,kt,Dt){var Vt={type:"upload",kBPerSec:kt.kbps/8,kbps:kt.kbps,rating:kt.rating},Ot=0;kt.kbps>1e3?apiCC.testUserUpload(Tt,function(Lt,Gt){Lt!==null?Dt({err:"An error occured during XMLHttpRequest"},null):(Vt.kBPerSec=Gt.kBPerSec,Vt.kbps=8*Gt.kBPerSec,Vt.rating=Gt.rating,Ot=Vt.kbps-kt.kbps,vt.debug("upload "+Tt+" "+JSON.stringify(Vt)+"; diff "+Ot),Ot>=2e4&&Tt<12e6?apiCC.testUserUploadLoop(Tt+8e6,Vt,Dt):Ot>=1e4&&Tt<14e6?apiCC.testUserUploadLoop(Tt+6e6,Vt,Dt):Ot>=5e3&&Tt<16e6?apiCC.testUserUploadLoop(Tt+4e6,Vt,Dt):Ot>=1e3&&Tt<18e6?apiCC.testUserUploadLoop(Tt+2e6,Vt,Dt):Ot>=200&&Tt<19e6?apiCC.testUserUploadLoop(Tt+1e6,Vt,Dt):Dt(null,Vt))}):Dt(null,Vt)},apiCC.testUserDownloadLoop=function(Tt,kt,Dt){var Vt={type:"download",kBPerSec:kt.kbps/8,kbps:kt.kbps,rating:kt.rating},Ot=0;kt.kbps>=3500?apiCC.testUserDownload(Tt,function(Lt,Gt){Lt!==null?Dt({err:"Error when downloading"},null):(Vt.kBPerSec=Gt.kBPerSec,Vt.kbps=8*Gt.kBPerSec,Vt.rating=Gt.rating,Ot=Vt.kbps-kt.kbps,vt.debug("download "+Tt+" "+JSON.stringify(Vt)+"; diff "+Ot),Ot>=2e4?apiCC.testUserDownloadLoop(3e4,Vt,Dt):Ot>=1e4&&Tt<=2e4?apiCC.testUserDownloadLoop(Tt+1e4,Vt,Dt):Ot>=5e3&&Tt<=25e3?apiCC.testUserDownloadLoop(Tt+5e3,Vt,Dt):Ot>=1e3&&Tt<=27e3?apiCC.testUserDownloadLoop(Tt+3e3,Vt,Dt):Ot>=200&&Tt<=29e3?apiCC.testUserDownloadLoop(Tt+1e3,Vt,Dt):Dt(null,Vt))}):Dt(null,Vt)},apiCC.listenedAudioSources={};var Ut=window.AudioContext||window.webkitAudioContext||!1;apiCC.audioContext=null,apiCC.getAudioContext=function(){return apiRTC.osName==="iOS"&&typeof cordova<"u"?vt.debug("No audioContext for iOS cordova"):Ut&&apiCC.audioContext===null&&(apiCC.audioContext=new Ut),apiCC.audioContext},apiCC.listenToAudioSources=function(Tt){vt.debug("listenToAudioSources()");var kt,Dt=apiCC.getAudioContext();Dt!=null?(Object.keys(apiCC.listenedAudioSources).length>0&&apiCC.stopAudioSourceListening(),apiCC.getMediaDevices().then(function(Vt){for(vt.log(Vt),kt=0;kt<Vt.length;kt++)Vt[kt].kind==="audioinput"&&(apiCC.listenedAudioSources[Vt[kt].deviceId]={deviceId:Vt[kt].deviceId,callback:Tt,label:Vt[kt].label},navigator.getUserMedia({audio:{optional:[{sourceId:Vt[kt].deviceId}]},video:!1},(function(Ot){vt.log("new stream processing function for : "+this.device.deviceId),this.device.audioListener=this;var Lt=this,Gt=Dt.createScriptProcessor(2048,1,1),tn=Dt.createMediaStreamSource(Ot);Gt.connect(Dt.destination),Gt.onaudioprocess=function(){var zt,cn,un,fn=new Uint8Array(this.analyser.frequencyBinCount),vn=0;for(this.analyser.getByteFrequencyData(fn),cn=0;cn<fn.length;cn++)vn+=fn[cn];zt=vn/fn.length,un={deviceId:Lt.device.deviceId,label:Lt.device.label,amplitude:zt,active:Ot.active},Lt.device.callback(un)},Gt.analyser=Dt.createAnalyser(),Gt.analyser.smoothingTimeConstant=.3,Gt.analyser.fftSize=1024,tn.connect(Gt.analyser),Gt.analyser.connect(Gt),this.destroy=function(){vt.log("destroy()");var zt,cn=Ot.getTracks();for(zt=0;zt<cn.length;zt+=1)cn[zt].stop();tn.disconnect(),Gt.analyser.disconnect(),Gt.disconnect()}}).bind({device:apiCC.listenedAudioSources[Vt[kt].deviceId]}),function(Ot){vt.error("Error getting microphone",Ot)}))},function(Vt){vt.debug("listenToAudioSources() - getMediaDevices error :",Vt)})):vt.debug("listenToAudioSources() - Unable to create audio context")},apiCC.stopAudioSourceListening=function(){var Tt;for(vt.debug("stopAudioSourceListening()"),Tt=0;Tt<Object.keys(apiCC.listenedAudioSources).length;Tt++)apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Tt]]!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Tt]].audioListener!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Tt]].audioListener.destroy():vt.warn("error on stopAudioSourceListening, audioListener"):vt.warn("error on stopAudioSourceListening, listenedAudioSources element");apiCC.listenedAudioSources={}},apiCC.webRTCPluginInstalled=!1,apiCC.iePluginInstallationPreventUnload=!1,apiCC.setlogStorageActivated=function(Tt,kt){vt.debug("setlogStorageActivated :",Tt),this.logStorageActivated=(Tt===!0||Tt===!1)&&Tt,kt!==void 0&&(this.logStorageLevel=kt)},apiCC.sendLogToCloud=function(Tt,kt,Dt,Vt){vt.info("sendLogToCloud");var Ot,Lt,Gt=[],tn=null,zt=[],cn=null,un=null;for(Gt.push(JSON.stringify({title:"ApiRTC logs",description:"Logs of apiRTC client"})),Gt.push(JSON.stringify({ts:Date.now(),name:"system-info",args:{browserName:apiCC.browser,browserVersion:apiCC.browser_version,platform:apiCC.osName}})),Ot=0;Ot<Tt.length;Ot++)tn=Tt[Ot][0]==="error"?{name:"test-run",args:{error:Tt[Ot][1]}}:{name:"test-run",args:{info:Tt[Ot][1]}},Gt.push(JSON.stringify(tn));zt=Gt.concat(apiCC.logStorage),cn=new FormData,Lt="["+zt.join(`,
`)+"]",vt.debug("fileContent :",Lt),Vt!==!0&&(cn.append("data",Lt),cn.append("apiKey",apiCC.initApiKey),kt!==void 0&&cn.append("id",kt),(un=new XMLHttpRequest).open("POST",Dt+"/test/api/",!0),un.onreadystatechange=function(){un.readyState===4&&un.status===200&&console.info("[apiRTC_Logs] POST'd successfully"),console.trace(un.responseText)},un.send(cn))},apiCC.manageWebRTCPlugin=function(Tt,kt){vt.debug("manageWebRTCPlugin");var Dt;Dt=window.location.protocol!=="https:"?"http":"https",_e([Dt+"://cdn.temasys.io/adapterjs/0.15.x/adapter.debug.js"],"temAdapter",{async:!0,numRetries:apiCC.extJsLoadingRetryNb||100,reqdelay:apiCC.extJsLoadingRetryDelay||200,success:function(){vt.log("End of .js loading for plugin"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","loaded"),AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,function(){apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,AdapterJS.webRTCReady(function(Vt){return vt.log("webRTCReady, plugin already installed"),Tt()})},function(){return apiCC.iePluginInstallationPreventUnload=!0,kt(),AdapterJS.webRTCReady(function(Vt){return vt.log("webRTCReady after plugin install"),apiCC.iePluginInstallationPreventUnload=!1,apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,Tt()}),apiCC.session.apiCCWebRTCClient.myWebRTC_Event.createEvent({eventType:"webRTCPluginInstallation"}),null})},error:function(Vt){vt.error("temAdapter loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","error")},retrycb:function(Vt,Ot){vt.warn("temAdapter loading retry :"+Vt+" ,delay before retry :"+Ot),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","retry")}})},apiCC.checkMutingStateForUserMedia=function(Tt,kt){vt.debug("checkMutingStateForUserMedia"),(0,lt.ki)(Tt,"muted","string")&&(vt.log("callConfiguration muted is set :",Tt.muted),Tt.muted==="VIDEO"&&(kt.muteVideoOnStreams("enabled"),kt.muteAudioOnStreams("enabled")),Tt.muted==="AUDIOONLY"&&kt.muteAudioOnStreams("enabled"),Tt.muted==="VIDEOONLY"&&kt.muteVideoOnStreams("enabled"))},apiCC.isSIPNumber=function(Tt){var kt,Dt=null,Vt=!1;return kt=Tt.toString().startsWith("sip:"),Tt.toString().length<=20&&(Dt=!0),(Tt.toString().indexOf("0")!==0&&Tt.toString().indexOf("+")!==0||Dt!==!0)&&kt!==!0||(Vt=!0),Vt},apiCC.loadSentry=function(Tt,kt){vt.debug("Remote logging activation"),_e([kt+"://browser.sentry-cdn.com/5.24.2/bundle.tracing.min.js"],"Sentry",{async:!0,numRetries:10,reqdelay:500,success:function(){Sentry.init({dsn:"https://c24c226714f841dbbc3d1518b6cc7fe8@o333237.ingest.sentry.io/5448622",release:apiCC.version,tracesSampleRate:1}),Sentry.configureScope(function(Dt){Dt.setTag("apiKey",Tt)})},error:function(Dt){console.error("Remote logging - loading error")},retrycb:function(Dt,Vt){console.warn("Remote logging - loading retry :"+Dt+" ,delay before retry :"+Vt)}})},apiCC.sendSentryEvent=function(Tt){if(vt.debug("sendSentryEvent",Tt),typeof Sentry<"u"){var kt="",Dt={};Tt.eventType==="muteUnmuteEvent"?(kt="Mute event on callId:"+Tt.callId,Dt.muteType=Tt.muteType,Dt.source=Tt.source,Dt.mLine=Tt.mLine,Dt.state=Tt.state,Dt.callId=Tt.callId,Dt.username=Tt.username):vt.error("sendSentryEvent error : type ",Tt.eventType," is not supported");var Vt=Object.keys(Dt);kt!==""&&Vt.length>0&&Sentry.withScope(function(Ot){Vt.forEach(function(Lt){Ot.setTag(Lt,Dt[Lt])}),Sentry.captureMessage(kt)})}else vt.debug("Sentry not activated")},apiCC.addPendingPromise=function(Tt,kt,Dt){var Vt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;vt.debug("addPendingPromise"),apiCC.pendingPromisesId++;var Ot=function(Gt){apiCC.cleanPendingPromiseTable(Gt),Dt("Timeout problem during ".concat(Tt," process on a remote stream"))},Lt=setTimeout(function(){Ot(apiCC.pendingPromisesId)},Vt);return apiCC.pendingPromises.push({timeout:Lt,resolve:kt,reject:Dt,pendingPromisesId:apiCC.pendingPromisesId}),Lt},apiCC.resolvePendingPromise=function(Tt,kt){vt.debug("resolvePendingPromise"),apiCC.pendingPromises.forEach(function(Dt){Tt===Dt.timeout&&(clearTimeout(Tt),Dt.resolve(kt),apiCC.cleanPendingPromiseTable(Dt.pendingPromisesId))})},apiCC.rejectPendingPromise=function(Tt,kt){vt.debug("rejectPendingPromise"),apiCC.pendingPromises.forEach(function(Dt){Tt===Dt.timeout&&(clearTimeout(Tt),Dt.reject(kt),apiCC.cleanPendingPromiseTable(Dt.pendingPromisesId))})},apiCC.cleanPendingPromiseTable=function(Tt){apiCC.pendingPromises.forEach(function(kt,Dt){Tt===kt.pendingPromisesId&&apiCC.pendingPromises.splice(Dt,1)})}},5945:(rt,at,s)=>{function et(Lt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Gt){return typeof Gt}:function(Gt){return Gt&&typeof Symbol=="function"&&Gt.constructor===Symbol&&Gt!==Symbol.prototype?"symbol":typeof Gt},et(Lt)}function nt(){nt=function(){return Lt};var Lt={},Gt=Object.prototype,tn=Gt.hasOwnProperty,zt=typeof Symbol=="function"?Symbol:{},cn=zt.iterator||"@@iterator",un=zt.asyncIterator||"@@asyncIterator",fn=zt.toStringTag||"@@toStringTag";function vn(jn,Bn,an){return Object.defineProperty(jn,Bn,{value:an,enumerable:!0,configurable:!0,writable:!0}),jn[Bn]}try{vn({},"")}catch{vn=function(Bn,an,zn){return Bn[an]=zn}}function Ft(jn,Bn,an,zn){var Kn=Bn&&Bn.prototype instanceof Tn?Bn:Tn,An=Object.create(Kn.prototype),_n=new rr(zn||[]);return An._invoke=function(On,Pn,Vn){var ir="suspendedStart";return function(Mn,$n){if(ir==="executing")throw new Error("Generator is already running");if(ir==="completed"){if(Mn==="throw")throw $n;return{value:void 0,done:!0}}for(Vn.method=Mn,Vn.arg=$n;;){var Kt=Vn.delegate;if(Kt){var At=Xn(Kt,Vn);if(At){if(At===gn)continue;return At}}if(Vn.method==="next")Vn.sent=Vn._sent=Vn.arg;else if(Vn.method==="throw"){if(ir==="suspendedStart")throw ir="completed",Vn.arg;Vn.dispatchException(Vn.arg)}else Vn.method==="return"&&Vn.abrupt("return",Vn.arg);ir="executing";var it=pn(On,Pn,Vn);if(it.type==="normal"){if(ir=Vn.done?"completed":"suspendedYield",it.arg===gn)continue;return{value:it.arg,done:Vn.done}}it.type==="throw"&&(ir="completed",Vn.method="throw",Vn.arg=it.arg)}}}(jn,an,_n),An}function pn(jn,Bn,an){try{return{type:"normal",arg:jn.call(Bn,an)}}catch(zn){return{type:"throw",arg:zn}}}Lt.wrap=Ft;var gn={};function Tn(){}function In(){}function kn(){}var Nn={};vn(Nn,cn,function(){return this});var hn=Object.getPrototypeOf,Sn=hn&&hn(hn(tr([])));Sn&&Sn!==Gt&&tn.call(Sn,cn)&&(Nn=Sn);var Rn=kn.prototype=Tn.prototype=Object.create(Nn);function wn(jn){["next","throw","return"].forEach(function(Bn){vn(jn,Bn,function(an){return this._invoke(Bn,an)})})}function xn(jn,Bn){function an(Kn,An,_n,On){var Pn=pn(jn[Kn],jn,An);if(Pn.type!=="throw"){var Vn=Pn.arg,ir=Vn.value;return ir&&et(ir)=="object"&&tn.call(ir,"__await")?Bn.resolve(ir.__await).then(function(Mn){an("next",Mn,_n,On)},function(Mn){an("throw",Mn,_n,On)}):Bn.resolve(ir).then(function(Mn){Vn.value=Mn,_n(Vn)},function(Mn){return an("throw",Mn,_n,On)})}On(Pn.arg)}var zn;this._invoke=function(Kn,An){function _n(){return new Bn(function(On,Pn){an(Kn,An,On,Pn)})}return zn=zn?zn.then(_n,_n):_n()}}function Xn(jn,Bn){var an=jn.iterator[Bn.method];if(an===void 0){if(Bn.delegate=null,Bn.method==="throw"){if(jn.iterator.return&&(Bn.method="return",Bn.arg=void 0,Xn(jn,Bn),Bn.method==="throw"))return gn;Bn.method="throw",Bn.arg=new TypeError("The iterator does not provide a 'throw' method")}return gn}var zn=pn(an,jn.iterator,Bn.arg);if(zn.type==="throw")return Bn.method="throw",Bn.arg=zn.arg,Bn.delegate=null,gn;var Kn=zn.arg;return Kn?Kn.done?(Bn[jn.resultName]=Kn.value,Bn.next=jn.nextLoc,Bn.method!=="return"&&(Bn.method="next",Bn.arg=void 0),Bn.delegate=null,gn):Kn:(Bn.method="throw",Bn.arg=new TypeError("iterator result is not an object"),Bn.delegate=null,gn)}function Ln(jn){var Bn={tryLoc:jn[0]};1 in jn&&(Bn.catchLoc=jn[1]),2 in jn&&(Bn.finallyLoc=jn[2],Bn.afterLoc=jn[3]),this.tryEntries.push(Bn)}function Un(jn){var Bn=jn.completion||{};Bn.type="normal",delete Bn.arg,jn.completion=Bn}function rr(jn){this.tryEntries=[{tryLoc:"root"}],jn.forEach(Ln,this),this.reset(!0)}function tr(jn){if(jn){var Bn=jn[cn];if(Bn)return Bn.call(jn);if(typeof jn.next=="function")return jn;if(!isNaN(jn.length)){var an=-1,zn=function Kn(){for(;++an<jn.length;)if(tn.call(jn,an))return Kn.value=jn[an],Kn.done=!1,Kn;return Kn.value=void 0,Kn.done=!0,Kn};return zn.next=zn}}return{next:Qn}}function Qn(){return{value:void 0,done:!0}}return In.prototype=kn,vn(Rn,"constructor",kn),vn(kn,"constructor",In),In.displayName=vn(kn,fn,"GeneratorFunction"),Lt.isGeneratorFunction=function(jn){var Bn=typeof jn=="function"&&jn.constructor;return!!Bn&&(Bn===In||(Bn.displayName||Bn.name)==="GeneratorFunction")},Lt.mark=function(jn){return Object.setPrototypeOf?Object.setPrototypeOf(jn,kn):(jn.__proto__=kn,vn(jn,fn,"GeneratorFunction")),jn.prototype=Object.create(Rn),jn},Lt.awrap=function(jn){return{__await:jn}},wn(xn.prototype),vn(xn.prototype,un,function(){return this}),Lt.AsyncIterator=xn,Lt.async=function(jn,Bn,an,zn,Kn){Kn===void 0&&(Kn=Promise);var An=new xn(Ft(jn,Bn,an,zn),Kn);return Lt.isGeneratorFunction(Bn)?An:An.next().then(function(_n){return _n.done?_n.value:An.next()})},wn(Rn),vn(Rn,fn,"Generator"),vn(Rn,cn,function(){return this}),vn(Rn,"toString",function(){return"[object Generator]"}),Lt.keys=function(jn){var Bn=[];for(var an in jn)Bn.push(an);return Bn.reverse(),function zn(){for(;Bn.length;){var Kn=Bn.pop();if(Kn in jn)return zn.value=Kn,zn.done=!1,zn}return zn.done=!0,zn}},Lt.values=tr,rr.prototype={constructor:rr,reset:function(jn){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Un),!jn)for(var Bn in this)Bn.charAt(0)==="t"&&tn.call(this,Bn)&&!isNaN(+Bn.slice(1))&&(this[Bn]=void 0)},stop:function(){this.done=!0;var jn=this.tryEntries[0].completion;if(jn.type==="throw")throw jn.arg;return this.rval},dispatchException:function(jn){if(this.done)throw jn;var Bn=this;function an(Pn,Vn){return An.type="throw",An.arg=jn,Bn.next=Pn,Vn&&(Bn.method="next",Bn.arg=void 0),!!Vn}for(var zn=this.tryEntries.length-1;zn>=0;--zn){var Kn=this.tryEntries[zn],An=Kn.completion;if(Kn.tryLoc==="root")return an("end");if(Kn.tryLoc<=this.prev){var _n=tn.call(Kn,"catchLoc"),On=tn.call(Kn,"finallyLoc");if(_n&&On){if(this.prev<Kn.catchLoc)return an(Kn.catchLoc,!0);if(this.prev<Kn.finallyLoc)return an(Kn.finallyLoc)}else if(_n){if(this.prev<Kn.catchLoc)return an(Kn.catchLoc,!0)}else{if(!On)throw new Error("try statement without catch or finally");if(this.prev<Kn.finallyLoc)return an(Kn.finallyLoc)}}}},abrupt:function(jn,Bn){for(var an=this.tryEntries.length-1;an>=0;--an){var zn=this.tryEntries[an];if(zn.tryLoc<=this.prev&&tn.call(zn,"finallyLoc")&&this.prev<zn.finallyLoc){var Kn=zn;break}}Kn&&(jn==="break"||jn==="continue")&&Kn.tryLoc<=Bn&&Bn<=Kn.finallyLoc&&(Kn=null);var An=Kn?Kn.completion:{};return An.type=jn,An.arg=Bn,Kn?(this.method="next",this.next=Kn.finallyLoc,gn):this.complete(An)},complete:function(jn,Bn){if(jn.type==="throw")throw jn.arg;return jn.type==="break"||jn.type==="continue"?this.next=jn.arg:jn.type==="return"?(this.rval=this.arg=jn.arg,this.method="return",this.next="end"):jn.type==="normal"&&Bn&&(this.next=Bn),gn},finish:function(jn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var an=this.tryEntries[Bn];if(an.finallyLoc===jn)return this.complete(an.completion,an.afterLoc),Un(an),gn}},catch:function(jn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var an=this.tryEntries[Bn];if(an.tryLoc===jn){var zn=an.completion;if(zn.type==="throw"){var Kn=zn.arg;Un(an)}return Kn}}throw new Error("illegal catch attempt")},delegateYield:function(jn,Bn,an){return this.delegate={iterator:tr(jn),resultName:Bn,nextLoc:an},this.method==="next"&&(this.arg=void 0),gn}},Lt}function ot(Lt,Gt,tn,zt,cn,un,fn){try{var vn=Lt[un](fn),Ft=vn.value}catch(pn){return void tn(pn)}vn.done?Gt(Ft):Promise.resolve(Ft).then(zt,cn)}function ht(Lt){return function(){var Gt=this,tn=arguments;return new Promise(function(zt,cn){var un=Lt.apply(Gt,tn);function fn(Ft){ot(un,zt,cn,fn,vn,"next",Ft)}function vn(Ft){ot(un,zt,cn,fn,vn,"throw",Ft)}fn(void 0)})}}s.d(at,{$6:()=>Tt,AA:()=>Vt,Ak:()=>Ut,BF:()=>ft,Cm:()=>xt,E2:()=>pt,MM:()=>yt,Ne:()=>Dt,PR:()=>st,RX:()=>vt,TI:()=>Ot,Xh:()=>lt,ag:()=>ut,cf:()=>kt,dc:()=>mt,vO:()=>St}),s(8309),s(2772),s(1539),s(8674),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),s(2443),s(3680),s(3706),s(2703),s(9070),s(8011),s(489),s(9554),s(4747),s(8304),s(7042),s(9064);var dt,pt=null,lt=null,mt=null,st=null,ut=null,ft=null,yt=null,vt=null,St=null,xt=null,Ut=null,Tt=null,kt=null,Dt=null,Vt=null,Ot=null;dt=(pt=new UAParser).getBrowser(),ut=pt.getOS(),kt=pt.getBrowser(),typeof apiRTC_React<"u"?(mt=DeviceInfo.getSystemVersion(),ft=DeviceInfo.getSystemName(),lt=DeviceInfo.getUserAgent(),St=DeviceInfo.getModel()):(mt=dt.version||"Unknown",ft=pt.getOS().name||"Unknown",yt=pt.getOS().version||"Unknown",vt=function(){var Lt=ht(nt().mark(function Gt(){var tn;return nt().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.next=2,pt.getOS().withClientHints();case 2:return tn=zt.sent,zt.abrupt("return",tn.version);case 4:case"end":return zt.stop()}},Gt)}));return function(){return Lt.apply(this,arguments)}}(),lt=dt.name||"Unknown",Dt=pt.getCPU().architecture||"Unknown",St=pt.getDevice().type||"Unknown",xt=pt.getDevice().vendor||"Unknown",Ut=function(){var Lt=ht(nt().mark(function Gt(){var tn;return nt().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.next=2,pt.getDevice().withClientHints();case 2:return tn=zt.sent,zt.abrupt("return",tn.model);case 4:case"end":return zt.stop()}},Gt)}));return function(){return Lt.apply(this,arguments)}}(),Vt=pt.getEngine().name||"Unknown",Ot=pt.getEngine().version||"Unknown"),st=mt!==void 0?dt.major:99,window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase().indexOf(" electron/")>=0&&(Tt="electron")},4708:(rt,at,s)=>{function et(Ut){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt},et(Ut)}s.d(at,{Pj:()=>ht,S6:()=>mt,Wc:()=>lt,Ym:()=>vt,_C:()=>ot,cw:()=>yt,dD:()=>pt,fS:()=>xt,ki:()=>St,wL:()=>ut,ws:()=>st,yJ:()=>dt}),s(4603),s(4916),s(9714),s(3123),s(9600),s(1249),s(7941),s(4723),s(1058),s(6992),s(9575),s(1539),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(9753),s(7042),s(2526),s(1817),s(2165),s(8783),s(3948);var nt=s(1549).Y.get("Utils");function ot(Ut){return new RegExp("^[0-9-.]*$","g").test(Ut)}function ht(){return typeof apiRTC_React<"u"||window.location.protocol==="https:"}function dt(){return typeof apiRTC_React>"u"&&window.location.protocol==="http:"}function pt(Ut){var Tt,kt,Dt,Vt,Ot={};for(Dt=0,Vt=(Tt=Ut.split("&")).length;Dt<Vt;Dt++)Ot[(kt=Tt[Dt].split("="))[0]]=kt[1];return Ot}function lt(Ut){return Object.keys(Ut).map(function(Tt){return Tt+"="+Ut[Tt]}).join("&")}function mt(Ut,Tt){nt.debug("mergeJSON");var kt={},Dt=null;if(Ut)for(Dt in Ut)Ut.hasOwnProperty(Dt)&&(kt[Dt]=Ut[Dt]);if(Tt)for(Dt in Tt)Tt.hasOwnProperty(Dt)&&(kt[Dt]=Tt[Dt]);return nt.log(kt),kt}var st=function(Ut,Tt){var kt,Dt,Vt;for(Ut==null&&(Ut={}),kt=1;kt<arguments.length;kt+=1)for(Dt in Vt=arguments[kt])Vt.hasOwnProperty(Dt)&&(Ut[Dt]=Vt[Dt]);return Ut},ut=function(){var Ut=function(kt,Dt,Vt){var Ot=kt.match(Dt);return Ot&&Ot.length>=Vt&&parseInt(Ot[Vt],10)},Tt={};if(typeof apiRTC_React<"u")return Tt.type="react-native",Tt;if(window!==void 0&&window.navigator!==void 0)if(window.navigator.mozGetUserMedia)Tt.type="firefox",Tt.version=Ut(window.navigator.userAgent,/Firefox\/(\d+)\./,1);else if(window.navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)Tt.type="chrome",Tt.version=Ut(window.navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!window.navigator.userAgent.match(/Version\/(\d+).(\d+)/))return Tt;Tt.type="safari",Tt.version=Ut(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(window.navigator.mediaDevices&&window.navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))Tt.type="edge",Tt.version=Ut(window.navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.navigator.mediaDevices||!window.navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return Tt;Tt.type="safari",Tt.version=Ut(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return Tt}(),ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/=",yt={decode:function(Ut){var Tt,kt=ft.indexOf(Ut.charAt(Ut.length-1)),Dt=ft.indexOf(Ut.charAt(Ut.length-2)),Vt=Ut.length/4*3,Ot=null,Lt=null,Gt=null,tn=null,zt=null,cn=null,un=0,fn=null;for(kt===64&&Vt--,Dt===64&&Vt--,fn=new Uint8Array(Vt),Tt=0;Tt<Vt;Tt+=3)Ot=ft.indexOf(Ut.charAt(un++))<<2|(tn=ft.indexOf(Ut.charAt(un++)))>>4,Lt=(15&tn)<<4|(zt=ft.indexOf(Ut.charAt(un++)))>>2,Gt=(3&zt)<<6|(cn=ft.indexOf(Ut.charAt(un++))),fn[Tt]=Ot,zt!==64&&(fn[Tt+1]=Lt),cn!==64&&(fn[Tt+2]=Gt);return fn},encode:function(Ut){var Tt,kt="",Dt=new Uint8Array(Ut),Vt=Dt.byteLength,Ot=Vt%3,Lt=Vt-Ot,Gt=null;for(Tt=0;Tt<Lt;Tt+=3)Gt=Dt[Tt]<<16|Dt[Tt+1]<<8|Dt[Tt+2],kt+=ft[(16515072&Gt)>>18]+ft[(258048&Gt)>>12]+ft[(4032&Gt)>>6]+ft[63&Gt];return Ot===1?(Gt=Dt[Lt],kt+=ft[(252&Gt)>>2]+ft[(3&Gt)<<4]+"=="):Ot===2&&(Gt=Dt[Lt]<<8|Dt[Lt+1],kt+=ft[(64512&Gt)>>10]+ft[(1008&Gt)>>4]+ft[(15&Gt)<<2]+"="),kt}};function vt(Ut,Tt){return arguments.length===3?St(arguments[0],arguments[1],arguments[2]):Tt==="null"?Ut===null:Tt==="array"?Ut!==null&&et(Ut)==="object"&&Array.isArray(Ut):Ut!==null&&et(Ut)===Tt}function St(Ut,Tt,kt){if(Tt!==null&&et(Tt)==="object"&&Array.isArray(Tt)&&Tt.length>=1){var Dt=Tt[0];if(Tt.length>1)return vt(Ut,"object")&&vt(Dt,"string")&&Ut.hasOwnProperty(Dt)&&vt(Ut[Dt],"object")&&St(Ut[Dt],Tt.slice(1),kt);Tt=Dt}return kt==="undefined"?vt(Ut,"object")&&vt(Tt,"string")&&!Ut.hasOwnProperty(Tt)&&vt(Ut[Tt],kt):vt(Ut,"object")&&vt(Tt,"string")&&Ut.hasOwnProperty(Tt)&&vt(Ut[Tt],kt)}function xt(Ut,Tt){if(Ut===Tt)return!0;if(!(Ut instanceof Object&&Tt instanceof Object)||Ut.constructor!==Tt.constructor)return!1;for(var kt in Ut)if(Ut.hasOwnProperty(kt)){if(!Tt.hasOwnProperty(kt))return!1;if(Ut[kt]===Tt[kt])continue;if(et(Ut[kt])!=="object"||!xt(Ut[kt],Tt[kt]))return!1}for(kt in Tt)if(Tt.hasOwnProperty(kt)&&!Ut.hasOwnProperty(kt))return!1;return!0}},6075:(rt,at,s)=>{s.d(at,{F:()=>nt});var et=s(1549).Y.get("WebRTC_Stack"),nt=function(){this.adaptForIoSCordova=function(){if(apiRTC.osName==="iOS"&&typeof cordova<"u"){if(et.log("Modification for iOS cordova"),cordova.plugins===void 0)return void et.log("cordova.plugins not defined");if(cordova.plugins.iosrtc===void 0)return void et.log("cordova.plugins.iosrtc not defined");this.RTCPeerConnection=cordova.plugins.iosrtc.RTCPeerConnection,this.RTCSessionDescription=cordova.plugins.iosrtc.RTCSessionDescription,this.RTCIceCandidate=cordova.plugins.iosrtc.RTCIceCandidate}},typeof RTCSessionDescription<"u"?this.RTCSessionDescription=RTCSessionDescription:et.log("RTCSessionDescription is undefined"),typeof RTCIceCandidate<"u"?this.RTCIceCandidate=RTCIceCandidate:et.log("RTCIceCandidate is undefined"),typeof RTCPeerConnection<"u"?this.RTCPeerConnection=RTCPeerConnection:et.log("RTCPeerConnection is undefined"),navigator.getUserMedia!==void 0?this.getUserMedia=navigator.getUserMedia:typeof getUserMedia<"u"?this.getUserMedia=getUserMedia:et.log("getUserMedia is undefined")}},8765:(rt,at,s)=>{s.d(at,{K:()=>pt}),s(6755),s(2772),s(3710),s(8309),s(9601),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(1549),nt=s(5945),ot=s(4708);function ht(lt){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},ht(lt)}var dt=et.Y.get("WebRTC_Event"),pt=function(){if(dt.debug("WebRTC_Event"),this.customEventIsDefined="notTested",this.customEventIsDefined==="notTested")try{new CustomEvent("test",{detail:"test",bubbles:!0,cancelable:!0}),this.customEventIsDefined=!0}catch(lt){this.customEventIsDefined=!1,dt.log("customEvent error :"+lt)}(nt.Xh==="IE"&&nt.dc>8||nt.Xh==="Netscape")&&(dt.log("polyfill the CustomEvent()"),function(){function lt(mt,st){st=st||{bubbles:!1,cancelable:!1,detail:void 0};var ut=document.createEvent("CustomEvent");return ut.initCustomEvent(mt,st.bubbles,st.cancelable,st.detail),ut}lt.prototype=window.CustomEvent.prototype,window.CustomEvent=lt}(),this.customEventIsDefined=!0),nt.Xh==="IE"&&nt.dc>8&&(dt.log("polyfill startsWith()"),String.prototype.startsWith||(String.prototype.startsWith=function(lt,mt){return mt=mt||0,this.indexOf(lt,mt)===mt})),this.eventDispatchMgr=function(lt,mt){if(typeof apiRTC_React<"u"){var st={type:lt,detail:mt};eventManager.dispatchEvent(st)}else if(this.customEventIsDefined===!1)typeof $jqApz<"u"?(dt.log("CustomEvent not supported by Browser, using $jqApz "),$jqApz.event.trigger({type:lt,detail:mt})):typeof jQuery<"u"?(dt.log("CustomEvent not supported by Browser, using jQuery "),jQuery.event.trigger({type:lt,detail:mt})):dt.warn("Custom Events not supported on this browser : eventDispatchMgr()");else{var ut=new CustomEvent(lt,{detail:mt,bubbles:!0,cancelable:!0});document.dispatchEvent(ut)}},this.createIncomingCallEvent=function(lt){var mt={eventType:"incomingCall",time:new Date,clientId:lt.clientId,callerId:lt.callerId,callId:lt.callId,autoAnswerActivated:lt.autoAnswerActivated,callNumber:lt.callNumber,callerNickname:lt.callerNickname,audioOnly:lt.audioOnly,callType:lt.callType,destCallType:lt.destCallType,recordedCall:lt.recordedCall,remoteType:lt.remoteType};(0,ot.Ym)(lt.data,"object")&&(mt.data=lt.data),this.eventDispatchMgr("incomingCall",mt)},this.createCallAttemptEvent=function(lt,mt,st,ut){var ft={eventType:"callAttempt",time:new Date,clientId:lt,callerId:mt,callId:ut,callerNickname:st};this.eventDispatchMgr("callAttempt",ft)},this.createCallEstablishedEvent=function(lt,mt,st,ut){dt.debug("createCallEstablishedEvent with callType : "+mt),dt.debug("destCallType : "+ut);var ft={eventType:"callEstablished",time:new Date,calleeId:lt,callType:mt,callId:st,destCallType:ut};this.eventDispatchMgr("callEstablished",ft)},this.createHangupEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"hangup",time:new Date,hangupType:lt,clientId:mt,remoteId:st,lastEstablishedCall:ut,reason:ft,callId:yt,callType:vt};this.eventDispatchMgr("hangup",St)},this.createRemoteHangupEvent=function(lt,mt,st,ut){var ft={eventType:"remoteHangup",time:new Date,clientId:lt,remoteId:mt,lastEstablishedCall:st,reason:ut};this.eventDispatchMgr("remoteHangup",ft)},this.createCallRestartingEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt){var Ut={eventType:"callRestarting",time:new Date,callType:lt,audioOnly:mt,oldCallId:st,newCallId:ut,dataType:ft,clientId:yt,remoteId:vt,destRoom:St,streamId:xt};this.eventDispatchMgr("callRestarting",Ut)},this.createUserMediaSuccessEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt,Ut,Tt){var kt={eventType:"userMediaSuccess",time:new Date,onCallEstablishment:lt,audioIsAvailable:mt,audioDeviceLabel:st,videoIsAvailable:ut,videoDeviceLabel:ft,callType:yt,callId:vt,stream:St,remoteId:xt,restarted:Ut,userMediaStreamId:Tt};this.eventDispatchMgr("userMediaSuccess",kt)},this.createUserMediaErrorEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"userMediaError",time:new Date,onCallEstablishment:lt,callType:mt,userMediaStreamId:ut,callId:ft,tryAudioCallActivated:yt,gumConfig:vt};ht(st)==="object"?(St.error={},St.error.message=st.message,St.error.code=st.code,St.error.name=st.name):St.error=st,this.eventDispatchMgr("userMediaError",St)},this.createUserMediaStopEvent=function(lt,mt,st){var ut={eventType:"userMediaStop",time:new Date,callId:lt,mediaType:mt,userMediaStreamId:st};this.eventDispatchMgr("userMediaStop",ut)},this.createICECandidateTypeUpdateEvent=function(lt,mt,st){var ut={eventType:"ICECandidateTypeUpdate",time:new Date,callId:lt,localCandidate:mt,remoteCandidate:st};this.eventDispatchMgr("ICECandidateTypeUpdate",ut)},this.createSelectedICECandidateEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"selectedICECandidate",time:new Date,callId:lt,localCandidateType:mt,remoteCandidateType:st,localAddress:ut,remoteAdress:ft,transportType:yt,localTransportType:vt};this.eventDispatchMgr("selectedICECandidate",St)},this.createErrorEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"error",time:new Date,errorInfo:lt,errorCode:mt,callId:st,roomName:ut,roomCallType:ft};(0,ot.Ym)(yt,"object")&&(St.data=yt),(0,ot.Ym)(vt,"string")&&(St.convId=vt),this.eventDispatchMgr("error",St)},this.createReceiveIMMessageEvent=function(lt,mt,st,ut,ft,yt){var vt={eventType:"receiveIMMessage",time:new Date,senderId:lt,senderNickname:mt,senderPhotoURL:st,message:ut,UUCSeq:ft,convId:yt};this.eventDispatchMgr("receiveIMMessage",vt)},this.createChannelEvent=function(lt,mt){var st={eventType:"channelEvent",time:new Date,channelEvent:lt,event:mt};this.eventDispatchMgr("channelEvent",st)},this.createSessionReadyEvent=function(lt){dt.debug("createSessionReadyEvent");var mt={eventType:"sessionReady",time:new Date,apiCCId:lt};this.eventDispatchMgr("sessionReady",mt)},this.createWebRTCClientCreatedEvent=function(){var lt={eventType:"webRTCClientCreated",time:new Date};this.eventDispatchMgr("webRTCClientCreated",lt)},this.createUpdatePresenceEvent=function(lt,mt,st){var ut={eventType:"updatePresence",time:new Date,connectedUsersList:lt,connectedUsersListWithStatus:st,state:mt};this.eventDispatchMgr("updatePresence",ut)},this.createCloudEventOccurredEvent=function(lt,mt){var st={eventType:"cloudEventOccurred",time:new Date,topic:lt,target:mt};this.eventDispatchMgr("cloudEventOccurred",st)},this.createUpdateUserStatusEvent=function(lt){var mt={eventType:"updateUserStatus",time:new Date,message:lt};this.eventDispatchMgr("updateUserStatus",mt)},this.createGroupChatCreationEvent=function(lt,mt,st,ut,ft,yt){var vt={eventType:"groupChatCreation",time:new Date,status:lt,groupChatId:mt,initialDestId:st,invitationSendedToInitialDestId:ut,newContactId:ft,invitationSendedToNewContactId:yt};this.eventDispatchMgr("groupChatCreation",vt)},this.createGroupChatInvitationEvent=function(lt,mt,st,ut,ft){var yt={eventType:"groupChatInvitation",time:new Date,groupChatId:lt,contactList:ft,senderId:mt,senderNickname:st,senderPhotoURL:ut};this.eventDispatchMgr("groupChatInvitation",yt)},this.createGroupChatMemberUpdateEvent=function(lt,mt,st){var ut={eventType:"groupChatMemberUpdate",time:new Date,groupChatId:lt,contactList:mt,status:st};this.eventDispatchMgr("groupChatMemberUpdate",ut)},this.createAddUserInGroupChatEvent=function(lt,mt,st){var ut={eventType:"addUserInGroupChatAnswer",time:new Date,invitationSended:lt,groupChatId:mt,contactId:st};this.eventDispatchMgr("addUserInGroupChatAnswer",ut)},this.createReceiveGroupChatMessageEvent=function(lt,mt,st,ut,ft){var yt={eventType:"receiveGroupChatMessage",time:new Date,groupChatId:lt,senderId:mt,senderNickname:st,message:ut};(0,ot.Ym)(ft,"object")&&(yt.metadata=ft),this.eventDispatchMgr("receiveGroupChatMessage",yt)},this.createReceiveConversationListAnswerEvent=function(lt){var mt={eventType:"receiveConversationList",time:new Date,convList:lt};this.eventDispatchMgr("receiveConversationList",mt)},this.createReceiveContactOccurrencesFromConversationListAnswerEvent=function(lt){var mt={eventType:"receiveContactOccurrencesFromConversationList",time:new Date,occurrencesList:lt};this.eventDispatchMgr("receiveContactOccurrencesFromConversationList",mt)},this.createReceiveConversationDetailReportAnswerEvent=function(lt){var mt={eventType:"receiveConversationDetailReport",time:new Date,CDR:lt};this.eventDispatchMgr("receiveConversationDetailReport",mt)},this.createReceiveConversationHistoryEvent=function(lt,mt,st){var ut={eventType:"receiveConversationHistory",time:new Date,convId:lt,convHistory:mt,status:st};this.eventDispatchMgr("receiveConversationHistory",ut)},this.createUserDataAnswerEvent=function(lt,mt,st,ut){var ft={eventType:"userDataAnswer",time:new Date,userFound:lt,contactId:mt,nickname:st,photoURL:ut};this.eventDispatchMgr("userDataAnswer",ft)},this.createFetchUserDataAnswerEvent=function(lt){var mt="fetchUserDataAnswer",st={eventType:mt,timeout:lt.timeout,userData:lt.userData,id:lt.id};this.eventDispatchMgr(mt,st)},this.createReceiveDataEvent=function(lt,mt,st){var ut={eventType:"receiveData",time:new Date,senderId:lt,dstRoomId:mt,data:st};this.eventDispatchMgr("receiveData",ut)},this.createMCUSessionCreationEvent=function(lt,mt){var st={eventType:"MCUSessionCreation",time:new Date,sessionId:lt,token:mt};this.eventDispatchMgr("MCUSessionCreation",st)},this.createJoinMCUSessionAnswerEvent=function(lt,mt,st,ut,ft){var yt={eventType:"joinMCUSessionAnswer",time:new Date,sessionId:lt,token:mt,groupChatId:st,initiator:ut,roomId:ft.roomName};ft.roomMode&&(yt.mode=ft.roomMode),ft.meshOnly===!0&&(yt.meshOnly=!0),ft.joinSessionAnswer&&(yt.result=Object.assign({},ft.joinSessionAnswer)),this.eventDispatchMgr("joinMCUSessionAnswer",yt)},this.createMCUAvailableStreamEvent=function(lt,mt){var st={eventType:"MCUAvailableStream",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableStream",st)},this.createMCUAvailableReplayEvent=function(lt,mt){var st={eventType:"MCUAvailableReplay",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableReplay",st)},this.createMCUAvailableCompositeEvent=function(lt,mt){var st={eventType:"MCUAvailableComposite",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableComposite",st)},this.createMCURemovedStreamEvent=function(lt){var mt={eventType:"MCURemoveStream",time:new Date,streamId:lt};this.eventDispatchMgr("MCURemoveStream",mt)},this.createMCUAvailableStreamUpdateEvent=function(lt,mt){var st={eventType:"MCUAvailableStreamUpdate",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableStreamUpdate",st)},this.createMCUParticipantEjectedEvent=function(lt,mt,st){var ut={eventType:"MCUParticipantEjected",time:new Date,roomId:lt,clientId:mt};st&&(ut.data=st),this.eventDispatchMgr("MCUParticipantEjected",ut)},this.createReceiveMCUSessionInvitationEvent=function(lt,mt,st,ut){st===void 0&&(st=0);var ft={eventType:"receiveMCUSessionInvitation",time:new Date,sessionId:lt,token:mt,groupChatId:st,initiatorId:ut};this.eventDispatchMgr("receiveMCUSessionInvitation",ft)},this.createRemoteStreamAddedEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"remoteStreamAdded",time:new Date,callId:mt,callType:lt,stream:st,remoteId:ut,destCallType:ft,audioIsAvailable:yt.available,audioIsActive:yt.active,audioIsMuted:yt.muted,videoIsAvailable:vt.available,videoIsActive:vt.active,videoIsMuted:vt.muted};this.eventDispatchMgr("remoteStreamAdded",St)},this.createRemoteStreamRemovedEvent=function(lt,mt,st,ut,ft){var yt={eventType:"remoteStreamRemoved",time:new Date,callId:mt,callType:lt,stream:st,remoteId:ut,destCallType:ft};this.eventDispatchMgr("remoteStreamRemoved",yt)},this.createSimulcastFeedChanged=function(lt,mt){var st={eventType:"simulcastFeedChanged",time:new Date,callId:lt,simulcast:mt};this.eventDispatchMgr("simulcastFeedChanged",st)},this.createLocalStreamRemovedEvent=function(lt,mt,st,ut,ft){var yt={eventType:"localStreamRemoved",time:new Date,callId:mt,callType:lt,stream:st,remoteId:ut,destCallType:ft};this.eventDispatchMgr("localStreamRemoved",yt)},this.createSlowLinkEvent=function(lt,mt){var st={eventType:"slowLink",time:new Date,callId:lt};mt&&(st.advice=mt),this.eventDispatchMgr("slowLink",st)},this.createVideoQualityChangedEvent=function(lt,mt,st,ut){var ft={eventType:"videoQualityChanged",time:new Date,roomname:mt,callId:lt,hint:st,profileType:ut.name};ut.bitrate&&(ft.bitrate=ut.bitrate),ut.width&&ut.height&&(ft.width=ut.width,ft.height=ut.height),ut.frameRate&&(ft.frameRate=ut.frameRate),this.eventDispatchMgr("videoQualityChanged",ft)},this.createAudioAmplitudeEvent=function(lt,mt,st,ut){var ft={eventType:"audioAmplitude",time:new Date,callId:st,userMediaStreamId:ut,descriptor:{amplitude:lt,isSpeaking:mt}};this.eventDispatchMgr("audioAmplitude",ft)},this.createLocalStreamUpdatedEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt){var Ut={eventType:"localStreamUpdated",time:new Date,changeList:lt,audioIsAvailable:mt.available,audioDeviceLabel:mt.deviceLabel,audioIsActive:mt.active,audioIsMuted:mt.muted,audioIsSilent:mt.silent,videoIsAvailable:st.available,videoDeviceLabel:st.deviceLabel,videoIsActive:st.active,videoIsMuted:st.muted,videoIsSilent:st.silent,onCall:ut,callType:ft,callId:yt,stream:vt,userMediaStreamId:St,cause:xt};this.eventDispatchMgr("localStreamUpdated",Ut)},this.createRemoteStreamUpdatedEvent=function(lt,mt,st,ut,ft,yt){var vt={eventType:"remoteStreamUpdated",time:new Date,changeList:lt,audioIsAvailable:mt.available,audioIsActive:mt.active,audioIsMuted:mt.muted,audioIsSilent:mt.silent,videoIsAvailable:st.available,videoIsActive:st.active,videoIsMuted:st.muted,videoIsSilent:st.silent,callType:ut,callId:ft,cause:yt};this.eventDispatchMgr("remoteStreamUpdated",vt)},this.createCanPlayRemoteVideoEvent=function(lt,mt,st){var ut={eventType:"canPlayRemoteVideo",time:new Date,videoDivId:lt,callType:mt,remoteId:st};this.eventDispatchMgr("canPlayRemoteVideo",ut)},this.createRecordedFileAvailableEvent=function(lt){var mt={eventType:"recordedFileAvailable",time:new Date,fileName:lt};this.eventDispatchMgr("recordedFileAvailable",mt)},this.createRecordedStreamsAvailableEvent=function(lt,mt,st,ut,ft,yt,vt){var St={eventType:"recordedStreamsAvailable",time:new Date,confId:lt,userId1:mt,userId2:st,callId:ut,apiKey:apiCC.session.apiKey};ft&&(St.convId=ft),yt&&(St.mediaId=yt),vt&&(St.mediaURL=vt),this.eventDispatchMgr("recordedStreamsAvailable",St)},this.createMCURecordedStreamsAvailableEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt,Ut,Tt){var kt={eventType:"MCURecordedStreamsAvailable",time:new Date,roomName:lt,callId:mt,clientId:st,convId:ft,mediaId:yt,mediaURL:vt,recordType:St};xt&&(kt.remoteId=xt),ut&&(kt.recordedFileName=ut),Ut&&(kt.mediaType=Ut),(0,ot.Ym)(Tt,"object")?(kt.descriptor={},(0,ot.Ym)(Tt,"mode","string")&&(kt.descriptor.mode=Tt.mode),(0,ot.Ym)(Tt,"labelEnabled","boolean")&&(kt.descriptor.labelEnabled=Tt.labelEnabled),kt.descriptor.labelEnabled===!0&&(0,ot.Ym)(Tt,"labels","array")&&(kt.descriptor.labels=Tt.labels)):kt.descriptor={mode:"complete",labelEnabled:!1},this.eventDispatchMgr("MCURecordedStreamsAvailable",kt)},this.createMCURecordingStartedEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt,Ut,Tt,kt){var Dt={eventType:"MCURecordingStarted",time:new Date,roomName:lt,callId:mt,clientId:st,recordType:ut,recordStartTime:ft};yt&&(Dt.convId=yt),vt&&(Dt.mediaId=vt),St&&(Dt.mediaURL=St),xt&&(Dt.remoteId=xt),Ut&&(Dt.recordedFileName=Ut),Tt&&(Dt.mediaType=Tt),(0,ot.Ym)(kt,"object")&&(Dt.descriptor={},(0,ot.Ym)(kt,"mode","string")&&(Dt.descriptor.mode=kt.mode),(0,ot.Ym)(kt,"labelEnabled","boolean")&&(Dt.descriptor.labelEnabled=kt.labelEnabled),Dt.descriptor.labelEnabled===!0&&(0,ot.Ym)(kt,"labels","array")&&(Dt.descriptor.labels=kt.labels)),this.eventDispatchMgr("MCURecordingStarted",Dt)},this.createMCURecordingStoppedEvent=function(lt,mt,st,ut,ft,yt,vt,St,xt,Ut,Tt,kt){var Dt={eventType:"MCURecordingStopped",time:new Date,roomName:lt,callId:mt,clientId:st,recordType:ut,recordStartTime:ft};yt&&(Dt.convId=yt),vt&&(Dt.mediaId=vt),St&&(Dt.mediaURL=St),xt&&(Dt.remoteId=xt),Ut&&(Dt.recordedFileName=Ut),Tt&&(Dt.mediaType=Tt),(0,ot.Ym)(kt,"object")&&(Dt.descriptor={},(0,ot.Ym)(kt,"mode","string")&&(Dt.descriptor.mode=kt.mode),(0,ot.Ym)(kt,"labelEnabled","boolean")&&(Dt.descriptor.labelEnabled=kt.labelEnabled),Dt.descriptor.labelEnabled===!0&&(0,ot.Ym)(kt,"labels","array")&&(Dt.descriptor.labels=kt.labels)),this.eventDispatchMgr("MCURecordingStopped",Dt)},this.createStopRecordEvent=function(){var lt={eventType:"stopRecord",time:new Date};this.eventDispatchMgr("stopRecord",lt)},this.createMCUStreamingStartedEvent=function(lt,mt,st,ut){var ft={eventType:"MCUStreamingStarted",time:new Date,roomName:lt,callId:mt,clientId:st,streamingStartTime:ut};this.eventDispatchMgr("MCUStreamingStarted",ft)},this.createMCUStreamingStoppedEvent=function(lt,mt,st,ut){var ft={eventType:"MCUStreamingStopped",time:new Date,roomName:lt,callId:mt,clientId:st,streamingEndTime:ut};this.eventDispatchMgr("MCUStreamingStopped",ft)},this.createMCURoomModeChangedEvent=function(lt,mt,st,ut){var ft={eventType:"MCURoomModeChanged",time:new Date,roomId:lt,oldMode:mt,newMode:st,state:ut};this.eventDispatchMgr("MCURoomModeChanged",ft)},this.createSnapShotPhotoUploaded=function(lt){var mt={eventType:"snapShotPhotoUploaded",time:new Date,fileName:lt};this.eventDispatchMgr("snapShotPhotoUploaded",mt)},this.createRoomCreationEvent=function(lt,mt,st){var ut={eventType:"roomCreation",time:new Date,status:lt,roomId:mt,roomType:st};this.eventDispatchMgr("roomCreation",ut)},this.createRoomJoinedEvent=function(lt,mt,st){var ut={eventType:"roomJoined",time:new Date,status:lt,roomId:mt,roomType:st};this.eventDispatchMgr("roomJoined",ut)},this.createRoomInvitationEvent=function(lt,mt,st,ut,ft,yt){var vt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},St="roomInvitation",xt={eventType:"roomInvitation",time:new Date,roomId:lt,contactList:ft,senderId:mt,senderNickname:st,senderPhotoURL:ut,roomType:yt};vt.cloudConvId&&(xt.cloudConvId=vt.cloudConvId),vt.webconf===!0&&(xt.webconf=!0),this.eventDispatchMgr(St,xt)},this.createRoomMemberUpdateEvent=function(lt,mt,st,ut){var ft={eventType:"roomMemberUpdate",time:new Date,roomId:lt,contactList:mt,status:st,roomType:ut};this.eventDispatchMgr("roomMemberUpdate",ft)},this.createContactListInRoomEvent=function(lt,mt,st){var ut={eventType:"contactListInRoom",time:new Date,roomId:lt,contactList:mt,roomType:st};this.eventDispatchMgr("contactListInRoom",ut)},this.createReceiveRoomMessageEvent=function(lt,mt,st,ut,ft){var yt={eventType:"receiveRoomMessage",time:new Date,roomId:lt,senderId:mt,senderNickname:st,message:ut,roomType:ft};this.eventDispatchMgr("receiveRoomMessage",yt)},this.createDesktopCaptureEvent=function(lt,mt,st){var ut={eventType:"desktopCapture",time:new Date,event:lt,callId:mt,remoteId:st};this.eventDispatchMgr("desktopCapture",ut)},this.createMediaDeviceChangedEvent=function(lt,mt,st){var ut="NotDefined";mt!=null&&(ut=mt);var ft={eventType:"mediaDeviceChanged",time:new Date,diff:lt,updateReason:ut,firstMediaDeviceListInitialization:st};this.eventDispatchMgr("mediaDeviceChanged",ft)},this.createSwitchStreamEvent=function(lt,mt){var st={eventType:"switchStream",time:new Date,callId:lt,stream:mt};this.eventDispatchMgr("switchStream",st)},this.createConnectedUsersListUpdateEvent=function(lt,mt,st,ut){var ft={eventType:"ConnectedUsersListUpdate",time:new Date,group:lt,usersList:mt,status:st,updateReason:ut};this.eventDispatchMgr("connectedUsersListUpdate",ft)},this.createClosingWhiteBoardEvent=function(lt,mt){var st={eventType:"closingWhiteBoard",time:new Date,roomId:lt,reason:mt};this.eventDispatchMgr("closingWhiteBoard",st)},this.createExternalJsLoadingStatusEvent=function(lt,mt){var st={eventType:"externalJsLoadingStatus",extjs:lt,status:mt,time:new Date};this.eventDispatchMgr("externalJsLoadingStatus",st)},this.createBackgroundSubstractionStopVisibilityChangeEvent=function(lt){var mt={userMediaStreamId:lt};this.eventDispatchMgr("backgroundSubstractionStopVisibilityChange",mt)},this.createBackgroundSubstractionStopComputeTimeEvent=function(lt){var mt={userMediaStreamId:lt};this.eventDispatchMgr("backgroundSubstractionStopComputeTime",mt)},this.createAIESnapshotEvent=function(lt,mt){var st={userMediaStreamId:lt,image:mt};this.eventDispatchMgr("AIESnapshot",st)},this.createAIELogEvent=function(lt,mt){var st={userMediaStreamId:lt,log:mt};this.eventDispatchMgr("AIELog",st)},this.createEvent=function(lt){if(!lt.eventType)throw new Error("The event json must have an eventType"+lt);lt.time=new Date,this.eventDispatchMgr(lt.eventType,lt)}}},940:(rt,at,s)=>{s.d(at,{S:()=>ht}),s(2772);var et=s(1549),nt=s(5945),ot=et.Y.get("WebRTC_Stack"),ht=function(dt){this.sendInvite=function(pt,lt,mt,st,ut,ft){var yt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{};ot.debug("WebRTC_Stack::sendInvite()"),ft||(ft="media");var vt={type:"invite",callId:pt,callerId:lt,callerNickname:mt,calleeId:st,roomId:ut,callType:ft};yt.mode&&(vt.mode=yt.mode);var St=yt.offer;if(St){if(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11){var xt=St.type,Ut=St.sdp;ot.log("JSON.stringify(type):",JSON.stringify(xt)),ot.log("JSON.stringify(sdp):",JSON.stringify(Ut)),St={type:xt,sdp:Ut}}vt.sdpoffer=St}yt.data&&(vt.data=yt.data),yt.stream&&(vt.stream=yt.stream);var Tt=JSON.stringify(vt);ot.info("C->S:",Tt),dt.emit("invite",Tt)},this.sendInviteBroadcast=function(pt,lt,mt,st,ut,ft){var yt,vt;ot.debug("WebRTC_Stack::sendInviteBroadcast()"),yt={type:"invite",callId:pt,callerId:lt,callerNickname:mt,calleeId:st,roomId:ut,sdpoffer:ft},vt=JSON.stringify(yt),ot.debug("C->S: "+vt),dt.emit("invite_broadcast",vt)},this.send200OK=function(pt,lt,mt,st,ut,ft,yt){ot.debug("WebRTC_Stack::send200OK()");var vt,St,xt=null;(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&(ot.log("JSON.stringify(offer.sdp) :"+JSON.stringify(ft.sdp)),ot.log("JSON.stringify(offer.type) :"+JSON.stringify(ft.type)),(xt={}).sdp=ft.sdp,xt.type=ft.type,ft=xt),vt={type:"200OK",callId:pt,callerId:lt,calleeId:mt,calleeNickname:st,roomId:ut,sdpanswer:ft,data:yt},St=JSON.stringify(vt),ot.info("C->S: "+St),dt.emit("200OK",St)},this.sendCandidate=function(pt,lt,mt,st,ut,ft,yt,vt,St,xt){ot.debug("WebRTC_Stack::sendCandidate()");var Ut=null,Tt={};ot.debug("completeCandidate :",xt),nt.Xh==="IE"?(ot.log("Browser is IE, adapting completeCandidate"),Tt.sdpMLineIndex=xt.sdpMLineIndex,Tt.candidate=xt.candidate,Tt.sdpMid=xt.sdpMid):Tt=xt,St!==null?(ot.log("call data is defined :",St),Ut={type:"candidate",callId:pt,callerId:lt,calleeId:mt,roomId:st,dst:ut,label:ft,id:yt,candidate:vt,data:St,completeCandidate:Tt}):(ot.log("call data is undefined"),Ut={type:"candidate",callId:pt,callerId:lt,calleeId:mt,roomId:st,dst:ut,label:ft,id:yt,candidate:vt,completeCandidate:Tt});var kt=JSON.stringify(Ut);ot.info("C->S:",kt),dt.emit("candidate",kt)},this.sendBye=function(pt,lt,mt,st,ut,ft){ot.debug("WebRTC_Stack::sendBye()");var yt,vt=null;ft!==null?(ot.log("call data is defined :"+ft),vt={type:"bye",callId:pt,clientId:lt,roomId:mt,dst:st,reason:ut,data:ft}):(ot.log("call data is undefined"),vt={type:"bye",callId:pt,clientId:lt,roomId:mt,dst:st,reason:ut}),yt=JSON.stringify(vt),ot.info("C->S: "+yt),dt.emit("bye",yt)},this.sendUpdate=function(pt,lt,mt,st,ut,ft,yt,vt){ot.debug("WebRTC_Stack::sendUpdate()");var St,xt=null;xt={type:"update",callId:pt,callerId:lt,calleeId:mt,roomId:st,dst:ut,sdpoffer:ft,callType:yt},vt!=null&&(ot.log("call data is defined: "+vt),xt.data=vt),St=JSON.stringify(xt),ot.info("C->S: "+St),dt.emit("update",St)},this.send200Update=function(pt,lt,mt,st,ut,ft,yt){ot.debug("WebRTC_Stack::send200Update()");var vt,St=null;yt!==null?(ot.log("call data is defined :"+yt),St={type:"200update",callId:pt,callerId:lt,calleeId:mt,roomId:st,dst:ut,sdpanswer:ft,data:yt}):(ot.log("call data is undefined"),St={type:"200update",callId:pt,callerId:lt,calleeId:mt,roomId:st,dst:ut,sdpanswer:ft}),vt=JSON.stringify(St),ot.info("C->S: "+vt),dt.emit("200update",vt)},this.sendDebugCommand=function(pt,lt,mt){var st,ut;ot.debug("WebRTC_Stack::sendDebugCommand :"+pt),st={type:"debugCommand",command:pt,apiKey:lt,clientId:mt},ut=JSON.stringify(st),ot.info("C->S: "+ut),dt.emit("debugCommand",ut)},this.sendAck=function(pt,lt,mt){var st,ut;ot.debug("WebRTC_Stack::sendAck()"),st={type:"Ack",AckMessageType:pt,cSeq:lt,dst:mt},ut=JSON.stringify(st),ot.info("C->S: "+ut),dt.emit("Ack",ut)},this.sendInfo=function(pt,lt){var mt,st,ut=["activeSpeaker","callStats","stopSpeaking"];ut.indexOf(pt)<0&&ot.debug("WebRTC_Stack::sendInfo()"),mt={type:"info",infoType:pt,data:lt},st=JSON.stringify(mt),ut.indexOf(pt)<0&&ot.info("C->S: "+st),dt.emit("info",st)},this.sendDataMessage=function(pt,lt){ot.debug("WebRTC_Stack::sendDataMessage()");var mt={type:"apiRTCDataMessage",senderId:pt,data:lt},st=JSON.stringify(mt);ot.info("C->S: "+st),dt.emit("apiRTCDataMessage",st)}}},4170:(rt,at,s)=>{s.r(at),s(4916),s(4723),s(3710),s(1539),s(9714),s(561),function(et){var nt,ot,ht=null,dt=null,pt=[];function lt(){return Math.random().toString(36).substr(2)}nt=function(){if(typeof apiRTC_React<"u")return"react-native";var mt,st=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(mt=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=mt[1]),(ft=ft?[ft[1],ft[2]]:[st,navigator.appVersion,"-?"])[0]}(),ot=function(){if(typeof apiRTC_React<"u")return 1;var mt,st=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(mt=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=mt[1]),(ft=ft?[ft[1],ft[2]]:[st,navigator.appVersion,"-?"])[1]}(),dt=new function(){(nt==="MSIE"&&ot>8||nt==="Netscape")&&function(){function mt(st,ut){ut=ut||{bubbles:!1,cancelable:!1,detail:void 0};var ft=document.createEvent("CustomEvent");return ft.initCustomEvent(st,ut.bubbles,ut.cancelable,ut.detail),ft}mt.prototype=et.CustomEvent.prototype,et.CustomEvent=mt}(),this.eventDispatchMgr=function(mt,st){if(typeof apiRTC_React<"u"){var ut={type:mt,detail:st};eventManager.dispatchEvent(ut)}else if(nt==="MSIE"&&ot<=8)typeof $jqApz<"u"?$jqApz.event.trigger({type:mt,detail:st}):typeof jQuery<"u"&&jQuery.event.trigger({type:mt,detail:st});else{var ft=new CustomEvent(mt,{detail:st,bubbles:!0,cancelable:!0});document.dispatchEvent(ft)}},this.createGetUserFromIdAnswerEvent=function(mt){var st={eventType:"getUserFromIdAnswer",time:new Date,message:mt};this.eventDispatchMgr("getUserFromIdAnswer",st)},this.createGetAllUsersAnswerEvent=function(mt){var st={eventType:"getAllUsersAnswer",time:new Date,message:mt};this.eventDispatchMgr("getAllUsersAnswer",st)},this.createErrorEvent=function(mt){var st={eventType:"error :",time:new Date,errorInfo:mt};this.eventDispatchMgr("error",st)},this.createSearchUserAnswerEvent=function(mt,st,ut){var ft={eventType:"searchUserAnswer :",time:new Date,searchStr:mt,searchAnswerList:st,group:ut};this.eventDispatchMgr("searchUserAnswer",ft)}},(ht={version:"1.0.4",description:"ApiRTC DataBase Library"}).init=function(mt){this.socket=mt,this.socket.on("getUserFromIdAnswer",this.callback(this,"onGetUserFromIdAnswer")).on("getAllUsersAnswer",this.callback(this,"onGetAllUsersAnswer")).on("searchUserAnswer",this.callback(this,"onSearchUserAnswer"))},ht.createUser=function(mt){if(mt!==null&&mt.mail!==null&&mt.id!==null){var st=JSON.stringify(mt);this.socket.emit("createUser",st)}},ht.searchUserInGroup=function(mt,st,ut,ft){var yt=null,vt=null,St=lt();(st===void 0||st!=="all"&&st!=="connected"&&st!=="disconnected")&&(st="all"),mt!==null&&(yt={searchStr:mt,presenceState:st,group:ut},ft!==void 0&&(yt.callbackId=St,pt[St]=ft),vt=JSON.stringify(yt),this.socket.emit("searchUser",vt))},ht.searchUser=function(mt,st,ut,ft){var yt=null;typeof ut=="function"?(yt=ut,ht.searchUserInGroup(mt,st,void 0,yt)):ht.searchUserInGroup(mt,st,ut,ft)},ht.onSearchUserAnswer=function(mt){var st=JSON.parse(mt);st.callbackId!==void 0&&st.callbackId in pt?(pt[st.callbackId](st.searchStr,st.searchAnswerList),pt.splice(st.callbackId,1)):dt.createSearchUserAnswerEvent(st.searchStr,st.searchAnswerList,st.group)},ht.getUserFromId=function(mt,st){var ut=null,ft=null,yt=lt();mt!==null&&(ut={id:mt},st!==void 0&&(ut.callbackId=yt,pt[yt]=st),ft=JSON.stringify(ut),this.socket.emit("getUserFromId",ft))},ht.onGetUserFromIdAnswer=function(mt){mt!==null&&mt.callbackId!==void 0&&mt.callbackId in pt?(pt[mt.callbackId](mt),pt.splice(mt.callbackId,1)):dt.createGetUserFromIdAnswerEvent(mt)},ht.getAllUsers=function(){var mt,st;mt={},st=JSON.stringify(mt),this.socket.emit("getAllUsers",st)},ht.onGetAllUsersAnswer=function(mt){dt.createGetAllUsersAnswerEvent(mt)},ht.setPresenceStatus=function(mt,st,ut){var ft,yt;ft={id:mt,presenceStatus:st,commentStatus:ut},yt=JSON.stringify(ft),this.socket.emit("setPresenceStatus",yt)},ht.setUserStatus=function(mt,st){var ut;st.id=mt,ut=JSON.stringify(st),this.socket.emit("setUserStatus",ut)},ht.setUserInfos=function(mt){var st,ut;st=mt,ut=JSON.stringify(st),this.socket.emit("setUserInfos",ut)},ht.addEventListener=function(mt,st){typeof apiRTC_React<"u"?eventManager.addEventListener(mt,st):mt!=="getUserFromIdAnswer"||mt!=="error"||mt!=="getAllUsersAnswer"||mt!=="searchUserAnswer"?document.addEventListener(mt,st,!1):dt.createErrorEvent("ERROR: Trying to add a listener on an unknow event")},ht.callback=function(mt,st){return this.closureHandler=function(ut){return mt[st](ut)},this.closureHandler},et.apiDB=ht}(window)},2746:(rt,at,s)=>{s.r(at);var et=s(1549).Y.get("onbeforeunload");apiCC.beforeUnloadFct=function(nt){et.debug("User has refreshed or left the page, eventType :",nt);try{if(typeof mailClicked<"u"&&mailClicked!==null&&(et.log("mailClicked variable is defined"),mailClicked===!0))return et.log("mailClicked is true : leaving onbeforeunload"),void(mailClicked=!1)}catch(ht){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in chrome when mailto :"+ht)}try{if(apiCC.iePluginInstallationPreventUnload!==void 0&&apiCC.iePluginInstallationPreventUnload!==null&&apiCC.iePluginInstallationPreventUnload===!0)return void et.log("iePluginInstallationPreventUnload is true : leaving onbeforeunload")}catch(ht){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in IE when installing webRTC plugin :"+ht)}if(apiCC!=null){if(apiRTC.session!==null&&apiRTC.session.remoteAccessInvitation!==null){var ot;ot=apiRTC.session.remoteAccessInvitation.invitationType==="sent"?{code:"AGENT_LEFT"}:{code:"USER_LEFT"},et.debug("Stopping remote access on refresh"),apiRTC.session.remoteAccessInvitation.stop(!0,ot)}apiCC.storeSessionInfoInSessionStorage(),apiCC.cleanApiRTCContext(),apiCC.disconnect({invalidateApiCCId:!0}),apiCC.cleanAllEventListener(),apiCC.myEventTable=[]}apiCC!=null&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiRTC.browser==="Mobile Safari"?window.addEventListener("pagehide",function(){apiCC.beforeUnloadFct("unload_MobileSafari")}):window.onbeforeunload=function(){apiCC.beforeUnloadFct("unload")}},9064:(rt,at,s)=>{function et(nt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ot){return typeof ot}:function(ot){return ot&&typeof Symbol=="function"&&ot.constructor===Symbol&&ot!==Symbol.prototype?"symbol":typeof ot},et(nt)}s(2222),s(2772),s(4916),s(3123),s(5306),s(1539),s(3710),s(9714),s(1058),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),rt=s.hmd(rt),function(nt){var ot,ht="",dt="function",pt="undefined",lt="object",mt="string",st="major",ut="model",ft="name",yt="type",vt="vendor",St="version",xt="architecture",Ut="console",Tt="mobile",kt="tablet",Dt="smarttv",Vt="wearable",Ot="embedded",Lt="user-agent",Gt="brands",tn="formFactor",zt="fullVersionList",cn="platform",un="platformVersion",fn="bitness",vn=[Gt,zt,Tt,ut,cn,un,xt,tn,fn],Ft="browser",pn="cpu",gn="device",Tn="engine",In="os",kn="result",Nn="Amazon",hn="Apple",Sn="ASUS",Rn="BlackBerry",wn="Google",xn="Huawei",Xn="LG",Ln="Microsoft",Un="Motorola",rr="Samsung",tr="Sharp",Qn="Sony",jn="Xiaomi",Bn="Zebra",an="Facebook",zn="Windows",Kn=et(nt)!==pt,An=Kn&&nt.navigator?nt.navigator:void 0,_n=An&&An.userAgentData?An.userAgentData:void 0,On=function(En){for(var Wn={},Fn=0;Fn<En.length;Fn++)Wn[En[Fn].toUpperCase()]=En[Fn];return Wn},Pn=function(En,Wn){if(et(En)===lt&&En.length>0){for(var Fn in En)if($n(En[Fn])==$n(Wn))return!0;return!1}return!!ir(En)&&$n(Wn).indexOf($n(En))!==-1},Vn=function(En){for(var Wn in En)return/^(browser|cpu|device|engine|os)$/.test(Wn)},ir=function(En){return et(En)===mt},Mn=function(En){if(En){for(var Wn=[],Fn=it(/\\?\"/g,En).split(","),ar=0;ar<Fn.length;ar++)if(Fn[ar].indexOf(";")>-1){var or=bt(Fn[ar]).split(";v=");Wn[ar]={brand:or[0],version:or[1]}}else Wn[ar]=Fn[ar];return Wn}},$n=function(En){return ir(En)?En.toLowerCase():En},Kt=function(En){return ir(En)?it(/[^\d\.]/g,En).split(".")[0]:void 0},At=function(En){for(var Wn in En){var Fn=En[Wn];et(Fn)==lt&&Fn.length==2?this[Fn[0]]=Fn[1]:this[Fn]=void 0}return this},it=function(En,Wn){return ir(Wn)?Wn.replace(En,ht):Wn},Rt=function(En){return it(/\\?\"/g,En)},bt=function(En,Wn){if(ir(En))return En=it(/^\s\s*/,En),et(Wn)===pt?En:En.substring(0,500)},wt=function(En,Wn){if(En&&Wn)for(var Fn,ar,or,nr,ur,mr,wr=0;wr<Wn.length&&!ur;){var Jn=Wn[wr],er=Wn[wr+1];for(Fn=ar=0;Fn<Jn.length&&!ur&&Jn[Fn];)if(ur=Jn[Fn++].exec(En))for(or=0;or<er.length;or++)mr=ur[++ar],et(nr=er[or])===lt&&nr.length>0?nr.length===2?et(nr[1])==dt?this[nr[0]]=nr[1].call(this,mr):this[nr[0]]=nr[1]:nr.length===3?et(nr[1])!==dt||nr[1].exec&&nr[1].test?this[nr[0]]=mr?mr.replace(nr[1],nr[2]):void 0:this[nr[0]]=mr?nr[1].call(this,mr,nr[2]):void 0:nr.length===4&&(this[nr[0]]=mr?nr[3].call(this,mr.replace(nr[1],nr[2])):void 0):this[nr]=mr||void 0;wr+=2}},Et=function(En,Wn){for(var Fn in Wn)if(et(Wn[Fn])===lt&&Wn[Fn].length>0){for(var ar=0;ar<Wn[Fn].length;ar++)if(Pn(Wn[Fn][ar],En))return Fn==="?"?void 0:Fn}else if(Pn(Wn[Fn],En))return Fn==="?"?void 0:Fn;return Wn.hasOwnProperty("*")?Wn["*"]:En},Mt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Nt={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:["VR","XR","Watch"],"?":["Desktop","Unknown"],"*":void 0},Yt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[St,[ft,"Mobile Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[St,[ft,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ft,St],[/opios[\/ ]+([\w\.]+)/i],[St,[ft,"Opera Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[St,[ft,"Opera GX"]],[/\bopr\/([\w\.]+)/i],[St,[ft,"Opera"]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[St,[ft,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[ft,St],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[St,[ft,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[St,[ft,"WeChat"]],[/konqueror\/([\w\.]+)/i],[St,[ft,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[St,[ft,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[St,[ft,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[St,[ft,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[ft,/(.+)/,"$1 Secure Browser"],St],[/\bfocus\/([\w\.]+)/i],[St,[ft,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[St,[ft,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[St,[ft,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[St,[ft,"Dolphin"]],[/coast\/([\w\.]+)/i],[St,[ft,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[St,[ft,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[St,[ft,"Mobile Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ft,"360 Browser"]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[ft,/(.+)/,"$1 Browser"],St],[/samsungbrowser\/([\w\.]+)/i],[St,[ft,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[ft,/_/g," "],St],[/metasr[\/ ]?([\d\.]+)/i],[St,[ft,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[ft,"Sogou Mobile"],St],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[ft,St],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[ft],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ft,an],St],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[ft,St],[/\bgsa\/([\w\.]+) .*safari\//i],[St,[ft,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[St,[ft,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[St,[ft,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ft,"Chrome WebView"],St],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[St,[ft,"Android Browser"]],[/chrome\/([\w\.]+) mobile/i],[St,[ft,"Mobile Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ft,St],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[St,[ft,"Mobile Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[ft,"Mobile Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[St,ft],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ft,[St,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[ft,St],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[ft,"Mobile Firefox"],St],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ft,"Netscape"],St],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[St,[ft,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[ft,St],[/(cobalt)\/([\w\.]+)/i],[ft,[St,/[^\d\.]+./,ht]]],cpu:[[/\b(?:(amd|x|x86[-_]?|wow|win)64)\b/i],[[xt,"amd64"]],[/(ia32(?=;))/i,/((?:i[346]|x)86)[;\)]/i],[[xt,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[xt,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[xt,"armhf"]],[/windows (ce|mobile); ppc;/i],[[xt,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[xt,/ower/,ht,$n]],[/(sun4\w)[;\)]/i],[[xt,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[xt,$n]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ut,[vt,rr],[yt,kt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ut,[vt,rr],[yt,Tt]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ut,[vt,hn],[yt,Tt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ut,[vt,hn],[yt,kt]],[/(macintosh);/i],[ut,[vt,hn]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ut,[vt,tr],[yt,Tt]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ut,[vt,xn],[yt,kt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ut,[vt,xn],[yt,Tt]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ut,/_/g," "],[vt,jn],[yt,Tt]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ut,/_/g," "],[vt,jn],[yt,kt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ut,[vt,"OPPO"],[yt,Tt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ut,[vt,"Vivo"],[yt,Tt]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[ut,[vt,"Realme"],[yt,Tt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ut,[vt,Un],[yt,Tt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ut,[vt,Un],[yt,kt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ut,[vt,Xn],[yt,kt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ut,[vt,Xn],[yt,Tt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ut,[vt,"Lenovo"],[yt,kt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ut,/_/g," "],[vt,"Nokia"],[yt,Tt]],[/(pixel c)\b/i],[ut,[vt,wn],[yt,kt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ut,[vt,wn],[yt,Tt]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ut,[vt,Qn],[yt,Tt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ut,"Xperia Tablet"],[vt,Qn],[yt,kt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ut,[vt,"OnePlus"],[yt,Tt]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ut,[vt,Nn],[yt,kt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ut,/(.+)/g,"Fire Phone $1"],[vt,Nn],[yt,Tt]],[/(playbook);[-\w\),; ]+(rim)/i],[ut,vt,[yt,kt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ut,[vt,Rn],[yt,Tt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ut,[vt,Sn],[yt,kt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ut,[vt,Sn],[yt,Tt]],[/(nexus 9)/i],[ut,[vt,"HTC"],[yt,kt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[vt,[ut,/_/g," "],[yt,Tt]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ut,[vt,"Acer"],[yt,kt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ut,[vt,"Meizu"],[yt,Tt]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[ut,[vt,"Ulefone"],[yt,Tt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[vt,ut,[yt,Tt]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[vt,ut,[yt,kt]],[/(surface duo)/i],[ut,[vt,Ln],[yt,kt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ut,[vt,"Fairphone"],[yt,Tt]],[/(shield[\w ]+) b/i],[ut,[vt,"Nvidia"],[yt,kt]],[/(sprint) (\w+)/i],[vt,ut,[yt,Tt]],[/(kin\.[onetw]{3})/i],[[ut,/\./g," "],[vt,Ln],[yt,Tt]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ut,[vt,Bn],[yt,kt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ut,[vt,Bn],[yt,Tt]],[/smart-tv.+(samsung)/i],[vt,[yt,Dt]],[/hbbtv.+maple;(\d+)/i],[[ut,/^/,"SmartTV"],[vt,rr],[yt,Dt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[vt,Xn],[yt,Dt]],[/(apple) ?tv/i],[vt,[ut,"Apple TV"],[yt,Dt]],[/crkey/i],[[ut,"Chromecast"],[vt,wn],[yt,Dt]],[/droid.+aft(\w+)( bui|\))/i],[ut,[vt,Nn],[yt,Dt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ut,[vt,tr],[yt,Dt]],[/(bravia[\w ]+)( bui|\))/i],[ut,[vt,Qn],[yt,Dt]],[/(mitv-\w{5}) bui/i],[ut,[vt,jn],[yt,Dt]],[/Hbbtv.*(technisat) (.*);/i],[vt,ut,[yt,Dt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[vt,bt],[ut,bt],[yt,Dt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[yt,Dt]],[/(ouya)/i,/(nintendo) (\w+)/i],[vt,ut,[yt,Ut]],[/droid.+; (shield) bui/i],[ut,[vt,"Nvidia"],[yt,Ut]],[/(playstation \w+)/i],[ut,[vt,Qn],[yt,Ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ut,[vt,Ln],[yt,Ut]],[/((pebble))app/i],[vt,ut,[yt,Vt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ut,[vt,hn],[yt,Vt]],[/droid.+; (glass) \d/i],[ut,[vt,wn],[yt,Vt]],[/droid.+; (wt63?0{2,3})\)/i],[ut,[vt,Bn],[yt,Vt]],[/(quest( 2| pro)?)/i],[ut,[vt,an],[yt,Vt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[vt,[yt,Ot]],[/(aeobc)\b/i],[ut,[vt,Nn],[yt,Ot]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[ut,[yt,Tt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ut,[yt,kt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[yt,kt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[yt,Tt]],[/(android[-\w\. ]{0,9});.+buil/i],[ut,[vt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[St,[ft,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[St,[ft,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[ft,St],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[St,ft]],os:[[/microsoft (windows) (vista|xp)/i],[ft,St],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[ft,[St,Et,Mt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[St,Et,Mt],[ft,zn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[St,/_/g,"."],[ft,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ft,"macOS"],[St,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[St,ft],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ft,St],[/\(bb(10);/i],[St,[ft,Rn]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[St,[ft,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[St,[ft,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[St,[ft,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[St,[ft,"watchOS"]],[/crkey\/([\d\.]+)/i],[St,[ft,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[ft,"Chrome OS"],St],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ft,St],[/(sunos) ?([\w\.\d]*)/i],[[ft,"Solaris"],St],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[ft,St]]},Qt=(At.call((ot={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[Ft,[ft,St,st]],[pn,[xt]],[gn,[yt,ut,vt]],[Tn,[ft,St]],[In,[ft,St]]]),At.call(ot.isIgnore,[[Ft,[St,st]],[Tn,[St]],[In,[St]]]),At.call(ot.isIgnoreRgx,[[Ft,/ ?browser$/i],[In,/ ?os$/i]]),At.call(ot.toString,[[Ft,[ft,St]],[pn,[xt]],[gn,[vt,ut]],[Tn,[ft,St]],[In,[ft,St]]]),ot),on=function(En,Wn){var Fn=Qt.init[Wn],ar=Qt.isIgnore[Wn]||0,or=Qt.isIgnoreRgx[Wn]||0,nr=Qt.toString[Wn]||0;function ur(){At.call(this,Fn)}return ur.prototype.getItem=function(){return En},ur.prototype.withClientHints=function(){return _n?_n.getHighEntropyValues(vn).then(function(mr){return En.setCH(new nn(mr,!1)).parseCH().get()}):En.parseCH().get()},ur.prototype.withFeatureCheck=function(){return En.detectFeature().get()},Wn!=kn&&(ur.prototype.is=function(mr){var wr=!1;for(var Jn in this)if(this.hasOwnProperty(Jn)&&!Pn(ar,Jn)&&$n(or?it(or,this[Jn]):this[Jn])==$n(or?it(or,mr):mr)){if(wr=!0,mr!=pt)break}else if(mr==pt&&wr){wr=!wr;break}return wr},ur.prototype.toString=function(){var mr=ht;for(var wr in nr)et(this[nr[wr]])!==pt&&(mr+=(mr?" ":ht)+this[nr[wr]]);return mr||pt}),_n||(ur.prototype.then=function(mr){var wr=this,Jn=function(){for(var hr in wr)wr.hasOwnProperty(hr)&&(this[hr]=wr[hr])};Jn.prototype={is:ur.prototype.is,toString:ur.prototype.toString};var er=new Jn;return mr(er),er}),new ur};function nn(En,Wn){if(En=En||{},At.call(this,vn),Wn)At.call(this,[[Gt,Mn(En["sec-ch-ua"])],[zt,Mn(En["sec-ch-ua-full-version-list"])],[Tt,/\?1/.test(En["sec-ch-ua-mobile"])],[ut,Rt(En["sec-ch-ua-model"])],[cn,Rt(En["sec-ch-ua-platform"])],[un,Rt(En["sec-ch-ua-platform-version"])],[xt,Rt(En["sec-ch-ua-arch"])],[tn,Mn(En["sec-ch-ua-form-factor"])],[fn,Rt(En["sec-ch-ua-bitness"])]]);else for(var Fn in En)this.hasOwnProperty(Fn)&&et(En[Fn])!==pt&&(this[Fn]=En[Fn])}function dn(En,Wn,Fn,ar){return this.get=function(or){return or?this.data.hasOwnProperty(or)?this.data[or]:void 0:this.data},this.set=function(or,nr){return this.data[or]=nr,this},this.setCH=function(or){return this.uaCH=or,this},this.detectFeature=function(){if(An&&An.userAgent==this.ua)switch(this.itemType){case Ft:An.brave&&et(An.brave.isBrave)==dt&&this.set(ft,"Brave");break;case gn:!this.get(yt)&&_n&&_n.mobile&&this.set(yt,Tt),this.get(ut)=="Macintosh"&&An&&et(An.standalone)!==pt&&An.maxTouchPoints&&An.maxTouchPoints>2&&this.set(ut,"iPad").set(yt,kt);break;case In:!this.get(ft)&&_n&&_n.platform&&this.set(ft,_n.platform);break;case kn:var or=this.data,nr=function(ur){return or[ur].getItem().detectFeature().get()};this.set(Ft,nr(Ft)).set(pn,nr(pn)).set(gn,nr(gn)).set(Tn,nr(Tn)).set(In,nr(In))}return this},this.parseUA=function(){return this.itemType!=kn&&wt.call(this.data,this.ua,this.rgxMap),this.itemType==Ft&&this.set(st,Kt(this.get(St))),this},this.parseCH=function(){var or=this.uaCH,nr=this.rgxMap;switch(this.itemType){case Ft:var ur=or[zt]||or.brands;if(ur)for(var mr in ur){var wr=ur[mr].brand||ur[mr],Jn=ur[mr].version;!/not.a.brand/i.test(wr)&&(mr<1||/chromi/i.test(this.get(ft)))&&this.set(ft,it("Google ",wr)).set(St,Jn).set(st,Kt(Jn))}break;case pn:var er=or.architecture;er&&(er&&or.bitness=="64"&&(er+="64"),wt.call(this.data,er+";",nr));break;case gn:if(or.mobile&&this.set(yt,Tt),or.model&&this.set(ut,or.model),or.formFactor){var hr;if(typeof or.formFactor!="string")for(var Sr=0;!hr&&Sr<or.formFactor.length;)hr=Et(or.formFactor[Sr++],Nt);else hr=Et(or.formFactor,Nt);this.set(yt,hr)}break;case In:var yr=or.platform;if(yr){var Pr=or[un];yr==zn&&(Pr=parseInt(Kt(Pr),10)>=13?"11":"10"),this.set(ft,yr).set(St,Pr)}break;case kn:var jr=this.data,Zn=function(fr){return jr[fr].getItem().setCH(or).parseCH().get()};this.set(Ft,Zn(Ft)).set(pn,Zn(pn)).set(gn,Zn(gn)).set(Tn,Zn(Tn)).set(In,Zn(In))}return this},At.call(this,[["itemType",En],["ua",Wn],["uaCH",ar],["rgxMap",Fn],["data",on(this,En)]]),this}function yn(En,Wn,Fn){if(et(En)===lt?(Vn(En)?(et(Wn)===lt&&(Fn=Wn),Wn=En):(Fn=En,Wn=void 0),En=void 0):et(En)!==mt||Vn(Wn)||(Fn=Wn,Wn=void 0),!(this instanceof yn))return new yn(En,Wn,Fn).getResult();var ar=et(En)===mt?En:An&&An.userAgent?An.userAgent:Fn&&Fn[Lt]?Fn[Lt]:ht,or=new nn(Fn,!0),nr=Wn?function(mr,wr){var Jn={};for(var er in mr)Jn[er]=wr[er]&&wr[er].length%2==0?wr[er].concat(mr[er]):mr[er];return Jn}(Yt,Wn):Yt,ur=function(mr){return mr==kn?function(){return new dn(mr,ar,nr,or).set("ua",ar).set(Ft,this.getBrowser()).set(pn,this.getCPU()).set(gn,this.getDevice()).set(Tn,this.getEngine()).set(In,this.getOS()).get()}:function(){return new dn(mr,ar,nr[mr],or).parseUA().get()}};return At.call(this,[["getBrowser",ur(Ft)],["getCPU",ur(pn)],["getDevice",ur(gn)],["getEngine",ur(Tn)],["getOS",ur(In)],["getResult",ur(kn)],["getUA",function(){return ar}],["setUA",function(mr){return ir(mr)&&(ar=mr.length>500?bt(mr,500):mr),this}]]).setUA(ar),this}yn.VERSION="2.0.0-beta.1",yn.BROWSER=On([ft,St,st]),yn.CPU=On([xt]),yn.DEVICE=On([ut,vt,yt,Ut,Tt,Dt,kt,Vt,Ot]),yn.ENGINE=yn.OS=On([ft,St]),et(o)!==pt?(et(rt)!==pt&&rt.exports&&(o=rt.exports=yn),o.UAParser=yn,nt.UAParser=yn):Kn&&(nt.UAParser=yn);var mn=Kn&&(nt.jQuery||nt.Zepto);if(mn&&!mn.ua){var Cn=new yn;mn.ua=Cn.getResult(),mn.ua.get=function(){return Cn.getUA()},mn.ua.set=function(En){Cn.setUA(En);var Wn=Cn.getResult();for(var Fn in Wn)mn.ua[Fn]=Wn[Fn]}}}((typeof window>"u"?"undefined":et(window))==="object"?window:void 0)},1256:(rt,at,s)=>{s.r(at),s.d(at,{Call:()=>mr,CloudApi:()=>dp,Conference:()=>Fs,Contact:()=>Uo,Conversation:()=>Bo,ConversationCall:()=>Gl,DataChannel:()=>ys,Enterprise:()=>Xs,EventCenter:()=>kt,EventEmitter:()=>dt,MediaDevice:()=>Ot,Observable:()=>un,PointerSharingRoom:()=>ru,ReceivedCallInvitation:()=>xr,ReceivedConversationInvitation:()=>wt,ReceivedConversationJoinRequest:()=>Go,ReceivedDataChannelInvitation:()=>No,ReceivedFileTransferInvitation:()=>eo,ReceivedInvitation:()=>Pn,ReceivedPointerSharingInvitation:()=>Ml,ReceivedWhiteboardInvitation:()=>vs,SentInvitation:()=>Lo,Session:()=>qr,Stream:()=>lo,UserAgent:()=>lp,UserData:()=>Io,default:()=>wm}),s(7941),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(3173);function nt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function ot(Wt){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},ot(Wt)}function ht(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}s(4603),s(4916),s(9714),s(7042),s(561),s(9070),s(8309),s(1038),s(9753);var dt=function(){function Wt(){(function(Pt,Bt){if(!(Pt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt)}var $t,Zt;return $t=Wt,Zt=[{key:"getListeners",value:function(Pt){var Bt,sn,ln=this._getEvents();if(Pt instanceof RegExp)for(sn in Bt={},ln)ln.hasOwnProperty(sn)&&Pt.test(sn)&&(Bt[sn]=ln[sn]);else Bt=ln[Pt]||(ln[Pt]=[]);return Bt}},{key:"flattenListeners",value:function(Pt){var Bt,sn=[];for(Bt=0;Bt<Pt.length;Bt+=1)sn.push(Pt[Bt].listener);return sn}},{key:"getListenersAsObject",value:function(Pt){var Bt,sn=this.getListeners(Pt);return sn instanceof Array&&((Bt={})[Pt]=sn),Bt||sn}},{key:"emit",value:function(Pt){var Bt=Array.prototype.slice.call(arguments,1);return this.emitEvent(Pt,Bt)}},{key:"addListener",value:function(Pt,Bt){if(!st(Bt))throw new TypeError("listener must be a function");var sn,ln=this.getListenersAsObject(Pt),Jt=ot(Bt)==="object";for(sn in ln)ln.hasOwnProperty(sn)&&lt(ln[sn],Bt)===-1&&ln[sn].push(Jt?Bt:{listener:Bt,once:!1});if(Pt==="contactListUpdate"){apiRTC.userAgentInstance.currentSession.contactListUpdateListenerSetted=!0;var Ct,It=function(qt,Xt){var en=typeof Symbol<"u"&&qt[Symbol.iterator]||qt["@@iterator"];if(!en){if(Array.isArray(qt)||(en=function(br,Rr){if(br){if(typeof br=="string")return nt(br,Rr);var Nr=Object.prototype.toString.call(br).slice(8,-1);return Nr==="Object"&&br.constructor&&(Nr=br.constructor.name),Nr==="Map"||Nr==="Set"?Array.from(br):Nr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Nr)?nt(br,Rr):void 0}}(qt))||Xt&&qt&&typeof qt.length=="number"){en&&(qt=en);var rn=0,bn=function(){};return{s:bn,n:function(){return rn>=qt.length?{done:!0}:{done:!1,value:qt[rn++]}},e:function(br){throw br},f:bn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dn,lr=!0,dr=!1;return{s:function(){en=en.call(qt)},n:function(){var br=en.next();return lr=br.done,br},e:function(br){dr=!0,Dn=br},f:function(){try{lr||en.return==null||en.return()}finally{if(dr)throw Dn}}}}(apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent);try{for(It.s();!(Ct=It.n()).done;){var jt=Ct.value;this.emit("contactListUpdate",jt)}}catch(qt){It.e(qt)}finally{It.f()}apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent=[]}else if(Pt==="mediaDeviceChanged"&&apiRTC.mediaDeviceMgr.mediaDeviceChangedDetected===!0){var Ht=apiRTC.mediaDeviceMgr.getMediaDeviceListsDiff(apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);apiRTC.myWebRTC_Event.createMediaDeviceChangedEvent(Ht,"updatedOnDeviceChange",apiRTC.mediaDeviceMgr.realMediaDevicesListInitializationWasAlreadyDone)}return this}},{key:"addOnceListener",value:function(Pt,Bt){return this.addListener(Pt,{listener:Bt,once:!0})}},{key:"defineEvent",value:function(Pt){return this.getListeners(Pt),this}},{key:"defineEvents",value:function(Pt){for(var Bt=0;Bt<Pt.length;Bt+=1)this.defineEvent(Pt[Bt]);return this}},{key:"removeListener",value:function(Pt,Bt){var sn,ln,Jt=this.getListenersAsObject(Pt);for(ln in Jt)Jt.hasOwnProperty(ln)&&(sn=lt(Jt[ln],Bt))!==-1&&Jt[ln].splice(sn,1);return this}},{key:"addListeners",value:function(Pt,Bt){return this.manipulateListeners(!1,Pt,Bt)}},{key:"removeListeners",value:function(Pt,Bt){return this.manipulateListeners(!0,Pt,Bt)}},{key:"manipulateListeners",value:function(Pt,Bt,sn){var ln,Jt,Ct=Pt?this.removeListener:this.addListener,It=Pt?this.removeListeners:this.addListeners;if(ot(Bt)!=="object"||Bt instanceof RegExp)for(ln=sn.length;ln--;)Ct.call(this,Bt,sn[ln]);else for(ln in Bt)Bt.hasOwnProperty(ln)&&(Jt=Bt[ln])&&(typeof Jt=="function"?Ct.call(this,ln,Jt):It.call(this,ln,Jt));return this}},{key:"removeEvent",value:function(Pt){var Bt,sn=ot(Pt),ln=this._getEvents();if(sn==="string")delete ln[Pt];else if(Pt instanceof RegExp)for(Bt in ln)ln.hasOwnProperty(Bt)&&Pt.test(Bt)&&delete ln[Bt];else delete this._events;return this}},{key:"emitEvent",value:function(Pt,Bt){var sn,ln,Jt,Ct,It=this.getListenersAsObject(Pt);for(Ct in It)if(It.hasOwnProperty(Ct))for(sn=It[Ct].slice(0),Jt=0;Jt<sn.length;Jt++)(ln=sn[Jt]).once===!0&&this.removeListener(Pt,ln.listener),ln.listener.apply(this,Bt||[])===this._getOnceReturnValue()&&this.removeListener(Pt,ln.listener);return this}},{key:"setOnceReturnValue",value:function(Pt){return this._onceReturnValue=Pt,this}},{key:"_getOnceReturnValue",value:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue}},{key:"_getEvents",value:function(){return this._events||(this._events={})}}],Zt&&ht($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),pt=dt.prototype,lt=function(Wt,$t){for(var Zt=Wt.length;Zt--;)if(Wt[Zt].listener===$t)return Zt;return-1},mt=function(Wt){return function(){return this[Wt].apply(this,arguments)}},st=function Wt($t){return typeof $t=="function"||$t instanceof RegExp||!(!$t||ot($t)!=="object")&&Wt($t.listener)};pt.on=mt("addListener"),pt.once=mt("addOnceListener"),pt.off=mt("removeListener"),pt.removeAllListeners=mt("removeEvent"),pt.trigger=mt("emitEvent"),s(1249);var ut=s(5945),ft=s(1549),yt=s(4708);ft.Y.get("ApiCC");var vt={description:"ApiRTC Cloud Communication Library",session:null,jsLoaded:!1,initApiKey:null,initApiCCId:null,extJsLoadingRetryNb:null,extJsLoadingRetryDelay:null,bandwidthTestServer:"https://cloud.apizee.com",bandwidthRatingThresholds:[300,500,1e3,1500,2e3],LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,browser:ut.Xh,browser_major_version:ut.PR,browser_version:ut.dc,osName:ut.BF,osVersion:ut.MM,osUAParser:ut.ag,browserInfo:ut.cf,browserDetails:yt.wL,parser:ut.E2,logStorageActivated:!1,logStorageLevel:3,logStorage:[],eventCenter:null,sioEmbedded:!1,apizee_version:"5.0"};function St(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var xt=ft.Y.get("EventCenter"),Ut="eventCenterData",Tt="[REMOTE-EVENTCENTER]",kt=function(){function Wt(){var Pt=this;(function(Bt,sn){if(!(Bt instanceof sn))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.consoleOutputEnabled=!1,this.storageDisabled=!1,typeof apiRTC_React>"u"&&(document.addEventListener("error",function(Bt){Pt.handleErrorEvent(Bt)}),document.addEventListener("userMediaError",function(Bt){Pt.handleErrorEvent(Bt)}))}var $t,Zt;return $t=Wt,Zt=[{key:"handleErrorEvent",value:function(Pt){var Bt=Pt.detail;if(this.storageDisabled!==!0)if(Bt!==void 0){var sn={},ln={},Jt="UNKNOWN";sn.type=Pt.type;for(var Ct=0,It=Object.keys(Bt);Ct<It.length;Ct++){var jt=It[Ct];jt!=="eventType"&&(sn[jt]=Bt[jt])}sn.systemInfo={apiRTC:vt.version,app:ut.$6,device:ut.vO,osName:ut.BF,osVersion:vt.osVersion,browser:ut.Xh,browser_version:ut.dc},vt.session!==null&&vt.session!==void 0?Jt=vt.session.apiCCId:vt.initApiCCId!==null&&vt.initApiCCId!==void 0&&(Jt=vt.initApiCCId),sn.userInfo={apiCCId:Jt,apiKey:apiRTC.initApiKey};var Ht=localStorage.getItem(Ut);(Ht=Ht?JSON.parse(Ht):[]).unshift(sn),Ht.length>100&&Ht.splice(100,Ht.length-100),localStorage.setItem(Ut,JSON.stringify(Ht)),this.consoleOutputEnabled&&xt.error("[EVENTCENTER]",sn),typeof Sentry<"u"&&(Pt.detail.errorCode!=="USER_MEDIA_ERROR"?(ln.type=Pt.type,Pt.detail.error&&(ln.error=Pt.detail.error),Pt.detail.errorInfo&&(ln.errorInfo=Pt.detail.errorInfo),Pt.detail.errorCode&&(ln.errorCode=Pt.detail.errorCode),Pt.detail.callId&&(ln.callId=Pt.detail.callId),Pt.detail.convId&&(ln.convId=Pt.detail.convId),Pt.detail.gumConfig&&(Pt.detail.gumConfig.video===!1?ln.gumConfigVideo=!1:ln.gumConfigVideo=!0),Sentry.withScope(function(qt){qt.setTag("event-center",!0),qt.setTag("userId",vt.session.apiCCId),Sentry.captureException(new Error(JSON.stringify(ln)))})):xt.debug("Filtering error event for USER_MEDIA_ERROR for Sentry"))}else xt.error("Can't handle error event: data is undefined");else xt.debug("Event Center is disabled")}},{key:"handleDataAnswer",value:function(Pt){Pt?Pt.map(function(Bt){xt.debug(Tt+": ",Bt)}):xt.debug(Tt+": "+this.getUsername()+" has no event records")}},{key:"getStoredData",value:function(){var Pt=localStorage.getItem(Ut);return Pt===void 0?(xt.warn("No data was stored by event center"),null):JSON.parse(Pt)}},{key:"clearStoredData",value:function(){localStorage.removeItem(Ut)}},{key:"enableConsoleOutput",value:function(Pt){this.consoleOutputEnabled=Pt}},{key:"disableStorage",value:function(Pt){this.storageDisabled=Pt}}],Zt&&St($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Dt(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}s(3710);var Vt=ft.Y.get("MediaDevice"),Ot=function(){function Wt(Pt,Bt,sn,ln){(function(Jt,Ct){if(!(Jt instanceof Ct))throw new TypeError("Cannot call a class as a function")})(this,Wt),Vt.trace("Create "+Bt+" MediaDevice"),this.id=Pt,this.type=Bt,this.label=sn,this.capabilities=ln}var $t,Zt;return $t=Wt,(Zt=[{key:"getId",value:function(){return this.id.toString()}},{key:"getType",value:function(){return this.type}},{key:"getLabel",value:function(){return this.label}},{key:"isCamera",value:function(){return this.type==="videoinput"}},{key:"isMicrophone",value:function(){return this.type==="audioinput"}},{key:"isAudioOutput",value:function(){return this.type==="audiooutput"}},{key:"getCapabilities",value:function(){return this.capabilities}}])&&Dt($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),Lt=(s(1532),s(4129),s(9653),s(4363),s(2772),s(9554),s(4747),s(8674),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2707),s(2564),s(7327),s(9600),s(5306),s(285),s(1637),s(2479),s(4812),s(2222),s(1058),s(6755),s(4986),s(8304),s(489),s(2419),s(8011),s(2443),s(3680),s(3706),s(2703),s(4819),s(5003),s(1215));function Gt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function tn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var zt=new WeakMap,cn=new WeakMap,un=function(){function Wt(Bt){(function(sn,ln){if(!(sn instanceof ln))throw new TypeError("Cannot call a class as a function")})(this,Wt),cn.set(this,Bt),zt.set(this,new dt)}var $t,Zt,Pt;return $t=Wt,Pt=[{key:"getAvailableEvents",value:function(){return[]}}],(Zt=[{key:"on",value:function(Bt,sn){return this.constructor.getAvailableEvents().indexOf(Bt)>-1?zt.get(this).on(Bt,sn):cn.get(this).error("No such event "+Bt),this}},{key:"removeListener",value:function(Bt,sn){if(this.constructor.getAvailableEvents().indexOf(Bt)>-1){var ln,Jt=!1,Ct=function(It,jt){var Ht=typeof Symbol<"u"&&It[Symbol.iterator]||It["@@iterator"];if(!Ht){if(Array.isArray(It)||(Ht=function(Dn,lr){if(Dn){if(typeof Dn=="string")return Gt(Dn,lr);var dr=Object.prototype.toString.call(Dn).slice(8,-1);return dr==="Object"&&Dn.constructor&&(dr=Dn.constructor.name),dr==="Map"||dr==="Set"?Array.from(Dn):dr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dr)?Gt(Dn,lr):void 0}}(It))||jt&&It&&typeof It.length=="number"){Ht&&(It=Ht);var qt=0,Xt=function(){};return{s:Xt,n:function(){return qt>=It.length?{done:!0}:{done:!1,value:It[qt++]}},e:function(Dn){throw Dn},f:Xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var en,rn=!0,bn=!1;return{s:function(){Ht=Ht.call(It)},n:function(){var Dn=Ht.next();return rn=Dn.done,Dn},e:function(Dn){bn=!0,en=Dn},f:function(){try{rn||Ht.return==null||Ht.return()}finally{if(bn)throw en}}}}(zt.get(this).getListeners(Bt));try{for(Ct.s();!(ln=Ct.n()).done;)if(ln.value.listener===sn){Jt=!0;break}}catch(It){Ct.e(It)}finally{Ct.f()}Jt?zt.get(this).off(Bt,sn):cn.get(this).trace("removeListener() - No such listener for event "+Bt)}else cn.get(this).error("No such event "+Bt);return this}}])&&tn($t.prototype,Zt),Pt&&tn($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function fn(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return vn(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?vn(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function vn(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Ft(Wt){return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Ft(Wt)}function pn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}s(6699),s(2023),s(3843);var gn=ft.Y.get("ApiRTCManager"),Tn=["sessionReady","incomingCall","callEstablished","userMediaSuccess","userMediaStop","userMediaError","callRestarting","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onQosVideoChange","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","MCUParticipantEjected","MCUStreamingStarted","MCUStreamingStopped","MCUAvailableReplay","MCURoomModeChanged","onCallStatsUpdate","slowLink","localStreamUpdated","remoteStreamUpdated","audioAmplitude","videoQualityChanged","cpuLimited","bandwidthLimited","simulcastFeedChanged","cloudEventOccurred","groupUnsubscribed","transferBegun","transferProgress","transferEnded"],In=null,kn=!1,Nn=!1,hn=function(Wt){if(In!==null&&In.isInitialized()){if(Wt==="groupUnsubscribed"||Wt==="transferBegun"||Wt==="transferProgress"||Wt==="transferEnded")return;apiRTC.addEventListener(Wt,function($t){gn.trace("Emiting "+Wt,$t),In.eventEmitter.emit(Wt,$t)})}},Sn=function(Wt){In!==null&&In.isInitialized()&&apiRTC.removeEventListener(Wt,function($t){gn.trace("Emiting "+Wt,$t),In.eventEmitter.emit(Wt,$t)})},Rn=function(){function Wt(){if(function(Bt,sn){if(!(Bt instanceof sn))throw new TypeError("Cannot call a class as a function")}(this,Wt),In!==null)throw"Cannot construct singleton ApiRTCManager";this.eventEmitter=new dt,this.apiRTCSession=null,this.whiteBoardClient=null,this.pointerSharingClient=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,this.contactDisconnectionDelay=et.g.CONTACT_DISCONNECTION_DELAY,In=this}var $t,Zt,Pt;return $t=Wt,Zt=[{key:"onEvent",value:function(Bt,sn){return Tn.indexOf(Bt)>-1?this.eventEmitter.on(Bt,sn):gn.error("No such apiRTC event "+Bt),this}},{key:"onceEvent",value:function(Bt,sn){Tn.indexOf(Bt)>-1?this.eventEmitter.once(Bt,sn):gn.error("No such apiRTC event "+Bt)}},{key:"sendData",value:function(Bt,sn){var ln=this;return new Promise(function(Jt,Ct){ln.dataClient===null?Ct(et.g.ERROR_APIRTC_INITIALISATION_FAILED):ln.dataClient.sendData(Bt,sn,function(It){var jt=et.g.ERROR_OTHER;It!=null?It.reason!=="timeoutReached"&&It.reason!=="destNotFound"?Jt():(It.reason==="timerReached"?jt=et.g.ERROR_TIMED_OUT:It.reason==="destNotFound"&&(jt=et.g.ERROR_NOT_FOUND),Ct(jt)):Ct(jt)})})}},{key:"sendMessage",value:function(Bt,sn){var ln=this,Jt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,It){ln.IMClient===null?It(et.g.ERROR_APIRTC_INITIALISATION_FAILED):ln.IMClient.sendMessage(Bt,sn,function(jt){var Ht=et.g.ERROR_OTHER;jt!=null?jt.reason!=="timeoutReached"&&jt.reason!=="destNotFound"?Ct(jt.UUCSeq):(jt.reason==="timerReached"?Ht=et.g.ERROR_TIMED_OUT:jt.reason==="destNotFound"&&(Ht=et.g.ERROR_NOT_FOUND),It(Ht)):It(Ht)},Jt)})}},{key:"joinGroupChat",value:function(Bt){var sn=this;return new Promise(function(ln,Jt){if(sn.IMClient===null)return Jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat"));sn.IMClient.joinGroupChat(Bt),ln()})}},{key:"leaveGroupChat",value:function(Bt){var sn=this;return new Promise(function(ln,Jt){if(sn.IMClient===null)return Jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - cannot leave group chat"));sn.IMClient.leaveGroupChat(Bt),ln()})}},{key:"sendMessageToGroupChat",value:function(Bt,sn){var ln=this,Jt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,It){if(ln.IMClient===null)It(et.g.ERROR_APIRTC_INITIALISATION_FAILED);else{var jt={};Lt.g.isTypeof(Jt,"metadata","object")&&(jt.metadata=Jt.metadata),ln.IMClient.sendMessageToGroupChat(Bt,sn,function(Ht){return Ht!==null&&Ft(Ht)==="object"?Ht.reason==="ack"?Ct(Ht.UUCSeq):Ht.reason==="timeoutReached"?It(et.g.ERROR_TIMED_OUT):Ht.reason==="destNotFound"?It(et.g.ERROR_NOT_FOUND):It(et.g.ERROR_OTHER):It(et.g.ERROR_OTHER)},jt)}})}},{key:"removeEventListener",value:function(Bt,sn){sn!=null&&(Tn.indexOf(Bt)>-1?this.eventEmitter.off(Bt,sn):gn.error("No such apiRTC event "+Bt))}},{key:"isInitialized",value:function(){return kn}},{key:"unsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.unsubscribePresenceGroup([Bt]),In.eventEmitter.emit("groupUnsubscribed",Bt)):gn.error("apiRTC session is not initialized")}},{key:"joinAndSubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.joinPresenceGroup([Bt]),this.apiRTCSession.subscribePresenceGroup([Bt])):gn.error("apiRTC session is not initialized")}},{key:"leaveAndUnsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.leavePresenceGroup([Bt]),this.unsubscribeToPresenceGroup(Bt)):gn.error("apiRTC session is not initialized")}},{key:"subscribeToCloudEvent",value:function(Bt,sn){this.apiRTCSession?this.apiRTCSession.subscribeToCloudEvent(Bt,sn):gn.error("apiRTC session is not initialized")}},{key:"unsubscribeToCloudEvent",value:function(Bt,sn){this.apiRTCSession?this.apiRTCSession.unsubscribeToCloudEvent(Bt,sn):gn.error("apiRTC session is not initialized")}},{key:"disconnect",value:function(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(apiRTC.disconnect(Bt),kn=!1,this.apiRTCSession=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,Nn){var sn,ln=fn(Tn);try{for(ln.s();!(sn=ln.n()).done;){var Jt=sn.value;Sn(Jt)}}catch(Ct){ln.e(Ct)}finally{ln.f()}Nn=!1}}},{key:"initializeApiRTC",value:function(Bt){return gn.info("initializeApiRTC()"),new Promise(function(sn,ln){if(Bt===void 0||Bt.apiKey===void 0)ln("Invalid apiRTC initialization params");else{var Jt=function(Ct){switch(gn.debug("onChannelEventDuringInit()",Ct.detail),Ct.detail.channelEvent){case"onChannelError":ln("Channel Error : "+Ct.detail.event);break;case"onChannelConnectError":ln("Channel Connect Error : "+Ct.detail.event);break;case"onChannelOpened":gn.debug("onChannelOpened");break;default:gn.debug("Unhandle case in onChannelEventDuringInit :",Ct.detail.channelEvent)}};apiRTC.addEventListener("channelEvent",Jt),Bt.onReady=function(){if(kn=!0,In.webRTCClient=apiRTC.session.createWebRTCClient({}),In.webRTCClient.setMCUConnector(Bt.hasOwnProperty("mcu")?Bt.mcu:et.g.DEFAULT_MCU),Lt.g.isPropertyTypeof(Bt,"turnServerAddress","string")&&In.webRTCClient.setClientTurnServer(Bt.turnServerAddress),In.webRTCClient.setUserAcceptOnIncomingCallBeforeGetUserMedia(!0),Lt.g.isPropertyTypeof(Bt,"userAcceptOnIncomingDataCall","boolean")?In.webRTCClient.setUserAcceptOnIncomingDataCall(Bt.userAcceptOnIncomingDataCall):In.webRTCClient.setUserAcceptOnIncomingDataCall(!0),Lt.g.isPropertyTypeof(Bt,"userAcceptOnIncomingScreenSharingCall","boolean")?In.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(Bt.userAcceptOnIncomingScreenSharingCall):In.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(!1),In.dataClient=apiRTC.session.createDataClient(),In.IMClient=apiRTC.session.createIMClient(),In.pointerSharingClient=apiRTC.session.createPointerSharingClient(),In.webRTCClient.setAllowMultipleCalls(!0),In.apiRTCSession=apiRTC.session,!Nn){var Ct,It=fn(Tn);try{for(It.s();!(Ct=It.n()).done;){var jt=Ct.value;hn(jt)}}catch(Ht){It.e(Ht)}finally{It.f()}Nn=!0}apiRTC.removeEventListener("channelEvent",Jt),sn(apiRTC.session.apiCCId)},kn=!1,In.apiRTCSession=null,In.webRTCClient=null,In.dataClient=null,In.IMClient=null,apiRTC.init(Bt)}})}},{key:"createWhiteBoard",value:function(){gn.debug("createWhiteBoard()"),In.whiteBoardClient=apiRTC.createWhiteBoard(null,"invisible",null,6e4)}},{key:"getMediaDevices",value:function(){return gn.debug("ApiRTCManager::getMediaDevices()"),new Promise(function(Bt,sn){apiRTC.getMediaDevices().then(function(ln){gn.debug("ApiRTCManager::getMediaDevices(), sources :",ln),Bt(ln)}).catch(function(ln){var Jt="getMediaDevices() - error";gn.error(Jt,ln),sn(new Error(Jt))})})}},{key:"getUserMedia",value:function(Bt){return new Promise(function(sn,ln){apiRTC.getUserMedia(Bt).then(function(Jt){gn.debug("ApiRTCManager::getUserMedia() success"),sn(Jt)}).catch(function(Jt){gn.error("ApiRTCManager::getUserMedia() - Could not get user media :",Jt),ln(new Error("ApiRTCManager::getUserMedia() - Could not get user media :"+Jt))})})}},{key:"setAudioSourceIdInConstraint",value:function(Bt,sn){return apiRTC.setAudioSourceIdInConstraint(Bt,sn)}},{key:"setVideoSourceIdInConstraint",value:function(Bt,sn){return apiRTC.setVideoSourceIdInConstraint(Bt,sn)}},{key:"attachMediaStream",value:function(Bt,sn){apiRTC.attachMediaStream(Bt,sn)}},{key:"addStreamInDiv",value:function(Bt,sn,ln,Jt,Ct,It,jt){apiRTC.addStreamInDiv(Bt,sn,ln,Jt,Ct,It,jt)}},{key:"removeElementFromDiv",value:function(Bt,sn){gn.debug("removeElementFromDiv"),apiRTC.removeElementFromDiv(Bt,sn)}},{key:"getClientId",value:function(){return this.apiRTCSession!==null&&this.apiRTCSession.apiCCWebRTCClient!==null?this.apiRTCSession.apiCCWebRTCClient.webRTCClient.clientId:null}},{key:"getActiveApiKey",value:function(){return apiRTC.session!==void 0&&apiRTC.session!==null?apiRTC.session.apiKey:null}}],Pt=[{key:"get",value:function(){return In===null&&(In=new Wt),In}}],Zt&&pn($t.prototype,Zt),Pt&&pn($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function wn(Wt){return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},wn(Wt)}function xn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Xn(Wt,$t){return Xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Xn(Wt,$t)}function Ln(Wt,$t){if($t&&(wn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Un(Wt)}function Un(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function rr(Wt){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},rr(Wt)}var tr=ft.Y.get("Invitation"),Qn=new WeakMap,jn=["statusChange"],Bn=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Xn(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=rr(Bt);if(sn){var jt=rr(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Ln(this,Ct)});function Jt(){var Ct;return function(It,jt){if(!(It instanceof jt))throw new TypeError("Cannot call a class as a function")}(this,Jt),(Ct=ln.call(this,tr)).id=null,Qn.set(Un(Ct),et.g.INVITATION_STATUS_STANDBY),Ct.apiRTCManager=Rn.get(),Ct.type="not_defined",Ct}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return jn}}],(Zt=[{key:"setStatus",value:function(Ct){Qn.set(this,Ct),zt.get(this).emit("statusChange",{status:Ct,id:this.id})}},{key:"getStatus",value:function(){return Qn.get(this)}}])&&xn($t.prototype,Zt),Pt&&xn($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un);function an(Wt){return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},an(Wt)}function zn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Kn(Wt,$t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Kn(Wt,$t)}function An(Wt,$t){if($t&&(an($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function _n(Wt){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},_n(Wt)}ft.Y.get("ReceivedInvitation");var On=["statusChange","messageDelivered","messageNotDelivered"],Pn=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Kn(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=_n(Bt);if(sn){var jt=_n(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return An(this,Ct)});function Jt(Ct,It){var jt;return function(Ht,qt){if(!(Ht instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Jt),(jt=ln.call(this)).invitationType="received",jt.id=It,jt.sender=Ct,jt.receiveTime=Date.now(),jt}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return On}}],(Zt=[{key:"accept",value:function(){return new Promise}},{key:"decline",value:function(Ct){}},{key:"getSender",value:function(){return this.sender}},{key:"getReceiveTime",value:function(){return this.receiveTime}},{key:"getId",value:function(){return this.id}}])&&zn($t.prototype,Zt),Pt&&zn($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Bn);function Vn(Wt){return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Vn(Wt)}function ir(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Mn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function $n(Wt,$t){return $n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},$n(Wt,$t)}function Kt(Wt,$t){if($t&&(Vn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(Wt)}function At(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function it(Wt){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},it(Wt)}var Rt=ft.Y.get("ReceivedInvitation"),bt=new WeakMap,wt=function(Wt){(function(Jt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),Ct&&$n(Jt,Ct)})(ln,Wt);var $t,Zt,Pt,Bt,sn=(Pt=ln,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Jt,Ct=it(Pt);if(Bt){var It=it(this).constructor;Jt=Reflect.construct(Ct,arguments,It)}else Jt=Ct.apply(this,arguments);return Kt(this,Jt)});function ln(Jt,Ct,It){var jt,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return ir(this,ln),jt=sn.call(this,Jt,Ct.invitationId),Rt.info("Create ReceivedConversationInvitation"),jt.conversation=It,jt.type="conversation",jt.invitationData=Ct,bt.set(At(jt),Ht),jt}return $t=ln,Zt=[{key:"accept",value:function(Jt){var Ct=this,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=function(){return new Promise(function(qt,Xt){var en=bt.get(Ct);It.hasOwnProperty("password")&&(en.password=It.password),It.hasOwnProperty("session")&&(en.session=It.session),Ct.conversation.join(en).then(function(){Jt!=null&&Ct.conversation.publish(Jt),qt(Ct.conversation)}).catch(function(rn){Xt(Lt.g.createError(et.g.ERROR_OTHER,"accept() - cannot join webconf",Rt,{fromError:rn}))})})},Ht=function(){return new Promise(function(qt,Xt){Ct.conversation.joinGroupChat().then(function(){qt(Ct.conversation)}).catch(function(en){Xt(Lt.g.createError(et.g.ERROR_OTHER,"accept() - cannot join groupChat",Rt,{fromError:en}))})})};return new Promise(function(qt,Xt){return Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY?Xt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"accept() - cannot accept invitation",Rt)):(Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"}),Ct.invitationData&&Ct.invitationData.conversationTypes?Ct.invitationData.conversationTypes.indexOf("WEBCONF")>=0?jt().then(qt).catch(Xt):Ct.invitationData.conversationTypes.indexOf("GROUP_CHAT")>=0?Ht().then(qt).catch(Xt):void 0:jt().then(qt).catch(Xt))})}},{key:"decline",value:function(Jt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Jt,answer:"decline"}))}},{key:"getConversation",value:function(){return this.conversation}}],Zt&&Mn($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),ln}(Pn);function Et(Wt){return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Et(Wt)}function Mt(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Nt(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?Nt(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function Nt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Yt(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Qt(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function on(Wt,$t){return on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},on(Wt,$t)}function nn(Wt,$t){if($t&&(Et($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dn(Wt)}function dn(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function yn(Wt){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},yn(Wt)}s(189);var mn=ft.Y.get("Call"),Cn=Rn.get(),En=["streamAdded","streamRemoved","response","accepted","declined","hangup","localStreamAvailable","recordAvailable","statsUpdate","error","disconnectionWarning","userMediaError","desktopCapture","remoteStreamUpdated","recordingStarted","recordingStopped","recordingAvailable","remoteStreamIdUpdated"],Wn=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),Fn=new WeakMap,ar=new WeakMap,or=new WeakMap,nr=new WeakMap,ur=new WeakMap,mr=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&on(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=yn(Bt);if(sn){var jt=yn(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return nn(this,Ct)});function Jt(Ct,It){var jt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Yt(this,Jt),jt=ln.call(this,mn),mn.debug("Create Call with id "+Ct),Fn.set(dn(jt),Ct),ar.set(dn(jt),It),jt.publishedStreams=new Map,jt.receivedStreams=new Map,jt.stats={},or.set(dn(jt),Ht.hasOwnProperty("started")&&Ht.started?et.g.CALL_STATUS_ONGOING:et.g.CALL_STATUS_WAITING_FOR_CALLEE),nr.set(dn(jt),!!Ht.hasOwnProperty("isRecorded")&&Ht.isRecorded),Ht.isRecorded){jt.confId=null,jt.recordingStatus=null;for(var qt=Cn.webRTCClient.webRTCClient.callsTable.length;--qt>=0;){var Xt=Cn.webRTCClient.webRTCClient.callsTable[qt];if(Xt.callId===Ct&&Xt.data){jt.confId=Xt.data.confId;break}}nr.set(dn(jt),!0)}else nr.set(dn(jt),!1);var en={hangup:function(bn){jt.getId()===bn.detail.callId&&jt.destroy()},receiveData:function(bn){if(bn.detail.data.info!==void 0)bn.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&bn.detail.data.invitationId.toString()===jt.getId()&&jt.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&(mn.info("Call answer from "+jt.getContact().getUsername()+" for "+jt.getId()),bn.detail.data.answer==="accept"?(or.set(dn(jt),et.g.CALL_STATUS_ONGOING),zt.get(dn(jt)).emit("accepted"),zt.get(dn(jt)).emit("response","accepted")):(or.set(dn(jt),et.g.CALL_STATUS_ENDED),zt.get(dn(jt)).emit("declined",{reason:"User_Refused_Call"}),zt.get(dn(jt)).emit("response","declined")));else if(jt.getId()===bn.detail.data.callId&&bn.detail.data.event===et.g.CONTACT_STREAM_UPDATED_INFO){var Dn={callId:bn.detail.data.callId,newStreamId:bn.detail.data.newStreamId,oldStreamId:bn.detail.data.oldStreamId};zt.get(dn(jt)).emit("remoteStreamIdUpdated",Dn)}},remoteStreamUpdated:function(bn){if(jt.getId()===bn.detail.callId){var Dn={callId:bn.detail.callId,audio:bn.detail.audioIsAvailable&&bn.detail.audioIsActive,audioMuted:bn.detail.audioIsMuted,audioSilent:bn.detail.audioIsSilent,video:bn.detail.videoIsAvailable&&bn.detail.videoIsActive,videoMuted:bn.detail.videoIsMuted,videoSilent:bn.detail.videoIsSilent};zt.get(dn(jt)).emit("remoteStreamUpdated",Dn)}},MCURecordingStarted:function(bn){if(nr.get(dn(jt))&&bn.detail.roomName===jt.confId){var Dn=Lt.g.parseRecordingEvent("MCURecordingStarted",bn.detail);Dn.callId==="COMPOSITE"&&(jt.recordingStatus=Dn,zt.get(dn(jt)).emit("recordingStarted",Dn))}},MCURecordingStopped:function(bn){if(nr.get(dn(jt))&&bn.detail.roomName===jt.confId){var Dn=Lt.g.parseRecordingEvent("MCURecordingStopped",bn.detail);Dn.callId==="COMPOSITE"&&(delete jt.recordingStatus,zt.get(dn(jt)).emit("recordingStopped",Dn))}},MCURecordedStreamsAvailable:function(bn){if(nr.get(dn(jt))&&bn.detail.roomName===jt.confId){var Dn=Lt.g.parseRecordingEvent("MCURecordedStreamsAvailable",bn.detail);zt.get(dn(jt)).emit("recordingAvailable",Dn)}}};for(var rn in en)Cn.onEvent(rn,en[rn]);return ur.set(dn(jt),en),jt}return $t=Jt,Zt=[{key:"destroy",value:function(){var Ct=ur.get(this);if(Ct){for(var It in Ct)Cn.removeEventListener(It,Ct[It]);ur.delete(this)}}},{key:"getId",value:function(){return Fn.get(this).toString()}},{key:"isRecorded",value:function(){return nr.get(this)}},{key:"getContact",value:function(){return ar.get(this)}},{key:"getStatus",value:function(){return or.get(this)}},{key:"setStatus",value:function(Ct){or.set(this,Ct)}},{key:"getPublishedStreams",value:function(){var Ct,It=[],jt=Mt(this.publishedStreams.values());try{for(jt.s();!(Ct=jt.n()).done;){var Ht=Ct.value;It.push(Ht)}}catch(qt){jt.e(qt)}finally{jt.f()}return It}},{key:"getReceivedStreams",value:function(){var Ct,It=[],jt=Mt(this.receivedStreams.values());try{for(jt.s();!(Ct=jt.n()).done;){var Ht=Ct.value;It.push(Ht)}}catch(qt){jt.e(qt)}finally{jt.f()}return It}},{key:"hangUp",value:function(){this.getStatus()===et.g.CALL_STATUS_ENDED?mn.error("hangUp() - Call has already ended"):Cn.webRTCClient.hangUp(this.getId())}},{key:"getStats",value:function(){return Lt.g.assignObject({},this.stats)}},{key:"stopPublishedStreams",value:function(){return Cn.webRTCClient.webRTCClient.stopMedia(this.getId())}},{key:"replacePublishedStreams",value:function(Ct,It){var jt=this,Ht=function(qt){if(So.has(qt))return So.get(qt);var Xt=apiCC.getUserMediaStream(qt);if(Xt){var en="audio";return Xt.video===!0&&(en="video"),new lo(Xt.stream,{type:en,constructor:!0,userMediaStreamId:Xt.userMediaStreamId})}return null};return new Promise(function(qt,Xt){if(jt.getStatus()!==et.g.CALL_STATUS_ONGOING)return Xt(new Error("replacePublishedStreams() - Cannot replace stream as call is not ongoing"));if(Ct===null)if(Lt.g.isPropertyTypeof(It,"getStream","function")){var en={getUserMediaStreamId:function(){return It.getStream().then(function(rn){return rn.userMediaStreamId}).catch(Xt)}};Cn.webRTCClient.webRTCClient.addMedia(jt.getId(),!0,null,en).then(function(rn){var bn=Ht(rn.userMediaStreamId);return bn!==null&&jt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:jt.getId(),newStreamId:bn.data.id,oldStreamId:rn.oldMediaStreamId}),qt(bn)}).catch(function(rn){return Xt(new Error("replacePublishedStreams() - "+rn))})}else Cn.webRTCClient.webRTCClient.addMedia(jt.getId(),!0,null,null).then(function(rn){var bn=Ht(rn.userMediaStreamId);return bn!==null&&jt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:jt.getId(),newStreamId:bn.data.id,oldStreamId:rn.oldMediaStreamId}),qt(bn)}).catch(function(rn){return Xt(new Error("replacePublishedStreams() - "+rn))});else Cn.webRTCClient.webRTCClient.addMedia(jt.getId(),!0,Ct.userMediaStreamId).then(function(rn){return jt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:jt.getId(),newStreamId:Ct.data.id,oldStreamId:rn.oldMediaStreamId}),qt(Ct)}).catch(function(rn){return Xt(new Error("replacePublishedStreams() - "+rn))})})}},{key:"getRecordingInfo",value:function(){return nr.get(this)?this.recordingStatus:null}},{key:"startRecording",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.asyncCallbacks)return jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",mn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",mn))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - "+Ht.detail.errorInfo,mn))},Ct.asyncCallbacks.recordingStarted=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Lt.g.parseRecordingEvent("MCURecordingStarted",Ht.detail);return It(qt)}},Cn.onEvent("error",Ct.asyncCallbacks.error),Cn.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),Cn.webRTCClient.startCallRecording(Fn.get(Ct))})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.asyncCallbacks)return jt(Lt.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",mn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"stopRecording() - timeout",mn))},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Ht.detail.errorInfo,mn))},Ct.asyncCallbacks.recordingStopped=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Cn.removeEventListener("error",Ct.asyncCallbacks.error),Cn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Lt.g.parseRecordingEvent("MCURecordingStopped",Ht.detail);return It(qt)}},Cn.onEvent("error",Ct.asyncCallbacks.error),Cn.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),Cn.webRTCClient.stopCallRecording(Fn.get(Ct))})}},{key:"manageCallEstablishedEvent",value:function(Ct){mn.debug("callEstablished",Ct.detail,this.getId());var It=Ct.detail.callId.toString();this.getId()===It&&(mn.info("callEstablished from "+this.getContact().getUsername(),Ct),this.getStatus()!==et.g.CALL_STATUS_ONGOING&&this.getStatus()!==et.g.CALL_STATUS_ENDED&&(zt.get(this).emit("accepted"),zt.get(this).emit("response","accepted"),or.set(this,et.g.CALL_STATUS_ONGOING)))}},{key:"manageRemoteStreamAddedEvent",value:function(Ct){mn.debug("remoteStreamAdded",Ct.detail,this.getId());var It=Ct.detail.callId.toString();if(this.getId()===It){var jt=Ct.detail.destCallType==="audio"?"audio":"video",Ht=Ct.detail.callType==="screenSharing",qt=new lo(Ct.detail.stream,{screensharing:Ht,type:jt,contact:this.getContact(),streamId:Ct.detail.stream.id,callId:Ct.detail.callId,callAudioAvailable:Ct.detail.audioIsAvailable,callAudioActive:Ct.detail.audioIsActive,callAudioMuted:Ct.detail.audioIsMuted,callVideoAvailable:Ct.detail.videoIsAvailable,callVideoActive:Ct.detail.videoIsActive,callVideoMuted:Ct.detail.videoIsMuted,constructor:!0});this.receivedStreams.set(Ct.detail.stream.id,qt),zt.get(this).emit("streamAdded",qt)}}},{key:"manageRemoteStreamRemovedEvent",value:function(Ct){mn.debug("remoteStreamRemoved",Ct.detail,this.getId());var It=Ct.detail.callId.toString();if(this.getId()===It){var jt=this.receivedStreams.get(Ct.detail.stream.id);this.receivedStreams.delete(Ct.detail.stream.id),zt.get(this).emit("streamRemoved",jt)}}},{key:"manageUserMediaSuccessEvent",value:function(Ct){mn.debug("UserMediaSuccess",Ct.detail,this.getId());var It,jt=null;if(It=Ct.detail.videoIsAvailable===!0?"video":"audio",Ct.detail.callId!==null&&(jt=Ct.detail.callId.toString()),this.getId()===jt){mn.info("localStreamAvailable",Ct.detail);var Ht=So.get(Ct.detail.userMediaStreamId);Ht||(Ht=new lo(Ct.detail.stream,{type:It,constructor:!0,userMediaStreamId:Ct.detail.userMediaStreamId,callId:this.getId()})),this.publishedStreams.set(Lt.g.guid(),Ht),zt.get(this).emit("localStreamAvailable",Ht)}}},{key:"manageCallStatsUpdateEvent",value:function(Ct){if(this.getId()===Ct.detail.callId){for(var It=0,jt=Object.keys(Ct.detail.stats);It<jt.length;It++){var Ht=jt[It];Wn.has(Ht)&&(this.stats[Ht]=Ct.detail.stats[Ht])}zt.get(this).emit("statsUpdate",Lt.g.assignObject({},{stats:this.stats}))}}},{key:"manageErrorEvent",value:function(Ct){if(mn.debug("Error",Ct.detail,this.getId()),this.getId()===Ct.detail.callId){var It={errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo};Ct.detail.data&&(It.descriptor=Ct.detail.data),zt.get(this).emit("error",It)}}},{key:"manageDisconnectionWarningEvent",value:function(Ct){mn.debug("DisconnectionWarning",Ct.detail,this.getId()),this.getId()===Ct.detail.callId&&zt.get(this).emit("disconnectionWarning",{tries:Ct.detail.tries})}},{key:"manageHangupEvent",value:function(Ct){mn.debug("hangup",Ct.detail,this.getId());var It=Ct.detail.callId.toString(),jt=this.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&Ct.detail.hangupType==="remote";if(this.getId()===It&&this.getStatus()!==et.g.CALL_STATUS_ENDED){or.set(this,et.g.CALL_STATUS_ENDED),mn.info("Hangup from "+this.getContact().getUsername(),Ct);var Ht,qt=Mt(this.receivedStreams.keys());try{for(qt.s();!(Ht=qt.n()).done;){var Xt=Ht.value,en=this.receivedStreams.get(Xt);this.receivedStreams.delete(Xt),zt.get(this).emit("streamRemoved",en)}}catch(rn){qt.e(rn)}finally{qt.f()}zt.get(this).emit("hangup",{from:Ct.detail.hangupType,reason:Ct.detail.reason}),jt&&(zt.get(this).emit("declined",{reason:Ct.detail.reason}),zt.get(this).emit("response","declined"))}}},{key:"manageRecordAvailableEvent",value:function(Ct){mn.warn("recordedStreamsAvailable",Ct.detail,this.getId()),zt.get(this).emit("recordAvailable",{mediaURL:Ct.detail.mediaURL})}},{key:"manageUserMediaErrorEvent",value:function(Ct){mn.warn("userMediaError",Ct.detail,this.getId()),zt.get(this).emit("userMediaError",{callType:Ct.detail.callType,error:Ct.detail.error,onCallEstablishment:Ct.detail.onCallEstablishment,userMediaStreamId:Ct.detail.userMediaStreamId,tryAudioCallActivated:Ct.detail.tryAudioCallActivated})}},{key:"manageDesktopCaptureEvent",value:function(Ct){mn.warn("desktopCapture",Ct.detail,this.getId()),zt.get(this).emit("desktopCapture",{event:Ct.detail.event})}}],Pt=[{key:"getAvailableEvents",value:function(){return En}}],Zt&&Qt($t.prototype,Zt),Pt&&Qt($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un);function wr(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Jn(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var er=ft.Y.get("ConversationCatalog"),hr=null,Sr=function(){function Wt(){if(function(Bt,sn){if(!(Bt instanceof sn))throw new TypeError("Cannot call a class as a function")}(this,Wt),hr!==null)throw"Cannot construct singleton CallCatalog";this.callList=new Map,hr=this}var $t,Zt,Pt;return $t=Wt,Pt=[{key:"get",value:function(){return hr===null&&(hr=new Wt),hr}}],(Zt=[{key:"getOrCreateCall",value:function(Bt,sn,ln){var Jt=null;return Bt!=null&&(this.callList.has(Bt.toString())?Jt=this.callList.get(Bt.toString()):(Jt=new mr(Bt.toString(),sn,ln),this.callList.set(Bt.toString(),Jt))),Jt}},{key:"getCall",value:function(Bt,sn){var ln=null;if(Bt!=null){if(!this.callList.has(Bt.toString()))return null;ln=this.callList.get(Bt.toString())}else if(sn){var Jt,Ct=function(Ht,qt){var Xt=typeof Symbol<"u"&&Ht[Symbol.iterator]||Ht["@@iterator"];if(!Xt){if(Array.isArray(Ht)||(Xt=function(dr,br){if(dr){if(typeof dr=="string")return wr(dr,br);var Rr=Object.prototype.toString.call(dr).slice(8,-1);return Rr==="Object"&&dr.constructor&&(Rr=dr.constructor.name),Rr==="Map"||Rr==="Set"?Array.from(dr):Rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rr)?wr(dr,br):void 0}}(Ht))||qt&&Ht&&typeof Ht.length=="number"){Xt&&(Ht=Xt);var en=0,rn=function(){};return{s:rn,n:function(){return en>=Ht.length?{done:!0}:{done:!1,value:Ht[en++]}},e:function(dr){throw dr},f:rn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bn,Dn=!0,lr=!1;return{s:function(){Xt=Xt.call(Ht)},n:function(){var dr=Xt.next();return Dn=dr.done,dr},e:function(dr){lr=!0,bn=dr},f:function(){try{Dn||Xt.return==null||Xt.return()}finally{if(lr)throw bn}}}}(this.callList.values());try{for(Ct.s();!(Jt=Ct.n()).done;){var It=Jt.value,jt=It.getContact();if(jt&&jt.getId()===sn.getId()){ln=It;break}}}catch(Ht){Ct.e(Ht)}finally{Ct.f()}}return ln}},{key:"removeCallFromList",value:function(Bt){er.log("removeCallFromList : av instance.callList :",hr.callList),hr.callList.has(Bt)&&hr.callList.delete(Bt),er.log("removeCallFromList : ap instance.callList :",hr.callList)}},{key:"getCalls",value:function(){return this.callList}}])&&Jn($t.prototype,Zt),Pt&&Jn($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function yr(Wt){return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},yr(Wt)}function Pr(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function jr(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Zn(Wt,$t){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Zn(Wt,$t)}function fr(Wt,$t){if($t&&(yr($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qn(Wt)}function qn(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Er(Wt){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Er(Wt)}var sr=ft.Y.get("ReceivedInvitation"),Br=Sr.get(),Dr=["expired","statusChange"],xr=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Zn(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Er(Bt);if(sn){var jt=Er(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return fr(this,Ct)});function Jt(Ct,It,jt){var Ht,qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Pr(this,Jt),Ht=ln.call(this,Ct,It),sr.info("Create ReceivedCallInvitation with call type "+jt),Ht.type="call",Ht.callType=jt,Ht.isRecordedCall=!!qt.hasOwnProperty("isRecorded")&&qt.isRecorded,Ht.call=Br.getOrCreateCall(Ht.id,Ht.sender,{isRecorded:Ht.isRecorded()}),Ht.apiRTCManager.onEvent("hangup",function(Xt){var en=Xt.detail.callId.toString();Ht.id.toString()===en&&Ht.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(Ht.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(qn(Ht)).emit("expired"))}),Ht}return $t=Jt,Zt=[{key:"getCallType",value:function(){return this.callType}},{key:"isRecorded",value:function(){return this.isRecordedCall}},{key:"accept",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){var Xt=It.getCallType()==="audio",en=!0,rn=jt;jt.hasOwnProperty("audioOnly")&&(Xt=jt.audioOnly,delete jt.audioOnly,rn.mediaTypeForIncomingCall!==void 0&&rn.mediaTypeForIncomingCall!==null||jt.audioOnly===!0&&(rn.mediaTypeForIncomingCall="AUDIO")),jt.hasOwnProperty("noStream")&&(rn.mediaTypeForIncomingCall="NONE",en=!1),rn.mediaTypeForIncomingCall==="NONE"&&(en=!1),It.getStatus()===et.g.INVITATION_STATUS_STANDBY?(It.setStatus(et.g.INVITATION_STATUS_ACCEPTED),It.apiRTCManager.sendData(It.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:It.id,answer:"accept"}),It.call.setStatus(et.g.CALL_STATUS_ONGOING),en&&Ct!==null&&Ct instanceof lo&&(sr.debug("accept() - A stream was preselected; audio only : ",Xt),rn.userMediaStreamId=Ct.userMediaStreamId),It.apiRTCManager.webRTCClient.acceptCall(It.id,rn),Ht(It.call)):qt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this call, invitation state invalid",sr))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}},{key:"getCall",value:function(){return this.call}}],Pt=[{key:"getAvailableEvents",value:function(){return Dr}}],Zt&&jr($t.prototype,Zt),Pt&&jr($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Pn);function Yn(Wt){return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Yn(Wt)}function Ir(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function $r(Wt,$t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},$r(Wt,$t)}function Ar(Wt,$t){if($t&&(Yn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Qr(Wt){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Qr(Wt)}var Vr=ft.Y.get("ReceivedInvitation"),Co=["error","progress","statusChange"],eo=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&$r(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Qr(Bt);if(sn){var jt=Qr(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Ar(this,Ct)});function Jt(Ct,It,jt){var Ht;return function(qt,Xt){if(!(qt instanceof Xt))throw new TypeError("Cannot call a class as a function")}(this,Jt),Ht=ln.call(this,Ct,It),Vr.debug("Create ReceivedFileTransferInvitation"),Ht.type="sendFile",Ht.fileInfo=jt,Ht.apiRTCManager.onEvent("hangup",function(qt){Vr.debug("hangup");var Xt=qt.detail.callId.toString();Ht.getId()===Xt&&(Vr.debug("hangup for ReceivedFileTransferInvitation"),Ht.getStatus()===et.g.INVITATION_STATUS_ENDED?Vr.debug("invitation ended"):(Vr.debug("invitation is cancelled"),Ht.setStatus(et.g.INVITATION_STATUS_CANCELLED)),apiRTC.userAgentInstance.currentSession.invitationsMap.has(qt.detail.remoteId+"-sendfile-"+Xt)&&apiRTC.userAgentInstance.currentSession.invitationsMap.delete(qt.detail.remoteId+"-sendfile-"+Xt))}),Ht}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return Co}}],(Zt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY)jt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this file transfer session, invitation state invalid",Vr));else{Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Ht=Ct;Ct.apiRTCManager.onEvent("onFileReceived",function qt(Xt){if(Xt.detail.callId.toString()===Ht.id.toString()){if(Vr.debug("typeof(e.detail.data.file) :",Yn(Xt.detail.data.file)),typeof Xt.detail.data.file=="string")It({file:Xt.detail.data.file,name:Xt.detail.data.name,type:Xt.detail.data.type});else{var en=new FileReader;en.addEventListener("loadend",function(){Ct.setStatus(et.g.INVITATION_STATUS_ENDED),Ct.apiRTCManager.webRTCClient.hangUp(Ht.id.toString());try{Vr.info("accept() - file received from "+Ht.sender.getUsername()+" !"),It({file:Xt.detail.data.file,name:Xt.detail.data.name,type:Xt.detail.data.type})}catch(rn){Vr.error("File Error",rn),jt(Lt.g.createError(et.g.ERROR_OTHER,"accept() - Could not read file received",Vr))}}),en.readAsArrayBuffer(Xt.detail.data.file)}Ct.apiRTCManager.removeEventListener("onFileReceived",qt)}}),Ct.apiRTCManager.onEvent("onFileProgress",function(qt){qt.detail.callId.toString()===Ht.id.toString()&&(Vr.trace("file transfering",qt.detail),zt.get(Ht).emit("progress",{uuid:qt.detail.uuid,fileSize:qt.detail.fileSize,remainingSize:qt.detail.remainingSize,percentage:qt.detail.percentage,sendChunkNb:qt.detail.sendChunkNb,transferDuration:qt.detail.transferDuration,lastPacket:qt.detail.lastPacket}))}),Ct.apiRTCManager.onEvent("receiveDataChannelError",function(qt){qt.detail.callId.toString()===Ht.id.toString()&&(Vr.warn("receiveDataChannelError",qt.detail),zt.get(Ht).emit("error","receiveDataChannelError"))}),Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"})}})}},{key:"getFileInfo",value:function(){return this.fileInfo}},{key:"decline",value:function(Ct){Vr.log("decline"),this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&Ir($t.prototype,Zt),Pt&&Ir($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Pn);function na(Wt){return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},na(Wt)}function gs(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function es(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Zs(Wt,$t){return Zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Zs(Wt,$t)}function hp(Wt,$t){if($t&&(na($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function ms(Wt){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},ms(Wt)}var mu=ft.Y.get("ReceivedInvitation"),vs=function(Wt){(function(Jt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),Ct&&Zs(Jt,Ct)})(ln,Wt);var $t,Zt,Pt,Bt,sn=(Pt=ln,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Jt,Ct=ms(Pt);if(Bt){var It=ms(this).constructor;Jt=Reflect.construct(Ct,arguments,It)}else Jt=Ct.apply(this,arguments);return hp(this,Jt)});function ln(Jt,Ct){var It,jt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return gs(this,ln),It=sn.call(this,Jt,Ct),mu.info("Create ReceivedWhiteboardInvitation"),It.type="whiteboard",jt.cloudConvId&&(It.cloudConvId=jt.cloudConvId),jt.webconf===!0&&(It.webconf=!0),It}return $t=ln,(Zt=[{key:"accept",value:function(){var Jt=this;return new Promise(function(Ct,It){if(Jt.getStatus()===et.g.INVITATION_STATUS_STANDBY){Jt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Jt.apiRTCManager.sendData(Jt.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+Jt.id,answer:"accept"}),Jt.apiRTCManager.whiteBoardClient.leaveRoom(),Jt.apiRTCManager.whiteBoardClient.start();var jt={};Jt.cloudConvId&&(jt.convId=Jt.cloudConvId),Jt.webconf===!0&&(jt.webconf=!0),Jt.apiRTCManager.whiteBoardClient.joinRoom(Jt.id,jt),Ct(Jt.id)}else It(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this whiteboard session, invitation state invalid",mu))})}},{key:"decline",value:function(Jt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+this.id,reason:Jt,answer:"decline"}))}}])&&es($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),ln}(Pn);function Cl(Wt){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Cl(Wt)}function gp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function vu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function yl(Wt,$t){return yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},yl(Wt,$t)}function mp(Wt,$t){if($t&&(Cl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(Wt)}function Jr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Cs(Wt){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Cs(Wt)}var bo=ft.Y.get("DataChannel"),Sl=Rn.get(),vp=["response","accepted","declined","error","opened","closed","error","transferProgress","transferComplete","dataReceived","ended"],Cu=new WeakMap,bu=new WeakMap,zo=new WeakMap,bs=new WeakMap,ys=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&yl(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Cs(Bt);if(sn){var jt=Cs(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return mp(this,Ct)});function Jt(Ct,It){var jt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return gp(this,Jt),jt=ln.call(this,bo),bo.debug("Create DataChannel with id "+Ct),Cu.set(Jr(jt),Ct),bu.set(Jr(jt),It),bs.set(Jr(jt),et.g.DATACHANNEL_TYPE_RECEIVE),Ht.hasOwnProperty("type")&&(Ht.type===et.g.DATACHANNEL_TYPE_RECEIVE?bs.set(Jr(jt),et.g.DATACHANNEL_TYPE_RECEIVE):Ht.type===et.g.DATACHANNEL_TYPE_SEND&&bs.set(Jr(jt),et.g.DATACHANNEL_TYPE_SEND)),zo.set(Jr(jt),et.g.DATACHANNEL_STATUS_WAITING),Sl.onEvent("receiveData",function(qt){qt.detail.data.info!==void 0&&qt.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&qt.detail.data.invitationId.toString()===jt.getId()&&jt.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&(bo.info("DataChannel answer from "+jt.getContact().getUsername()+" for "+jt.getId()),qt.detail.data.answer==="accept"?zt.get(Jr(jt)).emit("accepted"):(zo.set(Jr(jt),et.g.DATACHANNEL_STATUS_ENDED),zt.get(Jr(jt)).emit("declined")),zt.get(Jr(jt)).emit("response"))}).onEvent("callEstablished",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&(bo.info("callEstablished from "+jt.getContact().getUsername(),qt),jt.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING&&jt.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&zt.get(Jr(jt)).emit("accepted"))}).onEvent("hangup",function(qt){var Xt=qt.detail.callId.toString(),en=jt.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&qt.detail.hangupType==="remote";jt.getId()===Xt&&jt.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&(zo.set(Jr(jt),et.g.DATACHANNEL_STATUS_ENDED),bo.info("Hangup from "+jt.getContact().getUsername(),qt),zt.get(Jr(jt)).emit("ended",{from:qt.detail.hangupType}),en&&zt.get(Jr(jt)).emit("declined"))}).onEvent("onFileReceived",function(qt){if(qt.detail.callId.toString()===jt.getId()){var Xt=qt.detail.data;if(Xt.originalDataType==="Blob")bo.debug("originalDataType is a blob"),zt.get(Jr(jt)).emit("dataReceived",{uuid:Xt.uuid,data:Xt.file});else{var en=new FileReader;en.addEventListener("loadend",function(){try{var rn=Lt.g.arrayBuffertoString(en.result);bo.info("dataReceived !"),zt.get(Jr(jt)).emit("dataReceived",{uuid:Xt.uuid,data:rn})}catch(bn){bo.error("dataReceived Error",bn)}}),en.readAsArrayBuffer(Xt.file)}}}).onEvent("onFileProgress",function(qt){if(qt.detail.callId.toString()===jt.getId()){var Xt=qt.detail;bo.trace("file transfering",Xt);var en={uuid:Xt.uuid,fileSize:Xt.fileSize,remainingSize:Xt.remainingSize,percentage:Xt.percentage,sendChunkNb:Xt.sendChunkNb,transferDuration:Xt.transferDuration,lastPacket:Xt.lastPacket};zt.get(Jr(jt)).emit("transferProgress",en),Xt.transferEnded&&zt.get(Jr(jt)).emit("transferComplete",en)}}).onEvent("receiveDataChannelError",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&zt.get(Jr(jt)).emit("error","receiveDataChannelError")}).onEvent("sendDataChannelError",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&zt.get(Jr(jt)).emit("error","sendDataChannelError")}).onEvent("receiveDataChannelClose",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&zt.get(Jr(jt)).emit("closed")}).onEvent("sendDataChannelClose",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&zt.get(Jr(jt)).emit("closed")}).onEvent("receiveDataChannelOpen",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&(zo.set(Jr(jt),et.g.DATACHANNEL_STATUS_ONGOING),zt.get(Jr(jt)).emit("opened",{type:"receiveDataChannelOpen"}))}).onEvent("sendDataChannelOpen",function(qt){var Xt=qt.detail.callId.toString();jt.getId()===Xt&&(zo.set(Jr(jt),et.g.DATACHANNEL_STATUS_ONGOING),zt.get(Jr(jt)).emit("opened",{type:"sendDataChannelOpen"}))}),jt}return $t=Jt,Zt=[{key:"getId",value:function(){return Cu.get(this).toString()}},{key:"getContact",value:function(){return bu.get(this)}},{key:"getType",value:function(){return bs.get(this)}},{key:"getStatus",value:function(){return zo.get(this)}},{key:"sendData",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){var Xt=!1;It.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING?qt(Lt.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is not ongoing",bo)):It.getType()!==et.g.DATACHANNEL_TYPE_SEND?qt(Lt.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is receiving only",bo)):Sl.webRTCClient.sendDataWithCallId(It.getId(),{file:Ct,name:jt.name,type:jt.type},function(en){Xt||(Xt=!0,Ht(en.uuid)),bo.trace("sendData() - progress : ",en);var rn={uuid:en.uuid,fileSize:en.fileSize,remainingSize:en.remainingSize,percentage:en.percentage,sendChunkNb:en.sendChunkNb,transferDuration:en.transferDuration,lastPacket:en.lastPacket};zt.get(It).emit("transferProgress",rn),en.transferEnded&&zt.get(It).emit("transferComplete",rn)})})}},{key:"close",value:function(){this.getStatus()===et.g.DATACHANNEL_STATUS_ENDED?bo.error("close() - DataChannel session has already ended"):Sl.webRTCClient.hangUp(this.getId())}}],Pt=[{key:"getAvailableEvents",value:function(){return vp}}],Zt&&vu($t.prototype,Zt),Pt&&vu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un);function Tl(Wt){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Tl(Wt)}function yu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Il(Wt,$t){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Il(Wt,$t)}function Cp(Wt,$t){if($t&&(Tl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Su(Wt)}function Su(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ss(Wt){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ss(Wt)}var Tu=ft.Y.get("ReceivedInvitation"),bp=["expired","statusChange"],No=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Il(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ss(Bt);if(sn){var jt=Ss(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Cp(this,Ct)});function Jt(Ct,It){var jt;return function(Ht,qt){if(!(Ht instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Jt),jt=ln.call(this,Ct,It),Tu.info("Create ReceivedDataChannelInvitation "),jt.type="dataChannel",jt.apiRTCManager.onEvent("hangup",function(Ht){var qt=Ht.detail.callId.toString();jt.id.toString()===qt&&jt.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(jt.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(Su(jt)).emit("expired"))}),jt}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return bp}}],(Zt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Ht=new ys(Ct.id,Ct.sender,{started:!0,type:et.g.DATACHANNEL_TYPE_SEND});Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"}),It(Ht)}else jt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this datachannel session, invitation state invalid",Tu))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&yu($t.prototype,Zt),Pt&&yu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Pn);function Rl(Wt){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Rl(Wt)}function yp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function El(Wt,$t){return El=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},El(Wt,$t)}function Sp(Wt,$t){if($t&&(Rl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Ts(Wt){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ts(Wt)}var Ol=ft.Y.get("ReceivedInvitation"),Go=function(Wt){(function(Jt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),Ct&&El(Jt,Ct)})(ln,Wt);var $t,Zt,Pt,Bt,sn=(Pt=ln,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Jt,Ct=Ts(Pt);if(Bt){var It=Ts(this).constructor;Jt=Reflect.construct(Ct,arguments,It)}else Jt=Ct.apply(this,arguments);return Sp(this,Jt)});function ln(Jt,Ct,It){var jt;return function(Ht,qt){if(!(Ht instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,ln),jt=sn.call(this,Jt,It),Ol.info("Create ReceivedConversationJoinRequest"),jt.type="conversationJoinRequest",jt.conversation=Ct||null,jt}return $t=ln,(Zt=[{key:"getConversation",value:function(){return this.conversation}},{key:"accept",value:function(){var Jt=this;return new Promise(function(Ct,It){Jt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Jt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Jt.conversation?Jt.conversation.allowEntry(Jt.sender,{invitationId:Jt.id,answer:"accept",ackEnabled:!0}).then(Ct).catch(It):(Jt.apiRTCManager.sendData(Jt.sender.getId(),{roomname:Jt.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Jt.id,answer:"accept",command:"access",value:{access:!0}}),Ct())):It(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept request, invitation state invalid",Ol))})}},{key:"decline",value:function(Jt){var Ct=this;return new Promise(function(It,jt){Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Ct.setStatus(et.g.INVITATION_STATUS_DECLINED),Ct.conversation?Ct.conversation.denyEntry(Ct.sender,{invitationId:Ct.id,answer:"decline",reason:Jt}).then(It).catch(jt):(Ct.apiRTCManager.sendData(Ct.sender.getId(),{roomname:Ct.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,reason:Jt,answer:"decline",command:"access",value:{access:!1}}),It())):jt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"decline() - Cannot decline request, invitation state invalid",Ol))})}}])&&yp($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),ln}(Pn);function _l(Wt){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_l(Wt)}function Tp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Al(Wt,$t){return Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Al(Wt,$t)}function Ip(Wt,$t){if($t&&(_l($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Is(Wt){return Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Is(Wt)}var Iu=ft.Y.get("ReceivedInvitation"),Ml=function(Wt){(function(Jt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),Ct&&Al(Jt,Ct)})(ln,Wt);var $t,Zt,Pt,Bt,sn=(Pt=ln,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Jt,Ct=Is(Pt);if(Bt){var It=Is(this).constructor;Jt=Reflect.construct(Ct,arguments,It)}else Jt=Ct.apply(this,arguments);return Ip(this,Jt)});function ln(Jt,Ct,It){var jt;return function(Ht,qt){if(!(Ht instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,ln),(jt=sn.call(this,Jt,Ct)).session=It,jt.type="pointerSharing",jt}return $t=ln,(Zt=[{key:"accept",value:function(){var Jt=this;return new Promise(function(Ct,It){Jt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Jt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Jt.session.joinPointerSharingRoom(Jt.id).then(Ct).catch(function(jt){It(Lt.g.createError(et.g.ERROR_OTHER,"accept() - cannot accept invitation",Iu))})):It(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - cannot accept invitation",Iu))})}},{key:"decline",value:function(Jt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&this.setStatus(et.g.INVITATION_STATUS_DECLINED)}}])&&Tp($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),ln}(Pn);function Rp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}s(4723);var Wr=ft.Y.get("AicConsoleManager"),Ru=function(){function Wt(){var Pt=this;(function(Bt,sn){if(!(Bt instanceof sn))throw new TypeError("Cannot call a class as a function")})(this,Wt),Wr.info("Create AicConsoleManager"),this.ws=null,this.connectedToapplication=!1,this.domStream=null,this.keyboard_mode=0,this.ports=[4545,5858,37371,41793,42803],this.port_index=0,this.aic_agent_running=0,this.ip="127.0.0.1",this.aic_agent_handshake_done=0,this.controlActivated=!1,this.handshakeTimeoutId=0,this.kd=function(Bt){Pt.key_down(Bt)},this.ku=function(Bt){Pt.key_up(Bt)},this.wfl=function(Bt){Pt.window_focus_lost(Bt)},this.mm=function(Bt){Pt.mouse_move(Bt)},this.dc=function(Bt){Pt.mouse_doubleclick(Bt)},this.md=function(Bt){Pt.mouse_down(Bt)},this.mu=function(Bt){Pt.mouse_up(Bt)},this.mw=function(Bt){Pt.mouse_wheel(Bt)}}var $t,Zt;return $t=Wt,Zt=[{key:"aic_control_onmessage",value:function(Pt){if(Wr.debug("Message to send to remote app :",Pt),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),message:Pt};apiRTC.session.remoteAccessInvitation.send(Bt).then(function(){}).catch(function(sn){Wr.warn("Contact#send CONTACT_REMOTEACCESS_APP_MESSAGE message error:",sn)})}else Wr.error("Error on aic_control_onmessage, remoteAccessInvitation is not initialized")}},{key:"aic_keyboard_keydown",value:function(Pt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+Pt+'","KEY_DOWN,'+Bt+'")')}},{key:"aic_keyboard_keyup",value:function(Pt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+Pt+'","KEY_UP,'+Bt+'")')}},{key:"key_down",value:function(Pt){if(Wr.debug("key_down"),Pt.target===document.body)if(Pt.preventDefault(),Pt.isComposing||Pt.keyCode===229)Wr.debug("Ignoring event "+Pt);else if(this.keyboard_mode===0){var Bt=(Pt.altKey?"MOD_ALT,":"")+(Pt.ctrlKey?"MOD_CONTROL,":"")+(Pt.metaKey?"MOD_META,":"")+(Pt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keydown(Pt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keydown("+Pt.keyCode+")");else Wr.debug("this is not document body, ignoring this event")}},{key:"key_up",value:function(Pt){if(Wr.debug("key_up"),Pt.target===document.body)if(Pt.preventDefault(),Pt.isComposing||Pt.keyCode===229)console.log("Ignoring event "+Pt);else if(this.keyboard_mode===0){var Bt=(Pt.altKey?"MOD_ALT,":"")+(Pt.ctrlKey?"MOD_CONTROL,":"")+(Pt.metaKey?"MOD_META,":"")+(Pt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keyup(Pt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keyup("+Pt.keyCode+")");else Wr.debug("this is not document body, ignoring this event")}},{key:"window_focus_lost",value:function(Pt){Wr.debug("window_focus_lost"),this.aic_keyboard_keyup("Shift","MOD_ALT,MOD_CONTROL,MOD_META,MOD_SHIFT")}},{key:"mouse_doubleclick",value:function(Pt){this.mouse_move(Pt),this.aic_control_onmessage("aic_mouse_doubleclick("+Pt.which+")")}},{key:"mouse_down",value:function(Pt){this.mouse_move(Pt),this.aic_control_onmessage("aic_mouse_down("+Pt.which+")")}},{key:"mouse_up",value:function(Pt){this.mouse_move(Pt),this.aic_control_onmessage("aic_mouse_up("+Pt.which+")")}},{key:"mouse_wheel",value:function(Pt){Pt.preventDefault(),this.aic_control_onmessage("aic_mouse_scroll("+Pt.deltaX+","+-1*Pt.deltaY+")")}},{key:"mouse_move",value:function(Pt){var Bt=window.screen.width,sn=window.screen.height;apiRTC.session.remoteAccessInvitation!==null&&(Bt=apiRTC.session.remoteAccessInvitation.screenWidth,sn=apiRTC.session.remoteAccessInvitation.screenHeight);var ln=getComputedStyle(Pt.target),Jt=parseInt(ln.getPropertyValue("width"),10),Ct=parseInt(ln.getPropertyValue("height"),10),It=0,jt=0,Ht=!1;Jt/parseInt(Pt.target.videoWidth,10)<=Ct/parseInt(Pt.target.videoHeight,10)&&(Ht=!0),Ht===!0?(Wr.debug("Keeping width"),jt=Jt*Pt.target.videoHeight/Pt.target.videoWidth,It=Jt):(Wr.debug("Keeping height"),It=Ct*Pt.target.videoWidth/Pt.target.videoHeight,jt=Ct);var qt=Pt.target.getBoundingClientRect(),Xt=Pt.clientX-qt.left-(Jt-It)/2,en=Pt.clientY-qt.top-(Ct-jt)/2,rn=Math.floor(Xt/It*Bt),bn=Math.floor(en/jt*sn);this.aic_control_onmessage("aic_mouse_move("+rn+","+bn+")")}},{key:"searchDOMElement",value:function(Pt){var Bt=this;return new Promise(function(sn,ln){if(Bt.domStream=document.getElementById(Pt),Bt.domStream)sn();else{var Jt="Dom element not found in searchDOMElement";Wr.debug(Jt),ln(new Error(Jt))}})}},{key:"aic_control_start",value:function(){var Pt=this;return new Promise(function(Bt,sn){Wr.debug("aic_control_start"),window.oncontextmenu=function(){return!1};var ln=apiRTC.session.remoteAccessInvitation.screenSharingStreamDOMElementId;Wr.debug("domSearchFilter :",ln),Pt.searchDOMElement(ln).then(function(){if(Pt.domStream)Wr.debug("Adding mouse and keyboard events listeners"),document.addEventListener("keydown",Pt.kd,{passive:!1}),document.addEventListener("keyup",Pt.ku,{passive:!1}),document.addEventListener("blur",Pt.wfl,{passive:!1}),Pt.domStream.addEventListener("mousemove",Pt.mm,!0),Pt.domStream.addEventListener("mousedown",Pt.md,!0),Pt.domStream.addEventListener("mouseup",Pt.mu,!0),Pt.domStream.addEventListener("wheel",Pt.mw,{passive:!1}),Pt.controlActivated=!0,Bt();else{var Jt="Dom element not found";Wr.debug(Jt),sn(new Error(Jt))}}).catch(function(Jt){sn(Jt)})})}},{key:"aic_control_stop",value:function(){var Pt=this;return Wr.debug("aic_control_stop"),new Promise(function(Bt,sn){if(window.oncontextmenu=function(){return!0},Pt.domStream)Wr.debug("Removing mouse and keyboard events listeners"),document.removeEventListener("keydown",Pt.kd,{passive:!1}),document.removeEventListener("keyup",Pt.ku,{passive:!1}),document.removeEventListener("blur",Pt.wfl,{passive:!1}),Pt.domStream.removeEventListener("mousemove",Pt.mm,!0),Pt.domStream.removeEventListener("dblclick",Pt.dc,!0),Pt.domStream.removeEventListener("mousedown",Pt.md,!0),Pt.domStream.removeEventListener("mouseup",Pt.mu,!0),Pt.domStream.removeEventListener("wheel",Pt.mw,{passive:!1}),Pt.controlActivated=!1,Bt();else{var ln="Dom element not found";Wr.debug(ln),sn(new Error(ln))}})}},{key:"aic_agent_send_message",value:function(Pt){this.ws!==void 0?this.ws.readyState===1?this.ws.send(Pt):Wr.info("aic_agent_send_message : ws in not in readyState"):Wr.info("aic_agent_send_message : ws in not defined")}},{key:"ws_onopen",value:function(){var Pt=this;Wr.debug("ws_onopen : Connected"),this.aic_agent_handshake_done=0,this.aic_agent_send_message("aic_agent_start()"),this.handshakeTimeoutId=setTimeout(function(){Wr.error("Timeout reached on handshake"),Pt.ws.close(1e3,"HANDSHAKE_NOK")},1e3)}},{key:"ws_onmessage",value:function(Pt){var Bt=Pt.data;Wr.debug("received_msg :",Bt);var sn=Bt.match(/^aic_notify\(\"([^\"]*)\",\"([^\"]*)\"\)$/);sn&&sn[1]==="aic_agent_version"&&(Wr.debug("aic_agent_version is :",sn[2]),clearTimeout(this.handshakeTimeoutId),this.aic_agent_handshake_done=1,this.connectedToapplication=!0,this.send_application_status("APP_CONNECTION_OK"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ok"))}},{key:"ws_onclose",value:function(Pt){var Bt=this;Wr.debug("ws_onclose : Closed - event :",Pt),this.connectedToapplication===!0?(apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.stop(!0),this.connectedToapplication=!1):this.ws_reconnect()===2&&setTimeout(function(){Bt.ws_reconnect()},3e3)}},{key:"ws_onerror",value:function(Pt){Wr.debug("ws_onerror : "+Pt)}},{key:"ws_connect",value:function(Pt){var Bt=this;Wr.debug("ws_connect : Connecting ");var sn="ws://"+this.ip+":"+Pt+"/ws";Wr.debug("... on url :",sn),this.ws=new WebSocket(sn,"ws-server-aic"),this.ws.addEventListener("open",function(ln){Bt.ws_onopen(ln)}),this.ws.addEventListener("message",function(ln){Bt.ws_onmessage(ln)}),this.ws.addEventListener("close",function(ln){Bt.ws_onclose(ln)}),this.ws.addEventListener("error",function(ln){Bt.ws_onerror(ln)})}},{key:"ws_reconnect",value:function(){return this.aic_agent_running===0?0:this.port_index>=this.ports.length?(this.port_index=0,2):(this.ws_connect(this.ports[this.port_index]),this.port_index++,0)}},{key:"send_application_status",value:function(Pt){if(Wr.debug("send_application_status"),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),status:Pt};apiRTC.session.remoteAccessInvitation.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,Bt).then(function(){}).catch(function(sn){Wr.warn("Contact#send send_application_status message error:",sn)})}else Wr.warn("send_application_status but not linked to a remoteAccessInvitation")}},{key:"aic_agent_start",value:function(){Wr.debug("aic_agent_start"),"WebSocket"in window?(this.aic_agent_running=1,this.send_application_status("APP_CONNECTION_ONGOING"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ongoing"),this.ws_reconnect(this.ip)):Wr.error("WebSocket NOT supported by your Browser!")}},{key:"aic_agent_stop",value:function(){Wr.debug("aic_agent_stop"),this.aic_agent_running=0,this.ws.close()}},{key:"aic_agent_exit",value:function(){this.aic_agent_send_message("aic_agent_exit()")}}],Zt&&Rp($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function xl(Wt){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},xl(Wt)}function Ep(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Eu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Pl(Wt,$t){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Pl(Wt,$t)}function wp(Wt,$t){if($t&&(xl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Rs(Wt){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Rs(Wt)}var xa=ft.Y.get("ReceivedInvitation"),kp=["stop","messageDelivered","messageNotDelivered","application_connection_ongoing","application_connection_ok"],Op=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Pl(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Rs(Bt);if(sn){var jt=Rs(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return wp(this,Ct)});function Jt(Ct,It,jt){var Ht,qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ep(this,Jt),xa.debug("Create ReceivedRemoteAccessInvitation"),(Ht=ln.call(this,Ct,It.invitationId)).type="remoteAccess",Ht.conversation=jt,qt.cloudConvId&&(Ht.cloudConvId=qt.cloudConvId),qt.webconf===!0&&(Ht.webconf=!0),Ht.aicConsoleManager=null,Ht.screenSharingStreamId=null,Ht.screenSharingStream=null,Ht.apiRTCManager.onEvent("receiveData",function(Xt){xa.debug("ReceivedRemoteAccessInvitation receiveData "),Xt.detail.data.event!==void 0&&Xt.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&Xt.detail.data.invitationId.toString()===Ht.id.toString()?(xa.debug("Received stop for "+Ht.id,Xt.detail.data),Ht.stop(!1,Xt.detail.data.reason)):Xt.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_MESSAGE&&Xt.detail.data.invitationId.toString()===Ht.id.toString()&&(xa.debug("Received CONTACT_REMOTEACCESS_APP_MESSAGE for "+Ht.id,Xt.detail.data),Ht.aicConsoleManager!==null?Ht.aicConsoleManager.aic_agent_send_message(Xt.detail.data.message):xa.debug("aicConsoleManager is not initialized"))}),Ht.conversation.on("contactLeft",function(Xt){Xt.id===Ht.sender.id&&(xa.debug("Remote user has left, stopping remoteAccess"),Ht.stop(!1,{code:"AGENT_LEFT"}))}),Ht}return $t=Jt,Zt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,jt){if(xa.debug("ReceivedRemoteAccessInvitation accept"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED);var Ht={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"accept"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Ht).then(function(){It(Ct.id)}).catch(function(qt){jt(qt)})}else jt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept remote access, invitation state invalid",xa))})}},{key:"decline",value:function(){var Ct=this;return new Promise(function(It,jt){if(xa.debug("ReceivedRemoteAccessInvitation decline"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_DECLINED);var Ht={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"decline"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Ht).then(function(){It(Ct.id)}).catch(function(qt){jt(qt)}),Ct.stop(!0,{code:"USER_DECLINE"})}else jt(Lt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot decline remote access, invitation state invalid",xa))})}},{key:"sendMessageToSender",value:function(Ct,It){var jt=this;return xa.debug("sendMessageToSender :",It),new Promise(function(Ht,qt){jt.apiRTCManager.sendData(jt.sender.getId(),It).then(function(){zt.get(jt).emit("messageDelivered",{event:Ct,contact:jt.sender,messageData:It}),Ht()}).catch(function(Xt){var en=Lt.g.createError(Xt,"Invitation not delivered",xa);zt.get(jt).emit("messageNotDelivered",{error:en,contact:jt.sender,event:Ct,messageData:It}),qt(en)})})}},{key:"fireEvent",value:function(Ct,It){zt.get(this).emit(Ct,It)}},{key:"startScreenSharingAndPublish",value:function(){var Ct=this;return xa.debug("startScreenSharingAndPublish"),new Promise(function(It,jt){apiRTC.Stream.createDisplayMediaStream({video:{cursor:"always",displaySurface:"monitor"},surfaceSwitching:"exclude",selfBrowserSurface:"exclude",systemAudio:"exclude"}).then(function(Ht){Ht.screensharingRemoteAccessStream=!0;var qt={},Xt={};Xt.invitationId=Ct.id,Xt.screenWidth=window.screen.width,Xt.screenHeight=window.screen.height,qt.context={remoteAccessCtx:Xt},Ct.screenSharingStreamId=Ht.getId(),Ct.screenSharingStream=Ht,xa.debug("setting screenSharingStreamId :",Ct.screenSharingStreamId),Ct.conversation.publish(Ht,qt).then(function(en){Ct.aicConsoleManager=new Ru,Ct.aicConsoleManager.aic_agent_start(),It(en)}).catch(function(en){var rn={code:"DISPLAY_MEDIA_PUBLISH_ERROR",error:en};Ct.stop(!0,rn),jt(en)})}).catch(function(Ht){xa.error("error on createDisplayMediaStream :",Ht);var qt={code:"CREATE_DISPLAY_MEDIA_ERROR",error:Ht};Ct.stop(!0,qt),jt(Ht)})})}},{key:"downloadApplication",value:function(){return xa.debug("downloadApplication"),new Promise(function(Ct,It){fetch("https://dev.cdn.apizee.com/apiRTC/app/remoteAccess.exe").then(function(jt){return jt.blob()}).then(function(jt){var Ht=window.URL.createObjectURL(jt),qt=document.createElement("a");qt.href=Ht,qt.download="remoteAccess.exe",document.body.appendChild(qt),qt.click(),qt.remove(),Ct()}).catch(function(jt){xa.error("Something went wrong during remote access application loading.. toString :",jt.toString()),It(new Error("error on application fetch :"+jt.toString()))})})}},{key:"stop",value:function(){var Ct=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;xa.debug("stop with sendMessage :",Ct),It==null&&(It={code:"USER_STOP"});var jt=this.conversation.conversationPublishedStreams.get(this.screenSharingStreamId);if(jt!=null&&(xa.debug("streamInfo :",jt),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(jt.callId)),this.screenSharingStream!==null&&(this.screenSharingStream.release(),this.screenSharingStream=null),this.aicConsoleManager!==null&&(this.aicConsoleManager.aic_agent_exit(),this.aicConsoleManager.aic_agent_stop(),this.aicConsoleManager=null),apiRTC.session.remoteAccessInvitation=null,Ct){var Ht={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:It};this.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,Ht).then(function(){}).catch(function(qt){xa.warn("Contact#send stop message error:",qt)})}zt.get(this).emit("stop",It)}}],Pt=[{key:"getAvailableEvents",value:function(){return kp}}],Zt&&Eu($t.prototype,Zt),Pt&&Eu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Pn),_p=s(8364),Ko=s.n(_p);function Es(Wt){return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Es(Wt)}function Ap(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function wu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}s(9601);var Mp=ft.Y.get("UserData"),xp=Rn.get(),Io=function(){function Wt(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var sn in Ap(this,Wt),Bt)Bt.hasOwnProperty(sn)&&(this[sn]=Bt[sn])}var $t,Zt,Pt;return $t=Wt,Pt=[{key:"equals",value:function(Bt,sn){if(!(Bt instanceof Object&&sn instanceof Object))return!1;for(var ln in Bt)if(sn[ln]===void 0||Es(sn[ln])==="object"&&!this.equals(sn[ln],Bt[ln])||sn[ln]!==Bt[ln])return!1;for(var Jt in sn)if(Bt[Jt]===void 0||Es(Bt[Jt])==="object"&&!this.equals(Bt[Jt],sn[Jt])||Bt[Jt]!==sn[Jt])return!1;return!0}}],(Zt=[{key:"get",value:function(Bt){return this.hasOwnProperty(Bt)&&this[Bt]!==void 0&&this[Bt]!=="null"&&this[Bt]!==null?this[Bt]:null}},{key:"setToSession",value:function(){try{var Bt={};for(var sn in this)this.hasOwnProperty(sn)&&typeof this[sn]!="function"&&(Bt[sn]=this[sn]);xp.apiRTCSession.setUserData(Bt)}catch{Mp.error("setUserData() - could not set userData")}}},{key:"setProp",value:function(Bt,sn){return this[Bt]=sn,this}},{key:"setProps",value:function(Bt){for(var sn in Bt)Bt.hasOwnProperty(sn)&&(this[sn]=Bt[sn]);return this}}])&&wu($t.prototype,Zt),Pt&&wu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Dl(Wt){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Dl(Wt)}function Pp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function ku(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Nl(Wt,$t){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Nl(Wt,$t)}function Dp(Wt,$t){if($t&&(Dl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ws(Wt)}function ws(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ks(Wt){return ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},ks(Wt)}var _o=ft.Y.get("SentInvitation"),Np=["response","receive","statusChange"],Lo=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Nl(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=ks(Bt);if(sn){var jt=ks(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Dp(this,Ct)});function Jt(Ct,It){var jt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Pp(this,Jt),(jt=ln.call(this)).conversation=It,_o.info("Create SentInvitation"),jt.invitationType="sent",jt.contact=Ct,jt.id=Lt.g.guid(),jt.sendTime=Date.now(),jt.expirationTime=null,jt.expirationTimeout=null,Ht.hasOwnProperty("expirationTime")&&(jt.expirationTime=Ht.expirationTime,jt.expirationTimeout=setTimeout(function(){jt.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(_o.info("Conversation invitation expired"),jt.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(ws(jt)).emit("response",jt.getStatus()))},Ht.expirationTime)),Ht.hasOwnProperty("receiveNotifier")&&Ht.receiveNotifier.on("receive",function(){zt.get(ws(jt)).emit("receive")}),jt.apiRTCManager.onEvent("receiveData",function(qt){_o.debug("SentInvitation receiveData "),qt.detail.data.event!==void 0&&(qt.detail.data.event!==et.g.INVITATION_ANSWER_IDENTIFIER&&qt.detail.data.event!==et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER||qt.detail.data.invitationId.toString()!==jt.id.toString()||jt.getStatus()!==et.g.INVITATION_STATUS_STANDBY||(_o.debug("Received invitation answer for "+jt.id,qt.detail.data),jt.expirationTimeout!==null&&clearTimeout(jt.expirationTimeout),qt.detail.data.answer==="accept"?jt.setStatus(et.g.INVITATION_STATUS_ACCEPTED):jt.setStatus(et.g.INVITATION_STATUS_DECLINED),zt.get(ws(jt)).emit("response",jt.getStatus())))}),jt.apiRTCManager.onEvent("hangup",function(qt){_o.debug("hangup");var Xt=qt.detail.callId.toString();jt.getId()===Xt&&(_o.debug("hangup for sentInvitation"),jt.setStatus(et.g.INVITATION_STATUS_ENDED))}),jt}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return Np}}],(Zt=[{key:"getId",value:function(){return this.id}},{key:"onResponse",value:function(Ct){this.on("response",Ct)}},{key:"cancel",value:function(){_o.info("cancel"),this.type==="sendFile"?(_o.info("cancel sendfile"),this.apiRTCManager.webRTCClient.hangUp(this.id)):_o.warn("cancel is not managed for invitation with type :",this.type)}},{key:"send",value:function(Ct){var It=this;return _o.debug("SentInvitation#send"),new Promise(function(jt,Ht){It.apiRTCManager.sendData(It.contact.getId(),Ct).then(function(){return jt()}).catch(function(qt){var Xt=Lt.g.createError(qt,"Invitation not delivered",_o);return Ht(Xt)})})}}])&&ku($t.prototype,Zt),Pt&&ku($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Bn);function Ll(Wt){return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Ll(Wt)}function Lp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Ou(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Ul(Wt,$t){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Ul(Wt,$t)}function Up(Wt,$t){if($t&&(Ll($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(Wt)}function Os(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function _s(Wt){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},_s(Wt)}var go=ft.Y.get("SentRemoteAccessInvitation"),jp=["response","receive","remoteAccessStreamAdded","stop","application_connection_ongoing","application_connection_ok"],$p=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Ul(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=_s(Bt);if(sn){var jt=_s(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Up(this,Ct)});function Jt(Ct,It){var jt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Lp(this,Jt),jt=ln.call(this,Ct,It,Ht),go.debug("Create sentRemoteAccessInvitation"),jt.type="remoteAccess",jt.screenSharingStreamId=null,jt.screenSharingStream=null,jt.aicConsoleManager=null,jt.screenSharingStreamDOMElementId=null,jt.apiRTCManager.onEvent("receiveData",function(qt){go.debug("SentRemoteAccessInvitation receiveData "),qt.detail.data.event!==void 0&&(qt.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&qt.detail.data.invitationId.toString()===jt.id.toString()?(go.debug("SentRemoteAccessInvitation Received stop for "+jt.id,qt.detail.data),jt.stop(!1,qt.detail.data.reason)):qt.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE&&qt.detail.data.invitationId.toString()===jt.id.toString()&&(go.debug("CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE : "+jt.id,qt.detail.data.status),qt.detail.data.status==="APP_CONNECTION_ONGOING"?(zt.get(Os(jt)).emit("application_connection_ongoing"),jt.aicConsoleManager=new Ru,jt.aicConsoleManager.controlActivated===!0&&jt.aicConsoleManager.aic_control_stop().then(function(){zt.get(Os(jt)).emit("controlStop")}).catch(function(Xt){go.debug("aic_control_stop error:",Xt)})):qt.detail.data.status==="APP_CONNECTION_OK"&&zt.get(Os(jt)).emit("application_connection_ok")))}),jt.conversation.on("contactLeft",function(qt){qt.id===jt.contact.id&&(go.debug("Remote user has left, stopping remoteAccess"),jt.stop(!1,{code:"USER_LEFT"}))}),jt}return $t=Jt,Zt=[{key:"setRemoteAccessStream",value:function(Ct){go.debug("setRemoteAccessStream"),this.screenSharingStream=Ct,zt.get(this).emit("remoteAccessStreamAdded",this.screenSharingStream)}},{key:"setScreenSharingStreamDOMElementId",value:function(Ct){var It=this;this.screenSharingStreamDOMElementId=Ct,this.aicConsoleManager!==null?this.aicConsoleManager.aic_control_start().then(function(){zt.get(It).emit("controlStart")}).catch(function(jt){go.warn("aic_control_start error:",jt)}):go.debug("aicConsoleManager is not activated")}},{key:"toggleMouseAndKeyboardAccess",value:function(){var Ct=this;return go.debug("toggleMouseAndKeyboardAccess"),new Promise(function(It,jt){if(Ct.aicConsoleManager!==null)Ct.aicConsoleManager.controlActivated===!0?Ct.aicConsoleManager.aic_control_stop().then(function(){zt.get(Ct).emit("controlStop"),It()}).catch(function(qt){jt(qt)}):Ct.aicConsoleManager.aic_control_start().then(function(){zt.get(Ct).emit("controlStart"),It()}).catch(function(qt){jt(qt)});else{var Ht="aicConsoleManager is not activated";go.debug(Ht),jt(new Error(Ht))}})}},{key:"getMouseAndKeyboardAccessStatus",value:function(){return this.aicConsoleManager.controlActivated}},{key:"stop",value:function(){var Ct=this,It=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(go.debug("stop"),jt==null&&(jt={code:"AGENT_STOP"}),this.aicConsoleManager!==null&&(this.aicConsoleManager.controlActivated===!0&&this.aicConsoleManager.aic_control_stop().then(function(){zt.get(Ct).emit("controlStop")}).catch(function(qt){go.warn("aic_control_stop error:",qt)}),this.aicConsoleManager=null),It){var Ht={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:jt};this.send(Ht).then(function(){}).catch(function(qt){go.warn("Contact#send stop message error:",qt)})}apiRTC.session.remoteAccessInvitation!==null&&(zt.get(this).emit("stop",jt),apiRTC.session.remoteAccessInvitation=null)}}],Pt=[{key:"getAvailableEvents",value:function(){return jp}}],Zt&&Ou($t.prototype,Zt),Pt&&Ou($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Lo);function $l(Wt){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},$l(Wt)}function _u(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Au(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?Au(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function Au(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Fp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Mu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Fl(Wt,$t){return Fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Fl(Wt,$t)}function Wp(Wt,$t){if($t&&($l($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hr(Wt)}function Hr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function As(Wt){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},As(Wt)}var pr=ft.Y.get("Contact"),Kr=Rn.get(),ts=new(Ko()),Wl=Sr.get(),Bp=["message","conversationInvitation","data","joinGroup","leaveGroup","whiteboardInvitation","fileSentSuccessfully","fileTransferInvitation","fileTransferProgress","dataChannelInvitation","incomingCall","internalApiRTCdataChannelInvitation","newMediaAvailable","customEvent","fileTransferError","incomingScreenSharingCall","incomingScreenSharingCallInvitation"],Bl=new WeakMap,xu=new WeakMap,Vl=new Map,Uo=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Fl(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=As(Bt);if(sn){var jt=As(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return Wp(this,Ct)});function Jt(Ct){var It,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fp(this,Jt),It=ln.call(this,pr),pr.debug("Create Contact with id "+Ct),pr.debug("Create Contact with userData :",jt),xu.set(Hr(It),Ct.toString()),It.groups=[],It.previousMessages=[],It.userData=new Io(jt),It.enterprise=null,It.streams=new Map,It.profile=null,It.fileTransfers=[],It.promises=[],It.cSeq=0,It.getNewCSeq=function(){return this.cSeq=this.cSeq+1,this.cSeq},It.internalApiRTCdataChannelInvitationHandlerTable=[],It.sendRequestReceiveDataHandlerTable=[],Bl.set(Hr(It),[]),Kr.onEvent("roomInvitation",function(Ht){if(Ht.detail.senderId!==null&&Ht.detail.senderId!==void 0&&Ht.detail.roomType==="whiteBoard"&&Ht.detail.senderId.toString()===It.getId()){pr.info("Received whiteboard invitation from "+It.getUsername());var qt={};Ht.detail.cloudConvId&&(qt.cloudConvId=Ht.detail.cloudConvId),Ht.detail.webconf===!0&&(qt.webconf=!0),zt.get(Hr(It)).emit("whiteboardInvitation",new vs(Hr(It),Ht.detail.roomId,qt))}}).onEvent("receiveIMMessage",function(Ht){Ht.detail.senderId.toString()===It.getId()&&(zt.get(Hr(It)).emit("message",{content:Ht.detail.message,uuid:Ht.detail.UUCSeq,time:Ht.detail.time}),It.addMessageToHistory(Ht.detail.message,Math.round(Ht.detail.time.getTime()/1e3),Ht.detail.UUCSeq,!0))}).onEvent("receiveData",function(Ht){if(Ht.detail.senderId.toString()===It.getId()){pr.debug("Received data e.detail.data : ",Ht.detail.data);var qt=Ht.detail.data,Xt=null,en=po.get();if(qt.roomname!==void 0&&(Xt=en.isConference(qt.roomname)?en.getOrCreateConference(en.getNameFromTechnicalName(qt.roomname)):en.getOrCreateConversation(en.getNameFromTechnicalName(qt.roomname))),qt.apiRTCRequest===!0&&It.manageApiRTCRequest(Ht.detail,Xt),qt.event!==void 0)switch(qt.event){case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:case et.g.INVITATION_ANSWER_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:pr.trace("Received data from "+It.getUsername(),qt.content),zt.get(Hr(It)).emit("data",qt.content);break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(Xt!==null){pr.debug("Received conversation invitation from "+It.getId());var rn={};qt.hasOwnProperty("password")&&(rn.password=qt.password),zt.get(Hr(It)).emit("conversationInvitation",new wt(Hr(It),qt,Xt,rn))}break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:pr.debug("Received file info from "+It.getUsername(),qt.fileInfo);var bn=qt.callId.toString();if(Lt.g._private.dataCallsFileInfo.set(bn,qt.fileInfo),Lt.g._private.dataCallsOnHold.has(bn)){var Dn=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(It.getId()+"-sendfile-"+bn)?(Dn=apiRTC.userAgentInstance.currentSession.invitationsMap.get(It.getId()+"-sendfile-"+bn),pr.debug("invitation already exist :",Dn)):(Dn=new eo(Hr(It),bn,qt.fileInfo),apiRTC.userAgentInstance.currentSession.invitationsMap.set(It.getId()+"-sendfile-"+bn,Dn)),zt.get(Hr(It)).emit("fileTransferInvitation",Dn)}break;case et.g.CONTACT_DATACHANNEL_INVITATION:if(pr.debug("Received datachannel invitation from "+It.getUsername()),qt.options&&qt.options.type==="internalApiRTC"){if(Lt.g._private.dataChannelInvitations.set(qt.callId.toString(),!0),Lt.g._private.dataCallsOnHold.has(qt.callId.toString())){var lr=new No(Hr(It),qt.callId.toString());lr.takeSnapShotUuid=qt.options.takeSnapShotUuid,zt.get(Hr(It)).emit("internalApiRTCdataChannelInvitation",lr)}}else Lt.g._private.dataChannelInvitations.set(qt.callId.toString(),!0),Lt.g._private.dataCallsOnHold.has(qt.callId.toString())&&zt.get(Hr(It)).emit("dataChannelInvitation",new No(Hr(It),qt.callId.toString()));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:pr.debug("New media available from "+It.getUsername(),qt.fileinfo),zt.get(Hr(It)).emit("newMediaAvailable",{media:qt.media});break;case et.g.CONTACT_EVENTCENTER_DATA_REQUEST:pr.debug("New request for event center data from "+It.getUsername());var dr=apiRTC.eventCenter.getStoredData();if(dr===void 0)return void pr.error("Can't send event center stored data, it's undefined");pr.debug("Sending requested event center data"),It.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_ANSWER,{data:dr});break;case et.g.CONTACT_EVENTCENTER_DATA_ANSWER:if(pr.debug("New event center data from "+It.getUsername()),qt.data===void 0)return void pr.error("Can't handle remote event center data, it's undefined");apiRTC.eventCenter.handleDataAnswer(qt.data);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER:pr.debug("New getAudioFlowStatus from "+qt.requesterId+" on stream "+qt.streamId);var br=It.getContact(qt.requesterId),Rr=It.getLocalStreamPublished();if(Rr===null)return It.sendToContactRemoteStreamError("No stream found on remote",br,qt);br.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,audioFlowStatus:Rr.getAudioFlowStatus()});break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER:pr.debug("New getVideoFlowStatus from "+qt.requesterId+" on stream "+qt.streamId);var Nr=It.getContact(qt.requesterId),Zr=It.getLocalStreamPublished();if(Zr===null)return It.sendToContactRemoteStreamError("No stream found on remote",Nr,qt);Nr.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,videoFlowStatus:Zr.getVideoFlowStatus()});break;case et.g.CONTACT_GET_SETTINGS_IDENTIFIER:pr.debug("CONTACT_GET_SETTINGS_IDENTIFIER");var ba,Wo=It.getContact(qt.requesterId);if((ba=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId))===null)return It.sendToContactRemoteStreamError("No stream found on remote",Wo,qt);ba.getSettings().then(function(ro){Wo.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,settings:ro})}).catch(function(ro){It.sendToContactRemoteStreamError(ro.message,Wo,qt)});break;case et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER:pr.debug("CONTACT_GET_CAPABILITIES_IDENTIFIER");var Cr,gr=It.getContact(qt.requesterId);if((Cr=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId))===null)return It.sendToContactRemoteStreamError("No stream found on remote",gr,qt);Cr.getCapabilities().then(function(ro){gr.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,capabilities:ro})}).catch(function(ro){It.sendToContactRemoteStreamError(ro.message,gr,qt)});break;case et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER:pr.debug("New getConstraints from "+qt.requesterId);var Mr=It.getContact(qt.requesterId),Ur=It.getLocalStreamPublished();if(Ur===null)return It.sendToContactRemoteStreamError("No stream found on remote",Mr,qt);Ur.getConstraints().then(function(ro){Mr.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,constraints:ro})}).catch(function(ro){It.sendToContactRemoteStreamError(ro.message,Mr,qt)});break;case et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER:var _r;pr.debug("CONTACT_APPLY_CONSTRAINTS_IDENTIFIER"),_r=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId);var _a=It.getContact(qt.requesterId);if(_r===null)return It.sendToContactRemoteStreamError("No stream found on remote",_a,qt);_r.applyConstraints(qt.constraints).then(function(){_a.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout}),_r.emitConstraintsChanged(qt.constraints)}).catch(function(ro){It.sendToContactRemoteStreamError(ro.message,_a,qt)});break;case et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER:var no;pr.debug("CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER from :"+qt.requesterId),(no=apiRTC.userAgentInstance.getStreamWithMediaStreamId(qt.mediaStreamId))!=="NOT_FOUND"&&no.emitConstraintsChanged(qt.constraints);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER:pr.debug("getRemoteAudioFlowStatus result :",qt);var vo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);vo===null?pr.error("Can't find the local stream to resolve the request.."):vo.resolvePendingPromise(qt.timeout,qt.audioFlowStatus);break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER:pr.debug("getRemoteVideoFlowStatus result :",qt);var Oo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);Oo===null?pr.error("Can't find the local stream to resolve the request.."):Oo.resolvePendingPromise(qt.timeout,qt.videoFlowStatus);break;case et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER:pr.debug("remote getSettings result :",qt);var Gr=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);Gr===null?pr.error("Can't find the local stream to resolve the request.."):Gr.resolvePendingPromise(qt.timeout,qt.settings);break;case et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER:pr.debug("remote getCapabilities result :",qt);var fo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);fo===null?pr.error("Can't find the local stream to resolve the request.."):fo.resolvePendingPromise(qt.timeout,qt.capabilities);break;case et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER:pr.debug("remote getConstraints result :",qt);var To=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);To===null?pr.error("Can't find the local stream to resolve the request.."):To.resolvePendingPromise(qt.timeout,qt.constraints);break;case et.g.CONTACT_GET_REMOTE_ERROR:pr.debug("remote stream request error:",qt);var fs=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);fs===null?pr.error("Can't find the local stream to reject the request.."):fs.rejectPendingPromise(qt.timeout,qt.message);break;case et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER:pr.debug("remote applyConstraints result :",qt);var hs=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);hs===null?pr.error("Can't find the local stream to resolve the request.."):hs.resolvePendingPromise(qt.timeout,qt.constraints);break;default:var Zo={event:qt.event,content:qt};Xt!==null&&(Zo.conversation=Xt),zt.get(Hr(It)).emit("customEvent",Zo)}}}).onEvent("incomingCall",function(Ht){if(Ht.detail.callerId.toString()===It.getId()){var qt=Ht.detail.callId.toString();if(Ht.detail.callType==="data")if(pr.debug("Received file transfer invitation from "+It.getUsername()),Lt.g._private.dataCallsFileInfo.has(qt)){var Xt=Lt.g._private.dataCallsFileInfo.get(qt),en=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(It.getId()+"-sendfile-"+qt)?(en=apiRTC.userAgentInstance.currentSession.invitationsMap.get(It.getId()+"-sendfile-"+qt),pr.debug("invitation already exist :",en)):(en=new eo(Hr(It),qt,Xt),apiRTC.userAgentInstance.currentSession.invitationsMap.set(It.getId()+"-sendfile-"+qt,en)),zt.get(Hr(It)).emit("fileTransferInvitation",en)}else if(Lt.g._private.dataChannelInvitations.has(qt))if(Ht.detail.data&&Ht.detail.data.type==="internalApiRTC"){var rn=new No(Hr(It),qt);rn.takeSnapShotUuid=Ht.detail.data.takeSnapShotUuid,zt.get(Hr(It)).emit("internalApiRTCdataChannelInvitation",rn)}else zt.get(Hr(It)).emit("dataChannelInvitation",new No(Hr(It),qt));else pr.info("File information has not been received yet, putting invitation on hold"),Lt.g._private.dataCallsOnHold.set(qt);else if(Ht.detail.callType==="screenSharing"||Ht.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){pr.debug("Received screenSharingCallInvitation from "+It.getUsername());var bn=new xr(Hr(It),qt,Ht.detail.callType,{isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall});zt.get(Hr(It)).emit("incomingScreenSharingCallInvitation",bn)}else{pr.debug("Received screenSharingCall from "+It.getUsername());var Dn=Wl.getOrCreateCall(qt,Hr(It),{started:!0,isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall});zt.get(Hr(It)).emit("incomingScreenSharingCall",Dn)}else pr.info("Received call invitation from "+It.getUsername()),zt.get(Hr(It)).emit("incomingCall",new xr(Hr(It),qt,Ht.detail.callType,{isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall}))}}).onEvent("hangup",function(Ht){var qt=Ht.detail.callId.toString();It.getId()===Ht.detail.remoteId.toString()&&(pr.debug("hangup event :",Ht.detail),It.fileTransfers.includes(qt)&&(pr.info("File transfer finished from "+It.getUsername()),It.fileTransfers.splice(It.fileTransfers.indexOf(qt),1)))}).onEvent("sendDataChannelError",function(Ht){var qt=Ht.detail.callId.toString();It.getId()===Ht.detail.remoteId.toString()&&It.fileTransfers.includes(qt)&&(pr.info("File transfer error from "+It.getUsername()),zt.get(Hr(It)).emit("fileTransferError",{error:"sendDataChannelError",invitationId:qt}))}).onEvent("fetchUserDataAnswer",function(Ht){It.getId()===Ht.detail.id.toString()&&(It.userData=new Io(Ht.detail.userData),It.promises.forEach(function(qt){Ht.detail.timeout===qt.timeout&&(clearTimeout(qt.timeout),qt.resolve(Ht.detail.userData))}))}),It}return $t=Jt,Zt=[{key:"getId",value:function(){return xu.get(this)}},{key:"id",get:function(){return pr.warn("contact.id is deprecated, please use contact.getId() instead"),this.getId()}},{key:"fetchProfileInformation",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Ht,qt){It.profile===null||jt?ts.getUserProfile(Kr.getActiveApiKey(),It.getId(),Ct).then(function(Xt){It.profile=Xt,Ht(Xt)}).catch(qt):Ht(It.profile)})}},{key:"getActiveStreams",value:function(){return this.streams.values()}},{key:"getLocalStreamWithCallId",value:function(Ct){for(var It=null,jt=lo.getLocalStreams(),Ht=jt.next();!Ht.done;){for(var qt=Ht.value,Xt=qt.publishedInConversations.values(),en=Xt.next();!en.done;)en.value===Ct&&(pr.debug("Finding Stream in a conversation"),It=qt),en=Xt.next();qt.callId===Ct&&(pr.debug("Finding Stream in a call"),It=qt),Ht=jt.next()}return It}},{key:"getLocalStreamPublished",value:function(){var Ct=lo.getLocalStreams().next();return Ct.value===void 0?null:Ct.value}},{key:"getLocalStreamWithMediaStreamId",value:function(Ct){for(var It=null,jt=lo.getLocalStreams(),Ht=jt.next();!Ht.done;){var qt=Ht.value;if(qt.data.id===Ct)return qt;Ht=jt.next()}return It}},{key:"getRemoteStreamSubscribed",value:function(Ct,It){var jt=qr.getActiveSession().getCall(Ct);if(jt){pr.debug("remote stream is associated to a call");var Ht,qt=_u(jt.getReceivedStreams());try{for(qt.s();!(Ht=qt.n()).done;){var Xt=Ht.value;if(Xt.getId()===It)return Xt}}catch(br){qt.e(br)}finally{qt.f()}}else{var en=qr.getActiveSession().getActiveConversations(),rn=qr.getActiveSession().getActiveConferences();for(var bn in en){var Dn=en[bn].getSubscribedStream(It);if(Dn!==void 0)return pr.debug("remote stream is associated to a conversation"),Dn}for(var lr in rn){var dr=rn[lr].getSubscribedStream(It);if(dr!==void 0)return pr.debug("remote stream is associated to a conference"),dr}}return null}},{key:"addMessageToHistory",value:function(Ct,It,jt,Ht){Bl.get(this).indexOf(jt.toString())===-1&&(this.previousMessages.push({content:Ct,timestamp:It,uuid:jt,fromContact:Ht}),Bl.get(this).push(jt.toString()))}},{key:"getPreviousMessages",value:function(){return this.previousMessages.sort(function(Ct,It){return new Date(It.timestamp)-new Date(Ct.timestamp)}),this.previousMessages}},{key:"getUserData",value:function(){return this.userData}},{key:"getRemoteAccessSupport",value:function(){var Ct=!1;return this.userData.remoteAccessUserSupport==="ON"&&(Ct=!0),Ct}},{key:"fetchUserData",value:function(){var Ct=this;return new Promise(function(It,jt){var Ht=setTimeout(function(){jt("Timeout error during fetchUserData() process")},5e3);Ct.promises.push({timeout:Ht,resolve:It}),apiRTC.session.fetchUserData({apiKey:Kr.getActiveApiKey(),id:Ct.getId(),timeout:Ht})})}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.getId()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"fetchWebSessionInformation",value:function(Ct){var It=this;return new Promise(function(jt,Ht){Ct instanceof qr?Vl.has(It.getId()+":"+Ct.getId())?jt(Vl.get(It.getId()+":"+Ct.getId())):ts.getWebSession(Ct,It,Kr.getActiveApiKey()).then(function(qt){Vl.set(It.getId()+":"+Ct.getId(),qt),jt(qt)}).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_OTHER,"fetchWebSessionInformation() - could not fetch web session information",pr))}):Ht(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"fetchWebSessionInformation() - parameter is not an instance of apiRTC.Session",pr))})}},{key:"loadMessageHistory",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){It.fetchWebSessionInformation(Ct).then(function(Xt){return ts.getSessionHistory(Xt.webSessionId,Ct.getToken(),jt)}).then(function(Xt){pr.debug("loadMessageHistory() - got messages",Xt.messages);var en,rn=_u(Xt.messages);try{for(rn.s();!(en=rn.n()).done;){var bn=en.value;It.addMessageToHistory(bn.value,bn.timestamp,bn.uuid,bn.destId.toString()!==It.getId())}}catch(Dn){rn.e(Dn)}finally{rn.f()}Ht()}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"loadMessageHistory() - could not load session history",pr))})})}},{key:"addToGroup",value:function(Ct){this.inGroup(Ct)||(this.groups.push(Ct),zt.get(this).emit("joinGroup",Ct))}},{key:"removeFromGroup",value:function(Ct){this.inGroup(Ct)&&(this.groups.splice(this.groups.indexOf(Ct),1),zt.get(this).emit("leaveGroup",Ct))}},{key:"inGroup",value:function(Ct){return this.groups.includes(Ct)}},{key:"isOnline",value:function(){return this.groups.length!==0}},{key:"sendData",value:function(Ct){var It=this;return this.isOnline()||pr.warn("sendData() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(jt,Ht){Kr.sendData(It.getId(),{event:et.g.CONTACT_SEND_DATA_IDENTIFIER,content:Ct}).then(jt).catch(function(qt){switch(qt){case et.g.ERROR_TIMED_OUT:Ht(Lt.g.createError(et.g.ERROR_TIMED_OUT,"sendData() - Data transmission timed out ",pr));break;case et.g.ERROR_NOT_FOUND:Ht(Lt.g.createError(et.g.ERROR_NOT_FOUND,"sendData() - Contact was not found ",pr));break;default:Ht(Lt.g.createError(et.g.ERROR_OTHER,"sendData() - Data default error ",pr))}})})}},{key:"sendCustomEvent",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||pr.warn("sendCustomEvent() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,qt){var Xt=jt;Xt.event=Ct,Kr.sendData(It.getId(),Xt).then(Ht).catch(function(en){switch(en){case et.g.ERROR_TIMED_OUT:qt(Lt.g.createError(et.g.ERROR_TIMED_OUT,"sendCustomEvent() - Data transmission timed out ",pr));break;case et.g.ERROR_NOT_FOUND:qt(Lt.g.createError(et.g.ERROR_NOT_FOUND,"sendCustomEvent() - Contact was not found ",pr));break;default:qt(Lt.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - Data transmission timed out ",pr))}})})}},{key:"sendRequest",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||pr.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,qt){var Xt=It.getNewCSeq();It.sendRequestReceiveDataHandlerTable[Xt]={},It.sendRequestReceiveDataHandlerTable[Xt].handler=function(rn){pr.debug("Received data e.detail.data : ",rn.detail.data),rn.detail.data.apiRTCAnswer===!0&&(rn.detail.data.requestUUID===Xt?(Kr.removeEventListener("receiveData",It.sendRequestReceiveDataHandlerTable[Xt].handler),Ht(rn.detail.data)):pr.debug("uuid is not correct"))},Kr.onEvent("receiveData",It.sendRequestReceiveDataHandlerTable[Xt].handler);var en=jt;en.apiRTCRequest=!0,en.requestType=Ct,en.uuid=Xt,Kr.sendData(It.getId(),en).then(function(){pr.debug("sendData ok")}).catch(function(rn){pr.error("Error on sendData",rn),qt()})})}},{key:"sendAnswer",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||pr.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,qt){var Xt=jt;Xt.apiRTCAnswer=!0,Xt.answerType=Ct,Kr.sendData(It.getId(),Xt).then(function(){Ht()}).catch(function(en){pr.error("Error on sendData",en),qt()})})}},{key:"sendDataAnswer",value:function(Ct,It,jt){this.getContact(Ct.senderId).sendAnswer(It,jt).then(function(){pr.debug("sendAnswer OK")}).catch(function(Ht){pr.error("Error on sendAnswer",Ht)})}},{key:"sendSnapshotWithDataChannel",value:function(Ct,It,jt,Ht){var qt=this;Ct.sendData(It).then(function(Xt){pr.debug("Snapshot data sent :",Xt),Ht.result="OK",qt.sendDataAnswer(jt,et.g.CONTACT_TAKESNAPSHOT_ANSWER,Ht)}).catch(function(Xt){pr.error("Snapshot data sending error",Xt),Ht.reason="ERROR_ON_SNAPSHOT_DATA_SENDING",qt.sendDataAnswer(jt,et.g.CONTACT_TAKESNAPSHOT_ANSWER,Ht)})}},{key:"manageSnapshotDataChannel",value:function(Ct,It,jt){var Ht=this,qt={type:"internalApiRTC",label:"snapshot",requestUUID:It.data.uuid,takeSnapShotUuid:It.data.options.takeSnapShotUuid},Xt=this.startDataChannel(qt);Xt.on("opened",function(en){en.type==="sendDataChannelOpen"&&(pr.debug("Datachannel for sending snapshot is opened :",en),Ht.sendSnapshotWithDataChannel(Xt,Ct,It,jt))}),Xt.on("closed",function(){pr.debug("Datachannel for snapshot is closed")}),Xt.on("ended",function(){pr.debug("Datachannel for snapshot is ended")})}},{key:"manageApiRTCStreamRequest",value:function(Ct,It){var jt=this;pr.debug("manageApiRTCStreamRequest : ",Ct);var Ht=Ct.data.requestType,qt={};qt.requestUUID=Ct.data.uuid,qt.result="NOK";var Xt=null;if((Xt=apiRTC.userAgentInstance.getStreamWithRoomNameAndCallId(It.getName(),Ct.data.streamId))==="NOT_FOUND")qt.reason="STREAM_NOT_FOUND",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt);else if(Ht!==void 0)switch(Ht){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:Xt.disableAudio().then(function(){qt.result="OK",jt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_DISABLE_AUDIO",jt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,qt)});break;case et.g.CONTACT_ENABLE_AUDIO_REQUEST:Xt.enableAudio().then(function(){qt.result="OK",jt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_ENABLE_AUDIO",jt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,qt)});break;case et.g.CONTACT_DISABLE_VIDEO_REQUEST:Xt.disableVideo().then(function(){qt.result="OK",jt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_DISABLE_VIDEO",jt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,qt)});break;case et.g.CONTACT_ENABLE_VIDEO_REQUEST:Xt.enableVideo().then(function(){qt.result="OK",jt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_ENABLE_VIDEO",jt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)});break;case et.g.CONTACT_TAKESNAPSHOT_REQUEST:var en=Ct.data.options;en!==void 0?delete Ct.data.options.applyRemotely:en={},Xt.takeSnapshot(en).then(function(rn){pr.debug("takeSnapshot OK"),jt.manageSnapshotDataChannel(rn,Ct,qt)}).catch(function(){pr.error("takeSnapshot NOK"),qt.reason="ERROR_ON_TAKE_SNAPSHOT",jt.sendDataAnswer(Ct,et.g.CONTACT_TAKESNAPSHOT_ANSWER,qt)});break;default:pr.error("not a defined stream apiRTC request :",Ht),qt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,Ht,qt)}else pr.error("requestType is undefined :",Ht),qt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)}},{key:"manageApiRTCRequest",value:function(Ct,It){pr.debug("manageApiRTCRequest : ",Ct);var jt=Ct.data.requestType,Ht={};if(Ht.requestUUID=Ct.data.uuid,Ht.result="NOK",jt!==void 0)switch(jt){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:case et.g.CONTACT_ENABLE_AUDIO_REQUEST:case et.g.CONTACT_DISABLE_VIDEO_REQUEST:case et.g.CONTACT_ENABLE_VIDEO_REQUEST:case et.g.CONTACT_TAKESNAPSHOT_REQUEST:this.manageApiRTCStreamRequest(Ct,It);break;default:pr.error("not a defined apiRTC request :",jt),Ht.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,jt,Ht)}}},{key:"sendMessage",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isOnline()||pr.warn("sendMessage() - contact "+this.getUsername()+" does not seem to be connected.");var Ht=null,qt=function(){return new Promise(function(Xt,en){jt.hasOwnProperty("session")?It.fetchWebSessionInformation(jt.session).then(function(rn){Xt({save:!0,cloudSessionId:rn.webSessionId,apiRTCId:jt.session.getId()})}).catch(en):Xt({})})};return new Promise(function(Xt,en){return typeof Ct!="string"?en(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is not instance of string",pr)):Ct===""?en(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",pr)):void qt().then(function(rn){Ht=rn,pr.info("sendMessage() - with options :",Ht),Kr.sendMessage(It.getId(),Ct,Ht).then(function(bn){It.addMessageToHistory(Ct,Math.floor(Date.now()/1e3),bn,!1),Xt(bn)}).catch(function(bn){switch(bn){case et.g.ERROR_TIMED_OUT:en(Lt.g.createError(et.g.ERROR_TIMED_OUT,"sendMessage() - Data transmission timed out ",pr));break;case et.g.ERROR_NOT_FOUND:en(Lt.g.createError(et.g.ERROR_NOT_FOUND,"sendMessage() - Contact was not found ",pr));break;default:en(Lt.g.createError(et.g.ERROR_OTHER,"sendMessage() - Data transmission timed out ",pr))}})},function(rn){en(Lt.g.createError(et.g.ERROR_OTHER,"sendMessage() - Error occured when fetching options for sending message",pr))})})}},{key:"inviteTo",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.sendConversationInvitation(Ct,It)}},{key:"sendConversationInvitation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ct instanceof Bo?Ct.sendInvitation(this,It):(pr.error("sendConversationInvitation() - Parameter is not a conversation"),null)}},{key:"sendWhiteboardInvitation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kr.whiteBoardClient.roomId!==Ct&&(Kr.whiteBoardClient.leaveRoom(),Kr.whiteBoardClient.start(),Kr.whiteBoardClient.joinRoom(Ct));var jt=It.context?It.context:null,Ht={};It.cloudConversationId&&(Ht.convId=It.cloudConversationId),Kr.whiteBoardClient.inviteInRoom(Ct,this.getId(),jt,Ht);var qt=new Lo(this,null);return qt.id="wb-"+Ct,qt.type="whiteboard",qt}},{key:"call",value:function(Ct){var It,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{mediaTypeForOutgoingCall:"VIDEO",record:!1};pr.debug("call()"),this.isOnline()||pr.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var Ht={},qt=Lt.g.assignObject({},jt),Xt=!!jt.hasOwnProperty("audioOnly")&&jt.audioOnly;jt.hasOwnProperty("record")&&(qt.record!==void 0&&qt.record!==null||(qt.record=jt.record)),Ct!==null&&Ct instanceof lo&&(qt.userMediaStreamId=Ct.userMediaStreamId,Ct.isScreensharing()&&(qt.forceCallType="screenSharing")),qt.cloudConversationId&&(Ht.cloudConvId=qt.cloudConversationId,delete qt.cloudConversationId),It=Xt?Kr.webRTCClient.callAudio(this.getId(),Ht,qt):Kr.webRTCClient.call(this.getId(),Ht,qt);var en=Wl.getOrCreateCall(It,this,{isRecorded:qt.record});return en}},{key:"shareScreen",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.isOnline()||pr.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var It={},jt=null,Ht=Ct,qt=Ct.captureSourceType;pr.warn("call() - contact "+this.getUsername()+" does not seem to be connected."),jt=Kr.webRTCClient.shareScreen(this.getId(),It,qt);var Xt=Wl.getOrCreateCall(jt,this,{isRecorded:Ht.record});return Xt}},{key:"startDataChannel",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isOnline()||pr.warn("startDataChannel() - contact "+this.getUsername()+" does not seem to be connected."),!(ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")){var It=Kr.webRTCClient.startDataChannel(this.getId(),Ct);Kr.sendData(this.getId(),{callId:It,event:et.g.CONTACT_DATACHANNEL_INVITATION,options:Ct});var jt=new ys(It,this,{type:et.g.DATACHANNEL_TYPE_SEND});return jt}pr.warn("Cannot startDataChannel as it is not supported on Edge")}},{key:"sendFile",value:function(Ct,It){if(this.isOnline()||pr.warn("sendFile() - contact "+this.getUsername()+" does not seem to be connected."),ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")return pr.warn("Cannot sendFile as Datachannel is not supported on Edge"),null;var jt=Kr.webRTCClient.startDataChannel(this.getId()),Ht=this;if(jt===void 0)return pr.warn("Error on startDataChannel"),null;Kr.sendData(this.getId(),{fileInfo:Ct,callId:jt,event:et.g.CONTACT_SEND_FILEINFO_IDENTIFIER}),Kr.onEvent("sendDataChannelOpen",function Xt(en){pr.debug("sendFile() - DataChannel open",en.detail),en.detail.callId.toString()===jt.toString()&&(Kr.webRTCClient.sendDataWithCallId(jt,{file:It,name:Ct.name,type:Ct.type},function(rn){pr.trace("sendFile() - progress : ",rn);var bn={uuid:rn.uuid,fileSize:rn.fileSize,remainingSize:rn.remainingSize,percentage:rn.percentage,sendChunkNb:rn.sendChunkNb,transferDuration:rn.transferDuration,lastPacket:rn.lastPacket};zt.get(Ht).emit("fileTransferProgress",{fileInfo:Ct,transferInformation:bn}),rn.transferEnded&&zt.get(Ht).emit("fileSentSuccessfully",{fileInfo:Ct,transferInformation:bn})}),Kr.removeEventListener("sendDataChannelOpen",Xt))}),this.fileTransfers.push(jt.toString());var qt=new Lo(this,null);return qt.id=jt.toString(),qt.type="sendFile",qt.on("response",function(){qt.getStatus()!==et.g.INVITATION_STATUS_ACCEPTED&&pr.log("sendFile() - invitation has not been accepted, cleaning listeners")}),qt}},{key:"pushMedia",value:function(Ct,It){var jt=this,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(qt,Xt){jt.fetchWebSessionInformation(It).then(function(en){return Ht.token=It.token,ts.pushConversationMedia(en.conversationId,Ct,Kr.getActiveApiKey(),Ht)}).then(function(en){Kr.sendData(jt.getId(),{event:et.g.CONTACT_NEW_MEDIA_IDENTIFIER,media:{url:en.url,id:en.id}}),qt({url:en.url,id:en.id})}).catch(function(en){Xt(Lt.g.createError(et.g.ERROR_OTHER,"pushMedia() - failed to push media",pr))})})}},{key:"fetchMediaList",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pr.debug("fetchMediaList()"),new Promise(function(Ht,qt){It.fetchWebSessionInformation(Ct).then(function(Xt){return jt.token=Ct.getToken(),ts.getConversationMediaList(Xt.conversationId,Kr.getActiveApiKey(),jt)}).then(Ht).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"getMediaList() - failed to get media list",pr))})})}},{key:"sendEventCenterDataRequest",value:function(){return this.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_REQUEST)}},{key:"getContact",value:function(Ct){return qr.getActiveSession().getOrCreateContact(Ct)}},{key:"sendToContactRemoteStreamError",value:function(Ct,It,jt){pr.debug("sendToContactRemoteStreamError",Ct,It,jt),It.sendCustomEvent(et.g.CONTACT_GET_REMOTE_ERROR,{callId:jt.callId,streamId:jt.streamId,timeout:jt.timeout,message:Ct})}},{key:"sendRemoteAccessInvitation",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){if(It.isOnline()||pr.warn("sendRemoteAccessInvitation() - contact "+It.getUsername()+" does not seem to be connected."),apiRTC.session.remoteAccessInvitation!==null)return pr.warn("sendRemoteAccessInvitation() already ongoing"),qt(new Error("sendRemoteAccessInvitation() already ongoing"));var Xt=new $p(It,Ct,jt);apiRTC.session.remoteAccessInvitation=Xt,Xt.type=et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER;var en={event:et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER,invitationId:Xt.id,roomname:Xt.conversation._getTechnicalName(),sendTime:Xt.sendTime};Xt.send(en).then(function(){Ht(Xt)}).catch(function(rn){return pr.error("Contact#sendRemoteAccessInvitation send error:",rn),qt(new Error(rn))})})}}],Pt=[{key:"getAvailableEvents",value:function(){return Bp}}],Zt&&Mu($t.prototype,Zt),Pt&&Mu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un);function Hl(Wt){return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Hl(Wt)}function Vp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function zl(Wt,$t){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},zl(Wt,$t)}function Hp(Wt,$t){if($t&&(Hl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Ms(Wt){return Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ms(Wt)}var co=ft.Y.get("ConversationCall"),zr=Rn.get(),Gl=function(Wt){(function(Jt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Jt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Jt,writable:!0,configurable:!0}}),Object.defineProperty(Jt,"prototype",{writable:!1}),Ct&&zl(Jt,Ct)})(ln,Wt);var $t,Zt,Pt,Bt,sn=(Pt=ln,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Jt,Ct=Ms(Pt);if(Bt){var It=Ms(this).constructor;Jt=Reflect.construct(Ct,arguments,It)}else Jt=Ct.apply(this,arguments);return Hp(this,Jt)});function ln(Jt,Ct,It){var jt;return function(Ht,qt){if(!(Ht instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,ln),(jt=sn.call(this,co)).conversation=Jt,jt.callId=Ct,jt.stream=It,jt}return $t=ln,Zt=[{key:"getConversation",value:function(){return this.conversation}},{key:"getCallId",value:function(){return this.callId}},{key:"getStream",value:function(){return this.stream}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"isStreamed",value:function(){return!!this.streamingStatus}},{key:"getStreamingInfo",value:function(){return this.isStreamed()?this.streamingStatus:null}},{key:"startRecordingPublishedStream",value:function(Jt){var Ct=this;return Jt||(Jt={}),new Promise(function(It,jt){if(Ct.asyncCallbacks)return jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - busy",co));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(zr.removeEventListener("error",Ct.asyncCallbacks.error),zr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - timeout",co))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(en){if(String(en.detail.convId)===Ct.conversation.getCloudConversationId()&&en.detail.callId===Ct.callId&&en.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(zr.removeEventListener("error",Ct.asyncCallbacks.error),zr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - "+en.detail.errorInfo,co))},Ct.asyncCallbacks.recordingStarted=function(en){if(String(en.detail.convId)===Ct.conversation.getCloudConversationId()&&en.detail.callId===Ct.callId){Ct.asyncCallbacks&&(zr.removeEventListener("error",Ct.asyncCallbacks.error),zr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var rn=Lt.g.parseRecordingEvent("MCURecordingStarted",en.detail);return It(rn)}},zr.onEvent("error",Ct.asyncCallbacks.error),zr.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted);var Ht="AUDIO-VIDEO";Jt.audioOnly===!0?Ht="AUDIO-ONLY":Jt.videoOnly===!0&&(Ht="VIDEO-ONLY");var qt="userStream";Lt.g.isPropertyTypeof(Jt,"customIdInFilename","string")&&(qt=Jt.customIdInFilename);var Xt={};Lt.g.isPropertyTypeof(Jt,"data","object")&&(Xt=Object.assign({},Jt.data)),Lt.g.isPropertyTypeof(Jt,"ttl","number")&&Jt.ttl>0&&(Xt.ttl=Jt.ttl),zr.webRTCClient.startRecording(Ht,qt,Ct.conversation.getCloudConversationId(),Ct.callId,Xt)})}},{key:"stopRecordingPublishedStream",value:function(){var Jt=this;return new Promise(function(Ct,It){if(Jt.asyncCallbacks)return It(Lt.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - busy",co));Jt.asyncCallbacks={},Jt.asyncCallbacks.timeoutId=setTimeout(function(){return Jt.asyncCallbacks&&(zr.removeEventListener("error",Jt.asyncCallbacks.error),zr.removeEventListener("MCURecordingStopped",Jt.asyncCallbacks.recordingStopped),delete Jt.asyncCallbacks),Ct(Jt.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Jt.asyncCallbacks.error=function(jt){if(String(jt.detail.convId)===Jt.conversation.getCloudConversationId()&&jt.detail.callId===Jt.callId&&jt.detail.errorCode.indexOf("STOP_RECORD")>=0)return Jt.asyncCallbacks&&(zr.removeEventListener("error",Jt.asyncCallbacks.error),zr.removeEventListener("MCURecordingStopped",Jt.asyncCallbacks.recordingStopped),clearTimeout(Jt.asyncCallbacks.timeoutId),delete Jt.asyncCallbacks),It(Lt.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - "+jt.detail.errorInfo,co))},Jt.asyncCallbacks.recordingStopped=function(jt){if(String(jt.detail.convId)===Jt.conversation.getCloudConversationId()&&jt.detail.callId===Jt.callId){Jt.asyncCallbacks&&(zr.removeEventListener("error",Jt.asyncCallbacks.error),zr.removeEventListener("MCURecordingStopped",Jt.asyncCallbacks.recordingStopped),clearTimeout(Jt.asyncCallbacks.timeoutId),delete Jt.asyncCallbacks);var Ht=Lt.g.parseRecordingEvent("MCURecordingStopped",jt.detail);return Ct(Ht)}},zr.onEvent("error",Jt.asyncCallbacks.error),zr.onEvent("MCURecordingStopped",Jt.asyncCallbacks.recordingStopped),zr.webRTCClient.stopRecording(Jt.callId)})}},{key:"replacePublishedStream",value:function(Jt,Ct){var It=this;return co.debug("replacePublishedStream"),new Promise(function(jt,Ht){if(Jt===null){if(!Lt.g.isPropertyTypeof(Ct,"getStream","function"))return Ht(new Error("replacePublishedStream() - Cannot replace stream, wrong arguments"));It.stream.publishedInConversations.delete(It.conversation.getName()),It.conversation.conversationPublishedStreams.delete(It.stream.userMediaStreamId);var qt={getUserMediaStreamId:function(){return Ct.getStream().then(function(en){It.stream=en,en.publishedInConversations.set(It.conversation.getName(),It.callId),It.conversation.callIdToStreamId.set(It.callId,en.userMediaStreamId);var rn={contact:null,isRemote:!1,hasAudio:en.hasAudio(),hasVideo:en.hasVideo(),isScreensharing:en.isScreensharing(),streamId:en.userMediaStreamId,callId:It.callId};return It.conversation.conversationPublishedStreams.set(en.userMediaStreamId,rn),en.userMediaStreamId}).catch(Ht)}};zr.webRTCClient.webRTCClient.addMedia(It.callId,!0,null,qt).then(function(en){var rn=function(bn){if(So.has(bn))return So.get(bn);var Dn=apiCC.getUserMediaStream(bn);if(Dn){var lr="audio";return Dn.video===!0&&(lr="video"),new lo(Dn.stream,{type:lr,constructor:!0,userMediaStreamId:Dn.userMediaStreamId})}return null}(en.userMediaStreamId);return rn!==null&&It.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:It.getCallId(),newStreamId:rn.data.id,oldStreamId:en.oldMediaStreamId}),jt(rn)}).catch(function(en){return Ht(new Error("replacePublishedStream() - "+en))})}else{It.stream.publishedInConversations.delete(It.conversation.getName()),It.conversation.conversationPublishedStreams.delete(It.stream.userMediaStreamId),zr.webRTCClient.webRTCClient.addMedia(It.callId,!0,Jt.userMediaStreamId).then(function(en){return It.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:It.getCallId(),newStreamId:Jt.data.id,oldStreamId:en.oldMediaStreamId}),jt(Jt)}).catch(function(en){return Ht(new Error("replacePublishedStream() - "+en))}),It.stream=Jt,Jt.publishedInConversations.set(It.conversation.getName(),It.callId),It.conversation.callIdToStreamId.set(It.callId,Jt.userMediaStreamId);var Xt={contact:null,isRemote:!1,hasAudio:Jt.hasAudio(),hasVideo:Jt.hasVideo(),isScreensharing:Jt.isScreensharing(),streamId:Jt.userMediaStreamId,callId:It.callId};It.conversation.conversationPublishedStreams.set(Jt.userMediaStreamId,Xt)}})}},{key:"startStreaming",value:function(){var Jt=this,Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(It,jt){return Jt.asyncCallbacks?jt(Lt.g.createError(et.g.ERROR_OTHER,"startStreaming() - busy",co)):zr.webRTCClient.startStreaming(Ct.service,Ct.server,Ct.streamKey,Jt.callId)?(Jt.asyncCallbacks={},Jt.asyncCallbacks.timeoutId=setTimeout(function(){return Jt.asyncCallbacks&&(zr.removeEventListener("MCUStreamingStarted",Jt.asyncCallbacks.streamingStarted),delete Jt.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"startStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STARTED_DELAY),Jt.asyncCallbacks.streamingStarted=function(Ht){if(Ht.detail.roomName===Jt.conversation._getTechnicalName()&&Ht.detail.callId===Jt.callId){Jt.asyncCallbacks&&(zr.removeEventListener("MCUStreamingStarted",Jt.asyncCallbacks.streamingStarted),clearTimeout(Jt.asyncCallbacks.timeoutId),delete Jt.asyncCallbacks);var qt=$s("MCUStreamingStarted",Ht.detail);return It(qt)}},void zr.onEvent("MCUStreamingStarted",Jt.asyncCallbacks.streamingStarted)):jt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"startStreaming() - cannot start streaming",co))})}},{key:"stopStreaming",value:function(){var Jt=this;return new Promise(function(Ct,It){return Jt.asyncCallbacks?It(Lt.g.createError(et.g.ERROR_OTHER,"stopStreaming() - busy",co)):zr.webRTCClient.stopStreaming(Jt.callId)?(Jt.asyncCallbacks={},Jt.asyncCallbacks.timeoutId=setTimeout(function(){return Jt.asyncCallbacks&&(zr.removeEventListener("MCUStreamingStopped",Jt.asyncCallbacks.streamingStopped),delete Jt.asyncCallbacks),It(Lt.g.createError(et.g.ERROR_OTHER,"stopStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STOPPED_DELAY),Jt.asyncCallbacks.streamingStopped=function(jt){if(jt.detail.roomName===Jt.conversation._getTechnicalName()&&jt.detail.callId===Jt.callId){Jt.asyncCallbacks&&(zr.removeEventListener("MCUStreamingStopped",Jt.asyncCallbacks.streamingStopped),clearTimeout(Jt.asyncCallbacks.timeoutId),delete Jt.asyncCallbacks);var Ht=$s("MCUStreamingStopped",jt.detail);return Ct(Ht)}},void zr.onEvent("MCUStreamingStopped",Jt.asyncCallbacks.streamingStopped)):It(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"stopStreaming() - cannot stop streaming",co))})}},{key:"changeStreamPriority",value:function(Jt){var Ct=this;return new Promise(function(It,jt){return zr.webRTCClient.changeStreamPriority(Ct.callId,Jt)?(Ct.conversation.changeStreamPriority(Ct.stream.userMediaStreamId,!1,Jt),It()):jt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"changeStreamPriority() - cannot change stream priority",co))})}},{key:"updatePublishedStream",value:function(Jt,Ct){var It=this;return new Promise(function(jt,Ht){if(Jt!=="audio"&&Jt!=="video")return Ht(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"updatePublishedStream() - wrong type",co));var qt=Ct?"sendonly":"inactive";return zr.webRTCClient.webRTCClient.processUpdateStream(It.callId,Jt,qt)?jt():Ht(Lt.g.createError(et.g.ERROR_OTHER,"updatePublishedStream() - cannot update",co))})}}],Zt&&Vp($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),ln}(un);function jo(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Pu(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?Pu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function Pu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Du(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var ao=ft.Y.get("ContactCatalog"),mo=null,Mo={},yo={leftGroup:{},joinedGroup:{},userDataChanged:[]},Ro=function(){function Wt(){if(function(sn,ln){if(!(sn instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,Wt),mo!==null)throw"Cannot construct singleton ContactCatalog";this.contactList=new Map,this.eventEmitter=new dt,mo=this;var Bt=Rn.get();Bt.onEvent("connectedUsersListUpdate",function(sn){var ln=apiRTC.session.apiCCId.toString(),Jt={};switch(sn.detail.updateReason){case"newConnectionState":if(sn.detail.status==="online"){ao.debug("new connection");var Ct,It=jo(sn.detail.usersList);try{for(It.s();!(Ct=It.n()).done;)(Jt={userId:Ct.value,group:sn.detail.group}).userId.toString()!==ln&&Gp(Jt)}catch(bn){It.e(bn)}finally{It.f()}}else{ao.debug("new disconnection");var jt,Ht=jo(sn.detail.usersList);try{for(Ht.s();!(jt=Ht.n()).done;)Jt={userId:jt.value,group:sn.detail.group},Mo[Jt.group]===void 0&&(Mo[Jt.group]={}),Jt.userId.toString()!==ln&&(Mo[Jt.group][Jt.userId.toString()]=setTimeout(zp(Jt),Bt.contactDisconnectionDelay))}catch(bn){Ht.e(bn)}finally{Ht.f()}}break;case"userDataUpdate":ao.debug("userDataUpdate");var qt,Xt=jo(sn.detail.usersList);try{for(Xt.s();!(qt=Xt.n()).done;)(Jt={userId:qt.value,group:sn.detail.group}).userId.toString()!==ln&&Nu(Jt)}catch(bn){Xt.e(bn)}finally{Xt.f()}break;case"callState":ao.debug("callState change for user");var en,rn=jo(sn.detail.usersList);try{for(rn.s();!(en=rn.n()).done;)(Jt={userId:en.value,group:sn.detail.group}).userId.toString()!==ln&&Nu(Jt)}catch(bn){rn.e(bn)}finally{rn.f()}break;default:ao.warn("default case for updateReason value")}}).onEvent("groupUnsubscribed",function(sn){var ln,Jt=mo.getContacts(sn),Ct=jo(Jt.keys());try{for(Ct.s();!(ln=Ct.n()).done;){var It=ln.value;Jt.get(It).removeFromGroup(sn)}}catch(jt){Ct.e(jt)}finally{Ct.f()}})}var $t,Zt,Pt;return $t=Wt,Zt=[{key:"onUpdate",value:function(Bt){this.eventEmitter.on("update",Bt)}},{key:"removeUpdateListener",value:function(Bt){this.eventEmitter.off("update",Bt)}},{key:"getContact",value:function(Bt){return Bt!=null&&this.contactList.has(Bt.toString())?this.contactList.get(Bt.toString()):null}},{key:"getOrCreateContact",value:function(Bt){var sn=null;if(Bt!=null)if(this.contactList.has(Bt.toString()))sn=this.contactList.get(Bt.toString());else try{sn=new Uo(Bt.toString(),{}),this.contactList.set(Bt.toString(),sn)}catch(ln){ao.debug("Contact not added : "+ln)}return sn}},{key:"getContacts",value:function(Bt){if(Bt==null)return this.contactList;var sn,ln=new Map,Jt=jo(this.contactList.keys());try{for(Jt.s();!(sn=Jt.n()).done;){var Ct=sn.value;this.contactList.get(Ct).inGroup(Bt)&&ln.set(Ct,this.contactList.get(Ct))}}catch(It){Jt.e(It)}finally{Jt.f()}return ln}},{key:"getOnlineContacts",value:function(Bt){var sn=new Map;if(Bt==null){var ln,Jt=jo(this.contactList.keys());try{for(Jt.s();!(ln=Jt.n()).done;){var Ct=ln.value;this.contactList.get(Ct).isOnline()&&sn.set(Ct,this.contactList.get(Ct))}}catch(qt){Jt.e(qt)}finally{Jt.f()}}else{var It,jt=jo(this.contactList.keys());try{for(jt.s();!(It=jt.n()).done;){var Ht=It.value;this.contactList.get(Ht).inGroup(Bt)&&this.contactList.get(Ht).isOnline()&&sn.set(Ht,this.contactList.get(Ht))}}catch(qt){jt.e(qt)}finally{jt.f()}}return sn}}],Pt=[{key:"get",value:function(){return mo===null&&(mo=new Wt),mo}}],Zt&&Du($t.prototype,Zt),Pt&&Du($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function zp(Wt){return function(){var $t=Wt.userId.toString();if(ao.info("Contact disconnected "+$t+" from "+Wt.group),mo.contactList.has($t)){var Zt=mo.contactList.get($t);if(Zt===void 0)return void ao.debug("Contact not exist with userId :",$t);Zt.removeFromGroup(Wt.group),function(Pt,Bt){ao.debug("updateContactListOnUserDisconnect()"),yo.leftGroup[Pt]===void 0&&(yo.leftGroup[Pt]=[]),yo.leftGroup[Pt].push(Bt),Kl()}(Wt.group,Zt),Mo[Wt.group]!==void 0&&Mo[Wt.group][$t]!==void 0&&delete Mo[Wt.group][$t]}}}function Kl(){Object.keys(yo.leftGroup).length===0&&Object.keys(yo.joinedGroup).length===0&&yo.userDataChanged.length===0||(mo.eventEmitter.emit("update",yo),yo={leftGroup:{},joinedGroup:{},userDataChanged:[]})}function Gp(Wt){ao.debug("updateContactListOnUserConnection()");var $t=Wt.userId.toString(),Zt=null,Pt=apiRTC.session.getConnectedUserInfo($t,"userData");ao.debug("userData :",Pt);try{Wt.userData=JSON.parse(Pt)}catch(Bt){ao.warn("userData parse error : "+Bt)}if(mo.contactList.has($t))Zt=mo.contactList.get(Wt.userId),Io.equals(Zt.userData,Wt.userData)||(Zt.userData=new Io(Wt.userData),yo.userDataChanged.push(Zt));else{try{Zt=new Uo($t,Wt.userData),mo.contactList.set($t,Zt)}catch(Bt){ao.debug("Contact not added : "+Bt)}Zt=mo.contactList.get($t)}Zt!==void 0?(Mo[Wt.group]!==void 0&&Mo[Wt.group][$t]!==void 0&&(clearTimeout(Mo[Wt.group][$t]),delete Mo[Wt.group][$t]),Zt.inGroup(Wt.group)||(Zt.addToGroup(Wt.group),yo.joinedGroup[Wt.group]===void 0&&(yo.joinedGroup[Wt.group]=[]),yo.joinedGroup[Wt.group].push(Zt)),Kl()):ao.debug("Contact not exist with userId :",$t)}function Nu(Wt){ao.debug("updateContactListOnUserDataUpdate()");var $t=Wt.userId.toString(),Zt=mo.contactList.get(Wt.userId);if(Zt!==void 0){var Pt=apiRTC.session.getConnectedUserInfo($t,"userData");ao.debug("userData :",Pt);try{Wt.userData=JSON.parse(Pt)}catch(Bt){ao.warn("userData parse error : "+Bt)}Io.equals(Zt.userData,Wt.userData)||(Zt.userData=new Io(Wt.userData),yo.userDataChanged.push(Zt)),Kl()}else ao.debug("Contact not exist with userId :",$t)}function xs(Wt){return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},xs(Wt)}function uo(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Lu(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?Lu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function Lu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Kp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Uu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Yl(Wt,$t){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},Yl(Wt,$t)}function qp(Wt,$t){if($t&&(xs($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tr(Wt)}function Tr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ps(Wt){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ps(Wt)}var Gn=ft.Y.get("Conversation"),cr=Rn.get(),Eo=new(Ko()),oo=Ro.get(),Yp=["adaptationTriggered","audioAmplitude","availableStreamsUpdated","bandwidthLimited","callStatsUpdate","compositeListChanged","contactJoined","contactJoinedWaitingRoom","contactLeft","contactLeftWaitingRoom","cpuLimited","customEvent","data","disconnectionWarning","entryAllowed","entryDenied","error","hangup","joined","left","localStreamUpdated","message","messageNotDelivered","moderatorConnected","newMediaAvailable","newWhiteboardSession","participantEjected","persistentDataUpdated","pointerLocationChanged","pointerSharingEnabled","recordingAvailable","recordingStarted","recordingStopped","remoteStreamUpdated","replayListChanged","roomModeChanged","simulcastFeedChanged","slowLink","streamAdded","streamListChanged","streamRemoved","streamingStarted","streamingStopped","transferPending","transferBegun","transferEnded","transferProgress","whiteboardRoomMemberUpdate","videoQualityChanged","waitingForModeratorAcceptance","remoteStreamIdUpdated"],ju=new Set(["CHAT","CALL","GROUP_CHAT","WEBCONF","REPORT","REPORT_PART","TICKET","EVENT","OTHER","BOT"]),Jp=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),Xp=new Set(["CALL_ABORTED","SET_LOCAL_DESCRIPTION_FAILURE","SET_REMOTE_DESCRIPTION_FAILURE"]),ns=new WeakMap,rs=new WeakMap,qo=new WeakMap,Po=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Ao=new WeakMap,wo=new WeakMap,Jl=new WeakMap,Xl=new WeakMap,Ls=new WeakMap,Us=new WeakMap,js=new WeakMap,Bo=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Yl(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ps(Bt);if(sn){var jt=Ps(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return qp(this,Ct)});function Jt(Ct){var It,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kp(this,Jt),It=ln.call(this,Gn),Gn.debug("Create Conversation"),Ct==null?ns.set(Tr(It),Lt.g.guid().toString()):ns.set(Tr(It),Ct.toString()),rs.set(Tr(It),"OTHER"),It.active=!Object.prototype.hasOwnProperty.call(jt,"active")||typeof jt.active!="boolean"||jt.active,It.meshModeEnabled=jt.meshModeEnabled===!0,It.meshOnlyEnabled=jt.meshOnlyEnabled===!0,It.moderationEnabled=jt.moderationEnabled===!0,It.moderator=jt.moderator===!0,It.conversationCalls=new Map,It.callIdToStreamId=new Map,It.token=null,It.sessionId=null,It.webconfId=null,It.conversationStreams=new Map,It.conversationPublishedStreams=new Map,It.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,It.status=et.g.CONVERSATION_STATUS_NOT_JOINED,It.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,It.pointerSharingState=et.g.STATE_IDLE,It.pointerSharingAutoInvite=!1,It.pgroupWaitingRoomSubscribedTo=!1,Ds.set(Tr(It),null),Ns.set(Tr(It),null),Ao.set(Tr(It),new Map),Po.set(Tr(It),null),wo.set(Tr(It),null),qo.set(Tr(It),{}),Ls.set(Tr(It),new Map),js.set(Tr(It),null),Us.set(Tr(It),null),It.transferCallIds=[],It.uploadCap=null,It.downloadCap=null,It.reservedStreams=[];var Ht={contactCatalog:{}};for(var qt in Ht.contactCatalog.onUpdate=function(en){Gn.debug("onUpdate: contactList",en);var rn=It._getTechnicalName();if(en.joinedGroup[rn]!==void 0){var bn,Dn=uo(en.joinedGroup[rn]);try{for(Dn.s();!(bn=Dn.n()).done;){var lr=bn.value;Gn.debug(lr.getUsername()+" joined conversation "+It.getName()),zt.get(Tr(It)).emit("contactJoined",lr),It.pointerSharingState===et.g.STATE_ACTIVE&&It.pointerSharingAutoInvite===!0&&cr.pointerSharingClient.inviteInRoom(rn,lr.getId())}}catch(gr){Dn.e(gr)}finally{Dn.f()}}else Gn.debug("not an event joinedGroup for conversation");if(en.leftGroup[rn]!==void 0){var dr,br=uo(en.leftGroup[rn]);try{for(br.s();!(dr=br.n()).done;){var Rr=dr.value;Gn.debug(Rr.getUsername()+" left conversation "+It.getName()),zt.get(Tr(It)).emit("contactLeft",Rr)}}catch(gr){br.e(gr)}finally{br.f()}}else Gn.debug("not an event leftGroup for conversation");if(It.getRole()===et.g.CONVERSATION_ROLE_MODERATOR){var Nr,Zr=oo.getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+rn),ba=uo(Ls.get(Tr(It)).keys());try{for(ba.s();!(Nr=ba.n()).done;){var Wo=Nr.value;if(!Zr.has(Wo)){var Cr=oo.getContact(Wo);Cr!==null&&(Gn.debug(Cr.getUsername()+" left waiting room "+It.getName()),zt.get(Tr(It)).emit("contactLeftWaitingRoom",Cr))}}}catch(gr){ba.e(gr)}finally{ba.f()}Zr.forEach(function(gr,Mr){Ls.get(Tr(It)).has(Mr)||gr===null||(Gn.debug(gr.getUsername()+" joined waiting room "+It.getName()),zt.get(Tr(It)).emit("contactJoinedWaitingRoom",gr),cr.sendData(Mr,{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:rn}).catch(function(Ur){var _r=Lt.g.createError(Ur,"Notification not delivered",Gn);zt.get(Tr(It)).emit("messageNotDelivered",{error:_r,contact:gr,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})}))}),Ls.set(Tr(It),Zr)}},oo.onUpdate(Ht.contactCatalog.onUpdate),zt.get(Tr(It)).on("contactJoined",function(en){It.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&cr.sendData(en.getId(),{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:It._getTechnicalName()}).catch(function(rn){var bn=Lt.g.createError(rn,"Notification not delivered",Gn);zt.get(Tr(It)).emit("messageNotDelivered",{error:bn,contact:en,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})})}),Ht.apiRTCManager={},Ht.apiRTCManager.receiveData=function(en){var rn=en.detail.data;if(rn!==void 0){if(rn.roomname===It._getTechnicalName()){var bn=oo.getOrCreateContact(en.detail.senderId);if(rn.event)switch(rn.event){case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;zt.get(Tr(It)).emit("data",{sender:bn,content:rn.content});break;case et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;Gn.info("New media available in conversation",rn.media),zt.get(Tr(It)).emit("newMediaAvailable",{sender:bn,media:rn.media});break;case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;It.updateData();break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:zt.get(Tr(It)).emit("moderatorConnected",bn);break;case et.g.CONVERSATION_CLOSED_IDENTIFIER:rn.instanceId===It.getInstanceId()&&(Gn.info("Conference "+It.getName()+" has been closed..."),zt.get(Tr(It)).emit("closed"),It.leave());break;case et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER:if(rn.access===void 0||rn.access===null){Gn.error("Conversation join answer has no access data");break}zt.get(Tr(It)).emit(rn.access?"entryAllowed":"entryDenied");break;case et.g.CONTACT_STREAM_UPDATED_INFO:Gn.debug("CONTACT_STREAM_UPDATED_INFO :",en.detail.data);var Dn={callId:en.detail.data.callId,newStreamId:en.detail.data.newStreamId,oldStreamId:en.detail.data.oldStreamId};zt.get(Tr(It)).emit("remoteStreamIdUpdated",Dn);break;default:zt.get(Tr(It)).emit("customEvent",{event:rn.event,content:rn,sender:bn})}else if(rn.command==="new_snapshot"){if(It.status!==et.g.CONVERSATION_STATUS_JOINED)return;Gn.info("New media available in conversation",rn.value.snapshot),zt.get(Tr(It)).emit("newMediaAvailable",{sender:bn,media:rn.value.snapshot})}else Gn.debug("Unprocessed conversation message",rn)}}else Gn.debug("Received data undefined, leaving process")},Ht.apiRTCManager.receiveGroupChatMessage=function(en){if((It.status===et.g.CONVERSATION_STATUS_JOINED||It.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED)&&en.detail.groupChatId.toString()===It._getTechnicalName()){var rn={sender:oo.getOrCreateContact(en.detail.senderId),sender_id:en.detail.senderId,content:en.detail.message,time:new Date};Lt.g.isTypeof(en.detail,"metadata","object")&&(rn.metadata=en.detail.metadata),zt.get(Tr(It)).emit("message",rn)}},Ht.apiRTCManager.receiveRoomMessage=function(en){if(en.detail.roomType==="pointerSharing"&&It.pointerSharingState===et.g.STATE_ACTIVE&&en.detail.message.type==="pointerLocation"&&en.detail.roomId===It._getTechnicalName()){var rn={sender:oo.getOrCreateContact(en.detail.senderId),source:en.detail.message.source,x:en.detail.message.x,y:en.detail.message.y};Lt.g.isPropertyTypeof(en.detail.message,"data","object")&&(rn.data=en.detail.message.data),zt.get(Tr(It)).emit("pointerLocationChanged",rn)}},Ht.apiRTCManager.roomInvitation=function(en){if(Gn.info("roomInvitation event handler ",en),en.detail.roomId.toString()===It._getTechnicalName())if(Gn.info("roomInvitation for actual conversation",en),en.detail.roomType==="whiteBoard"){if(It.status===et.g.CONVERSATION_STATUS_JOINED){var rn=oo.getOrCreateContact(en.detail.senderId);zt.get(Tr(It)).emit("newWhiteboardSession",{sender:rn})}}else en.detail.roomType==="pointerSharing"&&Ql(Tr(It),!1,!0).then(function(){}).catch(function(bn){})},Ht.apiRTCManager.onFilePending=function(en){if(It.transferCallIds.includes(en.detail.callId)){var rn={id:en.detail.callId,name:en.detail.name,rank:en.detail.rank};zt.get(Tr(It)).emit("transferPending",rn)}},Ht.apiRTCManager.onFileSending=function(en){if(It.transferCallIds.includes(en.detail.callId)){var rn={id:en.detail.callId,name:en.detail.name};zt.get(Tr(It)).emit("transferBegun",rn)}},Ht.apiRTCManager.onFileProgress=function(en){if(It.transferCallIds.includes(en.detail.callId)){var rn={id:en.detail.callId,name:en.detail.name,size:en.detail.fileSize,remBytes:en.detail.remainingSize,percentage:en.detail.percentage};zt.get(Tr(It)).emit("transferProgress",rn)}},Ht.apiRTCManager.onFileSended=function(en){var rn=It.transferCallIds.indexOf(en.detail.callId);if(rn>=0){var bn={id:en.detail.callId,name:en.detail.name};en.detail.error&&(bn.error=en.detail.error),zt.get(Tr(It)).emit("transferEnded",bn),It.transferCallIds.splice(rn,1)}},Ht.apiRTCManager)cr.onEvent(qt,Ht.apiRTCManager[qt]);Jl.set(Tr(It),Ht);var Xt={MCUAvailableStream:function(en){var rn,bn=uo(en.detail.streams);try{for(bn.s();!(rn=bn.n()).done;){var Dn=rn.value;if(Dn.room===It._getTechnicalName()){var lr={contact:oo.getOrCreateContact(Dn.attributes.callerId),isRemote:en.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,isSimulcast:Dn.simulcast===!0,streamId:Dn.id,type:"regular",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(lr.streamId,lr);var dr={listEventType:"added"};Lt.g.assignObject(dr,lr),zt.get(Tr(It)).emit("streamListChanged",dr)}}}catch(ba){bn.e(ba)}finally{bn.f()}Gn.debug("Nb stream into conversation :"+It.conversationStreams.size);var br,Rr={},Nr=uo(It.conversationStreams.keys());try{for(Nr.s();!(br=Nr.n()).done;){var Zr=br.value;Rr[Zr]=It.conversationStreams.get(Zr)}}catch(ba){Nr.e(ba)}finally{Nr.f()}zt.get(Tr(It)).emit("availableStreamsUpdated",Rr)},MCUAvailableStreamUpdate:function(en){var rn,bn=uo(en.detail.streams);try{for(bn.s();!(rn=bn.n()).done;){var Dn=rn.value;if(Dn.room===It._getTechnicalName()){var lr=It.conversationStreams.get(Dn.id);if(lr&&lr.type==="regular"){lr.hasAudio=Dn.audio,lr.hasVideo=Dn.video,lr.isAudioMuted=Dn.audioMuted,lr.isVideoMuted=Dn.videoMuted,lr.descriptor=Dn.attributes.descriptor;var dr={listEventType:"updated"};Lt.g.assignObject(dr,lr),zt.get(Tr(It)).emit("streamListChanged",dr),lr.descriptor&&Object.prototype.hasOwnProperty.call(lr.descriptor,"priority")&&It.changeStreamPriority(lr.streamId,!0,lr.descriptor.priority)}}}}catch(ba){bn.e(ba)}finally{bn.f()}Gn.debug("Nb stream into conversation :"+It.conversationStreams.size);var br,Rr={},Nr=uo(It.conversationStreams.keys());try{for(Nr.s();!(br=Nr.n()).done;){var Zr=br.value;Rr[Zr]=It.conversationStreams.get(Zr)}}catch(ba){Nr.e(ba)}finally{Nr.f()}zt.get(Tr(It)).emit("availableStreamsUpdated",Rr)},MCUAvailableComposite:function(en){var rn,bn=uo(en.detail.streams);try{for(bn.s();!(rn=bn.n()).done;){var Dn=rn.value;if(Dn.room===It._getTechnicalName()){var lr={isRemote:en.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,streamId:Dn.id,type:"composite",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(lr.streamId,lr);var dr={listEventType:"added"};Lt.g.assignObject(dr,lr),zt.get(Tr(It)).emit("compositeListChanged",dr)}}}catch(br){bn.e(br)}finally{bn.f()}},MCUAvailableReplay:function(en){var rn,bn=uo(en.detail.streams);try{for(bn.s();!(rn=bn.n()).done;){var Dn=rn.value;if(Dn.room===It._getTechnicalName()){var lr={contact:oo.getOrCreateContact(Dn.attributes.callerId),isRemote:en.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,streamId:Dn.id,type:"replay",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(lr.streamId,lr);var dr={listEventType:"added"};Lt.g.assignObject(dr,lr),zt.get(Tr(It)).emit("replayListChanged",dr)}}}catch(br){bn.e(br)}finally{bn.f()}},MCURemoveStream:function(en){if(It.conversationStreams.has(en.detail.streamId)){var rn={listEventType:"removed"};Lt.g.assignObject(rn,It.conversationStreams.get(en.detail.streamId)),rn.type==="regular"?zt.get(Tr(It)).emit("streamListChanged",rn):rn.type==="composite"&&zt.get(Tr(It)).emit("compositeListChanged",rn),It.conversationStreams.delete(en.detail.streamId),Gn.debug("Nb stream into conversation :"+It.conversationStreams.size);var bn,Dn={},lr=uo(It.conversationStreams.keys());try{for(lr.s();!(bn=lr.n()).done;){var dr=bn.value;Dn[dr]=It.conversationStreams.get(dr)}}catch(br){lr.e(br)}finally{lr.f()}zt.get(Tr(It)).emit("availableStreamsUpdated",Dn)}else Gn.debug("Not a conversation's stream")},remoteStreamAdded:function(en){if(It.callIdToStreamId.has(en.detail.callId)){Gn.info("remoteStreamAdded",en.detail);var rn=oo.getOrCreateContact(en.detail.remoteId),bn=It.callIdToStreamId.get(en.detail.callId),Dn=Ao.get(Tr(It));Dn.has(bn)&&zt.get(Tr(It)).emit("streamRemoved",Dn.get(bn));var lr=en.detail.callType==="audio"?"audio":"video",dr=en.detail.callType==="screenSharing",br=new lo(en.detail.stream,{type:lr,contact:rn,streamId:bn,callId:en.detail.callId,callAudioAvailable:en.detail.audioIsAvailable,callAudioActive:en.detail.audioIsActive,callAudioMuted:en.detail.audioIsMuted,callVideoAvailable:en.detail.videoIsAvailable,callVideoActive:en.detail.videoIsActive,callVideoMuted:en.detail.videoIsMuted,screensharing:dr,constructor:!0});br.publishedInConversations.set(It.getName(),en.detail.callId),Ao.get(Tr(It)).set(bn,br),apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.screenSharingStreamId===bn?(Gn.debug("This is screensharing stream for remoteAccess"),br.screensharingRemoteAccessStream=!0,apiRTC.session.remoteAccessInvitation.setRemoteAccessStream(br)):zt.get(Tr(It)).emit("streamAdded",br)}},remoteStreamRemoved:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn=Ao.get(Tr(It));bn.has(rn)&&(zt.get(Tr(It)).emit("streamRemoved",bn.get(rn)),bn.delete(rn))}},roomMemberUpdate:function(en){Gn.info("roomMemberUpdate event handler ",en);var rn,bn=[],Dn=uo(en.detail.contactList);try{for(Dn.s();!(rn=Dn.n()).done;){var lr=rn.value;bn.push(oo.getOrCreateContact(lr.contactId))}}catch(dr){Dn.e(dr)}finally{Dn.f()}en.detail.roomType==="whiteBoard"&&(Gn.info("Received whiteboard room member update"),zt.get(Tr(It)).emit("whiteboardRoomMemberUpdate",{contacts:bn,roomId:en.detail.roomId,status:en.detail.status}))},slowLink:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn};en.detail.advice&&(bn.advice=en.detail.advice),zt.get(Tr(It)).emit("slowLink",bn)}},videoQualityChanged:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,hint:en.detail.hint,profileType:en.detail.profileType};en.detail.bitrate&&(bn.bitrate=en.detail.bitrate),en.detail.width&&en.detail.height&&(bn.width=en.detail.width,bn.height=en.detail.height),en.detail.frameRate&&(bn.frameRate=en.detail.frameRate),zt.get(Tr(It)).emit("videoQualityChanged",bn)}},simulcastFeedChanged:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,simulcast:en.detail.simulcast};zt.get(Tr(It)).emit("simulcastFeedChanged",bn)}},localStreamUpdated:function(en){if(en.detail.onCall&&It.callIdToStreamId.has(en.detail.callId)){var rn={callId:en.detail.callId,streamId:en.detail.userMediaStreamId,audio:en.detail.audioIsAvailable&&en.detail.audioIsActive,audioMuted:en.detail.audioIsMuted,audioSilent:en.detail.audioIsSilent,video:en.detail.videoIsAvailable&&en.detail.videoIsActive,videoMuted:en.detail.videoIsMuted,videoSilent:en.detail.videoIsSilent,cause:en.detail.cause};zt.get(Tr(It)).emit("localStreamUpdated",rn)}},remoteStreamUpdated:function(en){var rn=en.detail,bn=rn.callId,Dn=rn.cause;if(It.callIdToStreamId.has(bn)&&(Dn==="adaptation"||Dn==="userAction")){var lr={callId:bn,streamId:It.callIdToStreamId.get(bn),audio:en.detail.audioIsAvailable&&en.detail.audioIsActive,audioMuted:en.detail.audioIsMuted,audioSilent:en.detail.audioIsSilent,video:en.detail.videoIsAvailable&&en.detail.videoIsActive,videoMuted:en.detail.videoIsMuted,videoSilent:en.detail.videoIsSilent,cause:Dn};setTimeout(function(){zt.get(Tr(It)).emit("remoteStreamUpdated",lr)})}},MCURecordingStarted:function(en){if(en.detail.roomName===It._getTechnicalName()){var rn=Lt.g.parseRecordingEvent("MCURecordingStarted",en.detail);if(rn.callId==="COMPOSITE")It.recordingStatus=rn;else{var bn=It.conversationCalls.get(rn.callId);bn&&(bn.recordingStatus=rn)}zt.get(Tr(It)).emit("recordingStarted",rn)}},MCURecordingStopped:function(en){if(en.detail.roomName===It._getTechnicalName()){var rn=Lt.g.parseRecordingEvent("MCURecordingStopped",en.detail);if(rn.callId==="COMPOSITE")delete It.recordingStatus;else{var bn=It.conversationCalls.get(rn.callId);bn&&delete bn.recordingStatus}zt.get(Tr(It)).emit("recordingStopped",rn)}},MCURecordedStreamsAvailable:function(en){if(en.detail.roomName===It._getTechnicalName()){var rn=Lt.g.parseRecordingEvent("MCURecordedStreamsAvailable",en.detail);zt.get(Tr(It)).emit("recordingAvailable",rn)}},MCUStreamingStarted:function(en){if(en.detail.roomName===It._getTechnicalName()){var rn=$s("MCUStreamingStarted",en.detail),bn=It.conversationCalls.get(rn.callId);bn&&(bn.streamingStatus=rn),zt.get(Tr(It)).emit("streamingStarted",rn)}},MCUStreamingStopped:function(en){if(en.detail.roomName===It._getTechnicalName()){var rn=$s("MCUStreamingStopped",en.detail),bn=It.conversationCalls.get(rn.callId);bn&&delete bn.streamingStatus,zt.get(Tr(It)).emit("streamingStopped",rn)}},onCallStatsUpdate:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,stats:{}};en.detail.userId&&(bn.mesh=!0,bn.userId=en.detail.userId,bn.contact=oo.getOrCreateContact(en.detail.userId));for(var Dn=0,lr=Object.keys(en.detail.stats);Dn<lr.length;Dn++){var dr=lr[Dn];Jp.has(dr)&&(bn.stats[dr]=en.detail.stats[dr])}zt.get(Tr(It)).emit("callStatsUpdate",bn)}},cpuLimited:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,encodeUsagePercent:en.detail.encodeUsagePercent};zt.get(Tr(It)).emit("cpuLimited",bn)}},bandwidthLimited:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,resolutionChanged:!0};zt.get(Tr(It)).emit("bandwidthLimited",bn)}},audioAmplitude:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn={callId:en.detail.callId,streamId:rn,amplitude:en.detail.descriptor.amplitude,isSpeaking:en.detail.descriptor.isSpeaking,descriptor:{amplitude:en.detail.descriptor.amplitude,isSpeaking:en.detail.descriptor.isSpeaking}};zt.get(Tr(It)).emit("audioAmplitude",bn)}},hangup:function(en){if(It.callIdToStreamId.has(en.detail.callId)){var rn=It.callIdToStreamId.get(en.detail.callId),bn=Ao.get(Tr(It));bn.has(rn)&&(zt.get(Tr(It)).emit("streamRemoved",bn.get(rn)),bn.delete(rn)),en.detail.reason!=="restarted"&&en.detail.reason!=="disconnected"&&en.detail.reason!=="Broken_by_MCU"&&en.detail.reason!=="RTC_Setup_Timeout"&&(It.conversationCalls.has(en.detail.callId)?Bu(Tr(It),en.detail.callId):(It.callIdToStreamId.delete(en.detail.callId),It.releaseResources(rn,{isRemote:!0,triggerAdaptation:!0})),zt.get(Tr(It)).emit("hangup",{from:en.detail.hangupType,reason:en.detail.reason,streamId:rn}))}},callRestarting:function(en){if(It.callIdToStreamId.has(en.detail.oldCallId)){var rn=It.callIdToStreamId.get(en.detail.oldCallId);It.callIdToStreamId.delete(en.detail.oldCallId),It.callIdToStreamId.set(en.detail.newCallId,rn)}},MCUParticipantEjected:function(en){if(It._getTechnicalName()===en.detail.roomId){var rn=wo.get(Tr(It));if(en.detail.clientId===rn.getId())It.leave().catch(function(Dn){Gn.error("leave",Dn)}).then(function(){zt.get(Tr(It)).emit("participantEjected",{self:!0})});else{var bn=oo.getOrCreateContact(en.detail.clientId);zt.get(Tr(It)).emit("participantEjected",{self:!1,contact:bn})}}},MCURoomModeChanged:function(en){It._getTechnicalName()===en.detail.roomId&&zt.get(Tr(It)).emit("roomModeChanged",{oldMode:en.detail.oldMode,newMode:en.detail.newMode,state:en.detail.state})}};return Xl.set(Tr(It),Xt),zt.get(Tr(It)).on("left",function(){It.pgroupWaitingRoomSubscribedTo&&(cr.apiRTCSession.unsubscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+It._getTechnicalName()]),It.pgroupWaitingRoomSubscribedTo=!1),Ds.set(Tr(It),null),Ns.set(Tr(It),null),wo.set(Tr(It),null),js.set(Tr(It),null)}),It}return $t=Jt,Zt=[{key:"destroy",value:function(){po.get().deleteConversation(this.getName());var Ct=Jl.get(this);if(Ct){if(Ct.apiRTCManager)for(var It in Ct.apiRTCManager)cr.removeEventListener(It,Ct.apiRTCManager[It]);Ct.contactCatalog&&oo.removeUpdateListener(Ct.contactCatalog.onUpdate),Jl.delete(this)}}},{key:"getStatus",value:function(){return this.status}},{key:"getName",value:function(){return ns.get(this).toString()}},{key:"_getTechnicalName",value:function(){return ns.get(this).toString()}},{key:"getRole",value:function(){return Ds.get(this)}},{key:"getInstanceId",value:function(){return js.get(this)}},{key:"getFriendlyName",value:function(){return null}},{key:"getModerator",value:function(){return Ns.get(this)}},{key:"getType",value:function(){return rs.get(this)}},{key:"setType",value:function(Ct){return!this.isBound()&&!!ju.has(Ct)&&(rs.set(this,Ct),!0)}},{key:"getCloudConversationId",value:function(){var Ct=Po.get(this);return Ct?Ct.toString():null}},{key:"getMedia",value:function(Ct){return new Promise(function(It,jt){apiRTC.CloudApi.cloudFetchMedia(Ct).then(function(Ht){It(Ht)}).catch(function(Ht){jt(Ht)})})}},{key:"bind",value:function(Ct){var It=this;Ct||(Ct={});var jt=Po.get(this);return jt!==null?Promise.resolve(String(jt)):new Promise(function(Ht,qt){Fu(It,Ct).then(function(Xt){Ht(String(Xt.id))}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_HTTP,"bind() - cannot bind conversation",Gn,{fromError:Xt}))})})}},{key:"isBound",value:function(){return Po.get(this)!==null}},{key:"isGroupChatJoined",value:function(){return this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED}},{key:"joinGroupChat",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED)return jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat",Gn));Ct.bind().then(function(){return new Promise(function(Ht,qt){if(Ct.asyncCallbacks)return qt(Lt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - busy",Gn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return cr.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),delete Ct.asyncCallbacks,qt(Lt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - timeout",Gn))},et.g.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY),Ct.asyncCallbacks.groupChatMemberUpdate=function(Xt){if(Xt.detail.groupChatId===Ct._getTechnicalName()&&Xt.detail.status==="online"&&function(en,rn){for(var bn=en.length;--bn>=0;)if(en[bn].contactId===rn)return!0;return!1}(Xt.detail.contactList,cr.getClientId()))return Ct.asyncCallbacks&&(cr.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ht()},cr.onEvent("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),cr.joinGroupChat(Ct._getTechnicalName())})}).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_JOINED,cr.joinAndSubscribeToPresenceGroup(Ct._getTechnicalName()),It()}).catch(function(Ht){jt(Lt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - cannot join group chat",Gn,{fromError:Ht}))})})}},{key:"leaveGroupChat",value:function(){var Ct=this;return new Promise(function(It,jt){return Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED?jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - group chat not joined",Gn)):Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED?jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - webconf active",Gn)):void cr.leaveGroupChat(Ct._getTechnicalName()).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,cr.leaveAndUnsubscribeToPresenceGroup(Ct._getTechnicalName()),It()}).catch(function(Ht){jt(Lt.g.createError(et.g.ERROR_OTHER,"leaveGroupChat() - cannot leave group chat",Gn,{fromError:Ht}))})})}},{key:"isJoined",value:function(){return this.status===et.g.CONVERSATION_STATUS_JOINED}},{key:"isPublishedStream",value:function(Ct){return Ct.publishedInConversations.has(this.getName())}},{key:"publish",value:function(Ct,It){var jt=this;return It||(It={}),new Promise(function(Ht,qt){if(jt.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - conversation not joined",Gn));if(!(Ct instanceof lo))return qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - No stream specified",Gn));if(jt.isPublishedStream(Ct))return qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - Stream is already published in this conversation!",Gn));var Xt={};Xt.userMediaStreamId=Ct.userMediaStreamId,It!==null&&xs(It)==="object"&&(Xt.audioOnly=It.audioOnly,Xt.videoOnly=It.videoOnly,Xt.private=It.private,Xt.record=It.record,Xt.turnServerAddress=It.turnServerAddress,Xt.profileType=It.profileType,Xt.priority=It.priority,Xt.downgradeProfileList=It.downgradeProfileList,Xt.distributedBroadcastEnabled=It.distributedBroadcastEnabled),Lt.g.isPropertyTypeof(It,"mediaType","string")&&(Xt.mediaType=It.mediaType,Xt.audioOnly&&(Xt.mediaType="AUDIOONLY"),Xt.videoOnly&&(Xt.mediaType="VIDEOONLY")),Lt.g.isPropertyTypeof(It,"qos","object")&&(Xt.qos={},Lt.g.isPropertyTypeof(It.qos,"videoMinBitrate","number")&&(Xt.qos.videoMinBitrate=It.qos.videoMinBitrate),Lt.g.isPropertyTypeof(It.qos,"videoMinQuality","string")&&(Xt.qos.videoMinQuality=It.qos.videoMinQuality),Lt.g.isPropertyTypeof(It.qos,"videoStartBitrate","number")&&(Xt.qos.videoStartBitrate=It.qos.videoStartBitrate),Lt.g.isPropertyTypeof(It.qos,"videoStartQuality","string")&&(Xt.qos.videoStartQuality=It.qos.videoStartQuality),Lt.g.isPropertyTypeof(It.qos,"videoForbidInactive","boolean")&&(Xt.qos.videoForbidInactive=It.qos.videoForbidInactive)),Lt.g.isPropertyTypeof(It,"simulcast","object")&&!Xt.audioOnly&&(Xt.simulcast={},Lt.g.isPropertyTypeof(It.simulcast,"mode","string")&&["RID","SDP"].indexOf(It.simulcast.mode)>=0&&(Xt.simulcast.mode=It.simulcast.mode),Lt.g.isPropertyTypeof(It.simulcast,"maxBitrate","number")?Xt.simulcast.maxBitrate=It.simulcast.maxBitrate:Lt.g.isPropertyTypeof(It.simulcast,"encodings","object")&&(Xt.simulcast.encodings=Object.assign({},It.simulcast.encodings))),["audioLabels","videoLabels"].forEach(function(br){Lt.g.isTypeof(It,br,"array")&&(Xt[br]=[],It[br].forEach(function(Rr){Lt.g.isTypeof(Rr,"string")&&Xt[br].push(Rr)}))}),Lt.g.isPropertyTypeof(It,"context","object")&&(Xt.context=It.context);var en=null;if(Ct.hasVideo()&&jt.getNetworkCap({capacity:!0})&&It.profileType&&It.downgradeProfileList){for(var rn=It.downgradeProfileList.length;--rn>=0;)if(It.downgradeProfileList[rn].name===It.profileType){It.downgradeProfileList[rn].bitrate&&(en=It.downgradeProfileList[rn].bitrate);break}}if(en){if(!jt.reserveResources(It.profileType,en,Ct.userMediaStreamId,!1,It.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:Xt.audioOnly,control:!0})&&!jt.disableLowerPriorityVideo(!1,en,It.priority)){if(!Ct.hasAudio())return qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - not enough bandwidth",Gn));Xt.audioOnly=!0}jt.reserveResources(It.profileType,en,Ct.userMediaStreamId,!1,It.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:Xt.audioOnly})}Gn.info("callConfiguration:",Xt);var bn=Ct.isScreensharing(),Dn=cr.webRTCClient.publish(jt.sessionId,jt.sessionId,jt.token,Xt,{},{forceScreenSharingCallType:bn});if(!Dn)return jt.releaseResources(Ct.userMediaStreamId),qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - failed to establish call",Gn));jt.conversationCalls.set(Dn,new Gl(jt,Dn,Ct)),Ct.publishedInConversations.set(jt.getName(),Dn),jt.callIdToStreamId.set(Dn,Ct.userMediaStreamId);var lr={contact:null,isRemote:!1,hasAudio:Ct.hasAudio(),hasVideo:Ct.hasVideo(),isScreensharing:Ct.isScreensharing(),streamId:Ct.userMediaStreamId,callId:Dn};jt.conversationPublishedStreams.set(Ct.userMediaStreamId,lr);var dr={callEstablishedHandler:function(br){br.detail.callId.toString()===Dn.toString()&&(cr.removeEventListener("callEstablished",dr.callEstablishedHandler),jt.removeListener("error",dr.errorHandler),Ht(Ct))}};cr.onEvent("callEstablished",dr.callEstablishedHandler),dr.errorHandler=function(br){br.callId===Dn&&(cr.removeEventListener("callEstablished",dr.callEstablishedHandler),jt.removeListener("error",dr.errorHandler),jt.releaseResources(Ct.userMediaStreamId),qt(Lt.g.createError(et.g.ERROR_OTHER,"publish() - "+br.errorInfo,Gn)))},jt.on("error",dr.errorHandler)})}},{key:"unpublish",value:function(Ct,It){if(It||(It={}),Ct instanceof lo)if(this.isPublishedStream(Ct)){var jt=Ct.publishedInConversations.get(this.getName()),Ht=!It.noTriggerAdaptation;Bu(this,jt,{stream:Ct,triggerAdaptation:Ht}),cr.webRTCClient&&cr.webRTCClient.unpublish(jt)}else Gn.error("unpublish() - Stream is not published to conversation");else Gn.error("unpublish() - No stream specified",Ct)}},{key:"getConversationCall",value:function(Ct){if(!Ct)return null;var It=Ct.publishedInConversations.get(this.getName());return It?this.conversationCalls.get(It):null}},{key:"replacePublishedStream",value:function(Ct,It,jt){var Ht=this;return Gn.info("replacePublishedStream"),new Promise(function(qt,Xt){var en=Ht.getConversationCall(Ct);if(en===null)return Xt(new Error("CALL_NOT_FOUND"));en.replacePublishedStream(It,jt).then(function(rn){console.debug("replacePublishedStream OK"),qt(rn)}).catch(function(rn){console.error("replacePublishedStream NOK"),Xt(rn)})})}},{key:"getCallId",value:function(Ct){return Ct.publishedInConversations.get(this.getName())}},{key:"checkAccess",value:function(Ct){var It=this;return Ct||(Ct={}),new Promise(function(jt,Ht){if(Ct.force!==!0&&It.accessStatus)return jt(It.accessStatus);Ct.hasOwnProperty("session")||qr.getActiveSession()===null||(Ct.session=qr.getActiveSession()),It.bind(Ct).then(function(qt){return Ct.convId=qt,Eo.checkConferenceAccess(It._getTechnicalName(),cr.getActiveApiKey(),Ct)}).then(function(qt){return qt.access!==et.g.CONVERSATION_ACCESS_GRANTED&&qt.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION&&Gn.warn("checkAccess() - unknown access response:",qt.access),qt.role!==et.g.CONVERSATION_ROLE_MODERATOR&&qt.role!==et.g.CONVERSATION_ROLE_CONTRIBUTOR&&qt.role!==et.g.CONVERSATION_ROLE_GUEST&&Gn.warn("checkAccess() - unknown role response:",qt.role),qt.hasOwnProperty("webconfId")&&(It.webconfId=qt.webconfId,delete qt.webconfId),It.accessStatus=Lt.g.assignObject({},qt),jt(It.accessStatus)}).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"checkAccess() - cannot check access",Gn,{fromError:qt}))})})}},{key:"join",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Gn.debug("Joining "+this.getName()),new Promise(function(jt,Ht){if(Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED)return Ht(Lt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",Gn));It=Object.assign({},It);var qt=!1;It.qualityAdaptationEnabled&&(qt=!0,delete It.qualityAdaptationEnabled);var Xt=null;It.supportedVideoCodecs&&(Xt=It.supportedVideoCodecs,delete It.supportedVideoCodecs),Ct.checkAccess(It).then(function(en){if(!Ct.conference){if(en.type!=="public")return Promise.reject(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - wrong conference type",Gn));if(en.access!==et.g.CONVERSATION_ACCESS_GRANTED)return Promise.reject(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - access to conference not granted",Gn))}return Zp(Ct,en)}).then(function(en){if(Ds.set(Ct,en.role),Ct.status=et.g.CONVERSATION_STATUS_JOINING,Ct.conference)return It.hasOwnProperty("password")&&Us.set(Ct,It.password),Ct.friendlyName=en.hasOwnProperty("friendlyName")?en.friendlyName:Ct.friendlyName,js.set(Ct,en.instanceId),_f(Ct,wo.get(Ct),cr.getActiveApiKey())}).then(function(){var en=Ct,rn=function lr(dr){if(Gn.debug("joinMCUSessionAnswer",en._getTechnicalName(),dr.detail),dr.detail.roomId.toString()===en._getTechnicalName()){if(dr.detail.result&&dr.detail.result.failed){Gn.error("Conversation "+en.getName()+" join failed",dr.detail),this.status=et.g.CONVERSATION_STATUS_NOT_JOINED;var br=dr.detail.result.reason?dr.detail.result.reason:"join failed";return Ht(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - "+br,Gn))}Gn.info("Conversation "+en.getName()+" joined",dr.detail),cr.removeEventListener("joinMCUSessionAnswer",lr),en.status=et.g.CONVERSATION_STATUS_JOINED,en.token=dr.detail.token,en.sessionId=dr.detail.sessionId,en.mode=dr.detail.mode,en.conversationStreams=new Map;var Rr=Xl.get(en);cr.onEvent("MCUAvailableStream",Rr.MCUAvailableStream).onEvent("MCUAvailableStreamUpdate",Rr.MCUAvailableStreamUpdate).onEvent("MCURemoveStream",Rr.MCURemoveStream).onEvent("MCUAvailableComposite",Rr.MCUAvailableComposite).onEvent("MCUAvailableReplay",Rr.MCUAvailableReplay).onEvent("MCUParticipantEjected",Rr.MCUParticipantEjected).onEvent("remoteStreamAdded",Rr.remoteStreamAdded).onEvent("remoteStreamRemoved",Rr.remoteStreamRemoved).onEvent("roomMemberUpdate",Rr.roomMemberUpdate).onEvent("slowLink",Rr.slowLink).onEvent("localStreamUpdated",Rr.localStreamUpdated).onEvent("remoteStreamUpdated",Rr.remoteStreamUpdated).onEvent("simulcastFeedChanged",Rr.simulcastFeedChanged).onEvent("MCURecordingStarted",Rr.MCURecordingStarted).onEvent("MCURecordingStopped",Rr.MCURecordingStopped).onEvent("MCURecordedStreamsAvailable",Rr.MCURecordedStreamsAvailable).onEvent("MCUStreamingStarted",Rr.MCUStreamingStarted).onEvent("MCUStreamingStopped",Rr.MCUStreamingStopped).onEvent("MCURoomModeChanged",Rr.MCURoomModeChanged).onEvent("onCallStatsUpdate",Rr.onCallStatsUpdate).onEvent("hangup",Rr.hangup).onEvent("callRestarting",Rr.callRestarting).onEvent("audioAmplitude",Rr.audioAmplitude).onEvent("videoQualityChanged",Rr.videoQualityChanged).onEvent("cpuLimited",Rr.cpuLimited).onEvent("bandwidthLimited",Rr.bandwidthLimited),en.conference&&en.updateData(),en.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(cr.apiRTCSession.subscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+en._getTechnicalName()]),en.pgroupWaitingRoomSubscribedTo=!0),en.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED&&(en.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED),zt.get(en).emit("joined");var Nr={};dr.detail.mode==="mesh"&&(Nr.mode="mesh",dr.detail.meshOnly===!0&&(Nr.meshOnly=!0)),jt(Nr)}};cr.onEvent("joinMCUSessionAnswer",rn);var bn={};bn.convId=Ct.getCloudConversationId(),Ct.meshModeEnabled&&(bn.meshModeEnabled=Ct.meshModeEnabled),Ct.meshOnlyEnabled&&(bn.meshOnlyEnabled=Ct.meshOnlyEnabled),Ct.conference||(Ct.moderationEnabled&&(bn.moderationEnabled=!0),Ct.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(bn.moderator=!0)),qt&&(bn.qualityAdaptationEnabled=!0),Xt&&(bn.supportedVideoCodecs=Xt);var Dn=cr.webRTCClient.joinMCUSession(Ct._getTechnicalName(),bn);if(Dn instanceof Error)return cr.removeEventListener("joinMCUSessionAnswer",rn),en.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Ht(Lt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation :"+Dn.message,Gn))}).catch(function(en){return Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Ht(Lt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",Gn,{fromError:en}))})})}},{key:"cancelJoin",value:function(){return this.cancelJoin0!==null&&typeof this.cancelJoin0=="function"&&this.cancelJoin0()}},{key:"eject",value:function(Ct,It){var jt=this;return new Promise(function(Ht,qt){if(jt.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Lt.g.createError(et.g.ERROR_OTHER,"eject() - conference not joined",Gn));if(jt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"eject() - only moderator can eject a contact",Gn));var Xt={};Xt.timeoutId=setTimeout(function(){return Xt&&(cr.removeEventListener("MCUParticipantEjected",Xt.ejected),Xt=!1),qt(Lt.g.createError(et.g.ERROR_OTHER,"eject() - timeout",Gn))},et.g.CONVERSATION_PARTICIPANT_EJECTION_DELAY),Xt.ejected=function(en){if(en.detail.roomId===jt._getTechnicalName()&&en.detail.clientId===Ct.getId())return Xt&&(clearTimeout(Xt.timeoutId),cr.removeEventListener("MCUParticipantEjected",Xt.ejected),Xt=!1),Ht()},cr.onEvent("MCUParticipantEjected",Xt.ejected),cr.webRTCClient.ejectParticipantFromMCUSession(Ct.getId(),It)})}},{key:"allowEntry",value:function(Ct,It){var jt=this;return It||(It={}),new Promise(function(Ht,qt){if(jt.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Lt.g.createError(et.g.ERROR_OTHER,"allowEntry() - conference not joined",Gn));if(!(Ct instanceof Uo))return qt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"allowEntry() - parameter is not an instance of apiRTC.Contact",Gn));if(jt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"allowEntry() - only moderator can allow entry to a contact",Gn));var Xt={roomname:jt._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!0,command:"access",value:{access:!0}};if(It.hasOwnProperty("invitationId")&&(Xt.invitationId=It.invitationId),It.hasOwnProperty("answer")&&(Xt.answer=It.answer),cr.sendData(Ct.getId(),Xt).catch(function(rn){var bn=Lt.g.createError(rn,"Notification not delivered",Gn);zt.get(jt).emit("messageNotDelivered",{error:bn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),It.ackEnabled===!0){var en=setInterval(function(){Xt.command="access-new",cr.sendData(Ct.getId(),Xt).catch(function(rn){var bn=Lt.g.createError(rn,"Notification not delivered",Gn);zt.get(jt).emit("messageNotDelivered",{error:bn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL);cr.onEvent("receiveData",function rn(bn){var Dn=oo.getOrCreateContact(bn.detail.senderId);bn.detail.hasOwnProperty("data")&&bn.detail.data.command==="access-ack"&&bn.detail.data.roomname===jt._getTechnicalName()&&Dn.getId()===Ct.getId()&&(clearInterval(en),cr.removeEventListener("receiveData",rn))})}return Ht()})}},{key:"denyEntry",value:function(Ct,It){var jt=this;return It||(It={}),new Promise(function(Ht,qt){if(jt.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Lt.g.createError(et.g.ERROR_OTHER,"denyEntry() - conference not joined",Gn));if(!(Ct instanceof Uo))return qt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"denyEntry() - parameter is not an instance of apiRTC.Contact",Gn));if(jt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"denyEntry() - only moderator can deny entry to a contact",Gn));var Xt={roomname:jt._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!1,command:"access",value:{access:!1}};return It.hasOwnProperty("invitationId")&&(Xt.invitationId=It.invitationId),It.hasOwnProperty("answer")&&(Xt.answer=It.answer),It.hasOwnProperty("reason")&&(Xt.reason=It.reason),cr.sendData(Ct.getId(),Xt).catch(function(en){var rn=Lt.g.createError(en,"Notification not delivered",Gn);zt.get(jt).emit("messageNotDelivered",{error:rn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),Ht()})}},{key:"sendJoinRequest",value:function(){var Ct=this;if(this.status===et.g.CONVERSATION_STATUS_WAITING){if(!this.joinRequestIntervalId){var It=Qp(this);It&&(cr.sendData(It,{roomname:this._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:this._getTechnicalName(),sendTime:Date.now(),command:"userWaiting",value:{username:$u()}}).catch(function(jt){var Ht=Lt.g.createError(jt,"Notification not delivered",Gn);zt.get(Ct).emit("messageNotDelivered",{error:Ht,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting"})}),this.joinRequestIntervalId=setInterval(function(){cr.sendData(It,{roomname:Ct._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:Ct._getTechnicalName(),sendTime:Date.now(),command:"userWaiting-new",value:{username:$u()}}).catch(function(jt){var Ht=Lt.g.createError(jt,"Notification not delivered",Gn);zt.get(Ct).emit("messageNotDelivered",{error:Ht,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting-new"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL))}}else Gn.error("sendJoinRequest() - Not in conversation's waiting room, cannot send join request")}},{key:"leave",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"leave() - webconf not joined",Gn));for(var Ht=Xl.get(Ct),qt=0,Xt=Object.keys(Ht);qt<Xt.length;qt++){var en=Xt[qt];Gn.info("Session, removing apiRTCManager event :",en);var rn=Ht[en];cr.removeEventListener(en,rn)}var bn,Dn=uo(Ct.conversationStreams.keys());try{for(Dn.s();!(bn=Dn.n()).done;){var lr=bn.value;Gn.trace("Leave() - unsubscribe to "+lr),cr.webRTCClient!==null&&cr.webRTCClient.unsubscribe(lr)}}catch(dr){Dn.e(dr)}finally{Dn.f()}Ql(Ct,!1,!1).then(function(){}).catch(function(dr){}),cr.webRTCClient!==null&&cr.IMClient.leaveGroupChat(Ct._getTechnicalName()),Ct.whiteboardStarted===et.g.CONVERSATION_WHITEBOARD_STARTED&&cr.whiteBoardClient.roomId===Ct._getTechnicalName()&&(cr.whiteBoardClient.leaveRoom(),cr.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED),cr.webRTCClient!==null&&cr.webRTCClient.leaveMCUSession(),Ct.conversationStreams=new Map,Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,zt.get(Ct).emit("left"),It()})}},{key:"subscribeToStream",value:function(Ct,It){var jt=this;if(It||(It={}),Gn.debug("subscribeToMedia",Ct),!this.isJoined())return Promise.reject(Lt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - conversation not joined",Gn));var Ht={};It.turnServerAddress!==null&&It.turnServerAddress!==void 0&&(Ht.turnServerAddress=It.turnServerAddress),Lt.g.isPropertyTypeof(It,"qos","object")&&(Ht.qos={},Lt.g.isPropertyTypeof(It.qos,"videoForbidInactive","boolean")&&(Ht.qos.videoForbidInactive=It.qos.videoForbidInactive));var qt=Number(Ct),Xt=cr.webRTCClient.getStreamFromList(qt),en=this.conversationStreams.get(qt);if(!Xt||!en)return Promise.reject(Lt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - no such stream",Gn));if(Lt.g.isPropertyTypeof(It,"simulcast","object")){var rn=["high","medium","low"];Ht.simulcast={},It.simulcast.streamQuality&&(rn.indexOf(It.simulcast.streamQuality)>=0?Ht.simulcast.streamQuality=It.simulcast.streamQuality:Ht.simulcast.streamQuality="default"),It.simulcast.streamFrameRate&&(rn.indexOf(It.simulcast.streamFrameRate)>=0?Ht.simulcast.streamFrameRate=It.simulcast.streamFrameRate:Ht.simulcast.streamFrameRate="default")}return new Promise(function(bn,Dn){var lr="VIDEO";if(en.hasVideo&&jt.getNetworkCap({capacity:!0})&&Lt.g.isPropertyTypeof(en,"descriptor","object")){var dr=en.descriptor;if(!jt.reserveResources(dr.profileType,dr.bitrate,qt,!0,dr.priority,{isVideoOnly:!en.hasAudio,isVideoMuted:It.audioOnly,control:!0})&&!jt.disableLowerPriorityVideo(!0,dr.bitrate,dr.priority)){if(!en.hasAudio)return Dn(Lt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - not enough bandwidth",Gn));It.audioOnly=!0}jt.reserveResources(dr.profileType,dr.bitrate,qt,!0,dr.priority,{isVideoOnly:!en.hasAudio,isVideoMuted:It.audioOnly})}It.audioOnly===!0?lr="AUDIOONLY":It.videoOnly===!0&&(lr="VIDEOONLY");var br=cr.webRTCClient.subscribe([Xt],lr,{},Ht,It)[0];if(!br)return jt.releaseResources(qt),Dn(Lt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - stream not available",Gn));jt.callIdToStreamId.set(br,qt),Gn.debug("Subscribed to stream "+Ct+" through call "+br);var Rr={streamAddedHandler:function(Nr){Nr.streamId===qt&&(jt.removeListener("streamAdded",Rr.streamAddedHandler),jt.removeListener("error",Rr.errorHandler),bn(Nr))}};jt.on("streamAdded",Rr.streamAddedHandler),Rr.errorHandler=function(Nr){Nr.callId===br&&(jt.removeListener("streamAdded",Rr.streamAddedHandler),jt.removeListener("error",Rr.errorHandler),jt.releaseResources(qt),Dn(Lt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - "+Nr.errorInfo,Gn)))},jt.on("error",Rr.errorHandler)})}},{key:"updateSubscribedStream",value:function(Ct,It){It||(It={});var jt=Number(Ct);if(!Ao.get(this).has(jt))return Gn.error("updateSubscribedStream() - Conversation stream "+Ct+" does not exist or was not subscribed to"),Promise.reject("wrong streamId");var Ht=Ao.get(this).get(jt);if(Lt.g.isTypeof(It.simulcast,"object"))return cr.webRTCClient.webRTCClient.updateSimulcastFeedOnCall(Ht.callId,It.simulcast);var qt="VIDEO";return It.audioOnly===!0?qt="AUDIOONLY":It.videoOnly===!0&&(qt="VIDEOONLY"),cr.webRTCClient.webRTCClient.updateMediaTypeOnCall(Ht.callId,qt)}},{key:"unsubscribeToStream",value:function(Ct,It){It||(It={});var jt=Number(Ct);cr.webRTCClient!==null&&cr.webRTCClient.unsubscribe(jt);var Ht=!It.noTriggerAdaptation;this.releaseResources(Ct,{isRemote:!0,triggerAdaptation:Ht})}},{key:"subscribeToMedia",value:function(Ct,It){return this.subscribeToStream(Ct,It)}},{key:"unsubscribeToMedia",value:function(Ct){this.unsubscribeToStream(Ct)}},{key:"startRecording",value:function(Ct){var It=this;return Ct||(Ct={}),new Promise(function(jt,Ht){if(It.status!==et.g.CONVERSATION_STATUS_JOINED)return Ht(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - conversation not joined",Gn));if(It.asyncCallbacks)return Ht(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",Gn));It.asyncCallbacks={},It.asyncCallbacks.timeoutId=setTimeout(function(){return It.asyncCallbacks&&(cr.removeEventListener("error",It.asyncCallbacks.error),cr.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),delete It.asyncCallbacks),Ht(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",Gn))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),It.asyncCallbacks.error=function(rn){if(String(rn.detail.convId)===It.getCloudConversationId()&&rn.detail.callId==="COMPOSITE"&&rn.detail.errorCode.indexOf("START_RECORD")>=0)return It.asyncCallbacks&&(cr.removeEventListener("error",It.asyncCallbacks.error),cr.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),clearTimeout(It.asyncCallbacks.timeoutId),delete It.asyncCallbacks),Ht(Lt.g.createError(et.g.ERROR_OTHER,"startRecording() - "+rn.detail.errorInfo,Gn))},It.asyncCallbacks.recordingStarted=function(rn){if(String(rn.detail.convId)===It.getCloudConversationId()&&rn.detail.callId==="COMPOSITE"){It.asyncCallbacks&&(cr.removeEventListener("error",It.asyncCallbacks.error),cr.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),clearTimeout(It.asyncCallbacks.timeoutId),delete It.asyncCallbacks);var bn=Lt.g.parseRecordingEvent("MCURecordingStarted",rn.detail);return jt(bn)}},cr.onEvent("error",It.asyncCallbacks.error),cr.onEvent("MCURecordingStarted",It.asyncCallbacks.recordingStarted);var qt="AUDIO-VIDEO";Ct.audioOnly===!0?qt="AUDIO-ONLY":Ct.videoOnly===!0&&(qt="VIDEO-ONLY");var Xt="composite";Lt.g.isPropertyTypeof(Ct,"customIdInFilename","string")&&(Xt=Ct.customIdInFilename);var en={};Lt.g.isPropertyTypeof(Ct,"data","object")&&(en=Lt.g.assignObject({},Ct.data)),["complete","efficient","audioOnly"].indexOf(Ct.mode)>=0?en.mode=Ct.mode:en.mode="complete",en.labelEnabled=Ct.labelEnabled===!0,en.labelEnabled===!0&&(en.labels=[],Lt.g.isTypeof(Ct.labels,"array")&&Ct.labels.forEach(function(rn){Lt.g.isTypeof(rn,"string")&&en.labels.push(rn)})),Lt.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(en.ttl=Ct.ttl),cr.webRTCClient.startCompositeRecording(qt,Xt,It.getCloudConversationId(),en)})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.asyncCallbacks)return jt(Lt.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",Gn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(cr.removeEventListener("error",Ct.asyncCallbacks.error),cr.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),It(Ct.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(String(Ht.detail.convId)===Ct.getCloudConversationId()&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(cr.removeEventListener("error",Ct.asyncCallbacks.error),cr.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),jt(Lt.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Ht.detail.errorInfo,Gn))},Ct.asyncCallbacks.recordingStopped=function(Ht){if(String(Ht.detail.convId)===Ct.getCloudConversationId()&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(cr.removeEventListener("error",Ct.asyncCallbacks.error),cr.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Lt.g.parseRecordingEvent("MCURecordingStopped",Ht.detail);return It(qt)}},cr.onEvent("error",Ct.asyncCallbacks.error),cr.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),cr.webRTCClient.stopCompositeRecording()})}},{key:"getContacts",value:function(){Gn.debug("getContacts()");var Ct={};if(this.isBound()){var It,jt=Ro.get().getContacts(this._getTechnicalName()),Ht=uo(jt.keys());try{for(Ht.s();!(It=Ht.n()).done;){var qt=It.value;Ct[qt]=jt.get(qt)}}catch(Xt){Ht.e(Xt)}finally{Ht.f()}}else Gn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsArray",value:function(){Gn.debug("getContactsArray()");var Ct=[];if(this.isBound()){var It,jt=Ro.get().getContacts(this._getTechnicalName()),Ht=uo(jt.keys());try{for(Ht.s();!(It=Ht.n()).done;){var qt=It.value;Ct.push(jt.get(qt))}}catch(Xt){Ht.e(Xt)}finally{Ht.f()}}else Gn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsNumber",value:function(){Gn.debug("getContactsNumber()");var Ct=0;return this.isBound()?Ct=Ro.get().getContacts(this._getTechnicalName()).size:Gn.warn("getContactsNumber() - Cannot get contacts as conversation is not joined"),Ct}},{key:"getData",value:function(){return Gn.debug("getData()"),this.isBound()||Gn.warn("getData() - Cannot get most recent data as conversation is not joined, you may want to call Conversation.updateData() instead"),qo.get(this)}},{key:"setData",value:function(Ct){var It=this;return new Promise(function(jt,Ht){It.bind().then(function(){return Eo.setConversationData(Po.get(It),JSON.stringify(Ct),cr.getActiveApiKey(),{token:wo.get(It).token})}).then(function(){qo.set(It,Ct),cr.dataClient.sendDataToGroup(It._getTechnicalName(),{event:et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER,roomname:It._getTechnicalName()}),jt()}).catch(function(){Ht(Lt.g.createError(et.g.ERROR_OTHER,"setData() - cannot set conversation data",Gn))})})}},{key:"updateData",value:function(){var Ct=this;return new Promise(function(It,jt){(Ct.isBound()?Fu(Ct):Ct.bind()).then(function(){It(),zt.get(Ct).emit("persistentDataUpdated",qo.get(Ct))}).catch(function(Ht){jt(Lt.g.createError(et.g.ERROR_OTHER,"updateData() - cannot update conversation data",Gn,{fromError:Ht}))})})}},{key:"getAvailableMediaList",value:function(){return Gn.warn("Function deprecated, please use Conversation.getAvailableStreamList() instead"),this.getAvailableStreamList()}},{key:"getAvailableStreamList",value:function(){var Ct,It=[],jt=uo(this.conversationStreams.keys());try{for(jt.s();!(Ct=jt.n()).done;){var Ht=Ct.value;It.push(this.conversationStreams.get(Ht))}}catch(qt){jt.e(qt)}finally{jt.f()}return It}},{key:"getStreamInfo",value:function(Ct){return this.conversationStreams.get(Ct)}},{key:"getSubscribedStream",value:function(Ct){return Ao.get(this).get(Number(Ct))}},{key:"linkWhiteboardClientToConversation",value:function(){Gn.warn("DEPRECATED : linkWhiteboardClientToConversation : no more needed")}},{key:"startNewWhiteboardSession",value:function(Ct,It){var jt=this;return Gn.debug("startNewWhiteboardSession()"),new Promise(function(Ht,qt){jt.bind().then(function(){if(jt.asyncCallbacks)return qt(Lt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - busy",Gn));if(jt.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_NOT_STARTED)return Ht();cr.whiteBoardClient.start(),jt.asyncCallbacks={},jt.asyncCallbacks.ackHandler=function(en){var rn=en.detail;rn.roomId===jt._getTechnicalName()&&rn.roomType==="whiteBoard"&&(rn.eventType==="roomCreation"&&rn.status==="roomCreated"||rn.eventType==="roomJoined"&&rn.status==="roomJoined")&&(jt.asyncCallbacks&&(cr.removeEventListener("roomCreation",jt.asyncCallbacks.ackHandler),cr.removeEventListener("roomJoined",jt.asyncCallbacks.ackHandler),clearTimeout(jt.asyncCallbacks.timeoutId),delete jt.asyncCallbacks),cr.whiteBoardClient.setCanvas(Ct),It!=null&&cr.whiteBoardClient.setUserCursorColor(It),cr.whiteBoardClient.deleteHistory(),jt.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_STARTED,Ht())},cr.onEvent("roomCreation",jt.asyncCallbacks.ackHandler),cr.onEvent("roomJoined",jt.asyncCallbacks.ackHandler),jt.asyncCallbacks.timeoutId=setTimeout(function(){return jt.asyncCallbacks&&(cr.removeEventListener("roomCreation",jt.asyncCallbacks.ackHandler),cr.removeEventListener("roomJoined",jt.asyncCallbacks.ackHandler),delete jt.asyncCallbacks),qt(Lt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - timeout",Gn))},et.g.CONVERSATION_WHITEBOARD_START_DELAY);var Xt=jt.getCloudConversationId();cr.whiteBoardClient.joinRoom(jt._getTechnicalName(),{convId:Xt,webconf:!0})}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - cannot start whiteboard session",Gn,{fromError:Xt}))})})}},{key:"stopNewWhiteboardSession",value:function(){var Ct=this;return Gn.debug("stopNewWhiteboardSession()"),new Promise(function(It,jt){Ct.bind().then(function(){return Ct.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_STARTED?(Gn.error("Conversation is not joined!"),jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - Conversation not joined",Gn))):cr.whiteBoardClient.roomId!==Ct._getTechnicalName()?(Gn.error("Whiteboard session is not joined for this conversation!"),jt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - whiteboard not joined",Gn))):(cr.whiteBoardClient.leaveRoom(),cr.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,void It())}).catch(function(Ht){jt(Lt.g.createError(et.g.ERROR_OTHER,"stopNewWhiteboardSession() - cannot stop whiteboard session",Gn,{fromError:Ht}))})})}},{key:"enablePointerSharing",value:function(Ct){return Ql(this,!0,Ct)}},{key:"sendPointerLocation",value:function(Ct,It,jt,Ht){cr.pointerSharingClient.sendPointerLocation(this._getTechnicalName(),Ct,It,jt,Ht)}},{key:"sendData",value:function(Ct){var It=this;return new Promise(function(jt,Ht){It.bind().then(function(){cr.dataClient.sendDataToGroup(It._getTechnicalName(),{event:et.g.CONVERSATION_SEND_DATA_IDENTIFIER,content:Ct,roomname:It._getTechnicalName()}),jt()}).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_OTHER,"sendData() - cannot send data",Gn))})})}},{key:"sendRawData",value:function(Ct){var It=this;return new Promise(function(jt,Ht){It.bind().then(function(){cr.dataClient.sendDataToGroup(It._getTechnicalName(),Ct),jt()}).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_OTHER,"sendRawData() - cannot send data",Gn))})})}},{key:"sendCustomEvent",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){It.bind().then(function(){var Xt=jt;Xt.event=Ct,Xt.roomname=It._getTechnicalName(),cr.dataClient.sendDataToGroup(It._getTechnicalName(),Xt),Ht()}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - cannot send data",Gn))})})}},{key:"sendMessage",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=function(qt){return new Promise(function(Xt,en){var rn=wo.get(It);rn!==null?Eo.saveGroupChatMessage(It,rn,cr.getActiveApiKey(),Ct,qt,jt).then(function(){Xt(qt)}).catch(en):Xt(qt)})};return new Promise(function(qt,Xt){if(It.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED&&It.status!==et.g.CONVERSATION_STATUS_JOINED)return Xt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"sendMessage() - group chat not joined",Gn));if(Ct===null||typeof Ct!="string")return Xt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - wrong type of message",Gn));if(Ct==="")return Xt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",Gn));var en={};Lt.g.isTypeof(jt,"metadata","object")&&(en.metadata=jt.metadata),cr.sendMessageToGroupChat(It._getTechnicalName(),Ct,en).then(function(rn){Ht(rn).then(function(){qt(rn)}).catch(function(bn){Xt(Lt.g.createError(et.g.ERROR_ON_SAVE,"sendMessage() - error on save",Gn,{fromError:bn}))})}).catch(function(rn){Xt(Lt.g.createError(et.g.ERROR_OTHER,"sendMessage() - cannot send message",Gn,{fromError:rn}))})})}},{key:"pushMedia",value:function(Ct,It){var jt=this;return It||(It={}),new Promise(function(Ht,qt){jt.bind().then(function(){return It.hasOwnProperty("token")||(It.token=wo.get(jt).token),Eo.pushConversationMedia(Po.get(jt),Ct,cr.getActiveApiKey(),It)}).then(function(Xt){cr.dataClient.sendDataToGroup(jt._getTechnicalName(),{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:jt._getTechnicalName(),media:{url:Xt.url,id:Xt.id},command:"new_snapshot",value:{snapshot:Xt.url}}),Ht({url:Xt.url,id:Xt.id})}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"pushMedia() - cannot push media",Gn,{fromError:Xt}))})})}},{key:"pushData",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return jt=Lt.g.assignObject({},jt),new Promise(function(Ht,qt){if(cr.webRTCClient.webRTCClient.dataChannelCapable!==!0||jt.forceHTTP===!0){if(!Ct.file)return qt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"pushData() - missing file",Gn));var Xt={};if(Lt.g.isTypeof(Ct,"metadata","object"))try{Xt.metadata=JSON.stringify(Ct.metadata)}catch(en){Gn.error("JSON.stringify",en)}Xt.asFile=!0,Lt.g.isTypeof(Ct,"filename","string")?Xt.filename=Ct.filename:Xt.filename=Ct.file.name,Ct.overwrite===!0&&(Xt.overwrite=!0),Lt.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(Xt.ttl=Ct.ttl),It.pushMedia(Ct.file,Xt).then(Ht).catch(qt)}else It.bind().then(function(){var en=It._getTechnicalName(),rn={};jt.hasOwnProperty("turnServerAddress")&&(rn.turnServerAddress=jt.turnServerAddress,delete jt.turnServerAddress);var bn=cr.webRTCClient.webRTCClient.pushData(It.getCloudConversationId(),Ct,rn,{success:function(Dn){if(Dn.state!=="complete")return qt(Lt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",Gn));cr.dataClient.sendDataToGroup(en,{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:en,media:{url:Dn.mediaURL,id:Dn.mediaId},command:"new_snapshot",value:{snapshot:Dn.mediaURL}}),Ht({url:Dn.mediaURL,id:Dn.mediaId})},failure:function(Dn,lr){if(Dn==="iceFailed"){var dr=Lt.g.assignObject({},jt);return dr.forceHTTP=!0,void It.pushData(Ct,dr).then(Ht).catch(qt)}if(Dn==="timeout"){if(lr){var br=It.transferCallIds.indexOf(lr);br>=0&&It.transferCallIds.splice(br,1)}return qt(Lt.g.createError(et.g.ERROR_TIMED_OUT,"pushData() - push data timed out",Gn))}return qt(Dn==="canceled"?Lt.g.createError(et.g.ERROR_OPERATION_CANCELED,"pushData() - push data canceled",Gn):Lt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",Gn,{fromError:Dn}))}});if(!bn)return qt(Lt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",Gn));It.transferCallIds.push(bn)}).catch(function(en){return qt(Lt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",Gn,{fromError:en}))})})}},{key:"cancelPushData",value:function(Ct){var It=this;return new Promise(function(jt,Ht){if(!It.transferCallIds.includes(Ct))return Ht(Lt.g.createError(et.g.ERROR_OTHER,"cancelPushData() - no such push data",Gn));var qt=cr.webRTCClient.webRTCClient.cancelPushData(Ct);if(qt)return Ht(Lt.g.createError(et.g.ERROR_OTHER,"cancelPushData() - "+qt,Gn));jt()})}},{key:"fetchMediaList",value:function(Ct,It){var jt=this;return It||(It={}),new Promise(function(Ht,qt){jt.bind().then(function(){return Object.prototype.hasOwnProperty.call(It,"token")||(Lt.g.isTypeof(Ct,"object")&&Ct instanceof qr?It.token=Ct.getToken():It.token=wo.get(jt).token),Eo.getConversationMediaList(Po.get(jt),cr.getActiveApiKey(),It)}).then(Ht).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"fetchMediaList() - cannot fetch media list",Gn,{fromError:Xt}))})})}},{key:"getWaitingRoomContacts",value:function(){Gn.debug("getWaitingRoomContacts()");var Ct={};if(this.status!==et.g.CONVERSATION_STATUS_JOINED)Gn.error("getWaitingRoomContacts() - Conversation is not joined, cannot get waiting room contacts");else if(this.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)Gn.error("getWaitingRoomContacts() - Role is not moderator, cannot get waiting room contacts");else{var It,jt=Ro.get().getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+this._getTechnicalName()),Ht=uo(jt.keys());try{for(Ht.s();!(It=Ht.n()).done;){var qt=It.value;Ct[qt]=jt.get(qt)}}catch(Xt){Ht.e(Xt)}finally{Ht.f()}}return Ct}},{key:"fetchMessageHistory",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,qt){It.bind().then(function(){return Object.prototype.hasOwnProperty.call(jt,"token")?Eo.loadGroupChatMessages(It,null,jt.token):(Lt.g.isTypeof(Ct,"object")&&Ct instanceof qr||(Ct=wo.get(It)),Eo.loadGroupChatMessages(It,Ct))}).then(function(Xt){var en=Xt.map(function(rn){var bn={content:rn.content,timestamp:1e3*rn.created_at,date:new Date(1e3*rn.created_at),sender_id:rn.user_id,display_name:rn.display_name};return rn.user_id.toString()!==Ct.getId()&&(bn.sender=Ct.getOrCreateContact(rn.user_id)),bn});Ht(en)}).catch(function(Xt){qt(Lt.g.createError(et.g.ERROR_OTHER,"fetchMessageHistory() - cannot fetch message history",Gn))})})}},{key:"sendInvitation",value:function(Ct,It){var jt=this;if(It||(It={}),Ct instanceof Uo){Gn.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||Gn.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Ht={receiveNotifier:new dt};It.hasOwnProperty("expirationTime")&&(Ht.expirationTime=It.expirationTime);var qt=new Lo(Ct,this,Ht);qt.type="conversation";var Xt={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:qt.id,roomname:this._getTechnicalName(),sendTime:qt.sendTime,conversationTypes:[]};return this.status===et.g.CONVERSATION_STATUS_JOINED?Xt.conversationTypes.push("WEBCONF"):this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED&&Xt.conversationTypes.push("GROUP_CHAT"),cr.sendData(Ct.getId(),Xt).then(function(){Ht.receiveNotifier.emit("receive")}).catch(function(en){var rn=Lt.g.createError(en,"Invitation not delivered",Gn);zt.get(jt).emit("messageNotDelivered",{error:rn,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),qt}return Gn.error("Parameter is not a contact"),null}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"setNetworkCap",value:function(Ct,It){return typeof Ct!="number"||typeof It!="number"?(Gn.error("setNetworkCap - wrong cap",Ct,It),!1):Ct<=0||It<=0?(this.uploadCap=null,this.downloadCap=null,!0):(this.uploadCap=Ct,this.downloadCap=It,!0)}},{key:"getNetworkCap",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.uploadCap||!this.downloadCap)return null;if(Ct.capacity)return[this.uploadCap,this.downloadCap];for(var It=this.uploadCap,jt=this.downloadCap,Ht=this.reservedStreams.length;--Ht>=0;)this.reservedStreams[Ht].isVideoMuted||(this.reservedStreams[Ht].isRemote?jt-=this.reservedStreams[Ht].resource:It-=this.reservedStreams[Ht].resource);return[It,jt]}},{key:"getStreamResourceReservation",value:function(Ct){for(var It=this.reservedStreams.length;--It>=0;)if(this.reservedStreams[It].streamId===Ct)return this.reservedStreams[It];return null}},{key:"reserveResources",value:function(Ct,It,jt,Ht,qt){var Xt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(Gn.debug("reserveResources",jt),this.getStreamResourceReservation(jt))throw new Error("reserveResources - already reserved stream");var en=!1,rn={streamId:jt,profileType:Ct,priority:qt,resource:It,isRemote:Ht};if(rn.isVideoOnly=!!Xt.isVideoOnly,Xt.isVideoMuted)rn.isVideoMuted=!0,en=!0;else{rn.isVideoMuted=!1;var bn=this.getNetworkCap();en=Ht?bn[1]>=rn.resource:bn[0]>=rn.resource}if(Xt.control)return en;if(!en)throw new Error("reserveResources - no such bandwidth availability");return this.reservedStreams.push(rn),this.reservedStreams.sort(function(Dn,lr){return Dn.priority>lr.priority?-1:Dn.priority===lr.priority?0:1}),Gn.debug("reservedStreams",this.reservedStreams),!0}},{key:"releaseResources",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.getNetworkCap({capacity:!0}))return!1;Gn.debug("releaseResources",Ct);for(var jt=!1,Ht=this.reservedStreams.length;--Ht>=0;)if(this.reservedStreams[Ht].streamId===Ct){this.reservedStreams.splice(Ht,1),jt=!0;break}return Gn.debug("reservedStreams",this.reservedStreams),jt&&It.triggerAdaptation&&this.enableHigherPriorityVideo(!!It.isRemote),jt}},{key:"changeStreamPriority",value:function(Ct,It,jt){Gn.debug("changeStreamPriority",Ct,It,jt);for(var Ht=null,qt=this.reservedStreams.length;--qt>=0;)if(this.reservedStreams[qt].isRemote===It&&this.reservedStreams[qt].streamId===Ct){Ht=this.reservedStreams[qt];break}return!(!Ht||Ht.priority===jt||(Ht.priority=jt,this.reservedStreams.sort(function(Xt,en){return Xt.priority>en.priority?-1:Xt.priority===en.priority?0:1}),Gn.debug("reservedStreams",this.reservedStreams),Ht.isVideoMuted?this.disableLowerPriorityVideo(Ht.isRemote,Ht.resource,Ht.priority)&&Hu(this,Ht):this.enableHigherPriorityVideo(Ht.isRemote,{resource:Ht.resource,priority:Ht.priority,control:!0})&&(Vu(this,Ht),this.enableHigherPriorityVideo(Ht.isRemote)),0))}},{key:"disableLowerPriorityVideo",value:function(Ct,It,jt){Gn.debug("disableLowerPriorityVideo",Ct,It,jt);for(var Ht=[],qt=0,Xt=this.reservedStreams.length;--Xt>=0&&(this.reservedStreams[Xt].isRemote!==Ct||this.reservedStreams[Xt].isVideoMuted||this.reservedStreams[Xt].priority>=jt||(Ht.push(this.reservedStreams[Xt]),!((qt+=this.reservedStreams[Xt].resource)>=It))););if(Ht.length===0||qt<It)return!1;for(var en=Ht.length;--en>=0;)Vu(this,Ht[en]);return!0}},{key:"enableHigherPriorityVideo",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn.debug("enableHigherPriorityVideo",Ct);var jt=this.getNetworkCap(),Ht=Ct?jt[1]:jt[0];It.resource&&It.resource>0&&(Ht+=It.resource);for(var qt=[],Xt=0;Xt<this.reservedStreams.length;Xt+=1)this.reservedStreams[Xt].isRemote===Ct&&this.reservedStreams[Xt].isVideoMuted&&(Object.prototype.hasOwnProperty.call(It,"priority")&&this.reservedStreams[Xt].priority<=It.priority||this.reservedStreams[Xt].resource<=Ht&&(Ht-=this.reservedStreams[Xt].resource,qt.push(this.reservedStreams[Xt])));if(qt.length===0)return!1;if(It.control)return!0;for(var en=qt.length;--en>=0;)Hu(this,qt[en]);return!0}},{key:"startComposite",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return jt(Lt.g.createError(et.g.ERROR_OTHER,"startComposite() - conversation not joined",Gn));cr.webRTCClient.startComposite(Ct._getTechnicalName()),It()})}},{key:"stopComposite",value:function(){var Ct=this;return new Promise(function(It,jt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return jt(Lt.g.createError(et.g.ERROR_OTHER,"stopComposite() - conversation not joined",Gn));cr.webRTCClient.stopComposite(Ct._getTechnicalName()),It()})}},{key:"callVoIP",value:function(Ct){var It=this;return new Promise(function(jt,Ht){return Ct&&typeof Ct=="string"?It.status!==et.g.CONVERSATION_STATUS_JOINED?Ht(Lt.g.createError(et.g.ERROR_OTHER,"callVoIP() - conversation not joined",Gn)):void cr.webRTCClient.webRTCClient.MCUClient.inviteVoIP(It._getTechnicalName(),It.getCloudConversationId(),Ct).then(jt).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_OTHER,"callVoIP() - "+qt.message,Gn))}):Ht(Lt.g.createError(et.g.ERROR_OTHER,"callVoIP() - wrong phoneNumber",Gn))})}},{key:"manageDisconnectionWarningEvent",value:function(Ct){Gn.debug("manageDisconnectionWarningEvent",Ct.detail);var It={};if(this.callIdToStreamId.has(Ct.detail.callId)){Gn.debug("call is linked with conversation");var jt=this.callIdToStreamId.get(Ct.detail.callId);It=Ct.detail.settingUpType==="publish"||Ct.detail.settingUpType==="shareScreen"?this.conversationPublishedStreams.get(jt):this.conversationStreams.get(jt),zt.get(this).emit("disconnectionWarning",{streamInfo:It})}else Gn.debug("call is not linked with conversation")}},{key:"manageErrorEvent",value:function(Ct){if(Gn.debug("manageErrorEvent",Ct.detail),Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_DISCONNECTED"||Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_FAILED")zt.get(this).emit("error",{errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,descriptor:Ct.detail.data});else if(this.callIdToStreamId.has(Ct.detail.callId)){Gn.debug("call is linked with conversation");var It=this.callIdToStreamId.get(Ct.detail.callId),jt={streamInfo:Ct.detail.settingUpType==="publish"?this.conversationPublishedStreams.get(It):this.conversationStreams.get(It),errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,callId:Ct.detail.callId,streamId:It};if(Ct.detail.data&&(jt.descriptor=Ct.detail.data),zt.get(this).emit("error",jt),Xp.has(Ct.detail.errorCode)){var Ht=this.conversationCalls.get(Ct.detail.callId);Ht?this.unpublish(Ht.stream):(this.unsubscribeToStream(It),Ct.detail.errorCode==="CALL_ABORTED"&&this.callIdToStreamId.delete(Ct.detail.callId))}}else Gn.debug("call is not linked with conversation")}}],Pt=[{key:"getAvailableEvents",value:function(){return Yp}}],Zt&&Uu($t.prototype,Zt),Pt&&Uu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un),$u=function(){var Wt="guest";if(apiRTC.userAgentInstance){var $t=apiRTC.userAgentInstance.getUsername();$t&&(Wt=$t)}return Wt},Fu=function(Wt){var $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Zt,Pt){var Bt=null;if(Lt.g.isPropertyTypeof($t,"session","object")&&$t.session instanceof qr)Bt=$t.session;else{if(qr.getActiveSession()===null)return Pt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"getOrCreateConversation() - missing session",Gn));Bt=qr.getActiveSession()}var sn={};sn.token=Bt.getToken(),sn.active=Wt.active,Eo.getOrCreateConversation(Wt,cr.getActiveApiKey(),sn).then(function(ln){Lt.g.isTypeof(ln,"public_id","string")&&(ln.id=ln.public_id,delete ln.public_id),Po.set(Wt,ln.id),qo.set(Wt,ln.data),Lt.g.isTypeof(ln.typeString,"string")&&ju.has(ln.typeString)&&rs.set(Wt,ln.typeString),wo.set(Wt,Bt),Zt(ln)}).catch(function(ln){Po.set(Wt,null),qo.set(Wt,null),rs.set(Wt,null),Pt(Lt.g.createError(et.g.ERROR_HTTP,"getOrCreateConversation() - cannot get/create conversation",Gn,{fromError:ln}))})})},Qp=function(Wt){var $t=Wt.getModerator();return $t?$t.getId():!Wt.conference&&Wt.moderationEnabled?"#":null},Zp=function(Wt,$t){return new Promise(function(Zt,Pt){if(Wt.conference){if($t.access===et.g.CONVERSATION_ACCESS_GRANTED)return Zt($t);if($t.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION)return Pt(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"You were not allowed to join the conference"));var Bt=oo.getOrCreateContact($t.moderator);Ns.set(Wt,Bt),Wu(Wt).then(function(){Zt($t)}).catch(Pt)}else{if(!Wt.moderationEnabled)return Zt(Object.assign($t,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_GUEST}));if(Wt.moderator)return Zt(Object.assign($t,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_MODERATOR}));Wu(Wt).then(function(){Zt(Object.assign($t,{access:et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION,role:et.g.CONVERSATION_ROLE_GUEST}))}).catch(Pt)}})},Wu=function(Wt){return new Promise(function($t,Zt){var Pt=Wt.getModerator();Wt.status=et.g.CONVERSATION_STATUS_WAITING;var Bt=!1,sn=setTimeout(function(){cr.apiRTCSession.joinPresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}),Bt=!0},et.g.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT);Pt&&zt.get(Wt).emit("waitingForModeratorAcceptance",Pt);var ln=new Lo(Pt,Wt);ln.id=Wt._getTechnicalName(),ln.type=Wt.conference?"conference":"conversation",Wt.sendJoinRequest();var Jt=function Ct(It){Gn.debug("dataMessage (waitingRoom)",It.detail);var jt=It.detail.data;if(jt.roomname===Wt._getTechnicalName()){var Ht=It.detail.senderId.toString();jt.command==="access"||jt.command==="access-new"||jt.event===et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER?(delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),cr.removeEventListener("receiveData",Ct),Bt===!0?cr.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):sn&&clearTimeout(sn),jt.value.hasOwnProperty("access")&&jt.value.access||jt.access?(cr.sendData(Ht,{roomname:Wt._getTechnicalName(),command:"access-ack"}).catch(function(qt){var Xt=Lt.g.createError(qt,"Notification not delivered",Gn);zt.get(Wt).emit("messageNotDelivered",{error:Xt,contact:Pt,command:"access-ack"})}),$t()):(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Zt(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",Gn)))):jt.event===et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER&&jt.roomname===Wt._getTechnicalName()&&zt.get(Wt).emit("moderatorConnected",oo.getOrCreateContact(Ht))}};cr.onEvent("receiveData",Jt),ln.onResponse(function(Ct){cr.removeEventListener("receiveData",Jt),Bt===!0?cr.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()]):sn&&clearTimeout(sn),Ct===et.g.INVITATION_STATUS_ACCEPTED?$t():(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Zt(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",Gn)))}),Wt.cancelJoin0=function(){return delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),cr.removeEventListener("receiveData",Jt),Bt===!0?cr.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):sn&&clearTimeout(sn),Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Zt(Lt.g.createError(et.g.ERROR_OPERATION_CANCELED,"Operation canceled",Gn)),!0}})},_f=function(Wt,$t,Zt){return new Promise(function(Pt){Eo.updateConferencePresence(Wt,$t,Zt).then(Pt,function(Bt){Gn.warn("updateConferencePresence",Bt),Pt()}).catch(function(Bt){Gn.error("updateConferencePresence err",Bt),Pt()})})},Bu=function(Wt,$t){var Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Pt=Zt.stream;if(!Pt){var Bt=Wt.conversationCalls.get($t);if(!Bt)return!1;Pt=Bt.stream}return Zt.noTriggerAdaptation?Wt.releaseResources(Pt.userMediaStreamId):Wt.releaseResources(Pt.userMediaStreamId,{triggerAdaptation:!0}),Pt.publishedInConversations.delete(Wt.getName()),Wt.conversationPublishedStreams.delete(Pt.userMediaStreamId),Wt.callIdToStreamId.delete($t),Wt.conversationCalls.delete($t),!0},Vu=function(Wt,$t){var Zt={streamId:$t.streamId,isRemote:$t.isRemote};if($t.isRemote)if($t.isVideoOnly){Zt.action="hangup";var Pt=Ao.get(Wt).get($t.streamId);Pt&&(Zt.callId=Pt.callId),Gn.debug("disableVideoTrack - hangup",$t.streamId),Wt.unsubscribeToStream($t.streamId,{noTriggerAdaptation:!0})}else{Zt.action="disableTrack",Zt.trackType="video";var Bt=Ao.get(Wt).get($t.streamId);Bt&&(Zt.callId=Bt.callId),Gn.debug("disableVideoTrack - disable video track",$t.streamId),Wt.updateSubscribedStream($t.streamId,{audioOnly:!0}).catch(function(Ct){Gn.error("disableVideoTrack - updateSubscribedStream",Ct)}),$t.isVideoMuted=!0}else if($t.isVideoOnly){Zt.action="hangup";var sn=So.get($t.streamId),ln=Wt.getConversationCall(sn);ln&&(Zt.callId=ln.callId),Gn.debug("disableVideoTrack - hangup",$t.streamId),Wt.unpublish(sn,{noTriggerAdaptation:!0})}else{var Jt=Wt.getConversationCall(So.get($t.streamId));Jt?(Zt.action="disableTrack",Zt.trackType="video",Zt.callId=Jt.callId,Gn.debug("disableVideoTrack - disable video track",$t.streamId),Jt.updatePublishedStream("video",!1).catch(function(Ct){Gn.error("disableVideoTrack - updatePublishedStream",Ct)}),$t.isVideoMuted=!0):Zt=null}Zt&&zt.get(Wt).emit("adaptationTriggered",Zt)},Hu=function(Wt,$t){var Zt={streamId:$t.streamId,isRemote:$t.isRemote,action:"enableTrack",trackType:"video"};if($t.isRemote){var Pt=Ao.get(Wt).get($t.streamId);Pt&&(Zt.callId=Pt.callId),Gn.debug("enableVideoTrack - enable video track",$t.streamId),Wt.updateSubscribedStream($t.streamId,{audioOnly:!1}).catch(function(sn){Gn.error("enableVideoTrack - updateSubscribedStream",sn)}),$t.isVideoMuted=!1}else{var Bt=Wt.getConversationCall(So.get($t.streamId));Bt?(Zt.callId=Bt.callId,Gn.debug("enableVideoTrack - enable video track",$t.streamId),Bt.updatePublishedStream("video",!0).catch(function(sn){Gn.error("enableVideoTrack - updatePublishedStream",sn)}),$t.isVideoMuted=!1):Zt=null}Zt&&zt.get(Wt).emit("adaptationTriggered",Zt)},Ql=function(Wt,$t,Zt){return Zt===!0?Wt.pointerSharingState===et.g.STATE_IDLE?(Wt.pointerSharingState=et.g.STATE_JOINING,new Promise(function(Pt,Bt){cr.pointerSharingClient.joinRoom(Wt._getTechnicalName(),{success:function(sn){Wt.pointerSharingState=et.g.STATE_ACTIVE,$t===!0&&(Wt.pointerSharingAutoInvite=!0);var ln={enabled:!0,roomId:sn};zt.get(Wt).emit("pointerSharingEnabled",ln),Pt(),Wt.pointerSharingAutoInvite===!0&&oo.getContacts(Wt._getTechnicalName()).forEach(function(Jt){cr.pointerSharingClient.inviteInRoom(Wt._getTechnicalName(),Jt.getId())})},failure:function(sn,ln){Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1,Bt(sn)}})})):Promise.reject(Lt.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot enable pointer sharing")):Zt===!1?Wt.pointerSharingState===et.g.STATE_ACTIVE?(Wt.pointerSharingState=et.g.STATE_LEAVING,new Promise(function(Pt,Bt){cr.pointerSharingClient.leaveRoom(Wt._getTechnicalName()),Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1;var sn={enabled:!1,roomId:Wt._getTechnicalName()};zt.get(Wt).emit("pointerSharingEnabled",sn),Pt()})):Promise.reject(Lt.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot disable pointer sharing")):Promise.reject(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"enablePointerSharing() - cannot enable/disable pointer sharing"))},$s=function(Wt,$t){var Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return["roomName","callId","clientId"].forEach(function(Pt){$t.hasOwnProperty(Pt)&&(Zt[Pt]=String($t[Pt]))}),Zt};function Zl(Wt){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Zl(Wt)}function _h(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function zu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function _c(){return _c=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,$t,Zt){var Pt=_g(Wt,$t);if(Pt){var Bt=Object.getOwnPropertyDescriptor(Pt,$t);return Bt.get?Bt.get.call(arguments.length<3?Wt:Zt):Bt.value}},_c.apply(this,arguments)}function _g(Wt,$t){for(;!Object.prototype.hasOwnProperty.call(Wt,$t)&&(Wt=Yo(Wt))!==null;);return Wt}function _d(Wt,$t){return _d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},_d(Wt,$t)}function em(Wt,$t){if($t&&(Zl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Wt)}function Yo(Wt){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Yo(Wt)}var ga=ft.Y.get("Conference"),tm=Bo.getAvailableEvents().concat(["closed"]),Fs=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&_d(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Yo(Bt);if(sn){var jt=Yo(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return em(this,Ct)});function Jt(Ct){var It,jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _h(this,Jt),It=ln.call(this,Ct,jt),ga.info("Create conference"),It.conference=!0,It.friendlyName=jt.hasOwnProperty("friendlyName")?jt.friendlyName:Ct,It}return $t=Jt,Pt=[{key:"getAvailableEvents",value:function(){return tm}}],(Zt=[{key:"destroy",value:function(){po.get().deleteConference(this.getName()),_c(Yo(Jt.prototype),"destroy",this).call(this)}},{key:"_getTechnicalName",value:function(){return nm()+ns.get(this)}},{key:"getFriendlyName",value:function(){return this.friendlyName}},{key:"getInfo",value:function(){var Ct=this;return new Promise(function(It,jt){var Ht={},qt=wo.get(Ct);qt&&(Ht.token=qt.getToken()),Eo.getWebconf(Ct._getTechnicalName(),Ht).then(function(Xt){return It({dtmfCode:Xt.dtmfCode,endTime:Xt.end,hasPassword:Xt.hasPassword,sipNumber:Xt.sipNumber,startTime:Xt.start,state:Xt.state,type:Xt.type})}).catch(function(Xt){return jt(Lt.g.createError(et.g.ERROR_OTHER,"getInfo() - Cannot get conference info",ga))})})}},{key:"close",value:function(){var Ct=this;return ga.debug("Closing "+this.getName()),new Promise(function(It,jt){Ct.status!==et.g.CONVERSATION_STATUS_JOINED?jt(Lt.g.createError(et.g.ERROR_OTHER,"close() - Conversation has to be joined to be closed",ga)):Ct.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR?jt(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"close() - Role has to be moderator to close the conversation",ga)):Eo.closeConferenceInstance(Ct,wo.get(Ct)).then(function(){ga.debug("Conversation closed successfully"),cr.dataClient.sendDataToGroup(Ct._getTechnicalName(),{event:et.g.CONVERSATION_CLOSED_IDENTIFIER,instanceId:Ct.getInstanceId(),roomname:Ct._getTechnicalName()}),zt.get(Ct).emit("closed"),Ct.leave(),It()}).catch(function(Ht){var qt="close() - An error occured when closing conversation",Xt={error:new Error(qt),code:et.g.ERROR_OTHER};ga.error(qt,Ht),Ht.hasOwnProperty("code")?Xt.code=Ht.code:Ht.hasOwnProperty("http_code")&&(Xt.code=Ht.http_code.toString().startsWith("4")?et.g.ERROR_UNAUTHORIZED:et.g.ERROR_SERVER_UNAVAILABLE),jt(Xt)})})}},{key:"sendInvitation",value:function(Ct,It){var jt=this;if(It||(It={}),Ct instanceof Uo){ga.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||ga.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Ht={receiveNotifier:new dt};It.hasOwnProperty("expirationTime")&&(Ht.expirationTime=It.expirationTime);var qt=new Lo(Ct,this,Ht),Xt={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:qt.id,roomname:this._getTechnicalName(),friendlyName:this.getFriendlyName(),sendTime:qt.sendTime};return qt.type="conference",Us.get(this)!==null&&(Xt.password=Us.get(this)),cr.sendData(Ct.getId(),Xt).then(function(){Ht.receiveNotifier.emit("receive")}).catch(function(en){var rn=Lt.g.createError(en,"Invitation not delivered",ga);zt.get(jt).emit("messageNotDelivered",{error:rn,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),qt}return ga.error("Parameter is not a contact"),null}},{key:"getTags",value:function(){var Ct=this;return new Promise(function(It,jt){var Ht=qr.getActiveSession();if(!Ht)return jt(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no session found",ga));var qt=Ht.getUserAgent().getEnterprise();if(!qt)return jt(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no enterprise found",ga));qt.getTags(Ct).then(function(Xt){for(var en=[],rn=0;rn<Xt.length;rn+=1)Xt[rn].selected===!0&&en.push(Xt[rn]);return It(en)}).catch(function(Xt){return jt(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - cannot get tags",ga,{fromError:Xt}))})})}},{key:"setTags",value:function(Ct){var It=this;return new Promise(function(jt,Ht){if(!Array.isArray(Ct))return Ht(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ga));if(!It.webconfId)return Ht(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no webconf found",ga));var qt=qr.getActiveSession();if(!qt)return Ht(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no session found",ga));var Xt=qt.getUserAgent().getEnterprise();if(!Xt)return Ht(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no enterprise found",ga));var en=qt.getToken();if(!en)return Ht(Lt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no token found",ga));for(var rn=[],bn=0;bn<Ct.length;bn+=1){if(!Ct[bn].hasOwnProperty("id"))return Ht(Lt.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ga));rn.push(Ct[bn].id)}Eo.updateWebconfTags(Xt.getId(),It.webconfId,rn,en).then(function(){return jt()}).catch(function(Dn){return Ht(Lt.g.createError(et.g.ERROR_OTHER,"setTags() - cannot set tags",ga,{fromError:Dn}))})})}}])&&zu($t.prototype,Zt),Pt&&zu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(Bo),nm=function(){return cr.getActiveApiKey()+":"};function Gu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}ft.Y.get("ConversationCatalog");var is=null,po=function(){function Wt(){if(function(Bt,sn){if(!(Bt instanceof sn))throw new TypeError("Cannot call a class as a function")}(this,Wt),is!==null)throw"Cannot construct singleton ConversationCatalog";this.conversationList=new Map,this.conferenceList=new Map,is=this}var $t,Zt,Pt;return $t=Wt,Zt=[{key:"deleteConversation",value:function(Bt){return!!(Lt.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conversationList.delete(Bt)}},{key:"deleteConference",value:function(Bt){return!!(Lt.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conferenceList.delete(Bt)}},{key:"getOrCreateConversation",value:function(Bt){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ln=null;return Bt!=null&&Bt!==""?this.conversationList.has(Bt.toString())?ln=this.conversationList.get(Bt.toString()):(ln=new Bo(Bt.toString(),sn),this.conversationList.set(Bt.toString(),ln)):(ln=new Bo(null,sn),this.conversationList.set(ln.getName(),ln)),ln}},{key:"getOrCreateConference",value:function(Bt){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ln=null;return Bt!=null&&Bt!==""?this.conferenceList.has(Bt.toString())?ln=this.conferenceList.get(Bt.toString()):(ln=new Fs(Bt.toString(),sn),this.conferenceList.set(Bt.toString(),ln)):(ln=new Fs(null,sn),this.conferenceList.set(ln.getName(),ln)),ln}},{key:"getConversations",value:function(){return this.conversationList}},{key:"getConferences",value:function(){return this.conferenceList}},{key:"isConference",value:function(Bt){return Ku(Bt).hasOwnProperty("apiKey")}},{key:"getNameFromTechnicalName",value:function(Bt){return Ku(Bt).name}}],Pt=[{key:"get",value:function(){return is===null&&(is=new Wt),is}}],Zt&&Gu($t.prototype,Zt),Pt&&Gu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Ku(Wt){var $t=Wt.match(/^([^:]+)[:]([^:]+)$/);return $t===null||$t.length<3?{name:Wt}:{apiKey:$t[1],name:$t[2]}}function eu(Wt){return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},eu(Wt)}function Jo(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return qu(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?qu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function qu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function Yu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function tu(Wt,$t){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},tu(Wt,$t)}function rm(Wt,$t){if($t&&(eu($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fr(Wt)}function Fr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ws(Wt){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ws(Wt)}var vr=ft.Y.get("Session"),Yr=Rn.get(),Bs=new(Ko()),so=Sr.get(),im=["rawData","whiteboardInvitation","fileTransferInvitation","conversationMessage","conversationData","dataChannelInvitation","contactMessage","contactData","customEvent","conversationInvitation","incomingCall","disconnect","error","contactListUpdate","reconnecting","reconnection","conversationJoinRequest","newMediaAvailableFromContact","whiteboardRoomMemberUpdate","incomingScreenSharingCall","pointerSharingInvitation","pointerLocationChanged","incomingScreenSharingCallInvitation","cloudEventOccurred","remoteAccessInvitation"],Ju=new WeakMap,as=new WeakMap,Vs=null,nu=new WeakMap,ss=new WeakMap,qr=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&tu(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ws(Bt);if(sn){var jt=Ws(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return rm(this,Ct)});function Jt(Ct){var It;(function(Xt,en){if(!(Xt instanceof en))throw new TypeError("Cannot call a class as a function")})(this,Jt),It=ln.call(this,vr),vr.debug("Create Session"),It.id=null,It.token=null,It.ccsToken=null,Ju.set(Fr(It),Ct),as.set(Fr(It),null),ss.set(Fr(It),{}),It.isRecording=!1,It.userData=new Io,It.contactListUpdateListenerSetted=!1,It.waitingContactListUpdateEvent=[];var jt=Ro.get(),Ht=po.get(),qt={};return It.invitationsMap=new Map,qt.channelEvent=function(Xt){switch(Xt.detail.channelEvent){case"onChannelReconnecting":zt.get(Fr(It)).emit("reconnecting",Xt);break;case"onChannelReconnect":zt.get(Fr(It)).emit("reconnection",Xt);break;case"onChannelError":zt.get(Fr(It)).emit("error",Xt);break;case"onChannelDisconnect":vr.error("Session :: onChannelDisconnect"),zt.get(Fr(It)).emit("disconnect",Xt)}},qt.incomingCall=function(Xt){var en=jt.getOrCreateContact(Xt.detail.callerId),rn=Xt.detail.callId.toString();if(Xt.detail.callType==="data")if(vr.info("Received file transfer invitation from "+en.getUsername()),Lt.g._private.dataCallsFileInfo.has(rn)){var bn=Lt.g._private.dataCallsFileInfo.get(rn),Dn=null;It.invitationsMap.has(Xt.detail.callerId+"-sendfile-"+rn)?(Dn=It.invitationsMap.get(Xt.detail.callerId+"-sendfile-"+rn),vr.debug("invitation already exist :",Dn)):(Dn=new eo(en,rn,bn),It.invitationsMap.set(Xt.detail.callerId+"-sendfile-"+rn,Dn)),zt.get(Fr(It)).emit("fileTransferInvitation",Dn)}else Lt.g._private.dataChannelInvitations.has(rn)?Xt.detail.data&&Xt.detail.data.type==="internalApiRTC"?vr.debug("internalApiRTC datachannel invitation received, will be handled on Contact"):zt.get(Fr(It)).emit("dataChannelInvitation",new No(en,rn)):(vr.debug("File information has not been received yet, putting invitation on hold"),Lt.g._private.dataCallsOnHold.set(rn));else if(Xt.detail.callType==="screenSharing"||Xt.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){vr.debug("Received screenSharingCallInvitation from "+en.getUsername());var lr=new xr(en,rn,Xt.detail.callType,{isRecorded:!!Xt.detail.hasOwnProperty("recordedCall")&&Xt.detail.recordedCall});zt.get(Fr(It)).emit("incomingScreenSharingCallInvitation",lr)}else{vr.debug("Received screenSharingCall from "+en.getUsername());var dr=so.getOrCreateCall(rn,en,{started:!0,isRecorded:!!Xt.detail.hasOwnProperty("recordedCall")&&Xt.detail.recordedCall});zt.get(Fr(It)).emit("incomingScreenSharingCall",dr)}else{vr.info("Received call invitation from "+en.getUsername());var br=new xr(en,rn,Xt.detail.callType,{isRecorded:!!Xt.detail.hasOwnProperty("recordedCall")&&Xt.detail.recordedCall});zt.get(Fr(It)).emit("incomingCall",br)}},qt.roomInvitation=function(Xt){var en=jt.getOrCreateContact(Xt.detail.senderId);if(Xt.detail.roomType==="whiteBoard"){if(en!==null){vr.info("Received whiteboard invitation from "+en.getUsername());var rn={};Xt.detail.cloudConvId&&(rn.cloudConvId=Xt.detail.cloudConvId),Xt.detail.webconf===!0&&(rn.webconf=!0),zt.get(Fr(It)).emit("whiteboardInvitation",new vs(en,Xt.detail.roomId,rn))}}else Xt.detail.roomType==="pointerSharing"&&(en===null||Ht.getConversations().has(Xt.detail.roomId)||Ht.getConferences().has(Xt.detail.roomId)||(vr.info("Received pointer sharing invitation from "+en.getUsername()),zt.get(Fr(It)).emit("pointerSharingInvitation",new Ml(en,Xt.detail.roomId,Fr(It)))))},qt.roomMemberUpdate=function(Xt){var en,rn=[],bn=Jo(Xt.detail.contactList);try{for(bn.s();!(en=bn.n()).done;){var Dn=en.value;rn.push(jt.getOrCreateContact(Dn.contactId))}}catch(lr){bn.e(lr)}finally{bn.f()}Xt.detail.roomType==="whiteBoard"&&(vr.info("Received whiteboard room member update"),zt.get(Fr(It)).emit("whiteboardRoomMemberUpdate",{contacts:rn,roomId:Xt.detail.roomId,status:Xt.detail.status}))},qt.receiveRoomMessage=function(Xt){if(vr.debug("receiveRoomMessage",Xt),Xt.detail.roomType==="pointerSharing"&&Xt.detail.message.type==="pointerLocation"&&ss.get(Fr(It)).hasOwnProperty(Xt.detail.roomId)){var en={sender:jt.getOrCreateContact(Xt.detail.senderId),source:Xt.detail.message.source,x:Xt.detail.message.x,y:Xt.detail.message.y};Lt.g.isPropertyTypeof(Xt.detail.message,"data","object")&&(en.data=Xt.detail.message.data),zt.get(Fr(It)).emit("pointerLocationChanged",en)}},qt.receiveIMMessage=function(Xt){var en=jt.getOrCreateContact(Xt.detail.senderId);vr.debug("Received IM from "+en.getUsername()+" : ",Xt.detail.message),zt.get(Fr(It)).emit("contactMessage",{sender:en,content:Xt.detail.message,uuid:Xt.detail.UUCSeq,time:Xt.detail.time})},qt.receiveData=function(Xt){var en=jt.getOrCreateContact(Xt.detail.senderId),rn=Xt.detail.data;if(rn!==void 0){var bn=null;if(rn.roomname!==void 0&&(bn=Ht.isConference(rn.roomname)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(rn.roomname)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(rn.roomname))),vr.trace("Received data from "+en.getId(),Xt.detail),zt.get(Fr(It)).emit("rawData",{sender:en,content:rn}),rn.event!==void 0)switch(rn.event){case et.g.INVITATION_ANSWER_IDENTIFIER:case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:vr.debug("Received contact data from "+en.getUsername(),rn.content),zt.get(Fr(It)).emit("contactData",{sender:en,content:rn.content});break;case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:rn.roomname!==void 0&&(vr.debug("Received conversation data from "+en.getUsername(),rn.content),zt.get(Fr(It)).emit("conversationData",{sender:en,conversation:bn,content:rn.content}));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:zt.get(Fr(It)).emit("newMediaAvailableFromContact",{sender:en,media:rn.media});break;case et.g.CONTACT_DATACHANNEL_INVITATION:if(vr.debug("Received datachannel invitation from "+en.getUsername()),rn.options&&rn.options.type==="internalApiRTC")return void vr.debug("internalApiRTC datachannel invitation received, will be handled on Contact");Lt.g._private.dataChannelInvitations.set(rn.callId.toString(),!0),Lt.g._private.dataCallsOnHold.has(rn.callId.toString())&&zt.get(Fr(It)).emit("dataChannelInvitation",new No(en,rn.callId.toString()));break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:vr.debug("Received file info from "+en.getUsername(),rn.fileInfo);var Dn=rn.callId.toString();if(Lt.g._private.dataCallsFileInfo.set(Dn,rn.fileInfo),Lt.g._private.dataCallsOnHold.has(Dn)){var lr=null;It.invitationsMap.has(en.getId()+"-sendfile-"+Dn)?(lr=It.invitationsMap.get(en.getId()+"-sendfile-"+Dn),vr.debug("invitation already exist :",lr)):(lr=new eo(en,Dn,rn.fileInfo),It.invitationsMap.set(Xt.detail.callerId+"-sendfile-"+Dn,lr)),zt.get(Fr(It)).emit("fileTransferInvitation",lr)}else vr.debug("no dataCallsOnHold");break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(rn.roomname!==void 0){vr.info("Received conversation invitation from "+en.getUsername());var dr={session:Fr(It)};rn.hasOwnProperty("password")&&(dr.password=rn.password),bn?(rn.hasOwnProperty("friendlyName")&&bn.name===bn.friendlyName&&(bn.friendlyName=rn.friendlyName),zt.get(Fr(It)).emit("conversationInvitation",new wt(en,rn,bn,dr))):zt.get(Fr(It)).emit("conversationInvitation",new wt(en,rn,null,dr))}break;case et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER:vr.info("Received conversation join request from "+en.getUsername()),bn?zt.get(Fr(It)).emit("conversationJoinRequest",new Go(en,bn,rn.invitationId)):zt.get(Fr(It)).emit("conversationJoinRequest",new Go(en,null,null));break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:case et.g.CONVERSATION_CLOSED_IDENTIFIER:break;case et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER:if(vr.debug("Received remote access invitation"),apiRTC.session.remoteAccessInvitation===null){var br=new Op(en,rn,bn,{});apiRTC.session.remoteAccessInvitation=br,zt.get(Fr(It)).emit("remoteAccessInvitation",br)}else vr.error("remoteAccess session is already ongoing");break;case et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_APP_MESSAGE:case et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE:break;default:var Rr={event:rn.event,content:rn,sender:en};bn!==null&&(Rr.conversation=bn),zt.get(Fr(It)).emit("customEvent",Rr)}else if(rn.command!==void 0)switch(rn.command){case"userWaiting":case"userWaiting-new":vr.info("Received conversation join request from "+en.getUsername()),bn?zt.get(Fr(It)).emit("conversationJoinRequest",new Go(en,bn,null)):zt.get(Fr(It)).emit("conversationJoinRequest",new Go(en,null,null))}}else vr.debug("Received data undefined, leaving process")},qt.receiveGroupChatMessage=function(Xt){var en=jt.getOrCreateContact(Xt.detail.senderId),rn=null,bn=Xt.detail.groupChatId.toString();if(bn!==void 0&&(rn=Ht.isConference(bn)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(bn)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(bn))),rn!==null){vr.debug("Received conversation message from "+en.getUsername(),Xt.detail.message);var Dn={sender:en,conversation:rn,content:Xt.detail.message};Lt.g.isTypeof(Xt.detail,"metadata","object")&&(Dn.metadata=Xt.detail.metadata),zt.get(Fr(It)).emit("conversationMessage",Dn)}},qt.cloudEventOccurred=function(Xt){var en={topic:Xt.detail.topic,target:Xt.detail.target};zt.get(Fr(It)).emit("cloudEventOccurred",en)},qt.callEstablished=function(Xt){if(Xt.detail.callId!==void 0){var en=Xt.detail.callId.toString();vr.debug("callEstablished",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&rn.manageCallEstablishedEvent(Xt)}else vr.debug("callEstablished",Xt.detail)},qt.remoteStreamAdded=function(Xt){if(Xt.detail.callId!==void 0){var en=Xt.detail.callId.toString();vr.debug("remoteStreamAdded",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&rn.manageRemoteStreamAddedEvent(Xt)}else vr.debug("remoteStreamAdded",Xt.detail)},qt.remoteStreamRemoved=function(Xt){if(Xt.detail.callId!==void 0){var en=Xt.detail.callId.toString();vr.debug("remoteStreamRemoved",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&rn.manageRemoteStreamRemovedEvent(Xt)}else vr.debug("remoteStreamRemoved",Xt.detail)},qt.userMediaSuccess=function(Xt){var en=null;if(Xt.detail.callId!==void 0&&Xt.detail.callId!==null){en=Xt.detail.callId.toString(),vr.debug("userMediaSuccess",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&rn.manageUserMediaSuccessEvent(Xt)}else vr.debug("userMediaSuccess",Xt.detail)},qt.onCallStatsUpdate=function(Xt){if(Xt.detail.callId!==void 0){var en=Xt.detail.callId.toString(),rn=so.getCall(en,null,{});rn!==null&&rn.manageCallStatsUpdateEvent(Xt)}else vr.debug("onCallStatsUpdate",Xt.detail)},qt.error=function(Xt){if(vr.debug("error",Xt.detail),Xt.detail.roomName!==null&&Xt.detail.roomName!==void 0){vr.debug("error on conversation :",Xt.detail,Xt.detail.roomName,Xt.detail.callId);var en=null;Xt.detail.roomName!==void 0&&(en=Ht.isConference(Xt.detail.roomName)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(Xt.detail.roomName)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(Xt.detail.roomName)))!==null&&en.manageErrorEvent(Xt)}else if(Xt.detail.callId!==void 0){var rn=Xt.detail.callId.toString();vr.debug("error",Xt.detail,rn);var bn=so.getCall(rn,null,{});bn!==null&&(bn.manageErrorEvent(Xt),Xt.detail.errorCode==="RECORDING_FAILED"&&so.removeCallFromList(bn.getId()))}else vr.debug("error",Xt.detail),zt.get(Fr(It)).emit("error",Xt.detail)},qt.disconnectionWarning=function(Xt){if(Xt.detail.roomName!==null){vr.debug("disconnectionWarning on conversation :",Xt.detail,Xt.detail.roomName,Xt.detail.callId);var en=null;Xt.detail.roomName!==void 0&&(en=Ht.isConference(Xt.detail.roomName)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(Xt.detail.roomName)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(Xt.detail.roomName)))!==null&&en.manageDisconnectionWarningEvent(Xt)}else if(Xt.detail.callId){var rn=Xt.detail.callId.toString();vr.debug("disconnectionWarning",Xt.detail,rn);var bn=so.getCall(rn,null,{});bn!==null&&bn.manageDisconnectionWarningEvent(Xt)}else vr.debug("disconnectionWarning",Xt.detail)},qt.hangup=function(Xt){if(Xt.detail.callId){var en=Xt.detail.callId.toString();vr.debug("hangup",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&(rn.manageHangupEvent(Xt),rn.isRecorded()===!1&&so.removeCallFromList(rn.getId()))}else vr.debug("hangup",Xt.detail)},qt.recordedStreamsAvailable=function(Xt){if(Xt.detail.userId2){var en=jt.getOrCreateContact(Xt.detail.userId2),rn=so.getCall(null,en);rn&&(rn.manageRecordAvailableEvent(Xt),so.removeCallFromList(rn.getId()))}else vr.debug("recordedStreamsAvailable",Xt.detail)},qt.desktopCapture=function(Xt){if(Xt.detail.callId){var en=Xt.detail.callId.toString();vr.warn("desktopCapture",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&(rn.manageDesktopCaptureEvent(Xt),so.removeCallFromList(rn.getId()))}else vr.debug("desktopCapture",Xt.detail)},qt.userMediaError=function(Xt){if(Xt.detail.callId){var en=Xt.detail.callId.toString();vr.warn("userMediaError",Xt.detail,en);var rn=so.getCall(en,null,{});rn!==null&&(rn.manageUserMediaErrorEvent(Xt),Xt.detail.tryAudioCallActivated===!1&&so.removeCallFromList(rn.getId()))}else vr.debug("userMediaError",Xt.detail)},vr.debug("av apiRTCManager onEvent ..."),Yr.onEvent("disconnectionWarning",qt.disconnectionWarning).onEvent("incomingCall",qt.incomingCall).onEvent("roomInvitation",qt.roomInvitation).onEvent("roomMemberUpdate",qt.roomMemberUpdate).onEvent("receiveRoomMessage",qt.receiveRoomMessage).onEvent("receiveIMMessage",qt.receiveIMMessage).onEvent("receiveData",qt.receiveData).onEvent("receiveGroupChatMessage",qt.receiveGroupChatMessage).onEvent("cloudEventOccurred",qt.cloudEventOccurred).onEvent("callEstablished",qt.callEstablished).onEvent("remoteStreamAdded",qt.remoteStreamAdded).onEvent("remoteStreamRemoved",qt.remoteStreamRemoved).onEvent("userMediaSuccess",qt.userMediaSuccess).onEvent("onCallStatsUpdate",qt.onCallStatsUpdate).onEvent("error",qt.error).onEvent("hangup",qt.hangup).onEvent("recordedStreamsAvailable",qt.recordedStreamsAvailable).onEvent("desktopCapture",qt.desktopCapture).onEvent("userMediaError",qt.userMediaError),apiRTC.addEventListener("channelEvent",qt.channelEvent),jt.onUpdate(function(Xt){It.contactListUpdateListenerSetted===!1&&(vr.debug("No listener for contactListUpdate, storing event ..."),It.waitingContactListUpdateEvent.push(Xt)),zt.get(Fr(It)).emit("contactListUpdate",Xt)}),nu.set(Fr(It),qt),It}return $t=Jt,Zt=[{key:"getToken",value:function(){return this.token}},{key:"getApzToken",value:function(){var Ct=null;return apiRTC.session!==void 0&&apiRTC.session!==null&&(Ct=apiRTC.session.JWTApzToken),Ct}},{key:"getId",value:function(){return this.id}},{key:"getUserAgent",value:function(){return Ju.get(this)}},{key:"getContact",value:function(Ct){return vr.warn("getContact() - Method deprecated, use Session.getOrCreateContact() instead"),Ro.get().getOrCreateContact(Ct)}},{key:"getOrCreateContact",value:function(Ct){return Ro.get().getOrCreateContact(Ct)}},{key:"createConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vr.warn("createConversation() - Method deprecated, use Session.getConversation() instead"),this.getConversation(Ct,It)}},{key:"getConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vr.trace("Getting conversation "+Ct,It),po.get().getOrCreateConversation(Ct)}},{key:"getConference",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vr.trace("Getting conference "+Ct,It),po.get().getOrCreateConference(Ct)}},{key:"getOrCreateConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=po.get().getNameFromTechnicalName(Ct);return po.get().isConference(Ct)?po.get().getOrCreateConference(jt,It):po.get().getOrCreateConversation(jt,It)}},{key:"getOrCreateConference",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.getOrCreateConversation(Ct,It)}},{key:"getActiveConversations",value:function(){var Ct,It={},jt=po.get().getConversations(),Ht=Jo(jt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var qt=Ct.value,Xt=jt.get(qt);Xt.isJoined()&&(It[qt]=Xt)}}catch(en){Ht.e(en)}finally{Ht.f()}return It}},{key:"getActiveConferences",value:function(){var Ct,It={},jt=po.get().getConferences(),Ht=Jo(jt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var qt=Ct.value,Xt=jt.get(qt);Xt.isJoined()&&(It[qt]=Xt)}}catch(en){Ht.e(en)}finally{Ht.f()}return It}},{key:"getWhiteboardClient",value:function(){return vr.trace("getWhiteboardClient()"),Yr.whiteBoardClient}},{key:"setUserData",value:function(Ct){this.userData.setProps(Ct).setToSession()}},{key:"setUsername",value:function(Ct){this.userData.setProp("username",Ct).setToSession()}},{key:"setPhotoUrl",value:function(Ct){this.userData.setProp("photo_url",Ct).setToSession()}},{key:"getUserData",value:function(){return this.userData}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.id.toString()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"subscribeToGroup",value:function(Ct){if(this.getSubscribedPresenceGroup().includes(Ct)){vr.debug("Already subscribed to this group");var It=apiCC.session.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ct);It!==-1&&apiCC.session.subscribeToPresenceGroupAddedByApiRTC.splice(It,1)}else Yr.apiRTCSession.subscribePresenceGroup([Ct])}},{key:"unsubscribeToGroup",value:function(Ct){this.getSubscribedPresenceGroup().includes(Ct)?Yr.unsubscribeToPresenceGroup(Ct):vr.debug("Not subscribed to this group")}},{key:"joinGroup",value:function(Ct){if(this.getPresenceGroup().includes(Ct)){vr.debug("Already joined this group");var It=apiCC.session.presenceGroupAddedByApiRTC.indexOf(Ct);It!==-1&&apiCC.session.presenceGroupAddedByApiRTC.splice(It,1)}else Yr.joinAndSubscribeToPresenceGroup(Ct)}},{key:"leaveGroup",value:function(Ct){this.getPresenceGroup().includes(Ct)?Yr.leaveAndUnsubscribeToPresenceGroup(Ct):vr.debug("Group was not joined")}},{key:"subscribeToCloudEvent",value:function(Ct,It){Yr.subscribeToCloudEvent(Ct,It)}},{key:"unsubscribeToCloudEvent",value:function(Ct,It){Yr.unsubscribeToCloudEvent(Ct,It)}},{key:"joinConversationSpace",value:function(Ct){Yr.apiRTCSession.joinConversationSpace(Ct)}},{key:"leaveConversationSpace",value:function(Ct){Yr.apiRTCSession.leaveConversationSpace(Ct)}},{key:"getContacts",value:function(Ct){vr.trace("getContacts()");var It,jt={},Ht=Ro.get().getContacts(Ct),qt=Jo(Ht.keys());try{for(qt.s();!(It=qt.n()).done;){var Xt=It.value;jt[Xt]=Ht.get(Xt)}}catch(en){qt.e(en)}finally{qt.f()}return jt}},{key:"getContactsArray",value:function(Ct){vr.log("getContactsArray");var It=Ro.get().getContacts(Ct);return Array.from(It.values())}},{key:"getOnlineContactsArray",value:function(Ct){vr.log("getOnlineContactsArray");var It=Ro.get().getOnlineContacts(Ct);return Array.from(It.values())}},{key:"getCall",value:function(Ct){return vr.trace("getCall()"),Sr.get().getCall(Ct)}},{key:"getCalls",value:function(){vr.trace("getCalls()");var Ct,It={},jt=Sr.get().getCalls(),Ht=Jo(jt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var qt=Ct.value;It[qt]=jt.get(qt)}}catch(Xt){Ht.e(Xt)}finally{Ht.f()}return It}},{key:"disconnect",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0};return new Promise(function(jt,Ht){if(vr.info("disconnect()"),Ct.token===null&&Ct.id===null)vr.error("disconnect() - Session is already disconnected"),Ht("disconnect() - Session is already disconnected");else{var qt,Xt=Jo(po.get().getConversations().keys());try{for(Xt.s();!(qt=Xt.n()).done;){var en=qt.value;en.status===et.g.CONVERSATION_STATUS_JOINED&&en.leave()}}catch(br){Xt.e(br)}finally{Xt.f()}if(clearInterval(as.get(Ct)),as.set(Ct,null),Ct.token!==null&&It.hasOwnProperty("invalidateUserToken")&&It.invalidateUserToken)Bs.invalidateUserToken(Ct.token).then(function(){Vs=null,It.invalidateApiCCId=!0,Yr.disconnect(It),Ct.id=null,Ct.token=null;for(var br=nu.get(Ct),Rr=0,Nr=Object.keys(br);Rr<Nr.length;Rr++){var Zr=Nr[Rr];vr.info("Session, removing apiRTCManager event :",Zr);var ba=br[Zr];Yr.removeEventListener(Zr,ba)}jt()}).catch(function(br){vr.error("disconnect() - An error occured during disconnection",br),Ht(new Error("disconnect() - An error occured during disconnection"))});else{Vs=null,Yr.disconnect(It),Ct.id=null;for(var rn=nu.get(Ct),bn=0,Dn=Object.keys(rn);bn<Dn.length;bn++){var lr=Dn[bn];vr.info("Session, removing apiRTCManager event :",lr);var dr=rn[lr];Yr.removeEventListener(lr,dr)}jt()}}})}},{key:"cloudRequest",value:function(Ct,It,jt){return Bs.cloudRequest(Ct,It,jt)}},{key:"sendRawData",value:function(Ct,It){return new Promise(function(jt,Ht){Ct!=null?Yr.sendData(Ct.getId(),It).then(jt).catch(function(qt){switch(qt){case et.g.ERROR_TIMED_OUT:Ht(Lt.g.createError(et.g.ERROR_TIMED_OUT,"sendRawData() - Data transmission timed out ",vr));break;case et.g.ERROR_NOT_FOUND:Ht(Lt.g.createError(et.g.ERROR_NOT_FOUND,"sendRawData() - Contact was not found ",vr));break;default:Ht(Lt.g.createError(et.g.ERROR_OTHER,"sendRawData() - Data transmission timed out ",vr))}}):Ht(Lt.g.createError(et.g.ERROR_OTHER,"sendRawData() - Contact undefined",vr))})}},{key:"startRecordingOutgoingStream",value:function(Ct,It){this.isRecording?vr.error("startRecordingOutgoingStream() - already recording"):(Yr.webRTCClient.startRecording(Ct,It),this.isRecording=!0)}},{key:"stopRecordingOutgoingStream",value:function(){var Ct=this;return new Promise(function(It,jt){Ct.isRecording?(Ct.isRecording=!1,Yr.onceEvent("MCURecordedStreamsAvailable",function(Ht){It({filename:Ht.detail.recordedFileName,url:et.g.RECORD_PLAY_URL+Ht.detail.recordedFileName})}),Yr.webRTCClient.stopRecording()):(vr.error("stopRecordingOutgoingStream() - not recording"),jt(new Error("stopRecordingOutgoingStream() - not recording")))})}},{key:"init",value:function(Ct){var It=this;this.id=Ct,Vs=this,as.get(this)===null&&as.set(this,setInterval(function(){am(It)},3e4))}},{key:"setMCUServer",value:function(Ct){Yr.webRTCClient.setMCUConnector(Ct)}},{key:"allowMultipleCalls",value:function(Ct){Yr.webRTCClient.setAllowMultipleCalls(Ct)}},{key:"setCallStatsMonitoringEnabled",value:function(Ct,It){Yr.webRTCClient.enableCallStatsMonitoring(Ct,It)}},{key:"setQualityEvaluatingEnabled",value:function(Ct,It){Yr.webRTCClient.enableQualityEvaluating(Ct,It)}},{key:"getContactFromWebSession",value:function(Ct){var It=this;return new Promise(function(jt,Ht){Bs.getSessionHistory(Ct,It.getToken()).then(function(qt){qt.exist.toString()!=="1"?Ht(Lt.g.createError(et.g.ERROR_NOT_FOUND,"No such web session",vr)):qt.user1.toString()===It.getId()?jt(It.getContact(qt.user2)):qt.user2.toString()===It.getId()?jt(It.getContact(qt.user1)):Ht(Lt.g.createError(et.g.ERROR_UNAUTHORIZED,"User has no access to this web session",vr))}).catch(function(qt){qt.hasOwnProperty("code")?Ht({code:qt.code,error:qt.error}):qt.hasOwnProperty("http_code")?qt.http_code.toString().startsWith("4")?Ht(Lt.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",vr)):Ht(Lt.g.createError(et.g.ERROR_SERVER_UNAVAILABLE,"Error while getting contact from websession",vr)):Ht(Lt.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",vr))})})}},{key:"joinPointerSharingRoom",value:function(Ct){var It=this;return new Promise(function(jt,Ht){if(ss.get(It).hasOwnProperty(Ct))return Ht(Lt.g.createError(et.g.ERROR_WRONG_STATE,"joinPointerSharingRoom() - cannot join pointer sharing room again",vr));Yr.pointerSharingClient.joinRoom(Ct,{success:function(qt){var Xt=new ru(It,qt);ss.get(It)[qt]=Xt,jt(Xt)},failure:function(qt,Xt){Ht(qt==="timeout"?Lt.g.createError(et.g.ERROR_TIMED_OUT,"joinPointerSharingRoom() - cannot join pointer sharing room",vr):Lt.g.createError(et.g.ERROR_OTHER,"joinPointerSharingRoom() - cannot join pointer sharing room",vr))}})})}},{key:"getSubscribedPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.subscribeToPresenceGroup:[]}},{key:"getPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.presenceGroup:[]}}],Pt=[{key:"getAvailableEvents",value:function(){return im}},{key:"getActiveSession",value:function(){return Vs}}],Zt&&Yu($t.prototype,Zt),Pt&&Yu($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un),ru=function(Wt,$t){this.session=Wt,this.roomId=$t,this.getRoomId=function(){return this.roomId},this.isActive=function(){return this.session!==null&&this.roomId!==null&&Yr.pointerSharingClient.roomActive(this.roomId)},this.leaveRoom=function(){var Zt=this;return new Promise(function(Pt,Bt){if(Zt.session===null||Zt.roomId===null)return Bt(Lt.g.createError(et.g.ERROR_WRONG_STATE,"leaveRoom() - cannot leave room again",vr));Yr.pointerSharingClient.leaveRoom(Zt.roomId),delete ss.get(Zt.session)[Zt.roomId],Zt.session=null,Zt.roomId=null,Pt()})},this.invite=function(Zt,Pt){var Bt=this;return new Promise(function(sn,ln){if(Bt.session===null||Bt.roomId===null)return ln(Lt.g.createError(et.g.ERROR_WRONG_STATE,"invite() - cannot invite",vr));Yr.pointerSharingClient.inviteInRoom(Bt.roomId,Zt.getId(),Pt),sn()})},this.sendPointerLocation=function(Zt,Pt,Bt,sn){var ln=this;return new Promise(function(Jt,Ct){return ln.session===null||ln.roomId===null?Ct(Lt.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",vr)):Yr.pointerSharingClient.sendPointerLocation(ln.roomId,Zt,Pt,Bt,sn)?void Jt():Ct(Lt.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",vr))})}},am=function(Wt){for(var $t=Wt.getActiveConferences(),Zt=0,Pt=Object.keys($t);Zt<Pt.length;Zt++){var Bt=$t[Pt[Zt]];Bs.updateConferencePresence(Bt,Wt,Yr.getActiveApiKey())}},iu=s(7618);function Hs(Wt){var $t=typeof Map=="function"?new Map:void 0;return Hs=function(Zt){if(Zt===null||(Pt=Zt,Function.toString.call(Pt).indexOf("[native code]")===-1))return Zt;var Pt;if(typeof Zt!="function")throw new TypeError("Super expression must either be null or a function");if($t!==void 0){if($t.has(Zt))return $t.get(Zt);$t.set(Zt,Bt)}function Bt(){return au(Zt,arguments,Vo(this).constructor)}return Bt.prototype=Object.create(Zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),cs(Bt,Zt)},Hs(Wt)}function au(Wt,$t,Zt){return au=ep()?Reflect.construct.bind():function(Pt,Bt,sn){var ln=[null];ln.push.apply(ln,Bt);var Jt=new(Function.bind.apply(Pt,ln));return sn&&cs(Jt,sn.prototype),Jt},au.apply(null,arguments)}function ou(){return ou=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,$t,Zt){var Pt=om(Wt,$t);if(Pt){var Bt=Object.getOwnPropertyDescriptor(Pt,$t);return Bt.get?Bt.get.call(arguments.length<3?Wt:Zt):Bt.value}},ou.apply(this,arguments)}function om(Wt,$t){for(;!Object.prototype.hasOwnProperty.call(Wt,$t)&&(Wt=Vo(Wt))!==null;);return Wt}function ls(Wt){return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},ls(Wt)}function to(){to=function(){return Wt};var Wt={},$t=Object.prototype,Zt=$t.hasOwnProperty,Pt=typeof Symbol=="function"?Symbol:{},Bt=Pt.iterator||"@@iterator",sn=Pt.asyncIterator||"@@asyncIterator",ln=Pt.toStringTag||"@@toStringTag";function Jt(Cr,gr,Mr){return Object.defineProperty(Cr,gr,{value:Mr,enumerable:!0,configurable:!0,writable:!0}),Cr[gr]}try{Jt({},"")}catch{Jt=function(gr,Mr,Ur){return gr[Mr]=Ur}}function Ct(Cr,gr,Mr,Ur){var _r=gr&&gr.prototype instanceof Ht?gr:Ht,_a=Object.create(_r.prototype),no=new Zr(Ur||[]);return _a._invoke=function(vo,Oo,Gr){var fo="suspendedStart";return function(To,fs){if(fo==="executing")throw new Error("Generator is already running");if(fo==="completed"){if(To==="throw")throw fs;return{value:void 0,done:!0}}for(Gr.method=To,Gr.arg=fs;;){var hs=Gr.delegate;if(hs){var Zo=br(hs,Gr);if(Zo){if(Zo===jt)continue;return Zo}}if(Gr.method==="next")Gr.sent=Gr._sent=Gr.arg;else if(Gr.method==="throw"){if(fo==="suspendedStart")throw fo="completed",Gr.arg;Gr.dispatchException(Gr.arg)}else Gr.method==="return"&&Gr.abrupt("return",Gr.arg);fo="executing";var ro=It(vo,Oo,Gr);if(ro.type==="normal"){if(fo=Gr.done?"completed":"suspendedYield",ro.arg===jt)continue;return{value:ro.arg,done:Gr.done}}ro.type==="throw"&&(fo="completed",Gr.method="throw",Gr.arg=ro.arg)}}}(Cr,Mr,no),_a}function It(Cr,gr,Mr){try{return{type:"normal",arg:Cr.call(gr,Mr)}}catch(Ur){return{type:"throw",arg:Ur}}}Wt.wrap=Ct;var jt={};function Ht(){}function qt(){}function Xt(){}var en={};Jt(en,Bt,function(){return this});var rn=Object.getPrototypeOf,bn=rn&&rn(rn(ba([])));bn&&bn!==$t&&Zt.call(bn,Bt)&&(en=bn);var Dn=Xt.prototype=Ht.prototype=Object.create(en);function lr(Cr){["next","throw","return"].forEach(function(gr){Jt(Cr,gr,function(Mr){return this._invoke(gr,Mr)})})}function dr(Cr,gr){function Mr(_r,_a,no,vo){var Oo=It(Cr[_r],Cr,_a);if(Oo.type!=="throw"){var Gr=Oo.arg,fo=Gr.value;return fo&&ls(fo)=="object"&&Zt.call(fo,"__await")?gr.resolve(fo.__await).then(function(To){Mr("next",To,no,vo)},function(To){Mr("throw",To,no,vo)}):gr.resolve(fo).then(function(To){Gr.value=To,no(Gr)},function(To){return Mr("throw",To,no,vo)})}vo(Oo.arg)}var Ur;this._invoke=function(_r,_a){function no(){return new gr(function(vo,Oo){Mr(_r,_a,vo,Oo)})}return Ur=Ur?Ur.then(no,no):no()}}function br(Cr,gr){var Mr=Cr.iterator[gr.method];if(Mr===void 0){if(gr.delegate=null,gr.method==="throw"){if(Cr.iterator.return&&(gr.method="return",gr.arg=void 0,br(Cr,gr),gr.method==="throw"))return jt;gr.method="throw",gr.arg=new TypeError("The iterator does not provide a 'throw' method")}return jt}var Ur=It(Mr,Cr.iterator,gr.arg);if(Ur.type==="throw")return gr.method="throw",gr.arg=Ur.arg,gr.delegate=null,jt;var _r=Ur.arg;return _r?_r.done?(gr[Cr.resultName]=_r.value,gr.next=Cr.nextLoc,gr.method!=="return"&&(gr.method="next",gr.arg=void 0),gr.delegate=null,jt):_r:(gr.method="throw",gr.arg=new TypeError("iterator result is not an object"),gr.delegate=null,jt)}function Rr(Cr){var gr={tryLoc:Cr[0]};1 in Cr&&(gr.catchLoc=Cr[1]),2 in Cr&&(gr.finallyLoc=Cr[2],gr.afterLoc=Cr[3]),this.tryEntries.push(gr)}function Nr(Cr){var gr=Cr.completion||{};gr.type="normal",delete gr.arg,Cr.completion=gr}function Zr(Cr){this.tryEntries=[{tryLoc:"root"}],Cr.forEach(Rr,this),this.reset(!0)}function ba(Cr){if(Cr){var gr=Cr[Bt];if(gr)return gr.call(Cr);if(typeof Cr.next=="function")return Cr;if(!isNaN(Cr.length)){var Mr=-1,Ur=function _r(){for(;++Mr<Cr.length;)if(Zt.call(Cr,Mr))return _r.value=Cr[Mr],_r.done=!1,_r;return _r.value=void 0,_r.done=!0,_r};return Ur.next=Ur}}return{next:Wo}}function Wo(){return{value:void 0,done:!0}}return qt.prototype=Xt,Jt(Dn,"constructor",Xt),Jt(Xt,"constructor",qt),qt.displayName=Jt(Xt,ln,"GeneratorFunction"),Wt.isGeneratorFunction=function(Cr){var gr=typeof Cr=="function"&&Cr.constructor;return!!gr&&(gr===qt||(gr.displayName||gr.name)==="GeneratorFunction")},Wt.mark=function(Cr){return Object.setPrototypeOf?Object.setPrototypeOf(Cr,Xt):(Cr.__proto__=Xt,Jt(Cr,ln,"GeneratorFunction")),Cr.prototype=Object.create(Dn),Cr},Wt.awrap=function(Cr){return{__await:Cr}},lr(dr.prototype),Jt(dr.prototype,sn,function(){return this}),Wt.AsyncIterator=dr,Wt.async=function(Cr,gr,Mr,Ur,_r){_r===void 0&&(_r=Promise);var _a=new dr(Ct(Cr,gr,Mr,Ur),_r);return Wt.isGeneratorFunction(gr)?_a:_a.next().then(function(no){return no.done?no.value:_a.next()})},lr(Dn),Jt(Dn,ln,"Generator"),Jt(Dn,Bt,function(){return this}),Jt(Dn,"toString",function(){return"[object Generator]"}),Wt.keys=function(Cr){var gr=[];for(var Mr in Cr)gr.push(Mr);return gr.reverse(),function Ur(){for(;gr.length;){var _r=gr.pop();if(_r in Cr)return Ur.value=_r,Ur.done=!1,Ur}return Ur.done=!0,Ur}},Wt.values=ba,Zr.prototype={constructor:Zr,reset:function(Cr){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Nr),!Cr)for(var gr in this)gr.charAt(0)==="t"&&Zt.call(this,gr)&&!isNaN(+gr.slice(1))&&(this[gr]=void 0)},stop:function(){this.done=!0;var Cr=this.tryEntries[0].completion;if(Cr.type==="throw")throw Cr.arg;return this.rval},dispatchException:function(Cr){if(this.done)throw Cr;var gr=this;function Mr(Oo,Gr){return _a.type="throw",_a.arg=Cr,gr.next=Oo,Gr&&(gr.method="next",gr.arg=void 0),!!Gr}for(var Ur=this.tryEntries.length-1;Ur>=0;--Ur){var _r=this.tryEntries[Ur],_a=_r.completion;if(_r.tryLoc==="root")return Mr("end");if(_r.tryLoc<=this.prev){var no=Zt.call(_r,"catchLoc"),vo=Zt.call(_r,"finallyLoc");if(no&&vo){if(this.prev<_r.catchLoc)return Mr(_r.catchLoc,!0);if(this.prev<_r.finallyLoc)return Mr(_r.finallyLoc)}else if(no){if(this.prev<_r.catchLoc)return Mr(_r.catchLoc,!0)}else{if(!vo)throw new Error("try statement without catch or finally");if(this.prev<_r.finallyLoc)return Mr(_r.finallyLoc)}}}},abrupt:function(Cr,gr){for(var Mr=this.tryEntries.length-1;Mr>=0;--Mr){var Ur=this.tryEntries[Mr];if(Ur.tryLoc<=this.prev&&Zt.call(Ur,"finallyLoc")&&this.prev<Ur.finallyLoc){var _r=Ur;break}}_r&&(Cr==="break"||Cr==="continue")&&_r.tryLoc<=gr&&gr<=_r.finallyLoc&&(_r=null);var _a=_r?_r.completion:{};return _a.type=Cr,_a.arg=gr,_r?(this.method="next",this.next=_r.finallyLoc,jt):this.complete(_a)},complete:function(Cr,gr){if(Cr.type==="throw")throw Cr.arg;return Cr.type==="break"||Cr.type==="continue"?this.next=Cr.arg:Cr.type==="return"?(this.rval=this.arg=Cr.arg,this.method="return",this.next="end"):Cr.type==="normal"&&gr&&(this.next=gr),jt},finish:function(Cr){for(var gr=this.tryEntries.length-1;gr>=0;--gr){var Mr=this.tryEntries[gr];if(Mr.finallyLoc===Cr)return this.complete(Mr.completion,Mr.afterLoc),Nr(Mr),jt}},catch:function(Cr){for(var gr=this.tryEntries.length-1;gr>=0;--gr){var Mr=this.tryEntries[gr];if(Mr.tryLoc===Cr){var Ur=Mr.completion;if(Ur.type==="throw"){var _r=Ur.arg;Nr(Mr)}return _r}}throw new Error("illegal catch attempt")},delegateYield:function(Cr,gr,Mr){return this.delegate={iterator:ba(Cr),resultName:gr,nextLoc:Mr},this.method==="next"&&(this.arg=void 0),jt}},Wt}function Xu(Wt,$t,Zt,Pt,Bt,sn,ln){try{var Jt=Wt[sn](ln),Ct=Jt.value}catch(It){return void Zt(It)}Jt.done?$t(Ct):Promise.resolve(Ct).then(Pt,Bt)}function Do(Wt){return function(){var $t=this,Zt=arguments;return new Promise(function(Pt,Bt){var sn=Wt.apply($t,Zt);function ln(Ct){Xu(sn,Pt,Bt,ln,Jt,"next",Ct)}function Jt(Ct){Xu(sn,Pt,Bt,ln,Jt,"throw",Ct)}ln(void 0)})}}function $o(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Qu(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?Qu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function Qu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function zs(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Zu(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function Gs(Wt,$t,Zt){return $t&&Zu(Wt.prototype,$t),Zt&&Zu(Wt,Zt),Object.defineProperty(Wt,"prototype",{writable:!1}),Wt}function Ks(Wt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function");Wt.prototype=Object.create($t&&$t.prototype,{constructor:{value:Wt,writable:!0,configurable:!0}}),Object.defineProperty(Wt,"prototype",{writable:!1}),$t&&cs(Wt,$t)}function cs(Wt,$t){return cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},cs(Wt,$t)}function qs(Wt){var $t=ep();return function(){var Zt,Pt=Vo(Wt);if($t){var Bt=Vo(this).constructor;Zt=Reflect.construct(Pt,arguments,Bt)}else Zt=Pt.apply(this,arguments);return sm(this,Zt)}}function sm(Wt,$t){if($t&&(ls($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _i(Wt)}function _i(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ep(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vo(Wt){return Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Vo(Wt)}var Hn=ft.Y.get("Stream"),su=Rn.get(),lm=po.get(),cm=["stopped","trackStopped","audioAmplitude","audioAmplitudeInfo","muteStateChange","activeStateChange","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","flowStatusChanged","audioFlowStatusChanged","videoFlowStatusChanged","remoteAudioFlowStatusChanged","remoteVideoFlowStatusChanged","release","constraintsChanged"],tp="Requested videoProcessorType blur and blur already applied",So=new Map,Ys=new WeakMap,ds=new WeakMap,us=new WeakMap,lu=new WeakMap,Xo={},lo=function(Wt){Ks(Zt,Wt);var $t=qs(Zt);function Zt(Pt){var Bt,sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zs(this,Zt),Bt=$t.call(this,Hn),sn.constructor!==!0)throw new Error("Stream constructor should not be used directly, please use a static method of class Stream such as : createStreamFromUserMedia, createStreamFromMediaStream, createScreensharingStream");if(delete sn.constructor,!sn.hasOwnProperty("type"))throw new Error("Cannot create Stream with no type");if(Hn.debug("Create Stream with options",sn),Bt.data=Pt,Bt.audioInput=sn.hasOwnProperty("audioInput")?sn.audioInput:null,Bt.videoInput=sn.hasOwnProperty("videoInput")?sn.videoInput:null,Bt.audioFilterIsApplied=!1,Bt.videoFilterIsApplied=!1,Bt.audioAppliedFilter="none",Bt.videoAppliedFilter="none",Bt.originalMediaTrack=null,sn.hasOwnProperty("userMediaStreamId")?(Bt.userMediaStreamId=sn.userMediaStreamId,Bt.isRemote=!1,So.set(Bt.userMediaStreamId,_i(Bt))):(Bt.userMediaStreamId=null,Bt.isRemote=!0),Lt.g.isPropertyTypeof(sn,"streamId","number")?Bt.streamId=sn.streamId:Bt.userMediaStreamId!==null?Bt.streamId=Number(Bt.userMediaStreamId):Number.MAX_SAFE_INTEGER!==void 0?Bt.streamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER):Bt.streamId=Math.floor(1024*Math.random()*1024*1024),Bt.contact=sn.hasOwnProperty("contact")?sn.contact:null,sn.hasOwnProperty("callId")?(Bt.callId=sn.callId,Bt.callAudioAvailable=sn.callAudioAvailable,Bt.callAudioActive=sn.callAudioActive,Bt.callAudioMuted=sn.callAudioMuted,Bt.callAudioSilent=sn.callAudioSilent,Bt.callVideoAvailable=sn.callVideoAvailable,Bt.callVideoActive=sn.callVideoActive,Bt.callVideoMuted=sn.callVideoMuted,Bt.callVideoSilent=sn.callVideoSilent):Bt.callId=null,Bt.publishedInConversations=new Map,Bt.mediaRecorder=null,Bt.recordedBlobs=[],Ys.set(_i(Bt),!!sn.hasOwnProperty("screensharing")&&sn.screensharing),ds.set(_i(Bt),null),us.set(_i(Bt),null),Bt.screensharingRemoteAccessStream=!1,apiRTC.userAgentInstance.apiRTCStreamsList.set(Bt.streamId,_i(Bt)),Bt.type=sn.type,Bt.visibilityChangeHandlerWhenTorchOn=function(rn){if(Hn.debug("visibilityChangeHandlerWhenTorchOn :",document.visibilityState),document.visibilityState==="hidden"&&(Hn.debug("visibilitychange is now hidden"),apiRTC.osName==="Android")){var bn={video:{advanced:[{torch:!1}]}};Bt.informContactsOfChangedConstraints(bn),Bt.emitConstraintsChanged(bn),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)}},apiRTC.browser!=="IE"&&Bt.data!==null){var ln,Jt=function(rn){rn.addEventListener("ended",function(bn){Xo.hasOwnProperty(rn.id)||(zt.get(_i(Bt)).emit("trackStopped",{type:rn.kind,id:rn.id,reason:"ended"}),Xo[rn.id]=!0)})},Ct=$o(Bt.data.getVideoTracks());try{for(Ct.s();!(ln=Ct.n()).done;){var It=ln.value;Jt(It)}}catch(rn){Ct.e(rn)}finally{Ct.f()}var jt,Ht=$o(Bt.data.getAudioTracks());try{for(Ht.s();!(jt=Ht.n()).done;){var qt=jt.value;Jt(qt)}}catch(rn){Ht.e(rn)}finally{Ht.f()}}var Xt={};if(Lt.g.isTypeof(Bt.userMediaStreamId,"string")?(Xt.userMediaStop=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId){var bn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("stopped",bn);var Dn=lu.get(_i(Bt));if(Dn)for(var lr in Dn)apiRTC.removeEventListener(lr,Dn[lr])}},Xt.localStreamUpdated=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId&&rn.detail.callId===null){if(rn.detail.changeList.indexOf("audioIsMuted")>=0){var bn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"audio",muted:rn.detail.audioIsMuted};zt.get(_i(Bt)).emit("muteStateChange",bn),Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")}if(rn.detail.changeList.indexOf("videoIsMuted")>=0){var Dn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"video",muted:rn.detail.videoIsMuted};zt.get(_i(Bt)).emit("muteStateChange",Dn),Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video")}rn.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),rn.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}},Xt.backgroundSubstractionStopVisibilityChange=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId){var bn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("backgroundSubstractionStopVisibilityChange",bn)}},Xt.backgroundSubstractionStopComputeTime=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId){var bn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("backgroundSubstractionStopComputeTime",bn)}},Xt.AIESnapshot=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId){var bn=rn.detail.image;zt.get(_i(Bt)).emit("AIESnapshot",bn)}},Xt.AIELog=function(rn){if(rn.detail.userMediaStreamId===Bt.userMediaStreamId){var bn=rn.detail.log;zt.get(_i(Bt)).emit("AIELog",bn)}}):Lt.g.isTypeof(Bt.callId,"string")&&(Xt.hangup=function(rn){if(rn.detail.hangupType==="remote"&&rn.detail.callId===Bt.callId){var bn={streamId:Bt.streamId,callId:Bt.callId};zt.get(_i(Bt)).emit("stopped",bn);var Dn=lu.get(_i(Bt));for(var lr in Dn)apiRTC.removeEventListener(lr,Dn[lr])}},Xt.remoteStreamUpdated=function(rn){if(rn.detail.callId===Bt.callId){if(rn.detail.changeList.indexOf("audioIsActive")>=0){Bt.callAudioActive=rn.detail.audioIsActive;var bn={streamId:Bt.streamId,callId:Bt.callId,type:"audio",active:rn.detail.audioIsActive};zt.get(_i(Bt)).emit("activeStateChange",bn)}if(rn.detail.changeList.indexOf("audioIsMuted")>=0){Bt.callAudioMuted=rn.detail.audioIsMuted;var Dn={streamId:Bt.streamId,callId:Bt.callId,type:"audio",muted:rn.detail.audioIsMuted};zt.get(_i(Bt)).emit("muteStateChange",Dn),Bt.sendRemoteAudioFlowStatusChanged({enabled:!rn.detail.audioIsMuted,muted:rn.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!rn.detail.audioIsMuted,muted:rn.detail.audioIsSilent})}if(rn.detail.changeList.indexOf("videoIsActive")>=0){Bt.callVideoActive=rn.detail.videoIsActive;var lr={streamId:Bt.streamId,callId:Bt.callId,type:"video",active:rn.detail.videoIsActive};zt.get(_i(Bt)).emit("activeStateChange",lr)}if(rn.detail.changeList.indexOf("videoIsMuted")>=0){Bt.callVideoMuted=rn.detail.videoIsMuted;var dr={streamId:Bt.streamId,callId:Bt.callId,type:"video",muted:rn.detail.videoIsMuted};zt.get(_i(Bt)).emit("muteStateChange",dr),Bt.sendRemoteVideoFlowStatusChanged({enabled:!rn.detail.videoIsMuted,muted:rn.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!rn.detail.videoIsMuted,muted:rn.detail.videoIsSilent})}rn.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.callAudioSilent=rn.detail.audioIsSilent,Bt.sendRemoteAudioFlowStatusChanged({enabled:!rn.detail.audioIsMuted,muted:rn.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!rn.detail.audioIsMuted,muted:rn.detail.audioIsSilent})),rn.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.callVideoSilent=rn.detail.videoIsSilent,Bt.sendRemoteVideoFlowStatusChanged({enabled:!rn.detail.videoIsMuted,muted:rn.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!rn.detail.videoIsMuted,muted:rn.detail.videoIsSilent})),rn.detail.changeList.indexOf("audioIsSilentLocally")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),rn.detail.changeList.indexOf("videoIsSilentLocally")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}}),Object.keys(Xt).length>0)for(var en in lu.set(_i(Bt),Xt),Xt)apiRTC.addEventListener(en,Xt[en]);return Bt}return Gs(Zt,[{key:"getContact",value:function(){return this.contact}},{key:"getData",value:function(){return this.data}},{key:"getConversations",value:function(){var Pt,Bt=[],sn=$o(this.publishedInConversations.keys());try{for(sn.s();!(Pt=sn.n()).done;){var ln=Pt.value;Bt.push(lm.getConversations(ln))}}catch(Jt){sn.e(Jt)}finally{sn.f()}return Bt}},{key:"isScreensharing",value:function(){return Ys.get(this)}},{key:"isScreensharingRemoteAccess",value:function(){return this.screensharingRemoteAccessStream}},{key:"hasData",value:function(){return this.data!==null&&this.data!==void 0}},{key:"hasVideo",value:function(){return this.callId?this.callVideoAvailable&&this.callVideoActive:!!this.hasData()&&this.data.getVideoTracks().length>0}},{key:"hasAudio",value:function(){return this.callId?this.callAudioAvailable&&this.callAudioActive:!!this.hasData()&&this.data.getAudioTracks().length>0}},{key:"isVideoMuted",value:function(){if(this.callId)return this.callVideoSilent;if(this.hasData()){var Pt=this.data.getVideoTracks();if(Pt&&Pt.length>0)return Pt[0].muted}return!0}},{key:"isVideoEnabled",value:function(){if(this.callId)return!this.callVideoMuted;if(this.hasData()){var Pt=this.data.getVideoTracks();return Pt&&Pt.length>0&&Pt[0].enabled}return!1}},{key:"isAudioMuted",value:function(){if(this.callId)return this.callAudioSilent;if(this.hasData()){var Pt=this.data.getAudioTracks();if(Pt&&Pt.length>0)return Pt[0].muted}return!0}},{key:"isAudioEnabled",value:function(){if(this.callId)return!this.callAudioMuted;if(this.hasData()){var Pt=this.data.getAudioTracks();return Pt&&Pt.length>0&&Pt[0].enabled}return!1}},{key:"getType",value:function(){return this.type}},{key:"release",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.childType==="noiseReduction"&&this.parent!==void 0){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx);var Bt=apiCC.getUserMediaStream(this.parent.userMediaStreamId);apiCC.audioProcessor.listenToAudio(this.parent.data,Bt)}this.hasData()&&(this.releaseAudio(),this.releaseVideo(),this.data=null,this.userMediaStreamId&&(apiCC.releaseUserMediaStream(this.userMediaStreamId),So.delete(this.userMediaStreamId))),zt.get(this).emit("release",{streamId:this.streamId,userMediaStreamId:this.userMediaStreamId}),Pt.releaseChildrenStream!==!1&&this.releaseAllChildren(),Pt.releaseParentStream!==!1&&this.parent!==void 0&&(Hn.debug("release parent is also requested"),this.parent.release(Pt)),Hn.debug("Removing in apiRTCStreamsList :",this.streamId),apiRTC.userAgentInstance.apiRTCStreamsList.delete(this.streamId)}},{key:"releaseAudio",value:function(){var Pt=this;this.hasData()&&(this.disableAudioAnalysis(),this.data.getAudioTracks().forEach(function(Bt){Bt.stop(),Xo.hasOwnProperty(Bt.id)||(zt.get(Pt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseAudio"}),Xo[Bt.id]=!0)}))}},{key:"releaseVideo",value:function(){var Pt=this;this.hasData()&&this.data.getVideoTracks().forEach(function(Bt){Bt.stop(),Xo.hasOwnProperty(Bt.id)||(zt.get(Pt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseVideo"}),Xo[Bt.id]=!0)})}},{key:"muteAudio",value:function(){Hn.warn("This method is deprecated now, please use Stream.disableAudio() instead"),this.disableAudio()}},{key:"muteVideo",value:function(){Hn.warn("This method is deprecated now, please use Stream.disableVideo() instead"),this.disableVideo()}},{key:"unmuteAudio",value:function(){Hn.warn("This method is deprecated now, please use Stream.enableAudio() instead"),this.enableAudio()}},{key:"unmuteVideo",value:function(){Hn.warn("This method is deprecated now, please use Stream.enableVideo() instead"),this.enableVideo()}},{key:"sendStreamRequest",value:function(Pt){var Bt=this,sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(){var ln=Do(to().mark(function Jt(Ct,It){var jt,Ht;return to().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:(jt={}).streamId=Bt.streamId,Ht=Bt.publishedInConversations.keys(),jt.roomname=Ht.next().value,jt.options=sn,Bt.contact.sendRequest(Pt,jt).then(function(Xt){if(Xt.result==="NOK"){var en="sendRequest() - "+Xt.reason;return Hn.error(en),It(new Error(en))}return Ct(Xt)}).catch(function(Xt){return Hn.error("Error on sendRequest :",Xt),It()});case 6:case"end":return qt.stop()}},Jt)}));return function(Jt,Ct){return ln.apply(this,arguments)}}())}},{key:"enableAudio",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var sn=Do(to().mark(function ln(Jt,Ct){var It;return to().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Pt.isAudioEnabled()!==!0||Pt.isRemote!==!1){jt.next=3;break}return Hn.debug("audio already enabled"),jt.abrupt("return",Jt());case 3:if(!Pt.userMediaStreamId){jt.next=16;break}if(It=apiCC.getUserMediaStream(Pt.userMediaStreamId)){jt.next=7;break}return jt.abrupt("return",Ct());case 7:if(It.unMuteAudioOnStreams("enabled"),Pt.parent===void 0){jt.next=12;break}return Hn.debug("this is a child stream, need to unmute parent if necessary"),jt.next=12,Pt.parent.enableAudio();case 12:return Pt.childrens!==void 0&&Pt.childrens.forEach(function(){var Ht=Do(to().mark(function qt(Xt,en){return to().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Xt.enableAudio();case 2:case"end":return rn.stop()}},qt)}));return function(qt,Xt){return Ht.apply(this,arguments)}}()),jt.abrupt("return",Jt());case 16:if(!Pt.callId){jt.next=29;break}if(Bt!==!0){jt.next=23;break}Hn.debug("enableAudio remote with applyRemotely"),Hn.debug("this.contact :",Pt.contact),Pt.sendStreamRequest(et.g.CONTACT_ENABLE_AUDIO_REQUEST).then(function(){return Jt()}).catch(function(Ht){return Ct()}),jt.next=28;break;case 23:if(Pt.hasData()){jt.next=25;break}return jt.abrupt("return",Ct());case 25:Pt.data.getAudioTracks().forEach(function(Ht){Ht.enabled=!0}),Pt.sendAudioFlowStatusChanged(),Pt.sendFlowStatusChanged("audio");case 28:return jt.abrupt("return",Jt());case 29:return jt.abrupt("return",Ct());case 30:case"end":return jt.stop()}},ln)}));return function(ln,Jt){return sn.apply(this,arguments)}}())}},{key:"disableAudio",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var sn=Do(to().mark(function ln(Jt,Ct){var It;return to().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Pt.isAudioEnabled()!==!1||Pt.isRemote!==!1){jt.next=3;break}return Hn.debug("audio already disabled"),jt.abrupt("return",Jt());case 3:if(!Pt.userMediaStreamId){jt.next=16;break}if(It=apiCC.getUserMediaStream(Pt.userMediaStreamId)){jt.next=7;break}return jt.abrupt("return",Ct());case 7:if(It.muteAudioOnStreams("enabled"),Pt.parent===void 0){jt.next=12;break}return Hn.debug("this is a child stream, need to mute parent if necessary"),jt.next=12,Pt.parent.disableAudio();case 12:return Pt.childrens!==void 0&&Pt.childrens.forEach(function(){var Ht=Do(to().mark(function qt(Xt,en){return to().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Xt.disableAudio();case 2:case"end":return rn.stop()}},qt)}));return function(qt,Xt){return Ht.apply(this,arguments)}}()),jt.abrupt("return",Jt());case 16:if(!Pt.callId){jt.next=29;break}if(Bt!==!0){jt.next=23;break}Hn.debug("disableAudio remote with applyRemotely"),Hn.debug("this.contact :",Pt.contact),Pt.sendStreamRequest(et.g.CONTACT_DISABLE_AUDIO_REQUEST).then(function(){return Jt()}).catch(function(Ht){return Ct()}),jt.next=28;break;case 23:if(Pt.hasData()){jt.next=25;break}return jt.abrupt("return",Ct());case 25:Pt.data.getAudioTracks().forEach(function(Ht){Ht.enabled=!1}),Pt.sendAudioFlowStatusChanged(),Pt.sendFlowStatusChanged("audio");case 28:return jt.abrupt("return",Jt());case 29:return jt.abrupt("return",Ct());case 30:case"end":return jt.stop()}},ln)}));return function(ln,Jt){return sn.apply(this,arguments)}}())}},{key:"enableVideo",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var sn=Do(to().mark(function ln(Jt,Ct){var It;return to().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Pt.isVideoEnabled()!==!0||Pt.isRemote!==!1){jt.next=3;break}return Hn.debug("video already enabled"),jt.abrupt("return",Jt());case 3:if(!Pt.userMediaStreamId){jt.next=16;break}if(It=apiCC.getUserMediaStream(Pt.userMediaStreamId)){jt.next=7;break}return jt.abrupt("return",Ct());case 7:if(It.unMuteVideoOnStreams("enabled"),Pt.parent===void 0){jt.next=12;break}return Hn.debug("this is a child stream, need to unmute parent if necessary"),jt.next=12,Pt.parent.enableVideo();case 12:return Pt.childrens!==void 0&&Pt.childrens.forEach(function(){var Ht=Do(to().mark(function qt(Xt,en){return to().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Xt.enableVideo();case 2:case"end":return rn.stop()}},qt)}));return function(qt,Xt){return Ht.apply(this,arguments)}}()),jt.abrupt("return",Jt());case 16:if(!Pt.callId){jt.next=29;break}if(Bt!==!0){jt.next=23;break}Hn.debug("enableVideo remote with applyRemotely"),Hn.debug("this.contact :",Pt.contact),Pt.sendStreamRequest(et.g.CONTACT_ENABLE_VIDEO_REQUEST).then(function(){return Jt()}).catch(function(Ht){return Ct()}),jt.next=28;break;case 23:if(Pt.hasData()){jt.next=25;break}return jt.abrupt("return",Ct());case 25:Pt.data.getVideoTracks().forEach(function(Ht){Ht.enabled=!0}),Pt.sendVideoFlowStatusChanged(),Pt.sendFlowStatusChanged("video");case 28:return jt.abrupt("return",Jt());case 29:return jt.abrupt("return",Ct());case 30:case"end":return jt.stop()}},ln)}));return function(ln,Jt){return sn.apply(this,arguments)}}())}},{key:"disableVideo",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var sn=Do(to().mark(function ln(Jt,Ct){var It;return to().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(Pt.isVideoEnabled()!==!1||Pt.isRemote!==!1){jt.next=3;break}return Hn.debug("video already disabled"),jt.abrupt("return",Jt());case 3:if(!Pt.userMediaStreamId){jt.next=16;break}if(It=apiCC.getUserMediaStream(Pt.userMediaStreamId)){jt.next=7;break}return jt.abrupt("return",Ct());case 7:if(It.muteVideoOnStreams("enabled"),Pt.parent===void 0){jt.next=12;break}return Hn.debug("this is a child stream, need to mute parent if necessary"),jt.next=12,Pt.parent.disableVideo();case 12:return Pt.childrens!==void 0&&Pt.childrens.forEach(function(){var Ht=Do(to().mark(function qt(Xt,en){return to().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Xt.disableVideo();case 2:case"end":return rn.stop()}},qt)}));return function(qt,Xt){return Ht.apply(this,arguments)}}()),jt.abrupt("return",Jt());case 16:if(!Pt.callId){jt.next=29;break}if(Bt!==!0){jt.next=23;break}Hn.debug("disableVideo remote with applyRemotely"),Hn.debug("this.contact :",Pt.contact),Pt.sendStreamRequest(et.g.CONTACT_DISABLE_VIDEO_REQUEST).then(function(){return Jt()}).catch(function(Ht){return Ct()}),jt.next=28;break;case 23:if(Pt.hasData()){jt.next=25;break}return jt.abrupt("return",Ct());case 25:Pt.data.getVideoTracks().forEach(function(Ht){Ht.enabled=!1}),Pt.sendVideoFlowStatusChanged(),Pt.sendFlowStatusChanged("video");case 28:return jt.abrupt("return",Jt());case 29:return jt.abrupt("return",Ct());case 30:case"end":return jt.stop()}},ln)}));return function(ln,Jt){return sn.apply(this,arguments)}}())}},{key:"getAudioFlowStatus",value:function(){var Pt={};return this.data.getAudioTracks().forEach(function(Bt){Pt.enabled=Bt.enabled,Pt.muted=Bt.muted}),Pt}},{key:"getVideoFlowStatus",value:function(){var Pt={};return this.data.getVideoTracks().forEach(function(Bt){Pt.enabled=Bt.enabled,Pt.muted=Bt.muted}),Pt}},{key:"getRemoteAudioFlowStatus",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(!Pt.isRemote)return sn("Please use this function on a remote Stream");if(Hn.debug("getRemoteAudioFlowStatus()"),Pt.contact===null)return sn("No contact associated");var ln=Pt.addPendingPromise("getRemoteAudioFlowStatus",Bt,sn);Pt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Pt.callId,streamId:Pt.getId(),timeout:ln})})}},{key:"getRemoteVideoFlowStatus",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(!Pt.isRemote)return sn("Please use this function on a remote Stream");if(Hn.debug("getRemoteVideoFlowStatus()"),Pt.contact===null)return sn("No contact associated");var ln=Pt.addPendingPromise("getRemoteVideoFlowStatus",Bt,sn);Pt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Pt.callId,streamId:Pt.getId(),timeout:ln})})}},{key:"attachToElement",value:function(Pt){Hn.debug("attachToElement"),su.attachMediaStream(Pt,this.data)}},{key:"addInDiv",value:function(Pt,Bt,sn,ln,Jt){Hn.debug("addInDiv"),su.addStreamInDiv(this.data,this.type,Pt,Bt,sn,ln,Jt)}},{key:"removeFromDiv",value:function(Pt,Bt){Hn.debug("removeFromDiv"),su.removeElementFromDiv(Pt,Bt)}},{key:"startRecord",value:function(Pt){return Hn.info("startRecord :",Pt),apiCC.recordMgr.record(this.data,Pt)}},{key:"stopRecord",value:function(){return Hn.info("stopRecord() - Stopping record"),apiCC.recordMgr.stop()}},{key:"pauseRecord",value:function(){return Hn.info("pauseRecord() - Pausing record"),apiCC.recordMgr.pause()}},{key:"resumeRecord",value:function(){return Hn.info("resumeRecord() - Resuming record"),apiCC.recordMgr.resume()}},{key:"enableAudioAnalysis",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hn.info("enableAudioAnalysis()");var sn=Lt.g.getAudioContext(),ln=null,Jt=!1,Ct=us.get(this),It=ds.get(this);sn?this.hasData()?Ct!==null||It!==null?Hn.error("enableAudioAnalysis() - Audio analysis already enabled"):(Ct=sn.createMediaStreamSource(this.data),(It=sn.createScriptProcessor(2048,1,1)).connect(sn.destination),It.onaudioprocess=function(){var jt,Ht=new Uint8Array(It.analyser.frequencyBinCount),qt=0;It.analyser.getByteFrequencyData(Ht);var Xt,en=$o(Ht);try{for(en.s();!(Xt=en.n()).done;)qt+=Xt.value}catch(lr){en.e(lr)}finally{en.f()}jt=qt/Ht.length,zt.get(Pt).emit("audioAmplitude",jt);var rn=0;Ht.sort(function(lr,dr){return dr-lr}),Ht=Ht.slice(0,50);for(var bn=0;bn<Ht.length;bn++)rn+=Ht[bn];jt=rn/Ht.length;var Dn=typeof Bt.threshold=="number"?Bt.threshold:et.g.STREAM_AUDIO_ANALYSIS_THRESHOLD;jt>Dn&&(Jt||(Jt=!0,zt.get(Pt).emit("audioAmplitudeInfo",{amplitude:jt,isSpeaking:!0})),ln!==null&&clearTimeout(ln),ln=setTimeout(function(){zt.get(Pt).emit("audioAmplitudeInfo",{amplitude:jt,isSpeaking:!1}),Jt=!1},1e3))},It.analyser=sn.createAnalyser(),It.analyser.smoothingTimeConstant=.5,It.analyser.fftSize=1024,Ct.connect(It.analyser),It.analyser.connect(It),ds.set(this,It),us.set(this,Ct)):Hn.error("enableAudioAnalysis() - Stream has no data, unable to enable audio analysis"):Hn.error("enableAudioAnalysis() - AudioContext is not available, unable to enable audio analysis")}},{key:"disableAudioAnalysis",value:function(){Hn.info("disableAudioAnalysis()");var Pt=us.get(this),Bt=ds.get(this);Pt!==null&&Pt.disconnect(),Bt!==null&&(Bt.analyser.disconnect(),Bt.disconnect()),ds.set(this,null),us.set(this,null)}},{key:"processImageWithDrawImage",value:function(Pt,Bt,sn,ln){Hn.debug("processImageWithDrawImage() - removeVideo :",Pt);var Jt=document.createElement("canvas"),Ct=Jt.getContext("2d");if(Jt.width=sn.videoWidth,Jt.height=sn.videoHeight,ln.hasOwnProperty("width")&&(Jt.width=ln.width),ln.hasOwnProperty("height")&&(Jt.height=ln.height),ln.hasOwnProperty("filters")){for(var It=[],jt=0,Ht=Object.keys(ln.filters);jt<Ht.length;jt++){var qt=Ht[jt];It.push(qt+"("+ln.filters[qt]+")")}Ct.filter=It.join(" ")}Ct.drawImage(sn,0,0,Jt.width,Jt.height),Pt===!0&&sn.remove(),ln.hasOwnProperty("output")&&ln.output==="blob"?ln.outputMimeType!==void 0?(Hn.debug("options.outputMimeType is defined :",ln.outputMimeType),Jt.toBlob(function(Xt){Bt(Xt)},ln.outputMimeType,ln.outputQualityArgument)):Jt.toBlob(function(Xt){Bt(Xt)},"image/png"):ln.outputMimeType!==void 0?(Hn.debug("options.outputMimeType is defined :",ln.outputMimeType),Bt(Jt.toDataURL(ln.outputMimeType,ln.outputQualityArgument))):Bt(Jt.toDataURL("image/png"))}},{key:"takeSnapshotWithDrawImage",value:function(Pt,Bt,sn){var ln=this;Hn.debug("takeSnapshotWithDrawImage()");var Jt=null;if(Jt=document.createElement("video"),Pt.divId===void 0||Pt.divId===null)setTimeout(function(){ln.attachToElement(Jt),Jt.addEventListener("canplay",function(){ln.processImageWithDrawImage(!0,Bt,Jt,Pt)}),Jt.muted=!0,Jt.play()},1e3);else if((Jt=document.getElementById(Pt.divId))===null){var Ct="takeSnapshotWithDrawImage() - divId not found for snapshot";Hn.error(Ct),sn(new Error(Ct))}else this.processImageWithDrawImage(!1,Bt,Jt,Pt)}},{key:"takeSnapshot",value:function(){var Pt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Hn.info("takeSnapshot()"),Bt.takeSnapShotUuid===void 0){var sn=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-");Hn.debug("takeSnapShotUuid :",sn),Bt.takeSnapShotUuid=sn}else Hn.debug("takeSnapShotUuid already exist");return new Promise(function(ln,Jt){if(Pt.hasData()){if(!Pt.hasVideo()){var Ct="takeSnapshot() - This stream does not have a video track";Hn.error(Ct),Jt(new Error(Ct))}Pt.userMediaStreamId?(Hn.debug("Local stream"),Pt.takeSnapshotWithDrawImage(Bt,ln,Jt)):Pt.callId&&(Hn.debug("Remote stream"),Bt.applyRemotely===!0?(Hn.debug("takesnapshot remote with applyRemotely"),Pt.contact.internalApiRTCdataChannelInvitationHandlerTable[Bt.takeSnapShotUuid]={},Pt.contact.internalApiRTCdataChannelInvitationHandlerTable[Bt.takeSnapShotUuid].handler=function(jt){Hn.debug("internalApiRTCdataChannelInvitationHandler options.takeSnapShotUuid :",Bt.takeSnapShotUuid),jt.takeSnapShotUuid===Bt.takeSnapShotUuid?(Pt.contact.removeListener("internalApiRTCdataChannelInvitation",Pt.contact.internalApiRTCdataChannelInvitationHandlerTable[Bt.takeSnapShotUuid].handler),jt.accept().then(function(Ht){Hn.debug("Data channel accepted:",Ht);var qt=Ht;qt.on("dataReceived",function(Xt){return Hn.debug("Data received",Xt),qt.close(),qt=null,ln(Xt.data)}).on("transferProgress",function(Xt){Hn.debug("Data transfer progress:",Xt)})})):Hn.debug("event is not for this takeSnapShotUuid, exit")},Pt.contact.on("internalApiRTCdataChannelInvitation",Pt.contact.internalApiRTCdataChannelInvitationHandlerTable[Bt.takeSnapShotUuid].handler),Pt.sendStreamRequest(et.g.CONTACT_TAKESNAPSHOT_REQUEST,Bt).then(function(jt){Hn.debug("sendStreamRequest ok , data :",jt)}).catch(function(jt){return Jt(jt)})):(Hn.debug("Locally takesnaphot on a remote stream"),Pt.takeSnapshotWithDrawImage(Bt,ln,Jt)))}else{var It="takeSnapshot() - Stream has no data, cannot get snapshot";Hn.error(It),Jt(new Error(It))}})}},{key:"getId",value:function(){return String(this.streamId)}},{key:"getOwner",value:function(){return this.contact?this.contact:qr.getActiveSession().getUserAgent()}},{key:"getLabels",value:function(){var Pt={};return this.hasData()&&this.data.getAudioTracks().length>0&&(Pt.audioSourceLabel="",this.data.getAudioTracks()[0].label&&(Pt.audioSourceLabel=this.data.getAudioTracks()[0].label)),this.hasData()&&this.data.getVideoTracks().length>0&&(Pt.videoSourceLabel="",this.data.getVideoTracks()[0].label&&(Pt.videoSourceLabel=this.data.getVideoTracks()[0].label)),Hn.debug("getLabels:",Pt),Pt}},{key:"checkImageCaptureCompatibility",value:function(){return typeof ImageCapture>"u"}},{key:"getLocalMediaStreamTrack",value:function(){var Pt=null;return this.data.getVideoTracks().length===1&&(Pt=this.data.getVideoTracks()[0]),Pt}},{key:"getLocalMediaStreamAudioTrack",value:function(){var Pt=null;return this.data.getAudioTracks().length===1&&(Pt=this.data.getAudioTracks()[0]),Pt}},{key:"informContactsOfChangedConstraints",value:function(Pt){var Bt,sn=po.get().getConversations(),ln=$o(sn.keys());try{for(ln.s();!(Bt=ln.n()).done;){var Jt=Bt.value,Ct=sn.get(Jt).getContactsArray(),It=void 0;for(It=0;It<Ct.length;It++)Ct[It].sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:Pt,mediaStreamId:this.data.id})}}catch(Ht){ln.e(Ht)}finally{ln.f()}if(this.callId!==null){Hn.debug("This stream is used in a call, send CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER to remote");var jt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callId);jt!==null&&qr.getActiveSession().getOrCreateContact(jt.remoteId).sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:Pt,mediaStreamId:this.data.id})}}},{key:"applyConstraints",value:function(Pt){var Bt=this;return new Promise(function(sn,ln){if(Bt.isRemote){if(Hn.debug("applyConstraints() on a remote stream"),Bt.contact===null)return ln("No contact associated");var Jt=Bt.addPendingPromise("applyConstraints",sn,ln);Bt.contact.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Bt.callId,streamId:Bt.getId(),timeout:Jt,constraints:Pt})}else{if(Hn.debug("applyConstraints() local"),!MediaStreamTrack.prototype.hasOwnProperty("applyConstraints"))return ln("Navigator not compatible with this function");var Ct=null,It=null;if(Pt===void 0)return ln("Missing argument");if(Pt.audio!==void 0){var jt=Bt.getLocalMediaStreamAudioTrack();jt!==null&&(Ct=jt.applyConstraints(Pt.audio))}if(Pt.video!==void 0){var Ht=Bt.getLocalMediaStreamTrack();Ht!==null&&(It=Ht.applyConstraints(Pt.video))}Promise.all([Ct,It]).then(function(qt){return Hn.debug("Constraints applied :",Pt),Pt&&Pt.video&&Pt.video.advanced&&Pt.video.advanced[0].torch===!0?(Hn.debug("Torch to true:",Pt),document.addEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)):Pt&&Pt.video&&Pt.video.advanced&&Pt.video.advanced[0].torch===!1&&(Hn.debug("Torch to false:",Pt),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)),Bt.informContactsOfChangedConstraints(Pt),sn()}).catch(function(qt){return Hn.error("reject Promise all :",qt),ln(qt)})}})}},{key:"applyConstraint",value:function(Pt,Bt){Hn.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"setCapability",value:function(Pt,Bt){Hn.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"getSettings",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(!Pt.isRemote)return Hn.debug("getSettings()"),MediaStreamTrack.prototype.hasOwnProperty("getSettings")?Bt({audio:Pt.getStreamTrackSettings(Pt.getLocalMediaStreamAudioTrack()),video:Pt.getStreamTrackSettings(Pt.getLocalMediaStreamTrack())}):sn("Navigator not compatible with this function");if(Hn.debug("getSettings() on a remote stream"),Pt.contact===null)return sn("No contact associated");var ln=Pt.addPendingPromise("getSettings",Bt,sn);Pt.contact.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Pt.callId,streamId:Pt.getId(),timeout:ln})})}},{key:"getStreamTrackSettings",value:function(Pt){if(Pt!==null)return Pt.getSettings()}},{key:"getCapabilities",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(!Pt.isRemote)return Hn.debug("getCapabilities()"),MediaStreamTrack.prototype.hasOwnProperty("getCapabilities")?Bt({audio:Pt.getStreamTrackCapabilities(Pt.getLocalMediaStreamAudioTrack()),video:Pt.getStreamTrackCapabilities(Pt.getLocalMediaStreamTrack())}):sn("Navigator not compatible with this function");if(Hn.debug("getCapabilities() on a remote stream"),Pt.contact===null)return sn("No contact associated");var ln=Pt.addPendingPromise("getCapabilities",Bt,sn);Pt.contact.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Pt.callId,streamId:Pt.getId(),timeout:ln})})}},{key:"getStreamTrackCapabilities",value:function(Pt){return Pt!==null?Pt.getCapabilities():{}}},{key:"getConstraints",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(!Pt.isRemote)return Hn.debug("getConstraints()"),MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?Bt({audio:Pt.getStreamTrackConstraints(Pt.getLocalMediaStreamAudioTrack()),video:Pt.getStreamTrackConstraints(Pt.getLocalMediaStreamTrack())}):sn("Navigator not compatible with this function");if(Hn.debug("getConstraints() on a remote stream"),Pt.contact===null)return sn("No contact associated");var ln=Pt.addPendingPromise("getConstraints",Bt,sn);Pt.contact.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER,{requesterId:qr.getActiveSession().getUserAgent().userId,callId:Pt.callId,streamId:Pt.getId(),timeout:ln})})}},{key:"getStreamTrackConstraints",value:function(Pt){return Pt!==null?Pt.getConstraints():{}}},{key:"takePhoto",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(Hn.debug("takePhoto()"),Pt.checkImageCaptureCompatibility())sn("Your navigator is not compatible with takePhoto()");else{var ln=Pt.getLocalMediaStreamTrack();ln!==null?new ImageCapture(ln).takePhoto().then(function(Jt){var Ct=new Image;Ct.src=URL.createObjectURL(Jt),Bt(Ct)}).catch(function(Jt){sn("takePhoto() error: ",Jt)}):sn("No local mediaStreamTrack found")}})}},{key:"activateAIAnnotations",value:function(){var Pt=this.getStreamAIE();Pt!==null&&Pt.activateAnnotations()}},{key:"stopAIAnnotations",value:function(){var Pt=this.getStreamAIE();Pt!==null&&Pt.stopAnnotations()}},{key:"activateAILogs",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof Pt!="number")return Hn.error("minLogPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateLogs(Pt)}},{key:"stopAILogs",value:function(){var Pt=this.getStreamAIE();Pt!==null&&Pt.stopLogs()}},{key:"activateAISnapshots",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof Pt!="number")return Hn.error("minSnapshotPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateSnapshots(Pt)}},{key:"stopAISnapshots",value:function(){var Pt=this.getStreamAIE();Pt!==null&&Pt.stopSnapshots()}},{key:"getStreamAIE",value:function(){var Pt=null;if(apiCC!==void 0){var Bt=apiCC.getUserMediaStream(this.userMediaStreamId);if(Bt.mediaFilterManager!==null){var sn=Bt.mediaFilterManager.filters;Object.values(sn).forEach(function(ln){ln.streamAIE!==null&&(Pt=ln.streamAIE)}),Pt===null&&Hn.error("Applied filter is not an AI filter")}else Hn.error("No filter applied on stream")}return Pt}},{key:"addChildren",value:function(Pt,Bt){this.childrenTypeExists(Bt)?Hn.error("This stream already has a sub instance running for this"):(this.childrens===void 0&&(this.childrens=[]),this.childrens.push(Pt),this.parent!==void 0&&(this.parent.childrens===void 0&&(this.parent.childrens=[]),Hn.debug("addChildren for parent"),this.parent.childrens.push(Pt)))}},{key:"releaseChildren",value:function(Pt){this.childrens!==void 0&&this.childrens.forEach(function(Bt,sn){Bt.childType===Pt&&Bt.release({releaseParentStream:!1})})}},{key:"releaseAllChildren",value:function(){Hn.debug("releaseAllChildren"),this.childrens!==void 0&&this.childrens.forEach(function(Pt,Bt){Pt.release({releaseParentStream:!1})})}},{key:"removeChildren",value:function(Pt){var Bt=this;this.childrens!==void 0&&this.childrens.forEach(function(sn,ln){if(sn.childType===Pt)return Bt.childrens.splice(ln,1)}),this.parent!==void 0&&this.parent.childrens!==void 0&&this.parent.childrens.forEach(function(sn,ln){if(sn.childType===Pt)return Bt.parent.childrens.splice(ln,1)})}},{key:"childrenTypeExists",value:function(Pt){var Bt=!1;return this.childrens!==void 0&&this.childrens.forEach(function(sn){sn.childType===Pt&&(Bt=!0)}),Bt}},{key:"createChildStreamFromStream",value:function(Pt,Bt){var sn=this,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Jt,Ct){Hn.debug("createChildStreamFromStream");var It={};It.type=et.g.STREAM_TYPE_NO_INPUT,Pt.getAudioTracks().length>0&&(It.type=et.g.STREAM_TYPE_AUDIO),Pt.getVideoTracks().length>0&&(It.type=et.g.STREAM_TYPE_VIDEO);var jt=sn;apiRTC.createUserMediaStream({type:"media",stream:Pt,success:function(Ht){Hn.debug("[createChildStreamFromStream] success; userMediaStreamId: "+Ht.userMediaStreamId),It.constructor=!0,It.userMediaStreamId=Ht.userMediaStreamId;var qt=new dm(Ht.stream,It,jt,Bt);qt.parentStreamCtx=ln,ln.audioFilterIsApplied===!0&&(qt.audioFilterIsApplied=ln.audioFilterIsApplied,qt.audioAppliedFilter=ln.audioAppliedFilter),ln.videoFilterIsApplied===!0&&(qt.videoFilterIsApplied=ln.videoFilterIsApplied,qt.videoAppliedFilter=ln.videoAppliedFilter),Jt(qt)},failure:function(Ht,qt){Hn.debug("[createChildStreamFromStream] failure :",qt),Ct()},childStreamType:Bt})})}},{key:"applyMuteStatusFromParent",value:function(){var Pt=this,Bt=0;this.data.getAudioTracks().forEach(function(ln){ln.enabled=Pt.parent.data.getAudioTracks()[Bt].enabled,Bt++});var sn=0;this.data.getVideoTracks().forEach(function(ln){ln.enabled=Pt.parent.data.getVideoTracks()[sn].enabled,sn++})}},{key:"loadTFLiteModule",value:function(){return new Promise(function(Pt,Bt){var sn;if(sn=iu.feature.simd?"https://cdn.apizee.com/apiRTC/lib/tflite/tflite-simd.js":"https://cdn.apizee.com/apiRTC/lib/tflite/tflite.js",apiRTC.userAgentInstance.tFLiteModuleLoaded===!1){Hn.debug("loading tflite");var ln={async:!0,numRetries:20,reqdelay:200,success:function(){Hn.debug("loaded successfully",iu.feature.simd),iu.feature.simd?createTFLiteSIMDModule().then(function(Jt){apiRTC.userAgentInstance.tFLiteSIMDModule=Jt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,Pt(Jt)}):createTFLiteModule().then(function(Jt){apiRTC.userAgentInstance.tFLiteSIMDModule=Jt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,Pt(Jt)})},error:function(Jt){Bt("Resources loading failed, depsNotFound: "+Jt)},retrycb:function(Jt,Ct){Hn.warn("Blur API module loading retry :"+Jt+" ,delay before retry :"+Ct)}};apiCC.resourcesLoader.loadjs([sn],"blur-api",ln)}else Hn.debug("tflite already loaded and TFLiteSIMDModule already created"),Pt(apiRTC.userAgentInstance.tFLiteSIMDModule)})}},{key:"setupTFLiteModule",value:function(Pt){return new Promise(function(Bt,sn){Hn.debug("setupTFLiteModule"),apiRTC.userAgentInstance.modelLoadedInModule===!1?(Hn.debug("loading model landscape"),fetch("https://cdn.apizee.com/apiRTC/lib/tflite/models/selfie_segmentation_landscape.tflite").then(function(ln){if(!ln.ok)throw new Error("Failed to download tflite model!");Hn.debug("loaded successfully");var Jt=Pt._getModelBufferMemoryOffset();ln.arrayBuffer().then(function(Ct){Pt.HEAPU8.set(new Uint8Array(Ct),Jt),Pt._loadModel(Ct.byteLength),Hn.debug("module setup complete"),apiRTC.userAgentInstance.modelLoadedInModule=!0,apiRTC.userAgentInstance.tFLiteSIMDModule=Pt,Bt(Pt)})}).catch(function(ln){Hn.error("Something went wrong during tflite model loading..",ln)})):(Hn.debug("model landscape already loaded in module"),Bt(apiRTC.userAgentInstance.tFLiteSIMDModule))})}},{key:"onMaskFrameTimer",value:function(Pt){Pt.data.id===this.blurVariables.TIMEOUT_TICK&&this.renderMask()}},{key:"renderMask",value:function(){this.resizeSource(),this.runInference(),this.runPostProcessing(),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.SET_TIMEOUT,timeMs:1e3/30})}},{key:"resizeSource",value:function(){this.blurVariables.segmentationMaskCtx.drawImage(this.blurVariables.inputVideoElement,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height,0,0,this.blurVariables.width,this.blurVariables.height);for(var Pt=this.blurVariables.segmentationMaskCtx.getImageData(0,0,this.blurVariables.width,this.blurVariables.height),Bt=this.blurVariables.tfliteModel._getInputMemoryOffset()/4,sn=0;sn<this.blurVariables.segmentationPixelCount;sn++)this.blurVariables.tfliteModel.HEAPF32[Bt+3*sn]=Pt.data[4*sn]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*sn+1]=Pt.data[4*sn+1]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*sn+2]=Pt.data[4*sn+2]/255}},{key:"runInference",value:function(){this.blurVariables.tfliteModel._runInference();for(var Pt=this.blurVariables.tfliteModel._getOutputMemoryOffset()/4,Bt=0;Bt<this.blurVariables.segmentationPixelCount;Bt++){var sn=this.blurVariables.tfliteModel.HEAPF32[Pt+Bt];this.blurVariables.segmentationMask.data[4*Bt+3]=255*sn}this.blurVariables.segmentationMaskCtx.putImageData(this.blurVariables.segmentationMask,0,0)}},{key:"runPostProcessing",value:function(){var Pt=this.blurVariables.firstVideoTrack.getSettings?this.blurVariables.firstVideoTrack.getSettings():this.blurVariables.firstVideoTrack.getConstraints(),Bt=Pt.height,sn=Pt.width;if(this.blurVariables.outputCanvasElement.height=Bt,this.blurVariables.outputCanvasElement.width=sn,this.blurVariables.outputCanvasCtx.globalCompositeOperation="copy",this.blurVariables.outputCanvasCtx.filter=this.blurVariables.virtualBackground==="image"?"blur(4px)":"blur(8px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.segmentationMaskCanvas,0,0,this.blurVariables.width,this.blurVariables.height,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height),this.blurVariables.outputCanvasCtx.globalCompositeOperation="source-in",this.blurVariables.outputCanvasCtx.filter="none",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0),this.blurVariables.outputCanvasCtx.globalCompositeOperation="destination-over",this.blurVariables.virtualBackground==="image")if(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height===this.blurVariables.imageRatio)this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,0,this.blurVariables.virtualImage.width,this.blurVariables.virtualImage.height,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height);else if(this.blurVariables.imageRatio>1){var ln=this.blurVariables.virtualImage.height*(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Jt=this.blurVariables.virtualImage.height,Ct=Math.abs(this.blurVariables.virtualImage.width-ln)/2;ln>this.blurVariables.virtualImage.width&&(ln=this.blurVariables.virtualImage.width,Ct=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,Ct,0,ln,Jt,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else{var It=this.blurVariables.virtualImage.width,jt=this.blurVariables.virtualImage.width/(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Ht=Math.abs(this.blurVariables.virtualImage.height-jt)/2;jt>this.blurVariables.virtualImage.height&&(jt=this.blurVariables.virtualImage.height,Ht=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,Ht,It,jt,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else this.blurVariables.outputCanvasCtx.filter="blur(15px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0)}},{key:"startSelfieSegmentation",value:function(){var Pt=this;return new Promise(function(Bt,sn){Hn.debug("startSelfieSegmentation"),Pt.loadTFLiteModule().then(function(ln){Pt.setupTFLiteModule(ln).then(function(Jt){if(Pt.blurVariables.tfliteModel=Jt,Pt.blurVariables.firstVideoTrack=Pt.data.getVideoTracks()[0],Pt.blurVariables.firstVideoTrack!==null&&Pt.blurVariables.firstVideoTrack!==void 0){var Ct=Pt.blurVariables.firstVideoTrack.getSettings?Pt.blurVariables.firstVideoTrack.getSettings():Pt.blurVariables.firstVideoTrack.getConstraints(),It=Ct.height,jt=Ct.frameRate,Ht=Ct.width;Pt.blurVariables.height=144,Pt.blurVariables.width=256,Pt.blurVariables.frameRate=jt,Pt.blurVariables.segmentationPixelCount=Pt.blurVariables.width*Pt.blurVariables.height,Pt.onMaskFrameTimer=Pt.onMaskFrameTimer.bind(Pt),Pt.blurVariables.outputCanvasElement=document.createElement("canvas"),Pt.blurVariables.outputCanvasElement.getContext("2d"),Pt.blurVariables.inputVideoElement=document.createElement("video"),Pt.blurVariables.SET_TIMEOUT=1,Pt.blurVariables.CLEAR_TIMEOUT=2,Pt.blurVariables.TIMEOUT_TICK=3,Pt.blurVariables.maskFrameTimerWorker=new Worker(URL.createObjectURL(new Blob([`
                                        var timer;
                                        onmessage = function(request) {
                                            switch (request.data.id) {
                                            case `.concat(Pt.blurVariables.SET_TIMEOUT,`: {
                                                timer = setTimeout(() => {
                                                    postMessage({ id: `).concat(Pt.blurVariables.TIMEOUT_TICK,` });
                                                }, request.data.timeMs);
                                                break;
                                            }
                                            case `).concat(Pt.blurVariables.CLEAR_TIMEOUT,`: {
                                                if (timer) {
                                                    clearTimeout(timer);
                                                }
                                                break;
                                            }
                                            }
                                        };
                                    `)],{type:"application/javascript"})),{name:"Blur effect worker"}),Pt.blurVariables.maskFrameTimerWorker.onmessage=Pt.onMaskFrameTimer,Pt.blurVariables.segmentationMask=new ImageData(Pt.blurVariables.width,Pt.blurVariables.height),Pt.blurVariables.segmentationMaskCanvas=document.createElement("canvas"),Pt.blurVariables.segmentationMaskCanvas.width=Pt.blurVariables.width,Pt.blurVariables.segmentationMaskCanvas.height=Pt.blurVariables.height,Pt.blurVariables.segmentationMaskCtx=Pt.blurVariables.segmentationMaskCanvas.getContext("2d"),Pt.blurVariables.outputCanvasElement.width=parseInt(Ht,10),Pt.blurVariables.outputCanvasElement.height=parseInt(It,10),Pt.blurVariables.outputCanvasCtx=Pt.blurVariables.outputCanvasElement.getContext("2d"),Pt.blurVariables.inputVideoElement.width=parseInt(Ht,10),Pt.blurVariables.inputVideoElement.height=parseInt(It,10),Pt.blurVariables.inputVideoElement.autoplay=!0,Pt.blurVariables.inputVideoElement.srcObject=Pt.data,Pt.blurVariables.inputVideoElement.onloadeddata=function(){Pt.blurVariables.inputVideoElement.muted=!0,Pt.blurVariables.maskFrameTimerWorker.postMessage({id:Pt.blurVariables.SET_TIMEOUT,timeMs:1e3/30})},Bt(Pt.blurVariables.outputCanvasElement.captureStream(parseInt(Pt.blurVariables.frameRate,10)))}else sn("No video track on stream")}).catch(function(){return Hn.error("Catch on setupTFLiteModule"),sn("Catch on setupTFLiteModule")})}).catch(function(){return Hn.error("Catch on loadTFLiteModule"),sn("Catch on loadTFLiteModule")})})}},{key:"stopSelfieSegmentation",value:function(){Hn.debug("stopSelfieSegmentation"),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.CLEAR_TIMEOUT}),this.blurVariables.maskFrameTimerWorker.terminate()}},{key:"checkChildTypeConditions",value:function(){return this.childType!==void 0&&this.videoFilterIsApplied?"This stream is already a childStream : need to remove previous applied effect : "+this.childType:this.childrenTypeExists("blur")?"This stream already has a blur sub instance running : need to unblur()":this.childrenTypeExists("backgroundImage")?"This stream already has a backgroundImage sub instance running : need to unBackgroundImage()":MediaStreamTrack.prototype.hasOwnProperty("getSettings")&&MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?"OK":"Navigator not compatible with this function"}},{key:"blur",value:function(){var Pt=this;return new Promise(function(Bt,sn){var ln=Pt.checkChildTypeConditions();if(ln!=="OK")return sn(ln);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return sn("Navigator not compatible with this function");var Jt=Pt;Pt.blurVariables={},Pt.blurVariables.virtualBackground="blur",Pt.startSelfieSegmentation().then(function(Ct){var It,jt=$o(Jt.data.getAudioTracks());try{for(jt.s();!(It=jt.n()).done;){var Ht=It.value;Ct.addTrack(Ht.clone())}}catch(Xt){jt.e(Xt)}finally{jt.f()}var qt={audioFilterIsApplied:Pt.audioFilterIsApplied,audioAppliedFilter:Pt.audioAppliedFilter,videoFilterIsApplied:Pt.videoFilterIsApplied,videoAppliedFilter:Pt.videoAppliedFilter,childType:Pt.childType};Jt.createChildStreamFromStream(Ct,"blur",qt).then(function(Xt){return Pt.addChildren(Xt,"blur"),Xt.applyMuteStatusFromParent(),Bt(Xt)}).catch(function(){return Hn.error("Catch on createChildStreamFromStream blur"),sn("error on createChildStreamFromStream")})}).catch(function(Ct){return Hn.error("Catch on startSelfieSegmentation blur : ",Ct),sn(Ct)})})}},{key:"unblur",value:function(){var Pt=this;return new Promise(function(Bt,sn){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return sn("Navigator not compatible with this function");if(Pt.childType==="blur"){Hn.debug("This is the blurred stream : applying process with parent stream");var ln=Pt.parent;return ln.stopSelfieSegmentation(),ln.releaseChildren("blur"),ln.removeChildren("blur"),Bt(ln)}return Pt.childrenTypeExists("blur")?(Hn.debug("This is the parent stream : applying process with this stream"),Pt.stopSelfieSegmentation(),Pt.releaseChildren("blur"),Pt.removeChildren("blur"),Bt(Pt)):(Hn.debug("No blurred instance found for this stream"),sn("No blurred instance found for this stream"))})}},{key:"backgroundImage",value:function(Pt){var Bt=this;return Hn.debug("backgroundImage",Pt),new Promise(function(sn,ln){var Jt=Bt.checkChildTypeConditions();if(Jt!=="OK")return ln(Jt);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return ln("Navigator not compatible with this function");var Ct=Bt;Bt.blurVariables={},Bt.blurVariables.virtualBackground="image",Bt.blurVariables.virtualImage=new Image,Bt.blurVariables.virtualImage.crossOrigin="anonymous",Bt.blurVariables.virtualImage.src=Pt,Bt.blurVariables.virtualImage.onload=function(){Bt.blurVariables.imageRatio=Bt.blurVariables.virtualImage.width/Bt.blurVariables.virtualImage.height,Bt.startSelfieSegmentation().then(function(It){var jt,Ht=$o(Ct.data.getAudioTracks());try{for(Ht.s();!(jt=Ht.n()).done;){var qt=jt.value;It.addTrack(qt.clone())}}catch(en){Ht.e(en)}finally{Ht.f()}var Xt={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Ct.createChildStreamFromStream(It,"backgroundImage",Xt).then(function(en){return Bt.addChildren(en,"backgroundImage"),en.applyMuteStatusFromParent(),sn(en)}).catch(function(){return Hn.error("Catch on createChildStreamFromStream bck"),ln("error on createChildStreamFromStream")})}).catch(function(It){return Hn.error("Catch on startSelfieSegmentation bck : ",It),ln(It)})},Bt.blurVariables.virtualImage.onerror=function(){return Hn.debug("Error on image loading"),ln("Error on image loading")}})}},{key:"unBackgroundImage",value:function(){var Pt=this;return Hn.debug("unBackgroundImage"),new Promise(function(Bt,sn){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return sn("Navigator not compatible with this function");if(Pt.childType==="backgroundImage"){Hn.debug("This is the backgroundImage stream : applying process with parent stream");var ln=Pt.parent;return ln.stopSelfieSegmentation(),ln.releaseChildren("backgroundImage"),ln.removeChildren("backgroundImage"),Bt(ln)}return Pt.childrenTypeExists("backgroundImage")?(Hn.debug("This is the parent stream : applying process with this stream"),Pt.stopSelfieSegmentation(),Pt.releaseChildren("backgroundImage"),Pt.removeChildren("backgroundImage"),Bt(Pt)):(Hn.debug("No background image instance found for this stream"),sn("No background image instance found for this stream"))})}},{key:"applyVideoProcessor",value:function(Pt,Bt){var sn=this;return new Promise(function(ln,Jt){if(Pt!=="none"&&Pt!=="blur"&&Pt!=="backgroundImage")return Jt(new Xr("Requested videoProcessorType is not correct","none",sn));var Ct=sn,It="none",jt=null,Ht=sn,qt=!1;if(sn.childType==="noiseReduction"&&sn.videoFilterIsApplied===!0&&(Hn.debug("This is a noised reduced stream ... applying filter on parent"),Ht=sn.parent,sn.release({releaseParentStream:!1}),qt=!0),Ht.childrenTypeExists("noiseReduction")&&(Hn.debug("There is a noise reduction effect on this stream ... will need to reapply noised filter"),qt=!0),Ht.childType!==void 0&&Ht.videoFilterIsApplied===!0&&(Ht.childType==="blur"?It="blur":Ht.childType==="backgroundImage"&&(It="backgroundImage"),Ct=Ht.parent,jt=Ht),Ht.childrenTypeExists("blur")&&(It="blur",Ht.childrens.forEach(function(rn){jt=rn})),Ht.childrenTypeExists("backgroundImage")&&(It="backgroundImage",Ht.childrens.forEach(function(rn){jt=rn})),Hn.debug("actual applied effect =",It),Pt==="none"&&It==="none")return Jt(new Xr("Requested videoProcessorType none and no effect applied","none",Ct));if(Pt==="none"&&It==="blur")Hn.debug("need to unblur"),Ct.unblur().then(function(rn){if(qt!==!0)return ln(rn);rn.startNoiseReduction().then(function(bn){return ln(bn)}).catch(function(bn){return Hn.error("Catch on startNoiseReduction :",bn),Jt(new Fo(bn,rn.audioAppliedFilter,Ct))})}).catch(function(rn){return Hn.error("Catch on unblur: ",rn),Jt(new Xr(rn,"none",Ct))});else if(Pt==="none"&&It==="backgroundImage")Hn.debug("need to unBackgroundImage"),Ct.unBackgroundImage().then(function(rn){if(qt!==!0)return ln(rn);rn.startNoiseReduction().then(function(bn){return ln(bn)}).catch(function(bn){return Hn.error("Catch on startNoiseReduction :",bn),Jt(new Fo(bn,rn.audioAppliedFilter,Ct))})}).catch(function(rn){return Hn.error("Catch on unBackgroundImage :",rn),Jt(new Xr(rn,"none",Ct))});else if(Pt==="blur"&&It==="none")Hn.debug("need to blur"),Ct.blur().then(function(rn){if(qt!==!0)return ln(rn);rn.startNoiseReduction().then(function(bn){return ln(bn)}).catch(function(bn){return Hn.error("Catch on startNoiseReduction :",bn),Jt(new Fo(bn,rn.audioAppliedFilter,Ct))})}).catch(function(rn){return Hn.error("Catch on blur :",rn),Jt(new Xr(rn,"none",Ct))});else{if(Pt==="blur"&&It==="blur")return Jt(new Xr(tp,"blur",jt));if(Pt==="blur"&&It==="backgroundImage"){Hn.debug("need to unBackgroundImage then blur");var Xt=Ct.blurVariables.virtualImage.src;Ct.unBackgroundImage().then(function(rn){rn.blur().then(function(bn){if(qt!==!0)return ln(bn);bn.startNoiseReduction().then(function(Dn){return ln(Dn)}).catch(function(Dn){return Hn.error("Catch on startNoiseReduction :",Dn),Jt(new Fo(Dn,bn.audioAppliedFilter,Ct))})}).catch(function(bn){Hn.warn("Catch on blur - unBackgroundImage to blur :",bn),Hn.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(Xt).then(function(Dn){if(Hn.warn("Could not apply blur effect, background restored"),qt!==!0)return Jt(new Xr("Could not apply blur effect, background restored","backgroundImage",Dn));Dn.startNoiseReduction().then(function(lr){return Jt(new Xr("Could not apply blur effect, background restored","backgroundImage",lr))}).catch(function(lr){return Hn.error("Catch on startNoiseReduction :",lr),Jt(new Xr("Could not apply blur effect, background restored","backgroundImage",Dn))})}).catch(function(Dn){return Hn.error("Could not apply blur effect and error in restoring background :",Dn),Jt(new Xr("Could not apply blur effect and error in restoring background","none",Ct))})})}).catch(function(rn){return Hn.error("Catch on unBackgroundImage :",rn),Jt(new Xr(rn,"none",Ct))})}else if(Pt==="backgroundImage"&&It==="none"){if(Hn.debug("need to backgroundImage"),Bt===void 0||Bt.backgroundImageUrl===void 0)return Jt(new Xr("Error options.backgroundImageUrl is not defined","none",Ct));Ct.backgroundImage(Bt.backgroundImageUrl).then(function(rn){if(qt!==!0)return ln(rn);rn.startNoiseReduction().then(function(bn){return ln(bn)}).catch(function(bn){return Hn.error("Catch on startNoiseReduction :",bn),Jt(new Xr("Could not apply blur effect, background restored","backgroundImage",rn))})}).catch(function(rn){return Hn.error("Catch on backgroundImage :",rn),Jt(new Xr(rn,"none",Ct))})}else if(Pt==="backgroundImage"&&It==="blur")Hn.debug("need to unblur then backgroundImage"),Ct.unblur().then(function(rn){rn.backgroundImage(Bt.backgroundImageUrl).then(function(bn){if(qt!==!0)return ln(bn);bn.startNoiseReduction().then(function(Dn){return ln(Dn)}).catch(function(Dn){return Hn.error("Catch on startNoiseReduction :",Dn),Jt(new Xr("Could not apply blur effect, background restored","backgroundImage",bn))})}).catch(function(bn){Hn.warn("Catch on backgroundImage - unBackgroundImage to blur :",bn),Hn.debug("Reactivating previous effect : blur"),Ct.blur().then(function(Dn){if(qt!==!0)return Hn.warn("Could not apply background effect, blur restored"),Jt(new Xr("Could not apply background effect, blur restored","blur",Dn));Dn.startNoiseReduction().then(function(lr){return Jt(new Xr("Could not apply background effect, blur restored","blur",lr))}).catch(function(lr){return Hn.error("Catch on startNoiseReduction :",lr),Jt(new Xr("Could not apply background effect, blur restored","blur",Dn))})}).catch(function(Dn){return Hn.error("Could not apply background effect and error in restoring blur :",Dn),Jt(new Xr("Could not apply background effect and error in restoring blur","none",Ct))})})}).catch(function(rn){return Hn.error("Catch on unblur :",rn),Jt(new Xr(rn,"none",Ct))});else if(Pt==="backgroundImage"&&It==="backgroundImage"){var en=Ct.blurVariables.virtualImage.src;if(Bt.backgroundImageUrl.startsWith("data:image")===!1&&en.substring(en.lastIndexOf("/")+1)===Bt.backgroundImageUrl.substring(Bt.backgroundImageUrl.lastIndexOf("/")+1))return Hn.debug("Same background image is already applied"),Jt(new Xr("Requested videoProcessorType backgroundImage and backgroundImage with the same image already applied","backgroundImage",jt));Hn.debug("New background image is to be applied"),Ct.unBackgroundImage().then(function(rn){rn.backgroundImage(Bt.backgroundImageUrl).then(function(bn){if(qt!==!0)return ln(bn);bn.startNoiseReduction().then(function(Dn){return ln(Dn)}).catch(function(Dn){return Hn.error("Catch on startNoiseReduction :",Dn),Jt(new Xr("Could not apply background effect, blur restored","blur",bn))})}).catch(function(bn){Hn.warn("Catch on backgroundImage - change background image :",bn),Hn.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(en).then(function(Dn){if(qt!==!0)return Jt(new Xr("Could not apply new image on background, former background restored","backgroundImage",Dn));Dn.startNoiseReduction().then(function(lr){return Hn.warn("Could not apply new image on background, former background restored"),Jt(new Xr("Could not apply new image on background, former background restored","backgroundImage",lr))}).catch(function(lr){return Hn.error("Catch on startNoiseReduction :",lr),Jt(new Xr("Could not apply background effect, blur restored","blur",Dn))})}).catch(function(Dn){return Hn.error("Could not apply new image on background and error in restoring former background :",Dn),Jt(new Xr("Could not apply new image on background and error in restoring former background","none",Ct))})})}).catch(function(rn){return Hn.error("Catch on unBackgroundImage :",rn),Jt(new Xr(rn,"none",Ct))})}}})}},{key:"checkAudioProcessorType",value:function(Pt){return Pt!=="none"&&Pt!=="noiseReduction"?"Requested audioProcessorType is not correct":Pt==="none"&&this.audioAppliedFilter!=="noiseReduction"&&this.childrenTypeExists("noiseReduction")!==!0?"Not a noised reduction stream":"OK"}},{key:"applyAudioProcessor",value:function(Pt){var Bt=this;return new Promise(function(sn,ln){var Jt=Bt,Ct="none",It="none",jt=Bt.checkAudioProcessorType(Pt);if(jt!=="OK")return ln(new Fo(jt,Bt.audioAppliedFilter,Bt));if(Pt==="none"){if(Bt.childType===void 0){var Ht=!1;if(Bt.childrens.forEach(function(en){en.childType==="noiseReduction"?(Jt=en,Ht=!0):Ct=en.childType}),Ht===!1)return ln(new Fo("no noiseReduction stream found",Bt.audioAppliedFilter,Bt))}else Bt.childType!=="noiseReduction"&&Bt.parent.childType==="noiseReduction"?(Hn.debug("applying process on parent stream as this one must be a video effect stream"),Jt=Bt.parent,Ct=Bt.childType,Bt.parent.blurVariables!==void 0&&Bt.parent.blurVariables.virtualImage!==void 0&&(It=Bt.parent.blurVariables.virtualImage.src),Bt.release({releaseParentStream:!1})):Hn.debug("no noiseReduction applied");if(Jt.stopNoiseReduction(),Ct==="none"){Hn.debug("Release noiseReduction stream 2");var qt=Jt.parent;return Jt.release({releaseParentStream:!1}),sn(qt)}Hn.debug("Release noiseReduction stream 1"),Jt.release({releaseParentStream:!1});var Xt={backgroundImageUrl:It};Jt.parent.applyVideoProcessor(Ct,Xt).then(function(en){return sn(en)}).catch(function(en){return Hn.error("Catch on applyVideoProcessor() - reapply effect : ",en.message),en.message===tp?sn(en.stream):ln(new Fo("Error on restoring applied video filter",Jt.audioAppliedFilter,Jt))})}else Pt==="noiseReduction"&&(Bt.childType===void 0&&Bt.childrens!==void 0&&Bt.childrens.length!==0&&(Jt=Bt.childrens[0]),Jt.startNoiseReduction().then(function(en){return sn(en)}).catch(function(en){return Hn.error("Catch on startNoiseReduction :",en),ln(new Fo(en,Jt.audioAppliedFilter,Jt))}))})}},{key:"startNoiseReduction",value:function(){return apiCC.audioProcessor.startNoiseReduction(this)}},{key:"stopNoiseReduction",value:function(){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx)}},{key:"createMediaStreamTrackProcessor",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Hn.debug("mediaStreamTrackProcessor kind: ".concat(Pt?"audio":"video"," created")),Pt){var Bt=this.data.getAudioTracks();if(Bt.length)return new MediaStreamTrackProcessor({track:Bt[0]});throw new Error("No audio tracks found")}var sn=this.data.getVideoTracks();if(sn.length)return new MediaStreamTrackProcessor({track:sn[0]});throw new Error("No video tracks found")}},{key:"createMediaStreamTrackGenerator",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Hn.debug("mediaStreamTrackGenerator kind: ".concat(Pt?"audio":"video"," created")),Pt?new MediaStreamTrackGenerator({kind:"audio"}):new MediaStreamTrackGenerator({kind:"video"})}},{key:"loadSegmentationAPI",value:function(){return new Promise(function(Pt,Bt){var sn={async:!0,numRetries:20,reqdelay:200,success:function(){Hn.debug("Segmentation API loaded"),mergeReality.then(Pt)},error:function(ln){Bt("Resources loading failed, depsNotFound: "+ln)},retrycb:function(ln,Jt){Hn.warn("Blur API model loading retry :"+ln+" ,delay before retry :"+Jt)}};apiCC.resourcesLoader.loadjs(["https://cdn.apizee.com/apiRTC/lib/mergereality/v1.0/merge_reality.js"],"merge-reality",sn)})}},{key:"startMergeReality",value:function(Pt){var Bt=this;this.mergeRealityData={},this.mergeRealityLib=Pt,this.mergeRealityData.stop=!1,this.mergeRealityData.WIDTH=this.getSettings().width,this.mergeRealityData.HEIGHT=this.getSettings().height,this.mergeRealityData.WEBCAM_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WEBCAM_CTX=this.mergeRealityData.WEBCAM_CANVAS.getContext("2d",{alpha:!1}),this.mergeRealityData.MASK_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MASK_CTX=this.mergeRealityData.MASK_CANVAS.getContext("2d",{alpha:!0}),this.mergeRealityData.SCREEN_VIDEO=document.createElement("video"),this.mergeRealityData.BG_SUB=new this.mergeRealityLib.BackgroundSubtractor,this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MSTP=this.createMediaStreamTrackProcessor().readable,this.mergeRealityData.MSTG=this.createMediaStreamTrackGenerator(),this.mergeRealityData.SINK=this.mergeRealityData.MSTG.writable,this.mergeRealityData.MASK_TRANSFORMER=new TransformStream({transform:function(sn,ln){Bt.mergeRealityData.stop||(Bt.mergeRealityData.MASK_CTX.save(),Bt.mergeRealityData.MASK_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.drawImage(sn,0,0),Bt.mergeRealityData.MASK_DATA=Bt.mergeRealityData.BG_SUB.computeMask(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.background),Bt.mergeRealityData.RES=Bt.mergeRealityData.BG_SUB.applyTransparency(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_DATA),Bt.mergeRealityData.MASK_CTX.putImageData(Bt.mergeRealityData.RES,0,0),Bt.mergeRealityData.MASK_CTX.globalCompositeOperation="destination-atop",Bt.mergeRealityData.MASK_CTX.drawImage(Bt.mergeRealityData.SCREEN_VIDEO,0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_CTX.restore(),ln.enqueue(new VideoFrame(Bt.mergeRealityData.MASK_CANVAS))),sn.close()}}),this.mergeRealityData.RES_MS=new MediaStream}},{key:"stopMergeReality",value:function(){this.mergeRealityData.stop=!0}},{key:"calibrateBackground",value:function(){this.childrenTypeExists("merge")?this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT):Hn.error("No merged instance found for this stream")}},{key:"mergeReality",value:function(Pt){var Bt=this;return new Promise(function(sn,ln){return window.MediaStreamTrackGenerator===void 0||window.MediaStreamTrackProcessor===void 0||window.TransformStream===void 0?ln("Your browser does not support InsertableStreams"):Bt.childrenTypeExists("merge")?ln("This stream already has a sub instance running for this"):void Bt.loadSegmentationAPI().then(function(Jt){Bt.startMergeReality(Jt),Pt.attachToElement(Bt.mergeRealityData.SCREEN_VIDEO),Bt.mergeRealityData.SCREEN_VIDEO.autoplay=!0,Bt.mergeRealityData.MSTP.pipeThrough(Bt.mergeRealityData.MASK_TRANSFORMER).pipeTo(Bt.mergeRealityData.SINK),Bt.mergeRealityData.RES_MS.addTrack(Bt.mergeRealityData.MSTG);var Ct,It=$o(Bt.data.getAudioTracks());try{for(It.s();!(Ct=It.n()).done;){var jt=Ct.value;Bt.mergeRealityData.RES_MS.addTrack(jt)}}catch(Xt){It.e(Xt)}finally{It.f()}var Ht=Bt,qt={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Bt.createChildStreamFromStream(Bt.mergeRealityData.RES_MS,"merge",qt).then(function(Xt){Ht.addChildren(Xt,"merge"),Xt.applyMuteStatusFromParent(),sn(Xt)}).catch(function(){Hn.error("Catch on createChildStreamFromStream mergeReality")})})})}},{key:"unmergeReality",value:function(){this.childrenTypeExists("merge")?(this.stopMergeReality(),this.releaseChildren("merge"),this.removeChildren("merge")):Hn.error("No merged instance found for this stream")}},{key:"addPendingPromise",value:function(Pt,Bt,sn){var ln=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;return apiCC.addPendingPromise(Pt,Bt,sn,ln)}},{key:"resolvePendingPromise",value:function(Pt,Bt){apiCC.resolvePendingPromise(Pt,Bt)}},{key:"rejectPendingPromise",value:function(Pt,Bt){apiCC.rejectPendingPromise(Pt,Bt)}},{key:"sendAudioFlowStatusChanged",value:function(){var Pt=this.getAudioFlowStatus();zt.get(this).emit("audioFlowStatusChanged",Pt)}},{key:"sendVideoFlowStatusChanged",value:function(){var Pt=this.getVideoFlowStatus();zt.get(this).emit("videoFlowStatusChanged",Pt)}},{key:"sendFlowStatusChanged",value:function(Pt){var Bt;Pt==="audio"?Bt=this.getAudioFlowStatus():Pt==="video"&&(Bt=this.getVideoFlowStatus()),Bt.type=Pt,zt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendFlowStatusChangedForRemote",value:function(Pt,Bt){Bt.type=Pt,zt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendRemoteAudioFlowStatusChanged",value:function(Pt){zt.get(this).emit("remoteAudioFlowStatusChanged",Pt)}},{key:"sendRemoteVideoFlowStatusChanged",value:function(Pt){zt.get(this).emit("remoteVideoFlowStatusChanged",Pt)}},{key:"emitConstraintsChanged",value:function(Pt){zt.get(this).emit("constraintsChanged",Pt)}}],[{key:"getAvailableEvents",value:function(){return cm}},{key:"createStreamFromUserMedia",value:function(Pt,Bt,sn){var ln=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Hn.debug("createStreamFromUserMedia"),Hn.debug("audioInput :",Pt),Hn.debug("videoInput :",Bt),Hn.debug("constraints :",sn),Hn.debug("options :",ln),new Promise(function(Jt,Ct){var It=Pt!==!1&&(Pt!==null||sn===void 0||sn!==void 0&&sn.hasOwnProperty("audio")),jt=Bt!==!1&&(Bt!==null||sn===void 0||sn!==void 0&&sn.hasOwnProperty("video")),Ht={type:et.g.STREAM_TYPE_NO_INPUT,audioInput:Pt,videoInput:Bt},qt="media";jt?Ht.type=et.g.STREAM_TYPE_VIDEO:It&&(Ht.type=et.g.STREAM_TYPE_AUDIO),It&&!jt?qt="audio":!It&&jt&&(qt="videoOnly"),It&&ln.enhancedAudioActivated===!0&&(Hn.debug("Enhanced Audio is activated"),apiRTC.browser!=="Chrome"?Hn.debug("enhancedAudioActivated option is only available for Chrome"):(sn===void 0&&(sn={}),sn.audio&&ls(sn.audio)==="object"||(sn.audio={}),sn.video===void 0&&(sn.video={}),sn.audio.echoCancellation=!1,sn.audio.autoGainControl=!1,sn.audio.noiseSuppression=!1)),apiRTC.createUserMediaStream({audioSourceId:Pt,videoSourceId:Bt,facingMode:ln.facingMode,gum_config:sn,filters:ln.filters,type:qt,success:function(Xt){Hn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Xt.userMediaStreamId),Ht.constructor=!0,Ht.userMediaStreamId=Xt.userMediaStreamId,Jt(new Zt(Xt.stream,Ht))},failure:function(Xt,en){Hn.debug("[createStreamFromUserMedia] failure :",en),Ct(en)},tryAudioOnlyAfterUserMediaError:ln.tryAudioOnlyAfterUserMediaError})})}},{key:"createStreamFromMediaStream",value:function(Pt){return Hn.debug("createStreamFromMediaStream"),new Promise(function(Bt,sn){var ln={};ln.type=et.g.STREAM_TYPE_NO_INPUT,Pt.getAudioTracks().length>0&&(ln.type=et.g.STREAM_TYPE_AUDIO),Pt.getVideoTracks().length>0&&(ln.type=et.g.STREAM_TYPE_VIDEO),apiRTC.createUserMediaStream({type:"media",stream:Pt,success:function(Jt){Hn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Jt.userMediaStreamId),ln.constructor=!0,ln.userMediaStreamId=Jt.userMediaStreamId,Bt(new Zt(Jt.stream,ln))},failure:function(Jt,Ct){Hn.debug("[createStreamFromUserMedia] failure :",Ct),sn()}})})}},{key:"createScreensharingStream",value:function(Pt){return new Promise(function(Bt,sn){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:Pt,success:function(ln){Hn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+ln.userMediaStreamId);var Jt=new Zt(ln.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:ln.userMediaStreamId});Ys.set(Jt,!0),Bt(Jt)},failure:function(ln,Jt){Hn.debug("[createStreamFromUserMedia] failure :",Jt),sn(Jt)}})})}},{key:"createDisplayMediaStream",value:function(Pt,Bt){return new Promise(function(sn,ln){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:Pt,displayMediaStreamConstraints:Pt,forceExtensionOnChrome:Bt,success:function(Jt){Hn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Jt.userMediaStreamId);var Ct=new Zt(Jt.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:Jt.userMediaStreamId});Ys.set(Ct,!0),sn(Ct)},failure:function(Jt,Ct){Hn.debug("[createStreamFromUserMedia] failure :",Ct),ln(Ct)}})})}},{key:"getLocalStreams",value:function(){return So.values()}},{key:"getStream",value:function(Pt){return Pt!=null&&So.has(Pt.toString())?So.get(Pt.toString()):null}}]),Zt}(un),dm=function(Wt){Ks(Zt,Wt);var $t=qs(Zt);function Zt(Pt,Bt,sn,ln){var Jt;return zs(this,Zt),(Jt=$t.call(this,Pt,Bt)).parent=sn,Jt.childType=ln,ln==="noiseReduction"&&(Jt.audioFilterIsApplied=!0,Jt.audioAppliedFilter=ln),ln!=="blur"&&ln!=="backgroundImage"||(Jt.videoFilterIsApplied=!0,Jt.videoAppliedFilter=ln),Jt}return Gs(Zt,[{key:"release",value:function(Pt){this.childType!=="blur"&&this.childType!=="backgroundImage"||this.parent.stopSelfieSegmentation(),this.parent.removeChildren(this.childType),this.clonedStream!==void 0&&(Hn.debug("to be released ..."),this.clonedStream.getAudioTracks().forEach(function(Bt){Bt.stop()}),this.clonedStream.getVideoTracks().forEach(function(Bt){Bt.stop()})),ou(Vo(Zt.prototype),"release",this).call(this,Pt)}}]),Zt}(lo),Xr=function(Wt){Ks(Zt,Wt);var $t=qs(Zt);function Zt(Pt,Bt,sn){var ln;return zs(this,Zt),(ln=$t.call(this,Pt)).name=ln.constructor.name,ln.appliedVideoProcessorType=Bt,ln.stream=sn,ln}return Gs(Zt)}(Hs(Error)),Fo=function(Wt){Ks(Zt,Wt);var $t=qs(Zt);function Zt(Pt,Bt,sn){var ln;return zs(this,Zt),(ln=$t.call(this,Pt)).name=ln.constructor.name,ln.appliedAudioProcessorType=Bt,ln.stream=sn,ln}return Gs(Zt)}(Hs(Error));function Js(Wt,$t){var Zt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Zt){if(Array.isArray(Wt)||(Zt=function(Ct,It){if(Ct){if(typeof Ct=="string")return np(Ct,It);var jt=Object.prototype.toString.call(Ct).slice(8,-1);return jt==="Object"&&Ct.constructor&&(jt=Ct.constructor.name),jt==="Map"||jt==="Set"?Array.from(Ct):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?np(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Zt&&(Wt=Zt);var Pt=0,Bt=function(){};return{s:Bt,n:function(){return Pt>=Wt.length?{done:!0}:{done:!1,value:Wt[Pt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sn,ln=!0,Jt=!1;return{s:function(){Zt=Zt.call(Wt)},n:function(){var Ct=Zt.next();return ln=Ct.done,Ct},e:function(Ct){Jt=!0,sn=Ct},f:function(){try{ln||Zt.return==null||Zt.return()}finally{if(Jt)throw sn}}}}function np(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Zt=0,Pt=new Array($t);Zt<$t;Zt++)Pt[Zt]=Wt[Zt];return Pt}function rp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var ho=ft.Y.get("Session"),um=Rn.get(),xo=new(Ko()),cu=Ro.get(),du=po.get(),pm=Symbol("ENTERPRISE_NOT_LOADED"),uu=Symbol("ENTERPRISE_LOADED"),ip=new WeakMap,ap=new WeakMap,op=new WeakMap,Xs=function(){function Wt(Bt,sn,ln){if(function(Jt,Ct){if(!(Jt instanceof Ct))throw new TypeError("Cannot call a class as a function")}(this,Wt),ho.info("Create Enterprise"),!(ln instanceof qr))throw"Cannot create Enterprise without a session";ip.set(this,ln),op.set(this,sn),ap.set(this,Bt),this.status=pm}var $t,Zt,Pt;return $t=Wt,Zt=[{key:"getSession",value:function(){return ip.get(this)}},{key:"getId",value:function(){return ap.get(this).toString()}},{key:"getApiKey",value:function(){return op.get(this).toString()}},{key:"load",value:function(){var Bt=this;return new Promise(function(sn,ln){xo.getEnterpriseUserList(Bt.getId(),Bt.getSession().getToken()).then(function(Jt){ho.info("Enterprise loaded!",Jt);var Ct,It=Js(Jt.users);try{for(It.s();!(Ct=It.n()).done;){var jt=Ct.value;if(Bt.getSession().user.userId.toString()!==jt.id.toString()){var Ht=cu.getOrCreateContact(jt.id);Ht.profile=jt,Ht.enterprise=Bt,Ht.userData.get("username")===null&&Ht.userData.setProp("username",jt.username),Ht.userData.get("photo_url")===null&&Ht.userData.setProp("photo_url",jt.photo_url)}}}catch(qt){It.e(qt)}finally{It.f()}Bt.status=uu,sn()}).catch(function(Jt){var Ct="load() - Enterprise load error",It={error:new Error(Ct),code:et.g.ERROR_OTHER};Jt.hasOwnProperty("code")?It.code=Jt.code:Jt.hasOwnProperty("http_code")&&(Jt.http_code.toString().startsWith("4")?It.code=et.g.ERROR_INVALID_CREDENTIALS:It.code=et.g.ERROR_SERVER_UNAVAILABLE),ho.error(Ct,Jt),ln(It)})})}},{key:"getContacts",value:function(){var Bt={};if(this.status!==uu)ho.error("Enterprise is not loaded, unable to getContacts");else{var sn,ln=cu.getContacts(),Jt=Js(ln.keys());try{for(Jt.s();!(sn=Jt.n()).done;){var Ct=sn.value,It=ln.get(Ct);It.enterprise!==null&&It.enterprise.id.toString()===this.getId()&&(Bt[It.getId()]=It)}}catch(jt){Jt.e(jt)}finally{Jt.f()}}return Bt}},{key:"getConfiguration",value:function(){return null}},{key:"uploadFile",value:function(Bt){var sn=this,ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Jt,Ct){ho.info("uploadFile()"),sn.status===uu?xo.uploadFile(Bt,sn.getSession().getToken(),ln).then(function(It){Jt(It.url)}).catch(function(It){ho.error(It),Ct(It)}):(ho.error("Enterprise is not loaded, cannot upload file"),Ct(new Error("Enterprise is not loaded, cannot upload file")))})}},{key:"getAvailableConferences",value:function(){var Bt=this;return ho.info("getAvailableConferences()"),new Promise(function(sn,ln){var Jt={};xo.getConferenceList(Bt.getSession().getToken()).then(function(Ct){var It,jt=Js(Ct);try{for(jt.s();!(It=jt.n()).done;){var Ht=It.value;Jt[Ht.hash]=du.getOrCreateConference(Ht.hash),Jt[Ht.hash].friendlyName=Ht.friendlyName}}catch(qt){jt.e(qt)}finally{jt.f()}sn(Jt)}).catch(function(Ct){ho.error(Ct),ln(Ct)})})}},{key:"getConference",value:function(Bt){var sn=this;return new Promise(function(ln,Jt){var Ct={};Ct.token=sn.getSession().getToken(),xo.getWebconf(Bt,Ct).then(function(It){return ln(du.getOrCreateConference(It.hash))}).catch(function(It){return ho.error("getConference",It),Jt(It)})})}},{key:"createPrivateConference",value:function(){var Bt=this,sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ho.info("createPrivateConference()"),new Promise(function(ln,Jt){var Ct=sn.hasOwnProperty("friendlyName")?sn.friendlyName:Lt.g.guid(),It=null,jt=Bt.getSession().getToken();xo.createConference(jt,Ct,sn).then(function(Ht){(It=du.getOrCreateConference(Ht.hash)).friendlyName=Ct;var qt=sn.hasOwnProperty("password")?sn.password:"";return It.join({password:qt,session:Bt.getSession()})}).then(function(){ln(It)}).catch(function(Ht){var qt="createPrivateConference() - Could not create conference";ho.error(qt,Ht),Jt(new Error(qt))})})}},{key:"getTags",value:function(Bt){var sn=this;return new Promise(function(ln,Jt){var Ct={};Bt&&Bt.hasOwnProperty("webconfId")&&(Ct.webconfId=Bt.webconfId),xo.getEnterpriseTagList(sn.getId(),sn.getSession().getToken(),Ct).then(function(It){return It.hasOwnProperty("tags")&&Array.isArray(It.tags)?ln(It.tags):Jt(Lt.g.createError(et.g.ERROR_OTHER,"getTags() - unexpected response",ho))}).catch(function(It){return Jt(Lt.g.createError(et.g.ERROR_OTHER,"getTags() - cannot get tags",ho,{fromError:It}))})})}}],Pt=[{key:"fetchEnterpriseInformation",value:function(Bt){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sn.hasOwnProperty("cloudUrl")&&xo.setCloudURL(sn.cloudUrl),xo.getEnterpriseInformation(sn,Bt)}},{key:"fetchSiteAgents",value:function(Bt){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(ln,Jt){sn.hasOwnProperty("cloudUrl")&&xo.setCloudURL(sn.cloudUrl);var Ct=[];xo.getSiteAgents(um.getActiveApiKey(),Bt,sn).then(function(It){var jt,Ht=Js(It);try{for(Ht.s();!(jt=Ht.n()).done;){var qt=jt.value;Ct.push({contact:cu.getOrCreateContact(qt.id),title:qt.title,nickname:qt.nickname,isPrefered:qt.isPrefered})}}catch(Xt){Ht.e(Xt)}finally{Ht.f()}ln(Ct)}).catch(function(It){Jt(Lt.g.createError(et.g.ERROR_OTHER,"fetchSiteAgents() - could not fetch site agents",ho))})})}}],Zt&&rp($t.prototype,Zt),Pt&&rp($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function pu(Wt){return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},pu(Wt)}function fm(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function sp(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}function fu(Wt,$t){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,Pt){return Zt.__proto__=Pt,Zt},fu(Wt,$t)}function hm(Wt,$t){if($t&&(pu($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ho(Wt)}function Ho(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Qs(Wt){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Qs(Wt)}s(3123);var kr=ft.Y.get("UserAgent"),Or=Rn.get(),ko=new(Ko()),gm="apizee:",mm="apirtc:",vm="token:",Cm="apzkey:",bm="apiKey:",ps=new WeakMap,ym=["mediaDeviceChanged","externalJsLoadingStatus","ccsConnectionStatus","userMediaError"],lp=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&fu(Ct,It)})(Jt,Wt);var $t,Zt,Pt,Bt,sn,ln=(Bt=Jt,sn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Qs(Bt);if(sn){var jt=Qs(this).constructor;Ct=Reflect.construct(It,arguments,jt)}else Ct=It.apply(this,arguments);return hm(this,Ct)});function Jt(){var Ct,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fm(this,Jt),Ct=ln.call(this,kr),kr.debug("Create UserAgent"),Ct.uri=It.hasOwnProperty("uri")?It.uri:null,Ct.userId=null,Ct.username=null,Ct.profile=null,Ct.preRegisterUserData=new Io,Ct.callStatsMonitoringEnabled=null,Ct.callStatsMonitoringInterval=null,Ct.meshModeEnabled=null,Ct.apiRTCMediaDeviceDetectionEnabled=!!It.hasOwnProperty("apiRTCMediaDeviceDetectionEnabled")&&It.apiRTCMediaDeviceDetectionEnabled,Ct.apiRTCMediaDeviceDetectionDelay=It.hasOwnProperty("apiRTCMediaDeviceDetectionDelay")?It.apiRTCMediaDeviceDetectionDelay:et.g.APIRTC_MEDIA_DEVICE_DETECTION_DELAY,Ct.targetBandwidthUsage=0,Ct.videoBandwidthSettings={overallIncoming:3e3,overallOutgoing:3e3},Ct.currentSession=null,Ct.enterprise=null,Ct.capabilities={whiteboardCursor:"ON",mediaDeviceChanged:"ON",webRTCCompliant:"ON",screenSharingCompliant:"ON",qoSStatCompliant:"ON",backgroundRemoval:"ON",streamCapabilities:"ON",noiseReduction:"ON",remoteAccessUser:"ON"},Ct.browser=apiRTC.browser,Ct.browser_major_version=apiRTC.browser_major_version,Ct.browser_version=apiRTC.browser_version,Ct.osName=apiRTC.osName,Ct.osVersion=apiRTC.osVersion,Ct.browserInfo=apiRTC.browserInfo,Ct.browserDetails=apiRTC.browserDetails,Ct.tFLiteModuleLoaded=!1,Ct.tFLiteSIMDModule=null,Ct.modelLoadedInModule=!1,Ct.apiRTCStreamsList=new Map,ps.set(Ho(Ct),null),Or.createWhiteBoard(),apiCC.activateScreenSharing();var jt=function(en){zt.get(Ho(Ct)).emit("mediaDeviceChanged",{added:en.detail.diff.added,removed:en.detail.diff.removed,updated:en.detail.diff.updated,updateReason:en.detail.updateReason,firstMediaDeviceListInitialization:en.detail.firstMediaDeviceListInitialization})};apiRTC.addEventListener("mediaDeviceChanged",jt,"UserAgent");var Ht=function(en){zt.get(Ho(Ct)).emit("externalJsLoadingStatus",{extjs:en.detail.extjs,status:en.detail.status})};apiRTC.addEventListener("externalJsLoadingStatus",Ht,"UserAgent");var qt=function(en){var rn=null;en.detail.channelEvent==="onChannelOpened"?rn="connected":en.detail.channelEvent==="onChannelDisconnect"?rn="disconnected":en.detail.channelEvent==="onChannelReconnecting"?rn="retry":(en.detail.channelEvent==="onChannelConnectError"||en.detail.channelEvent==="onChannelError")&&(rn="error"),rn!==null&&zt.get(Ho(Ct)).emit("ccsConnectionStatus",{status:rn})};apiRTC.addEventListener("channelEvent",qt,"UserAgent");var Xt=function(en){var rn={error:en.detail.error};en.detail.callType==="media"?(rn.audio=!0,rn.video=!0,rn.screenSharing=!1):en.detail.callType==="audio"?(rn.audio=!0,rn.video=!1,rn.screenSharing=!1):en.detail.callType==="videoOnly"?(rn.audio=!1,rn.video=!0,rn.screenSharing=!1):en.detail.callType==="screenSharing"?(rn.audio=!1,rn.video=!0,rn.screenSharing=!0):en.detail.callType==="screenSharingWithAudio"&&(rn.audio=!0,rn.video=!0,rn.screenSharing=!0),zt.get(Ho(Ct)).emit("userMediaError",rn)};return apiRTC.addEventListener("userMediaError",Xt,"UserAgent"),Ct.checkUACapabilities(),Ct.capabilities.mediaDeviceChanged==="OFF"&&(kr.debug("mediaDeviceChanged is not supported"),Ct.apiRTCMediaDeviceDetectionEnabled===!0&&(kr.debug("apiRTCMediaDeviceDetectionEnabled is activated, starting process"),setInterval(function(){apiCC.mediaDeviceMgr.getMediaDevices()},Ct.apiRTCMediaDeviceDetectionDelay))),apiRTC.userAgentInstance=Ho(Ct),Ct}return $t=Jt,Zt=[{key:"fetchUserMediaDevices",value:function(){return kr.warn("DEPRECATION WARNING : fetchUserMediaDevices() is now deprecated, use getUserMediaDevices() instead"),new Promise(function(Ct,It){apiCC.browser==="IE"&&apiCC.browser_version>8?(apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)):apiCC.getMediaDevices().then(function(jt){apiCC.mediaDeviceMgr.gotSources(jt),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)}).catch(function(){kr.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null),It(Lt.g.createError(et.g.ERROR_OTHER,"fetchUserMediaDevices() - Could not get media devices",kr))})})}},{key:"getUserMediaDevices",value:function(){return apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray}},{key:"createStream",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return kr.info("createStream() with option :",Ct),lo.createStreamFromUserMedia(Ct.audioInputId,Ct.videoInputId,Ct.constraints,Ct)}},{key:"createStreamFromMediaStream",value:function(Ct){return kr.info("createStreamFromMediaStream()"),lo.createStreamFromMediaStream(Ct)}},{key:"fetchNetworkInformation_v2",value:function(Ct,It){kr.debug("fetchNetworkInformation Version 2 :",Ct);var jt=ko.cloudUrl;Ct!=null&&(jt=Ct);var Ht={testServer:jt,httpPing:{},upload:{},download:{}};return It!=null&&Array.isArray(It)?(apiRTC.bandwidthRatingThresholds=It,kr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):kr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=jt,kr.info("Start Network test"),new Promise(function(qt,Xt){apiRTC.testUserPing(function(en,rn){en!==null?Xt(en):(Ht.httpPing=rn,apiRTC.testUserUpload(25e4,function(bn,Dn){bn!==null?Xt(bn):(Ht.upload.kbps=8*Dn.kBPerSec,Ht.upload.rating=Dn.rating,apiRTC.testUserUploadLoop(5e5,Ht.upload,function(lr,dr){lr!==null?Xt(lr):(Ht.upload.kbps=8*dr.kBPerSec,Ht.upload.rating=dr.rating,apiRTC.testUserDownload(256,function(br,Rr){br!==null?Xt(br):(Ht.download.kbps=8*Rr.kBPerSec,Ht.download.rating=Rr.rating,apiRTC.testUserDownloadLoop(1e3,Ht.download,function(Nr,Zr){Nr!==null?Xt(Nr):(Ht.download.kbps=8*Zr.kBPerSec,Ht.download.rating=Zr.rating,qt(Ht))}))}))}))}))})})}},{key:"fetchNetworkInformation_v1",value:function(Ct,It){kr.debug("fetchNetworkInformation Version 1 :",Ct);var jt=ko.cloudUrl;Ct!=null&&(jt=Ct);var Ht={testServer:jt,httpPing:{},upload:{},download:{}};return It!=null&&Array.isArray(It)?(apiRTC.bandwidthRatingThresholds=It,kr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):kr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=jt,kr.info("Start Network test"),new Promise(function(qt,Xt){apiRTC.testUserPing(function(en,rn){en!==null?Xt(en):(Ht.httpPing=rn,apiRTC.testUserUpload(25e4,function(bn,Dn){bn!==null?Xt(bn):(Ht.upload.kbps=8*Dn.kBPerSec,Ht.upload.rating=Dn.rating,Ht.upload.kbps>=1e3&&apiRTC.testUserUpload(5e5,function(lr,dr){lr!==null?Xt(lr):(Ht.upload.kbps=8*dr.kBPerSec,Ht.upload.rating=dr.rating)}),apiRTC.testUserDownload(256,function(lr,dr){lr!==null?Xt(lr):(Ht.download.kbps=8*dr.kBPerSec,Ht.download.rating=dr.rating,Ht.download.kbps>=500&&Ht.download.kbps<1500?apiRTC.testUserDownload(500,function(br,Rr){br!==null?Xt(br):(Ht.download.kbps=8*Rr.kBPerSec,Ht.download.rating=Rr.rating,qt(Ht))}):Ht.download.kbps>=1500?apiRTC.testUserDownload(768,function(br,Rr){br!==null?Xt(br):(Ht.download.kbps=8*Rr.kBPerSec,Ht.download.rating=Rr.rating,qt(Ht))}):qt(Ht))}))}))})})}},{key:"fetchNetworkInformation",value:function(Ct,It){return this.fetchNetworkInformation_v1(Ct,It)}},{key:"fetchGeolocationInformation",value:function(Ct){return Ct==null&&(Ct={enableHighAccuracy:!1,timeout:1/0,maximumAge:0}),new Promise(function(It,jt){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(Ht){It(Ht)},function(Ht){jt(Ht)},Ct)})}},{key:"setUserData",value:function(Ct){this.currentSession&&this.currentSession.setUserData(Ct)}},{key:"setUsername",value:function(Ct){this.currentSession?this.currentSession.setUsername(Ct):this.preRegisterUserData.setProp("username",Ct)}},{key:"setPhotoUrl",value:function(Ct){this.currentSession?this.currentSession.setPhotoUrl(Ct):this.preRegisterUserData.setProp("photo_url",Ct)}},{key:"getUserData",value:function(){return this.currentSession?this.currentSession.getUserData():this.preRegisterUserData}},{key:"getUsername",value:function(){return this.currentSession?this.currentSession.getUsername():this.preRegisterUserData.get("username")!==null?this.preRegisterUserData.get("username"):this.preRegisterUserData.get("nickname")!==null?this.preRegisterUserData.get("nickname"):this.username}},{key:"getPhotoUrl",value:function(){return this.currentSession?this.currentSession.getPhotoUrl():this.preRegisterUserData.get("photo_url")!==null?this.preRegisterUserData.get("photo_url"):this.preRegisterUserData.get("photoUrl")!==null?this.preRegisterUserData.get("photoUrl"):null}},{key:"fetchProfileInformation",value:function(Ct){var It=this,jt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Ht,qt){var Xt=null;It.profile===null||jt?It.userId&&(Xt=Or.getActiveApiKey())!==null?ko.getUserProfile(Xt,It.userId,Ct).then(function(en){It.profile=en,Ht(en)}).catch(qt):qt("fetchProfileInformation() - missing registration"):Ht(It.profile)})}},{key:"getEnterprise",value:function(){return ps.get(this)}},{key:"getCurrentSession",value:function(){return this.currentSession}},{key:"getEventCenter",value:function(){return apiRTC.eventCenter}},{key:"startWhiteboard",value:function(Ct,It){kr.trace("startWhiteboard()"),Or.whiteBoardClient.start(),Or.whiteBoardClient.setCanvas(Ct),It!=null&&Or.whiteBoardClient.setUserCursorColor(It)}},{key:"stopWhiteboard",value:function(){kr.trace("stopWhiteboard()"),Or.whiteBoardClient.stop()}},{key:"getWhiteboardClient",value:function(){return kr.trace("getWhiteboardClient()"),Or.whiteBoardClient}},{key:"register",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(jt,Ht){if(kr.info("Register "+Ct.uri),It.hasOwnProperty("uri")&&(Ct.uri=It.uri),It.hasOwnProperty("cloudUrl")&&ko.setCloudURL(It.cloudUrl),It.hasOwnProperty("cloudFetchRetries")&&ko.setFetchRetries(It.cloudFetchRetries),It.hasOwnProperty("cloudFetchRetryDelay")&&ko.setFetchRetryDelay(It.cloudFetchRetryDelay),Ct.uri!==null)if(Ct.currentSession)Ht(Lt.g.createError(et.g.ERROR_APIRTC_SESSION_ALREADY_ON,"register() - Session already ON",kr));else if(Ct.uri.startsWith(vm))Tm(Ct,It,jt,Ht);else if(Ct.uri.startsWith(gm)||Ct.uri.startsWith(mm))Sm(Ct,It,jt,Ht);else if(Ct.uri.startsWith(Cm)||Ct.uri.startsWith(bm))Im(Ct,It,jt,Ht);else{var qt=Ct.uri.split(":")[0];Ht(Lt.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - prefix invalid used for uri :"+qt,kr))}else Ht(Lt.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - Cannot register UserAgent, no uri was specified",kr))})}},{key:"unregister",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0,unregister:!0};return new Promise(function(jt,Ht){Ct.currentSession!==null?Ct.currentSession.disconnect(It).then(function(){Ct.currentSession=null,ps.set(Ct,null),jt()}).catch(function(qt){Ht(Lt.g.createError(et.g.ERROR_OTHER,"unregister() - unregistration error",kr))}):Ht(Lt.g.createError(et.g.ERROR_OTHER,"unregister() - no current session",kr))})}},{key:"isRegistered",value:function(){return this.currentSession!==null}},{key:"getDefaultDevices",value:function(){return{audioInput:apiCC.mediaDeviceMgr.defaultAudioInput,audioOutput:apiCC.mediaDeviceMgr.defaultAudioOuput,videoInput:apiCC.mediaDeviceMgr.defaultVideoInput}}},{key:"enableCallStatsMonitoring",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};["chrome","firefox","safari"].indexOf(apiCC.browserDetails.type)<0?kr.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):Ct===!0?(this.callStatsMonitoringEnabled=!0,Lt.g.isPropertyTypeof(It,"interval","number")&&It.interval>=1e3&&(this.callStatsMonitoringInterval=It.interval),this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.enableCallStatsMonitoring(!0,this.callStatsMonitoringInterval)):(this.callStatsMonitoringEnabled=!1,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.enableCallStatsMonitoring(!1))}},{key:"enableActiveSpeakerDetecting",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ct===!0?Lt.g.isPropertyTypeof(It,"threshold","number")&&It.threshold>0?apiRTC.enableActiveSpeakerDetecting(!0,It.threshold):apiRTC.enableActiveSpeakerDetecting(!0):apiRTC.enableActiveSpeakerDetecting(!1)}},{key:"enableMeshRoomMode",value:function(Ct){Ct===!1||Ct===!0?(this.meshModeEnabled=Ct,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.enableMeshRoomMode(Ct)):kr.error("Wrong value",Ct)}},{key:"setTargetBandwidthUsage",value:function(Ct){typeof Ct!="number"&&!isNaN(Ct)&&Ct>0?(this.targetBandwidthUsage=Ct,this.isRegistered&&Or.webRTCClient.setVideoBandwidth(Ct)):kr.error("Unvalid target bandwidth usage value",Ct)}},{key:"setOverallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallIncoming=Ct,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setOverallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallIncoming,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setOverallIncomingVideoBandwidth(0))}},{key:"setOverallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallOutgoing=Ct,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setOverallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallOutgoing,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setOverallOutgoingVideoBandwidth(0))}},{key:"setPerCallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallIncoming=Ct,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setPerCallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallIncoming,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setPerCallIncomingVideoBandwidth(0))}},{key:"setPerCallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallOutgoing=Ct,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setPerCallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallOutgoing,this.isRegistered&&Or.webRTCClient&&Or.webRTCClient.setPerCallOutgoingVideoBandwidth(0))}},{key:"updateMediaOnCall",value:function(Ct,It){Or.webRTCClient.updateMediaDeviceOnCall(Ct,It)}},{key:"getCapabilities",value:function(){return this.capabilities}},{key:"getBrowser",value:function(){return this.browser}},{key:"getBrowserMajorVersion",value:function(){return this.browser_major_version}},{key:"getBrowserVersion",value:function(){return this.browser_version}},{key:"getOsName",value:function(){return this.osName}},{key:"getOsVersion",value:function(){return this.osVersion}},{key:"getBrowserInfo",value:function(){return this.browserInfo}},{key:"getBrowserDetails",value:function(){return this.browserDetails}},{key:"getCPUArchitecture",value:function(){return this.getUserData().cpuArchitecture}},{key:"getDeviceVendor",value:function(){return this.getUserData().deviceVendor}},{key:"getDeviceModel",value:function(){return this.getUserData().deviceModel}},{key:"getEngineName",value:function(){return this.getUserData().engineName}},{key:"getEngineVersion",value:function(){return this.getUserData().engineVersion}},{key:"checkUACapabilities",value:function(){kr.debug("checkUACapabilities"),apiRTC.osName==="iOS"&&(kr.debug("Deactivating whiteboardCursor for iOS"),this.capabilities.whiteboardCursor="OFF"),apiRTC.osName==="Android"&&apiRTC.browser==="Chrome"&&(kr.debug("mediaDeviceChanged not supported on Chrome/Android"),this.capabilities.mediaDeviceChanged="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(kr.debug("mediaDeviceChanged not supported on Safari"),this.capabilities.mediaDeviceChanged="OFF"),apiRTC.webRTCCompliant===!1&&(kr.debug("WebRTC not compliant"),this.capabilities.webRTCCompliant="OFF"),apiRTC.screenSharingCompliant===!1&&(kr.debug("screenSharing not compliant"),this.capabilities.screenSharingCompliant="OFF"),apiRTC.qoSStatCompliant===!1&&(kr.debug("qoS Stat not compliant"),this.capabilities.qoSStatCompliant="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(kr.debug("background removal not compliant"),this.capabilities.backgroundRemoval="ON",kr.debug("noiseReduction not compliant"),this.capabilities.noiseReduction="OFF"),"getCapabilities"in MediaStreamTrack.prototype||(kr.debug("Stream capabilities not compliant"),this.capabilities.streamCapabilities="OFF"),(apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="10"||apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="11")&&(kr.debug("remoteAccessUser not compliant"),this.capabilities.remoteAccessUser="OFF")}},{key:"startPrecallTest",value:function(Ct,It,jt,Ht,qt){Or.webRTCClient.startPrecallTest(Ct,It,jt,Ht,qt)}},{key:"sendLogToCloud",value:function(Ct,It,jt,Ht){apiCC.sendLogToCloud(Ct,It,jt,Ht)}},{key:"getStreamWithRoomNameAndCallId",value:function(Ct,It){kr.debug("getStreamWithRoomNameAndCallId");var jt="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(Ht){var qt=0;if((qt=Ht.publishedInConversations.get(Ct))!==void 0&&qt.toString()===It.toString())return kr.debug(" Stream is found"),jt=Ht;kr.debug(" This is not the stream")}),jt}},{key:"getStreamWithMediaStreamId",value:function(Ct){kr.debug("getStreamWithMediaStreamId");var It="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(jt){if(jt.data.id===Ct.toString())return kr.debug(" Stream is found"),It=jt;kr.debug(" This is not the stream")}),It}}],Pt=[{key:"getAvailableEvents",value:function(){return ym}}],Zt&&sp($t.prototype,Zt),Pt&&sp($t,Pt),Object.defineProperty($t,"prototype",{writable:!1}),Jt}(un),Sm=function(Wt,$t,Zt,Pt){var Bt=Wt.uri.split(":");kr.debug("register() - Registration using prefix :"+Bt[0]);var sn=Bt[1];$t.password!==null&&typeof $t.password=="string"?ko.authentication(sn,$t.password,$t.captcha_token).then(function(ln){return cp(Wt,ln.token,$t)}).then(function(ln){Zt(ln)}).catch(function(ln){kr.error("registerPrefixApizee err : ",ln.message);var Jt="register() - An error occured during cloud credentials registration :"+JSON.stringify(ln),Ct=ln;Ct.message=Jt,ln.hasOwnProperty("code")?Ct.code=ln.code:ln.hasOwnProperty("http_code")&&(ln.http_code.toString().startsWith("4")?Ct.code=et.g.ERROR_INVALID_CREDENTIALS:Ct.code=et.g.ERROR_SERVER_UNAVAILABLE),Pt(Ct)}):Pt(Lt.g.createError(et.g.ERROR_INVALID_CREDENTIALS,"register() - No password was specified for apizee: UserAgent registration",kr))},Tm=function(Wt,$t,Zt,Pt){kr.debug("register() - Registration using prefix :token:");var Bt=Wt.uri.split(":")[1];ko.checkUserToken(Bt).then(function(sn){return cp(Wt,Bt,$t)}).then(Zt).catch(function(sn){Pt(Lt.g.createError(et.g.ERROR_OTHER,"register() - An error occured during cloud token registration",kr))})},Im=function(Wt,$t,Zt,Pt){var Bt=Wt.uri.split(":");kr.debug("register() - Registration using prefix :"+Bt[0]);var sn=Bt[1];if(!sn||typeof sn!="string")return Pt(Lt.g.createError(et.g.ERROR_OTHER,"register() - Wrong apiKey",kr));new Promise(function(ln,Jt){ko.getPreferredCCS(sn).then(function(Ct){$t.ccs&&$t.ccs!==Ct.ccs&&(kr.debug("Overloading CCS address with init option"),Ct.ccs=$t.ccs),ln(Ct)}).catch(function(){Jt(Lt.g.createError(et.g.ERROR_OTHER,"register() - Could not get preferred CCS",kr))})}).then(function(ln){Wt.currentSession=new qr(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=null,Lt.g.isPropertyTypeof($t,"nickname","string")?Wt.username=$t.nickname:Wt.username="guest-"+Lt.g.guid().substr(0,13),Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),$t.userData&&Wt.preRegisterUserData.setProps($t.userData);var Jt={apiKey:sn,MCUActivated:!0,mcu:$t.hasOwnProperty("mcu")?$t.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,ccsServer:ln.ccs,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,userData:Wt.preRegisterUserData,tryAudioOnlyAfterUserMediaError:!$t.hasOwnProperty("tryAudioOnlyAfterUserMediaError")||$t.tryAudioOnlyAfterUserMediaError,extJsLoadingRetryNb:$t.extJsLoadingRetryNb,extJsLoadingRetryDelay:$t.extJsLoadingRetryDelay,ccsConnectionRetryNb:$t.ccsConnectionRetryNb,ccsConnectionRetryDelay:$t.ccsConnectionRetryDelay,turnServerAddress:$t.turnServerAddress,userAcceptOnIncomingDataCall:$t.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:$t.userAcceptOnIncomingScreenSharingCall,cloudIsSecured:ln.secure};return $t.hasOwnProperty("id")&&(Jt.apiCCId=$t.id),Lt.g.isPropertyTypeof($t,"idPersistenceTimeout","number")&&$t.idPersistenceTimeout>=0&&(Jt.apiCCIdPersistenceTimeout=$t.idPersistenceTimeout),$t.hasOwnProperty("groups")&&(Jt.presenceGroup=$t.groups),$t.hasOwnProperty("subscribeTo")&&(Jt.subscribeToPresenceGroup=$t.subscribeTo),$t.hasOwnProperty("contactDisconnectionDelay")&&(kr.debug("Setting contactDisconnectionDelay :",$t.contactDisconnectionDelay),Or.contactDisconnectionDelay=$t.contactDisconnectionDelay),Jt.idConversionActivated=!1,$t.hasOwnProperty("idConversionActivated")&&(Jt.idConversionActivated=$t.idConversionActivated),$t.hasOwnProperty("conversationSpace")&&(Jt.conversationSpace=$t.conversationSpace),$t.hasOwnProperty("token")&&(Jt.token=$t.token,Wt.currentSession.ccsToken=$t.token),Or.initializeApiRTC(Jt)}).then(function(ln){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Or.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Or.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Or.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Or.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Or.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Or.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Or.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.userId=ln,Wt.currentSession.init(ln),kr.log("register() - APIRTC init OK",ln),Or.apiRTCSession.userData!==void 0&&Or.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Or.apiRTCSession.userData)),Zt(Wt.currentSession)}).catch(function(ln){Pt(Lt.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"register() - ApiRTC Initialization error : "+ln,kr)),delete Wt.currentSession,Wt.currentSession=null})},cp=function(Wt,$t){var Zt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Pt=null,Bt=null;return kr.debug("initializeCloudUASession :",Zt),new Promise(function(sn,ln){ko.getConnectedUserInformation($t).then(function(Jt){if(Bt=Jt,kr.debug("Connected user information : ",Jt),Wt.currentSession=new qr(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=Jt.token,Zt.hasOwnProperty("idPersistenceTimeout")&&(Wt.currentSession.idPersistenceTimeout=Zt.idPersistenceTimeout),Wt.username=Jt.nickname,Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("nickname",Wt.username),Wt.preRegisterUserData.setProp("photo_url",Jt.photo_url),Jt.mail&&Wt.preRegisterUserData.setProp("mail",Jt.mail),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),Zt.userData&&Wt.preRegisterUserData.setProps(Zt.userData),!Zt.hasOwnProperty("overLoadedApiRTCKey")||Zt.overLoadedApiRTCKey===null||Zt.overLoadedApiRTCKey===void 0||Jt.apiKey===Zt.overLoadedApiRTCKey)return Wt.userId=Jt.userId,Pt=new Xs(Jt.enterpriseId,Jt.apiKey,Wt.currentSession),ps.set(Wt,Pt),Pt.load();kr.debug("overLoadedApiRTCKey is defined :",Zt.overLoadedApiRTCKey),Pt=new Xs(Jt.enterpriseId,Zt.overLoadedApiRTCKey,Wt.currentSession),delete Zt.id,Wt.userId=null,ps.set(Wt,Pt),kr.debug("... no enterprise users data loading")}).then(function(){var Jt={apiKey:Pt.getApiKey(),ccsServer:Zt.ccs||Bt.ccs,MCUActivated:!0,mcu:Zt.hasOwnProperty("mcu")?Zt.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,apiCCId:Zt.hasOwnProperty("id")?Zt.id:Wt.userId,userData:Wt.preRegisterUserData,tryAudioOnlyAfterUserMediaError:!Zt.hasOwnProperty("tryAudioOnlyAfterUserMediaError")||Zt.tryAudioOnlyAfterUserMediaError,presenceGroup:["agent"],subscribeToPresenceGroup:["agent","visitor"],extJsLoadingRetryNb:Zt.extJsLoadingRetryNb,extJsLoadingRetryDelay:Zt.extJsLoadingRetryDelay,ccsConnectionRetryNb:Zt.ccsConnectionRetryNb,ccsConnectionRetryDelay:Zt.ccsConnectionRetryDelay,turnServerAddress:Zt.turnServerAddress,userAcceptOnIncomingDataCall:Zt.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:Zt.userAcceptOnIncomingScreenSharingCall};return Lt.g.isPropertyTypeof(Zt,"idPersistenceTimeout","number")&&Zt.idPersistenceTimeout>=0&&(Jt.apiCCIdPersistenceTimeout=Zt.idPersistenceTimeout),Zt.hasOwnProperty("groups")&&(Jt.presenceGroup=Zt.groups),Zt.hasOwnProperty("subscribeTo")&&(Jt.subscribeToPresenceGroup=Zt.subscribeTo),Zt.hasOwnProperty("contactDisconnectionDelay")&&(kr.debug("Setting contactDisconnectionDelay :",Zt.contactDisconnectionDelay),Or.contactDisconnectionDelay=Zt.contactDisconnectionDelay),Jt.idConversionActivated=!1,Zt.hasOwnProperty("idConversionActivated")&&(Jt.idConversionActivated=Zt.idConversionActivated),Zt.hasOwnProperty("conversationSpace")&&(Jt.conversationSpace=Zt.conversationSpace),Or.initializeApiRTC(Jt)}).then(function(Jt){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Or.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Or.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Or.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Or.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Or.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Or.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Or.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.currentSession.init(Jt),kr.info("APIRTC init OK",Jt),Or.apiRTCSession.userData!==void 0&&Or.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Or.apiRTCSession.userData)),sn(Wt.currentSession)}).catch(function(Jt){kr.error(Jt),ln(Jt)})})};function Rm(Wt,$t){for(var Zt=0;Zt<$t.length;Zt++){var Pt=$t[Zt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Wt,Pt.key,Pt)}}var Qo=ft.Y.get("ResourcesLoader"),Em=function(){function Wt(){(function(Pt,Bt){if(!(Pt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.loadedJsLinks=[]}var $t,Zt;return $t=Wt,Zt=[{key:"loadjs",value:function(Pt){function Bt(sn,ln,Jt){return Pt.apply(this,arguments)}return Bt.toString=function(){return Pt.toString()},Bt}(function(Pt,Bt,sn){var ln=this;Qo.info("Load js resources",Pt),Qo.debug("Already loaded js",this.loadedJsLinks);var Jt=sn.success;if((Pt=Pt.filter(function(Ct){return!ln.loadedJsLinks.includes(Ct)})).length===0)return Qo.debug("Skip resources loading, all resources previously loaded"),void(Jt instanceof Function&&Jt());Qo.debug("Filtered resources to load",Pt),sn.success=function(){ln.loadedJsLinks.push.apply(ln.loadedJsLinks,Pt),Jt instanceof Function&&Jt()},_e(Pt,Bt,sn)})},{key:"unloadjs",value:function(Pt){var Bt=this;Qo.info("Unload js",Pt),Pt.forEach(function(sn){var ln=document.querySelector('script[src="'+sn+'"]');ln!==void 0&&(ln.remove(),Bt.loadedJsLinks=Bt.loadedJsLinks.filter(function(Jt){return Jt!==sn}))}),Qo.debug("Scripts unloaded, currently loaded js",this.loadedJsLinks)}},{key:"reset",value:function(){unloadjs(this.loadedJsLinks),this.loadedJsLinks=[]}}],Zt&&Rm($t.prototype,Zt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),Lr=ft.Y.get("Init"),$a=ft.Y.get("MediaDeviceManager");function hu(Wt){return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},hu(Wt)}rt=s.hmd(rt),console!=null&&(typeof apiRTC_React<"u"?console.info&&console.info("Loading APIRTC_REACT_NATIVE_MODULE"):console.info&&console.info("Loading APIRTC_MODULE")),window.Prototype&&delete Array.prototype.toJSON;var dp=new(Ko());vt.version="5.0.21",vt.utils={},vt.eventCenter=new kt,vt.resourcesLoader=new Em;for(var gu=0,up=Object.keys(et.g);gu<up.length;gu++){var pp=up[gu];vt[pp]=et.g[pp]}vt.utils.EventEmitter=dt,vt.utils.EventCenter=kt,vt.MediaDevice=Ot,vt.Stream=lo,vt.Call=mr,vt.Conversation=Bo,vt.ConversationCall=Gl,vt.Conference=Fs,vt.Contact=Uo,vt.Enterprise=Xs,vt.SentInvitation=Lo,vt.ReceivedInvitation=Pn,vt.ReceivedCallInvitation=xr,vt.ReceivedConversationJoinRequest=Go,vt.ReceivedConversationInvitation=wt,vt.ReceivedFileTransferInvitation=eo,vt.ReceivedWhiteboardInvitation=vs,vt.ReceivedDataChannelInvitation=No,vt.ReceivedPointerSharingInvitation=Ml,vt.PointerSharingRoom=ru,vt.Session=qr,vt.UserAgent=lp,vt.UserData=Io,vt.CloudApi=dp,vt.DataChannel=ys,vt.Observable=un,vt.setLogLevel=function(Wt){ft.Y.setLogLevel(Wt)};var fp=!1;window.apiRTC===void 0?(hu(rt)==="object"&&rt.exports&&(rt.exports=vt),window.apiRTC2=window.apiRTC=window.apiCC=window.CC=vt,fp=!0):console.info("APIRTC_MODULE already loaded with version :",apiRTC.version),s(4170),fp===!0&&(vt.init=function(Wt){var $t,Zt;if(Lr.info("apiRTC initialization, version is :"+apiCC.version),Lr.info("osName :"+apiCC.osName),Lr.info("osVersion :"+apiCC.osVersion),Lr.info("browser :"+apiCC.browser),Lr.info("browser_version :"+apiCC.browser_version),$t=Wt.apiKey,Zt=!0,Lr.info("apiKey :",$t),$t.indexOf("[")!==-1&&(Zt=!1),Zt===!0)if(Wt.hasOwnProperty("apiCCId")&&Wt.apiCCId!==null&&Wt.apiCCId!==""&&function(ln){if(ln!==null){var Jt=ln;if(typeof Jt=="number"&&(Jt=String(Jt)),typeof Jt=="string")return Jt.length<=128}return!1}(Wt.apiCCId)!==!0)Lr.error("apiCCId format is not correct, leaving connection process");else{var Pt="";if(Pt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!="https:"?"http":"https",ut.ag.name!=="iOS"&&ut.ag.name!=="Android"||(Lr.log(ut.ag.name+" detected forcing protocol to https"),Pt="https"),Wt.ccsServer===void 0?(Lr.debug("Setting ccsServer"),window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0?window.location.protocol=="https:"||ut.ag.name==="iOS"||ut.ag.name==="Android"?Wt.ccsServer="ccs5.apizee.com:443":Wt.ccsServer="ccs5.apizee.com:80":Wt.ccsServer="ccs5.apizee.com:443"):Lr.log("ccsServer is defined on init()"),Wt.bandwidthTestServer!==null&&Wt.bandwidthTestServer!==void 0?(Lr.log("bandwidthTestServer is defined :",Wt.bandwidthTestServer),apiCC.bandwidthTestServer=Wt.bandwidthTestServer):Lr.log("bandwidthTestServer is not defined"),Wt.userData!==void 0&&Lr.log("userData :",Wt.userData),apiCC.extJsLoadingRetryNb=Wt.extJsLoadingRetryNb,apiCC.extJsLoadingRetryDelay=Wt.extJsLoadingRetryDelay,apiCC.jsLoaded===!1){apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId;var Bt=function(){Lr.log("sio loaded"),apiCC.jsLoaded=!0,apiCC.session=new apiCC.ApiCCSession(Wt),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","loaded")},sn={success:Bt,error:function(){Lr.error("sio loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","error")},retrycb:function(){Lr.warn("sio retry"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","retry")}};apiCC.sioEmbedded?(window.rtcio=io,Bt()):apiRTC_sioLoader.load(Pt,Wt,sn)}else Lr.log("apiRTC JS Librairies already loaded"),Lr.log("initParameters have changed, need to reload session connection"),apiCC.addEventListener("sessionReady",Wt.onReady),Lr.log("initParameters.userData :",Wt.userData),Wt.apiCCId!==void 0&&Wt.apiCCId!==""&&Wt.apiCCId!==null||(Lr.log("keeping apiCCId defined by apiRTC :"+Wt.apiCCId),Wt.apiCCId=apiCC.session.apiCCId),Lr.log("initParameters.apiCCId :"+Wt.apiCCId),Wt.userData!==null&&Wt.userData!==void 0?(Lr.log("userData is defined :",Wt.userData),apiCC.session.userData=Wt.userData):Lr.log("userData is not defined"),Lr.log("apiCC.session.userData :",apiCC.session.userData),Wt.token!==null&&Wt.token!==void 0?(Lr.log("token is defined :"+Wt.token),apiCC.session.token=Wt.token):(Lr.log("token is not defined"),apiCC.session.token=null),Wt.conversationSpace!==null&&Wt.conversationSpace!==void 0?(Lr.log("conversationSpace is defined :"+Wt.conversationSpace),apiCC.session.conversationSpace=Wt.conversationSpace):(Lr.log("conversationSpace is not defined"),apiCC.session.conversationSpace=null),apiCC.session.reOpenChannel(Wt.apiCCId,Wt.apiKey),Wt.nickname!==null&&Wt.nickname!==void 0?(Lr.log("Nickname is defined :"+Wt.nickname),apiCC.session.nickname=Wt.nickname):(Lr.log("Nickname is not defined, setting to apiCCId value :"+apiCC.session.apiCCId),apiCC.session.nickname=apiCC.session.apiCCId),Wt.photoURL!==null&&Wt.photoURL!==void 0?(Lr.log("photoURL is defined :"+Wt.photoURL),apiCC.session.photoURL=Wt.photoURL):(Lr.log("photoURL is not defined"),apiCC.session.photoURL=null),Wt.presenceGroup!==null&&Wt.presenceGroup!==void 0?(Lr.log("presenceGroup is defined :"+Wt.presenceGroup),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(Wt.presenceGroup)&&(Lr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=Wt.presenceGroup,apiCC.session.presenceGroup=Wt.presenceGroup)):(Lr.log('presenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(["default"])&&(Lr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=["default"],apiCC.session.presenceGroup=["default"])),Wt.subscribeToPresenceGroup!==null&&Wt.subscribeToPresenceGroup!==void 0?(Lr.log("subscribeToPresenceGroup is defined :"+Wt.subscribeToPresenceGroup),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(Wt.subscribeToPresenceGroup)&&(Lr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=Wt.subscribeToPresenceGroup,apiCC.session.subscribeToPresenceGroup=Wt.subscribeToPresenceGroup)):(Lr.log('subscribeToPresenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(["default"])&&(Lr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=["default"],apiCC.session.subscribeToPresenceGroup=["default"])),apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId}else Lr.error("Apikey format is not correct, leaving connection process")},s(8560),vt.mediaDeviceMgr=new function(){this.audioDevicePresent=!0,this.videoDevicePresent=!0,this.audioOutputPresent=!0,this.mediaSourceInfos=null,this.mediaDeviceChangedDetected=!1,this.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},this.mediaDeviceSourceInfosArrayBeforeGotSources=null,this.defaultVideoInput=null,this.defaultAudioInput=null,this.defaultAudioOuput=null,this.realMediaDevicesListInitialization=!1,this.realMediaDevicesListInitializationWasAlreadyDone=!1,$a.debug("MediaDeviceManager"),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&(navigator.mediaDevices.ondevicechange=function(Wt){$a.debug("Media device have changed"),apiCC.mediaDeviceMgr.getMediaDevices("updatedOnDeviceChange")}),this.gotSources=function(Wt,$t){$a.debug("gotSources : sourceInfos :",Wt),apiCC.mediaDeviceMgr.audioDevicePresent=!1,apiCC.mediaDeviceMgr.videoDevicePresent=!1,apiCC.mediaDeviceMgr.audioOutputPresent=!1;var Zt=!1;apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources=apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray;var Pt={},Bt=!1;(0,yt.fS)(apiCC.mediaDeviceMgr.mediaSourceInfos,Wt)||($a.debug("MediaDevices change detected"),Zt=!0);var sn,ln=null,Jt=0,Ct=0,It=0,jt=null;if(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},apiCC.mediaDeviceMgr.mediaSourceInfos=Wt,Wt!==null)for(sn=0;sn!==Wt.length;++sn)(ln=Wt[sn]).deviceId!==null&&ln.deviceId!==""?(jt=new Ot(ln.deviceId,ln.kind),ln.label!==null&&ln.label!==void 0&&(this.realMediaDevicesListInitialization=!0)):($a.debug("MediaDevices change but deviceId is not correct, using fakedeviceId :",sn),jt=new Ot(sn,ln.kind)),ln.kind==="audio"||ln.kind==="audioinput"?(apiCC.mediaDeviceMgr.audioDevicePresent||(apiCC.mediaDeviceMgr.audioDevicePresent=!0),jt.label=ln.label||"microphone "+ ++Jt,apiCC.mediaDeviceMgr.defaultAudioInput===null&&(apiCC.mediaDeviceMgr.defaultAudioInput=jt),ln.getCapabilities!==null&&ln.getCapabilities!==void 0?jt.capabilities=ln.getCapabilities():$a.debug("getCapabilities not defined")):ln.kind==="video"||ln.kind==="videoinput"?(apiCC.mediaDeviceMgr.videoDevicePresent||(apiCC.mediaDeviceMgr.videoDevicePresent=!0),jt.label=ln.label||"camera "+ ++Ct,apiCC.mediaDeviceMgr.defaultVideoInput===null&&(apiCC.mediaDeviceMgr.defaultVideoInput=jt),ln.getCapabilities!==null&&ln.getCapabilities!==void 0?jt.capabilities=ln.getCapabilities():$a.debug("getCapabilities not defined")):ln.kind==="audiooutput"?(apiCC.mediaDeviceMgr.audioOutputPresent||(apiCC.mediaDeviceMgr.audioOutputPresent=!0),jt.label=ln.label||"audio output "+ ++It,apiCC.mediaDeviceMgr.defaultAudioOuput===null&&(apiCC.mediaDeviceMgr.defaultAudioOuput=jt)):(jt.label=ln.label||"other source "+ln.deviceId,$a.trace("Detected some other kind of source : "+ln.kind)),$a.trace("Local device : "+jt.label+" - "+jt.id),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[jt.type]===void 0&&(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[jt.type]={}),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[jt.type][jt.id]=jt;else $a.warn("Media detection is not supported by browser, considering micro and camera present"),apiCC.mediaDeviceMgr.audioDevicePresent=!0,apiCC.mediaDeviceMgr.videoDevicePresent=!0,apiCC.mediaDeviceMgr.audioOutputPresent=!0;if($a.log("Audio device detected :"+apiCC.mediaDeviceMgr.audioDevicePresent),$a.log("Video device detected :"+apiCC.mediaDeviceMgr.videoDevicePresent),$a.log("audio Output device detected :"+apiCC.mediaDeviceMgr.audioOutputPresent),$a.debug("mediaDeviceSourceInfosArray :",apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray),apiCC.mediaDeviceMgr.audioDevicePresent===!1?apiCC.mediaDeviceMgr.videoDevicePresent===!1?apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_AUDIO_NO_VIDEO_DEVICE"):apiCC.myWebRTC_Event.createErrorEvent("Audio device is not present","NO_AUDIO_DEVICE"):apiCC.mediaDeviceMgr.videoDevicePresent===!1&&apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_VIDEO_DEVICE"),(0,yt.fS)(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources)||($a.debug("mediaDeviceSourceInfosArray change detected"),Zt=!0),Zt===!0){$a.debug("fireMediaChangedEvent :",Zt);var Ht=this.getMediaDeviceListsDiff(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);this.realMediaDevicesListInitialization===!0&&this.realMediaDevicesListInitializationWasAlreadyDone===!1&&($a.debug("This is the first real initialization of media device list"),Bt=!0),this.realMediaDevicesListInitialization===!0&&(this.realMediaDevicesListInitializationWasAlreadyDone=!0),this.mediaDeviceChangedDetected=!0,apiCC.myWebRTC_Event!==null&&apiCC.myWebRTC_Event.createMediaDeviceChangedEvent(Ht,$t,Bt),$a.debug("fireMediaChangedEvent :",apiCC.mediaDeviceMgr.mediaSourceInfos)}apiCC.session&&apiCC.session.apiCCWebRTCClient&&(apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),Pt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,Pt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(Pt))},this.getMediaDevices=function(Wt){$a.debug("MediaDeviceManager::getMediaDevices : updateReason :",Wt),apiCC.browser==="IE"&&apiCC.browser_version>8?apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources):apiCC.getMediaDevices().then(function($t){apiCC.mediaDeviceMgr.gotSources($t,Wt)}).catch(function(){$a.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null,Wt)})},this.getMediaDeviceListsDiff=function(Wt,$t){$t!==void 0&&$t||($t={}),Wt!==void 0&&Wt||(Wt={});for(var Zt=[],Pt=[],Bt=[],sn=0,ln=Object.keys($t);sn<ln.length;sn++){var Jt=ln[sn];if(Wt[Jt]===void 0)Pt[Jt]=$t[Jt];else for(var Ct=0,It=Object.keys($t[Jt]);Ct<It.length;Ct++){var jt=It[Ct];Wt[Jt][jt]===void 0&&(Pt[Jt]===void 0&&(Pt[Jt]={}),Pt[Jt][jt]=$t[Jt][jt])}}for(var Ht=0,qt=Object.keys(Wt);Ht<qt.length;Ht++)for(var Xt=qt[Ht],en=0,rn=Object.keys(Wt[Xt]);en<rn.length;en++){var bn=rn[en];$t[Xt]!==void 0&&$t[Xt][bn]!==void 0||(Zt[Xt]===void 0&&(Zt[Xt]={}),Zt[Xt][bn]=Wt[Xt][bn]),$t[Xt]!==void 0&&$t[Xt][bn]!==void 0&&Wt[Xt][bn].label!==$t[Xt][bn].label&&(Bt[Xt]===void 0&&(Bt[Xt]={}),Bt[Xt][bn]=Wt[Xt][bn])}return{added:Object.keys(Zt).length>0?Zt:null,removed:Object.keys(Pt).length>0?Pt:null,updated:Object.keys(Bt).length>0?Bt:null}}},vt.mediaDeviceMgr.getMediaDevices(),vt.webRTCCompliant=vt.isWebRTCCompliant(),vt.qoSStatCompliant=vt.isQoSStatCompliant(),vt.screenSharingCompliant=vt.isScreenSharingCompliant());const wm=apiRTC},1549:(rt,at,s)=>{s.d(at,{Y:()=>mt}),s(6992),s(1532),s(1539),s(8783),s(3948),s(2772),s(4916),s(5306),s(2222),s(8733),s(3710),s(3161),s(9653),s(9070),s(9753),s(2526),s(1817),s(2165),s(1038),s(7042),s(8309);var et=s(3173);function nt(st){return function(ut){if(Array.isArray(ut))return ot(ut)}(st)||function(ut){if(typeof Symbol<"u"&&ut[Symbol.iterator]!=null||ut["@@iterator"]!=null)return Array.from(ut)}(st)||function(ut,ft){if(ut){if(typeof ut=="string")return ot(ut,ft);var yt=Object.prototype.toString.call(ut).slice(8,-1);return yt==="Object"&&ut.constructor&&(yt=ut.constructor.name),yt==="Map"||yt==="Set"?Array.from(ut):yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt)?ot(ut,ft):void 0}}(st)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ot(st,ut){(ut==null||ut>st.length)&&(ut=st.length);for(var ft=0,yt=new Array(ut);ft<ut;ft++)yt[ft]=st[ft];return yt}function ht(st,ut){for(var ft=0;ft<ut.length;ft++){var yt=ut[ft];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(st,yt.key,yt)}}var dt=new Map,pt=et.g.LOG_LEVEL_WARN,lt=function(st){var ut,ft=null,yt=null;for(ut=0;ut<st.length;ut++)typeof st[ut]=="string"&&(st[ut].indexOf('"type":"invite"')!==-1?st[ut].indexOf("candidate")===-1?st[ut].indexOf("S->C:")===-1?st[ut]="invite C->S: without candidate":st[ut]="invite S->C: without candidate":st[ut].indexOf("S->C:")===-1?st[ut]="invite C->S: with candidate":st[ut]="invite S->C: with candidate":st[ut].indexOf('"type":"200OK"')!==-1?st[ut].indexOf("candidate")===-1?st[ut].indexOf("S->C:")===-1?st[ut]="200OK C->S: without candidate":st[ut]="200OK S->C: without candidate":st[ut].indexOf("S->C:")===-1?st[ut]="200OK C->S: with candidate":st[ut]="200OK S->C: with candidate":st[ut].indexOf('"type":"candidate"')!==-1&&(st[ut].indexOf("S->C:")===-1?(ft=st[ut].replace(/C->S: /g,""),yt=JSON.parse(ft),st[ut]="candidate C->S:"+yt.candidate):(ft=st[ut].replace(/onChannelMessage S->C: /g,""),yt=JSON.parse(ft),st[ut]="candidate S->C:"+yt.candidate)));return st},mt=function(){function st(vt){if(function(St,xt){if(!(St instanceof xt))throw new TypeError("Cannot call a class as a function")}(this,st),dt.has(vt))throw new Error("Cannot construct singleton Logger");this.category=vt,dt.set(vt,this)}var ut,ft,yt;return ut=st,ft=[{key:"trace",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_TRACE].concat(St))}},{key:"log",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(St))}},{key:"debug",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(St))}},{key:"info",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_INFO].concat(St))}},{key:"warn",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_WARN].concat(St))}},{key:"error",value:function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];this.logMessage.apply(this,[et.g.LOG_LEVEL_ERROR].concat(St))}},{key:"logMessage",value:function(vt){for(var St=arguments.length,xt=new Array(St>1?St-1:0),Ut=1;Ut<St;Ut++)xt[Ut-1]=arguments[Ut];if(console!=null){if(vt<=pt){var Tt="[".concat(new Date().toISOString(),"]");switch(vt in et.g.LOG_LEVEL_LABELS&&(Tt+="[".concat(et.g.LOG_LEVEL_LABELS[vt],"]")),Tt+=et.g.LOG_PREFIX+"(".concat(this.category,")"),vt){case et.g.LOG_LEVEL_ERROR:var kt;console.error&&(kt=console).error.apply(kt,[Tt].concat(nt(xt)));break;case et.g.LOG_LEVEL_WARN:var Dt;console.warn&&(Dt=console).warn.apply(Dt,[Tt].concat(nt(xt)));break;case et.g.LOG_LEVEL_INFO:var Vt;console.info&&(Vt=console).info.apply(Vt,[Tt].concat(nt(xt)));break;default:var Ot;console.log&&(Ot=console).log.apply(Ot,[Tt].concat(nt(xt)))}}typeof apiCC<"u"&&apiCC.logStorageActivated&&vt<=apiCC.logStorageLevel&&(xt=lt(xt),apiCC.logStorage.push(JSON.stringify({name:"log",args:{0:"(".concat(this.category,")")+":"+xt}})))}}}],yt=[{key:"get",value:function(vt){return dt.has(vt)?dt.get(vt):new st(vt)}},{key:"setLogLevel",value:function(vt){if(!Number.isInteger(vt)||vt<0)throw"Log level invalid";pt=vt}},{key:"getLogLevel",value:function(){return pt}}],ft&&ht(ut.prototype,ft),yt&&ht(ut,yt),Object.defineProperty(ut,"prototype",{writable:!1}),st}()},3173:(rt,at,s)=>{s.d(at,{g:()=>et}),s(2526),s(1817),s(1539);var et={LOG_PREFIX:"apiRTC",LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,LOG_LEVEL_LABELS:{}};et.LOG_LEVEL_LABELS[et.LOG_LEVEL_ERROR]="ERROR",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_WARN]="WARN",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_INFO]="INFO",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_DEBUG]="DEBUG",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_TRACE]="TRACE",et.ERROR_OTHER=0,et.ERROR_INVALID_CREDENTIALS=1,et.ERROR_NETWORK_UNAVAILABLE=2,et.ERROR_SERVER_UNAVAILABLE=3,et.ERROR_UNAUTHORIZED=4,et.ERROR_APIRTC_INITIALISATION_FAILED=5,et.ERROR_APIRTC_SESSION_ALREADY_ON=6,et.ERROR_REGISTRATION_URI_INVALID=7,et.ERROR_NOT_FOUND=8,et.ERROR_BAD_PARAMETER=9,et.ERROR_INVITATION_STATE_INVALID=10,et.ERROR_TIMED_OUT=11,et.ERROR_STREAM_RECORD=12,et.ERROR_HTTP=13,et.ERROR_NOT_ALLOWED=14,et.ERROR_OPERATION_CANCELED=15,et.ERROR_WRONG_STATE=16,et.ERROR_ON_SAVE=17,et.MEDIA_TYPE_PHOTO=0,et.MEDIA_TYPE_VIDEO=1,et.MEDIA_TYPE_AUDIO=2,et.MEDIA_TYPE_DOC=3,et.CONTACT_SEND_DATA_IDENTIFIER="contact_data",et.CONTACT_NEW_MEDIA_IDENTIFIER="contact_new_media",et.CONTACT_SEND_FILEINFO_IDENTIFIER="contact_file_info",et.CONTACT_DATACHANNEL_INVITATION="contact_datachannel_invitation",et.CONTACT_EVENTCENTER_DATA_REQUEST="contact_event_center_data_request",et.CONTACT_EVENTCENTER_DATA_ANSWER="contact_event_center_data_answer",et.CONTACT_GET_CAPABILITIES_IDENTIFIER="contact_get_capabilities",et.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER="contact_get_capabilities_result",et.CONTACT_GET_SETTINGS_IDENTIFIER="contact_get_settings",et.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER="contact_get_settings_result",et.CONTACT_GET_CONSTRAINTS_IDENTIFIER="contact_get_constraints",et.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER="contact_get_constraints_result",et.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER="contact_changed_constraints",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER="contact_get_remote_audio_flow_status",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER="contact_get_remote_video_flow_status",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_audio_flow_status_result",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_video_flow_status_result",et.CONTACT_GET_REMOTE_ERROR="contact_get_remote_error",et.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER="contact_apply_constraints_identifier",et.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER="contact_apply_constraints_result_identifier",et.CONTACT_DISABLE_AUDIO_REQUEST="contact_disable_audio_request",et.CONTACT_DISABLE_AUDIO_ANSWER="contact_disable_audio_answer",et.CONTACT_ENABLE_AUDIO_REQUEST="contact_enable_audio_request",et.CONTACT_ENABLE_AUDIO_ANSWER="contact_enable_audio_answer",et.CONTACT_DISABLE_VIDEO_REQUEST="contact_disable_video_request",et.CONTACT_DISABLE_VIDEO_ANSWER="contact_disable_video_answer",et.CONTACT_ENABLE_VIDEO_REQUEST="contact_enable_video_request",et.CONTACT_ENABLE_VIDEO_ANSWER="contact_enable_video_answer",et.CONTACT_STREAM_UPDATED_INFO="contact_stream_updated_info",et.CONTACT_TAKESNAPSHOT_REQUEST="contact_takesnapshot_request",et.CONTACT_TAKESNAPSHOT_ANSWER="contact_takesnapshot_answer",et.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER="contact_remote_access_invite",et.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER="contact_remote_access_answer",et.CONTACT_REMOTEACCESS_STOP_IDENTIFIER="contact_remote_access_stop",et.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE="contact_remote_access_app_status_message",et.CONTACT_REMOTEACCESS_APP_MESSAGE="contact_remote_access_app_message",et.CONVERSATION_ACCESS_GRANTED="GRANTED",et.CONVERSATION_NEED_MODERATOR_ACCEPTATION="NEED_MODERATOR_ACCEPTATION",et.CONVERSATION_ROLE_MODERATOR="moderator",et.CONVERSATION_ROLE_CONTRIBUTOR="contributor",et.CONVERSATION_ROLE_GUEST="guest",et.CONVERSATION_WAITING_ROOM_PREFIX="waiting-room-",et.CONVERSATION_SEND_DATA_IDENTIFIER="conv_data",et.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER="conv_persistent_data_update",et.CONVERSATION_JOIN_REQUEST_IDENTIFIER="conv_join_req",et.CONVERSATION_JOIN_ANSWER_IDENTIFIER="conv_join_ans",et.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER="conv_moderator_connected",et.CONVERSATION_NEW_MEDIA_IDENTIFIER="conv_new_media",et.CONVERSATION_CLOSED_IDENTIFIER="conv_closed",et.CONVERSATION_INVITATION_IDENTIFIER="conv_invite",et.INVITATION_ANSWER_IDENTIFIER="invite_ans",et.RECORD_BASE_URL="https://data2.apizee.com:10000/videoManager",et.RECORD_PLAY_URL=et.RECORD_BASE_URL+"?action=play&recordedFileName=",et.DEFAULT_MCU="mcu4.apizee.com",et.DEFAULT_TURNADDRESS="mp1.apizee.com",et.CALL_STATUS_WAITING_FOR_CALLEE=Symbol("CALL_STATUS_WAITING_FOR_CALLEE"),et.CALL_STATUS_ONGOING=Symbol("CALL_STATUS_ONGOING"),et.CALL_STATUS_ENDED=Symbol("CALL_STATUS_ENDED"),et.DATACHANNEL_STATUS_WAITING=Symbol("DATACHANNEL_STATUS_WAITING"),et.DATACHANNEL_STATUS_ONGOING=Symbol("DATACHANNEL_STATUS_ONGOING"),et.DATACHANNEL_STATUS_ENDED=Symbol("DATACHANNEL_STATUS_ENDED"),et.DATACHANNEL_TYPE_RECEIVE=Symbol("DATACHANNEL_TYPE_RECEIVE"),et.DATACHANNEL_TYPE_SEND=Symbol("DATACHANNEL_TYPE_SEND"),et.CONVERSATION_STATUS_JOINED=Symbol("CONVERSATION_STATUS_JOINED"),et.CONVERSATION_STATUS_NOT_JOINED=Symbol("CONVERSATION_STATUS_NOT_JOINED"),et.CONVERSATION_STATUS_WAITING=Symbol("CONVERSATION_STATUS_WAITING"),et.CONVERSATION_STATUS_JOINING=Symbol("CONVERSATION_STATUS_JOINING"),et.CONVERSATION_WHITEBOARD_STARTED=Symbol("CONVERSATION_WHITEBOARD_STARTED"),et.CONVERSATION_WHITEBOARD_NOT_STARTED=Symbol("CONVERSATION_WHITEBOARD_NOT_STARTED"),et.STATE_IDLE=Symbol("STATE_IDLE"),et.STATE_JOINING=Symbol("STATE_JOINING"),et.STATE_ACTIVE=Symbol("STATE_ACTIVE"),et.STATE_LEAVING=Symbol("STATE_LEAVING"),et.INVITATION_STATUS_ACCEPTED=Symbol("INVITATION_STATUS_ACCEPTED"),et.INVITATION_STATUS_DECLINED=Symbol("INVITATION_STATUS_DECLINED"),et.INVITATION_STATUS_STANDBY=Symbol("INVITATION_STATUS_STANDBY"),et.INVITATION_STATUS_EXPIRED=Symbol("INVITATION_STATUS_EXPIRED"),et.INVITATION_STATUS_CANCELLED=Symbol("INVITATION_STATUS_CANCELLED"),et.INVITATION_STATUS_ENDED=Symbol("INVITATION_STATUS_ENDED"),et.STREAM_TYPE_NO_INPUT="no_input",et.STREAM_TYPE_AUDIO="audio",et.STREAM_TYPE_VIDEO="video",et.STREAM_AUDIO_ANALYSIS_THRESHOLD=100,et.STREAM_AUDIO_NOISE_REDUCTION_VAI={soft:.7,medium:.8,hard:.9},et.CONTACT_DISCONNECTION_DELAY=1e4,et.CONVERSATION_JOIN_REQUEST_INTERVAL=5e3,et.APIRTC_MEDIA_DEVICE_DETECTION_DELAY=1e4,et.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY=5e3,et.CONVERSATION_WHITEBOARD_START_DELAY=5e3,et.CONVERSATION_RECORDING_STARTED_DELAY=1e4,et.CONVERSATION_RECORDING_STOPPED_DELAY=5e3,et.CONVERSATION_STREAMING_STARTED_DELAY=1e4,et.CONVERSATION_STREAMING_STOPPED_DELAY=1e4,et.CONVERSATION_PARTICIPANT_EJECTION_DELAY=5e3,et.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT=3e3},1215:(rt,at,s)=>{function et(dt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},et(dt)}function nt(dt,pt){return arguments.length===3?ot(arguments[0],arguments[1],arguments[2]):pt==="null"?dt===null:pt==="array"?dt!==null&&et(dt)==="object"&&Array.isArray(dt):dt!==null&&et(dt)===pt}function ot(dt,pt,lt){if(pt!==null&&et(pt)==="object"&&Array.isArray(pt)&&pt.length>=1){var mt=pt[0];if(pt.length>1)return nt(dt,"object")&&nt(mt,"string")&&dt.hasOwnProperty(mt)&&nt(dt[mt],"object")&&ot(dt[mt],pt.slice(1),lt);pt=mt}return lt==="undefined"?nt(dt,"object")&&nt(pt,"string")&&!dt.hasOwnProperty(pt)&&nt(dt[pt],lt):nt(dt,"object")&&nt(pt,"string")&&dt.hasOwnProperty(pt)&&nt(dt[pt],lt)}s.d(at,{g:()=>ht}),s(4916),s(5306),s(3710),s(1539),s(9714),s(7941),s(9575),s(6716),s(9554),s(9601),s(6992),s(1532),s(8783),s(3948),s(9753),s(7042),s(3843),s(2564),s(2526),s(1817),s(2165);var ht={assignObject:function(dt,pt){var lt,mt,st;for(dt==null&&(dt={}),lt=1;lt<arguments.length;lt+=1)for(mt in st=arguments[lt])st.hasOwnProperty(mt)&&(dt[mt]=st[mt]);return dt},throttle:function(dt,pt){var lt,mt,st,ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=null,yt=0,vt=function(){yt=ut.leading===!1?0:Date.now(),ft=null,st=dt.apply(lt,mt),ft||(lt=mt=null)};return function(){var St=Date.now();yt||ut.leading!==!1||(yt=St);var xt=pt-(St-yt);return lt=this,mt=arguments,xt<=0||xt>pt?(ft&&(clearTimeout(ft),ft=null),yt=St,st=dt.apply(lt,mt),ft||(lt=mt=null)):ft||ut.trailing===!1||(ft=setTimeout(vt,xt)),st}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(dt){var pt=16*Math.random()|0;return(dt==="x"?pt:3&pt|8).toString(16)})},hashString:function(dt){for(var pt=0,lt=0,mt=dt.length;lt<mt;)pt=(pt<<5)-pt+dt.charCodeAt(lt++)<<0;return Math.abs(pt)},arrayBuffertoString:function(dt){var pt=new DataView(dt);return new TextDecoder("utf-8").decode(pt)},getAudioContext:function(){return apiRTC.audioProcessor.getOrCreateAudioContext()},parseRecordingEvent:function(dt,pt){var lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(["roomName","callId","recordType","convId","mediaId","mediaURL","recordedFileName"].forEach(function(st){pt.hasOwnProperty(st)&&(lt[st]=String(pt[st]))}),pt.mediaType==="AUDIO-ONLY"?(lt.audioOnly=!0,lt.videoOnly=!1):pt.mediaType==="VIDEO-ONLY"?(lt.audioOnly=!1,lt.videoOnly=!0):(lt.audioOnly=!1,lt.videoOnly=!1),lt.recordType==="composite"&&pt.hasOwnProperty("descriptor")){var mt={};Object.assign(mt,pt.descriptor),lt.mode="complete",mt.hasOwnProperty("mode")&&(lt.mode=mt.mode),lt.labelEnabled=!1,mt.hasOwnProperty("labelEnabled")&&(lt.labelEnabled=mt.labelEnabled===!0,lt.labelEnabled===!0&&mt.hasOwnProperty("labels")&&(lt.labels=mt.labels))}return lt},paramsToQueryString:function(dt){for(var pt="",lt=0,mt=Object.keys(dt);lt<mt.length;lt++){var st=mt[lt];pt+=pt===""?"?":"&",dt[st]===null||dt[st]===void 0?console.warn("apiRTC Utils - paramsToQueryString : "+st+" is undefined!"):pt+=st+"="+dt[st].toString()}return pt},createError:function(dt,pt,lt){var mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};lt&&lt.error(pt);var st={code:dt};return pt instanceof String?st.error=new Error(pt):pt instanceof Error?st.error=pt:st.error=new Error(String(pt)),nt(mt,"object")&&(mt.hasOwnProperty("fromError")&&(st.fromError=mt.fromError),mt.hasOwnProperty("httpCode")&&(st.httpCode=mt.httpCode)),st},isSet:function(dt){return dt!=null},isTypeof:nt,isPropertyTypeof:ot,_private:{dataCallsOnHold:new Map,dataChannelInvitations:new Map,dataCallsFileInfo:new Map}}},9662:(rt,at,s)=>{var et=s(614),nt=s(6330),ot=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw ot(nt(ht)+" is not a function")}},9483:(rt,at,s)=>{var et=s(4411),nt=s(6330),ot=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw ot(nt(ht)+" is not a constructor")}},6077:(rt,at,s)=>{var et=s(614),nt=String,ot=TypeError;rt.exports=function(ht){if(typeof ht=="object"||et(ht))return ht;throw ot("Can't set "+nt(ht)+" as a prototype")}},1223:(rt,at,s)=>{var et=s(5112),nt=s(30),ot=s(3070).f,ht=et("unscopables"),dt=Array.prototype;dt[ht]==null&&ot(dt,ht,{configurable:!0,value:nt(null)}),rt.exports=function(pt){dt[ht][pt]=!0}},1530:(rt,at,s)=>{var et=s(8710).charAt;rt.exports=function(nt,ot,ht){return ot+(ht?et(nt,ot).length:1)}},5787:(rt,at,s)=>{var et=s(7976),nt=TypeError;rt.exports=function(ot,ht){if(et(ht,ot))return ot;throw nt("Incorrect invocation")}},9670:(rt,at,s)=>{var et=s(111),nt=String,ot=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw ot(nt(ht)+" is not an object")}},4019:rt=>{rt.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7556:(rt,at,s)=>{var et=s(7293);rt.exports=et(function(){if(typeof ArrayBuffer=="function"){var nt=new ArrayBuffer(8);Object.isExtensible(nt)&&Object.defineProperty(nt,"a",{value:8})}})},260:(rt,at,s)=>{var et,nt,ot,ht=s(4019),dt=s(9781),pt=s(7854),lt=s(614),mt=s(111),st=s(2597),ut=s(648),ft=s(6330),yt=s(8880),vt=s(8052),St=s(3070).f,xt=s(7976),Ut=s(9518),Tt=s(7674),kt=s(5112),Dt=s(9711),Vt=s(9909),Ot=Vt.enforce,Lt=Vt.get,Gt=pt.Int8Array,tn=Gt&&Gt.prototype,zt=pt.Uint8ClampedArray,cn=zt&&zt.prototype,un=Gt&&Ut(Gt),fn=tn&&Ut(tn),vn=Object.prototype,Ft=pt.TypeError,pn=kt("toStringTag"),gn=Dt("TYPED_ARRAY_TAG"),Tn=ht&&!!Tt&&ut(pt.opera)!=="Opera",In=!1,kn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Nn={BigInt64Array:8,BigUint64Array:8},hn=function(Rn){var wn=Ut(Rn);if(mt(wn)){var xn=Lt(wn);return xn&&st(xn,"TypedArrayConstructor")?xn.TypedArrayConstructor:hn(wn)}},Sn=function(Rn){if(!mt(Rn))return!1;var wn=ut(Rn);return st(kn,wn)||st(Nn,wn)};for(et in kn)(ot=(nt=pt[et])&&nt.prototype)?Ot(ot).TypedArrayConstructor=nt:Tn=!1;for(et in Nn)(ot=(nt=pt[et])&&nt.prototype)&&(Ot(ot).TypedArrayConstructor=nt);if((!Tn||!lt(un)||un===Function.prototype)&&(un=function(){throw Ft("Incorrect invocation")},Tn))for(et in kn)pt[et]&&Tt(pt[et],un);if((!Tn||!fn||fn===vn)&&(fn=un.prototype,Tn))for(et in kn)pt[et]&&Tt(pt[et].prototype,fn);if(Tn&&Ut(cn)!==fn&&Tt(cn,fn),dt&&!st(fn,pn))for(et in In=!0,St(fn,pn,{get:function(){return mt(this)?this[gn]:void 0}}),kn)pt[et]&&yt(pt[et],gn,et);rt.exports={NATIVE_ARRAY_BUFFER_VIEWS:Tn,TYPED_ARRAY_TAG:In&&gn,aTypedArray:function(Rn){if(Sn(Rn))return Rn;throw Ft("Target is not a typed array")},aTypedArrayConstructor:function(Rn){if(lt(Rn)&&(!Tt||xt(un,Rn)))return Rn;throw Ft(ft(Rn)+" is not a typed array constructor")},exportTypedArrayMethod:function(Rn,wn,xn,Xn){if(dt){if(xn)for(var Ln in kn){var Un=pt[Ln];if(Un&&st(Un.prototype,Rn))try{delete Un.prototype[Rn]}catch{try{Un.prototype[Rn]=wn}catch{}}}fn[Rn]&&!xn||vt(fn,Rn,xn?wn:Tn&&tn[Rn]||wn,Xn)}},exportTypedArrayStaticMethod:function(Rn,wn,xn){var Xn,Ln;if(dt){if(Tt){if(xn){for(Xn in kn)if((Ln=pt[Xn])&&st(Ln,Rn))try{delete Ln[Rn]}catch{}}if(un[Rn]&&!xn)return;try{return vt(un,Rn,xn?wn:Tn&&un[Rn]||wn)}catch{}}for(Xn in kn)!(Ln=pt[Xn])||Ln[Rn]&&!xn||vt(Ln,Rn,wn)}},getTypedArrayConstructor:hn,isView:function(Rn){if(!mt(Rn))return!1;var wn=ut(Rn);return wn==="DataView"||st(kn,wn)||st(Nn,wn)},isTypedArray:Sn,TypedArray:un,TypedArrayPrototype:fn}},3331:(rt,at,s)=>{var et=s(7854),nt=s(1702),ot=s(9781),ht=s(4019),dt=s(6530),pt=s(8880),lt=s(9190),mt=s(7293),st=s(5787),ut=s(9303),ft=s(7466),yt=s(7067),vt=s(1179),St=s(9518),xt=s(7674),Ut=s(8006).f,Tt=s(3070).f,kt=s(1285),Dt=s(1589),Vt=s(8003),Ot=s(9909),Lt=dt.PROPER,Gt=dt.CONFIGURABLE,tn=Ot.get,zt=Ot.set,cn="ArrayBuffer",un="Wrong index",fn=et.ArrayBuffer,vn=fn,Ft=vn&&vn.prototype,pn=et.DataView,gn=pn&&pn.prototype,Tn=Object.prototype,In=et.Array,kn=et.RangeError,Nn=nt(kt),hn=nt([].reverse),Sn=vt.pack,Rn=vt.unpack,wn=function(On){return[255&On]},xn=function(On){return[255&On,On>>8&255]},Xn=function(On){return[255&On,On>>8&255,On>>16&255,On>>24&255]},Ln=function(On){return On[3]<<24|On[2]<<16|On[1]<<8|On[0]},Un=function(On){return Sn(On,23,4)},rr=function(On){return Sn(On,52,8)},tr=function(On,Pn){Tt(On.prototype,Pn,{get:function(){return tn(this)[Pn]}})},Qn=function(On,Pn,Vn,ir){var Mn=yt(Vn),$n=tn(On);if(Mn+Pn>$n.byteLength)throw kn(un);var Kt=tn($n.buffer).bytes,At=Mn+$n.byteOffset,it=Dt(Kt,At,At+Pn);return ir?it:hn(it)},jn=function(On,Pn,Vn,ir,Mn,$n){var Kt=yt(Vn),At=tn(On);if(Kt+Pn>At.byteLength)throw kn(un);for(var it=tn(At.buffer).bytes,Rt=Kt+At.byteOffset,bt=ir(+Mn),wt=0;wt<Pn;wt++)it[Rt+wt]=bt[$n?wt:Pn-wt-1]};if(ht){var Bn=Lt&&fn.name!==cn;if(mt(function(){fn(1)})&&mt(function(){new fn(-1)})&&!mt(function(){return new fn,new fn(1.5),new fn(NaN),Bn&&!Gt}))Bn&&Gt&&pt(fn,"name",cn);else{(vn=function(On){return st(this,Ft),new fn(yt(On))}).prototype=Ft;for(var an,zn=Ut(fn),Kn=0;zn.length>Kn;)(an=zn[Kn++])in vn||pt(vn,an,fn[an]);Ft.constructor=vn}xt&&St(gn)!==Tn&&xt(gn,Tn);var An=new pn(new vn(2)),_n=nt(gn.setInt8);An.setInt8(0,2147483648),An.setInt8(1,2147483649),!An.getInt8(0)&&An.getInt8(1)||lt(gn,{setInt8:function(On,Pn){_n(this,On,Pn<<24>>24)},setUint8:function(On,Pn){_n(this,On,Pn<<24>>24)}},{unsafe:!0})}else Ft=(vn=function(On){st(this,Ft);var Pn=yt(On);zt(this,{bytes:Nn(In(Pn),0),byteLength:Pn}),ot||(this.byteLength=Pn)}).prototype,gn=(pn=function(On,Pn,Vn){st(this,gn),st(On,Ft);var ir=tn(On).byteLength,Mn=ut(Pn);if(Mn<0||Mn>ir)throw kn("Wrong offset");if(Mn+(Vn=Vn===void 0?ir-Mn:ft(Vn))>ir)throw kn("Wrong length");zt(this,{buffer:On,byteLength:Vn,byteOffset:Mn}),ot||(this.buffer=On,this.byteLength=Vn,this.byteOffset=Mn)}).prototype,ot&&(tr(vn,"byteLength"),tr(pn,"buffer"),tr(pn,"byteLength"),tr(pn,"byteOffset")),lt(gn,{getInt8:function(On){return Qn(this,1,On)[0]<<24>>24},getUint8:function(On){return Qn(this,1,On)[0]},getInt16:function(On){var Pn=Qn(this,2,On,arguments.length>1?arguments[1]:void 0);return(Pn[1]<<8|Pn[0])<<16>>16},getUint16:function(On){var Pn=Qn(this,2,On,arguments.length>1?arguments[1]:void 0);return Pn[1]<<8|Pn[0]},getInt32:function(On){return Ln(Qn(this,4,On,arguments.length>1?arguments[1]:void 0))},getUint32:function(On){return Ln(Qn(this,4,On,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(On){return Rn(Qn(this,4,On,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(On){return Rn(Qn(this,8,On,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(On,Pn){jn(this,1,On,wn,Pn)},setUint8:function(On,Pn){jn(this,1,On,wn,Pn)},setInt16:function(On,Pn){jn(this,2,On,xn,Pn,arguments.length>2?arguments[2]:void 0)},setUint16:function(On,Pn){jn(this,2,On,xn,Pn,arguments.length>2?arguments[2]:void 0)},setInt32:function(On,Pn){jn(this,4,On,Xn,Pn,arguments.length>2?arguments[2]:void 0)},setUint32:function(On,Pn){jn(this,4,On,Xn,Pn,arguments.length>2?arguments[2]:void 0)},setFloat32:function(On,Pn){jn(this,4,On,Un,Pn,arguments.length>2?arguments[2]:void 0)},setFloat64:function(On,Pn){jn(this,8,On,rr,Pn,arguments.length>2?arguments[2]:void 0)}});Vt(vn,cn),Vt(pn,"DataView"),rt.exports={ArrayBuffer:vn,DataView:pn}},1048:(rt,at,s)=>{var et=s(7908),nt=s(1400),ot=s(6244),ht=s(5117),dt=Math.min;rt.exports=[].copyWithin||function(pt,lt){var mt=et(this),st=ot(mt),ut=nt(pt,st),ft=nt(lt,st),yt=arguments.length>2?arguments[2]:void 0,vt=dt((yt===void 0?st:nt(yt,st))-ft,st-ut),St=1;for(ft<ut&&ut<ft+vt&&(St=-1,ft+=vt-1,ut+=vt-1);vt-- >0;)ft in mt?mt[ut]=mt[ft]:ht(mt,ut),ut+=St,ft+=St;return mt}},1285:(rt,at,s)=>{var et=s(7908),nt=s(1400),ot=s(6244);rt.exports=function(ht){for(var dt=et(this),pt=ot(dt),lt=arguments.length,mt=nt(lt>1?arguments[1]:void 0,pt),st=lt>2?arguments[2]:void 0,ut=st===void 0?pt:nt(st,pt);ut>mt;)dt[mt++]=ht;return dt}},8533:(rt,at,s)=>{var et=s(2092).forEach,nt=s(9341)("forEach");rt.exports=nt?[].forEach:function(ot){return et(this,ot,arguments.length>1?arguments[1]:void 0)}},7745:(rt,at,s)=>{var et=s(6244);rt.exports=function(nt,ot){for(var ht=0,dt=et(ot),pt=new nt(dt);dt>ht;)pt[ht]=ot[ht++];return pt}},8457:(rt,at,s)=>{var et=s(9974),nt=s(6916),ot=s(7908),ht=s(3411),dt=s(7659),pt=s(4411),lt=s(6244),mt=s(6135),st=s(8554),ut=s(1246),ft=Array;rt.exports=function(yt){var vt=ot(yt),St=pt(this),xt=arguments.length,Ut=xt>1?arguments[1]:void 0,Tt=Ut!==void 0;Tt&&(Ut=et(Ut,xt>2?arguments[2]:void 0));var kt,Dt,Vt,Ot,Lt,Gt,tn=ut(vt),zt=0;if(!tn||this===ft&&dt(tn))for(kt=lt(vt),Dt=St?new this(kt):ft(kt);kt>zt;zt++)Gt=Tt?Ut(vt[zt],zt):vt[zt],mt(Dt,zt,Gt);else for(Lt=(Ot=st(vt,tn)).next,Dt=St?new this:[];!(Vt=nt(Lt,Ot)).done;zt++)Gt=Tt?ht(Ot,Ut,[Vt.value,zt],!0):Vt.value,mt(Dt,zt,Gt);return Dt.length=zt,Dt}},1318:(rt,at,s)=>{var et=s(5656),nt=s(1400),ot=s(6244),ht=function(dt){return function(pt,lt,mt){var st,ut=et(pt),ft=ot(ut),yt=nt(mt,ft);if(dt&&lt!=lt){for(;ft>yt;)if((st=ut[yt++])!=st)return!0}else for(;ft>yt;yt++)if((dt||yt in ut)&&ut[yt]===lt)return dt||yt||0;return!dt&&-1}};rt.exports={includes:ht(!0),indexOf:ht(!1)}},2092:(rt,at,s)=>{var et=s(9974),nt=s(1702),ot=s(8361),ht=s(7908),dt=s(6244),pt=s(5417),lt=nt([].push),mt=function(st){var ut=st==1,ft=st==2,yt=st==3,vt=st==4,St=st==6,xt=st==7,Ut=st==5||St;return function(Tt,kt,Dt,Vt){for(var Ot,Lt,Gt=ht(Tt),tn=ot(Gt),zt=et(kt,Dt),cn=dt(tn),un=0,fn=Vt||pt,vn=ut?fn(Tt,cn):ft||xt?fn(Tt,0):void 0;cn>un;un++)if((Ut||un in tn)&&(Lt=zt(Ot=tn[un],un,Gt),st))if(ut)vn[un]=Lt;else if(Lt)switch(st){case 3:return!0;case 5:return Ot;case 6:return un;case 2:lt(vn,Ot)}else switch(st){case 4:return!1;case 7:lt(vn,Ot)}return St?-1:yt||vt?vt:vn}};rt.exports={forEach:mt(0),map:mt(1),filter:mt(2),some:mt(3),every:mt(4),find:mt(5),findIndex:mt(6),filterReject:mt(7)}},6583:(rt,at,s)=>{var et=s(2104),nt=s(5656),ot=s(9303),ht=s(6244),dt=s(9341),pt=Math.min,lt=[].lastIndexOf,mt=!!lt&&1/[1].lastIndexOf(1,-0)<0,st=dt("lastIndexOf"),ut=mt||!st;rt.exports=ut?function(ft){if(mt)return et(lt,this,arguments)||0;var yt=nt(this),vt=ht(yt),St=vt-1;for(arguments.length>1&&(St=pt(St,ot(arguments[1]))),St<0&&(St=vt+St);St>=0;St--)if(St in yt&&yt[St]===ft)return St||0;return-1}:lt},1194:(rt,at,s)=>{var et=s(7293),nt=s(5112),ot=s(7392),ht=nt("species");rt.exports=function(dt){return ot>=51||!et(function(){var pt=[];return(pt.constructor={})[ht]=function(){return{foo:1}},pt[dt](Boolean).foo!==1})}},9341:(rt,at,s)=>{var et=s(7293);rt.exports=function(nt,ot){var ht=[][nt];return!!ht&&et(function(){ht.call(null,ot||function(){return 1},1)})}},3671:(rt,at,s)=>{var et=s(9662),nt=s(7908),ot=s(8361),ht=s(6244),dt=TypeError,pt=function(lt){return function(mt,st,ut,ft){et(st);var yt=nt(mt),vt=ot(yt),St=ht(yt),xt=lt?St-1:0,Ut=lt?-1:1;if(ut<2)for(;;){if(xt in vt){ft=vt[xt],xt+=Ut;break}if(xt+=Ut,lt?xt<0:St<=xt)throw dt("Reduce of empty array with no initial value")}for(;lt?xt>=0:St>xt;xt+=Ut)xt in vt&&(ft=st(ft,vt[xt],xt,yt));return ft}};rt.exports={left:pt(!1),right:pt(!0)}},1589:(rt,at,s)=>{var et=s(1400),nt=s(6244),ot=s(6135),ht=Array,dt=Math.max;rt.exports=function(pt,lt,mt){for(var st=nt(pt),ut=et(lt,st),ft=et(mt===void 0?st:mt,st),yt=ht(dt(ft-ut,0)),vt=0;ut<ft;ut++,vt++)ot(yt,vt,pt[ut]);return yt.length=vt,yt}},206:(rt,at,s)=>{var et=s(1702);rt.exports=et([].slice)},4362:(rt,at,s)=>{var et=s(1589),nt=Math.floor,ot=function(pt,lt){var mt=pt.length,st=nt(mt/2);return mt<8?ht(pt,lt):dt(pt,ot(et(pt,0,st),lt),ot(et(pt,st),lt),lt)},ht=function(pt,lt){for(var mt,st,ut=pt.length,ft=1;ft<ut;){for(st=ft,mt=pt[ft];st&&lt(pt[st-1],mt)>0;)pt[st]=pt[--st];st!==ft++&&(pt[st]=mt)}return pt},dt=function(pt,lt,mt,st){for(var ut=lt.length,ft=mt.length,yt=0,vt=0;yt<ut||vt<ft;)pt[yt+vt]=yt<ut&&vt<ft?st(lt[yt],mt[vt])<=0?lt[yt++]:mt[vt++]:yt<ut?lt[yt++]:mt[vt++];return pt};rt.exports=ot},7475:(rt,at,s)=>{var et=s(3157),nt=s(4411),ot=s(111),ht=s(5112)("species"),dt=Array;rt.exports=function(pt){var lt;return et(pt)&&(lt=pt.constructor,(nt(lt)&&(lt===dt||et(lt.prototype))||ot(lt)&&(lt=lt[ht])===null)&&(lt=void 0)),lt===void 0?dt:lt}},5417:(rt,at,s)=>{var et=s(7475);rt.exports=function(nt,ot){return new(et(nt))(ot===0?0:ot)}},3411:(rt,at,s)=>{var et=s(9670),nt=s(9212);rt.exports=function(ot,ht,dt,pt){try{return pt?ht(et(dt)[0],dt[1]):ht(dt)}catch(lt){nt(ot,"throw",lt)}}},7072:(rt,at,s)=>{var et=s(5112)("iterator"),nt=!1;try{var ot=0,ht={next:function(){return{done:!!ot++}},return:function(){nt=!0}};ht[et]=function(){return this},Array.from(ht,function(){throw 2})}catch{}rt.exports=function(dt,pt){if(!pt&&!nt)return!1;var lt=!1;try{var mt={};mt[et]=function(){return{next:function(){return{done:lt=!0}}}},dt(mt)}catch{}return lt}},4326:(rt,at,s)=>{var et=s(1702),nt=et({}.toString),ot=et("".slice);rt.exports=function(ht){return ot(nt(ht),8,-1)}},648:(rt,at,s)=>{var et=s(1694),nt=s(614),ot=s(4326),ht=s(5112)("toStringTag"),dt=Object,pt=ot(function(){return arguments}())=="Arguments";rt.exports=et?ot:function(lt){var mt,st,ut;return lt===void 0?"Undefined":lt===null?"Null":typeof(st=function(ft,yt){try{return ft[yt]}catch{}}(mt=dt(lt),ht))=="string"?st:pt?ot(mt):(ut=ot(mt))=="Object"&&nt(mt.callee)?"Arguments":ut}},5631:(rt,at,s)=>{var et=s(3070).f,nt=s(30),ot=s(9190),ht=s(9974),dt=s(5787),pt=s(408),lt=s(654),mt=s(6340),st=s(9781),ut=s(2423).fastKey,ft=s(9909),yt=ft.set,vt=ft.getterFor;rt.exports={getConstructor:function(St,xt,Ut,Tt){var kt=St(function(Gt,tn){dt(Gt,Dt),yt(Gt,{type:xt,index:nt(null),first:void 0,last:void 0,size:0}),st||(Gt.size=0),tn!=null&&pt(tn,Gt[Tt],{that:Gt,AS_ENTRIES:Ut})}),Dt=kt.prototype,Vt=vt(xt),Ot=function(Gt,tn,zt){var cn,un,fn=Vt(Gt),vn=Lt(Gt,tn);return vn?vn.value=zt:(fn.last=vn={index:un=ut(tn,!0),key:tn,value:zt,previous:cn=fn.last,next:void 0,removed:!1},fn.first||(fn.first=vn),cn&&(cn.next=vn),st?fn.size++:Gt.size++,un!=="F"&&(fn.index[un]=vn)),Gt},Lt=function(Gt,tn){var zt,cn=Vt(Gt),un=ut(tn);if(un!=="F")return cn.index[un];for(zt=cn.first;zt;zt=zt.next)if(zt.key==tn)return zt};return ot(Dt,{clear:function(){for(var Gt=Vt(this),tn=Gt.index,zt=Gt.first;zt;)zt.removed=!0,zt.previous&&(zt.previous=zt.previous.next=void 0),delete tn[zt.index],zt=zt.next;Gt.first=Gt.last=void 0,st?Gt.size=0:this.size=0},delete:function(Gt){var tn=this,zt=Vt(tn),cn=Lt(tn,Gt);if(cn){var un=cn.next,fn=cn.previous;delete zt.index[cn.index],cn.removed=!0,fn&&(fn.next=un),un&&(un.previous=fn),zt.first==cn&&(zt.first=un),zt.last==cn&&(zt.last=fn),st?zt.size--:tn.size--}return!!cn},forEach:function(Gt){for(var tn,zt=Vt(this),cn=ht(Gt,arguments.length>1?arguments[1]:void 0);tn=tn?tn.next:zt.first;)for(cn(tn.value,tn.key,this);tn&&tn.removed;)tn=tn.previous},has:function(Gt){return!!Lt(this,Gt)}}),ot(Dt,Ut?{get:function(Gt){var tn=Lt(this,Gt);return tn&&tn.value},set:function(Gt,tn){return Ot(this,Gt===0?0:Gt,tn)}}:{add:function(Gt){return Ot(this,Gt=Gt===0?0:Gt,Gt)}}),st&&et(Dt,"size",{get:function(){return Vt(this).size}}),kt},setStrong:function(St,xt,Ut){var Tt=xt+" Iterator",kt=vt(xt),Dt=vt(Tt);lt(St,xt,function(Vt,Ot){yt(this,{type:Tt,target:Vt,state:kt(Vt),kind:Ot,last:void 0})},function(){for(var Vt=Dt(this),Ot=Vt.kind,Lt=Vt.last;Lt&&Lt.removed;)Lt=Lt.previous;return Vt.target&&(Vt.last=Lt=Lt?Lt.next:Vt.state.first)?Ot=="keys"?{value:Lt.key,done:!1}:Ot=="values"?{value:Lt.value,done:!1}:{value:[Lt.key,Lt.value],done:!1}:(Vt.target=void 0,{value:void 0,done:!0})},Ut?"entries":"values",!Ut,!0),mt(xt)}}},9320:(rt,at,s)=>{var et=s(1702),nt=s(9190),ot=s(2423).getWeakData,ht=s(9670),dt=s(111),pt=s(5787),lt=s(408),mt=s(2092),st=s(2597),ut=s(9909),ft=ut.set,yt=ut.getterFor,vt=mt.find,St=mt.findIndex,xt=et([].splice),Ut=0,Tt=function(Vt){return Vt.frozen||(Vt.frozen=new kt)},kt=function(){this.entries=[]},Dt=function(Vt,Ot){return vt(Vt.entries,function(Lt){return Lt[0]===Ot})};kt.prototype={get:function(Vt){var Ot=Dt(this,Vt);if(Ot)return Ot[1]},has:function(Vt){return!!Dt(this,Vt)},set:function(Vt,Ot){var Lt=Dt(this,Vt);Lt?Lt[1]=Ot:this.entries.push([Vt,Ot])},delete:function(Vt){var Ot=St(this.entries,function(Lt){return Lt[0]===Vt});return~Ot&&xt(this.entries,Ot,1),!!~Ot}},rt.exports={getConstructor:function(Vt,Ot,Lt,Gt){var tn=Vt(function(fn,vn){pt(fn,zt),ft(fn,{type:Ot,id:Ut++,frozen:void 0}),vn!=null&&lt(vn,fn[Gt],{that:fn,AS_ENTRIES:Lt})}),zt=tn.prototype,cn=yt(Ot),un=function(fn,vn,Ft){var pn=cn(fn),gn=ot(ht(vn),!0);return gn===!0?Tt(pn).set(vn,Ft):gn[pn.id]=Ft,fn};return nt(zt,{delete:function(fn){var vn=cn(this);if(!dt(fn))return!1;var Ft=ot(fn);return Ft===!0?Tt(vn).delete(fn):Ft&&st(Ft,vn.id)&&delete Ft[vn.id]},has:function(fn){var vn=cn(this);if(!dt(fn))return!1;var Ft=ot(fn);return Ft===!0?Tt(vn).has(fn):Ft&&st(Ft,vn.id)}}),nt(zt,Lt?{get:function(fn){var vn=cn(this);if(dt(fn)){var Ft=ot(fn);return Ft===!0?Tt(vn).get(fn):Ft?Ft[vn.id]:void 0}},set:function(fn,vn){return un(this,fn,vn)}}:{add:function(fn){return un(this,fn,!0)}}),tn}}},7710:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(1702),ht=s(4705),dt=s(8052),pt=s(2423),lt=s(408),mt=s(5787),st=s(614),ut=s(111),ft=s(7293),yt=s(7072),vt=s(8003),St=s(9587);rt.exports=function(xt,Ut,Tt){var kt=xt.indexOf("Map")!==-1,Dt=xt.indexOf("Weak")!==-1,Vt=kt?"set":"add",Ot=nt[xt],Lt=Ot&&Ot.prototype,Gt=Ot,tn={},zt=function(pn){var gn=ot(Lt[pn]);dt(Lt,pn,pn=="add"?function(Tn){return gn(this,Tn===0?0:Tn),this}:pn=="delete"?function(Tn){return!(Dt&&!ut(Tn))&&gn(this,Tn===0?0:Tn)}:pn=="get"?function(Tn){return Dt&&!ut(Tn)?void 0:gn(this,Tn===0?0:Tn)}:pn=="has"?function(Tn){return!(Dt&&!ut(Tn))&&gn(this,Tn===0?0:Tn)}:function(Tn,In){return gn(this,Tn===0?0:Tn,In),this})};if(ht(xt,!st(Ot)||!(Dt||Lt.forEach&&!ft(function(){new Ot().entries().next()}))))Gt=Tt.getConstructor(Ut,xt,kt,Vt),pt.enable();else if(ht(xt,!0)){var cn=new Gt,un=cn[Vt](Dt?{}:-0,1)!=cn,fn=ft(function(){cn.has(1)}),vn=yt(function(pn){new Ot(pn)}),Ft=!Dt&&ft(function(){for(var pn=new Ot,gn=5;gn--;)pn[Vt](gn,gn);return!pn.has(-0)});vn||((Gt=Ut(function(pn,gn){mt(pn,Lt);var Tn=St(new Ot,pn,Gt);return gn!=null&&lt(gn,Tn[Vt],{that:Tn,AS_ENTRIES:kt}),Tn})).prototype=Lt,Lt.constructor=Gt),(fn||Ft)&&(zt("delete"),zt("has"),kt&&zt("get")),(Ft||un)&&zt(Vt),Dt&&Lt.clear&&delete Lt.clear}return tn[xt]=Gt,et({global:!0,constructor:!0,forced:Gt!=Ot},tn),vt(Gt,xt),Dt||Tt.setStrong(Gt,xt,kt),Gt}},9920:(rt,at,s)=>{var et=s(2597),nt=s(3887),ot=s(1236),ht=s(3070);rt.exports=function(dt,pt,lt){for(var mt=nt(pt),st=ht.f,ut=ot.f,ft=0;ft<mt.length;ft++){var yt=mt[ft];et(dt,yt)||lt&&et(lt,yt)||st(dt,yt,ut(pt,yt))}}},4964:(rt,at,s)=>{var et=s(5112)("match");rt.exports=function(nt){var ot=/./;try{"/./"[nt](ot)}catch{try{return ot[et]=!1,"/./"[nt](ot)}catch{}}return!1}},8544:(rt,at,s)=>{var et=s(7293);rt.exports=!et(function(){function nt(){}return nt.prototype.constructor=null,Object.getPrototypeOf(new nt)!==nt.prototype})},4994:(rt,at,s)=>{var et=s(3383).IteratorPrototype,nt=s(30),ot=s(9114),ht=s(8003),dt=s(7497),pt=function(){return this};rt.exports=function(lt,mt,st,ut){var ft=mt+" Iterator";return lt.prototype=nt(et,{next:ot(+!ut,st)}),ht(lt,ft,!1,!0),dt[ft]=pt,lt}},8880:(rt,at,s)=>{var et=s(9781),nt=s(3070),ot=s(9114);rt.exports=et?function(ht,dt,pt){return nt.f(ht,dt,ot(1,pt))}:function(ht,dt,pt){return ht[dt]=pt,ht}},9114:rt=>{rt.exports=function(at,s){return{enumerable:!(1&at),configurable:!(2&at),writable:!(4&at),value:s}}},6135:(rt,at,s)=>{var et=s(4948),nt=s(3070),ot=s(9114);rt.exports=function(ht,dt,pt){var lt=et(dt);lt in ht?nt.f(ht,lt,ot(0,pt)):ht[lt]=pt}},5573:(rt,at,s)=>{var et=s(1702),nt=s(7293),ot=s(6650).start,ht=RangeError,dt=Math.abs,pt=Date.prototype,lt=pt.toISOString,mt=et(pt.getTime),st=et(pt.getUTCDate),ut=et(pt.getUTCFullYear),ft=et(pt.getUTCHours),yt=et(pt.getUTCMilliseconds),vt=et(pt.getUTCMinutes),St=et(pt.getUTCMonth),xt=et(pt.getUTCSeconds);rt.exports=nt(function(){return lt.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!nt(function(){lt.call(new Date(NaN))})?function(){if(!isFinite(mt(this)))throw ht("Invalid time value");var Ut=this,Tt=ut(Ut),kt=yt(Ut),Dt=Tt<0?"-":Tt>9999?"+":"";return Dt+ot(dt(Tt),Dt?6:4,0)+"-"+ot(St(Ut)+1,2,0)+"-"+ot(st(Ut),2,0)+"T"+ot(ft(Ut),2,0)+":"+ot(vt(Ut),2,0)+":"+ot(xt(Ut),2,0)+"."+ot(kt,3,0)+"Z"}:lt},7045:(rt,at,s)=>{var et=s(6339),nt=s(3070);rt.exports=function(ot,ht,dt){return dt.get&&et(dt.get,ht,{getter:!0}),dt.set&&et(dt.set,ht,{setter:!0}),nt.f(ot,ht,dt)}},8052:(rt,at,s)=>{var et=s(614),nt=s(3070),ot=s(6339),ht=s(3072);rt.exports=function(dt,pt,lt,mt){mt||(mt={});var st=mt.enumerable,ut=mt.name!==void 0?mt.name:pt;if(et(lt)&&ot(lt,ut,mt),mt.global)st?dt[pt]=lt:ht(pt,lt);else{try{mt.unsafe?dt[pt]&&(st=!0):delete dt[pt]}catch{}st?dt[pt]=lt:nt.f(dt,pt,{value:lt,enumerable:!1,configurable:!mt.nonConfigurable,writable:!mt.nonWritable})}return dt}},9190:(rt,at,s)=>{var et=s(8052);rt.exports=function(nt,ot,ht){for(var dt in ot)et(nt,dt,ot[dt],ht);return nt}},3072:(rt,at,s)=>{var et=s(7854),nt=Object.defineProperty;rt.exports=function(ot,ht){try{nt(et,ot,{value:ht,configurable:!0,writable:!0})}catch{et[ot]=ht}return ht}},654:(rt,at,s)=>{var et=s(2109),nt=s(6916),ot=s(1913),ht=s(6530),dt=s(614),pt=s(4994),lt=s(9518),mt=s(7674),st=s(8003),ut=s(8880),ft=s(8052),yt=s(5112),vt=s(7497),St=s(3383),xt=ht.PROPER,Ut=ht.CONFIGURABLE,Tt=St.IteratorPrototype,kt=St.BUGGY_SAFARI_ITERATORS,Dt=yt("iterator"),Vt="keys",Ot="values",Lt="entries",Gt=function(){return this};rt.exports=function(tn,zt,cn,un,fn,vn,Ft){pt(cn,zt,un);var pn,gn,Tn,In=function(xn){if(xn===fn&&Rn)return Rn;if(!kt&&xn in hn)return hn[xn];switch(xn){case Vt:case Ot:case Lt:return function(){return new cn(this,xn)}}return function(){return new cn(this)}},kn=zt+" Iterator",Nn=!1,hn=tn.prototype,Sn=hn[Dt]||hn["@@iterator"]||fn&&hn[fn],Rn=!kt&&Sn||In(fn),wn=zt=="Array"&&hn.entries||Sn;if(wn&&(pn=lt(wn.call(new tn)))!==Object.prototype&&pn.next&&(ot||lt(pn)===Tt||(mt?mt(pn,Tt):dt(pn[Dt])||ft(pn,Dt,Gt)),st(pn,kn,!0,!0),ot&&(vt[kn]=Gt)),xt&&fn==Ot&&Sn&&Sn.name!==Ot&&(!ot&&Ut?ut(hn,"name",Ot):(Nn=!0,Rn=function(){return nt(Sn,this)})),fn)if(gn={values:In(Ot),keys:vn?Rn:In(Vt),entries:In(Lt)},Ft)for(Tn in gn)(kt||Nn||!(Tn in hn))&&ft(hn,Tn,gn[Tn]);else et({target:zt,proto:!0,forced:kt||Nn},gn);return ot&&!Ft||hn[Dt]===Rn||ft(hn,Dt,Rn,{name:fn}),vt[zt]=Rn,gn}},7235:(rt,at,s)=>{var et=s(857),nt=s(2597),ot=s(6061),ht=s(3070).f;rt.exports=function(dt){var pt=et.Symbol||(et.Symbol={});nt(pt,dt)||ht(pt,dt,{value:ot.f(dt)})}},5117:(rt,at,s)=>{var et=s(6330),nt=TypeError;rt.exports=function(ot,ht){if(!delete ot[ht])throw nt("Cannot delete property "+et(ht)+" of "+et(ot))}},9781:(rt,at,s)=>{var et=s(7293);rt.exports=!et(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(rt,at,s)=>{var et=s(7854),nt=s(111),ot=et.document,ht=nt(ot)&&nt(ot.createElement);rt.exports=function(dt){return ht?ot.createElement(dt):{}}},7207:rt=>{var at=TypeError;rt.exports=function(s){if(s>9007199254740991)throw at("Maximum allowed index exceeded");return s}},8324:rt=>{rt.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(rt,at,s)=>{var et=s(317)("span").classList,nt=et&&et.constructor&&et.constructor.prototype;rt.exports=nt===Object.prototype?void 0:nt},8886:(rt,at,s)=>{var et=s(8113).match(/firefox\/(\d+)/i);rt.exports=!!et&&+et[1]},7871:rt=>{rt.exports=typeof window=="object"&&typeof Deno!="object"},256:(rt,at,s)=>{var et=s(8113);rt.exports=/MSIE|Trident/.test(et)},1528:(rt,at,s)=>{var et=s(8113),nt=s(7854);rt.exports=/ipad|iphone|ipod/i.test(et)&&nt.Pebble!==void 0},6833:(rt,at,s)=>{var et=s(8113);rt.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(et)},5268:(rt,at,s)=>{var et=s(4326),nt=s(7854);rt.exports=et(nt.process)=="process"},1036:(rt,at,s)=>{var et=s(8113);rt.exports=/web0s(?!.*chrome)/i.test(et)},8113:(rt,at,s)=>{var et=s(5005);rt.exports=et("navigator","userAgent")||""},7392:(rt,at,s)=>{var et,nt,ot=s(7854),ht=s(8113),dt=ot.process,pt=ot.Deno,lt=dt&&dt.versions||pt&&pt.version,mt=lt&&lt.v8;mt&&(nt=(et=mt.split("."))[0]>0&&et[0]<4?1:+(et[0]+et[1])),!nt&&ht&&(!(et=ht.match(/Edge\/(\d+)/))||et[1]>=74)&&(et=ht.match(/Chrome\/(\d+)/))&&(nt=+et[1]),rt.exports=nt},8008:(rt,at,s)=>{var et=s(8113).match(/AppleWebKit\/(\d+)\./);rt.exports=!!et&&+et[1]},748:rt=>{rt.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(rt,at,s)=>{var et=s(7854),nt=s(1236).f,ot=s(8880),ht=s(8052),dt=s(3072),pt=s(9920),lt=s(4705);rt.exports=function(mt,st){var ut,ft,yt,vt,St,xt=mt.target,Ut=mt.global,Tt=mt.stat;if(ut=Ut?et:Tt?et[xt]||dt(xt,{}):(et[xt]||{}).prototype)for(ft in st){if(vt=st[ft],yt=mt.dontCallGetSet?(St=nt(ut,ft))&&St.value:ut[ft],!lt(Ut?ft:xt+(Tt?".":"#")+ft,mt.forced)&&yt!==void 0){if(typeof vt==typeof yt)continue;pt(vt,yt)}(mt.sham||yt&&yt.sham)&&ot(vt,"sham",!0),ht(ut,ft,vt,mt)}}},7293:rt=>{rt.exports=function(at){try{return!!at()}catch{return!0}}},7007:(rt,at,s)=>{s(4916);var et=s(1702),nt=s(8052),ot=s(2261),ht=s(7293),dt=s(5112),pt=s(8880),lt=dt("species"),mt=RegExp.prototype;rt.exports=function(st,ut,ft,yt){var vt=dt(st),St=!ht(function(){var kt={};return kt[vt]=function(){return 7},""[st](kt)!=7}),xt=St&&!ht(function(){var kt=!1,Dt=/a/;return st==="split"&&((Dt={}).constructor={},Dt.constructor[lt]=function(){return Dt},Dt.flags="",Dt[vt]=/./[vt]),Dt.exec=function(){return kt=!0,null},Dt[vt](""),!kt});if(!St||!xt||ft){var Ut=et(/./[vt]),Tt=ut(vt,""[st],function(kt,Dt,Vt,Ot,Lt){var Gt=et(kt),tn=Dt.exec;return tn===ot||tn===mt.exec?St&&!Lt?{done:!0,value:Ut(Dt,Vt,Ot)}:{done:!0,value:Gt(Vt,Dt,Ot)}:{done:!1}});nt(String.prototype,st,Tt[0]),nt(mt,vt,Tt[1])}yt&&pt(mt[vt],"sham",!0)}},6677:(rt,at,s)=>{var et=s(7293);rt.exports=!et(function(){return Object.isExtensible(Object.preventExtensions({}))})},2104:(rt,at,s)=>{var et=s(4374),nt=Function.prototype,ot=nt.apply,ht=nt.call;rt.exports=typeof Reflect=="object"&&Reflect.apply||(et?ht.bind(ot):function(){return ht.apply(ot,arguments)})},9974:(rt,at,s)=>{var et=s(1702),nt=s(9662),ot=s(4374),ht=et(et.bind);rt.exports=function(dt,pt){return nt(dt),pt===void 0?dt:ot?ht(dt,pt):function(){return dt.apply(pt,arguments)}}},4374:(rt,at,s)=>{var et=s(7293);rt.exports=!et(function(){var nt=(function(){}).bind();return typeof nt!="function"||nt.hasOwnProperty("prototype")})},7065:(rt,at,s)=>{var et=s(1702),nt=s(9662),ot=s(111),ht=s(2597),dt=s(206),pt=s(4374),lt=Function,mt=et([].concat),st=et([].join),ut={},ft=function(yt,vt,St){if(!ht(ut,vt)){for(var xt=[],Ut=0;Ut<vt;Ut++)xt[Ut]="a["+Ut+"]";ut[vt]=lt("C,a","return new C("+st(xt,",")+")")}return ut[vt](yt,St)};rt.exports=pt?lt.bind:function(yt){var vt=nt(this),St=vt.prototype,xt=dt(arguments,1),Ut=function(){var Tt=mt(xt,dt(arguments));return this instanceof Ut?ft(vt,Tt.length,Tt):vt.apply(yt,Tt)};return ot(St)&&(Ut.prototype=St),Ut}},6916:(rt,at,s)=>{var et=s(4374),nt=Function.prototype.call;rt.exports=et?nt.bind(nt):function(){return nt.apply(nt,arguments)}},6530:(rt,at,s)=>{var et=s(9781),nt=s(2597),ot=Function.prototype,ht=et&&Object.getOwnPropertyDescriptor,dt=nt(ot,"name"),pt=dt&&(function(){}).name==="something",lt=dt&&(!et||et&&ht(ot,"name").configurable);rt.exports={EXISTS:dt,PROPER:pt,CONFIGURABLE:lt}},1702:(rt,at,s)=>{var et=s(4374),nt=Function.prototype,ot=nt.bind,ht=nt.call,dt=et&&ot.bind(ht,ht);rt.exports=et?function(pt){return pt&&dt(pt)}:function(pt){return pt&&function(){return ht.apply(pt,arguments)}}},5005:(rt,at,s)=>{var et=s(7854),nt=s(614),ot=function(ht){return nt(ht)?ht:void 0};rt.exports=function(ht,dt){return arguments.length<2?ot(et[ht]):et[ht]&&et[ht][dt]}},1246:(rt,at,s)=>{var et=s(648),nt=s(8173),ot=s(7497),ht=s(5112)("iterator");rt.exports=function(dt){if(dt!=null)return nt(dt,ht)||nt(dt,"@@iterator")||ot[et(dt)]}},8554:(rt,at,s)=>{var et=s(6916),nt=s(9662),ot=s(9670),ht=s(6330),dt=s(1246),pt=TypeError;rt.exports=function(lt,mt){var st=arguments.length<2?dt(lt):mt;if(nt(st))return ot(et(st,lt));throw pt(ht(lt)+" is not iterable")}},8173:(rt,at,s)=>{var et=s(9662);rt.exports=function(nt,ot){var ht=nt[ot];return ht==null?void 0:et(ht)}},647:(rt,at,s)=>{var et=s(1702),nt=s(7908),ot=Math.floor,ht=et("".charAt),dt=et("".replace),pt=et("".slice),lt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,mt=/\$([$&'`]|\d{1,2})/g;rt.exports=function(st,ut,ft,yt,vt,St){var xt=ft+st.length,Ut=yt.length,Tt=mt;return vt!==void 0&&(vt=nt(vt),Tt=lt),dt(St,Tt,function(kt,Dt){var Vt;switch(ht(Dt,0)){case"$":return"$";case"&":return st;case"`":return pt(ut,0,ft);case"'":return pt(ut,xt);case"<":Vt=vt[pt(Dt,1,-1)];break;default:var Ot=+Dt;if(Ot===0)return kt;if(Ot>Ut){var Lt=ot(Ot/10);return Lt===0?kt:Lt<=Ut?yt[Lt-1]===void 0?ht(Dt,1):yt[Lt-1]+ht(Dt,1):kt}Vt=yt[Ot-1]}return Vt===void 0?"":Vt})}},7854:(rt,at,s)=>{var et=function(nt){return nt&&nt.Math==Math&&nt};rt.exports=et(typeof globalThis=="object"&&globalThis)||et(typeof window=="object"&&window)||et(typeof self=="object"&&self)||et(typeof s.g=="object"&&s.g)||function(){return this}()||Function("return this")()},2597:(rt,at,s)=>{var et=s(1702),nt=s(7908),ot=et({}.hasOwnProperty);rt.exports=Object.hasOwn||function(ht,dt){return ot(nt(ht),dt)}},3501:rt=>{rt.exports={}},842:(rt,at,s)=>{var et=s(7854);rt.exports=function(nt,ot){var ht=et.console;ht&&ht.error&&(arguments.length==1?ht.error(nt):ht.error(nt,ot))}},490:(rt,at,s)=>{var et=s(5005);rt.exports=et("document","documentElement")},4664:(rt,at,s)=>{var et=s(9781),nt=s(7293),ot=s(317);rt.exports=!et&&!nt(function(){return Object.defineProperty(ot("div"),"a",{get:function(){return 7}}).a!=7})},1179:rt=>{var at=Array,s=Math.abs,et=Math.pow,nt=Math.floor,ot=Math.log,ht=Math.LN2;rt.exports={pack:function(dt,pt,lt){var mt,st,ut,ft=at(lt),yt=8*lt-pt-1,vt=(1<<yt)-1,St=vt>>1,xt=pt===23?et(2,-24)-et(2,-77):0,Ut=dt<0||dt===0&&1/dt<0?1:0,Tt=0;for((dt=s(dt))!=dt||dt===1/0?(st=dt!=dt?1:0,mt=vt):(mt=nt(ot(dt)/ht),dt*(ut=et(2,-mt))<1&&(mt--,ut*=2),(dt+=mt+St>=1?xt/ut:xt*et(2,1-St))*ut>=2&&(mt++,ut/=2),mt+St>=vt?(st=0,mt=vt):mt+St>=1?(st=(dt*ut-1)*et(2,pt),mt+=St):(st=dt*et(2,St-1)*et(2,pt),mt=0));pt>=8;)ft[Tt++]=255&st,st/=256,pt-=8;for(mt=mt<<pt|st,yt+=pt;yt>0;)ft[Tt++]=255&mt,mt/=256,yt-=8;return ft[--Tt]|=128*Ut,ft},unpack:function(dt,pt){var lt,mt=dt.length,st=8*mt-pt-1,ut=(1<<st)-1,ft=ut>>1,yt=st-7,vt=mt-1,St=dt[vt--],xt=127&St;for(St>>=7;yt>0;)xt=256*xt+dt[vt--],yt-=8;for(lt=xt&(1<<-yt)-1,xt>>=-yt,yt+=pt;yt>0;)lt=256*lt+dt[vt--],yt-=8;if(xt===0)xt=1-ft;else{if(xt===ut)return lt?NaN:St?-1/0:1/0;lt+=et(2,pt),xt-=ft}return(St?-1:1)*lt*et(2,xt-pt)}}},8361:(rt,at,s)=>{var et=s(1702),nt=s(7293),ot=s(4326),ht=Object,dt=et("".split);rt.exports=nt(function(){return!ht("z").propertyIsEnumerable(0)})?function(pt){return ot(pt)=="String"?dt(pt,""):ht(pt)}:ht},9587:(rt,at,s)=>{var et=s(614),nt=s(111),ot=s(7674);rt.exports=function(ht,dt,pt){var lt,mt;return ot&&et(lt=dt.constructor)&&lt!==pt&&nt(mt=lt.prototype)&&mt!==pt.prototype&&ot(ht,mt),ht}},2788:(rt,at,s)=>{var et=s(1702),nt=s(614),ot=s(5465),ht=et(Function.toString);nt(ot.inspectSource)||(ot.inspectSource=function(dt){return ht(dt)}),rt.exports=ot.inspectSource},2423:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(3501),ht=s(111),dt=s(2597),pt=s(3070).f,lt=s(8006),mt=s(1156),st=s(2050),ut=s(9711),ft=s(6677),yt=!1,vt=ut("meta"),St=0,xt=function(Tt){pt(Tt,vt,{value:{objectID:"O"+St++,weakData:{}}})},Ut=rt.exports={enable:function(){Ut.enable=function(){},yt=!0;var Tt=lt.f,kt=nt([].splice),Dt={};Dt[vt]=1,Tt(Dt).length&&(lt.f=function(Vt){for(var Ot=Tt(Vt),Lt=0,Gt=Ot.length;Lt<Gt;Lt++)if(Ot[Lt]===vt){kt(Ot,Lt,1);break}return Ot},et({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:mt.f}))},fastKey:function(Tt,kt){if(!ht(Tt))return typeof Tt=="symbol"?Tt:(typeof Tt=="string"?"S":"P")+Tt;if(!dt(Tt,vt)){if(!st(Tt))return"F";if(!kt)return"E";xt(Tt)}return Tt[vt].objectID},getWeakData:function(Tt,kt){if(!dt(Tt,vt)){if(!st(Tt))return!0;if(!kt)return!1;xt(Tt)}return Tt[vt].weakData},onFreeze:function(Tt){return ft&&yt&&st(Tt)&&!dt(Tt,vt)&&xt(Tt),Tt}};ot[vt]=!0},9909:(rt,at,s)=>{var et,nt,ot,ht=s(8536),dt=s(7854),pt=s(1702),lt=s(111),mt=s(8880),st=s(2597),ut=s(5465),ft=s(6200),yt=s(3501),vt="Object already initialized",St=dt.TypeError,xt=dt.WeakMap;if(ht||ut.state){var Ut=ut.state||(ut.state=new xt),Tt=pt(Ut.get),kt=pt(Ut.has),Dt=pt(Ut.set);et=function(Ot,Lt){if(kt(Ut,Ot))throw new St(vt);return Lt.facade=Ot,Dt(Ut,Ot,Lt),Lt},nt=function(Ot){return Tt(Ut,Ot)||{}},ot=function(Ot){return kt(Ut,Ot)}}else{var Vt=ft("state");yt[Vt]=!0,et=function(Ot,Lt){if(st(Ot,Vt))throw new St(vt);return Lt.facade=Ot,mt(Ot,Vt,Lt),Lt},nt=function(Ot){return st(Ot,Vt)?Ot[Vt]:{}},ot=function(Ot){return st(Ot,Vt)}}rt.exports={set:et,get:nt,has:ot,enforce:function(Ot){return ot(Ot)?nt(Ot):et(Ot,{})},getterFor:function(Ot){return function(Lt){var Gt;if(!lt(Lt)||(Gt=nt(Lt)).type!==Ot)throw St("Incompatible receiver, "+Ot+" required");return Gt}}}},7659:(rt,at,s)=>{var et=s(5112),nt=s(7497),ot=et("iterator"),ht=Array.prototype;rt.exports=function(dt){return dt!==void 0&&(nt.Array===dt||ht[ot]===dt)}},3157:(rt,at,s)=>{var et=s(4326);rt.exports=Array.isArray||function(nt){return et(nt)=="Array"}},614:rt=>{rt.exports=function(at){return typeof at=="function"}},4411:(rt,at,s)=>{var et=s(1702),nt=s(7293),ot=s(614),ht=s(648),dt=s(5005),pt=s(2788),lt=function(){},mt=[],st=dt("Reflect","construct"),ut=/^\s*(?:class|function)\b/,ft=et(ut.exec),yt=!ut.exec(lt),vt=function(xt){if(!ot(xt))return!1;try{return st(lt,mt,xt),!0}catch{return!1}},St=function(xt){if(!ot(xt))return!1;switch(ht(xt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return yt||!!ft(ut,pt(xt))}catch{return!0}};St.sham=!0,rt.exports=!st||nt(function(){var xt;return vt(vt.call)||!vt(Object)||!vt(function(){xt=!0})||xt})?St:vt},5032:(rt,at,s)=>{var et=s(2597);rt.exports=function(nt){return nt!==void 0&&(et(nt,"value")||et(nt,"writable"))}},4705:(rt,at,s)=>{var et=s(7293),nt=s(614),ot=/#|\.prototype\./,ht=function(st,ut){var ft=pt[dt(st)];return ft==mt||ft!=lt&&(nt(ut)?et(ut):!!ut)},dt=ht.normalize=function(st){return String(st).replace(ot,".").toLowerCase()},pt=ht.data={},lt=ht.NATIVE="N",mt=ht.POLYFILL="P";rt.exports=ht},5988:(rt,at,s)=>{var et=s(111),nt=Math.floor;rt.exports=Number.isInteger||function(ot){return!et(ot)&&isFinite(ot)&&nt(ot)===ot}},111:(rt,at,s)=>{var et=s(614);rt.exports=function(nt){return typeof nt=="object"?nt!==null:et(nt)}},1913:rt=>{rt.exports=!1},7850:(rt,at,s)=>{var et=s(111),nt=s(4326),ot=s(5112)("match");rt.exports=function(ht){var dt;return et(ht)&&((dt=ht[ot])!==void 0?!!dt:nt(ht)=="RegExp")}},2190:(rt,at,s)=>{var et=s(5005),nt=s(614),ot=s(7976),ht=s(3307),dt=Object;rt.exports=ht?function(pt){return typeof pt=="symbol"}:function(pt){var lt=et("Symbol");return nt(lt)&&ot(lt.prototype,dt(pt))}},408:(rt,at,s)=>{var et=s(9974),nt=s(6916),ot=s(9670),ht=s(6330),dt=s(7659),pt=s(6244),lt=s(7976),mt=s(8554),st=s(1246),ut=s(9212),ft=TypeError,yt=function(St,xt){this.stopped=St,this.result=xt},vt=yt.prototype;rt.exports=function(St,xt,Ut){var Tt,kt,Dt,Vt,Ot,Lt,Gt,tn=Ut&&Ut.that,zt=!(!Ut||!Ut.AS_ENTRIES),cn=!(!Ut||!Ut.IS_RECORD),un=!(!Ut||!Ut.IS_ITERATOR),fn=!(!Ut||!Ut.INTERRUPTED),vn=et(xt,tn),Ft=function(gn){return Tt&&ut(Tt,"normal",gn),new yt(!0,gn)},pn=function(gn){return zt?(ot(gn),fn?vn(gn[0],gn[1],Ft):vn(gn[0],gn[1])):fn?vn(gn,Ft):vn(gn)};if(cn)Tt=St.iterator;else if(un)Tt=St;else{if(!(kt=st(St)))throw ft(ht(St)+" is not iterable");if(dt(kt)){for(Dt=0,Vt=pt(St);Vt>Dt;Dt++)if((Ot=pn(St[Dt]))&&lt(vt,Ot))return Ot;return new yt(!1)}Tt=mt(St,kt)}for(Lt=cn?St.next:Tt.next;!(Gt=nt(Lt,Tt)).done;){try{Ot=pn(Gt.value)}catch(gn){ut(Tt,"throw",gn)}if(typeof Ot=="object"&&Ot&&lt(vt,Ot))return Ot}return new yt(!1)}},9212:(rt,at,s)=>{var et=s(6916),nt=s(9670),ot=s(8173);rt.exports=function(ht,dt,pt){var lt,mt;nt(ht);try{if(!(lt=ot(ht,"return"))){if(dt==="throw")throw pt;return pt}lt=et(lt,ht)}catch(st){mt=!0,lt=st}if(dt==="throw")throw pt;if(mt)throw lt;return nt(lt),pt}},3383:(rt,at,s)=>{var et,nt,ot,ht=s(7293),dt=s(614),pt=s(30),lt=s(9518),mt=s(8052),st=s(5112),ut=s(1913),ft=st("iterator"),yt=!1;[].keys&&("next"in(ot=[].keys())?(nt=lt(lt(ot)))!==Object.prototype&&(et=nt):yt=!0),et==null||ht(function(){var vt={};return et[ft].call(vt)!==vt})?et={}:ut&&(et=pt(et)),dt(et[ft])||mt(et,ft,function(){return this}),rt.exports={IteratorPrototype:et,BUGGY_SAFARI_ITERATORS:yt}},7497:rt=>{rt.exports={}},6244:(rt,at,s)=>{var et=s(7466);rt.exports=function(nt){return et(nt.length)}},6339:(rt,at,s)=>{var et=s(7293),nt=s(614),ot=s(2597),ht=s(9781),dt=s(6530).CONFIGURABLE,pt=s(2788),lt=s(9909),mt=lt.enforce,st=lt.get,ut=Object.defineProperty,ft=ht&&!et(function(){return ut(function(){},"length",{value:8}).length!==8}),yt=String(String).split("String"),vt=rt.exports=function(St,xt,Ut){String(xt).slice(0,7)==="Symbol("&&(xt="["+String(xt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),Ut&&Ut.getter&&(xt="get "+xt),Ut&&Ut.setter&&(xt="set "+xt),(!ot(St,"name")||dt&&St.name!==xt)&&(ht?ut(St,"name",{value:xt,configurable:!0}):St.name=xt),ft&&Ut&&ot(Ut,"arity")&&St.length!==Ut.arity&&ut(St,"length",{value:Ut.arity});try{Ut&&ot(Ut,"constructor")&&Ut.constructor?ht&&ut(St,"prototype",{writable:!1}):St.prototype&&(St.prototype=void 0)}catch{}var Tt=mt(St);return ot(Tt,"source")||(Tt.source=yt.join(typeof xt=="string"?xt:"")),St};Function.prototype.toString=vt(function(){return nt(this)&&st(this).source||pt(this)},"toString")},403:rt=>{var at=Math.log,s=Math.LOG10E;rt.exports=Math.log10||function(et){return at(et)*s}},4758:rt=>{var at=Math.ceil,s=Math.floor;rt.exports=Math.trunc||function(et){var nt=+et;return(nt>0?s:at)(nt)}},5948:(rt,at,s)=>{var et,nt,ot,ht,dt,pt,lt,mt,st=s(7854),ut=s(9974),ft=s(1236).f,yt=s(261).set,vt=s(6833),St=s(1528),xt=s(1036),Ut=s(5268),Tt=st.MutationObserver||st.WebKitMutationObserver,kt=st.document,Dt=st.process,Vt=st.Promise,Ot=ft(st,"queueMicrotask"),Lt=Ot&&Ot.value;Lt||(et=function(){var Gt,tn;for(Ut&&(Gt=Dt.domain)&&Gt.exit();nt;){tn=nt.fn,nt=nt.next;try{tn()}catch(zt){throw nt?ht():ot=void 0,zt}}ot=void 0,Gt&&Gt.enter()},vt||Ut||xt||!Tt||!kt?!St&&Vt&&Vt.resolve?((lt=Vt.resolve(void 0)).constructor=Vt,mt=ut(lt.then,lt),ht=function(){mt(et)}):Ut?ht=function(){Dt.nextTick(et)}:(yt=ut(yt,st),ht=function(){yt(et)}):(dt=!0,pt=kt.createTextNode(""),new Tt(et).observe(pt,{characterData:!0}),ht=function(){pt.data=dt=!dt})),rt.exports=Lt||function(Gt){var tn={fn:Gt,next:void 0};ot&&(ot.next=tn),nt||(nt=tn,ht()),ot=tn}},735:(rt,at,s)=>{var et=s(133);rt.exports=et&&!!Symbol.for&&!!Symbol.keyFor},133:(rt,at,s)=>{var et=s(7392),nt=s(7293);rt.exports=!!Object.getOwnPropertySymbols&&!nt(function(){var ot=Symbol();return!String(ot)||!(Object(ot)instanceof Symbol)||!Symbol.sham&&et&&et<41})},590:(rt,at,s)=>{var et=s(7293),nt=s(5112),ot=s(1913),ht=nt("iterator");rt.exports=!et(function(){var dt=new URL("b?a=1&b=2&c=3","http://a"),pt=dt.searchParams,lt="";return dt.pathname="c%20d",pt.forEach(function(mt,st){pt.delete("b"),lt+=st+mt}),ot&&!dt.toJSON||!pt.sort||dt.href!=="http://a/c%20d?a=1&c=3"||pt.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!pt[ht]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||lt!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8536:(rt,at,s)=>{var et=s(7854),nt=s(614),ot=s(2788),ht=et.WeakMap;rt.exports=nt(ht)&&/native code/.test(ot(ht))},8523:(rt,at,s)=>{var et=s(9662),nt=function(ot){var ht,dt;this.promise=new ot(function(pt,lt){if(ht!==void 0||dt!==void 0)throw TypeError("Bad Promise constructor");ht=pt,dt=lt}),this.resolve=et(ht),this.reject=et(dt)};rt.exports.f=function(ot){return new nt(ot)}},3929:(rt,at,s)=>{var et=s(7850),nt=TypeError;rt.exports=function(ot){if(et(ot))throw nt("The method doesn't accept regular expressions");return ot}},3009:(rt,at,s)=>{var et=s(7854),nt=s(7293),ot=s(1702),ht=s(1340),dt=s(3111).trim,pt=s(1361),lt=et.parseInt,mt=et.Symbol,st=mt&&mt.iterator,ut=/^[+-]?0x/i,ft=ot(ut.exec),yt=lt(pt+"08")!==8||lt(pt+"0x16")!==22||st&&!nt(function(){lt(Object(st))});rt.exports=yt?function(vt,St){var xt=dt(ht(vt));return lt(xt,St>>>0||(ft(ut,xt)?16:10))}:lt},1574:(rt,at,s)=>{var et=s(9781),nt=s(1702),ot=s(6916),ht=s(7293),dt=s(1956),pt=s(5181),lt=s(5296),mt=s(7908),st=s(8361),ut=Object.assign,ft=Object.defineProperty,yt=nt([].concat);rt.exports=!ut||ht(function(){if(et&&ut({b:1},ut(ft({},"a",{enumerable:!0,get:function(){ft(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var vt={},St={},xt=Symbol(),Ut="abcdefghijklmnopqrst";return vt[xt]=7,Ut.split("").forEach(function(Tt){St[Tt]=Tt}),ut({},vt)[xt]!=7||dt(ut({},St)).join("")!=Ut})?function(vt,St){for(var xt=mt(vt),Ut=arguments.length,Tt=1,kt=pt.f,Dt=lt.f;Ut>Tt;)for(var Vt,Ot=st(arguments[Tt++]),Lt=kt?yt(dt(Ot),kt(Ot)):dt(Ot),Gt=Lt.length,tn=0;Gt>tn;)Vt=Lt[tn++],et&&!ot(Dt,Ot,Vt)||(xt[Vt]=Ot[Vt]);return xt}:ut},30:(rt,at,s)=>{var et,nt=s(9670),ot=s(6048),ht=s(748),dt=s(3501),pt=s(490),lt=s(317),mt=s(6200)("IE_PROTO"),st=function(){},ut=function(vt){return"<script>"+vt+"<\/script>"},ft=function(vt){vt.write(ut("")),vt.close();var St=vt.parentWindow.Object;return vt=null,St},yt=function(){try{et=new ActiveXObject("htmlfile")}catch{}var vt,St;yt=typeof document<"u"?document.domain&&et?ft(et):((St=lt("iframe")).style.display="none",pt.appendChild(St),St.src="javascript:",(vt=St.contentWindow.document).open(),vt.write(ut("document.F=Object")),vt.close(),vt.F):ft(et);for(var xt=ht.length;xt--;)delete yt.prototype[ht[xt]];return yt()};dt[mt]=!0,rt.exports=Object.create||function(vt,St){var xt;return vt!==null?(st.prototype=nt(vt),xt=new st,st.prototype=null,xt[mt]=vt):xt=yt(),St===void 0?xt:ot.f(xt,St)}},6048:(rt,at,s)=>{var et=s(9781),nt=s(3353),ot=s(3070),ht=s(9670),dt=s(5656),pt=s(1956);at.f=et&&!nt?Object.defineProperties:function(lt,mt){ht(lt);for(var st,ut=dt(mt),ft=pt(mt),yt=ft.length,vt=0;yt>vt;)ot.f(lt,st=ft[vt++],ut[st]);return lt}},3070:(rt,at,s)=>{var et=s(9781),nt=s(4664),ot=s(3353),ht=s(9670),dt=s(4948),pt=TypeError,lt=Object.defineProperty,mt=Object.getOwnPropertyDescriptor;at.f=et?ot?function(st,ut,ft){if(ht(st),ut=dt(ut),ht(ft),typeof st=="function"&&ut==="prototype"&&"value"in ft&&"writable"in ft&&!ft.writable){var yt=mt(st,ut);yt&&yt.writable&&(st[ut]=ft.value,ft={configurable:"configurable"in ft?ft.configurable:yt.configurable,enumerable:"enumerable"in ft?ft.enumerable:yt.enumerable,writable:!1})}return lt(st,ut,ft)}:lt:function(st,ut,ft){if(ht(st),ut=dt(ut),ht(ft),nt)try{return lt(st,ut,ft)}catch{}if("get"in ft||"set"in ft)throw pt("Accessors not supported");return"value"in ft&&(st[ut]=ft.value),st}},1236:(rt,at,s)=>{var et=s(9781),nt=s(6916),ot=s(5296),ht=s(9114),dt=s(5656),pt=s(4948),lt=s(2597),mt=s(4664),st=Object.getOwnPropertyDescriptor;at.f=et?st:function(ut,ft){if(ut=dt(ut),ft=pt(ft),mt)try{return st(ut,ft)}catch{}if(lt(ut,ft))return ht(!nt(ot.f,ut,ft),ut[ft])}},1156:(rt,at,s)=>{var et=s(4326),nt=s(5656),ot=s(8006).f,ht=s(1589),dt=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];rt.exports.f=function(pt){return dt&&et(pt)=="Window"?function(lt){try{return ot(lt)}catch{return ht(dt)}}(pt):ot(nt(pt))}},8006:(rt,at,s)=>{var et=s(6324),nt=s(748).concat("length","prototype");at.f=Object.getOwnPropertyNames||function(ot){return et(ot,nt)}},5181:(rt,at)=>{at.f=Object.getOwnPropertySymbols},9518:(rt,at,s)=>{var et=s(2597),nt=s(614),ot=s(7908),ht=s(6200),dt=s(8544),pt=ht("IE_PROTO"),lt=Object,mt=lt.prototype;rt.exports=dt?lt.getPrototypeOf:function(st){var ut=ot(st);if(et(ut,pt))return ut[pt];var ft=ut.constructor;return nt(ft)&&ut instanceof ft?ft.prototype:ut instanceof lt?mt:null}},2050:(rt,at,s)=>{var et=s(7293),nt=s(111),ot=s(4326),ht=s(7556),dt=Object.isExtensible,pt=et(function(){});rt.exports=pt||ht?function(lt){return!!nt(lt)&&(!ht||ot(lt)!="ArrayBuffer")&&(!dt||dt(lt))}:dt},7976:(rt,at,s)=>{var et=s(1702);rt.exports=et({}.isPrototypeOf)},6324:(rt,at,s)=>{var et=s(1702),nt=s(2597),ot=s(5656),ht=s(1318).indexOf,dt=s(3501),pt=et([].push);rt.exports=function(lt,mt){var st,ut=ot(lt),ft=0,yt=[];for(st in ut)!nt(dt,st)&&nt(ut,st)&&pt(yt,st);for(;mt.length>ft;)nt(ut,st=mt[ft++])&&(~ht(yt,st)||pt(yt,st));return yt}},1956:(rt,at,s)=>{var et=s(6324),nt=s(748);rt.exports=Object.keys||function(ot){return et(ot,nt)}},5296:(rt,at)=>{var s={}.propertyIsEnumerable,et=Object.getOwnPropertyDescriptor,nt=et&&!s.call({1:2},1);at.f=nt?function(ot){var ht=et(this,ot);return!!ht&&ht.enumerable}:s},7674:(rt,at,s)=>{var et=s(1702),nt=s(9670),ot=s(6077);rt.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var ht,dt=!1,pt={};try{(ht=et(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(pt,[]),dt=pt instanceof Array}catch{}return function(lt,mt){return nt(lt),ot(mt),dt?ht(lt,mt):lt.__proto__=mt,lt}}():void 0)},4699:(rt,at,s)=>{var et=s(9781),nt=s(1702),ot=s(1956),ht=s(5656),dt=nt(s(5296).f),pt=nt([].push),lt=function(mt){return function(st){for(var ut,ft=ht(st),yt=ot(ft),vt=yt.length,St=0,xt=[];vt>St;)ut=yt[St++],et&&!dt(ft,ut)||pt(xt,mt?[ut,ft[ut]]:ft[ut]);return xt}};rt.exports={entries:lt(!0),values:lt(!1)}},288:(rt,at,s)=>{var et=s(1694),nt=s(648);rt.exports=et?{}.toString:function(){return"[object "+nt(this)+"]"}},2140:(rt,at,s)=>{var et=s(6916),nt=s(614),ot=s(111),ht=TypeError;rt.exports=function(dt,pt){var lt,mt;if(pt==="string"&&nt(lt=dt.toString)&&!ot(mt=et(lt,dt))||nt(lt=dt.valueOf)&&!ot(mt=et(lt,dt))||pt!=="string"&&nt(lt=dt.toString)&&!ot(mt=et(lt,dt)))return mt;throw ht("Can't convert object to primitive value")}},3887:(rt,at,s)=>{var et=s(5005),nt=s(1702),ot=s(8006),ht=s(5181),dt=s(9670),pt=nt([].concat);rt.exports=et("Reflect","ownKeys")||function(lt){var mt=ot.f(dt(lt)),st=ht.f;return st?pt(mt,st(lt)):mt}},857:(rt,at,s)=>{var et=s(7854);rt.exports=et},2534:rt=>{rt.exports=function(at){try{return{error:!1,value:at()}}catch(s){return{error:!0,value:s}}}},3702:(rt,at,s)=>{var et=s(7854),nt=s(2492),ot=s(614),ht=s(4705),dt=s(2788),pt=s(5112),lt=s(7871),mt=s(1913),st=s(7392),ut=nt&&nt.prototype,ft=pt("species"),yt=!1,vt=ot(et.PromiseRejectionEvent),St=ht("Promise",function(){var xt=dt(nt),Ut=xt!==String(nt);if(!Ut&&st===66||mt&&(!ut.catch||!ut.finally))return!0;if(st>=51&&/native code/.test(xt))return!1;var Tt=new nt(function(Dt){Dt(1)}),kt=function(Dt){Dt(function(){},function(){})};return(Tt.constructor={})[ft]=kt,!(yt=Tt.then(function(){})instanceof kt)||!Ut&&lt&&!vt});rt.exports={CONSTRUCTOR:St,REJECTION_EVENT:vt,SUBCLASSING:yt}},2492:(rt,at,s)=>{var et=s(7854);rt.exports=et.Promise},9478:(rt,at,s)=>{var et=s(9670),nt=s(111),ot=s(8523);rt.exports=function(ht,dt){if(et(ht),nt(dt)&&dt.constructor===ht)return dt;var pt=ot.f(ht);return(0,pt.resolve)(dt),pt.promise}},612:(rt,at,s)=>{var et=s(2492),nt=s(7072),ot=s(3702).CONSTRUCTOR;rt.exports=ot||!nt(function(ht){et.all(ht).then(void 0,function(){})})},2626:(rt,at,s)=>{var et=s(3070).f;rt.exports=function(nt,ot,ht){ht in nt||et(nt,ht,{configurable:!0,get:function(){return ot[ht]},set:function(dt){ot[ht]=dt}})}},8572:rt=>{var at=function(){this.head=null,this.tail=null};at.prototype={add:function(s){var et={item:s,next:null};this.head?this.tail.next=et:this.head=et,this.tail=et},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}},rt.exports=at},7651:(rt,at,s)=>{var et=s(6916),nt=s(9670),ot=s(614),ht=s(4326),dt=s(2261),pt=TypeError;rt.exports=function(lt,mt){var st=lt.exec;if(ot(st)){var ut=et(st,lt,mt);return ut!==null&&nt(ut),ut}if(ht(lt)==="RegExp")return et(dt,lt,mt);throw pt("RegExp#exec called on incompatible receiver")}},2261:(rt,at,s)=>{var et,nt,ot=s(6916),ht=s(1702),dt=s(1340),pt=s(7066),lt=s(2999),mt=s(2309),st=s(30),ut=s(9909).get,ft=s(9441),yt=s(7168),vt=mt("native-string-replace",String.prototype.replace),St=RegExp.prototype.exec,xt=St,Ut=ht("".charAt),Tt=ht("".indexOf),kt=ht("".replace),Dt=ht("".slice),Vt=(nt=/b*/g,ot(St,et=/a/,"a"),ot(St,nt,"a"),et.lastIndex!==0||nt.lastIndex!==0),Ot=lt.BROKEN_CARET,Lt=/()??/.exec("")[1]!==void 0;(Vt||Lt||Ot||ft||yt)&&(xt=function(Gt){var tn,zt,cn,un,fn,vn,Ft,pn=this,gn=ut(pn),Tn=dt(Gt),In=gn.raw;if(In)return In.lastIndex=pn.lastIndex,tn=ot(xt,In,Tn),pn.lastIndex=In.lastIndex,tn;var kn=gn.groups,Nn=Ot&&pn.sticky,hn=ot(pt,pn),Sn=pn.source,Rn=0,wn=Tn;if(Nn&&(hn=kt(hn,"y",""),Tt(hn,"g")===-1&&(hn+="g"),wn=Dt(Tn,pn.lastIndex),pn.lastIndex>0&&(!pn.multiline||pn.multiline&&Ut(Tn,pn.lastIndex-1)!==`
`)&&(Sn="(?: "+Sn+")",wn=" "+wn,Rn++),zt=new RegExp("^(?:"+Sn+")",hn)),Lt&&(zt=new RegExp("^"+Sn+"$(?!\\s)",hn)),Vt&&(cn=pn.lastIndex),un=ot(St,Nn?zt:pn,wn),Nn?un?(un.input=Dt(un.input,Rn),un[0]=Dt(un[0],Rn),un.index=pn.lastIndex,pn.lastIndex+=un[0].length):pn.lastIndex=0:Vt&&un&&(pn.lastIndex=pn.global?un.index+un[0].length:cn),Lt&&un&&un.length>1&&ot(vt,un[0],zt,function(){for(fn=1;fn<arguments.length-2;fn++)arguments[fn]===void 0&&(un[fn]=void 0)}),un&&kn)for(un.groups=vn=st(null),fn=0;fn<kn.length;fn++)vn[(Ft=kn[fn])[0]]=un[Ft[1]];return un}),rt.exports=xt},7066:(rt,at,s)=>{var et=s(9670);rt.exports=function(){var nt=et(this),ot="";return nt.hasIndices&&(ot+="d"),nt.global&&(ot+="g"),nt.ignoreCase&&(ot+="i"),nt.multiline&&(ot+="m"),nt.dotAll&&(ot+="s"),nt.unicode&&(ot+="u"),nt.unicodeSets&&(ot+="v"),nt.sticky&&(ot+="y"),ot}},4706:(rt,at,s)=>{var et=s(6916),nt=s(2597),ot=s(7976),ht=s(7066),dt=RegExp.prototype;rt.exports=function(pt){var lt=pt.flags;return lt!==void 0||"flags"in dt||nt(pt,"flags")||!ot(dt,pt)?lt:et(ht,pt)}},2999:(rt,at,s)=>{var et=s(7293),nt=s(7854).RegExp,ot=et(function(){var pt=nt("a","y");return pt.lastIndex=2,pt.exec("abcd")!=null}),ht=ot||et(function(){return!nt("a","y").sticky}),dt=ot||et(function(){var pt=nt("^r","gy");return pt.lastIndex=2,pt.exec("str")!=null});rt.exports={BROKEN_CARET:dt,MISSED_STICKY:ht,UNSUPPORTED_Y:ot}},9441:(rt,at,s)=>{var et=s(7293),nt=s(7854).RegExp;rt.exports=et(function(){var ot=nt(".","s");return!(ot.dotAll&&ot.exec(`
`)&&ot.flags==="s")})},7168:(rt,at,s)=>{var et=s(7293),nt=s(7854).RegExp;rt.exports=et(function(){var ot=nt("(?<a>b)","g");return ot.exec("b").groups.a!=="b"||"b".replace(ot,"$<a>c")!=="bc"})},4488:rt=>{var at=TypeError;rt.exports=function(s){if(s==null)throw at("Can't call method on "+s);return s}},1150:rt=>{rt.exports=Object.is||function(at,s){return at===s?at!==0||1/at==1/s:at!=at&&s!=s}},7152:(rt,at,s)=>{var et=s(7854),nt=s(2104),ot=s(614),ht=s(8113),dt=s(206),pt=s(8053),lt=/MSIE .\./.test(ht),mt=et.Function,st=function(ut){return lt?function(ft,yt){var vt=pt(arguments.length,1)>2,St=ot(ft)?ft:mt(ft),xt=vt?dt(arguments,2):void 0;return ut(vt?function(){nt(St,this,xt)}:St,yt)}:ut};rt.exports={setTimeout:st(et.setTimeout),setInterval:st(et.setInterval)}},6340:(rt,at,s)=>{var et=s(5005),nt=s(3070),ot=s(5112),ht=s(9781),dt=ot("species");rt.exports=function(pt){var lt=et(pt),mt=nt.f;ht&&lt&&!lt[dt]&&mt(lt,dt,{configurable:!0,get:function(){return this}})}},8003:(rt,at,s)=>{var et=s(3070).f,nt=s(2597),ot=s(5112)("toStringTag");rt.exports=function(ht,dt,pt){ht&&!pt&&(ht=ht.prototype),ht&&!nt(ht,ot)&&et(ht,ot,{configurable:!0,value:dt})}},6200:(rt,at,s)=>{var et=s(2309),nt=s(9711),ot=et("keys");rt.exports=function(ht){return ot[ht]||(ot[ht]=nt(ht))}},5465:(rt,at,s)=>{var et=s(7854),nt=s(3072),ot="__core-js_shared__",ht=et[ot]||nt(ot,{});rt.exports=ht},2309:(rt,at,s)=>{var et=s(1913),nt=s(5465);(rt.exports=function(ot,ht){return nt[ot]||(nt[ot]=ht!==void 0?ht:{})})("versions",[]).push({version:"3.23.4",mode:et?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(rt,at,s)=>{var et=s(9670),nt=s(9483),ot=s(5112)("species");rt.exports=function(ht,dt){var pt,lt=et(ht).constructor;return lt===void 0||(pt=et(lt)[ot])==null?dt:nt(pt)}},8710:(rt,at,s)=>{var et=s(1702),nt=s(9303),ot=s(1340),ht=s(4488),dt=et("".charAt),pt=et("".charCodeAt),lt=et("".slice),mt=function(st){return function(ut,ft){var yt,vt,St=ot(ht(ut)),xt=nt(ft),Ut=St.length;return xt<0||xt>=Ut?st?"":void 0:(yt=pt(St,xt))<55296||yt>56319||xt+1===Ut||(vt=pt(St,xt+1))<56320||vt>57343?st?dt(St,xt):yt:st?lt(St,xt,xt+2):vt-56320+(yt-55296<<10)+65536}};rt.exports={codeAt:mt(!1),charAt:mt(!0)}},6650:(rt,at,s)=>{var et=s(1702),nt=s(7466),ot=s(1340),ht=s(8415),dt=s(4488),pt=et(ht),lt=et("".slice),mt=Math.ceil,st=function(ut){return function(ft,yt,vt){var St,xt,Ut=ot(dt(ft)),Tt=nt(yt),kt=Ut.length,Dt=vt===void 0?" ":ot(vt);return Tt<=kt||Dt==""?Ut:((xt=pt(Dt,mt((St=Tt-kt)/Dt.length))).length>St&&(xt=lt(xt,0,St)),ut?Ut+xt:xt+Ut)}};rt.exports={start:st(!1),end:st(!0)}},3197:(rt,at,s)=>{var et=s(1702),nt=2147483647,ot=/[^\0-\u007E]/,ht=/[.\u3002\uFF0E\uFF61]/g,dt="Overflow: input needs wider integers to process",pt=RangeError,lt=et(ht.exec),mt=Math.floor,st=String.fromCharCode,ut=et("".charCodeAt),ft=et([].join),yt=et([].push),vt=et("".replace),St=et("".split),xt=et("".toLowerCase),Ut=function(Dt){return Dt+22+75*(Dt<26)},Tt=function(Dt,Vt,Ot){var Lt=0;for(Dt=Ot?mt(Dt/700):Dt>>1,Dt+=mt(Dt/Vt);Dt>455;)Dt=mt(Dt/35),Lt+=36;return mt(Lt+36*Dt/(Dt+38))},kt=function(Dt){var Vt=[];Dt=function(Nn){for(var hn=[],Sn=0,Rn=Nn.length;Sn<Rn;){var wn=ut(Nn,Sn++);if(wn>=55296&&wn<=56319&&Sn<Rn){var xn=ut(Nn,Sn++);(64512&xn)==56320?yt(hn,((1023&wn)<<10)+(1023&xn)+65536):(yt(hn,wn),Sn--)}else yt(hn,wn)}return hn}(Dt);var Ot,Lt,Gt=Dt.length,tn=128,zt=0,cn=72;for(Ot=0;Ot<Dt.length;Ot++)(Lt=Dt[Ot])<128&&yt(Vt,st(Lt));var un=Vt.length,fn=un;for(un&&yt(Vt,"-");fn<Gt;){var vn=nt;for(Ot=0;Ot<Dt.length;Ot++)(Lt=Dt[Ot])>=tn&&Lt<vn&&(vn=Lt);var Ft=fn+1;if(vn-tn>mt((nt-zt)/Ft))throw pt(dt);for(zt+=(vn-tn)*Ft,tn=vn,Ot=0;Ot<Dt.length;Ot++){if((Lt=Dt[Ot])<tn&&++zt>nt)throw pt(dt);if(Lt==tn){for(var pn=zt,gn=36;;){var Tn=gn<=cn?1:gn>=cn+26?26:gn-cn;if(pn<Tn)break;var In=pn-Tn,kn=36-Tn;yt(Vt,st(Ut(Tn+In%kn))),pn=mt(In/kn),gn+=36}yt(Vt,st(Ut(pn))),cn=Tt(zt,Ft,fn==un),zt=0,fn++}}zt++,tn++}return ft(Vt,"")};rt.exports=function(Dt){var Vt,Ot,Lt=[],Gt=St(vt(xt(Dt),ht,"."),".");for(Vt=0;Vt<Gt.length;Vt++)Ot=Gt[Vt],yt(Lt,lt(ot,Ot)?"xn--"+kt(Ot):Ot);return ft(Lt,".")}},8415:(rt,at,s)=>{var et=s(9303),nt=s(1340),ot=s(4488),ht=RangeError;rt.exports=function(dt){var pt=nt(ot(this)),lt="",mt=et(dt);if(mt<0||mt==1/0)throw ht("Wrong number of repetitions");for(;mt>0;(mt>>>=1)&&(pt+=pt))1&mt&&(lt+=pt);return lt}},3111:(rt,at,s)=>{var et=s(1702),nt=s(4488),ot=s(1340),ht=s(1361),dt=et("".replace),pt="["+ht+"]",lt=RegExp("^"+pt+pt+"*"),mt=RegExp(pt+pt+"*$"),st=function(ut){return function(ft){var yt=ot(nt(ft));return 1&ut&&(yt=dt(yt,lt,"")),2&ut&&(yt=dt(yt,mt,"")),yt}};rt.exports={start:st(1),end:st(2),trim:st(3)}},6532:(rt,at,s)=>{var et=s(6916),nt=s(5005),ot=s(5112),ht=s(8052);rt.exports=function(){var dt=nt("Symbol"),pt=dt&&dt.prototype,lt=pt&&pt.valueOf,mt=ot("toPrimitive");pt&&!pt[mt]&&ht(pt,mt,function(st){return et(lt,this)},{arity:1})}},261:(rt,at,s)=>{var et,nt,ot,ht,dt=s(7854),pt=s(2104),lt=s(9974),mt=s(614),st=s(2597),ut=s(7293),ft=s(490),yt=s(206),vt=s(317),St=s(8053),xt=s(6833),Ut=s(5268),Tt=dt.setImmediate,kt=dt.clearImmediate,Dt=dt.process,Vt=dt.Dispatch,Ot=dt.Function,Lt=dt.MessageChannel,Gt=dt.String,tn=0,zt={};try{et=dt.location}catch{}var cn=function(Ft){if(st(zt,Ft)){var pn=zt[Ft];delete zt[Ft],pn()}},un=function(Ft){return function(){cn(Ft)}},fn=function(Ft){cn(Ft.data)},vn=function(Ft){dt.postMessage(Gt(Ft),et.protocol+"//"+et.host)};Tt&&kt||(Tt=function(Ft){St(arguments.length,1);var pn=mt(Ft)?Ft:Ot(Ft),gn=yt(arguments,1);return zt[++tn]=function(){pt(pn,void 0,gn)},nt(tn),tn},kt=function(Ft){delete zt[Ft]},Ut?nt=function(Ft){Dt.nextTick(un(Ft))}:Vt&&Vt.now?nt=function(Ft){Vt.now(un(Ft))}:Lt&&!xt?(ht=(ot=new Lt).port2,ot.port1.onmessage=fn,nt=lt(ht.postMessage,ht)):dt.addEventListener&&mt(dt.postMessage)&&!dt.importScripts&&et&&et.protocol!=="file:"&&!ut(vn)?(nt=vn,dt.addEventListener("message",fn,!1)):nt="onreadystatechange"in vt("script")?function(Ft){ft.appendChild(vt("script")).onreadystatechange=function(){ft.removeChild(this),cn(Ft)}}:function(Ft){setTimeout(un(Ft),0)}),rt.exports={set:Tt,clear:kt}},863:(rt,at,s)=>{var et=s(1702);rt.exports=et(1 .valueOf)},1400:(rt,at,s)=>{var et=s(9303),nt=Math.max,ot=Math.min;rt.exports=function(ht,dt){var pt=et(ht);return pt<0?nt(pt+dt,0):ot(pt,dt)}},4599:(rt,at,s)=>{var et=s(7593),nt=TypeError;rt.exports=function(ot){var ht=et(ot,"number");if(typeof ht=="number")throw nt("Can't convert number to bigint");return BigInt(ht)}},7067:(rt,at,s)=>{var et=s(9303),nt=s(7466),ot=RangeError;rt.exports=function(ht){if(ht===void 0)return 0;var dt=et(ht),pt=nt(dt);if(dt!==pt)throw ot("Wrong length or index");return pt}},5656:(rt,at,s)=>{var et=s(8361),nt=s(4488);rt.exports=function(ot){return et(nt(ot))}},9303:(rt,at,s)=>{var et=s(4758);rt.exports=function(nt){var ot=+nt;return ot!=ot||ot===0?0:et(ot)}},7466:(rt,at,s)=>{var et=s(9303),nt=Math.min;rt.exports=function(ot){return ot>0?nt(et(ot),9007199254740991):0}},7908:(rt,at,s)=>{var et=s(4488),nt=Object;rt.exports=function(ot){return nt(et(ot))}},4590:(rt,at,s)=>{var et=s(3002),nt=RangeError;rt.exports=function(ot,ht){var dt=et(ot);if(dt%ht)throw nt("Wrong offset");return dt}},3002:(rt,at,s)=>{var et=s(9303),nt=RangeError;rt.exports=function(ot){var ht=et(ot);if(ht<0)throw nt("The argument can't be less than 0");return ht}},7593:(rt,at,s)=>{var et=s(6916),nt=s(111),ot=s(2190),ht=s(8173),dt=s(2140),pt=s(5112),lt=TypeError,mt=pt("toPrimitive");rt.exports=function(st,ut){if(!nt(st)||ot(st))return st;var ft,yt=ht(st,mt);if(yt){if(ut===void 0&&(ut="default"),ft=et(yt,st,ut),!nt(ft)||ot(ft))return ft;throw lt("Can't convert object to primitive value")}return ut===void 0&&(ut="number"),dt(st,ut)}},4948:(rt,at,s)=>{var et=s(7593),nt=s(2190);rt.exports=function(ot){var ht=et(ot,"string");return nt(ht)?ht:ht+""}},1694:(rt,at,s)=>{var et={};et[s(5112)("toStringTag")]="z",rt.exports=String(et)==="[object z]"},1340:(rt,at,s)=>{var et=s(648),nt=String;rt.exports=function(ot){if(et(ot)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return nt(ot)}},6330:rt=>{var at=String;rt.exports=function(s){try{return at(s)}catch{return"Object"}}},9843:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(6916),ht=s(9781),dt=s(3832),pt=s(260),lt=s(3331),mt=s(5787),st=s(9114),ut=s(8880),ft=s(5988),yt=s(7466),vt=s(7067),St=s(4590),xt=s(4948),Ut=s(2597),Tt=s(648),kt=s(111),Dt=s(2190),Vt=s(30),Ot=s(7976),Lt=s(7674),Gt=s(8006).f,tn=s(7321),zt=s(2092).forEach,cn=s(6340),un=s(3070),fn=s(1236),vn=s(9909),Ft=s(9587),pn=vn.get,gn=vn.set,Tn=vn.enforce,In=un.f,kn=fn.f,Nn=Math.round,hn=nt.RangeError,Sn=lt.ArrayBuffer,Rn=Sn.prototype,wn=lt.DataView,xn=pt.NATIVE_ARRAY_BUFFER_VIEWS,Xn=pt.TYPED_ARRAY_TAG,Ln=pt.TypedArray,Un=pt.TypedArrayPrototype,rr=pt.aTypedArrayConstructor,tr=pt.isTypedArray,Qn="BYTES_PER_ELEMENT",jn="Wrong length",Bn=function(On,Pn){rr(On);for(var Vn=0,ir=Pn.length,Mn=new On(ir);ir>Vn;)Mn[Vn]=Pn[Vn++];return Mn},an=function(On,Pn){In(On,Pn,{get:function(){return pn(this)[Pn]}})},zn=function(On){var Pn;return Ot(Rn,On)||(Pn=Tt(On))=="ArrayBuffer"||Pn=="SharedArrayBuffer"},Kn=function(On,Pn){return tr(On)&&!Dt(Pn)&&Pn in On&&ft(+Pn)&&Pn>=0},An=function(On,Pn){return Pn=xt(Pn),Kn(On,Pn)?st(2,On[Pn]):kn(On,Pn)},_n=function(On,Pn,Vn){return Pn=xt(Pn),!(Kn(On,Pn)&&kt(Vn)&&Ut(Vn,"value"))||Ut(Vn,"get")||Ut(Vn,"set")||Vn.configurable||Ut(Vn,"writable")&&!Vn.writable||Ut(Vn,"enumerable")&&!Vn.enumerable?In(On,Pn,Vn):(On[Pn]=Vn.value,On)};ht?(xn||(fn.f=An,un.f=_n,an(Un,"buffer"),an(Un,"byteOffset"),an(Un,"byteLength"),an(Un,"length")),et({target:"Object",stat:!0,forced:!xn},{getOwnPropertyDescriptor:An,defineProperty:_n}),rt.exports=function(On,Pn,Vn){var ir=On.match(/\d+$/)[0]/8,Mn=On+(Vn?"Clamped":"")+"Array",$n="get"+On,Kt="set"+On,At=nt[Mn],it=At,Rt=it&&it.prototype,bt={},wt=function(Mt,Nt){In(Mt,Nt,{get:function(){return function(Yt,Qt){var on=pn(Yt);return on.view[$n](Qt*ir+on.byteOffset,!0)}(this,Nt)},set:function(Yt){return function(Qt,on,nn){var dn=pn(Qt);Vn&&(nn=(nn=Nn(nn))<0?0:nn>255?255:255&nn),dn.view[Kt](on*ir+dn.byteOffset,nn,!0)}(this,Nt,Yt)},enumerable:!0})};xn?dt&&(it=Pn(function(Mt,Nt,Yt,Qt){return mt(Mt,Rt),Ft(kt(Nt)?zn(Nt)?Qt!==void 0?new At(Nt,St(Yt,ir),Qt):Yt!==void 0?new At(Nt,St(Yt,ir)):new At(Nt):tr(Nt)?Bn(it,Nt):ot(tn,it,Nt):new At(vt(Nt)),Mt,it)}),Lt&&Lt(it,Ln),zt(Gt(At),function(Mt){Mt in it||ut(it,Mt,At[Mt])}),it.prototype=Rt):(it=Pn(function(Mt,Nt,Yt,Qt){mt(Mt,Rt);var on,nn,dn,yn=0,mn=0;if(kt(Nt)){if(!zn(Nt))return tr(Nt)?Bn(it,Nt):ot(tn,it,Nt);on=Nt,mn=St(Yt,ir);var Cn=Nt.byteLength;if(Qt===void 0){if(Cn%ir||(nn=Cn-mn)<0)throw hn(jn)}else if((nn=yt(Qt)*ir)+mn>Cn)throw hn(jn);dn=nn/ir}else dn=vt(Nt),on=new Sn(nn=dn*ir);for(gn(Mt,{buffer:on,byteOffset:mn,byteLength:nn,length:dn,view:new wn(on)});yn<dn;)wt(Mt,yn++)}),Lt&&Lt(it,Ln),Rt=it.prototype=Vt(Un)),Rt.constructor!==it&&ut(Rt,"constructor",it),Tn(Rt).TypedArrayConstructor=it,Xn&&ut(Rt,Xn,Mn);var Et=it!=At;bt[Mn]=it,et({global:!0,constructor:!0,forced:Et,sham:!xn},bt),Qn in it||ut(it,Qn,ir),Qn in Rt||ut(Rt,Qn,ir),cn(Mn)}):rt.exports=function(){}},3832:(rt,at,s)=>{var et=s(7854),nt=s(7293),ot=s(7072),ht=s(260).NATIVE_ARRAY_BUFFER_VIEWS,dt=et.ArrayBuffer,pt=et.Int8Array;rt.exports=!ht||!nt(function(){pt(1)})||!nt(function(){new pt(-1)})||!ot(function(lt){new pt,new pt(null),new pt(1.5),new pt(lt)},!0)||nt(function(){return new pt(new dt(2),1,void 0).length!==1})},3074:(rt,at,s)=>{var et=s(7745),nt=s(6304);rt.exports=function(ot,ht){return et(nt(ot),ht)}},7321:(rt,at,s)=>{var et=s(9974),nt=s(6916),ot=s(9483),ht=s(7908),dt=s(6244),pt=s(8554),lt=s(1246),mt=s(7659),st=s(260).aTypedArrayConstructor;rt.exports=function(ut){var ft,yt,vt,St,xt,Ut,Tt=ot(this),kt=ht(ut),Dt=arguments.length,Vt=Dt>1?arguments[1]:void 0,Ot=Vt!==void 0,Lt=lt(kt);if(Lt&&!mt(Lt))for(Ut=(xt=pt(kt,Lt)).next,kt=[];!(St=nt(Ut,xt)).done;)kt.push(St.value);for(Ot&&Dt>2&&(Vt=et(Vt,arguments[2])),yt=dt(kt),vt=new(st(Tt))(yt),ft=0;yt>ft;ft++)vt[ft]=Ot?Vt(kt[ft],ft):kt[ft];return vt}},6304:(rt,at,s)=>{var et=s(260),nt=s(6707),ot=et.aTypedArrayConstructor,ht=et.getTypedArrayConstructor;rt.exports=function(dt){return ot(nt(dt,ht(dt)))}},9711:(rt,at,s)=>{var et=s(1702),nt=0,ot=Math.random(),ht=et(1 .toString);rt.exports=function(dt){return"Symbol("+(dt===void 0?"":dt)+")_"+ht(++nt+ot,36)}},3307:(rt,at,s)=>{var et=s(133);rt.exports=et&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(rt,at,s)=>{var et=s(9781),nt=s(7293);rt.exports=et&&nt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:rt=>{var at=TypeError;rt.exports=function(s,et){if(s<et)throw at("Not enough arguments");return s}},6061:(rt,at,s)=>{var et=s(5112);at.f=et},5112:(rt,at,s)=>{var et=s(7854),nt=s(2309),ot=s(2597),ht=s(9711),dt=s(133),pt=s(3307),lt=nt("wks"),mt=et.Symbol,st=mt&&mt.for,ut=pt?mt:mt&&mt.withoutSetter||ht;rt.exports=function(ft){if(!ot(lt,ft)||!dt&&typeof lt[ft]!="string"){var yt="Symbol."+ft;dt&&ot(mt,ft)?lt[ft]=mt[ft]:lt[ft]=pt&&st?st(yt):ut(yt)}return lt[ft]}},1361:rt=>{rt.exports=`	
\v\f\r \u2028\u2029\uFEFF`},8264:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(3331),ht=s(6340),dt=ot.ArrayBuffer;et({global:!0,constructor:!0,forced:nt.ArrayBuffer!==dt},{ArrayBuffer:dt}),ht("ArrayBuffer")},9575:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(7293),ht=s(3331),dt=s(9670),pt=s(1400),lt=s(7466),mt=s(6707),st=ht.ArrayBuffer,ut=ht.DataView,ft=ut.prototype,yt=nt(st.prototype.slice),vt=nt(ft.getUint8),St=nt(ft.setUint8);et({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:ot(function(){return!new st(2).slice(1,void 0).byteLength})},{slice:function(xt,Ut){if(yt&&Ut===void 0)return yt(dt(this),xt);for(var Tt=dt(this).byteLength,kt=pt(xt,Tt),Dt=pt(Ut===void 0?Tt:Ut,Tt),Vt=new(mt(this,st))(lt(Dt-kt)),Ot=new ut(this),Lt=new ut(Vt),Gt=0;kt<Dt;)St(Lt,Gt++,vt(Ot,kt++));return Vt}})},2222:(rt,at,s)=>{var et=s(2109),nt=s(7293),ot=s(3157),ht=s(111),dt=s(7908),pt=s(6244),lt=s(7207),mt=s(6135),st=s(5417),ut=s(1194),ft=s(5112),yt=s(7392),vt=ft("isConcatSpreadable"),St=yt>=51||!nt(function(){var Tt=[];return Tt[vt]=!1,Tt.concat()[0]!==Tt}),xt=ut("concat"),Ut=function(Tt){if(!ht(Tt))return!1;var kt=Tt[vt];return kt!==void 0?!!kt:ot(Tt)};et({target:"Array",proto:!0,arity:1,forced:!St||!xt},{concat:function(Tt){var kt,Dt,Vt,Ot,Lt,Gt=dt(this),tn=st(Gt,0),zt=0;for(kt=-1,Vt=arguments.length;kt<Vt;kt++)if(Ut(Lt=kt===-1?Gt:arguments[kt]))for(Ot=pt(Lt),lt(zt+Ot),Dt=0;Dt<Ot;Dt++,zt++)Dt in Lt&&mt(tn,zt,Lt[Dt]);else lt(zt+1),mt(tn,zt++,Lt);return tn.length=zt,tn}})},3290:(rt,at,s)=>{var et=s(2109),nt=s(1285),ot=s(1223);et({target:"Array",proto:!0},{fill:nt}),ot("fill")},7327:(rt,at,s)=>{var et=s(2109),nt=s(2092).filter;et({target:"Array",proto:!0,forced:!s(1194)("filter")},{filter:function(ot){return nt(this,ot,arguments.length>1?arguments[1]:void 0)}})},4553:(rt,at,s)=>{var et=s(2109),nt=s(2092).findIndex,ot=s(1223),ht="findIndex",dt=!0;ht in[]&&Array(1).findIndex(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{findIndex:function(pt){return nt(this,pt,arguments.length>1?arguments[1]:void 0)}}),ot(ht)},9826:(rt,at,s)=>{var et=s(2109),nt=s(2092).find,ot=s(1223),ht="find",dt=!0;ht in[]&&Array(1).find(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{find:function(pt){return nt(this,pt,arguments.length>1?arguments[1]:void 0)}}),ot(ht)},9554:(rt,at,s)=>{var et=s(2109),nt=s(8533);et({target:"Array",proto:!0,forced:[].forEach!=nt},{forEach:nt})},1038:(rt,at,s)=>{var et=s(2109),nt=s(8457);et({target:"Array",stat:!0,forced:!s(7072)(function(ot){Array.from(ot)})},{from:nt})},6699:(rt,at,s)=>{var et=s(2109),nt=s(1318).includes,ot=s(7293),ht=s(1223);et({target:"Array",proto:!0,forced:ot(function(){return!Array(1).includes()})},{includes:function(dt){return nt(this,dt,arguments.length>1?arguments[1]:void 0)}}),ht("includes")},2772:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(1318).indexOf,ht=s(9341),dt=nt([].indexOf),pt=!!dt&&1/dt([1],1,-0)<0,lt=ht("indexOf");et({target:"Array",proto:!0,forced:pt||!lt},{indexOf:function(mt){var st=arguments.length>1?arguments[1]:void 0;return pt?dt(this,mt,st)||0:ot(this,mt,st)}})},9753:(rt,at,s)=>{s(2109)({target:"Array",stat:!0},{isArray:s(3157)})},6992:(rt,at,s)=>{var et=s(5656),nt=s(1223),ot=s(7497),ht=s(9909),dt=s(3070).f,pt=s(654),lt=s(1913),mt=s(9781),st="Array Iterator",ut=ht.set,ft=ht.getterFor(st);rt.exports=pt(Array,"Array",function(vt,St){ut(this,{type:st,target:et(vt),index:0,kind:St})},function(){var vt=ft(this),St=vt.target,xt=vt.kind,Ut=vt.index++;return!St||Ut>=St.length?(vt.target=void 0,{value:void 0,done:!0}):xt=="keys"?{value:Ut,done:!1}:xt=="values"?{value:St[Ut],done:!1}:{value:[Ut,St[Ut]],done:!1}},"values");var yt=ot.Arguments=ot.Array;if(nt("keys"),nt("values"),nt("entries"),!lt&&mt&&yt.name!=="values")try{dt(yt,"name",{value:"values"})}catch{}},9600:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(8361),ht=s(5656),dt=s(9341),pt=nt([].join),lt=ot!=Object,mt=dt("join",",");et({target:"Array",proto:!0,forced:lt||!mt},{join:function(st){return pt(ht(this),st===void 0?",":st)}})},4986:(rt,at,s)=>{var et=s(2109),nt=s(6583);et({target:"Array",proto:!0,forced:nt!==[].lastIndexOf},{lastIndexOf:nt})},1249:(rt,at,s)=>{var et=s(2109),nt=s(2092).map;et({target:"Array",proto:!0,forced:!s(1194)("map")},{map:function(ot){return nt(this,ot,arguments.length>1?arguments[1]:void 0)}})},7042:(rt,at,s)=>{var et=s(2109),nt=s(3157),ot=s(4411),ht=s(111),dt=s(1400),pt=s(6244),lt=s(5656),mt=s(6135),st=s(5112),ut=s(1194),ft=s(206),yt=ut("slice"),vt=st("species"),St=Array,xt=Math.max;et({target:"Array",proto:!0,forced:!yt},{slice:function(Ut,Tt){var kt,Dt,Vt,Ot=lt(this),Lt=pt(Ot),Gt=dt(Ut,Lt),tn=dt(Tt===void 0?Lt:Tt,Lt);if(nt(Ot)&&(kt=Ot.constructor,(ot(kt)&&(kt===St||nt(kt.prototype))||ht(kt)&&(kt=kt[vt])===null)&&(kt=void 0),kt===St||kt===void 0))return ft(Ot,Gt,tn);for(Dt=new(kt===void 0?St:kt)(xt(tn-Gt,0)),Vt=0;Gt<tn;Gt++,Vt++)Gt in Ot&&mt(Dt,Vt,Ot[Gt]);return Dt.length=Vt,Dt}})},2707:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(9662),ht=s(7908),dt=s(6244),pt=s(5117),lt=s(1340),mt=s(7293),st=s(4362),ut=s(9341),ft=s(8886),yt=s(256),vt=s(7392),St=s(8008),xt=[],Ut=nt(xt.sort),Tt=nt(xt.push),kt=mt(function(){xt.sort(void 0)}),Dt=mt(function(){xt.sort(null)}),Vt=ut("sort"),Ot=!mt(function(){if(vt)return vt<70;if(!(ft&&ft>3)){if(yt)return!0;if(St)return St<603;var Lt,Gt,tn,zt,cn="";for(Lt=65;Lt<76;Lt++){switch(Gt=String.fromCharCode(Lt),Lt){case 66:case 69:case 70:case 72:tn=3;break;case 68:case 71:tn=4;break;default:tn=2}for(zt=0;zt<47;zt++)xt.push({k:Gt+zt,v:tn})}for(xt.sort(function(un,fn){return fn.v-un.v}),zt=0;zt<xt.length;zt++)Gt=xt[zt].k.charAt(0),cn.charAt(cn.length-1)!==Gt&&(cn+=Gt);return cn!=="DGBEFHACIJK"}});et({target:"Array",proto:!0,forced:kt||!Dt||!Vt||!Ot},{sort:function(Lt){Lt!==void 0&&ot(Lt);var Gt=ht(this);if(Ot)return Lt===void 0?Ut(Gt):Ut(Gt,Lt);var tn,zt,cn=[],un=dt(Gt);for(zt=0;zt<un;zt++)zt in Gt&&Tt(cn,Gt[zt]);for(st(cn,function(fn){return function(vn,Ft){return Ft===void 0?-1:vn===void 0?1:fn!==void 0?+fn(vn,Ft)||0:lt(vn)>lt(Ft)?1:-1}}(Lt)),tn=cn.length,zt=0;zt<tn;)Gt[zt]=cn[zt++];for(;zt<un;)pt(Gt,zt++);return Gt}})},561:(rt,at,s)=>{var et=s(2109),nt=s(7908),ot=s(1400),ht=s(9303),dt=s(6244),pt=s(7207),lt=s(5417),mt=s(6135),st=s(5117),ut=s(1194)("splice"),ft=Math.max,yt=Math.min;et({target:"Array",proto:!0,forced:!ut},{splice:function(vt,St){var xt,Ut,Tt,kt,Dt,Vt,Ot=nt(this),Lt=dt(Ot),Gt=ot(vt,Lt),tn=arguments.length;for(tn===0?xt=Ut=0:tn===1?(xt=0,Ut=Lt-Gt):(xt=tn-2,Ut=yt(ft(ht(St),0),Lt-Gt)),pt(Lt+xt-Ut),Tt=lt(Ot,Ut),kt=0;kt<Ut;kt++)(Dt=Gt+kt)in Ot&&mt(Tt,kt,Ot[Dt]);if(Tt.length=Ut,xt<Ut){for(kt=Gt;kt<Lt-Ut;kt++)Vt=kt+xt,(Dt=kt+Ut)in Ot?Ot[Vt]=Ot[Dt]:st(Ot,Vt);for(kt=Lt;kt>Lt-Ut+xt;kt--)st(Ot,kt-1)}else if(xt>Ut)for(kt=Lt-Ut;kt>Gt;kt--)Vt=kt+xt-1,(Dt=kt+Ut-1)in Ot?Ot[Vt]=Ot[Dt]:st(Ot,Vt);for(kt=0;kt<xt;kt++)Ot[kt+Gt]=arguments[kt+2];return Ot.length=Lt-Ut+xt,Tt}})},3690:(rt,at,s)=>{var et=s(2109),nt=s(3331);et({global:!0,constructor:!0,forced:!s(4019)},{DataView:nt.DataView})},6716:(rt,at,s)=>{s(3690)},3843:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=Date,ht=nt(ot.prototype.getTime);et({target:"Date",stat:!0},{now:function(){return ht(new ot)}})},8733:(rt,at,s)=>{var et=s(2109),nt=s(5573);et({target:"Date",proto:!0,forced:Date.prototype.toISOString!==nt},{toISOString:nt})},5735:(rt,at,s)=>{var et=s(2109),nt=s(7293),ot=s(7908),ht=s(7593);et({target:"Date",proto:!0,arity:1,forced:nt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1})},{toJSON:function(dt){var pt=ot(this),lt=ht(pt,"number");return typeof lt!="number"||isFinite(lt)?pt.toISOString():null}})},3710:(rt,at,s)=>{var et=s(1702),nt=s(8052),ot=Date.prototype,ht="Invalid Date",dt=et(ot.toString),pt=et(ot.getTime);String(new Date(NaN))!=ht&&nt(ot,"toString",function(){var lt=pt(this);return lt==lt?dt(this):ht})},4812:(rt,at,s)=>{var et=s(2109),nt=s(7065);et({target:"Function",proto:!0,forced:Function.bind!==nt},{bind:nt})},8309:(rt,at,s)=>{var et=s(9781),nt=s(6530).EXISTS,ot=s(1702),ht=s(3070).f,dt=Function.prototype,pt=ot(dt.toString),lt=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,mt=ot(lt.exec);et&&!nt&&ht(dt,"name",{configurable:!0,get:function(){try{return mt(lt,pt(this))[1]}catch{return""}}})},8862:(rt,at,s)=>{var et=s(2109),nt=s(5005),ot=s(2104),ht=s(6916),dt=s(1702),pt=s(7293),lt=s(3157),mt=s(614),st=s(111),ut=s(2190),ft=s(206),yt=s(133),vt=nt("JSON","stringify"),St=dt(/./.exec),xt=dt("".charAt),Ut=dt("".charCodeAt),Tt=dt("".replace),kt=dt(1 .toString),Dt=/[\uD800-\uDFFF]/g,Vt=/^[\uD800-\uDBFF]$/,Ot=/^[\uDC00-\uDFFF]$/,Lt=!yt||pt(function(){var cn=nt("Symbol")();return vt([cn])!="[null]"||vt({a:cn})!="{}"||vt(Object(cn))!="{}"}),Gt=pt(function(){return vt("\uDF06\uD834")!=='"\\udf06\\ud834"'||vt("\uDEAD")!=='"\\udead"'}),tn=function(cn,un){var fn=ft(arguments),vn=un;if((st(un)||cn!==void 0)&&!ut(cn))return lt(un)||(un=function(Ft,pn){if(mt(vn)&&(pn=ht(vn,this,Ft,pn)),!ut(pn))return pn}),fn[1]=un,ot(vt,null,fn)},zt=function(cn,un,fn){var vn=xt(fn,un-1),Ft=xt(fn,un+1);return St(Vt,cn)&&!St(Ot,Ft)||St(Ot,cn)&&!St(Vt,vn)?"\\u"+kt(Ut(cn,0),16):cn};vt&&et({target:"JSON",stat:!0,arity:3,forced:Lt||Gt},{stringify:function(cn,un,fn){var vn=ft(arguments),Ft=ot(Lt?tn:vt,null,vn);return Gt&&typeof Ft=="string"?Tt(Ft,Dt,zt):Ft}})},3706:(rt,at,s)=>{var et=s(7854);s(8003)(et.JSON,"JSON",!0)},9098:(rt,at,s)=>{s(7710)("Map",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},1532:(rt,at,s)=>{s(9098)},658:(rt,at,s)=>{s(2109)({target:"Math",stat:!0},{log10:s(403)})},2703:(rt,at,s)=>{s(8003)(Math,"Math",!0)},9653:(rt,at,s)=>{var et=s(9781),nt=s(7854),ot=s(1702),ht=s(4705),dt=s(8052),pt=s(2597),lt=s(9587),mt=s(7976),st=s(2190),ut=s(7593),ft=s(7293),yt=s(8006).f,vt=s(1236).f,St=s(3070).f,xt=s(863),Ut=s(3111).trim,Tt="Number",kt=nt.Number,Dt=kt.prototype,Vt=nt.TypeError,Ot=ot("".slice),Lt=ot("".charCodeAt),Gt=function(vn){var Ft=ut(vn,"number");return typeof Ft=="bigint"?Ft:tn(Ft)},tn=function(vn){var Ft,pn,gn,Tn,In,kn,Nn,hn,Sn=ut(vn,"number");if(st(Sn))throw Vt("Cannot convert a Symbol value to a number");if(typeof Sn=="string"&&Sn.length>2){if(Sn=Ut(Sn),(Ft=Lt(Sn,0))===43||Ft===45){if((pn=Lt(Sn,2))===88||pn===120)return NaN}else if(Ft===48){switch(Lt(Sn,1)){case 66:case 98:gn=2,Tn=49;break;case 79:case 111:gn=8,Tn=55;break;default:return+Sn}for(kn=(In=Ot(Sn,2)).length,Nn=0;Nn<kn;Nn++)if((hn=Lt(In,Nn))<48||hn>Tn)return NaN;return parseInt(In,gn)}}return+Sn};if(ht(Tt,!kt(" 0o1")||!kt("0b1")||kt("+0x1"))){for(var zt,cn=function(vn){var Ft=arguments.length<1?0:kt(Gt(vn)),pn=this;return mt(Dt,pn)&&ft(function(){xt(pn)})?lt(Object(Ft),pn,cn):Ft},un=et?yt(kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),fn=0;un.length>fn;fn++)pt(kt,zt=un[fn])&&!pt(cn,zt)&&St(cn,zt,vt(kt,zt));cn.prototype=Dt,Dt.constructor=cn,dt(nt,Tt,cn,{constructor:!0})}},3161:(rt,at,s)=>{s(2109)({target:"Number",stat:!0},{isInteger:s(5988)})},4363:(rt,at,s)=>{s(2109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},9601:(rt,at,s)=>{var et=s(2109),nt=s(1574);et({target:"Object",stat:!0,arity:2,forced:Object.assign!==nt},{assign:nt})},8011:(rt,at,s)=>{s(2109)({target:"Object",stat:!0,sham:!s(9781)},{create:s(30)})},9070:(rt,at,s)=>{var et=s(2109),nt=s(9781),ot=s(3070).f;et({target:"Object",stat:!0,forced:Object.defineProperty!==ot,sham:!nt},{defineProperty:ot})},9720:(rt,at,s)=>{var et=s(2109),nt=s(4699).entries;et({target:"Object",stat:!0},{entries:function(ot){return nt(ot)}})},5003:(rt,at,s)=>{var et=s(2109),nt=s(7293),ot=s(5656),ht=s(1236).f,dt=s(9781),pt=nt(function(){ht(1)});et({target:"Object",stat:!0,forced:!dt||pt,sham:!dt},{getOwnPropertyDescriptor:function(lt,mt){return ht(ot(lt),mt)}})},9660:(rt,at,s)=>{var et=s(2109),nt=s(133),ot=s(7293),ht=s(5181),dt=s(7908);et({target:"Object",stat:!0,forced:!nt||ot(function(){ht.f(1)})},{getOwnPropertySymbols:function(pt){var lt=ht.f;return lt?lt(dt(pt)):[]}})},489:(rt,at,s)=>{var et=s(2109),nt=s(7293),ot=s(7908),ht=s(9518),dt=s(8544);et({target:"Object",stat:!0,forced:nt(function(){ht(1)}),sham:!dt},{getPrototypeOf:function(pt){return ht(ot(pt))}})},7941:(rt,at,s)=>{var et=s(2109),nt=s(7908),ot=s(1956);et({target:"Object",stat:!0,forced:s(7293)(function(){ot(1)})},{keys:function(ht){return ot(nt(ht))}})},8304:(rt,at,s)=>{s(2109)({target:"Object",stat:!0},{setPrototypeOf:s(7674)})},1539:(rt,at,s)=>{var et=s(1694),nt=s(8052),ot=s(288);et||nt(Object.prototype,"toString",ot,{unsafe:!0})},2479:(rt,at,s)=>{var et=s(2109),nt=s(4699).values;et({target:"Object",stat:!0},{values:function(ot){return nt(ot)}})},1058:(rt,at,s)=>{var et=s(2109),nt=s(3009);et({global:!0,forced:parseInt!=nt},{parseInt:nt})},821:(rt,at,s)=>{var et=s(2109),nt=s(6916),ot=s(9662),ht=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{all:function(lt){var mt=this,st=ht.f(mt),ut=st.resolve,ft=st.reject,yt=dt(function(){var vt=ot(mt.resolve),St=[],xt=0,Ut=1;pt(lt,function(Tt){var kt=xt++,Dt=!1;Ut++,nt(vt,mt,Tt).then(function(Vt){Dt||(Dt=!0,St[kt]=Vt,--Ut||ut(St))},ft)}),--Ut||ut(St)});return yt.error&&ft(yt.value),st.promise}})},4164:(rt,at,s)=>{var et=s(2109),nt=s(1913),ot=s(3702).CONSTRUCTOR,ht=s(2492),dt=s(5005),pt=s(614),lt=s(8052),mt=ht&&ht.prototype;if(et({target:"Promise",proto:!0,forced:ot,real:!0},{catch:function(ut){return this.then(void 0,ut)}}),!nt&&pt(ht)){var st=dt("Promise").prototype.catch;mt.catch!==st&&lt(mt,"catch",st,{unsafe:!0})}},3401:(rt,at,s)=>{var et,nt,ot,ht=s(2109),dt=s(1913),pt=s(5268),lt=s(7854),mt=s(6916),st=s(8052),ut=s(7674),ft=s(8003),yt=s(6340),vt=s(9662),St=s(614),xt=s(111),Ut=s(5787),Tt=s(6707),kt=s(261).set,Dt=s(5948),Vt=s(842),Ot=s(2534),Lt=s(8572),Gt=s(9909),tn=s(2492),zt=s(3702),cn=s(8523),un="Promise",fn=zt.CONSTRUCTOR,vn=zt.REJECTION_EVENT,Ft=zt.SUBCLASSING,pn=Gt.getterFor(un),gn=Gt.set,Tn=tn&&tn.prototype,In=tn,kn=Tn,Nn=lt.TypeError,hn=lt.document,Sn=lt.process,Rn=cn.f,wn=Rn,xn=!!(hn&&hn.createEvent&&lt.dispatchEvent),Xn="unhandledrejection",Ln=function(An){var _n;return!(!xt(An)||!St(_n=An.then))&&_n},Un=function(An,_n){var On,Pn,Vn,ir=_n.value,Mn=_n.state==1,$n=Mn?An.ok:An.fail,Kt=An.resolve,At=An.reject,it=An.domain;try{$n?(Mn||(_n.rejection===2&&Bn(_n),_n.rejection=1),$n===!0?On=ir:(it&&it.enter(),On=$n(ir),it&&(it.exit(),Vn=!0)),On===An.promise?At(Nn("Promise-chain cycle")):(Pn=Ln(On))?mt(Pn,On,Kt,At):Kt(On)):At(ir)}catch(Rt){it&&!Vn&&it.exit(),At(Rt)}},rr=function(An,_n){An.notified||(An.notified=!0,Dt(function(){for(var On,Pn=An.reactions;On=Pn.get();)Un(On,An);An.notified=!1,_n&&!An.rejection&&Qn(An)}))},tr=function(An,_n,On){var Pn,Vn;xn?((Pn=hn.createEvent("Event")).promise=_n,Pn.reason=On,Pn.initEvent(An,!1,!0),lt.dispatchEvent(Pn)):Pn={promise:_n,reason:On},!vn&&(Vn=lt["on"+An])?Vn(Pn):An===Xn&&Vt("Unhandled promise rejection",On)},Qn=function(An){mt(kt,lt,function(){var _n,On=An.facade,Pn=An.value;if(jn(An)&&(_n=Ot(function(){pt?Sn.emit("unhandledRejection",Pn,On):tr(Xn,On,Pn)}),An.rejection=pt||jn(An)?2:1,_n.error))throw _n.value})},jn=function(An){return An.rejection!==1&&!An.parent},Bn=function(An){mt(kt,lt,function(){var _n=An.facade;pt?Sn.emit("rejectionHandled",_n):tr("rejectionhandled",_n,An.value)})},an=function(An,_n,On){return function(Pn){An(_n,Pn,On)}},zn=function(An,_n,On){An.done||(An.done=!0,On&&(An=On),An.value=_n,An.state=2,rr(An,!0))},Kn=function(An,_n,On){if(!An.done){An.done=!0,On&&(An=On);try{if(An.facade===_n)throw Nn("Promise can't be resolved itself");var Pn=Ln(_n);Pn?Dt(function(){var Vn={done:!1};try{mt(Pn,_n,an(Kn,Vn,An),an(zn,Vn,An))}catch(ir){zn(Vn,ir,An)}}):(An.value=_n,An.state=1,rr(An,!1))}catch(Vn){zn({done:!1},Vn,An)}}};if(fn&&(kn=(In=function(An){Ut(this,kn),vt(An),mt(et,this);var _n=pn(this);try{An(an(Kn,_n),an(zn,_n))}catch(On){zn(_n,On)}}).prototype,(et=function(An){gn(this,{type:un,done:!1,notified:!1,parent:!1,reactions:new Lt,rejection:!1,state:0,value:void 0})}).prototype=st(kn,"then",function(An,_n){var On=pn(this),Pn=Rn(Tt(this,In));return On.parent=!0,Pn.ok=!St(An)||An,Pn.fail=St(_n)&&_n,Pn.domain=pt?Sn.domain:void 0,On.state==0?On.reactions.add(Pn):Dt(function(){Un(Pn,On)}),Pn.promise}),nt=function(){var An=new et,_n=pn(An);this.promise=An,this.resolve=an(Kn,_n),this.reject=an(zn,_n)},cn.f=Rn=function(An){return An===In||An===void 0?new nt(An):wn(An)},!dt&&St(tn)&&Tn!==Object.prototype)){ot=Tn.then,Ft||st(Tn,"then",function(An,_n){var On=this;return new In(function(Pn,Vn){mt(ot,On,Pn,Vn)}).then(An,_n)},{unsafe:!0});try{delete Tn.constructor}catch{}ut&&ut(Tn,kn)}ht({global:!0,constructor:!0,wrap:!0,forced:fn},{Promise:In}),ft(In,un,!1,!0),yt(un)},8674:(rt,at,s)=>{s(3401),s(821),s(4164),s(6027),s(683),s(6294)},6027:(rt,at,s)=>{var et=s(2109),nt=s(6916),ot=s(9662),ht=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{race:function(lt){var mt=this,st=ht.f(mt),ut=st.reject,ft=dt(function(){var yt=ot(mt.resolve);pt(lt,function(vt){nt(yt,mt,vt).then(st.resolve,ut)})});return ft.error&&ut(ft.value),st.promise}})},683:(rt,at,s)=>{var et=s(2109),nt=s(6916),ot=s(8523);et({target:"Promise",stat:!0,forced:s(3702).CONSTRUCTOR},{reject:function(ht){var dt=ot.f(this);return nt(dt.reject,void 0,ht),dt.promise}})},6294:(rt,at,s)=>{var et=s(2109),nt=s(5005),ot=s(1913),ht=s(2492),dt=s(3702).CONSTRUCTOR,pt=s(9478),lt=nt("Promise"),mt=ot&&!dt;et({target:"Promise",stat:!0,forced:ot||dt},{resolve:function(st){return pt(mt&&this===lt?ht:this,st)}})},2419:(rt,at,s)=>{var et=s(2109),nt=s(5005),ot=s(2104),ht=s(7065),dt=s(9483),pt=s(9670),lt=s(111),mt=s(30),st=s(7293),ut=nt("Reflect","construct"),ft=Object.prototype,yt=[].push,vt=st(function(){function Ut(){}return!(ut(function(){},[],Ut)instanceof Ut)}),St=!st(function(){ut(function(){})}),xt=vt||St;et({target:"Reflect",stat:!0,forced:xt,sham:xt},{construct:function(Ut,Tt){dt(Ut),pt(Tt);var kt=arguments.length<3?Ut:dt(arguments[2]);if(St&&!vt)return ut(Ut,Tt,kt);if(Ut==kt){switch(Tt.length){case 0:return new Ut;case 1:return new Ut(Tt[0]);case 2:return new Ut(Tt[0],Tt[1]);case 3:return new Ut(Tt[0],Tt[1],Tt[2]);case 4:return new Ut(Tt[0],Tt[1],Tt[2],Tt[3])}var Dt=[null];return ot(yt,Dt,Tt),new(ot(ht,Ut,Dt))}var Vt=kt.prototype,Ot=mt(lt(Vt)?Vt:ft),Lt=ot(Ut,Ot,Tt);return lt(Lt)?Lt:Ot}})},4819:(rt,at,s)=>{var et=s(2109),nt=s(6916),ot=s(111),ht=s(9670),dt=s(5032),pt=s(1236),lt=s(9518);et({target:"Reflect",stat:!0},{get:function mt(st,ut){var ft,yt,vt=arguments.length<3?st:arguments[2];return ht(st)===vt?st[ut]:(ft=pt.f(st,ut))?dt(ft)?ft.value:ft.get===void 0?void 0:nt(ft.get,vt):ot(yt=lt(st))?mt(yt,ut,vt):void 0}})},4603:(rt,at,s)=>{var et=s(9781),nt=s(7854),ot=s(1702),ht=s(4705),dt=s(9587),pt=s(8880),lt=s(8006).f,mt=s(7976),st=s(7850),ut=s(1340),ft=s(4706),yt=s(2999),vt=s(2626),St=s(8052),xt=s(7293),Ut=s(2597),Tt=s(9909).enforce,kt=s(6340),Dt=s(5112),Vt=s(9441),Ot=s(7168),Lt=Dt("match"),Gt=nt.RegExp,tn=Gt.prototype,zt=nt.SyntaxError,cn=ot(tn.exec),un=ot("".charAt),fn=ot("".replace),vn=ot("".indexOf),Ft=ot("".slice),pn=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,gn=/a/g,Tn=/a/g,In=new Gt(gn)!==gn,kn=yt.MISSED_STICKY,Nn=yt.UNSUPPORTED_Y;if(ht("RegExp",et&&(!In||kn||Vt||Ot||xt(function(){return Tn[Lt]=!1,Gt(gn)!=gn||Gt(Tn)==Tn||Gt(gn,"i")!="/a/i"})))){for(var hn=function(wn,xn){var Xn,Ln,Un,rr,tr,Qn,jn=mt(tn,this),Bn=st(wn),an=xn===void 0,zn=[],Kn=wn;if(!jn&&Bn&&an&&wn.constructor===hn)return wn;if((Bn||mt(tn,wn))&&(wn=wn.source,an&&(xn=ft(Kn))),wn=wn===void 0?"":ut(wn),xn=xn===void 0?"":ut(xn),Kn=wn,Vt&&"dotAll"in gn&&(Ln=!!xn&&vn(xn,"s")>-1)&&(xn=fn(xn,/s/g,"")),Xn=xn,kn&&"sticky"in gn&&(Un=!!xn&&vn(xn,"y")>-1)&&Nn&&(xn=fn(xn,/y/g,"")),Ot&&(rr=function(An){for(var _n,On=An.length,Pn=0,Vn="",ir=[],Mn={},$n=!1,Kt=!1,At=0,it="";Pn<=On;Pn++){if((_n=un(An,Pn))==="\\")_n+=un(An,++Pn);else if(_n==="]")$n=!1;else if(!$n)switch(!0){case _n==="[":$n=!0;break;case _n==="(":cn(pn,Ft(An,Pn+1))&&(Pn+=2,Kt=!0),Vn+=_n,At++;continue;case(_n===">"&&Kt):if(it===""||Ut(Mn,it))throw new zt("Invalid capture group name");Mn[it]=!0,ir[ir.length]=[it,At],Kt=!1,it="";continue}Kt?it+=_n:Vn+=_n}return[Vn,ir]}(wn),wn=rr[0],zn=rr[1]),tr=dt(Gt(wn,xn),jn?this:tn,hn),(Ln||Un||zn.length)&&(Qn=Tt(tr),Ln&&(Qn.dotAll=!0,Qn.raw=hn(function(An){for(var _n,On=An.length,Pn=0,Vn="",ir=!1;Pn<=On;Pn++)(_n=un(An,Pn))!=="\\"?ir||_n!=="."?(_n==="["?ir=!0:_n==="]"&&(ir=!1),Vn+=_n):Vn+="[\\s\\S]":Vn+=_n+un(An,++Pn);return Vn}(wn),Xn)),Un&&(Qn.sticky=!0),zn.length&&(Qn.groups=zn)),wn!==Kn)try{pt(tr,"source",Kn===""?"(?:)":Kn)}catch{}return tr},Sn=lt(Gt),Rn=0;Sn.length>Rn;)vt(hn,Gt,Sn[Rn++]);tn.constructor=hn,hn.prototype=tn,St(nt,"RegExp",hn,{constructor:!0})}kt("RegExp")},4916:(rt,at,s)=>{var et=s(2109),nt=s(2261);et({target:"RegExp",proto:!0,forced:/./.exec!==nt},{exec:nt})},9714:(rt,at,s)=>{var et=s(6530).PROPER,nt=s(8052),ot=s(9670),ht=s(1340),dt=s(7293),pt=s(4706),lt="toString",mt=RegExp.prototype.toString,st=dt(function(){return mt.call({source:"a",flags:"b"})!="/a/b"}),ut=et&&mt.name!=lt;(st||ut)&&nt(RegExp.prototype,lt,function(){var ft=ot(this);return"/"+ht(ft.source)+"/"+ht(pt(ft))},{unsafe:!0})},7227:(rt,at,s)=>{s(7710)("Set",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},189:(rt,at,s)=>{s(7227)},2023:(rt,at,s)=>{var et=s(2109),nt=s(1702),ot=s(3929),ht=s(4488),dt=s(1340),pt=s(4964),lt=nt("".indexOf);et({target:"String",proto:!0,forced:!pt("includes")},{includes:function(mt){return!!~lt(dt(ht(this)),dt(ot(mt)),arguments.length>1?arguments[1]:void 0)}})},8783:(rt,at,s)=>{var et=s(8710).charAt,nt=s(1340),ot=s(9909),ht=s(654),dt="String Iterator",pt=ot.set,lt=ot.getterFor(dt);ht(String,"String",function(mt){pt(this,{type:dt,string:nt(mt),index:0})},function(){var mt,st=lt(this),ut=st.string,ft=st.index;return ft>=ut.length?{value:void 0,done:!0}:(mt=et(ut,ft),st.index+=mt.length,{value:mt,done:!1})})},4723:(rt,at,s)=>{var et=s(6916),nt=s(7007),ot=s(9670),ht=s(7466),dt=s(1340),pt=s(4488),lt=s(8173),mt=s(1530),st=s(7651);nt("match",function(ut,ft,yt){return[function(vt){var St=pt(this),xt=vt==null?void 0:lt(vt,ut);return xt?et(xt,vt,St):new RegExp(vt)[ut](dt(St))},function(vt){var St=ot(this),xt=dt(vt),Ut=yt(ft,St,xt);if(Ut.done)return Ut.value;if(!St.global)return st(St,xt);var Tt=St.unicode;St.lastIndex=0;for(var kt,Dt=[],Vt=0;(kt=st(St,xt))!==null;){var Ot=dt(kt[0]);Dt[Vt]=Ot,Ot===""&&(St.lastIndex=mt(xt,ht(St.lastIndex),Tt)),Vt++}return Vt===0?null:Dt}]})},5306:(rt,at,s)=>{var et=s(2104),nt=s(6916),ot=s(1702),ht=s(7007),dt=s(7293),pt=s(9670),lt=s(614),mt=s(9303),st=s(7466),ut=s(1340),ft=s(4488),yt=s(1530),vt=s(8173),St=s(647),xt=s(7651),Ut=s(5112)("replace"),Tt=Math.max,kt=Math.min,Dt=ot([].concat),Vt=ot([].push),Ot=ot("".indexOf),Lt=ot("".slice),Gt="a".replace(/./,"$0")==="$0",tn=!!/./[Ut]&&/./[Ut]("a","$0")==="";ht("replace",function(zt,cn,un){var fn=tn?"$":"$0";return[function(vn,Ft){var pn=ft(this),gn=vn==null?void 0:vt(vn,Ut);return gn?nt(gn,vn,pn,Ft):nt(cn,ut(pn),vn,Ft)},function(vn,Ft){var pn=pt(this),gn=ut(vn);if(typeof Ft=="string"&&Ot(Ft,fn)===-1&&Ot(Ft,"$<")===-1){var Tn=un(cn,pn,gn,Ft);if(Tn.done)return Tn.value}var In=lt(Ft);In||(Ft=ut(Ft));var kn=pn.global;if(kn){var Nn=pn.unicode;pn.lastIndex=0}for(var hn=[];;){var Sn=xt(pn,gn);if(Sn===null||(Vt(hn,Sn),!kn))break;ut(Sn[0])===""&&(pn.lastIndex=yt(gn,st(pn.lastIndex),Nn))}for(var Rn,wn="",xn=0,Xn=0;Xn<hn.length;Xn++){for(var Ln=ut((Sn=hn[Xn])[0]),Un=Tt(kt(mt(Sn.index),gn.length),0),rr=[],tr=1;tr<Sn.length;tr++)Vt(rr,(Rn=Sn[tr])===void 0?Rn:String(Rn));var Qn=Sn.groups;if(In){var jn=Dt([Ln],rr,Un,gn);Qn!==void 0&&Vt(jn,Qn);var Bn=ut(et(Ft,void 0,jn))}else Bn=St(Ln,gn,Un,rr,Qn,Ft);Un>=xn&&(wn+=Lt(gn,xn,Un)+Bn,xn=Un+Ln.length)}return wn+Lt(gn,xn)}]},!!dt(function(){var zt=/./;return zt.exec=function(){var cn=[];return cn.groups={a:"7"},cn},"".replace(zt,"$<a>")!=="7"})||!Gt||tn)},4765:(rt,at,s)=>{var et=s(6916),nt=s(7007),ot=s(9670),ht=s(4488),dt=s(1150),pt=s(1340),lt=s(8173),mt=s(7651);nt("search",function(st,ut,ft){return[function(yt){var vt=ht(this),St=yt==null?void 0:lt(yt,st);return St?et(St,yt,vt):new RegExp(yt)[st](pt(vt))},function(yt){var vt=ot(this),St=pt(yt),xt=ft(ut,vt,St);if(xt.done)return xt.value;var Ut=vt.lastIndex;dt(Ut,0)||(vt.lastIndex=0);var Tt=mt(vt,St);return dt(vt.lastIndex,Ut)||(vt.lastIndex=Ut),Tt===null?-1:Tt.index}]})},3123:(rt,at,s)=>{var et=s(2104),nt=s(6916),ot=s(1702),ht=s(7007),dt=s(7850),pt=s(9670),lt=s(4488),mt=s(6707),st=s(1530),ut=s(7466),ft=s(1340),yt=s(8173),vt=s(1589),St=s(7651),xt=s(2261),Ut=s(2999),Tt=s(7293),kt=Ut.UNSUPPORTED_Y,Dt=4294967295,Vt=Math.min,Ot=[].push,Lt=ot(/./.exec),Gt=ot(Ot),tn=ot("".slice);ht("split",function(zt,cn,un){var fn;return fn="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(vn,Ft){var pn=ft(lt(this)),gn=Ft===void 0?Dt:Ft>>>0;if(gn===0)return[];if(vn===void 0)return[pn];if(!dt(vn))return nt(cn,pn,vn,gn);for(var Tn,In,kn,Nn=[],hn=(vn.ignoreCase?"i":"")+(vn.multiline?"m":"")+(vn.unicode?"u":"")+(vn.sticky?"y":""),Sn=0,Rn=new RegExp(vn.source,hn+"g");(Tn=nt(xt,Rn,pn))&&!((In=Rn.lastIndex)>Sn&&(Gt(Nn,tn(pn,Sn,Tn.index)),Tn.length>1&&Tn.index<pn.length&&et(Ot,Nn,vt(Tn,1)),kn=Tn[0].length,Sn=In,Nn.length>=gn));)Rn.lastIndex===Tn.index&&Rn.lastIndex++;return Sn===pn.length?!kn&&Lt(Rn,"")||Gt(Nn,""):Gt(Nn,tn(pn,Sn)),Nn.length>gn?vt(Nn,0,gn):Nn}:"0".split(void 0,0).length?function(vn,Ft){return vn===void 0&&Ft===0?[]:nt(cn,this,vn,Ft)}:cn,[function(vn,Ft){var pn=lt(this),gn=vn==null?void 0:yt(vn,zt);return gn?nt(gn,vn,pn,Ft):nt(fn,ft(pn),vn,Ft)},function(vn,Ft){var pn=pt(this),gn=ft(vn),Tn=un(fn,pn,gn,Ft,fn!==cn);if(Tn.done)return Tn.value;var In=mt(pn,RegExp),kn=pn.unicode,Nn=(pn.ignoreCase?"i":"")+(pn.multiline?"m":"")+(pn.unicode?"u":"")+(kt?"g":"y"),hn=new In(kt?"^(?:"+pn.source+")":pn,Nn),Sn=Ft===void 0?Dt:Ft>>>0;if(Sn===0)return[];if(gn.length===0)return St(hn,gn)===null?[gn]:[];for(var Rn=0,wn=0,xn=[];wn<gn.length;){hn.lastIndex=kt?0:wn;var Xn,Ln=St(hn,kt?tn(gn,wn):gn);if(Ln===null||(Xn=Vt(ut(hn.lastIndex+(kt?wn:0)),gn.length))===Rn)wn=st(gn,wn,kn);else{if(Gt(xn,tn(gn,Rn,wn)),xn.length===Sn)return xn;for(var Un=1;Un<=Ln.length-1;Un++)if(Gt(xn,Ln[Un]),xn.length===Sn)return xn;wn=Rn=Xn}}return Gt(xn,tn(gn,Rn)),xn}]},!!Tt(function(){var zt=/(?:)/,cn=zt.exec;zt.exec=function(){return cn.apply(this,arguments)};var un="ab".split(zt);return un.length!==2||un[0]!=="a"||un[1]!=="b"}),kt)},6755:(rt,at,s)=>{var et,nt=s(2109),ot=s(1702),ht=s(1236).f,dt=s(7466),pt=s(1340),lt=s(3929),mt=s(4488),st=s(4964),ut=s(1913),ft=ot("".startsWith),yt=ot("".slice),vt=Math.min,St=st("startsWith");nt({target:"String",proto:!0,forced:!(!ut&&!St&&(et=ht(String.prototype,"startsWith"),et&&!et.writable)||St)},{startsWith:function(xt){var Ut=pt(mt(this));lt(xt);var Tt=dt(vt(arguments.length>1?arguments[1]:void 0,Ut.length)),kt=pt(xt);return ft?ft(Ut,kt,Tt):yt(Ut,Tt,Tt+kt.length)===kt}})},2443:(rt,at,s)=>{s(7235)("asyncIterator")},4032:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(6916),ht=s(1702),dt=s(1913),pt=s(9781),lt=s(133),mt=s(7293),st=s(2597),ut=s(7976),ft=s(9670),yt=s(5656),vt=s(4948),St=s(1340),xt=s(9114),Ut=s(30),Tt=s(1956),kt=s(8006),Dt=s(1156),Vt=s(5181),Ot=s(1236),Lt=s(3070),Gt=s(6048),tn=s(5296),zt=s(8052),cn=s(2309),un=s(6200),fn=s(3501),vn=s(9711),Ft=s(5112),pn=s(6061),gn=s(7235),Tn=s(6532),In=s(8003),kn=s(9909),Nn=s(2092).forEach,hn=un("hidden"),Sn="Symbol",Rn=kn.set,wn=kn.getterFor(Sn),xn=Object.prototype,Xn=nt.Symbol,Ln=Xn&&Xn.prototype,Un=nt.TypeError,rr=nt.QObject,tr=Ot.f,Qn=Lt.f,jn=Dt.f,Bn=tn.f,an=ht([].push),zn=cn("symbols"),Kn=cn("op-symbols"),An=cn("wks"),_n=!rr||!rr.prototype||!rr.prototype.findChild,On=pt&&mt(function(){return Ut(Qn({},"a",{get:function(){return Qn(this,"a",{value:7}).a}})).a!=7})?function(it,Rt,bt){var wt=tr(xn,Rt);wt&&delete xn[Rt],Qn(it,Rt,bt),wt&&it!==xn&&Qn(xn,Rt,wt)}:Qn,Pn=function(it,Rt){var bt=zn[it]=Ut(Ln);return Rn(bt,{type:Sn,tag:it,description:Rt}),pt||(bt.description=Rt),bt},Vn=function(it,Rt,bt){it===xn&&Vn(Kn,Rt,bt),ft(it);var wt=vt(Rt);return ft(bt),st(zn,wt)?(bt.enumerable?(st(it,hn)&&it[hn][wt]&&(it[hn][wt]=!1),bt=Ut(bt,{enumerable:xt(0,!1)})):(st(it,hn)||Qn(it,hn,xt(1,{})),it[hn][wt]=!0),On(it,wt,bt)):Qn(it,wt,bt)},ir=function(it,Rt){ft(it);var bt=yt(Rt),wt=Tt(bt).concat(At(bt));return Nn(wt,function(Et){pt&&!ot(Mn,bt,Et)||Vn(it,Et,bt[Et])}),it},Mn=function(it){var Rt=vt(it),bt=ot(Bn,this,Rt);return!(this===xn&&st(zn,Rt)&&!st(Kn,Rt))&&(!(bt||!st(this,Rt)||!st(zn,Rt)||st(this,hn)&&this[hn][Rt])||bt)},$n=function(it,Rt){var bt=yt(it),wt=vt(Rt);if(bt!==xn||!st(zn,wt)||st(Kn,wt)){var Et=tr(bt,wt);return!Et||!st(zn,wt)||st(bt,hn)&&bt[hn][wt]||(Et.enumerable=!0),Et}},Kt=function(it){var Rt=jn(yt(it)),bt=[];return Nn(Rt,function(wt){st(zn,wt)||st(fn,wt)||an(bt,wt)}),bt},At=function(it){var Rt=it===xn,bt=jn(Rt?Kn:yt(it)),wt=[];return Nn(bt,function(Et){!st(zn,Et)||Rt&&!st(xn,Et)||an(wt,zn[Et])}),wt};lt||(zt(Ln=(Xn=function(){if(ut(Ln,this))throw Un("Symbol is not a constructor");var it=arguments.length&&arguments[0]!==void 0?St(arguments[0]):void 0,Rt=vn(it),bt=function(wt){this===xn&&ot(bt,Kn,wt),st(this,hn)&&st(this[hn],Rt)&&(this[hn][Rt]=!1),On(this,Rt,xt(1,wt))};return pt&&_n&&On(xn,Rt,{configurable:!0,set:bt}),Pn(Rt,it)}).prototype,"toString",function(){return wn(this).tag}),zt(Xn,"withoutSetter",function(it){return Pn(vn(it),it)}),tn.f=Mn,Lt.f=Vn,Gt.f=ir,Ot.f=$n,kt.f=Dt.f=Kt,Vt.f=At,pn.f=function(it){return Pn(Ft(it),it)},pt&&(Qn(Ln,"description",{configurable:!0,get:function(){return wn(this).description}}),dt||zt(xn,"propertyIsEnumerable",Mn,{unsafe:!0}))),et({global:!0,constructor:!0,wrap:!0,forced:!lt,sham:!lt},{Symbol:Xn}),Nn(Tt(An),function(it){gn(it)}),et({target:Sn,stat:!0,forced:!lt},{useSetter:function(){_n=!0},useSimple:function(){_n=!1}}),et({target:"Object",stat:!0,forced:!lt,sham:!pt},{create:function(it,Rt){return Rt===void 0?Ut(it):ir(Ut(it),Rt)},defineProperty:Vn,defineProperties:ir,getOwnPropertyDescriptor:$n}),et({target:"Object",stat:!0,forced:!lt},{getOwnPropertyNames:Kt}),Tn(),In(Xn,Sn),fn[hn]=!0},1817:(rt,at,s)=>{var et=s(2109),nt=s(9781),ot=s(7854),ht=s(1702),dt=s(2597),pt=s(614),lt=s(7976),mt=s(1340),st=s(3070).f,ut=s(9920),ft=ot.Symbol,yt=ft&&ft.prototype;if(nt&&pt(ft)&&(!("description"in yt)||ft().description!==void 0)){var vt={},St=function(){var Ot=arguments.length<1||arguments[0]===void 0?void 0:mt(arguments[0]),Lt=lt(yt,this)?new ft(Ot):Ot===void 0?ft():ft(Ot);return Ot===""&&(vt[Lt]=!0),Lt};ut(St,ft),St.prototype=yt,yt.constructor=St;var xt=String(ft("test"))=="Symbol(test)",Ut=ht(yt.toString),Tt=ht(yt.valueOf),kt=/^Symbol\((.*)\)[^)]+$/,Dt=ht("".replace),Vt=ht("".slice);st(yt,"description",{configurable:!0,get:function(){var Ot=Tt(this),Lt=Ut(Ot);if(dt(vt,Ot))return"";var Gt=xt?Vt(Lt,7,-1):Dt(Lt,kt,"$1");return Gt===""?void 0:Gt}}),et({global:!0,constructor:!0,forced:!0},{Symbol:St})}},763:(rt,at,s)=>{var et=s(2109),nt=s(5005),ot=s(2597),ht=s(1340),dt=s(2309),pt=s(735),lt=dt("string-to-symbol-registry"),mt=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{for:function(st){var ut=ht(st);if(ot(lt,ut))return lt[ut];var ft=nt("Symbol")(ut);return lt[ut]=ft,mt[ft]=ut,ft}})},2165:(rt,at,s)=>{s(7235)("iterator")},2526:(rt,at,s)=>{s(4032),s(763),s(6620),s(8862),s(9660)},6620:(rt,at,s)=>{var et=s(2109),nt=s(2597),ot=s(2190),ht=s(6330),dt=s(2309),pt=s(735),lt=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{keyFor:function(mt){if(!ot(mt))throw TypeError(ht(mt)+" is not a symbol");if(nt(lt,mt))return lt[mt]}})},3680:(rt,at,s)=>{var et=s(5005),nt=s(7235),ot=s(8003);nt("toStringTag"),ot(et("Symbol"),"Symbol")},2990:(rt,at,s)=>{var et=s(1702),nt=s(260),ot=et(s(1048)),ht=nt.aTypedArray;(0,nt.exportTypedArrayMethod)("copyWithin",function(dt,pt){return ot(ht(this),dt,pt,arguments.length>2?arguments[2]:void 0)})},8927:(rt,at,s)=>{var et=s(260),nt=s(2092).every,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("every",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},3105:(rt,at,s)=>{var et=s(260),nt=s(1285),ot=s(4599),ht=s(648),dt=s(6916),pt=s(1702),lt=s(7293),mt=et.aTypedArray,st=et.exportTypedArrayMethod,ut=pt("".slice);st("fill",function(ft){var yt=arguments.length;mt(this);var vt=ut(ht(this),0,3)==="Big"?ot(ft):+ft;return dt(nt,this,vt,yt>1?arguments[1]:void 0,yt>2?arguments[2]:void 0)},lt(function(){var ft=0;return new Int8Array(2).fill({valueOf:function(){return ft++}}),ft!==1}))},5035:(rt,at,s)=>{var et=s(260),nt=s(2092).filter,ot=s(3074),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("filter",function(dt){var pt=nt(ht(this),dt,arguments.length>1?arguments[1]:void 0);return ot(this,pt)})},7174:(rt,at,s)=>{var et=s(260),nt=s(2092).findIndex,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("findIndex",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},4345:(rt,at,s)=>{var et=s(260),nt=s(2092).find,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("find",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},2846:(rt,at,s)=>{var et=s(260),nt=s(2092).forEach,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("forEach",function(ht){nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},4731:(rt,at,s)=>{var et=s(260),nt=s(1318).includes,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("includes",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},7209:(rt,at,s)=>{var et=s(260),nt=s(1318).indexOf,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("indexOf",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},6319:(rt,at,s)=>{var et=s(7854),nt=s(7293),ot=s(1702),ht=s(260),dt=s(6992),pt=s(5112)("iterator"),lt=et.Uint8Array,mt=ot(dt.values),st=ot(dt.keys),ut=ot(dt.entries),ft=ht.aTypedArray,yt=ht.exportTypedArrayMethod,vt=lt&&lt.prototype,St=!nt(function(){vt[pt].call([1])}),xt=!!vt&&vt.values&&vt[pt]===vt.values&&vt.values.name==="values",Ut=function(){return mt(ft(this))};yt("entries",function(){return ut(ft(this))},St),yt("keys",function(){return st(ft(this))},St),yt("values",Ut,St||!xt,{name:"values"}),yt(pt,Ut,St||!xt,{name:"values"})},8867:(rt,at,s)=>{var et=s(260),nt=s(1702),ot=et.aTypedArray,ht=et.exportTypedArrayMethod,dt=nt([].join);ht("join",function(pt){return dt(ot(this),pt)})},7789:(rt,at,s)=>{var et=s(260),nt=s(2104),ot=s(6583),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("lastIndexOf",function(dt){var pt=arguments.length;return nt(ot,ht(this),pt>1?[dt,arguments[1]]:[dt])})},3739:(rt,at,s)=>{var et=s(260),nt=s(2092).map,ot=s(6304),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("map",function(dt){return nt(ht(this),dt,arguments.length>1?arguments[1]:void 0,function(pt,lt){return new(ot(pt))(lt)})})},4483:(rt,at,s)=>{var et=s(260),nt=s(3671).right,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduceRight",function(ht){var dt=arguments.length;return nt(ot(this),ht,dt,dt>1?arguments[1]:void 0)})},9368:(rt,at,s)=>{var et=s(260),nt=s(3671).left,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduce",function(ht){var dt=arguments.length;return nt(ot(this),ht,dt,dt>1?arguments[1]:void 0)})},2056:(rt,at,s)=>{var et=s(260),nt=et.aTypedArray,ot=et.exportTypedArrayMethod,ht=Math.floor;ot("reverse",function(){for(var dt,pt=this,lt=nt(pt).length,mt=ht(lt/2),st=0;st<mt;)dt=pt[st],pt[st++]=pt[--lt],pt[lt]=dt;return pt})},3462:(rt,at,s)=>{var et=s(7854),nt=s(6916),ot=s(260),ht=s(6244),dt=s(4590),pt=s(7908),lt=s(7293),mt=et.RangeError,st=et.Int8Array,ut=st&&st.prototype,ft=ut&&ut.set,yt=ot.aTypedArray,vt=ot.exportTypedArrayMethod,St=!lt(function(){var Ut=new Uint8ClampedArray(2);return nt(ft,Ut,{length:1,0:3},1),Ut[1]!==3}),xt=St&&ot.NATIVE_ARRAY_BUFFER_VIEWS&&lt(function(){var Ut=new st(2);return Ut.set(1),Ut.set("2",1),Ut[0]!==0||Ut[1]!==2});vt("set",function(Ut){yt(this);var Tt=dt(arguments.length>1?arguments[1]:void 0,1),kt=pt(Ut);if(St)return nt(ft,this,kt,Tt);var Dt=this.length,Vt=ht(kt),Ot=0;if(Vt+Tt>Dt)throw mt("Wrong length");for(;Ot<Vt;)this[Tt+Ot]=kt[Ot++]},!St||xt)},678:(rt,at,s)=>{var et=s(260),nt=s(6304),ot=s(7293),ht=s(206),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("slice",function(pt,lt){for(var mt=ht(dt(this),pt,lt),st=nt(this),ut=0,ft=mt.length,yt=new st(ft);ft>ut;)yt[ut]=mt[ut++];return yt},ot(function(){new Int8Array(1).slice()}))},7462:(rt,at,s)=>{var et=s(260),nt=s(2092).some,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("some",function(ht){return nt(ot(this),ht,arguments.length>1?arguments[1]:void 0)})},3824:(rt,at,s)=>{var et=s(7854),nt=s(1702),ot=s(7293),ht=s(9662),dt=s(4362),pt=s(260),lt=s(8886),mt=s(256),st=s(7392),ut=s(8008),ft=pt.aTypedArray,yt=pt.exportTypedArrayMethod,vt=et.Uint16Array,St=vt&&nt(vt.prototype.sort),xt=!(!St||ot(function(){St(new vt(2),null)})&&ot(function(){St(new vt(2),{})})),Ut=!!St&&!ot(function(){if(st)return st<74;if(lt)return lt<67;if(mt)return!0;if(ut)return ut<602;var Tt,kt,Dt=new vt(516),Vt=Array(516);for(Tt=0;Tt<516;Tt++)kt=Tt%4,Dt[Tt]=515-Tt,Vt[Tt]=Tt-2*kt+3;for(St(Dt,function(Ot,Lt){return(Ot/4|0)-(Lt/4|0)}),Tt=0;Tt<516;Tt++)if(Dt[Tt]!==Vt[Tt])return!0});yt("sort",function(Tt){return Tt!==void 0&&ht(Tt),Ut?St(this,Tt):dt(ft(this),function(kt){return function(Dt,Vt){return kt!==void 0?+kt(Dt,Vt)||0:Vt!=Vt?-1:Dt!=Dt?1:Dt===0&&Vt===0?1/Dt>0&&1/Vt<0?1:-1:Dt>Vt}}(Tt))},!Ut||xt)},5021:(rt,at,s)=>{var et=s(260),nt=s(7466),ot=s(1400),ht=s(6304),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("subarray",function(pt,lt){var mt=dt(this),st=mt.length,ut=ot(pt,st);return new(ht(mt))(mt.buffer,mt.byteOffset+ut*mt.BYTES_PER_ELEMENT,nt((lt===void 0?st:ot(lt,st))-ut))})},2974:(rt,at,s)=>{var et=s(7854),nt=s(2104),ot=s(260),ht=s(7293),dt=s(206),pt=et.Int8Array,lt=ot.aTypedArray,mt=ot.exportTypedArrayMethod,st=[].toLocaleString,ut=!!pt&&ht(function(){st.call(new pt(1))});mt("toLocaleString",function(){return nt(st,ut?dt(lt(this)):lt(this),dt(arguments))},ht(function(){return[1,2].toLocaleString()!=new pt([1,2]).toLocaleString()})||!ht(function(){pt.prototype.toLocaleString.call([1,2])}))},5016:(rt,at,s)=>{var et=s(260).exportTypedArrayMethod,nt=s(7293),ot=s(7854),ht=s(1702),dt=ot.Uint8Array,pt=dt&&dt.prototype||{},lt=[].toString,mt=ht([].join);nt(function(){lt.call({})})&&(lt=function(){return mt(this)});var st=pt.toString!=lt;et("toString",lt,st)},2472:(rt,at,s)=>{s(9843)("Uint8",function(et){return function(nt,ot,ht){return et(this,nt,ot,ht)}})},9743:(rt,at,s)=>{s(9843)("Uint8",function(et){return function(nt,ot,ht){return et(this,nt,ot,ht)}},!0)},1202:(rt,at,s)=>{var et,nt=s(7854),ot=s(1702),ht=s(9190),dt=s(2423),pt=s(7710),lt=s(9320),mt=s(111),st=s(2050),ut=s(9909).enforce,ft=s(8536),yt=!nt.ActiveXObject&&"ActiveXObject"in nt,vt=function(Vt){return function(){return Vt(this,arguments.length?arguments[0]:void 0)}},St=pt("WeakMap",vt,lt);if(ft&&yt){et=lt.getConstructor(vt,"WeakMap",!0),dt.enable();var xt=St.prototype,Ut=ot(xt.delete),Tt=ot(xt.has),kt=ot(xt.get),Dt=ot(xt.set);ht(xt,{delete:function(Vt){if(mt(Vt)&&!st(Vt)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),Ut(this,Vt)||Ot.frozen.delete(Vt)}return Ut(this,Vt)},has:function(Vt){if(mt(Vt)&&!st(Vt)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),Tt(this,Vt)||Ot.frozen.has(Vt)}return Tt(this,Vt)},get:function(Vt){if(mt(Vt)&&!st(Vt)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),Tt(this,Vt)?kt(this,Vt):Ot.frozen.get(Vt)}return kt(this,Vt)},set:function(Vt,Ot){if(mt(Vt)&&!st(Vt)){var Lt=ut(this);Lt.frozen||(Lt.frozen=new et),Tt(this,Vt)?Dt(this,Vt,Ot):Lt.frozen.set(Vt,Ot)}else Dt(this,Vt,Ot);return this}})}},4129:(rt,at,s)=>{s(1202)},4747:(rt,at,s)=>{var et=s(7854),nt=s(8324),ot=s(8509),ht=s(8533),dt=s(8880),pt=function(mt){if(mt&&mt.forEach!==ht)try{dt(mt,"forEach",ht)}catch{mt.forEach=ht}};for(var lt in nt)nt[lt]&&pt(et[lt]&&et[lt].prototype);pt(ot)},3948:(rt,at,s)=>{var et=s(7854),nt=s(8324),ot=s(8509),ht=s(6992),dt=s(8880),pt=s(5112),lt=pt("iterator"),mt=pt("toStringTag"),st=ht.values,ut=function(yt,vt){if(yt){if(yt[lt]!==st)try{dt(yt,lt,st)}catch{yt[lt]=st}if(yt[mt]||dt(yt,mt,vt),nt[vt]){for(var St in ht)if(yt[St]!==ht[St])try{dt(yt,St,ht[St])}catch{yt[St]=ht[St]}}}};for(var ft in nt)ut(et[ft]&&et[ft].prototype,ft);ut(ot,"DOMTokenList")},6815:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(7152).setInterval;et({global:!0,bind:!0,forced:nt.setInterval!==ot},{setInterval:ot})},8417:(rt,at,s)=>{var et=s(2109),nt=s(7854),ot=s(7152).setTimeout;et({global:!0,bind:!0,forced:nt.setTimeout!==ot},{setTimeout:ot})},2564:(rt,at,s)=>{s(6815),s(8417)},5556:(rt,at,s)=>{s(6992);var et=s(2109),nt=s(7854),ot=s(6916),ht=s(1702),dt=s(9781),pt=s(590),lt=s(8052),mt=s(9190),st=s(8003),ut=s(4994),ft=s(9909),yt=s(5787),vt=s(614),St=s(2597),xt=s(9974),Ut=s(648),Tt=s(9670),kt=s(111),Dt=s(1340),Vt=s(30),Ot=s(9114),Lt=s(8554),Gt=s(1246),tn=s(8053),zt=s(5112),cn=s(4362),un=zt("iterator"),fn="URLSearchParams",vn="URLSearchParamsIterator",Ft=ft.set,pn=ft.getterFor(fn),gn=ft.getterFor(vn),Tn=Object.getOwnPropertyDescriptor,In=function(Nt){if(!dt)return nt[Nt];var Yt=Tn(nt,Nt);return Yt&&Yt.value},kn=In("fetch"),Nn=In("Request"),hn=In("Headers"),Sn=Nn&&Nn.prototype,Rn=hn&&hn.prototype,wn=nt.RegExp,xn=nt.TypeError,Xn=nt.decodeURIComponent,Ln=nt.encodeURIComponent,Un=ht("".charAt),rr=ht([].join),tr=ht([].push),Qn=ht("".replace),jn=ht([].shift),Bn=ht([].splice),an=ht("".split),zn=ht("".slice),Kn=/\+/g,An=Array(4),_n=function(Nt){return An[Nt-1]||(An[Nt-1]=wn("((?:%[\\da-f]{2}){"+Nt+"})","gi"))},On=function(Nt){try{return Xn(Nt)}catch{return Nt}},Pn=function(Nt){var Yt=Qn(Nt,Kn," "),Qt=4;try{return Xn(Yt)}catch{for(;Qt;)Yt=Qn(Yt,_n(Qt--),On);return Yt}},Vn=/[!'()~]|%20/g,ir={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Mn=function(Nt){return ir[Nt]},$n=function(Nt){return Qn(Ln(Nt),Vn,Mn)},Kt=ut(function(Nt,Yt){Ft(this,{type:vn,iterator:Lt(pn(Nt).entries),kind:Yt})},"Iterator",function(){var Nt=gn(this),Yt=Nt.kind,Qt=Nt.iterator.next(),on=Qt.value;return Qt.done||(Qt.value=Yt==="keys"?on.key:Yt==="values"?on.value:[on.key,on.value]),Qt},!0),At=function(Nt){this.entries=[],this.url=null,Nt!==void 0&&(kt(Nt)?this.parseObject(Nt):this.parseQuery(typeof Nt=="string"?Un(Nt,0)==="?"?zn(Nt,1):Nt:Dt(Nt)))};At.prototype={type:fn,bindURL:function(Nt){this.url=Nt,this.update()},parseObject:function(Nt){var Yt,Qt,on,nn,dn,yn,mn,Cn=Gt(Nt);if(Cn)for(Qt=(Yt=Lt(Nt,Cn)).next;!(on=ot(Qt,Yt)).done;){if(dn=(nn=Lt(Tt(on.value))).next,(yn=ot(dn,nn)).done||(mn=ot(dn,nn)).done||!ot(dn,nn).done)throw xn("Expected sequence with length 2");tr(this.entries,{key:Dt(yn.value),value:Dt(mn.value)})}else for(var En in Nt)St(Nt,En)&&tr(this.entries,{key:En,value:Dt(Nt[En])})},parseQuery:function(Nt){if(Nt)for(var Yt,Qt,on=an(Nt,"&"),nn=0;nn<on.length;)(Yt=on[nn++]).length&&(Qt=an(Yt,"="),tr(this.entries,{key:Pn(jn(Qt)),value:Pn(rr(Qt,"="))}))},serialize:function(){for(var Nt,Yt=this.entries,Qt=[],on=0;on<Yt.length;)Nt=Yt[on++],tr(Qt,$n(Nt.key)+"="+$n(Nt.value));return rr(Qt,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var it=function(){yt(this,Rt);var Nt=arguments.length>0?arguments[0]:void 0;Ft(this,new At(Nt))},Rt=it.prototype;if(mt(Rt,{append:function(Nt,Yt){tn(arguments.length,2);var Qt=pn(this);tr(Qt.entries,{key:Dt(Nt),value:Dt(Yt)}),Qt.updateURL()},delete:function(Nt){tn(arguments.length,1);for(var Yt=pn(this),Qt=Yt.entries,on=Dt(Nt),nn=0;nn<Qt.length;)Qt[nn].key===on?Bn(Qt,nn,1):nn++;Yt.updateURL()},get:function(Nt){tn(arguments.length,1);for(var Yt=pn(this).entries,Qt=Dt(Nt),on=0;on<Yt.length;on++)if(Yt[on].key===Qt)return Yt[on].value;return null},getAll:function(Nt){tn(arguments.length,1);for(var Yt=pn(this).entries,Qt=Dt(Nt),on=[],nn=0;nn<Yt.length;nn++)Yt[nn].key===Qt&&tr(on,Yt[nn].value);return on},has:function(Nt){tn(arguments.length,1);for(var Yt=pn(this).entries,Qt=Dt(Nt),on=0;on<Yt.length;)if(Yt[on++].key===Qt)return!0;return!1},set:function(Nt,Yt){tn(arguments.length,1);for(var Qt,on=pn(this),nn=on.entries,dn=!1,yn=Dt(Nt),mn=Dt(Yt),Cn=0;Cn<nn.length;Cn++)(Qt=nn[Cn]).key===yn&&(dn?Bn(nn,Cn--,1):(dn=!0,Qt.value=mn));dn||tr(nn,{key:yn,value:mn}),on.updateURL()},sort:function(){var Nt=pn(this);cn(Nt.entries,function(Yt,Qt){return Yt.key>Qt.key?1:-1}),Nt.updateURL()},forEach:function(Nt){for(var Yt,Qt=pn(this).entries,on=xt(Nt,arguments.length>1?arguments[1]:void 0),nn=0;nn<Qt.length;)on((Yt=Qt[nn++]).value,Yt.key,this)},keys:function(){return new Kt(this,"keys")},values:function(){return new Kt(this,"values")},entries:function(){return new Kt(this,"entries")}},{enumerable:!0}),lt(Rt,un,Rt.entries,{name:"entries"}),lt(Rt,"toString",function(){return pn(this).serialize()},{enumerable:!0}),st(it,fn),et({global:!0,constructor:!0,forced:!pt},{URLSearchParams:it}),!pt&&vt(hn)){var bt=ht(Rn.has),wt=ht(Rn.set),Et=function(Nt){if(kt(Nt)){var Yt,Qt=Nt.body;if(Ut(Qt)===fn)return Yt=Nt.headers?new hn(Nt.headers):new hn,bt(Yt,"content-type")||wt(Yt,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Vt(Nt,{body:Ot(0,Dt(Qt)),headers:Ot(0,Yt)})}return Nt};if(vt(kn)&&et({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(Nt){return kn(Nt,arguments.length>1?Et(arguments[1]):{})}}),vt(Nn)){var Mt=function(Nt){return yt(this,Sn),new Nn(Nt,arguments.length>1?Et(arguments[1]):{})};Sn.constructor=Mt,Mt.prototype=Sn,et({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Mt})}}rt.exports={URLSearchParams:it,getState:pn}},1637:(rt,at,s)=>{s(5556)},8789:(rt,at,s)=>{s(8783);var et,nt=s(2109),ot=s(9781),ht=s(590),dt=s(7854),pt=s(9974),lt=s(1702),mt=s(8052),st=s(7045),ut=s(5787),ft=s(2597),yt=s(1574),vt=s(8457),St=s(1589),xt=s(8710).codeAt,Ut=s(3197),Tt=s(1340),kt=s(8003),Dt=s(8053),Vt=s(5556),Ot=s(9909),Lt=Ot.set,Gt=Ot.getterFor("URL"),tn=Vt.URLSearchParams,zt=Vt.getState,cn=dt.URL,un=dt.TypeError,fn=dt.parseInt,vn=Math.floor,Ft=Math.pow,pn=lt("".charAt),gn=lt(/./.exec),Tn=lt([].join),In=lt(1 .toString),kn=lt([].pop),Nn=lt([].push),hn=lt("".replace),Sn=lt([].shift),Rn=lt("".split),wn=lt("".slice),xn=lt("".toLowerCase),Xn=lt([].unshift),Ln="Invalid scheme",Un="Invalid host",rr="Invalid port",tr=/[a-z]/i,Qn=/[\d+-.a-z]/i,jn=/\d/,Bn=/^0x/i,an=/^[0-7]+$/,zn=/^\d+$/,Kn=/^[\da-f]+$/i,An=/[\0\t\n\r #%/:<>?@[\\\]^|]/,_n=/[\0\t\n\r #/:<>?@[\\\]^|]/,On=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Pn=/[\t\n\r]/g,Vn=function(Zn){var fr,qn,Er,sr;if(typeof Zn=="number"){for(fr=[],qn=0;qn<4;qn++)Xn(fr,Zn%256),Zn=vn(Zn/256);return Tn(fr,".")}if(typeof Zn=="object"){for(fr="",Er=function(Br){for(var Dr=null,xr=1,Yn=null,Ir=0,$r=0;$r<8;$r++)Br[$r]!==0?(Ir>xr&&(Dr=Yn,xr=Ir),Yn=null,Ir=0):(Yn===null&&(Yn=$r),++Ir);return Ir>xr&&(Dr=Yn,xr=Ir),Dr}(Zn),qn=0;qn<8;qn++)sr&&Zn[qn]===0||(sr&&(sr=!1),Er===qn?(fr+=qn?":":"::",sr=!0):(fr+=In(Zn[qn],16),qn<7&&(fr+=":")));return"["+fr+"]"}return Zn},ir={},Mn=yt({},ir,{" ":1,'"':1,"<":1,">":1,"`":1}),$n=yt({},Mn,{"#":1,"?":1,"{":1,"}":1}),Kt=yt({},$n,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),At=function(Zn,fr){var qn=xt(Zn,0);return qn>32&&qn<127&&!ft(fr,Zn)?Zn:encodeURIComponent(Zn)},it={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Rt=function(Zn,fr){var qn;return Zn.length==2&&gn(tr,pn(Zn,0))&&((qn=pn(Zn,1))==":"||!fr&&qn=="|")},bt=function(Zn){var fr;return Zn.length>1&&Rt(wn(Zn,0,2))&&(Zn.length==2||(fr=pn(Zn,2))==="/"||fr==="\\"||fr==="?"||fr==="#")},wt=function(Zn){return Zn==="."||xn(Zn)==="%2e"},Et={},Mt={},Nt={},Yt={},Qt={},on={},nn={},dn={},yn={},mn={},Cn={},En={},Wn={},Fn={},ar={},or={},nr={},ur={},mr={},wr={},Jn={},er=function(Zn,fr,qn){var Er,sr,Br,Dr=Tt(Zn);if(fr){if(sr=this.parse(Dr))throw un(sr);this.searchParams=null}else{if(qn!==void 0&&(Er=new er(qn,!0)),sr=this.parse(Dr,null,Er))throw un(sr);(Br=zt(new tn)).bindURL(this),this.searchParams=Br}};er.prototype={type:"URL",parse:function(Zn,fr,qn){var Er,sr,Br,Dr,xr,Yn=this,Ir=fr||Et,$r=0,Ar="",Qr=!1,Vr=!1,Co=!1;for(Zn=Tt(Zn),fr||(Yn.scheme="",Yn.username="",Yn.password="",Yn.host=null,Yn.port=null,Yn.path=[],Yn.query=null,Yn.fragment=null,Yn.cannotBeABaseURL=!1,Zn=hn(Zn,On,"")),Zn=hn(Zn,Pn,""),Er=vt(Zn);$r<=Er.length;){switch(sr=Er[$r],Ir){case Et:if(!sr||!gn(tr,sr)){if(fr)return Ln;Ir=Nt;continue}Ar+=xn(sr),Ir=Mt;break;case Mt:if(sr&&(gn(Qn,sr)||sr=="+"||sr=="-"||sr=="."))Ar+=xn(sr);else{if(sr!=":"){if(fr)return Ln;Ar="",Ir=Nt,$r=0;continue}if(fr&&(Yn.isSpecial()!=ft(it,Ar)||Ar=="file"&&(Yn.includesCredentials()||Yn.port!==null)||Yn.scheme=="file"&&!Yn.host))return;if(Yn.scheme=Ar,fr)return void(Yn.isSpecial()&&it[Yn.scheme]==Yn.port&&(Yn.port=null));Ar="",Yn.scheme=="file"?Ir=Fn:Yn.isSpecial()&&qn&&qn.scheme==Yn.scheme?Ir=Yt:Yn.isSpecial()?Ir=dn:Er[$r+1]=="/"?(Ir=Qt,$r++):(Yn.cannotBeABaseURL=!0,Nn(Yn.path,""),Ir=mr)}break;case Nt:if(!qn||qn.cannotBeABaseURL&&sr!="#")return Ln;if(qn.cannotBeABaseURL&&sr=="#"){Yn.scheme=qn.scheme,Yn.path=St(qn.path),Yn.query=qn.query,Yn.fragment="",Yn.cannotBeABaseURL=!0,Ir=Jn;break}Ir=qn.scheme=="file"?Fn:on;continue;case Yt:if(sr!="/"||Er[$r+1]!="/"){Ir=on;continue}Ir=yn,$r++;break;case Qt:if(sr=="/"){Ir=mn;break}Ir=ur;continue;case on:if(Yn.scheme=qn.scheme,sr==et)Yn.username=qn.username,Yn.password=qn.password,Yn.host=qn.host,Yn.port=qn.port,Yn.path=St(qn.path),Yn.query=qn.query;else if(sr=="/"||sr=="\\"&&Yn.isSpecial())Ir=nn;else if(sr=="?")Yn.username=qn.username,Yn.password=qn.password,Yn.host=qn.host,Yn.port=qn.port,Yn.path=St(qn.path),Yn.query="",Ir=wr;else{if(sr!="#"){Yn.username=qn.username,Yn.password=qn.password,Yn.host=qn.host,Yn.port=qn.port,Yn.path=St(qn.path),Yn.path.length--,Ir=ur;continue}Yn.username=qn.username,Yn.password=qn.password,Yn.host=qn.host,Yn.port=qn.port,Yn.path=St(qn.path),Yn.query=qn.query,Yn.fragment="",Ir=Jn}break;case nn:if(!Yn.isSpecial()||sr!="/"&&sr!="\\"){if(sr!="/"){Yn.username=qn.username,Yn.password=qn.password,Yn.host=qn.host,Yn.port=qn.port,Ir=ur;continue}Ir=mn}else Ir=yn;break;case dn:if(Ir=yn,sr!="/"||pn(Ar,$r+1)!="/")continue;$r++;break;case yn:if(sr!="/"&&sr!="\\"){Ir=mn;continue}break;case mn:if(sr=="@"){Qr&&(Ar="%40"+Ar),Qr=!0,Br=vt(Ar);for(var eo=0;eo<Br.length;eo++){var na=Br[eo];if(na!=":"||Co){var gs=At(na,Kt);Co?Yn.password+=gs:Yn.username+=gs}else Co=!0}Ar=""}else if(sr==et||sr=="/"||sr=="?"||sr=="#"||sr=="\\"&&Yn.isSpecial()){if(Qr&&Ar=="")return"Invalid authority";$r-=vt(Ar).length+1,Ar="",Ir=Cn}else Ar+=sr;break;case Cn:case En:if(fr&&Yn.scheme=="file"){Ir=or;continue}if(sr!=":"||Vr){if(sr==et||sr=="/"||sr=="?"||sr=="#"||sr=="\\"&&Yn.isSpecial()){if(Yn.isSpecial()&&Ar=="")return Un;if(fr&&Ar==""&&(Yn.includesCredentials()||Yn.port!==null))return;if(Dr=Yn.parseHost(Ar))return Dr;if(Ar="",Ir=nr,fr)return;continue}sr=="["?Vr=!0:sr=="]"&&(Vr=!1),Ar+=sr}else{if(Ar=="")return Un;if(Dr=Yn.parseHost(Ar))return Dr;if(Ar="",Ir=Wn,fr==En)return}break;case Wn:if(!gn(jn,sr)){if(sr==et||sr=="/"||sr=="?"||sr=="#"||sr=="\\"&&Yn.isSpecial()||fr){if(Ar!=""){var es=fn(Ar,10);if(es>65535)return rr;Yn.port=Yn.isSpecial()&&es===it[Yn.scheme]?null:es,Ar=""}if(fr)return;Ir=nr;continue}return rr}Ar+=sr;break;case Fn:if(Yn.scheme="file",sr=="/"||sr=="\\")Ir=ar;else{if(!qn||qn.scheme!="file"){Ir=ur;continue}if(sr==et)Yn.host=qn.host,Yn.path=St(qn.path),Yn.query=qn.query;else if(sr=="?")Yn.host=qn.host,Yn.path=St(qn.path),Yn.query="",Ir=wr;else{if(sr!="#"){bt(Tn(St(Er,$r),""))||(Yn.host=qn.host,Yn.path=St(qn.path),Yn.shortenPath()),Ir=ur;continue}Yn.host=qn.host,Yn.path=St(qn.path),Yn.query=qn.query,Yn.fragment="",Ir=Jn}}break;case ar:if(sr=="/"||sr=="\\"){Ir=or;break}qn&&qn.scheme=="file"&&!bt(Tn(St(Er,$r),""))&&(Rt(qn.path[0],!0)?Nn(Yn.path,qn.path[0]):Yn.host=qn.host),Ir=ur;continue;case or:if(sr==et||sr=="/"||sr=="\\"||sr=="?"||sr=="#"){if(!fr&&Rt(Ar))Ir=ur;else if(Ar==""){if(Yn.host="",fr)return;Ir=nr}else{if(Dr=Yn.parseHost(Ar))return Dr;if(Yn.host=="localhost"&&(Yn.host=""),fr)return;Ar="",Ir=nr}continue}Ar+=sr;break;case nr:if(Yn.isSpecial()){if(Ir=ur,sr!="/"&&sr!="\\")continue}else if(fr||sr!="?")if(fr||sr!="#"){if(sr!=et&&(Ir=ur,sr!="/"))continue}else Yn.fragment="",Ir=Jn;else Yn.query="",Ir=wr;break;case ur:if(sr==et||sr=="/"||sr=="\\"&&Yn.isSpecial()||!fr&&(sr=="?"||sr=="#")){if((xr=xn(xr=Ar))===".."||xr==="%2e."||xr===".%2e"||xr==="%2e%2e"?(Yn.shortenPath(),sr=="/"||sr=="\\"&&Yn.isSpecial()||Nn(Yn.path,"")):wt(Ar)?sr=="/"||sr=="\\"&&Yn.isSpecial()||Nn(Yn.path,""):(Yn.scheme=="file"&&!Yn.path.length&&Rt(Ar)&&(Yn.host&&(Yn.host=""),Ar=pn(Ar,0)+":"),Nn(Yn.path,Ar)),Ar="",Yn.scheme=="file"&&(sr==et||sr=="?"||sr=="#"))for(;Yn.path.length>1&&Yn.path[0]==="";)Sn(Yn.path);sr=="?"?(Yn.query="",Ir=wr):sr=="#"&&(Yn.fragment="",Ir=Jn)}else Ar+=At(sr,$n);break;case mr:sr=="?"?(Yn.query="",Ir=wr):sr=="#"?(Yn.fragment="",Ir=Jn):sr!=et&&(Yn.path[0]+=At(sr,ir));break;case wr:fr||sr!="#"?sr!=et&&(sr=="'"&&Yn.isSpecial()?Yn.query+="%27":Yn.query+=sr=="#"?"%23":At(sr,ir)):(Yn.fragment="",Ir=Jn);break;case Jn:sr!=et&&(Yn.fragment+=At(sr,Mn))}$r++}},parseHost:function(Zn){var fr,qn,Er;if(pn(Zn,0)=="["){if(pn(Zn,Zn.length-1)!="]"||(fr=function(sr){var Br,Dr,xr,Yn,Ir,$r,Ar,Qr=[0,0,0,0,0,0,0,0],Vr=0,Co=null,eo=0,na=function(){return pn(sr,eo)};if(na()==":"){if(pn(sr,1)!=":")return;eo+=2,Co=++Vr}for(;na();){if(Vr==8)return;if(na()!=":"){for(Br=Dr=0;Dr<4&&gn(Kn,na());)Br=16*Br+fn(na(),16),eo++,Dr++;if(na()=="."){if(Dr==0||(eo-=Dr,Vr>6))return;for(xr=0;na();){if(Yn=null,xr>0){if(!(na()=="."&&xr<4))return;eo++}if(!gn(jn,na()))return;for(;gn(jn,na());){if(Ir=fn(na(),10),Yn===null)Yn=Ir;else{if(Yn==0)return;Yn=10*Yn+Ir}if(Yn>255)return;eo++}Qr[Vr]=256*Qr[Vr]+Yn,++xr!=2&&xr!=4||Vr++}if(xr!=4)return;break}if(na()==":"){if(eo++,!na())return}else if(na())return;Qr[Vr++]=Br}else{if(Co!==null)return;eo++,Co=++Vr}}if(Co!==null)for($r=Vr-Co,Vr=7;Vr!=0&&$r>0;)Ar=Qr[Vr],Qr[Vr--]=Qr[Co+$r-1],Qr[Co+--$r]=Ar;else if(Vr!=8)return;return Qr}(wn(Zn,1,-1)),!fr))return Un;this.host=fr}else if(this.isSpecial()){if(Zn=Ut(Zn),gn(An,Zn)||(fr=function(sr){var Br,Dr,xr,Yn,Ir,$r,Ar,Qr=Rn(sr,".");if(Qr.length&&Qr[Qr.length-1]==""&&Qr.length--,(Br=Qr.length)>4)return sr;for(Dr=[],xr=0;xr<Br;xr++){if((Yn=Qr[xr])=="")return sr;if(Ir=10,Yn.length>1&&pn(Yn,0)=="0"&&(Ir=gn(Bn,Yn)?16:8,Yn=wn(Yn,Ir==8?1:2)),Yn==="")$r=0;else{if(!gn(Ir==10?zn:Ir==8?an:Kn,Yn))return sr;$r=fn(Yn,Ir)}Nn(Dr,$r)}for(xr=0;xr<Br;xr++)if($r=Dr[xr],xr==Br-1){if($r>=Ft(256,5-Br))return null}else if($r>255)return null;for(Ar=kn(Dr),xr=0;xr<Dr.length;xr++)Ar+=Dr[xr]*Ft(256,3-xr);return Ar}(Zn),fr===null))return Un;this.host=fr}else{if(gn(_n,Zn))return Un;for(fr="",qn=vt(Zn),Er=0;Er<qn.length;Er++)fr+=At(qn[Er],ir);this.host=fr}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return ft(it,this.scheme)},shortenPath:function(){var Zn=this.path,fr=Zn.length;!fr||this.scheme=="file"&&fr==1&&Rt(Zn[0],!0)||Zn.length--},serialize:function(){var Zn=this,fr=Zn.scheme,qn=Zn.username,Er=Zn.password,sr=Zn.host,Br=Zn.port,Dr=Zn.path,xr=Zn.query,Yn=Zn.fragment,Ir=fr+":";return sr!==null?(Ir+="//",Zn.includesCredentials()&&(Ir+=qn+(Er?":"+Er:"")+"@"),Ir+=Vn(sr),Br!==null&&(Ir+=":"+Br)):fr=="file"&&(Ir+="//"),Ir+=Zn.cannotBeABaseURL?Dr[0]:Dr.length?"/"+Tn(Dr,"/"):"",xr!==null&&(Ir+="?"+xr),Yn!==null&&(Ir+="#"+Yn),Ir},setHref:function(Zn){var fr=this.parse(Zn);if(fr)throw un(fr);this.searchParams.update()},getOrigin:function(){var Zn=this.scheme,fr=this.port;if(Zn=="blob")try{return new hr(Zn.path[0]).origin}catch{return"null"}return Zn!="file"&&this.isSpecial()?Zn+"://"+Vn(this.host)+(fr!==null?":"+fr:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(Zn){this.parse(Tt(Zn)+":",Et)},getUsername:function(){return this.username},setUsername:function(Zn){var fr=vt(Tt(Zn));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var qn=0;qn<fr.length;qn++)this.username+=At(fr[qn],Kt)}},getPassword:function(){return this.password},setPassword:function(Zn){var fr=vt(Tt(Zn));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var qn=0;qn<fr.length;qn++)this.password+=At(fr[qn],Kt)}},getHost:function(){var Zn=this.host,fr=this.port;return Zn===null?"":fr===null?Vn(Zn):Vn(Zn)+":"+fr},setHost:function(Zn){this.cannotBeABaseURL||this.parse(Zn,Cn)},getHostname:function(){var Zn=this.host;return Zn===null?"":Vn(Zn)},setHostname:function(Zn){this.cannotBeABaseURL||this.parse(Zn,En)},getPort:function(){var Zn=this.port;return Zn===null?"":Tt(Zn)},setPort:function(Zn){this.cannotHaveUsernamePasswordPort()||((Zn=Tt(Zn))==""?this.port=null:this.parse(Zn,Wn))},getPathname:function(){var Zn=this.path;return this.cannotBeABaseURL?Zn[0]:Zn.length?"/"+Tn(Zn,"/"):""},setPathname:function(Zn){this.cannotBeABaseURL||(this.path=[],this.parse(Zn,nr))},getSearch:function(){var Zn=this.query;return Zn?"?"+Zn:""},setSearch:function(Zn){(Zn=Tt(Zn))==""?this.query=null:(pn(Zn,0)=="?"&&(Zn=wn(Zn,1)),this.query="",this.parse(Zn,wr)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var Zn=this.fragment;return Zn?"#"+Zn:""},setHash:function(Zn){(Zn=Tt(Zn))!=""?(pn(Zn,0)=="#"&&(Zn=wn(Zn,1)),this.fragment="",this.parse(Zn,Jn)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var hr=function(Zn){var fr=ut(this,Sr),qn=Dt(arguments.length,1)>1?arguments[1]:void 0,Er=Lt(fr,new er(Zn,!1,qn));ot||(fr.href=Er.serialize(),fr.origin=Er.getOrigin(),fr.protocol=Er.getProtocol(),fr.username=Er.getUsername(),fr.password=Er.getPassword(),fr.host=Er.getHost(),fr.hostname=Er.getHostname(),fr.port=Er.getPort(),fr.pathname=Er.getPathname(),fr.search=Er.getSearch(),fr.searchParams=Er.getSearchParams(),fr.hash=Er.getHash())},Sr=hr.prototype,yr=function(Zn,fr){return{get:function(){return Gt(this)[Zn]()},set:fr&&function(qn){return Gt(this)[fr](qn)},configurable:!0,enumerable:!0}};if(ot&&(st(Sr,"href",yr("serialize","setHref")),st(Sr,"origin",yr("getOrigin")),st(Sr,"protocol",yr("getProtocol","setProtocol")),st(Sr,"username",yr("getUsername","setUsername")),st(Sr,"password",yr("getPassword","setPassword")),st(Sr,"host",yr("getHost","setHost")),st(Sr,"hostname",yr("getHostname","setHostname")),st(Sr,"port",yr("getPort","setPort")),st(Sr,"pathname",yr("getPathname","setPathname")),st(Sr,"search",yr("getSearch","setSearch")),st(Sr,"searchParams",yr("getSearchParams")),st(Sr,"hash",yr("getHash","setHash"))),mt(Sr,"toJSON",function(){return Gt(this).serialize()},{enumerable:!0}),mt(Sr,"toString",function(){return Gt(this).serialize()},{enumerable:!0}),cn){var Pr=cn.createObjectURL,jr=cn.revokeObjectURL;Pr&&mt(hr,"createObjectURL",pt(Pr,cn)),jr&&mt(hr,"revokeObjectURL",pt(jr,cn))}kt(hr,"URL"),nt({global:!0,constructor:!0,forced:!ht,sham:!ot},{URL:hr})},285:(rt,at,s)=>{s(8789)},3753:(rt,at,s)=>{var et=s(2109),nt=s(6916);et({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return nt(URL.prototype.toString,this)}})},7987:function(rt,at,s){var et,nt;et=function(ot){var ht,dt,pt={template:"[%t] %l:",levelFormatter:function(st){return st.toUpperCase()},nameFormatter:function(st){return st||"root"},timestampFormatter:function(st){return st.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},lt={},mt={reg:function(st){if(!st||!st.getLogger)throw new TypeError("Argument is not a root logger");ht=st},apply:function(st,ut){if(!st||!st.setLevel)throw new TypeError("Argument is not a logger");var ft=st.methodFactory,yt=st.name||"",vt=lt[yt]||lt[""]||pt;return lt[yt]||(st.methodFactory=function(St,xt,Ut){var Tt=ft(St,xt,Ut),kt=lt[Ut]||lt[""],Dt=kt.template.indexOf("%t")!==-1,Vt=kt.template.indexOf("%l")!==-1,Ot=kt.template.indexOf("%n")!==-1;return function(){for(var Lt="",Gt=arguments.length,tn=Array(Gt),zt=0;zt<Gt;zt++)tn[zt]=arguments[zt];if(yt||!lt[Ut]){var cn=kt.timestampFormatter(new Date),un=kt.levelFormatter(St),fn=kt.nameFormatter(Ut);kt.format?Lt+=kt.format(un,fn,cn):(Lt+=kt.template,Dt&&(Lt=Lt.replace(/%t/,cn)),Vt&&(Lt=Lt.replace(/%l/,un)),Ot&&(Lt=Lt.replace(/%n/,fn))),tn.length&&typeof tn[0]=="string"?tn[0]=Lt+" "+tn[0]:tn.unshift(Lt)}Tt.apply(void 0,tn)}}),(ut=ut||{}).template&&(ut.format=void 0),lt[yt]=function(St){for(var xt,Ut=1,Tt=arguments.length;Ut<Tt;Ut++)for(xt in arguments[Ut])Object.prototype.hasOwnProperty.call(arguments[Ut],xt)&&(St[xt]=arguments[Ut][xt]);return St}({},vt,ut),st.setLevel(st.getLevel()),ht||st.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),st}};return ot&&(dt=ot.prefix,mt.noConflict=function(){return ot.prefix===mt&&(ot.prefix=dt),mt}),mt},(nt=et.call(at,s,at,rt))===void 0||(rt.exports=nt)},2043:function(rt,at,s){var et,nt;(function(ot,ht){et=function(){var dt=function(){},pt="undefined",lt=typeof window!==pt&&typeof window.navigator!==pt&&/Trident\/|MSIE /.test(window.navigator.userAgent),mt=["trace","debug","info","warn","error"];function st(Dt,Vt){var Ot=Dt[Vt];if(typeof Ot.bind=="function")return Ot.bind(Dt);try{return Function.prototype.bind.call(Ot,Dt)}catch{return function(){return Function.prototype.apply.apply(Ot,[Dt,arguments])}}}function ut(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function ft(Dt){return Dt==="debug"&&(Dt="log"),typeof console!==pt&&(Dt==="trace"&&lt?ut:console[Dt]!==void 0?st(console,Dt):console.log!==void 0?st(console,"log"):dt)}function yt(Dt,Vt){for(var Ot=0;Ot<mt.length;Ot++){var Lt=mt[Ot];this[Lt]=Ot<Dt?dt:this.methodFactory(Lt,Dt,Vt)}this.log=this.debug}function vt(Dt,Vt,Ot){return function(){typeof console!==pt&&(yt.call(this,Vt,Ot),this[Dt].apply(this,arguments))}}function St(Dt,Vt,Ot){return ft(Dt)||vt.apply(this,arguments)}function xt(Dt,Vt,Ot){var Lt,Gt=this;Vt=Vt??"WARN";var tn="loglevel";function zt(){var un;if(typeof window!==pt&&tn){try{un=window.localStorage[tn]}catch{}if(typeof un===pt)try{var fn=window.document.cookie,vn=fn.indexOf(encodeURIComponent(tn)+"=");vn!==-1&&(un=/^([^;]+)/.exec(fn.slice(vn))[1])}catch{}return Gt.levels[un]===void 0&&(un=void 0),un}}typeof Dt=="string"?tn+=":"+Dt:typeof Dt=="symbol"&&(tn=void 0),Gt.name=Dt,Gt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Gt.methodFactory=Ot||St,Gt.getLevel=function(){return Lt},Gt.setLevel=function(un,fn){if(typeof un=="string"&&Gt.levels[un.toUpperCase()]!==void 0&&(un=Gt.levels[un.toUpperCase()]),!(typeof un=="number"&&un>=0&&un<=Gt.levels.SILENT))throw"log.setLevel() called with invalid level: "+un;if(Lt=un,fn!==!1&&function(vn){var Ft=(mt[vn]||"silent").toUpperCase();if(typeof window!==pt&&tn){try{return void(window.localStorage[tn]=Ft)}catch{}try{window.document.cookie=encodeURIComponent(tn)+"="+Ft+";"}catch{}}}(un),yt.call(Gt,un,Dt),typeof console===pt&&un<Gt.levels.SILENT)return"No console available for logging"},Gt.setDefaultLevel=function(un){Vt=un,zt()||Gt.setLevel(un,!1)},Gt.resetLevel=function(){Gt.setLevel(Vt,!1),function(){if(typeof window!==pt&&tn){try{return void window.localStorage.removeItem(tn)}catch{}try{window.document.cookie=encodeURIComponent(tn)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}()},Gt.enableAll=function(un){Gt.setLevel(Gt.levels.TRACE,un)},Gt.disableAll=function(un){Gt.setLevel(Gt.levels.SILENT,un)};var cn=zt();cn==null&&(cn=Vt),Gt.setLevel(cn,!1)}var Ut=new xt,Tt={};Ut.getLogger=function(Dt){if(typeof Dt!="symbol"&&typeof Dt!="string"||Dt==="")throw new TypeError("You must supply a name when creating a logger.");var Vt=Tt[Dt];return Vt||(Vt=Tt[Dt]=new xt(Dt,Ut.getLevel(),Ut.methodFactory)),Vt};var kt=typeof window!==pt?window.log:void 0;return Ut.noConflict=function(){return typeof window!==pt&&window.log===Ut&&(window.log=kt),Ut},Ut.getLoggers=function(){return Tt},Ut.default=Ut,Ut},(nt=et.call(at,s,at,rt))===void 0||(rt.exports=nt)})()},7618:rt=>{function at(Lt,Gt){if(!et)return!1;const tn=Lt.buffer;let zt=st.get(tn);if(zt==null){if((zt=s.validate(tn))&&Gt)try{new s.Instance(new s.Module(tn)).exports[0]()}catch{zt=!1}st.set(tn,zt)}return zt}const s=globalThis.WebAssembly,et=typeof s=="object",nt=Lt=>Lt!==void 0,ot=(...Lt)=>Uint8Array.of(0,97,115,109,1,0,0,0,...Lt),ht=(...Lt)=>Uint32Array.of(1836278016,1,...Lt),dt=(...Lt)=>ht(1610679297,33751040,...Lt,40239360,259),pt=(...Lt)=>ot(1,4,1,96,0,0,3,2,1,0,...Lt,11,0,10,4,110,97,109,101,2,3,1,0,0),lt=(...Lt)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...Lt),mt=(...Lt)=>lt(...Lt,2842,4096,28164,28001,357,260,256,560,259,0),st=new WeakMap,ut=ht(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),ft=ot(5,3,1,4,1,0,8,4,110,97,109,101,2,1,0),yt=lt(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),vt=ht(1610679297,33751040,134873089,100664833,185276736),St=ot(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),xt=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),Ut=mt(3082,2561,17152,0,0,252),Tt=mt(2058,1537,16640,49152),kt=dt(101318657,301990913,268438272,1835101700,17039717),Dt=pt(5,4,1,3,1,1,10,7,1,5,0,254,3,0),Vt=dt(84344833,6357249,17369600,4259847,186257917,1845758464),Ot=pt(10,7,1,5,0,208,112,26);rt.exports={support:(Lt=1)=>et&&at(Uint32Array.of(1836278016,Lt)),get supportStreaming(){return et&&nt(s.instantiateStreaming)},feature:{get bigInt(){return at(ut,!0)},get bulk(){return at(yt)},get exceptions(){return at(vt)},get memory64(){return at(ft)},get mutableGlobal(){return at(St)},get multiValue(){return at(xt)},get saturateConversions(){return at(Ut)},get signExtensions(){return at(Tt)},get tailCall(){return at(kt)},get threads(){return at(Dt)},get simd(){return at(Vt)},get references(){return at(Ot)},get typeReflection(){return et&&nt(s.Memory.type)},get funcReferences(){return et&&nt(s.Function)}}}}},ct={};function gt(rt){var at=ct[rt];if(at!==void 0)return at.exports;var s=ct[rt]={id:rt,loaded:!1,exports:{}};return tt[rt].call(s.exports,s,s.exports,gt),s.loaded=!0,s.exports}return gt.amdO={},gt.n=rt=>{var at=rt&&rt.__esModule?()=>rt.default:()=>rt;return gt.d(at,{a:at}),at},gt.d=(rt,at)=>{for(var s in at)gt.o(at,s)&&!gt.o(rt,s)&&Object.defineProperty(rt,s,{enumerable:!0,get:at[s]})},gt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),gt.hmd=rt=>((rt=Object.create(rt)).children||(rt.children=[]),Object.defineProperty(rt,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+rt.id)}}),rt),gt.o=(rt,at)=>Object.prototype.hasOwnProperty.call(rt,at),gt.r=rt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(rt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(rt,"__esModule",{value:!0})},gt(1256)})())})(apiRTC_min,apiRTC_min.exports);var apiRTC_minExports=apiRTC_min.exports;const GridContext=reactExports.createContext(),GridContext$1=GridContext;function getGridUtilityClass(a){return generateUtilityClass("MuiGrid",a)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(a=>`spacing-xs-${a}`),...DIRECTIONS.map(a=>`direction-xs-${a}`),...WRAPS.map(a=>`wrap-xs-${a}`),...GRID_SIZES.map(a=>`grid-xs-${a}`),...GRID_SIZES.map(a=>`grid-sm-${a}`),...GRID_SIZES.map(a=>`grid-md-${a}`),...GRID_SIZES.map(a=>`grid-lg-${a}`),...GRID_SIZES.map(a=>`grid-xl-${a}`)]),gridClasses$1=gridClasses,_excluded$x=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(a){const o=parseFloat(a);return`${o}${String(a).replace(String(o),"")||"px"}`}function generateGrid({theme:a,ownerState:o}){let _e;return a.breakpoints.keys.reduce((tt,ct)=>{let gt={};if(o[ct]&&(_e=o[ct]),!_e)return tt;if(_e===!0)gt={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(_e==="auto")gt={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const rt=resolveBreakpointValues({values:o.columns,breakpoints:a.breakpoints.values}),at=typeof rt=="object"?rt[ct]:rt;if(at==null)return tt;const s=`${Math.round(_e/at*1e8)/1e6}%`;let et={};if(o.container&&o.item&&o.columnSpacing!==0){const nt=a.spacing(o.columnSpacing);if(nt!=="0px"){const ot=`calc(${s} + ${getOffset(nt)})`;et={flexBasis:ot,maxWidth:ot}}}gt=_extends({flexBasis:s,flexGrow:0,maxWidth:s},et)}return a.breakpoints.values[ct]===0?Object.assign(tt,gt):tt[a.breakpoints.up(ct)]=gt,tt},{})}function generateDirection({theme:a,ownerState:o}){const _e=resolveBreakpointValues({values:o.direction,breakpoints:a.breakpoints.values});return handleBreakpoints({theme:a},_e,tt=>{const ct={flexDirection:tt};return tt.indexOf("column")===0&&(ct[`& > .${gridClasses$1.item}`]={maxWidth:"none"}),ct})}function extractZeroValueBreakpointKeys({breakpoints:a,values:o}){let _e="";Object.keys(o).forEach(ct=>{_e===""&&o[ct]!==0&&(_e=ct)});const tt=Object.keys(a).sort((ct,gt)=>a[ct]-a[gt]);return tt.slice(0,tt.indexOf(_e))}function generateRowGap({theme:a,ownerState:o}){const{container:_e,rowSpacing:tt}=o;let ct={};if(_e&&tt!==0){const gt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let rt;typeof gt=="object"&&(rt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:gt})),ct=handleBreakpoints({theme:a},gt,(at,s)=>{var et;const nt=a.spacing(at);return nt!=="0px"?{marginTop:`-${getOffset(nt)}`,[`& > .${gridClasses$1.item}`]:{paddingTop:getOffset(nt)}}:(et=rt)!=null&&et.includes(s)?{}:{marginTop:0,[`& > .${gridClasses$1.item}`]:{paddingTop:0}}})}return ct}function generateColumnGap({theme:a,ownerState:o}){const{container:_e,columnSpacing:tt}=o;let ct={};if(_e&&tt!==0){const gt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let rt;typeof gt=="object"&&(rt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:gt})),ct=handleBreakpoints({theme:a},gt,(at,s)=>{var et;const nt=a.spacing(at);return nt!=="0px"?{width:`calc(100% + ${getOffset(nt)})`,marginLeft:`-${getOffset(nt)}`,[`& > .${gridClasses$1.item}`]:{paddingLeft:getOffset(nt)}}:(et=rt)!=null&&et.includes(s)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses$1.item}`]:{paddingLeft:0}}})}return ct}function resolveSpacingStyles(a,o,_e={}){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[_e[`spacing-xs-${String(a)}`]];const tt=[];return o.forEach(ct=>{const gt=a[ct];Number(gt)>0&&tt.push(_e[`spacing-${ct}-${String(gt)}`])}),tt}const GridRoot=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{container:tt,direction:ct,item:gt,spacing:rt,wrap:at,zeroMinWidth:s,breakpoints:et}=_e;let nt=[];tt&&(nt=resolveSpacingStyles(rt,et,o));const ot=[];return et.forEach(ht=>{const dt=_e[ht];dt&&ot.push(o[`grid-${ht}-${String(dt)}`])}),[o.root,tt&&o.container,gt&&o.item,s&&o.zeroMinWidth,...nt,ct!=="row"&&o[`direction-xs-${String(ct)}`],at!=="wrap"&&o[`wrap-xs-${String(at)}`],...ot]}})(({ownerState:a})=>_extends({boxSizing:"border-box"},a.container&&{display:"flex",flexWrap:"wrap",width:"100%"},a.item&&{margin:0},a.zeroMinWidth&&{minWidth:0},a.wrap!=="wrap"&&{flexWrap:a.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(a,o){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[`spacing-xs-${String(a)}`];const _e=[];return o.forEach(tt=>{const ct=a[tt];if(Number(ct)>0){const gt=`spacing-${tt}-${String(ct)}`;_e.push(gt)}}),_e}const useUtilityClasses$q=a=>{const{classes:o,container:_e,direction:tt,item:ct,spacing:gt,wrap:rt,zeroMinWidth:at,breakpoints:s}=a;let et=[];_e&&(et=resolveSpacingClasses(gt,s));const nt=[];s.forEach(ht=>{const dt=a[ht];dt&&nt.push(`grid-${ht}-${String(dt)}`)});const ot={root:["root",_e&&"container",ct&&"item",at&&"zeroMinWidth",...et,tt!=="row"&&`direction-xs-${String(tt)}`,rt!=="wrap"&&`wrap-xs-${String(rt)}`,...nt]};return composeClasses(ot,getGridUtilityClass,o)},Grid=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiGrid"}),{breakpoints:ct}=useTheme(),gt=extendSxProp(tt),{className:rt,columns:at,columnSpacing:s,component:et="div",container:nt=!1,direction:ot="row",item:ht=!1,rowSpacing:dt,spacing:pt=0,wrap:lt="wrap",zeroMinWidth:mt=!1}=gt,st=_objectWithoutPropertiesLoose(gt,_excluded$x),ut=dt||pt,ft=s||pt,yt=reactExports.useContext(GridContext$1),vt=nt?at||12:yt,St={},xt=_extends({},st);ct.keys.forEach(kt=>{st[kt]!=null&&(St[kt]=st[kt],delete xt[kt])});const Ut=_extends({},gt,{columns:vt,container:nt,direction:ot,item:ht,rowSpacing:ut,columnSpacing:ft,wrap:lt,zeroMinWidth:mt,spacing:pt},St,{breakpoints:ct.keys}),Tt=useUtilityClasses$q(Ut);return jsxRuntimeExports.jsx(GridContext$1.Provider,{value:vt,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:Ut,className:clsx(Tt.root,rt),as:et,ref:_e},xt))})}),d$1=Grid,ListContext=reactExports.createContext({}),ListContext$1=ListContext,dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),dividerClasses$1=dividerClasses,listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemIconClasses$1=listItemIconClasses;function getTypographyUtilityClass(a){return generateUtilityClass("MuiTypography",a)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$w=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$p=a=>{const{align:o,gutterBottom:_e,noWrap:tt,paragraph:ct,variant:gt,classes:rt}=a,at={root:["root",gt,a.align!=="inherit"&&`align${capitalize(o)}`,_e&&"gutterBottom",tt&&"noWrap",ct&&"paragraph"]};return composeClasses(at,getTypographyUtilityClass,rt)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.variant&&o[_e.variant],_e.align!=="inherit"&&o[`align${capitalize(_e.align)}`],_e.noWrap&&o.noWrap,_e.gutterBottom&&o.gutterBottom,_e.paragraph&&o.paragraph]}})(({theme:a,ownerState:o})=>_extends({margin:0},o.variant==="inherit"&&{font:"inherit"},o.variant!=="inherit"&&a.typography[o.variant],o.align!=="inherit"&&{textAlign:o.align},o.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o.gutterBottom&&{marginBottom:"0.35em"},o.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations$1={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors$1=a=>colorTransformations$1[a]||a,Typography=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTypography"}),ct=transformDeprecatedColors$1(tt.color),gt=extendSxProp(_extends({},tt,{color:ct})),{align:rt="inherit",className:at,component:s,gutterBottom:et=!1,noWrap:nt=!1,paragraph:ot=!1,variant:ht="body1",variantMapping:dt=defaultVariantMapping}=gt,pt=_objectWithoutPropertiesLoose(gt,_excluded$w),lt=_extends({},gt,{align:rt,color:ct,className:at,component:s,gutterBottom:et,noWrap:nt,paragraph:ot,variant:ht,variantMapping:dt}),mt=s||(ot?"p":dt[ht]||defaultVariantMapping[ht])||"span",st=useUtilityClasses$p(lt);return jsxRuntimeExports.jsx(TypographyRoot,_extends({as:mt,ref:_e,ownerState:lt,className:clsx(st.root,at)},pt))}),Typography$1=Typography,listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),listItemTextClasses$1=listItemTextClasses;function getMenuItemUtilityClass(a){return generateUtilityClass("MuiMenuItem",a)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),menuItemClasses$1=menuItemClasses,_excluded$v=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],overridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.dense&&o.dense,_e.divider&&o.divider,!_e.disableGutters&&o.gutters]},useUtilityClasses$o=a=>{const{disabled:o,dense:_e,divider:tt,disableGutters:ct,selected:gt,classes:rt}=a,s=composeClasses({root:["root",_e&&"dense",o&&"disabled",!ct&&"gutters",tt&&"divider",gt&&"selected"]},getMenuItemUtilityClass,rt);return _extends({},rt,s)},MenuItemRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses$1.selected}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity),[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},[`&.${menuItemClasses$1.selected}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity)}},[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${menuItemClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`& + .${dividerClasses$1.root}`]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},[`& + .${dividerClasses$1.inset}`]:{marginLeft:52},[`& .${listItemTextClasses$1.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses$1.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses$1.root}`]:{minWidth:36}},!o.dense&&{[a.breakpoints.up("sm")]:{minHeight:"auto"}},o.dense&&_extends({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,{[`& .${listItemIconClasses$1.root} svg`]:{fontSize:"1.25rem"}}))),MenuItem=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiMenuItem"}),{autoFocus:ct=!1,component:gt="li",dense:rt=!1,divider:at=!1,disableGutters:s=!1,focusVisibleClassName:et,role:nt="menuitem",tabIndex:ot,className:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$v),pt=reactExports.useContext(ListContext$1),lt=reactExports.useMemo(()=>({dense:rt||pt.dense||!1,disableGutters:s}),[pt.dense,rt,s]),mt=reactExports.useRef(null);useEnhancedEffect$1(()=>{ct&&mt.current&&mt.current.focus()},[ct]);const st=_extends({},tt,{dense:lt.dense,divider:at,disableGutters:s}),ut=useUtilityClasses$o(tt),ft=useForkRef(mt,_e);let yt;return tt.disabled||(yt=ot!==void 0?ot:-1),jsxRuntimeExports.jsx(ListContext$1.Provider,{value:lt,children:jsxRuntimeExports.jsx(MenuItemRoot,_extends({ref:ft,role:nt,tabIndex:yt,component:gt,focusVisibleClassName:clsx(ut.focusVisible,et),className:clsx(ut.root,ht)},dt,{ownerState:st,classes:ut}))})}),MenuItem$1=MenuItem;function isHostComponent(a){return typeof a=="string"}function appendOwnerState(a,o,_e){return a===void 0||isHostComponent(a)?o:_extends({},o,{ownerState:_extends({},o.ownerState,_e)})}const defaultContextValue={disableDefaultClasses:!1},ClassNameConfiguratorContext=reactExports.createContext(defaultContextValue);function useClassNamesOverride(a){const{disableDefaultClasses:o}=reactExports.useContext(ClassNameConfiguratorContext);return _e=>o?"":a(_e)}function extractEventHandlers(a,o=[]){if(a===void 0)return{};const _e={};return Object.keys(a).filter(tt=>tt.match(/^on[A-Z]/)&&typeof a[tt]=="function"&&!o.includes(tt)).forEach(tt=>{_e[tt]=a[tt]}),_e}function resolveComponentProps(a,o,_e){return typeof a=="function"?a(o,_e):a}function omitEventHandlers(a){if(a===void 0)return{};const o={};return Object.keys(a).filter(_e=>!(_e.match(/^on[A-Z]/)&&typeof a[_e]=="function")).forEach(_e=>{o[_e]=a[_e]}),o}function mergeSlotProps(a){const{getSlotProps:o,additionalProps:_e,externalSlotProps:tt,externalForwardedProps:ct,className:gt}=a;if(!o){const dt=clsx(ct==null?void 0:ct.className,tt==null?void 0:tt.className,gt,_e==null?void 0:_e.className),pt=_extends({},_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),lt=_extends({},_e,ct,tt);return dt.length>0&&(lt.className=dt),Object.keys(pt).length>0&&(lt.style=pt),{props:lt,internalRef:void 0}}const rt=extractEventHandlers(_extends({},ct,tt)),at=omitEventHandlers(tt),s=omitEventHandlers(ct),et=o(rt),nt=clsx(et==null?void 0:et.className,_e==null?void 0:_e.className,gt,ct==null?void 0:ct.className,tt==null?void 0:tt.className),ot=_extends({},et==null?void 0:et.style,_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),ht=_extends({},et,_e,s,at);return nt.length>0&&(ht.className=nt),Object.keys(ot).length>0&&(ht.style=ot),{props:ht,internalRef:et.ref}}const _excluded$u=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function useSlotProps(a){var o;const{elementType:_e,externalSlotProps:tt,ownerState:ct,skipResolvingSlotProps:gt=!1}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$u),at=gt?{}:resolveComponentProps(tt,ct),{props:s,internalRef:et}=mergeSlotProps(_extends({},rt,{externalSlotProps:at})),nt=useForkRef(et,at==null?void 0:at.ref,(o=a.additionalProps)==null?void 0:o.ref);return appendOwnerState(_e,_extends({},s,{ref:nt}),ct)}function getListUtilityClass(a){return generateUtilityClass("MuiList",a)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const _excluded$t=["children","className","component","dense","disablePadding","subheader"],useUtilityClasses$n=a=>{const{classes:o,disablePadding:_e,dense:tt,subheader:ct}=a;return composeClasses({root:["root",!_e&&"padding",tt&&"dense",ct&&"subheader"]},getListUtilityClass,o)},ListRoot=styled$1("ul",{name:"MuiList",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.disablePadding&&o.padding,_e.dense&&o.dense,_e.subheader&&o.subheader]}})(({ownerState:a})=>_extends({listStyle:"none",margin:0,padding:0,position:"relative"},!a.disablePadding&&{paddingTop:8,paddingBottom:8},a.subheader&&{paddingTop:0})),List=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiList"}),{children:ct,className:gt,component:rt="ul",dense:at=!1,disablePadding:s=!1,subheader:et}=tt,nt=_objectWithoutPropertiesLoose(tt,_excluded$t),ot=reactExports.useMemo(()=>({dense:at}),[at]),ht=_extends({},tt,{component:rt,dense:at,disablePadding:s}),dt=useUtilityClasses$n(ht);return jsxRuntimeExports.jsx(ListContext$1.Provider,{value:ot,children:jsxRuntimeExports.jsxs(ListRoot,_extends({as:rt,className:clsx(dt.root,gt),ref:_e,ownerState:ht},nt,{children:[et,ct]}))})}),List$1=List,_excluded$s=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nextItem(a,o,_e){return a===o?a.firstChild:o&&o.nextElementSibling?o.nextElementSibling:_e?null:a.firstChild}function previousItem(a,o,_e){return a===o?_e?a.firstChild:a.lastChild:o&&o.previousElementSibling?o.previousElementSibling:_e?null:a.lastChild}function textCriteriaMatches(a,o){if(o===void 0)return!0;let _e=a.innerText;return _e===void 0&&(_e=a.textContent),_e=_e.trim().toLowerCase(),_e.length===0?!1:o.repeating?_e[0]===o.keys[0]:_e.indexOf(o.keys.join(""))===0}function moveFocus(a,o,_e,tt,ct,gt){let rt=!1,at=ct(a,o,o?_e:!1);for(;at;){if(at===a.firstChild){if(rt)return!1;rt=!0}const s=tt?!1:at.disabled||at.getAttribute("aria-disabled")==="true";if(!at.hasAttribute("tabindex")||!textCriteriaMatches(at,gt)||s)at=ct(a,at,_e);else return at.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(o,_e){const{actions:tt,autoFocus:ct=!1,autoFocusItem:gt=!1,children:rt,className:at,disabledItemsFocusable:s=!1,disableListWrap:et=!1,onKeyDown:nt,variant:ot="selectedMenu"}=o,ht=_objectWithoutPropertiesLoose(o,_excluded$s),dt=reactExports.useRef(null),pt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect$1(()=>{ct&&dt.current.focus()},[ct]),reactExports.useImperativeHandle(tt,()=>({adjustStyleForScrollbar:(ft,yt)=>{const vt=!dt.current.style.width;if(ft.clientHeight<dt.current.clientHeight&&vt){const St=`${getScrollbarSize(ownerDocument(ft))}px`;dt.current.style[yt.direction==="rtl"?"paddingLeft":"paddingRight"]=St,dt.current.style.width=`calc(100% + ${St})`}return dt.current}}),[]);const lt=ft=>{const yt=dt.current,vt=ft.key,St=ownerDocument(yt).activeElement;if(vt==="ArrowDown")ft.preventDefault(),moveFocus(yt,St,et,s,nextItem);else if(vt==="ArrowUp")ft.preventDefault(),moveFocus(yt,St,et,s,previousItem);else if(vt==="Home")ft.preventDefault(),moveFocus(yt,null,et,s,nextItem);else if(vt==="End")ft.preventDefault(),moveFocus(yt,null,et,s,previousItem);else if(vt.length===1){const xt=pt.current,Ut=vt.toLowerCase(),Tt=performance.now();xt.keys.length>0&&(Tt-xt.lastTime>500?(xt.keys=[],xt.repeating=!0,xt.previousKeyMatched=!0):xt.repeating&&Ut!==xt.keys[0]&&(xt.repeating=!1)),xt.lastTime=Tt,xt.keys.push(Ut);const kt=St&&!xt.repeating&&textCriteriaMatches(St,xt);xt.previousKeyMatched&&(kt||moveFocus(yt,St,!1,s,nextItem,xt))?ft.preventDefault():xt.previousKeyMatched=!1}nt&&nt(ft)},mt=useForkRef(dt,_e);let st=-1;reactExports.Children.forEach(rt,(ft,yt)=>{if(!reactExports.isValidElement(ft)){st===yt&&(st+=1,st>=rt.length&&(st=-1));return}ft.props.disabled||(ot==="selectedMenu"&&ft.props.selected||st===-1)&&(st=yt),st===yt&&(ft.props.disabled||ft.props.muiSkipListHighlight||ft.type.muiSkipListHighlight)&&(st+=1,st>=rt.length&&(st=-1))});const ut=reactExports.Children.map(rt,(ft,yt)=>{if(yt===st){const vt={};return gt&&(vt.autoFocus=!0),ft.props.tabIndex===void 0&&ot==="selectedMenu"&&(vt.tabIndex=0),reactExports.cloneElement(ft,vt)}return ft});return jsxRuntimeExports.jsx(List$1,_extends({role:"menu",ref:mt,className:at,onKeyDown:lt,tabIndex:ct?0:-1},ht,{children:ut}))}),MenuList$1=MenuList,candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(a){const o=parseInt(a.getAttribute("tabindex")||"",10);return Number.isNaN(o)?a.contentEditable==="true"||(a.nodeName==="AUDIO"||a.nodeName==="VIDEO"||a.nodeName==="DETAILS")&&a.getAttribute("tabindex")===null?0:a.tabIndex:o}function isNonTabbableRadio(a){if(a.tagName!=="INPUT"||a.type!=="radio"||!a.name)return!1;const o=tt=>a.ownerDocument.querySelector(`input[type="radio"]${tt}`);let _e=o(`[name="${a.name}"]:checked`);return _e||(_e=o(`[name="${a.name}"]`)),_e!==a}function isNodeMatchingSelectorFocusable(a){return!(a.disabled||a.tagName==="INPUT"&&a.type==="hidden"||isNonTabbableRadio(a))}function defaultGetTabbable(a){const o=[],_e=[];return Array.from(a.querySelectorAll(candidatesSelector)).forEach((tt,ct)=>{const gt=getTabIndex(tt);gt===-1||!isNodeMatchingSelectorFocusable(tt)||(gt===0?o.push(tt):_e.push({documentOrder:ct,tabIndex:gt,node:tt}))}),_e.sort((tt,ct)=>tt.tabIndex===ct.tabIndex?tt.documentOrder-ct.documentOrder:tt.tabIndex-ct.tabIndex).map(tt=>tt.node).concat(o)}function defaultIsEnabled(){return!0}function FocusTrap(a){const{children:o,disableAutoFocus:_e=!1,disableEnforceFocus:tt=!1,disableRestoreFocus:ct=!1,getTabbable:gt=defaultGetTabbable,isEnabled:rt=defaultIsEnabled,open:at}=a,s=reactExports.useRef(!1),et=reactExports.useRef(null),nt=reactExports.useRef(null),ot=reactExports.useRef(null),ht=reactExports.useRef(null),dt=reactExports.useRef(!1),pt=reactExports.useRef(null),lt=useForkRef(o.ref,pt),mt=reactExports.useRef(null);reactExports.useEffect(()=>{!at||!pt.current||(dt.current=!_e)},[_e,at]),reactExports.useEffect(()=>{if(!at||!pt.current)return;const ft=ownerDocument(pt.current);return pt.current.contains(ft.activeElement)||(pt.current.hasAttribute("tabIndex")||pt.current.setAttribute("tabIndex","-1"),dt.current&&pt.current.focus()),()=>{ct||(ot.current&&ot.current.focus&&(s.current=!0,ot.current.focus()),ot.current=null)}},[at]),reactExports.useEffect(()=>{if(!at||!pt.current)return;const ft=ownerDocument(pt.current),yt=xt=>{mt.current=xt,!(tt||!rt()||xt.key!=="Tab")&&ft.activeElement===pt.current&&xt.shiftKey&&(s.current=!0,nt.current&&nt.current.focus())},vt=()=>{const xt=pt.current;if(xt===null)return;if(!ft.hasFocus()||!rt()||s.current){s.current=!1;return}if(xt.contains(ft.activeElement)||tt&&ft.activeElement!==et.current&&ft.activeElement!==nt.current)return;if(ft.activeElement!==ht.current)ht.current=null;else if(ht.current!==null)return;if(!dt.current)return;let Ut=[];if((ft.activeElement===et.current||ft.activeElement===nt.current)&&(Ut=gt(pt.current)),Ut.length>0){var Tt,kt;const Dt=!!((Tt=mt.current)!=null&&Tt.shiftKey&&((kt=mt.current)==null?void 0:kt.key)==="Tab"),Vt=Ut[0],Ot=Ut[Ut.length-1];typeof Vt!="string"&&typeof Ot!="string"&&(Dt?Ot.focus():Vt.focus())}else xt.focus()};ft.addEventListener("focusin",vt),ft.addEventListener("keydown",yt,!0);const St=setInterval(()=>{ft.activeElement&&ft.activeElement.tagName==="BODY"&&vt()},50);return()=>{clearInterval(St),ft.removeEventListener("focusin",vt),ft.removeEventListener("keydown",yt,!0)}},[_e,tt,ct,rt,at,gt]);const st=ft=>{ot.current===null&&(ot.current=ft.relatedTarget),dt.current=!0,ht.current=ft.target;const yt=o.props.onFocus;yt&&yt(ft)},ut=ft=>{ot.current===null&&(ot.current=ft.relatedTarget),dt.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:at?0:-1,onFocus:ut,ref:et,"data-testid":"sentinelStart"}),reactExports.cloneElement(o,{ref:lt,onFocus:st}),jsxRuntimeExports.jsx("div",{tabIndex:at?0:-1,onFocus:ut,ref:nt,"data-testid":"sentinelEnd"})]})}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(a,o){return a.concat([o+"-"+start,o+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(a,o){return a.concat([o,o+"-"+start,o+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(a){return a?(a.nodeName||"").toLowerCase():null}function getWindow(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var o=a.ownerDocument;return o&&o.defaultView||window}return a}function isElement(a){var o=getWindow(a).Element;return a instanceof o||a instanceof Element}function isHTMLElement$1(a){var o=getWindow(a).HTMLElement;return a instanceof o||a instanceof HTMLElement}function isShadowRoot(a){if(typeof ShadowRoot>"u")return!1;var o=getWindow(a).ShadowRoot;return a instanceof o||a instanceof ShadowRoot}function applyStyles(a){var o=a.state;Object.keys(o.elements).forEach(function(_e){var tt=o.styles[_e]||{},ct=o.attributes[_e]||{},gt=o.elements[_e];!isHTMLElement$1(gt)||!getNodeName(gt)||(Object.assign(gt.style,tt),Object.keys(ct).forEach(function(rt){var at=ct[rt];at===!1?gt.removeAttribute(rt):gt.setAttribute(rt,at===!0?"":at)}))})}function effect$2(a){var o=a.state,_e={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(o.elements.popper.style,_e.popper),o.styles=_e,o.elements.arrow&&Object.assign(o.elements.arrow.style,_e.arrow),function(){Object.keys(o.elements).forEach(function(tt){var ct=o.elements[tt],gt=o.attributes[tt]||{},rt=Object.keys(o.styles.hasOwnProperty(tt)?o.styles[tt]:_e[tt]),at=rt.reduce(function(s,et){return s[et]="",s},{});!isHTMLElement$1(ct)||!getNodeName(ct)||(Object.assign(ct.style,at),Object.keys(gt).forEach(function(s){ct.removeAttribute(s)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(a){return a.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var a=navigator.userAgentData;return a!=null&&a.brands&&Array.isArray(a.brands)?a.brands.map(function(o){return o.brand+"/"+o.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!1);var tt=a.getBoundingClientRect(),ct=1,gt=1;o&&isHTMLElement$1(a)&&(ct=a.offsetWidth>0&&round$1(tt.width)/a.offsetWidth||1,gt=a.offsetHeight>0&&round$1(tt.height)/a.offsetHeight||1);var rt=isElement(a)?getWindow(a):window,at=rt.visualViewport,s=!isLayoutViewport()&&_e,et=(tt.left+(s&&at?at.offsetLeft:0))/ct,nt=(tt.top+(s&&at?at.offsetTop:0))/gt,ot=tt.width/ct,ht=tt.height/gt;return{width:ot,height:ht,top:nt,right:et+ot,bottom:nt+ht,left:et,x:et,y:nt}}function getLayoutRect(a){var o=getBoundingClientRect(a),_e=a.offsetWidth,tt=a.offsetHeight;return Math.abs(o.width-_e)<=1&&(_e=o.width),Math.abs(o.height-tt)<=1&&(tt=o.height),{x:a.offsetLeft,y:a.offsetTop,width:_e,height:tt}}function contains(a,o){var _e=o.getRootNode&&o.getRootNode();if(a.contains(o))return!0;if(_e&&isShadowRoot(_e)){var tt=o;do{if(tt&&a.isSameNode(tt))return!0;tt=tt.parentNode||tt.host}while(tt)}return!1}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function isTableElement(a){return["table","td","th"].indexOf(getNodeName(a))>=0}function getDocumentElement(a){return((isElement(a)?a.ownerDocument:a.document)||window.document).documentElement}function getParentNode(a){return getNodeName(a)==="html"?a:a.assignedSlot||a.parentNode||(isShadowRoot(a)?a.host:null)||getDocumentElement(a)}function getTrueOffsetParent(a){return!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed"?null:a.offsetParent}function getContainingBlock(a){var o=/firefox/i.test(getUAString()),_e=/Trident/i.test(getUAString());if(_e&&isHTMLElement$1(a)){var tt=getComputedStyle$1(a);if(tt.position==="fixed")return null}var ct=getParentNode(a);for(isShadowRoot(ct)&&(ct=ct.host);isHTMLElement$1(ct)&&["html","body"].indexOf(getNodeName(ct))<0;){var gt=getComputedStyle$1(ct);if(gt.transform!=="none"||gt.perspective!=="none"||gt.contain==="paint"||["transform","perspective"].indexOf(gt.willChange)!==-1||o&&gt.willChange==="filter"||o&&gt.filter&&gt.filter!=="none")return ct;ct=ct.parentNode}return null}function getOffsetParent(a){for(var o=getWindow(a),_e=getTrueOffsetParent(a);_e&&isTableElement(_e)&&getComputedStyle$1(_e).position==="static";)_e=getTrueOffsetParent(_e);return _e&&(getNodeName(_e)==="html"||getNodeName(_e)==="body"&&getComputedStyle$1(_e).position==="static")?o:_e||getContainingBlock(a)||o}function getMainAxisFromPlacement(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function within(a,o,_e){return max(a,min(o,_e))}function withinMaxClamp(a,o,_e){var tt=within(a,o,_e);return tt>_e?_e:tt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(a){return Object.assign({},getFreshSideObject(),a)}function expandToHashMap(a,o){return o.reduce(function(_e,tt){return _e[tt]=a,_e},{})}var toPaddingObject=function(o,_e){return o=typeof o=="function"?o(Object.assign({},_e.rects,{placement:_e.placement})):o,mergePaddingObject(typeof o!="number"?o:expandToHashMap(o,basePlacements))};function arrow(a){var o,_e=a.state,tt=a.name,ct=a.options,gt=_e.elements.arrow,rt=_e.modifiersData.popperOffsets,at=getBasePlacement(_e.placement),s=getMainAxisFromPlacement(at),et=[left,right].indexOf(at)>=0,nt=et?"height":"width";if(!(!gt||!rt)){var ot=toPaddingObject(ct.padding,_e),ht=getLayoutRect(gt),dt=s==="y"?top:left,pt=s==="y"?bottom:right,lt=_e.rects.reference[nt]+_e.rects.reference[s]-rt[s]-_e.rects.popper[nt],mt=rt[s]-_e.rects.reference[s],st=getOffsetParent(gt),ut=st?s==="y"?st.clientHeight||0:st.clientWidth||0:0,ft=lt/2-mt/2,yt=ot[dt],vt=ut-ht[nt]-ot[pt],St=ut/2-ht[nt]/2+ft,xt=within(yt,St,vt),Ut=s;_e.modifiersData[tt]=(o={},o[Ut]=xt,o.centerOffset=xt-St,o)}}function effect$1(a){var o=a.state,_e=a.options,tt=_e.element,ct=tt===void 0?"[data-popper-arrow]":tt;ct!=null&&(typeof ct=="string"&&(ct=o.elements.popper.querySelector(ct),!ct)||contains(o.elements.popper,ct)&&(o.elements.arrow=ct))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(a){return a.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(a,o){var _e=a.x,tt=a.y,ct=o.devicePixelRatio||1;return{x:round$1(_e*ct)/ct||0,y:round$1(tt*ct)/ct||0}}function mapToStyles(a){var o,_e=a.popper,tt=a.popperRect,ct=a.placement,gt=a.variation,rt=a.offsets,at=a.position,s=a.gpuAcceleration,et=a.adaptive,nt=a.roundOffsets,ot=a.isFixed,ht=rt.x,dt=ht===void 0?0:ht,pt=rt.y,lt=pt===void 0?0:pt,mt=typeof nt=="function"?nt({x:dt,y:lt}):{x:dt,y:lt};dt=mt.x,lt=mt.y;var st=rt.hasOwnProperty("x"),ut=rt.hasOwnProperty("y"),ft=left,yt=top,vt=window;if(et){var St=getOffsetParent(_e),xt="clientHeight",Ut="clientWidth";if(St===getWindow(_e)&&(St=getDocumentElement(_e),getComputedStyle$1(St).position!=="static"&&at==="absolute"&&(xt="scrollHeight",Ut="scrollWidth")),St=St,ct===top||(ct===left||ct===right)&&gt===end){yt=bottom;var Tt=ot&&St===vt&&vt.visualViewport?vt.visualViewport.height:St[xt];lt-=Tt-tt.height,lt*=s?1:-1}if(ct===left||(ct===top||ct===bottom)&&gt===end){ft=right;var kt=ot&&St===vt&&vt.visualViewport?vt.visualViewport.width:St[Ut];dt-=kt-tt.width,dt*=s?1:-1}}var Dt=Object.assign({position:at},et&&unsetSides),Vt=nt===!0?roundOffsetsByDPR({x:dt,y:lt},getWindow(_e)):{x:dt,y:lt};if(dt=Vt.x,lt=Vt.y,s){var Ot;return Object.assign({},Dt,(Ot={},Ot[yt]=ut?"0":"",Ot[ft]=st?"0":"",Ot.transform=(vt.devicePixelRatio||1)<=1?"translate("+dt+"px, "+lt+"px)":"translate3d("+dt+"px, "+lt+"px, 0)",Ot))}return Object.assign({},Dt,(o={},o[yt]=ut?lt+"px":"",o[ft]=st?dt+"px":"",o.transform="",o))}function computeStyles(a){var o=a.state,_e=a.options,tt=_e.gpuAcceleration,ct=tt===void 0?!0:tt,gt=_e.adaptive,rt=gt===void 0?!0:gt,at=_e.roundOffsets,s=at===void 0?!0:at,et={placement:getBasePlacement(o.placement),variation:getVariation(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:ct,isFixed:o.options.strategy==="fixed"};o.modifiersData.popperOffsets!=null&&(o.styles.popper=Object.assign({},o.styles.popper,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:rt,roundOffsets:s})))),o.modifiersData.arrow!=null&&(o.styles.arrow=Object.assign({},o.styles.arrow,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(a){var o=a.state,_e=a.instance,tt=a.options,ct=tt.scroll,gt=ct===void 0?!0:ct,rt=tt.resize,at=rt===void 0?!0:rt,s=getWindow(o.elements.popper),et=[].concat(o.scrollParents.reference,o.scrollParents.popper);return gt&&et.forEach(function(nt){nt.addEventListener("scroll",_e.update,passive)}),at&&s.addEventListener("resize",_e.update,passive),function(){gt&&et.forEach(function(nt){nt.removeEventListener("scroll",_e.update,passive)}),at&&s.removeEventListener("resize",_e.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,function(o){return hash$1[o]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(a){return a.replace(/start|end/g,function(o){return hash[o]})}function getWindowScroll(a){var o=getWindow(a),_e=o.pageXOffset,tt=o.pageYOffset;return{scrollLeft:_e,scrollTop:tt}}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getWindowScroll(a).scrollLeft}function getViewportRect(a,o){var _e=getWindow(a),tt=getDocumentElement(a),ct=_e.visualViewport,gt=tt.clientWidth,rt=tt.clientHeight,at=0,s=0;if(ct){gt=ct.width,rt=ct.height;var et=isLayoutViewport();(et||!et&&o==="fixed")&&(at=ct.offsetLeft,s=ct.offsetTop)}return{width:gt,height:rt,x:at+getWindowScrollBarX(a),y:s}}function getDocumentRect(a){var o,_e=getDocumentElement(a),tt=getWindowScroll(a),ct=(o=a.ownerDocument)==null?void 0:o.body,gt=max(_e.scrollWidth,_e.clientWidth,ct?ct.scrollWidth:0,ct?ct.clientWidth:0),rt=max(_e.scrollHeight,_e.clientHeight,ct?ct.scrollHeight:0,ct?ct.clientHeight:0),at=-tt.scrollLeft+getWindowScrollBarX(a),s=-tt.scrollTop;return getComputedStyle$1(ct||_e).direction==="rtl"&&(at+=max(_e.clientWidth,ct?ct.clientWidth:0)-gt),{width:gt,height:rt,x:at,y:s}}function isScrollParent(a){var o=getComputedStyle$1(a),_e=o.overflow,tt=o.overflowX,ct=o.overflowY;return/auto|scroll|overlay|hidden/.test(_e+ct+tt)}function getScrollParent(a){return["html","body","#document"].indexOf(getNodeName(a))>=0?a.ownerDocument.body:isHTMLElement$1(a)&&isScrollParent(a)?a:getScrollParent(getParentNode(a))}function listScrollParents(a,o){var _e;o===void 0&&(o=[]);var tt=getScrollParent(a),ct=tt===((_e=a.ownerDocument)==null?void 0:_e.body),gt=getWindow(tt),rt=ct?[gt].concat(gt.visualViewport||[],isScrollParent(tt)?tt:[]):tt,at=o.concat(rt);return ct?at:at.concat(listScrollParents(getParentNode(rt)))}function rectToClientRect(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function getInnerBoundingClientRect(a,o){var _e=getBoundingClientRect(a,!1,o==="fixed");return _e.top=_e.top+a.clientTop,_e.left=_e.left+a.clientLeft,_e.bottom=_e.top+a.clientHeight,_e.right=_e.left+a.clientWidth,_e.width=a.clientWidth,_e.height=a.clientHeight,_e.x=_e.left,_e.y=_e.top,_e}function getClientRectFromMixedType(a,o,_e){return o===viewport?rectToClientRect(getViewportRect(a,_e)):isElement(o)?getInnerBoundingClientRect(o,_e):rectToClientRect(getDocumentRect(getDocumentElement(a)))}function getClippingParents(a){var o=listScrollParents(getParentNode(a)),_e=["absolute","fixed"].indexOf(getComputedStyle$1(a).position)>=0,tt=_e&&isHTMLElement$1(a)?getOffsetParent(a):a;return isElement(tt)?o.filter(function(ct){return isElement(ct)&&contains(ct,tt)&&getNodeName(ct)!=="body"}):[]}function getClippingRect(a,o,_e,tt){var ct=o==="clippingParents"?getClippingParents(a):[].concat(o),gt=[].concat(ct,[_e]),rt=gt[0],at=gt.reduce(function(s,et){var nt=getClientRectFromMixedType(a,et,tt);return s.top=max(nt.top,s.top),s.right=min(nt.right,s.right),s.bottom=min(nt.bottom,s.bottom),s.left=max(nt.left,s.left),s},getClientRectFromMixedType(a,rt,tt));return at.width=at.right-at.left,at.height=at.bottom-at.top,at.x=at.left,at.y=at.top,at}function computeOffsets(a){var o=a.reference,_e=a.element,tt=a.placement,ct=tt?getBasePlacement(tt):null,gt=tt?getVariation(tt):null,rt=o.x+o.width/2-_e.width/2,at=o.y+o.height/2-_e.height/2,s;switch(ct){case top:s={x:rt,y:o.y-_e.height};break;case bottom:s={x:rt,y:o.y+o.height};break;case right:s={x:o.x+o.width,y:at};break;case left:s={x:o.x-_e.width,y:at};break;default:s={x:o.x,y:o.y}}var et=ct?getMainAxisFromPlacement(ct):null;if(et!=null){var nt=et==="y"?"height":"width";switch(gt){case start:s[et]=s[et]-(o[nt]/2-_e[nt]/2);break;case end:s[et]=s[et]+(o[nt]/2-_e[nt]/2);break}}return s}function detectOverflow(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=tt===void 0?a.placement:tt,gt=_e.strategy,rt=gt===void 0?a.strategy:gt,at=_e.boundary,s=at===void 0?clippingParents:at,et=_e.rootBoundary,nt=et===void 0?viewport:et,ot=_e.elementContext,ht=ot===void 0?popper:ot,dt=_e.altBoundary,pt=dt===void 0?!1:dt,lt=_e.padding,mt=lt===void 0?0:lt,st=mergePaddingObject(typeof mt!="number"?mt:expandToHashMap(mt,basePlacements)),ut=ht===popper?reference:popper,ft=a.rects.popper,yt=a.elements[pt?ut:ht],vt=getClippingRect(isElement(yt)?yt:yt.contextElement||getDocumentElement(a.elements.popper),s,nt,rt),St=getBoundingClientRect(a.elements.reference),xt=computeOffsets({reference:St,element:ft,strategy:"absolute",placement:ct}),Ut=rectToClientRect(Object.assign({},ft,xt)),Tt=ht===popper?Ut:St,kt={top:vt.top-Tt.top+st.top,bottom:Tt.bottom-vt.bottom+st.bottom,left:vt.left-Tt.left+st.left,right:Tt.right-vt.right+st.right},Dt=a.modifiersData.offset;if(ht===popper&&Dt){var Vt=Dt[ct];Object.keys(kt).forEach(function(Ot){var Lt=[right,bottom].indexOf(Ot)>=0?1:-1,Gt=[top,bottom].indexOf(Ot)>=0?"y":"x";kt[Ot]+=Vt[Gt]*Lt})}return kt}function computeAutoPlacement(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=_e.boundary,gt=_e.rootBoundary,rt=_e.padding,at=_e.flipVariations,s=_e.allowedAutoPlacements,et=s===void 0?placements:s,nt=getVariation(tt),ot=nt?at?variationPlacements:variationPlacements.filter(function(pt){return getVariation(pt)===nt}):basePlacements,ht=ot.filter(function(pt){return et.indexOf(pt)>=0});ht.length===0&&(ht=ot);var dt=ht.reduce(function(pt,lt){return pt[lt]=detectOverflow(a,{placement:lt,boundary:ct,rootBoundary:gt,padding:rt})[getBasePlacement(lt)],pt},{});return Object.keys(dt).sort(function(pt,lt){return dt[pt]-dt[lt]})}function getExpandedFallbackPlacements(a){if(getBasePlacement(a)===auto)return[];var o=getOppositePlacement(a);return[getOppositeVariationPlacement(a),o,getOppositeVariationPlacement(o)]}function flip(a){var o=a.state,_e=a.options,tt=a.name;if(!o.modifiersData[tt]._skip){for(var ct=_e.mainAxis,gt=ct===void 0?!0:ct,rt=_e.altAxis,at=rt===void 0?!0:rt,s=_e.fallbackPlacements,et=_e.padding,nt=_e.boundary,ot=_e.rootBoundary,ht=_e.altBoundary,dt=_e.flipVariations,pt=dt===void 0?!0:dt,lt=_e.allowedAutoPlacements,mt=o.options.placement,st=getBasePlacement(mt),ut=st===mt,ft=s||(ut||!pt?[getOppositePlacement(mt)]:getExpandedFallbackPlacements(mt)),yt=[mt].concat(ft).reduce(function(gn,Tn){return gn.concat(getBasePlacement(Tn)===auto?computeAutoPlacement(o,{placement:Tn,boundary:nt,rootBoundary:ot,padding:et,flipVariations:pt,allowedAutoPlacements:lt}):Tn)},[]),vt=o.rects.reference,St=o.rects.popper,xt=new Map,Ut=!0,Tt=yt[0],kt=0;kt<yt.length;kt++){var Dt=yt[kt],Vt=getBasePlacement(Dt),Ot=getVariation(Dt)===start,Lt=[top,bottom].indexOf(Vt)>=0,Gt=Lt?"width":"height",tn=detectOverflow(o,{placement:Dt,boundary:nt,rootBoundary:ot,altBoundary:ht,padding:et}),zt=Lt?Ot?right:left:Ot?bottom:top;vt[Gt]>St[Gt]&&(zt=getOppositePlacement(zt));var cn=getOppositePlacement(zt),un=[];if(gt&&un.push(tn[Vt]<=0),at&&un.push(tn[zt]<=0,tn[cn]<=0),un.every(function(gn){return gn})){Tt=Dt,Ut=!1;break}xt.set(Dt,un)}if(Ut)for(var fn=pt?3:1,vn=function(Tn){var In=yt.find(function(kn){var Nn=xt.get(kn);if(Nn)return Nn.slice(0,Tn).every(function(hn){return hn})});if(In)return Tt=In,"break"},Ft=fn;Ft>0;Ft--){var pn=vn(Ft);if(pn==="break")break}o.placement!==Tt&&(o.modifiersData[tt]._skip=!0,o.placement=Tt,o.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(a,o,_e){return _e===void 0&&(_e={x:0,y:0}),{top:a.top-o.height-_e.y,right:a.right-o.width+_e.x,bottom:a.bottom-o.height+_e.y,left:a.left-o.width-_e.x}}function isAnySideFullyClipped(a){return[top,right,bottom,left].some(function(o){return a[o]>=0})}function hide(a){var o=a.state,_e=a.name,tt=o.rects.reference,ct=o.rects.popper,gt=o.modifiersData.preventOverflow,rt=detectOverflow(o,{elementContext:"reference"}),at=detectOverflow(o,{altBoundary:!0}),s=getSideOffsets(rt,tt),et=getSideOffsets(at,ct,gt),nt=isAnySideFullyClipped(s),ot=isAnySideFullyClipped(et);o.modifiersData[_e]={referenceClippingOffsets:s,popperEscapeOffsets:et,isReferenceHidden:nt,hasPopperEscaped:ot},o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-reference-hidden":nt,"data-popper-escaped":ot})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(a,o,_e){var tt=getBasePlacement(a),ct=[left,top].indexOf(tt)>=0?-1:1,gt=typeof _e=="function"?_e(Object.assign({},o,{placement:a})):_e,rt=gt[0],at=gt[1];return rt=rt||0,at=(at||0)*ct,[left,right].indexOf(tt)>=0?{x:at,y:rt}:{x:rt,y:at}}function offset(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.offset,gt=ct===void 0?[0,0]:ct,rt=placements.reduce(function(nt,ot){return nt[ot]=distanceAndSkiddingToXY(ot,o.rects,gt),nt},{}),at=rt[o.placement],s=at.x,et=at.y;o.modifiersData.popperOffsets!=null&&(o.modifiersData.popperOffsets.x+=s,o.modifiersData.popperOffsets.y+=et),o.modifiersData[tt]=rt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(a){var o=a.state,_e=a.name;o.modifiersData[_e]=computeOffsets({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(a){return a==="x"?"y":"x"}function preventOverflow(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.mainAxis,gt=ct===void 0?!0:ct,rt=_e.altAxis,at=rt===void 0?!1:rt,s=_e.boundary,et=_e.rootBoundary,nt=_e.altBoundary,ot=_e.padding,ht=_e.tether,dt=ht===void 0?!0:ht,pt=_e.tetherOffset,lt=pt===void 0?0:pt,mt=detectOverflow(o,{boundary:s,rootBoundary:et,padding:ot,altBoundary:nt}),st=getBasePlacement(o.placement),ut=getVariation(o.placement),ft=!ut,yt=getMainAxisFromPlacement(st),vt=getAltAxis(yt),St=o.modifiersData.popperOffsets,xt=o.rects.reference,Ut=o.rects.popper,Tt=typeof lt=="function"?lt(Object.assign({},o.rects,{placement:o.placement})):lt,kt=typeof Tt=="number"?{mainAxis:Tt,altAxis:Tt}:Object.assign({mainAxis:0,altAxis:0},Tt),Dt=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null,Vt={x:0,y:0};if(St){if(gt){var Ot,Lt=yt==="y"?top:left,Gt=yt==="y"?bottom:right,tn=yt==="y"?"height":"width",zt=St[yt],cn=zt+mt[Lt],un=zt-mt[Gt],fn=dt?-Ut[tn]/2:0,vn=ut===start?xt[tn]:Ut[tn],Ft=ut===start?-Ut[tn]:-xt[tn],pn=o.elements.arrow,gn=dt&&pn?getLayoutRect(pn):{width:0,height:0},Tn=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:getFreshSideObject(),In=Tn[Lt],kn=Tn[Gt],Nn=within(0,xt[tn],gn[tn]),hn=ft?xt[tn]/2-fn-Nn-In-kt.mainAxis:vn-Nn-In-kt.mainAxis,Sn=ft?-xt[tn]/2+fn+Nn+kn+kt.mainAxis:Ft+Nn+kn+kt.mainAxis,Rn=o.elements.arrow&&getOffsetParent(o.elements.arrow),wn=Rn?yt==="y"?Rn.clientTop||0:Rn.clientLeft||0:0,xn=(Ot=Dt==null?void 0:Dt[yt])!=null?Ot:0,Xn=zt+hn-xn-wn,Ln=zt+Sn-xn,Un=within(dt?min(cn,Xn):cn,zt,dt?max(un,Ln):un);St[yt]=Un,Vt[yt]=Un-zt}if(at){var rr,tr=yt==="x"?top:left,Qn=yt==="x"?bottom:right,jn=St[vt],Bn=vt==="y"?"height":"width",an=jn+mt[tr],zn=jn-mt[Qn],Kn=[top,left].indexOf(st)!==-1,An=(rr=Dt==null?void 0:Dt[vt])!=null?rr:0,_n=Kn?an:jn-xt[Bn]-Ut[Bn]-An+kt.altAxis,On=Kn?jn+xt[Bn]+Ut[Bn]-An-kt.altAxis:zn,Pn=dt&&Kn?withinMaxClamp(_n,jn,On):within(dt?_n:an,jn,dt?On:zn);St[vt]=Pn,Vt[vt]=Pn-jn}o.modifiersData[tt]=Vt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function getNodeScroll(a){return a===getWindow(a)||!isHTMLElement$1(a)?getWindowScroll(a):getHTMLElementScroll(a)}function isElementScaled(a){var o=a.getBoundingClientRect(),_e=round$1(o.width)/a.offsetWidth||1,tt=round$1(o.height)/a.offsetHeight||1;return _e!==1||tt!==1}function getCompositeRect(a,o,_e){_e===void 0&&(_e=!1);var tt=isHTMLElement$1(o),ct=isHTMLElement$1(o)&&isElementScaled(o),gt=getDocumentElement(o),rt=getBoundingClientRect(a,ct,_e),at={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(tt||!tt&&!_e)&&((getNodeName(o)!=="body"||isScrollParent(gt))&&(at=getNodeScroll(o)),isHTMLElement$1(o)?(s=getBoundingClientRect(o,!0),s.x+=o.clientLeft,s.y+=o.clientTop):gt&&(s.x=getWindowScrollBarX(gt))),{x:rt.left+at.scrollLeft-s.x,y:rt.top+at.scrollTop-s.y,width:rt.width,height:rt.height}}function order(a){var o=new Map,_e=new Set,tt=[];a.forEach(function(gt){o.set(gt.name,gt)});function ct(gt){_e.add(gt.name);var rt=[].concat(gt.requires||[],gt.requiresIfExists||[]);rt.forEach(function(at){if(!_e.has(at)){var s=o.get(at);s&&ct(s)}}),tt.push(gt)}return a.forEach(function(gt){_e.has(gt.name)||ct(gt)}),tt}function orderModifiers(a){var o=order(a);return modifierPhases.reduce(function(_e,tt){return _e.concat(o.filter(function(ct){return ct.phase===tt}))},[])}function debounce(a){var o;return function(){return o||(o=new Promise(function(_e){Promise.resolve().then(function(){o=void 0,_e(a())})})),o}}function mergeByName(a){var o=a.reduce(function(_e,tt){var ct=_e[tt.name];return _e[tt.name]=ct?Object.assign({},ct,tt,{options:Object.assign({},ct.options,tt.options),data:Object.assign({},ct.data,tt.data)}):tt,_e},{});return Object.keys(o).map(function(_e){return o[_e]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return!o.some(function(tt){return!(tt&&typeof tt.getBoundingClientRect=="function")})}function popperGenerator(a){a===void 0&&(a={});var o=a,_e=o.defaultModifiers,tt=_e===void 0?[]:_e,ct=o.defaultOptions,gt=ct===void 0?DEFAULT_OPTIONS:ct;return function(at,s,et){et===void 0&&(et=gt);var nt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,gt),modifiersData:{},elements:{reference:at,popper:s},attributes:{},styles:{}},ot=[],ht=!1,dt={state:nt,setOptions:function(st){var ut=typeof st=="function"?st(nt.options):st;lt(),nt.options=Object.assign({},gt,nt.options,ut),nt.scrollParents={reference:isElement(at)?listScrollParents(at):at.contextElement?listScrollParents(at.contextElement):[],popper:listScrollParents(s)};var ft=orderModifiers(mergeByName([].concat(tt,nt.options.modifiers)));return nt.orderedModifiers=ft.filter(function(yt){return yt.enabled}),pt(),dt.update()},forceUpdate:function(){if(!ht){var st=nt.elements,ut=st.reference,ft=st.popper;if(areValidElements(ut,ft)){nt.rects={reference:getCompositeRect(ut,getOffsetParent(ft),nt.options.strategy==="fixed"),popper:getLayoutRect(ft)},nt.reset=!1,nt.placement=nt.options.placement,nt.orderedModifiers.forEach(function(kt){return nt.modifiersData[kt.name]=Object.assign({},kt.data)});for(var yt=0;yt<nt.orderedModifiers.length;yt++){if(nt.reset===!0){nt.reset=!1,yt=-1;continue}var vt=nt.orderedModifiers[yt],St=vt.fn,xt=vt.options,Ut=xt===void 0?{}:xt,Tt=vt.name;typeof St=="function"&&(nt=St({state:nt,options:Ut,name:Tt,instance:dt})||nt)}}}},update:debounce(function(){return new Promise(function(mt){dt.forceUpdate(),mt(nt)})}),destroy:function(){lt(),ht=!0}};if(!areValidElements(at,s))return dt;dt.setOptions(et).then(function(mt){!ht&&et.onFirstUpdate&&et.onFirstUpdate(mt)});function pt(){nt.orderedModifiers.forEach(function(mt){var st=mt.name,ut=mt.options,ft=ut===void 0?{}:ut,yt=mt.effect;if(typeof yt=="function"){var vt=yt({state:nt,name:st,instance:dt,options:ft}),St=function(){};ot.push(vt||St)}})}function lt(){ot.forEach(function(mt){return mt()}),ot=[]}return dt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(a){return typeof a=="function"?a():a}const Portal=reactExports.forwardRef(function(o,_e){const{children:tt,container:ct,disablePortal:gt=!1}=o,[rt,at]=reactExports.useState(null),s=useForkRef(reactExports.isValidElement(tt)?tt.ref:null,_e);if(useEnhancedEffect$1(()=>{gt||at(getContainer$1(ct)||document.body)},[ct,gt]),useEnhancedEffect$1(()=>{if(rt&&!gt)return setRef(_e,rt),()=>{setRef(_e,null)}},[_e,rt,gt]),gt){if(reactExports.isValidElement(tt)){const et={ref:s};return reactExports.cloneElement(tt,et)}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:tt})}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:rt&&reactDomExports.createPortal(tt,rt)})});function getPopperUtilityClass(a){return generateUtilityClass("MuiPopper",a)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$r=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$3=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(a,o){if(o==="ltr")return a;switch(a){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return a}}function resolveAnchorEl$1(a){return typeof a=="function"?a():a}function isHTMLElement(a){return a.nodeType!==void 0}const useUtilityClasses$m=()=>composeClasses({root:["root"]},useClassNamesOverride(getPopperUtilityClass)),defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(o,_e){var tt;const{anchorEl:ct,children:gt,direction:rt,disablePortal:at,modifiers:s,open:et,placement:nt,popperOptions:ot,popperRef:ht,slotProps:dt={},slots:pt={},TransitionProps:lt}=o,mt=_objectWithoutPropertiesLoose(o,_excluded$r),st=reactExports.useRef(null),ut=useForkRef(st,_e),ft=reactExports.useRef(null),yt=useForkRef(ft,ht),vt=reactExports.useRef(yt);useEnhancedEffect$1(()=>{vt.current=yt},[yt]),reactExports.useImperativeHandle(ht,()=>ft.current,[]);const St=flipPlacement(nt,rt),[xt,Ut]=reactExports.useState(St),[Tt,kt]=reactExports.useState(resolveAnchorEl$1(ct));reactExports.useEffect(()=>{ft.current&&ft.current.forceUpdate()}),reactExports.useEffect(()=>{ct&&kt(resolveAnchorEl$1(ct))},[ct]),useEnhancedEffect$1(()=>{if(!Tt||!et)return;const Gt=cn=>{Ut(cn.placement)};let tn=[{name:"preventOverflow",options:{altBoundary:at}},{name:"flip",options:{altBoundary:at}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:cn})=>{Gt(cn)}}];s!=null&&(tn=tn.concat(s)),ot&&ot.modifiers!=null&&(tn=tn.concat(ot.modifiers));const zt=createPopper(Tt,st.current,_extends({placement:St},ot,{modifiers:tn}));return vt.current(zt),()=>{zt.destroy(),vt.current(null)}},[Tt,at,s,et,ot,St]);const Dt={placement:xt};lt!==null&&(Dt.TransitionProps=lt);const Vt=useUtilityClasses$m(),Ot=(tt=pt.root)!=null?tt:"div",Lt=useSlotProps({elementType:Ot,externalSlotProps:dt.root,externalForwardedProps:mt,additionalProps:{role:"tooltip",ref:ut},ownerState:o,className:Vt.root});return jsxRuntimeExports.jsx(Ot,_extends({},Lt,{children:typeof gt=="function"?gt(Dt):gt}))}),Popper$2=reactExports.forwardRef(function(o,_e){const{anchorEl:tt,children:ct,container:gt,direction:rt="ltr",disablePortal:at=!1,keepMounted:s=!1,modifiers:et,open:nt,placement:ot="bottom",popperOptions:ht=defaultPopperOptions,popperRef:dt,style:pt,transition:lt=!1,slotProps:mt={},slots:st={}}=o,ut=_objectWithoutPropertiesLoose(o,_excluded2$3),[ft,yt]=reactExports.useState(!0),vt=()=>{yt(!1)},St=()=>{yt(!0)};if(!s&&!nt&&(!lt||ft))return null;let xt;if(gt)xt=gt;else if(tt){const kt=resolveAnchorEl$1(tt);xt=kt&&isHTMLElement(kt)?ownerDocument(kt).body:ownerDocument(null).body}const Ut=!nt&&s&&(!lt||ft)?"none":void 0,Tt=lt?{in:nt,onEnter:vt,onExited:St}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:at,container:xt,children:jsxRuntimeExports.jsx(PopperTooltip,_extends({anchorEl:tt,direction:rt,disablePortal:at,modifiers:et,ref:_e,open:lt?!ft:nt,placement:ot,popperOptions:ht,popperRef:dt,slotProps:mt,slots:st},ut,{style:_extends({position:"fixed",top:0,left:0,display:Ut},pt),TransitionProps:Tt,children:ct}))})});function isOverflowing(a){const o=ownerDocument(a);return o.body===a?ownerWindow(a).innerWidth>o.documentElement.clientWidth:a.scrollHeight>a.clientHeight}function ariaHidden(a,o){o?a.setAttribute("aria-hidden","true"):a.removeAttribute("aria-hidden")}function getPaddingRight(a){return parseInt(ownerWindow(a).getComputedStyle(a).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(a){const _e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(a.tagName)!==-1,tt=a.tagName==="INPUT"&&a.getAttribute("type")==="hidden";return _e||tt}function ariaHiddenSiblings(a,o,_e,tt,ct){const gt=[o,_e,...tt];[].forEach.call(a.children,rt=>{const at=gt.indexOf(rt)===-1,s=!isAriaHiddenForbiddenOnElement(rt);at&&s&&ariaHidden(rt,ct)})}function findIndexOf(a,o){let _e=-1;return a.some((tt,ct)=>o(tt)?(_e=ct,!0):!1),_e}function handleContainer(a,o){const _e=[],tt=a.container;if(!o.disableScrollLock){if(isOverflowing(tt)){const rt=getScrollbarSize(ownerDocument(tt));_e.push({value:tt.style.paddingRight,property:"padding-right",el:tt}),tt.style.paddingRight=`${getPaddingRight(tt)+rt}px`;const at=ownerDocument(tt).querySelectorAll(".mui-fixed");[].forEach.call(at,s=>{_e.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+rt}px`})}let gt;if(tt.parentNode instanceof DocumentFragment)gt=ownerDocument(tt).body;else{const rt=tt.parentElement,at=ownerWindow(tt);gt=(rt==null?void 0:rt.nodeName)==="HTML"&&at.getComputedStyle(rt).overflowY==="scroll"?rt:tt}_e.push({value:gt.style.overflow,property:"overflow",el:gt},{value:gt.style.overflowX,property:"overflow-x",el:gt},{value:gt.style.overflowY,property:"overflow-y",el:gt}),gt.style.overflow="hidden"}return()=>{_e.forEach(({value:gt,el:rt,property:at})=>{gt?rt.style.setProperty(at,gt):rt.style.removeProperty(at)})}}function getHiddenSiblings(a){const o=[];return[].forEach.call(a.children,_e=>{_e.getAttribute("aria-hidden")==="true"&&o.push(_e)}),o}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(o,_e){let tt=this.modals.indexOf(o);if(tt!==-1)return tt;tt=this.modals.length,this.modals.push(o),o.modalRef&&ariaHidden(o.modalRef,!1);const ct=getHiddenSiblings(_e);ariaHiddenSiblings(_e,o.mount,o.modalRef,ct,!0);const gt=findIndexOf(this.containers,rt=>rt.container===_e);return gt!==-1?(this.containers[gt].modals.push(o),tt):(this.containers.push({modals:[o],container:_e,restore:null,hiddenSiblings:ct}),tt)}mount(o,_e){const tt=findIndexOf(this.containers,gt=>gt.modals.indexOf(o)!==-1),ct=this.containers[tt];ct.restore||(ct.restore=handleContainer(ct,_e))}remove(o,_e=!0){const tt=this.modals.indexOf(o);if(tt===-1)return tt;const ct=findIndexOf(this.containers,rt=>rt.modals.indexOf(o)!==-1),gt=this.containers[ct];if(gt.modals.splice(gt.modals.indexOf(o),1),this.modals.splice(tt,1),gt.modals.length===0)gt.restore&&gt.restore(),o.modalRef&&ariaHidden(o.modalRef,_e),ariaHiddenSiblings(gt.container,o.mount,o.modalRef,gt.hiddenSiblings,!1),this.containers.splice(ct,1);else{const rt=gt.modals[gt.modals.length-1];rt.modalRef&&ariaHidden(rt.modalRef,!1)}return tt}isTopModal(o){return this.modals.length>0&&this.modals[this.modals.length-1]===o}}function getContainer(a){return typeof a=="function"?a():a}function getHasTransition(a){return a?a.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager;function useModal(a){const{container:o,disableEscapeKeyDown:_e=!1,disableScrollLock:tt=!1,manager:ct=defaultManager,closeAfterTransition:gt=!1,onTransitionEnter:rt,onTransitionExited:at,children:s,onClose:et,open:nt,rootRef:ot}=a,ht=reactExports.useRef({}),dt=reactExports.useRef(null),pt=reactExports.useRef(null),lt=useForkRef(pt,ot),[mt,st]=reactExports.useState(!nt),ut=getHasTransition(s);let ft=!0;(a["aria-hidden"]==="false"||a["aria-hidden"]===!1)&&(ft=!1);const yt=()=>ownerDocument(dt.current),vt=()=>(ht.current.modalRef=pt.current,ht.current.mount=dt.current,ht.current),St=()=>{ct.mount(vt(),{disableScrollLock:tt}),pt.current&&(pt.current.scrollTop=0)},xt=useEventCallback(()=>{const tn=getContainer(o)||yt().body;ct.add(vt(),tn),pt.current&&St()}),Ut=reactExports.useCallback(()=>ct.isTopModal(vt()),[ct]),Tt=useEventCallback(tn=>{dt.current=tn,tn&&(nt&&Ut()?St():pt.current&&ariaHidden(pt.current,ft))}),kt=reactExports.useCallback(()=>{ct.remove(vt(),ft)},[ft,ct]);reactExports.useEffect(()=>()=>{kt()},[kt]),reactExports.useEffect(()=>{nt?xt():(!ut||!gt)&&kt()},[nt,kt,ut,gt,xt]);const Dt=tn=>zt=>{var cn;(cn=tn.onKeyDown)==null||cn.call(tn,zt),!(zt.key!=="Escape"||!Ut())&&(_e||(zt.stopPropagation(),et&&et(zt,"escapeKeyDown")))},Vt=tn=>zt=>{var cn;(cn=tn.onClick)==null||cn.call(tn,zt),zt.target===zt.currentTarget&&et&&et(zt,"backdropClick")};return{getRootProps:(tn={})=>{const zt=extractEventHandlers(a);delete zt.onTransitionEnter,delete zt.onTransitionExited;const cn=_extends({},zt,tn);return _extends({role:"presentation"},cn,{onKeyDown:Dt(cn),ref:lt})},getBackdropProps:(tn={})=>{const zt=tn;return _extends({"aria-hidden":!0},zt,{onClick:Vt(zt),open:nt})},getTransitionProps:()=>{const tn=()=>{st(!1),rt&&rt()},zt=()=>{st(!0),at&&at(),gt&&kt()};return{onEnter:createChainedFunction(tn,s==null?void 0:s.props.onEnter),onExited:createChainedFunction(zt,s==null?void 0:s.props.onExited)}},rootRef:lt,portalRef:Tt,isTopModal:Ut,exited:mt,hasTransition:ut}}const _excluded$q=["onChange","maxRows","minRows","style","value"];function getStyleValue(a){return parseInt(a,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$1(a){return a==null||Object.keys(a).length===0||a.outerHeightStyle===0&&!a.overflow}const TextareaAutosize=reactExports.forwardRef(function(o,_e){const{onChange:tt,maxRows:ct,minRows:gt=1,style:rt,value:at}=o,s=_objectWithoutPropertiesLoose(o,_excluded$q),{current:et}=reactExports.useRef(at!=null),nt=reactExports.useRef(null),ot=useForkRef(_e,nt),ht=reactExports.useRef(null),dt=reactExports.useRef(0),[pt,lt]=reactExports.useState({outerHeightStyle:0}),mt=reactExports.useCallback(()=>{const yt=nt.current,St=ownerWindow(yt).getComputedStyle(yt);if(St.width==="0px")return{outerHeightStyle:0};const xt=ht.current;xt.style.width=St.width,xt.value=yt.value||o.placeholder||"x",xt.value.slice(-1)===`
`&&(xt.value+=" ");const Ut=St.boxSizing,Tt=getStyleValue(St.paddingBottom)+getStyleValue(St.paddingTop),kt=getStyleValue(St.borderBottomWidth)+getStyleValue(St.borderTopWidth),Dt=xt.scrollHeight;xt.value="x";const Vt=xt.scrollHeight;let Ot=Dt;gt&&(Ot=Math.max(Number(gt)*Vt,Ot)),ct&&(Ot=Math.min(Number(ct)*Vt,Ot)),Ot=Math.max(Ot,Vt);const Lt=Ot+(Ut==="border-box"?Tt+kt:0),Gt=Math.abs(Ot-Dt)<=1;return{outerHeightStyle:Lt,overflow:Gt}},[ct,gt,o.placeholder]),st=(yt,vt)=>{const{outerHeightStyle:St,overflow:xt}=vt;return dt.current<20&&(St>0&&Math.abs((yt.outerHeightStyle||0)-St)>1||yt.overflow!==xt)?(dt.current+=1,{overflow:xt,outerHeightStyle:St}):yt},ut=reactExports.useCallback(()=>{const yt=mt();isEmpty$1(yt)||lt(vt=>st(vt,yt))},[mt]);useEnhancedEffect$1(()=>{const yt=()=>{const Dt=mt();isEmpty$1(Dt)||reactDomExports.flushSync(()=>{lt(Vt=>st(Vt,Dt))})},vt=()=>{dt.current=0,yt()};let St;const xt=debounce$1(vt),Ut=nt.current,Tt=ownerWindow(Ut);Tt.addEventListener("resize",xt);let kt;return typeof ResizeObserver<"u"&&(kt=new ResizeObserver(vt),kt.observe(Ut)),()=>{xt.clear(),cancelAnimationFrame(St),Tt.removeEventListener("resize",xt),kt&&kt.disconnect()}},[mt]),useEnhancedEffect$1(()=>{ut()}),reactExports.useEffect(()=>{dt.current=0},[at]);const ft=yt=>{dt.current=0,et||ut(),tt&&tt(yt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",_extends({value:at,onChange:ft,ref:ot,rows:gt,style:_extends({height:pt.outerHeightStyle,overflow:pt.overflow?"hidden":void 0},rt)},s)),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:o.className,readOnly:!0,ref:ht,tabIndex:-1,style:_extends({},styles$2.shadow,rt,{paddingTop:0,paddingBottom:0})})]})}),reflow=a=>a.scrollTop;function getTransitionProps(a,o){var _e,tt;const{timeout:ct,easing:gt,style:rt={}}=a;return{duration:(_e=rt.transitionDuration)!=null?_e:typeof ct=="number"?ct:ct[o.mode]||0,easing:(tt=rt.transitionTimingFunction)!=null?tt:typeof gt=="object"?gt[o.mode]:gt,delay:rt.transitionDelay}}const _excluded$p=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getScale(a){return`scale(${a}, ${a**2})`}const styles$1={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(o,_e){const{addEndListener:tt,appear:ct=!0,children:gt,easing:rt,in:at,onEnter:s,onEntered:et,onEntering:nt,onExit:ot,onExited:ht,onExiting:dt,style:pt,timeout:lt="auto",TransitionComponent:mt=Transition$1}=o,st=_objectWithoutPropertiesLoose(o,_excluded$p),ut=reactExports.useRef(),ft=reactExports.useRef(),yt=useTheme(),vt=reactExports.useRef(null),St=useForkRef(vt,gt.ref,_e),xt=Gt=>tn=>{if(Gt){const zt=vt.current;tn===void 0?Gt(zt):Gt(zt,tn)}},Ut=xt(nt),Tt=xt((Gt,tn)=>{reflow(Gt);const{duration:zt,delay:cn,easing:un}=getTransitionProps({style:pt,timeout:lt,easing:rt},{mode:"enter"});let fn;lt==="auto"?(fn=yt.transitions.getAutoHeightDuration(Gt.clientHeight),ft.current=fn):fn=zt,Gt.style.transition=[yt.transitions.create("opacity",{duration:fn,delay:cn}),yt.transitions.create("transform",{duration:isWebKit154?fn:fn*.666,delay:cn,easing:un})].join(","),s&&s(Gt,tn)}),kt=xt(et),Dt=xt(dt),Vt=xt(Gt=>{const{duration:tn,delay:zt,easing:cn}=getTransitionProps({style:pt,timeout:lt,easing:rt},{mode:"exit"});let un;lt==="auto"?(un=yt.transitions.getAutoHeightDuration(Gt.clientHeight),ft.current=un):un=tn,Gt.style.transition=[yt.transitions.create("opacity",{duration:un,delay:zt}),yt.transitions.create("transform",{duration:isWebKit154?un:un*.666,delay:isWebKit154?zt:zt||un*.333,easing:cn})].join(","),Gt.style.opacity=0,Gt.style.transform=getScale(.75),ot&&ot(Gt)}),Ot=xt(ht),Lt=Gt=>{lt==="auto"&&(ut.current=setTimeout(Gt,ft.current||0)),tt&&tt(vt.current,Gt)};return reactExports.useEffect(()=>()=>{clearTimeout(ut.current)},[]),jsxRuntimeExports.jsx(mt,_extends({appear:ct,in:at,nodeRef:vt,onEnter:Tt,onEntered:kt,onEntering:Ut,onExit:Vt,onExited:Ot,onExiting:Dt,addEndListener:Lt,timeout:lt==="auto"?null:lt},st,{children:(Gt,tn)=>reactExports.cloneElement(gt,_extends({style:_extends({opacity:0,transform:getScale(.75),visibility:Gt==="exited"&&!at?"hidden":void 0},styles$1[Gt],pt,gt.props.style),ref:St},tn))}))});Grow.muiSupportAuto=!0;const Grow$1=Grow,_excluded$o=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(o,_e){const tt=useTheme(),ct={enter:tt.transitions.duration.enteringScreen,exit:tt.transitions.duration.leavingScreen},{addEndListener:gt,appear:rt=!0,children:at,easing:s,in:et,onEnter:nt,onEntered:ot,onEntering:ht,onExit:dt,onExited:pt,onExiting:lt,style:mt,timeout:st=ct,TransitionComponent:ut=Transition$1}=o,ft=_objectWithoutPropertiesLoose(o,_excluded$o),yt=reactExports.useRef(null),vt=useForkRef(yt,at.ref,_e),St=Lt=>Gt=>{if(Lt){const tn=yt.current;Gt===void 0?Lt(tn):Lt(tn,Gt)}},xt=St(ht),Ut=St((Lt,Gt)=>{reflow(Lt);const tn=getTransitionProps({style:mt,timeout:st,easing:s},{mode:"enter"});Lt.style.webkitTransition=tt.transitions.create("opacity",tn),Lt.style.transition=tt.transitions.create("opacity",tn),nt&&nt(Lt,Gt)}),Tt=St(ot),kt=St(lt),Dt=St(Lt=>{const Gt=getTransitionProps({style:mt,timeout:st,easing:s},{mode:"exit"});Lt.style.webkitTransition=tt.transitions.create("opacity",Gt),Lt.style.transition=tt.transitions.create("opacity",Gt),dt&&dt(Lt)}),Vt=St(pt),Ot=Lt=>{gt&&gt(yt.current,Lt)};return jsxRuntimeExports.jsx(ut,_extends({appear:rt,in:et,nodeRef:yt,onEnter:Ut,onEntered:Tt,onEntering:xt,onExit:Dt,onExited:Vt,onExiting:kt,addEndListener:Ot,timeout:st},ft,{children:(Lt,Gt)=>reactExports.cloneElement(at,_extends({style:_extends({opacity:0,visibility:Lt==="exited"&&!et?"hidden":void 0},styles[Lt],mt,at.props.style),ref:vt},Gt))}))}),Fade$1=Fade;function getBackdropUtilityClass(a){return generateUtilityClass("MuiBackdrop",a)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const _excluded$n=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$l=a=>{const{classes:o,invisible:_e}=a;return composeClasses({root:["root",_e&&"invisible"]},getBackdropUtilityClass,o)},BackdropRoot=styled$1("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.invisible&&o.invisible]}})(({ownerState:a})=>_extends({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},a.invisible&&{backgroundColor:"transparent"})),Backdrop=reactExports.forwardRef(function(o,_e){var tt,ct,gt;const rt=useThemeProps({props:o,name:"MuiBackdrop"}),{children:at,className:s,component:et="div",components:nt={},componentsProps:ot={},invisible:ht=!1,open:dt,slotProps:pt={},slots:lt={},TransitionComponent:mt=Fade$1,transitionDuration:st}=rt,ut=_objectWithoutPropertiesLoose(rt,_excluded$n),ft=_extends({},rt,{component:et,invisible:ht}),yt=useUtilityClasses$l(ft),vt=(tt=pt.root)!=null?tt:ot.root;return jsxRuntimeExports.jsx(mt,_extends({in:dt,timeout:st},ut,{children:jsxRuntimeExports.jsx(BackdropRoot,_extends({"aria-hidden":!0},vt,{as:(ct=(gt=lt.root)!=null?gt:nt.Root)!=null?ct:et,className:clsx(yt.root,s,vt==null?void 0:vt.className),ownerState:_extends({},ft,vt==null?void 0:vt.ownerState),classes:yt,ref:_e,children:at}))}))}),Backdrop$1=Backdrop;function getModalUtilityClass(a){return generateUtilityClass("MuiModal",a)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const _excluded$m=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],useUtilityClasses$k=a=>{const{open:o,exited:_e,classes:tt}=a;return composeClasses({root:["root",!o&&_e&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,tt)},ModalRoot=styled$1("div",{name:"MuiModal",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.open&&_e.exited&&o.hidden]}})(({theme:a,ownerState:o})=>_extends({position:"fixed",zIndex:(a.vars||a).zIndex.modal,right:0,bottom:0,top:0,left:0},!o.open&&o.exited&&{visibility:"hidden"})),ModalBackdrop=styled$1(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(a,o)=>o.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,at,s;const et=useThemeProps({name:"MuiModal",props:o}),{BackdropComponent:nt=ModalBackdrop,BackdropProps:ot,className:ht,closeAfterTransition:dt=!1,children:pt,container:lt,component:mt,components:st={},componentsProps:ut={},disableAutoFocus:ft=!1,disableEnforceFocus:yt=!1,disableEscapeKeyDown:vt=!1,disablePortal:St=!1,disableRestoreFocus:xt=!1,disableScrollLock:Ut=!1,hideBackdrop:Tt=!1,keepMounted:kt=!1,onBackdropClick:Dt,open:Vt,slotProps:Ot,slots:Lt}=et,Gt=_objectWithoutPropertiesLoose(et,_excluded$m),tn=_extends({},et,{closeAfterTransition:dt,disableAutoFocus:ft,disableEnforceFocus:yt,disableEscapeKeyDown:vt,disablePortal:St,disableRestoreFocus:xt,disableScrollLock:Ut,hideBackdrop:Tt,keepMounted:kt}),{getRootProps:zt,getBackdropProps:cn,getTransitionProps:un,portalRef:fn,isTopModal:vn,exited:Ft,hasTransition:pn}=useModal(_extends({},tn,{rootRef:_e})),gn=_extends({},tn,{exited:Ft}),Tn=useUtilityClasses$k(gn),In={};if(pt.props.tabIndex===void 0&&(In.tabIndex="-1"),pn){const{onEnter:xn,onExited:Xn}=un();In.onEnter=xn,In.onExited=Xn}const kn=(tt=(ct=Lt==null?void 0:Lt.root)!=null?ct:st.Root)!=null?tt:ModalRoot,Nn=(gt=(rt=Lt==null?void 0:Lt.backdrop)!=null?rt:st.Backdrop)!=null?gt:nt,hn=(at=Ot==null?void 0:Ot.root)!=null?at:ut.root,Sn=(s=Ot==null?void 0:Ot.backdrop)!=null?s:ut.backdrop,Rn=useSlotProps({elementType:kn,externalSlotProps:hn,externalForwardedProps:Gt,getSlotProps:zt,additionalProps:{ref:_e,as:mt},ownerState:gn,className:clsx(ht,hn==null?void 0:hn.className,Tn==null?void 0:Tn.root,!gn.open&&gn.exited&&(Tn==null?void 0:Tn.hidden))}),wn=useSlotProps({elementType:Nn,externalSlotProps:Sn,additionalProps:ot,getSlotProps:xn=>cn(_extends({},xn,{onClick:Xn=>{Dt&&Dt(Xn),xn!=null&&xn.onClick&&xn.onClick(Xn)}})),className:clsx(Sn==null?void 0:Sn.className,ot==null?void 0:ot.className,Tn==null?void 0:Tn.backdrop),ownerState:gn});return!kt&&!Vt&&(!pn||Ft)?null:jsxRuntimeExports.jsx(Portal,{ref:fn,container:lt,disablePortal:St,children:jsxRuntimeExports.jsxs(kn,_extends({},Rn,{children:[!Tt&&nt?jsxRuntimeExports.jsx(Nn,_extends({},wn)):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:yt,disableAutoFocus:ft,disableRestoreFocus:xt,isEnabled:vn,open:Vt,children:reactExports.cloneElement(pt,In)})]}))})}),Modal$1=Modal;function getPopoverUtilityClass(a){return generateUtilityClass("MuiPopover",a)}generateUtilityClasses("MuiPopover",["root","paper"]);const _excluded$l=["onEntering"],_excluded2$2=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_excluded3=["slotProps"];function getOffsetTop(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.height/2:o==="bottom"&&(_e=a.height),_e}function getOffsetLeft(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.width/2:o==="right"&&(_e=a.width),_e}function getTransformOriginValue(a){return[a.horizontal,a.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function resolveAnchorEl(a){return typeof a=="function"?a():a}const useUtilityClasses$j=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,o)},PopoverRoot=styled$1(Modal$1,{name:"MuiPopover",slot:"Root",overridesResolver:(a,o)=>o.root})({}),PopoverPaper=styled$1(Paper$1,{name:"MuiPopover",slot:"Paper",overridesResolver:(a,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(o,_e){var tt,ct,gt;const rt=useThemeProps({props:o,name:"MuiPopover"}),{action:at,anchorEl:s,anchorOrigin:et={vertical:"top",horizontal:"left"},anchorPosition:nt,anchorReference:ot="anchorEl",children:ht,className:dt,container:pt,elevation:lt=8,marginThreshold:mt=16,open:st,PaperProps:ut={},slots:ft,slotProps:yt,transformOrigin:vt={vertical:"top",horizontal:"left"},TransitionComponent:St=Grow$1,transitionDuration:xt="auto",TransitionProps:{onEntering:Ut}={},disableScrollLock:Tt=!1}=rt,kt=_objectWithoutPropertiesLoose(rt.TransitionProps,_excluded$l),Dt=_objectWithoutPropertiesLoose(rt,_excluded2$2),Vt=(tt=yt==null?void 0:yt.paper)!=null?tt:ut,Ot=reactExports.useRef(),Lt=useForkRef(Ot,Vt.ref),Gt=_extends({},rt,{anchorOrigin:et,anchorReference:ot,elevation:lt,marginThreshold:mt,externalPaperSlotProps:Vt,transformOrigin:vt,TransitionComponent:St,transitionDuration:xt,TransitionProps:kt}),tn=useUtilityClasses$j(Gt),zt=reactExports.useCallback(()=>{if(ot==="anchorPosition")return nt;const xn=resolveAnchorEl(s),Ln=(xn&&xn.nodeType===1?xn:ownerDocument(Ot.current).body).getBoundingClientRect();return{top:Ln.top+getOffsetTop(Ln,et.vertical),left:Ln.left+getOffsetLeft(Ln,et.horizontal)}},[s,et.horizontal,et.vertical,nt,ot]),cn=reactExports.useCallback(xn=>({vertical:getOffsetTop(xn,vt.vertical),horizontal:getOffsetLeft(xn,vt.horizontal)}),[vt.horizontal,vt.vertical]),un=reactExports.useCallback(xn=>{const Xn={width:xn.offsetWidth,height:xn.offsetHeight},Ln=cn(Xn);if(ot==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Ln)};const Un=zt();let rr=Un.top-Ln.vertical,tr=Un.left-Ln.horizontal;const Qn=rr+Xn.height,jn=tr+Xn.width,Bn=ownerWindow(resolveAnchorEl(s)),an=Bn.innerHeight-mt,zn=Bn.innerWidth-mt;if(mt!==null&&rr<mt){const Kn=rr-mt;rr-=Kn,Ln.vertical+=Kn}else if(mt!==null&&Qn>an){const Kn=Qn-an;rr-=Kn,Ln.vertical+=Kn}if(mt!==null&&tr<mt){const Kn=tr-mt;tr-=Kn,Ln.horizontal+=Kn}else if(jn>zn){const Kn=jn-zn;tr-=Kn,Ln.horizontal+=Kn}return{top:`${Math.round(rr)}px`,left:`${Math.round(tr)}px`,transformOrigin:getTransformOriginValue(Ln)}},[s,ot,zt,cn,mt]),[fn,vn]=reactExports.useState(st),Ft=reactExports.useCallback(()=>{const xn=Ot.current;if(!xn)return;const Xn=un(xn);Xn.top!==null&&(xn.style.top=Xn.top),Xn.left!==null&&(xn.style.left=Xn.left),xn.style.transformOrigin=Xn.transformOrigin,vn(!0)},[un]);reactExports.useEffect(()=>(Tt&&window.addEventListener("scroll",Ft),()=>window.removeEventListener("scroll",Ft)),[s,Tt,Ft]);const pn=(xn,Xn)=>{Ut&&Ut(xn,Xn),Ft()},gn=()=>{vn(!1)};reactExports.useEffect(()=>{st&&Ft()}),reactExports.useImperativeHandle(at,()=>st?{updatePosition:()=>{Ft()}}:null,[st,Ft]),reactExports.useEffect(()=>{if(!st)return;const xn=debounce$1(()=>{Ft()}),Xn=ownerWindow(s);return Xn.addEventListener("resize",xn),()=>{xn.clear(),Xn.removeEventListener("resize",xn)}},[s,st,Ft]);let Tn=xt;xt==="auto"&&!St.muiSupportAuto&&(Tn=void 0);const In=pt||(s?ownerDocument(resolveAnchorEl(s)).body:void 0),kn=(ct=ft==null?void 0:ft.root)!=null?ct:PopoverRoot,Nn=(gt=ft==null?void 0:ft.paper)!=null?gt:PopoverPaper,hn=useSlotProps({elementType:Nn,externalSlotProps:_extends({},Vt,{style:fn?Vt.style:_extends({},Vt.style,{opacity:0})}),additionalProps:{elevation:lt,ref:Lt},ownerState:Gt,className:clsx(tn.paper,Vt==null?void 0:Vt.className)}),Sn=useSlotProps({elementType:kn,externalSlotProps:(yt==null?void 0:yt.root)||{},externalForwardedProps:Dt,additionalProps:{ref:_e,slotProps:{backdrop:{invisible:!0}},container:In,open:st},ownerState:Gt,className:clsx(tn.root,dt)}),{slotProps:Rn}=Sn,wn=_objectWithoutPropertiesLoose(Sn,_excluded3);return jsxRuntimeExports.jsx(kn,_extends({},wn,!isHostComponent(kn)&&{slotProps:Rn,disableScrollLock:Tt},{children:jsxRuntimeExports.jsx(St,_extends({appear:!0,in:st,onEntering:pn,onExited:gn,timeout:Tn},kt,{children:jsxRuntimeExports.jsx(Nn,_extends({},hn,{children:ht}))}))}))}),Popover$1=Popover;function getMenuUtilityClass(a){return generateUtilityClass("MuiMenu",a)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const _excluded$k=["onEntering"],_excluded2$1=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$i=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,o)},MenuRoot=styled$1(Popover$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(a,o)=>o.root})({}),MenuPaper=styled$1(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(a,o)=>o.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled$1(MenuList$1,{name:"MuiMenu",slot:"List",overridesResolver:(a,o)=>o.list})({outline:0}),Menu=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiMenu"}),{autoFocus:rt=!0,children:at,className:s,disableAutoFocusItem:et=!1,MenuListProps:nt={},onClose:ot,open:ht,PaperProps:dt={},PopoverClasses:pt,transitionDuration:lt="auto",TransitionProps:{onEntering:mt}={},variant:st="selectedMenu",slots:ut={},slotProps:ft={}}=gt,yt=_objectWithoutPropertiesLoose(gt.TransitionProps,_excluded$k),vt=_objectWithoutPropertiesLoose(gt,_excluded2$1),St=useTheme(),xt=St.direction==="rtl",Ut=_extends({},gt,{autoFocus:rt,disableAutoFocusItem:et,MenuListProps:nt,onEntering:mt,PaperProps:dt,transitionDuration:lt,TransitionProps:yt,variant:st}),Tt=useUtilityClasses$i(Ut),kt=rt&&!et&&ht,Dt=reactExports.useRef(null),Vt=(un,fn)=>{Dt.current&&Dt.current.adjustStyleForScrollbar(un,St),mt&&mt(un,fn)},Ot=un=>{un.key==="Tab"&&(un.preventDefault(),ot&&ot(un,"tabKeyDown"))};let Lt=-1;reactExports.Children.map(at,(un,fn)=>{reactExports.isValidElement(un)&&(un.props.disabled||(st==="selectedMenu"&&un.props.selected||Lt===-1)&&(Lt=fn))});const Gt=(tt=ut.paper)!=null?tt:MenuPaper,tn=(ct=ft.paper)!=null?ct:dt,zt=useSlotProps({elementType:ut.root,externalSlotProps:ft.root,ownerState:Ut,className:[Tt.root,s]}),cn=useSlotProps({elementType:Gt,externalSlotProps:tn,ownerState:Ut,className:Tt.paper});return jsxRuntimeExports.jsx(MenuRoot,_extends({onClose:ot,anchorOrigin:{vertical:"bottom",horizontal:xt?"right":"left"},transformOrigin:xt?RTL_ORIGIN:LTR_ORIGIN,slots:{paper:Gt,root:ut.root},slotProps:{root:zt,paper:cn},open:ht,ref:_e,transitionDuration:lt,TransitionProps:_extends({onEntering:Vt},yt),ownerState:Ut},vt,{classes:pt,children:jsxRuntimeExports.jsx(MenuMenuList,_extends({onKeyDown:Ot,actions:Dt,autoFocus:rt&&(Lt===-1||et),autoFocusItem:kt,variant:st},nt,{className:clsx(Tt.list,nt.className),children:at}))}))}),Menu$1=Menu;function getNativeSelectUtilityClasses(a){return generateUtilityClass("MuiNativeSelect",a)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nativeSelectClasses$1=nativeSelectClasses,_excluded$j=["className","disabled","error","IconComponent","inputRef","variant"],useUtilityClasses$h=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:gt,error:rt}=a,at={select:["select",_e,tt&&"disabled",ct&&"multiple",rt&&"error"],icon:["icon",`icon${capitalize(_e)}`,gt&&"iconOpen",tt&&"disabled"]};return composeClasses(at,getNativeSelectUtilityClasses,o)},nativeSelectSelectStyles=({ownerState:a,theme:o})=>_extends({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_extends({},o.vars?{backgroundColor:`rgba(${o.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:o.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${nativeSelectClasses$1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(o.vars||o).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},a.variant==="filled"&&{"&&&":{paddingRight:32}},a.variant==="outlined"&&{borderRadius:(o.vars||o).shape.borderRadius,"&:focus":{borderRadius:(o.vars||o).shape.borderRadius},"&&&":{paddingRight:32}}),NativeSelectSelect=styled$1("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.select,o[_e.variant],_e.error&&o.error,{[`&.${nativeSelectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles),nativeSelectIconStyles=({ownerState:a,theme:o})=>_extends({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(o.vars||o).palette.action.active,[`&.${nativeSelectClasses$1.disabled}`]:{color:(o.vars||o).palette.action.disabled}},a.open&&{transform:"rotate(180deg)"},a.variant==="filled"&&{right:7},a.variant==="outlined"&&{right:7}),NativeSelectIcon=styled$1("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),NativeSelectInput=reactExports.forwardRef(function(o,_e){const{className:tt,disabled:ct,error:gt,IconComponent:rt,inputRef:at,variant:s="standard"}=o,et=_objectWithoutPropertiesLoose(o,_excluded$j),nt=_extends({},o,{disabled:ct,variant:s,error:gt}),ot=useUtilityClasses$h(nt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,_extends({ownerState:nt,className:clsx(ot.select,tt),disabled:ct,ref:at||_e},et)),o.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:rt,ownerState:nt,className:ot.icon})]})}),NativeSelectInput$1=NativeSelectInput;function hasValue(a){return a!=null&&!(Array.isArray(a)&&a.length===0)}function isFilled(a,o=!1){return a&&(hasValue(a.value)&&a.value!==""||o&&hasValue(a.defaultValue)&&a.defaultValue!=="")}function getSelectUtilityClasses(a){return generateUtilityClass("MuiSelect",a)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),selectClasses$1=selectClasses;var _span$1;const _excluded$i=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SelectSelect=styled$1("div",{name:"MuiSelect",slot:"Select",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`&.${selectClasses$1.select}`]:o.select},{[`&.${selectClasses$1.select}`]:o[_e.variant]},{[`&.${selectClasses$1.error}`]:o.error},{[`&.${selectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles,{[`&.${selectClasses$1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled$1("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),SelectNativeInput=styled$1("input",{shouldForwardProp:a=>slotShouldForwardProp(a)&&a!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(a,o)=>o.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(a,o){return typeof o=="object"&&o!==null?a===o:String(a)===String(o)}function isEmpty(a){return a==null||typeof a=="string"&&!a.trim()}const useUtilityClasses$g=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:gt,error:rt}=a,at={select:["select",_e,tt&&"disabled",ct&&"multiple",rt&&"error"],icon:["icon",`icon${capitalize(_e)}`,gt&&"iconOpen",tt&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(at,getSelectUtilityClasses,o)},SelectInput=reactExports.forwardRef(function(o,_e){var tt;const{"aria-describedby":ct,"aria-label":gt,autoFocus:rt,autoWidth:at,children:s,className:et,defaultOpen:nt,defaultValue:ot,disabled:ht,displayEmpty:dt,error:pt=!1,IconComponent:lt,inputRef:mt,labelId:st,MenuProps:ut={},multiple:ft,name:yt,onBlur:vt,onChange:St,onClose:xt,onFocus:Ut,onOpen:Tt,open:kt,readOnly:Dt,renderValue:Vt,SelectDisplayProps:Ot={},tabIndex:Lt,value:Gt,variant:tn="standard"}=o,zt=_objectWithoutPropertiesLoose(o,_excluded$i),[cn,un]=useControlled({controlled:Gt,default:ot,name:"Select"}),[fn,vn]=useControlled({controlled:kt,default:nt,name:"Select"}),Ft=reactExports.useRef(null),pn=reactExports.useRef(null),[gn,Tn]=reactExports.useState(null),{current:In}=reactExports.useRef(kt!=null),[kn,Nn]=reactExports.useState(),hn=useForkRef(_e,mt),Sn=reactExports.useCallback(Kt=>{pn.current=Kt,Kt&&Tn(Kt)},[]),Rn=gn==null?void 0:gn.parentNode;reactExports.useImperativeHandle(hn,()=>({focus:()=>{pn.current.focus()},node:Ft.current,value:cn}),[cn]),reactExports.useEffect(()=>{nt&&fn&&gn&&!In&&(Nn(at?null:Rn.clientWidth),pn.current.focus())},[gn,at]),reactExports.useEffect(()=>{rt&&pn.current.focus()},[rt]),reactExports.useEffect(()=>{if(!st)return;const Kt=ownerDocument(pn.current).getElementById(st);if(Kt){const At=()=>{getSelection().isCollapsed&&pn.current.focus()};return Kt.addEventListener("click",At),()=>{Kt.removeEventListener("click",At)}}},[st]);const wn=(Kt,At)=>{Kt?Tt&&Tt(At):xt&&xt(At),In||(Nn(at?null:Rn.clientWidth),vn(Kt))},xn=Kt=>{Kt.button===0&&(Kt.preventDefault(),pn.current.focus(),wn(!0,Kt))},Xn=Kt=>{wn(!1,Kt)},Ln=reactExports.Children.toArray(s),Un=Kt=>{const At=Ln.find(it=>it.props.value===Kt.target.value);At!==void 0&&(un(At.props.value),St&&St(Kt,At))},rr=Kt=>At=>{let it;if(At.currentTarget.hasAttribute("tabindex")){if(ft){it=Array.isArray(cn)?cn.slice():[];const Rt=cn.indexOf(Kt.props.value);Rt===-1?it.push(Kt.props.value):it.splice(Rt,1)}else it=Kt.props.value;if(Kt.props.onClick&&Kt.props.onClick(At),cn!==it&&(un(it),St)){const Rt=At.nativeEvent||At,bt=new Rt.constructor(Rt.type,Rt);Object.defineProperty(bt,"target",{writable:!0,value:{value:it,name:yt}}),St(bt,Kt)}ft||wn(!1,At)}},tr=Kt=>{Dt||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Kt.key)!==-1&&(Kt.preventDefault(),wn(!0,Kt))},Qn=gn!==null&&fn,jn=Kt=>{!Qn&&vt&&(Object.defineProperty(Kt,"target",{writable:!0,value:{value:cn,name:yt}}),vt(Kt))};delete zt["aria-invalid"];let Bn,an;const zn=[];let Kn=!1;(isFilled({value:cn})||dt)&&(Vt?Bn=Vt(cn):Kn=!0);const An=Ln.map(Kt=>{if(!reactExports.isValidElement(Kt))return null;let At;if(ft){if(!Array.isArray(cn))throw new Error(formatMuiErrorMessage(2));At=cn.some(it=>areEqualValues(it,Kt.props.value)),At&&Kn&&zn.push(Kt.props.children)}else At=areEqualValues(cn,Kt.props.value),At&&Kn&&(an=Kt.props.children);return reactExports.cloneElement(Kt,{"aria-selected":At?"true":"false",onClick:rr(Kt),onKeyUp:it=>{it.key===" "&&it.preventDefault(),Kt.props.onKeyUp&&Kt.props.onKeyUp(it)},role:"option",selected:At,value:void 0,"data-value":Kt.props.value})});Kn&&(ft?zn.length===0?Bn=null:Bn=zn.reduce((Kt,At,it)=>(Kt.push(At),it<zn.length-1&&Kt.push(", "),Kt),[]):Bn=an);let _n=kn;!at&&In&&gn&&(_n=Rn.clientWidth);let On;typeof Lt<"u"?On=Lt:On=ht?null:0;const Pn=Ot.id||(yt?`mui-component-select-${yt}`:void 0),Vn=_extends({},o,{variant:tn,value:cn,open:Qn,error:pt}),ir=useUtilityClasses$g(Vn),Mn=_extends({},ut.PaperProps,(tt=ut.slotProps)==null?void 0:tt.paper),$n=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,_extends({ref:Sn,tabIndex:On,role:"combobox","aria-controls":$n,"aria-disabled":ht?"true":void 0,"aria-expanded":Qn?"true":"false","aria-haspopup":"listbox","aria-label":gt,"aria-labelledby":[st,Pn].filter(Boolean).join(" ")||void 0,"aria-describedby":ct,onKeyDown:tr,onMouseDown:ht||Dt?null:xn,onBlur:jn,onFocus:Ut},Ot,{ownerState:Vn,className:clsx(Ot.className,ir.select,et),id:Pn,children:isEmpty(Bn)?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate",children:""})):Bn})),jsxRuntimeExports.jsx(SelectNativeInput,_extends({"aria-invalid":pt,value:Array.isArray(cn)?cn.join(","):cn,name:yt,ref:Ft,"aria-hidden":!0,onChange:Un,tabIndex:-1,disabled:ht,className:ir.nativeInput,autoFocus:rt,ownerState:Vn},zt)),jsxRuntimeExports.jsx(SelectIcon,{as:lt,className:ir.icon,ownerState:Vn}),jsxRuntimeExports.jsx(Menu$1,_extends({id:`menu-${yt||""}`,anchorEl:Rn,open:Qn,onClose:Xn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},ut,{MenuListProps:_extends({"aria-labelledby":st,role:"listbox","aria-multiselectable":ft?"true":void 0,disableListWrap:!0,id:$n},ut.MenuListProps),slotProps:_extends({},ut.slotProps,{paper:_extends({},Mn,{style:_extends({minWidth:_n},Mn!=null?Mn.style:null)})}),children:An}))]})}),SelectInput$1=SelectInput;function formControlState({props:a,states:o,muiFormControl:_e}){return o.reduce((tt,ct)=>(tt[ct]=a[ct],_e&&typeof a[ct]>"u"&&(tt[ct]=_e[ct]),tt),{})}const FormControlContext=reactExports.createContext(void 0),FormControlContext$1=FormControlContext;function useFormControl(){return reactExports.useContext(FormControlContext$1)}const ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function GlobalStyles(a){return jsxRuntimeExports.jsx(GlobalStyles$1,_extends({},a,{defaultTheme:defaultTheme$2,themeId:THEME_ID}))}function getInputBaseUtilityClass(a){return generateUtilityClass("MuiInputBase",a)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),inputBaseClasses$1=inputBaseClasses,_excluded$h=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rootOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.formControl&&o.formControl,_e.startAdornment&&o.adornedStart,_e.endAdornment&&o.adornedEnd,_e.error&&o.error,_e.size==="small"&&o.sizeSmall,_e.multiline&&o.multiline,_e.color&&o[`color${capitalize(_e.color)}`],_e.fullWidth&&o.fullWidth,_e.hiddenLabel&&o.hiddenLabel]},inputOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.input,_e.size==="small"&&o.inputSizeSmall,_e.multiline&&o.inputMultiline,_e.type==="search"&&o.inputTypeSearch,_e.startAdornment&&o.inputAdornedStart,_e.endAdornment&&o.inputAdornedEnd,_e.hiddenLabel&&o.inputHiddenLabel]},useUtilityClasses$f=a=>{const{classes:o,color:_e,disabled:tt,error:ct,endAdornment:gt,focused:rt,formControl:at,fullWidth:s,hiddenLabel:et,multiline:nt,readOnly:ot,size:ht,startAdornment:dt,type:pt}=a,lt={root:["root",`color${capitalize(_e)}`,tt&&"disabled",ct&&"error",s&&"fullWidth",rt&&"focused",at&&"formControl",ht&&ht!=="medium"&&`size${capitalize(ht)}`,nt&&"multiline",dt&&"adornedStart",gt&&"adornedEnd",et&&"hiddenLabel",ot&&"readOnly"],input:["input",tt&&"disabled",pt==="search"&&"inputTypeSearch",nt&&"inputMultiline",ht==="small"&&"inputSizeSmall",et&&"inputHiddenLabel",dt&&"inputAdornedStart",gt&&"inputAdornedEnd",ot&&"readOnly"]};return composeClasses(lt,getInputBaseUtilityClass,o)},InputBaseRoot=styled$1("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{color:(a.vars||a).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled,cursor:"default"}},o.multiline&&_extends({padding:"4px 0 5px"},o.size==="small"&&{paddingTop:1}),o.fullWidth&&{width:"100%"})),InputBaseComponent=styled$1("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light",tt=_extends({color:"currentColor"},a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5},{transition:a.transitions.create("opacity",{duration:a.transitions.duration.shorter})}),ct={opacity:"0 !important"},gt=a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5};return _extends({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":tt,"&::-moz-placeholder":tt,"&:-ms-input-placeholder":tt,"&::-ms-input-placeholder":tt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses$1.formControl} &`]:{"&::-webkit-input-placeholder":ct,"&::-moz-placeholder":ct,"&:-ms-input-placeholder":ct,"&::-ms-input-placeholder":ct,"&:focus::-webkit-input-placeholder":gt,"&:focus::-moz-placeholder":gt,"&:focus:-ms-input-placeholder":gt,"&:focus::-ms-input-placeholder":gt},[`&.${inputBaseClasses$1.disabled}`]:{opacity:1,WebkitTextFillColor:(a.vars||a).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},o.size==="small"&&{paddingTop:1},o.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},o.type==="search"&&{MozAppearance:"textfield"})}),inputGlobalStyles=jsxRuntimeExports.jsx(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),InputBase=reactExports.forwardRef(function(o,_e){var tt;const ct=useThemeProps({props:o,name:"MuiInputBase"}),{"aria-describedby":gt,autoComplete:rt,autoFocus:at,className:s,components:et={},componentsProps:nt={},defaultValue:ot,disabled:ht,disableInjectingGlobalStyles:dt,endAdornment:pt,fullWidth:lt=!1,id:mt,inputComponent:st="input",inputProps:ut={},inputRef:ft,maxRows:yt,minRows:vt,multiline:St=!1,name:xt,onBlur:Ut,onChange:Tt,onClick:kt,onFocus:Dt,onKeyDown:Vt,onKeyUp:Ot,placeholder:Lt,readOnly:Gt,renderSuffix:tn,rows:zt,slotProps:cn={},slots:un={},startAdornment:fn,type:vn="text",value:Ft}=ct,pn=_objectWithoutPropertiesLoose(ct,_excluded$h),gn=ut.value!=null?ut.value:Ft,{current:Tn}=reactExports.useRef(gn!=null),In=reactExports.useRef(),kn=reactExports.useCallback(Pn=>{},[]),Nn=useForkRef(In,ft,ut.ref,kn),[hn,Sn]=reactExports.useState(!1),Rn=useFormControl(),wn=formControlState({props:ct,muiFormControl:Rn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});wn.focused=Rn?Rn.focused:hn,reactExports.useEffect(()=>{!Rn&&ht&&hn&&(Sn(!1),Ut&&Ut())},[Rn,ht,hn,Ut]);const xn=Rn&&Rn.onFilled,Xn=Rn&&Rn.onEmpty,Ln=reactExports.useCallback(Pn=>{isFilled(Pn)?xn&&xn():Xn&&Xn()},[xn,Xn]);useEnhancedEffect$1(()=>{Tn&&Ln({value:gn})},[gn,Ln,Tn]);const Un=Pn=>{if(wn.disabled){Pn.stopPropagation();return}Dt&&Dt(Pn),ut.onFocus&&ut.onFocus(Pn),Rn&&Rn.onFocus?Rn.onFocus(Pn):Sn(!0)},rr=Pn=>{Ut&&Ut(Pn),ut.onBlur&&ut.onBlur(Pn),Rn&&Rn.onBlur?Rn.onBlur(Pn):Sn(!1)},tr=(Pn,...Vn)=>{if(!Tn){const ir=Pn.target||In.current;if(ir==null)throw new Error(formatMuiErrorMessage(1));Ln({value:ir.value})}ut.onChange&&ut.onChange(Pn,...Vn),Tt&&Tt(Pn,...Vn)};reactExports.useEffect(()=>{Ln(In.current)},[]);const Qn=Pn=>{In.current&&Pn.currentTarget===Pn.target&&In.current.focus(),kt&&kt(Pn)};let jn=st,Bn=ut;St&&jn==="input"&&(zt?Bn=_extends({type:void 0,minRows:zt,maxRows:zt},Bn):Bn=_extends({type:void 0,maxRows:yt,minRows:vt},Bn),jn=TextareaAutosize);const an=Pn=>{Ln(Pn.animationName==="mui-auto-fill-cancel"?In.current:{value:"x"})};reactExports.useEffect(()=>{Rn&&Rn.setAdornedStart(!!fn)},[Rn,fn]);const zn=_extends({},ct,{color:wn.color||"primary",disabled:wn.disabled,endAdornment:pt,error:wn.error,focused:wn.focused,formControl:Rn,fullWidth:lt,hiddenLabel:wn.hiddenLabel,multiline:St,size:wn.size,startAdornment:fn,type:vn}),Kn=useUtilityClasses$f(zn),An=un.root||et.Root||InputBaseRoot,_n=cn.root||nt.root||{},On=un.input||et.Input||InputBaseComponent;return Bn=_extends({},Bn,(tt=cn.input)!=null?tt:nt.input),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!dt&&inputGlobalStyles,jsxRuntimeExports.jsxs(An,_extends({},_n,!isHostComponent(An)&&{ownerState:_extends({},zn,_n.ownerState)},{ref:_e,onClick:Qn},pn,{className:clsx(Kn.root,_n.className,s,Gt&&"MuiInputBase-readOnly"),children:[fn,jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:null,children:jsxRuntimeExports.jsx(On,_extends({ownerState:zn,"aria-invalid":wn.error,"aria-describedby":gt,autoComplete:rt,autoFocus:at,defaultValue:ot,disabled:wn.disabled,id:mt,onAnimationStart:an,name:xt,placeholder:Lt,readOnly:Gt,required:wn.required,rows:zt,value:gn,onKeyDown:Vt,onKeyUp:Ot,type:vn},Bn,!isHostComponent(On)&&{as:jn,ownerState:_extends({},zn,Bn.ownerState)},{ref:Nn,className:clsx(Kn.input,Bn.className,Gt&&"MuiInputBase-readOnly"),onBlur:rr,onChange:tr,onFocus:Un}))}),pt,tn?tn(_extends({},wn,{startAdornment:fn})):null]}))]})}),InputBase$1=InputBase;function getInputUtilityClass(a){return generateUtilityClass("MuiInput",a)}const inputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiInput",["root","underline","input"])),inputClasses$1=inputClasses,_excluded$g=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$e=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getInputUtilityClass,o);return _extends({},o,ct)},InputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{let tt=a.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return a.vars&&(tt=`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`),_extends({position:"relative"},o.formControl&&{"label + &":{marginTop:16}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(a.vars||a).palette[o.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${tt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses$1.disabled}, .${inputClasses$1.error}):before`]:{borderBottom:`2px solid ${(a.vars||a).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${tt}`}},[`&.${inputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),InputInput=styled$1(InputBaseComponent,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt;const at=useThemeProps({props:o,name:"MuiInput"}),{disableUnderline:s,components:et={},componentsProps:nt,fullWidth:ot=!1,inputComponent:ht="input",multiline:dt=!1,slotProps:pt,slots:lt={},type:mt="text"}=at,st=_objectWithoutPropertiesLoose(at,_excluded$g),ut=useUtilityClasses$e(at),yt={root:{ownerState:{disableUnderline:s}}},vt=pt??nt?deepmerge(pt??nt,yt):yt,St=(tt=(ct=lt.root)!=null?ct:et.Root)!=null?tt:InputRoot,xt=(gt=(rt=lt.input)!=null?rt:et.Input)!=null?gt:InputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:St,input:xt},slotProps:vt,fullWidth:ot,inputComponent:ht,multiline:dt,ref:_e,type:mt},st,{classes:ut}))});Input.muiName="Input";const Input$1=Input;function getFilledInputUtilityClass(a){return generateUtilityClass("MuiFilledInput",a)}const filledInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiFilledInput",["root","underline","input"])),filledInputClasses$1=filledInputClasses,_excluded$f=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$d=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getFilledInputUtilityClass,o);return _extends({},o,ct)},FilledInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{var _e;const tt=a.palette.mode==="light",ct=tt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",gt=tt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",rt=tt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",at=tt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _extends({position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:rt,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt}},[`&.${filledInputClasses$1.focused}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt},[`&.${filledInputClasses$1.disabled}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:at}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(_e=(a.vars||a).palette[o.color||"primary"])==null?void 0:_e.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`:ct}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses$1.disabled}, .${filledInputClasses$1.error}):before`]:{borderBottom:`1px solid ${(a.vars||a).palette.text.primary}`},[`&.${filledInputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}},o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&_extends({padding:"25px 12px 8px"},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),FilledInputInput=styled$1(InputBaseComponent,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17},o.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0},o.hiddenLabel&&o.size==="small"&&{paddingTop:8,paddingBottom:9})),FilledInput=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt;const at=useThemeProps({props:o,name:"MuiFilledInput"}),{components:s={},componentsProps:et,fullWidth:nt=!1,inputComponent:ot="input",multiline:ht=!1,slotProps:dt,slots:pt={},type:lt="text"}=at,mt=_objectWithoutPropertiesLoose(at,_excluded$f),st=_extends({},at,{fullWidth:nt,inputComponent:ot,multiline:ht,type:lt}),ut=useUtilityClasses$d(at),ft={root:{ownerState:st},input:{ownerState:st}},yt=dt??et?deepmerge(dt??et,ft):ft,vt=(tt=(ct=pt.root)!=null?ct:s.Root)!=null?tt:FilledInputRoot,St=(gt=(rt=pt.input)!=null?rt:s.Input)!=null?gt:FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:vt,input:St},componentsProps:yt,fullWidth:nt,inputComponent:ot,multiline:ht,ref:_e,type:lt},mt,{classes:ut}))});FilledInput.muiName="Input";const FilledInput$1=FilledInput;var _span;const _excluded$e=["children","classes","className","label","notched"],NotchedOutlineRoot$1=styled$1("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled$1("legend")(({ownerState:a,theme:o})=>_extends({float:"unset",width:"auto",overflow:"hidden"},!a.withLabel&&{padding:0,lineHeight:"11px",transition:o.transitions.create("width",{duration:150,easing:o.transitions.easing.easeOut})},a.withLabel&&_extends({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:o.transitions.create("max-width",{duration:50,easing:o.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},a.notched&&{maxWidth:"100%",transition:o.transitions.create("max-width",{duration:100,easing:o.transitions.easing.easeOut,delay:50})})));function NotchedOutline(a){const{className:o,label:_e,notched:tt}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$e),gt=_e!=null&&_e!=="",rt=_extends({},a,{notched:tt,withLabel:gt});return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,_extends({"aria-hidden":!0,className:o,ownerState:rt},ct,{children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:rt,children:gt?jsxRuntimeExports.jsx("span",{children:_e}):_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate",children:""}))})}))}function getOutlinedInputUtilityClass(a){return generateUtilityClass("MuiOutlinedInput",a)}const outlinedInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])),outlinedInputClasses$1=outlinedInputClasses,_excluded$d=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],useUtilityClasses$c=a=>{const{classes:o}=a,tt=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,o);return _extends({},o,tt)},OutlinedInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _extends({position:"relative",borderRadius:(a.vars||a).shape.borderRadius,[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:_e}},[`&.${outlinedInputClasses$1.focused} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette[o.color].main,borderWidth:2},[`&.${outlinedInputClasses$1.error} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.error.main},[`&.${outlinedInputClasses$1.disabled} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.action.disabled}},o.startAdornment&&{paddingLeft:14},o.endAdornment&&{paddingRight:14},o.multiline&&_extends({padding:"16.5px 14px"},o.size==="small"&&{padding:"8.5px 14px"}))}),NotchedOutlineRoot=styled$1(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(a,o)=>o.notchedOutline})(({theme:a})=>{const o=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:o}}),OutlinedInputInput=styled$1(InputBaseComponent,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({padding:"16.5px 14px"},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{padding:"8.5px 14px"},o.multiline&&{padding:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0})),OutlinedInput=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,at;const s=useThemeProps({props:o,name:"MuiOutlinedInput"}),{components:et={},fullWidth:nt=!1,inputComponent:ot="input",label:ht,multiline:dt=!1,notched:pt,slots:lt={},type:mt="text"}=s,st=_objectWithoutPropertiesLoose(s,_excluded$d),ut=useUtilityClasses$c(s),ft=useFormControl(),yt=formControlState({props:s,muiFormControl:ft,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),vt=_extends({},s,{color:yt.color||"primary",disabled:yt.disabled,error:yt.error,focused:yt.focused,formControl:ft,fullWidth:nt,hiddenLabel:yt.hiddenLabel,multiline:dt,size:yt.size,type:mt}),St=(tt=(ct=lt.root)!=null?ct:et.Root)!=null?tt:OutlinedInputRoot,xt=(gt=(rt=lt.input)!=null?rt:et.Input)!=null?gt:OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:St,input:xt},renderSuffix:Ut=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:vt,className:ut.notchedOutline,label:ht!=null&&ht!==""&&yt.required?at||(at=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[ht,"","*"]})):ht,notched:typeof pt<"u"?pt:!!(Ut.startAdornment||Ut.filled||Ut.focused)}),fullWidth:nt,inputComponent:ot,multiline:dt,ref:_e,type:mt},st,{classes:_extends({},ut,{notchedOutline:null})}))});OutlinedInput.muiName="Input";const OutlinedInput$1=OutlinedInput,_excluded$c=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],_excluded2=["root"],useUtilityClasses$b=a=>{const{classes:o}=a;return o},styledRootConfig={name:"MuiSelect",overridesResolver:(a,o)=>o.root,shouldForwardProp:a=>rootShouldForwardProp(a)&&a!=="variant",slot:"Root"},StyledInput=styled$1(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled$1(OutlinedInput$1,styledRootConfig)(""),StyledFilledInput=styled$1(FilledInput$1,styledRootConfig)(""),Select=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({name:"MuiSelect",props:o}),{autoWidth:ct=!1,children:gt,classes:rt={},className:at,defaultOpen:s=!1,displayEmpty:et=!1,IconComponent:nt=ArrowDropDownIcon,id:ot,input:ht,inputProps:dt,label:pt,labelId:lt,MenuProps:mt,multiple:st=!1,native:ut=!1,onClose:ft,onOpen:yt,open:vt,renderValue:St,SelectDisplayProps:xt,variant:Ut="outlined"}=tt,Tt=_objectWithoutPropertiesLoose(tt,_excluded$c),kt=ut?NativeSelectInput$1:SelectInput$1,Dt=useFormControl(),Vt=formControlState({props:tt,muiFormControl:Dt,states:["variant","error"]}),Ot=Vt.variant||Ut,Lt=_extends({},tt,{variant:Ot,classes:rt}),Gt=useUtilityClasses$b(Lt),tn=_objectWithoutPropertiesLoose(Gt,_excluded2),zt=ht||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:Lt}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:pt,ownerState:Lt}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:Lt})}[Ot],cn=useForkRef(_e,zt.ref);return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(zt,_extends({inputComponent:kt,inputProps:_extends({children:gt,error:Vt.error,IconComponent:nt,variant:Ot,type:void 0,multiple:st},ut?{id:ot}:{autoWidth:ct,defaultOpen:s,displayEmpty:et,labelId:lt,MenuProps:mt,onClose:ft,onOpen:yt,open:vt,renderValue:St,SelectDisplayProps:_extends({id:ot},xt)},dt,{classes:dt?deepmerge(tn,dt.classes):tn},ht?ht.props.inputProps:{})},st&&ut&&Ot==="outlined"?{notched:!0}:{},{ref:cn,className:clsx(zt.props.className,at,Gt.root)},!ht&&{variant:Ot},Tt))})});Select.muiName="Select";const Select$1=Select,Stack=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root}),useThemeProps:a=>useThemeProps({props:a,name:"MuiStack"})}),Stack$1=Stack;function getFormControlLabelUtilityClasses(a){return generateUtilityClass("MuiFormControlLabel",a)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),formControlLabelClasses$1=formControlLabelClasses,_excluded$b=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],useUtilityClasses$a=a=>{const{classes:o,disabled:_e,labelPlacement:tt,error:ct,required:gt}=a,rt={root:["root",_e&&"disabled",`labelPlacement${capitalize(tt)}`,ct&&"error",gt&&"required"],label:["label",_e&&"disabled"],asterisk:["asterisk",ct&&"error"]};return composeClasses(rt,getFormControlLabelUtilityClasses,o)},FormControlLabelRoot=styled$1("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`& .${formControlLabelClasses$1.label}`]:o.label},o.root,o[`labelPlacement${capitalize(_e.labelPlacement)}`]]}})(({theme:a,ownerState:o})=>_extends({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses$1.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses$1.label}`]:{[`&.${formControlLabelClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled}}})),AsteriskComponent=styled$1("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(a,o)=>o.asterisk})(({theme:a})=>({[`&.${formControlLabelClasses$1.error}`]:{color:(a.vars||a).palette.error.main}})),FormControlLabel=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiFormControlLabel"}),{className:rt,componentsProps:at={},control:s,disabled:et,disableTypography:nt,label:ot,labelPlacement:ht="end",required:dt,slotProps:pt={}}=gt,lt=_objectWithoutPropertiesLoose(gt,_excluded$b),mt=useFormControl(),st=(tt=et??s.props.disabled)!=null?tt:mt==null?void 0:mt.disabled,ut=dt??s.props.required,ft={disabled:st,required:ut};["checked","name","onChange","value","inputRef"].forEach(Tt=>{typeof s.props[Tt]>"u"&&typeof gt[Tt]<"u"&&(ft[Tt]=gt[Tt])});const yt=formControlState({props:gt,muiFormControl:mt,states:["error"]}),vt=_extends({},gt,{disabled:st,labelPlacement:ht,required:ut,error:yt.error}),St=useUtilityClasses$a(vt),xt=(ct=pt.typography)!=null?ct:at.typography;let Ut=ot;return Ut!=null&&Ut.type!==Typography$1&&!nt&&(Ut=jsxRuntimeExports.jsx(Typography$1,_extends({component:"span"},xt,{className:clsx(St.label,xt==null?void 0:xt.className),children:Ut}))),jsxRuntimeExports.jsxs(FormControlLabelRoot,_extends({className:clsx(St.root,rt),ownerState:vt,ref:_e},lt,{children:[reactExports.cloneElement(s,ft),ut?jsxRuntimeExports.jsxs(Stack$1,{direction:"row",alignItems:"center",children:[Ut,jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:vt,"aria-hidden":!0,className:St.asterisk,children:["","*"]})]}):Ut]}))}),FormControlLabel$1=FormControlLabel;function getSwitchBaseUtilityClass(a){return generateUtilityClass("PrivateSwitchBase",a)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$a=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$9=a=>{const{classes:o,checked:_e,disabled:tt,edge:ct}=a,gt={root:["root",_e&&"checked",tt&&"disabled",ct&&`edge${capitalize(ct)}`],input:["input"]};return composeClasses(gt,getSwitchBaseUtilityClass,o)},SwitchBaseRoot=styled$1(ButtonBase$1)(({ownerState:a})=>_extends({padding:9,borderRadius:"50%"},a.edge==="start"&&{marginLeft:a.size==="small"?-3:-12},a.edge==="end"&&{marginRight:a.size==="small"?-3:-12})),SwitchBaseInput=styled$1("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(o,_e){const{autoFocus:tt,checked:ct,checkedIcon:gt,className:rt,defaultChecked:at,disabled:s,disableFocusRipple:et=!1,edge:nt=!1,icon:ot,id:ht,inputProps:dt,inputRef:pt,name:lt,onBlur:mt,onChange:st,onFocus:ut,readOnly:ft,required:yt=!1,tabIndex:vt,type:St,value:xt}=o,Ut=_objectWithoutPropertiesLoose(o,_excluded$a),[Tt,kt]=useControlled({controlled:ct,default:!!at,name:"SwitchBase",state:"checked"}),Dt=useFormControl(),Vt=un=>{ut&&ut(un),Dt&&Dt.onFocus&&Dt.onFocus(un)},Ot=un=>{mt&&mt(un),Dt&&Dt.onBlur&&Dt.onBlur(un)},Lt=un=>{if(un.nativeEvent.defaultPrevented)return;const fn=un.target.checked;kt(fn),st&&st(un,fn)};let Gt=s;Dt&&typeof Gt>"u"&&(Gt=Dt.disabled);const tn=St==="checkbox"||St==="radio",zt=_extends({},o,{checked:Tt,disabled:Gt,disableFocusRipple:et,edge:nt}),cn=useUtilityClasses$9(zt);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends({component:"span",className:clsx(cn.root,rt),centerRipple:!0,focusRipple:!et,disabled:Gt,tabIndex:null,role:void 0,onFocus:Vt,onBlur:Ot,ownerState:zt,ref:_e},Ut,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends({autoFocus:tt,checked:ct,defaultChecked:at,className:cn.input,disabled:Gt,id:tn?ht:void 0,name:lt,onChange:Lt,readOnly:ft,ref:pt,required:yt,ownerState:zt,tabIndex:vt,type:St},St==="checkbox"&&xt===void 0?{}:{value:xt},dt)),Tt?gt:ot]}))}),SwitchBase$1=SwitchBase;function getFormGroupUtilityClass(a){return generateUtilityClass("MuiFormGroup",a)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const _excluded$9=["className","row"],useUtilityClasses$8=a=>{const{classes:o,row:_e,error:tt}=a;return composeClasses({root:["root",_e&&"row",tt&&"error"]},getFormGroupUtilityClass,o)},FormGroupRoot=styled$1("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.row&&o.row]}})(({ownerState:a})=>_extends({display:"flex",flexDirection:"column",flexWrap:"wrap"},a.row&&{flexDirection:"row"})),FormGroup=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiFormGroup"}),{className:ct,row:gt=!1}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$9),at=useFormControl(),s=formControlState({props:tt,muiFormControl:at,states:["error"]}),et=_extends({},tt,{row:gt,error:s.error}),nt=useUtilityClasses$8(et);return jsxRuntimeExports.jsx(FormGroupRoot,_extends({className:clsx(nt.root,ct),ownerState:et,ref:_e},rt))}),FormGroup$1=FormGroup;function getIconUtilityClass(a){return generateUtilityClass("MuiIcon",a)}generateUtilityClasses("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$8=["baseClassName","className","color","component","fontSize"],useUtilityClasses$7=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getIconUtilityClass,tt)},IconRoot=styled$1("span",{name:"MuiIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:a.typography.pxToRem(20),medium:a.typography.pxToRem(24),large:a.typography.pxToRem(36)}[o.fontSize],color:{primary:(a.vars||a).palette.primary.main,secondary:(a.vars||a).palette.secondary.main,info:(a.vars||a).palette.info.main,success:(a.vars||a).palette.success.main,warning:(a.vars||a).palette.warning.main,action:(a.vars||a).palette.action.active,error:(a.vars||a).palette.error.main,disabled:(a.vars||a).palette.action.disabled,inherit:void 0}[o.color]})),Icon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIcon"}),{baseClassName:ct="material-icons",className:gt,color:rt="inherit",component:at="span",fontSize:s="medium"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$8),nt=_extends({},tt,{baseClassName:ct,color:rt,component:at,fontSize:s}),ot=useUtilityClasses$7(nt);return jsxRuntimeExports.jsx(IconRoot,_extends({as:at,className:clsx(ct,"notranslate",ot.root,gt),ownerState:nt,"aria-hidden":!0,ref:_e},et))});Icon.muiName="Icon";const Icon$1=Icon,_excluded$7=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled$1(Popper$2,{name:"MuiPopper",slot:"Root",overridesResolver:(a,o)=>o.root})({}),Popper=reactExports.forwardRef(function(o,_e){var tt;const ct=useTheme$3(),gt=useThemeProps({props:o,name:"MuiPopper"}),{anchorEl:rt,component:at,components:s,componentsProps:et,container:nt,disablePortal:ot,keepMounted:ht,modifiers:dt,open:pt,placement:lt,popperOptions:mt,popperRef:st,transition:ut,slots:ft,slotProps:yt}=gt,vt=_objectWithoutPropertiesLoose(gt,_excluded$7),St=(tt=ft==null?void 0:ft.root)!=null?tt:s==null?void 0:s.Root,xt=_extends({anchorEl:rt,container:nt,disablePortal:ot,keepMounted:ht,modifiers:dt,open:pt,placement:lt,popperOptions:mt,popperRef:st,transition:ut},vt);return jsxRuntimeExports.jsx(PopperRoot,_extends({as:at,direction:ct==null?void 0:ct.direction,slots:{root:St},slotProps:yt??et},xt,{ref:_e}))}),Popper$1=Popper;function getTooltipUtilityClass(a){return generateUtilityClass("MuiTooltip",a)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),tooltipClasses$1=tooltipClasses,_excluded$6=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(a){return Math.round(a*1e5)/1e5}const useUtilityClasses$6=a=>{const{classes:o,disableInteractive:_e,arrow:tt,touch:ct,placement:gt}=a,rt={popper:["popper",!_e&&"popperInteractive",tt&&"popperArrow"],tooltip:["tooltip",tt&&"tooltipArrow",ct&&"touch",`tooltipPlacement${capitalize(gt.split("-")[0])}`],arrow:["arrow"]};return composeClasses(rt,getTooltipUtilityClass,o)},TooltipPopper=styled$1(Popper$1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.popper,!_e.disableInteractive&&o.popperInteractive,_e.arrow&&o.popperArrow,!_e.open&&o.popperClose]}})(({theme:a,ownerState:o,open:_e})=>_extends({zIndex:(a.vars||a).zIndex.tooltip,pointerEvents:"none"},!o.disableInteractive&&{pointerEvents:"auto"},!_e&&{pointerEvents:"none"},o.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses$1.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses$1.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.tooltip,_e.touch&&o.touch,_e.arrow&&o.tooltipArrow,o[`tooltipPlacement${capitalize(_e.placement.split("-")[0])}`]]}})(({theme:a,ownerState:o})=>_extends({backgroundColor:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.92),borderRadius:(a.vars||a).shape.borderRadius,color:(a.vars||a).palette.common.white,fontFamily:a.typography.fontFamily,padding:"4px 8px",fontSize:a.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:a.typography.fontWeightMedium},o.arrow&&{position:"relative",margin:0},o.touch&&{padding:"8px 16px",fontSize:a.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:a.typography.fontWeightRegular},{[`.${tooltipClasses$1.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},o.isRtl?_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},o.isRtl?_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},o.touch&&{marginBottom:"24px"}),[`.${tooltipClasses$1.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},o.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(a,o)=>o.arrow})(({theme:a})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1,hystersisTimer=null,cursorPosition={x:0,y:0};function composeEventHandler(a,o){return _e=>{o&&o(_e),a(_e)}}const Tooltip=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,at,s,et,nt,ot,ht,dt,pt,lt,mt,st,ut,ft,yt,vt;const St=useThemeProps({props:o,name:"MuiTooltip"}),{arrow:xt=!1,children:Ut,components:Tt={},componentsProps:kt={},describeChild:Dt=!1,disableFocusListener:Vt=!1,disableHoverListener:Ot=!1,disableInteractive:Lt=!1,disableTouchListener:Gt=!1,enterDelay:tn=100,enterNextDelay:zt=0,enterTouchDelay:cn=700,followCursor:un=!1,id:fn,leaveDelay:vn=0,leaveTouchDelay:Ft=1500,onClose:pn,onOpen:gn,open:Tn,placement:In="bottom",PopperComponent:kn,PopperProps:Nn={},slotProps:hn={},slots:Sn={},title:Rn,TransitionComponent:wn=Grow$1,TransitionProps:xn}=St,Xn=_objectWithoutPropertiesLoose(St,_excluded$6),Ln=reactExports.isValidElement(Ut)?Ut:jsxRuntimeExports.jsx("span",{children:Ut}),Un=useTheme(),rr=Un.direction==="rtl",[tr,Qn]=reactExports.useState(),[jn,Bn]=reactExports.useState(null),an=reactExports.useRef(!1),zn=Lt||un,Kn=reactExports.useRef(),An=reactExports.useRef(),_n=reactExports.useRef(),On=reactExports.useRef(),[Pn,Vn]=useControlled({controlled:Tn,default:!1,name:"Tooltip",state:"open"});let ir=Pn;const Mn=useId(fn),$n=reactExports.useRef(),Kt=reactExports.useCallback(()=>{$n.current!==void 0&&(document.body.style.WebkitUserSelect=$n.current,$n.current=void 0),clearTimeout(On.current)},[]);reactExports.useEffect(()=>()=>{clearTimeout(Kn.current),clearTimeout(An.current),clearTimeout(_n.current),Kt()},[Kt]);const At=qn=>{clearTimeout(hystersisTimer),hystersisOpen=!0,Vn(!0),gn&&!ir&&gn(qn)},it=useEventCallback(qn=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+vn),Vn(!1),pn&&ir&&pn(qn),clearTimeout(Kn.current),Kn.current=setTimeout(()=>{an.current=!1},Un.transitions.duration.shortest)}),Rt=qn=>{an.current&&qn.type!=="touchstart"||(tr&&tr.removeAttribute("title"),clearTimeout(An.current),clearTimeout(_n.current),tn||hystersisOpen&&zt?An.current=setTimeout(()=>{At(qn)},hystersisOpen?zt:tn):At(qn))},bt=qn=>{clearTimeout(An.current),clearTimeout(_n.current),_n.current=setTimeout(()=>{it(qn)},vn)},{isFocusVisibleRef:wt,onBlur:Et,onFocus:Mt,ref:Nt}=useIsFocusVisible(),[,Yt]=reactExports.useState(!1),Qt=qn=>{Et(qn),wt.current===!1&&(Yt(!1),bt(qn))},on=qn=>{tr||Qn(qn.currentTarget),Mt(qn),wt.current===!0&&(Yt(!0),Rt(qn))},nn=qn=>{an.current=!0;const Er=Ln.props;Er.onTouchStart&&Er.onTouchStart(qn)},dn=Rt,yn=bt,mn=qn=>{nn(qn),clearTimeout(_n.current),clearTimeout(Kn.current),Kt(),$n.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",On.current=setTimeout(()=>{document.body.style.WebkitUserSelect=$n.current,Rt(qn)},cn)},Cn=qn=>{Ln.props.onTouchEnd&&Ln.props.onTouchEnd(qn),Kt(),clearTimeout(_n.current),_n.current=setTimeout(()=>{it(qn)},Ft)};reactExports.useEffect(()=>{if(!ir)return;function qn(Er){(Er.key==="Escape"||Er.key==="Esc")&&it(Er)}return document.addEventListener("keydown",qn),()=>{document.removeEventListener("keydown",qn)}},[it,ir]);const En=useForkRef(Ln.ref,Nt,Qn,_e);!Rn&&Rn!==0&&(ir=!1);const Wn=reactExports.useRef(),Fn=qn=>{const Er=Ln.props;Er.onMouseMove&&Er.onMouseMove(qn),cursorPosition={x:qn.clientX,y:qn.clientY},Wn.current&&Wn.current.update()},ar={},or=typeof Rn=="string";Dt?(ar.title=!ir&&or&&!Ot?Rn:null,ar["aria-describedby"]=ir?Mn:null):(ar["aria-label"]=or?Rn:null,ar["aria-labelledby"]=ir&&!or?Mn:null);const nr=_extends({},ar,Xn,Ln.props,{className:clsx(Xn.className,Ln.props.className),onTouchStart:nn,ref:En},un?{onMouseMove:Fn}:{}),ur={};Gt||(nr.onTouchStart=mn,nr.onTouchEnd=Cn),Ot||(nr.onMouseOver=composeEventHandler(dn,nr.onMouseOver),nr.onMouseLeave=composeEventHandler(yn,nr.onMouseLeave),zn||(ur.onMouseOver=dn,ur.onMouseLeave=yn)),Vt||(nr.onFocus=composeEventHandler(on,nr.onFocus),nr.onBlur=composeEventHandler(Qt,nr.onBlur),zn||(ur.onFocus=on,ur.onBlur=Qt));const mr=reactExports.useMemo(()=>{var qn;let Er=[{name:"arrow",enabled:!!jn,options:{element:jn,padding:4}}];return(qn=Nn.popperOptions)!=null&&qn.modifiers&&(Er=Er.concat(Nn.popperOptions.modifiers)),_extends({},Nn.popperOptions,{modifiers:Er})},[jn,Nn]),wr=_extends({},St,{isRtl:rr,arrow:xt,disableInteractive:zn,placement:In,PopperComponentProp:kn,touch:an.current}),Jn=useUtilityClasses$6(wr),er=(tt=(ct=Sn.popper)!=null?ct:Tt.Popper)!=null?tt:TooltipPopper,hr=(gt=(rt=(at=Sn.transition)!=null?at:Tt.Transition)!=null?rt:wn)!=null?gt:Grow$1,Sr=(s=(et=Sn.tooltip)!=null?et:Tt.Tooltip)!=null?s:TooltipTooltip,yr=(nt=(ot=Sn.arrow)!=null?ot:Tt.Arrow)!=null?nt:TooltipArrow,Pr=appendOwnerState(er,_extends({},Nn,(ht=hn.popper)!=null?ht:kt.popper,{className:clsx(Jn.popper,Nn==null?void 0:Nn.className,(dt=(pt=hn.popper)!=null?pt:kt.popper)==null?void 0:dt.className)}),wr),jr=appendOwnerState(hr,_extends({},xn,(lt=hn.transition)!=null?lt:kt.transition),wr),Zn=appendOwnerState(Sr,_extends({},(mt=hn.tooltip)!=null?mt:kt.tooltip,{className:clsx(Jn.tooltip,(st=(ut=hn.tooltip)!=null?ut:kt.tooltip)==null?void 0:st.className)}),wr),fr=appendOwnerState(yr,_extends({},(ft=hn.arrow)!=null?ft:kt.arrow,{className:clsx(Jn.arrow,(yt=(vt=hn.arrow)!=null?vt:kt.arrow)==null?void 0:yt.className)}),wr);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Ln,nr),jsxRuntimeExports.jsx(er,_extends({as:kn??Popper$1,placement:In,anchorEl:un?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:tr,popperRef:Wn,open:tr?ir:!1,id:Mn,transition:!0},ur,Pr,{popperOptions:mr,children:({TransitionProps:qn})=>jsxRuntimeExports.jsx(hr,_extends({timeout:Un.transitions.duration.shorter},qn,jr,{children:jsxRuntimeExports.jsxs(Sr,_extends({},Zn,{children:[Rn,xt?jsxRuntimeExports.jsx(yr,_extends({},fr,{ref:Bn})):null]}))}))}))]})}),Tooltip$1=Tooltip;function getCircularProgressUtilityClass(a){return generateUtilityClass("MuiCircularProgress",a)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _excluded$5=["className","color","disableShrink","size","style","thickness","value","variant"];let _$2=a=>a,_t$1,_t2$1,_t3$1,_t4$1;const SIZE=44,circularRotateKeyframe=keyframes(_t$1||(_t$1=_$2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),circularDashKeyframe=keyframes(_t2$1||(_t2$1=_$2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),useUtilityClasses$5=a=>{const{classes:o,variant:_e,color:tt,disableShrink:ct}=a,gt={root:["root",_e,`color${capitalize(tt)}`],svg:["svg"],circle:["circle",`circle${capitalize(_e)}`,ct&&"circleDisableShrink"]};return composeClasses(gt,getCircularProgressUtilityClass,o)},CircularProgressRoot=styled$1("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`color${capitalize(_e.color)}`]]}})(({ownerState:a,theme:o})=>_extends({display:"inline-block"},a.variant==="determinate"&&{transition:o.transitions.create("transform")},a.color!=="inherit"&&{color:(o.vars||o).palette[a.color].main}),({ownerState:a})=>a.variant==="indeterminate"&&css(_t3$1||(_t3$1=_$2`
      animation: ${0} 1.4s linear infinite;
    `),circularRotateKeyframe)),CircularProgressSVG=styled$1("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(a,o)=>o.svg})({display:"block"}),CircularProgressCircle=styled$1("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.circle,o[`circle${capitalize(_e.variant)}`],_e.disableShrink&&o.circleDisableShrink]}})(({ownerState:a,theme:o})=>_extends({stroke:"currentColor"},a.variant==="determinate"&&{transition:o.transitions.create("stroke-dashoffset")},a.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:a})=>a.variant==="indeterminate"&&!a.disableShrink&&css(_t4$1||(_t4$1=_$2`
      animation: ${0} 1.4s ease-in-out infinite;
    `),circularDashKeyframe)),CircularProgress=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCircularProgress"}),{className:ct,color:gt="primary",disableShrink:rt=!1,size:at=40,style:s,thickness:et=3.6,value:nt=0,variant:ot="indeterminate"}=tt,ht=_objectWithoutPropertiesLoose(tt,_excluded$5),dt=_extends({},tt,{color:gt,disableShrink:rt,size:at,thickness:et,value:nt,variant:ot}),pt=useUtilityClasses$5(dt),lt={},mt={},st={};if(ot==="determinate"){const ut=2*Math.PI*((SIZE-et)/2);lt.strokeDasharray=ut.toFixed(3),st["aria-valuenow"]=Math.round(nt),lt.strokeDashoffset=`${((100-nt)/100*ut).toFixed(3)}px`,mt.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,_extends({className:clsx(pt.root,ct),style:_extends({width:at,height:at},mt,s),ownerState:dt,ref:_e,role:"progressbar"},st,ht,{children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:pt.svg,ownerState:dt,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:pt.circle,style:lt,ownerState:dt,cx:SIZE,cy:SIZE,r:(SIZE-et)/2,fill:"none",strokeWidth:et})})}))}),M$1=CircularProgress,CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(a){return generateUtilityClass("MuiChip",a)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),chipClasses$1=chipClasses,_excluded$4=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$4=a=>{const{classes:o,disabled:_e,size:tt,color:ct,iconColor:gt,onDelete:rt,clickable:at,variant:s}=a,et={root:["root",s,_e&&"disabled",`size${capitalize(tt)}`,`color${capitalize(ct)}`,at&&"clickable",at&&`clickableColor${capitalize(ct)}`,rt&&"deletable",rt&&`deletableColor${capitalize(ct)}`,`${s}${capitalize(ct)}`],label:["label",`label${capitalize(tt)}`],avatar:["avatar",`avatar${capitalize(tt)}`,`avatarColor${capitalize(ct)}`],icon:["icon",`icon${capitalize(tt)}`,`iconColor${capitalize(gt)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(tt)}`,`deleteIconColor${capitalize(ct)}`,`deleteIcon${capitalize(s)}Color${capitalize(ct)}`]};return composeClasses(et,getChipUtilityClass,o)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{color:tt,iconColor:ct,clickable:gt,onDelete:rt,size:at,variant:s}=_e;return[{[`& .${chipClasses$1.avatar}`]:o.avatar},{[`& .${chipClasses$1.avatar}`]:o[`avatar${capitalize(at)}`]},{[`& .${chipClasses$1.avatar}`]:o[`avatarColor${capitalize(tt)}`]},{[`& .${chipClasses$1.icon}`]:o.icon},{[`& .${chipClasses$1.icon}`]:o[`icon${capitalize(at)}`]},{[`& .${chipClasses$1.icon}`]:o[`iconColor${capitalize(ct)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o.deleteIcon},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(at)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIconColor${capitalize(tt)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(s)}Color${capitalize(tt)}`]},o.root,o[`size${capitalize(at)}`],o[`color${capitalize(tt)}`],gt&&o.clickable,gt&&tt!=="default"&&o[`clickableColor${capitalize(tt)})`],rt&&o.deletable,rt&&tt!=="default"&&o[`deletableColor${capitalize(tt)}`],o[s],o[`${s}${capitalize(tt)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses$1.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:_e,fontSize:a.typography.pxToRem(12)},[`& .${chipClasses$1.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${chipClasses$1.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${chipClasses$1.icon}`]:_extends({marginLeft:5,marginRight:-6},o.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},o.iconColor===o.color&&_extends({color:a.vars?a.vars.palette.Chip.defaultIconColor:_e},o.color!=="default"&&{color:"inherit"})),[`& .${chipClasses$1.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:alpha(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:alpha(a.palette.text.primary,.4)}},o.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},o.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[o.color].contrastTextChannel} / 0.7)`:alpha(a.palette[o.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].contrastText}})},o.size==="small"&&{height:24},o.color!=="default"&&{backgroundColor:(a.vars||a).palette[o.color].main,color:(a.vars||a).palette[o.color].contrastText},o.onDelete&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},o.onDelete&&o.color!=="default"&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}})},({theme:a,ownerState:o})=>_extends({},o.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},o.clickable&&o.color!=="default"&&{[`&:hover, &.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}}),({theme:a,ownerState:o})=>_extends({},o.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${chipClasses$1.avatar}`]:{marginLeft:4},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses$1.icon}`]:{marginLeft:4},[`& .${chipClasses$1.iconSmall}`]:{marginLeft:2},[`& .${chipClasses$1.deleteIcon}`]:{marginRight:5},[`& .${chipClasses$1.deleteIconSmall}`]:{marginRight:3}},o.variant==="outlined"&&o.color!=="default"&&{color:(a.vars||a).palette[o.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7)}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:alpha(a.palette[o.color].main,a.palette.action.focusOpacity)},[`& .${chipClasses$1.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{size:tt}=_e;return[o.label,o[`label${capitalize(tt)}`]]}})(({ownerState:a})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.variant==="outlined"&&{paddingLeft:11,paddingRight:11},a.size==="small"&&{paddingLeft:8,paddingRight:8},a.size==="small"&&a.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(a){return a.key==="Backspace"||a.key==="Delete"}const Chip=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiChip"}),{avatar:ct,className:gt,clickable:rt,color:at="default",component:s,deleteIcon:et,disabled:nt=!1,icon:ot,label:ht,onClick:dt,onDelete:pt,onKeyDown:lt,onKeyUp:mt,size:st="medium",variant:ut="filled",tabIndex:ft,skipFocusWhenDisabled:yt=!1}=tt,vt=_objectWithoutPropertiesLoose(tt,_excluded$4),St=reactExports.useRef(null),xt=useForkRef(St,_e),Ut=un=>{un.stopPropagation(),pt&&pt(un)},Tt=un=>{un.currentTarget===un.target&&isDeleteKeyboardEvent(un)&&un.preventDefault(),lt&&lt(un)},kt=un=>{un.currentTarget===un.target&&(pt&&isDeleteKeyboardEvent(un)?pt(un):un.key==="Escape"&&St.current&&St.current.blur()),mt&&mt(un)},Dt=rt!==!1&&dt?!0:rt,Vt=Dt||pt?ButtonBase$1:s||"div",Ot=_extends({},tt,{component:Vt,disabled:nt,size:st,color:at,iconColor:reactExports.isValidElement(ot)&&ot.props.color||at,onDelete:!!pt,clickable:Dt,variant:ut}),Lt=useUtilityClasses$4(Ot),Gt=Vt===ButtonBase$1?_extends({component:s||"div",focusVisibleClassName:Lt.focusVisible},pt&&{disableRipple:!0}):{};let tn=null;pt&&(tn=et&&reactExports.isValidElement(et)?reactExports.cloneElement(et,{className:clsx(et.props.className,Lt.deleteIcon),onClick:Ut}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Lt.deleteIcon),onClick:Ut}));let zt=null;ct&&reactExports.isValidElement(ct)&&(zt=reactExports.cloneElement(ct,{className:clsx(Lt.avatar,ct.props.className)}));let cn=null;return ot&&reactExports.isValidElement(ot)&&(cn=reactExports.cloneElement(ot,{className:clsx(Lt.icon,ot.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:Vt,className:clsx(Lt.root,gt),disabled:Dt&&nt?!0:void 0,onClick:dt,onKeyDown:Tt,onKeyUp:kt,ref:xt,tabIndex:yt&&nt?-1:ft,ownerState:Ot},Gt,vt,{children:[zt||cn,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Lt.label),ownerState:Ot,children:ht}),tn]}))}),Chip$1=Chip;var R$1=function(){return R$1=Object.assign||function(a){for(var o,_e=1,tt=arguments.length;_e<tt;_e++)for(var ct in o=arguments[_e])Object.prototype.hasOwnProperty.call(o,ct)&&(a[ct]=o[ct]);return a},R$1.apply(this,arguments)};function x(a,o){var _e={};for(var tt in a)Object.prototype.hasOwnProperty.call(a,tt)&&o.indexOf(tt)<0&&(_e[tt]=a[tt]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var ct=0;for(tt=Object.getOwnPropertySymbols(a);ct<tt.length;ct++)o.indexOf(tt[ct])<0&&Object.prototype.propertyIsEnumerable.call(a,tt[ct])&&(_e[tt[ct]]=a[tt[ct]])}return _e}var S$1=function(a){var o=a.children,_e=x(a,["children"]),tt=reactExports.useMemo(function(){var rt,at=React$1.Children.toArray(o);return at.length<=1?rt={xs:12,sx:{height:{xs:"100%"}}}:at.length<=2?rt={xs:12,md:6,sx:{height:{xs:100/at.length+"%",md:100/Math.ceil(at.length/2)+"%"}}}:at.length<=4?rt={xs:12,sm:6,sx:{height:{xs:100/at.length+"%",sm:100/Math.ceil(at.length/2)+"%"}}}:at.length<=6?rt={xs:6,md:4,sx:{height:{xs:100/Math.ceil(at.length/2)+"%",md:100/Math.ceil(at.length/3)+"%"}}}:at.length<=9?rt={xs:6,sm:4,sx:{height:{xs:100/Math.ceil(at.length/2)+"%",sm:100/Math.ceil(at.length/3)+"%"}}}:at.length<=12?rt={xs:4,md:3,sx:{height:{xs:100/Math.ceil(at.length/3)+"%",md:100/Math.ceil(at.length/4)+"%"}}}:at.length<=24?rt={xs:4,sm:2,sx:{height:{xs:100/Math.ceil(at.length/3)+"%",sm:100/Math.ceil(at.length/6)+"%"}}}:at.length<=42?rt={xs:3,sm:2,sx:{height:{xs:100/Math.ceil(at.length/4)+"%",sm:100/Math.ceil(at.length/6)+"%"}}}:rt={xs:2,lg:1,sx:{height:{xs:100/Math.ceil(at.length/6)+"%",lg:100/Math.ceil(at.length/12)+"%"}}},{arrayChildren:at,responsive:rt}},[o]),ct=tt.arrayChildren,gt=tt.responsive;return React$1.createElement(d$1,R$1({container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"},_e),React$1.Children.map(ct,function(rt,at){return React$1.createElement(d$1,R$1({item:!0,key:at,display:"flex",justifyContent:"center",alignItems:"center"},gt),rt)}))},C$1="default";function O$1(a){var o=a.id,_e=o===void 0?"media-device-selector":o,tt=a.devices,ct=a.selectedDevice,gt=a.setSelectedDevice,rt=x(a,["id","devices","selectedDevice","setSelectedDevice"]),at=reactExports.useMemo(function(){return tt[C$1]},[tt]),s=Object.values(tt).map(function(et){return React$1.createElement(MenuItem$1,{key:et.getId(),value:et.getId()},et.getLabel())});return React$1.createElement(Select$1,R$1({id:_e,value:ct?ct.getId():C$1,onChange:function(et){et.preventDefault(),globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat("MediaDeviceSelect","|onSelectDevice"),et.target.value),gt(tt[et.target.value])}},rt),!at&&React$1.createElement(MenuItem$1,{key:C$1,value:C$1},"Default"),s)}var P$1=reactExports.createContext({stream:void 0,muted:!1,toggleMuted:function(){}}),z="Audio";function F(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|Rendering"));var _e=a.id,tt=_e===void 0?(o=a.stream)===null||o===void 0?void 0:o.getId():_e,ct=a.autoPlay,gt=ct===void 0||ct,rt=a.muted,at=a.stream;a.sinkId;var s=x(a,["id","autoPlay","muted","stream","sinkId"]),et=reactExports.useContext(P$1),nt=et.stream,ot=et.muted,ht=ot!==void 0&&ot,dt=reactExports.useMemo(function(){return at??nt},[nt,at]),pt=reactExports.useMemo(function(){return rt??ht},[ht,rt]),lt=reactExports.useRef(null);return reactExports.useEffect(function(){var mt=lt==null?void 0:lt.current;if(dt&&mt)return globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|useEffect stream"),mt,dt),dt.attachToElement(mt),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|useEffect stream destroy")),mt.src=""}},[dt]),reactExports.useEffect(function(){var mt=lt==null?void 0:lt.current;mt&&a.sinkId&&mt.setSinkId&&mt.setSinkId(a.sinkId)},[a.sinkId]),React$1.createElement(Box$1,R$1({display:"flex",alignItems:"center",justifyContent:"center"},s),dt&&React$1.createElement(Icon$1,{fontSize:"large"},dt.isRemote?"headset_mic":"mic"),React$1.createElement("audio",{id:tt,ref:lt,autoPlay:gt,muted:pt}))}var W$1=function(a){a.stopPropagation()},j="AudioEnableButton";function B(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(j)}),tt=_e.id,ct=tt===void 0?"audio-enable-btn":tt,gt=_e.enabledTooltip,rt=gt===void 0?"Audio enabled, click to disable":gt,at=_e.disabledTooltip,s=at===void 0?"Audio disabled, click to enable":at,et=_e.noAudioTooltip,nt=et===void 0?"No Audio":et,ot=_e.tooltipProps,ht=ot===void 0?{placement:"left",arrow:!0}:ot,dt=_e.enabledIcon,pt=dt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"mic"):dt,lt=_e.disabledIcon,mt=lt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"mic_off"):lt,st=x(_e,["id","enabledTooltip","disabledTooltip","noAudioTooltip","tooltipProps","enabledIcon","disabledIcon"]),ut=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable audio",ft=reactExports.useReducer(function(xt){return xt+1},0)[1],yt=reactExports.useContext(P$1).stream;reactExports.useEffect(function(){if(yt){var xt=function(Ut){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(j,"|onAudioFlowStatusChanged"),yt,Ut,yt.isAudioEnabled()),ft()};return yt.on("audioFlowStatusChanged",xt),yt.on("remoteAudioFlowStatusChanged",xt),function(){yt.removeListener("audioFlowStatusChanged",xt),yt.removeListener("remoteAudioFlowStatusChanged",xt)}}},[yt]);var vt=function(){yt&&(yt.isAudioEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(j,"|stream.disableAudio"),yt.isAudioEnabled()),yt.disableAudio(!0).catch(function(xt){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(j,"|stream.disableAudio failed"),xt)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(j,"|stream.enableAudio"),yt.isAudioEnabled()),yt.enableAudio(!0).catch(function(xt){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(j,"|stream.enableAudio failed"),xt)})),ft())},St=yt&&yt.hasAudio()?yt.isAudioEnabled()?rt:s:nt;return React$1.createElement(Tooltip$1,R$1({title:St},ht),React$1.createElement("span",{onClick:W$1},React$1.createElement(IconButton$1,R$1({id:ct,"aria-label":ut},st,{disabled:_e.disabled||yt&&!yt.hasAudio(),onClick:function(xt){xt.preventDefault(),vt()},onKeyDown:function(xt){xt.preventDefault(),xt.key!==" "||yt!=null&&yt.isAudioEnabled()||vt()},onKeyUp:function(xt){xt.preventDefault(),xt.key===" "&&(yt!=null&&yt.isAudioEnabled())&&vt()}}),yt&&yt.hasAudio()&&yt.isAudioEnabled()?pt:mt)))}var _$1="MuteButton";function H(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(_$1,"|Rendering"));var _e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(_$1)}),tt=_e.id,ct=tt===void 0?"mute-btn":tt,gt=_e.mutedTooltip,rt=gt===void 0?"Muted":gt,at=_e.unmutedTooltip,s=at===void 0?"On":at,et=_e.noAudioTooltip,nt=et===void 0?"No Audio":et,ot=_e.tooltipProps,ht=ot===void 0?{placement:"left",arrow:!0}:ot,dt=x(_e,["id","mutedTooltip","unmutedTooltip","noAudioTooltip","tooltipProps"]),pt=(o=_e["aria-label"])!==null&&o!==void 0?o:"mute",lt=reactExports.useContext(P$1),mt=lt.stream,st=lt.muted,ut=lt.toggleMuted,ft=mt&&mt.hasAudio()?st?rt:s:nt,yt=mt&&mt.hasAudio()?st?React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_up"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off");return React$1.createElement(Tooltip$1,R$1({title:ft},ht),React$1.createElement("span",{onClick:W$1},React$1.createElement(IconButton$1,R$1({id:ct,"aria-label":pt},dt,{disabled:a.disabled||mt&&!mt.hasAudio(),onClick:function(vt){vt.preventDefault(),ut()}}),yt)))}var N=function(a){var o=reactExports.useState(a),_e=o[0],tt=o[1],ct=reactExports.useCallback(function(){tt(function(gt){return!gt})},[]);return reactExports.useEffect(function(){tt(a)},[a]),reactExports.useMemo(function(){return{value:_e,setValue:tt,toggle:ct}},[_e,ct])},G={border:1,borderColor:"primary.main"},K="Stream";function U(a){var o=a.id,_e=a.children,tt=a.controls,ct=a.detectSpeaking,gt=ct!==void 0&&ct,rt=a.muted,at=rt!==void 0&&rt,s=a.name,et=a.nameColor,nt=et===void 0?void 0:et,ot=a.stream,ht=a.sx,dt=x(a,["id","children","controls","detectSpeaking","muted","name","nameColor","stream","sx"]),pt=N(at),lt=pt.value,mt=pt.toggle,st=reactExports.useState(!1),ut=st[0],ft=st[1],yt=reactExports.useRef(null),vt=reactExports.useRef(null),St=reactExports.useState({height:0,width:0}),xt=St[0],Ut=St[1],Tt=reactExports.useState({height:0,width:0}),kt=Tt[0],Dt=Tt[1];reactExports.useEffect(function(){if(ot&&gt){var Ot=ot,Lt=function(Gt){ft(Gt.isSpeaking)};return Ot.on("audioAmplitude",Lt),function(){Ot.removeListener("audioAmplitude",Lt)}}},[ot,gt]),reactExports.useEffect(function(){var Ot=yt.current;if(Ot){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(K,"|setSize"),Ot.clientHeight,Ot.clientWidth),Ut({height:Ot.clientHeight,width:Ot.clientWidth});var Lt=new ResizeObserver(function(){Ut({height:Ot.clientHeight,width:Ot.clientWidth})});return Lt.observe(Ot),function(){Lt.disconnect()}}},[yt]),reactExports.useEffect(function(){var Ot=vt.current;if(Ot){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(K,"|setControlsSize"),Ot.clientHeight,Ot.clientWidth),Dt({height:Ot.clientHeight,width:Ot.clientWidth});var Lt=new ResizeObserver(function(){Dt({height:Ot.clientHeight,width:Ot.clientWidth})});return Lt.observe(Ot),function(){Lt.disconnect()}}},[vt]);var Vt=reactExports.useMemo(function(){return Math.max(Math.ceil(.01*xt.width),4)},[xt]);return React$1.createElement(P$1.Provider,{value:{stream:ot,muted:lt,toggleMuted:mt}},React$1.createElement(Box$1,R$1({id:o,ref:yt,sx:R$1(R$1(R$1({minHeight:kt.height+2*Vt+(s?36:0),minWidth:tt?Math.max(40+2*kt.width,40)+Vt:0},ht),{position:"relative"}),ut&&G),display:"flex",justifyContent:"center",alignItems:"center"},dt),_e,s&&React$1.createElement(Chip$1,{sx:{position:"absolute",top:Vt,left:"50%",transform:"translate(-50%)",opacity:.9},label:s,color:nt}),React$1.createElement(Stack$1,{ref:vt,sx:{position:"absolute",float:"right",bottom:Vt,right:Vt,opacity:.9}},tt)))}var X="Video";function Y(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(X)}),tt=_e.id,ct=tt===void 0?(o=_e.stream)===null||o===void 0?void 0:o.getId():tt,gt=_e.sx,rt=_e.style,at=_e.autoPlay,s=at===void 0||at,et=_e.muted,nt=_e.pointer,ot=_e.pointerColor,ht=_e.progressColor,dt=_e.stream,pt=_e.sinkId,lt=_e.videoMutedTooltip,mt=lt===void 0?"Video muted":lt,st=x(_e,["id","sx","style","autoPlay","muted","pointer","pointerColor","progressColor","stream","sinkId","videoMutedTooltip"]),ut=reactExports.useContext(P$1),ft=ut.stream,yt=ut.muted,vt=yt!==void 0&&yt,St=reactExports.useMemo(function(){return dt??ft},[ft,dt]),xt=reactExports.useMemo(function(){return et??vt},[vt,et]),Ut=reactExports.useRef(null),Tt=reactExports.useReducer(function(kt){return kt+1},0)[1];return reactExports.useEffect(function(){var kt=Ut==null?void 0:Ut.current;if(St&&kt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(X,"|useEffect stream"),kt,St),St.attachToElement(kt);var Dt=function(Vt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(X,"|onVideoFlowStatusChanged"),St,Vt),Tt()};return St.on("videoFlowStatusChanged",Dt),St.on("remoteVideoFlowStatusChanged",Dt),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(X,"|useEffect stream destroy")),kt.src="",St.removeListener("audioFlowStatusChanged",Dt),St.removeListener("remoteAudioFlowStatusChanged",Dt)}}},[St]),reactExports.useEffect(function(){var kt=Ut==null?void 0:Ut.current;kt&&pt&&kt.setSinkId&&kt.setSinkId(pt)},[pt]),React$1.createElement(Box$1,R$1({sx:R$1(R$1({},gt),{position:"relative"})},st),React$1.createElement("video",{id:ct,ref:Ut,style:rt,autoPlay:s,muted:xt}),nt&&React$1.createElement(Icon$1,{sx:{position:"absolute",top:nt.top,left:nt.left,transform:"translate(-50%,-50%)",opacity:.9},color:ot},"adjust"),(St==null?void 0:St.isVideoMuted())&&React$1.createElement(Tooltip$1,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",opacity:.9},title:mt},React$1.createElement(M$1,{color:ht})))}var Z="VideoEnableButton";function $$1(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(Z)}),tt=_e.id,ct=tt===void 0?"video-enable-btn":tt,gt=_e.enabledTooltip,rt=gt===void 0?"Video enabled, click to disable":gt,at=_e.disabledTooltip,s=at===void 0?"Video disabled, click to enable":at,et=_e.noVideoTooltip,nt=et===void 0?"No Video":et,ot=_e.tooltipProps,ht=ot===void 0?{placement:"left",arrow:!0}:ot,dt=_e.enabledIcon,pt=dt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"videocam"):dt,lt=_e.disabledIcon,mt=lt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"videocam_off"):lt,st=x(_e,["id","enabledTooltip","disabledTooltip","noVideoTooltip","tooltipProps","enabledIcon","disabledIcon"]),ut=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable video",ft=reactExports.useReducer(function(St){return St+1},0)[1],yt=reactExports.useContext(P$1).stream;reactExports.useEffect(function(){if(yt){var St=function(xt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Z,"|onVideoFlowStatusChanged"),yt,xt,yt.isVideoEnabled()),ft()};return yt.on("videoFlowStatusChanged",St),yt.on("remoteVideoFlowStatusChanged",St),function(){yt.removeListener("videoFlowStatusChanged",St),yt.removeListener("remoteVideoFlowStatusChanged",St)}}},[yt]);var vt=yt&&yt.hasVideo()?yt.isVideoEnabled()?rt:s:nt;return React$1.createElement(Tooltip$1,R$1({title:vt},ht),React$1.createElement("span",{onClick:W$1},React$1.createElement(IconButton$1,R$1({id:ct,"aria-label":ut},st,{disabled:_e.disabled||yt&&!yt.hasVideo(),onClick:function(St){St.preventDefault(),yt&&(yt.isVideoEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Z,"|stream.disableVideo"),yt.isVideoEnabled()),yt.disableVideo(!0).catch(function(xt){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(Z,"|stream.disableVideo failed"),xt)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Z,"|stream.enableVideo"),yt.isVideoEnabled()),yt.enableVideo(!0).catch(function(xt){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(Z,"|stream.enableVideo failed"),xt)})),ft())}}),yt&&yt.hasVideo()&&yt.isVideoEnabled()?pt:mt)))}var ee={components:{ApiRtcMuiReactLibAudioEnableButton:{defaultProps:{"aria-label":"activer ou dsactiver l'audio",enabledTooltip:"Audio activ, cliquer pour dsactiver",disabledTooltip:"Audio dsactiv, cliquer pour activer",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibMuteButton:{defaultProps:{"aria-label":"activer ou dsactiver le son",mutedTooltip:"Son dsactiv, cliquer pour activer",unmutedTooltip:"Son activ, cliquer pour dsactiver",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibPublishOptions:{defaultProps:{labelText:"Options de publication",audioAndVideoText:"Audio et Vido",audioOnlyText:"Audio seul",videoOnlyText:"Vido seule"}},ApiRtcMuiReactLibSnapshotButton:{defaultProps:{"aria-label":"photo",snapshotTooltip:"Prendre une photo"}},ApiRtcMuiReactLibTorchButton:{defaultProps:{"aria-label":"torche",torchOffTooltip:"Eteindre la torche",torchOnTooltip:"Allumer la torche"}},ApiRtcMuiReactLibVideo:{defaultProps:{videoMutedTooltip:"Vido coupe"}},ApiRtcMuiReactLibVideoEnableButton:{defaultProps:{"aria-label":"activer ou dsactiver la vido",enabledTooltip:"Vido active, cliquer pour dsactiver",disabledTooltip:"Vido dsactive, cliquer pour activer",noVideoTooltip:"Pas de Vido"}}}},te={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function ie(a){switch(a){case"debug":globalThis.apirtcMuiReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcMuiReactLibLogLevel=te;break;case"warn":globalThis.apirtcMuiReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcMuiReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcMuiReactLibLogLevel}globalThis.apirtcMuiReactLibLogLevel=te,globalThis.setApirtcMuiReactLibLogLevel=ie;const c={},d="useCameraStream";function b(a,o=c,_e){const[tt,ct]=reactExports.useState(),[gt,rt]=reactExports.useState(!1),[at,s]=reactExports.useState();return reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${d}|useEffect`,a,o),a){const et=a.getUserAgent();rt(!0),et.createStream(o).then(nt=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${d}|createStream`,o,nt),ct(nt),s(void 0)}).catch(nt=>{console.error(`${d}|createStream error`,o,nt),ct(void 0),_e&&_e(nt),s(nt)}).finally(()=>{rt(!1)})}else ct(void 0),s(void 0)},[a,o,_e]),reactExports.useEffect(()=>{const et=tt;if(et)return()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${d}|release stream`,et),et.release()}},[tt]),{stream:tt,grabbing:gt,error:at}}const g="useConversation";function u(a,o,_e,tt=!0,ct){const[gt,rt]=reactExports.useState(),[at,s]=reactExports.useState(!1),[et,nt]=reactExports.useState(!1),ot=reactExports.useCallback((dt={})=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|join`,gt,dt),new Promise((pt,lt)=>{gt?gt.isJoined()?lt(`${g}|join|conversation already joined`):(nt(!0),gt.join(dt).then(()=>{s(!0),pt()}).catch(mt=>{lt(mt)}).finally(()=>{nt(!1)})):lt(`${g}|join|conversation not defined`)})),[gt]),ht=reactExports.useCallback(()=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|leave`,gt),new Promise((dt,pt)=>{gt?gt.isJoined()?gt.leave().then(()=>{s(!1),dt()}).catch(lt=>{pt(lt)}):pt(`${g}|leave|conversation is not joined`):pt(`${g}|leave|conversation not defined`)})),[gt]);return reactExports.useEffect(()=>{if(a&&o){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|getOrCreateConversation`,o,_e);const dt=a.getOrCreateConversation(o,_e);return rt(dt),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,o,_e),dt.isJoined()?dt.leave().then(()=>{}).catch(pt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave()`,pt)}).finally(()=>{dt.destroy()}):dt.destroy(),rt(void 0),s(!1)}}},[a,o,_e]),reactExports.useEffect(()=>{if(gt&&tt){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect`,gt,tt,ct);const dt=gt,pt=tt;return pt&&(nt(!0),dt.join(ct).then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${g}|joined`,dt),s(!0)}).catch(lt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.join() error`,dt,ct,lt)}).finally(()=>{nt(!1)})),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,dt,pt),dt.isJoined()&&dt.leave().then(()=>{s(!1)}).catch(lt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave() error`,dt,lt)})}}},[gt,_e,tt,ct]),{conversation:gt,joining:et,joined:at,join:ot,leave:ht}}function E(a){return a!=null}const $=[],T="useConversationStreams";function R(a,o=$,_e){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|hook render|${a==null?void 0:a.getName()}`,o.map(lt=>lt==null?void 0:lt.options));const tt=reactExports.useRef([]),[ct,gt]=reactExports.useState(new Array),[rt,at]=reactExports.useState(new Array),s=reactExports.useCallback((lt,mt)=>new Promise((st,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|publish|${a.getName()}`,lt,mt),a.publish(lt,mt).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|published|${a.getName()}`,ft),gt(yt=>[...yt,ft]),st(ft)}).catch(ft=>{ut(ft)}))}),[a]),et=reactExports.useCallback((lt,mt)=>new Promise((st,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|replacePublishedStream|${a.getName()}|${lt.getId()} -> ${mt.getId()}`),a.replacePublishedStream(lt,mt).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|stream replaced|${a.getName()}`,lt,ft),gt(yt=>{const vt=yt.indexOf(lt);return vt>=0&&yt.splice(vt,1,ft),Array.from(yt)}),st(ft)}).catch(ft=>{ut(ft)}))}),[a]),nt=reactExports.useCallback(lt=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unpublish|${a.getName()}`,lt.getId(),lt),a.unpublish(lt),gt(mt=>mt.filter(st=>st!==lt)))},[a]),ot=reactExports.useCallback(()=>{const lt=Math.max(tt.current.length,o.length);globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|doHandlePublication`,o,JSON.stringify(tt.current.map(yt=>yt==null?void 0:yt.stream.getId())),JSON.stringify(o.map(yt=>yt==null?void 0:yt.stream.getId())),lt);const mt=[...tt.current],st=o.map(yt=>yt&&yt.options?{stream:yt.stream,options:Object.assign({},yt.options)}:yt);tt.current.length=0,tt.current.push(...st);const ut=new Set(o.filter(E).map(yt=>yt.stream)),ft=(yt,vt)=>{s(vt.stream,vt.options).catch(St=>{tt.current.splice(yt,1,null),_e?_e(St):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${T}|publish|error`,St)})};for(let yt=0;yt<lt;yt++){const vt=mt[yt],St=o[yt];if(vt&&St){const xt=()=>{nt(vt.stream),ft(yt,St)};vt.stream===St.stream?JSON.stringify(vt.options)!==JSON.stringify(St.options)&&xt():ut.has(vt.stream)?a&&!a.isPublishedStream(St.stream)&&ft(yt,St):a&&!a.isPublishedStream(St.stream)?JSON.stringify(vt.options)===JSON.stringify(St.options)?et(vt.stream,St.stream).catch(Ut=>{tt.current.splice(yt,1,null),_e?_e(Ut):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${T}|replacePublishedStream|error`,Ut)}):xt():nt(vt.stream)}else vt&&!St?ut.has(vt.stream)||nt(vt.stream):!vt&&St&&a&&!a.isPublishedStream(St.stream)&&ft(yt,St)}},[a,o,s,nt,et,_e]),ht=reactExports.useCallback(()=>{a&&gt(lt=>(lt.forEach(mt=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unpublish|${a.getName()}`,mt),a.unpublish(mt)}),[])),tt.current.length=0},[a]),dt=reactExports.useCallback(()=>{a&&at(lt=>(lt.forEach(mt=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unsubscribeToStream|${a.getName()}`,mt),a.unsubscribeToStream(mt.getId())}),[]))},[a]),pt=reactExports.useCallback(()=>{ht(),dt()},[ht,dt]);return reactExports.useEffect(()=>{if(a){tt.current.length=0;const lt=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_streamAdded|${a.getName()}`,ut),at(ft=>[...ft,ut])},mt=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_streamRemoved|${a.getName()}`,ut),at(ft=>ft.filter(yt=>yt!==ut))},st=ut=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|on_streamListChanged|${a.getName()}`,ut);const ft=String(ut.streamId);ut.isRemote===!0&&(ut.listEventType==="added"?a.subscribeToStream(ft):ut.listEventType==="removed"&&a.unsubscribeToStream(ft))};return a.on("streamAdded",lt),a.on("streamRemoved",mt),a.on("streamListChanged",st),()=>{a.removeListener("streamListChanged",st),a.removeListener("streamRemoved",mt),a.removeListener("streamAdded",lt),pt()}}},[a,pt]),reactExports.useEffect(()=>{if(a){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|useEffect doHandlePublication|${a.getName()}`,o);const lt=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_joined|${a.getName()}`),ot()},mt=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_left|${a.getName()}`),pt()};return a.on("joined",lt),a.on("left",mt),a.isJoined()&&ot(),()=>{a.removeListener("joined",lt),a.removeListener("left",mt)}}},[a,o,ot,pt]),{publishedStreams:ct,subscribedStreams:rt,publish:s,unpublish:nt,replacePublishedStream:et,unsubscribeAll:dt}}const S="useSession";function D(a,o,_e){const[tt,ct]=reactExports.useState(),[gt,rt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect credentials, options`,a,o),a)return at(a,o).catch(s=>{console.error(`${S}|connection failed`,s),ct(void 0),_e?_e(s):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${S}|connect|error`,s)}),()=>{ct(void 0),rt(!1)}},[a,o,_e]),reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect session`,tt),tt){const s=tt;return()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect session cleanup`,s),s.disconnect().then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${S}|disconnected`,s)}).catch(et=>{console.error(`${S}|disconnect`,et)})}}},[tt]);const at=(s,et)=>new Promise((nt,ot)=>{const ht=et||{cloudUrl:"https://cloud.apirtc.com"};let dt;if(typeof(pt=s)=="object"&&"username"in pt)ht.password=s.password,dt=new apiRTC_minExports.UserAgent({uri:`apirtc:${s.username}`});else if(function(lt){return typeof lt=="object"&&"apiKey"in lt}(s))dt=new apiRTC_minExports.UserAgent({uri:`apiKey:${s.apiKey}`});else{if(!function(lt){return typeof lt=="object"&&"token"in lt}(s))return void ot("credentials not recognized");dt=new apiRTC_minExports.UserAgent({uri:`token:${s.token}`})}var pt;rt(!0),dt.register(ht).then(lt=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${S}|connected`,lt),ct(lt),nt()}).catch(lt=>{ot(lt)}).finally(()=>{rt(!1)})});return{session:tt,connecting:gt,connect:at,disconnect:()=>{ct(void 0)}}}const P="useUserMediaDevices",J=a=>{try{const o=localStorage.getItem(a),_e=o?JSON.parse(o):null;return _e?new apiRTC_minExports.MediaDevice(_e.id,_e.type,_e.label):void 0}catch(o){return void console.warn(`${P}|getMediaDeviceFromLocalStorage`,o)}},O=(a,o)=>{try{localStorage.setItem(a,o)}catch{}};function W(a,o){const _e=reactExports.useMemo(()=>o?`${o}.audioIn`:void 0,[o]),tt=reactExports.useMemo(()=>o?`${o}.audioOut`:void 0,[o]),ct=reactExports.useMemo(()=>o?`${o}.videoIn`:void 0,[o]),[gt,rt]=reactExports.useState(()=>_e?J(_e):void 0),[at,s]=reactExports.useState(()=>tt?J(tt):void 0),[et,nt]=reactExports.useState(()=>ct?J(ct):void 0),[ot,ht]=reactExports.useState({audioinput:gt?{[gt.getId()]:gt}:{},audiooutput:at?{[at.getId()]:at}:{},videoinput:et?{[et.getId()]:et}:{}});return reactExports.useEffect(()=>{if(a){const dt=a.getUserAgent(),pt=()=>{const lt=dt.getUserMediaDevices();globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${P}|mediaDeviceChanged`,lt),ht(lt),rt(mt=>mt?lt.audioinput[mt.getId()]:void 0),s(mt=>mt?lt.audiooutput[mt.getId()]:void 0),nt(mt=>mt?lt.videoinput[mt.getId()]:void 0)};return dt.on("mediaDeviceChanged",pt),()=>{dt.removeListener("mediaDeviceChanged",pt)}}},[a]),reactExports.useEffect(()=>{gt&&_e&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${P}|Storing audioIn`,gt),O(_e,JSON.stringify({id:gt.getId(),type:gt.getType(),label:gt.getLabel()})))},[_e,gt]),reactExports.useEffect(()=>{at&&tt&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${P}|Storing audioOut`,at),O(tt,JSON.stringify({id:at.getId(),type:at.getType(),label:at.getLabel()})))},[tt,at]),reactExports.useEffect(()=>{et&&ct&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${P}|Storing videoIn`,et),O(ct,JSON.stringify({id:et.getId(),type:et.getType(),label:et.getLabel()})))},[ct,et]),{userMediaDevices:ot,selectedAudioIn:gt,selectedAudioInId:gt==null?void 0:gt.getId(),setSelectedAudioIn:rt,selectedAudioOut:at,selectedAudioOutId:at==null?void 0:at.getId(),setSelectedAudioOut:s,selectedVideoIn:et,selectedVideoInId:et==null?void 0:et.getId(),setSelectedVideoIn:nt}}const C={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function M(a){switch(a){case"debug":globalThis.apirtcReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcReactLibLogLevel=C;break;case"warn":globalThis.apirtcReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcReactLibLogLevel}globalThis.apirtcReactLibLogLevel=C,globalThis.setApirtcReactLibLogLevel=M;var build_umd={exports:{}};(function(a,o){(function(tt,ct){a.exports=ct()})(commonjsGlobal,function(){return function(){var _e={"./packages/@logrocket/arson/src/index.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.encode=xt,at.decode=kt;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ot=-1,ht=-2,dt=-3,pt=-4,lt=-5,mt=Object.create(null),st=function(Ot,Lt){function Gt(tn){if(typeof Lt[tn]!="function")throw new Error("second argument to ARSON.registerType("+JSON.stringify(Ot)+", ...) must be an object with a "+tn+" method")}Gt("deconstruct"),Gt("reconstruct"),mt[Ot]=Lt},ut=Object.prototype.toString,ft="[object Date]",yt="[object RegExp]",vt="[object Set]",St="[object Map]";typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&st("Buffer",{deconstruct:function(Ot){return Buffer.isBuffer(Ot)&&[Ot.toString("base64"),"base64"]},reconstruct:function(Ot){return Ot&&Buffer.from(Ot[0],Ot[1])}}),st("Date",{deconstruct:function(Ot){return ut.call(Ot)===ft&&[Ot.toJSON()]},reconstruct:function(Ot){return Ot&&new Date(Ot[0])}}),st("RegExp",{deconstruct:function(Ot){if(ut.call(Ot)===yt){var Lt=[Ot.source],Gt="";return Ot.ignoreCase&&(Gt+="i"),Ot.multiline&&(Gt+="m"),Ot.global&&(Gt+="g"),Gt&&Lt.push(Gt),Lt}},reconstruct:function(Ot){return Ot&&new RegExp(Ot[0],Ot[1])}}),typeof Set=="function"&&typeof Array.from=="function"&&st("Set",{deconstruct:function(Ot){if(ut.call(Ot)===vt)return Array.from(Ot)},reconstruct:function(Ot){if(Ot)Ot.forEach(this.add,this);else return new Set}}),typeof Map=="function"&&typeof Array.from=="function"&&st("Map",{deconstruct:function(Ot){if(ut.call(Ot)===St)return Array.from(Ot)},reconstruct:function(Ot){if(Ot)Ot.forEach(function(Lt){this.set(Lt[0],Lt[1])},this);else return new Map}});function xt(Vt){return JSON.stringify(Ut(Vt))}function Ut(Vt){var Ot=[],Lt=typeof Map=="function"&&new Map;function Gt(fn){switch((0,nt.default)(fn)){case"undefined":return ot;case"number":if(isNaN(fn))return dt;if(!isFinite(fn))return fn<0?lt:pt}var vn;return Lt?(vn=Lt.get(fn),typeof vn>"u"&&(vn=Ot.push(fn)-1,Lt.set(fn,vn))):(vn=Ot.indexOf(fn),vn<0&&(vn=Ot.push(fn)-1)),vn}function tn(fn){var vn=fn;if(fn&&(0,nt.default)(fn)==="object"){var Ft=Object.keys(fn);if(Tt(fn))vn={};else if(Array.isArray(fn)){vn=Array(fn.length);var pn=fn.length;if(pn>Ft.length)for(var gn=0;gn<pn;++gn)vn[gn]=ht}else{for(var Tn in mt){var In=mt[Tn].deconstruct(fn);if(In){for(var gn=0;gn<In.length;++gn)In[gn]=Gt(In[gn]);return In.unshift(Tn),In}}return{}.toString.call(fn)}Ft.forEach(function(kn){vn[kn]=Gt(fn[kn])})}return vn}var zt=Gt(Vt);if(zt<0)return zt;for(var cn=[],un=0;un<Ot.length;++un)cn[un]=tn(Ot[un]);return cn}function Tt(Vt){var Ot=Vt&&(0,nt.default)(Vt)==="object";if(Ot){var Lt=Object.getPrototypeOf?Object.getPrototypeOf(Vt):Vt.__proto__;return Lt===Object.prototype}return!1}function kt(Vt){return Dt(JSON.parse(Vt))}function Dt(Vt){if(typeof Vt=="number"&&Vt<0)return Gt(Vt);var Ot=new Array(Vt.length);function Lt(cn){return cn in Ot?Ot[cn]:Ot[cn]=Gt(cn)}function Gt(cn){if(cn<0){if(cn===ot||cn===ht)return;if(cn===dt)return NaN;if(cn===pt)return 1/0;if(cn===lt)return-1/0;throw new Error("invalid ARSON index: "+cn)}var un=Vt[cn];if(un&&(0,nt.default)(un)==="object"){if(Array.isArray(un)){var fn=un[0];if(typeof fn=="string"&&fn in mt){var vn=mt[fn].reconstruct,Ft=vn();return Ft&&tn.push({reconstruct:vn,empty:Ft,argIndexes:un.slice(1)}),Vt[cn]=Ft||vn(un.slice(1).map(Lt))}}zt.push(un)}return un}var tn=[],zt=[];return Vt.forEach(function(cn,un){Lt(un)}),tn.forEach(function(cn){cn.args=cn.argIndexes.map(Lt)}),zt.forEach(function(cn){Object.keys(cn).forEach(function(un){var fn=cn[un];if(typeof fn=="number")if(fn<0){if(fn===ht){delete cn[un];return}cn[un]=Lt(fn)}else cn[un]=Vt[fn]})}),tn.forEach(function(cn){cn.reconstruct.call(cn.empty,cn.args)}),Vt[0]}},"./packages/@logrocket/console/src/index.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var nt=et(s("./packages/@logrocket/console/src/registerConsole.js")),ot=nt.default;at.default=ot},"./packages/@logrocket/console/src/registerConsole.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ot=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),ht=s("./packages/@logrocket/exceptions/src/index.js");function dt(pt){var lt=[],mt=["log","warn","info","error","debug"];return mt.forEach(function(st){lt.push((0,ot.default)(console,st,function(){for(var ut=arguments.length,ft=new Array(ut),yt=0;yt<ut;yt++)ft[yt]=arguments[yt];pt.addEvent("lr.core.LogEvent",function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=vt.isEnabled;return(0,nt.default)(St)==="object"&&St[st]===!1||St===!1?null:(st==="error"&&vt.shouldAggregateConsoleErrors&&ht.Capture.captureMessage(pt,ft[0],ft,{},!0),{logLevel:st.toUpperCase(),args:ft})})}))}),function(){lt.forEach(function(st){return st()})}}},"./packages/@logrocket/exceptions/src/Capture.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.captureMessage=dt,at.captureException=pt;var nt=s("./packages/@logrocket/utils/src/index.ts"),ot=et(s("./packages/@logrocket/utils/src/TraceKit.js")),ht=et(s("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function dt(lt,mt,st){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ft=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,yt={exceptionType:ft?"CONSOLE":"MESSAGE",message:mt,messageArgs:st,browserHref:window.location?window.location.href:""};(0,nt.scrubException)(yt,ut),lt.addEvent("lr.core.Exception",function(){return yt})}function pt(lt,mt){var st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ft=ut||ot.default.computeStackTrace(mt),yt={exceptionType:"WINDOW",errorType:ft.name,message:ft.message,browserHref:window.location?window.location.href:""};(0,nt.scrubException)(yt,st);var vt={_stackTrace:(0,ht.default)(ft)};lt.addEvent("lr.core.Exception",function(){return yt},vt)}},"./packages/@logrocket/exceptions/src/index.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(at,"__esModule",{value:!0}),Object.defineProperty(at,"registerExceptions",{enumerable:!0,get:function(){return ot.default}}),at.Capture=void 0;var ot=et(s("./packages/@logrocket/exceptions/src/registerExceptions.js")),ht=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));at.Capture=ht;function dt(lt){if(typeof WeakMap!="function")return null;var mt=new WeakMap,st=new WeakMap;return(dt=function(ft){return ft?st:mt})(lt)}function pt(lt,mt){if(!mt&&lt&&lt.__esModule)return lt;if(lt===null||nt(lt)!=="object"&&typeof lt!="function")return{default:lt};var st=dt(mt);if(st&&st.has(lt))return st.get(lt);var ut={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var yt in lt)if(yt!=="default"&&Object.prototype.hasOwnProperty.call(lt,yt)){var vt=ft?Object.getOwnPropertyDescriptor(lt,yt):null;vt&&(vt.get||vt.set)?Object.defineProperty(ut,yt,vt):ut[yt]=lt[yt]}return ut.default=lt,st&&st.set(lt,ut),ut}},"./packages/@logrocket/exceptions/src/raven/raven.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),ot=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),ht=et(s("./packages/@logrocket/utils/src/TraceKit.js")),dt=Object.prototype;function pt(yt){return yt===void 0}function lt(yt){return typeof yt=="function"}function mt(yt,vt){return dt.hasOwnProperty.call(yt,vt)}function st(yt,vt,St,xt){var Ut=yt[vt];yt[vt]=St(Ut),xt&&xt.push([yt,vt,Ut])}var ut=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{};ut.document;var ft=function(){function yt(vt){var St=vt.captureException;(0,nt.default)(this,yt),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=St,ht.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,ot.default)(yt,[{key:"uninstall",value:function(){ht.default.report.unsubscribe(this._errorHandler);for(var St;this._wrappedBuiltIns.length;){St=this._wrappedBuiltIns.shift();var xt=St[0],Ut=St[1],Tt=St[2];xt[Ut]=Tt}}},{key:"_errorHandler",value:function(St){this._ignoreOnError||this.captureException(St)}},{key:"_ignoreNextOnError",value:function(){var St=this;this._ignoreOnError+=1,setTimeout(function(){St._ignoreOnError-=1})}},{key:"context",value:function(St,xt,Ut){return lt(St)&&(Ut=xt||[],xt=St,St=void 0),this.wrap(St,xt).apply(this,Ut)}},{key:"wrap",value:function(St,xt,Ut){var Tt=this;if(pt(xt)&&!lt(St))return St;if(lt(St)&&(xt=St,St=void 0),!lt(xt))return xt;try{if(xt.__lr__)return xt;if(xt.__lr_wrapper__)return xt.__lr_wrapper__;if(!Object.isExtensible(xt))return xt}catch{return xt}function kt(){var Vt=[],Ot=arguments.length,Lt=!St||St&&St.deep!==!1;for(Ut&&lt(Ut)&&Ut.apply(this,arguments);Ot--;)Vt[Ot]=Lt?Tt.wrap(St,arguments[Ot]):arguments[Ot];try{return xt.apply(this,Vt)}catch(Gt){throw Tt._ignoreNextOnError(),Tt.captureException(ht.default.computeStackTrace(Gt),St),Gt}}for(var Dt in xt)mt(xt,Dt)&&(kt[Dt]=xt[Dt]);return kt.prototype=xt.prototype,xt.__lr_wrapper__=kt,kt.__lr__=!0,kt.__inner__=xt,kt}},{key:"_instrumentTryCatch",value:function(){var St=this,xt=St._wrappedBuiltIns;function Ut(Ot){return function(Lt,Gt){for(var tn=new Array(arguments.length),zt=0;zt<tn.length;++zt)tn[zt]=arguments[zt];var cn=tn[0];return lt(cn)&&(tn[0]=St.wrap(cn)),Ot.apply?Ot.apply(this,tn):Ot(tn[0],tn[1])}}function Tt(Ot){var Lt=ut[Ot]&&ut[Ot].prototype;Lt&&Lt.hasOwnProperty&&Lt.hasOwnProperty("addEventListener")&&(st(Lt,"addEventListener",function(Gt){return function(tn,zt,cn,un){try{zt&&zt.handleEvent&&(zt.handleEvent=St.wrap(zt.handleEvent))}catch{}var fn;return Gt.call(this,tn,St.wrap(zt,void 0,fn),cn,un)}},xt),st(Lt,"removeEventListener",function(Gt){return function(tn,zt,cn,un){try{zt=zt&&(zt.__lr_wrapper__?zt.__lr_wrapper__:zt)}catch{}return Gt.call(this,tn,zt,cn,un)}},xt))}st(ut,"setTimeout",Ut,xt),st(ut,"setInterval",Ut,xt),ut.requestAnimationFrame&&st(ut,"requestAnimationFrame",function(Ot){return function(Lt){return Ot(St.wrap(Lt))}},xt);for(var kt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Dt=0;Dt<kt.length;Dt++)Tt(kt[Dt]);var Vt=ut.jQuery||ut.$;Vt&&Vt.fn&&Vt.fn.ready&&st(Vt.fn,"ready",function(Ot){return function(Lt){return Ot.call(this,St.wrap(Lt))}},xt)}}]),yt}();at.default=ft},"./packages/@logrocket/exceptions/src/registerExceptions.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=lt;var ot=et(s("./packages/@logrocket/exceptions/src/raven/raven.js")),ht=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));function dt(mt){if(typeof WeakMap!="function")return null;var st=new WeakMap,ut=new WeakMap;return(dt=function(yt){return yt?ut:st})(mt)}function pt(mt,st){if(!st&&mt&&mt.__esModule)return mt;if(mt===null||nt(mt)!=="object"&&typeof mt!="function")return{default:mt};var ut=dt(st);if(ut&&ut.has(mt))return ut.get(mt);var ft={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var vt in mt)if(vt!=="default"&&Object.prototype.hasOwnProperty.call(mt,vt)){var St=yt?Object.getOwnPropertyDescriptor(mt,vt):null;St&&(St.get||St.set)?Object.defineProperty(ft,vt,St):ft[vt]=mt[vt]}return ft.default=mt,ut&&ut.set(mt,ft),ft}function lt(mt){var st=new ot.default({captureException:function(yt){ht.captureException(mt,null,null,yt)}}),ut=function(yt){mt.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:yt.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",ut),function(){window.removeEventListener("unhandledrejection",ut),st.uninstall()}}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){function nt(ot){return ot===null?void 0:ot}return et.stack?et.stack.map(function(ot){return{lineNumber:nt(ot.line),columnNumber:nt(ot.column),fileName:nt(ot.url),functionName:nt(ot.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=s("./packages/@logrocket/network/src/registerXHR.js"),ht=[];function dt(st,ut){for(var ft=ht.reduce(function(Ut,Tt){return[Tt].concat(Ut)},[]),yt=arguments.length,vt=new Array(yt>2?yt-2:0),St=2;St<yt;St++)vt[St-2]=arguments[St];var xt=Promise.resolve(vt);return ft.forEach(function(Ut){var Tt=Ut.request,kt=Ut.requestError;(Tt||kt)&&(xt=xt.then(function(Dt){return Tt.apply(void 0,[ut].concat((0,nt.default)(Dt)))},function(Dt){return kt.apply(void 0,[ut].concat((0,nt.default)(Dt)))}))}),xt=xt.then(function(Ut){(0,ot.setActive)(!1);var Tt,kt;try{Tt=st.apply(void 0,(0,nt.default)(Ut))}catch(Dt){kt=Dt}if((0,ot.setActive)(!0),kt)throw kt;return Tt}),ft.forEach(function(Ut){var Tt=Ut.response,kt=Ut.responseError;(Tt||kt)&&(xt=xt.then(function(Dt){return Tt(ut,Dt)},function(Dt){return kt&&kt(ut,Dt)}))}),xt}function pt(st){if(!(!st.fetch||!st.Promise)){var ut=st.fetch.polyfill;st.fetch=function(ft){var yt=0;return function(){for(var vt=arguments.length,St=new Array(vt),xt=0;xt<vt;xt++)St[xt]=arguments[xt];return dt.apply(void 0,[ft,yt++].concat(St))}}(st.fetch),ut&&(st.fetch.polyfill=ut)}}var lt=!1,mt={register:function(ut){return lt||(lt=!0,pt(window)),ht.push(ut),function(){var ft=ht.indexOf(ut);ft>=0&&ht.splice(ft,1)}},clear:function(){ht=[]}};at.default=mt},"./packages/@logrocket/network/src/index.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ft;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./packages/@logrocket/network/src/registerFetch.js")),dt=s("./packages/@logrocket/network/src/registerIonic.ts"),pt=et(s("./packages/@logrocket/network/src/registerNetworkInformation.js")),lt=et(s("./packages/@logrocket/network/src/registerXHR.js")),mt=et(s("./packages/@logrocket/utils/src/mapValues.js"));function st(yt,vt){var St=Object.keys(yt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(yt);vt&&(xt=xt.filter(function(Ut){return Object.getOwnPropertyDescriptor(yt,Ut).enumerable})),St.push.apply(St,xt)}return St}function ut(yt){for(var vt=1;vt<arguments.length;vt++){var St=arguments[vt]!=null?arguments[vt]:{};vt%2?st(Object(St),!0).forEach(function(xt){(0,nt.default)(yt,xt,St[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(St)):st(Object(St)).forEach(function(xt){Object.defineProperty(yt,xt,Object.getOwnPropertyDescriptor(St,xt))})}return yt}function ft(yt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1},St=vt.isReactNative,xt=vt.shouldAugmentNPS,Ut=vt.shouldParseXHRBlob,Tt={},kt=function(un){var fn=4096e3,vn=un;if((0,ot.default)(un)==="object"&&un!=null){var Ft=Object.getPrototypeOf(un);(Ft===Object.prototype||Ft===null)&&(vn=JSON.stringify(un))}if(vn&&vn.length&&vn.length>fn&&typeof vn=="string"){var pn=vn.substring(0,1e3);return"".concat(pn,` ... LogRocket truncating to first 1000 characters.
      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network`)}return un},Dt=function(un,fn){var vn=fn.method;yt.addEvent("lr.network.RequestEvent",function(){var Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pn=Ft.isEnabled,gn=pn===void 0?!0:pn,Tn=Ft.requestSanitizer,In=Tn===void 0?function(Sn){return Sn}:Tn;if(!gn)return null;var kn=null;try{kn=In(ut(ut({},fn),{},{reqId:un}))}catch(Sn){console.error(Sn)}if(kn){var Nn=kn.url;if(typeof document<"u"&&typeof document.createElement=="function"){var hn=document.createElement("a");hn.href=kn.url,Nn=hn.href}return{reqId:un,url:Nn,headers:(0,mt.default)(kn.headers,function(Sn){return"".concat(Sn)}),body:kt(kn.body),method:vn,referrer:kn.referrer||void 0,mode:kn.mode||void 0,credentials:kn.credentials||void 0}}return Tt[un]=!0,null})},Vt=function(un,fn){var vn=fn.method,Ft=fn.status;yt.addEvent("lr.network.ResponseEvent",function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gn=pn.isEnabled,Tn=gn===void 0?!0:gn,In=pn.responseSanitizer,kn=In===void 0?function(hn){return hn}:In;if(Tn){if(Tt[un])return delete Tt[un],null}else return null;var Nn=null;try{Nn=kn(ut(ut({},fn),{},{reqId:un}))}catch(hn){console.error(hn)}return Nn?{reqId:un,status:Nn.status,headers:(0,mt.default)(Nn.headers,function(hn){return"".concat(hn)}),body:kt(Nn.body),method:vn}:{reqId:un,status:Ft,headers:{},body:null,method:vn}})},Ot=function(un){return yt.isDisabled||Tt[un]===!0},Lt=(0,ht.default)({addRequest:Dt,addResponse:Vt,isIgnored:Ot}),Gt=(0,lt.default)({addRequest:Dt,addResponse:Vt,isIgnored:Ot,logger:yt,shouldAugmentNPS:xt,shouldParseXHRBlob:Ut}),tn=(0,dt.registerIonic)({addRequest:Dt,addResponse:Vt,isIgnored:Ot}),zt=St?function(){}:(0,pt.default)(yt);return function(){zt(),Lt(),Gt(),tn()}}},"./packages/@logrocket/network/src/registerFetch.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ut;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/utils/src/mapValues.js")),ht=et(s("./packages/@logrocket/network/src/fetchIntercept.js"));function dt(ft,yt){var vt=Object.keys(ft);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(ft);yt&&(St=St.filter(function(xt){return Object.getOwnPropertyDescriptor(ft,xt).enumerable})),vt.push.apply(vt,St)}return vt}function pt(ft){for(var yt=1;yt<arguments.length;yt++){var vt=arguments[yt]!=null?arguments[yt]:{};yt%2?dt(Object(vt),!0).forEach(function(St){(0,nt.default)(ft,St,vt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(vt)):dt(Object(vt)).forEach(function(St){Object.defineProperty(ft,St,Object.getOwnPropertyDescriptor(vt,St))})}return ft}function lt(ft){if(ft==null||typeof ft.forEach!="function")return ft;var yt={};return ft.forEach(function(vt,St){yt[St]?yt[St]="".concat(yt[St],",").concat(vt):yt[St]="".concat(vt)}),yt}var mt=function(yt){return(0,ot.default)(lt(yt),function(vt){return"".concat(vt)})};function st(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:ft.url,headers:mt(ft.headers),method:ft.method&&ft.method.toUpperCase(),referrer:ft.referrer||void 0,mode:ft.mode||void 0,credentials:ft.credentials||void 0}}function ut(ft){var yt=ft.addRequest,vt=ft.addResponse,St=ft.isIgnored,xt="fetch-",Ut={},Tt=ht.default.register({request:function(Dt){for(var Vt=arguments.length,Ot=new Array(Vt>1?Vt-1:0),Lt=1;Lt<Vt;Lt++)Ot[Lt-1]=arguments[Lt];var Gt;if(typeof Request<"u"&&Ot[0]instanceof Request){var tn;try{tn=Ot[0].clone().text()}catch(zt){tn=Promise.resolve("LogRocket fetch error: ".concat(zt.message))}Gt=tn.then(function(zt){return pt(pt({},st(Ot[0])),{},{body:zt})},function(zt){return pt(pt({},st(Ot[0])),{},{body:"LogRocket fetch error: ".concat(zt.message)})})}else Gt=Promise.resolve(pt(pt({},st(Ot[1])),{},{url:"".concat(Ot[0]),body:(Ot[1]||{}).body}));return Gt.then(function(zt){return Ut[Dt]=zt.method,yt("".concat(xt).concat(Dt),zt),Ot})},requestError:function(Dt,Vt){return Promise.reject(Vt)},response:function(Dt,Vt){var Ot,Lt;if(St("".concat(xt).concat(Dt)))return Vt;try{Ot=Vt.clone()}catch(un){var Gt={url:Vt.url,status:Vt.status,headers:mt(Vt.headers),body:"LogRocket fetch error: ".concat(un.message),method:Ut[Dt]};return delete Ut[Dt],vt("".concat(xt).concat(Dt),Gt),Vt}try{if(window.TextDecoder&&Ot.body){var tn=Ot.body.getReader(),zt=new window.TextDecoder("utf-8"),cn="";Lt=tn.read().then(function un(fn){var vn=fn.done,Ft=fn.value;if(vn)return cn;var pn=Ft?zt.decode(Ft,{stream:!0}):"";return cn+=pn,tn.read().then(un)})}else Lt=Ot.text()}catch(un){Lt=Promise.resolve("LogRocket error reading body: ".concat(un.message))}return Lt.catch(function(un){if(!(un.name==="AbortError"&&un instanceof DOMException))return"LogRocket error reading body: ".concat(un.message)}).then(function(un){var fn={url:Vt.url,status:Vt.status,headers:mt(Vt.headers),body:un,method:Ut[Dt]};delete Ut[Dt],vt("".concat(xt).concat(Dt),fn)}),Vt},responseError:function(Dt,Vt){var Ot={url:void 0,status:0,headers:{},body:"".concat(Vt)};return vt("".concat(xt).concat(Dt),Ot),Promise.reject(Vt)}});return Tt}},"./packages/@logrocket/network/src/registerIonic.ts":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.mergeHeaders=tn,at.serializeQueryParams=Ft,at.appendQueryParamsString=pn,at.processData=In,at.registerIonic=hn;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),dt=et(s("./packages/@logrocket/utils/src/protectFunc.js"));function pt(Sn,Rn){var wn=typeof Symbol<"u"&&Sn[Symbol.iterator]||Sn["@@iterator"];if(!wn){if(Array.isArray(Sn)||(wn=lt(Sn))||Rn&&Sn&&typeof Sn.length=="number"){wn&&(Sn=wn);var xn=0,Xn=function(){};return{s:Xn,n:function(){return xn>=Sn.length?{done:!0}:{done:!1,value:Sn[xn++]}},e:function(Qn){throw Qn},f:Xn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ln=!0,Un=!1,rr;return{s:function(){wn=wn.call(Sn)},n:function(){var Qn=wn.next();return Ln=Qn.done,Qn},e:function(Qn){Un=!0,rr=Qn},f:function(){try{!Ln&&wn.return!=null&&wn.return()}finally{if(Un)throw rr}}}}function lt(Sn,Rn){if(Sn){if(typeof Sn=="string")return mt(Sn,Rn);var wn=Object.prototype.toString.call(Sn).slice(8,-1);if(wn==="Object"&&Sn.constructor&&(wn=Sn.constructor.name),wn==="Map"||wn==="Set")return Array.from(Sn);if(wn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(wn))return mt(Sn,Rn)}}function mt(Sn,Rn){(Rn==null||Rn>Sn.length)&&(Rn=Sn.length);for(var wn=0,xn=new Array(Rn);wn<Rn;wn++)xn[wn]=Sn[wn];return xn}function st(Sn,Rn){var wn=Object.keys(Sn);if(Object.getOwnPropertySymbols){var xn=Object.getOwnPropertySymbols(Sn);Rn&&(xn=xn.filter(function(Xn){return Object.getOwnPropertyDescriptor(Sn,Xn).enumerable})),wn.push.apply(wn,xn)}return wn}function ut(Sn){for(var Rn=1;Rn<arguments.length;Rn++){var wn=arguments[Rn]!=null?arguments[Rn]:{};Rn%2?st(Object(wn),!0).forEach(function(xn){(0,nt.default)(Sn,xn,wn[xn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Sn,Object.getOwnPropertyDescriptors(wn)):st(Object(wn)).forEach(function(xn){Object.defineProperty(Sn,xn,Object.getOwnPropertyDescriptor(wn,xn))})}return Sn}var ft=new Set(["get","put","post","patch","head","delete","options","upload","download"]),yt=new Set(["urlencoded","json","utf8"]),vt=new Set(["raw","multipart"]),St="ionic-",xt=new Set(["desktop","mobileweb","pwa"]),Ut=new Set(["FormData"]),Tt=new Set,kt=new Set(["string"]),Dt=new Set(["string","array"]),Vt={utf8:kt,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:Tt};function Ot(Sn,Rn,wn){if(typeof Rn!="string")throw new Error("".concat(wn," must be one of: ").concat((0,ht.default)(Sn).join(", ")));if(Rn=Rn.trim().toLowerCase(),!Sn.has(Rn))throw new Error("".concat(wn," must be one of: ").concat((0,ht.default)(Sn).join(", ")));return Rn}function Lt(Sn,Rn,wn){if((0,ot.default)(Sn)!=="object")throw new Error(wn);for(var xn=0,Xn=Object.keys(Sn);xn<Xn.length;xn++){var Ln=Xn[xn];if(!Rn.has((0,ot.default)(Sn[Ln])))throw new Error(wn)}return Sn}function Gt(Sn,Rn){var wn=new URL(Sn),xn=wn.host;return Rn.getHeaders(xn)||null}function tn(Sn,Rn){return ut(ut({},Sn),Rn)}function zt(Sn,Rn,wn){var xn=wn.getHeaders("*")||{},Xn=Gt(Sn,wn)||{};return tn(tn(xn,Xn),Rn)}function cn(Sn,Rn){return Rn?encodeURIComponent(Sn):Sn}function un(Sn,Rn,wn){return Sn.length?wn?"".concat(encodeURIComponent(Sn),"[").concat(encodeURIComponent(Rn),"]"):"".concat(Sn,"[").concat(Rn,"]"):wn?encodeURIComponent(Rn):Rn}function fn(Sn,Rn,wn){var xn=[],Xn=pt(Rn),Ln;try{for(Xn.s();!(Ln=Xn.n()).done;){var Un=Ln.value;if(Array.isArray(Un)){xn.push(fn("".concat(Sn,"[]"),Un,wn));continue}else if((0,ot.default)(Un)==="object"){xn.push(vn("".concat(Sn,"[]").concat(Un),wn,void 0));continue}xn.push("".concat(un(Sn,"",wn),"=").concat(cn(Un,wn)))}}catch(rr){Xn.e(rr)}finally{Xn.f()}return xn.join("&")}function vn(Sn,Rn,wn){var xn=[];for(var Xn in Rn)if(Rn.hasOwnProperty(Xn)){var Ln=Sn.length?"".concat(Sn,"[").concat(Xn,"]"):Xn;if(Array.isArray(Rn[Xn])){xn.push(fn(Ln,Rn[Xn],wn));continue}else if((0,ot.default)(Rn[Xn])==="object"&&Rn[Xn]!==null){xn.push(vn(Ln,Rn[Xn],wn));continue}xn.push("".concat(un(Sn,Xn,wn),"=").concat(cn(Rn[Xn],wn)))}return xn.join("&")}function Ft(Sn,Rn){return vn("",Sn,Rn)}function pn(Sn,Rn){if(!Sn.length||!Rn.length)return Sn;var wn=new URL(Sn),xn=wn.host,Xn=wn.pathname,Ln=wn.search,Un=wn.hash,rr=wn.protocol;return"".concat(rr,"//").concat(xn).concat(Xn).concat(Ln.length?"".concat(Ln,"&").concat(Rn):"?".concat(Rn)).concat(Un)}function gn(Sn){return Vt[Sn]||Vt.default}function Tn(Sn){return Sn==="multipart"?Ut:Tt}function In(Sn,Rn){var wn=(0,ot.default)(Sn),xn=gn(Rn),Xn=Tn(Rn);if(Xn.size>0){var Ln=!1;if(Xn.forEach(function(Un){s.g[Un]&&Sn instanceof s.g[Un]&&(Ln=!0)}),!Ln)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,ht.default)(Xn).join(", ")))}if(Xn.size===0&&!xn.has(wn))throw new Error("TYPE_MISMATCH_DATA ".concat((0,ht.default)(xn).join(", ")));switch(Rn){case"utf8":return Sn;default:return JSON.stringify(Sn,void 0,2)}}function kn(Sn,Rn){Sn=Sn||{};var wn,xn=Sn.data;try{wn=Ot(yt,Sn.serializer||Rn.getDataSerializer(),"serializer / data payload type")}catch{wn=Ot(vt,Sn.serializer||Rn.getDataSerializer(),"serializer / data payload type"),xn={}}return{data:xn,filePath:Sn.filePath,followRedirect:Sn.followRedirect,headers:Lt(Sn.headers||{},kt,"Invalid header type, must be string"),method:Ot(ft,Sn.method||ft[0],"method"),name:Sn.name,params:Lt(Sn.params||{},Dt,"Invalid param, must be of type string or array"),responseType:Sn.responseType,serializer:wn,connectTimeout:Sn.connectTimeout,readTimeout:Sn.readTimeout,timeout:Sn.timeout}}var Nn=0;function hn(Sn){var Rn,wn,xn,Xn=Sn.addRequest,Ln=Sn.addResponse,Un=Sn.isIgnored,rr=(Rn=window.cordova)===null||Rn===void 0||(wn=Rn.plugin)===null||wn===void 0?void 0:wn.http,tr={},Qn=!1;if(typeof rr>"u")return function(){};var jn=(xn=window.ionic)===null||xn===void 0?void 0:xn.platforms;if(typeof jn<"u"&&typeof jn.some=="function"&&jn.some(function(zn){return xt.has(zn)}))return function(){};var Bn=rr.sendRequest,an=(0,dt.default)(function(zn,Kn,An){if(!Un("".concat(St).concat(An)))try{var _n={url:zn.url||"",status:zn.status<600&&zn.status>=100?zn.status:0,headers:zn.headers||{},body:Kn?zn.data:zn.error,method:tr[An].toUpperCase()};Ln("".concat(St).concat(An),_n)}catch(Pn){var On={url:zn.url||"",status:zn.status<600&&zn.status>=100?zn.status:0,headers:zn.headers||{},body:"LogRocket fetch error: ".concat(Pn.message),method:tr[An].toUpperCase()};Ln("".concat(St).concat(An),On)}});return rr.sendRequest=function(zn,Kn,An,_n){var On=++Nn,Pn=function(bt){Qn||(an(bt,!0,On),delete tr[On]),An(bt)},Vn=function(bt){Qn||(an(bt,!1,On),delete tr[On]),_n(bt)};if(!Qn)try{var ir=kn(Kn,rr),Mn=pn(zn,vn("",ir.params,!0)),$n=zt(zn,ir.headers,rr),Kt=ir.method||"get";tr[On]=Kt;var At={url:Mn,method:Kt.toUpperCase(),headers:$n||{},body:In(ir.data||{},ir.serializer)};Xn("".concat(St).concat(On),At)}catch(Rt){var it={url:zn,method:(Kn.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(Rt.message)};Xn("".concat(St).concat(On),it)}return Bn(zn,Kn,Pn,Vn)},function(){Qn=!0,rr.sendRequest=Bn,tr={}}}},"./packages/@logrocket/network/src/registerNetworkInformation.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=et;var s={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function et(nt){var ot=void 0;function ht(){var dt={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(dt.effectiveType=s[window.navigator.connection.effectiveType]||"UNKNOWN"):dt.effectiveType="NONE",!(ot&&dt.online===ot.online&&dt.effectiveType===ot.effectiveType)&&(ot=dt,nt.addEvent("lr.network.NetworkStatusEvent",function(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=pt.isEnabled,mt=lt===void 0?!0:lt;return mt?dt:null}))}return setTimeout(ht),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",ht),window.addEventListener("online",ht),window.addEventListener("offline",ht),function(){window.removeEventListener("offline",ht),window.removeEventListener("online",ht),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",ht)}}},"./packages/@logrocket/network/src/registerXHR.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.setActive=lt,at.default=st;var nt=et(s("./packages/@logrocket/utils/src/mapValues.js")),ot=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),ht=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt=s("./packages/@logrocket/utils/src/constants/nps.js"),pt=!0;function lt(ut){pt=ut}var mt=0;function st(ut){var ft=ut.addRequest,yt=ut.addResponse,vt=ut.isIgnored,St=ut.logger,xt=ut.shouldAugmentNPS,Ut=xt===void 0?!0:xt,Tt=ut.shouldParseXHRBlob,kt=Tt===void 0?!1:Tt,Dt=XMLHttpRequest,Vt=new WeakMap,Ot=!1,Lt="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(tn,zt){var cn=new Dt(tn,zt);if(!pt)return cn;Vt.set(cn,{xhrId:++mt,headers:{}});var un=cn.open;function fn(){for(var gn=arguments.length,Tn=new Array(gn),In=0;In<gn;In++)Tn[In]=arguments[In];try{var kn=Tn[1];if(window.URL&&typeof window.URL=="function"&&kn.search(dt.WOOTRIC_RESPONSES_REGEX)===0){var Nn=new window.URL(St.recordingURL);Nn.searchParams.set("nps","wootric");var hn=new window.URL(kn),Sn=hn.searchParams.get("response[text]"),Rn=Sn?"".concat(Sn,`

`):"";hn.searchParams.set("response[text]","".concat(Rn,"<").concat(Nn.href,"|View LogRocket session>")),Tn[1]=hn.href}}catch{}return un.apply(this,Tn)}var vn=cn.send;function Ft(){for(var gn=arguments.length,Tn=new Array(gn),In=0;In<gn;In++)Tn[In]=arguments[In];try{var kn=Vt.get(cn);if(window.URL&&typeof window.URL=="function"&&kn&&kn.url&&kn.url.search(dt.DELIGHTED_RESPONSES_REGEX)===0&&Tn.length&&Tn[0].indexOf(dt.DELIGHTED_FEEDBACK_PREFIX)!==-1){var Nn=new window.URL(St.recordingURL);Nn.searchParams.set("nps","delighted");var hn=encodeURIComponent(Nn.href),Sn=Tn[0].split("&").map(function(Rn){if((0,ht.default)(Rn,dt.DELIGHTED_FEEDBACK_PREFIX)){var wn=Rn===dt.DELIGHTED_FEEDBACK_PREFIX;return"".concat(Rn).concat(wn?"":`

`,"<").concat(hn,"|View LogRocket session>")}return Rn}).join("&");Tn[0]=Sn}}catch{}return vn.apply(this,Tn)}Ut&&(cn.open=fn,cn.send=Ft),(0,ot.default)(cn,"open",function(gn,Tn){if(!Ot){var In=Vt.get(cn);In.method=gn,In.url=Tn}}),(0,ot.default)(cn,"send",function(gn){if(!Ot){var Tn=Vt.get(cn);if(Tn){var In={url:Tn.url,method:Tn.method&&Tn.method.toUpperCase(),headers:(0,nt.default)(Tn.headers||{},function(kn){return kn.join(", ")}),body:gn};ft("".concat(Lt).concat(Tn.xhrId),In)}}}),(0,ot.default)(cn,"setRequestHeader",function(gn,Tn){if(!Ot){var In=Vt.get(cn);In&&(In.headers=In.headers||{},In.headers[gn]=In.headers[gn]||[],In.headers[gn].push(Tn))}});var pn={readystatechange:function(){if(!Ot&&cn.readyState===4){var Tn=Vt.get(cn);if(!Tn||vt("".concat(Lt).concat(Tn.xhrId)))return;var In=cn.getAllResponseHeaders()||"",kn=In.split(/[\r\n]+/).reduce(function(Rn,wn){var xn=Rn,Xn=wn.split(": ");if(Xn.length>0){var Ln=Xn.shift(),Un=Xn.join(": ");Rn[Ln]?xn[Ln]+=", ".concat(Un):xn[Ln]=Un}return xn},{}),Nn;try{switch(cn.responseType){case"json":Nn=St._shouldCloneResponse?JSON.parse(JSON.stringify(cn.response)):cn.response;break;case"arraybuffer":case"blob":{Nn=cn.response;break}case"document":{Nn=cn.responseXML;break}case"text":case"":{Nn=cn.responseText;break}default:Nn=""}}catch{Nn="LogRocket: Error accessing response."}var hn={url:Tn.url,status:cn.status,headers:kn,body:Nn,method:(Tn.method||"").toUpperCase()};if(kt&&hn.body instanceof Blob){var Sn=new FileReader;Sn.readAsText(hn.body),Sn.onload=function(){try{hn.body=JSON.parse(Sn.result)}catch{}yt("".concat(Lt).concat(Tn.xhrId),hn)}}else yt("".concat(Lt).concat(Tn.xhrId),hn)}}};return Object.keys(pn).forEach(function(gn){cn.addEventListener(gn,pn[gn])}),cn},XMLHttpRequest.prototype=Dt.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(Gt){XMLHttpRequest[Gt]=Dt[Gt]}),function(){Ot=!0,XMLHttpRequest=Dt}}},"./packages/@logrocket/now/src/index.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var s=Date.now.bind(Date),et=s(),nt=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return s()-et};at.default=nt},"./packages/@logrocket/redux/src/createEnhancer.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=lt;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/now/src/index.js"));function ht(mt,st){var ut=Object.keys(mt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(mt);st&&(ft=ft.filter(function(yt){return Object.getOwnPropertyDescriptor(mt,yt).enumerable})),ut.push.apply(ut,ft)}return ut}function dt(mt){for(var st=1;st<arguments.length;st++){var ut=arguments[st]!=null?arguments[st]:{};st%2?ht(Object(ut),!0).forEach(function(ft){(0,nt.default)(mt,ft,ut[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(ut)):ht(Object(ut)).forEach(function(ft){Object.defineProperty(mt,ft,Object.getOwnPropertyDescriptor(ut,ft))})}return mt}var pt=0;function lt(mt){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=st.stateSanitizer,ft=ut===void 0?function(St){return St}:ut,yt=st.actionSanitizer,vt=yt===void 0?function(St){return St}:yt;return function(St){return function(xt,Ut,Tt){var kt=St(xt,Ut,Tt),Dt=kt.dispatch,Vt=pt++;mt.addEvent("lr.redux.InitialState",function(){var Lt;try{Lt=ft(kt.getState())}catch(Gt){console.error(Gt.toString())}return{state:Lt,storeId:Vt}});var Ot=function(Gt){var tn=(0,ot.default)(),zt,cn;try{cn=Dt(Gt)}catch(fn){zt=fn}finally{var un=(0,ot.default)()-tn;mt.addEvent("lr.redux.ReduxAction",function(){var fn=null,vn=null;try{fn=ft(kt.getState()),vn=vt(Gt)}catch(Ft){console.error(Ft.toString())}return fn&&vn?{storeId:Vt,action:vn,duration:un,stateDelta:fn}:null})}if(zt)throw zt;return cn};return dt(dt({},kt),{},{dispatch:Ot})}}}},"./packages/@logrocket/redux/src/createMiddleware.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ht;var nt=et(s("./packages/@logrocket/now/src/index.js")),ot=0;function ht(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=pt.stateSanitizer,mt=lt===void 0?function(ft){return ft}:lt,st=pt.actionSanitizer,ut=st===void 0?function(ft){return ft}:st;return function(ft){var yt=ot++;return dt.addEvent("lr.redux.InitialState",function(){var vt;try{vt=mt(ft.getState())}catch(St){console.error(St.toString())}return{state:vt,storeId:yt}}),function(vt){return function(St){var xt=(0,nt.default)(),Ut,Tt;try{Tt=vt(St)}catch(Dt){Ut=Dt}finally{var kt=(0,nt.default)()-xt;dt.addEvent("lr.redux.ReduxAction",function(){var Dt=null,Vt=null;try{Dt=mt(ft.getState()),Vt=ut(St)}catch(Ot){console.error(Ot.toString())}return Dt&&Vt?{storeId:yt,action:Vt,duration:kt,stateDelta:Dt}:null})}if(Ut)throw Ut;return Tt}}}}},"./packages/@logrocket/redux/src/index.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),Object.defineProperty(at,"createEnhancer",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(at,"createMiddleware",{enumerable:!0,get:function(){return ot.default}});var nt=et(s("./packages/@logrocket/redux/src/createEnhancer.js")),ot=et(s("./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":function(rt,at,s){Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var et={collectWindowErrors:!0,debug:!1},nt=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{},ot=[].slice,ht="?",dt=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function pt(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}et.report=function(){var st=[],ut=null,ft=null,yt=null;function vt(tn){Vt(),st.push(tn)}function St(tn){for(var zt=st.length-1;zt>=0;--zt)st[zt]===tn&&st.splice(zt,1)}function xt(){Ot(),st=[]}function Ut(tn,zt){var cn=null;if(!(zt&&!et.collectWindowErrors)){for(var un in st)if(st.hasOwnProperty(un))try{st[un].apply(null,[tn].concat(ot.call(arguments,2)))}catch(fn){cn=fn}if(cn)throw cn}}var Tt,kt;function Dt(tn,zt,cn,un,fn){var vn=null;if(yt)et.computeStackTrace.augmentStackTraceWithInitialElement(yt,zt,cn,tn),Lt();else if(fn)vn=et.computeStackTrace(fn),Ut(vn,!0);else{var Ft={url:zt,line:cn,column:un},pn=void 0,gn=tn,Tn;if({}.toString.call(tn)==="[object String]"){var Tn=tn.match(dt);Tn&&(pn=Tn[1],gn=Tn[2])}Ft.func=ht,vn={name:pn,message:gn,url:pt(),stack:[Ft]},Ut(vn,!0)}return Tt?Tt.apply(this,arguments):!1}function Vt(){kt||(Tt=nt.onerror,nt.onerror=Dt,kt=!0)}function Ot(){kt&&(nt.onerror=Tt,kt=!1,Tt=void 0)}function Lt(){var tn=yt,zt=ut;ut=null,yt=null,ft=null,Ut.apply(null,[tn,!1].concat(zt))}function Gt(tn,zt){var cn=ot.call(arguments,1);if(yt){if(ft===tn)return;Lt()}var un=et.computeStackTrace(tn);if(yt=un,ft=tn,ut=cn,setTimeout(function(){ft===tn&&Lt()},un.incomplete?2e3:0),zt!==!1)throw tn}return Gt.subscribe=vt,Gt.unsubscribe=St,Gt.uninstall=xt,Gt}(),et.computeStackTrace=function(){function st(vt){if(!(typeof vt.stack>"u"||!vt.stack)){var St=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,xt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,Ut=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Tt=vt.stack.split(`
`),kt=[],Dt,Vt;/^(.*) is undefined$/.exec(vt.message);for(var Ot=0,Lt=Tt.length;Ot<Lt;++Ot){if(Dt=St.exec(Tt[Ot])){var Gt=Dt[2]&&Dt[2].indexOf("native")!==-1;Vt={url:Gt?null:Dt[2],func:Dt[1]||ht,args:Gt?[Dt[2]]:[],line:Dt[3]?+Dt[3]:null,column:Dt[4]?+Dt[4]:null}}else if(Dt=Ut.exec(Tt[Ot]))Vt={url:Dt[2],func:Dt[1]||ht,args:[],line:+Dt[3],column:Dt[4]?+Dt[4]:null};else if(Dt=xt.exec(Tt[Ot]))Vt={url:Dt[3],func:Dt[1]||ht,args:Dt[2]?Dt[2].split(","):[],line:Dt[4]?+Dt[4]:null,column:Dt[5]?+Dt[5]:null};else continue;!Vt.func&&Vt.line&&(Vt.func=ht),kt.push(Vt)}return kt.length?(!kt[0].column&&typeof vt.columnNumber<"u"&&(kt[0].column=vt.columnNumber+1),{name:vt.name,message:vt.message,url:pt(),stack:kt}):null}}function ut(vt,St,xt,Ut){var Tt={url:St,line:xt};if(Tt.url&&Tt.line){if(vt.incomplete=!1,Tt.func||(Tt.func=ht),vt.stack.length>0&&vt.stack[0].url===Tt.url){if(vt.stack[0].line===Tt.line)return!1;if(!vt.stack[0].line&&vt.stack[0].func===Tt.func)return vt.stack[0].line=Tt.line,!1}return vt.stack.unshift(Tt),vt.partial=!0,!0}else vt.incomplete=!0;return!1}function ft(vt,St){for(var xt=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,Ut=[],Tt={},kt=!1,Dt,Vt,Ot=ft.caller;Ot&&!kt;Ot=Ot.caller)if(!(Ot===yt||Ot===et.report)){if(Vt={url:null,func:ht,line:null,column:null},Ot.name?Vt.func=Ot.name:(Dt=xt.exec(Ot.toString()))&&(Vt.func=Dt[1]),typeof Vt.func>"u")try{Vt.func=Dt.input.substring(0,Dt.input.indexOf("{"))}catch{}Tt[""+Ot]?kt=!0:Tt[""+Ot]=!0,Ut.push(Vt)}St&&Ut.splice(0,St);var Lt={name:vt.name,message:vt.message,url:pt(),stack:Ut};return ut(Lt,vt.sourceURL||vt.fileName,vt.line||vt.lineNumber,vt.message||vt.description),Lt}function yt(vt,St){var xt=null;St=St==null?0:+St;try{if(xt=st(vt),xt)return xt}catch(Ut){if(et.debug)throw Ut}try{if(xt=ft(vt,St+1),xt)return xt}catch(Ut){if(et.debug)throw Ut}return{name:vt.name,message:vt.message,url:pt()}}return yt.augmentStackTraceWithInitialElement=ut,yt.computeStackTraceFromStackProp=st,yt}();var lt=et;at.default=lt},"./packages/@logrocket/utils/src/addListener.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return ot.addEventListener(et,nt,{capture:!0,passive:!0}),function(){ot.removeEventListener(et,nt,{capture:!0,passive:!0})}}},"./packages/@logrocket/utils/src/adjustOsVersion.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.adjustOsVersion=s,at.adjustOs=et;function s(nt,ot){var ht=ot;return ot&&nt.toLowerCase().replace(/\s/g,"").indexOf("macos")>-1&&(ht=ot.replace("10.15.7","10.15.7+")),ht}function et(nt){return s(nt,nt)}},"./packages/@logrocket/utils/src/applyUrlSanitizer.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=et.logger,ot=et.url,ht=ot===void 0?"":ot,dt=nt.getConfig("lr.browser")||{},pt=dt.urlSanitizer,lt=pt===void 0?function(st){return st}:pt,mt;try{mt=lt(ht)}catch(st){console.error(st)}return typeof mt=="string"?mt:""}},"./packages/@logrocket/utils/src/browserUtils.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.getNodeName=s,at.getTargetForEvent=et,at.getNodePath=ot;function s(ht){return ht.nodeName==="#document-fragment"&&ht.mode==="open"?"$shadow-root":ht.nodeName?ht.nodeName.toLowerCase():""}function et(ht){return typeof ht.composedPath=="function"&&ht.composed?ht.composedPath()[0]:ht.path?ht.path[0]:ht.target}var nt=1e3;function ot(ht){for(var dt=ht,pt=[],lt=0;dt&&(dt.parentNode||dt.host);){var mt=s(dt);if(mt==="body")break;var st={nodeName:mt},ut=st.nodeName.length;if(dt.id&&dt.id.length>0&&(st.id=dt.id,ut+=dt.id.length),dt.classList&&dt.classList.length>0){st.classList=Array.prototype.slice.call(dt.classList,0);var ft=Array.prototype.join.call(dt.classList,"");ft&&(ut+=ft.length)}if(lt+ut>nt)break;if(dt.parentNode&&dt.parentNode.children)try{var yt=0,vt=dt;do yt+=1,vt=vt.previousElementSibling;while(vt);st.nthChild=yt}catch{}lt+=ut,pt.push(st),dt=dt.parentNode||dt.host}return pt}},"./packages/@logrocket/utils/src/constants/issues.ts":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.ES_ISSUE_TYPE_BASE_FILTER=at.ES_ISSUE_TYPES=at.ISSUE_GROUP_TYPE=at.ISSUE_TYPE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot,ht={EXCEPTION:"EXCEPTION",NETWORK_ERROR:"NETWORK_ERROR",RAGE_CLICK:"RAGE_CLICK",DEAD_CLICK:"DEAD_CLICK",FRUSTRATING_NETWORK:"FRUSTRATING_NETWORK",ERROR_STATE:"ERROR_STATE"};at.ISSUE_TYPE=ht;var dt={ENCODED_FILTER:"ENCODED_FILTER",SENTRY:"SENTRY",TROYTOWN:"TROYTOWN"};at.ISSUE_GROUP_TYPE=dt;var pt=[ht.RAGE_CLICK,ht.DEAD_CLICK,ht.FRUSTRATING_NETWORK,ht.ERROR_STATE];at.ES_ISSUE_TYPES=pt;var lt=(ot={},(0,nt.default)(ot,ht.RAGE_CLICK,{rageClicked:{operator:"TEXT_IS",strings:[]}}),(0,nt.default)(ot,ht.DEAD_CLICK,{deadClicked:{operator:"TEXT_IS",strings:[]}}),ot);at.ES_ISSUE_TYPE_BASE_FILTER=lt},"./packages/@logrocket/utils/src/constants/logTypes.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.LOG_FILTER_TYPES=at.LOG_TYPES=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot,ht={LOG:"LOG",WARN:"WARN",ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO",REDUX:"REDUX",LIFECYCLE:"LIFECYCLE",NAVIGATION:"NAVIGATION",NETWORK:"NETWORK",PREV_SESSION:"PREV_SESSION",NEXT_SESSION:"NEXT_SESSION",LOAD_MORE:"LOAD_MORE",EXCEPTION:"EXCEPTION"};at.LOG_TYPES=ht;var dt=(ot={},(0,nt.default)(ot,ht.LOG,{label:"Logs",filterLabel:"Log",types:[ht.LOG]}),(0,nt.default)(ot,ht.WARN,{label:"Warnings",filterLabel:"Warning",types:[ht.WARN]}),(0,nt.default)(ot,ht.ERROR,{label:"Errors",filterLabel:"Error",types:[ht.ERROR,ht.EXCEPTION]}),(0,nt.default)(ot,ht.INFO,{label:"Info",filterLabel:"Info",types:[ht.INFO]}),(0,nt.default)(ot,ht.DEBUG,{label:"Debug",filterLabel:"Debug",types:[ht.DEBUG]}),(0,nt.default)(ot,ht.REDUX,{label:"Redux",types:[ht.REDUX]}),(0,nt.default)(ot,ht.NAVIGATION,{label:"Navigation",types:[ht.NAVIGATION,ht.LIFECYCLE]}),ot);at.LOG_FILTER_TYPES=dt},"./packages/@logrocket/utils/src/constants/metrics.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=at.DEFAULT_HEATMAP_FOR_URL_OPERATOR=at.nextSortDirection=at.SORT_DIRECTION=at.FEEDBACK_SORT_COLUMN=at.HEATMAP_FOR_URL_OPERATOR=at.METRIC_RETENTION_TYPE=at.METRIC_TIMESERIES_TYPE=void 0;var s={SESSION_COUNT:"SESSION_COUNT",PERCENTILE:"PERCENTILE",CONVERSION_RATE:"CONVERSION_RATE",SESSION_PERCENTAGE:"SESSION_PERCENTAGE",ACTIVE_USERS:"ACTIVE_USERS",EVENT_COUNT:"EVENT_COUNT"};at.METRIC_TIMESERIES_TYPE=s;var et={USER_PERCENTAGE:"USER_PERCENTAGE"};at.METRIC_RETENTION_TYPE=et;var nt={IS:"IS",CONTAINS:"CONTAINS",LIKE:"LIKE",HREF_LIKE:"HREF_LIKE"};at.HEATMAP_FOR_URL_OPERATOR=nt;var ot={RATING:"RATING",SUBMISSION_DATE:"SUBMISSION_DATE"};at.FEEDBACK_SORT_COLUMN=ot;var ht={UNSET:"UNSET",ASC:"ASC",DESC:"DESC"};at.SORT_DIRECTION=ht;var dt=function(st){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=ut.reverse,yt=ft===void 0?!1:ft,vt=ht.UNSET,St=ht.ASC,xt=ht.DESC,Ut=[vt,xt,St];yt&&(Ut=[vt,St,xt]);var Tt=Ut.indexOf(st);return Ut[(Tt+1)%Ut.length]};at.nextSortDirection=dt;var pt=nt.IS;at.DEFAULT_HEATMAP_FOR_URL_OPERATOR=pt;var lt=nt.HREF_LIKE;at.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=lt},"./packages/@logrocket/utils/src/constants/mobile.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.MAXIMUM_SUPPORTED_VERSION=at.MINIMUM_SUPPORTED_VERSION=at.IOS_VERSION=at.ANDROID_VERSION=void 0;var s="1.25.0";at.ANDROID_VERSION=s;var et="1.25.0";at.IOS_VERSION=et;var nt="1.0.0";at.MINIMUM_SUPPORTED_VERSION=nt;var ot="1.26.0";at.MAXIMUM_SUPPORTED_VERSION=ot},"./packages/@logrocket/utils/src/constants/nps.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.DELIGHTED_FEEDBACK_PREFIX=at.DELIGHTED_RESPONSES_REGEX=at.WOOTRIC_RESPONSES_REGEX=void 0;var s=/^https:\/\/production.wootric.com\/responses/;at.WOOTRIC_RESPONSES_REGEX=s;var et=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;at.DELIGHTED_RESPONSES_REGEX=et;var nt="comment=";at.DELIGHTED_FEEDBACK_PREFIX=nt},"./packages/@logrocket/utils/src/constants/replayTypes.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.REPLAY_TYPE=void 0;var s;at.REPLAY_TYPE=s,function(et){et.SKIA="SKIA",et.DOM="DOM",et.PDF="PDF"}(s||(at.REPLAY_TYPE=s={}))},"./packages/@logrocket/utils/src/constants/sdkTypes.ts":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.SESSION_TYPE_TO_DISPLAY=at.SDK_REPLAY_TYPE=at.SDK_TYPE_TO_DISPLAY=at.SDK_TYPE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),ht,dt,pt;at.SDK_TYPE=pt,function(ut){ut.WEB="web",ut.MOBILE="mobile",ut.UNKNOWN="unknown"}(pt||(at.SDK_TYPE=pt={}));var lt=(ht={},(0,nt.default)(ht,pt.WEB,"Web"),(0,nt.default)(ht,pt.MOBILE,"Mobile"),ht);at.SDK_TYPE_TO_DISPLAY=lt;var mt=(dt={},(0,nt.default)(dt,pt.WEB,ot.REPLAY_TYPE.DOM),(0,nt.default)(dt,pt.MOBILE,ot.REPLAY_TYPE.SKIA),dt);at.SDK_REPLAY_TYPE=mt;var st=lt;at.SESSION_TYPE_TO_DISPLAY=st},"./packages/@logrocket/utils/src/constants/statusCodes.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.getStatusText=et,at.STATUS_CODES=void 0;var s={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};at.STATUS_CODES=s;function et(nt){return s[String(nt)]}},"./packages/@logrocket/utils/src/contains.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){return et&&nt&&et.indexOf(nt)>-1}},"./packages/@logrocket/utils/src/deepArsonify.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt;var nt=ht(s("./packages/@logrocket/arson/src/index.js"));function ot(pt){if(typeof WeakMap!="function")return null;var lt=new WeakMap,mt=new WeakMap;return(ot=function(ut){return ut?mt:lt})(pt)}function ht(pt,lt){if(!lt&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var mt=ot(lt);if(mt&&mt.has(pt))return mt.get(pt);var st={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var yt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;yt&&(yt.get||yt.set)?Object.defineProperty(st,ft,yt):st[ft]=pt[ft]}return st.default=pt,mt&&mt.set(pt,st),st}function dt(pt){return{arson:nt.encode(pt)}}},"./packages/@logrocket/utils/src/deepDearsonify.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt;var nt=ht(s("./packages/@logrocket/arson/src/index.js"));function ot(pt){if(typeof WeakMap!="function")return null;var lt=new WeakMap,mt=new WeakMap;return(ot=function(ut){return ut?mt:lt})(pt)}function ht(pt,lt){if(!lt&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var mt=ot(lt);if(mt&&mt.has(pt))return mt.get(pt);var st={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var yt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;yt&&(yt.get||yt.set)?Object.defineProperty(st,ft,yt):st[ft]=pt[ft]}return st.default=pt,mt&&mt.set(pt,st),st}function dt(pt){return pt&&nt.decode(pt.arson)}},"./packages/@logrocket/utils/src/endsWith.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){return et&&nt&&et.substring(et.length-nt.length)===nt}},"./packages/@logrocket/utils/src/enhanceFunc.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt,ot){var ht=et[nt];function dt(){for(var pt,lt=arguments.length,mt=new Array(lt),st=0;st<lt;st++)mt[st]=arguments[st];return ht&&(pt=ht.apply(this,mt)),ot.apply(this,mt),pt}return et[nt]=dt,function(){et[nt]=ht}}},"./packages/@logrocket/utils/src/find.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){for(var ot=0;ot<et.length;ot++)if(nt(et[ot]))return et[ot]}},"./packages/@logrocket/utils/src/findIndex.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){for(var ot=0;ot<et.length;ot++)if(nt(et[ot]))return ot;return-1}},"./packages/@logrocket/utils/src/findKeyFrames.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ot;var nt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js"));function ot(ht,dt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},lt=pt.sdkThrottle,mt=lt===void 0?500:lt;if(!ht.length)return null;var st=(0,nt.default)(ht,{time:dt},"time"),ut=ht[st]||ht[st-1],ft=ht[st-1]||ut,yt=Math.min(ut.time-ft.time,mt),vt=Math.max(dt-(ut.time-yt),0),St=yt===0?1:Math.min(vt/yt,1);return{prev:ft,next:ut,ratio:St}}},"./packages/@logrocket/utils/src/flatten.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){return et.concat(nt)}},"./packages/@logrocket/utils/src/getCssRules.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.getCssRule=at.getCssRules=void 0;var s=function(ot){try{var ht=ot.cssRules;return!ht&&ot instanceof CSSStyleSheet?ot.rules:ht}catch{return null}};at.getCssRules=s;var et=function(ot,ht){var dt=s(ot);return!dt||ht>=dt.length?null:dt.item(ht)};at.getCssRule=et},"./packages/@logrocket/utils/src/getGraphQLOperation.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){if(et)try{var nt=typeof et=="string"?JSON.parse(et):et,ot=nt.query.trim(),ht=ot.match(/(query|mutation) ([a-z_-]+)/i);return ht?{operationType:ht[1],operationName:ht[2]}:{}}catch{return{}}return{}}},"./packages/@logrocket/utils/src/getMockDeveloperUser.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(){return{permissions:{dashboard:{metrics:!0,errors:!0},sessionPlayback:{developerPane:{networkPane:{requestBodiesAndHeaders:!0}}}},appRoles:[]}}},"./packages/@logrocket/utils/src/getNodeSelector.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var nt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ot=(0,nt.default)(function(dt){var pt=dt.nodeName?dt.nodeName.toLowerCase():"",lt={nodeName:pt};return dt.id&&dt.id.length>0&&(lt.id=dt.id),dt.classList&&dt.classList.length>0&&(lt.classList=Array.prototype.slice.call(dt.classList,0)),lt}),ht=ot;at.default=ht},"./packages/@logrocket/utils/src/hashString.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.combineHashes=at.hashString=void 0;var nt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ot=s("./packages/@logrocket/utils/src/sendTelemetryData.js");function ht(st,ut){var ft=typeof Symbol<"u"&&st[Symbol.iterator]||st["@@iterator"];if(!ft){if(Array.isArray(st)||(ft=dt(st))||ut&&st&&typeof st.length=="number"){ft&&(st=ft);var yt=0,vt=function(){};return{s:vt,n:function(){return yt>=st.length?{done:!0}:{done:!1,value:st[yt++]}},e:function(kt){throw kt},f:vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var St=!0,xt=!1,Ut;return{s:function(){ft=ft.call(st)},n:function(){var kt=ft.next();return St=kt.done,kt},e:function(kt){xt=!0,Ut=kt},f:function(){try{!St&&ft.return!=null&&ft.return()}finally{if(xt)throw Ut}}}}function dt(st,ut){if(st){if(typeof st=="string")return pt(st,ut);var ft=Object.prototype.toString.call(st).slice(8,-1);if(ft==="Object"&&st.constructor&&(ft=st.constructor.name),ft==="Map"||ft==="Set")return Array.from(st);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return pt(st,ut)}}function pt(st,ut){(ut==null||ut>st.length)&&(ut=st.length);for(var ft=0,yt=new Array(ut);ft<ut;ft++)yt[ft]=st[ft];return yt}var lt=(0,nt.default)(function(st){try{var ut=0;if(typeof st=="string"&&st.length)for(var ft=0;ft<st.length;ft++)ut=31*ut+st.charCodeAt(ft),ut|=0;return ut}catch{return(0,ot.sendTelemetry)("Failed to hash string",{extra:{str:st}}),null}});at.hashString=lt;var mt=function(ut){var ft=ut.shift()||0,yt=ht(ut),vt;try{for(yt.s();!(vt=yt.n()).done;){var St=vt.value;ft^=St+2654435769+(ft<<6)+(ft>>2)}}catch(xt){yt.e(xt)}finally{yt.f()}return ft};at.combineHashes=mt},"./packages/@logrocket/utils/src/identityStatus.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.parseIdentityStatus=et,at.IdentityStatus=void 0;var s;at.IdentityStatus=s,function(nt){nt[nt.Unknown=0]="Unknown",nt[nt.Anonymous=1]="Anonymous",nt[nt.Identified=2]="Identified"}(s||(at.IdentityStatus=s={}));function et(nt){if(!nt)return s.Unknown;switch(parseInt(nt,10)){case s.Anonymous:return s.Anonymous;case s.Identified:return s.Identified;default:return s.Unknown}}},"./packages/@logrocket/utils/src/index.ts":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(at,"__esModule",{value:!0});var ot={enhanceFunc:!0,shallowArsonify:!0,shallowDearsonify:!0,deepArsonify:!0,deepDearsonify:!0,addListener:!0,protectFunc:!0,findIndex:!0,find:!0,flatten:!0,selectorMatches:!0,parseSelectorForMatch:!0,querySelectorWithShadowDom:!0,sendErrorTelemetry:!0,sendTelemetry:!0,sanitizeValue:!0,adjustOs:!0,adjustOsVersion:!0,selectorFromNodePath:!0,startsWith:!0,endsWith:!0,contains:!0,uuid:!0,randomInt:!0,getCssRules:!0,getCssRule:!0,getNodeSelector:!0,getGraphQLOperation:!0,isSessionEvent:!0,isActivityEvent:!0,parseIntFromHex:!0,isRecordingSampled:!0,makeRecordingID:!0,setFromArray:!0,setToArray:!0,applyUrlSanitizer:!0,getMockDeveloperUser:!0,maybeCleanSwiftUIClassName:!0,LOG_FILTER_TYPES:!0,LOG_TYPES:!0,METRIC_TIMESERIES_TYPE:!0,HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR:!0,SORT_DIRECTION:!0,FEEDBACK_SORT_COLUMN:!0,METRIC_RETENTION_TYPE:!0,ISSUE_TYPE:!0,ISSUE_GROUP_TYPE:!0,ES_ISSUE_TYPE_BASE_FILTER:!0,ES_ISSUE_TYPES:!0,findKeyFrames:!0,interpolate:!0,interpolateMobile:!0,removeOutdated:!0,DELIGHTED_RESPONSES_REGEX:!0,WOOTRIC_RESPONSES_REGEX:!0,REPLAY_TYPE:!0,SDK_REPLAY_TYPE:!0,SDK_TYPE:!0,SDK_TYPE_TO_DISPLAY:!0,SESSION_TYPE_TO_DISPLAY:!0,STATUS_CODES:!0,getStatusText:!0,parseQueryString:!0,likeOperator:!0,scrollMapHistogramToPercent:!0,combineHashes:!0,hashString:!0,encodeUserTraitString:!0,parseUserTraitString:!0,IdentityStatus:!0,parseIdentityStatus:!0,scrubException:!0,MobileConstants:!0};Object.defineProperty(at,"enhanceFunc",{enumerable:!0,get:function(){return ht.default}}),Object.defineProperty(at,"shallowArsonify",{enumerable:!0,get:function(){return dt.default}}),Object.defineProperty(at,"shallowDearsonify",{enumerable:!0,get:function(){return pt.default}}),Object.defineProperty(at,"deepArsonify",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(at,"deepDearsonify",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(at,"addListener",{enumerable:!0,get:function(){return st.default}}),Object.defineProperty(at,"protectFunc",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(at,"findIndex",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(at,"find",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(at,"flatten",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(at,"selectorMatches",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(at,"parseSelectorForMatch",{enumerable:!0,get:function(){return xt.default}}),Object.defineProperty(at,"querySelectorWithShadowDom",{enumerable:!0,get:function(){return Ut.default}}),Object.defineProperty(at,"sendErrorTelemetry",{enumerable:!0,get:function(){return Tt.default}}),Object.defineProperty(at,"sendTelemetry",{enumerable:!0,get:function(){return Tt.sendTelemetry}}),Object.defineProperty(at,"sanitizeValue",{enumerable:!0,get:function(){return kt.default}}),Object.defineProperty(at,"adjustOs",{enumerable:!0,get:function(){return Dt.adjustOs}}),Object.defineProperty(at,"adjustOsVersion",{enumerable:!0,get:function(){return Dt.adjustOsVersion}}),Object.defineProperty(at,"selectorFromNodePath",{enumerable:!0,get:function(){return Vt.default}}),Object.defineProperty(at,"startsWith",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(at,"endsWith",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(at,"contains",{enumerable:!0,get:function(){return Gt.default}}),Object.defineProperty(at,"uuid",{enumerable:!0,get:function(){return tn.default}}),Object.defineProperty(at,"randomInt",{enumerable:!0,get:function(){return zt.default}}),Object.defineProperty(at,"getCssRules",{enumerable:!0,get:function(){return cn.getCssRules}}),Object.defineProperty(at,"getCssRule",{enumerable:!0,get:function(){return cn.getCssRule}}),Object.defineProperty(at,"getNodeSelector",{enumerable:!0,get:function(){return un.default}}),Object.defineProperty(at,"getGraphQLOperation",{enumerable:!0,get:function(){return fn.default}}),Object.defineProperty(at,"isSessionEvent",{enumerable:!0,get:function(){return vn.default}}),Object.defineProperty(at,"isActivityEvent",{enumerable:!0,get:function(){return Ft.default}}),Object.defineProperty(at,"parseIntFromHex",{enumerable:!0,get:function(){return pn.default}}),Object.defineProperty(at,"isRecordingSampled",{enumerable:!0,get:function(){return gn.default}}),Object.defineProperty(at,"makeRecordingID",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(at,"setFromArray",{enumerable:!0,get:function(){return In.default}}),Object.defineProperty(at,"setToArray",{enumerable:!0,get:function(){return kn.default}}),Object.defineProperty(at,"applyUrlSanitizer",{enumerable:!0,get:function(){return Nn.default}}),Object.defineProperty(at,"getMockDeveloperUser",{enumerable:!0,get:function(){return hn.default}}),Object.defineProperty(at,"maybeCleanSwiftUIClassName",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(at,"LOG_FILTER_TYPES",{enumerable:!0,get:function(){return Rn.LOG_FILTER_TYPES}}),Object.defineProperty(at,"LOG_TYPES",{enumerable:!0,get:function(){return Rn.LOG_TYPES}}),Object.defineProperty(at,"METRIC_TIMESERIES_TYPE",{enumerable:!0,get:function(){return wn.METRIC_TIMESERIES_TYPE}}),Object.defineProperty(at,"HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(at,"DEFAULT_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.DEFAULT_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(at,"DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(at,"SORT_DIRECTION",{enumerable:!0,get:function(){return wn.SORT_DIRECTION}}),Object.defineProperty(at,"FEEDBACK_SORT_COLUMN",{enumerable:!0,get:function(){return wn.FEEDBACK_SORT_COLUMN}}),Object.defineProperty(at,"METRIC_RETENTION_TYPE",{enumerable:!0,get:function(){return wn.METRIC_RETENTION_TYPE}}),Object.defineProperty(at,"ISSUE_TYPE",{enumerable:!0,get:function(){return xn.ISSUE_TYPE}}),Object.defineProperty(at,"ISSUE_GROUP_TYPE",{enumerable:!0,get:function(){return xn.ISSUE_GROUP_TYPE}}),Object.defineProperty(at,"ES_ISSUE_TYPE_BASE_FILTER",{enumerable:!0,get:function(){return xn.ES_ISSUE_TYPE_BASE_FILTER}}),Object.defineProperty(at,"ES_ISSUE_TYPES",{enumerable:!0,get:function(){return xn.ES_ISSUE_TYPES}}),Object.defineProperty(at,"findKeyFrames",{enumerable:!0,get:function(){return Xn.default}}),Object.defineProperty(at,"interpolate",{enumerable:!0,get:function(){return Ln.default}}),Object.defineProperty(at,"interpolateMobile",{enumerable:!0,get:function(){return Ln.interpolateMobile}}),Object.defineProperty(at,"removeOutdated",{enumerable:!0,get:function(){return Un.default}}),Object.defineProperty(at,"DELIGHTED_RESPONSES_REGEX",{enumerable:!0,get:function(){return rr.DELIGHTED_RESPONSES_REGEX}}),Object.defineProperty(at,"WOOTRIC_RESPONSES_REGEX",{enumerable:!0,get:function(){return rr.WOOTRIC_RESPONSES_REGEX}}),Object.defineProperty(at,"REPLAY_TYPE",{enumerable:!0,get:function(){return tr.REPLAY_TYPE}}),Object.defineProperty(at,"SDK_REPLAY_TYPE",{enumerable:!0,get:function(){return Qn.SDK_REPLAY_TYPE}}),Object.defineProperty(at,"SDK_TYPE",{enumerable:!0,get:function(){return Qn.SDK_TYPE}}),Object.defineProperty(at,"SDK_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Qn.SDK_TYPE_TO_DISPLAY}}),Object.defineProperty(at,"SESSION_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Qn.SESSION_TYPE_TO_DISPLAY}}),Object.defineProperty(at,"STATUS_CODES",{enumerable:!0,get:function(){return jn.STATUS_CODES}}),Object.defineProperty(at,"getStatusText",{enumerable:!0,get:function(){return jn.getStatusText}}),Object.defineProperty(at,"parseQueryString",{enumerable:!0,get:function(){return Bn.parseQueryString}}),Object.defineProperty(at,"likeOperator",{enumerable:!0,get:function(){return an.likeOperator}}),Object.defineProperty(at,"scrollMapHistogramToPercent",{enumerable:!0,get:function(){return zn.default}}),Object.defineProperty(at,"combineHashes",{enumerable:!0,get:function(){return Kn.combineHashes}}),Object.defineProperty(at,"hashString",{enumerable:!0,get:function(){return Kn.hashString}}),Object.defineProperty(at,"encodeUserTraitString",{enumerable:!0,get:function(){return An.encodeUserTraitString}}),Object.defineProperty(at,"parseUserTraitString",{enumerable:!0,get:function(){return An.parseUserTraitString}}),Object.defineProperty(at,"IdentityStatus",{enumerable:!0,get:function(){return _n.IdentityStatus}}),Object.defineProperty(at,"parseIdentityStatus",{enumerable:!0,get:function(){return _n.parseIdentityStatus}}),Object.defineProperty(at,"scrubException",{enumerable:!0,get:function(){return On.scrubException}}),at.MobileConstants=void 0;var ht=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),dt=et(s("./packages/@logrocket/utils/src/shallowArsonify.js")),pt=et(s("./packages/@logrocket/utils/src/shallowDearsonify.js")),lt=et(s("./packages/@logrocket/utils/src/deepArsonify.js")),mt=et(s("./packages/@logrocket/utils/src/deepDearsonify.js")),st=et(s("./packages/@logrocket/utils/src/addListener.js")),ut=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ft=et(s("./packages/@logrocket/utils/src/findIndex.js")),yt=et(s("./packages/@logrocket/utils/src/find.js")),vt=et(s("./packages/@logrocket/utils/src/flatten.js")),St=et(s("./packages/@logrocket/utils/src/selectorMatches.js")),xt=et(s("./packages/@logrocket/utils/src/parseSelectorForMatch.js")),Ut=et(s("./packages/@logrocket/utils/src/querySelectorWithShadowDom.js")),Tt=At(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),kt=et(s("./packages/@logrocket/utils/src/sanitizeValue.js")),Dt=s("./packages/@logrocket/utils/src/adjustOsVersion.ts"),Vt=et(s("./packages/@logrocket/utils/src/selectorFromNodePath.js")),Ot=et(s("./packages/@logrocket/utils/src/startsWith.js")),Lt=et(s("./packages/@logrocket/utils/src/endsWith.js")),Gt=et(s("./packages/@logrocket/utils/src/contains.js")),tn=et(s("./packages/@logrocket/utils/src/uuid.js")),zt=et(s("./packages/@logrocket/utils/src/randomInt.js")),cn=s("./packages/@logrocket/utils/src/getCssRules.ts"),un=et(s("./packages/@logrocket/utils/src/getNodeSelector.js")),fn=et(s("./packages/@logrocket/utils/src/getGraphQLOperation.js")),vn=et(s("./packages/@logrocket/utils/src/isSessionEvent.js")),Ft=et(s("./packages/@logrocket/utils/src/isActivityEvent.js")),pn=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),gn=et(s("./packages/@logrocket/utils/src/isRecordingSampled.js")),Tn=et(s("./packages/@logrocket/utils/src/makeRecordingID.js")),In=et(s("./packages/@logrocket/utils/src/setFromArray.js")),kn=et(s("./packages/@logrocket/utils/src/setToArray.js")),Nn=et(s("./packages/@logrocket/utils/src/applyUrlSanitizer.js")),hn=et(s("./packages/@logrocket/utils/src/getMockDeveloperUser.js")),Sn=et(s("./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts")),Rn=s("./packages/@logrocket/utils/src/constants/logTypes.js"),wn=s("./packages/@logrocket/utils/src/constants/metrics.js"),xn=s("./packages/@logrocket/utils/src/constants/issues.ts"),Xn=et(s("./packages/@logrocket/utils/src/findKeyFrames.js")),Ln=At(s("./packages/@logrocket/utils/src/interpolate.js")),Un=et(s("./packages/@logrocket/utils/src/removeOutdated.js")),rr=s("./packages/@logrocket/utils/src/constants/nps.js"),tr=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),Qn=s("./packages/@logrocket/utils/src/constants/sdkTypes.ts"),jn=s("./packages/@logrocket/utils/src/constants/statusCodes.ts"),Bn=s("./packages/@logrocket/utils/src/parseQueryString.js"),an=s("./packages/@logrocket/utils/src/likeOperator.js"),zn=et(s("./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js")),Kn=s("./packages/@logrocket/utils/src/hashString.js"),An=s("./packages/@logrocket/utils/src/userTraitStrings.ts"),_n=s("./packages/@logrocket/utils/src/identityStatus.ts"),On=s("./packages/@logrocket/utils/src/scrubException.ts"),Pn=At(s("./packages/@logrocket/utils/src/constants/mobile.ts"));at.MobileConstants=Pn;var Vn=s("./packages/@logrocket/utils/src/browserUtils.js");Object.keys(Vn).forEach(function(it){it==="default"||it==="__esModule"||Object.prototype.hasOwnProperty.call(ot,it)||it in at&&at[it]===Vn[it]||Object.defineProperty(at,it,{enumerable:!0,get:function(){return Vn[it]}})});var ir=s("./packages/@logrocket/utils/src/isValidAppID.ts");Object.keys(ir).forEach(function(it){it==="default"||it==="__esModule"||Object.prototype.hasOwnProperty.call(ot,it)||it in at&&at[it]===ir[it]||Object.defineProperty(at,it,{enumerable:!0,get:function(){return ir[it]}})});var Mn=s("./packages/@logrocket/utils/src/requireValue.ts");Object.keys(Mn).forEach(function(it){it==="default"||it==="__esModule"||Object.prototype.hasOwnProperty.call(ot,it)||it in at&&at[it]===Mn[it]||Object.defineProperty(at,it,{enumerable:!0,get:function(){return Mn[it]}})});var $n=s("./packages/@logrocket/utils/src/types.ts");Object.keys($n).forEach(function(it){it==="default"||it==="__esModule"||Object.prototype.hasOwnProperty.call(ot,it)||it in at&&at[it]===$n[it]||Object.defineProperty(at,it,{enumerable:!0,get:function(){return $n[it]}})});function Kt(it){if(typeof WeakMap!="function")return null;var Rt=new WeakMap,bt=new WeakMap;return(Kt=function(Et){return Et?bt:Rt})(it)}function At(it,Rt){if(!Rt&&it&&it.__esModule)return it;if(it===null||nt(it)!=="object"&&typeof it!="function")return{default:it};var bt=Kt(Rt);if(bt&&bt.has(it))return bt.get(it);var wt={},Et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Mt in it)if(Mt!=="default"&&Object.prototype.hasOwnProperty.call(it,Mt)){var Nt=Et?Object.getOwnPropertyDescriptor(it,Mt):null;Nt&&(Nt.get||Nt.set)?Object.defineProperty(wt,Mt,Nt):wt[Mt]=it[Mt]}return wt.default=it,bt&&bt.set(it,wt),wt}},"./packages/@logrocket/utils/src/interpolate.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=mt,at.interpolateMobile=st;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js"));function ot(ut,ft){var yt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!yt){if(Array.isArray(ut)||(yt=ht(ut))||ft&&ut&&typeof ut.length=="number"){yt&&(ut=yt);var vt=0,St=function(){};return{s:St,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Dt){throw Dt},f:St}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xt=!0,Ut=!1,Tt;return{s:function(){yt=yt.call(ut)},n:function(){var Dt=yt.next();return xt=Dt.done,Dt},e:function(Dt){Ut=!0,Tt=Dt},f:function(){try{!xt&&yt.return!=null&&yt.return()}finally{if(Ut)throw Tt}}}}function ht(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var yt=Object.prototype.toString.call(ut).slice(8,-1);if(yt==="Object"&&ut.constructor&&(yt=ut.constructor.name),yt==="Map"||yt==="Set")return Array.from(ut);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var yt=0,vt=new Array(ft);yt<ft;yt++)vt[yt]=ut[yt];return vt}function pt(ut,ft){var yt=Object.keys(ut);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ut);ft&&(vt=vt.filter(function(St){return Object.getOwnPropertyDescriptor(ut,St).enumerable})),yt.push.apply(yt,vt)}return yt}function lt(ut){for(var ft=1;ft<arguments.length;ft++){var yt=arguments[ft]!=null?arguments[ft]:{};ft%2?pt(Object(yt),!0).forEach(function(vt){(0,nt.default)(ut,vt,yt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(yt)):pt(Object(yt)).forEach(function(vt){Object.defineProperty(ut,vt,Object.getOwnPropertyDescriptor(yt,vt))})}return ut}function mt(ut,ft){if(!ut)return{};var yt=ut.prev,vt=ut.next,St=ut.ratio,xt=lt({},vt),Ut=ot(ft),Tt;try{for(Ut.s();!(Tt=Ut.n()).done;){var kt=Tt.value;xt[kt]=yt[kt]+(vt[kt]-yt[kt])*St}}catch(Dt){Ut.e(Dt)}finally{Ut.f()}return xt}function st(ut,ft,yt){if(!ut)return{};var vt=ut.prev,St=ut.next;return St.type==="MOVE"?mt(ut,ft):vt===St&&Math.abs(yt-St.time)>500?null:St}},"./packages/@logrocket/utils/src/isActivityEvent.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=["lr.browser.MouseEvent","lr.browser.ScrollEvent","lr.browser.InputEvent","lr.browser.InputChangeEvent","lr.android.TouchEvent","lr.android.InputChangeEvent","lr.ios.TouchEvent","lr.ios.InputChangeEvent"];return nt.indexOf(et)>-1}},"./packages/@logrocket/utils/src/isRecordingSampled.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ht;var nt=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),ot=1e4;function ht(dt,pt){if(pt<=0)return!1;var lt=Math.floor(pt*ot),mt=(0,nt.default)(dt),st=mt%ot;return st<=lt}},"./packages/@logrocket/utils/src/isSessionEvent.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=et;var s=["lr.browser.NavigationEvent","lr.browser.InputChangeEvent","lr.browser.InputEvent"];function et(nt){return s.indexOf(nt.type)>-1||nt.data.eventType==="CLICK"}},"./packages/@logrocket/utils/src/isValidAppID.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.isValidAppID=et;var s=/^[a-z0-9_-]+\/[a-z0-9_-]+$/;function et(nt){return typeof nt=="string"&&s.test(nt)}},"./packages/@logrocket/utils/src/likeOperator.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.likeOperator=s;function s(et,nt){var ot=nt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ht=ot.replace(/\\\*/g,".*").replace(/\\\?/g,"."),dt=new RegExp("^".concat(ht,"$"));return dt.test(et)}},"./packages/@logrocket/utils/src/logError.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=void 0;var s=typeof console<"u"&&console.error&&console.error.bind,et=s?console.error.bind(console):function(){},nt=et;at.default=nt},"./packages/@logrocket/utils/src/makeRecordingID.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ot;var nt=et(s("./packages/@logrocket/utils/src/uuid.js"));function ot(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=ht.prefix,pt=dt===void 0?5:dt;return"".concat(pt,"-").concat((0,nt.default)())}},"./packages/@logrocket/utils/src/mapValues.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){if(et==null)return{};var ot={};return Object.keys(et).forEach(function(ht){ot[ht]=nt(et[ht])}),ot}},"./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){return et.replace(/</g,"%3c").replace(/>/g,"%3e").replace(/\s/g,"")}},"./packages/@logrocket/utils/src/parseIntFromHex.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=et.replace(/[^0-9a-f]/g,"");return parseInt("0x".concat(nt),16)||0}},"./packages/@logrocket/utils/src/parseQueryString.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.parseQueryString=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),ot=function(pt){var lt={},mt=pt.split("&");return mt.forEach(function(st){var ut=st.split("=").map(function(St){return St.replace(/\+/g," ")}).map(decodeURIComponent),ft=(0,nt.default)(ut,2),yt=ft[0],vt=ft[1];lt[yt]=vt}),lt},ht=function(pt){var lt=pt.indexOf("?");if(lt===-1)return{};var mt=pt.substring(lt+1);return ot(mt)};at.parseQueryString=ht},"./packages/@logrocket/utils/src/parseSelectorForMatch.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=lt;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),ht=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt="~",pt=":nth-child(";function lt(mt){var st=mt.replace(/\s*>\s*|:nth-child\(([1-9][0-9]*|odd|even)\)|\s+/gi,function(ut){return ut.indexOf(">")>-1?" >":ut.trim().length===0?" ":"".concat(dt).concat(ut.slice(pt.length))});return st.split(/\s+/).map(function(ut){var ft={},yt=ut;if(yt.charAt(0)===">"&&(ft.directDesc=!0,yt=yt.slice(1)),yt=yt.replace(/^([a-z0-9-_]+)/ig,function(Tt){return ft.nodeName=Tt,""}),yt.charAt(0)===dt){var vt=yt.slice(1).split(")"),St=(0,ot.default)(vt,2),xt=St[0],Ut=St[1];ft.nthChild=xt,yt=Ut}return yt.replace(/\.|#/gi,function(Tt){return" ".concat(Tt)}).trim().split(" ").forEach(function(Tt){if((0,ht.default)(Tt,".")){var kt=Tt.slice(1);ft.classList=ft.classList?[].concat((0,nt.default)(ft.classList),[kt]):[kt]}else(0,ht.default)(Tt,"#")&&(ft.id=Tt.slice(1))}),ft})}},"./packages/@logrocket/utils/src/protectFunc.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ht;var nt=et(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),ot=et(s("./packages/@logrocket/utils/src/logError.js"));function ht(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var lt;try{lt=dt.apply(void 0,arguments)}catch(st){if(typeof window<"u"&&window._lrdebug)throw st;var mt=pt(st);(0,ot.default)("LogRocket",st),(0,nt.default)(st,mt)}return lt}}},"./packages/@logrocket/utils/src/querySelectorWithShadowDom.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt,at.caseInsensitiveQuerySelector=void 0;function s(pt,lt){var mt=typeof Symbol<"u"&&pt[Symbol.iterator]||pt["@@iterator"];if(!mt){if(Array.isArray(pt)||(mt=et(pt))||lt&&pt&&typeof pt.length=="number"){mt&&(pt=mt);var st=0,ut=function(){};return{s:ut,n:function(){return st>=pt.length?{done:!0}:{done:!1,value:pt[st++]}},e:function(xt){throw xt},f:ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ft=!0,yt=!1,vt;return{s:function(){mt=mt.call(pt)},n:function(){var xt=mt.next();return ft=xt.done,xt},e:function(xt){yt=!0,vt=xt},f:function(){try{!ft&&mt.return!=null&&mt.return()}finally{if(yt)throw vt}}}}function et(pt,lt){if(pt){if(typeof pt=="string")return nt(pt,lt);var mt=Object.prototype.toString.call(pt).slice(8,-1);if(mt==="Object"&&pt.constructor&&(mt=pt.constructor.name),mt==="Map"||mt==="Set")return Array.from(pt);if(mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return nt(pt,lt)}}function nt(pt,lt){(lt==null||lt>pt.length)&&(lt=pt.length);for(var mt=0,st=new Array(lt);mt<lt;mt++)st[mt]=pt[mt];return st}var ot=function(lt){var mt=lt.root,st=lt.selectorList,ut=lt.directDesc,ft=st[0].split(/(?=\.)|(?=#)/),yt=ft.shift(),vt="",St=[];ft.forEach(function(Ot){Ot[0]==="#"&&(vt=Ot.toLowerCase().substring(1).trim()),Ot[0]==="."&&St.push(Ot.toLowerCase().substring(1).trim())});var xt;ut?xt=[mt.querySelector(":scope > ".concat(yt))]:xt=mt.querySelectorAll(yt);var Ut=[],Tt=s(xt),kt;try{var Dt=function(){var Lt=kt.value;if(!Lt||vt!==Lt.id.toLowerCase())return"continue";var Gt=Array.from(Lt.classList.values()).map(function(tn){return tn.toLowerCase()}).filter(function(tn){return tn!==""&&tn[0]!==":"});if(!St.every(function(tn){return Gt.indexOf(tn)>-1}))return"continue";Ut.push(Lt)};for(Tt.s();!(kt=Tt.n()).done;)var Vt=Dt()}catch(Ot){Tt.e(Ot)}finally{Tt.f()}return Ut},ht=function(lt,mt){if(!mt.length)return null;var st;if(lt.host?st=lt:st=lt.querySelector("body"),!st)return null;for(var ut=[{matches:[st],selectorList:mt.split(" > "),directDesc:!1}];ut.length;){var ft=ut.shift(),yt=ft.matches,vt=ft.selectorList,St=ft.directDesc,xt=s(yt),Ut;try{for(xt.s();!(Ut=xt.n()).done;){var Tt=Ut.value,kt=ot({root:Tt,selectorList:vt,directDesc:St});if(kt.length&&vt.length===1)return kt[0];kt.length&&ut.push({matches:kt,selectorList:vt.slice(1),directDesc:!0})}}catch(Dt){xt.e(Dt)}finally{xt.f()}}return null};at.caseInsensitiveQuerySelector=ht;function dt(pt,lt){if(lt.startsWith("$shadow-root >"))throw new Error("Malformed selector '".concat(lt,"': should not start with $shadow-root"));lt.endsWith("> $shadow-root")&&(lt=lt.slice(0,lt.length-14));for(var mt=pt,st,ut=lt.split("> $shadow-root >"),ft=0;ft<ut.length;ft++)if(st=ht(mt,ut[ft]),st&&ft<ut.length-1)if(st.shadowRoot)mt=st.shadowRoot;else throw new Error("Missing shadowRoot for selector '".concat(lt,"' at depth ").concat(ft));return{root:mt,node:st}}},"./packages/@logrocket/utils/src/randomInt.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){var ot=Math.ceil(et),ht=Math.floor(nt);return Math.floor(Math.random()*(ht-ot))+ot}},"./packages/@logrocket/utils/src/removeOutdated.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=ht;var nt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js")),ot=5e3;function ht(dt,pt){if(dt.length===0)return dt;var lt=(0,nt.default)(dt,{time:pt.time-ot},"time")-1,mt=dt[lt];return mt&&pt.time-mt.time>ot&&lt>0?dt.slice(lt):dt}},"./packages/@logrocket/utils/src/requireValue.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.requireValue=void 0;var s=function(nt){if(typeof nt>"u")throw new Error("Value must not be undefined.");return nt};at.requireValue=s},"./packages/@logrocket/utils/src/sanitizeValue.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=et;var s=function(ot){for(var ht="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ",dt=Math.ceil(ot.length/ht.length),pt="";dt>0;)pt+=ht,dt--;return pt.slice(0,ot.length)};function et(nt,ot){var ht=String(nt);return String(ot).toLowerCase()==="lipsum"?s(ht):""}},"./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){for(var ot=[],ht=et.reduce(function(mt,st){return mt+st.count},0),dt=0,pt=1;pt<=100;pt++){var lt=nt*(pt*.01);dt>=et.length?ot.push(0):(ot.push(ht),lt>et[dt].maxScroll&&(ht-=et[dt].count,dt++))}return ot}},"./packages/@logrocket/utils/src/scrubException.ts":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.scrubException=st;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js"));function ot(ut,ft){var yt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!yt){if(Array.isArray(ut)||(yt=ht(ut))||ft&&ut&&typeof ut.length=="number"){yt&&(ut=yt);var vt=0,St=function(){};return{s:St,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Dt){throw Dt},f:St}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xt=!0,Ut=!1,Tt;return{s:function(){yt=yt.call(ut)},n:function(){var Dt=yt.next();return xt=Dt.done,Dt},e:function(Dt){Ut=!0,Tt=Dt},f:function(){try{!xt&&yt.return!=null&&yt.return()}finally{if(Ut)throw Tt}}}}function ht(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var yt=Object.prototype.toString.call(ut).slice(8,-1);if(yt==="Object"&&ut.constructor&&(yt=ut.constructor.name),yt==="Map"||yt==="Set")return Array.from(ut);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var yt=0,vt=new Array(ft);yt<ft;yt++)vt[yt]=ut[yt];return vt}function pt(ut){return/boolean|number|string/.test((0,nt.default)(ut))}var lt=["level","logger"],mt=["tags","extra"];function st(ut,ft){if(ft){var yt=ot(lt),vt;try{for(yt.s();!(vt=yt.n()).done;){var St=vt.value,xt=ft[St];pt(xt)&&(ut[St]=xt.toString())}}catch(zt){yt.e(zt)}finally{yt.f()}var Ut=ot(mt),Tt;try{for(Ut.s();!(Tt=Ut.n()).done;){for(var kt=Tt.value,Dt=ft[kt]||{},Vt={},Ot=0,Lt=Object.keys(Dt);Ot<Lt.length;Ot++){var Gt=Lt[Ot],tn=Dt[Gt];pt(tn)&&(Vt[Gt.toString()]=tn.toString())}ut[kt]=Vt}}catch(zt){Ut.e(zt)}finally{Ut.f()}}}},"./packages/@logrocket/utils/src/selectorFromNodePath.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=pt;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"));function ot(lt,mt){var st=typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(!st){if(Array.isArray(lt)||(st=ht(lt))||mt&&lt&&typeof lt.length=="number"){st&&(lt=st);var ut=0,ft=function(){};return{s:ft,n:function(){return ut>=lt.length?{done:!0}:{done:!1,value:lt[ut++]}},e:function(Ut){throw Ut},f:ft}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yt=!0,vt=!1,St;return{s:function(){st=st.call(lt)},n:function(){var Ut=st.next();return yt=Ut.done,Ut},e:function(Ut){vt=!0,St=Ut},f:function(){try{!yt&&st.return!=null&&st.return()}finally{if(vt)throw St}}}}function ht(lt,mt){if(lt){if(typeof lt=="string")return dt(lt,mt);var st=Object.prototype.toString.call(lt).slice(8,-1);if(st==="Object"&&lt.constructor&&(st=lt.constructor.name),st==="Map"||st==="Set")return Array.from(lt);if(st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return dt(lt,mt)}}function dt(lt,mt){(mt==null||mt>lt.length)&&(mt=lt.length);for(var st=0,ut=new Array(mt);st<mt;st++)ut[st]=lt[st];return ut}function pt(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],mt=[],st=ot((0,nt.default)(lt).reverse()),ut;try{var ft=function(){var vt=ut.value,St=vt.nodeName,xt=vt.id,Ut=vt.nthChild,Tt=vt.classList,kt=[],Dt=[];Ut&&Dt.push("nth-child(".concat(Ut,")")),St&&(kt.push(St),Dt.sort().map(function(Vt){return kt.push(":".concat(Vt))})),xt&&kt.push("#".concat(xt)),Tt&&Tt.length&&(Tt=Tt.map(function(Vt){return Vt.toLowerCase()}).sort(),kt=[].concat((0,nt.default)(kt),(0,nt.default)(Tt.map(function(Vt){return".".concat(Vt)})))),kt.length&&mt.push(kt.join(" "))};for(st.s();!(ut=st.n()).done;)ft()}catch(yt){st.e(yt)}finally{st.f()}return mt.join(" > ")}},"./packages/@logrocket/utils/src/selectorMatches.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=st;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./packages/@logrocket/utils/src/findIndex.js"));function dt(ut,ft){var yt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!yt){if(Array.isArray(ut)||(yt=pt(ut))||ft&&ut&&typeof ut.length=="number"){yt&&(ut=yt);var vt=0,St=function(){};return{s:St,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Dt){throw Dt},f:St}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xt=!0,Ut=!1,Tt;return{s:function(){yt=yt.call(ut)},n:function(){var Dt=yt.next();return xt=Dt.done,Dt},e:function(Dt){Ut=!0,Tt=Dt},f:function(){try{!xt&&yt.return!=null&&yt.return()}finally{if(Ut)throw Tt}}}}function pt(ut,ft){if(ut){if(typeof ut=="string")return lt(ut,ft);var yt=Object.prototype.toString.call(ut).slice(8,-1);if(yt==="Object"&&ut.constructor&&(yt=ut.constructor.name),yt==="Map"||yt==="Set")return Array.from(ut);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return lt(ut,ft)}}function lt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var yt=0,vt=new Array(ft);yt<ft;yt++)vt[yt]=ut[yt];return vt}function mt(ut,ft){if(!(ut&&ft)||ut.id&&ut.id!==ft.id||ut.nodeName&&ut.nodeName!==ft.nodeName||ut.classList&&(!ft.classList||ut.classList.map(function(vt){return vt.toLowerCase()}).some(function(vt){return ft.classList.map(function(St){return St.toLowerCase()}).indexOf(vt)===-1})))return!1;if(ut.nthChild){var yt=parseInt(ut.nthChild,10);return isNaN(yt)?Math.abs(ft.nthChild%2)===(ut.nthChild==="odd"?1:0):yt===ft.nthChild}return!0}function st(ut,ft){var yt=ut.slice(0).reverse(),vt,St=dt(ft),xt;try{var Ut=function(){var Dt=xt.value;if(Dt.directDesc)return mt.apply(void 0,[Dt].concat((0,nt.default)(yt.splice(0,1))))?"continue":{v:!1};if(vt=(0,ht.default)(yt,function(Vt){return mt(Dt,Vt)}),vt===-1)return{v:!1};yt.splice(0,vt+1)};for(St.s();!(xt=St.n()).done;){var Tt=Ut();if(Tt!=="continue"&&(0,ot.default)(Tt)==="object")return Tt.v}}catch(kt){St.e(kt)}finally{St.f()}return!0}},"./packages/@logrocket/utils/src/sendTelemetryData.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.sendTelemetry=st,at.default=ut;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/utils/src/logError.js")),ht=et(s("./packages/@logrocket/utils/src/TraceKit.js"));function dt(ft,yt){var vt=Object.keys(ft);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(ft);yt&&(St=St.filter(function(xt){return Object.getOwnPropertyDescriptor(ft,xt).enumerable})),vt.push.apply(vt,St)}return vt}function pt(ft){for(var yt=1;yt<arguments.length;yt++){var vt=arguments[yt]!=null?arguments[yt]:{};yt%2?dt(Object(vt),!0).forEach(function(St){(0,nt.default)(ft,St,vt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(vt)):dt(Object(vt)).forEach(function(St){Object.defineProperty(ft,St,Object.getOwnPropertyDescriptor(vt,St))})}return ft}var lt="b0db2bde13abbdaac4ddf7651e7be60eb639ccf7";function mt(ft){var yt=window._lrXMLHttpRequest||XMLHttpRequest;try{var vt=new yt,St=ft.message,xt="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793";vt.open("POST",xt),vt.send(JSON.stringify(pt({message:St,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:lt,environment:"test"},ft)))}catch(Ut){(0,ot.default)("Failed to send",Ut)}}function st(ft,yt){if(typeof window<"u"&&window._lrdebug)return void(0,ot.default)(ft);yt&&yt.extra&&yt.extra.appID&&typeof yt.extra.appID.indexOf=="function"&&yt.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||mt(pt({message:ft},yt))}function ut(ft,yt){try{var vt=ft.message,St;try{St=JSON.stringify(yt).slice(0,1e3)}catch{try{St="Could not stringify payload: ".concat(Object.prototype.toString.call(yt))}catch{}}var xt;try{xt=ht.default.computeStackTrace(ft).stack.map(function(Ut){return{filename:Ut.url,lineno:Ut.line,colno:Ut.column,function:Ut.func||"?"}})}catch{}mt({message:vt,extra:{stringPayload:St},exception:{values:[{type:ft.type,value:vt,stacktrace:{frames:xt}}]}})}catch(Ut){(0,ot.default)("Failed to send",Ut)}}},"./packages/@logrocket/utils/src/setFromArray.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=new Set;return et.forEach(function(ot){return nt.add(ot)}),nt}},"./packages/@logrocket/utils/src/setToArray.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=[];return et.forEach(function(ot){return nt.push(ot)}),nt}},"./packages/@logrocket/utils/src/shallowArsonify.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt={}.toString.call(et);switch(nt){case"[object Undefined]":return{undefined:{}};case"[object Null]":return{null:{}};case"[object Boolean]":return{boolean:{bool:et}};case"[object Number]":return{number:{double:et}};case"[object String]":return{string:{string:et}};case"[object Object]":return{object:{map:et}};case"[object Array]":return{array:{map:et}};case"[object Date]":return{date:{double:et.getTime()}};case"[object Error]":return{string:{string:"".concat(et.name,": ").concat(et.message)}};default:return{unsupported:{type:nt}}}}},"./packages/@logrocket/utils/src/shallowDearsonify.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){var nt=et.type||Object.keys(et)[0];switch(nt){case"undefined":return;case"null":return null;case"boolean":return et.boolean.bool;case"number":return et.number.double;case"string":return et.string.string;case"object":return et.object.map;case"array":return Object.keys(et.array.map).reduce(function(ot,ht){return ot[ht]=et.array.map[ht],ot},[]);case"date":return new Date(et.date.double);case"unsupported":return et.unsupported.type;default:throw new TypeError("Unexpected value in shallowDearsonify: ".concat(et))}}},"./packages/@logrocket/utils/src/startsWith.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et,nt){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return et&&nt&&et.substring(ot,ot+nt.length)===nt}},"./packages/@logrocket/utils/src/types.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0})},"./packages/@logrocket/utils/src/userTraitStrings.ts":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.parseUserTraitString=at.encodeUserTraitString=void 0;var s=":",et=String.fromCharCode(26),nt=function(){for(var dt=arguments.length,pt=new Array(dt),lt=0;lt<dt;lt++)pt[lt]=arguments[lt];return pt.map(function(mt){return mt.replace(new RegExp(s,"g"),et)}).join(s)};at.encodeUserTraitString=nt;var ot=function(dt){var pt=dt||s;return pt.split(s).map(function(lt){return lt.replace(new RegExp(et,"g"),s)})};at.parseUserTraitString=ot},"./packages/@logrocket/utils/src/uuid.js":function(rt,at){Object.defineProperty(at,"__esModule",{value:!0}),at.default=s;function s(et){return et?(et^Math.random()*16>>et/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s)}},"./packages/logrocket/src/LogRocket.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=at.MAX_QUEUE_SIZE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),ot=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),ht=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),pt=et(s("./packages/@logrocket/network/src/index.js")),lt=s("./packages/@logrocket/exceptions/src/index.js"),mt=et(s("./packages/@logrocket/console/src/index.js")),st=s("./packages/@logrocket/redux/src/index.js");function ut(xt,Ut){var Tt=Object.keys(xt);if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(xt);Ut&&(kt=kt.filter(function(Dt){return Object.getOwnPropertyDescriptor(xt,Dt).enumerable})),Tt.push.apply(Tt,kt)}return Tt}function ft(xt){for(var Ut=1;Ut<arguments.length;Ut++){var Tt=arguments[Ut]!=null?arguments[Ut]:{};Ut%2?ut(Object(Tt),!0).forEach(function(kt){(0,ht.default)(xt,kt,Tt[kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xt,Object.getOwnPropertyDescriptors(Tt)):ut(Object(Tt)).forEach(function(kt){Object.defineProperty(xt,kt,Object.getOwnPropertyDescriptor(Tt,kt))})}return xt}var yt=1e3;at.MAX_QUEUE_SIZE=yt;var vt=function(){var Ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=Ut.ingestServer,kt=(0,dt.default)(Ut,["ingestServer"]);return Tt?ft({serverURL:"".concat(Tt,"/i"),statsURL:"".concat(Tt,"/s")},kt):kt},St=function(){function xt(){var Ut=this;(0,nt.default)(this,xt),this._buffer=[],["log","info","warn","error","debug"].forEach(function(Tt){Ut[Tt]=function(){for(var kt=arguments.length,Dt=new Array(kt),Vt=0;Vt<kt;Vt++)Dt[Vt]=arguments[Vt];Ut.addEvent("lr.core.LogEvent",function(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Tt==="error"&&Ot.shouldAggregateConsoleErrors&&lt.Capture.captureMessage(Ut,Dt[0],Dt,{},!0),{logLevel:Tt.toUpperCase(),args:Dt}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,ot.default)(xt,[{key:"addEvent",value:function(Tt,kt){var Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Vt=Date.now();this._run(function(Ot){Ot.addEvent(Tt,kt,ft(ft({},Dt),{},{timeOverride:Vt}))})}},{key:"onLogger",value:function(Tt){for(this._logger=Tt;this._buffer.length>0;){var kt=this._buffer.shift();kt(this._logger)}}},{key:"_run",value:function(Tt){if(!this._isDisabled)if(this._logger)Tt(this._logger);else{if(this._buffer.length>=yt){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(Tt.bind(this))}}},{key:"init",value:function(Tt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var Dt=kt.shouldAugmentNPS,Vt=Dt===void 0?!0:Dt,Ot=kt.shouldParseXHRBlob,Lt=Ot===void 0?!1:Ot,Gt=kt.shouldDetectExceptions,tn=Gt===void 0?!0:Gt;tn&&this._installed.push((0,lt.registerExceptions)(this)),this._installed.push((0,pt.default)(this,{shouldAugmentNPS:!!Vt,shouldParseXHRBlob:!!Lt})),this._installed.push((0,mt.default)(this)),this._isInitialized=!0,this._run(function(zt){zt.init(Tt,vt(kt))})}}},{key:"start",value:function(){this._run(function(Tt){Tt.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(Tt){return Tt()}),this._buffer=[],this._run(function(Tt){Tt.uninstall()})}},{key:"identify",value:function(Tt,kt){this._run(function(Dt){Dt.identify(Tt,kt)})}},{key:"startNewSession",value:function(){this._run(function(Tt){Tt.startNewSession()})}},{key:"track",value:function(Tt,kt){this._run(function(Dt){Dt.track(Tt,kt)})}},{key:"getSessionURL",value:function(Tt){if(typeof Tt!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(kt){kt.getSessionURL?kt.getSessionURL(Tt):Tt(kt.recordingURL)})}},{key:"getVersion",value:function(Tt){this._run(function(kt){Tt(kt.version)})}},{key:"captureMessage",value:function(Tt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt.Capture.captureMessage(this,Tt,[Tt],kt)}},{key:"captureException",value:function(Tt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt.Capture.captureException(this,Tt,kt)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,st.createEnhancer)(this,Tt)}},{key:"reduxMiddleware",value:function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,st.createMiddleware)(this,Tt)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),xt}();at.default=St},"./packages/logrocket/src/makeLogRocket.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt;var nt=et(s("./packages/logrocket/src/LogRocket.js")),ot="LogRocket does not yet support React Native.",ht=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(mt){return function(){return mt.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(mt){return function(st){return mt(st)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(ot);if(typeof window<"u"){if(window._disableLogRocket)return ht();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var lt=new nt.default;return pt(lt),lt}}return ht()}},"./packages/logrocket/src/setup.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(at,"__esModule",{value:!0}),at.default=dt;var nt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),ot=et(s("./packages/logrocket/src/makeLogRocket.js")),ht={"cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com"};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=pt.enterpriseServer,mt=pt.sdkVersion,st=mt===void 0?"6.0.1":mt,ut=(0,nt.default)(pt,["enterpriseServer","sdkVersion"]),ft="https://cdn.logrocket.io",yt;if(st==="script")try{var vt=document.currentScript,St=vt.src.match(/^(https?:\/\/([^\\]+))\/.+$/),xt=St&&St[2];xt&&ht[xt]&&(ft=St&&St[1],yt=ht[xt])}catch{}else ft="https://cdn.lr-intake.com",yt="https://r.lr-intake.com";var Ut=ut.sdkServer||lt,Tt=ut.ingestServer||lt||yt,kt=(0,ot.default)(function(){var Dt=document.createElement("script");Tt&&(typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(Tt,"/i"),window.__SDKCONFIG__.statsURL="".concat(Tt,"/s")),Ut?Dt.src="".concat(Ut,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?Dt.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?Dt.src=window._lrAsyncScript:Dt.src="".concat(ft,"/logger-1.min.js"),Dt.async=!0,document.head.appendChild(Dt),Dt.onload=function(){typeof window._LRLogger=="function"?kt.onLogger(new window._LRLogger({sdkVersion:st})):(console.warn("LogRocket: script execution has been blocked by a product or service."),kt.uninstall())},Dt.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),kt.uninstall()}});return kt}},"./packages/@logrocket/utils/node_modules/lodash/_DataView.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(nt,"DataView");rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_Hash.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_hashClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_hashGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_hashHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_hashSet.js");function pt(lt){var mt=-1,st=lt==null?0:lt.length;for(this.clear();++mt<st;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=ot,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_ListCache.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js");function pt(lt){var mt=-1,st=lt==null?0:lt.length;for(this.clear();++mt<st;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=ot,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Map.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(nt,"Map");rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_MapCache.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js");function pt(lt){var mt=-1,st=lt==null?0:lt.length;for(this.clear();++mt<st;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=ot,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Promise.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(nt,"Promise");rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_Set.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(nt,"Set");rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_SetCache.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js");function ht(dt){var pt=-1,lt=dt==null?0:dt.length;for(this.__data__=new et;++pt<lt;)this.add(dt[pt])}ht.prototype.add=ht.prototype.push=nt,ht.prototype.has=ot,rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_Stack.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_stackClear.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_stackGet.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_stackHas.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_stackSet.js");function lt(mt){var st=this.__data__=new et(mt);this.size=st.size}lt.prototype.clear=nt,lt.prototype.delete=ot,lt.prototype.get=ht,lt.prototype.has=dt,lt.prototype.set=pt,rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_Symbol.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et.Symbol;rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et.Uint8Array;rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(nt,"WeakMap");rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js":function(rt){function at(s,et){for(var nt=-1,ot=s==null?0:s.length,ht=0,dt=[];++nt<ot;){var pt=s[nt];et(pt,nt,s)&&(dt[ht++]=pt)}return dt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),lt=Object.prototype,mt=lt.hasOwnProperty;function st(ut,ft){var yt=ot(ut),vt=!yt&&nt(ut),St=!yt&&!vt&&ht(ut),xt=!yt&&!vt&&!St&&pt(ut),Ut=yt||vt||St||xt,Tt=Ut?et(ut.length,String):[],kt=Tt.length;for(var Dt in ut)(ft||mt.call(ut,Dt))&&!(Ut&&(Dt=="length"||St&&(Dt=="offset"||Dt=="parent")||xt&&(Dt=="buffer"||Dt=="byteLength"||Dt=="byteOffset")||dt(Dt,kt)))&&Tt.push(Dt);return Tt}rt.exports=st},"./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js":function(rt){function at(s,et){for(var nt=-1,ot=s==null?0:s.length,ht=Array(ot);++nt<ot;)ht[nt]=et(s[nt],nt,s);return ht}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js":function(rt){function at(s,et){for(var nt=-1,ot=et.length,ht=s.length;++nt<ot;)s[ht+nt]=et[nt];return s}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_arraySome.js":function(rt){function at(s,et){for(var nt=-1,ot=s==null?0:s.length;++nt<ot;)if(et(s[nt],nt,s))return!0;return!1}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/eq.js");function nt(ot,ht){for(var dt=ot.length;dt--;)if(et(ot[dt][0],ht))return dt;return-1}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_baseGet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function ot(ht,dt){dt=et(dt,ht);for(var pt=0,lt=dt.length;ht!=null&&pt<lt;)ht=ht[nt(dt[pt++])];return pt&&pt==lt?ht:void 0}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js");function ot(ht,dt,pt){var lt=dt(ht);return nt(ht)?lt:et(lt,pt(ht))}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_objectToString.js"),ht="[object Null]",dt="[object Undefined]",pt=et?et.toStringTag:void 0;function lt(mt){return mt==null?mt===void 0?dt:ht:pt&&pt in Object(mt)?nt(mt):ot(mt)}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js":function(rt){function at(s,et){return s!=null&&et in Object(s)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot="[object Arguments]";function ht(dt){return nt(dt)&&et(dt)==ot}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js");function ot(ht,dt,pt,lt,mt){return ht===dt?!0:ht==null||dt==null||!nt(ht)&&!nt(dt)?ht!==ht&&dt!==dt:et(ht,dt,pt,lt,ot,mt)}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_getTag.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),mt=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),st=1,ut="[object Arguments]",ft="[object Array]",yt="[object Object]",vt=Object.prototype,St=vt.hasOwnProperty;function xt(Ut,Tt,kt,Dt,Vt,Ot){var Lt=pt(Ut),Gt=pt(Tt),tn=Lt?ft:dt(Ut),zt=Gt?ft:dt(Tt);tn=tn==ut?yt:tn,zt=zt==ut?yt:zt;var cn=tn==yt,un=zt==yt,fn=tn==zt;if(fn&&lt(Ut)){if(!lt(Tt))return!1;Lt=!0,cn=!1}if(fn&&!cn)return Ot||(Ot=new et),Lt||mt(Ut)?nt(Ut,Tt,kt,Dt,Vt,Ot):ot(Ut,Tt,tn,kt,Dt,Vt,Ot);if(!(kt&st)){var vn=cn&&St.call(Ut,"__wrapped__"),Ft=un&&St.call(Tt,"__wrapped__");if(vn||Ft){var pn=vn?Ut.value():Ut,gn=Ft?Tt.value():Tt;return Ot||(Ot=new et),Vt(pn,gn,kt,Dt,Ot)}}return fn?(Ot||(Ot=new et),ht(Ut,Tt,kt,Dt,Vt,Ot)):!1}rt.exports=xt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),ot=1,ht=2;function dt(pt,lt,mt,st){var ut=mt.length,ft=ut,yt=!st;if(pt==null)return!ft;for(pt=Object(pt);ut--;){var vt=mt[ut];if(yt&&vt[2]?vt[1]!==pt[vt[0]]:!(vt[0]in pt))return!1}for(;++ut<ft;){vt=mt[ut];var St=vt[0],xt=pt[St],Ut=vt[1];if(yt&&vt[2]){if(xt===void 0&&!(St in pt))return!1}else{var Tt=new et;if(st)var kt=st(xt,Ut,St,pt,lt,Tt);if(!(kt===void 0?nt(Ut,xt,ot|ht,st,Tt):kt))return!1}}return!0}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_isMasked.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),dt=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,lt=Function.prototype,mt=Object.prototype,st=lt.toString,ut=mt.hasOwnProperty,ft=RegExp("^"+st.call(ut).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yt(vt){if(!ot(vt)||nt(vt))return!1;var St=et(vt)?ft:pt;return St.test(ht(vt))}rt.exports=yt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ht="[object Arguments]",dt="[object Array]",pt="[object Boolean]",lt="[object Date]",mt="[object Error]",st="[object Function]",ut="[object Map]",ft="[object Number]",yt="[object Object]",vt="[object RegExp]",St="[object Set]",xt="[object String]",Ut="[object WeakMap]",Tt="[object ArrayBuffer]",kt="[object DataView]",Dt="[object Float32Array]",Vt="[object Float64Array]",Ot="[object Int8Array]",Lt="[object Int16Array]",Gt="[object Int32Array]",tn="[object Uint8Array]",zt="[object Uint8ClampedArray]",cn="[object Uint16Array]",un="[object Uint32Array]",fn={};fn[Dt]=fn[Vt]=fn[Ot]=fn[Lt]=fn[Gt]=fn[tn]=fn[zt]=fn[cn]=fn[un]=!0,fn[ht]=fn[dt]=fn[Tt]=fn[pt]=fn[kt]=fn[lt]=fn[mt]=fn[st]=fn[ut]=fn[ft]=fn[yt]=fn[vt]=fn[St]=fn[xt]=fn[Ut]=!1;function vn(Ft){return ot(Ft)&&nt(Ft.length)&&!!fn[et(Ft)]}rt.exports=vn},"./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/identity.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/property.js");function pt(lt){return typeof lt=="function"?lt:lt==null?ot:typeof lt=="object"?ht(lt)?nt(lt[0],lt[1]):et(lt):dt(lt)}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js"),ot=Object.prototype,ht=ot.hasOwnProperty;function dt(pt){if(!et(pt))return nt(pt);var lt=[];for(var mt in Object(pt))ht.call(pt,mt)&&mt!="constructor"&&lt.push(mt);return lt}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js");function ht(dt){var pt=nt(dt);return pt.length==1&&pt[0][2]?ot(pt[0][0],pt[0][1]):function(lt){return lt===dt||et(lt,dt,pt)}}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/get.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/hasIn.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js"),mt=1,st=2;function ut(ft,yt){return ht(ft)&&dt(yt)?pt(lt(ft),yt):function(vt){var St=nt(vt,ft);return St===void 0&&St===yt?ot(vt,ft):et(yt,St,mt|st)}}rt.exports=ut},"./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js":function(rt){function at(s){return function(et){return et==null?void 0:et[s]}}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function nt(ot){return function(ht){return et(ht,ot)}}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),nt=4294967295,ot=nt-1,ht=Math.floor,dt=Math.min;function pt(lt,mt,st,ut){var ft=0,yt=lt==null?0:lt.length;if(yt===0)return 0;mt=st(mt);for(var vt=mt!==mt,St=mt===null,xt=et(mt),Ut=mt===void 0;ft<yt;){var Tt=ht((ft+yt)/2),kt=st(lt[Tt]),Dt=kt!==void 0,Vt=kt===null,Ot=kt===kt,Lt=et(kt);if(vt)var Gt=ut||Ot;else Ut?Gt=Ot&&(ut||Dt):St?Gt=Ot&&Dt&&(ut||!Vt):xt?Gt=Ot&&Dt&&!Vt&&(ut||!Lt):Vt||Lt?Gt=!1:Gt=ut?kt<=mt:kt<mt;Gt?ft=Tt+1:yt=Tt}return dt(yt,ot)}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js":function(rt){function at(s,et){for(var nt=-1,ot=Array(s);++nt<s;)ot[nt]=et(nt);return ot}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_baseToString.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),dt=1/0,pt=et?et.prototype:void 0,lt=pt?pt.toString:void 0;function mt(st){if(typeof st=="string")return st;if(ot(st))return nt(st,mt)+"";if(ht(st))return lt?lt.call(st):"";var ut=st+"";return ut=="0"&&1/st==-dt?"-0":ut}rt.exports=mt},"./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js":function(rt){function at(s){return function(et){return s(et)}}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js":function(rt){function at(s,et){return s.has(et)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_castPath.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/toString.js");function dt(pt,lt){return et(pt)?pt:nt(pt,lt)?[pt]:ot(ht(pt))}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et["__core-js_shared__"];rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_SetCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_arraySome.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js"),ht=1,dt=2;function pt(lt,mt,st,ut,ft,yt){var vt=st&ht,St=lt.length,xt=mt.length;if(St!=xt&&!(vt&&xt>St))return!1;var Ut=yt.get(lt),Tt=yt.get(mt);if(Ut&&Tt)return Ut==mt&&Tt==lt;var kt=-1,Dt=!0,Vt=st&dt?new et:void 0;for(yt.set(lt,mt),yt.set(mt,lt);++kt<St;){var Ot=lt[kt],Lt=mt[kt];if(ut)var Gt=vt?ut(Lt,Ot,kt,mt,lt,yt):ut(Ot,Lt,kt,lt,mt,yt);if(Gt!==void 0){if(Gt)continue;Dt=!1;break}if(Vt){if(!nt(mt,function(tn,zt){if(!ot(Vt,zt)&&(Ot===tn||ft(Ot,tn,st,ut,yt)))return Vt.push(zt)})){Dt=!1;break}}else if(!(Ot===Lt||ft(Ot,Lt,st,ut,yt))){Dt=!1;break}}return yt.delete(lt),yt.delete(mt),Dt}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/eq.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_setToArray.js"),lt=1,mt=2,st="[object Boolean]",ut="[object Date]",ft="[object Error]",yt="[object Map]",vt="[object Number]",St="[object RegExp]",xt="[object Set]",Ut="[object String]",Tt="[object Symbol]",kt="[object ArrayBuffer]",Dt="[object DataView]",Vt=et?et.prototype:void 0,Ot=Vt?Vt.valueOf:void 0;function Lt(Gt,tn,zt,cn,un,fn,vn){switch(zt){case Dt:if(Gt.byteLength!=tn.byteLength||Gt.byteOffset!=tn.byteOffset)return!1;Gt=Gt.buffer,tn=tn.buffer;case kt:return!(Gt.byteLength!=tn.byteLength||!fn(new nt(Gt),new nt(tn)));case st:case ut:case vt:return ot(+Gt,+tn);case ft:return Gt.name==tn.name&&Gt.message==tn.message;case St:case Ut:return Gt==tn+"";case yt:var Ft=dt;case xt:var pn=cn&lt;if(Ft||(Ft=pt),Gt.size!=tn.size&&!pn)return!1;var gn=vn.get(Gt);if(gn)return gn==tn;cn|=mt,vn.set(Gt,tn);var Tn=ht(Ft(Gt),Ft(tn),cn,un,fn,vn);return vn.delete(Gt),Tn;case Tt:if(Ot)return Ot.call(Gt)==Ot.call(tn)}return!1}rt.exports=Lt},"./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js"),nt=1,ot=Object.prototype,ht=ot.hasOwnProperty;function dt(pt,lt,mt,st,ut,ft){var yt=mt&nt,vt=et(pt),St=vt.length,xt=et(lt),Ut=xt.length;if(St!=Ut&&!yt)return!1;for(var Tt=St;Tt--;){var kt=vt[Tt];if(!(yt?kt in lt:ht.call(lt,kt)))return!1}var Dt=ft.get(pt),Vt=ft.get(lt);if(Dt&&Vt)return Dt==lt&&Vt==pt;var Ot=!0;ft.set(pt,lt),ft.set(lt,pt);for(var Lt=yt;++Tt<St;){kt=vt[Tt];var Gt=pt[kt],tn=lt[kt];if(st)var zt=yt?st(tn,Gt,kt,lt,pt,ft):st(Gt,tn,kt,pt,lt,ft);if(!(zt===void 0?Gt===tn||ut(Gt,tn,mt,st,ft):zt)){Ot=!1;break}Lt||(Lt=kt=="constructor")}if(Ot&&!Lt){var cn=pt.constructor,un=lt.constructor;cn!=un&&"constructor"in pt&&"constructor"in lt&&!(typeof cn=="function"&&cn instanceof cn&&typeof un=="function"&&un instanceof un)&&(Ot=!1)}return ft.delete(pt),ft.delete(lt),Ot}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js":function(rt,at,s){var et=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g;rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function ht(dt){return et(dt,ot,nt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_getMapData.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js");function nt(ot,ht){var dt=ot.__data__;return et(ht)?dt[typeof ht=="string"?"string":"hash"]:dt.map}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function ot(ht){for(var dt=nt(ht),pt=dt.length;pt--;){var lt=dt[pt],mt=ht[lt];dt[pt]=[lt,mt,et(mt)]}return dt}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_getNative.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getValue.js");function ot(ht,dt){var pt=nt(ht,dt);return et(pt)?pt:void 0}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=Object.prototype,ot=nt.hasOwnProperty,ht=nt.toString,dt=et?et.toStringTag:void 0;function pt(lt){var mt=ot.call(lt,dt),st=lt[dt];try{lt[dt]=void 0;var ut=!0}catch{}var ft=ht.call(lt);return ut&&(mt?lt[dt]=st:delete lt[dt]),ft}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/stubArray.js"),ot=Object.prototype,ht=ot.propertyIsEnumerable,dt=Object.getOwnPropertySymbols,pt=dt?function(lt){return lt==null?[]:(lt=Object(lt),et(dt(lt),function(mt){return ht.call(lt,mt)}))}:nt;rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getTag.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_DataView.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_Promise.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_Set.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),mt="[object Map]",st="[object Object]",ut="[object Promise]",ft="[object Set]",yt="[object WeakMap]",vt="[object DataView]",St=lt(et),xt=lt(nt),Ut=lt(ot),Tt=lt(ht),kt=lt(dt),Dt=pt;(et&&Dt(new et(new ArrayBuffer(1)))!=vt||nt&&Dt(new nt)!=mt||ot&&Dt(ot.resolve())!=ut||ht&&Dt(new ht)!=ft||dt&&Dt(new dt)!=yt)&&(Dt=function(Vt){var Ot=pt(Vt),Lt=Ot==st?Vt.constructor:void 0,Gt=Lt?lt(Lt):"";if(Gt)switch(Gt){case St:return vt;case xt:return mt;case Ut:return ut;case Tt:return ft;case kt:return yt}return Ot}),rt.exports=Dt},"./packages/@logrocket/utils/node_modules/lodash/_getValue.js":function(rt){function at(s,et){return s==null?void 0:s[et]}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_hasPath.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function lt(mt,st,ut){st=et(st,mt);for(var ft=-1,yt=st.length,vt=!1;++ft<yt;){var St=pt(st[ft]);if(!(vt=mt!=null&&ut(mt,St)))break;mt=mt[St]}return vt||++ft!=yt?vt:(yt=mt==null?0:mt.length,!!yt&&dt(yt)&&ht(St,yt)&&(ot(mt)||nt(mt)))}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_hashClear.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js");function nt(){this.__data__=et?et(null):{},this.size=0}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js":function(rt){function at(s){var et=this.has(s)&&delete this.__data__[s];return this.size-=et?1:0,et}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_hashGet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt="__lodash_hash_undefined__",ot=Object.prototype,ht=ot.hasOwnProperty;function dt(pt){var lt=this.__data__;if(et){var mt=lt[pt];return mt===nt?void 0:mt}return ht.call(lt,pt)?lt[pt]:void 0}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_hashHas.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt=Object.prototype,ot=nt.hasOwnProperty;function ht(dt){var pt=this.__data__;return et?pt[dt]!==void 0:ot.call(pt,dt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_hashSet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt="__lodash_hash_undefined__";function ot(ht,dt){var pt=this.__data__;return this.size+=this.has(ht)?0:1,pt[ht]=et&&dt===void 0?nt:dt,this}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_isIndex.js":function(rt){var at=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function et(nt,ot){var ht=typeof nt;return ot=ot??at,!!ot&&(ht=="number"||ht!="symbol"&&s.test(nt))&&nt>-1&&nt%1==0&&nt<ot}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_isKey.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;function dt(pt,lt){if(et(pt))return!1;var mt=typeof pt;return mt=="number"||mt=="symbol"||mt=="boolean"||pt==null||nt(pt)?!0:ht.test(pt)||!ot.test(pt)||lt!=null&&pt in Object(lt)}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js":function(rt){function at(s){var et=typeof s;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?s!=="__proto__":s===null}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_isMasked.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js"),nt=function(){var ht=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return ht?"Symbol(src)_1."+ht:""}();function ot(ht){return!!nt&&nt in ht}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js":function(rt){var at=Object.prototype;function s(et){var nt=et&&et.constructor,ot=typeof nt=="function"&&nt.prototype||at;return et===ot}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js");function nt(ot){return ot===ot&&!et(ot)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js":function(rt){function at(){this.__data__=[],this.size=0}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js"),nt=Array.prototype,ot=nt.splice;function ht(dt){var pt=this.__data__,lt=et(pt,dt);if(lt<0)return!1;var mt=pt.length-1;return lt==mt?pt.pop():ot.call(pt,lt,1),--this.size,!0}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(ot){var ht=this.__data__,dt=et(ht,ot);return dt<0?void 0:ht[dt][1]}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(ot){return et(this.__data__,ot)>-1}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(ot,ht){var dt=this.__data__,pt=et(dt,ot);return pt<0?(++this.size,dt.push([ot,ht])):dt[pt][1]=ht,this}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Hash.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js");function ht(){this.size=0,this.__data__={hash:new et,map:new(ot||nt),string:new et}}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(ot){var ht=et(this,ot).delete(ot);return this.size-=ht?1:0,ht}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(ot){return et(this,ot).get(ot)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(ot){return et(this,ot).has(ot)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(ot,ht){var dt=et(this,ot),pt=dt.size;return dt.set(ot,ht),this.size+=dt.size==pt?0:1,this}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js":function(rt){function at(s){var et=-1,nt=Array(s.size);return s.forEach(function(ot,ht){nt[++et]=[ht,ot]}),nt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js":function(rt){function at(s,et){return function(nt){return nt==null?!1:nt[s]===et&&(et!==void 0||s in Object(nt))}}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/memoize.js"),nt=500;function ot(ht){var dt=et(ht,function(lt){return pt.size===nt&&pt.clear(),lt}),pt=dt.cache;return dt}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=et(Object,"create");rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_overArg.js"),nt=et(Object.keys,Object);rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js":function(rt,at,s){rt=s.nmd(rt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),nt=at&&!at.nodeType&&at,ot=nt&&!0&&rt&&!rt.nodeType&&rt,ht=ot&&ot.exports===nt,dt=ht&&et.process,pt=function(){try{var lt=ot&&ot.require&&ot.require("util").types;return lt||dt&&dt.binding&&dt.binding("util")}catch{}}();rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_objectToString.js":function(rt){var at=Object.prototype,s=at.toString;function et(nt){return s.call(nt)}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_overArg.js":function(rt){function at(s,et){return function(nt){return s(et(nt))}}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_root.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),nt=typeof self=="object"&&self&&self.Object===Object&&self,ot=et||nt||Function("return this")();rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js":function(rt){var at="__lodash_hash_undefined__";function s(et){return this.__data__.set(et,at),this}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js":function(rt){function at(s){return this.__data__.has(s)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_setToArray.js":function(rt){function at(s){var et=-1,nt=Array(s.size);return s.forEach(function(ot){nt[++et]=ot}),nt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_stackClear.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js");function nt(){this.__data__=new et,this.size=0}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js":function(rt){function at(s){var et=this.__data__,nt=et.delete(s);return this.size=et.size,nt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_stackGet.js":function(rt){function at(s){return this.__data__.get(s)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_stackHas.js":function(rt){function at(s){return this.__data__.has(s)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_stackSet.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),ht=200;function dt(pt,lt){var mt=this.__data__;if(mt instanceof et){var st=mt.__data__;if(!nt||st.length<ht-1)return st.push([pt,lt]),this.size=++mt.size,this;mt=this.__data__=new ot(st)}return mt.set(pt,lt),this.size=mt.size,this}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js"),nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/\\(\\)?/g,ht=et(function(dt){var pt=[];return dt.charCodeAt(0)===46&&pt.push(""),dt.replace(nt,function(lt,mt,st,ut){pt.push(st?ut.replace(ot,"$1"):mt||lt)}),pt});rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_toKey.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),nt=1/0;function ot(ht){if(typeof ht=="string"||et(ht))return ht;var dt=ht+"";return dt=="0"&&1/ht==-nt?"-0":dt}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_toSource.js":function(rt){var at=Function.prototype,s=at.toString;function et(nt){if(nt!=null){try{return s.call(nt)}catch{}try{return nt+""}catch{}}return""}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/eq.js":function(rt){function at(s,et){return s===et||s!==s&&et!==et}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/get.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function nt(ot,ht,dt){var pt=ot==null?void 0:et(ot,ht);return pt===void 0?dt:pt}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/hasIn.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_hasPath.js");function ot(ht,dt){return ht!=null&&nt(ht,dt,et)}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/identity.js":function(rt){function at(s){return s}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/isArguments.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot=Object.prototype,ht=ot.hasOwnProperty,dt=ot.propertyIsEnumerable,pt=et(function(){return arguments}())?et:function(lt){return nt(lt)&&ht.call(lt,"callee")&&!dt.call(lt,"callee")};rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/isArray.js":function(rt){var at=Array.isArray;rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js");function ot(ht){return ht!=null&&nt(ht.length)&&!et(ht)}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/isBuffer.js":function(rt,at,s){rt=s.nmd(rt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/stubFalse.js"),ot=at&&!at.nodeType&&at,ht=ot&&!0&&rt&&!rt.nodeType&&rt,dt=ht&&ht.exports===ot,pt=dt?et.Buffer:void 0,lt=pt?pt.isBuffer:void 0,mt=lt||nt;rt.exports=mt},"./packages/@logrocket/utils/node_modules/lodash/isFunction.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),ot="[object AsyncFunction]",ht="[object Function]",dt="[object GeneratorFunction]",pt="[object Proxy]";function lt(mt){if(!nt(mt))return!1;var st=et(mt);return st==ht||st==dt||st==ot||st==pt}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/isLength.js":function(rt){var at=9007199254740991;function s(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=at}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/isObject.js":function(rt){function at(s){var et=typeof s;return s!=null&&(et=="object"||et=="function")}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js":function(rt){function at(s){return s!=null&&typeof s=="object"}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/isSymbol.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot="[object Symbol]";function ht(dt){return typeof dt=="symbol"||nt(dt)&&et(dt)==ot}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js"),ht=ot&&ot.isTypedArray,dt=ht?nt(ht):et;rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/keys.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js");function ht(dt){return ot(dt)?et(dt):nt(dt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/memoize.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),nt="Expected a function";function ot(ht,dt){if(typeof ht!="function"||dt!=null&&typeof dt!="function")throw new TypeError(nt);var pt=function(){var lt=arguments,mt=dt?dt.apply(this,lt):lt[0],st=pt.cache;if(st.has(mt))return st.get(mt);var ut=ht.apply(this,lt);return pt.cache=st.set(mt,ut)||st,ut};return pt.cache=new(ot.Cache||et),pt}ot.Cache=et,rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/property.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function dt(pt){return ot(pt)?et(ht(pt)):nt(pt)}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js");function ot(ht,dt,pt){return nt(ht,dt,et(pt,2),!0)}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/stubArray.js":function(rt){function at(){return[]}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/stubFalse.js":function(rt){function at(){return!1}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/toString.js":function(rt,at,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseToString.js");function nt(ot){return ot==null?"":et(ot)}rt.exports=nt},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(rt){function at(s,et){(et==null||et>s.length)&&(et=s.length);for(var nt=0,ot=new Array(et);nt<et;nt++)ot[nt]=s[nt];return ot}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(rt){function at(s){if(Array.isArray(s))return s}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function nt(ot){if(Array.isArray(ot))return et(ot)}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(rt){function at(s,et){if(!(s instanceof et))throw new TypeError("Cannot call a class as a function")}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function nt(ht,dt){for(var pt=0;pt<dt.length;pt++){var lt=dt[pt];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(ht,et(lt.key),lt)}}function ot(ht,dt,pt){return dt&&nt(ht.prototype,dt),pt&&nt(ht,pt),Object.defineProperty(ht,"prototype",{writable:!1}),ht}rt.exports=ot,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function nt(ot,ht,dt){return ht=et(ht),ht in ot?Object.defineProperty(ot,ht,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ot[ht]=dt,ot}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(rt){function at(s){return s&&s.__esModule?s:{default:s}}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(rt){function at(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(rt){function at(s,et){var nt=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(nt!=null){var ot,ht,dt,pt,lt=[],mt=!0,st=!1;try{if(dt=(nt=nt.call(s)).next,et===0){if(Object(nt)!==nt)return;mt=!1}else for(;!(mt=(ot=dt.call(nt)).done)&&(lt.push(ot.value),lt.length!==et);mt=!0);}catch(ut){st=!0,ht=ut}finally{try{if(!mt&&nt.return!=null&&(pt=nt.return(),Object(pt)!==pt))return}finally{if(st)throw ht}}return lt}}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(rt){function at(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(rt){function at(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function nt(ot,ht){if(ot==null)return{};var dt=et(ot,ht),pt,lt;if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(ot);for(lt=0;lt<mt.length;lt++)pt=mt[lt],!(ht.indexOf(pt)>=0)&&Object.prototype.propertyIsEnumerable.call(ot,pt)&&(dt[pt]=ot[pt])}return dt}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(rt){function at(s,et){if(s==null)return{};var nt={},ot=Object.keys(s),ht,dt;for(dt=0;dt<ot.length;dt++)ht=ot[dt],!(et.indexOf(ht)>=0)&&(nt[ht]=s[ht]);return nt}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),nt=s("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),ot=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),ht=s("./node_modules/@babel/runtime/helpers/nonIterableRest.js");function dt(pt,lt){return et(pt)||nt(pt,lt)||ot(pt,lt)||ht()}rt.exports=dt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),nt=s("./node_modules/@babel/runtime/helpers/iterableToArray.js"),ot=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),ht=s("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function dt(pt){return et(pt)||nt(pt)||ot(pt)||ht()}rt.exports=dt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default;function nt(ot,ht){if(et(ot)!=="object"||ot===null)return ot;var dt=ot[Symbol.toPrimitive];if(dt!==void 0){var pt=dt.call(ot,ht||"default");if(et(pt)!=="object")return pt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ht==="string"?String:Number)(ot)}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default,nt=s("./node_modules/@babel/runtime/helpers/toPrimitive.js");function ot(ht){var dt=nt(ht,"string");return et(dt)==="symbol"?dt:String(dt)}rt.exports=ot,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(rt){function at(s){"@babel/helpers - typeof";return rt.exports=at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},rt.exports.__esModule=!0,rt.exports.default=rt.exports,at(s)}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(rt,at,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function nt(ot,ht){if(ot){if(typeof ot=="string")return et(ot,ht);var dt=Object.prototype.toString.call(ot).slice(8,-1);if(dt==="Object"&&ot.constructor&&(dt=ot.constructor.name),dt==="Map"||dt==="Set")return Array.from(ot);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return et(ot,ht)}}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports}},tt={};function ct(rt){var at=tt[rt];if(at!==void 0)return at.exports;var s=tt[rt]={id:rt,loaded:!1,exports:{}};return _e[rt](s,s.exports,ct),s.loaded=!0,s.exports}(function(){ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){ct.nmd=function(rt){return rt.paths=[],rt.children||(rt.children=[]),rt}}();var gt={};return function(){var rt=gt;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var at=ct("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=void 0;var s=at(ct("./packages/logrocket/src/setup.js")),et=(0,s.default)(),nt=et;rt.default=nt}(),gt=gt.default,gt}()})})(build_umd);var build_umdExports=build_umd.exports;const LogRocket=getDefaultExportFromCjs(build_umdExports),ErrorPage=({errorType:a})=>{let o="An error occurred";switch(a){case 404:o="Invitation not found";break;case 500:o="Internal server error";break;case 401:o="You're not auhorized to join";break;default:o="An error occurred";break}return jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(Box$1,{children:jsxRuntimeExports.jsx(Typography$1,{variant:"h4",children:o})})})})})})};function getButtonUtilityClass(a){return generateUtilityClass("MuiButton",a)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,ButtonGroupButtonContext=reactExports.createContext(void 0),ButtonGroupButtonContext$1=ButtonGroupButtonContext,_excluded$3=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$3=a=>{const{color:o,disableElevation:_e,fullWidth:tt,size:ct,variant:gt,classes:rt}=a,at={root:["root",gt,`${gt}${capitalize(o)}`,`size${capitalize(ct)}`,`${gt}Size${capitalize(ct)}`,o==="inherit"&&"colorInherit",_e&&"disableElevation",tt&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(ct)}`],endIcon:["endIcon",`iconSize${capitalize(ct)}`]},s=composeClasses(at,getButtonUtilityClass,rt);return _extends({},rt,s)},commonIconStyles=a=>_extends({},a.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},a.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},a.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color)}`],o[`size${capitalize(_e.size)}`],o[`${_e.variant}Size${capitalize(_e.size)}`],_e.color==="inherit"&&o.colorInherit,_e.disableElevation&&o.disableElevation,_e.fullWidth&&o.fullWidth]}})(({theme:a,ownerState:o})=>{var _e,tt;const ct=a.palette.mode==="light"?a.palette.grey[300]:a.palette.grey[800],gt=a.palette.mode==="light"?a.palette.grey.A100:a.palette.grey[700];return _extends({},a.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="text"&&o.color!=="inherit"&&{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="outlined"&&o.color!=="inherit"&&{border:`1px solid ${(a.vars||a).palette[o.color].main}`,backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="contained"&&{backgroundColor:a.vars?a.vars.palette.Button.inheritContainedHoverBg:gt,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},o.variant==="contained"&&o.color!=="inherit"&&{backgroundColor:(a.vars||a).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[o.color].main}}),"&:active":_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:(a.vars||a).palette.action.disabled},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`},o.variant==="contained"&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})},o.variant==="text"&&{padding:"6px 8px"},o.variant==="text"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main},o.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},o.variant==="outlined"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main,border:a.vars?`1px solid rgba(${a.vars.palette[o.color].mainChannel} / 0.5)`:`1px solid ${alpha(a.palette[o.color].main,.5)}`},o.variant==="contained"&&{color:a.vars?a.vars.palette.text.primary:(_e=(tt=a.palette).getContrastText)==null?void 0:_e.call(tt,a.palette.grey[300]),backgroundColor:a.vars?a.vars.palette.Button.inheritContainedBg:ct,boxShadow:(a.vars||a).shadows[2]},o.variant==="contained"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].contrastText,backgroundColor:(a.vars||a).palette[o.color].main},o.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},o.size==="small"&&o.variant==="text"&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="text"&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="outlined"&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="outlined"&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="contained"&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="contained"&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})},({ownerState:a})=>a.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.startIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},a.size==="small"&&{marginLeft:-2},commonIconStyles(a))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.endIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},a.size==="small"&&{marginRight:-2},commonIconStyles(a))),Button=reactExports.forwardRef(function(o,_e){const tt=reactExports.useContext(ButtonGroupContext$1),ct=reactExports.useContext(ButtonGroupButtonContext$1),gt=resolveProps(tt,o),rt=useThemeProps({props:gt,name:"MuiButton"}),{children:at,color:s="primary",component:et="button",className:nt,disabled:ot=!1,disableElevation:ht=!1,disableFocusRipple:dt=!1,endIcon:pt,focusVisibleClassName:lt,fullWidth:mt=!1,size:st="medium",startIcon:ut,type:ft,variant:yt="text"}=rt,vt=_objectWithoutPropertiesLoose(rt,_excluded$3),St=_extends({},rt,{color:s,component:et,disabled:ot,disableElevation:ht,disableFocusRipple:dt,fullWidth:mt,size:st,type:ft,variant:yt}),xt=useUtilityClasses$3(St),Ut=ut&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:xt.startIcon,ownerState:St,children:ut}),Tt=pt&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:xt.endIcon,ownerState:St,children:pt}),kt=ct||"";return jsxRuntimeExports.jsxs(ButtonRoot,_extends({ownerState:St,className:clsx(tt.className,xt.root,nt,kt),component:et,disabled:ot,focusRipple:!dt,focusVisibleClassName:clsx(xt.focusVisible,lt),ref:_e,type:ft},vt,{classes:xt,children:[Ut,at,Tt]}))}),Button$1=Button;function getLinkUtilityClass(a){return generateUtilityClass("MuiLink",a)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),linkClasses$1=linkClasses,colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=a=>colorTransformations[a]||a,getTextDecoration=({theme:a,ownerState:o})=>{const _e=transformDeprecatedColors(o.color),tt=getPath(a,`palette.${_e}`,!1)||o.color,ct=getPath(a,`palette.${_e}Channel`);return"vars"in a&&ct?`rgba(${ct} / 0.4)`:alpha(tt,.4)},getTextDecoration$1=getTextDecoration,_excluded$2=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],useUtilityClasses$2=a=>{const{classes:o,component:_e,focusVisible:tt,underline:ct}=a,gt={root:["root",`underline${capitalize(ct)}`,_e==="button"&&"button",tt&&"focusVisible"]};return composeClasses(gt,getLinkUtilityClass,o)},LinkRoot=styled$1(Typography$1,{name:"MuiLink",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`underline${capitalize(_e.underline)}`],_e.component==="button"&&o.button]}})(({theme:a,ownerState:o})=>_extends({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&_extends({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:getTextDecoration$1({theme:a,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses$1.focusVisible}`]:{outline:"auto"}})),Link=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiLink"}),{className:ct,color:gt="primary",component:rt="a",onBlur:at,onFocus:s,TypographyClasses:et,underline:nt="always",variant:ot="inherit",sx:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$2),{isFocusVisibleRef:pt,onBlur:lt,onFocus:mt,ref:st}=useIsFocusVisible(),[ut,ft]=reactExports.useState(!1),yt=useForkRef(_e,st),vt=Tt=>{lt(Tt),pt.current===!1&&ft(!1),at&&at(Tt)},St=Tt=>{mt(Tt),pt.current===!0&&ft(!0),s&&s(Tt)},xt=_extends({},tt,{color:gt,component:rt,focusVisible:ut,underline:nt,variant:ot}),Ut=useUtilityClasses$2(xt);return jsxRuntimeExports.jsx(LinkRoot,_extends({color:gt,className:clsx(Ut.root,ct),classes:et,component:rt,onBlur:vt,onFocus:St,ref:yt,ownerState:xt,variant:ot,sx:[...Object.keys(colorTransformations).includes(gt)?[]:[{color:gt}],...Array.isArray(ht)?ht:[ht]]},dt))}),Link$1=Link,CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(a){return generateUtilityClass("MuiCheckbox",a)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),checkboxClasses$1=checkboxClasses,_excluded$1=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$1=a=>{const{classes:o,indeterminate:_e,color:tt,size:ct}=a,gt={root:["root",_e&&"indeterminate",`color${capitalize(tt)}`,`size${capitalize(ct)}`]},rt=composeClasses(gt,getCheckboxUtilityClass,o);return _extends({},o,rt)},CheckboxRoot=styled$1(SwitchBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.indeterminate&&o.indeterminate,_e.color!=="default"&&o[`color${capitalize(_e.color)}`]]}})(({theme:a,ownerState:o})=>_extends({color:(a.vars||a).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${o.color==="default"?a.vars.palette.action.activeChannel:a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(o.color==="default"?a.palette.action.active:a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${checkboxClasses$1.checked}, &.${checkboxClasses$1.indeterminate}`]:{color:(a.vars||a).palette[o.color].main},[`&.${checkboxClasses$1.disabled}`]:{color:(a.vars||a).palette.action.disabled}})),defaultCheckedIcon=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiCheckbox"}),{checkedIcon:rt=defaultCheckedIcon,color:at="primary",icon:s=defaultIcon,indeterminate:et=!1,indeterminateIcon:nt=defaultIndeterminateIcon,inputProps:ot,size:ht="medium",className:dt}=gt,pt=_objectWithoutPropertiesLoose(gt,_excluded$1),lt=et?nt:s,mt=et?nt:rt,st=_extends({},gt,{color:at,indeterminate:et,size:ht}),ut=useUtilityClasses$1(st);return jsxRuntimeExports.jsx(CheckboxRoot,_extends({type:"checkbox",inputProps:_extends({"data-indeterminate":et},ot),icon:reactExports.cloneElement(lt,{fontSize:(tt=lt.props.fontSize)!=null?tt:ht}),checkedIcon:reactExports.cloneElement(mt,{fontSize:(ct=mt.props.fontSize)!=null?ct:ht}),ownerState:st,ref:_e,className:clsx(ut.root,dt)},pt,{classes:ut}))}),Checkbox$1=Checkbox,OptIn=({id:a,checked:o,labels:_e,link:tt,onChange:ct})=>jsxRuntimeExports.jsx(FormControlLabel$1,{required:!0,control:jsxRuntimeExports.jsx(Checkbox$1,{id:`${a}`,"data-testid":`${a}`,checked:o,onChange:()=>ct(a),inputProps:{"aria-label":_e.aria}}),label:jsxRuntimeExports.jsxs(Typography$1,{variant:"body1",component:"span",children:[_e.prefix,jsxRuntimeExports.jsx(Link$1,{target:"_blank",href:tt,color:"info.main",children:_e.link})]}),sx:{".MuiFormControlLabel-asterisk":{display:"none"}}}),OptInList=({labels:a,optIns:o,onSubmit:_e})=>{const[tt,ct]=reactExports.useState(Object.assign({},...o.map(rt=>({[rt.id]:!1})))),gt=rt=>{ct({...tt,[rt]:!tt[rt]})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormGroup$1,{children:o.map(rt=>jsxRuntimeExports.jsx(OptIn,{id:rt.id,checked:tt[rt.id],onChange:gt,labels:rt.labels,link:rt.link},rt.id))}),jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:!Object.values(tt).every(rt=>rt),onClick:_e,children:a.submit})})]})};function getSkeletonUtilityClass(a){return generateUtilityClass("MuiSkeleton",a)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const _excluded=["animation","className","component","height","style","variant","width"];let _=a=>a,_t,_t2,_t3,_t4;const useUtilityClasses=a=>{const{classes:o,variant:_e,animation:tt,hasChildren:ct,width:gt,height:rt}=a;return composeClasses({root:["root",_e,tt,ct&&"withChildren",ct&&!gt&&"fitContent",ct&&!rt&&"heightAuto"]},getSkeletonUtilityClass,o)},pulseKeyframe=keyframes(_t||(_t=_`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),waveKeyframe=keyframes(_t2||(_t2=_`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),SkeletonRoot=styled$1("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],_e.animation!==!1&&o[_e.animation],_e.hasChildren&&o.withChildren,_e.hasChildren&&!_e.width&&o.fitContent,_e.hasChildren&&!_e.height&&o.heightAuto]}})(({theme:a,ownerState:o})=>{const _e=getUnit(a.shape.borderRadius)||"px",tt=toUnitless(a.shape.borderRadius);return _extends({display:"block",backgroundColor:a.vars?a.vars.palette.Skeleton.bg:alpha(a.palette.text.primary,a.palette.mode==="light"?.11:.13),height:"1.2em"},o.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${tt}${_e}/${Math.round(tt/.6*10)/10}${_e}`,"&:empty:before":{content:'"\\00a0"'}},o.variant==="circular"&&{borderRadius:"50%"},o.variant==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius},o.hasChildren&&{"& > *":{visibility:"hidden"}},o.hasChildren&&!o.width&&{maxWidth:"fit-content"},o.hasChildren&&!o.height&&{height:"auto"})},({ownerState:a})=>a.animation==="pulse"&&css(_t3||(_t3=_`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),pulseKeyframe),({ownerState:a,theme:o})=>a.animation==="wave"&&css(_t4||(_t4=_`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),waveKeyframe,(o.vars||o).palette.action.hover)),Skeleton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSkeleton"}),{animation:ct="pulse",className:gt,component:rt="span",height:at,style:s,variant:et="text",width:nt}=tt,ot=_objectWithoutPropertiesLoose(tt,_excluded),ht=_extends({},tt,{animation:ct,component:rt,variant:et,hasChildren:!!ot.children}),dt=useUtilityClasses(ht);return jsxRuntimeExports.jsx(SkeletonRoot,_extends({as:rt,ref:_e,className:clsx(dt.root,gt),ownerState:ht},ot,{style:_extends({width:nt,height:at},s)}))}),Skeleton$1=Skeleton,ROOM_THEME_OPTIONS={components:{MuiChip:{variants:[{props:{},style:{color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"}}}]},MuiCircularProgress:{variants:[{props:{},style:{color:"#F7F7F8"}}]},MuiIconButton:{variants:[{props:{},style:{padding:4,margin:2,color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"},":disabled":{color:"#7A8085",backgroundColor:"#CACCCE",opacity:"75%"}}}]},MuiSwitch:{styleOverrides:{colorPrimary:{"&.Mui-checked":{color:"#17821A"}},track:{".Mui-checked.Mui-checked + &":{backgroundColor:"#17821A"}}}}}},VIDEO_ROUNDED_CORNERS={borderRadius:"4px",overflow:"hidden"},COMPONENT_NAME$2="Settings",Settings=a=>{var Lt,Gt,tn,zt,cn,un;const o=useThemeProps({props:a,name:COMPONENT_NAME$2}),{userMediaStreamRequest:_e,displayMediaStreamRequest:tt,userMediaDevices:ct,selectedAudioIn:gt,setSelectedAudioIn:rt,selectedVideoIn:at,setSelectedVideoIn:s,createStreamOptions:et,grabbing:nt,localStream:ot,cameraError:ht,streamAudioEnabled:dt,setStreamAudioEnabled:pt,streamVideoEnabled:lt,setStreamVideoEnabled:mt,screenShareStream:st,setScreenShareStream:ut,handleBack:ft,toggleReady:yt,backButtonText:vt="Back",selectAtLeastOneMediaText:St="Please select at least one media",cameraErrorText:xt="Please check a device is available and not already grabbed by another software.",readyButtonText:Ut="Enter",selectDeviceHelperText:Tt="Please check what you want to share before entering the room.",shareScreenText:kt="Please click here to share your screen"}=o,Dt=()=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$2}|shareScreen calls createDisplayMediaStream`),apiRTC_minExports.Stream.createDisplayMediaStream({},!1).then(fn=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME$2}|createDisplayMediaStream`,fn),ut(fn)}).catch(fn=>{console.error(`${COMPONENT_NAME$2}|createDisplayMediaStream error`,fn)})},Vt=reactExports.useMemo(()=>{var fn,vn;return[..._e&&!dt&&!lt?[St]:[],...(dt||lt)&&ht?[xt]:[],...(fn=et.constraints)!=null&&fn.audio&&!nt&&ot&&!ot.hasAudio()?["Failed to grab audio"]:[],...(vn=et.constraints)!=null&&vn.video&&!nt&&ot&&!ot.hasVideo()?["Failed to grab video: Please check a device is available and not already grabbed by another software"]:[]]},[ot,nt,ht,et]),Ot=reactExports.useDeferredValue(Vt);return jsxRuntimeExports.jsxs(Stack$1,{direction:"column",spacing:1,children:[_e&&jsxRuntimeExports.jsxs(Stack$1,{sx:{mt:1},direction:{xs:"column"},alignItems:"center",justifyContent:"center",useFlexGap:!0,flexWrap:"wrap",spacing:1,children:[jsxRuntimeExports.jsx(Box$1,{sx:{width:"100%",paddingTop:"75%",position:"relative","& .MuiBox-root":{position:"absolute",height:"100%",maxWidth:"100%"}},children:ot?jsxRuntimeExports.jsx(U,{sx:{top:0,left:0,bottom:0,right:0,maxWidth:{xs:"100%",sm:"100%"},...!ot.hasVideo()&&{position:"absolute",inset:0,borderRadius:"4px",backgroundColor:"#CACCCE"}},stream:ot,muted:!0,controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ot.hasAudio()&&jsxRuntimeExports.jsx(B,{}),ot.hasVideo()&&jsxRuntimeExports.jsx($$1,{})]}),children:ot.hasVideo()?jsxRuntimeExports.jsx(Y,{style:{height:"100%",...VIDEO_ROUNDED_CORNERS},"data-testid":"local-video"}):jsxRuntimeExports.jsx(F,{"data-testid":"local-audio"})}):jsxRuntimeExports.jsx(Skeleton$1,{variant:"rectangular",width:"100%",height:"100%",sx:{position:"absolute",top:0,left:0}})}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((Lt=_e.constraints)!=null&&Lt.audio),onClick:()=>pt(!dt),children:jsxRuntimeExports.jsx(Icon$1,{children:(Gt=et.constraints)!=null&&Gt.audio?"mic_on":"mic_off"})}),jsxRuntimeExports.jsx(O$1,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"audio-in",size:"small",disabled:!((tn=et.constraints)!=null&&tn.audio),devices:ct.audioinput,selectedDevice:gt,setSelectedDevice:rt})]}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((zt=_e.constraints)!=null&&zt.video),onClick:()=>{mt(!lt)},children:jsxRuntimeExports.jsx(Icon$1,{children:(cn=et.constraints)!=null&&cn.video?"videocam_on":"videocam_off"})}),jsxRuntimeExports.jsx(O$1,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"video-in",size:"small",disabled:!((un=et.constraints)!=null&&un.video),devices:ct.videoinput,selectedDevice:at,setSelectedDevice:s})]})]}),tt&&jsxRuntimeExports.jsxs(Stack$1,{mt:1,alignItems:"center",spacing:1,children:[st&&jsxRuntimeExports.jsx(Y,{style:{display:"flex",maxWidth:"100%",...VIDEO_ROUNDED_CORNERS},"data-testid":"screen-share-video",stream:st}),!st&&jsxRuntimeExports.jsx(Button$1,{variant:"outlined",color:"primary",onClick:Dt,children:kt})]}),Ot.length!==0&&jsxRuntimeExports.jsx(Stack$1,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:Ot.map((fn,vn)=>jsxRuntimeExports.jsx(Alert$1,{variant:"outlined",severity:"error",children:fn},vn))}),jsxRuntimeExports.jsx(Alert$1,{sx:{mt:1},severity:"info",children:Tt}),jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:[jsxRuntimeExports.jsx(Button$1,{onClick:ft,children:vt}),jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:Ot.length!==0||tt&&!st||_e&&!ot,onClick:yt,children:Ut})]})]})};function useMediaQueryOld(a,o,_e,tt,ct){const[gt,rt]=reactExports.useState(()=>ct&&_e?_e(a).matches:tt?tt(a).matches:o);return useEnhancedEffect$1(()=>{let at=!0;if(!_e)return;const s=_e(a),et=()=>{at&&rt(s.matches)};return et(),s.addListener(et),()=>{at=!1,s.removeListener(et)}},[a,_e]),gt}const maybeReactUseSyncExternalStore=React$2["useSyncExternalStore"];function useMediaQueryNew(a,o,_e,tt,ct){const gt=reactExports.useCallback(()=>o,[o]),rt=reactExports.useMemo(()=>{if(ct&&_e)return()=>_e(a).matches;if(tt!==null){const{matches:nt}=tt(a);return()=>nt}return gt},[gt,a,tt,ct,_e]),[at,s]=reactExports.useMemo(()=>{if(_e===null)return[gt,()=>()=>{}];const nt=_e(a);return[()=>nt.matches,ot=>(nt.addListener(ot),()=>{nt.removeListener(ot)})]},[gt,_e,a]);return maybeReactUseSyncExternalStore(s,at,rt)}function useMediaQuery(a,o={}){const _e=useTheme$3(),tt=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:ct=!1,matchMedia:gt=tt?window.matchMedia:null,ssrMatchMedia:rt=null,noSsr:at=!1}=getThemeProps({name:"MuiUseMediaQuery",props:o,theme:_e});let s=typeof a=="function"?a(_e):a;return s=s.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(s,ct,gt,rt,at)}const TextStepper=({activeStep:a,children:o,header:_e,sx:tt={}})=>jsxRuntimeExports.jsxs(Box$1,{sx:{...tt},children:[jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_e,jsxRuntimeExports.jsxs(Typography$1,{sx:{fontWeight:500},children:[a+1,"/",React$1.Children.toArray(o).length]})]}),jsxRuntimeExports.jsx(Box$1,{sx:{padding:"16px 16px 0 16px"},children:React$1.Children.toArray(o)[a]})]}),video_sizing={height:"100%",width:"100%"},getName=a=>{var tt,ct;const o=(tt=a.getContact())==null?void 0:tt.getUserData().get("firstName"),_e=(ct=a.getContact())==null?void 0:ct.getUserData().get("lastName");return!o&&!_e?a.isScreensharing()?"screen":void 0:`${o||""} ${_e||""}${a.isScreensharing()?"-screen":""}`},COMPONENT_NAME$1="Room";function Room(a){const o=useThemeProps({props:a,name:COMPONENT_NAME$1}),{conversation:_e,facingMode:tt,localStream:ct,publishedStreams:gt,subscribedStreams:rt}=o,at=useMediaQuery(ut=>ut.breakpoints.down("xs")),[s,et]=reactExports.useState();reactExports.useEffect(()=>{if(_e){const ut=yt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|pointerSharingEnabled`,yt)};_e.on("pointerSharingEnabled",ut);const ft=yt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|pointerLocationChanged`,yt),ht(vt=>({...vt,[yt.source.contactId]:yt.data})),setTimeout(()=>{ht(vt=>(delete vt[yt.source.contactId],{pointer:vt}))},3e3)};return _e.on("pointerLocationChanged",ft),_e.enablePointerSharing(!0),()=>{_e.removeListener("pointerSharingEnabled",ut),_e.removeListener("pointerLocationChanged",ft)}}},[_e]),reactExports.useEffect(()=>{const ut=rt.find(ft=>ft.isScreensharing());if(ut){globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream screenShared`,ut),et(ut||void 0);return}if(isMobile_1&&tt==="environment"){globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream localStream`,ct),et(ct);return}rt.length===0?(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream localStream`,ct),et(ct)):(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream undefined`),et(void 0))},[ct,rt,tt]);const nt=reactExports.useCallback((ut,ft)=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|onStreamMouseDown`,ut.getId(),ft),_e&&_e.sendPointerLocation({streamId:ut.getId(),contactId:ut.getContact()?ut.getContact().getId():apiRTC.userAgentInstance.userId},0,0,{top:`${Math.round(ft.nativeEvent.offsetY*100/ft.nativeEvent.target.offsetHeight)}%`,left:`${Math.round(ft.nativeEvent.offsetX*100/ft.nativeEvent.target.offsetWidth)}%`})},[_e]),[ot,ht]=reactExports.useState({}),dt=(ut,ft,yt)=>jsxRuntimeExports.jsx(U,{id:`subscribed-stream-${ft}`,sx:{...ut.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:ut,name:getName(ut),controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ut.hasAudio()&&jsxRuntimeExports.jsx(H,{size:yt}),!ut.isScreensharing()&&jsxRuntimeExports.jsx(B,{size:yt,disabled:!0}),ut.hasVideo()&&!ut.isScreensharing()&&jsxRuntimeExports.jsx($$1,{size:yt,disabled:!0})]}),onClick:()=>et(vt=>vt===ut?void 0:ut),children:ut.hasVideo()?jsxRuntimeExports.jsx(Y,{sx:video_sizing,style:{...video_sizing,objectFit:ut.isScreensharing()?"contain":ot[ut.getContact().getId()]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:ot[ut.getContact().getId()],onMouseDown:vt=>{nt(ut,vt)}}):jsxRuntimeExports.jsx(F,{})},ft),pt=(ut,ft,yt)=>jsxRuntimeExports.jsx(U,{id:`published-stream-${ft}`,sx:{...ut.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:ut,muted:!0,controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ut.hasAudio()&&!ut.isScreensharing()&&jsxRuntimeExports.jsx(B,{size:yt}),ut.hasVideo()&&!ut.isScreensharing()&&jsxRuntimeExports.jsx($$1,{size:yt})]}),onClick:()=>et(vt=>vt===ut?void 0:ut),children:ut.hasVideo()?jsxRuntimeExports.jsx(Y,{sx:video_sizing,style:{...video_sizing,objectFit:ot[apiRTC.userAgentInstance.userId]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:ot[apiRTC.userAgentInstance.userId],onMouseDown:vt=>{nt(ut,vt)}}):jsxRuntimeExports.jsx(F,{})},ft),lt=gt.length+rt.length,mt=s?lt-1:gt.length,st=mt>1&&at?"small":"medium";return jsxRuntimeExports.jsxs(Box$1,{sx:{position:"relative",height:"99vh",width:"100vw",maxWidth:"100%"},children:[jsxRuntimeExports.jsx(S$1,{sx:{height:"100%",width:"100%"},children:s?s.isRemote?dt(s,0,"large"):pt(s,0,"large"):rt.map((ut,ft)=>dt(ut,ft,rt.length>1&&at?"medium":"large"))}),jsxRuntimeExports.jsx(Stack$1,{direction:"row",alignItems:"flex-end",sx:{position:"absolute",bottom:4,left:4,opacity:.9,height:{xs:"20%",sm:"32%",md:"32%",lg:"32%"},width:{xs:`${Math.min(mt*32,80)}%`,sm:`${Math.min(mt*20,80)}%`}},children:s?rt.filter(ut=>ut!==s).map((ut,ft)=>dt(ut,ft,st)).concat(gt.filter(ut=>ut!==s).map((ut,ft)=>pt(ut,ft,st))):gt.map((ut,ft)=>pt(ut,ft,st))})]})}const App$1="",APZ_LOGO=""+new URL("apizee-6b3e8e8d.svg",import.meta.url).href;var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(a){var o=a.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _e=a.indexOf("=");_e===-1&&(_e=o);var tt=_e===o?0:4-_e%4;return[_e,tt]}function byteLength(a){var o=getLens(a),_e=o[0],tt=o[1];return(_e+tt)*3/4-tt}function _byteLength(a,o,_e){return(o+_e)*3/4-_e}function toByteArray(a){var o,_e=getLens(a),tt=_e[0],ct=_e[1],gt=new Arr(_byteLength(a,tt,ct)),rt=0,at=ct>0?tt-4:tt,s;for(s=0;s<at;s+=4)o=revLookup[a.charCodeAt(s)]<<18|revLookup[a.charCodeAt(s+1)]<<12|revLookup[a.charCodeAt(s+2)]<<6|revLookup[a.charCodeAt(s+3)],gt[rt++]=o>>16&255,gt[rt++]=o>>8&255,gt[rt++]=o&255;return ct===2&&(o=revLookup[a.charCodeAt(s)]<<2|revLookup[a.charCodeAt(s+1)]>>4,gt[rt++]=o&255),ct===1&&(o=revLookup[a.charCodeAt(s)]<<10|revLookup[a.charCodeAt(s+1)]<<4|revLookup[a.charCodeAt(s+2)]>>2,gt[rt++]=o>>8&255,gt[rt++]=o&255),gt}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,o,_e){for(var tt,ct=[],gt=o;gt<_e;gt+=3)tt=(a[gt]<<16&16711680)+(a[gt+1]<<8&65280)+(a[gt+2]&255),ct.push(tripletToBase64(tt));return ct.join("")}function fromByteArray(a){for(var o,_e=a.length,tt=_e%3,ct=[],gt=16383,rt=0,at=_e-tt;rt<at;rt+=gt)ct.push(encodeChunk(a,rt,rt+gt>at?at:rt+gt));return tt===1?(o=a[_e-1],ct.push(lookup[o>>2]+lookup[o<<4&63]+"==")):tt===2&&(o=(a[_e-2]<<8)+a[_e-1],ct.push(lookup[o>>10]+lookup[o>>4&63]+lookup[o<<2&63]+"=")),ct.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(a){return typeof a=="object"&&a.buffer&&a.buffer.constructor===ArrayBuffer});var createOutputMethod=function(a,o){return function(_e){return new Sha256(o,!0).update(_e)[a]()}},createMethod=function(a){var o=createOutputMethod("hex",a);NODE_JS&&(o=nodeWrap(o,a)),o.create=function(){return new Sha256(a)},o.update=function(ct){return o.create().update(ct)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createOutputMethod(tt,a)}return o},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(a){if(typeof a=="string")return crypto.createHash(algorithm).update(a,"utf8").digest("hex");if(a==null)throw new Error(ERROR);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),Array.isArray(a)||ArrayBuffer.isView(a)||a.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(a)).digest("hex"):method(a)};return nodeMethod},createHmacOutputMethod=function(a,o){return function(_e,tt){return new HmacSha256(_e,o,!0).update(tt)[a]()}},createHmacMethod=function(a){var o=createHmacOutputMethod("hex",a);o.create=function(ct){return new HmacSha256(ct,a)},o.update=function(ct,gt){return o.create(ct).update(gt)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createHmacOutputMethod(tt,a)}return o};function Sha256(a,o){o?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}Sha256.prototype.update=function(a){if(!this.finalized){var o,_e=typeof a;if(_e!=="string"){if(_e==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);o=!0}for(var tt,ct=0,gt,rt=a.length,at=this.blocks;ct<rt;){if(this.hashed&&(this.hashed=!1,at[0]=this.block,at[16]=at[1]=at[2]=at[3]=at[4]=at[5]=at[6]=at[7]=at[8]=at[9]=at[10]=at[11]=at[12]=at[13]=at[14]=at[15]=0),o)for(gt=this.start;ct<rt&&gt<64;++ct)at[gt>>2]|=a[ct]<<SHIFT[gt++&3];else for(gt=this.start;ct<rt&&gt<64;++ct)tt=a.charCodeAt(ct),tt<128?at[gt>>2]|=tt<<SHIFT[gt++&3]:tt<2048?(at[gt>>2]|=(192|tt>>6)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]):tt<55296||tt>=57344?(at[gt>>2]|=(224|tt>>12)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt>>6&63)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]):(tt=65536+((tt&1023)<<10|a.charCodeAt(++ct)&1023),at[gt>>2]|=(240|tt>>18)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt>>12&63)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt>>6&63)<<SHIFT[gt++&3],at[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]);this.lastByteIndex=gt,this.bytes+=gt-this.start,gt>=64?(this.block=at[16],this.start=gt-64,this.hash(),this.hashed=!0):this.start=gt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,o=this.lastByteIndex;a[16]=this.block,a[o>>2]|=EXTRA[o&3],this.block=a[16],o>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,at=this.h7,s=this.blocks,et,nt,ot,ht,dt,pt,lt,mt,st,ut,ft;for(et=16;et<64;++et)dt=s[et-15],nt=(dt>>>7|dt<<25)^(dt>>>18|dt<<14)^dt>>>3,dt=s[et-2],ot=(dt>>>17|dt<<15)^(dt>>>19|dt<<13)^dt>>>10,s[et]=s[et-16]+nt+s[et-7]+ot<<0;for(ft=o&_e,et=0;et<64;et+=4)this.first?(this.is224?(mt=300032,dt=s[0]-1413257819,at=dt-150054599<<0,tt=dt+24177077<<0):(mt=704751109,dt=s[0]-210244248,at=dt-1521486534<<0,tt=dt+143694565<<0),this.first=!1):(nt=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),ot=(ct>>>6|ct<<26)^(ct>>>11|ct<<21)^(ct>>>25|ct<<7),mt=a&o,ht=mt^a&_e^ft,lt=ct&gt^~ct&rt,dt=at+ot+lt+K[et]+s[et],pt=nt+ht,at=tt+dt<<0,tt=dt+pt<<0),nt=(tt>>>2|tt<<30)^(tt>>>13|tt<<19)^(tt>>>22|tt<<10),ot=(at>>>6|at<<26)^(at>>>11|at<<21)^(at>>>25|at<<7),st=tt&a,ht=st^tt&o^mt,lt=at&ct^~at&gt,dt=rt+ot+lt+K[et+1]+s[et+1],pt=nt+ht,rt=_e+dt<<0,_e=dt+pt<<0,nt=(_e>>>2|_e<<30)^(_e>>>13|_e<<19)^(_e>>>22|_e<<10),ot=(rt>>>6|rt<<26)^(rt>>>11|rt<<21)^(rt>>>25|rt<<7),ut=_e&tt,ht=ut^_e&a^st,lt=rt&at^~rt&ct,dt=gt+ot+lt+K[et+2]+s[et+2],pt=nt+ht,gt=o+dt<<0,o=dt+pt<<0,nt=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),ot=(gt>>>6|gt<<26)^(gt>>>11|gt<<21)^(gt>>>25|gt<<7),ft=o&_e,ht=ft^o&tt^ut,lt=gt&rt^~gt&at,dt=ct+ot+lt+K[et+3]+s[et+3],pt=nt+ht,ct=a+dt<<0,a=dt+pt<<0;this.h0=this.h0+a<<0,this.h1=this.h1+o<<0,this.h2=this.h2+_e<<0,this.h3=this.h3+tt<<0,this.h4=this.h4+ct<<0,this.h5=this.h5+gt<<0,this.h6=this.h6+rt<<0,this.h7=this.h7+at<<0},Sha256.prototype.hex=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,at=this.h7,s=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]+HEX_CHARS[tt>>28&15]+HEX_CHARS[tt>>24&15]+HEX_CHARS[tt>>20&15]+HEX_CHARS[tt>>16&15]+HEX_CHARS[tt>>12&15]+HEX_CHARS[tt>>8&15]+HEX_CHARS[tt>>4&15]+HEX_CHARS[tt&15]+HEX_CHARS[ct>>28&15]+HEX_CHARS[ct>>24&15]+HEX_CHARS[ct>>20&15]+HEX_CHARS[ct>>16&15]+HEX_CHARS[ct>>12&15]+HEX_CHARS[ct>>8&15]+HEX_CHARS[ct>>4&15]+HEX_CHARS[ct&15]+HEX_CHARS[gt>>28&15]+HEX_CHARS[gt>>24&15]+HEX_CHARS[gt>>20&15]+HEX_CHARS[gt>>16&15]+HEX_CHARS[gt>>12&15]+HEX_CHARS[gt>>8&15]+HEX_CHARS[gt>>4&15]+HEX_CHARS[gt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15];return this.is224||(s+=HEX_CHARS[at>>28&15]+HEX_CHARS[at>>24&15]+HEX_CHARS[at>>20&15]+HEX_CHARS[at>>16&15]+HEX_CHARS[at>>12&15]+HEX_CHARS[at>>8&15]+HEX_CHARS[at>>4&15]+HEX_CHARS[at&15]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,at=this.h7,s=[a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,_e>>24&255,_e>>16&255,_e>>8&255,_e&255,tt>>24&255,tt>>16&255,tt>>8&255,tt&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,gt>>24&255,gt>>16&255,gt>>8&255,gt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255];return this.is224||s.push(at>>24&255,at>>16&255,at>>8&255,at&255),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),o=new DataView(a);return o.setUint32(0,this.h0),o.setUint32(4,this.h1),o.setUint32(8,this.h2),o.setUint32(12,this.h3),o.setUint32(16,this.h4),o.setUint32(20,this.h5),o.setUint32(24,this.h6),this.is224||o.setUint32(28,this.h7),a};function HmacSha256(a,o,_e){var tt,ct=typeof a;if(ct==="string"){var gt=[],rt=a.length,at=0,s;for(tt=0;tt<rt;++tt)s=a.charCodeAt(tt),s<128?gt[at++]=s:s<2048?(gt[at++]=192|s>>6,gt[at++]=128|s&63):s<55296||s>=57344?(gt[at++]=224|s>>12,gt[at++]=128|s>>6&63,gt[at++]=128|s&63):(s=65536+((s&1023)<<10|a.charCodeAt(++tt)&1023),gt[at++]=240|s>>18,gt[at++]=128|s>>12&63,gt[at++]=128|s>>6&63,gt[at++]=128|s&63);a=gt}else if(ct==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);a.length>64&&(a=new Sha256(o,!0).update(a).array());var et=[],nt=[];for(tt=0;tt<64;++tt){var ot=a[tt]||0;et[tt]=92^ot,nt[tt]=54^ot}Sha256.call(this,o,_e),this.update(nt),this.oKeyPad=et,this.inner=!0,this.sharedMemory=_e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var a=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(a),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(a){if(!(this instanceof Keycloak))return new Keycloak(a);for(var o=this,_e,tt=[],ct,gt={enable:!0,callbackList:[],interval:5},rt=document.getElementsByTagName("script"),at=0;at<rt.length;at++)(rt[at].src.indexOf("keycloak.js")!==-1||rt[at].src.indexOf("keycloak.min.js")!==-1)&&rt[at].src.indexOf("version=")!==-1&&(o.iframeVersion=rt[at].src.substring(rt[at].src.indexOf("version=")+8).split("&")[0]);var s=!0,et=vn(console.info),nt=vn(console.warn);o.init=function(Ft){o.authenticated=!1,ct=fn();var pn=["default","cordova","cordova-native"];if(Ft&&pn.indexOf(Ft.adapter)>-1?_e=zt(Ft.adapter):Ft&&typeof Ft.adapter=="object"?_e=Ft.adapter:window.Cordova||window.cordova?_e=zt("cordova"):_e=zt(),Ft){if(typeof Ft.useNonce<"u"&&(s=Ft.useNonce),typeof Ft.checkLoginIframe<"u"&&(gt.enable=Ft.checkLoginIframe),Ft.checkLoginIframeInterval&&(gt.interval=Ft.checkLoginIframeInterval),Ft.onLoad==="login-required"&&(o.loginRequired=!0),Ft.responseMode)if(Ft.responseMode==="query"||Ft.responseMode==="fragment")o.responseMode=Ft.responseMode;else throw"Invalid value for responseMode";if(Ft.flow){switch(Ft.flow){case"standard":o.responseType="code";break;case"implicit":o.responseType="id_token token";break;case"hybrid":o.responseType="code id_token token";break;default:throw"Invalid value for flow"}o.flow=Ft.flow}if(Ft.timeSkew!=null&&(o.timeSkew=Ft.timeSkew),Ft.redirectUri&&(o.redirectUri=Ft.redirectUri),Ft.silentCheckSsoRedirectUri&&(o.silentCheckSsoRedirectUri=Ft.silentCheckSsoRedirectUri),typeof Ft.silentCheckSsoFallback=="boolean"?o.silentCheckSsoFallback=Ft.silentCheckSsoFallback:o.silentCheckSsoFallback=!0,Ft.pkceMethod){if(Ft.pkceMethod!=="S256")throw"Invalid value for pkceMethod";o.pkceMethod=Ft.pkceMethod}typeof Ft.enableLogging=="boolean"?o.enableLogging=Ft.enableLogging:o.enableLogging=!1,typeof Ft.scope=="string"&&(o.scope=Ft.scope),typeof Ft.messageReceiveTimeout=="number"&&Ft.messageReceiveTimeout>0?o.messageReceiveTimeout=Ft.messageReceiveTimeout:o.messageReceiveTimeout=1e4}o.responseMode||(o.responseMode="fragment"),o.responseType||(o.responseType="code",o.flow="standard");var gn=Dt(),Tn=Dt();Tn.promise.then(function(){o.onReady&&o.onReady(o.authenticated),gn.setSuccess(o.authenticated)}).catch(function(Sn){gn.setError(Sn)});var In=ft();function kn(){var Sn=function(xn){xn||(wn.prompt="none"),o.login(wn).then(function(){Tn.setSuccess()}).catch(function(Xn){Tn.setError(Xn)})},Rn=function(){var xn=document.createElement("iframe"),Xn=o.createLoginUrl({prompt:"none",redirectUri:o.silentCheckSsoRedirectUri});xn.setAttribute("src",Xn),xn.setAttribute("title","keycloak-silent-check-sso"),xn.style.display="none",document.body.appendChild(xn);var Ln=function(Un){if(!(Un.origin!==window.location.origin||xn.contentWindow!==Un.source)){var rr=Ut(Un.data);ut(rr,Tn),document.body.removeChild(xn),window.removeEventListener("message",Ln)}};window.addEventListener("message",Ln)},wn={};switch(Ft.onLoad){case"check-sso":gt.enable?Ot().then(function(){Gt().then(function(xn){xn?Tn.setSuccess():o.silentCheckSsoRedirectUri?Rn():Sn(!1)}).catch(function(xn){Tn.setError(xn)})}):o.silentCheckSsoRedirectUri?Rn():Sn(!1);break;case"login-required":Sn(!0);break;default:throw"Invalid value for onLoad"}}function Nn(){var Sn=Ut(window.location.href);if(Sn&&window.history.replaceState(window.history.state,null,Sn.newUrl),Sn&&Sn.valid)return Ot().then(function(){ut(Sn,Tn)}).catch(function(Rn){Tn.setError(Rn)});Ft?Ft.token&&Ft.refreshToken?(vt(Ft.token,Ft.refreshToken,Ft.idToken),gt.enable?Ot().then(function(){Gt().then(function(Rn){Rn?(o.onAuthSuccess&&o.onAuthSuccess(),Tn.setSuccess(),Lt()):Tn.setSuccess()}).catch(function(Rn){Tn.setError(Rn)})}):o.updateToken(-1).then(function(){o.onAuthSuccess&&o.onAuthSuccess(),Tn.setSuccess()}).catch(function(Rn){o.onAuthError&&o.onAuthError(),Ft.onLoad?kn():Tn.setError(Rn)})):Ft.onLoad?kn():Tn.setSuccess():Tn.setSuccess()}function hn(){var Sn=Dt(),Rn=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",Rn),Sn.setSuccess())};return document.addEventListener("readystatechange",Rn),Rn(),Sn.promise}return In.then(function(){hn().then(tn).then(Nn).catch(function(Sn){gn.setError(Sn)})}),In.catch(function(Sn){gn.setError(Sn)}),gn.promise},o.login=function(Ft){return _e.login(Ft)};function ot(Ft){var pn=null,gn=window.crypto||window.msCrypto;if(gn&&gn.getRandomValues&&window.Uint8Array)return pn=new Uint8Array(Ft),gn.getRandomValues(pn),pn;pn=new Array(Ft);for(var Tn=0;Tn<pn.length;Tn++)pn[Tn]=Math.floor(256*Math.random());return pn}function ht(Ft){return dt(Ft,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function dt(Ft,pn){for(var gn=ot(Ft),Tn=new Array(Ft),In=0;In<Ft;In++)Tn[In]=pn.charCodeAt(gn[In]%pn.length);return String.fromCharCode.apply(null,Tn)}function pt(Ft,pn){switch(Ft){case"S256":var gn=new Uint8Array(sha256.arrayBuffer(pn)),Tn=base64Js.fromByteArray(gn).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return Tn;default:throw"Invalid value for pkceMethod"}}function lt(Ft){var pn={id_token:{acr:Ft}};return JSON.stringify(pn)}o.createLoginUrl=function(Ft){var pn=xt(),gn=xt(),Tn=_e.redirectUri(Ft),In={state:pn,nonce:gn,redirectUri:encodeURIComponent(Tn)};Ft&&Ft.prompt&&(In.prompt=Ft.prompt);var kn;Ft&&Ft.action=="register"?kn=o.endpoints.register():kn=o.endpoints.authorize();var Nn=Ft&&Ft.scope||o.scope;Nn?Nn.indexOf("openid")===-1&&(Nn="openid "+Nn):Nn="openid";var hn=kn+"?client_id="+encodeURIComponent(o.clientId)+"&redirect_uri="+encodeURIComponent(Tn)+"&state="+encodeURIComponent(pn)+"&response_mode="+encodeURIComponent(o.responseMode)+"&response_type="+encodeURIComponent(o.responseType)+"&scope="+encodeURIComponent(Nn);if(s&&(hn=hn+"&nonce="+encodeURIComponent(gn)),Ft&&Ft.prompt&&(hn+="&prompt="+encodeURIComponent(Ft.prompt)),Ft&&Ft.maxAge&&(hn+="&max_age="+encodeURIComponent(Ft.maxAge)),Ft&&Ft.loginHint&&(hn+="&login_hint="+encodeURIComponent(Ft.loginHint)),Ft&&Ft.idpHint&&(hn+="&kc_idp_hint="+encodeURIComponent(Ft.idpHint)),Ft&&Ft.action&&Ft.action!="register"&&(hn+="&kc_action="+encodeURIComponent(Ft.action)),Ft&&Ft.locale&&(hn+="&ui_locales="+encodeURIComponent(Ft.locale)),Ft&&Ft.acr){var Sn=lt(Ft.acr);hn+="&claims="+encodeURIComponent(Sn)}if(o.pkceMethod){var Rn=ht(96);In.pkceCodeVerifier=Rn;var wn=pt(o.pkceMethod,Rn);hn+="&code_challenge="+wn,hn+="&code_challenge_method="+o.pkceMethod}return ct.add(In),hn},o.logout=function(Ft){return _e.logout(Ft)},o.createLogoutUrl=function(Ft){var pn=o.endpoints.logout()+"?post_logout_redirect_uri="+encodeURIComponent(_e.redirectUri(Ft,!1))+"&id_token_hint="+encodeURIComponent(o.idToken);return pn},o.register=function(Ft){return _e.register(Ft)},o.createRegisterUrl=function(Ft){return Ft||(Ft={}),Ft.action="register",o.createLoginUrl(Ft)},o.createAccountUrl=function(Ft){var pn=mt(),gn=void 0;return typeof pn<"u"&&(gn=pn+"/account?referrer="+encodeURIComponent(o.clientId)+"&referrer_uri="+encodeURIComponent(_e.redirectUri(Ft))),gn},o.accountManagement=function(){return _e.accountManagement()},o.hasRealmRole=function(Ft){var pn=o.realmAccess;return!!pn&&pn.roles.indexOf(Ft)>=0},o.hasResourceRole=function(Ft,pn){if(!o.resourceAccess)return!1;var gn=o.resourceAccess[pn||o.clientId];return!!gn&&gn.roles.indexOf(Ft)>=0},o.loadUserProfile=function(){var Ft=mt()+"/account",pn=new XMLHttpRequest;pn.open("GET",Ft,!0),pn.setRequestHeader("Accept","application/json"),pn.setRequestHeader("Authorization","bearer "+o.token);var gn=Dt();return pn.onreadystatechange=function(){pn.readyState==4&&(pn.status==200?(o.profile=JSON.parse(pn.responseText),gn.setSuccess(o.profile)):gn.setError())},pn.send(),gn.promise},o.loadUserInfo=function(){var Ft=o.endpoints.userinfo(),pn=new XMLHttpRequest;pn.open("GET",Ft,!0),pn.setRequestHeader("Accept","application/json"),pn.setRequestHeader("Authorization","bearer "+o.token);var gn=Dt();return pn.onreadystatechange=function(){pn.readyState==4&&(pn.status==200?(o.userInfo=JSON.parse(pn.responseText),gn.setSuccess(o.userInfo)):gn.setError())},pn.send(),gn.promise},o.isTokenExpired=function(Ft){if(!o.tokenParsed||!o.refreshToken&&o.flow!="implicit")throw"Not authenticated";if(o.timeSkew==null)return et("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var pn=o.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+o.timeSkew;if(Ft){if(isNaN(Ft))throw"Invalid minValidity";pn-=Ft}return pn<0},o.updateToken=function(Ft){var pn=Dt();if(!o.refreshToken)return pn.setError(),pn.promise;Ft=Ft||5;var gn=function(){var In=!1;if(Ft==-1?(In=!0,et("[KEYCLOAK] Refreshing token: forced refresh")):(!o.tokenParsed||o.isTokenExpired(Ft))&&(In=!0,et("[KEYCLOAK] Refreshing token: token expired")),!In)pn.setSuccess(!1);else{var kn="grant_type=refresh_token&refresh_token="+o.refreshToken,Nn=o.endpoints.token();if(tt.push(pn),tt.length==1){var hn=new XMLHttpRequest;hn.open("POST",Nn,!0),hn.setRequestHeader("Content-type","application/x-www-form-urlencoded"),hn.withCredentials=!0,kn+="&client_id="+encodeURIComponent(o.clientId);var Sn=new Date().getTime();hn.onreadystatechange=function(){if(hn.readyState==4)if(hn.status==200){et("[KEYCLOAK] Token refreshed"),Sn=(Sn+new Date().getTime())/2;var Rn=JSON.parse(hn.responseText);vt(Rn.access_token,Rn.refresh_token,Rn.id_token,Sn),o.onAuthRefreshSuccess&&o.onAuthRefreshSuccess();for(var wn=tt.pop();wn!=null;wn=tt.pop())wn.setSuccess(!0)}else{nt("[KEYCLOAK] Failed to refresh token"),hn.status==400&&o.clearToken(),o.onAuthRefreshError&&o.onAuthRefreshError();for(var wn=tt.pop();wn!=null;wn=tt.pop())wn.setError(!0)}},hn.send(kn)}}};if(gt.enable){var Tn=Gt();Tn.then(function(){gn()}).catch(function(In){pn.setError(In)})}else gn();return pn.promise},o.clearToken=function(){o.token&&(vt(null,null,null),o.onAuthLogout&&o.onAuthLogout(),o.loginRequired&&o.login())};function mt(){if(typeof o.authServerUrl<"u")return o.authServerUrl.charAt(o.authServerUrl.length-1)=="/"?o.authServerUrl+"realms/"+encodeURIComponent(o.realm):o.authServerUrl+"/realms/"+encodeURIComponent(o.realm)}function st(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function ut(Ft,pn){var gn=Ft.code,Tn=Ft.error,In=Ft.prompt,kn=new Date().getTime();if(Ft.kc_action_status&&o.onActionUpdate&&o.onActionUpdate(Ft.kc_action_status),Tn){if(In!="none"){var Nn={error:Tn,error_description:Ft.error_description};o.onAuthError&&o.onAuthError(Nn),pn&&pn.setError(Nn)}else pn&&pn.setSuccess();return}else o.flow!="standard"&&(Ft.access_token||Ft.id_token)&&wn(Ft.access_token,null,Ft.id_token,!0);if(o.flow!="implicit"&&gn){var hn="code="+gn+"&grant_type=authorization_code",Sn=o.endpoints.token(),Rn=new XMLHttpRequest;Rn.open("POST",Sn,!0),Rn.setRequestHeader("Content-type","application/x-www-form-urlencoded"),hn+="&client_id="+encodeURIComponent(o.clientId),hn+="&redirect_uri="+Ft.redirectUri,Ft.pkceCodeVerifier&&(hn+="&code_verifier="+Ft.pkceCodeVerifier),Rn.withCredentials=!0,Rn.onreadystatechange=function(){if(Rn.readyState==4)if(Rn.status==200){var xn=JSON.parse(Rn.responseText);wn(xn.access_token,xn.refresh_token,xn.id_token,o.flow==="standard"),Lt()}else o.onAuthError&&o.onAuthError(),pn&&pn.setError()},Rn.send(hn)}function wn(xn,Xn,Ln,Un){kn=(kn+new Date().getTime())/2,vt(xn,Xn,Ln,kn),s&&(o.tokenParsed&&o.tokenParsed.nonce!=Ft.storedNonce||o.refreshTokenParsed&&o.refreshTokenParsed.nonce!=Ft.storedNonce||o.idTokenParsed&&o.idTokenParsed.nonce!=Ft.storedNonce)?(et("[KEYCLOAK] Invalid nonce, clearing token"),o.clearToken(),pn&&pn.setError()):Un&&(o.onAuthSuccess&&o.onAuthSuccess(),pn&&pn.setSuccess())}}function ft(Ft){var pn=Dt(),gn;a?typeof a=="string"&&(gn=a):gn="keycloak.json";function Tn(Rn){Rn?o.endpoints={authorize:function(){return Rn.authorization_endpoint},token:function(){return Rn.token_endpoint},logout:function(){if(!Rn.end_session_endpoint)throw"Not supported by the OIDC server";return Rn.end_session_endpoint},checkSessionIframe:function(){if(!Rn.check_session_iframe)throw"Not supported by the OIDC server";return Rn.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!Rn.userinfo_endpoint)throw"Not supported by the OIDC server";return Rn.userinfo_endpoint}}:o.endpoints={authorize:function(){return mt()+"/protocol/openid-connect/auth"},token:function(){return mt()+"/protocol/openid-connect/token"},logout:function(){return mt()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var wn=mt()+"/protocol/openid-connect/login-status-iframe.html";return o.iframeVersion&&(wn=wn+"?version="+o.iframeVersion),wn},thirdPartyCookiesIframe:function(){var wn=mt()+"/protocol/openid-connect/3p-cookies/step1.html";return o.iframeVersion&&(wn=wn+"?version="+o.iframeVersion),wn},register:function(){return mt()+"/protocol/openid-connect/registrations"},userinfo:function(){return mt()+"/protocol/openid-connect/userinfo"}}}if(gn){var In=new XMLHttpRequest;In.open("GET",gn,!0),In.setRequestHeader("Accept","application/json"),In.onreadystatechange=function(){if(In.readyState==4)if(In.status==200||yt(In)){var Rn=JSON.parse(In.responseText);o.authServerUrl=Rn["auth-server-url"],o.realm=Rn.realm,o.clientId=Rn.resource,Tn(null),pn.setSuccess()}else pn.setError()},In.send()}else{if(!a.clientId)throw"clientId missing";o.clientId=a.clientId;var kn=a.oidcProvider;if(kn)if(typeof kn=="string"){var Sn;kn.charAt(kn.length-1)=="/"?Sn=kn+".well-known/openid-configuration":Sn=kn+"/.well-known/openid-configuration";var In=new XMLHttpRequest;In.open("GET",Sn,!0),In.setRequestHeader("Accept","application/json"),In.onreadystatechange=function(){if(In.readyState==4)if(In.status==200||yt(In)){var wn=JSON.parse(In.responseText);Tn(wn),pn.setSuccess()}else pn.setError()},In.send()}else Tn(kn),pn.setSuccess();else{if(!a.url){for(var Nn=document.getElementsByTagName("script"),hn=0;hn<Nn.length;hn++)if(Nn[hn].src.match(/.*keycloak\.js/)){a.url=Nn[hn].src.substr(0,Nn[hn].src.indexOf("/js/keycloak.js"));break}}if(!a.realm)throw"realm missing";o.authServerUrl=a.url,o.realm=a.realm,Tn(null),pn.setSuccess()}}return pn.promise}function yt(Ft){return Ft.status==0&&Ft.responseText&&Ft.responseURL.startsWith("file:")}function vt(Ft,pn,gn,Tn){if(o.tokenTimeoutHandle&&(clearTimeout(o.tokenTimeoutHandle),o.tokenTimeoutHandle=null),pn?(o.refreshToken=pn,o.refreshTokenParsed=St(pn)):(delete o.refreshToken,delete o.refreshTokenParsed),gn?(o.idToken=gn,o.idTokenParsed=St(gn)):(delete o.idToken,delete o.idTokenParsed),Ft){if(o.token=Ft,o.tokenParsed=St(Ft),o.sessionId=o.tokenParsed.session_state,o.authenticated=!0,o.subject=o.tokenParsed.sub,o.realmAccess=o.tokenParsed.realm_access,o.resourceAccess=o.tokenParsed.resource_access,Tn&&(o.timeSkew=Math.floor(Tn/1e3)-o.tokenParsed.iat),o.timeSkew!=null&&(et("[KEYCLOAK] Estimated time difference between browser and server is "+o.timeSkew+" seconds"),o.onTokenExpired)){var In=(o.tokenParsed.exp-new Date().getTime()/1e3+o.timeSkew)*1e3;et("[KEYCLOAK] Token expires in "+Math.round(In/1e3)+" s"),In<=0?o.onTokenExpired():o.tokenTimeoutHandle=setTimeout(o.onTokenExpired,In)}}else delete o.token,delete o.tokenParsed,delete o.subject,delete o.realmAccess,delete o.resourceAccess,o.authenticated=!1}function St(Ft){switch(Ft=Ft.split(".")[1],Ft=Ft.replace(/-/g,"+"),Ft=Ft.replace(/_/g,"/"),Ft.length%4){case 0:break;case 2:Ft+="==";break;case 3:Ft+="=";break;default:throw"Invalid token"}return Ft=decodeURIComponent(escape(atob(Ft))),Ft=JSON.parse(Ft),Ft}function xt(){var Ft="0123456789abcdef",pn=dt(36,Ft).split("");pn[14]="4",pn[19]=Ft.substr(pn[19]&3|8,1),pn[8]=pn[13]=pn[18]=pn[23]="-";var gn=pn.join("");return gn}function Ut(Ft){var pn=Tt(Ft);if(pn){var gn=ct.get(pn.state);return gn&&(pn.valid=!0,pn.redirectUri=gn.redirectUri,pn.storedNonce=gn.nonce,pn.prompt=gn.prompt,pn.pkceCodeVerifier=gn.pkceCodeVerifier),pn}}function Tt(Ft){var pn;switch(o.flow){case"standard":pn=["code","state","session_state","kc_action_status"];break;case"implicit":pn=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":pn=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}pn.push("error"),pn.push("error_description"),pn.push("error_uri");var gn=Ft.indexOf("?"),Tn=Ft.indexOf("#"),In,kn;if(o.responseMode==="query"&&gn!==-1?(In=Ft.substring(0,gn),kn=kt(Ft.substring(gn+1,Tn!==-1?Tn:Ft.length),pn),kn.paramsString!==""&&(In+="?"+kn.paramsString),Tn!==-1&&(In+=Ft.substring(Tn))):o.responseMode==="fragment"&&Tn!==-1&&(In=Ft.substring(0,Tn),kn=kt(Ft.substring(Tn+1),pn),kn.paramsString!==""&&(In+="#"+kn.paramsString)),kn&&kn.oauthParams){if(o.flow==="standard"||o.flow==="hybrid"){if((kn.oauthParams.code||kn.oauthParams.error)&&kn.oauthParams.state)return kn.oauthParams.newUrl=In,kn.oauthParams}else if(o.flow==="implicit"&&(kn.oauthParams.access_token||kn.oauthParams.error)&&kn.oauthParams.state)return kn.oauthParams.newUrl=In,kn.oauthParams}}function kt(Ft,pn){for(var gn=Ft.split("&"),Tn={paramsString:"",oauthParams:{}},In=0;In<gn.length;In++){var kn=gn[In].indexOf("="),Nn=gn[In].slice(0,kn);pn.indexOf(Nn)!==-1?Tn.oauthParams[Nn]=gn[In].slice(kn+1):(Tn.paramsString!==""&&(Tn.paramsString+="&"),Tn.paramsString+=gn[In])}return Tn}function Dt(){var Ft={setSuccess:function(pn){Ft.resolve(pn)},setError:function(pn){Ft.reject(pn)}};return Ft.promise=new Promise(function(pn,gn){Ft.resolve=pn,Ft.reject=gn}),Ft.promise.success=function(pn){return logPromiseDeprecation(),this.then(function(Tn){pn(Tn)}),this},Ft.promise.error=function(pn){return logPromiseDeprecation(),this.catch(function(Tn){pn(Tn)}),this},Ft}function Vt(Ft,pn,gn){var Tn=null,In=new Promise(function(kn,Nn){Tn=setTimeout(function(){Nn({error:gn||"Promise is not settled within timeout of "+pn+"ms"})},pn)});return Promise.race([Ft,In]).finally(function(){clearTimeout(Tn)})}function Ot(){var Ft=Dt();if(!gt.enable||gt.iframe)return Ft.setSuccess(),Ft.promise;var pn=document.createElement("iframe");gt.iframe=pn,pn.onload=function(){var In=o.endpoints.authorize();In.charAt(0)==="/"?gt.iframeOrigin=st():gt.iframeOrigin=In.substring(0,In.indexOf("/",8)),Ft.setSuccess()};var gn=o.endpoints.checkSessionIframe();pn.setAttribute("src",gn),pn.setAttribute("title","keycloak-session-iframe"),pn.style.display="none",document.body.appendChild(pn);var Tn=function(In){if(!(In.origin!==gt.iframeOrigin||gt.iframe.contentWindow!==In.source)&&(In.data=="unchanged"||In.data=="changed"||In.data=="error")){In.data!="unchanged"&&o.clearToken();for(var kn=gt.callbackList.splice(0,gt.callbackList.length),Nn=kn.length-1;Nn>=0;--Nn){var hn=kn[Nn];In.data=="error"?hn.setError():hn.setSuccess(In.data=="unchanged")}}};return window.addEventListener("message",Tn,!1),Ft.promise}function Lt(){gt.enable&&o.token&&setTimeout(function(){Gt().then(function(Ft){Ft&&Lt()})},gt.interval*1e3)}function Gt(){var Ft=Dt();if(gt.iframe&&gt.iframeOrigin){var pn=o.clientId+" "+(o.sessionId?o.sessionId:"");gt.callbackList.push(Ft);var gn=gt.iframeOrigin;gt.callbackList.length==1&&gt.iframe.contentWindow.postMessage(pn,gn)}else Ft.setSuccess();return Ft.promise}function tn(){var Ft=Dt();if(gt.enable||o.silentCheckSsoRedirectUri){var pn=document.createElement("iframe");pn.setAttribute("src",o.endpoints.thirdPartyCookiesIframe()),pn.setAttribute("title","keycloak-3p-check-iframe"),pn.style.display="none",document.body.appendChild(pn);var gn=function(Tn){pn.contentWindow===Tn.source&&(Tn.data!=="supported"&&Tn.data!=="unsupported"||(Tn.data==="unsupported"&&(gt.enable=!1,o.silentCheckSsoFallback&&(o.silentCheckSsoRedirectUri=!1),nt("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(pn),window.removeEventListener("message",gn),Ft.setSuccess()))};window.addEventListener("message",gn,!1)}else Ft.setSuccess();return Vt(Ft.promise,o.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function zt(Ft){if(!Ft||Ft=="default")return{login:function(kn){return window.location.replace(o.createLoginUrl(kn)),Dt().promise},logout:function(kn){return window.location.replace(o.createLogoutUrl(kn)),Dt().promise},register:function(kn){return window.location.replace(o.createRegisterUrl(kn)),Dt().promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u")window.location.href=kn;else throw"Not supported by the OIDC server";return Dt().promise},redirectUri:function(kn,Nn){return kn&&kn.redirectUri?kn.redirectUri:o.redirectUri?o.redirectUri:location.href}};if(Ft=="cordova"){gt.enable=!1;var pn=function(kn,Nn,hn){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(kn,Nn,hn):window.open(kn,Nn,hn)},gn=function(kn){return kn&&kn.cordovaOptions?Object.keys(kn.cordovaOptions).reduce(function(Nn,hn){return Nn[hn]=kn.cordovaOptions[hn],Nn},{}):{}},Tn=function(kn){return Object.keys(kn).reduce(function(Nn,hn){return Nn.push(hn+"="+kn[hn]),Nn},[]).join(",")},In=function(kn){var Nn=gn(kn);return Nn.location="no",kn&&kn.prompt=="none"&&(Nn.hidden="yes"),Tn(Nn)};return{login:function(kn){var Nn=Dt(),hn=In(kn),Sn=o.createLoginUrl(kn),Rn=pn(Sn,"_blank",hn),wn=!1,xn=!1,Xn=function(){xn=!0,Rn.close()};return Rn.addEventListener("loadstart",function(Ln){if(Ln.url.indexOf("http://localhost")==0){var Un=Ut(Ln.url);ut(Un,Nn),Xn(),wn=!0}}),Rn.addEventListener("loaderror",function(Ln){if(!wn)if(Ln.url.indexOf("http://localhost")==0){var Un=Ut(Ln.url);ut(Un,Nn),Xn(),wn=!0}else Nn.setError(),Xn()}),Rn.addEventListener("exit",function(Ln){xn||Nn.setError({reason:"closed_by_user"})}),Nn.promise},logout:function(kn){var Nn=Dt(),hn=o.createLogoutUrl(kn),Sn=pn(hn,"_blank","location=no,hidden=yes,clearcache=yes"),Rn;return Sn.addEventListener("loadstart",function(wn){wn.url.indexOf("http://localhost")==0&&Sn.close()}),Sn.addEventListener("loaderror",function(wn){wn.url.indexOf("http://localhost")==0||(Rn=!0),Sn.close()}),Sn.addEventListener("exit",function(wn){Rn?Nn.setError():(o.clearToken(),Nn.setSuccess())}),Nn.promise},register:function(kn){var Nn=Dt(),hn=o.createRegisterUrl(),Sn=In(kn),Rn=pn(hn,"_blank",Sn);return Rn.addEventListener("loadstart",function(wn){if(wn.url.indexOf("http://localhost")==0){Rn.close();var xn=Ut(wn.url);ut(xn,Nn)}}),Nn.promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u"){var Nn=pn(kn,"_blank","location=no");Nn.addEventListener("loadstart",function(hn){hn.url.indexOf("http://localhost")==0&&Nn.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(kn){return"http://localhost"}}}if(Ft=="cordova-native")return gt.enable=!1,{login:function(kn){var Nn=Dt(),hn=o.createLoginUrl(kn);return universalLinks.subscribe("keycloak",function(Sn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var Rn=Ut(Sn.url);ut(Rn,Nn)}),window.cordova.plugins.browsertab.openUrl(hn),Nn.promise},logout:function(kn){var Nn=Dt(),hn=o.createLogoutUrl(kn);return universalLinks.subscribe("keycloak",function(Sn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),o.clearToken(),Nn.setSuccess()}),window.cordova.plugins.browsertab.openUrl(hn),Nn.promise},register:function(kn){var Nn=Dt(),hn=o.createRegisterUrl(kn);return universalLinks.subscribe("keycloak",function(Sn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var Rn=Ut(Sn.url);ut(Rn,Nn)}),window.cordova.plugins.browsertab.openUrl(hn),Nn.promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u")window.cordova.plugins.browsertab.openUrl(kn);else throw"Not supported by the OIDC server"},redirectUri:function(kn){return kn&&kn.redirectUri?kn.redirectUri:o.redirectUri?o.redirectUri:"http://localhost"}};throw"invalid adapter type: "+Ft}var cn=function(){if(!(this instanceof cn))return new cn;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var Ft=this;function pn(){for(var gn=new Date().getTime(),Tn=0;Tn<localStorage.length;Tn++){var In=localStorage.key(Tn);if(In&&In.indexOf("kc-callback-")==0){var kn=localStorage.getItem(In);if(kn)try{var Nn=JSON.parse(kn).expires;(!Nn||Nn<gn)&&localStorage.removeItem(In)}catch{localStorage.removeItem(In)}}}}Ft.get=function(gn){if(gn){var Tn="kc-callback-"+gn,In=localStorage.getItem(Tn);return In&&(localStorage.removeItem(Tn),In=JSON.parse(In)),pn(),In}},Ft.add=function(gn){pn();var Tn="kc-callback-"+gn.state;gn.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(Tn,JSON.stringify(gn))}},un=function(){if(!(this instanceof un))return new un;var Ft=this;Ft.get=function(In){if(In){var kn=gn("kc-callback-"+In);if(Tn("kc-callback-"+In,"",pn(-100)),kn)return JSON.parse(kn)}},Ft.add=function(In){Tn("kc-callback-"+In.state,JSON.stringify(In),pn(60))},Ft.removeItem=function(In){Tn(In,"",pn(-100))};var pn=function(In){var kn=new Date;return kn.setTime(kn.getTime()+In*60*1e3),kn},gn=function(In){for(var kn=In+"=",Nn=document.cookie.split(";"),hn=0;hn<Nn.length;hn++){for(var Sn=Nn[hn];Sn.charAt(0)==" ";)Sn=Sn.substring(1);if(Sn.indexOf(kn)==0)return Sn.substring(kn.length,Sn.length)}return""},Tn=function(In,kn,Nn){var hn=In+"="+kn+"; expires="+Nn.toUTCString()+"; ";document.cookie=hn}};function fn(){try{return new cn}catch{}return new un}function vn(Ft){return function(){o.enableLogging&&Ft.apply(console,Array.prototype.slice.call(arguments))}}}function loginKeyCloakJS(){return new Promise((a,o)=>{const _e=new Keycloak({url:"https://idp.apizee.com/auth",realm:"APIZEE-POC-DGPN",clientId:"visio-assisted"});_e.init({onLoad:"login-required",checkLoginIframe:!1}).then(tt=>{tt?(console.log("Keycloak authenticated"),a(_e)):console.log("Keycloak NOT authenticated...")}).catch(tt=>{console.error("Authenticated Failed",tt),o(tt)})})}const DEBUG={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0},INFO={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0},WARN={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0},ERROR={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1};function setLogLevel(a){switch(a){case"debug":globalThis.logLevel=DEBUG;break;case"info":globalThis.logLevel=INFO;break;case"warn":globalThis.logLevel=WARN;break;case"error":globalThis.logLevel=ERROR;break;default:globalThis.logLevel=INFO}}function isInstanceOfTakeSnapshot(a){return typeof a!="object"?!1:"takeSnapshot"in a}function isInstanceOfSwitchFacingMode(a){return typeof a!="object"?!1:"switchFacingMode"in a}function isInstanceOfFileShared(a){return typeof a!="object"?!1:"fileShared"in a}function isInstanceOfHangup(a){return typeof a!="object"?!1:"hangUp"in a}const COMPONENT_NAME="App";function App(a){var Pn,Vn,ir,Mn;const o=useThemeProps({props:a,name:COMPONENT_NAME}),{optInCGUPrefixText:_e="I agree to the ",optInCGULinkText:tt="General Terms of Sale",optInCGUAriaLabel:ct="accept-terms-conditions",optInPrivacyPrefixText:gt="I agree to the ",optInPrivacyLinkText:rt="Privacy Policy",optInPrivacyAriaLabel:at="accept-privacy-policy",optInButtonText:s="Confirm",hangedUpText:et="The agent hanged up. Bye!"}=o,nt=useParams(),[ot]=useSearchParams(),ht=reactExports.useMemo(()=>ot.get("lL")??globalThis.logLevel.level,[ot]);reactExports.useEffect(()=>{setLogLevel(ht),M(ht),ie(ht)},[ht]);const dt=reactExports.useMemo(()=>ot.get("lRAppID"),[ot]);reactExports.useEffect(()=>{dt&&dt!==""&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket init`,dt),LogRocket.init(dt))},[dt]);const pt=reactExports.useMemo(()=>ot.get("iU")??"https://is.apizee.com/invitations",[ot]),[lt,mt]=reactExports.useState(void 0),[st,ut]=reactExports.useState(!1),[ft,yt]=reactExports.useState(void 0),[vt,St]=reactExports.useState(),[xt,Ut]=reactExports.useState(void 0),[Tt,kt]=reactExports.useState(void 0),[Dt,Vt]=reactExports.useState(0),Ot=()=>{Vt($n=>$n+1)},Lt=()=>{Vt($n=>$n-1)},Gt=reactExports.useMemo(()=>Dt>=1,[Dt]),{value:tn,toggle:zt}=N(!1),[cn,un]=reactExports.useState(),[fn,vn]=reactExports.useState(!1),Ft=reactExports.useMemo(()=>lt?{apiKey:lt.apiKey}:void 0,[lt]),pn=reactExports.useMemo(()=>lt?{cloudUrl:lt.cloudUrl?lt.cloudUrl:"https://cloud.apirtc.com",groups:[`${lt.conversation.name}-guests`],userData:new apiRTC_minExports.UserData({firstName:lt.user.firstName,lastName:lt.user.lastName})}:void 0,[lt]),{session:gn,disconnect:Tn}=D(Ft,pn),{userMediaDevices:In,selectedAudioIn:kn,selectedAudioInId:Nn,setSelectedAudioIn:hn,selectedVideoIn:Sn,selectedVideoInId:Rn,setSelectedVideoIn:wn}=W(gn,isMobile_1?void 0:"apirtc-web-guest"),xn=reactExports.useMemo(()=>lt?lt.streams.find($n=>$n.type==="user-media"):void 0,[lt]),Xn=reactExports.useMemo(()=>!isMobile_1&&lt?lt.streams.find($n=>$n.type==="display-media"):void 0,[lt]);reactExports.useEffect(()=>{gn&&lt&&gn.getUserAgent().enableCallStatsMonitoring(lt.callStatsMonitoringInterval!==void 0,{interval:lt.callStatsMonitoringInterval})},[gn,lt]),reactExports.useEffect(()=>{lt&&lt.logo&&setFavIcon(lt.logo.url)},[lt]),reactExports.useEffect(()=>{var $n,Kt;if(xn){const At=($n=xn.constraints)==null?void 0:$n.audio,it=(Kt=xn.constraints)==null?void 0:Kt.video;Ut(!!At),kt(!!it),it instanceof Object&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useEffect invitationData has video constraints`,it),it.facingMode&&St(it.facingMode))}},[xn]);const Ln=reactExports.useMemo(()=>{const $n={...xn==null?void 0:xn.constraints};if($n!=null&&$n.audio&&(xt===void 0||xt)){const Kt=$n.audio instanceof Object?{...$n.audio}:{};Nn&&(Kt.deviceId=Nn),$n.audio=Kt}else $n.audio=!1;if($n!=null&&$n.video&&(Tt===void 0||Tt)){const Kt=$n.video instanceof Object?{...$n.video}:{};isMobile_1&&vt?(Kt.facingMode=vt,delete Kt.deviceId):Rn&&(Kt.deviceId=Rn,delete Kt.facingMode),$n.video=Kt}else $n.video=!1;return globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useMemo new_constraints`,$n),{constraints:$n}},[xn,Nn,Rn,vt,xt,Tt]),{stream:Un,grabbing:rr,error:tr}=b(Gt&&xn?gn:void 0,Ln),[Qn,jn]=reactExports.useState(),{conversation:Bn}=u(gn,lt?lt.conversation.name:void 0,lt?lt.conversation.getOrCreateOptions:void 0,!0,lt?lt.conversation.joinOptions:void 0),an=reactExports.useMemo(()=>[...Un&&tn?[{stream:Un,options:xn==null?void 0:xn.publishOptions}]:[],...Qn?[{stream:Qn}]:[]],[tn,Un,xn,Qn]),{publishedStreams:zn,subscribedStreams:Kn}=R(Bn,an),An=reactExports.useCallback($n=>{Bn&&Bn.sendData($n).then(()=>{globalThis.logLevel.isDebugEnabled&&console.log(`${COMPONENT_NAME}|conversation sendData`,$n)}).catch(Kt=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation sendData error`,Kt)})},[Bn]),_n=async($n,Kt)=>fetch(`${pt}/${$n}`,{method:"GET",headers:{Authorization:`Bearer ${Kt}`,"Content-Type":"application/json"}}).then(At=>At.status!==200?null:At.json()).catch(At=>{console.error(`${COMPONENT_NAME}|getInvitationData`,At)});reactExports.useEffect(()=>{const $n=Kt=>{mt(void 0)};return window.addEventListener("beforeunload",$n),()=>{window.removeEventListener("beforeunload",$n)}},[]),reactExports.useEffect(()=>{const $n=ot.get("i");if($n)try{const Kt=JSON.parse(base64Exports.decode($n));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify(Kt)),mt(Kt)}catch(Kt){if(Kt instanceof SyntaxError){_n($n).then(At=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME}|getInvitationData`,$n,At),mt(At.data)});return}else console.error(`${COMPONENT_NAME}|parsing i search parameter error`,Kt),ut(!0)}},[ot]),reactExports.useEffect(()=>{if(nt.invitationData)try{const $n=JSON.parse(base64Exports.decode(nt.invitationData));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify($n)),mt($n)}catch($n){if($n instanceof SyntaxError){const Kt=nt.invitationData;loginKeyCloakJS().then(At=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|keycloak.token`,At.token),_n(Kt).then(it=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|getInvitationData`,Kt,it),mt(it)})}).catch(At=>{console.error(`${COMPONENT_NAME}|loginKeyCloakJS error`,At)})}}},[nt.invitationData]),reactExports.useEffect(()=>{lt&&gn&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket identify`,lt.conversation.name,gn.getId()),LogRocket.identify(`${lt.conversation.name}-${gn.getId()}`))},[lt,gn]),reactExports.useEffect(()=>{if(gn){const $n=gn.getUserAgent(),Kt=new uaParserExports.UAParser;globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|UAParser`,Kt.getResult());const At=$n.getUserData();At.setToSession(),At.setProp("systemInfo",JSON.stringify(Kt.getResult())),$n.setUserData(At)}},[gn]),reactExports.useEffect(()=>{if(gn&&Un){const $n=Kt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|onContactData`,Kt);const At=Kt.sender,it=Kt.content;isInstanceOfTakeSnapshot(it)?Un.takeSnapshot(it.takeSnapshot).then(Rt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|takeSnapshot of`,Un,Rt),At.sendFile({name:`snapshot_${new Date().toISOString()}.png`,type:"image/png"},Rt).on("statusChange",wt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|statusChange`,wt)})}).catch(Rt=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|takeSnapshot error`,Rt)}):isInstanceOfSwitchFacingMode(it)&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|SwitchFacingMode`),St(Rt=>Rt==="user"?"environment":"user"))};return gn.on("contactData",$n),()=>{gn.removeListener("contactData",$n)}}},[gn,Un]),reactExports.useEffect(()=>{if(Bn){const $n=Kt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|Conversation onData`,Kt);const At=Kt.content;isInstanceOfFileShared(At)?(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|fileShared`,At),fetch(At.fileShared.link,{method:"get",mode:"cors",headers:new Headers({Authorization:`Bearer ${At.fileShared.jwt}`})}).then(it=>it.blob()).then(it=>{const Rt=window.URL.createObjectURL(it);un(Rt)}).catch(it=>{console.error(`${COMPONENT_NAME}|fetch error`,At.fileShared.link,it)})):isInstanceOfHangup(At)&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|received Hangup, leaving conversation`,At),Bn.leave().then().catch(it=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation leave error`,it)}).finally(()=>{Tn()}),vn(!0))};return Bn.on("data",$n),()=>{Bn.removeListener("data",$n)}}},[Bn,Tn]),reactExports.useEffect(()=>{if(Qn)return Qn.on("stopped",()=>{globalThis.logLevel.isInfoEnabled&&console.log(`${COMPONENT_NAME}|The user has ended sharing the screen`),jn(void 0)}),()=>{Qn.release()}},[Qn]),reactExports.useEffect(()=>{Gt&&An({type:"timeline-event",event:"opt-in-accepted"})},[An,Gt]),reactExports.useEffect(()=>{Un&&An({type:"timeline-event",event:"camera-stream-grabbed"})},[An,Un]),reactExports.useEffect(()=>{tn&&An({type:"timeline-event",event:"enter-room"})},[An,tn]);const On=[{id:"CGU",labels:{aria:ct,prefix:_e,link:tt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/b87662d7-3e82-4519-a4db-9fb6ba67b5cc/Apizee-ConditionsGeneralesUtilisation.pdf":"https://cloud.apizee.com/attachments/cb744e03-182b-453e-bbdf-0d89cf42e182/Apizee-TermsOfUse.pdf"},{id:"Privacy",labels:{aria:at,prefix:gt,link:rt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/f87493b0-483e-4723-a3ee-02d59a501b1c/Apizee-PolitiqueConfidentialite.pdf":"https://cloud.apizee.com/attachments/ae61f778-16d1-4dd4-baa1-cd1ba568a0d6/Apizee-PrivacyPolicy.pdf"}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!gn&&!st&&jsxRuntimeExports.jsx(Box$1,{display:"flex",alignItems:"center",justifyContent:"center",sx:{mt:5},children:jsxRuntimeExports.jsx("img",{height:"320px",width:"320px",src:((Pn=lt==null?void 0:lt.logo)==null?void 0:Pn.url)||APZ_LOGO,alt:((Vn=lt==null?void 0:lt.logo)==null?void 0:Vn.alt)||"Apizee"})}),st&&jsxRuntimeExports.jsx(ErrorPage,{errorType:ft}),gn&&!st&&!tn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs(TextStepper,{activeStep:Dt,header:jsxRuntimeExports.jsx("img",{src:((ir=lt==null?void 0:lt.logo)==null?void 0:ir.url)||APZ_LOGO,alt:((Mn=lt==null?void 0:lt.logo)==null?void 0:Mn.alt)||"Apizee",height:24}),children:[jsxRuntimeExports.jsx(Step$1,{children:jsxRuntimeExports.jsx(OptInList,{optIns:On,labels:{submit:s},onSubmit:Ot})},"legal"),jsxRuntimeExports.jsx(Step$1,{children:jsxRuntimeExports.jsx(Settings,{userMediaStreamRequest:xn,displayMediaStreamRequest:Xn,userMediaDevices:In,selectedAudioIn:kn,setSelectedAudioIn:hn,selectedVideoIn:Sn,setSelectedVideoIn:wn,createStreamOptions:Ln,grabbing:rr,localStream:Un,cameraError:tr,streamAudioEnabled:xt,setStreamAudioEnabled:Ut,streamVideoEnabled:Tt,setStreamVideoEnabled:kt,screenShareStream:Qn,setScreenShareStream:jn,handleBack:Lt,toggleReady:zt})},"device-selection")]})})})})}),Bn&&tn&&jsxRuntimeExports.jsx(Room,{conversation:Bn,facingMode:vt,localStream:Un,publishedStreams:zn,subscribedStreams:Kn}),cn&&jsxRuntimeExports.jsx("img",{src:cn,alt:"sharedImg"}),fn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"md",children:jsxRuntimeExports.jsx(Alert$1,{severity:"info",children:et})})]})}const index="",frFR={components:{App:{defaultProps:{acceptTitleText:"Documents lgaux",optInCGUPrefixText:"J'accepte les ",optInCGULinkText:"Conditions gnrales d'utilisation",optInCGUAriaLabel:"conditions-gnrales",optInPrivacyPrefixText:"J'accepte la ",optInPrivacyLinkText:"Politique de confidentialit",optInPrivacyAriaLabel:"politique-confidentialit",optInButtonText:"Confirmer",hangedUpText:"L'agent a raccroch."}},Settings:{defaultProps:{cameraErrorText:"Vrifiez si votre priphrique n'est pas dj utilis.",backButtonText:"Retour",readyButtonText:"Entrer en communication",selectAtLeastOneMediaText:"Veuillez slectionner au moins un mdia.",selectDeviceHelperText:"Avant d'entrer en communication, vrifiez ce que vous partagerez avec votre interlocuteur.",shareScreenText:"Cliquez ici pour activer le partage d'cran"}}}};setLogLevel("warn");M(globalThis.logLevel.level);ie(globalThis.logLevel.level);function getLangFiles(){switch(navigator.language){case"fr":case"fr-FR":return[frFR,ee];default:return[]}}document.documentElement.setAttribute("lang",navigator.language.slice(0,2));const setFavIcon=a=>{const o=document.querySelector("link[rel='icon']");o&&(o.href=a)},theme=createTheme({palette:{mode:"light",primary:{main:"#F76B40",light:"#ba3108",dark:"#f88562"},secondary:{main:"#5b5baf",light:"#8eabc7",dark:"#2e455c"},success:{main:"#0F5712",light:"#17821A",dark:"#0A340B"},info:{main:"#1355AE"},neutral:{main:"rgba(0, 0, 0, 0.23)"}},typography:{button:{textTransform:"none"}},...ROOM_THEME_OPTIONS},...getLangFiles()),container=document.getElementById("root");container&&createRoot(container).render(jsxRuntimeExports.jsx(ThemeProvider,{theme,children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/web-guest",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(Route,{path:"/:invitationData",element:jsxRuntimeExports.jsx(App,{})})]})})}));
