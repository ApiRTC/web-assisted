function _mergeNamespaces(a,o){for(var _e=0;_e<o.length;_e++){const tt=o[_e];if(typeof tt!="string"&&!Array.isArray(tt)){for(const ct in tt)if(ct!=="default"&&!(ct in a)){const vt=Object.getOwnPropertyDescriptor(tt,ct);vt&&Object.defineProperty(a,ct,vt.get?vt:{enumerable:!0,get:()=>tt[ct]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))tt(ct);new MutationObserver(ct=>{for(const vt of ct)if(vt.type==="childList")for(const nt of vt.addedNodes)nt.tagName==="LINK"&&nt.rel==="modulepreload"&&tt(nt)}).observe(document,{childList:!0,subtree:!0});function _e(ct){const vt={};return ct.integrity&&(vt.integrity=ct.integrity),ct.referrerPolicy&&(vt.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?vt.credentials="include":ct.crossOrigin==="anonymous"?vt.credentials="omit":vt.credentials="same-origin",vt}function tt(ct){if(ct.ep)return;ct.ep=!0;const vt=_e(ct);fetch(ct.href,vt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$4(a){return a===null||typeof a!="object"?null:(a=z$3&&a[z$3]||a["@@iterator"],typeof a=="function"?a:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,o){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,o,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$2(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$3=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(a,o,_e){var tt,ct={},vt=null,nt=null;if(o!=null)for(tt in o.ref!==void 0&&(nt=o.ref),o.key!==void 0&&(vt=""+o.key),o)J$1.call(o,tt)&&!L$1.hasOwnProperty(tt)&&(ct[tt]=o[tt]);var it=arguments.length-2;if(it===1)ct.children=_e;else if(1<it){for(var s=Array(it),et=0;et<it;et++)s[et]=arguments[et+2];ct.children=s}if(a&&a.defaultProps)for(tt in it=a.defaultProps,it)ct[tt]===void 0&&(ct[tt]=it[tt]);return{$$typeof:l$3,type:a,key:vt,ref:nt,props:ct,_owner:K$2.current}}function N$3(a,o){return{$$typeof:l$3,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}}function O$2(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$3}function escape$1(a){var o={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(_e){return o[_e]})}var P$1=/\/+/g;function Q$2(a,o){return typeof a=="object"&&a!==null&&a.key!=null?escape$1(""+a.key):o.toString(36)}function R$1(a,o,_e,tt,ct){var vt=typeof a;(vt==="undefined"||vt==="boolean")&&(a=null);var nt=!1;if(a===null)nt=!0;else switch(vt){case"string":case"number":nt=!0;break;case"object":switch(a.$$typeof){case l$3:case n$3:nt=!0}}if(nt)return nt=a,ct=ct(nt),a=tt===""?"."+Q$2(nt,0):tt,I$3(ct)?(_e="",a!=null&&(_e=a.replace(P$1,"$&/")+"/"),R$1(ct,o,_e,"",function(et){return et})):ct!=null&&(O$2(ct)&&(ct=N$3(ct,_e+(!ct.key||nt&&nt.key===ct.key?"":(""+ct.key).replace(P$1,"$&/")+"/")+a)),o.push(ct)),1;if(nt=0,tt=tt===""?".":tt+":",I$3(a))for(var it=0;it<a.length;it++){vt=a[it];var s=tt+Q$2(vt,it);nt+=R$1(vt,o,_e,s,ct)}else if(s=A$4(a),typeof s=="function")for(a=s.call(a),it=0;!(vt=a.next()).done;)vt=vt.value,s=tt+Q$2(vt,it++),nt+=R$1(vt,o,_e,s,ct);else if(vt==="object")throw o=String(a),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return nt}function S$2(a,o,_e){if(a==null)return a;var tt=[],ct=0;return R$1(a,tt,"","",function(vt){return o.call(_e,vt,ct++)}),tt}function T$2(a){if(a._status===-1){var o=a._result;o=o(),o.then(function(_e){(a._status===0||a._status===-1)&&(a._status=1,a._result=_e)},function(_e){(a._status===0||a._status===-1)&&(a._status=2,a._result=_e)}),a._status===-1&&(a._status=0,a._result=o)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$2={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(a,o,_e){S$2(a,function(){o.apply(this,arguments)},_e)},count:function(a){var o=0;return S$2(a,function(){o++}),o},toArray:function(a){return S$2(a,function(o){return o})||[]},only:function(a){if(!O$2(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(a,o,_e){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var tt=C$2({},a.props),ct=a.key,vt=a.ref,nt=a._owner;if(o!=null){if(o.ref!==void 0&&(vt=o.ref,nt=K$2.current),o.key!==void 0&&(ct=""+o.key),a.type&&a.type.defaultProps)var it=a.type.defaultProps;for(s in o)J$1.call(o,s)&&!L$1.hasOwnProperty(s)&&(tt[s]=o[s]===void 0&&it!==void 0?it[s]:o[s])}var s=arguments.length-2;if(s===1)tt.children=_e;else if(1<s){it=Array(s);for(var et=0;et<s;et++)it[et]=arguments[et+2];tt.children=it}return{$$typeof:l$3,type:a.type,key:ct,ref:vt,props:tt,_owner:nt}};react_production_min.createContext=function(a){return a={$$typeof:u$2,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$2,_context:a},a.Consumer=a};react_production_min.createElement=M$2;react_production_min.createFactory=function(a){var o=M$2.bind(null,a);return o.type=a,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$3,render:a}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(a){return{$$typeof:y$2,_payload:{_status:-1,_result:a},_init:T$2}};react_production_min.memo=function(a,o){return{$$typeof:x$2,type:a,compare:o===void 0?null:o}};react_production_min.startTransition=function(a){var o=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,o){return U$1.current.useCallback(a,o)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,o){return U$1.current.useEffect(a,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,o,_e){return U$1.current.useImperativeHandle(a,o,_e)};react_production_min.useInsertionEffect=function(a,o){return U$1.current.useInsertionEffect(a,o)};react_production_min.useLayoutEffect=function(a,o){return U$1.current.useLayoutEffect(a,o)};react_production_min.useMemo=function(a,o){return U$1.current.useMemo(a,o)};react_production_min.useReducer=function(a,o,_e){return U$1.current.useReducer(a,o,_e)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,o,_e){return U$1.current.useSyncExternalStore(a,o,_e)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$3(a,o,_e){var tt,ct={},vt=null,nt=null;_e!==void 0&&(vt=""+_e),o.key!==void 0&&(vt=""+o.key),o.ref!==void 0&&(nt=o.ref);for(tt in o)m$4.call(o,tt)&&!p$3.hasOwnProperty(tt)&&(ct[tt]=o[tt]);if(a&&a.defaultProps)for(tt in o=a.defaultProps,o)ct[tt]===void 0&&(ct[tt]=o[tt]);return{$$typeof:k$2,type:a,key:vt,ref:nt,props:ct,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function o(zt,cn){var vn=zt.length;zt.push(cn);e:for(;0<vn;){var Sn=vn-1>>>1,fn=zt[Sn];if(0<ct(fn,cn))zt[Sn]=cn,zt[vn]=fn,vn=Sn;else break e}}function _e(zt){return zt.length===0?null:zt[0]}function tt(zt){if(zt.length===0)return null;var cn=zt[0],vn=zt.pop();if(vn!==cn){zt[0]=vn;e:for(var Sn=0,fn=zt.length,mn=fn>>>1;Sn<mn;){var bn=2*(Sn+1)-1,un=zt[bn],Tn=bn+1,kn=zt[Tn];if(0>ct(un,vn))Tn<fn&&0>ct(kn,un)?(zt[Sn]=kn,zt[Tn]=vn,Sn=Tn):(zt[Sn]=un,zt[bn]=vn,Sn=bn);else if(Tn<fn&&0>ct(kn,vn))zt[Sn]=kn,zt[Tn]=vn,Sn=Tn;else break e}}return cn}function ct(zt,cn){var vn=zt.sortIndex-cn.sortIndex;return vn!==0?vn:zt.id-cn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var vt=performance;a.unstable_now=function(){return vt.now()}}else{var nt=Date,it=nt.now();a.unstable_now=function(){return nt.now()-it}}var s=[],et=[],rt=1,ot=null,gt=3,dt=!1,pt=!1,st=!1,ht=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(zt){for(var cn=_e(et);cn!==null;){if(cn.callback===null)tt(et);else if(cn.startTime<=zt)tt(et),cn.sortIndex=cn.expirationTime,o(s,cn);else break;cn=_e(et)}}function mt(zt){if(st=!1,ft(zt),!pt)if(_e(s)!==null)pt=!0,hn(yt);else{var cn=_e(et);cn!==null&&Xt(mt,cn.startTime-zt)}}function yt(zt,cn){pt=!1,st&&(st=!1,at(Pt),Pt=-1),dt=!0;var vn=gt;try{for(ft(cn),ot=_e(s);ot!==null&&(!(ot.expirationTime>cn)||zt&&!bt());){var Sn=ot.callback;if(typeof Sn=="function"){ot.callback=null,gt=ot.priorityLevel;var fn=Sn(ot.expirationTime<=cn);cn=a.unstable_now(),typeof fn=="function"?ot.callback=fn:ot===_e(s)&&tt(s),ft(cn)}else tt(s);ot=_e(s)}if(ot!==null)var mn=!0;else{var bn=_e(et);bn!==null&&Xt(mt,bn.startTime-cn),mn=!1}return mn}finally{ot=null,gt=vn,dt=!1}}var At=!1,wt=null,Pt=-1,Rt=5,kt=-1;function bt(){return!(a.unstable_now()-kt<Rt)}function Nt(){if(wt!==null){var zt=a.unstable_now();kt=zt;var cn=!0;try{cn=wt(!0,zt)}finally{cn?Ft():(At=!1,wt=null)}}else At=!1}var Ft;if(typeof ut=="function")Ft=function(){ut(Nt)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,Jt=Ut.port2;Ut.port1.onmessage=Nt,Ft=function(){Jt.postMessage(null)}}else Ft=function(){ht(Nt,0)};function hn(zt){wt=zt,At||(At=!0,Ft())}function Xt(zt,cn){Pt=ht(function(){zt(a.unstable_now())},cn)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(zt){zt.callback=null},a.unstable_continueExecution=function(){pt||dt||(pt=!0,hn(yt))},a.unstable_forceFrameRate=function(zt){0>zt||125<zt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<zt?Math.floor(1e3/zt):5},a.unstable_getCurrentPriorityLevel=function(){return gt},a.unstable_getFirstCallbackNode=function(){return _e(s)},a.unstable_next=function(zt){switch(gt){case 1:case 2:case 3:var cn=3;break;default:cn=gt}var vn=gt;gt=cn;try{return zt()}finally{gt=vn}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(zt,cn){switch(zt){case 1:case 2:case 3:case 4:case 5:break;default:zt=3}var vn=gt;gt=zt;try{return cn()}finally{gt=vn}},a.unstable_scheduleCallback=function(zt,cn,vn){var Sn=a.unstable_now();switch(typeof vn=="object"&&vn!==null?(vn=vn.delay,vn=typeof vn=="number"&&0<vn?Sn+vn:Sn):vn=Sn,zt){case 1:var fn=-1;break;case 2:fn=250;break;case 5:fn=1073741823;break;case 4:fn=1e4;break;default:fn=5e3}return fn=vn+fn,zt={id:rt++,callback:cn,priorityLevel:zt,startTime:vn,expirationTime:fn,sortIndex:-1},vn>Sn?(zt.sortIndex=vn,o(et,zt),_e(s)===null&&zt===_e(et)&&(st?(at(Pt),Pt=-1):st=!0,Xt(mt,vn-Sn))):(zt.sortIndex=fn,o(s,zt),pt||dt||(pt=!0,hn(yt))),zt},a.unstable_shouldYield=bt,a.unstable_wrapCallback=function(zt){var cn=gt;return function(){var vn=gt;gt=cn;try{return zt.apply(this,arguments)}finally{gt=vn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,_e=1;_e<arguments.length;_e++)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,o){ha(a,o),ha(a+"Capture",o)}function ha(a,o){for(ea[a]=o,a=0;a<o.length;a++)da.add(o[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,o,_e,tt){if(_e!==null&&_e.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return tt?!1:_e!==null?!_e.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,o,_e,tt){if(o===null||typeof o>"u"||pa(a,o,_e,tt))return!0;if(tt)return!1;if(_e!==null)switch(_e.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$2(a,o,_e,tt,ct,vt,nt){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=tt,this.attributeNamespace=ct,this.mustUseProperty=_e,this.propertyName=a,this.type=o,this.sanitizeURL=vt,this.removeEmptyString=nt}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z$2[a]=new v$2(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var o=a[0];z$2[o]=new v$2(o,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z$2[a]=new v$2(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z$2[a]=new v$2(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z$2[a]=new v$2(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z$2[a]=new v$2(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z$2[a]=new v$2(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,o,_e,tt){var ct=z$2.hasOwnProperty(o)?z$2[o]:null;(ct!==null?ct.type!==0:tt||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,_e,ct,tt)&&(_e=null),tt||ct===null?oa(o)&&(_e===null?a.removeAttribute(o):a.setAttribute(o,""+_e)):ct.mustUseProperty?a[ct.propertyName]=_e===null?ct.type===3?!1:"":_e:(o=ct.attributeName,tt=ct.attributeNamespace,_e===null?a.removeAttribute(o):(ct=ct.type,_e=ct===3||ct===4&&_e===!0?"":""+_e,tt?a.setAttributeNS(tt,o,_e):a.setAttribute(o,_e))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A$3=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(_e){var o=_e.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+a}var Na=!1;function Oa(a,o){if(!a||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(et){var tt=et}Reflect.construct(a,[],o)}else{try{o.call()}catch(et){tt=et}a.call(o.prototype)}else{try{throw Error()}catch(et){tt=et}a()}}catch(et){if(et&&tt&&typeof et.stack=="string"){for(var ct=et.stack.split(`
`),vt=tt.stack.split(`
`),nt=ct.length-1,it=vt.length-1;1<=nt&&0<=it&&ct[nt]!==vt[it];)it--;for(;1<=nt&&0<=it;nt--,it--)if(ct[nt]!==vt[it]){if(nt!==1||it!==1)do if(nt--,it--,0>it||ct[nt]!==vt[it]){var s=`
`+ct[nt].replace(" at new "," at ");return a.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",a.displayName)),s}while(1<=nt&&0<=it);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return o=a.displayName||null,o!==null?o:Qa(a.type)||"Memo";case Ha:o=a._payload,a=a._init;try{return Qa(a(o))}catch{}}return null}function Ra(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=o.render,a=a.displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(a){var o=Ta(a)?"checked":"value",_e=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),tt=""+a[o];if(!a.hasOwnProperty(o)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var ct=_e.get,vt=_e.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return ct.call(this)},set:function(nt){tt=""+nt,vt.call(this,nt)}}),Object.defineProperty(a,o,{enumerable:_e.enumerable}),{getValue:function(){return tt},setValue:function(nt){tt=""+nt},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var _e=o.getValue(),tt="";return a&&(tt=Ta(a)?a.checked?"true":"false":a.value),a=tt,a!==_e?(o.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,o){var _e=o.checked;return A$3({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??a._wrapperState.initialChecked})}function Za(a,o){var _e=o.defaultValue==null?"":o.defaultValue,tt=o.checked!=null?o.checked:o.defaultChecked;_e=Sa(o.value!=null?o.value:_e),a._wrapperState={initialChecked:tt,initialValue:_e,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(a,o){o=o.checked,o!=null&&ta(a,"checked",o,!1)}function bb(a,o){ab(a,o);var _e=Sa(o.value),tt=o.type;if(_e!=null)tt==="number"?(_e===0&&a.value===""||a.value!=_e)&&(a.value=""+_e):a.value!==""+_e&&(a.value=""+_e);else if(tt==="submit"||tt==="reset"){a.removeAttribute("value");return}o.hasOwnProperty("value")?cb(a,o.type,_e):o.hasOwnProperty("defaultValue")&&cb(a,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(a.defaultChecked=!!o.defaultChecked)}function db(a,o,_e){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var tt=o.type;if(!(tt!=="submit"&&tt!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+a._wrapperState.initialValue,_e||o===a.value||(a.value=o),a.defaultValue=o}_e=a.name,_e!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,_e!==""&&(a.name=_e)}function cb(a,o,_e){(o!=="number"||Xa(a.ownerDocument)!==a)&&(_e==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+_e&&(a.defaultValue=""+_e))}var eb=Array.isArray;function fb(a,o,_e,tt){if(a=a.options,o){o={};for(var ct=0;ct<_e.length;ct++)o["$"+_e[ct]]=!0;for(_e=0;_e<a.length;_e++)ct=o.hasOwnProperty("$"+a[_e].value),a[_e].selected!==ct&&(a[_e].selected=ct),ct&&tt&&(a[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),o=null,ct=0;ct<a.length;ct++){if(a[ct].value===_e){a[ct].selected=!0,tt&&(a[ct].defaultSelected=!0);return}o!==null||a[ct].disabled||(o=a[ct])}o!==null&&(o.selected=!0)}}function gb(a,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$3({},o,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,o){var _e=o.value;if(_e==null){if(_e=o.children,o=o.defaultValue,_e!=null){if(o!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}o=_e}o==null&&(o=""),_e=o}a._wrapperState={initialValue:Sa(_e)}}function ib(a,o){var _e=Sa(o.value),tt=Sa(o.defaultValue);_e!=null&&(_e=""+_e,_e!==a.value&&(a.value=_e),o.defaultValue==null&&a.defaultValue!==_e&&(a.defaultValue=_e)),tt!=null&&(a.defaultValue=""+tt)}function jb(a){var o=a.textContent;o===a._wrapperState.initialValue&&o!==""&&o!==null&&(a.value=o)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,o){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(o):a==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,_e,tt,ct){MSApp.execUnsafeLocalFunction(function(){return a(o,_e,tt,ct)})}:a}(function(a,o){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;o.firstChild;)a.appendChild(o.firstChild)}});function ob(a,o){if(o){var _e=a.firstChild;if(_e&&_e===a.lastChild&&_e.nodeType===3){_e.nodeValue=o;return}}a.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(o){o=o+a.charAt(0).toUpperCase()+a.substring(1),pb[o]=pb[a]})});function rb(a,o,_e){return o==null||typeof o=="boolean"||o===""?"":_e||typeof o!="number"||o===0||pb.hasOwnProperty(a)&&pb[a]?(""+o).trim():o+"px"}function sb(a,o){a=a.style;for(var _e in o)if(o.hasOwnProperty(_e)){var tt=_e.indexOf("--")===0,ct=rb(_e,o[_e],tt);_e==="float"&&(_e="cssFloat"),tt?a.setProperty(_e,ct):a[_e]=ct}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,o){if(o){if(tb[a]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$2(137,a));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$2(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$2(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$2(62))}}function vb(a,o){if(a.indexOf("-")===-1)return typeof o.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p$2(280));var o=a.stateNode;o&&(o=Db(o),yb(a.stateNode,a.type,o))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,o=Ab;if(Ab=zb=null,Bb(a),o)for(a=0;a<o.length;a++)Bb(o[a])}}function Gb(a,o){return a(o)}function Hb(){}var Ib=!1;function Jb(a,o,_e){if(Ib)return a(o,_e);Ib=!0;try{return Gb(a,o,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,o){var _e=a.stateNode;if(_e===null)return null;var tt=Db(_e);if(tt===null)return null;_e=tt[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(a=a.type,tt=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!tt;break e;default:a=!1}if(a)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,o,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,o,_e,tt,ct,vt,nt,it,s){var et=Array.prototype.slice.call(arguments,3);try{o.apply(_e,et)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,o,_e,tt,ct,vt,nt,it,s){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,o,_e,tt,ct,vt,nt,it,s){if(Tb.apply(this,arguments),Ob){if(Ob){var et=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=et)}}function Vb(a){var o=a,_e=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,o.flags&4098&&(_e=o.return),a=o.return;while(a)}return o.tag===3?_e:null}function Wb(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p$2(188))}function Yb(a){var o=a.alternate;if(!o){if(o=Vb(a),o===null)throw Error(p$2(188));return o!==a?null:a}for(var _e=a,tt=o;;){var ct=_e.return;if(ct===null)break;var vt=ct.alternate;if(vt===null){if(tt=ct.return,tt!==null){_e=tt;continue}break}if(ct.child===vt.child){for(vt=ct.child;vt;){if(vt===_e)return Xb(ct),a;if(vt===tt)return Xb(ct),o;vt=vt.sibling}throw Error(p$2(188))}if(_e.return!==tt.return)_e=ct,tt=vt;else{for(var nt=!1,it=ct.child;it;){if(it===_e){nt=!0,_e=ct,tt=vt;break}if(it===tt){nt=!0,tt=ct,_e=vt;break}it=it.sibling}if(!nt){for(it=vt.child;it;){if(it===_e){nt=!0,_e=vt,tt=ct;break}if(it===tt){nt=!0,tt=vt,_e=ct;break}it=it.sibling}if(!nt)throw Error(p$2(189))}}if(_e.alternate!==tt)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?a:o}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=$b(a);if(o!==null)return o;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,o){var _e=a.pendingLanes;if(_e===0)return 0;var tt=0,ct=a.suspendedLanes,vt=a.pingedLanes,nt=_e&268435455;if(nt!==0){var it=nt&~ct;it!==0?tt=tc(it):(vt&=nt,vt!==0&&(tt=tc(vt)))}else nt=_e&~ct,nt!==0?tt=tc(nt):vt!==0&&(tt=tc(vt));if(tt===0)return 0;if(o!==0&&o!==tt&&!(o&ct)&&(ct=tt&-tt,vt=o&-o,ct>=vt||ct===16&&(vt&4194240)!==0))return o;if(tt&4&&(tt|=_e&16),o=a.entangledLanes,o!==0)for(a=a.entanglements,o&=tt;0<o;)_e=31-oc(o),ct=1<<_e,tt|=a[_e],o&=~ct;return tt}function vc(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,o){for(var _e=a.suspendedLanes,tt=a.pingedLanes,ct=a.expirationTimes,vt=a.pendingLanes;0<vt;){var nt=31-oc(vt),it=1<<nt,s=ct[nt];s===-1?(!(it&_e)||it&tt)&&(ct[nt]=vc(it,o)):s<=o&&(a.expiredLanes|=it),vt&=~it}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var o=[],_e=0;31>_e;_e++)o.push(a);return o}function Ac(a,o,_e){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,o=31-oc(o),a[o]=_e}function Bc(a,o){var _e=a.pendingLanes&~o;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=o,a.mutableReadLanes&=o,a.entangledLanes&=o,o=a.entanglements;var tt=a.eventTimes;for(a=a.expirationTimes;0<_e;){var ct=31-oc(_e),vt=1<<ct;o[ct]=0,tt[ct]=-1,a[ct]=-1,_e&=~vt}}function Cc(a,o){var _e=a.entangledLanes|=o;for(a=a.entanglements;_e;){var tt=31-oc(_e),ct=1<<tt;ct&o|a[tt]&o&&(a[tt]|=o),_e&=~ct}}var C$1=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,o){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(a,o,_e,tt,ct,vt){return a===null||a.nativeEvent!==vt?(a={blockedOn:o,domEventName:_e,eventSystemFlags:tt,nativeEvent:vt,targetContainers:[ct]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),a):(a.eventSystemFlags|=tt,o=a.targetContainers,ct!==null&&o.indexOf(ct)===-1&&o.push(ct),a)}function Uc(a,o,_e,tt,ct){switch(o){case"focusin":return Lc=Tc(Lc,a,o,_e,tt,ct),!0;case"dragenter":return Mc=Tc(Mc,a,o,_e,tt,ct),!0;case"mouseover":return Nc=Tc(Nc,a,o,_e,tt,ct),!0;case"pointerover":var vt=ct.pointerId;return Oc.set(vt,Tc(Oc.get(vt)||null,a,o,_e,tt,ct)),!0;case"gotpointercapture":return vt=ct.pointerId,Pc.set(vt,Tc(Pc.get(vt)||null,a,o,_e,tt,ct)),!0}return!1}function Vc(a){var o=Wc(a.target);if(o!==null){var _e=Vb(o);if(_e!==null){if(o=_e.tag,o===13){if(o=Wb(_e),o!==null){a.blockedOn=o,Ic(a.priority,function(){Gc(_e)});return}}else if(o===3&&_e.stateNode.current.memoizedState.isDehydrated){a.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var _e=Yc(a.domEventName,a.eventSystemFlags,o[0],a.nativeEvent);if(_e===null){_e=a.nativeEvent;var tt=new _e.constructor(_e.type,_e);wb=tt,_e.target.dispatchEvent(tt),wb=null}else return o=Cb(_e),o!==null&&Fc(o),a.blockedOn=_e,!1;o.shift()}return!0}function Zc(a,o,_e){Xc(a)&&_e.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,o){a.blockedOn===o&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function o(ct){return ad(ct,a)}if(0<Kc.length){ad(Kc[0],a);for(var _e=1;_e<Kc.length;_e++){var tt=Kc[_e];tt.blockedOn===a&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(o),Pc.forEach(o),_e=0;_e<Qc.length;_e++)tt=Qc[_e],tt.blockedOn===a&&(tt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(a,o,_e,tt){var ct=C$1,vt=cd.transition;cd.transition=null;try{C$1=1,fd(a,o,_e,tt)}finally{C$1=ct,cd.transition=vt}}function gd(a,o,_e,tt){var ct=C$1,vt=cd.transition;cd.transition=null;try{C$1=4,fd(a,o,_e,tt)}finally{C$1=ct,cd.transition=vt}}function fd(a,o,_e,tt){if(dd){var ct=Yc(a,o,_e,tt);if(ct===null)hd(a,o,tt,id,_e),Sc(a,tt);else if(Uc(ct,a,o,_e,tt))tt.stopPropagation();else if(Sc(a,tt),o&4&&-1<Rc.indexOf(a)){for(;ct!==null;){var vt=Cb(ct);if(vt!==null&&Ec(vt),vt=Yc(a,o,_e,tt),vt===null&&hd(a,o,tt,id,_e),vt===ct)break;ct=vt}ct!==null&&tt.stopPropagation()}else hd(a,o,tt,null,_e)}}var id=null;function Yc(a,o,_e,tt){if(id=null,a=xb(tt),a=Wc(a),a!==null)if(o=Vb(a),o===null)a=null;else if(_e=o.tag,_e===13){if(a=Wb(o),a!==null)return a;a=null}else if(_e===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,o=ld,_e=o.length,tt,ct="value"in kd?kd.value:kd.textContent,vt=ct.length;for(a=0;a<_e&&o[a]===ct[a];a++);var nt=_e-a;for(tt=1;tt<=nt&&o[_e-tt]===ct[vt-tt];tt++);return md=ct.slice(a,1<tt?1-tt:void 0)}function od(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function o(_e,tt,ct,vt,nt){this._reactName=_e,this._targetInst=ct,this.type=tt,this.nativeEvent=vt,this.target=nt,this.currentTarget=null;for(var it in a)a.hasOwnProperty(it)&&(_e=a[it],this[it]=_e?_e(vt):vt[it]);return this.isDefaultPrevented=(vt.defaultPrevented!=null?vt.defaultPrevented:vt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Od[a])?!!o[a]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(a){if(a.key){var o=Md[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge(a,o){switch(a){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,o){switch(a){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee$1);case"textInput":return a=o.data,a===ee$1&&fe?null:a;default:return null}}function ke(a,o){if(ie)return a==="compositionend"||!ae&&ge(a,o)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!le[a.type]:o==="textarea"}function ne(a,o,_e,tt){Eb(tt),o=oe(o,"onChange"),0<o.length&&(_e=new td("onChange","change",null,_e,tt),a.push({event:_e,listeners:o}))}var pe=null,qe=null;function re(a){se(a,0)}function te$1(a){var o=ue(a);if(Wa(o))return a}function ve(a,o){if(a==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var o=[];ne(o,qe,a,xb(a)),Jb(re,o)}}function Ce(a,o,_e){a==="focusin"?(Ae(),pe=o,qe=_e,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee(a,o){if(a==="click")return te$1(o)}function Fe(a,o){if(a==="input"||a==="change")return te$1(o)}function Ge(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,o){if(He(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var _e=Object.keys(a),tt=Object.keys(o);if(_e.length!==tt.length)return!1;for(tt=0;tt<_e.length;tt++){var ct=_e[tt];if(!ja.call(o,ct)||!He(a[ct],o[ct]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,o){var _e=Je(a);a=0;for(var tt;_e;){if(_e.nodeType===3){if(tt=a+_e.textContent.length,a<=o&&tt>=o)return{node:_e,offset:o-a};a=tt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Le(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var a=window,o=Xa();o instanceof a.HTMLIFrameElement;){try{var _e=typeof o.contentWindow.location.href=="string"}catch{_e=!1}if(_e)a=o.contentWindow;else break;o=Xa(a.document)}return o}function Ne(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function Oe(a){var o=Me(),_e=a.focusedElem,tt=a.selectionRange;if(o!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(tt!==null&&Ne(_e)){if(o=tt.start,a=tt.end,a===void 0&&(a=o),"selectionStart"in _e)_e.selectionStart=o,_e.selectionEnd=Math.min(a,_e.value.length);else if(a=(o=_e.ownerDocument||document)&&o.defaultView||window,a.getSelection){a=a.getSelection();var ct=_e.textContent.length,vt=Math.min(tt.start,ct);tt=tt.end===void 0?vt:Math.min(tt.end,ct),!a.extend&&vt>tt&&(ct=tt,tt=vt,vt=ct),ct=Ke(_e,vt);var nt=Ke(_e,tt);ct&&nt&&(a.rangeCount!==1||a.anchorNode!==ct.node||a.anchorOffset!==ct.offset||a.focusNode!==nt.node||a.focusOffset!==nt.offset)&&(o=o.createRange(),o.setStart(ct.node,ct.offset),a.removeAllRanges(),vt>tt?(a.addRange(o),a.extend(nt.node,nt.offset)):(o.setEnd(nt.node,nt.offset),a.addRange(o)))}}for(o=[],a=_e;a=a.parentNode;)a.nodeType===1&&o.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<o.length;_e++)a=o[_e],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,o,_e){var tt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(o=new td("onSelect","select",null,o,_e),a.push({event:o,listeners:tt}),o.target=Qe)))}function Ve(a,o){var _e={};return _e[a.toLowerCase()]=o.toLowerCase(),_e["Webkit"+a]="webkit"+o,_e["Moz"+a]="moz"+o,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var o=We[a],_e;for(_e in o)if(o.hasOwnProperty(_e)&&_e in Ye)return Xe[a]=o[_e];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,o){df.set(a,o),fa(o,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,o,_e){var tt=a.type||"unknown-event";a.currentTarget=_e,Ub(tt,o,void 0,a),a.currentTarget=null}function se(a,o){o=(o&4)!==0;for(var _e=0;_e<a.length;_e++){var tt=a[_e],ct=tt.event;tt=tt.listeners;e:{var vt=void 0;if(o)for(var nt=tt.length-1;0<=nt;nt--){var it=tt[nt],s=it.instance,et=it.currentTarget;if(it=it.listener,s!==vt&&ct.isPropagationStopped())break e;nf(ct,it,et),vt=s}else for(nt=0;nt<tt.length;nt++){if(it=tt[nt],s=it.instance,et=it.currentTarget,it=it.listener,s!==vt&&ct.isPropagationStopped())break e;nf(ct,it,et),vt=s}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,o){var _e=o[of];_e===void 0&&(_e=o[of]=new Set);var tt=a+"__bubble";_e.has(tt)||(pf(o,a,2,!1),_e.add(tt))}function qf(a,o,_e){var tt=0;o&&(tt|=4),pf(_e,a,tt,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,a),qf(_e,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(a,o,_e,tt){switch(jd(o)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}_e=ct.bind(null,o,_e,a),ct=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(ct=!0),tt?ct!==void 0?a.addEventListener(o,_e,{capture:!0,passive:ct}):a.addEventListener(o,_e,!0):ct!==void 0?a.addEventListener(o,_e,{passive:ct}):a.addEventListener(o,_e,!1)}function hd(a,o,_e,tt,ct){var vt=tt;if(!(o&1)&&!(o&2)&&tt!==null)e:for(;;){if(tt===null)return;var nt=tt.tag;if(nt===3||nt===4){var it=tt.stateNode.containerInfo;if(it===ct||it.nodeType===8&&it.parentNode===ct)break;if(nt===4)for(nt=tt.return;nt!==null;){var s=nt.tag;if((s===3||s===4)&&(s=nt.stateNode.containerInfo,s===ct||s.nodeType===8&&s.parentNode===ct))return;nt=nt.return}for(;it!==null;){if(nt=Wc(it),nt===null)return;if(s=nt.tag,s===5||s===6){tt=vt=nt;continue e}it=it.parentNode}}tt=tt.return}Jb(function(){var et=vt,rt=xb(_e),ot=[];e:{var gt=df.get(a);if(gt!==void 0){var dt=td,pt=a;switch(a){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":dt=Rd;break;case"focusin":pt="focus",dt=Fd;break;case"focusout":pt="blur",dt=Fd;break;case"beforeblur":case"afterblur":dt=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Vd;break;case $e:case af:case bf:dt=Hd;break;case cf:dt=Xd;break;case"scroll":dt=vd;break;case"wheel":dt=Zd;break;case"copy":case"cut":case"paste":dt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Td}var st=(o&4)!==0,ht=!st&&a==="scroll",at=st?gt!==null?gt+"Capture":null:gt;st=[];for(var ut=et,ft;ut!==null;){ft=ut;var mt=ft.stateNode;if(ft.tag===5&&mt!==null&&(ft=mt,at!==null&&(mt=Kb(ut,at),mt!=null&&st.push(tf(ut,mt,ft)))),ht)break;ut=ut.return}0<st.length&&(gt=new dt(gt,pt,null,_e,rt),ot.push({event:gt,listeners:st}))}}if(!(o&7)){e:{if(gt=a==="mouseover"||a==="pointerover",dt=a==="mouseout"||a==="pointerout",gt&&_e!==wb&&(pt=_e.relatedTarget||_e.fromElement)&&(Wc(pt)||pt[uf]))break e;if((dt||gt)&&(gt=rt.window===rt?rt:(gt=rt.ownerDocument)?gt.defaultView||gt.parentWindow:window,dt?(pt=_e.relatedTarget||_e.toElement,dt=et,pt=pt?Wc(pt):null,pt!==null&&(ht=Vb(pt),pt!==ht||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(dt=null,pt=et),dt!==pt)){if(st=Bd,mt="onMouseLeave",at="onMouseEnter",ut="mouse",(a==="pointerout"||a==="pointerover")&&(st=Td,mt="onPointerLeave",at="onPointerEnter",ut="pointer"),ht=dt==null?gt:ue(dt),ft=pt==null?gt:ue(pt),gt=new st(mt,ut+"leave",dt,_e,rt),gt.target=ht,gt.relatedTarget=ft,mt=null,Wc(rt)===et&&(st=new st(at,ut+"enter",pt,_e,rt),st.target=ft,st.relatedTarget=ht,mt=st),ht=mt,dt&&pt)t:{for(st=dt,at=pt,ut=0,ft=st;ft;ft=vf(ft))ut++;for(ft=0,mt=at;mt;mt=vf(mt))ft++;for(;0<ut-ft;)st=vf(st),ut--;for(;0<ft-ut;)at=vf(at),ft--;for(;ut--;){if(st===at||at!==null&&st===at.alternate)break t;st=vf(st),at=vf(at)}st=null}else st=null;dt!==null&&wf(ot,gt,dt,st,!1),pt!==null&&ht!==null&&wf(ot,ht,pt,st,!0)}}e:{if(gt=et?ue(et):window,dt=gt.nodeName&&gt.nodeName.toLowerCase(),dt==="select"||dt==="input"&&gt.type==="file")var yt=ve;else if(me(gt))if(we)yt=Fe;else{yt=De;var At=Ce}else(dt=gt.nodeName)&&dt.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(yt=Ee);if(yt&&(yt=yt(a,et))){ne(ot,yt,_e,rt);break e}At&&At(a,gt,et),a==="focusout"&&(At=gt._wrapperState)&&At.controlled&&gt.type==="number"&&cb(gt,"number",gt.value)}switch(At=et?ue(et):window,a){case"focusin":(me(At)||At.contentEditable==="true")&&(Qe=At,Re=et,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ot,_e,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ot,_e,rt)}var wt;if(ae)e:{switch(a){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ie?ge(a,_e)&&(Pt="onCompositionEnd"):a==="keydown"&&_e.keyCode===229&&(Pt="onCompositionStart");Pt&&(de&&_e.locale!=="ko"&&(ie||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ie&&(wt=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),At=oe(et,Pt),0<At.length&&(Pt=new Ld(Pt,a,null,_e,rt),ot.push({event:Pt,listeners:At}),wt?Pt.data=wt:(wt=he(_e),wt!==null&&(Pt.data=wt)))),(wt=ce?je(a,_e):ke(a,_e))&&(et=oe(et,"onBeforeInput"),0<et.length&&(rt=new Ld("onBeforeInput","beforeinput",null,_e,rt),ot.push({event:rt,listeners:et}),rt.data=wt))}se(ot,o)})}function tf(a,o,_e){return{instance:a,listener:o,currentTarget:_e}}function oe(a,o){for(var _e=o+"Capture",tt=[];a!==null;){var ct=a,vt=ct.stateNode;ct.tag===5&&vt!==null&&(ct=vt,vt=Kb(a,_e),vt!=null&&tt.unshift(tf(a,vt,ct)),vt=Kb(a,o),vt!=null&&tt.push(tf(a,vt,ct))),a=a.return}return tt}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,o,_e,tt,ct){for(var vt=o._reactName,nt=[];_e!==null&&_e!==tt;){var it=_e,s=it.alternate,et=it.stateNode;if(s!==null&&s===tt)break;it.tag===5&&et!==null&&(it=et,ct?(s=Kb(_e,vt),s!=null&&nt.unshift(tf(_e,s,it))):ct||(s=Kb(_e,vt),s!=null&&nt.push(tf(_e,s,it)))),_e=_e.return}nt.length!==0&&a.push({event:o,listeners:nt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,o,_e){if(o=zf(o),zf(a)!==o&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,o){var _e=o,tt=0;do{var ct=_e.nextSibling;if(a.removeChild(_e),ct&&ct.nodeType===8)if(_e=ct.data,_e==="/$"){if(tt===0){a.removeChild(ct),bd(o);return}tt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tt++;_e=ct}while(_e);bd(o)}function Lf(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(o===0)return a;o--}else _e==="/$"&&o++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var o=a[Of];if(o)return o;for(var _e=a.parentNode;_e;){if(o=_e[uf]||_e[Of]){if(_e=o.alternate,o.child!==null||_e!==null&&_e.child!==null)for(a=Mf(a);a!==null;){if(_e=a[Of])return _e;a=Mf(a)}return o}a=_e,_e=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$2(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E$1(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(a,o){Tf++,Sf[Tf]=a.current,a.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,o){var _e=a.type.contextTypes;if(!_e)return Vf;var tt=a.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===o)return tt.__reactInternalMemoizedMaskedChildContext;var ct={},vt;for(vt in _e)ct[vt]=o[vt];return tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E$1(Wf),E$1(H)}function ag(a,o,_e){if(H.current!==Vf)throw Error(p$2(168));G$1(H,o),G$1(Wf,_e)}function bg(a,o,_e){var tt=a.stateNode;if(o=o.childContextTypes,typeof tt.getChildContext!="function")return _e;tt=tt.getChildContext();for(var ct in tt)if(!(ct in o))throw Error(p$2(108,Ra(a)||"Unknown",ct));return A$3({},_e,tt)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,a),G$1(Wf,Wf.current),!0}function dg(a,o,_e){var tt=a.stateNode;if(!tt)throw Error(p$2(169));_e?(a=bg(a,o,Xf),tt.__reactInternalMemoizedMergedChildContext=a,E$1(Wf),E$1(H),G$1(H,a)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,o=C$1;try{var _e=eg;for(C$1=1;a<_e.length;a++){var tt=_e[a];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),ct}finally{C$1=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,o){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=o}function ug(a,o,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var tt=rg;a=sg;var ct=32-oc(tt)-1;tt&=~(1<<ct),_e+=1;var vt=32-oc(o)+ct;if(30<vt){var nt=ct-ct%5;vt=(tt&(1<<nt)-1).toString(32),tt>>=nt,ct-=nt,rg=1<<32-oc(o)+ct|_e<<ct|tt,sg=vt+a}else rg=1<<vt|_e<<ct|tt,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(a,o){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=o,_e.return=a,o=a.deletions,o===null?(a.deletions=[_e],a.flags|=16):o.push(_e)}function Cg(a,o){switch(a.tag){case 5:var _e=a.type;return o=o.nodeType!==1||_e.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(a.stateNode=o,xg=a,yg=Lf(o.firstChild),!0):!1;case 6:return o=a.pendingProps===""||o.nodeType!==3?null:o,o!==null?(a.stateNode=o,xg=a,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:o,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=o,_e.return=a,a.child=_e,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I$2){var o=yg;if(o){var _e=o;if(!Cg(a,o)){if(Dg(a))throw Error(p$2(418));o=Lf(_e.nextSibling);var tt=xg;o&&Cg(a,o)?Ag(tt,_e):(a.flags=a.flags&-4097|2,I$2=!1,xg=a)}}else{if(Dg(a))throw Error(p$2(418));a.flags=a.flags&-4097|2,I$2=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I$2)return Fg(a),I$2=!0,!1;var o;if((o=a.tag!==3)&&!(o=a.tag!==5)&&(o=a.type,o=o!=="head"&&o!=="body"&&!Ef(a.type,a.memoizedProps)),o&&(o=yg)){if(Dg(a))throw Hg(),Error(p$2(418));for(;o;)Ag(a,o),o=Lf(o.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$2(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="/$"){if(o===0){yg=Lf(a.nextSibling);break e}o--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||o++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(a,o){if(a&&a.defaultProps){o=A$3({},o),a=a.defaultProps;for(var _e in a)o[_e]===void 0&&(o[_e]=a[_e]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var o=Mg.current;E$1(Mg),a._currentValue=o}function Sg(a,o,_e){for(;a!==null;){var tt=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,tt!==null&&(tt.childLanes|=o)):tt!==null&&(tt.childLanes&o)!==o&&(tt.childLanes|=o),a===_e)break;a=a.return}}function Tg(a,o){Ng=a,Pg=Og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&o&&(Ug=!0),a.firstContext=null)}function Vg(a){var o=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=a,Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return o}var Wg=null;function Xg(a){Wg===null?Wg=[a]:Wg.push(a)}function Yg(a,o,_e,tt){var ct=o.interleaved;return ct===null?(_e.next=_e,Xg(o)):(_e.next=ct.next,ct.next=_e),o.interleaved=_e,Zg(a,tt)}function Zg(a,o){a.lanes|=o;var _e=a.alternate;for(_e!==null&&(_e.lanes|=o),_e=a,a=a.return;a!==null;)a.childLanes|=o,_e=a.alternate,_e!==null&&(_e.childLanes|=o),_e=a,a=a.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(a,o,_e){var tt=a.updateQueue;if(tt===null)return null;if(tt=tt.shared,K$1&2){var ct=tt.pending;return ct===null?o.next=o:(o.next=ct.next,ct.next=o),tt.pending=o,Zg(a,_e)}return ct=tt.interleaved,ct===null?(o.next=o,Xg(tt)):(o.next=ct.next,ct.next=o),tt.interleaved=o,Zg(a,_e)}function eh(a,o,_e){if(o=o.updateQueue,o!==null&&(o=o.shared,(_e&4194240)!==0)){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}function fh(a,o){var _e=a.updateQueue,tt=a.alternate;if(tt!==null&&(tt=tt.updateQueue,_e===tt)){var ct=null,vt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var nt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};vt===null?ct=vt=nt:vt=vt.next=nt,_e=_e.next}while(_e!==null);vt===null?ct=vt=o:vt=vt.next=o}else ct=vt=o;_e={baseState:tt.baseState,firstBaseUpdate:ct,lastBaseUpdate:vt,shared:tt.shared,effects:tt.effects},a.updateQueue=_e;return}a=_e.lastBaseUpdate,a===null?_e.firstBaseUpdate=o:a.next=o,_e.lastBaseUpdate=o}function gh(a,o,_e,tt){var ct=a.updateQueue;$g=!1;var vt=ct.firstBaseUpdate,nt=ct.lastBaseUpdate,it=ct.shared.pending;if(it!==null){ct.shared.pending=null;var s=it,et=s.next;s.next=null,nt===null?vt=et:nt.next=et,nt=s;var rt=a.alternate;rt!==null&&(rt=rt.updateQueue,it=rt.lastBaseUpdate,it!==nt&&(it===null?rt.firstBaseUpdate=et:it.next=et,rt.lastBaseUpdate=s))}if(vt!==null){var ot=ct.baseState;nt=0,rt=et=s=null,it=vt;do{var gt=it.lane,dt=it.eventTime;if((tt&gt)===gt){rt!==null&&(rt=rt.next={eventTime:dt,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var pt=a,st=it;switch(gt=o,dt=_e,st.tag){case 1:if(pt=st.payload,typeof pt=="function"){ot=pt.call(dt,ot,gt);break e}ot=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=st.payload,gt=typeof pt=="function"?pt.call(dt,ot,gt):pt,gt==null)break e;ot=A$3({},ot,gt);break e;case 2:$g=!0}}it.callback!==null&&it.lane!==0&&(a.flags|=64,gt=ct.effects,gt===null?ct.effects=[it]:gt.push(it))}else dt={eventTime:dt,lane:gt,tag:it.tag,payload:it.payload,callback:it.callback,next:null},rt===null?(et=rt=dt,s=ot):rt=rt.next=dt,nt|=gt;if(it=it.next,it===null){if(it=ct.shared.pending,it===null)break;gt=it,it=gt.next,gt.next=null,ct.lastBaseUpdate=gt,ct.shared.pending=null}}while(1);if(rt===null&&(s=ot),ct.baseState=s,ct.firstBaseUpdate=et,ct.lastBaseUpdate=rt,o=ct.shared.interleaved,o!==null){ct=o;do nt|=ct.lane,ct=ct.next;while(ct!==o)}else vt===null&&(ct.shared.lanes=0);hh|=nt,a.lanes=nt,a.memoizedState=ot}}function ih(a,o,_e){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var tt=a[o],ct=tt.callback;if(ct!==null){if(tt.callback=null,tt=_e,typeof ct!="function")throw Error(p$2(191,ct));ct.call(tt)}}}var jh=new aa.Component().refs;function kh(a,o,_e,tt){o=a.memoizedState,_e=_e(tt,o),_e=_e==null?o:A$3({},o,_e),a.memoizedState=_e,a.lanes===0&&(a.updateQueue.baseState=_e)}var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),vt=ch(tt,ct);vt.payload=o,_e!=null&&(vt.callback=_e),o=dh(a,vt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueReplaceState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),vt=ch(tt,ct);vt.tag=1,vt.payload=o,_e!=null&&(vt.callback=_e),o=dh(a,vt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var _e=L(),tt=lh(a),ct=ch(_e,tt);ct.tag=2,o!=null&&(ct.callback=o),o=dh(a,ct,tt),o!==null&&(mh(o,a,tt,_e),eh(o,a,tt))}};function oh(a,o,_e,tt,ct,vt,nt){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(tt,vt,nt):o.prototype&&o.prototype.isPureReactComponent?!Ie(_e,tt)||!Ie(ct,vt):!0}function ph(a,o,_e){var tt=!1,ct=Vf,vt=o.contextType;return typeof vt=="object"&&vt!==null?vt=Vg(vt):(ct=Zf(o)?Xf:H.current,tt=o.contextTypes,vt=(tt=tt!=null)?Yf(a,ct):Vf),o=new o(_e,vt),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,a.stateNode=o,o._reactInternals=a,tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=ct,a.__reactInternalMemoizedMaskedChildContext=vt),o}function qh(a,o,_e,tt){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(_e,tt),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(_e,tt),o.state!==a&&nh.enqueueReplaceState(o,o.state,null)}function rh(a,o,_e,tt){var ct=a.stateNode;ct.props=_e,ct.state=a.memoizedState,ct.refs=jh,ah(a);var vt=o.contextType;typeof vt=="object"&&vt!==null?ct.context=Vg(vt):(vt=Zf(o)?Xf:H.current,ct.context=Yf(a,vt)),ct.state=a.memoizedState,vt=o.getDerivedStateFromProps,typeof vt=="function"&&(kh(a,o,vt,_e),ct.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(o=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),o!==ct.state&&nh.enqueueReplaceState(ct,ct.state,null),gh(a,_e,ct,tt),ct.state=a.memoizedState),typeof ct.componentDidMount=="function"&&(a.flags|=4194308)}function sh(a,o,_e){if(a=_e.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var tt=_e.stateNode}if(!tt)throw Error(p$2(147,a));var ct=tt,vt=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===vt?o.ref:(o=function(nt){var it=ct.refs;it===jh&&(it=ct.refs={}),nt===null?delete it[vt]:it[vt]=nt},o._stringRef=vt,o)}if(typeof a!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,a))}return a}function th(a,o){throw a=Object.prototype.toString.call(o),Error(p$2(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function uh(a){var o=a._init;return o(a._payload)}function vh(a){function o(at,ut){if(a){var ft=at.deletions;ft===null?(at.deletions=[ut],at.flags|=16):ft.push(ut)}}function _e(at,ut){if(!a)return null;for(;ut!==null;)o(at,ut),ut=ut.sibling;return null}function tt(at,ut){for(at=new Map;ut!==null;)ut.key!==null?at.set(ut.key,ut):at.set(ut.index,ut),ut=ut.sibling;return at}function ct(at,ut){return at=wh(at,ut),at.index=0,at.sibling=null,at}function vt(at,ut,ft){return at.index=ft,a?(ft=at.alternate,ft!==null?(ft=ft.index,ft<ut?(at.flags|=2,ut):ft):(at.flags|=2,ut)):(at.flags|=1048576,ut)}function nt(at){return a&&at.alternate===null&&(at.flags|=2),at}function it(at,ut,ft,mt){return ut===null||ut.tag!==6?(ut=xh(ft,at.mode,mt),ut.return=at,ut):(ut=ct(ut,ft),ut.return=at,ut)}function s(at,ut,ft,mt){var yt=ft.type;return yt===ya?rt(at,ut,ft.props.children,mt,ft.key):ut!==null&&(ut.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ha&&uh(yt)===ut.type)?(mt=ct(ut,ft.props),mt.ref=sh(at,ut,ft),mt.return=at,mt):(mt=yh(ft.type,ft.key,ft.props,null,at.mode,mt),mt.ref=sh(at,ut,ft),mt.return=at,mt)}function et(at,ut,ft,mt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==ft.containerInfo||ut.stateNode.implementation!==ft.implementation?(ut=zh(ft,at.mode,mt),ut.return=at,ut):(ut=ct(ut,ft.children||[]),ut.return=at,ut)}function rt(at,ut,ft,mt,yt){return ut===null||ut.tag!==7?(ut=Ah(ft,at.mode,mt,yt),ut.return=at,ut):(ut=ct(ut,ft),ut.return=at,ut)}function ot(at,ut,ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=xh(""+ut,at.mode,ft),ut.return=at,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case va:return ft=yh(ut.type,ut.key,ut.props,null,at.mode,ft),ft.ref=sh(at,null,ut),ft.return=at,ft;case wa:return ut=zh(ut,at.mode,ft),ut.return=at,ut;case Ha:var mt=ut._init;return ot(at,mt(ut._payload),ft)}if(eb(ut)||Ka(ut))return ut=Ah(ut,at.mode,ft,null),ut.return=at,ut;th(at,ut)}return null}function gt(at,ut,ft,mt){var yt=ut!==null?ut.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return yt!==null?null:it(at,ut,""+ft,mt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===yt?s(at,ut,ft,mt):null;case wa:return ft.key===yt?et(at,ut,ft,mt):null;case Ha:return yt=ft._init,gt(at,ut,yt(ft._payload),mt)}if(eb(ft)||Ka(ft))return yt!==null?null:rt(at,ut,ft,mt,null);th(at,ft)}return null}function dt(at,ut,ft,mt,yt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return at=at.get(ft)||null,it(ut,at,""+mt,yt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return at=at.get(mt.key===null?ft:mt.key)||null,s(ut,at,mt,yt);case wa:return at=at.get(mt.key===null?ft:mt.key)||null,et(ut,at,mt,yt);case Ha:var At=mt._init;return dt(at,ut,ft,At(mt._payload),yt)}if(eb(mt)||Ka(mt))return at=at.get(ft)||null,rt(ut,at,mt,yt,null);th(ut,mt)}return null}function pt(at,ut,ft,mt){for(var yt=null,At=null,wt=ut,Pt=ut=0,Rt=null;wt!==null&&Pt<ft.length;Pt++){wt.index>Pt?(Rt=wt,wt=null):Rt=wt.sibling;var kt=gt(at,wt,ft[Pt],mt);if(kt===null){wt===null&&(wt=Rt);break}a&&wt&&kt.alternate===null&&o(at,wt),ut=vt(kt,ut,Pt),At===null?yt=kt:At.sibling=kt,At=kt,wt=Rt}if(Pt===ft.length)return _e(at,wt),I$2&&tg(at,Pt),yt;if(wt===null){for(;Pt<ft.length;Pt++)wt=ot(at,ft[Pt],mt),wt!==null&&(ut=vt(wt,ut,Pt),At===null?yt=wt:At.sibling=wt,At=wt);return I$2&&tg(at,Pt),yt}for(wt=tt(at,wt);Pt<ft.length;Pt++)Rt=dt(wt,at,Pt,ft[Pt],mt),Rt!==null&&(a&&Rt.alternate!==null&&wt.delete(Rt.key===null?Pt:Rt.key),ut=vt(Rt,ut,Pt),At===null?yt=Rt:At.sibling=Rt,At=Rt);return a&&wt.forEach(function(bt){return o(at,bt)}),I$2&&tg(at,Pt),yt}function st(at,ut,ft,mt){var yt=Ka(ft);if(typeof yt!="function")throw Error(p$2(150));if(ft=yt.call(ft),ft==null)throw Error(p$2(151));for(var At=yt=null,wt=ut,Pt=ut=0,Rt=null,kt=ft.next();wt!==null&&!kt.done;Pt++,kt=ft.next()){wt.index>Pt?(Rt=wt,wt=null):Rt=wt.sibling;var bt=gt(at,wt,kt.value,mt);if(bt===null){wt===null&&(wt=Rt);break}a&&wt&&bt.alternate===null&&o(at,wt),ut=vt(bt,ut,Pt),At===null?yt=bt:At.sibling=bt,At=bt,wt=Rt}if(kt.done)return _e(at,wt),I$2&&tg(at,Pt),yt;if(wt===null){for(;!kt.done;Pt++,kt=ft.next())kt=ot(at,kt.value,mt),kt!==null&&(ut=vt(kt,ut,Pt),At===null?yt=kt:At.sibling=kt,At=kt);return I$2&&tg(at,Pt),yt}for(wt=tt(at,wt);!kt.done;Pt++,kt=ft.next())kt=dt(wt,at,Pt,kt.value,mt),kt!==null&&(a&&kt.alternate!==null&&wt.delete(kt.key===null?Pt:kt.key),ut=vt(kt,ut,Pt),At===null?yt=kt:At.sibling=kt,At=kt);return a&&wt.forEach(function(Nt){return o(at,Nt)}),I$2&&tg(at,Pt),yt}function ht(at,ut,ft,mt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var yt=ft.key,At=ut;At!==null;){if(At.key===yt){if(yt=ft.type,yt===ya){if(At.tag===7){_e(at,At.sibling),ut=ct(At,ft.props.children),ut.return=at,at=ut;break e}}else if(At.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ha&&uh(yt)===At.type){_e(at,At.sibling),ut=ct(At,ft.props),ut.ref=sh(at,At,ft),ut.return=at,at=ut;break e}_e(at,At);break}else o(at,At);At=At.sibling}ft.type===ya?(ut=Ah(ft.props.children,at.mode,mt,ft.key),ut.return=at,at=ut):(mt=yh(ft.type,ft.key,ft.props,null,at.mode,mt),mt.ref=sh(at,ut,ft),mt.return=at,at=mt)}return nt(at);case wa:e:{for(At=ft.key;ut!==null;){if(ut.key===At)if(ut.tag===4&&ut.stateNode.containerInfo===ft.containerInfo&&ut.stateNode.implementation===ft.implementation){_e(at,ut.sibling),ut=ct(ut,ft.children||[]),ut.return=at,at=ut;break e}else{_e(at,ut);break}else o(at,ut);ut=ut.sibling}ut=zh(ft,at.mode,mt),ut.return=at,at=ut}return nt(at);case Ha:return At=ft._init,ht(at,ut,At(ft._payload),mt)}if(eb(ft))return pt(at,ut,ft,mt);if(Ka(ft))return st(at,ut,ft,mt);th(at,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,ut!==null&&ut.tag===6?(_e(at,ut.sibling),ut=ct(ut,ft),ut.return=at,at=ut):(_e(at,ut),ut=xh(ft,at.mode,mt),ut.return=at,at=ut),nt(at)):_e(at,ut)}return ht}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p$2(174));return a}function Ih(a,o){switch(G$1(Gh,o),G$1(Fh,a),G$1(Eh,Dh),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:a=a===8?o.parentNode:o,o=a.namespaceURI||null,a=a.tagName,o=lb(o,a)}E$1(Eh),G$1(Eh,o)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(a){Hh(Gh.current);var o=Hh(Eh.current),_e=lb(o,a.type);o!==_e&&(G$1(Fh,a),G$1(Eh,_e))}function Lh(a){Fh.current===a&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(a){for(var o=a;o!==null;){if(o.tag===13){var _e=o.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$2=null,O$1=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(a,o){if(o===null)return!1;for(var _e=0;_e<o.length&&_e<a.length;_e++)if(!He(a[_e],o[_e]))return!1;return!0}function Xh(a,o,_e,tt,ct,vt){if(Rh=vt,N$2=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=a===null||a.memoizedState===null?Yh:Zh,a=_e(tt,ct),Th){vt=0;do{if(Th=!1,Uh=0,25<=vt)throw Error(p$2(301));vt+=1,P=O$1=null,o.updateQueue=null,Ph.current=$h,a=_e(tt,ct)}while(Th)}if(Ph.current=ai,o=O$1!==null&&O$1.next!==null,Rh=0,P=O$1=N$2=null,Sh=!1,o)throw Error(p$2(300));return a}function bi(){var a=Uh!==0;return Uh=0,a}function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N$2.memoizedState=P=a:P=P.next=a,P}function di(){if(O$1===null){var a=N$2.alternate;a=a!==null?a.memoizedState:null}else a=O$1.next;var o=P===null?N$2.memoizedState:P.next;if(o!==null)P=o,O$1=a;else{if(a===null)throw Error(p$2(310));O$1=a,a={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P===null?N$2.memoizedState=P=a:P=P.next=a}return P}function ei(a,o){return typeof o=="function"?o(a):o}function fi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=O$1,ct=tt.baseQueue,vt=_e.pending;if(vt!==null){if(ct!==null){var nt=ct.next;ct.next=vt.next,vt.next=nt}tt.baseQueue=ct=vt,_e.pending=null}if(ct!==null){vt=ct.next,tt=tt.baseState;var it=nt=null,s=null,et=vt;do{var rt=et.lane;if((Rh&rt)===rt)s!==null&&(s=s.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),tt=et.hasEagerState?et.eagerState:a(tt,et.action);else{var ot={lane:rt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};s===null?(it=s=ot,nt=tt):s=s.next=ot,N$2.lanes|=rt,hh|=rt}et=et.next}while(et!==null&&et!==vt);s===null?nt=tt:s.next=it,He(tt,o.memoizedState)||(Ug=!0),o.memoizedState=tt,o.baseState=nt,o.baseQueue=s,_e.lastRenderedState=tt}if(a=_e.interleaved,a!==null){ct=a;do vt=ct.lane,N$2.lanes|=vt,hh|=vt,ct=ct.next;while(ct!==a)}else ct===null&&(_e.lanes=0);return[o.memoizedState,_e.dispatch]}function gi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=_e.dispatch,ct=_e.pending,vt=o.memoizedState;if(ct!==null){_e.pending=null;var nt=ct=ct.next;do vt=a(vt,nt.action),nt=nt.next;while(nt!==ct);He(vt,o.memoizedState)||(Ug=!0),o.memoizedState=vt,o.baseQueue===null&&(o.baseState=vt),_e.lastRenderedState=vt}return[vt,tt]}function hi(){}function ii(a,o){var _e=N$2,tt=di(),ct=o(),vt=!He(tt.memoizedState,ct);if(vt&&(tt.memoizedState=ct,Ug=!0),tt=tt.queue,ji(ki.bind(null,_e,tt,a),[a]),tt.getSnapshot!==o||vt||P!==null&&P.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tt,ct,o),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni(_e,o,ct)}return ct}function ni(a,o,_e){a.flags|=16384,a={getSnapshot:o,value:_e},o=N$2.updateQueue,o===null?(o={lastEffect:null,stores:null},N$2.updateQueue=o,o.stores=[a]):(_e=o.stores,_e===null?o.stores=[a]:_e.push(a))}function mi(a,o,_e,tt){o.value=_e,o.getSnapshot=tt,oi(o)&&pi(a)}function ki(a,o,_e){return _e(function(){oi(o)&&pi(a)})}function oi(a){var o=a.getSnapshot;a=a.value;try{var _e=o();return!He(a,_e)}catch{return!0}}function pi(a){var o=Zg(a,1);o!==null&&mh(o,a,1,-1)}function qi(a){var o=ci();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},o.queue=a,a=a.dispatch=ri.bind(null,N$2,a),[o.memoizedState,a]}function li(a,o,_e,tt){return a={tag:a,create:o,destroy:_e,deps:tt,next:null},o=N$2.updateQueue,o===null?(o={lastEffect:null,stores:null},N$2.updateQueue=o,o.lastEffect=a.next=a):(_e=o.lastEffect,_e===null?o.lastEffect=a.next=a:(tt=_e.next,_e.next=a,a.next=tt,o.lastEffect=a)),a}function si(){return di().memoizedState}function ti(a,o,_e,tt){var ct=ci();N$2.flags|=a,ct.memoizedState=li(1|o,_e,void 0,tt===void 0?null:tt)}function ui(a,o,_e,tt){var ct=di();tt=tt===void 0?null:tt;var vt=void 0;if(O$1!==null){var nt=O$1.memoizedState;if(vt=nt.destroy,tt!==null&&Wh(tt,nt.deps)){ct.memoizedState=li(o,_e,vt,tt);return}}N$2.flags|=a,ct.memoizedState=li(1|o,_e,vt,tt)}function vi(a,o){return ti(8390656,8,a,o)}function ji(a,o){return ui(2048,8,a,o)}function wi(a,o){return ui(4,2,a,o)}function xi(a,o){return ui(4,4,a,o)}function yi(a,o){if(typeof o=="function")return a=a(),o(a),function(){o(null)};if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function zi(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ui(4,4,yi.bind(null,o,a),_e)}function Ai(){}function Bi(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(_e.memoizedState=[a,o],a)}function Ci(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(a=a(),_e.memoizedState=[a,o],a)}function Di(a,o,_e){return Rh&21?(He(_e,o)||(_e=yc(),N$2.lanes|=_e,hh|=_e,a.baseState=!0),o):(a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=_e)}function Ei(a,o){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,a(!0);var tt=Qh.transition;Qh.transition={};try{a(!1),o()}finally{C$1=_e,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(a,o,_e){var tt=lh(a);if(_e={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(a))Ii(o,_e);else if(_e=Yg(a,o,_e,tt),_e!==null){var ct=L();mh(_e,a,tt,ct),Ji(_e,o,tt)}}function ri(a,o,_e){var tt=lh(a),ct={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(o,ct);else{var vt=a.alternate;if(a.lanes===0&&(vt===null||vt.lanes===0)&&(vt=o.lastRenderedReducer,vt!==null))try{var nt=o.lastRenderedState,it=vt(nt,_e);if(ct.hasEagerState=!0,ct.eagerState=it,He(it,nt)){var s=o.interleaved;s===null?(ct.next=ct,Xg(o)):(ct.next=s.next,s.next=ct),o.interleaved=ct;return}}catch{}finally{}_e=Yg(a,o,ct,tt),_e!==null&&(ct=L(),mh(_e,a,tt,ct),Ji(_e,o,tt))}}function Hi(a){var o=a.alternate;return a===N$2||o!==null&&o===N$2}function Ii(a,o){Th=Sh=!0;var _e=a.pending;_e===null?o.next=o:(o.next=_e.next,_e.next=o),a.pending=o}function Ji(a,o,_e){if(_e&4194240){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,o){return ci().memoizedState=[a,o===void 0?null:o],a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ti(4194308,4,yi.bind(null,o,a),_e)},useLayoutEffect:function(a,o){return ti(4194308,4,a,o)},useInsertionEffect:function(a,o){return ti(4,2,a,o)},useMemo:function(a,o){var _e=ci();return o=o===void 0?null:o,a=a(),_e.memoizedState=[a,o],a},useReducer:function(a,o,_e){var tt=ci();return o=_e!==void 0?_e(o):o,tt.memoizedState=tt.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},tt.queue=a,a=a.dispatch=Gi.bind(null,N$2,a),[tt.memoizedState,a]},useRef:function(a){var o=ci();return a={current:a},o.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),o=a[0];return a=Ei.bind(null,a[1]),ci().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,_e){var tt=N$2,ct=ci();if(I$2){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=o(),R===null)throw Error(p$2(349));Rh&30||ni(tt,o,_e)}ct.memoizedState=_e;var vt={value:_e,getSnapshot:o};return ct.queue=vt,vi(ki.bind(null,tt,vt,a),[a]),tt.flags|=2048,li(9,mi.bind(null,tt,vt,_e,o),void 0,null),_e},useId:function(){var a=ci(),o=R.identifierPrefix;if(I$2){var _e=sg,tt=rg;_e=(tt&~(1<<32-oc(tt)-1)).toString(32)+_e,o=":"+o+"R"+_e,_e=Uh++,0<_e&&(o+="H"+_e.toString(32)),o+=":"}else _e=Vh++,o=":"+o+"r"+_e.toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return Di(o,O$1.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return O$1===null?o.memoizedState=a:Di(o,O$1.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,o){try{var _e="",tt=o;do _e+=Pa(tt),tt=tt.return;while(tt);var ct=_e}catch(vt){ct=`
Error generating stack: `+vt.message+`
`+vt.stack}return{value:a,source:o,stack:ct,digest:null}}function Li(a,o,_e){return{value:a,source:null,stack:_e??null,digest:o??null}}function Mi(a,o){try{console.error(o.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(a,o,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tt=o.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(a,o)},_e}function Ri(a,o,_e){_e=ch(-1,_e),_e.tag=3;var tt=a.type.getDerivedStateFromError;if(typeof tt=="function"){var ct=o.value;_e.payload=function(){return tt(ct)},_e.callback=function(){Mi(a,o)}}var vt=a.stateNode;return vt!==null&&typeof vt.componentDidCatch=="function"&&(_e.callback=function(){Mi(a,o),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var nt=o.stack;this.componentDidCatch(o.value,{componentStack:nt!==null?nt:""})}),_e}function Ti(a,o,_e){var tt=a.pingCache;if(tt===null){tt=a.pingCache=new Ni;var ct=new Set;tt.set(o,ct)}else ct=tt.get(o),ct===void 0&&(ct=new Set,tt.set(o,ct));ct.has(_e)||(ct.add(_e),a=Ui.bind(null,a,o,_e),o.then(a,a))}function Vi(a){do{var o;if((o=a.tag===13)&&(o=a.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return a;a=a.return}while(a!==null);return null}function Wi(a,o,_e,tt,ct){return a.mode&1?(a.flags|=65536,a.lanes=ct,a):(a===o?a.flags|=65536:(a.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(o=ch(-1,1),o.tag=2,dh(_e,o,1))),_e.lanes|=1),a)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(a,o,_e,tt){o.child=a===null?Ch(o,null,_e,tt):Bh(o,a.child,_e,tt)}function Zi(a,o,_e,tt,ct){_e=_e.render;var vt=o.ref;return Tg(o,ct),tt=Xh(a,o,_e,tt,vt,ct),_e=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I$2&&_e&&vg(o),o.flags|=1,Yi(a,o,tt,ct),o.child)}function aj(a,o,_e,tt,ct){if(a===null){var vt=_e.type;return typeof vt=="function"&&!bj(vt)&&vt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(o.tag=15,o.type=vt,cj(a,o,vt,tt,ct)):(a=yh(_e.type,null,tt,o,o.mode,ct),a.ref=o.ref,a.return=o,o.child=a)}if(vt=a.child,!(a.lanes&ct)){var nt=vt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(nt,tt)&&a.ref===o.ref)return $i(a,o,ct)}return o.flags|=1,a=wh(vt,tt),a.ref=o.ref,a.return=o,o.child=a}function cj(a,o,_e,tt,ct){if(a!==null){var vt=a.memoizedProps;if(Ie(vt,tt)&&a.ref===o.ref)if(Ug=!1,o.pendingProps=tt=vt,(a.lanes&ct)!==0)a.flags&131072&&(Ug=!0);else return o.lanes=a.lanes,$i(a,o,ct)}return dj(a,o,_e,tt,ct)}function ej(a,o,_e){var tt=o.pendingProps,ct=tt.children,vt=a!==null?a.memoizedState:null;if(tt.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return a=vt!==null?vt.baseLanes|_e:_e,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,G$1(fj,gj),gj|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=vt!==null?vt.baseLanes:_e,G$1(fj,gj),gj|=tt}else vt!==null?(tt=vt.baseLanes|_e,o.memoizedState=null):tt=_e,G$1(fj,gj),gj|=tt;return Yi(a,o,ct,_e),o.child}function hj(a,o){var _e=o.ref;(a===null&&_e!==null||a!==null&&a.ref!==_e)&&(o.flags|=512,o.flags|=2097152)}function dj(a,o,_e,tt,ct){var vt=Zf(_e)?Xf:H.current;return vt=Yf(o,vt),Tg(o,ct),_e=Xh(a,o,_e,tt,vt,ct),tt=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I$2&&tt&&vg(o),o.flags|=1,Yi(a,o,_e,ct),o.child)}function ij(a,o,_e,tt,ct){if(Zf(_e)){var vt=!0;cg(o)}else vt=!1;if(Tg(o,ct),o.stateNode===null)jj(a,o),ph(o,_e,tt),rh(o,_e,tt,ct),tt=!0;else if(a===null){var nt=o.stateNode,it=o.memoizedProps;nt.props=it;var s=nt.context,et=_e.contextType;typeof et=="object"&&et!==null?et=Vg(et):(et=Zf(_e)?Xf:H.current,et=Yf(o,et));var rt=_e.getDerivedStateFromProps,ot=typeof rt=="function"||typeof nt.getSnapshotBeforeUpdate=="function";ot||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(it!==tt||s!==et)&&qh(o,nt,tt,et),$g=!1;var gt=o.memoizedState;nt.state=gt,gh(o,tt,nt,ct),s=o.memoizedState,it!==tt||gt!==s||Wf.current||$g?(typeof rt=="function"&&(kh(o,_e,rt,tt),s=o.memoizedState),(it=$g||oh(o,_e,it,tt,gt,s,et))?(ot||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount()),typeof nt.componentDidMount=="function"&&(o.flags|=4194308)):(typeof nt.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=tt,o.memoizedState=s),nt.props=tt,nt.state=s,nt.context=et,tt=it):(typeof nt.componentDidMount=="function"&&(o.flags|=4194308),tt=!1)}else{nt=o.stateNode,bh(a,o),it=o.memoizedProps,et=o.type===o.elementType?it:Lg(o.type,it),nt.props=et,ot=o.pendingProps,gt=nt.context,s=_e.contextType,typeof s=="object"&&s!==null?s=Vg(s):(s=Zf(_e)?Xf:H.current,s=Yf(o,s));var dt=_e.getDerivedStateFromProps;(rt=typeof dt=="function"||typeof nt.getSnapshotBeforeUpdate=="function")||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(it!==ot||gt!==s)&&qh(o,nt,tt,s),$g=!1,gt=o.memoizedState,nt.state=gt,gh(o,tt,nt,ct);var pt=o.memoizedState;it!==ot||gt!==pt||Wf.current||$g?(typeof dt=="function"&&(kh(o,_e,dt,tt),pt=o.memoizedState),(et=$g||oh(o,_e,et,tt,gt,pt,s)||!1)?(rt||typeof nt.UNSAFE_componentWillUpdate!="function"&&typeof nt.componentWillUpdate!="function"||(typeof nt.componentWillUpdate=="function"&&nt.componentWillUpdate(tt,pt,s),typeof nt.UNSAFE_componentWillUpdate=="function"&&nt.UNSAFE_componentWillUpdate(tt,pt,s)),typeof nt.componentDidUpdate=="function"&&(o.flags|=4),typeof nt.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof nt.componentDidUpdate!="function"||it===a.memoizedProps&&gt===a.memoizedState||(o.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||it===a.memoizedProps&&gt===a.memoizedState||(o.flags|=1024),o.memoizedProps=tt,o.memoizedState=pt),nt.props=tt,nt.state=pt,nt.context=s,tt=et):(typeof nt.componentDidUpdate!="function"||it===a.memoizedProps&&gt===a.memoizedState||(o.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||it===a.memoizedProps&&gt===a.memoizedState||(o.flags|=1024),tt=!1)}return kj(a,o,_e,tt,vt,ct)}function kj(a,o,_e,tt,ct,vt){hj(a,o);var nt=(o.flags&128)!==0;if(!tt&&!nt)return ct&&dg(o,_e,!1),$i(a,o,vt);tt=o.stateNode,Xi.current=o;var it=nt&&typeof _e.getDerivedStateFromError!="function"?null:tt.render();return o.flags|=1,a!==null&&nt?(o.child=Bh(o,a.child,null,vt),o.child=Bh(o,null,it,vt)):Yi(a,o,it,vt),o.memoizedState=tt.state,ct&&dg(o,_e,!0),o.child}function lj(a){var o=a.stateNode;o.pendingContext?ag(a,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(a,o.context,!1),Ih(a,o.containerInfo)}function mj(a,o,_e,tt,ct){return Ig(),Jg(ct),o.flags|=256,Yi(a,o,_e,tt),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}function pj(a,o,_e){var tt=o.pendingProps,ct=M$1.current,vt=!1,nt=(o.flags&128)!==0,it;if((it=nt)||(it=a!==null&&a.memoizedState===null?!1:(ct&2)!==0),it?(vt=!0,o.flags&=-129):(a===null||a.memoizedState!==null)&&(ct|=1),G$1(M$1,ct&1),a===null)return Eg(o),a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(o.mode&1?a.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(nt=tt.children,a=tt.fallback,vt?(tt=o.mode,vt=o.child,nt={mode:"hidden",children:nt},!(tt&1)&&vt!==null?(vt.childLanes=0,vt.pendingProps=nt):vt=qj(nt,tt,0,null),a=Ah(a,tt,_e,null),vt.return=o,a.return=o,vt.sibling=a,o.child=vt,o.child.memoizedState=oj(_e),o.memoizedState=nj,a):rj(o,nt));if(ct=a.memoizedState,ct!==null&&(it=ct.dehydrated,it!==null))return sj(a,o,nt,tt,it,ct,_e);if(vt){vt=tt.fallback,nt=o.mode,ct=a.child,it=ct.sibling;var s={mode:"hidden",children:tt.children};return!(nt&1)&&o.child!==ct?(tt=o.child,tt.childLanes=0,tt.pendingProps=s,o.deletions=null):(tt=wh(ct,s),tt.subtreeFlags=ct.subtreeFlags&14680064),it!==null?vt=wh(it,vt):(vt=Ah(vt,nt,_e,null),vt.flags|=2),vt.return=o,tt.return=o,tt.sibling=vt,o.child=tt,tt=vt,vt=o.child,nt=a.child.memoizedState,nt=nt===null?oj(_e):{baseLanes:nt.baseLanes|_e,cachePool:null,transitions:nt.transitions},vt.memoizedState=nt,vt.childLanes=a.childLanes&~_e,o.memoizedState=nj,tt}return vt=a.child,a=vt.sibling,tt=wh(vt,{mode:"visible",children:tt.children}),!(o.mode&1)&&(tt.lanes=_e),tt.return=o,tt.sibling=null,a!==null&&(_e=o.deletions,_e===null?(o.deletions=[a],o.flags|=16):_e.push(a)),o.child=tt,o.memoizedState=null,tt}function rj(a,o){return o=qj({mode:"visible",children:o},a.mode,0,null),o.return=a,a.child=o}function tj(a,o,_e,tt){return tt!==null&&Jg(tt),Bh(o,a.child,null,_e),a=rj(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function sj(a,o,_e,tt,ct,vt,nt){if(_e)return o.flags&256?(o.flags&=-257,tt=Li(Error(p$2(422))),tj(a,o,nt,tt)):o.memoizedState!==null?(o.child=a.child,o.flags|=128,null):(vt=tt.fallback,ct=o.mode,tt=qj({mode:"visible",children:tt.children},ct,0,null),vt=Ah(vt,ct,nt,null),vt.flags|=2,tt.return=o,vt.return=o,tt.sibling=vt,o.child=tt,o.mode&1&&Bh(o,a.child,null,nt),o.child.memoizedState=oj(nt),o.memoizedState=nj,vt);if(!(o.mode&1))return tj(a,o,nt,null);if(ct.data==="$!"){if(tt=ct.nextSibling&&ct.nextSibling.dataset,tt)var it=tt.dgst;return tt=it,vt=Error(p$2(419)),tt=Li(vt,tt,void 0),tj(a,o,nt,tt)}if(it=(nt&a.childLanes)!==0,Ug||it){if(tt=R,tt!==null){switch(nt&-nt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(tt.suspendedLanes|nt)?0:ct,ct!==0&&ct!==vt.retryLane&&(vt.retryLane=ct,Zg(a,ct),mh(tt,a,ct,-1))}return uj(),tt=Li(Error(p$2(421))),tj(a,o,nt,tt)}return ct.data==="$?"?(o.flags|=128,o.child=a.child,o=vj.bind(null,a),ct._reactRetry=o,null):(a=vt.treeContext,yg=Lf(ct.nextSibling),xg=o,I$2=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=o),o=rj(o,tt.children),o.flags|=4096,o)}function wj(a,o,_e){a.lanes|=o;var tt=a.alternate;tt!==null&&(tt.lanes|=o),Sg(a.return,o,_e)}function xj(a,o,_e,tt,ct){var vt=a.memoizedState;vt===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:tt,tail:_e,tailMode:ct}:(vt.isBackwards=o,vt.rendering=null,vt.renderingStartTime=0,vt.last=tt,vt.tail=_e,vt.tailMode=ct)}function yj(a,o,_e){var tt=o.pendingProps,ct=tt.revealOrder,vt=tt.tail;if(Yi(a,o,tt.children,_e),tt=M$1.current,tt&2)tt=tt&1|2,o.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wj(a,_e,o);else if(a.tag===19)wj(a,_e,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}tt&=1}if(G$1(M$1,tt),!(o.mode&1))o.memoizedState=null;else switch(ct){case"forwards":for(_e=o.child,ct=null;_e!==null;)a=_e.alternate,a!==null&&Mh(a)===null&&(ct=_e),_e=_e.sibling;_e=ct,_e===null?(ct=o.child,o.child=null):(ct=_e.sibling,_e.sibling=null),xj(o,!1,ct,_e,vt);break;case"backwards":for(_e=null,ct=o.child,o.child=null;ct!==null;){if(a=ct.alternate,a!==null&&Mh(a)===null){o.child=ct;break}a=ct.sibling,ct.sibling=_e,_e=ct,ct=a}xj(o,!0,_e,null,vt);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(a,o){!(o.mode&1)&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function $i(a,o,_e){if(a!==null&&(o.dependencies=a.dependencies),hh|=o.lanes,!(_e&o.childLanes))return null;if(a!==null&&o.child!==a.child)throw Error(p$2(153));if(o.child!==null){for(a=o.child,_e=wh(a,a.pendingProps),o.child=_e,_e.return=o;a.sibling!==null;)a=a.sibling,_e=_e.sibling=wh(a,a.pendingProps),_e.return=o;_e.sibling=null}return o.child}function zj(a,o,_e){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var tt=o.type._context,ct=o.memoizedProps.value;G$1(Mg,tt._currentValue),tt._currentValue=ct;break;case 13:if(tt=o.memoizedState,tt!==null)return tt.dehydrated!==null?(G$1(M$1,M$1.current&1),o.flags|=128,null):_e&o.child.childLanes?pj(a,o,_e):(G$1(M$1,M$1.current&1),a=$i(a,o,_e),a!==null?a.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(tt=(_e&o.childLanes)!==0,a.flags&128){if(tt)return yj(a,o,_e);o.flags|=128}if(ct=o.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(M$1,M$1.current),tt)break;return null;case 22:case 23:return o.lanes=0,ej(a,o,_e)}return $i(a,o,_e)}var Aj,Bj,Cj,Dj;Aj=function(a,o){for(var _e=o.child;_e!==null;){if(_e.tag===5||_e.tag===6)a.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===o)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===o)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(a,o,_e,tt){var ct=a.memoizedProps;if(ct!==tt){a=o.stateNode,Hh(Eh.current);var vt=null;switch(_e){case"input":ct=Ya(a,ct),tt=Ya(a,tt),vt=[];break;case"select":ct=A$3({},ct,{value:void 0}),tt=A$3({},tt,{value:void 0}),vt=[];break;case"textarea":ct=gb(a,ct),tt=gb(a,tt),vt=[];break;default:typeof ct.onClick!="function"&&typeof tt.onClick=="function"&&(a.onclick=Bf)}ub(_e,tt);var nt;_e=null;for(et in ct)if(!tt.hasOwnProperty(et)&&ct.hasOwnProperty(et)&&ct[et]!=null)if(et==="style"){var it=ct[et];for(nt in it)it.hasOwnProperty(nt)&&(_e||(_e={}),_e[nt]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?vt||(vt=[]):(vt=vt||[]).push(et,null));for(et in tt){var s=tt[et];if(it=ct!=null?ct[et]:void 0,tt.hasOwnProperty(et)&&s!==it&&(s!=null||it!=null))if(et==="style")if(it){for(nt in it)!it.hasOwnProperty(nt)||s&&s.hasOwnProperty(nt)||(_e||(_e={}),_e[nt]="");for(nt in s)s.hasOwnProperty(nt)&&it[nt]!==s[nt]&&(_e||(_e={}),_e[nt]=s[nt])}else _e||(vt||(vt=[]),vt.push(et,_e)),_e=s;else et==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,it=it?it.__html:void 0,s!=null&&it!==s&&(vt=vt||[]).push(et,s)):et==="children"?typeof s!="string"&&typeof s!="number"||(vt=vt||[]).push(et,""+s):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(ea.hasOwnProperty(et)?(s!=null&&et==="onScroll"&&D$1("scroll",a),vt||it===s||(vt=[])):(vt=vt||[]).push(et,s))}_e&&(vt=vt||[]).push("style",_e);var et=vt;(o.updateQueue=et)&&(o.flags|=4)}};Dj=function(a,o,_e,tt){_e!==tt&&(o.flags|=4)};function Ej(a,o){if(!I$2)switch(a.tailMode){case"hidden":o=a.tail;for(var _e=null;o!==null;)o.alternate!==null&&(_e=o),o=o.sibling;_e===null?a.tail=null:_e.sibling=null;break;case"collapsed":_e=a.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:tt.sibling=null}}function S$1(a){var o=a.alternate!==null&&a.alternate.child===a.child,_e=0,tt=0;if(o)for(var ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags&14680064,tt|=ct.flags&14680064,ct.return=a,ct=ct.sibling;else for(ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags,tt|=ct.flags,ct.return=a,ct=ct.sibling;return a.subtreeFlags|=tt,a.childLanes=_e,o}function Fj(a,o,_e){var tt=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(o),null;case 1:return Zf(o.type)&&$f(),S$1(o),null;case 3:return tt=o.stateNode,Jh(),E$1(Wf),E$1(H),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(a===null||a.child===null)&&(Gg(o)?o.flags|=4:a===null||a.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(a,o),S$1(o),null;case 5:Lh(o);var ct=Hh(Gh.current);if(_e=o.type,a!==null&&o.stateNode!=null)Cj(a,o,_e,tt,ct),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!tt){if(o.stateNode===null)throw Error(p$2(166));return S$1(o),null}if(a=Hh(Eh.current),Gg(o)){tt=o.stateNode,_e=o.type;var vt=o.memoizedProps;switch(tt[Of]=o,tt[Pf]=vt,a=(o.mode&1)!==0,_e){case"dialog":D$1("cancel",tt),D$1("close",tt);break;case"iframe":case"object":case"embed":D$1("load",tt);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],tt);break;case"source":D$1("error",tt);break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt);break;case"details":D$1("toggle",tt);break;case"input":Za(tt,vt),D$1("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!vt.multiple},D$1("invalid",tt);break;case"textarea":hb(tt,vt),D$1("invalid",tt)}ub(_e,vt),ct=null;for(var nt in vt)if(vt.hasOwnProperty(nt)){var it=vt[nt];nt==="children"?typeof it=="string"?tt.textContent!==it&&(vt.suppressHydrationWarning!==!0&&Af(tt.textContent,it,a),ct=["children",it]):typeof it=="number"&&tt.textContent!==""+it&&(vt.suppressHydrationWarning!==!0&&Af(tt.textContent,it,a),ct=["children",""+it]):ea.hasOwnProperty(nt)&&it!=null&&nt==="onScroll"&&D$1("scroll",tt)}switch(_e){case"input":Va(tt),db(tt,vt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof vt.onClick=="function"&&(tt.onclick=Bf)}tt=ct,o.updateQueue=tt,tt!==null&&(o.flags|=4)}else{nt=ct.nodeType===9?ct:ct.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(_e)),a==="http://www.w3.org/1999/xhtml"?_e==="script"?(a=nt.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof tt.is=="string"?a=nt.createElement(_e,{is:tt.is}):(a=nt.createElement(_e),_e==="select"&&(nt=a,tt.multiple?nt.multiple=!0:tt.size&&(nt.size=tt.size))):a=nt.createElementNS(a,_e),a[Of]=o,a[Pf]=tt,Aj(a,o,!1,!1),o.stateNode=a;e:{switch(nt=vb(_e,tt),_e){case"dialog":D$1("cancel",a),D$1("close",a),ct=tt;break;case"iframe":case"object":case"embed":D$1("load",a),ct=tt;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],a);ct=tt;break;case"source":D$1("error",a),ct=tt;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),ct=tt;break;case"details":D$1("toggle",a),ct=tt;break;case"input":Za(a,tt),ct=Ya(a,tt),D$1("invalid",a);break;case"option":ct=tt;break;case"select":a._wrapperState={wasMultiple:!!tt.multiple},ct=A$3({},tt,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,tt),ct=gb(a,tt),D$1("invalid",a);break;default:ct=tt}ub(_e,ct),it=ct;for(vt in it)if(it.hasOwnProperty(vt)){var s=it[vt];vt==="style"?sb(a,s):vt==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&nb(a,s)):vt==="children"?typeof s=="string"?(_e!=="textarea"||s!=="")&&ob(a,s):typeof s=="number"&&ob(a,""+s):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(ea.hasOwnProperty(vt)?s!=null&&vt==="onScroll"&&D$1("scroll",a):s!=null&&ta(a,vt,s,nt))}switch(_e){case"input":Va(a),db(a,tt,!1);break;case"textarea":Va(a),jb(a);break;case"option":tt.value!=null&&a.setAttribute("value",""+Sa(tt.value));break;case"select":a.multiple=!!tt.multiple,vt=tt.value,vt!=null?fb(a,!!tt.multiple,vt,!1):tt.defaultValue!=null&&fb(a,!!tt.multiple,tt.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(a.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S$1(o),null;case 6:if(a&&o.stateNode!=null)Dj(a,o,a.memoizedProps,tt);else{if(typeof tt!="string"&&o.stateNode===null)throw Error(p$2(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(tt=o.stateNode,_e=o.memoizedProps,tt[Of]=o,(vt=tt.nodeValue!==_e)&&(a=xg,a!==null))switch(a.tag){case 3:Af(tt.nodeValue,_e,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,_e,(a.mode&1)!==0)}vt&&(o.flags|=4)}else tt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tt),tt[Of]=o,o.stateNode=tt}return S$1(o),null;case 13:if(E$1(M$1),tt=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,vt=!1;else if(vt=Gg(o),tt!==null&&tt.dehydrated!==null){if(a===null){if(!vt)throw Error(p$2(318));if(vt=o.memoizedState,vt=vt!==null?vt.dehydrated:null,!vt)throw Error(p$2(317));vt[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S$1(o),vt=!1}else zg!==null&&(Gj(zg),zg=null),vt=!0;if(!vt)return o.flags&65536?o:null}return o.flags&128?(o.lanes=_e,o):(tt=tt!==null,tt!==(a!==null&&a.memoizedState!==null)&&tt&&(o.child.flags|=8192,o.mode&1&&(a===null||M$1.current&1?T$1===0&&(T$1=3):uj())),o.updateQueue!==null&&(o.flags|=4),S$1(o),null);case 4:return Jh(),Bj(a,o),a===null&&sf(o.stateNode.containerInfo),S$1(o),null;case 10:return Rg(o.type._context),S$1(o),null;case 17:return Zf(o.type)&&$f(),S$1(o),null;case 19:if(E$1(M$1),vt=o.memoizedState,vt===null)return S$1(o),null;if(tt=(o.flags&128)!==0,nt=vt.rendering,nt===null)if(tt)Ej(vt,!1);else{if(T$1!==0||a!==null&&a.flags&128)for(a=o.child;a!==null;){if(nt=Mh(a),nt!==null){for(o.flags|=128,Ej(vt,!1),tt=nt.updateQueue,tt!==null&&(o.updateQueue=tt,o.flags|=4),o.subtreeFlags=0,tt=_e,_e=o.child;_e!==null;)vt=_e,a=tt,vt.flags&=14680066,nt=vt.alternate,nt===null?(vt.childLanes=0,vt.lanes=a,vt.child=null,vt.subtreeFlags=0,vt.memoizedProps=null,vt.memoizedState=null,vt.updateQueue=null,vt.dependencies=null,vt.stateNode=null):(vt.childLanes=nt.childLanes,vt.lanes=nt.lanes,vt.child=nt.child,vt.subtreeFlags=0,vt.deletions=null,vt.memoizedProps=nt.memoizedProps,vt.memoizedState=nt.memoizedState,vt.updateQueue=nt.updateQueue,vt.type=nt.type,a=nt.dependencies,vt.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),_e=_e.sibling;return G$1(M$1,M$1.current&1|2),o.child}a=a.sibling}vt.tail!==null&&B$1()>Hj&&(o.flags|=128,tt=!0,Ej(vt,!1),o.lanes=4194304)}else{if(!tt)if(a=Mh(nt),a!==null){if(o.flags|=128,tt=!0,_e=a.updateQueue,_e!==null&&(o.updateQueue=_e,o.flags|=4),Ej(vt,!0),vt.tail===null&&vt.tailMode==="hidden"&&!nt.alternate&&!I$2)return S$1(o),null}else 2*B$1()-vt.renderingStartTime>Hj&&_e!==1073741824&&(o.flags|=128,tt=!0,Ej(vt,!1),o.lanes=4194304);vt.isBackwards?(nt.sibling=o.child,o.child=nt):(_e=vt.last,_e!==null?_e.sibling=nt:o.child=nt,vt.last=nt)}return vt.tail!==null?(o=vt.tail,vt.rendering=o,vt.tail=o.sibling,vt.renderingStartTime=B$1(),o.sibling=null,_e=M$1.current,G$1(M$1,tt?_e&1|2:_e&1),o):(S$1(o),null);case 22:case 23:return Ij(),tt=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==tt&&(o.flags|=8192),tt&&o.mode&1?gj&1073741824&&(S$1(o),o.subtreeFlags&6&&(o.flags|=8192)):S$1(o),null;case 24:return null;case 25:return null}throw Error(p$2(156,o.tag))}function Jj(a,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Jh(),E$1(Wf),E$1(H),Oh(),a=o.flags,a&65536&&!(a&128)?(o.flags=a&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E$1(M$1),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(p$2(340));Ig()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(a,o){var _e=a.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tt){W$1(a,o,tt)}else _e.current=null}function Nj(a,o,_e){try{_e()}catch(tt){W$1(a,o,tt)}}var Oj=!1;function Pj(a,o){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var _e={start:a.selectionStart,end:a.selectionEnd};else e:{_e=(_e=a.ownerDocument)&&_e.defaultView||window;var tt=_e.getSelection&&_e.getSelection();if(tt&&tt.rangeCount!==0){_e=tt.anchorNode;var ct=tt.anchorOffset,vt=tt.focusNode;tt=tt.focusOffset;try{_e.nodeType,vt.nodeType}catch{_e=null;break e}var nt=0,it=-1,s=-1,et=0,rt=0,ot=a,gt=null;t:for(;;){for(var dt;ot!==_e||ct!==0&&ot.nodeType!==3||(it=nt+ct),ot!==vt||tt!==0&&ot.nodeType!==3||(s=nt+tt),ot.nodeType===3&&(nt+=ot.nodeValue.length),(dt=ot.firstChild)!==null;)gt=ot,ot=dt;for(;;){if(ot===a)break t;if(gt===_e&&++et===ct&&(it=nt),gt===vt&&++rt===tt&&(s=nt),(dt=ot.nextSibling)!==null)break;ot=gt,gt=ot.parentNode}ot=dt}_e=it===-1||s===-1?null:{start:it,end:s}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:a,selectionRange:_e},dd=!1,V=o;V!==null;)if(o=V,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,V=a;else for(;V!==null;){o=V;try{var pt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var st=pt.memoizedProps,ht=pt.memoizedState,at=o.stateNode,ut=at.getSnapshotBeforeUpdate(o.elementType===o.type?st:Lg(o.type,st),ht);at.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var ft=o.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(mt){W$1(o,o.return,mt)}if(a=o.sibling,a!==null){a.return=o.return,V=a;break}V=o.return}return pt=Oj,Oj=!1,pt}function Qj(a,o,_e){var tt=o.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var ct=tt=tt.next;do{if((ct.tag&a)===a){var vt=ct.destroy;ct.destroy=void 0,vt!==void 0&&Nj(o,_e,vt)}ct=ct.next}while(ct!==tt)}}function Rj(a,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var _e=o=o.next;do{if((_e.tag&a)===a){var tt=_e.create;_e.destroy=tt()}_e=_e.next}while(_e!==o)}}function Sj(a){var o=a.ref;if(o!==null){var _e=a.stateNode;switch(a.tag){case 5:a=_e;break;default:a=_e}typeof o=="function"?o(a):o.current=a}}function Tj(a){var o=a.alternate;o!==null&&(a.alternate=null,Tj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Uj(a){return a.tag===5||a.tag===3||a.tag===4}function Vj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Uj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.nodeType===8?_e.parentNode.insertBefore(a,o):_e.insertBefore(a,o):(_e.nodeType===8?(o=_e.parentNode,o.insertBefore(a,_e)):(o=_e,o.appendChild(a)),_e=_e._reactRootContainer,_e!=null||o.onclick!==null||(o.onclick=Bf));else if(tt!==4&&(a=a.child,a!==null))for(Wj(a,o,_e),a=a.sibling;a!==null;)Wj(a,o,_e),a=a.sibling}function Xj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.insertBefore(a,o):_e.appendChild(a);else if(tt!==4&&(a=a.child,a!==null))for(Xj(a,o,_e),a=a.sibling;a!==null;)Xj(a,o,_e),a=a.sibling}var X$1=null,Yj=!1;function Zj(a,o,_e){for(_e=_e.child;_e!==null;)ak(a,o,_e),_e=_e.sibling}function ak(a,o,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U||Mj(_e,o);case 6:var tt=X$1,ct=Yj;X$1=null,Zj(a,o,_e),X$1=tt,Yj=ct,X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?a.parentNode.removeChild(_e):a.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?Kf(a.parentNode,_e):a.nodeType===1&&Kf(a,_e),bd(a)):Kf(X$1,_e.stateNode));break;case 4:tt=X$1,ct=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(a,o,_e),X$1=tt,Yj=ct;break;case 0:case 11:case 14:case 15:if(!U&&(tt=_e.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){ct=tt=tt.next;do{var vt=ct,nt=vt.destroy;vt=vt.tag,nt!==void 0&&(vt&2||vt&4)&&Nj(_e,o,nt),ct=ct.next}while(ct!==tt)}Zj(a,o,_e);break;case 1:if(!U&&(Mj(_e,o),tt=_e.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=_e.memoizedProps,tt.state=_e.memoizedState,tt.componentWillUnmount()}catch(it){W$1(_e,o,it)}Zj(a,o,_e);break;case 21:Zj(a,o,_e);break;case 22:_e.mode&1?(U=(tt=U)||_e.memoizedState!==null,Zj(a,o,_e),U=tt):Zj(a,o,_e);break;default:Zj(a,o,_e)}}function bk(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var _e=a.stateNode;_e===null&&(_e=a.stateNode=new Lj),o.forEach(function(tt){var ct=ck.bind(null,a,tt);_e.has(tt)||(_e.add(tt),tt.then(ct,ct))})}}function dk(a,o){var _e=o.deletions;if(_e!==null)for(var tt=0;tt<_e.length;tt++){var ct=_e[tt];try{var vt=a,nt=o,it=nt;e:for(;it!==null;){switch(it.tag){case 5:X$1=it.stateNode,Yj=!1;break e;case 3:X$1=it.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=it.stateNode.containerInfo,Yj=!0;break e}it=it.return}if(X$1===null)throw Error(p$2(160));ak(vt,nt,ct),X$1=null,Yj=!1;var s=ct.alternate;s!==null&&(s.return=null),ct.return=null}catch(et){W$1(ct,o,et)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,a),o=o.sibling}function ek(a,o){var _e=a.alternate,tt=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(dk(o,a),fk(a),tt&4){try{Qj(3,a,a.return),Rj(3,a)}catch(st){W$1(a,a.return,st)}try{Qj(5,a,a.return)}catch(st){W$1(a,a.return,st)}}break;case 1:dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return),a.flags&32){var ct=a.stateNode;try{ob(ct,"")}catch(st){W$1(a,a.return,st)}}if(tt&4&&(ct=a.stateNode,ct!=null)){var vt=a.memoizedProps,nt=_e!==null?_e.memoizedProps:vt,it=a.type,s=a.updateQueue;if(a.updateQueue=null,s!==null)try{it==="input"&&vt.type==="radio"&&vt.name!=null&&ab(ct,vt),vb(it,nt);var et=vb(it,vt);for(nt=0;nt<s.length;nt+=2){var rt=s[nt],ot=s[nt+1];rt==="style"?sb(ct,ot):rt==="dangerouslySetInnerHTML"?nb(ct,ot):rt==="children"?ob(ct,ot):ta(ct,rt,ot,et)}switch(it){case"input":bb(ct,vt);break;case"textarea":ib(ct,vt);break;case"select":var gt=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!vt.multiple;var dt=vt.value;dt!=null?fb(ct,!!vt.multiple,dt,!1):gt!==!!vt.multiple&&(vt.defaultValue!=null?fb(ct,!!vt.multiple,vt.defaultValue,!0):fb(ct,!!vt.multiple,vt.multiple?[]:"",!1))}ct[Pf]=vt}catch(st){W$1(a,a.return,st)}}break;case 6:if(dk(o,a),fk(a),tt&4){if(a.stateNode===null)throw Error(p$2(162));ct=a.stateNode,vt=a.memoizedProps;try{ct.nodeValue=vt}catch(st){W$1(a,a.return,st)}}break;case 3:if(dk(o,a),fk(a),tt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(st){W$1(a,a.return,st)}break;case 4:dk(o,a),fk(a);break;case 13:dk(o,a),fk(a),ct=a.child,ct.flags&8192&&(vt=ct.memoizedState!==null,ct.stateNode.isHidden=vt,!vt||ct.alternate!==null&&ct.alternate.memoizedState!==null||(gk=B$1())),tt&4&&bk(a);break;case 22:if(rt=_e!==null&&_e.memoizedState!==null,a.mode&1?(U=(et=U)||rt,dk(o,a),U=et):dk(o,a),fk(a),tt&8192){if(et=a.memoizedState!==null,(a.stateNode.isHidden=et)&&!rt&&a.mode&1)for(V=a,rt=a.child;rt!==null;){for(ot=V=rt;V!==null;){switch(gt=V,dt=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var pt=gt.stateNode;if(typeof pt.componentWillUnmount=="function"){tt=gt,_e=gt.return;try{o=tt,pt.props=o.memoizedProps,pt.state=o.memoizedState,pt.componentWillUnmount()}catch(st){W$1(tt,_e,st)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(ot);continue}}dt!==null?(dt.return=gt,V=dt):hk(ot)}rt=rt.sibling}e:for(rt=null,ot=a;;){if(ot.tag===5){if(rt===null){rt=ot;try{ct=ot.stateNode,et?(vt=ct.style,typeof vt.setProperty=="function"?vt.setProperty("display","none","important"):vt.display="none"):(it=ot.stateNode,s=ot.memoizedProps.style,nt=s!=null&&s.hasOwnProperty("display")?s.display:null,it.style.display=rb("display",nt))}catch(st){W$1(a,a.return,st)}}}else if(ot.tag===6){if(rt===null)try{ot.stateNode.nodeValue=et?"":ot.memoizedProps}catch(st){W$1(a,a.return,st)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===a)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===a)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===a)break e;rt===ot&&(rt=null),ot=ot.return}rt===ot&&(rt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:dk(o,a),fk(a),tt&4&&bk(a);break;case 21:break;default:dk(o,a),fk(a)}}function fk(a){var o=a.flags;if(o&2){try{e:{for(var _e=a.return;_e!==null;){if(Uj(_e)){var tt=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(tt.tag){case 5:var ct=tt.stateNode;tt.flags&32&&(ob(ct,""),tt.flags&=-33);var vt=Vj(a);Xj(a,vt,ct);break;case 3:case 4:var nt=tt.stateNode.containerInfo,it=Vj(a);Wj(a,it,nt);break;default:throw Error(p$2(161))}}catch(s){W$1(a,a.return,s)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function ik(a,o,_e){V=a,jk(a)}function jk(a,o,_e){for(var tt=(a.mode&1)!==0;V!==null;){var ct=V,vt=ct.child;if(ct.tag===22&&tt){var nt=ct.memoizedState!==null||Kj;if(!nt){var it=ct.alternate,s=it!==null&&it.memoizedState!==null||U;it=Kj;var et=U;if(Kj=nt,(U=s)&&!et)for(V=ct;V!==null;)nt=V,s=nt.child,nt.tag===22&&nt.memoizedState!==null?kk(ct):s!==null?(s.return=nt,V=s):kk(ct);for(;vt!==null;)V=vt,jk(vt),vt=vt.sibling;V=ct,Kj=it,U=et}lk(a)}else ct.subtreeFlags&8772&&vt!==null?(vt.return=ct,V=vt):lk(a)}}function lk(a){for(;V!==null;){var o=V;if(o.flags&8772){var _e=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var tt=o.stateNode;if(o.flags&4&&!U)if(_e===null)tt.componentDidMount();else{var ct=o.elementType===o.type?_e.memoizedProps:Lg(o.type,_e.memoizedProps);tt.componentDidUpdate(ct,_e.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var vt=o.updateQueue;vt!==null&&ih(o,vt,tt);break;case 3:var nt=o.updateQueue;if(nt!==null){if(_e=null,o.child!==null)switch(o.child.tag){case 5:_e=o.child.stateNode;break;case 1:_e=o.child.stateNode}ih(o,nt,_e)}break;case 5:var it=o.stateNode;if(_e===null&&o.flags&4){_e=it;var s=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&_e.focus();break;case"img":s.src&&(_e.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var et=o.alternate;if(et!==null){var rt=et.memoizedState;if(rt!==null){var ot=rt.dehydrated;ot!==null&&bd(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||o.flags&512&&Sj(o)}catch(gt){W$1(o,o.return,gt)}}if(o===a){V=null;break}if(_e=o.sibling,_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function hk(a){for(;V!==null;){var o=V;if(o===a){V=null;break}var _e=o.sibling;if(_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function kk(a){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var _e=o.return;try{Rj(4,o)}catch(s){W$1(o,_e,s)}break;case 1:var tt=o.stateNode;if(typeof tt.componentDidMount=="function"){var ct=o.return;try{tt.componentDidMount()}catch(s){W$1(o,ct,s)}}var vt=o.return;try{Sj(o)}catch(s){W$1(o,vt,s)}break;case 5:var nt=o.return;try{Sj(o)}catch(s){W$1(o,nt,s)}}}catch(s){W$1(o,o.return,s)}if(o===a){V=null;break}var it=o.sibling;if(it!==null){it.return=o.return,V=it;break}V=o.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(a){return a.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(a=C$1,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function mh(a,o,_e,tt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(a,_e,tt),(!(K$1&2)||a!==R)&&(a===R&&(!(K$1&2)&&(rk|=_e),T$1===4&&Dk(a,Z$1)),Ek(a,tt),_e===1&&K$1===0&&!(o.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(a,o){var _e=a.callbackNode;wc(a,o);var tt=uc(a,a===R?Z$1:0);if(tt===0)_e!==null&&bc(_e),a.callbackNode=null,a.callbackPriority=0;else if(o=tt&-tt,a.callbackPriority!==o){if(_e!=null&&bc(_e),o===1)a.tag===0?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(tt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,a))}a.callbackPriority=o,a.callbackNode=_e}}function Hk(a,o){if(Bk=-1,Ck=0,K$1&6)throw Error(p$2(327));var _e=a.callbackNode;if(Ik()&&a.callbackNode!==_e)return null;var tt=uc(a,a===R?Z$1:0);if(tt===0)return null;if(tt&30||tt&a.expiredLanes||o)o=Jk(a,tt);else{o=tt;var ct=K$1;K$1|=2;var vt=Kk();(R!==a||Z$1!==o)&&(vk=null,Hj=B$1()+500,Lk(a,o));do try{Mk();break}catch(it){Nk(a,it)}while(1);Qg(),nk.current=vt,K$1=ct,Y$1!==null?o=0:(R=null,Z$1=0,o=T$1)}if(o!==0){if(o===2&&(ct=xc(a),ct!==0&&(tt=ct,o=Ok(a,ct))),o===1)throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;if(o===6)Dk(a,tt);else{if(ct=a.current.alternate,!(tt&30)&&!Pk(ct)&&(o=Jk(a,tt),o===2&&(vt=xc(a),vt!==0&&(tt=vt,o=Ok(a,vt))),o===1))throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;switch(a.finishedWork=ct,a.finishedLanes=tt,o){case 0:case 1:throw Error(p$2(345));case 2:Qk(a,uk,vk);break;case 3:if(Dk(a,tt),(tt&130023424)===tt&&(o=gk+500-B$1(),10<o)){if(uc(a,0)!==0)break;if(ct=a.suspendedLanes,(ct&tt)!==tt){L(),a.pingedLanes|=a.suspendedLanes&ct;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),o);break}Qk(a,uk,vk);break;case 4:if(Dk(a,tt),(tt&4194240)===tt)break;for(o=a.eventTimes,ct=-1;0<tt;){var nt=31-oc(tt);vt=1<<nt,nt=o[nt],nt>ct&&(ct=nt),tt&=~vt}if(tt=ct,tt=B$1()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),tt);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(a,B$1()),a.callbackNode===_e?Hk.bind(null,a):null}function Ok(a,o){var _e=tk;return a.current.memoizedState.isDehydrated&&(Lk(a,o).flags|=256),a=Jk(a,o),a!==2&&(o=uk,uk=_e,o!==null&&Gj(o)),a}function Gj(a){uk===null?uk=a:uk.push.apply(uk,a)}function Pk(a){for(var o=a;;){if(o.flags&16384){var _e=o.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tt=0;tt<_e.length;tt++){var ct=_e[tt],vt=ct.getSnapshot;ct=ct.value;try{if(!He(vt(),ct))return!1}catch{return!1}}}if(_e=o.child,o.subtreeFlags&16384&&_e!==null)_e.return=o,o=_e;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(a,o){for(o&=~sk,o&=~rk,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var _e=31-oc(o),tt=1<<_e;a[_e]=-1,o&=~tt}}function Fk(a){if(K$1&6)throw Error(p$2(327));Ik();var o=uc(a,0);if(!(o&1))return Ek(a,B$1()),null;var _e=Jk(a,o);if(a.tag!==0&&_e===2){var tt=xc(a);tt!==0&&(o=tt,_e=Ok(a,tt))}if(_e===1)throw _e=qk,Lk(a,0),Dk(a,o),Ek(a,B$1()),_e;if(_e===6)throw Error(p$2(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,Qk(a,uk,vk),Ek(a,B$1()),null}function Rk(a,o){var _e=K$1;K$1|=1;try{return a(o)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(a){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var o=K$1;K$1|=1;var _e=pk.transition,tt=C$1;try{if(pk.transition=null,C$1=1,a)return a()}finally{C$1=tt,pk.transition=_e,K$1=o,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(a,o){a.finishedWork=null,a.finishedLanes=0;var _e=a.timeoutHandle;if(_e!==-1&&(a.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tt=_e;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R=a,Y$1=a=wh(a.current,null),Z$1=gj=o,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(_e=Wg[o],tt=_e.interleaved,tt!==null){_e.interleaved=null;var ct=tt.next,vt=_e.pending;if(vt!==null){var nt=vt.next;vt.next=ct,tt.next=nt}_e.pending=tt}Wg=null}return a}function Nk(a,o){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$2.memoizedState;tt!==null;){var ct=tt.queue;ct!==null&&(ct.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P=O$1=N$2=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$1=1,qk=o,Y$1=null;break}e:{var vt=a,nt=_e.return,it=_e,s=o;if(o=Z$1,it.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var et=s,rt=it,ot=rt.tag;if(!(rt.mode&1)&&(ot===0||ot===11||ot===15)){var gt=rt.alternate;gt?(rt.updateQueue=gt.updateQueue,rt.memoizedState=gt.memoizedState,rt.lanes=gt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var dt=Vi(nt);if(dt!==null){dt.flags&=-257,Wi(dt,nt,it,vt,o),dt.mode&1&&Ti(vt,et,o),o=dt,s=et;var pt=o.updateQueue;if(pt===null){var st=new Set;st.add(s),o.updateQueue=st}else pt.add(s);break e}else{if(!(o&1)){Ti(vt,et,o),uj();break e}s=Error(p$2(426))}}else if(I$2&&it.mode&1){var ht=Vi(nt);if(ht!==null){!(ht.flags&65536)&&(ht.flags|=256),Wi(ht,nt,it,vt,o),Jg(Ki(s,it));break e}}vt=s=Ki(s,it),T$1!==4&&(T$1=2),tk===null?tk=[vt]:tk.push(vt),vt=nt;do{switch(vt.tag){case 3:vt.flags|=65536,o&=-o,vt.lanes|=o;var at=Oi(vt,s,o);fh(vt,at);break e;case 1:it=s;var ut=vt.type,ft=vt.stateNode;if(!(vt.flags&128)&&(typeof ut.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Si===null||!Si.has(ft)))){vt.flags|=65536,o&=-o,vt.lanes|=o;var mt=Ri(vt,it,o);fh(vt,mt);break e}}vt=vt.return}while(vt!==null)}Tk(_e)}catch(yt){o=yt,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(1)}function Kk(){var a=nk.current;return nk.current=ai,a===null?ai:a}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z$1)}function Jk(a,o){var _e=K$1;K$1|=2;var tt=Kk();(R!==a||Z$1!==o)&&(vk=null,Lk(a,o));do try{Uk();break}catch(ct){Nk(a,ct)}while(1);if(Qg(),K$1=_e,nk.current=tt,Y$1!==null)throw Error(p$2(261));return R=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(a){var o=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps,o===null?Tk(a):Y$1=o,ok.current=null}function Tk(a){var o=a;do{var _e=o.alternate;if(a=o.return,o.flags&32768){if(_e=Jj(_e,o),_e!==null){_e.flags&=32767,Y$1=_e;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T$1=6,Y$1=null;return}}else if(_e=Fj(_e,o,gj),_e!==null){Y$1=_e;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=a}while(o!==null);T$1===0&&(T$1=5)}function Qk(a,o,_e){var tt=C$1,ct=pk.transition;try{pk.transition=null,C$1=1,Xk(a,o,_e,tt)}finally{pk.transition=ct,C$1=tt}return null}function Xk(a,o,_e,tt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$2(327));_e=a.finishedWork;var ct=a.finishedLanes;if(_e===null)return null;if(a.finishedWork=null,a.finishedLanes=0,_e===a.current)throw Error(p$2(177));a.callbackNode=null,a.callbackPriority=0;var vt=_e.lanes|_e.childLanes;if(Bc(a,vt),a===R&&(Y$1=R=null,Z$1=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),vt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||vt){vt=pk.transition,pk.transition=null;var nt=C$1;C$1=1;var it=K$1;K$1|=4,ok.current=null,Pj(a,_e),ek(_e,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=_e,ik(_e),dc(),K$1=it,C$1=nt,pk.transition=vt}else a.current=_e;if(wk&&(wk=!1,xk=a,yk=ct),vt=a.pendingLanes,vt===0&&(Si=null),mc(_e.stateNode),Ek(a,B$1()),o!==null)for(tt=a.onRecoverableError,_e=0;_e<o.length;_e++)ct=o[_e],tt(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;return yk&1&&a.tag!==0&&Ik(),vt=a.pendingLanes,vt&1?a===Ak?zk++:(zk=0,Ak=a):zk=0,jg(),null}function Ik(){if(xk!==null){var a=Dc(yk),o=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>a?16:a,xk===null)var tt=!1;else{if(a=xk,xk=null,yk=0,K$1&6)throw Error(p$2(331));var ct=K$1;for(K$1|=4,V=a.current;V!==null;){var vt=V,nt=vt.child;if(V.flags&16){var it=vt.deletions;if(it!==null){for(var s=0;s<it.length;s++){var et=it[s];for(V=et;V!==null;){var rt=V;switch(rt.tag){case 0:case 11:case 15:Qj(8,rt,vt)}var ot=rt.child;if(ot!==null)ot.return=rt,V=ot;else for(;V!==null;){rt=V;var gt=rt.sibling,dt=rt.return;if(Tj(rt),rt===et){V=null;break}if(gt!==null){gt.return=dt,V=gt;break}V=dt}}}var pt=vt.alternate;if(pt!==null){var st=pt.child;if(st!==null){pt.child=null;do{var ht=st.sibling;st.sibling=null,st=ht}while(st!==null)}}V=vt}}if(vt.subtreeFlags&2064&&nt!==null)nt.return=vt,V=nt;else e:for(;V!==null;){if(vt=V,vt.flags&2048)switch(vt.tag){case 0:case 11:case 15:Qj(9,vt,vt.return)}var at=vt.sibling;if(at!==null){at.return=vt.return,V=at;break e}V=vt.return}}var ut=a.current;for(V=ut;V!==null;){nt=V;var ft=nt.child;if(nt.subtreeFlags&2064&&ft!==null)ft.return=nt,V=ft;else e:for(nt=ut;V!==null;){if(it=V,it.flags&2048)try{switch(it.tag){case 0:case 11:case 15:Rj(9,it)}}catch(yt){W$1(it,it.return,yt)}if(it===nt){V=null;break e}var mt=it.sibling;if(mt!==null){mt.return=it.return,V=mt;break e}V=it.return}}if(K$1=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}tt=!0}return tt}finally{C$1=_e,pk.transition=o}}return!1}function Yk(a,o,_e){o=Ki(_e,o),o=Oi(a,o,1),a=dh(a,o,1),o=L(),a!==null&&(Ac(a,1,o),Ek(a,o))}function W$1(a,o,_e){if(a.tag===3)Yk(a,a,_e);else for(;o!==null;){if(o.tag===3){Yk(o,a,_e);break}else if(o.tag===1){var tt=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){a=Ki(_e,a),a=Ri(o,a,1),o=dh(o,a,1),a=L(),o!==null&&(Ac(o,1,a),Ek(o,a));break}}o=o.return}}function Ui(a,o,_e){var tt=a.pingCache;tt!==null&&tt.delete(o),o=L(),a.pingedLanes|=a.suspendedLanes&_e,R===a&&(Z$1&_e)===_e&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(a,0):sk|=_e),Ek(a,o)}function Zk(a,o){o===0&&(a.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var _e=L();a=Zg(a,o),a!==null&&(Ac(a,o,_e),Ek(a,_e))}function vj(a){var o=a.memoizedState,_e=0;o!==null&&(_e=o.retryLane),Zk(a,_e)}function ck(a,o){var _e=0;switch(a.tag){case 13:var tt=a.stateNode,ct=a.memoizedState;ct!==null&&(_e=ct.retryLane);break;case 19:tt=a.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(o),Zk(a,_e)}var Wk;Wk=function(a,o,_e){if(a!==null)if(a.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(a.lanes&_e)&&!(o.flags&128))return Ug=!1,zj(a,o,_e);Ug=!!(a.flags&131072)}else Ug=!1,I$2&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var tt=o.type;jj(a,o),a=o.pendingProps;var ct=Yf(o,H.current);Tg(o,_e),ct=Xh(null,o,tt,a,ct,_e);var vt=bi();return o.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(tt)?(vt=!0,cg(o)):vt=!1,o.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,ah(o),ct.updater=nh,o.stateNode=ct,ct._reactInternals=o,rh(o,tt,a,_e),o=kj(null,o,tt,!0,vt,_e)):(o.tag=0,I$2&&vt&&vg(o),Yi(null,o,ct,_e),o=o.child),o;case 16:tt=o.elementType;e:{switch(jj(a,o),a=o.pendingProps,ct=tt._init,tt=ct(tt._payload),o.type=tt,ct=o.tag=$k(tt),a=Lg(tt,a),ct){case 0:o=dj(null,o,tt,a,_e);break e;case 1:o=ij(null,o,tt,a,_e);break e;case 11:o=Zi(null,o,tt,a,_e);break e;case 14:o=aj(null,o,tt,Lg(tt.type,a),_e);break e}throw Error(p$2(306,tt,""))}return o;case 0:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),dj(a,o,tt,ct,_e);case 1:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),ij(a,o,tt,ct,_e);case 3:e:{if(lj(o),a===null)throw Error(p$2(387));tt=o.pendingProps,vt=o.memoizedState,ct=vt.element,bh(a,o),gh(o,tt,null,_e);var nt=o.memoizedState;if(tt=nt.element,vt.isDehydrated)if(vt={element:tt,isDehydrated:!1,cache:nt.cache,pendingSuspenseBoundaries:nt.pendingSuspenseBoundaries,transitions:nt.transitions},o.updateQueue.baseState=vt,o.memoizedState=vt,o.flags&256){ct=Ki(Error(p$2(423)),o),o=mj(a,o,tt,_e,ct);break e}else if(tt!==ct){ct=Ki(Error(p$2(424)),o),o=mj(a,o,tt,_e,ct);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I$2=!0,zg=null,_e=Ch(o,null,tt,_e),o.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tt===ct){o=$i(a,o,_e);break e}Yi(a,o,tt,_e)}o=o.child}return o;case 5:return Kh(o),a===null&&Eg(o),tt=o.type,ct=o.pendingProps,vt=a!==null?a.memoizedProps:null,nt=ct.children,Ef(tt,ct)?nt=null:vt!==null&&Ef(tt,vt)&&(o.flags|=32),hj(a,o),Yi(a,o,nt,_e),o.child;case 6:return a===null&&Eg(o),null;case 13:return pj(a,o,_e);case 4:return Ih(o,o.stateNode.containerInfo),tt=o.pendingProps,a===null?o.child=Bh(o,null,tt,_e):Yi(a,o,tt,_e),o.child;case 11:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),Zi(a,o,tt,ct,_e);case 7:return Yi(a,o,o.pendingProps,_e),o.child;case 8:return Yi(a,o,o.pendingProps.children,_e),o.child;case 12:return Yi(a,o,o.pendingProps.children,_e),o.child;case 10:e:{if(tt=o.type._context,ct=o.pendingProps,vt=o.memoizedProps,nt=ct.value,G$1(Mg,tt._currentValue),tt._currentValue=nt,vt!==null)if(He(vt.value,nt)){if(vt.children===ct.children&&!Wf.current){o=$i(a,o,_e);break e}}else for(vt=o.child,vt!==null&&(vt.return=o);vt!==null;){var it=vt.dependencies;if(it!==null){nt=vt.child;for(var s=it.firstContext;s!==null;){if(s.context===tt){if(vt.tag===1){s=ch(-1,_e&-_e),s.tag=2;var et=vt.updateQueue;if(et!==null){et=et.shared;var rt=et.pending;rt===null?s.next=s:(s.next=rt.next,rt.next=s),et.pending=s}}vt.lanes|=_e,s=vt.alternate,s!==null&&(s.lanes|=_e),Sg(vt.return,_e,o),it.lanes|=_e;break}s=s.next}}else if(vt.tag===10)nt=vt.type===o.type?null:vt.child;else if(vt.tag===18){if(nt=vt.return,nt===null)throw Error(p$2(341));nt.lanes|=_e,it=nt.alternate,it!==null&&(it.lanes|=_e),Sg(nt,_e,o),nt=vt.sibling}else nt=vt.child;if(nt!==null)nt.return=vt;else for(nt=vt;nt!==null;){if(nt===o){nt=null;break}if(vt=nt.sibling,vt!==null){vt.return=nt.return,nt=vt;break}nt=nt.return}vt=nt}Yi(a,o,ct.children,_e),o=o.child}return o;case 9:return ct=o.type,tt=o.pendingProps.children,Tg(o,_e),ct=Vg(ct),tt=tt(ct),o.flags|=1,Yi(a,o,tt,_e),o.child;case 14:return tt=o.type,ct=Lg(tt,o.pendingProps),ct=Lg(tt.type,ct),aj(a,o,tt,ct,_e);case 15:return cj(a,o,o.type,o.pendingProps,_e);case 17:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),jj(a,o),o.tag=1,Zf(tt)?(a=!0,cg(o)):a=!1,Tg(o,_e),ph(o,tt,ct),rh(o,tt,ct,_e),kj(null,o,tt,!0,a,_e);case 19:return yj(a,o,_e);case 22:return ej(a,o,_e)}throw Error(p$2(156,o.tag))};function Gk(a,o){return ac(a,o)}function al(a,o,_e,tt){this.tag=a,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,o,_e,tt){return new al(a,o,_e,tt)}function bj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $k(a){if(typeof a=="function")return bj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function wh(a,o){var _e=a.alternate;return _e===null?(_e=Bg(a.tag,o,a.key,a.mode),_e.elementType=a.elementType,_e.type=a.type,_e.stateNode=a.stateNode,_e.alternate=a,a.alternate=_e):(_e.pendingProps=o,_e.type=a.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=a.flags&14680064,_e.childLanes=a.childLanes,_e.lanes=a.lanes,_e.child=a.child,_e.memoizedProps=a.memoizedProps,_e.memoizedState=a.memoizedState,_e.updateQueue=a.updateQueue,o=a.dependencies,_e.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},_e.sibling=a.sibling,_e.index=a.index,_e.ref=a.ref,_e}function yh(a,o,_e,tt,ct,vt){var nt=2;if(tt=a,typeof a=="function")bj(a)&&(nt=1);else if(typeof a=="string")nt=5;else e:switch(a){case ya:return Ah(_e.children,ct,vt,o);case za:nt=8,ct|=8;break;case Aa:return a=Bg(12,_e,o,ct|2),a.elementType=Aa,a.lanes=vt,a;case Ea:return a=Bg(13,_e,o,ct),a.elementType=Ea,a.lanes=vt,a;case Fa:return a=Bg(19,_e,o,ct),a.elementType=Fa,a.lanes=vt,a;case Ia:return qj(_e,ct,vt,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:nt=10;break e;case Ca:nt=9;break e;case Da:nt=11;break e;case Ga:nt=14;break e;case Ha:nt=16,tt=null;break e}throw Error(p$2(130,a==null?a:typeof a,""))}return o=Bg(nt,_e,o,ct),o.elementType=a,o.type=tt,o.lanes=vt,o}function Ah(a,o,_e,tt){return a=Bg(7,a,tt,o),a.lanes=_e,a}function qj(a,o,_e,tt){return a=Bg(22,a,tt,o),a.elementType=Ia,a.lanes=_e,a.stateNode={isHidden:!1},a}function xh(a,o,_e){return a=Bg(6,a,null,o),a.lanes=_e,a}function zh(a,o,_e){return o=Bg(4,a.children!==null?a.children:[],a.key,o),o.lanes=_e,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function bl(a,o,_e,tt,ct){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function cl(a,o,_e,tt,ct,vt,nt,it,s){return a=new bl(a,o,_e,it,s),o===1?(o=1,vt===!0&&(o|=8)):o=0,vt=Bg(3,null,null,o),a.current=vt,vt.stateNode=a,vt.memoizedState={element:tt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(vt),a}function dl(a,o,_e){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:a,containerInfo:o,implementation:_e}}function el(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p$2(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$2(171))}if(a.tag===1){var _e=a.type;if(Zf(_e))return bg(a,_e,o)}return o}function fl(a,o,_e,tt,ct,vt,nt,it,s){return a=cl(_e,tt,!0,a,ct,vt,nt,it,s),a.context=el(null),_e=a.current,tt=L(),ct=lh(_e),vt=ch(tt,ct),vt.callback=o??null,dh(_e,vt,ct),a.current.lanes=ct,Ac(a,ct,tt),Ek(a,tt),a}function gl(a,o,_e,tt){var ct=o.current,vt=L(),nt=lh(ct);return _e=el(_e),o.context===null?o.context=_e:o.pendingContext=_e,o=ch(vt,nt),o.payload={element:a},tt=tt===void 0?null:tt,tt!==null&&(o.callback=tt),a=dh(ct,o,nt),a!==null&&(mh(a,ct,nt,vt),eh(a,ct,nt)),nt}function hl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var _e=a.retryLane;a.retryLane=_e!==0&&_e<o?_e:o}}function jl(a,o){il(a,o),(a=a.alternate)&&il(a,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}nl.prototype.render=ml.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(p$2(409));gl(a,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Sk(function(){gl(null,a,null,null)}),o[uf]=null}};function nl(a){this._internalRoot=a}nl.prototype.unstable_scheduleHydration=function(a){if(a){var o=Hc();a={blockedOn:null,target:a,priority:o};for(var _e=0;_e<Qc.length&&o!==0&&o<Qc[_e].priority;_e++);Qc.splice(_e,0,a),_e===0&&Vc(a)}};function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(a,o,_e,tt,ct){if(ct){if(typeof tt=="function"){var vt=tt;tt=function(){var et=hl(nt);vt.call(et)}}var nt=fl(o,tt,a,0,null,!1,!1,"",ql);return a._reactRootContainer=nt,a[uf]=nt.current,sf(a.nodeType===8?a.parentNode:a),Sk(),nt}for(;ct=a.lastChild;)a.removeChild(ct);if(typeof tt=="function"){var it=tt;tt=function(){var et=hl(s);it.call(et)}}var s=cl(a,0,!1,null,null,!1,!1,"",ql);return a._reactRootContainer=s,a[uf]=s.current,sf(a.nodeType===8?a.parentNode:a),Sk(function(){gl(o,s,_e,tt)}),s}function sl(a,o,_e,tt,ct){var vt=_e._reactRootContainer;if(vt){var nt=vt;if(typeof ct=="function"){var it=ct;ct=function(){var s=hl(nt);it.call(s)}}gl(o,nt,a,ct)}else nt=rl(_e,o,a,ct,tt);return hl(nt)}Ec=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var _e=tc(o.pendingLanes);_e!==0&&(Cc(o,_e|1),Ek(o,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(a,1);if(tt!==null){var ct=L();mh(tt,a,1,ct)}}),jl(a,1)}};Fc=function(a){if(a.tag===13){var o=Zg(a,134217728);if(o!==null){var _e=L();mh(o,a,134217728,_e)}jl(a,134217728)}};Gc=function(a){if(a.tag===13){var o=lh(a),_e=Zg(a,o);if(_e!==null){var tt=L();mh(_e,a,o,tt)}jl(a,o)}};Hc=function(){return C$1};Ic=function(a,o){var _e=C$1;try{return C$1=a,o()}finally{C$1=_e}};yb=function(a,o,_e){switch(o){case"input":if(bb(a,_e),o=_e.name,_e.type==="radio"&&o!=null){for(_e=a;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<_e.length;o++){var tt=_e[o];if(tt!==a&&tt.form===a.form){var ct=Db(tt);if(!ct)throw Error(p$2(90));Wa(tt),bb(tt,ct)}}}break;case"textarea":ib(a,_e);break;case"select":o=_e.value,o!=null&&fb(a,!!_e.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(a,o){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$2(200));return dl(a,o,null,_e)};reactDom_production_min.createRoot=function(a,o){if(!ol(a))throw Error(p$2(299));var _e=!1,tt="",ct=ll;return o!=null&&(o.unstable_strictMode===!0&&(_e=!0),o.identifierPrefix!==void 0&&(tt=o.identifierPrefix),o.onRecoverableError!==void 0&&(ct=o.onRecoverableError)),o=cl(a,1,!1,null,null,_e,!1,tt,ct),a[uf]=o.current,sf(a.nodeType===8?a.parentNode:a),new ml(o)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(p$2(188)):(a=Object.keys(a).join(","),Error(p$2(268,a)));return a=Zb(o),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Sk(a)};reactDom_production_min.hydrate=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!0,_e)};reactDom_production_min.hydrateRoot=function(a,o,_e){if(!ol(a))throw Error(p$2(405));var tt=_e!=null&&_e.hydratedSources||null,ct=!1,vt="",nt=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(ct=!0),_e.identifierPrefix!==void 0&&(vt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(nt=_e.onRecoverableError)),o=fl(o,null,a,1,_e??null,ct,!1,vt,nt),a[uf]=o.current,sf(a),tt)for(a=0;a<tt.length;a++)_e=tt[a],ct=_e._getVersion,ct=ct(_e._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[_e,ct]:o.mutableSourceEagerHydrationData.push(_e,ct);return new nl(o)};reactDom_production_min.render=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p$2(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,o,_e,tt){if(!pl(_e))throw Error(p$2(200));if(a==null||a._reactInternals===void 0)throw Error(p$2(38));return sl(a,o,_e,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;/**
 * @remix-run/router v1.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$3.apply(this,arguments)}var Action;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(a){a===void 0&&(a={});function o(tt,ct){let{pathname:vt,search:nt,hash:it}=tt.location;return createLocation("",{pathname:vt,search:nt,hash:it},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function _e(tt,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(o,_e,null,a)}function invariant(a,o){if(a===!1||a===null||typeof a>"u")throw new Error(o)}function warning(a,o){if(!a){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(a,o){return{usr:a.state,key:a.key,idx:o}}function createLocation(a,o,_e,tt){return _e===void 0&&(_e=null),_extends$3({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof o=="string"?parsePath(o):o,{state:_e,key:o&&o.key||tt||createKey()})}function createPath(a){let{pathname:o="/",search:_e="",hash:tt=""}=a;return _e&&_e!=="?"&&(o+=_e.charAt(0)==="?"?_e:"?"+_e),tt&&tt!=="#"&&(o+=tt.charAt(0)==="#"?tt:"#"+tt),o}function parsePath(a){let o={};if(a){let _e=a.indexOf("#");_e>=0&&(o.hash=a.substr(_e),a=a.substr(0,_e));let tt=a.indexOf("?");tt>=0&&(o.search=a.substr(tt),a=a.substr(0,tt)),a&&(o.pathname=a)}return o}function getUrlBasedHistory(a,o,_e,tt){tt===void 0&&(tt={});let{window:ct=document.defaultView,v5Compat:vt=!1}=tt,nt=ct.history,it=Action.Pop,s=null,et=rt();et==null&&(et=0,nt.replaceState(_extends$3({},nt.state,{idx:et}),""));function rt(){return(nt.state||{idx:null}).idx}function ot(){it=Action.Pop;let ht=rt(),at=ht==null?null:ht-et;et=ht,s&&s({action:it,location:st.location,delta:at})}function gt(ht,at){it=Action.Push;let ut=createLocation(st.location,ht,at);_e&&_e(ut,ht),et=rt()+1;let ft=getHistoryState(ut,et),mt=st.createHref(ut);try{nt.pushState(ft,"",mt)}catch(yt){if(yt instanceof DOMException&&yt.name==="DataCloneError")throw yt;ct.location.assign(mt)}vt&&s&&s({action:it,location:st.location,delta:1})}function dt(ht,at){it=Action.Replace;let ut=createLocation(st.location,ht,at);_e&&_e(ut,ht),et=rt();let ft=getHistoryState(ut,et),mt=st.createHref(ut);nt.replaceState(ft,"",mt),vt&&s&&s({action:it,location:st.location,delta:0})}function pt(ht){let at=ct.location.origin!=="null"?ct.location.origin:ct.location.href,ut=typeof ht=="string"?ht:createPath(ht);return invariant(at,"No window.location.(origin|href) available to create URL for href: "+ut),new URL(ut,at)}let st={get action(){return it},get location(){return a(ct,nt)},listen(ht){if(s)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,ot),s=ht,()=>{ct.removeEventListener(PopStateEventType,ot),s=null}},createHref(ht){return o(ct,ht)},createURL:pt,encodeLocation(ht){let at=pt(ht);return{pathname:at.pathname,search:at.search,hash:at.hash}},push:gt,replace:dt,go(ht){return nt.go(ht)}};return st}var ResultType;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ResultType||(ResultType={}));function matchRoutes(a,o,_e){_e===void 0&&(_e="/");let tt=typeof o=="string"?parsePath(o):o,ct=stripBasename(tt.pathname||"/",_e);if(ct==null)return null;let vt=flattenRoutes(a);rankRouteBranches(vt);let nt=null;for(let it=0;nt==null&&it<vt.length;++it)nt=matchRouteBranch(vt[it],safelyDecodeURI(ct));return nt}function flattenRoutes(a,o,_e,tt){o===void 0&&(o=[]),_e===void 0&&(_e=[]),tt===void 0&&(tt="");let ct=(vt,nt,it)=>{let s={relativePath:it===void 0?vt.path||"":it,caseSensitive:vt.caseSensitive===!0,childrenIndex:nt,route:vt};s.relativePath.startsWith("/")&&(invariant(s.relativePath.startsWith(tt),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+tt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(tt.length));let et=joinPaths([tt,s.relativePath]),rt=_e.concat(s);vt.children&&vt.children.length>0&&(invariant(vt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+et+'".')),flattenRoutes(vt.children,o,rt,et)),!(vt.path==null&&!vt.index)&&o.push({path:et,score:computeScore(et,vt.index),routesMeta:rt})};return a.forEach((vt,nt)=>{var it;if(vt.path===""||!((it=vt.path)!=null&&it.includes("?")))ct(vt,nt);else for(let s of explodeOptionalSegments(vt.path))ct(vt,nt,s)}),o}function explodeOptionalSegments(a){let o=a.split("/");if(o.length===0)return[];let[_e,...tt]=o,ct=_e.endsWith("?"),vt=_e.replace(/\?$/,"");if(tt.length===0)return ct?[vt,""]:[vt];let nt=explodeOptionalSegments(tt.join("/")),it=[];return it.push(...nt.map(s=>s===""?vt:[vt,s].join("/"))),ct&&it.push(...nt),it.map(s=>a.startsWith("/")&&s===""?"/":s)}function rankRouteBranches(a){a.sort((o,_e)=>o.score!==_e.score?_e.score-o.score:compareIndexes(o.routesMeta.map(tt=>tt.childrenIndex),_e.routesMeta.map(tt=>tt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=a=>a==="*";function computeScore(a,o){let _e=a.split("/"),tt=_e.length;return _e.some(isSplat)&&(tt+=splatPenalty),o&&(tt+=indexRouteValue),_e.filter(ct=>!isSplat(ct)).reduce((ct,vt)=>ct+(paramRe.test(vt)?dynamicSegmentValue:vt===""?emptySegmentValue:staticSegmentValue),tt)}function compareIndexes(a,o){return a.length===o.length&&a.slice(0,-1).every((tt,ct)=>tt===o[ct])?a[a.length-1]-o[o.length-1]:0}function matchRouteBranch(a,o){let{routesMeta:_e}=a,tt={},ct="/",vt=[];for(let nt=0;nt<_e.length;++nt){let it=_e[nt],s=nt===_e.length-1,et=ct==="/"?o:o.slice(ct.length)||"/",rt=matchPath({path:it.relativePath,caseSensitive:it.caseSensitive,end:s},et);if(!rt)return null;Object.assign(tt,rt.params);let ot=it.route;vt.push({params:tt,pathname:joinPaths([ct,rt.pathname]),pathnameBase:normalizePathname(joinPaths([ct,rt.pathnameBase])),route:ot}),rt.pathnameBase!=="/"&&(ct=joinPaths([ct,rt.pathnameBase]))}return vt}function matchPath(a,o){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[_e,tt]=compilePath(a.path,a.caseSensitive,a.end),ct=o.match(_e);if(!ct)return null;let vt=ct[0],nt=vt.replace(/(.)\/+$/,"$1"),it=ct.slice(1);return{params:tt.reduce((et,rt,ot)=>{if(rt==="*"){let gt=it[ot]||"";nt=vt.slice(0,vt.length-gt.length).replace(/(.)\/+$/,"$1")}return et[rt]=safelyDecodeURIComponent(it[ot]||"",rt),et},{}),pathname:vt,pathnameBase:nt,pattern:a}}function compilePath(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!0),warning(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let tt=[],ct="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(nt,it)=>(tt.push(it),"/([^\\/]+)"));return a.endsWith("*")?(tt.push("*"),ct+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?ct+="\\/*$":a!==""&&a!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,o?void 0:"i"),tt]}function safelyDecodeURI(a){try{return decodeURI(a)}catch(o){return warning(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),a}}function safelyDecodeURIComponent(a,o){try{return decodeURIComponent(a)}catch(_e){return warning(!1,'The value for the URL param "'+o+'" will not be decoded because'+(' the string "'+a+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_e+").")),a}}function stripBasename(a,o){if(o==="/")return a;if(!a.toLowerCase().startsWith(o.toLowerCase()))return null;let _e=o.endsWith("/")?o.length-1:o.length,tt=a.charAt(_e);return tt&&tt!=="/"?null:a.slice(_e)||"/"}function resolvePath(a,o){o===void 0&&(o="/");let{pathname:_e,search:tt="",hash:ct=""}=typeof a=="string"?parsePath(a):a;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,o):o,search:normalizeSearch(tt),hash:normalizeHash(ct)}}function resolvePathname(a,o){let _e=o.replace(/\/+$/,"").split("/");return a.split("/").forEach(ct=>{ct===".."?_e.length>1&&_e.pop():ct!=="."&&_e.push(ct)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(a,o,_e,tt){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(tt)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(a){return a.filter((o,_e)=>_e===0||o.route.path&&o.route.path.length>0)}function resolveTo(a,o,_e,tt){tt===void 0&&(tt=!1);let ct;typeof a=="string"?ct=parsePath(a):(ct=_extends$3({},a),invariant(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let vt=a===""||ct.pathname==="",nt=vt?"/":ct.pathname,it;if(tt||nt==null)it=_e;else{let ot=o.length-1;if(nt.startsWith("..")){let gt=nt.split("/");for(;gt[0]==="..";)gt.shift(),ot-=1;ct.pathname=gt.join("/")}it=ot>=0?o[ot]:"/"}let s=resolvePath(ct,it),et=nt&&nt!=="/"&&nt.endsWith("/"),rt=(vt||nt===".")&&_e.endsWith("/");return!s.pathname.endsWith("/")&&(et||rt)&&(s.pathname+="/"),s}const joinPaths=a=>a.join("/").replace(/\/\/+/g,"/"),normalizePathname=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,normalizeHash=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function isRouteErrorResponse(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(a){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(a)}function useNavigate(){let{isDataRoute:a}=reactExports.useContext(RouteContext);return a?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let a=reactExports.useContext(DataRouterContext),{basename:o,navigator:_e}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),vt=JSON.stringify(getPathContributingMatches(tt).map(s=>s.pathnameBase)),nt=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{nt.current=!0}),reactExports.useCallback(function(s,et){if(et===void 0&&(et={}),!nt.current)return;if(typeof s=="number"){_e.go(s);return}let rt=resolveTo(s,JSON.parse(vt),ct,et.relative==="path");a==null&&o!=="/"&&(rt.pathname=rt.pathname==="/"?o:joinPaths([o,rt.pathname])),(et.replace?_e.replace:_e.push)(rt,et.state,et)},[o,_e,vt,ct,a])}function useParams(){let{matches:a}=reactExports.useContext(RouteContext),o=a[a.length-1];return o?o.params:{}}function useRoutes(a,o){return useRoutesImpl(a,o)}function useRoutesImpl(a,o,_e){useInRouterContext()||invariant(!1);let{navigator:tt}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),vt=ct[ct.length-1],nt=vt?vt.params:{};vt&&vt.pathname;let it=vt?vt.pathnameBase:"/";vt&&vt.route;let s=useLocation(),et;if(o){var rt;let st=typeof o=="string"?parsePath(o):o;it==="/"||(rt=st.pathname)!=null&&rt.startsWith(it)||invariant(!1),et=st}else et=s;let ot=et.pathname||"/",gt=it==="/"?ot:ot.slice(it.length)||"/",dt=matchRoutes(a,{pathname:gt}),pt=_renderMatches(dt&&dt.map(st=>Object.assign({},st,{params:Object.assign({},nt,st.params),pathname:joinPaths([it,tt.encodeLocation?tt.encodeLocation(st.pathname).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?it:joinPaths([it,tt.encodeLocation?tt.encodeLocation(st.pathnameBase).pathname:st.pathnameBase])})),ct,_e);return o&&pt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},et),navigationType:Action.Pop}},pt):pt}function DefaultErrorComponent(){let a=useRouteError(),o=isRouteErrorResponse(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),_e=a instanceof Error?a.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},vt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},o),_e?reactExports.createElement("pre",{style:ct},_e):null,vt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,_e){return _e.location!==o.location||_e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error||_e.error,location:_e.location,revalidation:o.revalidation||_e.revalidation}}componentDidCatch(o,_e){console.error("React Router caught the following error during render",o,_e)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(a){let{routeContext:o,match:_e,children:tt}=a,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(_e.route.errorElement||_e.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:o},tt)}function _renderMatches(a,o,_e){var tt;if(o===void 0&&(o=[]),_e===void 0&&(_e=null),a==null){var ct;if((ct=_e)!=null&&ct.errors)a=_e.matches;else return null}let vt=a,nt=(tt=_e)==null?void 0:tt.errors;if(nt!=null){let it=vt.findIndex(s=>s.route.id&&(nt==null?void 0:nt[s.route.id]));it>=0||invariant(!1),vt=vt.slice(0,Math.min(vt.length,it+1))}return vt.reduceRight((it,s,et)=>{let rt=s.route.id?nt==null?void 0:nt[s.route.id]:null,ot=null;_e&&(ot=s.route.errorElement||defaultErrorElement);let gt=o.concat(vt.slice(0,et+1)),dt=()=>{let pt;return rt?pt=ot:s.route.Component?pt=reactExports.createElement(s.route.Component,null):s.route.element?pt=s.route.element:pt=it,reactExports.createElement(RenderedRoute,{match:s,routeContext:{outlet:it,matches:gt,isDataRoute:_e!=null},children:pt})};return _e&&(s.route.ErrorBoundary||s.route.errorElement||et===0)?reactExports.createElement(RenderErrorBoundary,{location:_e.location,revalidation:_e.revalidation,component:ot,error:rt,children:dt(),routeContext:{outlet:null,matches:gt,isDataRoute:!0}}):dt()},null)}var DataRouterHook$1=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(DataRouterHook$1||{}),DataRouterStateHook$1=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(DataRouterStateHook$1||{});function useDataRouterContext(a){let o=reactExports.useContext(DataRouterContext);return o||invariant(!1),o}function useDataRouterState(a){let o=reactExports.useContext(DataRouterStateContext);return o||invariant(!1),o}function useRouteContext(a){let o=reactExports.useContext(RouteContext);return o||invariant(!1),o}function useCurrentRouteId(a){let o=useRouteContext(),_e=o.matches[o.matches.length-1];return _e.route.id||invariant(!1),_e.route.id}function useRouteError(){var a;let o=reactExports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),tt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return o||((a=_e.errors)==null?void 0:a[tt])}function useNavigateStable(){let{router:a}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),o=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{_e.current=!0}),reactExports.useCallback(function(ct,vt){vt===void 0&&(vt={}),_e.current&&(typeof ct=="number"?a.navigate(ct):a.navigate(ct,_extends$2({fromRouteId:o},vt)))},[a,o])}function Route(a){invariant(!1)}function Router(a){let{basename:o="/",children:_e=null,location:tt,navigationType:ct=Action.Pop,navigator:vt,static:nt=!1}=a;useInRouterContext()&&invariant(!1);let it=o.replace(/^\/*/,"/"),s=reactExports.useMemo(()=>({basename:it,navigator:vt,static:nt}),[it,vt,nt]);typeof tt=="string"&&(tt=parsePath(tt));let{pathname:et="/",search:rt="",hash:ot="",state:gt=null,key:dt="default"}=tt,pt=reactExports.useMemo(()=>{let st=stripBasename(et,it);return st==null?null:{location:{pathname:st,search:rt,hash:ot,state:gt,key:dt},navigationType:ct}},[it,et,rt,ot,gt,dt,ct]);return pt==null?null:reactExports.createElement(NavigationContext.Provider,{value:s},reactExports.createElement(LocationContext.Provider,{children:_e,value:pt}))}function Routes(a){let{children:o,location:_e}=a;return useRoutes(createRoutesFromChildren(o),_e)}new Promise(()=>{});function createRoutesFromChildren(a,o){o===void 0&&(o=[]);let _e=[];return reactExports.Children.forEach(a,(tt,ct)=>{if(!reactExports.isValidElement(tt))return;let vt=[...o,ct];if(tt.type===reactExports.Fragment){_e.push.apply(_e,createRoutesFromChildren(tt.props.children,vt));return}tt.type!==Route&&invariant(!1),!tt.props.index||!tt.props.children||invariant(!1);let nt={id:tt.props.id||vt.join("-"),caseSensitive:tt.props.caseSensitive,element:tt.props.element,Component:tt.props.Component,index:tt.props.index,path:tt.props.path,loader:tt.props.loader,action:tt.props.action,errorElement:tt.props.errorElement,ErrorBoundary:tt.props.ErrorBoundary,hasErrorBoundary:tt.props.ErrorBoundary!=null||tt.props.errorElement!=null,shouldRevalidate:tt.props.shouldRevalidate,handle:tt.props.handle,lazy:tt.props.lazy};tt.props.children&&(nt.children=createRoutesFromChildren(tt.props.children,vt)),_e.push(nt)}),_e}/**
 * React Router DOM v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createSearchParams(a){return a===void 0&&(a=""),new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((o,_e)=>{let tt=a[_e];return o.concat(Array.isArray(tt)?tt.map(ct=>[_e,ct]):[[_e,tt]])},[]))}function getSearchParamsForLocation(a,o){let _e=createSearchParams(a);return o&&o.forEach((tt,ct)=>{_e.has(ct)||o.getAll(ct).forEach(vt=>{_e.append(ct,vt)})}),_e}const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(a){let{basename:o,children:_e,future:tt,window:ct}=a,vt=reactExports.useRef();vt.current==null&&(vt.current=createBrowserHistory({window:ct,v5Compat:!0}));let nt=vt.current,[it,s]=reactExports.useState({action:nt.action,location:nt.location}),{v7_startTransition:et}=tt||{},rt=reactExports.useCallback(ot=>{et&&startTransitionImpl?startTransitionImpl(()=>s(ot)):s(ot)},[s,et]);return reactExports.useLayoutEffect(()=>nt.listen(rt),[nt,rt]),reactExports.createElement(Router,{basename:o,children:_e,location:it.location,navigationType:it.action,navigator:nt})}var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useSearchParams(a){let o=reactExports.useRef(createSearchParams(a)),_e=reactExports.useRef(!1),tt=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(tt.search,_e.current?null:o.current),[tt.search]),vt=useNavigate(),nt=reactExports.useCallback((it,s)=>{const et=createSearchParams(typeof it=="function"?it(ct):it);_e.current=!0,vt("?"+et,s)},[vt,ct]);return[ct,nt]}var lib={},uaParser_min={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",vt="",nt="?",it="function",s="undefined",et="object",rt="string",ot="major",gt="model",dt="name",pt="type",st="vendor",ht="version",at="architecture",ut="console",ft="mobile",mt="tablet",yt="smarttv",At="wearable",wt="embedded",Pt=350,Rt="Amazon",kt="Apple",bt="ASUS",Nt="BlackBerry",Ft="Browser",Ut="Chrome",Jt="Edge",hn="Firefox",Xt="Google",zt="Huawei",cn="LG",vn="Microsoft",Sn="Motorola",fn="Opera",mn="Samsung",bn="Sharp",un="Sony",Tn="Xiaomi",kn="Zebra",xn="Facebook",An="Chromium OS",En="Mac OS",Rn=function(Nn,Un){var Cn={};for(var Mn in Nn)Un[Mn]&&Un[Mn].length%2===0?Cn[Mn]=Un[Mn].concat(Nn[Mn]):Cn[Mn]=Nn[Mn];return Cn},wn=function(Nn){for(var Un={},Cn=0;Cn<Nn.length;Cn++)Un[Nn[Cn].toUpperCase()]=Nn[Cn];return Un},Dn=function(Nn,Un){return typeof Nn===rt?Bn(Un).indexOf(Bn(Nn))!==-1:!1},Bn=function(Nn){return Nn.toLowerCase()},zn=function(Nn){return typeof Nn===rt?Nn.replace(/[^\d\.]/g,vt).split(".")[0]:tt},Hn=function(Nn,Un){if(typeof Nn===rt)return Nn=Nn.replace(/^\s\s*/,vt),typeof Un===s?Nn:Nn.substring(0,Pt)},nr=function(Nn,Un){for(var Cn=0,Mn,Kt,Ot,lt,Tt,It;Cn<Un.length&&!Tt;){var Dt=Un[Cn],Et=Un[Cn+1];for(Mn=Kt=0;Mn<Dt.length&&!Tt&&Dt[Mn];)if(Tt=Dt[Mn++].exec(Nn),Tt)for(Ot=0;Ot<Et.length;Ot++)It=Tt[++Kt],lt=Et[Ot],typeof lt===et&&lt.length>0?lt.length===2?typeof lt[1]==it?this[lt[0]]=lt[1].call(this,It):this[lt[0]]=lt[1]:lt.length===3?typeof lt[1]===it&&!(lt[1].exec&&lt[1].test)?this[lt[0]]=It?lt[1].call(this,It,lt[2]):tt:this[lt[0]]=It?It.replace(lt[1],lt[2]):tt:lt.length===4&&(this[lt[0]]=It?lt[3].call(this,It.replace(lt[1],lt[2])):tt):this[lt]=It||tt;Cn+=2}},sn=function(Nn,Un){for(var Cn in Un)if(typeof Un[Cn]===et&&Un[Cn].length>0){for(var Mn=0;Mn<Un[Cn].length;Mn++)if(Dn(Un[Cn][Mn],Nn))return Cn===nt?tt:Cn}else if(Dn(Un[Cn],Nn))return Cn===nt?tt:Cn;return Nn},Gn={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Zn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ht,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ht,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,ht],[/opios[\/ ]+([\w\.]+)/i],[ht,[dt,fn+" Mini"]],[/\bopr\/([\w\.]+)/i],[ht,[dt,fn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,ht],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ht,[dt,"UC"+Ft]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ht,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ht,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ht,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ht,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ht,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ft],ht],[/\bfocus\/([\w\.]+)/i],[ht,[dt,hn+" Focus"]],[/\bopt\/([\w\.]+)/i],[ht,[dt,fn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ht,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ht,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[ht,[dt,fn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[ht,[dt,"MIUI "+Ft]],[/fxios\/([-\w\.]+)/i],[ht,[dt,hn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ft]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ft],ht],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],ht],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,ht],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,xn],ht],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,ht],[/\bgsa\/([\w\.]+) .*safari\//i],[ht,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ht,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ht,[dt,Ut+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Ut+" WebView"],ht],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ht,[dt,"Android "+Ft]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,ht],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ht,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ht,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[ht,sn,Gn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,ht],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],ht],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ht,[dt,hn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,ht],[/(cobalt)\/([\w\.]+)/i],[dt,[ht,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[at,"amd64"]],[/(ia32(?=;))/i],[[at,Bn]],[/((?:i[346]|x)86)[;\)]/i],[[at,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[at,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[at,"armhf"]],[/windows (ce|mobile); ppc;/i],[[at,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[at,/ower/,vt,Bn]],[/(sun4\w)[;\)]/i],[[at,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[at,Bn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[gt,[st,mn],[pt,mt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[gt,[st,mn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[gt,[st,kt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[gt,[st,kt],[pt,mt]],[/(macintosh);/i],[gt,[st,kt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[gt,[st,bn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[gt,[st,zt],[pt,mt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[gt,[st,zt],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[gt,/_/g," "],[st,Tn],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[gt,/_/g," "],[st,Tn],[pt,mt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[gt,[st,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[gt,[st,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[gt,[st,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[gt,[st,Sn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[gt,[st,Sn],[pt,mt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[gt,[st,cn],[pt,mt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[gt,[st,cn],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[gt,[st,"Lenovo"],[pt,mt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[gt,/_/g," "],[st,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[gt,[st,Xt],[pt,mt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[gt,[st,Xt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[gt,[st,un],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[gt,"Xperia Tablet"],[st,un],[pt,mt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[gt,[st,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[gt,[st,Rt],[pt,mt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[gt,/(.+)/g,"Fire Phone $1"],[st,Rt],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[gt,st,[pt,mt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[gt,[st,Nt],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[gt,[st,bt],[pt,mt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[gt,[st,bt],[pt,ft]],[/(nexus 9)/i],[gt,[st,"HTC"],[pt,mt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[st,[gt,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[gt,[st,"Acer"],[pt,mt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[gt,[st,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[st,gt,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[st,gt,[pt,mt]],[/(surface duo)/i],[gt,[st,vn],[pt,mt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[gt,[st,"Fairphone"],[pt,ft]],[/(u304aa)/i],[gt,[st,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[gt,[st,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[gt,[st,"RCA"],[pt,mt]],[/\b(venue[\d ]{2,7}) b/i],[gt,[st,"Dell"],[pt,mt]],[/\b(q(?:mv|ta)\w+) b/i],[gt,[st,"Verizon"],[pt,mt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[gt,[st,"Barnes & Noble"],[pt,mt]],[/\b(tm\d{3}\w+) b/i],[gt,[st,"NuVision"],[pt,mt]],[/\b(k88) b/i],[gt,[st,"ZTE"],[pt,mt]],[/\b(nx\d{3}j) b/i],[gt,[st,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[gt,[st,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[gt,[st,"Swiss"],[pt,mt]],[/\b((zeki)?tb.*\b) b/i],[gt,[st,"Zeki"],[pt,mt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[st,"Dragon Touch"],gt,[pt,mt]],[/\b(ns-?\w{0,9}) b/i],[gt,[st,"Insignia"],[pt,mt]],[/\b((nxa|next)-?\w{0,9}) b/i],[gt,[st,"NextBook"],[pt,mt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[st,"Voice"],gt,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[st,"LvTel"],gt,[pt,ft]],[/\b(ph-1) /i],[gt,[st,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[gt,[st,"Envizen"],[pt,mt]],[/\b(trio[-\w\. ]+) b/i],[gt,[st,"MachSpeed"],[pt,mt]],[/\btu_(1491) b/i],[gt,[st,"Rotor"],[pt,mt]],[/(shield[\w ]+) b/i],[gt,[st,"Nvidia"],[pt,mt]],[/(sprint) (\w+)/i],[st,gt,[pt,ft]],[/(kin\.[onetw]{3})/i],[[gt,/\./g," "],[st,vn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[gt,[st,kn],[pt,mt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[gt,[st,kn],[pt,ft]],[/smart-tv.+(samsung)/i],[st,[pt,yt]],[/hbbtv.+maple;(\d+)/i],[[gt,/^/,"SmartTV"],[st,mn],[pt,yt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[st,cn],[pt,yt]],[/(apple) ?tv/i],[st,[gt,kt+" TV"],[pt,yt]],[/crkey/i],[[gt,Ut+"cast"],[st,Xt],[pt,yt]],[/droid.+aft(\w+)( bui|\))/i],[gt,[st,Rt],[pt,yt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[gt,[st,bn],[pt,yt]],[/(bravia[\w ]+)( bui|\))/i],[gt,[st,un],[pt,yt]],[/(mitv-\w{5}) bui/i],[gt,[st,Tn],[pt,yt]],[/Hbbtv.*(technisat) (.*);/i],[st,gt,[pt,yt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[st,Hn],[gt,Hn],[pt,yt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,yt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[st,gt,[pt,ut]],[/droid.+; (shield) bui/i],[gt,[st,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[gt,[st,un],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[gt,[st,vn],[pt,ut]],[/((pebble))app/i],[st,gt,[pt,At]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[gt,[st,kt],[pt,At]],[/droid.+; (glass) \d/i],[gt,[st,Xt],[pt,At]],[/droid.+; (wt63?0{2,3})\)/i],[gt,[st,kn],[pt,At]],[/(quest( 2| pro)?)/i],[gt,[st,xn],[pt,At]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[st,[pt,wt]],[/(aeobc)\b/i],[gt,[st,Rt],[pt,wt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[gt,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[gt,[pt,mt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,mt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[gt,[st,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ht,[dt,Jt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ht,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,ht],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ht,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,ht],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[ht,sn,Zn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[ht,sn,Zn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ht,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,En],[ht,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ht,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,ht],[/\(bb(10);/i],[ht,[dt,Nt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ht,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ht,[dt,hn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ht,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ht,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[ht,[dt,Ut+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,An],ht],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,ht],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],ht],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,ht]]},Fn=function(Nn,Un){if(typeof Nn===et&&(Un=Nn,Nn=tt),!(this instanceof Fn))return new Fn(Nn,Un).getResult();var Cn=typeof _e!==s&&_e.navigator?_e.navigator:tt,Mn=Nn||(Cn&&Cn.userAgent?Cn.userAgent:vt),Kt=Cn&&Cn.userAgentData?Cn.userAgentData:tt,Ot=Un?Rn(rr,Un):rr,lt=Cn&&Cn.userAgent==Mn;return this.getBrowser=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.browser),Tt[ot]=zn(Tt[ht]),lt&&Cn&&Cn.brave&&typeof Cn.brave.isBrave==it&&(Tt[dt]="Brave"),Tt},this.getCPU=function(){var Tt={};return Tt[at]=tt,nr.call(Tt,Mn,Ot.cpu),Tt},this.getDevice=function(){var Tt={};return Tt[st]=tt,Tt[gt]=tt,Tt[pt]=tt,nr.call(Tt,Mn,Ot.device),lt&&!Tt[pt]&&Kt&&Kt.mobile&&(Tt[pt]=ft),lt&&Tt[gt]=="Macintosh"&&Cn&&typeof Cn.standalone!==s&&Cn.maxTouchPoints&&Cn.maxTouchPoints>2&&(Tt[gt]="iPad",Tt[pt]=mt),Tt},this.getEngine=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.engine),Tt},this.getOS=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.os),lt&&!Tt[dt]&&Kt&&Kt.platform!="Unknown"&&(Tt[dt]=Kt.platform.replace(/chrome os/i,An).replace(/macos/i,En)),Tt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mn},this.setUA=function(Tt){return Mn=typeof Tt===rt&&Tt.length>Pt?Hn(Tt,Pt):Tt,this},this.setUA(Mn),this};Fn.VERSION=ct,Fn.BROWSER=wn([dt,ht,ot]),Fn.CPU=wn([at]),Fn.DEVICE=wn([gt,st,pt,ut,ft,yt,mt,At,wt]),Fn.ENGINE=Fn.OS=wn([dt,ht]),a.exports&&(o=a.exports=Fn),o.UAParser=Fn;var Xn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(Xn&&!Xn.ua){var Yn=new Fn;Xn.ua=Yn.getResult(),Xn.ua.get=function(){return Yn.getUA()},Xn.ua.set=function(Nn){Yn.setUA(Nn);var Un=Yn.getResult();for(var Cn in Un)Xn.ua[Cn]=Un[Cn]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);var uaParser_minExports=uaParser_min.exports;Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(a){return a&&typeof a=="object"&&"default"in a?a.default:a}var React=reactExports,React__default=_interopDefault(React),UAParser$1=uaParser_minExports,ClientUAInstance=new UAParser$1,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function(o){return ClientUAInstance.setUA(o)},parseUserAgent=function(o){if(!o){console.error("No userAgent string was provided");return}var _e=new UAParser$1(o);return{UA:_e,browser:_e.getBrowser(),cpu:_e.getCPU(),device:_e.getDevice(),engine:_e.getEngine(),os:_e.getOS(),ua:_e.getUA(),setUserAgent:function(ct){return _e.setUA(ct)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(a,o){var _e=Object.keys(a);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(a);o&&(tt=tt.filter(function(ct){return Object.getOwnPropertyDescriptor(a,ct).enumerable})),_e.push.apply(_e,tt)}return _e}function _objectSpread2(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(_e),!0).forEach(function(tt){_defineProperty(a,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(tt){Object.defineProperty(a,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return a}function _typeof(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(a)}function _classCallCheck(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,o){for(var _e=0;_e<o.length;_e++){var tt=o[_e];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(a,tt.key,tt)}}function _createClass(a,o,_e){return o&&_defineProperties(a.prototype,o),_e&&_defineProperties(a,_e),a}function _defineProperty(a,o,_e){return o in a?Object.defineProperty(a,o,{value:_e,enumerable:!0,configurable:!0,writable:!0}):a[o]=_e,a}function _extends$1(){return _extends$1=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$1.apply(this,arguments)}function _inherits(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&_setPrototypeOf$1(a,o)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf(a)}function _setPrototypeOf$1(a,o){return _setPrototypeOf$1=Object.setPrototypeOf||function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf$1(a,o)}function _objectWithoutPropertiesLoose$1(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,vt;for(vt=0;vt<tt.length;vt++)ct=tt[vt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _objectWithoutProperties(a,o){if(a==null)return{};var _e=_objectWithoutPropertiesLoose$1(a,o),tt,ct;if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(a);for(ct=0;ct<vt.length;ct++)tt=vt[ct],!(o.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(a,tt)&&(_e[tt]=a[tt])}return _e}function _assertThisInitialized$1(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _possibleConstructorReturn(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(a)}function _slicedToArray(a,o){return _arrayWithHoles(a)||_iterableToArrayLimit(a,o)||_unsupportedIterableToArray(a,o)||_nonIterableRest()}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _iterableToArrayLimit(a,o){var _e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(_e!=null){var tt=[],ct=!0,vt=!1,nt,it;try{for(_e=_e.call(a);!(ct=(nt=_e.next()).done)&&(tt.push(nt.value),!(o&&tt.length===o));ct=!0);}catch(s){vt=!0,it=s}finally{try{!ct&&_e.return!=null&&_e.return()}finally{if(vt)throw it}}return tt}}function _unsupportedIterableToArray(a,o){if(a){if(typeof a=="string")return _arrayLikeToArray(a,o);var _e=Object.prototype.toString.call(a).slice(8,-1);if(_e==="Object"&&a.constructor&&(_e=a.constructor.name),_e==="Map"||_e==="Set")return Array.from(a);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(a,o)}}function _arrayLikeToArray(a,o){(o==null||o>a.length)&&(o=a.length);for(var _e=0,tt=new Array(o);_e<o;_e++)tt[_e]=a[_e];return tt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function(o){switch(o){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function(o){return setUa(o)},setDefaults=function(o){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return o||_e},getNavigatorInstance=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function(o){var _e=getNavigatorInstance();return _e&&_e.platform&&(_e.platform.indexOf(o)!==-1||_e.platform==="MacIntel"&&_e.maxTouchPoints>1&&!window.MSStream)},browserPayload=function(o,_e,tt,ct,vt){return{isBrowser:o,browserMajorVersion:setDefaults(_e.major),browserFullVersion:setDefaults(_e.version),browserName:setDefaults(_e.name),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(vt)}},mobilePayload=function(o,_e,tt,ct){return _objectSpread2({},o,{vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),os:setDefaults(tt.name),osVersion:setDefaults(tt.version),ua:setDefaults(ct)})},smartTvPayload=function(o,_e,tt,ct){return{isSmartTV:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},consolePayload=function(o,_e,tt,ct){return{isConsole:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},wearablePayload=function(o,_e,tt,ct){return{isWearable:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},embeddedPayload=function(o,_e,tt,ct,vt){return{isEmbedded:o,vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(vt)}};function deviceDetect(a){var o=a?parseUserAgent(a):UAHelper,_e=o.device,tt=o.browser,ct=o.engine,vt=o.os,nt=o.ua,it=checkDeviceType(_e.type),s=it.isBrowser,et=it.isMobile,rt=it.isTablet,ot=it.isSmartTV,gt=it.isConsole,dt=it.isWearable,pt=it.isEmbedded;if(s)return browserPayload(s,tt,ct,vt,nt);if(ot)return smartTvPayload(ot,ct,vt,nt);if(gt)return consolePayload(gt,ct,vt,nt);if(et||rt)return mobilePayload(it,_e,vt,nt);if(dt)return wearablePayload(dt,ct,vt,nt);if(pt)return embeddedPayload(pt,_e,ct,vt,nt)}var isMobileType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile},isTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Tablet},isMobileAndTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile||_e===DeviceTypes.Tablet},isSmartTVType=function(o){var _e=o.type;return _e===DeviceTypes.SmartTv},isBrowserType=function(o){var _e=o.type;return _e===DeviceTypes.Browser},isWearableType=function(o){var _e=o.type;return _e===DeviceTypes.Wearable},isConsoleType=function(o){var _e=o.type;return _e===DeviceTypes.Console},isEmbeddedType=function(o){var _e=o.type;return _e===DeviceTypes.Embedded},getMobileVendor=function(o){var _e=o.vendor;return setDefaults(_e)},getMobileModel=function(o){var _e=o.model;return setDefaults(_e)},getDeviceType=function(o){var _e=o.type;return setDefaults(_e,"browser")},isAndroidType=function(o){var _e=o.name;return _e===OsTypes.Android},isWindowsType=function(o){var _e=o.name;return _e===OsTypes.Windows},isMacOsType=function(o){var _e=o.name;return _e===OsTypes.MAC_OS},isWinPhoneType=function(o){var _e=o.name;return _e===OsTypes.WindowsPhone},isIOSType=function(o){var _e=o.name;return _e===OsTypes.IOS},getOsVersion=function(o){var _e=o.version;return setDefaults(_e)},getOsName=function(o){var _e=o.name;return setDefaults(_e)},isChromeType=function(o){var _e=o.name;return _e===BrowserTypes.Chrome},isFirefoxType=function(o){var _e=o.name;return _e===BrowserTypes.Firefox},isChromiumType=function(o){var _e=o.name;return _e===BrowserTypes.Chromium},isEdgeType=function(o){var _e=o.name;return _e===BrowserTypes.Edge},isYandexType=function(o){var _e=o.name;return _e===BrowserTypes.Yandex},isSafariType=function(o){var _e=o.name;return _e===BrowserTypes.Safari||_e===BrowserTypes.MobileSafari},isMobileSafariType=function(o){var _e=o.name;return _e===BrowserTypes.MobileSafari},isOperaType=function(o){var _e=o.name;return _e===BrowserTypes.Opera},isIEType=function(o){var _e=o.name;return _e===BrowserTypes.InternetExplorer||_e===BrowserTypes.Ie},isMIUIType=function(o){var _e=o.name;return _e===BrowserTypes.MIUI},isSamsungBrowserType=function(o){var _e=o.name;return _e===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function(o){var _e=o.version;return setDefaults(_e)},getBrowserVersion=function(o){var _e=o.major;return setDefaults(_e)},getBrowserName=function(o){var _e=o.name;return setDefaults(_e)},getEngineName=function(o){var _e=o.name;return setDefaults(_e)},getEngineVersion=function(o){var _e=o.version;return setDefaults(_e)},isElectronType=function(){var o=getNavigatorInstance(),_e=o&&o.userAgent&&o.userAgent.toLowerCase();return typeof _e=="string"?/electron/.test(_e):!1},isEdgeChromiumType=function(o){return typeof o=="string"&&o.indexOf("Edg/")!==-1},getIOS13=function(){var o=getNavigatorInstance();return o&&(/iPad|iPhone|iPod/.test(o.platform)||o.platform==="MacIntel"&&o.maxTouchPoints>1)&&!window.MSStream},getIPad13=function(){return isIOS13Check("iPad")},getIphone13=function(){return isIOS13Check("iPhone")},getIPod13=function(){return isIOS13Check("iPod")},getUseragent=function(o){return setDefaults(o)};function buildSelectorsObject(a){var o=a||UAHelper,_e=o.device,tt=o.browser,ct=o.os,vt=o.engine,nt=o.ua;return{isSmartTV:isSmartTVType(_e),isConsole:isConsoleType(_e),isWearable:isWearableType(_e),isEmbedded:isEmbeddedType(_e),isMobileSafari:isMobileSafariType(tt)||getIPad13(),isChromium:isChromiumType(tt),isMobile:isMobileAndTabletType(_e)||getIPad13(),isMobileOnly:isMobileType(_e),isTablet:isTabletType(_e)||getIPad13(),isBrowser:isBrowserType(_e),isDesktop:isBrowserType(_e),isAndroid:isAndroidType(ct),isWinPhone:isWinPhoneType(ct),isIOS:isIOSType(ct)||getIPad13(),isChrome:isChromeType(tt),isFirefox:isFirefoxType(tt),isSafari:isSafariType(tt),isOpera:isOperaType(tt),isIE:isIEType(tt),osVersion:getOsVersion(ct),osName:getOsName(ct),fullBrowserVersion:getBrowserFullVersion(tt),browserVersion:getBrowserVersion(tt),browserName:getBrowserName(tt),mobileVendor:getMobileVendor(_e),mobileModel:getMobileModel(_e),engineName:getEngineName(vt),engineVersion:getEngineVersion(vt),getUA:getUseragent(nt),isEdge:isEdgeType(tt)||isEdgeChromiumType(nt),isYandex:isYandexType(tt),deviceType:getDeviceType(_e),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(nt),isLegacyEdge:isEdgeType(tt)&&!isEdgeChromiumType(nt),isWindows:isWindowsType(ct),isMacOs:isMacOsType(ct),isMIUI:isMIUIType(tt),isSamsungBrowser:isSamsungBrowserType(tt)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser$1=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function(o){if(!o||typeof o!="string"){console.error("No valid user agent string was provided");return}var _e=parseUserAgent(o),tt=_e.device,ct=_e.browser,vt=_e.os,nt=_e.engine,it=_e.ua;return buildSelectorsObject({device:tt,browser:ct,os:vt,engine:nt,ua:it})},AndroidView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isAndroid?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},BrowserView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isBrowser$1?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IEView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIE?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IOSView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIOS?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isMobile?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},TabletView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isTablet?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WinPhoneView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWinPhone?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileOnlyView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},SmartTVView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isSmartTV?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},ConsoleView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isConsole?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WearableView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWearable?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},CustomView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=o.condition,vt=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style","condition"]);return ct?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",vt,tt):null};function withOrientationChange(a){return function(o){_inherits(_e,o);function _e(tt){var ct;return _classCallCheck(this,_e),ct=_possibleConstructorReturn(this,_getPrototypeOf(_e).call(this,tt)),ct.isEventListenerAdded=!1,ct.handleOrientationChange=ct.handleOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onOrientationChange=ct.onOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onPageLoad=ct.onPageLoad.bind(_assertThisInitialized$1(ct)),ct.state={isLandscape:!1,isPortrait:!1},ct}return _createClass(_e,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var ct=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:ct===0,isLandscape:ct===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(a,_extends$1({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),_e}(React__default.Component)}function useMobileOrientation(){var a=React.useState(function(){var vt=window.innerWidth>window.innerHeight?90:0;return{isPortrait:vt===0,isLandscape:vt===90,orientation:vt===0?"portrait":"landscape"}}),o=_slicedToArray(a,2),_e=o[0],tt=o[1],ct=React.useCallback(function(){var vt=window.innerWidth>window.innerHeight?90:0,nt={isPortrait:vt===0,isLandscape:vt===90,orientation:vt===0?"portrait":"landscape"};_e.orientation!==nt.orientation&&tt(nt)},[_e.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(ct(),window.addEventListener("load",ct,!1),window.addEventListener("resize",ct,!1)),function(){window.removeEventListener("resize",ct,!1),window.removeEventListener("load",ct,!1)}},[ct]),_e}function useDeviceData(a){var o=a||window.navigator.userAgent;return parseUserAgent(o)}function useDeviceSelectors(a){var o=a||window.navigator.userAgent,_e=useDeviceData(o),tt=buildSelectorsObject(_e);return[tt,_e]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser$1;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;var isMobile_1=lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;var uaParser={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",vt="",nt="?",it="function",s="undefined",et="object",rt="string",ot="major",gt="model",dt="name",pt="type",st="vendor",ht="version",at="architecture",ut="console",ft="mobile",mt="tablet",yt="smarttv",At="wearable",wt="embedded",Pt=350,Rt="Amazon",kt="Apple",bt="ASUS",Nt="BlackBerry",Ft="Browser",Ut="Chrome",Jt="Edge",hn="Firefox",Xt="Google",zt="Huawei",cn="LG",vn="Microsoft",Sn="Motorola",fn="Opera",mn="Samsung",bn="Sharp",un="Sony",Tn="Xiaomi",kn="Zebra",xn="Facebook",An="Chromium OS",En="Mac OS",Rn=function(Nn,Un){var Cn={};for(var Mn in Nn)Un[Mn]&&Un[Mn].length%2===0?Cn[Mn]=Un[Mn].concat(Nn[Mn]):Cn[Mn]=Nn[Mn];return Cn},wn=function(Nn){for(var Un={},Cn=0;Cn<Nn.length;Cn++)Un[Nn[Cn].toUpperCase()]=Nn[Cn];return Un},Dn=function(Nn,Un){return typeof Nn===rt?Bn(Un).indexOf(Bn(Nn))!==-1:!1},Bn=function(Nn){return Nn.toLowerCase()},zn=function(Nn){return typeof Nn===rt?Nn.replace(/[^\d\.]/g,vt).split(".")[0]:tt},Hn=function(Nn,Un){if(typeof Nn===rt)return Nn=Nn.replace(/^\s\s*/,vt),typeof Un===s?Nn:Nn.substring(0,Pt)},nr=function(Nn,Un){for(var Cn=0,Mn,Kt,Ot,lt,Tt,It;Cn<Un.length&&!Tt;){var Dt=Un[Cn],Et=Un[Cn+1];for(Mn=Kt=0;Mn<Dt.length&&!Tt&&Dt[Mn];)if(Tt=Dt[Mn++].exec(Nn),Tt)for(Ot=0;Ot<Et.length;Ot++)It=Tt[++Kt],lt=Et[Ot],typeof lt===et&&lt.length>0?lt.length===2?typeof lt[1]==it?this[lt[0]]=lt[1].call(this,It):this[lt[0]]=lt[1]:lt.length===3?typeof lt[1]===it&&!(lt[1].exec&&lt[1].test)?this[lt[0]]=It?lt[1].call(this,It,lt[2]):tt:this[lt[0]]=It?It.replace(lt[1],lt[2]):tt:lt.length===4&&(this[lt[0]]=It?lt[3].call(this,It.replace(lt[1],lt[2])):tt):this[lt]=It||tt;Cn+=2}},sn=function(Nn,Un){for(var Cn in Un)if(typeof Un[Cn]===et&&Un[Cn].length>0){for(var Mn=0;Mn<Un[Cn].length;Mn++)if(Dn(Un[Cn][Mn],Nn))return Cn===nt?tt:Cn}else if(Dn(Un[Cn],Nn))return Cn===nt?tt:Cn;return Nn},Gn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Zn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},rr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ht,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ht,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,ht],[/opios[\/ ]+([\w\.]+)/i],[ht,[dt,fn+" Mini"]],[/\bopr\/([\w\.]+)/i],[ht,[dt,fn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,ht],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ht,[dt,"UC"+Ft]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ht,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ht,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ht,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ht,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ht,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ft],ht],[/\bfocus\/([\w\.]+)/i],[ht,[dt,hn+" Focus"]],[/\bopt\/([\w\.]+)/i],[ht,[dt,fn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ht,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ht,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[ht,[dt,fn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[ht,[dt,"MIUI "+Ft]],[/fxios\/([-\w\.]+)/i],[ht,[dt,hn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ft]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ft],ht],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],ht],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,ht],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,xn],ht],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,ht],[/\bgsa\/([\w\.]+) .*safari\//i],[ht,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ht,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ht,[dt,Ut+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Ut+" WebView"],ht],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ht,[dt,"Android "+Ft]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,ht],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ht,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ht,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[ht,sn,Gn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,ht],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],ht],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ht,[dt,hn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,ht],[/(cobalt)\/([\w\.]+)/i],[dt,[ht,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[at,"amd64"]],[/(ia32(?=;))/i],[[at,Bn]],[/((?:i[346]|x)86)[;\)]/i],[[at,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[at,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[at,"armhf"]],[/windows (ce|mobile); ppc;/i],[[at,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[at,/ower/,vt,Bn]],[/(sun4\w)[;\)]/i],[[at,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[at,Bn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[gt,[st,mn],[pt,mt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[gt,[st,mn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[gt,[st,kt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[gt,[st,kt],[pt,mt]],[/(macintosh);/i],[gt,[st,kt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[gt,[st,bn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[gt,[st,zt],[pt,mt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[gt,[st,zt],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[gt,/_/g," "],[st,Tn],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[gt,/_/g," "],[st,Tn],[pt,mt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[gt,[st,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[gt,[st,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[gt,[st,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[gt,[st,Sn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[gt,[st,Sn],[pt,mt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[gt,[st,cn],[pt,mt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[gt,[st,cn],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[gt,[st,"Lenovo"],[pt,mt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[gt,/_/g," "],[st,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[gt,[st,Xt],[pt,mt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[gt,[st,Xt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[gt,[st,un],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[gt,"Xperia Tablet"],[st,un],[pt,mt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[gt,[st,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[gt,[st,Rt],[pt,mt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[gt,/(.+)/g,"Fire Phone $1"],[st,Rt],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[gt,st,[pt,mt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[gt,[st,Nt],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[gt,[st,bt],[pt,mt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[gt,[st,bt],[pt,ft]],[/(nexus 9)/i],[gt,[st,"HTC"],[pt,mt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[st,[gt,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[gt,[st,"Acer"],[pt,mt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[gt,[st,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[st,gt,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[st,gt,[pt,mt]],[/(surface duo)/i],[gt,[st,vn],[pt,mt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[gt,[st,"Fairphone"],[pt,ft]],[/(u304aa)/i],[gt,[st,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[gt,[st,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[gt,[st,"RCA"],[pt,mt]],[/\b(venue[\d ]{2,7}) b/i],[gt,[st,"Dell"],[pt,mt]],[/\b(q(?:mv|ta)\w+) b/i],[gt,[st,"Verizon"],[pt,mt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[gt,[st,"Barnes & Noble"],[pt,mt]],[/\b(tm\d{3}\w+) b/i],[gt,[st,"NuVision"],[pt,mt]],[/\b(k88) b/i],[gt,[st,"ZTE"],[pt,mt]],[/\b(nx\d{3}j) b/i],[gt,[st,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[gt,[st,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[gt,[st,"Swiss"],[pt,mt]],[/\b((zeki)?tb.*\b) b/i],[gt,[st,"Zeki"],[pt,mt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[st,"Dragon Touch"],gt,[pt,mt]],[/\b(ns-?\w{0,9}) b/i],[gt,[st,"Insignia"],[pt,mt]],[/\b((nxa|next)-?\w{0,9}) b/i],[gt,[st,"NextBook"],[pt,mt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[st,"Voice"],gt,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[st,"LvTel"],gt,[pt,ft]],[/\b(ph-1) /i],[gt,[st,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[gt,[st,"Envizen"],[pt,mt]],[/\b(trio[-\w\. ]+) b/i],[gt,[st,"MachSpeed"],[pt,mt]],[/\btu_(1491) b/i],[gt,[st,"Rotor"],[pt,mt]],[/(shield[\w ]+) b/i],[gt,[st,"Nvidia"],[pt,mt]],[/(sprint) (\w+)/i],[st,gt,[pt,ft]],[/(kin\.[onetw]{3})/i],[[gt,/\./g," "],[st,vn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[gt,[st,kn],[pt,mt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[gt,[st,kn],[pt,ft]],[/smart-tv.+(samsung)/i],[st,[pt,yt]],[/hbbtv.+maple;(\d+)/i],[[gt,/^/,"SmartTV"],[st,mn],[pt,yt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[st,cn],[pt,yt]],[/(apple) ?tv/i],[st,[gt,kt+" TV"],[pt,yt]],[/crkey/i],[[gt,Ut+"cast"],[st,Xt],[pt,yt]],[/droid.+aft(\w+)( bui|\))/i],[gt,[st,Rt],[pt,yt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[gt,[st,bn],[pt,yt]],[/(bravia[\w ]+)( bui|\))/i],[gt,[st,un],[pt,yt]],[/(mitv-\w{5}) bui/i],[gt,[st,Tn],[pt,yt]],[/Hbbtv.*(technisat) (.*);/i],[st,gt,[pt,yt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[st,Hn],[gt,Hn],[pt,yt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,yt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[st,gt,[pt,ut]],[/droid.+; (shield) bui/i],[gt,[st,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[gt,[st,un],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[gt,[st,vn],[pt,ut]],[/((pebble))app/i],[st,gt,[pt,At]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[gt,[st,kt],[pt,At]],[/droid.+; (glass) \d/i],[gt,[st,Xt],[pt,At]],[/droid.+; (wt63?0{2,3})\)/i],[gt,[st,kn],[pt,At]],[/(quest( 2| pro)?)/i],[gt,[st,xn],[pt,At]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[st,[pt,wt]],[/(aeobc)\b/i],[gt,[st,Rt],[pt,wt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[gt,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[gt,[pt,mt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,mt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[gt,[st,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ht,[dt,Jt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ht,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,ht],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ht,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,ht],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[ht,sn,Zn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[ht,sn,Zn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ht,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,En],[ht,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ht,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,ht],[/\(bb(10);/i],[ht,[dt,Nt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ht,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ht,[dt,hn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ht,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ht,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[ht,[dt,Ut+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,An],ht],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,ht],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],ht],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,ht]]},Fn=function(Nn,Un){if(typeof Nn===et&&(Un=Nn,Nn=tt),!(this instanceof Fn))return new Fn(Nn,Un).getResult();var Cn=typeof _e!==s&&_e.navigator?_e.navigator:tt,Mn=Nn||(Cn&&Cn.userAgent?Cn.userAgent:vt),Kt=Cn&&Cn.userAgentData?Cn.userAgentData:tt,Ot=Un?Rn(rr,Un):rr,lt=Cn&&Cn.userAgent==Mn;return this.getBrowser=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.browser),Tt[ot]=zn(Tt[ht]),lt&&Cn&&Cn.brave&&typeof Cn.brave.isBrave==it&&(Tt[dt]="Brave"),Tt},this.getCPU=function(){var Tt={};return Tt[at]=tt,nr.call(Tt,Mn,Ot.cpu),Tt},this.getDevice=function(){var Tt={};return Tt[st]=tt,Tt[gt]=tt,Tt[pt]=tt,nr.call(Tt,Mn,Ot.device),lt&&!Tt[pt]&&Kt&&Kt.mobile&&(Tt[pt]=ft),lt&&Tt[gt]=="Macintosh"&&Cn&&typeof Cn.standalone!==s&&Cn.maxTouchPoints&&Cn.maxTouchPoints>2&&(Tt[gt]="iPad",Tt[pt]=mt),Tt},this.getEngine=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.engine),Tt},this.getOS=function(){var Tt={};return Tt[dt]=tt,Tt[ht]=tt,nr.call(Tt,Mn,Ot.os),lt&&!Tt[dt]&&Kt&&Kt.platform!="Unknown"&&(Tt[dt]=Kt.platform.replace(/chrome os/i,An).replace(/macos/i,En)),Tt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Mn},this.setUA=function(Tt){return Mn=typeof Tt===rt&&Tt.length>Pt?Hn(Tt,Pt):Tt,this},this.setUA(Mn),this};Fn.VERSION=ct,Fn.BROWSER=wn([dt,ht,ot]),Fn.CPU=wn([at]),Fn.DEVICE=wn([gt,st,pt,ut,ft,yt,mt,At,wt]),Fn.ENGINE=Fn.OS=wn([dt,ht]),a.exports&&(o=a.exports=Fn),o.UAParser=Fn;var Xn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(Xn&&!Xn.ua){var Yn=new Fn;Xn.ua=Yn.getResult(),Xn.ua.get=function(){return Yn.getUA()},Xn.ua.set=function(Nn){Yn.setUA(Nn);var Un=Yn.getResult();for(var Cn in Un)Xn.ua[Cn]=Un[Cn]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports,base64={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */base64.exports;(function(a,o){(function(_e){var tt=o,ct=a&&a.exports==tt&&a,vt=typeof commonjsGlobal=="object"&&commonjsGlobal;(vt.global===vt||vt.window===vt)&&(_e=vt);var nt=function(pt){this.message=pt};nt.prototype=new Error,nt.prototype.name="InvalidCharacterError";var it=function(pt){throw new nt(pt)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=/[\t\n\f\r ]/g,rt=function(pt){pt=String(pt).replace(et,"");var st=pt.length;st%4==0&&(pt=pt.replace(/==?$/,""),st=pt.length),(st%4==1||/[^+a-zA-Z0-9/]/.test(pt))&&it("Invalid character: the string to be decoded is not correctly encoded.");for(var ht=0,at,ut,ft="",mt=-1;++mt<st;)ut=s.indexOf(pt.charAt(mt)),at=ht%4?at*64+ut:ut,ht++%4&&(ft+=String.fromCharCode(255&at>>(-2*ht&6)));return ft},ot=function(pt){pt=String(pt),/[^\0-\xFF]/.test(pt)&&it("The string to be encoded contains characters outside of the Latin1 range.");for(var st=pt.length%3,ht="",at=-1,ut,ft,mt,yt,At=pt.length-st;++at<At;)ut=pt.charCodeAt(at)<<16,ft=pt.charCodeAt(++at)<<8,mt=pt.charCodeAt(++at),yt=ut+ft+mt,ht+=s.charAt(yt>>18&63)+s.charAt(yt>>12&63)+s.charAt(yt>>6&63)+s.charAt(yt&63);return st==2?(ut=pt.charCodeAt(at)<<8,ft=pt.charCodeAt(++at),yt=ut+ft,ht+=s.charAt(yt>>10)+s.charAt(yt>>4&63)+s.charAt(yt<<2&63)+"="):st==1&&(yt=pt.charCodeAt(at),ht+=s.charAt(yt>>2)+s.charAt(yt<<4&63)+"=="),ht},gt={encode:ot,decode:rt,version:"1.0.0"};if(tt&&!tt.nodeType)if(ct)ct.exports=gt;else for(var dt in gt)gt.hasOwnProperty(dt)&&(tt[dt]=gt[dt]);else _e.base64=gt})(commonjsGlobal)})(base64,base64.exports);var base64Exports=base64.exports;function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var apiRTC_min={exports:{}};(function(a,o){(function(tt){a.exports=tt()})(function(){return function(){function tt(ct,vt,nt){function it(rt,ot){if(!vt[rt]){if(!ct[rt]){var gt=typeof commonjsRequire=="function"&&commonjsRequire;if(!ot&&gt)return gt(rt,!0);if(s)return s(rt,!0);var dt=new Error("Cannot find module '"+rt+"'");throw dt.code="MODULE_NOT_FOUND",dt}var pt=vt[rt]={exports:{}};ct[rt][0].call(pt.exports,function(st){return it(ct[rt][1][st]||st)},pt,pt.exports,tt,ct,vt,nt)}return vt[rt].exports}for(var s=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<nt.length;et++)it(nt[et]);return it}return tt}()({1:[function(tt,ct,vt){var nt=(0,tt("./adapter_factory.js").adapterFactory)({window});ct.exports=nt},{"./adapter_factory.js":2}],2:[function(tt,ct,vt){function nt(dt){if(dt&&dt.__esModule)return dt;var pt={};if(dt!=null)for(var st in dt)Object.prototype.hasOwnProperty.call(dt,st)&&(pt[st]=dt[st]);return pt.default=dt,pt}Object.defineProperty(vt,"__esModule",{value:!0}),vt.adapterFactory=function(){var dt=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},st=it.log,ht=it.detectBrowser(dt),at={browserDetails:ht,commonShim:gt,extractVersion:it.extractVersion,disableLog:it.disableLog,disableWarnings:it.disableWarnings};switch(ht.browser){case"chrome":if(!s||!s.shimPeerConnection||!pt.shimChrome)return st("Chrome shim is not included in this adapter release."),at;st("adapter.js shimming chrome."),at.browserShim=s,s.shimGetUserMedia(dt),s.shimMediaStream(dt),s.shimPeerConnection(dt),s.shimOnTrack(dt),s.shimAddTrackRemoveTrack(dt),s.shimGetSendersWithDtmf(dt),s.shimGetStats(dt),s.shimSenderReceiverGetStats(dt),s.fixNegotiationNeeded(dt),gt.shimRTCIceCandidate(dt),gt.shimConnectionState(dt),gt.shimMaxMessageSize(dt),gt.shimSendThrowTypeError(dt),gt.removeAllowExtmapMixed(dt);break;case"firefox":if(!rt||!rt.shimPeerConnection||!pt.shimFirefox)return st("Firefox shim is not included in this adapter release."),at;st("adapter.js shimming firefox."),at.browserShim=rt,rt.shimGetUserMedia(dt),rt.shimPeerConnection(dt),rt.shimOnTrack(dt),rt.shimRemoveStream(dt),rt.shimSenderGetStats(dt),rt.shimReceiverGetStats(dt),rt.shimRTCDataChannel(dt),gt.shimRTCIceCandidate(dt),gt.shimConnectionState(dt),gt.shimMaxMessageSize(dt),gt.shimSendThrowTypeError(dt);break;case"edge":if(!et||!et.shimPeerConnection||!pt.shimEdge)return st("MS edge shim is not included in this adapter release."),at;st("adapter.js shimming edge."),at.browserShim=et,et.shimGetUserMedia(dt),et.shimGetDisplayMedia(dt),et.shimPeerConnection(dt),et.shimReplaceTrack(dt),gt.shimMaxMessageSize(dt),gt.shimSendThrowTypeError(dt);break;case"safari":if(!ot||!pt.shimSafari)return st("Safari shim is not included in this adapter release."),at;st("adapter.js shimming safari."),at.browserShim=ot,ot.shimRTCIceServerUrls(dt),ot.shimCreateOfferLegacy(dt),ot.shimCallbacksAPI(dt),ot.shimLocalStreamsAPI(dt),ot.shimRemoteStreamsAPI(dt),ot.shimTrackEventTransceiver(dt),ot.shimGetUserMedia(dt),gt.shimRTCIceCandidate(dt),gt.shimMaxMessageSize(dt),gt.shimSendThrowTypeError(dt),gt.removeAllowExtmapMixed(dt);break;default:st("Unsupported browser!")}return at};var it=nt(tt("./utils")),s=nt(tt("./chrome/chrome_shim")),et=nt(tt("./edge/edge_shim")),rt=nt(tt("./firefox/firefox_shim")),ot=nt(tt("./safari/safari_shim")),gt=nt(tt("./common_shim"))},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(tt,ct,vt){function nt(ot){ot.RTCPeerConnection.prototype.getLocalStreams=function(){var ht=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(at){return ht._shimmedLocalStreams[at][0]})};var gt=ot.RTCPeerConnection.prototype.addTrack;ot.RTCPeerConnection.prototype.addTrack=function(ht,at){if(!at)return gt.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ut=gt.apply(this,arguments);return this._shimmedLocalStreams[at.id]?this._shimmedLocalStreams[at.id].indexOf(ut)===-1&&this._shimmedLocalStreams[at.id].push(ut):this._shimmedLocalStreams[at.id]=[at,ut],ut};var dt=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(ht){var at=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},ht.getTracks().forEach(function(mt){if(at.getSenders().find(function(yt){return yt.track===mt}))throw new DOMException("Track already exists.","InvalidAccessError")});var ut=this.getSenders();dt.apply(this,arguments);var ft=this.getSenders().filter(function(mt){return ut.indexOf(mt)===-1});this._shimmedLocalStreams[ht.id]=[ht].concat(ft)};var pt=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(ht){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[ht.id],pt.apply(this,arguments)};var st=ot.RTCPeerConnection.prototype.removeTrack;ot.RTCPeerConnection.prototype.removeTrack=function(ht){var at=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},ht&&Object.keys(this._shimmedLocalStreams).forEach(function(ut){var ft=at._shimmedLocalStreams[ut].indexOf(ht);ft!==-1&&at._shimmedLocalStreams[ut].splice(ft,1),at._shimmedLocalStreams[ut].length===1&&delete at._shimmedLocalStreams[ut]}),st.apply(this,arguments)}}Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=vt.shimGetUserMedia=void 0;var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ot){return typeof ot}:function(ot){return ot&&typeof Symbol=="function"&&ot.constructor===Symbol&&ot!==Symbol.prototype?"symbol":typeof ot},s=tt("./getusermedia");Object.defineProperty(vt,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});var et=tt("./getdisplaymedia");Object.defineProperty(vt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return et.shimGetDisplayMedia}}),vt.shimMediaStream=function(ot){ot.MediaStream=ot.MediaStream||ot.webkitMediaStream},vt.shimOnTrack=function(ot){if((ot===void 0?"undefined":it(ot))!=="object"||!ot.RTCPeerConnection||"ontrack"in ot.RTCPeerConnection.prototype)rt.wrapPeerConnectionEvent(ot,"track",function(dt){return dt.transceiver||Object.defineProperty(dt,"transceiver",{value:{receiver:dt.receiver}}),dt});else{Object.defineProperty(ot.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(dt){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=dt)},enumerable:!0,configurable:!0});var gt=ot.RTCPeerConnection.prototype.setRemoteDescription;ot.RTCPeerConnection.prototype.setRemoteDescription=function(){var dt=this;return this._ontrackpoly||(this._ontrackpoly=function(pt){pt.stream.addEventListener("addtrack",function(st){var ht=void 0;ht=ot.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===st.track.id}):{track:st.track};var at=new Event("track");at.track=st.track,at.receiver=ht,at.transceiver={receiver:ht},at.streams=[pt.stream],dt.dispatchEvent(at)}),pt.stream.getTracks().forEach(function(st){var ht=void 0;ht=ot.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===st.id}):{track:st};var at=new Event("track");at.track=st,at.receiver=ht,at.transceiver={receiver:ht},at.streams=[pt.stream],dt.dispatchEvent(at)})},this.addEventListener("addstream",this._ontrackpoly)),gt.apply(this,arguments)}}},vt.shimGetSendersWithDtmf=function(ot){if((ot===void 0?"undefined":it(ot))==="object"&&ot.RTCPeerConnection&&!("getSenders"in ot.RTCPeerConnection.prototype)&&"createDTMFSender"in ot.RTCPeerConnection.prototype){var gt=function(ut,ft){return{track:ft,get dtmf(){return this._dtmf===void 0&&(ft.kind==="audio"?this._dtmf=ut.createDTMFSender(ft):this._dtmf=null),this._dtmf},_pc:ut}};if(!ot.RTCPeerConnection.prototype.getSenders){ot.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var dt=ot.RTCPeerConnection.prototype.addTrack;ot.RTCPeerConnection.prototype.addTrack=function(ut,ft){var mt=dt.apply(this,arguments);return mt||(mt=gt(this,ut),this._senders.push(mt)),mt};var pt=ot.RTCPeerConnection.prototype.removeTrack;ot.RTCPeerConnection.prototype.removeTrack=function(ut){pt.apply(this,arguments);var ft=this._senders.indexOf(ut);ft!==-1&&this._senders.splice(ft,1)}}var st=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(ut){var ft=this;this._senders=this._senders||[],st.apply(this,[ut]),ut.getTracks().forEach(function(mt){ft._senders.push(gt(ft,mt))})};var ht=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(ut){var ft=this;this._senders=this._senders||[],ht.apply(this,[ut]),ut.getTracks().forEach(function(mt){var yt=ft._senders.find(function(At){return At.track===mt});yt&&ft._senders.splice(ft._senders.indexOf(yt),1)})}}else if((ot===void 0?"undefined":it(ot))==="object"&&ot.RTCPeerConnection&&"getSenders"in ot.RTCPeerConnection.prototype&&"createDTMFSender"in ot.RTCPeerConnection.prototype&&ot.RTCRtpSender&&!("dtmf"in ot.RTCRtpSender.prototype)){var at=ot.RTCPeerConnection.prototype.getSenders;ot.RTCPeerConnection.prototype.getSenders=function(){var ut=this,ft=at.apply(this,[]);return ft.forEach(function(mt){return mt._pc=ut}),ft},Object.defineProperty(ot.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},vt.shimGetStats=function(ot){if(ot.RTCPeerConnection){var gt=ot.RTCPeerConnection.prototype.getStats;ot.RTCPeerConnection.prototype.getStats=function(dt,pt,st){var ht=this,at=arguments;if(arguments.length>0&&typeof dt=="function")return gt.apply(this,arguments);if(gt.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return gt.apply(this,[]);var ut=function(yt){var At={};return yt.result().forEach(function(wt){var Pt={id:wt.id,timestamp:wt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[wt.type]||wt.type};wt.names().forEach(function(Rt){Pt[Rt]=wt.stat(Rt)}),At[Pt.id]=Pt}),At},ft=function(yt){return new Map(Object.keys(yt).map(function(At){return[At,yt[At]]}))};if(arguments.length>=2){var mt=function(yt){at[1](ft(ut(yt)))};return gt.apply(this,[mt,arguments[0]])}return new Promise(function(yt,At){gt.apply(ht,[function(wt){yt(ft(ut(wt)))},At])}).then(pt,st)}}},vt.shimSenderReceiverGetStats=function(ot){if((ot===void 0?"undefined":it(ot))==="object"&&ot.RTCPeerConnection&&ot.RTCRtpSender&&ot.RTCRtpReceiver){if(!("getStats"in ot.RTCRtpSender.prototype)){var gt=ot.RTCPeerConnection.prototype.getSenders;gt&&(ot.RTCPeerConnection.prototype.getSenders=function(){var ht=this,at=gt.apply(this,[]);return at.forEach(function(ut){return ut._pc=ht}),at});var dt=ot.RTCPeerConnection.prototype.addTrack;dt&&(ot.RTCPeerConnection.prototype.addTrack=function(){var ht=dt.apply(this,arguments);return ht._pc=this,ht}),ot.RTCRtpSender.prototype.getStats=function(){var ht=this;return this._pc.getStats().then(function(at){return rt.filterStats(at,ht.track,!0)})}}if(!("getStats"in ot.RTCRtpReceiver.prototype)){var pt=ot.RTCPeerConnection.prototype.getReceivers;pt&&(ot.RTCPeerConnection.prototype.getReceivers=function(){var ht=this,at=pt.apply(this,[]);return at.forEach(function(ut){return ut._pc=ht}),at}),rt.wrapPeerConnectionEvent(ot,"track",function(ht){return ht.receiver._pc=ht.srcElement,ht}),ot.RTCRtpReceiver.prototype.getStats=function(){var ht=this;return this._pc.getStats().then(function(at){return rt.filterStats(at,ht.track,!1)})}}if("getStats"in ot.RTCRtpSender.prototype&&"getStats"in ot.RTCRtpReceiver.prototype){var st=ot.RTCPeerConnection.prototype.getStats;ot.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof ot.MediaStreamTrack){var ht=arguments[0],at=void 0,ut=void 0,ft=void 0;return this.getSenders().forEach(function(mt){mt.track===ht&&(at?ft=!0:at=mt)}),this.getReceivers().forEach(function(mt){return mt.track===ht&&(ut?ft=!0:ut=mt),mt.track===ht}),ft||at&&ut?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):at?at.getStats():ut?ut.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return st.apply(this,arguments)}}}},vt.shimAddTrackRemoveTrackWithNative=nt,vt.shimAddTrackRemoveTrack=function(ot){function gt(mt,yt){var At=yt.sdp;return Object.keys(mt._reverseStreams||[]).forEach(function(wt){var Pt=mt._reverseStreams[wt],Rt=mt._streams[Pt.id];At=At.replace(new RegExp(Rt.id,"g"),Pt.id)}),new RTCSessionDescription({type:yt.type,sdp:At})}function dt(mt,yt){var At=yt.sdp;return Object.keys(mt._reverseStreams||[]).forEach(function(wt){var Pt=mt._reverseStreams[wt],Rt=mt._streams[Pt.id];At=At.replace(new RegExp(Pt.id,"g"),Rt.id)}),new RTCSessionDescription({type:yt.type,sdp:At})}if(ot.RTCPeerConnection){var pt=rt.detectBrowser(ot);if(ot.RTCPeerConnection.prototype.addTrack&&pt.version>=65)return nt(ot);var st=ot.RTCPeerConnection.prototype.getLocalStreams;ot.RTCPeerConnection.prototype.getLocalStreams=function(){var mt=this,yt=st.apply(this);return this._reverseStreams=this._reverseStreams||{},yt.map(function(At){return mt._reverseStreams[At.id]})};var ht=ot.RTCPeerConnection.prototype.addStream;ot.RTCPeerConnection.prototype.addStream=function(mt){var yt=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},mt.getTracks().forEach(function(wt){if(yt.getSenders().find(function(Pt){return Pt.track===wt}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[mt.id]){var At=new ot.MediaStream(mt.getTracks());this._streams[mt.id]=At,this._reverseStreams[At.id]=mt,mt=At}ht.apply(this,[mt])};var at=ot.RTCPeerConnection.prototype.removeStream;ot.RTCPeerConnection.prototype.removeStream=function(mt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},at.apply(this,[this._streams[mt.id]||mt]),delete this._reverseStreams[this._streams[mt.id]?this._streams[mt.id].id:mt.id],delete this._streams[mt.id]},ot.RTCPeerConnection.prototype.addTrack=function(mt,yt){var At=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var wt=[].slice.call(arguments,1);if(wt.length!==1||!wt[0].getTracks().find(function(kt){return kt===mt}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(kt){return kt.track===mt}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var Pt=this._streams[yt.id];if(Pt)Pt.addTrack(mt),Promise.resolve().then(function(){At.dispatchEvent(new Event("negotiationneeded"))});else{var Rt=new ot.MediaStream([mt]);this._streams[yt.id]=Rt,this._reverseStreams[Rt.id]=yt,this.addStream(Rt)}return this.getSenders().find(function(kt){return kt.track===mt})},["createOffer","createAnswer"].forEach(function(mt){var yt=ot.RTCPeerConnection.prototype[mt];ot.RTCPeerConnection.prototype[mt]=function(){var At=this,wt=arguments;return arguments.length&&typeof arguments[0]=="function"?yt.apply(this,[function(Pt){var Rt=gt(At,Pt);wt[0].apply(null,[Rt])},function(Pt){wt[1]&&wt[1].apply(null,Pt)},arguments[2]]):yt.apply(this,arguments).then(function(Pt){return gt(At,Pt)})}});var ut=ot.RTCPeerConnection.prototype.setLocalDescription;ot.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=dt(this,arguments[0]),ut.apply(this,arguments)):ut.apply(this,arguments)};var ft=Object.getOwnPropertyDescriptor(ot.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(ot.RTCPeerConnection.prototype,"localDescription",{get:function(){var mt=ft.get.apply(this);return mt.type===""?mt:gt(this,mt)}}),ot.RTCPeerConnection.prototype.removeTrack=function(mt){var yt=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!mt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(mt._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var At=void 0;Object.keys(this._streams).forEach(function(wt){yt._streams[wt].getTracks().find(function(Pt){return mt.track===Pt})&&(At=yt._streams[wt])}),At&&(At.getTracks().length===1?this.removeStream(this._reverseStreams[At.id]):At.removeTrack(mt.track),this.dispatchEvent(new Event("negotiationneeded")))}}},vt.shimPeerConnection=function(ot){if(!ot.RTCPeerConnection&&ot.webkitRTCPeerConnection&&(ot.RTCPeerConnection=ot.webkitRTCPeerConnection),ot.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(dt){var pt=ot.RTCPeerConnection.prototype[dt];ot.RTCPeerConnection.prototype[dt]=function(){return arguments[0]=new(dt==="addIceCandidate"?ot.RTCIceCandidate:ot.RTCSessionDescription)(arguments[0]),pt.apply(this,arguments)}});var gt=ot.RTCPeerConnection.prototype.addIceCandidate;ot.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?gt.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},vt.fixNegotiationNeeded=function(ot){rt.wrapPeerConnectionEvent(ot,"negotiationneeded",function(gt){if(gt.target.signalingState==="stable")return gt})};var rt=function(ot){if(ot&&ot.__esModule)return ot;var gt={};if(ot!=null)for(var dt in ot)Object.prototype.hasOwnProperty.call(ot,dt)&&(gt[dt]=ot[dt]);return gt.default=ot,gt}(tt("../utils.js"))},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=function(nt,it){nt.navigator.mediaDevices&&"getDisplayMedia"in nt.navigator.mediaDevices||nt.navigator.mediaDevices&&(typeof it=="function"?nt.navigator.mediaDevices.getDisplayMedia=function(s){return it(s).then(function(et){var rt=s.video&&s.video.width,ot=s.video&&s.video.height,gt=s.video&&s.video.frameRate;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:et,maxFrameRate:gt||3}},rt&&(s.video.mandatory.maxWidth=rt),ot&&(s.video.mandatory.maxHeight=ot),nt.navigator.mediaDevices.getUserMedia(s)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0});var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};vt.shimGetUserMedia=function(et){var rt=et&&et.navigator;if(rt.mediaDevices){var ot=it.detectBrowser(et),gt=function(ht){if((ht===void 0?"undefined":nt(ht))!=="object"||ht.mandatory||ht.optional)return ht;var at={};return Object.keys(ht).forEach(function(ut){if(ut!=="require"&&ut!=="advanced"&&ut!=="mediaSource"){var ft=nt(ht[ut])==="object"?ht[ut]:{ideal:ht[ut]};ft.exact!==void 0&&typeof ft.exact=="number"&&(ft.min=ft.max=ft.exact);var mt=function(At,wt){return At?At+wt.charAt(0).toUpperCase()+wt.slice(1):wt==="deviceId"?"sourceId":wt};if(ft.ideal!==void 0){at.optional=at.optional||[];var yt={};typeof ft.ideal=="number"?(yt[mt("min",ut)]=ft.ideal,at.optional.push(yt),(yt={})[mt("max",ut)]=ft.ideal,at.optional.push(yt)):(yt[mt("",ut)]=ft.ideal,at.optional.push(yt))}ft.exact!==void 0&&typeof ft.exact!="number"?(at.mandatory=at.mandatory||{},at.mandatory[mt("",ut)]=ft.exact):["min","max"].forEach(function(At){ft[At]!==void 0&&(at.mandatory=at.mandatory||{},at.mandatory[mt(At,ut)]=ft[At])})}}),ht.advanced&&(at.optional=(at.optional||[]).concat(ht.advanced)),at},dt=function(ht,at){if(ot.version>=61)return at(ht);if((ht=JSON.parse(JSON.stringify(ht)))&&nt(ht.audio)==="object"){var ut=function(At,wt,Pt){wt in At&&!(Pt in At)&&(At[Pt]=At[wt],delete At[wt])};ut((ht=JSON.parse(JSON.stringify(ht))).audio,"autoGainControl","googAutoGainControl"),ut(ht.audio,"noiseSuppression","googNoiseSuppression"),ht.audio=gt(ht.audio)}if(ht&&nt(ht.video)==="object"){var ft=ht.video.facingMode;ft=ft&&((ft===void 0?"undefined":nt(ft))==="object"?ft:{ideal:ft});var mt=ot.version<66;if(ft&&(ft.exact==="user"||ft.exact==="environment"||ft.ideal==="user"||ft.ideal==="environment")&&(!rt.mediaDevices.getSupportedConstraints||!rt.mediaDevices.getSupportedConstraints().facingMode||mt)){delete ht.video.facingMode;var yt=void 0;if(ft.exact==="environment"||ft.ideal==="environment"?yt=["back","rear"]:ft.exact!=="user"&&ft.ideal!=="user"||(yt=["front"]),yt)return rt.mediaDevices.enumerateDevices().then(function(At){var wt=(At=At.filter(function(Pt){return Pt.kind==="videoinput"})).find(function(Pt){return yt.some(function(Rt){return Pt.label.toLowerCase().includes(Rt)})});return!wt&&At.length&&yt.includes("back")&&(wt=At[At.length-1]),wt&&(ht.video.deviceId=ft.exact?{exact:wt.deviceId}:{ideal:wt.deviceId}),ht.video=gt(ht.video),s("chrome: "+JSON.stringify(ht)),at(ht)})}ht.video=gt(ht.video)}return s("chrome: "+JSON.stringify(ht)),at(ht)},pt=function(ht){return ot.version>=64?ht:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ht.name]||ht.name,message:ht.message,constraint:ht.constraint||ht.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(rt.getUserMedia=(function(ht,at,ut){dt(ht,function(ft){rt.webkitGetUserMedia(ft,at,function(mt){ut&&ut(pt(mt))})})}).bind(rt),rt.mediaDevices.getUserMedia){var st=rt.mediaDevices.getUserMedia.bind(rt.mediaDevices);rt.mediaDevices.getUserMedia=function(ht){return dt(ht,function(at){return st(at).then(function(ut){if(at.audio&&!ut.getAudioTracks().length||at.video&&!ut.getVideoTracks().length)throw ut.getTracks().forEach(function(ft){ft.stop()}),new DOMException("","NotFoundError");return ut},function(ut){return Promise.reject(pt(ut))})})}}}};var it=function(et){if(et&&et.__esModule)return et;var rt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(rt[ot]=et[ot]);return rt.default=et,rt}(tt("../utils.js")),s=it.log},{"../utils.js":15}],6:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0});var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};vt.shimRTCIceCandidate=function(et){if(et.RTCIceCandidate&&!(et.RTCIceCandidate&&"foundation"in et.RTCIceCandidate.prototype)){var rt=et.RTCIceCandidate;et.RTCIceCandidate=function(ot){if((ot===void 0?"undefined":nt(ot))==="object"&&ot.candidate&&ot.candidate.indexOf("a=")===0&&((ot=JSON.parse(JSON.stringify(ot))).candidate=ot.candidate.substr(2)),ot.candidate&&ot.candidate.length){var gt=new rt(ot),dt=it.default.parseCandidate(ot.candidate),pt=Object.assign(gt,dt);return pt.toJSON=function(){return{candidate:pt.candidate,sdpMid:pt.sdpMid,sdpMLineIndex:pt.sdpMLineIndex,usernameFragment:pt.usernameFragment}},pt}return new rt(ot)},et.RTCIceCandidate.prototype=rt.prototype,s.wrapPeerConnectionEvent(et,"icecandidate",function(ot){return ot.candidate&&Object.defineProperty(ot,"candidate",{value:new et.RTCIceCandidate(ot.candidate),writable:"false"}),ot})}},vt.shimMaxMessageSize=function(et){if(!et.RTCSctpTransport&&et.RTCPeerConnection){var rt=s.detectBrowser(et);"sctp"in et.RTCPeerConnection.prototype||Object.defineProperty(et.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var ot=function(ht){if(!ht||!ht.sdp)return!1;var at=it.default.splitSections(ht.sdp);return at.shift(),at.some(function(ut){var ft=it.default.parseMLine(ut);return ft&&ft.kind==="application"&&ft.protocol.indexOf("SCTP")!==-1})},gt=function(ht){var at=ht.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(at===null||at.length<2)return-1;var ut=parseInt(at[1],10);return ut!==ut?-1:ut},dt=function(ht){var at=65536;return rt.browser==="firefox"&&(at=rt.version<57?ht===-1?16384:2147483637:rt.version<60?rt.version===57?65535:65536:2147483637),at},pt=function(ht,at){var ut=65536;rt.browser==="firefox"&&rt.version===57&&(ut=65535);var ft=it.default.matchPrefix(ht.sdp,"a=max-message-size:");return ft.length>0?ut=parseInt(ft[0].substr(19),10):rt.browser==="firefox"&&at!==-1&&(ut=2147483637),ut},st=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,ot(arguments[0])){var ht=gt(arguments[0]),at=dt(ht),ut=pt(arguments[0],ht),ft=void 0;ft=at===0&&ut===0?Number.POSITIVE_INFINITY:at===0||ut===0?Math.max(at,ut):Math.min(at,ut);var mt={};Object.defineProperty(mt,"maxMessageSize",{get:function(){return ft}}),this._sctp=mt}return st.apply(this,arguments)}}},vt.shimSendThrowTypeError=function(et){function rt(gt,dt){var pt=gt.send;gt.send=function(){var st=arguments[0],ht=st.length||st.size||st.byteLength;if(gt.readyState==="open"&&dt.sctp&&ht>dt.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+dt.sctp.maxMessageSize+" bytes)");return pt.apply(gt,arguments)}}if(et.RTCPeerConnection&&"createDataChannel"in et.RTCPeerConnection.prototype){var ot=et.RTCPeerConnection.prototype.createDataChannel;et.RTCPeerConnection.prototype.createDataChannel=function(){var gt=ot.apply(this,arguments);return rt(gt,this),gt},s.wrapPeerConnectionEvent(et,"datachannel",function(gt){return rt(gt.channel,gt.target),gt})}},vt.shimConnectionState=function(et){if(et.RTCPeerConnection&&!("connectionState"in et.RTCPeerConnection.prototype)){var rt=et.RTCPeerConnection.prototype;Object.defineProperty(rt,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(rt,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(ot){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),ot&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=ot)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(ot){var gt=rt[ot];rt[ot]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(dt){var pt=dt.target;if(pt._lastConnectionState!==pt.connectionState){pt._lastConnectionState=pt.connectionState;var st=new Event("connectionstatechange",dt);pt.dispatchEvent(st)}return dt},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),gt.apply(this,arguments)}})}},vt.removeAllowExtmapMixed=function(et){if(et.RTCPeerConnection){var rt=s.detectBrowser(et);if(!(rt.browser==="chrome"&&rt.version>=71||rt.browser==="safari"&&rt.version>=605)){var ot=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(gt){return gt&&gt.sdp&&gt.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(gt.sdp=gt.sdp.split(`
`).filter(function(dt){return dt.trim()!=="a=extmap-allow-mixed"}).join(`
`)),ot.apply(this,arguments)}}}};var it=function(et){return et&&et.__esModule?et:{default:et}}(tt("sdp")),s=function(et){if(et&&et.__esModule)return et;var rt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(rt[ot]=et[ot]);return rt.default=et,rt}(tt("./utils"))},{"./utils":15,sdp:17}],7:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=vt.shimGetUserMedia=void 0;var nt=tt("./getusermedia");Object.defineProperty(vt,"shimGetUserMedia",{enumerable:!0,get:function(){return nt.shimGetUserMedia}});var it=tt("./getdisplaymedia");Object.defineProperty(vt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return it.shimGetDisplayMedia}}),vt.shimPeerConnection=function(ot){var gt=s.detectBrowser(ot);if(ot.RTCIceGatherer&&(ot.RTCIceCandidate||(ot.RTCIceCandidate=function(st){return st}),ot.RTCSessionDescription||(ot.RTCSessionDescription=function(st){return st}),gt.version<15025)){var dt=Object.getOwnPropertyDescriptor(ot.MediaStreamTrack.prototype,"enabled");Object.defineProperty(ot.MediaStreamTrack.prototype,"enabled",{set:function(st){dt.set.call(this,st);var ht=new Event("enabled");ht.enabled=st,this.dispatchEvent(ht)}})}!ot.RTCRtpSender||"dtmf"in ot.RTCRtpSender.prototype||Object.defineProperty(ot.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new ot.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),ot.RTCDtmfSender&&!ot.RTCDTMFSender&&(ot.RTCDTMFSender=ot.RTCDtmfSender);var pt=(0,rt.default)(ot,gt.version);ot.RTCPeerConnection=function(st){return st&&st.iceServers&&(st.iceServers=(0,et.filterIceServers)(st.iceServers,gt.version),s.log("ICE servers after filtering:",st.iceServers)),new pt(st)},ot.RTCPeerConnection.prototype=pt.prototype},vt.shimReplaceTrack=function(ot){!ot.RTCRtpSender||"replaceTrack"in ot.RTCRtpSender.prototype||(ot.RTCRtpSender.prototype.replaceTrack=ot.RTCRtpSender.prototype.setTrack)};var s=function(ot){if(ot&&ot.__esModule)return ot;var gt={};if(ot!=null)for(var dt in ot)Object.prototype.hasOwnProperty.call(ot,dt)&&(gt[dt]=ot[dt]);return gt.default=ot,gt}(tt("../utils")),et=tt("./filtericeservers"),rt=function(ot){return ot&&ot.__esModule?ot:{default:ot}}(tt("rtcpeerconnection-shim"))},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.filterIceServers=function(it,s){var et=!1;return(it=JSON.parse(JSON.stringify(it))).filter(function(rt){if(rt&&(rt.urls||rt.url)){var ot=rt.urls||rt.url;rt.url&&!rt.urls&&nt.deprecated("RTCIceServer.url","RTCIceServer.urls");var gt=typeof ot=="string";return gt&&(ot=[ot]),ot=ot.filter(function(dt){if(dt.indexOf("stun:")===0)return!1;var pt=dt.startsWith("turn")&&!dt.startsWith("turn:[")&&dt.includes("transport=udp");return pt&&!et?(et=!0,!0):pt&&!et}),delete rt.url,rt.urls=gt?ot[0]:ot,!!ot.length}})};var nt=function(it){if(it&&it.__esModule)return it;var s={};if(it!=null)for(var et in it)Object.prototype.hasOwnProperty.call(it,et)&&(s[et]=it[et]);return s.default=it,s}(tt("../utils"))},{"../utils":15}],9:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=function(nt){"getDisplayMedia"in nt.navigator&&nt.navigator.mediaDevices&&(nt.navigator.mediaDevices&&"getDisplayMedia"in nt.navigator.mediaDevices||(nt.navigator.mediaDevices.getDisplayMedia=nt.navigator.getDisplayMedia.bind(nt.navigator)))}},{}],10:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetUserMedia=function(nt){var it=nt&&nt.navigator,s=function(rt){return{name:{PermissionDeniedError:"NotAllowedError"}[rt.name]||rt.name,message:rt.message,constraint:rt.constraint,toString:function(){return this.name}}},et=it.mediaDevices.getUserMedia.bind(it.mediaDevices);it.mediaDevices.getUserMedia=function(rt){return et(rt).catch(function(ot){return Promise.reject(s(ot))})}}},{}],11:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=vt.shimGetUserMedia=void 0;var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},it=tt("./getusermedia");Object.defineProperty(vt,"shimGetUserMedia",{enumerable:!0,get:function(){return it.shimGetUserMedia}});var s=tt("./getdisplaymedia");Object.defineProperty(vt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}}),vt.shimOnTrack=function(rt){(rt===void 0?"undefined":nt(rt))==="object"&&rt.RTCTrackEvent&&"receiver"in rt.RTCTrackEvent.prototype&&!("transceiver"in rt.RTCTrackEvent.prototype)&&Object.defineProperty(rt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},vt.shimPeerConnection=function(rt){var ot=et.detectBrowser(rt);if((rt===void 0?"undefined":nt(rt))==="object"&&(rt.RTCPeerConnection||rt.mozRTCPeerConnection)){!rt.RTCPeerConnection&&rt.mozRTCPeerConnection&&(rt.RTCPeerConnection=rt.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(st){var ht=rt.RTCPeerConnection.prototype[st];rt.RTCPeerConnection.prototype[st]=function(){return arguments[0]=new(st==="addIceCandidate"?rt.RTCIceCandidate:rt.RTCSessionDescription)(arguments[0]),ht.apply(this,arguments)}});var gt=rt.RTCPeerConnection.prototype.addIceCandidate;rt.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?gt.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var dt={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},pt=rt.RTCPeerConnection.prototype.getStats;rt.RTCPeerConnection.prototype.getStats=function(st,ht,at){return pt.apply(this,[st||null]).then(function(ut){if(ot.version<53&&!ht)try{ut.forEach(function(ft){ft.type=dt[ft.type]||ft.type})}catch(ft){if(ft.name!=="TypeError")throw ft;ut.forEach(function(mt,yt){ut.set(yt,Object.assign({},mt,{type:dt[mt.type]||mt.type}))})}return ut}).then(ht,at)}}},vt.shimSenderGetStats=function(rt){if((rt===void 0?"undefined":nt(rt))==="object"&&rt.RTCPeerConnection&&rt.RTCRtpSender&&!(rt.RTCRtpSender&&"getStats"in rt.RTCRtpSender.prototype)){var ot=rt.RTCPeerConnection.prototype.getSenders;ot&&(rt.RTCPeerConnection.prototype.getSenders=function(){var dt=this,pt=ot.apply(this,[]);return pt.forEach(function(st){return st._pc=dt}),pt});var gt=rt.RTCPeerConnection.prototype.addTrack;gt&&(rt.RTCPeerConnection.prototype.addTrack=function(){var dt=gt.apply(this,arguments);return dt._pc=this,dt}),rt.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},vt.shimReceiverGetStats=function(rt){if((rt===void 0?"undefined":nt(rt))==="object"&&rt.RTCPeerConnection&&rt.RTCRtpSender&&!(rt.RTCRtpSender&&"getStats"in rt.RTCRtpReceiver.prototype)){var ot=rt.RTCPeerConnection.prototype.getReceivers;ot&&(rt.RTCPeerConnection.prototype.getReceivers=function(){var gt=this,dt=ot.apply(this,[]);return dt.forEach(function(pt){return pt._pc=gt}),dt}),et.wrapPeerConnectionEvent(rt,"track",function(gt){return gt.receiver._pc=gt.srcElement,gt}),rt.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},vt.shimRemoveStream=function(rt){!rt.RTCPeerConnection||"removeStream"in rt.RTCPeerConnection.prototype||(rt.RTCPeerConnection.prototype.removeStream=function(ot){var gt=this;et.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(dt){dt.track&&ot.getTracks().includes(dt.track)&&gt.removeTrack(dt)})})},vt.shimRTCDataChannel=function(rt){rt.DataChannel&&!rt.RTCDataChannel&&(rt.RTCDataChannel=rt.DataChannel)};var et=function(rt){if(rt&&rt.__esModule)return rt;var ot={};if(rt!=null)for(var gt in rt)Object.prototype.hasOwnProperty.call(rt,gt)&&(ot[gt]=rt[gt]);return ot.default=rt,ot}(tt("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0}),vt.shimGetDisplayMedia=function(nt,it){nt.navigator.mediaDevices&&"getDisplayMedia"in nt.navigator.mediaDevices||nt.navigator.mediaDevices&&(nt.navigator.mediaDevices.getDisplayMedia=function(s){if(!s||!s.video){var et=new DOMException("getDisplayMedia without video constraints is undefined");return et.name="NotFoundError",et.code=8,Promise.reject(et)}return s.video===!0?s.video={mediaSource:it}:s.video.mediaSource=it,nt.navigator.mediaDevices.getUserMedia(s)})}},{}],13:[function(tt,ct,vt){Object.defineProperty(vt,"__esModule",{value:!0});var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};vt.shimGetUserMedia=function(s){var et=it.detectBrowser(s),rt=s&&s.navigator,ot=s&&s.MediaStreamTrack;if(rt.getUserMedia=function(ht,at,ut){it.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),rt.mediaDevices.getUserMedia(ht).then(at,ut)},!(et.version>55&&"autoGainControl"in rt.mediaDevices.getSupportedConstraints())){var gt=function(ht,at,ut){at in ht&&!(ut in ht)&&(ht[ut]=ht[at],delete ht[at])},dt=rt.mediaDevices.getUserMedia.bind(rt.mediaDevices);if(rt.mediaDevices.getUserMedia=function(ht){return(ht===void 0?"undefined":nt(ht))==="object"&&nt(ht.audio)==="object"&&(ht=JSON.parse(JSON.stringify(ht)),gt(ht.audio,"autoGainControl","mozAutoGainControl"),gt(ht.audio,"noiseSuppression","mozNoiseSuppression")),dt(ht)},ot&&ot.prototype.getSettings){var pt=ot.prototype.getSettings;ot.prototype.getSettings=function(){var ht=pt.apply(this,arguments);return gt(ht,"mozAutoGainControl","autoGainControl"),gt(ht,"mozNoiseSuppression","noiseSuppression"),ht}}if(ot&&ot.prototype.applyConstraints){var st=ot.prototype.applyConstraints;ot.prototype.applyConstraints=function(ht){return this.kind==="audio"&&(ht===void 0?"undefined":nt(ht))==="object"&&(ht=JSON.parse(JSON.stringify(ht)),gt(ht,"autoGainControl","mozAutoGainControl"),gt(ht,"noiseSuppression","mozNoiseSuppression")),st.apply(this,[ht])}}}};var it=function(s){if(s&&s.__esModule)return s;var et={};if(s!=null)for(var rt in s)Object.prototype.hasOwnProperty.call(s,rt)&&(et[rt]=s[rt]);return et.default=s,et}(tt("../utils"))},{"../utils":15}],14:[function(tt,ct,vt){function nt(et){return et&&et.video!==void 0?Object.assign({},et,{video:s.compactObject(et.video)}):et}Object.defineProperty(vt,"__esModule",{value:!0});var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};vt.shimLocalStreamsAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection){if("getLocalStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in et.RTCPeerConnection.prototype)){var rt=et.RTCPeerConnection.prototype.addTrack;et.RTCPeerConnection.prototype.addStream=function(ot){var gt=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(ot)||this._localStreams.push(ot),ot.getTracks().forEach(function(dt){return rt.call(gt,dt,ot)})},et.RTCPeerConnection.prototype.addTrack=function(ot,gt){return gt&&(this._localStreams?this._localStreams.includes(gt)||this._localStreams.push(gt):this._localStreams=[gt]),rt.call(this,ot,gt)}}"removeStream"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.removeStream=function(ot){var gt=this;this._localStreams||(this._localStreams=[]);var dt=this._localStreams.indexOf(ot);if(dt!==-1){this._localStreams.splice(dt,1);var pt=ot.getTracks();this.getSenders().forEach(function(st){pt.includes(st.track)&&gt.removeTrack(st)})}})}},vt.shimRemoteStreamsAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection&&("getRemoteStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in et.RTCPeerConnection.prototype))){Object.defineProperty(et.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(ot){var gt=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=ot),this.addEventListener("track",this._onaddstreampoly=function(dt){dt.streams.forEach(function(pt){if(gt._remoteStreams||(gt._remoteStreams=[]),!gt._remoteStreams.includes(pt)){gt._remoteStreams.push(pt);var st=new Event("addstream");st.stream=pt,gt.dispatchEvent(st)}})})}});var rt=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){var ot=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(gt){gt.streams.forEach(function(dt){if(ot._remoteStreams||(ot._remoteStreams=[]),!(ot._remoteStreams.indexOf(dt)>=0)){ot._remoteStreams.push(dt);var pt=new Event("addstream");pt.stream=dt,ot.dispatchEvent(pt)}})}),rt.apply(ot,arguments)}}},vt.shimCallbacksAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection){var rt=et.RTCPeerConnection.prototype,ot=rt.createOffer,gt=rt.createAnswer,dt=rt.setLocalDescription,pt=rt.setRemoteDescription,st=rt.addIceCandidate;rt.createOffer=function(at,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],mt=ot.apply(this,[ft]);return ut?(mt.then(at,ut),Promise.resolve()):mt},rt.createAnswer=function(at,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],mt=gt.apply(this,[ft]);return ut?(mt.then(at,ut),Promise.resolve()):mt};var ht=function(at,ut,ft){var mt=dt.apply(this,[at]);return ft?(mt.then(ut,ft),Promise.resolve()):mt};rt.setLocalDescription=ht,ht=function(at,ut,ft){var mt=pt.apply(this,[at]);return ft?(mt.then(ut,ft),Promise.resolve()):mt},rt.setRemoteDescription=ht,ht=function(at,ut,ft){var mt=st.apply(this,[at]);return ft?(mt.then(ut,ft),Promise.resolve()):mt},rt.addIceCandidate=ht}},vt.shimGetUserMedia=function(et){var rt=et&&et.navigator;if(rt.mediaDevices&&rt.mediaDevices.getUserMedia){var ot=rt.mediaDevices,gt=ot.getUserMedia.bind(ot);rt.mediaDevices.getUserMedia=function(dt){return gt(nt(dt))}}!rt.getUserMedia&&rt.mediaDevices&&rt.mediaDevices.getUserMedia&&(rt.getUserMedia=(function(dt,pt,st){rt.mediaDevices.getUserMedia(dt).then(pt,st)}).bind(rt))},vt.shimConstraints=nt,vt.shimRTCIceServerUrls=function(et){var rt=et.RTCPeerConnection;et.RTCPeerConnection=function(ot,gt){if(ot&&ot.iceServers){for(var dt=[],pt=0;pt<ot.iceServers.length;pt++){var st=ot.iceServers[pt];!st.hasOwnProperty("urls")&&st.hasOwnProperty("url")?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),(st=JSON.parse(JSON.stringify(st))).urls=st.url,delete st.url,dt.push(st)):dt.push(ot.iceServers[pt])}ot.iceServers=dt}return new rt(ot,gt)},et.RTCPeerConnection.prototype=rt.prototype,"generateCertificate"in et.RTCPeerConnection&&Object.defineProperty(et.RTCPeerConnection,"generateCertificate",{get:function(){return rt.generateCertificate}})},vt.shimTrackEventTransceiver=function(et){(et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection&&"receiver"in et.RTCTrackEvent.prototype&&!et.RTCTransceiver&&Object.defineProperty(et.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},vt.shimCreateOfferLegacy=function(et){var rt=et.RTCPeerConnection.prototype.createOffer;et.RTCPeerConnection.prototype.createOffer=function(ot){if(ot){ot.offerToReceiveAudio!==void 0&&(ot.offerToReceiveAudio=!!ot.offerToReceiveAudio);var gt=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="audio"});ot.offerToReceiveAudio===!1&&gt?gt.direction==="sendrecv"?gt.setDirection?gt.setDirection("sendonly"):gt.direction="sendonly":gt.direction==="recvonly"&&(gt.setDirection?gt.setDirection("inactive"):gt.direction="inactive"):ot.offerToReceiveAudio!==!0||gt||this.addTransceiver("audio"),ot.offerToReceiveVideo!==void 0&&(ot.offerToReceiveVideo=!!ot.offerToReceiveVideo);var dt=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="video"});ot.offerToReceiveVideo===!1&&dt?dt.direction==="sendrecv"?dt.setDirection?dt.setDirection("sendonly"):dt.direction="sendonly":dt.direction==="recvonly"&&(dt.setDirection?dt.setDirection("inactive"):dt.direction="inactive"):ot.offerToReceiveVideo!==!0||dt||this.addTransceiver("video")}return rt.apply(this,arguments)}};var s=function(et){if(et&&et.__esModule)return et;var rt={};if(et!=null)for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(rt[ot]=et[ot]);return rt.default=et,rt}(tt("../utils"))},{"../utils":15}],15:[function(tt,ct,vt){function nt(dt,pt,st){return pt in dt?Object.defineProperty(dt,pt,{value:st,enumerable:!0,configurable:!0,writable:!0}):dt[pt]=st,dt}function it(dt,pt,st){var ht=dt.match(pt);return ht&&ht.length>=st&&parseInt(ht[st],10)}function s(dt){return(dt===void 0?"undefined":rt(dt))!=="object"?dt:Object.keys(dt).reduce(function(pt,st){var ht=rt(dt[st])==="object",at=ht?s(dt[st]):dt[st],ut=ht&&!Object.keys(at).length;return at===void 0||ut?pt:Object.assign(pt,nt({},st,at))},{})}function et(dt,pt,st){pt&&!st.has(pt.id)&&(st.set(pt.id,pt),Object.keys(pt).forEach(function(ht){ht.endsWith("Id")?et(dt,dt.get(pt[ht]),st):ht.endsWith("Ids")&&pt[ht].forEach(function(at){et(dt,dt.get(at),st)})}))}Object.defineProperty(vt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dt){return typeof dt}:function(dt){return dt&&typeof Symbol=="function"&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt};vt.extractVersion=it,vt.wrapPeerConnectionEvent=function(dt,pt,st){if(dt.RTCPeerConnection){var ht=dt.RTCPeerConnection.prototype,at=ht.addEventListener;ht.addEventListener=function(ft,mt){if(ft!==pt)return at.apply(this,arguments);var yt=function(At){var wt=st(At);wt&&mt(wt)};return this._eventMap=this._eventMap||{},this._eventMap[mt]=yt,at.apply(this,[ft,yt])};var ut=ht.removeEventListener;ht.removeEventListener=function(ft,mt){if(ft!==pt||!this._eventMap||!this._eventMap[mt])return ut.apply(this,arguments);var yt=this._eventMap[mt];return delete this._eventMap[mt],ut.apply(this,[ft,yt])},Object.defineProperty(ht,"on"+pt,{get:function(){return this["_on"+pt]},set:function(ft){this["_on"+pt]&&(this.removeEventListener(pt,this["_on"+pt]),delete this["_on"+pt]),ft&&this.addEventListener(pt,this["_on"+pt]=ft)},enumerable:!0,configurable:!0})}},vt.disableLog=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":rt(dt))+". Please use a boolean."):(ot=dt,dt?"adapter.js logging disabled":"adapter.js logging enabled")},vt.disableWarnings=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":rt(dt))+". Please use a boolean."):(gt=!dt,"adapter.js deprecation warnings "+(dt?"disabled":"enabled"))},vt.log=function(){if((typeof window>"u"?"undefined":rt(window))==="object"){if(ot)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},vt.deprecated=function(dt,pt){gt&&console.warn(dt+" is deprecated, please use "+pt+" instead.")},vt.detectBrowser=function(dt){var pt=dt.navigator,st={browser:null,version:null};if(dt===void 0||!dt.navigator)return st.browser="Not a browser.",st;if(pt.mozGetUserMedia)st.browser="firefox",st.version=it(pt.userAgent,/Firefox\/(\d+)\./,1);else if(pt.webkitGetUserMedia||dt.isSecureContext===!1&&dt.webkitRTCPeerConnection&&!dt.RTCIceGatherer)st.browser="chrome",st.version=it(pt.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(pt.mediaDevices&&pt.userAgent.match(/Edge\/(\d+).(\d+)$/))st.browser="edge",st.version=it(pt.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!dt.RTCPeerConnection||!pt.userAgent.match(/AppleWebKit\/(\d+)\./))return st.browser="Not a supported browser.",st;st.browser="safari",st.version=it(pt.userAgent,/AppleWebKit\/(\d+)\./,1)}return st},vt.compactObject=s,vt.walkStats=et,vt.filterStats=function(dt,pt,st){var ht=st?"outbound-rtp":"inbound-rtp",at=new Map;if(pt===null)return at;var ut=[];return dt.forEach(function(ft){ft.type==="track"&&ft.trackIdentifier===pt.id&&ut.push(ft)}),ut.forEach(function(ft){dt.forEach(function(mt){mt.type===ht&&mt.trackId===ft.id&&et(dt,mt,at)})}),at};var ot=!0,gt=!0},{}],16:[function(tt,ct,vt){function nt(pt){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[pt.type]||pt.type}function it(pt,st,ht,at,ut){var ft=dt.writeRtpDescription(pt.kind,st);if(ft+=dt.writeIceParameters(pt.iceGatherer.getLocalParameters()),ft+=dt.writeDtlsParameters(pt.dtlsTransport.getLocalParameters(),ht==="offer"?"actpass":ut||"active"),ft+="a=mid:"+pt.mid+`\r
`,pt.rtpSender&&pt.rtpReceiver?ft+=`a=sendrecv\r
`:pt.rtpSender?ft+=`a=sendonly\r
`:pt.rtpReceiver?ft+=`a=recvonly\r
`:ft+=`a=inactive\r
`,pt.rtpSender){var mt=pt.rtpSender._initialTrackId||pt.rtpSender.track.id;pt.rtpSender._initialTrackId=mt;var yt="msid:"+(at?at.id:"-")+" "+mt+`\r
`;ft+="a="+yt,ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" "+yt,pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" "+yt,ft+="a=ssrc-group:FID "+pt.sendEncodingParameters[0].ssrc+" "+pt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" cname:"+dt.localCName+`\r
`,pt.rtpSender&&pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" cname:"+dt.localCName+`\r
`),ft}function s(pt,st){var ht=!1;return(pt=JSON.parse(JSON.stringify(pt))).filter(function(at){if(at&&(at.urls||at.url)){var ut=at.urls||at.url;at.url&&!at.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var ft=typeof ut=="string";return ft&&(ut=[ut]),ut=ut.filter(function(mt){return mt.indexOf("turn:")===0&&mt.indexOf("transport=udp")!==-1&&mt.indexOf("turn:[")===-1&&!ht?(ht=!0,!0):mt.indexOf("stun:")===0&&st>=14393&&mt.indexOf("?transport=udp")===-1}),delete at.url,at.urls=ft?ut[0]:ut,!!ut.length}})}function et(pt,st){var ht={codecs:[],headerExtensions:[],fecMechanisms:[]},at=function(ft,mt){ft=parseInt(ft,10);for(var yt=0;yt<mt.length;yt++)if(mt[yt].payloadType===ft||mt[yt].preferredPayloadType===ft)return mt[yt]},ut=function(ft,mt,yt,At){var wt=at(ft.parameters.apt,yt),Pt=at(mt.parameters.apt,At);return wt&&Pt&&wt.name.toLowerCase()===Pt.name.toLowerCase()};return pt.codecs.forEach(function(ft){for(var mt=0;mt<st.codecs.length;mt++){var yt=st.codecs[mt];if(ft.name.toLowerCase()===yt.name.toLowerCase()&&ft.clockRate===yt.clockRate){if(ft.name.toLowerCase()==="rtx"&&ft.parameters&&yt.parameters.apt&&!ut(ft,yt,pt.codecs,st.codecs))continue;(yt=JSON.parse(JSON.stringify(yt))).numChannels=Math.min(ft.numChannels,yt.numChannels),ht.codecs.push(yt),yt.rtcpFeedback=yt.rtcpFeedback.filter(function(At){for(var wt=0;wt<ft.rtcpFeedback.length;wt++)if(ft.rtcpFeedback[wt].type===At.type&&ft.rtcpFeedback[wt].parameter===At.parameter)return!0;return!1});break}}}),pt.headerExtensions.forEach(function(ft){for(var mt=0;mt<st.headerExtensions.length;mt++){var yt=st.headerExtensions[mt];if(ft.uri===yt.uri){ht.headerExtensions.push(yt);break}}}),ht}function rt(pt,st,ht){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[st][pt].indexOf(ht)!==-1}function ot(pt,st){var ht=pt.getRemoteCandidates().find(function(at){return st.foundation===at.foundation&&st.ip===at.ip&&st.port===at.port&&st.priority===at.priority&&st.protocol===at.protocol&&st.type===at.type});return ht||pt.addRemoteCandidate(st),!ht}function gt(pt,st){var ht=new Error(st);return ht.name=pt,ht.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[pt],ht}var dt=tt("sdp");ct.exports=function(pt,st){function ht(yt,At){At.addTrack(yt),At.dispatchEvent(new pt.MediaStreamTrackEvent("addtrack",{track:yt}))}function at(yt,At){At.removeTrack(yt),At.dispatchEvent(new pt.MediaStreamTrackEvent("removetrack",{track:yt}))}function ut(yt,At,wt,Pt){var Rt=new Event("track");Rt.track=At,Rt.receiver=wt,Rt.transceiver={receiver:wt},Rt.streams=Pt,pt.setTimeout(function(){yt._dispatchEvent("track",Rt)})}var ft=function(yt){var At=this,wt=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(Rt){At[Rt]=wt[Rt].bind(wt)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",yt=JSON.parse(JSON.stringify(yt||{})),this.usingBundle=yt.bundlePolicy==="max-bundle",yt.rtcpMuxPolicy==="negotiate")throw gt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(yt.rtcpMuxPolicy||(yt.rtcpMuxPolicy="require"),yt.iceTransportPolicy){case"all":case"relay":break;default:yt.iceTransportPolicy="all"}switch(yt.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:yt.bundlePolicy="balanced"}if(yt.iceServers=s(yt.iceServers||[],st),this._iceGatherers=[],yt.iceCandidatePoolSize)for(var Pt=yt.iceCandidatePoolSize;Pt>0;Pt--)this._iceGatherers.push(new pt.RTCIceGatherer({iceServers:yt.iceServers,gatherPolicy:yt.iceTransportPolicy}));else yt.iceCandidatePoolSize=0;this._config=yt,this.transceivers=[],this._sdpSessionId=dt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(ft.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(ft.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),ft.prototype.onicecandidate=null,ft.prototype.onaddstream=null,ft.prototype.ontrack=null,ft.prototype.onremovestream=null,ft.prototype.onsignalingstatechange=null,ft.prototype.oniceconnectionstatechange=null,ft.prototype.onconnectionstatechange=null,ft.prototype.onicegatheringstatechange=null,ft.prototype.onnegotiationneeded=null,ft.prototype.ondatachannel=null,ft.prototype._dispatchEvent=function(yt,At){this._isClosed||(this.dispatchEvent(At),typeof this["on"+yt]=="function"&&this["on"+yt](At))},ft.prototype._emitGatheringStateChange=function(){var yt=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",yt)},ft.prototype.getConfiguration=function(){return this._config},ft.prototype.getLocalStreams=function(){return this.localStreams},ft.prototype.getRemoteStreams=function(){return this.remoteStreams},ft.prototype._createTransceiver=function(yt,At){var wt=this.transceivers.length>0,Pt={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:yt,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&wt)Pt.iceTransport=this.transceivers[0].iceTransport,Pt.dtlsTransport=this.transceivers[0].dtlsTransport;else{var Rt=this._createIceAndDtlsTransports();Pt.iceTransport=Rt.iceTransport,Pt.dtlsTransport=Rt.dtlsTransport}return At||this.transceivers.push(Pt),Pt},ft.prototype.addTrack=function(yt,At){if(this._isClosed)throw gt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(Rt){return Rt.track===yt}))throw gt("InvalidAccessError","Track already exists.");for(var wt,Pt=0;Pt<this.transceivers.length;Pt++)this.transceivers[Pt].track||this.transceivers[Pt].kind!==yt.kind||(wt=this.transceivers[Pt]);return wt||(wt=this._createTransceiver(yt.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(At)===-1&&this.localStreams.push(At),wt.track=yt,wt.stream=At,wt.rtpSender=new pt.RTCRtpSender(yt,wt.dtlsTransport),wt.rtpSender},ft.prototype.addStream=function(yt){var At=this;if(st>=15025)yt.getTracks().forEach(function(Pt){At.addTrack(Pt,yt)});else{var wt=yt.clone();yt.getTracks().forEach(function(Pt,Rt){var kt=wt.getTracks()[Rt];Pt.addEventListener("enabled",function(bt){kt.enabled=bt.enabled})}),wt.getTracks().forEach(function(Pt){At.addTrack(Pt,wt)})}},ft.prototype.removeTrack=function(yt){if(this._isClosed)throw gt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(yt instanceof pt.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var At=this.transceivers.find(function(Pt){return Pt.rtpSender===yt});if(!At)throw gt("InvalidAccessError","Sender was not created by this connection.");var wt=At.stream;At.rtpSender.stop(),At.rtpSender=null,At.track=null,At.stream=null,this.transceivers.map(function(Pt){return Pt.stream}).indexOf(wt)===-1&&this.localStreams.indexOf(wt)>-1&&this.localStreams.splice(this.localStreams.indexOf(wt),1),this._maybeFireNegotiationNeeded()},ft.prototype.removeStream=function(yt){var At=this;yt.getTracks().forEach(function(wt){var Pt=At.getSenders().find(function(Rt){return Rt.track===wt});Pt&&At.removeTrack(Pt)})},ft.prototype.getSenders=function(){return this.transceivers.filter(function(yt){return!!yt.rtpSender}).map(function(yt){return yt.rtpSender})},ft.prototype.getReceivers=function(){return this.transceivers.filter(function(yt){return!!yt.rtpReceiver}).map(function(yt){return yt.rtpReceiver})},ft.prototype._createIceGatherer=function(yt,At){var wt=this;if(At&&yt>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Pt=new pt.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Pt,"state",{value:"new",writable:!0}),this.transceivers[yt].bufferedCandidateEvents=[],this.transceivers[yt].bufferCandidates=function(Rt){var kt=!Rt.candidate||Object.keys(Rt.candidate).length===0;Pt.state=kt?"completed":"gathering",wt.transceivers[yt].bufferedCandidateEvents!==null&&wt.transceivers[yt].bufferedCandidateEvents.push(Rt)},Pt.addEventListener("localcandidate",this.transceivers[yt].bufferCandidates),Pt},ft.prototype._gather=function(yt,At){var wt=this,Pt=this.transceivers[At].iceGatherer;if(!Pt.onlocalcandidate){var Rt=this.transceivers[At].bufferedCandidateEvents;this.transceivers[At].bufferedCandidateEvents=null,Pt.removeEventListener("localcandidate",this.transceivers[At].bufferCandidates),Pt.onlocalcandidate=function(kt){if(!(wt.usingBundle&&At>0)){var bt=new Event("icecandidate");bt.candidate={sdpMid:yt,sdpMLineIndex:At};var Nt=kt.candidate,Ft=!Nt||Object.keys(Nt).length===0;if(Ft)Pt.state!=="new"&&Pt.state!=="gathering"||(Pt.state="completed");else{Pt.state==="new"&&(Pt.state="gathering"),Nt.component=1,Nt.ufrag=Pt.getLocalParameters().usernameFragment;var Ut=dt.writeCandidate(Nt);bt.candidate=Object.assign(bt.candidate,dt.parseCandidate(Ut)),bt.candidate.candidate=Ut,bt.candidate.toJSON=function(){return{candidate:bt.candidate.candidate,sdpMid:bt.candidate.sdpMid,sdpMLineIndex:bt.candidate.sdpMLineIndex,usernameFragment:bt.candidate.usernameFragment}}}var Jt=dt.getMediaSections(wt._localDescription.sdp);Jt[bt.candidate.sdpMLineIndex]+=Ft?`a=end-of-candidates\r
`:"a="+bt.candidate.candidate+`\r
`,wt._localDescription.sdp=dt.getDescription(wt._localDescription.sdp)+Jt.join("");var hn=wt.transceivers.every(function(Xt){return Xt.iceGatherer&&Xt.iceGatherer.state==="completed"});wt.iceGatheringState!=="gathering"&&(wt.iceGatheringState="gathering",wt._emitGatheringStateChange()),Ft||wt._dispatchEvent("icecandidate",bt),hn&&(wt._dispatchEvent("icecandidate",new Event("icecandidate")),wt.iceGatheringState="complete",wt._emitGatheringStateChange())}},pt.setTimeout(function(){Rt.forEach(function(kt){Pt.onlocalcandidate(kt)})},0)}},ft.prototype._createIceAndDtlsTransports=function(){var yt=this,At=new pt.RTCIceTransport(null);At.onicestatechange=function(){yt._updateIceConnectionState(),yt._updateConnectionState()};var wt=new pt.RTCDtlsTransport(At);return wt.ondtlsstatechange=function(){yt._updateConnectionState()},wt.onerror=function(){Object.defineProperty(wt,"state",{value:"failed",writable:!0}),yt._updateConnectionState()},{iceTransport:At,dtlsTransport:wt}},ft.prototype._disposeIceAndDtlsTransports=function(yt){var At=this.transceivers[yt].iceGatherer;At&&(delete At.onlocalcandidate,delete this.transceivers[yt].iceGatherer);var wt=this.transceivers[yt].iceTransport;wt&&(delete wt.onicestatechange,delete this.transceivers[yt].iceTransport);var Pt=this.transceivers[yt].dtlsTransport;Pt&&(delete Pt.ondtlsstatechange,delete Pt.onerror,delete this.transceivers[yt].dtlsTransport)},ft.prototype._transceive=function(yt,At,wt){var Pt=et(yt.localCapabilities,yt.remoteCapabilities);At&&yt.rtpSender&&(Pt.encodings=yt.sendEncodingParameters,Pt.rtcp={cname:dt.localCName,compound:yt.rtcpParameters.compound},yt.recvEncodingParameters.length&&(Pt.rtcp.ssrc=yt.recvEncodingParameters[0].ssrc),yt.rtpSender.send(Pt)),wt&&yt.rtpReceiver&&Pt.codecs.length>0&&(yt.kind==="video"&&yt.recvEncodingParameters&&st<15019&&yt.recvEncodingParameters.forEach(function(Rt){delete Rt.rtx}),yt.recvEncodingParameters.length?Pt.encodings=yt.recvEncodingParameters:Pt.encodings=[{}],Pt.rtcp={compound:yt.rtcpParameters.compound},yt.rtcpParameters.cname&&(Pt.rtcp.cname=yt.rtcpParameters.cname),yt.sendEncodingParameters.length&&(Pt.rtcp.ssrc=yt.sendEncodingParameters[0].ssrc),yt.rtpReceiver.receive(Pt))},ft.prototype.setLocalDescription=function(yt){var At=this;if(["offer","answer"].indexOf(yt.type)===-1)return Promise.reject(gt("TypeError",'Unsupported type "'+yt.type+'"'));if(!rt("setLocalDescription",yt.type,At.signalingState)||At._isClosed)return Promise.reject(gt("InvalidStateError","Can not set local "+yt.type+" in state "+At.signalingState));var wt,Pt;if(yt.type==="offer")wt=dt.splitSections(yt.sdp),Pt=wt.shift(),wt.forEach(function(kt,bt){var Nt=dt.parseRtpParameters(kt);At.transceivers[bt].localCapabilities=Nt}),At.transceivers.forEach(function(kt,bt){At._gather(kt.mid,bt)});else if(yt.type==="answer"){wt=dt.splitSections(At._remoteDescription.sdp),Pt=wt.shift();var Rt=dt.matchPrefix(Pt,"a=ice-lite").length>0;wt.forEach(function(kt,bt){var Nt=At.transceivers[bt],Ft=Nt.iceGatherer,Ut=Nt.iceTransport,Jt=Nt.dtlsTransport,hn=Nt.localCapabilities,Xt=Nt.remoteCapabilities;if(!(dt.isRejected(kt)&&dt.matchPrefix(kt,"a=bundle-only").length===0)&&!Nt.rejected){var zt=dt.getIceParameters(kt,Pt),cn=dt.getDtlsParameters(kt,Pt);Rt&&(cn.role="server"),At.usingBundle&&bt!==0||(At._gather(Nt.mid,bt),Ut.state==="new"&&Ut.start(Ft,zt,Rt?"controlling":"controlled"),Jt.state==="new"&&Jt.start(cn));var vn=et(hn,Xt);At._transceive(Nt,vn.codecs.length>0,!1)}})}return At._localDescription={type:yt.type,sdp:yt.sdp},yt.type==="offer"?At._updateSignalingState("have-local-offer"):At._updateSignalingState("stable"),Promise.resolve()},ft.prototype.setRemoteDescription=function(yt){var At=this;if(["offer","answer"].indexOf(yt.type)===-1)return Promise.reject(gt("TypeError",'Unsupported type "'+yt.type+'"'));if(!rt("setRemoteDescription",yt.type,At.signalingState)||At._isClosed)return Promise.reject(gt("InvalidStateError","Can not set remote "+yt.type+" in state "+At.signalingState));var wt={};At.remoteStreams.forEach(function(Ut){wt[Ut.id]=Ut});var Pt=[],Rt=dt.splitSections(yt.sdp),kt=Rt.shift(),bt=dt.matchPrefix(kt,"a=ice-lite").length>0,Nt=dt.matchPrefix(kt,"a=group:BUNDLE ").length>0;At.usingBundle=Nt;var Ft=dt.matchPrefix(kt,"a=ice-options:")[0];return At.canTrickleIceCandidates=!!Ft&&Ft.substr(14).split(" ").indexOf("trickle")>=0,Rt.forEach(function(Ut,Jt){var hn=dt.splitLines(Ut),Xt=dt.getKind(Ut),zt=dt.isRejected(Ut)&&dt.matchPrefix(Ut,"a=bundle-only").length===0,cn=hn[0].substr(2).split(" ")[2],vn=dt.getDirection(Ut,kt),Sn=dt.parseMsid(Ut),fn=dt.getMid(Ut)||dt.generateIdentifier();if(zt||Xt==="application"&&(cn==="DTLS/SCTP"||cn==="UDP/DTLS/SCTP"))At.transceivers[Jt]={mid:fn,kind:Xt,protocol:cn,rejected:!0};else{!zt&&At.transceivers[Jt]&&At.transceivers[Jt].rejected&&(At.transceivers[Jt]=At._createTransceiver(Xt,!0));var mn,bn,un,Tn,kn,xn,An,En,Rn,wn,Dn,Bn=dt.parseRtpParameters(Ut);zt||(wn=dt.getIceParameters(Ut,kt),(Dn=dt.getDtlsParameters(Ut,kt)).role="client"),An=dt.parseRtpEncodingParameters(Ut);var zn=dt.parseRtcpParameters(Ut),Hn=dt.matchPrefix(Ut,"a=end-of-candidates",kt).length>0,nr=dt.matchPrefix(Ut,"a=candidate:").map(function(Zn){return dt.parseCandidate(Zn)}).filter(function(Zn){return Zn.component===1});if((yt.type==="offer"||yt.type==="answer")&&!zt&&Nt&&Jt>0&&At.transceivers[Jt]&&(At._disposeIceAndDtlsTransports(Jt),At.transceivers[Jt].iceGatherer=At.transceivers[0].iceGatherer,At.transceivers[Jt].iceTransport=At.transceivers[0].iceTransport,At.transceivers[Jt].dtlsTransport=At.transceivers[0].dtlsTransport,At.transceivers[Jt].rtpSender&&At.transceivers[Jt].rtpSender.setTransport(At.transceivers[0].dtlsTransport),At.transceivers[Jt].rtpReceiver&&At.transceivers[Jt].rtpReceiver.setTransport(At.transceivers[0].dtlsTransport)),yt.type!=="offer"||zt)yt.type!=="answer"||zt||(bn=(mn=At.transceivers[Jt]).iceGatherer,un=mn.iceTransport,Tn=mn.dtlsTransport,kn=mn.rtpReceiver,xn=mn.sendEncodingParameters,En=mn.localCapabilities,At.transceivers[Jt].recvEncodingParameters=An,At.transceivers[Jt].remoteCapabilities=Bn,At.transceivers[Jt].rtcpParameters=zn,nr.length&&un.state==="new"&&(!bt&&!Hn||Nt&&Jt!==0?nr.forEach(function(Zn){ot(mn.iceTransport,Zn)}):un.setRemoteCandidates(nr)),Nt&&Jt!==0||(un.state==="new"&&un.start(bn,wn,"controlling"),Tn.state==="new"&&Tn.start(Dn)),!et(mn.localCapabilities,mn.remoteCapabilities).codecs.filter(function(Zn){return Zn.name.toLowerCase()==="rtx"}).length&&mn.sendEncodingParameters[0].rtx&&delete mn.sendEncodingParameters[0].rtx,At._transceive(mn,vn==="sendrecv"||vn==="recvonly",vn==="sendrecv"||vn==="sendonly"),!kn||vn!=="sendrecv"&&vn!=="sendonly"?delete mn.rtpReceiver:(Rn=kn.track,Sn?(wt[Sn.stream]||(wt[Sn.stream]=new pt.MediaStream),ht(Rn,wt[Sn.stream]),Pt.push([Rn,kn,wt[Sn.stream]])):(wt.default||(wt.default=new pt.MediaStream),ht(Rn,wt.default),Pt.push([Rn,kn,wt.default]))));else{(mn=At.transceivers[Jt]||At._createTransceiver(Xt)).mid=fn,mn.iceGatherer||(mn.iceGatherer=At._createIceGatherer(Jt,Nt)),nr.length&&mn.iceTransport.state==="new"&&(!Hn||Nt&&Jt!==0?nr.forEach(function(Zn){ot(mn.iceTransport,Zn)}):mn.iceTransport.setRemoteCandidates(nr)),En=pt.RTCRtpReceiver.getCapabilities(Xt),st<15019&&(En.codecs=En.codecs.filter(function(Zn){return Zn.name!=="rtx"})),xn=mn.sendEncodingParameters||[{ssrc:1001*(2*Jt+2)}];var sn=!1;if(vn==="sendrecv"||vn==="sendonly"){if(sn=!mn.rtpReceiver,kn=mn.rtpReceiver||new pt.RTCRtpReceiver(mn.dtlsTransport,Xt),sn){var Gn;Rn=kn.track,Sn&&Sn.stream==="-"||(Sn?(wt[Sn.stream]||(wt[Sn.stream]=new pt.MediaStream,Object.defineProperty(wt[Sn.stream],"id",{get:function(){return Sn.stream}})),Object.defineProperty(Rn,"id",{get:function(){return Sn.track}}),Gn=wt[Sn.stream]):(wt.default||(wt.default=new pt.MediaStream),Gn=wt.default)),Gn&&(ht(Rn,Gn),mn.associatedRemoteMediaStreams.push(Gn)),Pt.push([Rn,kn,Gn])}}else mn.rtpReceiver&&mn.rtpReceiver.track&&(mn.associatedRemoteMediaStreams.forEach(function(Zn){var rr=Zn.getTracks().find(function(Fn){return Fn.id===mn.rtpReceiver.track.id});rr&&at(rr,Zn)}),mn.associatedRemoteMediaStreams=[]);mn.localCapabilities=En,mn.remoteCapabilities=Bn,mn.rtpReceiver=kn,mn.rtcpParameters=zn,mn.sendEncodingParameters=xn,mn.recvEncodingParameters=An,At._transceive(At.transceivers[Jt],!1,sn)}}}),At._dtlsRole===void 0&&(At._dtlsRole=yt.type==="offer"?"active":"passive"),At._remoteDescription={type:yt.type,sdp:yt.sdp},yt.type==="offer"?At._updateSignalingState("have-remote-offer"):At._updateSignalingState("stable"),Object.keys(wt).forEach(function(Ut){var Jt=wt[Ut];if(Jt.getTracks().length){if(At.remoteStreams.indexOf(Jt)===-1){At.remoteStreams.push(Jt);var hn=new Event("addstream");hn.stream=Jt,pt.setTimeout(function(){At._dispatchEvent("addstream",hn)})}Pt.forEach(function(Xt){var zt=Xt[0],cn=Xt[1];Jt.id===Xt[2].id&&ut(At,zt,cn,[Jt])})}}),Pt.forEach(function(Ut){Ut[2]||ut(At,Ut[0],Ut[1],[])}),pt.setTimeout(function(){At&&At.transceivers&&At.transceivers.forEach(function(Ut){Ut.iceTransport&&Ut.iceTransport.state==="new"&&Ut.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Ut.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},ft.prototype.close=function(){this.transceivers.forEach(function(yt){yt.iceTransport&&yt.iceTransport.stop(),yt.dtlsTransport&&yt.dtlsTransport.stop(),yt.rtpSender&&yt.rtpSender.stop(),yt.rtpReceiver&&yt.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},ft.prototype._updateSignalingState=function(yt){this.signalingState=yt;var At=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",At)},ft.prototype._maybeFireNegotiationNeeded=function(){var yt=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,pt.setTimeout(function(){if(yt.needNegotiation){yt.needNegotiation=!1;var At=new Event("negotiationneeded");yt._dispatchEvent("negotiationneeded",At)}},0))},ft.prototype._updateIceConnectionState=function(){var yt,At={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Pt){Pt.iceTransport&&!Pt.rejected&&At[Pt.iceTransport.state]++}),yt="new",At.failed>0?yt="failed":At.checking>0?yt="checking":At.disconnected>0?yt="disconnected":At.new>0?yt="new":At.connected>0?yt="connected":At.completed>0&&(yt="completed"),yt!==this.iceConnectionState){this.iceConnectionState=yt;var wt=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",wt)}},ft.prototype._updateConnectionState=function(){var yt,At={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Pt){Pt.iceTransport&&Pt.dtlsTransport&&!Pt.rejected&&(At[Pt.iceTransport.state]++,At[Pt.dtlsTransport.state]++)}),At.connected+=At.completed,yt="new",At.failed>0?yt="failed":At.connecting>0?yt="connecting":At.disconnected>0?yt="disconnected":At.new>0?yt="new":At.connected>0&&(yt="connected"),yt!==this.connectionState){this.connectionState=yt;var wt=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",wt)}},ft.prototype.createOffer=function(){var yt=this;if(yt._isClosed)return Promise.reject(gt("InvalidStateError","Can not call createOffer after close"));var At=yt.transceivers.filter(function(bt){return bt.kind==="audio"}).length,wt=yt.transceivers.filter(function(bt){return bt.kind==="video"}).length,Pt=arguments[0];if(Pt){if(Pt.mandatory||Pt.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Pt.offerToReceiveAudio!==void 0&&(At=Pt.offerToReceiveAudio===!0?1:Pt.offerToReceiveAudio===!1?0:Pt.offerToReceiveAudio),Pt.offerToReceiveVideo!==void 0&&(wt=Pt.offerToReceiveVideo===!0?1:Pt.offerToReceiveVideo===!1?0:Pt.offerToReceiveVideo)}for(yt.transceivers.forEach(function(bt){bt.kind==="audio"?--At<0&&(bt.wantReceive=!1):bt.kind==="video"&&--wt<0&&(bt.wantReceive=!1)});At>0||wt>0;)At>0&&(yt._createTransceiver("audio"),At--),wt>0&&(yt._createTransceiver("video"),wt--);var Rt=dt.writeSessionBoilerplate(yt._sdpSessionId,yt._sdpSessionVersion++);yt.transceivers.forEach(function(bt,Nt){var Ft=bt.track,Ut=bt.kind,Jt=bt.mid||dt.generateIdentifier();bt.mid=Jt,bt.iceGatherer||(bt.iceGatherer=yt._createIceGatherer(Nt,yt.usingBundle));var hn=pt.RTCRtpSender.getCapabilities(Ut);st<15019&&(hn.codecs=hn.codecs.filter(function(zt){return zt.name!=="rtx"})),hn.codecs.forEach(function(zt){zt.name==="H264"&&zt.parameters["level-asymmetry-allowed"]===void 0&&(zt.parameters["level-asymmetry-allowed"]="1"),bt.remoteCapabilities&&bt.remoteCapabilities.codecs&&bt.remoteCapabilities.codecs.forEach(function(cn){zt.name.toLowerCase()===cn.name.toLowerCase()&&zt.clockRate===cn.clockRate&&(zt.preferredPayloadType=cn.payloadType)})}),hn.headerExtensions.forEach(function(zt){(bt.remoteCapabilities&&bt.remoteCapabilities.headerExtensions||[]).forEach(function(cn){zt.uri===cn.uri&&(zt.id=cn.id)})});var Xt=bt.sendEncodingParameters||[{ssrc:1001*(2*Nt+1)}];Ft&&st>=15019&&Ut==="video"&&!Xt[0].rtx&&(Xt[0].rtx={ssrc:Xt[0].ssrc+1}),bt.wantReceive&&(bt.rtpReceiver=new pt.RTCRtpReceiver(bt.dtlsTransport,Ut)),bt.localCapabilities=hn,bt.sendEncodingParameters=Xt}),yt._config.bundlePolicy!=="max-compat"&&(Rt+="a=group:BUNDLE "+yt.transceivers.map(function(bt){return bt.mid}).join(" ")+`\r
`),Rt+=`a=ice-options:trickle\r
`,yt.transceivers.forEach(function(bt,Nt){Rt+=it(bt,bt.localCapabilities,"offer",bt.stream,yt._dtlsRole),Rt+=`a=rtcp-rsize\r
`,!bt.iceGatherer||yt.iceGatheringState==="new"||Nt!==0&&yt.usingBundle||(bt.iceGatherer.getLocalCandidates().forEach(function(Ft){Ft.component=1,Rt+="a="+dt.writeCandidate(Ft)+`\r
`}),bt.iceGatherer.state==="completed"&&(Rt+=`a=end-of-candidates\r
`))});var kt=new pt.RTCSessionDescription({type:"offer",sdp:Rt});return Promise.resolve(kt)},ft.prototype.createAnswer=function(){var yt=this;if(yt._isClosed)return Promise.reject(gt("InvalidStateError","Can not call createAnswer after close"));if(yt.signalingState!=="have-remote-offer"&&yt.signalingState!=="have-local-pranswer")return Promise.reject(gt("InvalidStateError","Can not call createAnswer in signalingState "+yt.signalingState));var At=dt.writeSessionBoilerplate(yt._sdpSessionId,yt._sdpSessionVersion++);yt.usingBundle&&(At+="a=group:BUNDLE "+yt.transceivers.map(function(Rt){return Rt.mid}).join(" ")+`\r
`),At+=`a=ice-options:trickle\r
`;var wt=dt.getMediaSections(yt._remoteDescription.sdp).length;yt.transceivers.forEach(function(Rt,kt){if(!(kt+1>wt)){if(Rt.rejected)return Rt.kind==="application"?Rt.protocol==="DTLS/SCTP"?At+=`m=application 0 DTLS/SCTP 5000\r
`:At+="m=application 0 "+Rt.protocol+` webrtc-datachannel\r
`:Rt.kind==="audio"?At+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:Rt.kind==="video"&&(At+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(At+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+Rt.mid+`\r
`);if(Rt.stream){var bt;Rt.kind==="audio"?bt=Rt.stream.getAudioTracks()[0]:Rt.kind==="video"&&(bt=Rt.stream.getVideoTracks()[0]),bt&&st>=15019&&Rt.kind==="video"&&!Rt.sendEncodingParameters[0].rtx&&(Rt.sendEncodingParameters[0].rtx={ssrc:Rt.sendEncodingParameters[0].ssrc+1})}var Nt=et(Rt.localCapabilities,Rt.remoteCapabilities);!Nt.codecs.filter(function(Ft){return Ft.name.toLowerCase()==="rtx"}).length&&Rt.sendEncodingParameters[0].rtx&&delete Rt.sendEncodingParameters[0].rtx,At+=it(Rt,Nt,"answer",Rt.stream,yt._dtlsRole),Rt.rtcpParameters&&Rt.rtcpParameters.reducedSize&&(At+=`a=rtcp-rsize\r
`)}});var Pt=new pt.RTCSessionDescription({type:"answer",sdp:At});return Promise.resolve(Pt)},ft.prototype.addIceCandidate=function(yt){var At,wt=this;return yt&&yt.sdpMLineIndex===void 0&&!yt.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(Pt,Rt){if(!wt._remoteDescription)return Rt(gt("InvalidStateError","Can not add ICE candidate without a remote description"));if(yt&&yt.candidate!==""){var kt=yt.sdpMLineIndex;if(yt.sdpMid){for(var bt=0;bt<wt.transceivers.length;bt++)if(wt.transceivers[bt].mid===yt.sdpMid){kt=bt;break}}var Nt=wt.transceivers[kt];if(!Nt)return Rt(gt("OperationError","Can not add ICE candidate"));if(Nt.rejected)return Pt();var Ft=Object.keys(yt.candidate).length>0?dt.parseCandidate(yt.candidate):{};if(Ft.protocol==="tcp"&&(Ft.port===0||Ft.port===9)||Ft.component&&Ft.component!==1)return Pt();if((kt===0||kt>0&&Nt.iceTransport!==wt.transceivers[0].iceTransport)&&!ot(Nt.iceTransport,Ft))return Rt(gt("OperationError","Can not add ICE candidate"));var Ut=yt.candidate.trim();Ut.indexOf("a=")===0&&(Ut=Ut.substr(2)),(At=dt.getMediaSections(wt._remoteDescription.sdp))[kt]+="a="+(Ft.type?Ut:"end-of-candidates")+`\r
`,wt._remoteDescription.sdp=dt.getDescription(wt._remoteDescription.sdp)+At.join("")}else for(var Jt=0;Jt<wt.transceivers.length&&(wt.transceivers[Jt].rejected||(wt.transceivers[Jt].iceTransport.addRemoteCandidate({}),At=dt.getMediaSections(wt._remoteDescription.sdp),At[Jt]+=`a=end-of-candidates\r
`,wt._remoteDescription.sdp=dt.getDescription(wt._remoteDescription.sdp)+At.join(""),!wt.usingBundle));Jt++);Pt()})},ft.prototype.getStats=function(yt){if(yt&&yt instanceof pt.MediaStreamTrack){var At=null;if(this.transceivers.forEach(function(Pt){Pt.rtpSender&&Pt.rtpSender.track===yt?At=Pt.rtpSender:Pt.rtpReceiver&&Pt.rtpReceiver.track===yt&&(At=Pt.rtpReceiver)}),!At)throw gt("InvalidAccessError","Invalid selector.");return At.getStats()}var wt=[];return this.transceivers.forEach(function(Pt){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(Rt){Pt[Rt]&&wt.push(Pt[Rt].getStats())})}),Promise.all(wt).then(function(Pt){var Rt=new Map;return Pt.forEach(function(kt){kt.forEach(function(bt){Rt.set(bt.id,bt)})}),Rt})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(yt){var At=pt[yt];if(At&&At.prototype&&At.prototype.getStats){var wt=At.prototype.getStats;At.prototype.getStats=function(){return wt.apply(this).then(function(Pt){var Rt=new Map;return Object.keys(Pt).forEach(function(kt){Pt[kt].type=nt(Pt[kt]),Rt.set(kt,Pt[kt])}),Rt})}}});var mt=["createOffer","createAnswer"];return mt.forEach(function(yt){var At=ft.prototype[yt];ft.prototype[yt]=function(){var wt=arguments;return typeof wt[0]=="function"||typeof wt[1]=="function"?At.apply(this,[arguments[2]]).then(function(Pt){typeof wt[0]=="function"&&wt[0].apply(null,[Pt])},function(Pt){typeof wt[1]=="function"&&wt[1].apply(null,[Pt])}):At.apply(this,arguments)}}),(mt=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(yt){var At=ft.prototype[yt];ft.prototype[yt]=function(){var wt=arguments;return typeof wt[1]=="function"||typeof wt[2]=="function"?At.apply(this,arguments).then(function(){typeof wt[1]=="function"&&wt[1].apply(null)},function(Pt){typeof wt[2]=="function"&&wt[2].apply(null,[Pt])}):At.apply(this,arguments)}}),["getStats"].forEach(function(yt){var At=ft.prototype[yt];ft.prototype[yt]=function(){var wt=arguments;return typeof wt[1]=="function"?At.apply(this,arguments).then(function(){typeof wt[1]=="function"&&wt[1].apply(null)}):At.apply(this,arguments)}}),ft}},{sdp:17}],17:[function(tt,ct,vt){var nt={};nt.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},nt.localCName=nt.generateIdentifier(),nt.splitLines=function(it){return it.trim().split(`
`).map(function(s){return s.trim()})},nt.splitSections=function(it){return it.split(`
m=`).map(function(s,et){return(et>0?"m="+s:s).trim()+`\r
`})},nt.getDescription=function(it){var s=nt.splitSections(it);return s&&s[0]},nt.getMediaSections=function(it){var s=nt.splitSections(it);return s.shift(),s},nt.matchPrefix=function(it,s){return nt.splitLines(it).filter(function(et){return et.indexOf(s)===0})},nt.parseCandidate=function(it){for(var s,et={foundation:(s=it.indexOf("a=candidate:")===0?it.substring(12).split(" "):it.substring(10).split(" "))[0],component:parseInt(s[1],10),protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]},rt=8;rt<s.length;rt+=2)switch(s[rt]){case"raddr":et.relatedAddress=s[rt+1];break;case"rport":et.relatedPort=parseInt(s[rt+1],10);break;case"tcptype":et.tcpType=s[rt+1];break;case"ufrag":et.ufrag=s[rt+1],et.usernameFragment=s[rt+1];break;default:et[s[rt]]=s[rt+1]}return et},nt.writeCandidate=function(it){var s=[];s.push(it.foundation),s.push(it.component),s.push(it.protocol.toUpperCase()),s.push(it.priority),s.push(it.address||it.ip),s.push(it.port);var et=it.type;return s.push("typ"),s.push(et),et!=="host"&&it.relatedAddress&&it.relatedPort&&(s.push("raddr"),s.push(it.relatedAddress),s.push("rport"),s.push(it.relatedPort)),it.tcpType&&it.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(it.tcpType)),(it.usernameFragment||it.ufrag)&&(s.push("ufrag"),s.push(it.usernameFragment||it.ufrag)),"candidate:"+s.join(" ")},nt.parseIceOptions=function(it){return it.substr(14).split(" ")},nt.parseRtpMap=function(it){var s=it.substr(9).split(" "),et={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),et.name=s[0],et.clockRate=parseInt(s[1],10),et.channels=s.length===3?parseInt(s[2],10):1,et.numChannels=et.channels,et},nt.writeRtpMap=function(it){var s=it.payloadType;it.preferredPayloadType!==void 0&&(s=it.preferredPayloadType);var et=it.channels||it.numChannels||1;return"a=rtpmap:"+s+" "+it.name+"/"+it.clockRate+(et!==1?"/"+et:"")+`\r
`},nt.parseExtmap=function(it){var s=it.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},nt.writeExtmap=function(it){return"a=extmap:"+(it.id||it.preferredId)+(it.direction&&it.direction!=="sendrecv"?"/"+it.direction:"")+" "+it.uri+`\r
`},nt.parseFmtp=function(it){for(var s,et={},rt=it.substr(it.indexOf(" ")+1).split(";"),ot=0;ot<rt.length;ot++)et[(s=rt[ot].trim().split("="))[0].trim()]=s[1];return et},nt.writeFmtp=function(it){var s="",et=it.payloadType;if(it.preferredPayloadType!==void 0&&(et=it.preferredPayloadType),it.parameters&&Object.keys(it.parameters).length){var rt=[];Object.keys(it.parameters).forEach(function(ot){it.parameters[ot]?rt.push(ot+"="+it.parameters[ot]):rt.push(ot)}),s+="a=fmtp:"+et+" "+rt.join(";")+`\r
`}return s},nt.parseRtcpFb=function(it){var s=it.substr(it.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},nt.writeRtcpFb=function(it){var s="",et=it.payloadType;return it.preferredPayloadType!==void 0&&(et=it.preferredPayloadType),it.rtcpFeedback&&it.rtcpFeedback.length&&it.rtcpFeedback.forEach(function(rt){s+="a=rtcp-fb:"+et+" "+rt.type+(rt.parameter&&rt.parameter.length?" "+rt.parameter:"")+`\r
`}),s},nt.parseSsrcMedia=function(it){var s=it.indexOf(" "),et={ssrc:parseInt(it.substr(7,s-7),10)},rt=it.indexOf(":",s);return rt>-1?(et.attribute=it.substr(s+1,rt-s-1),et.value=it.substr(rt+1)):et.attribute=it.substr(s+1),et},nt.parseSsrcGroup=function(it){var s=it.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(function(et){return parseInt(et,10)})}},nt.getMid=function(it){var s=nt.matchPrefix(it,"a=mid:")[0];if(s)return s.substr(6)},nt.parseFingerprint=function(it){var s=it.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1]}},nt.getDtlsParameters=function(it,s){return{role:"auto",fingerprints:nt.matchPrefix(it+s,"a=fingerprint:").map(nt.parseFingerprint)}},nt.writeDtlsParameters=function(it,s){var et="a=setup:"+s+`\r
`;return it.fingerprints.forEach(function(rt){et+="a=fingerprint:"+rt.algorithm+" "+rt.value+`\r
`}),et},nt.getIceParameters=function(it,s){var et=nt.splitLines(it);return{usernameFragment:(et=et.concat(nt.splitLines(s))).filter(function(rt){return rt.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:et.filter(function(rt){return rt.indexOf("a=ice-pwd:")===0})[0].substr(10)}},nt.writeIceParameters=function(it){return"a=ice-ufrag:"+it.usernameFragment+`\r
a=ice-pwd:`+it.password+`\r
`},nt.parseRtpParameters=function(it){for(var s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},et=nt.splitLines(it)[0].split(" "),rt=3;rt<et.length;rt++){var ot=et[rt],gt=nt.matchPrefix(it,"a=rtpmap:"+ot+" ")[0];if(gt){var dt=nt.parseRtpMap(gt),pt=nt.matchPrefix(it,"a=fmtp:"+ot+" ");switch(dt.parameters=pt.length?nt.parseFmtp(pt[0]):{},dt.rtcpFeedback=nt.matchPrefix(it,"a=rtcp-fb:"+ot+" ").map(nt.parseRtcpFb),s.codecs.push(dt),dt.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(dt.name.toUpperCase())}}}return nt.matchPrefix(it,"a=extmap:").forEach(function(st){s.headerExtensions.push(nt.parseExtmap(st))}),s},nt.writeRtpDescription=function(it,s){var et="";et+="m="+it+" ",et+=s.codecs.length>0?"9":"0",et+=" UDP/TLS/RTP/SAVPF ",et+=s.codecs.map(function(ot){return ot.preferredPayloadType!==void 0?ot.preferredPayloadType:ot.payloadType}).join(" ")+`\r
`,et+=`c=IN IP4 0.0.0.0\r
`,et+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(function(ot){et+=nt.writeRtpMap(ot),et+=nt.writeFmtp(ot),et+=nt.writeRtcpFb(ot)});var rt=0;return s.codecs.forEach(function(ot){ot.maxptime>rt&&(rt=ot.maxptime)}),rt>0&&(et+="a=maxptime:"+rt+`\r
`),et+=`a=rtcp-mux\r
`,s.headerExtensions&&s.headerExtensions.forEach(function(ot){et+=nt.writeExtmap(ot)}),et},nt.parseRtpEncodingParameters=function(it){var s,et=[],rt=nt.parseRtpParameters(it),ot=rt.fecMechanisms.indexOf("RED")!==-1,gt=rt.fecMechanisms.indexOf("ULPFEC")!==-1,dt=nt.matchPrefix(it,"a=ssrc:").map(function(at){return nt.parseSsrcMedia(at)}).filter(function(at){return at.attribute==="cname"}),pt=dt.length>0&&dt[0].ssrc,st=nt.matchPrefix(it,"a=ssrc-group:FID").map(function(at){return at.substr(17).split(" ").map(function(ut){return parseInt(ut,10)})});st.length>0&&st[0].length>1&&st[0][0]===pt&&(s=st[0][1]),rt.codecs.forEach(function(at){if(at.name.toUpperCase()==="RTX"&&at.parameters.apt){var ut={ssrc:pt,codecPayloadType:parseInt(at.parameters.apt,10)};pt&&s&&(ut.rtx={ssrc:s}),et.push(ut),ot&&((ut=JSON.parse(JSON.stringify(ut))).fec={ssrc:pt,mechanism:gt?"red+ulpfec":"red"},et.push(ut))}}),et.length===0&&pt&&et.push({ssrc:pt});var ht=nt.matchPrefix(it,"b=");return ht.length&&(ht=ht[0].indexOf("b=TIAS:")===0?parseInt(ht[0].substr(7),10):ht[0].indexOf("b=AS:")===0?1e3*parseInt(ht[0].substr(5),10)*.95-16e3:void 0,et.forEach(function(at){at.maxBitrate=ht})),et},nt.parseRtcpParameters=function(it){var s={},et=nt.matchPrefix(it,"a=ssrc:").map(function(gt){return nt.parseSsrcMedia(gt)}).filter(function(gt){return gt.attribute==="cname"})[0];et&&(s.cname=et.value,s.ssrc=et.ssrc);var rt=nt.matchPrefix(it,"a=rtcp-rsize");s.reducedSize=rt.length>0,s.compound=rt.length===0;var ot=nt.matchPrefix(it,"a=rtcp-mux");return s.mux=ot.length>0,s},nt.parseMsid=function(it){var s,et=nt.matchPrefix(it,"a=msid:");if(et.length===1)return s=et[0].substr(7).split(" "),{stream:s[0],track:s[1]};var rt=nt.matchPrefix(it,"a=ssrc:").map(function(ot){return nt.parseSsrcMedia(ot)}).filter(function(ot){return ot.attribute==="msid"});return rt.length>0?(s=rt[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},nt.generateSessionId=function(){return Math.random().toString().substr(2,21)},nt.writeSessionBoilerplate=function(it,s,et){var rt,ot=s!==void 0?s:2;return rt=it||nt.generateSessionId(),`v=0\r
o=`+(et||"thisisadapterortc")+" "+rt+" "+ot+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},nt.writeMediaSection=function(it,s,et,rt){var ot=nt.writeRtpDescription(it.kind,s);if(ot+=nt.writeIceParameters(it.iceGatherer.getLocalParameters()),ot+=nt.writeDtlsParameters(it.dtlsTransport.getLocalParameters(),et==="offer"?"actpass":"active"),ot+="a=mid:"+it.mid+`\r
`,it.direction?ot+="a="+it.direction+`\r
`:it.rtpSender&&it.rtpReceiver?ot+=`a=sendrecv\r
`:it.rtpSender?ot+=`a=sendonly\r
`:it.rtpReceiver?ot+=`a=recvonly\r
`:ot+=`a=inactive\r
`,it.rtpSender){var gt="msid:"+rt.id+" "+it.rtpSender.track.id+`\r
`;ot+="a="+gt,ot+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" "+gt,it.sendEncodingParameters[0].rtx&&(ot+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" "+gt,ot+="a=ssrc-group:FID "+it.sendEncodingParameters[0].ssrc+" "+it.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ot+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" cname:"+nt.localCName+`\r
`,it.rtpSender&&it.sendEncodingParameters[0].rtx&&(ot+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" cname:"+nt.localCName+`\r
`),ot},nt.getDirection=function(it,s){for(var et=nt.splitLines(it),rt=0;rt<et.length;rt++)switch(et[rt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return et[rt].substr(2)}return s?nt.getDirection(s):"sendrecv"},nt.getKind=function(it){return nt.splitLines(it)[0].split(" ")[0].substr(2)},nt.isRejected=function(it){return it.split(" ",2)[1]==="0"},nt.parseMLine=function(it){var s=nt.splitLines(it)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},nt.parseOLine=function(it){var s=nt.matchPrefix(it,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},nt.isValidSDP=function(it){if(typeof it!="string"||it.length===0)return!1;for(var s=nt.splitLines(it),et=0;et<s.length;et++)if(s[et].length<2||s[et].charAt(1)!=="=")return!1;return!0},typeof ct=="object"&&(ct.exports=nt)},{}]},{},[1])(1)}),function(tt){function ct(kt){if(typeof kt!="string"&&(kt=String(kt)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(kt))throw new TypeError("Invalid character in header field name");return kt.toLowerCase()}function vt(kt){return typeof kt!="string"&&(kt=String(kt)),kt}function nt(kt){var bt={next:function(){var Nt=kt.shift();return{done:Nt===void 0,value:Nt}}};return mt.iterable&&(bt[Symbol.iterator]=function(){return bt}),bt}function it(kt){this.map={},kt instanceof it?kt.forEach(function(bt,Nt){this.append(Nt,bt)},this):Array.isArray(kt)?kt.forEach(function(bt){this.append(bt[0],bt[1])},this):kt&&Object.getOwnPropertyNames(kt).forEach(function(bt){this.append(bt,kt[bt])},this)}function s(kt){if(kt.bodyUsed)return Promise.reject(new TypeError("Already read"));kt.bodyUsed=!0}function et(kt){return new Promise(function(bt,Nt){kt.onload=function(){bt(kt.result)},kt.onerror=function(){Nt(kt.error)}})}function rt(kt){var bt=new FileReader,Nt=et(bt);return bt.readAsArrayBuffer(kt),Nt}function ot(kt){var bt=new FileReader,Nt=et(bt);return bt.readAsText(kt),Nt}function gt(kt){for(var bt=new Uint8Array(kt),Nt=new Array(bt.length),Ft=0;Ft<bt.length;Ft++)Nt[Ft]=String.fromCharCode(bt[Ft]);return Nt.join("")}function dt(kt){if(kt.slice)return kt.slice(0);var bt=new Uint8Array(kt.byteLength);return bt.set(new Uint8Array(kt)),bt.buffer}function pt(){return this.bodyUsed=!1,this._initBody=function(kt){if(this._bodyInit=kt,kt)if(typeof kt=="string")this._bodyText=kt;else if(mt.blob&&Blob.prototype.isPrototypeOf(kt))this._bodyBlob=kt;else if(mt.formData&&FormData.prototype.isPrototypeOf(kt))this._bodyFormData=kt;else if(mt.searchParams&&URLSearchParams.prototype.isPrototypeOf(kt))this._bodyText=kt.toString();else if(mt.arrayBuffer&&mt.blob&&At(kt))this._bodyArrayBuffer=dt(kt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!mt.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(kt)&&!wt(kt))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=dt(kt)}else this._bodyText="";this.headers.get("content-type")||(typeof kt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):mt.searchParams&&URLSearchParams.prototype.isPrototypeOf(kt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},mt.blob&&(this.blob=function(){var kt=s(this);if(kt)return kt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(rt)}),this.text=function(){var kt=s(this);if(kt)return kt;if(this._bodyBlob)return ot(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(gt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},mt.formData&&(this.formData=function(){return this.text().then(at)}),this.json=function(){return this.text().then(JSON.parse)},this}function st(kt){var bt=kt.toUpperCase();return Pt.indexOf(bt)>-1?bt:kt}function ht(kt,bt){var Nt=(bt=bt||{}).body;if(kt instanceof ht){if(kt.bodyUsed)throw new TypeError("Already read");this.url=kt.url,this.credentials=kt.credentials,bt.headers||(this.headers=new it(kt.headers)),this.method=kt.method,this.mode=kt.mode,Nt||kt._bodyInit==null||(Nt=kt._bodyInit,kt.bodyUsed=!0)}else this.url=String(kt);if(this.credentials=bt.credentials||this.credentials||"omit",!bt.headers&&this.headers||(this.headers=new it(bt.headers)),this.method=st(bt.method||this.method||"GET"),this.mode=bt.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Nt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Nt)}function at(kt){var bt=new FormData;return kt.trim().split("&").forEach(function(Nt){if(Nt){var Ft=Nt.split("="),Ut=Ft.shift().replace(/\+/g," "),Jt=Ft.join("=").replace(/\+/g," ");bt.append(decodeURIComponent(Ut),decodeURIComponent(Jt))}}),bt}function ut(kt){var bt=new it;return kt.split(/\r?\n/).forEach(function(Nt){var Ft=Nt.split(":"),Ut=Ft.shift().trim();if(Ut){var Jt=Ft.join(":").trim();bt.append(Ut,Jt)}}),bt}function ft(kt,bt){bt||(bt={}),this.type="default",this.status="status"in bt?bt.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in bt?bt.statusText:"OK",this.headers=new it(bt.headers),this.url=bt.url||"",this._initBody(kt)}if(!tt.fetch){var mt={searchParams:"URLSearchParams"in tt,iterable:"Symbol"in tt&&"iterator"in Symbol,blob:"FileReader"in tt&&"Blob"in tt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in tt,arrayBuffer:"ArrayBuffer"in tt};if(mt.arrayBuffer)var yt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],At=function(kt){return kt&&DataView.prototype.isPrototypeOf(kt)},wt=ArrayBuffer.isView||function(kt){return kt&&yt.indexOf(Object.prototype.toString.call(kt))>-1};it.prototype.append=function(kt,bt){kt=ct(kt),bt=vt(bt);var Nt=this.map[kt];this.map[kt]=Nt?Nt+","+bt:bt},it.prototype.delete=function(kt){delete this.map[ct(kt)]},it.prototype.get=function(kt){return kt=ct(kt),this.has(kt)?this.map[kt]:null},it.prototype.has=function(kt){return this.map.hasOwnProperty(ct(kt))},it.prototype.set=function(kt,bt){this.map[ct(kt)]=vt(bt)},it.prototype.forEach=function(kt,bt){for(var Nt in this.map)this.map.hasOwnProperty(Nt)&&kt.call(bt,this.map[Nt],Nt,this)},it.prototype.keys=function(){var kt=[];return this.forEach(function(bt,Nt){kt.push(Nt)}),nt(kt)},it.prototype.values=function(){var kt=[];return this.forEach(function(bt){kt.push(bt)}),nt(kt)},it.prototype.entries=function(){var kt=[];return this.forEach(function(bt,Nt){kt.push([Nt,bt])}),nt(kt)},mt.iterable&&(it.prototype[Symbol.iterator]=it.prototype.entries);var Pt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];ht.prototype.clone=function(){return new ht(this,{body:this._bodyInit})},pt.call(ht.prototype),pt.call(ft.prototype),ft.prototype.clone=function(){return new ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new it(this.headers),url:this.url})},ft.error=function(){var kt=new ft(null,{status:0,statusText:""});return kt.type="error",kt};var Rt=[301,302,303,307,308];ft.redirect=function(kt,bt){if(Rt.indexOf(bt)===-1)throw new RangeError("Invalid status code");return new ft(null,{status:bt,headers:{location:kt}})},tt.Headers=it,tt.Request=ht,tt.Response=ft,tt.fetch=function(kt,bt){return new Promise(function(Nt,Ft){var Ut=new ht(kt,bt),Jt=new XMLHttpRequest;Jt.onload=function(){var hn={status:Jt.status,statusText:Jt.statusText,headers:ut(Jt.getAllResponseHeaders()||"")};hn.url="responseURL"in Jt?Jt.responseURL:hn.headers.get("X-Request-URL");var Xt="response"in Jt?Jt.response:Jt.responseText;Nt(new ft(Xt,hn))},Jt.onerror=function(){Ft(new TypeError("Network request failed"))},Jt.ontimeout=function(){Ft(new TypeError("Network request failed"))},Jt.open(Ut.method,Ut.url,!0),Ut.credentials==="include"&&(Jt.withCredentials=!0),"responseType"in Jt&&mt.blob&&(Jt.responseType="blob"),Ut.headers.forEach(function(hn,Xt){Jt.setRequestHeader(Xt,hn)}),Jt.send(Ut._bodyInit===void 0?null:Ut._bodyInit)})},tt.fetch.polyfill=!0}}(typeof self<"u"?self:commonjsGlobal);var _e={};_e=function(){function tt(pt,st){var ht,at,ut,ft=[],mt=(pt=pt.push?pt:[pt]).length,yt=mt;for(ht=function(At,wt){wt.length&&ft.push(At),--yt||st(ft)};mt--;)at=pt[mt],(ut=ot[at])?ht(at,ut):(gt[at]=gt[at]||[]).push(ht)}function ct(pt,st){if(pt){var ht=gt[pt];if(ot[pt]=st,ht)for(;ht.length;)ht[0](pt,st),ht.splice(0,1)}}function vt(pt,st){pt.call&&(pt={success:pt}),st.length?(pt.error||et)(st):(pt.success||et)(pt)}function nt(pt,st,ht,at){var ut,ft,mt=document,yt=ht.async,At=(ht.numRetries||0)+1,wt=ht.before||et,Pt=pt.replace(/^(css|img)!/,""),Rt=ht.reqdelay||0;at=at||0,/(^css!|\.css$)/.test(pt)?(ut=!0,(ft=mt.createElement("link")).rel="stylesheet",ft.href=Pt):/(^img!|\.(png|gif|jpg|svg)$)/.test(pt)?(ft=mt.createElement("img")).src=Pt:((ft=mt.createElement("script")).src=pt,ft.async=yt===void 0||yt),ft.onload=ft.onerror=ft.onbeforeload=function(kt){var bt=kt.type[0];if(ut&&"hideFocus"in ft)try{ft.sheet.cssText.length||(bt="e")}catch{bt="e"}if(bt=="e"&&(at+=1)<At)return dt=Rt*at,setTimeout(function(){nt(pt,st,ht,at)},dt),void(ht.retrycb&&ht.retrycb(at,dt));st(pt,bt,kt.defaultPrevented)},wt(pt,ft)!==!1&&mt.head.appendChild(ft)}function it(pt,st,ht){var at,ut,ft=(pt=pt.push?pt:[pt]).length,mt=ft,yt=[];for(at=function(At,wt,Pt){if(wt=="e"&&yt.push(At),wt=="b"){if(!Pt)return;yt.push(At)}--ft||st(yt)},ut=0;ut<mt;ut++)nt(pt[ut],at,ht)}function s(pt,st,ht){var at,ut;st&&st.trim&&(at=st),it(pt,function(ft){vt(ut,ft),ct(at,ft)},ut=(at?ht:st)||{})}var et=function(){},rt={},ot={},gt={},dt=0;return s.ready=function(pt,st){return tt(pt,function(ht){vt(st,ht)}),s},s.done=function(pt){ct(pt,[])},s.reset=function(){rt={},ot={},gt={}},s.isDefined=function(pt){return pt in rt},s}(),function(tt,ct){var vt={};vt.load=function(nt,it,s){if(typeof _e!==void 0&&typeof apiRTC_React>"u"){var et={async:!0,numRetries:it.extJsLoadingRetryNb||100,reqdelay:it.extJsLoadingRetryDelay||200,success:function(){tt.rtcio=io,s.success()},error:function(rt){console.error("socket.io loading error"),s.error()},retrycb:function(rt,ot){console.warn("socket.io loading retry :"+rt+" ,delay before retry :"+ot),s.retrycb()}};it.socketioUrl!==void 0?_e([it.socketioUrl],"socketio",et):_e([nt+"://"+it.ccsServer+"/socket.io/v3/socket.io.js"],"socketio",et)}else console.log("Else loadjs io"),tt.rtcio=io,s.success()},tt.apiRTC_sioLoader=vt}(window);/*! For license information please see apiRTC-srcTmp.js.LICENSE.txt */(function(tt,ct){a.exports=ct()})(self,()=>(()=>{var tt={8364:function(nt,it,s){var et,rt=this&&this.__extends||(et=function(At,wt){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(Pt,Rt){Pt.__proto__=Rt}:function(Pt,Rt){for(var kt in Rt)Object.prototype.hasOwnProperty.call(Rt,kt)&&(Pt[kt]=Rt[kt])}))(At,wt)},function(At,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Class extends value "+String(wt)+" is not a constructor or null");function Pt(){this.constructor=At}et(At,wt),At.prototype=wt===null?Object.create(wt):(Pt.prototype=wt.prototype,new Pt)}),ot=(Object.defineProperty(it,"__esModule",{value:!0}),s(2043)),gt=s(7987),dt=ot.getLogger("CloudAPI"),pt=(gt.reg(ot),gt.apply(dt,{format:function(At,wt,Pt){return"".concat(Pt," - [").concat(At,"] ").concat(wt," : ")}}),dt.setDefaultLevel("error"),dt.setLevel("error"),"https://cloud.apizee.com"),st="/api/v2/media/upload",ht="/api/v2/conversation/{convId}/media",at="/api/v2/conferences",ut={updateWebconfTags:{fetchRetryCount:3,fetchRetryDelay:500}},ft=null,mt=function(){function At(){if(this.cloudUrl=pt,this.JWTApzToken="",this.fetchRetries=100,this.fetchRetryDelay=200,ft!==null)return dt.debug("Cannot construct multiple CloudAPI, this is a singleton."),ft;ft=this}return At.get=function(){return ft=ft===null?new At:ft},At.prototype.setLogLevel=function(wt){dt.setLevel(wt)},At.prototype.getLogLevel=function(){var wt="";switch(dt.getLevel()){case 0:wt="trace";break;case 1:wt="debug";break;case 2:wt="info";break;case 3:wt="warn";break;case 4:wt="error";break;case 5:wt="silent"}return wt},At.prototype.setCloudURL=function(wt){dt.debug("setCloudURL :",wt),this.cloudUrl=wt},At.prototype.setJWTApzToken=function(wt){this.JWTApzToken=wt},At.prototype.setFetchRetries=function(wt){dt.debug("setFetchRetries :",wt),wt!=null&&(this.fetchRetries=wt)},At.prototype.setFetchRetryDelay=function(wt){dt.log("setFetchRetryDelay :",wt),wt!=null&&(this.fetchRetryDelay=wt)},At.prototype.request=function(wt,Pt,Rt,kt,bt,Nt){bt===void 0&&(bt={}),Nt===void 0&&(Nt={});var Ft=wt.indexOf(this.cloudUrl)===-1?this.cloudUrl+wt:wt,Ut=null;return new Promise(function(Jt,hn){var Xt,zt=new XMLHttpRequest;if(Nt.hasOwnProperty("withCredentials")&&(zt.withCredentials=Nt.withCredentials),zt.onreadystatechange=function(bn){if(zt.readyState===XMLHttpRequest.DONE)if(dt.debug("request onreadystatechange status :",zt.status),200<=zt.status&&zt.status<300)if(zt.responseText){var un=null;try{un=JSON.parse(zt.responseText)}catch{un=zt.responseText}Jt(un)}else Jt("No_responseTest");else{if(un={status:zt.status,text:zt.statusText},zt.responseText)try{un.response=JSON.parse(zt.responseText)}catch{un.responseText=zt.responseText}hn(un)}},zt.onprogress=function(bn){typeof kt=="function"&&kt(bn)},zt.onerror=function(bn){hn(bn)},Rt==="GET")0<Object.keys(Pt).length&&(Xt=new URLSearchParams(Pt),dt.debug("johann",Xt,Xt.toString,Pt),Ft+="?"+Xt.toString());else{Ut=new FormData;for(var cn=0,vn=Object.keys(Pt);cn<vn.length;cn++){var Sn=vn[cn];Ut.append(Sn,Pt[Sn])}}if(zt.open(Rt,Ft,!0),bt!=null)for(var fn=0,mn=Object.keys(bt);fn<mn.length;fn++)Sn=mn[fn],zt.setRequestHeader(Sn,bt[Sn]);zt.send(Ut)})},At.prototype.get=function(wt,Pt,Rt,kt){return Rt===void 0&&(Rt={}),kt===void 0&&(kt={}),dt.log("Send HTTP request : GET ".concat(wt)),this.request(wt,Pt,"GET",null,Rt,kt)},At.prototype.post=function(wt,Pt,Rt,kt){return dt.log("Send HTTP request : POST ".concat(wt)),this.request(wt,Pt,"POST",Rt,kt)},At.prototype.put=function(wt,Pt,Rt,kt){return dt.log("Send HTTP request : PUT ".concat(wt)),(Pt=Pt!==null&&typeof Pt=="object"?Pt:{})._method="PUT",this.request(wt,Pt,"POST",Rt,kt)},At.prototype.delete=function(wt,Pt,Rt){return dt.log("Send HTTP request : DELETE ".concat(wt)),(Pt=Pt!==null&&typeof Pt=="object"?Pt:{})._method="DELETE",this.request(wt,Pt,"POST",null,Rt)},At.prototype.cloudRequest=function(wt,Pt,Rt,kt){var bt=this;return kt===void 0&&(kt={}),new Promise(function(Nt,Ft){dt.trace(Rt+" cloudRequest to "+ft.cloudUrl,Pt);var Ut={method:Rt.toUpperCase()},Jt=ft.cloudUrl+wt;if(Ut.method==="GET")0<Object.keys(Pt).length&&(Jt+="?"+new URLSearchParams(Pt).toString());else{for(var hn=new FormData,Xt=0,zt=Object.keys(Pt);Xt<zt.length;Xt++){var cn=zt[Xt];hn.append(cn,Pt[cn])}Ut.body=hn}kt.hasOwnProperty("bearerToken")?Ut.headers={Authorization:"Bearer "+kt.bearerToken}:bt.JWTApzToken!==""&&(Ut.headers={Authorization:"Bearer "+bt.JWTApzToken}),kt.hasOwnProperty("fetchRetryCount")?Ut.retries=kt.fetchRetryCount:Ut.retries=bt.fetchRetries,kt.hasOwnProperty("fetchRetryDelay")?Ut.retryDelay=kt.fetchRetryDelay:Ut.retryDelay=bt.fetchRetryDelay,function(vn,Sn){dt.log("fetchRetry");var fn=3,mn=1e3,bn=[];if(Sn&&Sn.retries&&(fn=Sn.retries),Sn&&Sn.retryDelay&&(mn=Sn.retryDelay),Sn&&Sn.retryOn){if(!(Sn.retryOn instanceof Array))throw{name:"ArgumentError",message:"retryOn property expects an array"};bn=Sn.retryOn}return new Promise(function(un,Tn){function kn(An){var En,Rn;dt.log("wrappedFetch n:",An),window.fetch!==void 0?fetch(vn,Sn).then(function(wn){bn.indexOf(wn.status)===-1?un(wn):0<An?xn(An):Tn(wn)}).catch(function(wn){0<An?xn(An):Tn(wn)}):(dt.debug("Cannot use fetch in this browser, using XHR"),En=mt.get(),Rn={},Sn.body&&Sn.body.forEach(function(wn,Dn){return Rn[Dn]=wn}),En.request(vn,Rn,Sn.method,null,Sn.headers).then(function(wn){un({gettype:"cloudApiNoFetch",response:wn})}).catch(function(wn){dt.error("error :",wn),Tn(wn)}))}function xn(An){dt.error("retry n:",An);var En=fn-An+1;dt.error("retry number is :",En),setTimeout(function(){kn(--An)},mn*En)}kn(fn)})}(Jt,Ut).then(function(vn){if(vn.gettype==="cloudApiNoFetch")return Nt(vn.response);vn.json().then(function(Sn){var fn;if(vn.status<200||299<vn.status)return fn="cloudRequest - response status Code: "+vn.status,dt.warn(fn),fn=new yt(fn,13,vn.status,Sn),Ft(fn);Nt(Sn)}).catch(function(Sn){return dt.error("json err :",Sn),Ft(new yt("cloudRequest - json() Error: "+Sn.text,0,vn.status,{}))})}).catch(function(vn){return dt.error("Fetch Error :",vn),Ft(new yt("cloudRequest - Fetch Error: "+vn.text,13,vn.status,vn.response))})})},At.prototype.cloudFetchMedia=function(wt){var Pt=this;return new Promise(function(Rt,kt){var bt={};Pt.JWTApzToken!==""&&(bt={Authorization:"Bearer "+Pt.JWTApzToken}),fetch(wt,{headers:bt}).then(function(Nt){return Nt.blob()}).then(function(Nt){Rt(Nt)}).catch(function(Nt){kt(Nt)})})},At.prototype.authentication=function(wt,Pt,Rt){return dt.debug("authentication to "+ft.cloudUrl),wt={username:wt,password:Pt},Rt!==void 0&&Rt!==""&&(wt.captcha_token=Rt),this.cloudRequest("/api/v3/authenticate",wt,"POST")},At.prototype.getConnectedUserInformation=function(wt){return dt.debug("getConnectedUserInformation to "+ft.cloudUrl),this.cloudRequest("/api/v2/users/me",{},"GET",{bearerToken:wt})},At.prototype.getUserProfile=function(wt,Pt,Rt){return dt.debug("getUserProfile to "+ft.cloudUrl),typeof wt!="string"||typeof Pt!="string"?Promise.reject("wrongArguments"):(wt={apiKey:wt},this.cloudRequest("/api/v3/users/{userId}/profile".replace("{userId}",Pt),wt,"GET",{bearerToken:Rt}))},At.prototype.getSiteAgents=function(wt,Pt,Rt){return Rt===void 0&&(Rt={}),dt.debug("getSiteAgents to "+ft.cloudUrl),typeof wt!="string"||typeof Pt!="string"?Promise.reject("wrongArguments"):(wt={apiKey:wt},Rt.useAcd&&(wt.useAcd=1),Rt.usePresence&&(wt.usePresence=1),Rt.convId&&(wt.convId=Rt.convId),this.cloudRequest("/api/v2/sites/{siteKey}/agents".replace("{siteKey}",Pt),wt,"GET"))},At.prototype.getEnterpriseInformation=function(wt,Pt){return wt===void 0&&(wt={}),dt.debug("getEnterpriseInformation to "+ft.cloudUrl),this.cloudRequest("/api/v3/enterpriseInformation",wt,"GET",{bearerToken:Pt})},At.prototype.getPreferredCCS=function(wt){return dt.debug("getPreferredCCS to "+ft.cloudUrl),this.cloudRequest("/api/v2/preferredCCS",{apiKey:wt},"GET")},At.prototype.checkUserToken=function(wt){return dt.debug("checkUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/checkToken",{},"GET",{bearerToken:wt})},At.prototype.invalidateUserToken=function(wt){return dt.debug("invalidateUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/invalidateToken",{},"POST",{bearerToken:wt})},At.prototype.uploadFile=function(wt,Pt,Rt){dt.debug("uploadMedia to "+ft.cloudUrl);var kt={file:wt};if(Rt!=null)for(var bt=0,Nt=Object.keys(Rt);bt<Nt.length;bt++){var Ft=Nt[bt];kt[Ft]=Rt[Ft]}return this.cloudRequest(st,kt,"POST",{bearerToken:Pt})},At.prototype.uploadSnapshot=function(wt,Pt,Rt){Rt===void 0&&(Rt={}),dt.debug("uploadSnapshot to "+ft.cloudUrl);for(var kt={dataUri:1,file:wt},bt=0,Nt=Object.keys(Rt);bt<Nt.length;bt++){var Ft=Nt[bt];kt[Ft]=Rt[Ft]}return this.cloudRequest(st,kt,"POST",{bearerToken:Pt})},At.prototype.getEnterpriseUserList=function(wt,Pt){return dt.debug("getEnterpriseUserList to "+ft.cloudUrl),this.cloudRequest("/api/v2/enterprises/{enterpriseId}/users".replace("{enterpriseId}",wt),{json:!0},"GET",{bearerToken:Pt})},At.prototype.getEnterpriseTagList=function(wt,Pt,Rt){return Rt===void 0&&(Rt={}),dt.debug("getEnterpriseTagList to "+ft.cloudUrl),Rt.hasOwnProperty("webconfId")&&Rt.webconfId,this.cloudRequest("/api/v2/enterprises/{enterpriseId}/tags".replace("{enterpriseId}",wt),{},"GET",{bearerToken:Pt})},At.prototype.updateWebconfTags=function(wt,Pt,Rt,kt){return dt.debug("updateWebconfTags to "+ft.cloudUrl),Rt={_method:"PUT",tags:Rt.join(",")},function(bt,Nt){if(bt!==null&&typeof bt=="object"||(bt={}),ut.hasOwnProperty(Nt))for(var Ft=ut[Nt],Ut=0,Jt=["fetchRetryCount","fetchRetryDelay"];Ut<Jt.length;Ut++){var hn=Jt[Ut];Ft.hasOwnProperty(hn)&&(bt[hn]=Ft[hn])}}(kt={bearerToken:kt},"updateWebconfTags"),this.cloudRequest("/api/enterprises/{enterpriseId}/conferences/{conferenceId}".replace("{enterpriseId}",wt).replace("{conferenceId}",Pt),Rt,"POST",kt)},At.prototype.getConferenceList=function(wt){return dt.debug("getConferenceList to "+ft.cloudUrl),this.cloudRequest(at,{},"GET",{bearerToken:wt})},At.prototype.getOrCreateConversation=function(wt,Pt,Rt){return Rt===void 0&&(Rt={}),dt.debug("getOrCreateConversation to "+ft.cloudUrl),wt===null||typeof wt!="object"||typeof Pt!="string"?Promise.reject("wrongArguments"):(wt={name:wt._getTechnicalName(),type:wt.getType(),apiKey:Pt},Pt={},Rt.hasOwnProperty("token")&&Rt.token&&(Pt.bearerToken=Rt.token),Rt.hasOwnProperty("active")&&typeof Rt.active=="boolean"&&(wt.active=1),this.cloudRequest("/api/v2/conversation",wt,"POST",Pt))},At.prototype.createConference=function(wt,Pt,Rt){return Rt===void 0&&(Rt={}),dt.debug("createConference to "+ft.cloudUrl),Pt={name:Pt},Rt.hasOwnProperty("password")&&(Pt.password=Rt.password),this.cloudRequest(at,Pt,"POST",{bearerToken:wt})},At.prototype.checkConferenceAccess=function(wt,Pt,Rt){var kt;return Rt===void 0&&(Rt={}),dt.debug("checkConferenceAccess for "+wt+" to "+ft.cloudUrl),typeof Pt!="string"?Promise.reject("wrongArguments"):(Pt={apiKey:Pt},Rt.convId&&(Pt.conv_id=Rt.convId),Rt.hasOwnProperty("password")&&(Pt.password=Rt.password),kt={},Rt.hasOwnProperty("session")&&typeof Rt.session.getToken=="function"&&Rt.session.getToken()!==null&&(kt.bearerToken=Rt.session.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/checkAccess".replace("{roomname}",wt),Pt,"POST",kt))},At.prototype.getWebconf=function(wt,Pt){Pt===void 0&&(Pt={}),dt.debug("getWebconf for "+wt+" to "+ft.cloudUrl);var Rt={};return Pt.hasOwnProperty("token")&&Pt.token&&(Rt.bearerToken=Pt.token),this.cloudRequest("/api/v2/conferences/{roomname}".replace("{roomname}",wt),{},"GET",Rt)},At.prototype.getWebconfConversation=function(wt,Pt,Rt){var kt;return Rt===void 0&&(Rt={}),dt.debug("getWebconfConversation for "+wt+" to "+ft.cloudUrl),typeof Pt!="string"?Promise.reject("wrongArguments"):(Pt={apiKey:Pt},kt={},Rt.hasOwnProperty("token")&&Rt.token&&(kt.bearerToken=Rt.token),this.cloudRequest("/api/v2/conferences/{roomname}/conversation".replace("{roomname}",wt),Pt,"GET",kt))},At.prototype.updateConferencePresence=function(wt,Pt,Rt){dt.trace("updateConferencePresence for "+wt.getName()+" to "+ft.cloudUrl),Rt={ccid:Pt.getId(),name:Pt.getUserAgent().getUsername(),instanceId:wt.getInstanceId(),apiKey:Rt};var kt={};return Pt.getToken()!==null&&(kt.bearerToken=Pt.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/updatePresence".replace("{roomname}",wt._getTechnicalName()),Rt,"POST",kt)},At.prototype.closeConferenceInstance=function(wt,Pt){dt.debug("closeConferenceInstance for "+wt.getName()+" to "+ft.cloudUrl);var Rt={instanceId:wt.getInstanceId()};return this.cloudRequest("/api/v2/conferences/{roomname}/closeInstance".replace("{roomname}",wt._getTechnicalName()),Rt,"POST",{bearerToken:Pt.getToken()})},At.prototype.getConversationMediaList=function(wt,Pt,Rt){var kt;return Rt===void 0&&(Rt={}),dt.debug("getConversationMediaList for "+wt+" to "+ft.cloudUrl),wt&&typeof Pt=="string"?(Pt={apiKey:Pt},kt={},Rt.hasOwnProperty("token")&&Rt.token&&(kt.bearerToken=Rt.token),Rt.hasOwnProperty("offset")&&(Pt.offset=Rt.offset),Rt.hasOwnProperty("limit")&&(Pt.limit=Rt.limit),this.cloudRequest(ht.replace("{convId}",wt.toString()),Pt,"GET",kt)):Promise.reject("wrongArguments")},At.prototype.pushConversationMedia=function(wt,Pt,Rt,kt){return kt===void 0&&(kt={}),dt.debug("pushConversationMedia for "+wt+" to "+ft.cloudUrl),wt&&Pt&&typeof Rt=="string"?(Pt={media:Pt,apiKey:Rt},Rt={},kt.hasOwnProperty("token")&&kt.token&&(Rt.bearerToken=kt.token),kt.hasOwnProperty("metadata")&&kt.metadata&&(Pt.metadata=kt.metadata),kt.hasOwnProperty("asFile")&&kt.asFile&&(Pt.asFile=kt.asFile),kt.hasOwnProperty("filename")&&kt.filename&&(Pt.filename=kt.filename),kt.overwrite===!0&&(Pt.overwrite=1),typeof kt.ttl=="number"&&0<kt.ttl&&(Pt.ttl=kt.ttl),this.cloudRequest(ht.replace("{convId}",wt.toString()),Pt,"POST",Rt)):Promise.reject("wrongArguments")},At.prototype.setConversationData=function(wt,Pt,Rt,kt){return kt===void 0&&(kt={}),dt.debug("setConversationData for "+wt+" to "+ft.cloudUrl),wt&&typeof Pt=="string"&&typeof Rt=="string"?(Pt={data:Pt,apiKey:Rt},Rt={},kt.hasOwnProperty("token")&&kt.token&&(Rt.bearerToken=kt.token),this.cloudRequest("/api/v2/conversation/{convId}/data".replace("{convId}",wt.toString()),Pt,"POST",Rt)):Promise.reject("wrongArguments")},At.prototype.getSessionHistory=function(wt,Pt,Rt){Rt===void 0&&(Rt={}),dt.debug("getSessionHistory to "+ft.cloudUrl);var kt={sessionId:wt};if(Rt!=null)for(var bt=0,Nt=Object.keys(Rt);bt<Nt.length;bt++){var Ft=Nt[bt];kt[Ft]=Rt[Ft]}return this.cloudRequest("/api/v2/messages",kt,"GET",{bearerToken:Pt})},At.prototype.getWebSession=function(wt,Pt,Rt){return dt.debug("getSessionHistory to "+ft.cloudUrl),typeof Rt!="string"?Promise.reject("wrongArguments"):(Pt={destId:Pt.getId(),apiKey:Rt},Rt={},wt.getToken()!==null?Rt.bearerToken=wt.getToken():Pt.userId=wt.getId(),this.cloudRequest("/api/v2/webSession",Pt,"GET",Rt))},At.prototype.saveNewMessage=function(wt,Pt,Rt,kt,bt,Nt){return dt.debug("saveNewMessage to "+ft.cloudUrl),bt={uuid:bt,destId:Rt,message:kt,sessionId:wt,userId:Pt.getId(),apiKey:Nt},Rt={},Pt.getToken()!==null&&(Rt.bearerToken=Pt.getToken()),this.cloudRequest("/api/v2/messages",bt,"POST",Rt)},At.prototype.saveGroupChatMessage=function(wt,Pt,Rt,kt,bt,Nt){return Nt===void 0&&(Nt={}),dt.debug("saveGroupChatMessage to "+ft.cloudUrl),Rt={apiKey:Rt,message:kt,ccid:Pt.getId(),name:Pt.getUserAgent().getUsername(),parent_conv_id:wt.getCloudConversationId(),uuid:bt,htmlEnable:Nt.metadata&&Nt.metadata.htmlEnable||!1},kt={},Nt.token!==void 0&&Nt.token!==null?kt.bearerToken=Nt.token:Pt.getToken()!==null?kt.bearerToken=Pt.getToken():Rt.userId=Pt.getId(),this.cloudRequest("/api/v2/groupChatMessages",Rt,"POST",kt)},At.prototype.loadGroupChatMessages=function(wt,Pt,Rt){Rt===void 0&&(Rt=""),dt.debug("loadGroupChatMessages to "+ft.cloudUrl),wt={parent_conv_id:wt.getCloudConversationId()};var kt={};return kt.bearerToken=Rt!==""?Rt:Pt.getToken(),this.cloudRequest("/api/v2/groupChatMessages",wt,"GET",kt)},At}(),yt=(it.default=mt,function(At){function wt(Pt,Rt,kt,bt){return(Pt=At.call(this,Pt)||this).name=Pt.constructor.name,Pt.code=Rt,Pt.httpCode=kt,Pt.cloudResponse=bt,Pt}return rt(wt,At),wt}(Error))},128:(nt,it,s)=>{s.d(it,{_:()=>ot}),s(2564);var et=s(1549).Y.get("ApiCCDataClient"),rt=apiCC.myWebRTC_Event,ot=function(gt){this.sendData=function(dt,pt,st){et.info("Call sending data function .... to :"+dt+" message :",pt);var ht,at,ut=gt.channel.getNewCSeq(),ft=null;return ht={type:"dataMessage",senderId:gt.apiCCId,dstRoomId:dt,data:pt,cSeq:ut},at=JSON.stringify(ht),et.log("C->S: "+at),st!==void 0?(et.log("Ack management activated"),ft=setTimeout(function(){st({reason:"timeoutReached",cSeq:ut}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]},gt.messageTimeOutTimer),et.log("timeOutId: "+ft),gt.messageTimeOutTable[ut]=ft,gt.channel.socket.emit("dataMessage",at,function(mt){et.log("callback on dataMessage"),et.log("callback reason :"+mt.reason),et.log("cSeq :"+mt.cSeq),st(mt),apiCC.session.messageTimeOutTable[ut]!==void 0?(et.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[ut]),clearTimeout(apiCC.session.messageTimeOutTable[ut]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]):et.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(et.log("Ack management not activated"),gt.channel.socket.emit("dataMessage",at)),ut},this.sendDataToGroup=function(dt,pt){et.info("[ApiCCDataClient] sendDataToGroup - "+dt);var st,ht=gt.getConnectedUsersList(dt);for(st=0;st<ht.length;st++)gt.apiCCId!=ht[st].userId&&this.sendData(ht[st].userId,pt)},this.receiveData=function(dt){et.info("receiveData :"+dt.data),rt.createReceiveDataEvent(dt.senderId,dt.dstRoomId,dt.data)}}},6844:(nt,it,s)=>{s.d(it,{U:()=>pt}),s(9554),s(1539),s(4747),s(2564),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948);var et=s(1549),rt=s(4708),ot=s(940);function gt(st){return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ht){return typeof ht}:function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},gt(st)}var dt=et.Y.get("ApiCCIMClient"),pt=function(st,ht){this.convTable=[],this.myWebRTC_Event=apiCC.myWebRTC_Event,this.nickname=st.nickname,this.photoURL=null,this.userDataSetted=!1,this.myWebRTC_Stack=new ot.S(st.channel.socket),this.findIMIdWithDestID=function(at){var ut,ft=this.convTable.length;for(dt.log("findIMIdWithDestID = "+at),ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==at)return this.convTable[ut].IMId;return dt.log("Conversation IMId not found"),0},this.addInConvTable=function(at){dt.debug("addInConvTable");var ut,ft=this.convTable.length;for(ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==at.dest_roomId)return void(this.convTable[ut].IMId=at.IMId);dt.log("Conversation not found in the table, adding .."),this.convTable.push(at)},this.sendMessage=function(at,ut,ft,mt){dt.info("Call sending message function .... from :"+this.nickname+" message :"+ut);var yt,At=this.findIMIdWithDestID(at),wt=null,Pt=null,Rt=null,kt=st.channel.getNewCSeq();return At===0?dt.log("Creation of a new IM conversation"):dt.log("Message is for existing conversation with ID : "+At),dt.log("IMConvId :"+At),wt={type:"IMMessage",IMId:At,senderId:st.apiCCId,nickname:this.nickname,photoURL:this.photoURL,dstRoomId:at,data:ut,cSeq:kt,convData:mt},st.getConnectedUserIdsList().forEach(function(bt){bt.userId==at&&bt.hasOwnProperty("userData")&&bt.userData!==null&&gt(bt.userData.hasOwnProperty("isChatbot"))&&bt.userData.isChatbot&&(wt.pubSub="BotConnector")}),yt=JSON.stringify(wt),Pt=document.createElement("message"),dt.log("C->S: "+yt),ft!==void 0?(dt.log("Ack management activated"),Rt=setTimeout(function(){ft({reason:"timeoutReached",cSeq:kt}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[kt]},st.messageTimeOutTimer),dt.log("timeOutId: "+Rt),st.messageTimeOutTable[kt]=Rt,st.channel.socket.emit("IMMessage",yt,function(bt){dt.log("callback on IMMessage"),dt.log("data :",bt),dt.log("callback reason :"+bt.reason),dt.log("callback convId :"+bt.convId),dt.log("cSeq :"+bt.cSeq),ft(bt),apiCC.session.messageTimeOutTable[kt]!==void 0?(dt.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[kt]),clearTimeout(apiCC.session.messageTimeOutTable[kt]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[kt]):dt.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(dt.log("Ack management not activated"),st.channel.socket.emit("IMMessage",yt)),this.conversation!==null&&(Pt.innerHTML="<b>me :</b> "+mt+"<br>",this.conversation.appendChild(Pt),this.conversation.scrollTop=this.conversation.scrollHeight),kt},this.newConversationCreated=function(at){dt.debug("newConversationCreated :"+at),dt.log("msg.dstRoomId :"+at.dstRoomId),dt.log("msg.IMId :"+at.IMId);var ut={dest_roomId:at.dstRoomId,IMId:at.IMId};this.addInConvTable(ut)},this.receiveMessage=function(at){dt.info("Call receiveMessage message :"+at);var ut,ft=null;ut={dest_roomId:at.senderId,IMId:at.IMId},this.addInConvTable(ut),this.conversation!==null&&((ft=document.createElement("message")).innerHTML="<b>"+at.nickname+":</b> "+at.data+"<br>",this.conversation.appendChild(ft),this.conversation.scrollTop=this.conversation.scrollHeight),this.myWebRTC_Event.createReceiveIMMessageEvent(at.senderId,at.nickname,at.photoURL,at.data,at.UUCSeq,at.IMId)},this.createGroupChat=function(at,ut){var ft,mt;dt.info("createGroupChat with contacts : "+at+","+ut),ft={type:"createGroupChat",nickname:this.nickname,photoURL:this.photoURL,contactId1:at,contactId2:ut},mt=JSON.stringify(ft),dt.log("C->S: "+mt),st.channel.socket.emit("createGroupChat",mt)},this.groupChatCreation=function(at){dt.debug("groupChatCreation"),this.myWebRTC_Event.createGroupChatCreationEvent(at.status,at.groupChatId,at.contactId1,at.invitationSendedToInitialDestId,at.contactId2,at.invitationSendedToNewContactId)},this.joinGroupChat=function(at){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dt.debug("joinGroupChat : "+at);var ft=null,mt=null;ft={type:"joinGroupChat",groupChatId:at},ut.convId&&(ft.data={},ft.data.cloudConvId=ut.convId),mt=JSON.stringify(ft),dt.log("C->S: "+mt),st.channel.socket.emit("joinGroupChat",mt)},this.groupChatInvitation=function(at){dt.debug("groupChatInvitation"),this.myWebRTC_Event.createGroupChatInvitationEvent(at.groupChatId,at.senderId,at.senderNickname,at.senderPhotoURL,at.contactList)},this.answerToGroupChatInvitation=function(at,ut){var ft,mt;dt.debug("answerToGroupChatInvitation: "+at+" : "+ut),ut===!0||ut===!1?(ft={type:"groupChatInvitationAnswer",groupChatId:at,senderId:st.apiCCId,nickname:this.nickname,photoURL:this.photoURL,accept:ut},mt=JSON.stringify(ft),dt.log("C->S: "+mt),st.channel.socket.emit("groupChatInvitationAnswer",mt)):dt.log("accept value is not correct")},this.groupChatMemberUpdate=function(at){dt.info("groupChatMemberUpdate"),this.myWebRTC_Event.createGroupChatMemberUpdateEvent(at.groupChatId,at.contactList,at.status)},this.addUserInGroupChat=function(at,ut){var ft,mt;dt.debug("addUser : "+ut+"in Group Chat with Id :"+at),ft={type:"addUserInGroupChat",groupChatId:at,nickname:this.nickname,photoURL:this.photoURL,contactId:ut},mt=JSON.stringify(ft),dt.log("C->S: "+mt),st.channel.socket.emit("addUserInGroupChat",mt)},this.addUserInGroupChatAnswer=function(at){dt.info("addUserInGroupChatAnswer"),this.myWebRTC_Event.createAddUserInGroupChatEvent(at.invitationSended,at.groupChatId,at.contactId)},this.leaveGroupChat=function(at){var ut,ft;dt.info("Leave Group Chat with Id :"+at),ut={type:"leaveGroupChat",groupChatId:at,nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),st.channel.socket.emit("leaveGroupChat",ft)},this.sendMessageToGroupChat=function(at,ut,ft){var mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};dt.info("Call sending message to Group Chat .... from :"+this.nickname+" message :"+ut);var yt=null,At=null,wt=apiCC.session.channel.getNewCSeq();yt={type:"groupChatMessage",groupChatId:at,senderId:st.apiCCId,nickname:this.nickname,cSeq:wt,data:ut},(0,rt.Ym)(mt,"metadata","object")&&(yt.metadata=mt.metadata),At=JSON.stringify(yt),ft!==null&&typeof ft=="function"?(apiCC.session.messageTimeOutTable[wt]=setTimeout(function(){ft({reason:"timeoutReached",cSeq:wt}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[wt]},apiCC.session.messageTimeOutTimer),dt.log("C->S: "+At),st.channel.socket.emit("groupChatMessage",At,function(Pt){clearTimeout(apiCC.session.messageTimeOutTable[Pt.cSeq]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[Pt.cSeq],ft(Pt)})):(dt.log("C->S: "+At),st.channel.socket.emit("groupChatMessage",At))},this.receiveGroupChatMessage=function(at){dt.info("receiveGroupChatMessage"),this.myWebRTC_Event.createReceiveGroupChatMessageEvent(at.groupChatId,at.senderId,at.nickname,at.data,at.metadata)},this.getConversationHistory=function(at){var ut,ft;dt.debug("getConversationHistory"),ut={type:"getConversationHistory",convId:at},ft=JSON.stringify(ut),dt.log("C->S: "+ft),st.channel.socket.emit("getConversationHistory",ft)},this.receiveConversationHistory=function(at){dt.debug("receiveConversationHistory"),dt.log("msg.convId :"+at.convId);var ut,ft=0,mt=[],yt=null;if(at.convHistory!==null)for(dt.log("msg.convHistory.length :"+at.convHistory.length),ft=at.convHistory.length,mt=[],ut=0;ut<ft;ut+=1)yt=JSON.parse(at.convHistory[ut]),mt.push(yt);this.myWebRTC_Event.createReceiveConversationHistoryEvent(at.convId,mt,at.status)},this.setUserData=function(at){var ut,ft;dt.info("setUserData"),this.photoURL=at.photoURL,st.photoURL=at.photoURL,dt.log("photoURL :"+this.photoURL),ut={type:"setUserData",nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),st.channel.socket.emit("setUserData",ft),this.userDataSetted=!0},this.getUserData=function(at){var ut,ft;dt.info("getUserData"),ut={type:"getUserData",contactId:at},ft=JSON.stringify(ut),dt.log("C->S: "+ft),st.channel.socket.emit("getUserData",ft)},this.receiveUserDataAnswer=function(at){dt.info("receiveUserDataAnswer"),this.myWebRTC_Event.createUserDataAnswerEvent(at.userFound,at.contactId,at.nickname,at.photoURL)},this.receiveFetchUserDataAnswer=function(at){dt.info("receiveFetchUserDataAnswer"),this.myWebRTC_Event.createFetchUserDataAnswerEvent(at)},this.initialize=function(at){var ut,ft;this.conversation=document.getElementById(at),this.conversation===null&&(dt.log("conversationElementId Div Name is not correct : INCORRECT_DIV_NAME_CONVERSATION"),dt.log("conversationElementId is null")),ut={type:"registerIM",username:this.nickname},ft=JSON.stringify(ut),dt.log("C->S: "+ft),st.channel.socket.emit("registerIM",ft)},this.initialize(ht)}},9213:(nt,it,s)=>{s.d(it,{X:()=>gt}),s(2564),s(2526),s(1817),s(1539);var et=s(1549),rt=s(4708),ot=et.Y.get("ApiCCPointerSharingClient"),gt=function dt(pt){this.roomTable={},this.getRoomIds=function(){var st=[],ht=null;for(ht in this.roomTable)st.push(ht);return st},this.roomExists=function(st){return this.roomTable.hasOwnProperty(st)},this.roomActive=function(st){return this.roomTable.hasOwnProperty(st)&&this.roomTable[st].state===dt.STATE_ACTIVE},this.joinRoom=function(st,ht){var at=this;ot.info("ApiCCPointerSharingClient::joinRoom()"),(0,rt.Ym)(ht,"object")||(ht={}),(0,rt.ki)(ht,"success","function")||(ht.success=function(){}),(0,rt.ki)(ht,"failure","function")||(ht.failure=function(){}),this.roomTable.hasOwnProperty(st)?ht.failure("room already joined",st):(this.roomTable[st]={roomId:st,state:dt.STATE_JOINING,joinRoomCallbacks:ht},this.roomTable[st].joinRoomTimeoutId=setTimeout(function(){delete at.roomTable[st],ht.failure("timeout",st)},15e3),apiCC.session.roomMgr.joinRoom(st,"pointerSharing"))},this.leaveRoom=function(st){this.roomTable.hasOwnProperty(st)&&delete this.roomTable[st],apiCC.session.roomMgr.leaveRoom(st,"pointerSharing")},this.inviteInRoom=function(st,ht,at){ot.info("ApiCCPointerSharingClient::inviteInRoom()"),apiCC.session.roomMgr.inviteInRoom(st,ht,"pointerSharing",at)},this.sendPointerLocation=function(st,ht,at,ut,ft){var mt;return!(!this.roomTable.hasOwnProperty(st)||this.roomTable[st].state!==dt.STATE_ACTIVE||(mt={type:"pointerLocation",source:ht,x:at,y:ut},(0,rt.Ym)(ft,"object")&&(mt.data=ft),apiCC.session.roomMgr.sendMessageToRoom(st,"pointerSharing",mt),0))},this.processMessageRoomJoin=function(st){this.roomTable.hasOwnProperty(st.roomId)&&this.roomTable[st.roomId].state===dt.STATE_JOINING&&(clearTimeout(this.roomTable[st.roomId].joinRoomTimeoutId),delete this.roomTable[st.roomId].joinRoomTimeoutId,this.roomTable[st.roomId].state=dt.STATE_ACTIVE,this.roomTable[st.roomId].joinRoomCallbacks.success(st.roomId),delete this.roomTable[st.roomId].joinRoomCallbacks)},this.stop=function(){for(var st=this.getRoomIds(),ht=st.length;--ht>=0;)this.leaveRoom(st[ht])}};gt.STATE_IDLE=Symbol("idle"),gt.STATE_JOINING=Symbol("joining"),gt.STATE_ACTIVE=Symbol("active"),gt.STATE_ERROR=Symbol("error")},3720:(nt,it,s)=>{s.d(it,{K:()=>At}),s(1058),s(8309),s(3710),s(1539),s(9714),s(2564),s(9554),s(4747),s(2772),s(561),s(6699),s(2479),s(2707),s(9601),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948);var et=s(1549),rt=et.Y.get("RoomManager"),ot=function(wt,Pt){rt.debug("RoomManager"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.createRoom=function(Rt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};rt.info("RoomManager:createRoom with roomType : "+Rt);var bt={type:"createRoom",roomType:Rt,nickname:wt.nickname,photoURL:wt.photoURL};kt.convId&&(bt.data||(bt.data={}),bt.data.cloudConvId=kt.convId),kt.webconf===!0&&(bt.data||(bt.data={}),bt.data.webconf=!0);var Nt=JSON.stringify(bt);rt.log("C->S: "+Nt),wt.channel.socket.emit("createRoom",Nt)},this.roomCreation=function(Rt){rt.info("RoomManager:roomCreation"),this.myWebRTC_Event.createRoomCreationEvent(Rt.status,Rt.roomId,Rt.roomType),Pt(Rt)},this.roomJoin=function(Rt){rt.info("RoomManager:roomJoin"),this.myWebRTC_Event.createRoomJoinedEvent(Rt.status,Rt.roomId,Rt.roomType),Pt(Rt)},this.inviteInRoom=function(Rt,kt,bt,Nt){var Ft=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};rt.info("RoomManager:inviteInRoom with roomType:",bt);var Ut={type:"inviteInRoom",roomId:Rt,contactId:kt,roomType:bt,nickname:wt.nickname,photoURL:wt.photoURL,context:Nt};Ft.convId&&(Ut.data||(Ut.data={}),Ut.data.cloudConvId=Ft.convId),Ft.webconf===!0&&(Ut.data||(Ut.data={}),Ut.data.webconf=!0);var Jt=JSON.stringify(Ut);rt.log("C->S: "+Jt),wt.channel.socket.emit("inviteInRoom",Jt)},this.inviteInRoomStatus=function(Rt){rt.info("inviteInRoomStatus"),Pt(Rt)},this.roomInvitation=function(Rt){rt.info("roomInvitation",Rt);var kt={};Rt.data&&(Rt.data.cloudConvId&&(kt.cloudConvId=Rt.data.cloudConvId),Rt.data.webconf===!0&&(kt.webconf=!0)),this.myWebRTC_Event.createRoomInvitationEvent(Rt.roomId,Rt.senderId,Rt.senderNickname,Rt.senderPhotoURL,Rt.contactList,Rt.roomType,kt),Pt(Rt)},this.requestContactListInRoom=function(Rt){rt.info("requestContactListInRoom :"+Rt);var kt={type:"requestContactListInRoom",roomId:Rt},bt=JSON.stringify(kt);wt.channel.socket.emit("requestContactListInRoom",bt)},this.onContactListInRoom=function(Rt){rt.info("onContactListInRoom :"+Rt),this.myWebRTC_Event.createContactListInRoomEvent(Rt.roomId,Rt.contactList,Rt.roomType),Pt(Rt)},this.answerToRoomInvitation=function(Rt,kt,bt){if(rt.info("answerToRoomInvitation:",Rt,kt),kt===!0||kt===!1){var Nt={type:"roomInvitationAnswer",roomId:Rt,senderId:wt.apiCCId,nickname:wt.nickname,photoURL:wt.photoURL,accept:kt,roomType:bt},Ft=JSON.stringify(Nt);rt.log("C->S: "+Ft),wt.channel.socket.emit("roomInvitationAnswer",Ft)}else rt.log("accept value is not correct")},this.roomMemberUpdate=function(Rt){rt.info("roomMemberUpdate"),this.myWebRTC_Event.createRoomMemberUpdateEvent(Rt.roomId,Rt.contactList,Rt.status,Rt.roomType),Pt(Rt)},this.sendMessageToRoom=function(Rt,kt,bt){rt.info("Call sending message to Room .... from :"+wt.apiCCId+" message :"+bt);var Nt={type:"roomMessage",roomId:Rt,senderId:wt.apiCCId,nickname:wt.nickname,roomType:kt,data:bt},Ft=JSON.stringify(Nt);rt.log("C->S: "+Ft),wt.channel.socket.emit("roomMessage",Ft)},this.receiveRoomMessage=function(Rt){rt.info("receiveRoomMessage"),this.myWebRTC_Event.createReceiveRoomMessageEvent(Rt.roomId,Rt.senderId,Rt.nickname,Rt.data,Rt.roomType),Pt(Rt)},this.joinRoom=function(Rt,kt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rt.info("Join Room with Id:",Rt);var Nt={type:"joinRoom",roomId:Rt,nickname:wt.nickname,photoURL:wt.photoURL,roomType:kt};bt.convId&&(Nt.data||(Nt.data={}),Nt.data.cloudConvId=bt.convId),bt.webconf===!0&&(Nt.data||(Nt.data={}),Nt.data.webconf=!0);var Ft=JSON.stringify(Nt);rt.log("C->S: "+Ft),wt.channel.socket.emit("joinRoom",Ft)},this.leaveRoom=function(Rt,kt){rt.info("Leave Room with Id:",Rt);var bt={type:"leaveRoom",roomId:Rt,nickname:wt.nickname,photoURL:wt.photoURL,roomType:kt},Nt=JSON.stringify(bt);rt.log("C->S: "+Nt),wt.channel.socket.emit("leaveRoom",Nt)}},gt=(s(2023),s(7042),s(1038),s(4916),s(9753),s(8765)),dt=s(5945);function pt(wt,Pt){(Pt==null||Pt>wt.length)&&(Pt=wt.length);for(var Rt=0,kt=new Array(Pt);Rt<Pt;Rt++)kt[Rt]=wt[Rt];return kt}var st=et.Y.get("ApiCC_Channel"),ht=function(wt){st.debug("ApiCC_Channel"),this.channelReady=!1,this.socket=null,this.channelId=wt.apiCCId,this.myWebRTC_Event=new gt.K,this.channelHasBeenDisconnected=!1,this.cSeq=0,this.updatePresenceGroupIsNeeded=!1,this.oldPresenceGroup=null,this.newPresenceGroup=null,this.updateSubscribeToPresenceGroupIsNeeded=!1,this.oldSubscribeToPresenceGroup=null,this.newSubscribeToPresenceGroup=null,this.initialize=function(){st.info("ApiCC_Channel::initialize()"),this.openChannel()},this.getNewCSeq=function(){return this.cSeq=this.cSeq+1,this.cSeq},this.openChannel=function(){var Pt,Rt,kt,bt="",Nt=null,Ft=null,Ut=null,Jt=null;st.debug("openChannel channelId :"+this.channelId),st.debug("session.apiKey :"+wt.apiKey),st.log("session.sessionId :"+wt.sessionId),wt.xhrPolling=!0,st.log("CCSserver used : "+wt.ccsServer),Rt=wt.appId!==void 0?"&appId="+wt.appId:"",kt=wt.siteId!==void 0?"&siteId="+wt.siteId:"",wt.userData!==void 0&&(st.log("Defined userData : ",wt.userData),Nt=JSON.stringify(wt.userData),st.log("stringUserData.length :"+Nt.length),Nt.length<=1e3?bt="&userData="+encodeURIComponent(Nt):st.warn("userData length is too long :"+Nt.length+" .Need to be <= 500")),wt.presenceGroup!==void 0&&(st.log("Defined presenceGroup : "+wt.presenceGroup),Ft=JSON.stringify(wt.presenceGroup),st.log("stringPresenceGroup.length :"+Ft.length),Ft.length<=750?bt+="&presenceGroup="+encodeURIComponent(Ft):st.warn("presenceGroup length is too long :"+Ft.length+" .Need to be <= 750")),wt.subscribeToPresenceGroup!==void 0&&(st.log("Defined subscribeToPresenceGroup : "+wt.subscribeToPresenceGroup),Ut=JSON.stringify(wt.subscribeToPresenceGroup),st.log("stringsubscribeToPresenceGroup.length :"+Ut.length),Ut.length<=750?bt+="&subscribeToPresenceGroup="+encodeURIComponent(Ut):st.warn("subscribeToPresenceGroup length is too long :"+Ut.length+" .Need to be <= 750")),wt.token!==void 0&&(st.log("Defined token : "+wt.token),bt+="&token="+wt.token),wt.conversationSpace!==void 0&&wt.conversationSpace!==null&&(st.log("Defined conversationSpace : "+wt.conversationSpace),bt+="&conversationSpace="+wt.conversationSpace),typeof apiRTC_React>"u"&&(st.log("ApplicationUUID : "+window.location.hostname),bt+="&applicationUUID="+window.location.hostname),bt+="&apiLibType=apiRTC_JS",st.log("requestOptions on connect :"+bt),st.log("session.ccsServer :"+wt.ccsServer),Pt="?channelId="+this.channelId+"&apiKey="+wt.apiKey+"&apiVersion="+apiCC.version+"&apiCCSessionId="+wt.apiCCSessionId+"&sessionId="+wt.sessionId+Rt+kt+bt,Jt=typeof apiRTC_React<"u"?"https":window.location.protocol==="http:"?"http":"https",dt.ag.name!=="iOS"&&dt.ag.name!=="Android"||(st.log(dt.ag.name+" detected forcing protocol to https"),Jt="https"),st.info("CCS Connect, socket url is : "+Jt+"://"+wt.ccsServer+"/"+Pt),this.ccsConnectionRetryNb=wt.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=wt.ccsConnectionRetryDelay,this.socket=window.rtcio.connect(Jt+"://"+wt.ccsServer+"/"+Pt,{forceNew:!0,multiplex:!1,withCredentials:!0,reconnectionAttempts:this.ccsConnectionRetryNb,reconnectionDelay:this.ccsConnectionRetryDelay}),this.socket.on("connect",this.callback(this,"onChannelOpened")).on("connect_error",this.callback(this,"onChannelConnectError")).on("message",this.callbackWithParams(this,"onChannelMessage")).on("disconnect",this.callback(this,"onChannelDisconnect")),this.socket.io.on("error",this.callback(this,"onChannelError")).on("reconnect",this.callback(this,"onChannelReconnect")).on("reconnect_attempt",this.callback(this,"onChannelReconnectAttempt")).on("reconnect_error",this.callback(this,"onChannelReconnectError")).on("reconnect_failed",this.callback(this,"onChannelReconnect_failed"))},this.onWhiteBoardDisconnection=function(){st.info("onWhiteBoardDisconnection"),apiCC.session.closeWhiteBoardClient("NETWORK_DISCONNECTION")},this.onChannelDisconnect=function(Pt){st.info("onChannelDisconnect");var Rt=Date();st.debug("date :"+Rt),apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length),this.myWebRTC_Event.createChannelEvent("onChannelDisconnect",Pt),this.channelHasBeenDisconnected=!0,apiCC.myApiCCWhiteBoardClient!==null&&(st.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(st.log("Disconnection with an ongoing whiteboard"),st.error("Whiteboard disconnectionTimer is set to:",apiCC.myApiCCWhiteBoardClient.disconnectionTimer),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=setTimeout(this.callback(this,"onWhiteBoardDisconnection"),apiCC.myApiCCWhiteBoardClient.disconnectionTimer)):st.log("Disconnection without an ongoing whiteboard")),apiCC.session.JWTApzTokentimeOutId!==-1&&clearTimeout(apiCC.session.JWTApzTokentimeOutId)},this.onChannelReconnect_failed=function(){st.info("onChannelReconnect_failed"),this.myWebRTC_Event.createChannelEvent("onChannelReconnect_failed")},this.onChannelReconnect=function(Pt){st.error("onChannelReconnect",Pt);var Rt,kt=null,bt=0,Nt=[],Ft=null,Ut=null,Jt=null,hn=!1,Xt=0,zt=null,cn=null;if(wt.conversationSpace!==null&&wt.conversationSpace!==void 0?(st.debug("conversationSpace is set :",wt.conversationSpace),wt.joinConversationSpace(wt.conversationSpace)):st.debug("no conversationSpace defined"),wt.userData!==void 0&&wt.userData!==null&&(st.debug("sending userData :",wt.userData),wt.setUserData(wt.userData,!0)),wt.presenceGroup!==null?(st.debug("presenceGroup is set :",wt.presenceGroup),wt.sendPresenceGroupManagementCommand("join",wt.presenceGroup)):st.debug("no presenceGroup defined"),wt.subscribeToPresenceGroup!==null?(st.debug("subscribeToPresenceGroup is set :",wt.subscribeToPresenceGroup),wt.sendPresenceGroupManagementCommand("subscribe",wt.subscribeToPresenceGroup)):st.debug("no subscribeToPresenceGroup defined"),apiCC.session.apiCCIMClient!==null?apiCC.session.apiCCIMClient.userDataSetted===!0?(kt={photoURL:apiCC.session.apiCCIMClient.photoURL},apiCC.session.apiCCIMClient.setUserData(kt)):st.log("apiCC.session.apiCCIMClient.userDataSetted !== true"):st.log("apiCC.session.apiCCIMClient === null"),apiCC.session.apiCCWebRTCClient!==null){if(apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length>0)for(hn=!0,Rt=0;Rt<apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length;Rt+=1)Ft={destId:(cn=apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable[Rt]).remoteId,convId:cn.userMediaId,callType:cn.callType,roomId:cn.roomId,data:cn.data,meshPublish:!0},Nt.push(Ft);if((bt=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length)!==0){for(st.log("Reconnecting with calls ongoing"),Rt=0;Rt<bt;Rt+=1)apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Rt]!==null&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Rt]!==void 0?(cn=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Rt],st.debug("call.iceState =",cn.iceState),cn.data!==null?cn.data.type!=="publish"&&cn.data.type!=="subscribe"?(st.log("Call is P2P, updating media"),cn.updateMediaWithRetryManagement(!0),Ft={destId:cn.remoteId,convId:cn.callId,callType:cn.callType,roomId:cn.dest_roomId,data:cn.data},Nt.push(Ft)):(st.log("Call is in an MCU session"),Ft={destId:cn.remoteId,convId:cn.callId,callType:cn.callType,roomId:cn.dest_roomId,data:cn.data},Nt.push(Ft)):(st.log("Call is P2P, updating media - no data"),cn.updateMediaWithRetryManagement(!0),Ft={destId:cn.remoteId,convId:cn.callId,callType:cn.callType,roomId:cn.dest_roomId,data:cn.data},Nt.push(Ft))):st.log("call no more exist");hn=!0}else st.log("Reconnecting without calls ongoing");for(var vn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs,Sn=0;Sn<vn.length;Sn+=1){st.log("Reconnecting with an ongoing sessionMCU");var fn=[];fn.push(vn[Sn].roomName),apiCC.session.sendPresenceGroupManagementCommand("join",fn),apiCC.session.sendPresenceGroupManagementCommand("subscribe",fn)}}if(apiCC.myApiCCWhiteBoardClient!==null&&(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId!==0&&(st.debug("clearing whiteBoardDisconnectionTimeoutId"),clearTimeout(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=0),st.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(st.log("Reconnection with an ongoing whiteboard"),Xt=apiCC.myApiCCWhiteBoardClient.roomId,hn=!0,st.debug("Reconnection , sending request to get most recent whiteboard data"),apiCC.myApiCCWhiteBoardClient.paperSheetId=0,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})):st.log("Reconnecting without an ongoing whiteboard")),apiCC.session.apiCCPointerSharingClient!==null&&(zt=apiCC.session.apiCCPointerSharingClient.getRoomIds()).length>0&&(hn=!0),hn===!0){st.log("Sending reconnectContext to CCS"),Ut={type:"reconnectContext",callList:Nt,whiteBoardRoomId:Xt},zt!==null&&zt.length>0&&(Ut.pointerSharingRoomIds=zt);var mn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs;if(mn.length>0){Ut.updateSession=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null),Ut.updateSession.type="updateSession",Ut.updateSessions=[];var bn,un=function(xn,An){var En=typeof Symbol<"u"&&xn[Symbol.iterator]||xn["@@iterator"];if(!En){if(Array.isArray(xn)||(En=function(Hn,nr){if(Hn){if(typeof Hn=="string")return pt(Hn,nr);var sn=Object.prototype.toString.call(Hn).slice(8,-1);return sn==="Object"&&Hn.constructor&&(sn=Hn.constructor.name),sn==="Map"||sn==="Set"?Array.from(Hn):sn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sn)?pt(Hn,nr):void 0}}(xn))||An&&xn&&typeof xn.length=="number"){En&&(xn=En);var Rn=0,wn=function(){};return{s:wn,n:function(){return Rn>=xn.length?{done:!0}:{done:!1,value:xn[Rn++]}},e:function(Hn){throw Hn},f:wn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dn,Bn=!0,zn=!1;return{s:function(){En=En.call(xn)},n:function(){var Hn=En.next();return Bn=Hn.done,Hn},e:function(Hn){zn=!0,Dn=Hn},f:function(){try{Bn||En.return==null||En.return()}finally{if(zn)throw Dn}}}}(mn);try{for(un.s();!(bn=un.n()).done;){var Tn=bn.value,kn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null,{sessionMCU:Tn});kn.type="updateSession",Ut.updateSessions.push(kn)}}catch(xn){un.e(xn)}finally{un.f()}}Jt=JSON.stringify(Ut),st.log("C->S: "+Jt),apiCC.session.channel.socket.emit("reconnectContext",Jt)}Nt.splice(0,Nt.length),this.myWebRTC_Event.createChannelEvent("onChannelReconnect",Pt)},this.onChannelReconnecting=function(Pt){st.info("onChannelReconnecting",Pt);var Rt=Date();st.debug("date :"+Rt),this.myWebRTC_Event.createChannelEvent("onChannelReconnecting",Pt)},this.onChannelOpened=function(){st.info("Channel opened"),st.log("this.channelId :"+this.channelId),this.channelReady=!0,this.channelHasBeenDisconnected===!1?wt.onChannelOpened():(st.log("onChannelOpened after a disconnection, no change on session"),this.channelHasBeenDisconnected=!1,wt.ApiDBActivated!==!1&&wt.ApiDBActivated!==void 0&&wt.ApiDBActivated!==null&&(st.log("apiDB initialisation"),apiDB.init(wt.channel.socket))),this.updatePresenceGroupIsNeeded===!0&&(st.log("Updating presence group"),wt.leavePresenceGroup(this.oldPresenceGroup),wt.joinPresenceGroup(this.newPresenceGroup)),this.updateSubscribeToPresenceGroupIsNeeded===!0&&(st.log("Updating subscribe to presence group"),wt.unsubscribePresenceGroup(this.oldSubscribeToPresenceGroup),wt.subscribePresenceGroup(this.newSubscribeToPresenceGroup)),this.myWebRTC_Event.createChannelEvent("onChannelOpened")},this.onChannelMessage=function(Pt,Rt){var kt,bt=null,Nt=null;try{bt=JSON.parse(Pt)}catch{return}(kt=bt.type==="checkCallStatus"||bt.type==="apiRTCDataMessage"&&bt.data&&["activeSpeaker","stopSpeaking"].indexOf(bt.data.type)>=0)||st.info("onChannelMessage S->C: "+Pt),bt.type==="IMMessage"&&(st.log("IMMessage convId :"+bt.IMId),Nt=bt.IMId),Rt!==void 0&&(st.trace("ack on message reception"),st.trace("convId :"+Nt),Rt({reason:"ack",convId:Nt})),wt.processSignalingMessage(bt,{quiet:kt})},this.onChannelConnectError=function(Pt){st.error("onChannelConnectError :",Pt.message),this.myWebRTC_Event.createChannelEvent("onChannelConnectError",Pt),this.checkIfConnectionAttemptNeedToBeStopped(Pt)},this.onChannelReconnectError=function(Pt){st.log("onChannelReconnectError :",Pt.message),this.myWebRTC_Event.createChannelEvent("onChannelReconnectError",Pt),this.checkIfConnectionAttemptNeedToBeStopped(Pt)},this.onChannelReconnectAttempt=function(Pt){st.log("onChannelReconnectAttempt :",Pt),this.myWebRTC_Event.createChannelEvent("onChannelReconnectAttempt",Pt),this.onChannelReconnecting(Pt)},this.onChannelError=function(Pt){st.error("Channel error :",Pt.message),this.checkIfConnectionAttemptNeedToBeStopped(Pt),this.myWebRTC_Event.createChannelEvent("onChannelError",Pt)},this.checkIfConnectionAttemptNeedToBeStopped=function(Pt){st.debug("checkIfConnectionAttemptNeedToBeStopped"),(Pt.message==="not authorized"||Pt.message.includes("access token failure:")||Pt.message.includes("DISABLED_ENTERPRISE")||Pt.message.includes("An account is needed")||Pt.message.includes("ApiRTC update is needed")||Pt.message.includes("applicationUUID is not authorized"))&&(st.error("Stopping connection attempts"),this.socket.disconnect())},this.callback=function(Pt,Rt){return this.closureHandler=function(kt){return Pt[Rt](kt)},this.closureHandler},this.callbackWithParams=function(Pt,Rt){return this.closureHandler=function(kt,bt,Nt){return Pt[Rt](kt,bt,Nt)},this.closureHandler}},at=s(4708),ut=s(940);function ft(wt){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt},ft(wt)}var mt=et.Y.get("ApiCCSession"),yt=apiCC.myWebRTC_Event,At=function(wt){var Pt=this;if(this.apiCCId=null,this.apiCCSessionId=apiCC.randomString(22),this.apiKey=null,this.nickname=null,this.photoURL=null,this.apiCCWebRTCClient=null,this.apiCCIMClient=null,this.apiCCDataClient=null,this.apiCCIDSessionStorage=null,this.apiKeySessionStorage=null,this.apiCCIdPersistenceTimeout=5e3,this.channel=null,this.recordActivated=wt.recordActivated,this.sessionId=null,this.apiCCPointerSharingClient=null,this.apiCCWhiteBoardClient=null,this.ccsServer=wt.ccsServer,this.userData=wt.userData,this.apiDBActivated=!0,wt.ApiDBActivated=!0,this.webRTCPluginActivated=wt.webRTCPluginActivated,this.token=wt.token,this.JWTApzToken=null,this.JWTApzTokenRefreshTimer=396e5,this.JWTApzTokentimeOutId=-1,this.conversationSpace=wt.conversationSpace,this.tryAudioCallAfterUserMediaError=wt.tryAudioCallAfterUserMediaError,this.deactivateReloadOnCancel=wt.deactivateReloadOnCancel,this.connectedUsersList=[],this.messageTimeOutTable=[],this.ccsConnectionRetryNb=wt.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=wt.ccsConnectionRetryDelay,this.sequentialMessagesStorage={},this.cloudIsSecured=wt.cloudIsSecured,wt.messageTimeOutTimer!==void 0?this.messageTimeOutTimer=wt.messageTimeOutTimer:this.messageTimeOutTimer=1e4,mt.log("messageTimeOutTimer set to : "+this.messageTimeOutTimer),wt.presenceGroup!==void 0?this.presenceGroup=wt.presenceGroup:this.presenceGroup=["default"],wt.subscribeToPresenceGroup!==void 0?this.subscribeToPresenceGroup=wt.subscribeToPresenceGroup:this.subscribeToPresenceGroup=["default"],this.presenceGroupAddedByApiRTC=[],this.subscribeToPresenceGroupAddedByApiRTC=[],this.remoteAccessInvitation=null,this.isDeviceWebRTCCompliant=function(){return apiCC.isWebRTCCompliant()},this.isDeviceDTLSCompliant=function(){var bt=dt.E2.getBrowser(),Nt=parseInt(bt.version,10);return!(bt.name==="Chrome"&&Nt<44&&(mt.log("isDeviceDTLSCompliant FALSE : Chrome V < 44"),1))},this.userData===void 0||this.userData===null?(this.userData={},this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):this.userData.webRtcCompliant===void 0||this.userData.webRtcCompliant===null?(this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):mt.log("userData webRtcCompliant set to :",this.userData.webRtcCompliant),this.userData.osName=dt.BF,this.userData.osVersion=dt.MM,this.userData.browser=dt.Xh,this.userData.deviceType=dt.vO,this.userData.deviceVendor=dt.Cm,this.userData.deviceModel=dt.Ak,this.userData.browser_version=dt.dc,this.userData.browser_major_version=dt.PR,this.userData.apiRTCVersion=apiCC.version,this.userData.cpuArchitecture=dt.Ne,this.userData.engineName=dt.AA,this.userData.engineVersion=dt.TI,apiRTC.userAgentInstance!==void 0&&(this.userData.remoteAccessUserSupport=apiRTC.userAgentInstance.getCapabilities().remoteAccessUser),dt.BF==="Android"&&typeof cordova<"u"&&(this.userData.platform="Android"),typeof apiRTC_React<"u"&&(this.userData.react=!0),this.roomManagerEventHandler=function(bt){if(mt.debug("roomManagerEventHandler, roomId :"+bt.roomId+", type :"+bt.type+", roomType :"+bt.roomType),bt.roomType==="whiteBoard"){if(apiCC.myApiCCWhiteBoardClient===null||apiCC.myApiCCWhiteBoardClient===void 0)return void mt.log("No whiteBoard created, leaving msg processing");bt.type==="roomCreation"&&(mt.log("whiteBoard : roomCreation"),apiCC.myApiCCWhiteBoardClient.roomId=bt.roomId,apiCC.myApiCCWhiteBoardClient.paperSheetId++,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),bt.type==="roomInvitation"&&(mt.log("whiteBoard : roomInvitation"),apiCC.myApiCCWhiteBoardClient.roomId=bt.roomId),bt.type==="roomMessage"&&apiCC.myApiCCWhiteBoardClient.messageProcessing(bt.data),bt.type==="roomJoin"&&(mt.log("whiteBoard : roomJoin"),apiCC.myApiCCWhiteBoardClient.roomJoined=!0,apiCC.myApiCCWhiteBoardClient.roomId=bt.roomId)}else bt.roomType==="pointerSharing"?apiCC.session.apiCCPointerSharingClient&&bt.type==="roomJoin"&&apiCC.session.apiCCPointerSharingClient.processMessageRoomJoin(bt):bt.roomType==="coBrowsing"?bt.type==="roomMessage"&&mt.log("coBrowsing : roomMessage :"+bt):mt.log("roomManagerEventHandler for msg.roomType :"+bt.roomType)},this.callback=function(bt,Nt){return this.closureHandler=function(Ft){return bt[Nt](Ft)},this.closureHandler},this.roomMgr=new ot(this,this.callback(this,"roomManagerEventHandler")),wt.xhrPolling===!0?this.xhrPolling=!0:this.xhrPolling=!1,this.getSessionStorage=function(bt){var Nt=sessionStorage.getItem(bt);if(Nt===null)return null;try{var Ft=JSON.parse(Nt),Ut=new Date(Ft.expiresAt);return new Date>=Ut?(sessionStorage.removeItem(bt),null):Ft.value}catch{mt.error("Something went wrong when parsing JSON from session storage values")}},this.generateApiCCID=function(){mt.debug("apiCCId is not defined by user, checking if apiCCId exist in sessionStorage"),typeof apiRTC_React>"u"&&(this.apiCCIDSessionStorage=this.getSessionStorage("apiCCId"),this.apiKeySessionStorage=this.getSessionStorage("apiKey")),this.apiCCIDSessionStorage!==null?(mt.log("apiCCId exist in sessionStorage : "+this.apiCCIDSessionStorage),this.apiKeySessionStorage!==null?(mt.log("apiKey exist in sessionStorage : "+this.apiKeySessionStorage),this.apiKeySessionStorage===this.apiKey?(mt.log("apiKey is the same, keeping apiCCId"),this.apiCCId=this.apiCCIDSessionStorage):(mt.log("apiKey is not the same, generating an  apiCCId"),this.apiCCId=Math.floor(1000001*Math.random()).toString(),mt.log("Creation of new ApiRTC session with Id : "+this.apiCCId))):this.apiCCId=this.apiCCIDSessionStorage):(mt.log(" No apiCCId found on sessionStorage : generating an apiCCId"),this.apiCCId=String(1e5+Math.floor(9e5*Math.random())),mt.log("Creation of new ApiRTC session with Id : "+this.apiCCId))},this.getNumericIdFromAlpha=function(bt){mt.log("getNumericIdFromAlpha new : "+bt);var Nt,Ft=0;if(bt.length===0)return Ft;for(Nt=0;Nt<bt.length;Nt++)Ft=(Ft<<5)-Ft+bt.charCodeAt(Nt),Ft&=Ft;return mt.log("getNumericIdFromAlpha returned value: "+(Ft>>>0)),Ft>>>0},wt.appId!==void 0&&(this.appId=wt.appId),wt.siteId!==void 0&&(this.siteId=wt.siteId),wt.apiKey===void 0)return mt.error('Error : Initialisation parameters: "apikey" for session creation is not defined'),null;if(mt.log("Session creation with apiKey : "+wt.apiKey),mt.log("Session creation with apiCCId : "+wt.apiCCId),this.apiKey=wt.apiKey,wt.onReady===void 0&&typeof apiRTC_React>"u")return mt.error('Error : Initialisation parameters: "onReady" for session creation is not defined'),null;if(apiCC.addEventListener("sessionReady",wt.onReady),typeof apiRTC_React>"u"&&(this.sessionId=this.getSessionStorage("sessionId")),wt.apiCCId===void 0||wt.apiCCId===""||wt.apiCCId===null)this.generateApiCCID();else if(mt.log("Session creation with apiCCId defined by user : "+wt.apiCCId),mt.debug("params.idConversionActivated : "+wt.idConversionActivated),wt.idConversionActivated===void 0||wt.idConversionActivated===!0)if((0,at._C)(wt.apiCCId))this.apiCCId=wt.apiCCId.toString();else{mt.log("Converting this Id in a numeric one");var Rt=this.getNumericIdFromAlpha(wt.apiCCId);Rt+="",mt.log("Numeric Id is : "+Rt),(0,at._C)(Rt)?(mt.warn("Id has been converted to a numeric one"),this.apiCCId=Rt.toString()):(mt.warn("Error : Defined apiCCId :"+wt.apiCCId+" is not numeric. ApiCCID is generated"),this.generateApiCCID())}else mt.log("String id convertion is deactivated"),this.apiCCId=wt.apiCCId.toString();function kt(bt){return bt instanceof Array?(mt.log("data instanceof Array"),!0):(mt.log("data not instanceof Array"),!1)}wt.apiCCIdPersistenceTimeout!==null&&typeof wt.apiCCIdPersistenceTimeout=="number"&&wt.apiCCIdPersistenceTimeout>=0&&(this.apiCCIdPersistenceTimeout=wt.apiCCIdPersistenceTimeout),this.channel!==null&&(mt.log("this.channel is defined"),delete this.channel),this.channel=new ht(this),this.channel.initialize(),wt.nickname!==null&&wt.nickname!==void 0?(mt.log("Nickname is defined :"+wt.nickname),this.nickname=wt.nickname):(mt.log("Nickname is not defined, setting to apiCCId value :"+this.apiCCId),this.nickname=this.apiCCId),wt.photoURL!==null&&wt.photoURL!==void 0?(mt.log("photoURL is defined :"+wt.photoURL),this.photoURL=wt.photoURL):(mt.log("photoURL is not defined"),this.photoURL=null),this.reOpenChannel=function(bt,Nt){mt.info("reOpenChannel"),this.apiCCId=bt.toString(),this.apiKey=Nt,this.channel.socket!==void 0&&this.channel.socket!==null&&this.channel.socket.disconnect(),this.channel.channelReady=!1,this.channel.socket=null,this.channel.channelId=this.apiCCId,this.channel.initialize(),this.apiCCWebRTCClient!==null&&this.apiCCWebRTCClient.webRTCClient!==null&&(this.apiCCWebRTCClient.webRTCClient.socket=this.channel.socket)},this.onChannelOpened=function(){mt.debug("ApiCCSession onChannelOpened"),wt.ApiDBActivated!==!1&&wt.ApiDBActivated!==void 0&&wt.ApiDBActivated!==null&&(mt.log("apiDB initialisation"),apiDB.init(this.channel.socket)),yt.createSessionReadyEvent(apiCC.session.apiCCId)},this.createWebRTCClient=function(bt){mt.debug("createWebRTCClient");var Nt={};this.apiCCWebRTCClient=new apiCC.ApiCCWebRTCClient(this),apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),Nt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,Nt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(Nt),setTimeout(function(){yt.createWebRTCClientCreatedEvent()});var Ft=apiCC.getUserMediaStreamIds(),Ut=Ft.length;for(mt.debug("listing accessToLocalMedia "+Ut);--Ut>=0;)if(apiCC.getUserMediaStream(Ft[Ut]).accessToLocalMedia()){mt.debug("setting accessToLocalMedia to true"),this.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0;break}return this.apiCCWebRTCClient},this.createPointerSharingClient=function(){return this.apiCCPointerSharingClient===null&&(this.apiCCPointerSharingClient=new apiCC.ApiCCPointerSharingClient(this)),this.apiCCPointerSharingClient},this.closePointerSharingClient=function(){this.apiCCPointerSharingClient!==null&&this.apiCCPointerSharingClient instanceof apiCC.ApiCCPointerSharingClient&&(this.apiCCPointerSharingClient.stop(),this.apiCCPointerSharingClient=null)},this.createWhiteBoard=function(bt,Nt,Ft,Ut){return mt.info("createWhiteBoard"),this.apiCCWhiteBoardClient=apiCC.createWhiteBoard(bt,Nt,Ft,Ut),this.apiCCWhiteBoardClient},this.closeWhiteBoardClient=function(bt){mt.info("closeWhiteBoardClient"),apiCC.closeWhiteBoardClient(bt)},this.createIMClient=function(bt){return mt.debug("createIMClient"),this.apiCCIMClient=new apiCC.ApiCCIMClient(this,bt),this.apiCCIMClient},this.createDataClient=function(){return mt.info("createDataClient"),this.apiCCDataClient=new apiCC.ApiCCDataClient(this),this.apiCCDataClient},this.updatingQuery=function(bt){mt.debug("updatingQuery");var Nt=null,Ft=null,Ut=null;return Nt=(0,at.dD)(bt),this.userData!==void 0?(Ft=JSON.stringify(this.userData),Ut=encodeURIComponent(Ft),Nt.userData=Ut,(0,at.Wc)(Nt)):bt},this.setUserData=function(bt,Nt){mt.debug("setUserData in session :",bt);var Ft,Ut,Jt,hn=[],Xt=this.userData;if(this.userData!==void 0){if(this.userData=(0,at.S6)(this.userData,bt),mt.debug("this.userData :",this.userData),mt.debug("actualUserData :",Xt),mt.debug("forceSendData :",Nt),Nt!==!0&&JSON.stringify(this.userData)===JSON.stringify(Xt))return void mt.debug("userData is not changed, leaving userData processing")}else this.userData=bt;for(Ft={type:"setUserData",userData:bt},Ut=JSON.stringify(Ft),mt.log("C->S: "+Ut),this.channel.socket.emit("setUserData",Ut),mt.log("socket.io 1.X : socket.io.opts.query :"+this.channel.socket.io.opts.query),this.channel.socket.io.opts.query=this.updatingQuery(this.channel.socket.io.opts.query),mt.log("socket.io 1.X : after update : socket.io.opts.query :"+this.channel.socket.io.opts.query),Jt=0;Jt<this.connectedUsersList.length;Jt+=1)this.apiCCId===this.connectedUsersList[Jt].userId&&(this.connectedUsersList[Jt].userData=this.userData,hn[0]=this.apiCCId,yt.createConnectedUsersListUpdateEvent(this.connectedUsersList[Jt].group,hn,"userDataUpdate","userDataUpdate"))},this.sendPresenceGroupManagementCommand=function(bt,Nt){if(mt.debug("sendPresenceGroupManagementCommand :"+bt+" for group : "+Nt),kt(Nt)===!0){var Ft,Ut,Jt,hn=Nt.length;if(bt==="unsubscribe")for(Jt=0;Jt<hn;Jt+=1)this.removeGroupDataFromConnectedUsersList(Nt[Jt]);hn!==1||Nt[0]!=="deactivated"?(Ft={type:"presenceGroupManagement",command:bt,group:Nt},Ut=JSON.stringify(Ft),mt.log("C->S: "+Ut),this.channel.socket.emit("presenceGroupManagement",Ut)):mt.debug("leaving sendPresenceGroupManagementCommand for group deactivated")}else mt.error("group parameter value is not correct, need to be a JSON array")},this.sendConversationSpaceCommand=function(bt,Nt){var Ft,Ut;mt.debug("sendConversationSpaceCommand :"+bt+" for conversationSpace : "+Nt),Ft={type:"conversationSpaceManagement",command:bt,conversationSpace:Nt},Ut=JSON.stringify(Ft),mt.log("C->S: "+Ut),this.channel.socket.emit("conversationSpaceManagement",Ut)},this.joinPresenceGroup=function(bt,Nt){var Ft=this;Nt||((Nt={}).doneByApiRTC=!1),mt.debug("joinPresenceGroup :"+bt),kt(bt)===!0?(this.sendPresenceGroupManagementCommand("join",bt),bt.forEach(function(Ut){var Jt=Ft.presenceGroupAddedByApiRTC.indexOf(Ut);Ft.presenceGroup.indexOf(Ut)===-1&&(Ft.presenceGroup.push(Ut),Nt.doneByApiRTC&&Jt===-1&&Ft.presenceGroupAddedByApiRTC.push(Ut)),Nt.doneByApiRTC===!1&&Jt!==-1&&Ft.presenceGroupAddedByApiRTC.splice(Jt,1)})):mt.log("group parameter value is not correct, need to be a JSON array"),mt.debug("this.presenceGroup :"+this.presenceGroup)},this.leavePresenceGroup=function(bt,Nt){var Ft=this;Nt||((Nt={}).doneByApiRTC=!1),mt.debug("leavePresenceGroup :"+bt),kt(bt)===!0?bt.forEach(function(Ut){var Jt=Ft.presenceGroupAddedByApiRTC.indexOf(Ut);if(Nt.doneByApiRTC===!1||Nt.doneByApiRTC===!0&&Jt!==-1){var hn=Ft.presenceGroup.indexOf(Ut);hn!==-1&&Ft.presenceGroup.splice(hn,1),Ft.sendPresenceGroupManagementCommand("leave",[Ut])}Jt!==-1&&Ft.presenceGroupAddedByApiRTC.splice(Jt,1)}):mt.log("group parameter value is not correct, need to be a JSON array"),mt.debug("this.presenceGroup :"+this.presenceGroup)},this.subscribePresenceGroup=function(bt,Nt){var Ft=this;Nt||((Nt={}).doneByApiRTC=!1),mt.debug("subscribePresenceGroup :"+bt),kt(bt)===!0?(this.sendPresenceGroupManagementCommand("subscribe",bt),bt.forEach(function(Ut){var Jt=Ft.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ut);Ft.subscribeToPresenceGroup.indexOf(Ut)===-1&&(Ft.subscribeToPresenceGroup.push(Ut),Nt.doneByApiRTC&&Ft.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ut)===-1&&Ft.subscribeToPresenceGroupAddedByApiRTC.push(Ut)),Nt.doneByApiRTC===!1&&Jt!==-1&&Ft.subscribeToPresenceGroupAddedByApiRTC.splice(Jt,1)})):mt.log("group parameter value is not correct, need to be a JSON array"),mt.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.unsubscribePresenceGroup=function(bt,Nt){var Ft=this;Nt||((Nt={}).doneByApiRTC=!1),mt.debug("unsubscribePresenceGroup :"+bt),kt(bt)===!0?bt.forEach(function(Ut){var Jt=Ft.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ut);if(Nt.doneByApiRTC===!1||Nt.doneByApiRTC===!0&&Jt!==-1){var hn=Ft.subscribeToPresenceGroup.indexOf(Ut);hn!==-1&&Ft.subscribeToPresenceGroup.splice(hn,1),Ft.sendPresenceGroupManagementCommand("unsubscribe",[Ut])}Jt!==-1&&Ft.subscribeToPresenceGroupAddedByApiRTC.splice(Jt,1)}):mt.log("group parameter value is not correct, need to be a JSON array"),mt.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.joinConversationSpace=function(bt){mt.info("joinConversationSpace :"+bt),this.sendConversationSpaceCommand("join",bt),this.conversationSpace=bt},this.leaveConversationSpace=function(bt){mt.info("leaveConversationSpace :"+bt),bt!=null&&this.conversationSpace===bt?(this.sendConversationSpaceCommand("leave",bt),this.conversationSpace=null):mt.debug("socket is not in the conversationSpace, we request to leave")},this.subscribeToCloudEvent=function(bt,Nt){this.sendCloudEventsCommand("subscribe",bt,Nt)},this.unsubscribeToCloudEvent=function(bt,Nt){this.sendCloudEventsCommand("unsubscribe",bt,Nt)},this.sendCloudEventsCommand=function(bt,Nt,Ft){if(["subscribe","unsubscribe"].includes(bt))if(Nt&&typeof Nt=="string"){if(Ft){if(ft(Ft)!=="object")return void mt.error("wrong headers format");for(var Ut=0,Jt=Object.values(Ft);Ut<Jt.length;Ut++){var hn=Jt[Ut];if(!hn||typeof hn!="string")return void mt.error("wrong headers format")}}var Xt={type:"cloudEvents",command:bt,topic:Nt};Ft&&(Xt.headers=Ft);var zt=JSON.stringify(Xt);mt.log("C->S:",zt),this.channel.socket.emit("cloudEvents",zt)}else mt.error("wrong topic format");else mt.error("wrong command")},this.getConversationList=function(bt){mt.info("getConversationList request");var Nt,Ft;Ft=bt!==void 0?{type:"getConversationList",lastConversationNb:bt}:{type:"getConversationList",lastConversationNb:50},Nt=JSON.stringify(Ft),mt.log("C->S: "+Nt),this.channel.socket.emit("getConversationList",Nt)},this.receiveConversationListAnswer=function(bt){mt.info("receiveConversationListAnswer"),mt.log("msg.convList.length :"+bt.convList.length);var Nt,Ft=bt.convList.length,Ut=[],Jt=null;for(Nt=0;Nt<Ft;Nt+=1)mt.log("i ="+Nt),Jt=JSON.parse(bt.convList[Nt]),Ut.push(Jt);yt.createReceiveConversationListAnswerEvent(Ut)},this.getContactOccurrencesFromConversationList=function(bt){mt.info("getContactOccurrencesFromConversationList request");var Nt,Ft;Ft=bt!==void 0?{type:"getContactOccurrencesFromConversationList",lastConversationNb:bt}:{type:"getContactOccurrencesFromConversationList",lastConversationNb:50},Nt=JSON.stringify(Ft),mt.log("C->S: "+Nt),this.channel.socket.emit("getContactOccurrencesFromConversationList",Nt)},this.receiveContactOccurrencesFromConversationListAnswer=function(bt){mt.info("receiveContactOccurrencesFromConversationListAnswer"),mt.log("msg.contactOccurrencesTable.length :"+bt.contactOccurrencesTable.length),yt.createReceiveContactOccurrencesFromConversationListAnswerEvent(bt.contactOccurrencesTable)},this.getConversationDetailReport=function(bt){var Nt,Ft;mt.info("getConversationDetailReport for convId :"+bt),Nt={type:"getConversationDetailReport",convId:bt},Ft=JSON.stringify(Nt),mt.log("C->S: "+Ft),this.channel.socket.emit("getConversationDetailReport",Ft)},this.receiveConversationDetailReportAnswer=function(bt){mt.info("receiveConversationDetailReportAnswer"),mt.log("msg.CDR :"+bt.CDR),yt.createReceiveConversationDetailReportAnswerEvent(bt.CDR)},this.manageConnectedUsersList=function(bt,Nt,Ft,Ut){mt.debug("manageConnectedUsersList");var Jt,hn,Xt,zt=!1,cn=0,vn=!1,Sn="unset";for(mt.trace("manageConnectedUsersList.length :"+bt.length),mt.trace("this.connectedUsersList.length :"+this.connectedUsersList.length),mt.log("state :"+Nt),mt.log("group :"+Ft),Xt=0;Xt<bt.length;Xt+=1)bt[Xt].group=Ft;if(Nt==="online")for(mt.log("state : online"),Jt=0;Jt<bt.length;Jt+=1){if(mt.log("msgConnectedUsersListWithStatus  :"+Jt),zt=!1,this.connectedUsersList.length===0){mt.log("this.connectedUsersList is empty"),this.connectedUsersList=bt,mt.log("this.connectedUsersList[0].group :"+this.connectedUsersList[0].group),yt.createConnectedUsersListUpdateEvent(Ft,Ut,Nt,"newConnectionState");break}for(hn=0;hn<this.connectedUsersList.length;hn+=1)if(vn=!1,bt[Jt].userId===this.connectedUsersList[hn].userId&&bt[Jt].group===this.connectedUsersList[hn].group){zt=!0,JSON.stringify(this.connectedUsersList[hn].userData)!==JSON.stringify(bt[Jt].userData)&&(mt.log("userData is updated"),this.connectedUsersList[hn].userData=bt[Jt].userData,vn=!0,Sn="userDataUpdate"),this.connectedUsersList[hn].callState!==bt[Jt].callState&&(mt.log("callState is updated"),this.connectedUsersList[hn].callState=bt[Jt].callState,vn=!0,Sn="callState"),vn===!0&&yt.createConnectedUsersListUpdateEvent(Ft,Ut,Nt,Sn);break}if(zt===!1){mt.log("Adding user in connectedUsersList :"+bt[Jt].userId),this.connectedUsersList.push(bt[Jt]);var fn=[];fn[0]=bt[Jt].userId,yt.createConnectedUsersListUpdateEvent(Ft,fn,Nt,"newConnectionState")}}else for(mt.log("state : offline"),Jt=0;Jt<bt.length;Jt+=1)for(mt.log("msgConnectedUsersListWithStatus  :"+Jt),cn=this.connectedUsersList.length,hn=0;hn<cn;hn+=1)if(bt[Jt].userId===this.connectedUsersList[hn].userId&&bt[Jt].group===this.connectedUsersList[hn].group){mt.log("Removing user in connectedUsersList :"+bt[Jt].userId),mt.log("... in group :"+bt[Jt].group),this.connectedUsersList.splice(hn,1),yt.createConnectedUsersListUpdateEvent(Ft,Ut,Nt,"newConnectionState");break}},this.removeGroupDataFromConnectedUsersList=function(bt){mt.debug("removeGroupDataFromConnectedUsersList for group :",bt);var Nt,Ft=this.connectedUsersList.length,Ut=[],Jt=0;for(mt.debug("this.connectedUsersList.length :",this.connectedUsersList.length),Nt=0;Nt<Ft;Nt+=1)mt.debug("this.connectedUsersList[j].group :",this.connectedUsersList[Nt-Jt].group),mt.debug("group :",bt),this.connectedUsersList[Nt-Jt].group===bt&&(mt.log("Removing user in connectedUsersList :"+this.connectedUsersList[Nt-Jt].userId),Ut[0]=this.connectedUsersList[Nt-Jt].userId,this.connectedUsersList.splice(Nt-Jt,1),Jt+=1,yt.createConnectedUsersListUpdateEvent(bt,Ut,"offline","newConnectionState"))},this.getConnectedUsersList=function(bt){bt!==void 0?mt.log("getConnectedUsersList for group : "+bt):mt.log("getConnectedUsersList : complete users list");var Nt,Ft=[];if(bt==null)return this.connectedUsersList;for(mt.log("filtering list for group : "+bt),Nt=0;Nt<this.connectedUsersList.length;Nt+=1)this.connectedUsersList[Nt].group===bt&&Ft.push(this.connectedUsersList[Nt]);return Ft},this.isClientWebRtcCompliant=function(bt){var Nt,Ft,Ut=null,Jt=null;if(bt!==void 0)for(Nt=this.getConnectedUsersList(),Ft=0;Ft<Nt.length;Ft++)Nt[Ft].userId===bt&&(Jt=Nt[Ft].userData)!=null&&Jt.webRtcCompliant!==void 0&&(Ut=Jt.webRtcCompliant);return Ut},this.isClientDTLSCompliant=function(bt){var Nt,Ft,Ut=!0,Jt=null;if(bt!==void 0)for(Nt=this.getConnectedUsersList(),Ft=0;Ft<Nt.length;Ft++)Nt[Ft].userId===bt&&(Jt=Nt[Ft].userData,mt.log("userData :",Jt),Jt!=null&&Jt.dtlsCompliant!==void 0&&(Ut=Jt.dtlsCompliant));return Ut},this.getConnectedUserIdsList=function(bt){mt.info("getConnectedUserIdsList, group :",bt);var Nt,Ft,Ut=[],Jt=!1,hn={},Xt=[];if(bt!==void 0?mt.log("getConnectedUserIdsList for group : "+bt):mt.log("getConnectedUserIdsList : complete users list"),bt==null)Xt=JSON.parse(JSON.stringify(this.connectedUsersList));else for(Nt=0;Nt<this.connectedUsersList.length;Nt+=1)this.connectedUsersList[Nt].group===bt&&Xt.push(this.connectedUsersList[Nt]);for(Nt=0;Nt<Xt.length;Nt+=1){for(Jt=!1,Ft=0;Ft<Ut.length;Ft++)if(Ut[Ft].userId===Xt[Nt].userId){Jt=!0;break}Jt===!1&&((hn={}).userId=Xt[Nt].userId,hn.callState=Xt[Nt].callState,hn.userData=Xt[Nt].userData,Ut.push(hn))}return Ut},this.getGroupsFromConnectedUsersList=function(bt){mt.info("getGroupsFroConnectedUsersList");var Nt,Ft=[],Ut=!1;for(Nt=0;Nt<this.connectedUsersList.length;Nt+=1)this.connectedUsersList[Nt].userId===bt&&(mt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Nt].group)),Ut=!0,Ft.push(this.connectedUsersList[Nt].group));return Ut===!0?JSON.stringify(Ft):"User_Not_Found"},this.getConnectedUserInfo=function(bt,Nt){mt.info("getConnectedUserInfo"),mt.log("getConnectedUserInfo userId :",bt),mt.log("getConnectedUserInfo infoType :",Nt);var Ft,Ut=null,Jt=null;switch(Nt){case"all":for(mt.log("all"),Ft=0;Ft<this.connectedUsersList.length;Ft+=1)if(this.connectedUsersList[Ft].userId===bt)return mt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Ft])),Ut=this.getGroupsFromConnectedUsersList(bt),(Jt=JSON.parse(JSON.stringify(this.connectedUsersList[Ft]))).groups=Ut,delete Jt.group,JSON.stringify(Jt);break;case"callState":for(mt.log("callState"),Ft=0;Ft<this.connectedUsersList.length;Ft+=1)if(this.connectedUsersList[Ft].userId===bt)return mt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Ft].callState)),this.connectedUsersList[Ft].callState;break;case"userData":for(mt.log("userData"),Ft=0;Ft<this.connectedUsersList.length;Ft+=1)if(this.connectedUsersList[Ft].userId===bt)return mt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Ft].userData)),JSON.stringify(this.connectedUsersList[Ft].userData);break;case"groups":return mt.log("groups"),this.getGroupsFromConnectedUsersList(bt);default:mt.log("infoType not defined switch case : "+Nt)}return"User_Not_Found"},this.isConnectedUser=function(bt){mt.info("isConnectedUser");var Nt,Ft=!1;for(Nt=0;Nt<this.connectedUsersList.length;Nt+=1)if(mt.log(JSON.stringify(this.connectedUsersList[Nt])),this.connectedUsersList[Nt].userId===bt)return Ft=!0,mt.log("isConnected :"+Ft),Ft;return mt.log("isConnected :"+Ft),Ft},this.displayConnectedUsersList=function(){var bt;for(mt.debug("displayConnectedUsersList"),bt=0;bt<this.connectedUsersList.length;bt+=1)mt.log("User :"+this.connectedUsersList[bt].userId+" on group :"+this.connectedUsersList[bt].group)},this.updatePresence=function(bt){try{mt.debug("updatePresence : ",JSON.stringify(bt))}catch(Nt){mt.debug(Nt)}mt.log("updatePresence for group :"+bt.group),this.manageConnectedUsersList(bt.connectedUsersListWithStatus,bt.state,bt.group,bt.connectedUsersList),yt.createUpdatePresenceEvent(bt.connectedUsersList,bt.state,bt.connectedUsersListWithStatus)},this.processCloudEventOccurred=function(bt){mt.debug("processCloudEventOccurred",bt),yt.createCloudEventOccurredEvent(bt.event.type,bt.event.target)},this.updateUserStatus=function(bt){mt.info("updateUserStatus"+bt),yt.createUpdateUserStatusEvent(bt)},this.sendDebugCommand=function(bt,Nt,Ft){mt.info("sendDebugCommand :"+bt),new ut.S(this.channel.socket).sendDebugCommand("getClientSocketsInfo",Nt,Ft)},this.processSignalingMessage=function(bt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ft=null,Ut=null,Jt=!1,hn=null,Xt=null,zt=!1,cn=null;if(bt.type==="invite")this.apiCCWebRTCClient?(mt.log("this.webRTCPluginActivated =",this.webRTCPluginActivated),(dt.Xh==="IE"||dt.Xh==="Safari"&&dt.PR<11)&&this.webRTCPluginActivated===!0?(mt.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){mt.log("manageWebRTCPlugin cb on Invite"),apiCC.session.apiCCWebRTCClient.webRTCClient.processInvite(bt)},function(){mt.log("actionOnInstallationNeeded"),mt.log("sending bye to be done"),new ut.S(apiCC.session.channel.socket).sendBye(bt.callId,bt.calleeId,bt.roomId,bt.callerId,"WebRTC_Plugin_Installation_needed",bt.data)})):(mt.log("managing call with browser"),this.apiCCWebRTCClient.webRTCClient.processInvite(bt))):mt.warn("WebRTCClient is not created");else if(bt.type==="200OK")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200OK(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="candidate")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCandidate(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="bye")this.apiCCWebRTCClient?(mt.log("bye message from:"+bt.clientId+" for callId : "+bt.callId),this.apiCCWebRTCClient.webRTCClient.onRemoteHangup(bt.callId,bt.clientId,bt.roomId,bt.reason,bt.confId,bt.data)):mt.warn("WebRTCClient is not created");else if(bt.type==="update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processUpdate(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="200update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200Update(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="newConversationCreated")this.apiCCIMClient?this.apiCCIMClient.newConversationCreated(bt):mt.warn("IMClient is not created");else if(bt.type==="IMMessage")this.apiCCIMClient?this.apiCCIMClient.receiveMessage(bt):mt.warn("IMClient is not created");else if(bt.type==="groupChatCreation")this.apiCCIMClient?this.apiCCIMClient.groupChatCreation(bt):mt.warn("IMClient is not created");else if(bt.type==="groupChatInvitation")this.apiCCIMClient?this.apiCCIMClient.groupChatInvitation(bt):mt.warn("IMClient is not created");else if(bt.type==="groupChatMemberUpdate")this.apiCCIMClient?this.apiCCIMClient.groupChatMemberUpdate(bt):mt.warn("IMClient is not created");else if(bt.type==="addUserInGroupChatAnswer")this.apiCCIMClient?this.apiCCIMClient.addUserInGroupChatAnswer(bt):mt.warn("IMClient is not created");else if(bt.type==="groupChatMessage")this.apiCCIMClient?this.apiCCIMClient.receiveGroupChatMessage(bt):mt.warn("IMClient is not created");else if(bt.type==="conversationHistoryAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveConversationHistory(bt):mt.warn("IMClient is not created");else if(bt.type==="getUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveUserDataAnswer(bt):mt.warn("IMClient is not created");else if(bt.type==="fetchUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveFetchUserDataAnswer(bt):mt.warn("IMClient is not created");else if(bt.type==="dataMessage")this.apiCCDataClient?this.apiCCDataClient.receiveData(bt):mt.warn("DataClient is not created");else if(bt.type==="dataAck")this.apiCCWebRTCClient.webRTCClient.processDataAck(bt);else if(bt.type==="dataEndAck")this.apiCCWebRTCClient.webRTCClient.processDataEndAck(bt);else if(bt.type==="updateVideoQuality")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processUpdateVideoQuality(bt.callId,bt.profile);else if(bt.type==="apiRTCDataMessage")if(Nt.quiet||mt.debug("apiRTCDataMessage:",bt),(0,at.Ym)(bt.data,"object"))if(bt.data.type==="joinSessionAnswer")if(this.apiCCWebRTCClient){var vn={roomName:bt.data.roomId};(0,at.ki)(bt.data,"convId","string")&&(vn.convId=bt.data.convId),(0,at.ki)(bt.data,["data","mode"],"string")&&(vn.data={mode:bt.data.data.mode}),(0,at.ki)(bt.data,["data","transition"],"string")&&bt.data.data.transition==="mesh2janus"?this.apiCCWebRTCClient.webRTCClient.MCUClient.changeSessionMode(vn,"mesh2janus"):this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(vn,{createSession:!0})}else mt.warn("WebRTCClient is not created");else if(bt.data.type==="slowLink"){if(this.apiCCWebRTCClient){var Sn={};bt.data.advice&&(Sn.advice=bt.data.advice),this.apiCCWebRTCClient.webRTCClient.processSlowLink(bt.data.callId,Sn)}}else if(bt.data.type==="videoQualityChanged")yt.createVideoQualityChangedEvent(bt.data.callId,bt.data.roomId,bt.data.hint,bt.data.profile);else if(bt.data.type==="distantIceError")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantIceError(bt.data);else if(bt.data.type==="streamTrackChanged")this.apiCCWebRTCClient&&bt.data.hasOwnProperty("mline")&&bt.data.hasOwnProperty("muted")&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackMuteChanged(bt.data.callId,bt.data.mline,bt.data.muted);else if(bt.data.type==="streamTrackStatusChanged")this.apiCCWebRTCClient&&bt.data.hasOwnProperty("mline")&&bt.data.hasOwnProperty("change")&&bt.data.hasOwnProperty(bt.data.change)&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackStatusChanged(bt.data.callId,bt.data.mline,bt.data[bt.data.change]);else if(bt.data.type==="configureEncodings")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processConfigureEncodings(bt.data);else if(bt.data.type==="activeSpeaker")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(bt.data,!0);else if(bt.data.type==="stopSpeaking")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(bt.data,!1);else if(bt.data.type==="updateStream")this.apiCCWebRTCClient&&bt.data.callId&&bt.data.mline&&bt.data.direction&&this.apiCCWebRTCClient.webRTCClient.processUpdateStream(bt.data.callId,bt.data.mline,bt.data.direction);else if(bt.data.type==="startRecording"){if(this.apiCCWebRTCClient)if(bt.data.callId==="COMPOSITE")this.apiCCWebRTCClient.webRTCClient.MCUClient.startCompositeRecording(bt.data.mediaType,bt.data.customIdInFilename,bt.data.convId,bt.data.data);else{for(cn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--cn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[cn].callId===bt.data.callId){zt=!0;break}zt?this.apiCCWebRTCClient.webRTCClient.MCUClient.startRecording(bt.data.mediaType,bt.data.customIdInFilename,bt.data.convId,bt.data.callId,bt.data.data):mt.info("cannot start recording (call not found)")}}else if(bt.data.type==="startStreaming"){if(this.apiCCWebRTCClient){for(cn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--cn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[cn].callId===bt.data.callId){zt=!0;break}zt?this.apiCCWebRTCClient.webRTCClient.MCUClient.startStreaming(bt.data.service,bt.data.server,bt.data.streamKey,bt.data.callId):mt.info("cannot start streaming (call not found)")}}else if(bt.data.type==="startCallStatsMonitoring"){if(this.apiCCWebRTCClient){for(mt.debug("startCallStatsMonitoring",bt.data.callId),cn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--cn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[cn].callId===bt.data.callId){Ut=this.apiCCWebRTCClient.webRTCClient.callsTable[cn];break}Ut?["chrome","firefox"].indexOf(at.wL.type)>=0?Ut.csmIntervalId?mt.debug("call stats monitoring already started"):Ut.csmIntervalId=setInterval(Ut.callback(Ut,"csmHandler"),Ut.csmIntervalMs):mt.debug("call stats are only supported on chrome and firefox"):mt.debug("no such call")}}else bt.data.type==="callOrder"?(mt.log("callOrder received"),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=bt.senderId,Ft=this.apiCCWebRTCClient.webRTCClient.callWithNumber(bt.data.caller,!0,{MCUType:"MCU-Callee",confId:bt.data.confId,convId:bt.data.convId},hn),this.apiCCWebRTCClient.webRTCClient.myWebRTC_Event.createIncomingCallEvent(this.clientId,bt.data.caller,bt.data.caller,Ft,!1,1,!1,"video",!0,"web","media")):mt.warn("WebRTCClient is not created")):bt.data.type==="subscribeOrder"?(mt.log("subscribeOrder received"),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=bt.senderId,bt.data.data.subscribeOrder=!0,(Xt=[]).push(bt.data.stream),this.apiCCWebRTCClient.webRTCClient.MCUClient.subscribeToStreams(Xt,"VIDEO",bt.data.data,hn,{noStreamCheck:!0})):mt.warn("WebRTCClient is not created")):bt.data.type==="distantCallEstablished"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantCallEstablished(bt.data):bt.data.type==="simulcastFeedChanged"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processSimulcastFeedChanged(bt.data):mt.log("msg.data.type is not managed :"+bt.data.type);else mt.log("msg.data === undefined");else if(bt.type==="conversationListAnswer")this.receiveConversationListAnswer(bt);else if(bt.type==="contactOccurrencesFromConversationListAnswer")this.receiveContactOccurrencesFromConversationListAnswer(bt);else if(bt.type==="conversationDetailReport")this.receiveConversationDetailReportAnswer(bt);else if(bt.type==="updatePresence")mt.log("updatePresence"),this.updatePresence(bt);else if(bt.type==="updateUserStatus")mt.log("updateUserStatus"),this.updateUserStatus(bt);else if(bt.type==="receiveMCUSessionId")mt.log("receiveMCUSessionId"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionId(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="joinSessionAnswer")mt.log("joinSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionAnswer(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="updateSessionAnswer")mt.log("updateSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(bt,{updateCalls:!0}):mt.warn("WebRTCClient is not created");else if(bt.type==="availableStreams")this.apiCCWebRTCClient?(mt.log("message availableStreams received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(bt.msg,"regular",function(mn,bn,un){yt.createMCUAvailableStreamEvent([bn],mn)}):mt.warn("WebRTCClient is not created")):mt.warn("WebRTCClient is not created");else if(bt.type==="availableReplay")this.apiCCWebRTCClient?(mt.log("message availableReplay received"),this.apiCCWebRTCClient?(Jt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableReplay(bt.msg),yt.createMCUAvailableReplayEvent(bt.msg,Jt)):mt.warn("WebRTCClient is not created")):mt.warn("WebRTCClient is not created");else if(bt.type==="availableComposite")this.apiCCWebRTCClient?(mt.log("message availableComposite received"),this.apiCCWebRTCClient?(Jt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(bt.msg,"composite"),yt.createMCUAvailableCompositeEvent(bt.msg,Jt)):mt.warn("WebRTCClient is not created")):mt.warn("WebRTCClient is not created");else if(bt.type==="onRemoveStream")this.apiCCWebRTCClient?(mt.log("message onRemoveStream received:",bt),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.removeMCUStream(bt.callId,bt.msg.id,bt.msg.reason):mt.warn("WebRTCClient is not created")):mt.warn("WebRTCClient is not created");else if(bt.type==="availableStreamsUpdate")this.apiCCWebRTCClient?(mt.log("message availableStreamsUpdate received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateAvailableStream(bt.msg,"regular",function(mn,bn,un,Tn){yt.createMCUAvailableStreamUpdateEvent([bn],mn)}):mt.warn("WebRTCClient is not created")):mt.warn("WebRTCClient is not created");else if(bt.type==="checkCallStatus")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCheckCallStatus(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="MCUSessionInvitation")mt.log("MCUSessionInvitation"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="MCUSessionInvitationToGroupChat")mt.log("MCUSessionInvitationToGroupChat"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="participantEjected")mt.log("participantEjected"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.participantEjected(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="recordingStarted")mt.log("recordingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStarted(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="recordingStopped")mt.log("recordingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStopped(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="recordingStreamAvailable")mt.log("recordingStreamAvailable"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStreamAvailable(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="streamingStarted")mt.log("streamingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStarted(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="streamingStopped")mt.log("streamingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStopped(bt):mt.warn("WebRTCClient is not created");else if(bt.type==="sessionId")mt.log("sessionId :"+bt.sessionId),this.sessionId=bt.sessionId,bt.JWTApzToken!==void 0&&this.handleJWTApzToken(bt.JWTApzToken);else if(bt.type==="JWTTokenRefreshAnswer")mt.log("JWTTokenRefreshAnswer"),bt.JWTApzToken!==void 0&&this.handleJWTApzToken(bt.JWTApzToken);else if(bt.type==="roomCreation")mt.log("roomCreation"),this.roomMgr.roomCreation(bt);else if(bt.type==="roomJoin")mt.log("roomJoined"),this.roomMgr.roomJoin(bt);else if(bt.type==="inviteInRoomStatus")mt.log("inviteInRoomStatus"),this.roomMgr.inviteInRoomStatus(bt);else if(bt.type==="contactListInRoom")mt.log("contactListInRoom"),this.roomMgr.onContactListInRoom(bt);else if(bt.type==="roomInvitation")mt.log("roomInvitation"),this.roomMgr.roomInvitation(bt);else if(bt.type==="roomMessage")mt.log("roomMessage"),this.roomMgr.receiveRoomMessage(bt);else if(bt.type==="roomMemberUpdate")mt.log("roomMemberUpdate"),this.roomMgr.roomMemberUpdate(bt);else if(bt.type==="agentReconnect"){var fn=this.apiCCWebRTCClient.webRTCClient.findCallWithCallId(bt.callId);fn!=null&&fn.getUserMediaOnCall()}else bt.type==="sequence"?(mt.log("Sequential message"),this.handleSequentialMessage(bt)):bt.type==="Ack"?mt.log("Ack received"):bt.type==="receipt"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processReceipt(bt):bt.type==="error"?(mt.log("error received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processError(bt):yt.createErrorEvent(bt.errorInfo,bt.errorCode,bt.callId,bt.roomId,null,null,bt.convId)):bt.type==="enterpriseConfig"?(mt.log("enterpriseConfig received"),this.handleEnterpriseConfigMessage(bt)):bt.type==="AIEMessage"?(mt.log("AIEMessage received"),this.handleAIEMessage(bt)):bt.type==="cloudEventOccurred"?this.processCloudEventOccurred(bt):mt.log("Error : No type for this message")},this.handleSequentialMessage=function(bt){if(bt.id!==void 0&&bt.packetNum!==void 0&&bt.totalPacketsNum!==void 0&&bt.data!==void 0){mt.debug("Handle sequential message packet "+bt.packetNum+"/"+bt.totalPacketsNum,bt);var Nt=[];if(Pt.sequentialMessagesStorage[bt.id]!==void 0&&(Nt=Pt.sequentialMessagesStorage[bt.id]),Nt.push(bt),Pt.sequentialMessagesStorage[bt.id]=Nt,Nt.length===bt.totalPacketsNum){Nt.sort(function(Jt,hn){return Jt.packetNum-hn.packetNum});var Ft="";Nt.forEach(function(Jt){Ft+=Jt.data}),delete Pt.sequentialMessagesStorage[bt.id];var Ut=null;try{Ut=JSON.parse(Ft)}catch(Jt){return void mt.error("Error : can't parse sequential message JSON :",Jt)}if(!Ut)return void mt.error("Error : can't restore sequential message, it's null");mt.debug("Restored sequential message :",Ft),Pt.processSignalingMessage(Ut)}}else mt.error("Error : sequential message is inconsistent :",bt)},this.handleEnterpriseConfigMessage=function(bt){if(mt.debug("handleEnterpriseConfigMessage :",bt),(0,at.ki)(bt,"sentry","boolean")&&bt.sentry===!0){var Nt;Nt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!=="https:"?"http":"https",apiCC.loadSentry(apiCC.initApiKey,Nt)}if((0,at.ki)(bt,"customJson","string")&&bt.customJson!=="")try{mt.debug("customJson :",bt.customJson),bt.customJson=JSON.parse(bt.customJson)}catch(Ft){mt.error(Ft)}if((0,at.ki)(bt,"iceServers","string")&&bt.iceServers!=="")try{mt.debug("iceServers :",bt.iceServers),bt.iceServers=JSON.parse(bt.iceServers),Pt.apiCCWebRTCClient.setPcConfig(bt.iceServers)}catch(Ft){mt.error(Ft)}(0,at.ki)(bt,"logLevel","string")&&bt.logLevel!==""&&!isNaN(parseInt(bt.logLevel))&&apiRTC.setLogLevel(parseInt(bt.logLevel)),(0,at.ki)(bt,"ccs","object")&&(Pt.ccsInfo=Object.assign({},bt.ccs))},this.handleAIEMessage=function(bt){switch(mt.debug("handleAIEMessage :",bt),bt.detail){case"modelLoaded":if(apiCC!==void 0&&bt.userMediaStreamId!==void 0){var Nt=apiCC.getUserMediaStream(bt.userMediaStreamId).mediaFilterManager;for(var Ft in Nt.filters)Nt.filters[Ft]!==void 0&&Nt.filters[Ft].streamAIE!==null&&Nt.filters[Ft].streamAIE.modelLoaded(bt)}break;case"unknownModelName":mt.error("Unknown model name :",bt.modelName);break;case"loadModelError":mt.error("Error while loading model :",bt.info);break;default:mt.debug("Unknown detail :",bt.detail)}},this.handleJWTApzToken=function(bt){mt.debug("handleJWTApzToken :",bt),Pt.JWTApzToken=bt,Pt.cloudIsSecured===!0?(mt.debug("Setting JWTApzToken on cloudAPI"),apiCC.CloudApi.setJWTApzToken(Pt.JWTApzToken)):mt.debug("JWTApzToken is not set on cloudAPI"),Pt.JWTApzTokentimeOutId!==-1&&clearTimeout(Pt.JWTApzTokentimeOutId),Pt.JWTApzTokentimeOutId=setTimeout(function(){var Nt=JSON.stringify({type:"JWTTokenRefreshRequest"});mt.log("C->S: "+Nt),apiCC.session.channel.socket.emit("JWTTokenRefreshRequest",Nt)},Pt.JWTApzTokenRefreshTimer)},this.fetchUserData=function(bt){var Nt,Ft;mt.debug("fetchUserData"),Nt={type:"fetchUserData",id:bt.id,apiKey:bt.apiKey,timeout:bt.timeout},Ft=JSON.stringify(Nt),mt.log("C->S: "+Ft),this.channel.socket.emit("fetchUserData",Ft)}}},7323:(nt,it,s)=>{s.d(it,{q:()=>$t}),s(4363),s(9653),s(3710),s(1539),s(9714),s(561),s(2564),s(4812),s(8309),s(9753),s(9554),s(4747),s(8674),s(7042),s(1038),s(8783),s(4916),s(2526),s(1817),s(2165),s(6992),s(3948);var et=s(1549),rt=s(5945),ot=s(4708);function gt(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}s(2479),s(9070),s(8304),s(489),s(2419),s(8011);var dt=function(){function xt(){(function(an,qt){if(!(an instanceof qt))throw new TypeError("Cannot call a class as a function")})(this,xt)}var Vt,Zt;return Vt=xt,(Zt=[{key:"applyFilter",value:function(an,qt){}},{key:"release",value:function(){}}])&&gt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function pt(xt,Vt){return function(Zt){if(Array.isArray(Zt))return Zt}(xt)||function(Zt,an){var qt=Zt==null?null:typeof Symbol<"u"&&Zt[Symbol.iterator]||Zt["@@iterator"];if(qt!=null){var tn,gn,rn=[],pn=!0,In=!1;try{for(qt=qt.call(Zt);!(pn=(tn=qt.next()).done)&&(rn.push(tn.value),!an||rn.length!==an);pn=!0);}catch(Pn){In=!0,gn=Pn}finally{try{pn||qt.return==null||qt.return()}finally{if(In)throw gn}}return rn}}(xt,Vt)||function(Zt,an){if(Zt){if(typeof Zt=="string")return st(Zt,an);var qt=Object.prototype.toString.call(Zt).slice(8,-1);return qt==="Object"&&Zt.constructor&&(qt=Zt.constructor.name),qt==="Map"||qt==="Set"?Array.from(Zt):qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt)?st(Zt,an):void 0}}(xt,Vt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function st(xt,Vt){(Vt==null||Vt>xt.length)&&(Vt=xt.length);for(var Zt=0,an=new Array(Vt);Zt<Vt;Zt++)an[Zt]=xt[Zt];return an}function ht(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}function at(xt,Vt){var Zt;return Zt=(xt/=255)<.09804?.01894124847001224*xt:xt<.2?.5695370733621028*(xt-.09804)+.001857:xt<.298?1.292329661362709*(xt-.2)+.05993:xt<.4?1.5339348764221266*(xt-.298)+.1866:xt<.498?1.5697674418604652*(xt-.4)+.343:xt<.6?1.570223617104747*(xt-.498)+.4969:xt<.698?1.536107711138311*(xt-.6)+.657:xt<.8?1.2995292271479013*(xt-.698)+.8076:xt<.898?.5868013055895552*(xt-.8)+.9401:.023568065908199296*(xt-.898)+.9976,255*Math.pow(Zt,Vt)}function ut(xt,Vt){return 255*Math.pow(xt/255,Vt)}s(9575),s(9743),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7327);var ft=function(){function xt(an,qt,tn){(function(gn,rn){if(!(gn instanceof rn))throw new TypeError("Cannot call a class as a function")})(this,xt),this.image=an,this.width=qt,this.height=tn,this.length=this.width*this.height}var Vt,Zt;return Vt=xt,Zt=[{key:"mean",value:function(){var an=arguments.length>0&&arguments[0]!==void 0&&arguments[0],qt=0,tn=0,gn=0;if(an)for(var rn=0;rn<this.length;rn++)qt+=Math.pow(this.image.data[4*rn+0],2)/(255*this.length),tn+=Math.pow(this.image.data[4*rn+1],2)/(255*this.length),gn+=Math.pow(this.image.data[4*rn+2],2)/(255*this.length);else for(var pn=0;pn<this.length;pn++)qt+=this.image.data[4*pn+0]/this.length,tn+=this.image.data[4*pn+1]/this.length,gn+=this.image.data[4*pn+2]/this.length;return[qt,tn,gn]}},{key:"mad",value:function(){var an=arguments.length>0&&arguments[0]!==void 0&&arguments[0],qt=this.mean(an),tn=pt(qt,3),gn=tn[0],rn=tn[1],pn=tn[2],In=0,Pn=0,_n=0;if(an)for(var Ln=0;Ln<this.length;Ln++)In+=Math.abs(Math.pow(this.image.data[4*Ln+0],2)/255-gn)/this.length,Pn+=Math.abs(Math.pow(this.image.data[4*Ln+1],2)/255-rn)/this.length,_n+=Math.abs(Math.pow(this.image.data[4*Ln+2],2)/255-pn)/this.length;else for(var Vn=0;Vn<this.length;Vn++)In+=Math.abs(this.image.data[4*Vn+0]-gn)/this.length,Pn+=Math.abs(this.image.data[4*Vn+1]-rn)/this.length,_n+=Math.abs(this.image.data[4*Vn+2]-pn)/this.length;return[In,Pn,_n]}},{key:"std",value:function(){var an=arguments.length>0&&arguments[0]!==void 0&&arguments[0],qt=this.mean(an),tn=pt(qt,3),gn=tn[0],rn=tn[1],pn=tn[2],In=0,Pn=0,_n=0;if(an)for(var Ln=0;Ln<this.length;Ln++)In+=Math.pow(Math.pow(this.image.data[4*Ln+0],2)/255-gn,2)/this.length,Pn+=Math.pow(Math.pow(this.image.data[4*Ln+1],2)/255-rn,2)/this.length,_n+=Math.pow(Math.pow(this.image.data[4*Ln+2],2)/255-pn,2)/this.length;else for(var Vn=0;Vn<this.length;Vn++)In+=Math.pow(this.image.data[4*Vn+0]-gn,2)/this.length,Pn+=Math.pow(this.image.data[4*Vn+1]-rn,2)/this.length,_n+=Math.pow(this.image.data[4*Vn+2]-pn,2)/this.length;return[In=Math.sqrt(In),Pn=Math.sqrt(Pn),_n=Math.sqrt(_n)]}},{key:"blur",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,qt=new OffscreenCanvas(this.width,this.height),tn=qt.getContext("2d");qt.width=this.width,qt.height=this.height,tn.putImageData(this.image,0,0),tn.filter="blur("+an+"px)",tn.drawImage(qt,0,0);var gn=tn.getImageData(0,0,this.width,this.height);return gn}},{key:"threshold",value:function(an,qt,tn){var gn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,rn=arguments.length>4&&arguments[4]!==void 0&&arguments[4],pn=new ImageData(this.image.data,this.width,this.height),In=0;if(rn){var Pn=In;In=gn,gn=Pn}for(var _n=0;_n<this.length;_n++)this.image.data[4*_n+0]<an?pn.data[4*_n+0]=In:pn.data[4*_n+0]=gn,this.image.data[4*_n+1]<qt?pn.data[4*_n+1]=In:pn.data[4*_n+1]=gn,this.image.data[4*_n+2]<tn?pn.data[4*_n+2]=In:pn.data[4*_n+2]=gn;return pn}},{key:"powerFilter",value:function(an){var qt=new Uint8ClampedArray(4*this.length);if(an===1)return this.image;for(var tn=0;tn<this.length;tn++)qt[4*tn+0]=ut(this.image.data[4*tn+0],an),qt[4*tn+1]=ut(this.image.data[4*tn+1],an),qt[4*tn+2]=ut(this.image.data[4*tn+2],an),qt[4*tn+3]=255;return new ImageData(qt,this.width,this.height)}},{key:"sigmoidFilter",value:function(an){for(var qt=new Uint8ClampedArray(4*this.length),tn=0;tn<this.length;tn++)qt[4*tn+0]=at(this.image.data[4*tn+0],an),qt[4*tn+1]=at(this.image.data[4*tn+1],an),qt[4*tn+2]=at(this.image.data[4*tn+2],an),qt[4*tn+3]=255;return new ImageData(qt,this.width,this.height)}},{key:"weightedSum",value:function(an,qt){for(var tn=new Uint8ClampedArray(4*this.length),gn=0;gn<this.length;gn++)tn[4*gn+0]=qt*this.image.data[4*gn+0]+(1-qt)*an.data[4*gn+0],tn[4*gn+1]=qt*this.image.data[4*gn+1]+(1-qt)*an.data[4*gn+1],tn[4*gn+2]=qt*this.image.data[4*gn+2]+(1-qt)*an.data[4*gn+2],tn[4*gn+3]=255;return new ImageData(tn,this.width,this.height)}},{key:"weightedSumMask",value:function(an,qt){for(var tn=new Uint8ClampedArray(4*this.length),gn=0;gn<this.length;gn++){var rn=qt.data[4*gn]/255;tn[4*gn+0]=rn*this.image.data[4*gn+0]+(1-rn)*an.data[4*gn+0],tn[4*gn+1]=rn*this.image.data[4*gn+1]+(1-rn)*an.data[4*gn+1],tn[4*gn+2]=rn*this.image.data[4*gn+2]+(1-rn)*an.data[4*gn+2],tn[4*gn+3]=255}return new ImageData(tn,this.width,this.height)}}],Zt&&ht(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function mt(xt,Vt){if(!(xt instanceof Vt))throw new TypeError("Cannot call a class as a function")}function yt(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}var At=function(){function xt(){var an=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],qt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,gn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;mt(this,xt),this.blurMask=an,this.smoothBorder=qt,this.blurFactor=tn,this.smoothingFactor=gn,this.maskImage=null,this.net=null}var Vt,Zt;return Vt=xt,Zt=[{key:"loadModel",value:function(){var an=this;return new Promise(function(qt,tn){bodyPix.load({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}).then(function(gn){an.net=gn,qt()})})}},{key:"computeMask",value:function(an){var qt=this;return new Promise(function(tn,gn){qt.net.segmentPerson(an).then(function(rn){qt.width=rn.width,qt.height=rn.height,qt.length=qt.width*qt.height;for(var pn=new Uint8ClampedArray(4*qt.length),In=0;In<qt.length;In++){var Pn=255*rn.data[In];pn[4*In+0]=Pn,pn[4*In+1]=Pn,pn[4*In+2]=Pn,pn[4*In+3]=255}var _n=document.createElement("canvas"),Ln=_n.getContext("2d");_n.width=qt.width,_n.height=qt.height;var Vn=new ImageData(pn,qt.width,qt.height);if(Ln.putImageData(Vn,0,0),qt.blurMask&&(Ln.filter="blur("+qt.blurFactor+"px)"),Ln.drawImage(_n,0,0,qt.width,qt.height),qt.maskImage=Ln.getImageData(0,0,qt.width,qt.height),qt.blurMask)if(qt.smoothBorder){if(qt.smoothingFactor!==-1){var or=new ft(qt.maskImage,qt.width,qt.height);qt.maskImage=or.sigmoidFilter(qt.smoothingFactor)}}else{var hr=new ft(qt.maskImage,qt.width,qt.height);qt.maskImage=hr.threshold(40,40,40,255,!1)}tn(qt.maskImage)})})}},{key:"applyTransparency",value:function(an){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;qt===null&&(qt=this.maskImage);for(var tn=new Uint8ClampedArray(an.width*an.height*4),gn=0;gn<an.width*an.height;gn++)tn[4*gn+0]=an.data[4*gn+0],tn[4*gn+1]=an.data[4*gn+1],tn[4*gn+2]=an.data[4*gn+2],tn[4*gn+3]=qt.data[4*gn];var rn=new ImageData(tn,an.width,an.height);return rn}},{key:"superposeImages",value:function(an,qt,tn){var gn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;gn===null&&(gn=this.maskImage);var rn=new ft(qt,an.width,an.height),pn=rn.weightedSumMask(tn,gn);return pn}},{key:"setBackground",value:function(an,qt){var tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return this.superposeImages(an,an,qt,tn)}},{key:"blurBackground",value:function(an){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,gn=new ft(an,an.width,an.height),rn=gn.blur(qt);return this.setBackground(an,rn,tn)}}],Zt&&yt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function wt(xt,Vt){if(!(xt instanceof Vt))throw new TypeError("Cannot call a class as a function")}function Pt(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}var Rt=et.Y.get("StreamSegmentation"),kt=apiCC.myWebRTC_Event,bt=function(){function xt(an){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:480,tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:360,gn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;wt(this,xt),this.mediaStream=an,this.backgroundMode="none",this.backgroundBlurFactor=10,this.canvasWidth=qt,this.canvasHeight=tn,this.length=this.canvasWidth*this.canvasHeight,this.userMediaStreamId=gn;for(var rn=new Uint8ClampedArray(4*this.length),pn=0;pn<4*this.length;pn++)rn[pn]=255;this.backgroundImage=new ImageData(rn,this.canvasWidth,this.canvasHeight);var In=!0,Pn=!0,_n=5,Ln=-1;this.backSub=new At(In,Pn,_n,Ln),this.modelLoaded=!1,this.maskStreamLaunched=!1,this.backgroundSubtractionActivated=!1}var Vt,Zt;return Vt=xt,Zt=[{key:"setBackgroundMode",value:function(an){this.backgroundMode=an}},{key:"setBackgroundImage",value:function(an){this.backgroundImage=an}},{key:"setBackgroundBlurFactor",value:function(an){this.backgroundBlurFactor=an}},{key:"loadModel",value:function(){Rt.debug("Loading model");var an=this;return new Promise(function(qt,tn){an.backSub.loadModel().then(function(gn){an.modelLoaded=!0,Rt.debug("Model loaded"),qt()})})}},{key:"getMaskStream",value:function(){var an=document.createElement("video");an.srcObject=this.mediaStream;var qt=document.createElement("canvas"),tn=qt.getContext("2d");qt.width=this.canvasWidth,qt.height=this.canvasHeight;var gn=document.createElement("canvas"),rn=gn.getContext("2d");gn.width=this.canvasWidth,gn.height=this.canvasHeight;var pn=this;an.addEventListener("loadeddata",function(){an.play(),requestAnimationFrame(mr),pn.modelLoaded?Vn=!0:pn.loadModel().then(function(yr){Vn=!0})});for(var In=!0,Pn=new Uint8ClampedArray(4*this.length),_n=0;_n<4*this.length;_n++)Pn[_n]=255;var Ln=new ImageData(Pn,this.canvasWidth,this.canvasHeight);rn.putImageData(Ln,0,0);var Vn=!1,or=0,hr=!0;function mr(){tn.drawImage(an,0,0,qt.width,qt.height);var yr=tn.getImageData(0,0,qt.width,qt.height);if(pn.modelLoaded&&In&&Vn&&(hr||pn.backgroundMode!=="none")){hr&&(hr=!1);var Rr=new Date;In=!1,pn.backSub.computeMask(yr).then(function(Or){In=!0,1/((new Date-Rr)/1e3)<1&&++or>=10&&(Vn=!1,Rt.error("The segmentation process cannot be handled"),kt.createBackgroundSubstractionStopComputeTimeEvent(pn.userMediaStreamId))})}pn.modelLoaded&&pn.backSub.maskImage!==null&&Vn?rn.putImageData(pn.backSub.maskImage,0,0):rn.putImageData(Ln,0,0),pn.continueMaskComputation?requestAnimationFrame(mr):(Rt.debug("Mask computation stoped"),pn.continueMaskComputation=!0)}return this.continueMaskComputation=!0,this.maskMediaStream=gn.captureStream(),this.maskStreamLaunched=!0,this.maskMediaStream}},{key:"activateBackgroundSubtraction",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(an!==null&&this.setBackgroundMode(an),this.backgroundSubtractionActivated)return this.processedMediaStream;this.maskStreamLaunched||this.getMaskStream();var qt=document.createElement("video");qt.srcObject=this.mediaStream;var tn=document.createElement("video");tn.srcObject=this.maskMediaStream;var gn=document.createElement("canvas"),rn=gn.getContext("2d");gn.width=this.canvasWidth,gn.height=this.canvasHeight;var pn=document.createElement("canvas"),In=pn.getContext("2d");pn.width=this.canvasWidth,pn.height=this.canvasHeight,this.continueBackgroundSubtraction=!0;var Pn=this;function _n(){rn.drawImage(qt,0,0,gn.width,gn.height);var Ln=rn.getImageData(0,0,gn.width,gn.height);if(Pn.backgroundMode==="none")In.putImageData(Ln,0,0);else{rn.drawImage(tn,0,0,gn.width,gn.height);var Vn=rn.getImageData(0,0,gn.width,gn.height),or=null;switch(Pn.backgroundMode){case"image":or=Pn.backSub.setBackground(Ln,Pn.backgroundImage,Vn);break;case"blur":default:or=Pn.backSub.blurBackground(Ln,Pn.backgroundBlurFactor,Vn);break;case"transparent":or=Pn.backSub.applyTransparency(Ln,Vn)}In.putImageData(or,0,0)}Pn.continueBackgroundSubtraction?requestAnimationFrame(_n):(Rt.debug("Mask application stoped"),Pn.continueBackgroundSubtraction=!0)}return qt.addEventListener("loadeddata",function(){qt.play(),tn.play(),requestAnimationFrame(_n)}),this.processedMediaStream=pn.captureStream(30),this.backgroundSubtractionActivated=!0,this.processedMediaStream}},{key:"deactivateBackgroundSubtraction",value:function(){this.setBackgroundMode("none"),this.processedMediaStream=this.mediaStream,this.backgroundSubtractionActivated=!1,this.continueBackgroundSubtraction=!1,this.maskMediaStream=null,this.maskStreamLaunched=!1,this.continueMaskComputation=!1}}],Zt&&Pt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function Nt(xt){return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},Nt(xt)}function Ft(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}function Ut(xt,Vt){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,an){return Zt.__proto__=an,Zt},Ut(xt,Vt)}function Jt(xt,Vt){if(Vt&&(Nt(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(xt)}function hn(xt){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},hn(xt)}var Xt=et.Y.get("OldMediaFilterBackgroundSubtraction"),zt=function(xt){(function(rn,pn){if(typeof pn!="function"&&pn!==null)throw new TypeError("Super expression must either be null or a function");rn.prototype=Object.create(pn&&pn.prototype,{constructor:{value:rn,writable:!0,configurable:!0}}),Object.defineProperty(rn,"prototype",{writable:!1}),pn&&Ut(rn,pn)})(gn,xt);var Vt,Zt,an,qt,tn=(an=gn,qt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var rn,pn=hn(an);if(qt){var In=hn(this).constructor;rn=Reflect.construct(pn,arguments,In)}else rn=pn.apply(this,arguments);return Jt(this,rn)});function gn(){var rn;return function(pn,In){if(!(pn instanceof In))throw new TypeError("Cannot call a class as a function")}(this,gn),(rn=tn.call(this)).streamSegmentation=null,rn.userMediaStreamId=null,rn}return Vt=gn,(Zt=[{key:"applyFilter",value:function(rn,pn){var In=this;Xt.debug("Apply filter with descriptor:",pn);var Pn=rn.getAudioTracks();Pn.length>0&&Pn.forEach(function(Vn){rn.removeTrack(Vn)});var _n=rn.getVideoTracks();if(_n.length===0)return Promise.reject("MediaStream has no video tracks");var Ln=_n[0].getSettings();return pn.options!==void 0&&pn.options.userMediaStreamId!==void 0&&(this.userMediaStreamId=pn.options.userMediaStreamId),this.streamSegmentation=new bt(rn,Ln.width,Ln.height,this.userMediaStreamId),this.loadTensorflow().then(function(Vn){return In.loadTensorflowModel()}).then(function(Vn){return new Promise(function(or,hr){Xt.debug("Model loading..."),In.streamSegmentation.loadModel().then(function(mr){Xt.debug("Model loaded");var yr=null;pn.options!==void 0&&pn.options.backgroundMode!==void 0&&(pn.options.backgroundMode==="image"&&pn.options.image instanceof ImageData&&In.streamSegmentation.setBackgroundImage(pn.options.image),yr=pn.options.backgroundMode);var Rr=In.streamSegmentation.activateBackgroundSubtraction(yr);Pn.forEach(function(Or){Rr.addTrack(Or)}),or(Rr)})})}).catch(function(Vn){return Promise.reject(Vn)})}},{key:"release",value:function(){this.streamSegmentation.deactivateBackgroundSubtraction(),this.streamSegmentation=null}},{key:"loadTensorflow",value:function(){return Xt.debug("Tensorflow script loading..."),new Promise(function(rn,pn){var In={async:!0,numRetries:20,reqdelay:200,success:function(){Xt.debug("Tensorflow script loaded"),rn()},error:function(Pn){pn("Resources loading failed, depsNotFound: "+Pn)},retrycb:function(Pn,_n){Xt.warn("Tensorflow loading retry :"+Pn+" ,delay before retry :"+_n)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",In)})}},{key:"loadTensorflowModel",value:function(){return Xt.debug("Tensorflow model script loading..."),new Promise(function(rn,pn){var In={async:!0,numRetries:20,reqdelay:200,success:function(){Xt.debug("Tensorflow model script loaded"),rn()},error:function(Pn){pn("Resources loading failed, depsNotFound: "+Pn)},retrycb:function(Pn,_n){Xt.warn("Tensorflow model loading retry :"+Pn+" ,delay before retry :"+_n)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",In)})}}])&&Ft(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),gn}(dt);function cn(xt,Vt){var Zt=typeof Symbol<"u"&&xt[Symbol.iterator]||xt["@@iterator"];if(!Zt){if(Array.isArray(xt)||(Zt=function(pn,In){if(pn){if(typeof pn=="string")return vn(pn,In);var Pn=Object.prototype.toString.call(pn).slice(8,-1);return Pn==="Object"&&pn.constructor&&(Pn=pn.constructor.name),Pn==="Map"||Pn==="Set"?Array.from(pn):Pn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pn)?vn(pn,In):void 0}}(xt))||Vt&&xt&&typeof xt.length=="number"){Zt&&(xt=Zt);var an=0,qt=function(){};return{s:qt,n:function(){return an>=xt.length?{done:!0}:{done:!1,value:xt[an++]}},e:function(pn){throw pn},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tn,gn=!0,rn=!1;return{s:function(){Zt=Zt.call(xt)},n:function(){var pn=Zt.next();return gn=pn.done,pn},e:function(pn){rn=!0,tn=pn},f:function(){try{gn||Zt.return==null||Zt.return()}finally{if(rn)throw tn}}}}function vn(xt,Vt){(Vt==null||Vt>xt.length)&&(Vt=xt.length);for(var Zt=0,an=new Array(Vt);Zt<Vt;Zt++)an[Zt]=xt[Zt];return an}function Sn(xt){return(xt[2]-xt[0])*(xt[3]-xt[1])}function fn(xt,Vt){var Zt=xt[0],an=xt[1],qt=xt[2],tn=xt[3],gn=Vt[0],rn=Vt[1],pn=Vt[2],In=Vt[3],Pn=Sn([Math.max(Zt,gn),Math.max(an,rn),Math.min(qt,pn),Math.min(tn,In)]);return Pn/(Sn(xt)+Sn(Vt)-Pn)}function mn(xt){var Vt,Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.2,an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,qt=xt.yolo,tn={yolo:[]},gn=cn(qt);try{for(gn.s();!(Vt=gn.n()).done;){var rn=Vt.value,pn=rn.objectness;if(pn>Zt)if(an!==null){var In,Pn=rn.bounding_box,_n=Sn(Pn),Ln=0,Vn=null,or=0,hr=cn(qt);try{for(hr.s();!(In=hr.n()).done;){var mr=In.value,yr=mr.bounding_box,Rr=fn(Pn,yr);Rr!==1&&Rr>Ln&&(Ln=Rr,Vn=mr,or=Sn(mr.bounding_box))}}catch(Or){hr.e(Or)}finally{hr.f()}(Vn===null||Ln<an||or<_n)&&tn.yolo.push(rn)}else tn.yolo.push(rn)}}catch(Or){gn.e(Or)}finally{gn.f()}return tn}function bn(xt,Vt){var Zt,an=xt.yolo,qt={yolo:[]},tn=cn(Vt.yolo);try{for(tn.s();!(Zt=tn.n()).done;){var gn,rn=Zt.value,pn=rn.class,In=rn.bounding_box,Pn=rn.objectness,_n=Pn,Ln=cn(an);try{for(Ln.s();!(gn=Ln.n()).done;){var Vn=gn.value;if(Vn.class===pn){var or=fn(Vn.bounding_box,In);or>0&&(_n=Pn+.75*(1-Pn)*or*Vn.objectness)}}}catch(mr){Ln.e(mr)}finally{Ln.f()}var hr={class:pn,objectness:_n,bounding_box:In};qt.yolo.push(hr)}}catch(mr){tn.e(mr)}finally{tn.f()}return qt}function un(xt,Vt){return function(Zt){if(Array.isArray(Zt))return Zt}(xt)||function(Zt,an){var qt=Zt==null?null:typeof Symbol<"u"&&Zt[Symbol.iterator]||Zt["@@iterator"];if(qt!=null){var tn,gn,rn=[],pn=!0,In=!1;try{for(qt=qt.call(Zt);!(pn=(tn=qt.next()).done)&&(rn.push(tn.value),!an||rn.length!==an);pn=!0);}catch(Pn){In=!0,gn=Pn}finally{try{pn||qt.return==null||qt.return()}finally{if(In)throw gn}}return rn}}(xt,Vt)||function(Zt,an){if(Zt){if(typeof Zt=="string")return Tn(Zt,an);var qt=Object.prototype.toString.call(Zt).slice(8,-1);return qt==="Object"&&Zt.constructor&&(qt=Zt.constructor.name),qt==="Map"||qt==="Set"?Array.from(Zt):qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt)?Tn(Zt,an):void 0}}(xt,Vt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tn(xt,Vt){(Vt==null||Vt>xt.length)&&(Vt=xt.length);for(var Zt=0,an=new Array(Vt);Zt<Vt;Zt++)an[Zt]=xt[Zt];return an}function kn(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}s(3123),s(4723),s(2472),s(6699),s(2023),s(9720),s(9600),s(2707),s(1058);var xn=et.Y.get("StreamAIE"),An=apiCC.myWebRTC_Event,En=function(){function xt(an,qt){(function(gn,rn){if(!(gn instanceof rn))throw new TypeError("Cannot call a class as a function")})(this,xt),this.mediaStream=an,this.descriptorOptions=qt,this.modelName=qt.modelName,this.maxBoxes=qt.maxBoxes||null,this.scoreThresh=qt.scoreThresh||null,this.forceReload=qt.forceReload||!1,this.classFilter=this.descriptorOptions.classFilter||"all",this.drawingConfig=this.descriptorOptions.drawingConfig||{},this.userMediaStreamId=qt.userMediaStreamId,this.clientId=qt.clientId;var tn=this.mediaStream.getVideoTracks();tn.length===0&&(this.mediaSettings=null),this.mediaSettings=tn[0].getSettings(),this.canvasWidth=this.mediaSettings.width||480,this.canvasHeight=this.mediaSettings.height||480,this.length=this.canvasWidth*this.canvasHeight,this.snapshot=!1,this.log=!1,this.minSnapshotPeriod=0,this.memoryTime=0,this.lastAnnotations={yolo:[]},this.lastRawAnnotations={yolo:[]},this.objectDetectionActivated=!1,this.drawAnnotationsBool=!1,this.aieUrl=null,this.token=null,this.loadedModel=null,this.promises=[],this.isReleased=!1,this.resinzingSize=416,this.callId=null}var Vt,Zt;return Vt=xt,Zt=[{key:"activateLogs",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.memoryTime=an,this.log=!0}},{key:"stopLogs",value:function(){this.log=!1,this.memoryTime=0}},{key:"activateSnapshots",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.snapshot=!0,this.minSnapshotPeriod=an}},{key:"stopSnapshots",value:function(){this.snapshot=!1,this.minSnapshotPeriod=0}},{key:"activateAnnotations",value:function(){this.lastAnnotations={yolo:[]},this.drawAnnotationsBool=!0,this.getAnnotations()}},{key:"stopAnnotations",value:function(){this.drawAnnotationsBool=!1}},{key:"getAnnotations",value:function(){var an=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],qt=document.createElement("video");qt.srcObject=this.mediaStream;var tn=document.createElement("canvas"),gn=tn.getContext("2d");tn.width=this.canvasWidth,tn.height=this.canvasHeight;var rn=document.createElement("canvas"),pn=rn.getContext("2d");rn.width=this.canvasWidth,rn.height=this.canvasHeight;var In=this;function Pn(Sr,Nr){for(var wr=Sr.split(","),_r=wr[0].match(/:(.*?);/)[1],Ur=atob(wr[1]),Hr=Ur.length,na=new Uint8Array(Hr);Hr--;)na[Hr]=Ur.charCodeAt(Hr);return new File([na],Nr,{type:_r})}qt.addEventListener("loadeddata",function(){qt.play(),requestAnimationFrame(function(){Jr(In.aieUrl,In.token,In.loadedModel)})});var _n=!0,Ln={},Vn=null,or=new Date;function hr(Sr,Nr,wr){var _r=Pn(tn.toDataURL("image/jpeg")),Ur={pipelineCallId:In.getOrCreatePipeline(),file:_r,transferType:"plugin",pluginName:"httpPost",pluginData:{url:Sr,headers:{Authorization:"Token "+Nr},formData:{file:"$DATA",angled:1,model:wr,size:In.resinzingSize}}};apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,Ur,null,{success:function(Hr){var na=(new Date-Vn)/1e3,Kn=1/na;return xn.debug("Computation time:",na,"s ,FPS:",Kn),Jr(Sr,Nr,wr),Hr.data.error!==void 0?xn.error("http post error :",Hr.data.error):Hr.data.result===void 0?xn.error("An error occured when trying to annotate a snapshot"):void mr(Hr.data)},failure:function(Hr,na,Kn){xn.error("## pushData:failure",na,Kn,Hr)}})}function mr(Sr){var Nr=Sr.result;In.isReleased||(In.lastRawAnnotations=Nr,Nr.yolo!==void 0&&Rr(Nr),Nr.ocr===void 0&&Nr.codes===void 0||yr(Nr))}function yr(Sr){In.lastAnnotations={ocr:Sr.ocr,codes:Sr.codes};var Nr="";if(Sr.ocr.length>1){Nr+="Words found : ";for(var wr=0;wr<Sr.ocr.length;wr++)Nr=Nr+Sr.ocr[wr].text+", "}if(Sr.codes.length>1){Nr+="Codes found : ";for(var _r=0;_r<Sr.codes.length;_r++)Nr=Nr+Sr.codes[_r].code+", "}Or(Nr),Qr()}function Rr(Sr){Sr.yolo.length>0&&(an&&(Sr=bn(In.lastRawAnnotations,Sr)),In.scoreThresh!==null&&(Sr=mn(Sr,In.scoreThresh)));for(var Nr={yolo:[]},wr={},_r=In.classFilter.split(", "),Ur=0;Ur<Sr.yolo.length;Ur++){var Hr=Sr.yolo[Ur];(In.classFilter==="all"||_r.includes(Hr.class))&&(Hr.class in wr||(wr[Hr.class]=0),wr[Hr.class]+=1,Nr.yolo.push(Hr))}if(Sr=Nr,In.lastAnnotations=Sr,In.log||In.snapshot){for(var na=new Date,Kn=[],sr=0,qn=Object.entries(wr);sr<qn.length;sr++){var vr=un(qn[sr],2),Jn=vr[0],$r=vr[1];Kn.push($r+" "+Jn+"(s) detected."),(!(Jn in Ln)||na-Ln[Jn]>1e3*In.memoryTime)&&(Ln[Jn]=na)}var xr=Kn.sort().join(" ");xr!==""&&(Or(xr),Qr())}}function Or(Sr){In.log&&An.createAIELogEvent(In.userMediaStreamId,Sr)}function Qr(){if(In.snapshot){var Sr=new Date,Nr=gn.getImageData(0,0,tn.width,tn.height);if(Sr-or>1e3*In.minSnapshotPeriod){pn.putImageData(Nr,0,0),In.drawAnnotations(In.lastAnnotations,pn,In.drawingConfig);var wr=rn.toDataURL("image/png"),_r=new Image;_r.src=wr,An.createAIESnapshotEvent(In.userMediaStreamId,_r),or=Sr}}}function Jr(Sr,Nr,wr){gn.drawImage(qt,0,0,tn.width,tn.height),(_n||In.drawAnnotationsBool)&&(_n&&(_n=!1),Vn=new Date,hr(Sr,Nr,wr))}}},{key:"getOrCreatePipeline",value:function(){if(this.callId!==null)return this.callId;var an=this;return this.callId=apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,{transferType:"pipeline"},null,{failure:function(qt){qt==="dataChannelClosed"?(xn.debug("dataChannelClosed : no activity on dataChannel timeout"),an.callId=null):xn.error("dataChannel failure",qt)}}),this.callId}},{key:"drawAnnotations",value:function(an,qt){var tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},gn=tn.color||"#ED5131",rn=tn.textColor||"#FFFFFF",pn=tn.colorMap||null,In=Object.prototype.hasOwnProperty.call(tn,In)?tn.lineWidth:3,Pn=tn.font||"15px Arial";if(an.yolo!==void 0&&an.yolo.length>0)for(var _n=0;_n<an.yolo.length;_n++){var Ln=an.yolo[_n],Vn=Ln.bounding_box,or=Vn[0],hr=Vn[1],mr=Vn[2],yr=Vn[3];this.modelName==="mask_augmented_refined"&&(mr-=or,yr-=hr);var Rr=gn;pn!==null&&Ln.class in pn&&(Rr=pn[Ln.class]),qt.lineWidth=In,qt.strokeStyle=Rr,qt.strokeRect(or,hr,mr,yr),qt.font=Pn;var Or=parseInt(Pn,10),Qr=Ln.class,Jr=qt.measureText(Qr).width;qt.fillStyle=Rr,qt.fillRect(or-In/2,hr-Math.round(4*Or/3),Jr+Or+In,Math.round(4*Or/3)),qt.fillStyle=rn,qt.fillText(Qr,or+Math.round(Or/2)-In/2,hr-Math.round(Or/2))}if(an.ocr!==void 0&&an.ocr.length>0){Pn=tn.font||"25px Arial";for(var Sr=0;Sr<an.ocr.length;Sr++){var Nr=an.ocr[Sr],wr=Nr.bounding_box,_r=wr[0],Ur=wr[1],Hr=wr[2],na=wr[3];this.modelName==="mask_augmented_refined"&&(Hr-=_r,na-=Ur),qt.lineWidth=In,qt.strokeStyle=gn,qt.strokeRect(_r,Ur,Hr,na),qt.font=Pn;var Kn=parseInt(Pn,10),sr=Nr.text,qn=qt.measureText(sr).width;qt.fillStyle=gn,qt.fillRect(_r-In/2,Ur-Math.round(4*Kn/3),qn+Kn+In,Math.round(4*Kn/3)),qt.fillStyle=rn,qt.fillText(sr,_r+Math.round(Kn/2)-In/2,Ur-Math.round(Kn/2))}}if(an.codes!==void 0&&an.codes.length>0){Pn=tn.font||"25px Arial";for(var vr=0;vr<an.codes.length;vr++){var Jn=an.codes[vr],$r=Jn.bounding_box,xr=$r[0],Er=$r[1],Wn=$r[2],pr=$r[3];this.modelName==="mask_augmented_refined"&&(Wn-=xr,pr-=Er),qt.lineWidth=In,qt.strokeStyle=gn,qt.strokeRect(xr,Er,Wn,pr),qt.font=Pn;var Pr=parseInt(Pn,10),Tr=Jn.code,Kr=qt.measureText(Tr).width;qt.fillStyle=gn,qt.fillRect(xr-In/2,Er-Math.round(4*Pr/3),Kr+Pr+In,Math.round(4*Pr/3)),qt.fillStyle=rn,qt.fillText(Tr,xr+Math.round(Pr/2)-In/2,Er-Math.round(Pr/2))}}}},{key:"activateObjectDetection",value:function(){if(this.objectDetectionActivated)return this.processedMediaStream;var an=document.createElement("video");an.srcObject=this.mediaStream;var qt=document.createElement("canvas"),tn=qt.getContext("2d");qt.width=this.canvasWidth,qt.height=this.canvasHeight;var gn=document.createElement("canvas"),rn=gn.getContext("2d");gn.width=this.canvasWidth,gn.height=this.canvasHeight;var pn=this;function In(){tn.drawImage(an,0,0,qt.width,qt.height);var Pn=tn.getImageData(0,0,qt.width,qt.height);rn.putImageData(Pn,0,0),pn.drawAnnotationsBool&&pn.drawAnnotations(pn.lastAnnotations,rn,pn.drawingConfig),requestAnimationFrame(In)}return an.addEventListener("loadeddata",function(){an.play(),requestAnimationFrame(In)}),this.processedMediaStream=gn.captureStream(),this.objectDetectionActivated=!0,this.processedMediaStream}},{key:"loadModel",value:function(){var an=this;return new Promise(function(qt,tn){xn.debug("loading model");var gn={modelName:an.modelName,maxBoxes:an.maxBoxes,scoreThresh:an.scoreThresh,forceReload:an.forceReload};an.sendMessage(gn,"AIELoadModel",qt,tn)})}},{key:"sendMessage",value:function(an,qt,tn,gn){var rn=setTimeout(gn,5e3);this.promises.push({timeout:rn,resolve:tn}),an.timeout=rn,this.sendMessageToCCS(an,qt)}},{key:"sendMessageToCCS",value:function(an,qt){if(an.userMediaStreamId=this.userMediaStreamId,an.clientId=this.clientId,an.data={pubSub:"AieConnector"},an.type=qt,apiCC!==void 0){var tn=apiCC.session.apiCCWebRTCClient.webRTCClient.socket;try{var gn=JSON.stringify(an);tn.emit(qt,gn)}catch(rn){xn.error("JSON Stringify error : ",rn)}}}},{key:"modelLoaded",value:function(an){xn.debug("Loaded model name :",an.modelName),this.aieUrl=an.url,this.loadedModel=an.modelName,this.token=an.token;var qt=this.activateObjectDetection();this.promises.forEach(function(tn){an.timeout===tn.timeout&&(clearTimeout(tn.timeout),tn.resolve(qt))})}},{key:"release",value:function(){this.isReleased=!0,this.stopLogs(),this.stopSnapshots(),this.stopAnnotations(),this.sendMessageToCCS({},"AIELogout")}}],Zt&&kn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function Rn(xt){return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},Rn(xt)}function wn(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}function Dn(xt,Vt){return Dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,an){return Zt.__proto__=an,Zt},Dn(xt,Vt)}function Bn(xt,Vt){if(Vt&&(Rn(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(xt)}function zn(xt){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},zn(xt)}var Hn=et.Y.get("MediaFilterAIE"),nr=function(xt){(function(rn,pn){if(typeof pn!="function"&&pn!==null)throw new TypeError("Super expression must either be null or a function");rn.prototype=Object.create(pn&&pn.prototype,{constructor:{value:rn,writable:!0,configurable:!0}}),Object.defineProperty(rn,"prototype",{writable:!1}),pn&&Dn(rn,pn)})(gn,xt);var Vt,Zt,an,qt,tn=(an=gn,qt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var rn,pn=zn(an);if(qt){var In=zn(this).constructor;rn=Reflect.construct(pn,arguments,In)}else rn=pn.apply(this,arguments);return Bn(this,rn)});function gn(){var rn;return function(pn,In){if(!(pn instanceof In))throw new TypeError("Cannot call a class as a function")}(this,gn),(rn=tn.call(this)).userMediaStreamId=null,rn.streamAIE=null,rn}return Vt=gn,(Zt=[{key:"applyFilter",value:function(rn,pn){var In=this;return new Promise(function(Pn,_n){if(Hn.debug("Apply filter with descriptor :",pn),pn.options===void 0&&_n("Filter options object required"),pn.options.modelName===void 0)_n("modelName options required");else{var Ln=rn.getAudioTracks();Ln.length>0&&Ln.forEach(function(Vn){rn.removeTrack(Vn)}),In.streamAIE=new En(rn,pn.options),In.streamAIE.loadModel().then(function(Vn){Ln.forEach(function(or){Vn.addTrack(or)}),Pn(Vn)}).catch(function(Vn){_n(Vn)})}})}},{key:"release",value:function(){this.streamAIE.release()}}])&&wn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),gn}(dt);function sn(xt){return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},sn(xt)}function Gn(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}function Zn(xt,Vt){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,an){return Zt.__proto__=an,Zt},Zn(xt,Vt)}function rr(xt,Vt){if(Vt&&(sn(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(xt)}function Fn(xt){return Fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},Fn(xt)}var Xn=et.Y.get("MediaFilterBackgroundSubstraction"),Yn=function(xt){(function(rn,pn){if(typeof pn!="function"&&pn!==null)throw new TypeError("Super expression must either be null or a function");rn.prototype=Object.create(pn&&pn.prototype,{constructor:{value:rn,writable:!0,configurable:!0}}),Object.defineProperty(rn,"prototype",{writable:!1}),pn&&Zn(rn,pn)})(gn,xt);var Vt,Zt,an,qt,tn=(an=gn,qt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var rn,pn=Fn(an);if(qt){var In=Fn(this).constructor;rn=Reflect.construct(pn,arguments,In)}else rn=pn.apply(this,arguments);return rr(this,rn)});function gn(){var rn;return function(pn,In){if(!(pn instanceof In))throw new TypeError("Cannot call a class as a function")}(this,gn),(rn=tn.call(this)).mediaStream=null,rn.mediaStreamSettings=null,rn.processedMediaStream=null,rn.net=null,rn.lossRatio=null,rn.processBackground=!1,rn.bgImageData=null,rn.videoElement=document.createElement("video"),rn.canvas=document.createElement("canvas"),rn.canvasContext=rn.canvas.getContext("2d"),rn}return Vt=gn,(Zt=[{key:"applyFilter",value:function(rn,pn){var In=this;return new Promise(function(Pn,_n){var Ln=rn.getAudioTracks();Ln.length>0&&Ln.forEach(function(Vn){rn.removeTrack(Vn)}),In.loadTensorflow().then(function(){In.loadTensorflowModel().then(function(){In.videoElement.srcObject=rn;var Vn=In;In.videoElement.addEventListener("loadeddata",function(){Vn.videoElement.play(),Vn.mediaStream=rn,Vn.descriptors=pn,Vn.processedMediaStream=Vn.canvas.captureStream(),Vn.mediaStreamSettings=Vn.mediaStream.getVideoTracks()[0].getSettings(),Vn.videoElement.height=240,Vn.lossRatio=Vn.mediaStreamSettings.height/Vn.videoElement.height,Vn.videoElement.width=Vn.videoElement.height*Vn.mediaStreamSettings.aspectRatio,Vn.videoElement.onplaying=function(){Vn.canvas.height=Vn.videoElement.videoHeight,Vn.canvas.width=Vn.videoElement.videoWidth},Vn.loadBodyPix().then(function(){Ln.forEach(function(or){Vn.processedMediaStream.addTrack(or)}),Pn(Vn.processedMediaStream)}).catch(function(or){Xn.error(or)})})}).catch(function(Vn){Xn.error(Vn)})}).catch(function(Vn){Xn.error(Vn)})})}},{key:"loadTensorflow",value:function(){return Xn.debug("Tensorflow script loading..."),new Promise(function(rn,pn){var In={async:!0,numRetries:20,reqdelay:200,success:function(){Xn.debug("Tensorflow script loaded"),rn()},error:function(Pn){pn("Resources loading failed, depsNotFound: "+Pn)},retrycb:function(Pn,_n){Xn.warn("Tensorflow loading retry :"+Pn+" ,delay before retry :"+_n)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",In)})}},{key:"loadTensorflowModel",value:function(){return Xn.debug("Tensorflow model script loading..."),new Promise(function(rn,pn){var In={async:!0,numRetries:20,reqdelay:200,success:function(){Xn.debug("Tensorflow model script loaded"),rn()},error:function(Pn){pn("Resources loading failed, depsNotFound: "+Pn)},retrycb:function(Pn,_n){Xn.warn("Tensorflow model loading retry :"+Pn+" ,delay before retry :"+_n)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",In)})}},{key:"loadBodyPix",value:function(){var rn=this;return new Promise(function(pn,In){bodyPix.load({multiplier:.75,stride:32,quantBytes:4}).then(function(Pn){rn.net=Pn,rn.perform(),pn()}).catch(function(Pn){return In(Pn)})})}},{key:"perform",value:function(){if(this.descriptors.options!==void 0&&this.descriptors.options.backgroundMode!==void 0)switch(this.processBackground=!0,this.descriptors.options.backgroundMode){case"blur":Xn.warn("This method is deprecated, please use Stream#blur method now."),this.videoElement.height=this.mediaStreamSettings.height,this.videoElement.width=this.mediaStreamSettings.width,this.canvas.height=this.videoElement.height,this.canvas.width=this.videoElement.width,this.blurBackground();break;case"transparent":this.noBackground();break;case"image":this.descriptors.options.image!==void 0?(this.resizeImageData(this.descriptors.options.image),this.imageBackground()):Xn.error("image option is required when creating the filter");break;default:Xn.debug("The backgroundMode : ",this.descriptors.options.backgroundMode," is not implemented. Refer to documentation for accepted values."),this.blurBackground()}else Xn.error("backgroundMode option is required")}},{key:"blurBackground",value:function(){var rn=this;this.net.segmentPerson(this.videoElement).then(function(pn){rn.blurBackground(),bodyPix.drawBokehEffect(rn.canvas,rn.videoElement,pn,9,2,!1)})}},{key:"noBackground",value:function(){var rn=this;this.net.segmentPerson(this.videoElement).then(function(pn){rn.canvasContext.drawImage(rn.videoElement,0,0,rn.videoElement.width,rn.videoElement.height);for(var In=rn.canvasContext.getImageData(0,0,rn.videoElement.width,rn.videoElement.height),Pn=In.data,_n=0;_n<Pn.length;_n+=4)pn.data[_n/4]===0&&(Pn[_n+3]=0);var Ln=rn.scaleImageData(In,rn.lossRatio);rn.canvasContext.imageSmoothingEnabled=!0,rn.canvasContext.putImageData(Ln,0,0),rn.processBackground&&rn.noBackground()})}},{key:"imageBackground",value:function(){var rn=this;this.net.segmentPerson(this.videoElement).then(function(pn){rn.canvasContext.putImageData(rn.bgImageData,0,0,0,0,rn.videoElement.width,rn.videoElement.height);var In=rn.canvasContext.getImageData(0,0,rn.videoElement.width,rn.videoElement.height);rn.canvasContext.drawImage(rn.videoElement,0,0,rn.videoElement.width,rn.videoElement.height);for(var Pn=rn.canvasContext.getImageData(0,0,rn.videoElement.width,rn.videoElement.height),_n=Pn.data,Ln=0;Ln<_n.length;Ln+=4)pn.data[Ln/4]===0&&(_n[Ln]=In.data[Ln],_n[Ln+1]=In.data[Ln+1],_n[Ln+2]=In.data[Ln+2],_n[Ln+3]=In.data[Ln+3]);var Vn=rn.scaleImageData(Pn,rn.lossRatio);rn.canvasContext.imageSmoothingEnabled=!0,rn.canvasContext.putImageData(Vn,0,0),rn.processBackground&&rn.imageBackground()})}},{key:"resizeImageData",value:function(rn){var pn=this.videoElement.width/rn.width,In=this.videoElement.height/rn.height;this.bgImageData=pn>=In?this.scaleImageData(rn,pn):this.scaleImageData(rn,In)}},{key:"noBackgroundWithFullResolution",value:function(){var rn=this;this.net.segmentPerson(this.videoElement).then(function(pn){rn.canvasContext.drawImage(rn.videoElement,0,0,rn.canvas.width,rn.canvas.height);for(var In=rn.canvasContext.getImageData(0,0,rn.canvas.width,rn.canvas.height),Pn=new Uint8ClampedArray(4*pn.width*pn.height),_n=0;_n<Pn.length;_n+=4)pn.data[_n/4]!==0&&(Pn[_n+3]=255);var Ln=new ImageData(Pn,pn.width,pn.height);Ln=rn.scaleImageData(Ln,rn.lossRatio);for(var Vn=0;Vn<In.data.length;Vn+=4)Ln.data[Vn+3]===0&&(In.data[Vn+3]=0);rn.canvasContext.imageSmoothingEnabled=!0,rn.canvasContext.putImageData(In,0,0),rn.processBackground&&rn.noBackgroundWithFullResolution()})}},{key:"scaleImageData",value:function(rn,pn){var In=document.createElement("canvas");In.width=rn.width,In.height=rn.height,In.getContext("2d").putImageData(rn,0,0);var Pn=document.createElement("canvas");Pn.width=this.canvas.width,Pn.height=this.canvas.height;var _n=Pn.getContext("2d");return _n.scale(pn,pn),_n.drawImage(In,0,0),_n.getImageData(0,0,Pn.width,Pn.height)}},{key:"release",value:function(){this.processedMediaStream=this.mediaStream,this.processBackground=!1}}])&&Gn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),gn}(dt);function Nn(xt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var an=Vt[Zt];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(xt,an.key,an)}}var Un=et.Y.get("MediaFilterManager"),Cn=apiCC.myWebRTC_Event,Mn={oldBackgroundSubtraction:zt,AIEFilter:nr,backgroundSubtraction:Yn},Kt=function(){function xt(an,qt,tn){(function(gn,rn){if(!(gn instanceof rn))throw new TypeError("Cannot call a class as a function")})(this,xt),this.mediaStream=an,this.descriptors=qt,this.userMediaStreamId=tn,this.filters={}}var Vt,Zt;return Vt=xt,(Zt=[{key:"getOrCreateFilter",value:function(an){if(this.filters[an.type]!==void 0)return this.filters[an.type];var qt=Mn[an.type];if(qt===void 0)return Un.error("Unknown filter type: "+an.type),null;var tn=new qt;return this.filters[tn]=tn,tn}},{key:"applyFilters",value:function(){var an=this;if(Un.info("Apply filters",this.descriptors),!Array.isArray(this.descriptors)||this.descriptors.length===0)return Un.error("No filter can be applied, filter descriptors have wrong format, it should be an array and contain at least one element",this.descriptors),Promise.reject(this.mediaStream);var qt=Promise.resolve(this.mediaStream);return this.descriptors.forEach(function(tn){var gn=an.getOrCreateFilter(tn);gn!==null?(tn.options!==void 0&&(tn.options.userMediaStreamId=an.userMediaStreamId,tn.options.clientId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId),qt=qt.then(function(rn){return gn.applyFilter(rn,tn)})):Un.error("Filter "+tn.type+" will be skipped. No implemented filter has this type")}),Un.info("Filters attached"),document.addEventListener("visibilitychange",function(){an.createBackgroundSubstractionStopVisibilityChangeEvent(an.userMediaStreamId)}),qt.catch(function(tn){return Un.error(tn)}),qt}},{key:"createBackgroundSubstractionStopVisibilityChangeEvent",value:function(an){document.hidden&&Cn.createBackgroundSubstractionStopVisibilityChangeEvent(an)}},{key:"release",value:function(){Object.values(this.filters).forEach(function(an){an.release()}),document.removeEventListener("visibilitychange",this.createBackgroundSubstractionStopVisibilityChangeEvent),this.filters=null,this.mediaStream=null}}])&&Nn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),xt}();function Ot(xt){return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},Ot(xt)}function lt(xt,Vt){var Zt=typeof Symbol<"u"&&xt[Symbol.iterator]||xt["@@iterator"];if(!Zt){if(Array.isArray(xt)||(Zt=function(pn,In){if(pn){if(typeof pn=="string")return Tt(pn,In);var Pn=Object.prototype.toString.call(pn).slice(8,-1);return Pn==="Object"&&pn.constructor&&(Pn=pn.constructor.name),Pn==="Map"||Pn==="Set"?Array.from(pn):Pn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pn)?Tt(pn,In):void 0}}(xt))||Vt&&xt&&typeof xt.length=="number"){Zt&&(xt=Zt);var an=0,qt=function(){};return{s:qt,n:function(){return an>=xt.length?{done:!0}:{done:!1,value:xt[an++]}},e:function(pn){throw pn},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tn,gn=!0,rn=!1;return{s:function(){Zt=Zt.call(xt)},n:function(){var pn=Zt.next();return gn=pn.done,pn},e:function(pn){rn=!0,tn=pn},f:function(){try{gn||Zt.return==null||Zt.return()}finally{if(rn)throw tn}}}}function Tt(xt,Vt){(Vt==null||Vt>xt.length)&&(Vt=xt.length);for(var Zt=0,an=new Array(Vt);Zt<Vt;Zt++)an[Zt]=xt[Zt];return an}var It=et.Y.get("ApiCCUserMediaStream"),Dt=apiCC.myWebRTC_Event,Et="getUserMediaAccessAllowed",$t=function(){Number.MAX_SAFE_INTEGER!==void 0?this.userMediaStreamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaStreamId=Math.floor(1000001*Math.random()).toString(),rt.Xh==="Edge"&&rt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:rt.Xh==="Chrome"&&rt.PR<49||rt.Xh==="Firefox"&&rt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}},this.inputs={},this.callbacks={},this.callType=null,this.audio=!1,this.audioDeviceLabel=null,this.audioMuted=!1,this.audioSilent=!1,this.video=!1,this.videoDeviceLabel=null,this.videoMuted=!1,this.videoSilent=!1,this.stream=null,this.streamStolen=!1,this.notifyUserMediaSuccess=!0,this.notifyUserMediaStop=!0,apiCC.session!==null&&apiCC.session!==void 0?this.tryAudioCallAfterUserMediaError=apiCC.session.tryAudioCallAfterUserMediaError:this.tryAudioCallAfterUserMediaError=!1,this.callInfoList=[],this.iOSMediaSelectionWorkAroundApplied=!1,this.getUserMediaTimeoutId=null,ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},this.forceExtensionOnChrome=!1,this.filters=null,this.mediaFilterManager=null,this.videoSettings=!1,this.getVideoTrack=function(){if(!this.stream||typeof this.stream.getVideoTracks!="function")return null;var xt=this.stream.getVideoTracks();return xt&&xt.length===1?xt[0]:null},this.release=function(){var xt=0,Vt=null,Zt=null,an=null;if(It.debug("[ApiCCUserMediaStream] release; userMediaStreamId: "+this.userMediaStreamId),this.mediaFilterManager!==null&&(this.mediaFilterManager.release(),this.mediaFilterManager=null),apiCC.audioProcessor.stopAudioNodeCtx(this.nodeCtx),apiRTC.userAgentInstance!==void 0&&apiRTC.userAgentInstance!==null&&apiRTC.userAgentInstance.apiRTCStreamsList!==void 0&&apiRTC.userAgentInstance.apiRTCStreamsList!==null&&apiRTC.userAgentInstance.apiRTCStreamsList.delete(Number(this.userMediaStreamId)),this.stream!==null){if(this.streamStolen!==!0)if(typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)cordova!==void 0&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0&&(It.debug("[ApiCCUserMediaStream] release on iosrtc cordova"),this.stream.onended=null);else if(rt.Xh==="Chrome"&&rt.PR<45||rt.Xh==="Firefox"&&rt.PR<44||rt.Xh==="Opera"&&rt.PR<34||rt.Xh==="Chromium"&&rt.PR<44||rt.Xh==="Chrome WebView"&&rt.PR<45)this.stream.onended=null,this.stream.stop();else for(this.stream.onended=null,xt=(Vt=this.stream.getTracks()).length;--xt>=0;)Vt[xt].onended=null,Vt[xt].stop();this.stream=null,this.streamStolen=!1,this.notifyUserMediaStop===!0&&((an=this.getOwnerCallInfo())!==null&&(Zt=an.callId),Dt.createUserMediaStopEvent(Zt,this.callType,this.userMediaStreamId)),this.callbacks.release(this)}},this.getUserMedia=function(){var xt=this;if(It.debug("[ApiCCUserMediaStream] getUserMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)try{if(this.callType==="media")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config);else if(this.callType==="audio")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config.video=!1;else{if(this.callType!=="videoOnly")return function(Vt){for(var Zt=apiCC.userMediaStreamTable.length;--Zt>=0;)if(apiCC.userMediaStreamTable[Zt].userMediaStreamId===Vt){apiCC.userMediaStreamTable.splice(Zt,1);break}}(this.userMediaStreamId),void setTimeout(this.callbacks.failure.bind(this,this,"wrong type"));this.gum_config.audio=!1,this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config)}apiCC.checkConstraintDependingOnDevice(this.gum_config),rt.Xh==="IE"&&rt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):(rt.Xh==="Chrome"&&this.isUserMediaAccessAllowed()===!0&&(this.getUserMediaTimeoutId=setTimeout(function(){xt.onUserMediaError("timeout")},1e4)),apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError")))}catch(Vt){It.error("getUserMedia() failed. Is this a WebRTC capable browser?"),It.log("getUserMedia failed with exception: "+Vt.message)}},this.listenForMuteEvents=function(){var xt,Vt=this,Zt=function(gn){var rn=null,pn=null;gn.onmute=function(In){It.debug("mute event :",gn),gn.kind==="audio"&&rn===null?rn=setTimeout(function(){Vt.audioSilent=!0,rn=null,Vt.notifyMLineMuted(gn.kind,!0,"muted")},2520):gn.kind==="video"&&pn===null&&(pn=setTimeout(function(){Vt.videoSilent=!0,pn=null,Vt.notifyMLineMuted(gn.kind,!0,"muted")},2520))},gn.onunmute=function(In){It.debug(gn.kind+" unmute event"),gn.kind==="audio"&&rn!==null?(clearTimeout(rn),rn=null):gn.kind==="video"&&pn!==null?(clearTimeout(pn),pn=null):(gn.kind==="audio"?Vt.audioSilent=!1:gn.kind==="video"&&(Vt.videoSilent=!1),Vt.notifyMLineMuted(gn.kind,!1,"muted"))},gn.onended=function(In){It.debug(gn.kind+" ended event"),gn.kind==="audio"&&rn!==null?(clearTimeout(rn),rn=null):gn.kind==="video"&&(pn!==null&&(clearTimeout(pn),pn=null),Vt.callType!=="screenSharing"&&Vt.callType!=="screenSharingWithAudio"||Vt.stopScreenSharing())}},an=lt(this.stream.getVideoTracks());try{for(an.s();!(xt=an.n()).done;)Zt(xt.value)}catch(gn){an.e(gn)}finally{an.f()}var qt,tn=lt(this.stream.getAudioTracks());try{for(tn.s();!(qt=tn.n()).done;)Zt(qt.value)}catch(gn){tn.e(gn)}finally{tn.f()}this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"||(this.stream.onended=this.callback(this,"stopScreenSharing"))},this.onUserMediaSuccess=function(xt){var Vt=this;this.applyFiltersIfNeeded(xt).then(function(Zt){var an=null,qt=null,tn=!1,gn=Vt.getOwnerCallInfo(),rn=Vt.getCall(gn);It.info("[ApiCCUserMediaStream] onUserMediaSuccess; userMediaStreamId: "+Vt.userMediaStreamId),Vt.getUserMediaTimeoutId!==null&&(clearTimeout(Vt.getUserMediaTimeoutId),Vt.getUserMediaTimeoutId=null),rn&&(It.debug("call exist"),qt=rn.callee?rn.callerId:rn.calleeId,tn=rn.restarted),Vt.updateMediaProperties(Zt),Vt.stream=Zt,rt.Xh==="Chrome"&&Vt.setUserMediaAccessAllowed(!0),Vt.notifyUserMediaSuccess===!0&&(gn&&(an=gn.callId),Dt.createUserMediaSuccessEvent(an!==null,Vt.audio,Vt.audioDeviceLabel,Vt.video,Vt.videoDeviceLabel,Vt.callType,an,Zt,qt,tn,Vt.userMediaStreamId)),Vt.listenForMuteEvents(),It.debug("Starting a new getMediaDevices after userMediaSuccess"),apiCC.mediaDeviceMgr.getMediaDevices("updatedAfterGetUserMediaSuccess"),Vt.callbacks.success(Vt)})},this.updateMediaProperties=function(xt){var Vt=!1,Zt="Unknown",an="Unknown",qt=!1,tn="Unknown";xt.getAudioTracks().length>0&&(Vt=!0,xt.getAudioTracks()[0].label&&(Zt=xt.getAudioTracks()[0].label,an=xt.getAudioTracks()[0].id,apiCC.audioProcessor.listenToAudio(xt,this)),xt.getAudioTracks()[0].enabled===!1&&(this.audioMuted=!0),xt.getAudioTracks()[0].muted===!0&&(this.audioSilent=!0)),xt.getVideoTracks().length>0&&(qt=!0,xt.getVideoTracks()[0].label&&(tn=xt.getVideoTracks()[0].label),xt.getVideoTracks()[0].enabled===!1&&(this.videoMuted=!0),xt.getVideoTracks()[0].muted===!0&&(this.videoSilent=!0)),this.audio=Vt,this.audioDeviceLabel=Zt,this.audioDeviceId=an,this.video=qt,this.videoDeviceLabel=tn},this.manageFailure=function(xt){var Vt={};Ot(xt)==="object"?(Vt.message=xt.message,Vt.code=xt.code,Vt.name=xt.name):Vt=xt,this.callbacks.failure(this,Vt)},this.onUserMediaError=function(xt){var Vt=function(tn){for(var gn=apiCC.userMediaStreamTable.length;--gn>=0;)if(apiCC.userMediaStreamTable[gn].userMediaStreamId===tn){apiCC.userMediaStreamTable.splice(gn,1);break}},Zt=null,an=this.getOwnerCallInfo();if(It.info("[ApiCCUserMediaStream] onUserMediaError; userMediaStreamId: "+this.userMediaStreamId+", error: "+xt),this.getUserMediaTimeoutId!==null&&(xt!=="timeout"&&clearTimeout(this.getUserMediaTimeoutId),this.getUserMediaTimeoutId=null),rt.$6!=="electron"&&rt.Xh==="Chrome"&&rt.PR>47&&window.location.protocol!=="https:"&&It.error("HTTPS is now mandatory to use getUserMedia()"),an!==null&&(Zt=an.callId),this.callType==="media"&&rt.ag.name==="iOS"&&rt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1||Dt.createUserMediaErrorEvent(Zt!==null,this.callType,xt,this.userMediaStreamId,Zt,this.tryAudioCallAfterUserMediaError,this.gum_config),xt!=="timeout"&&this.callType==="media")if(rt.ag.name==="iOS"&&rt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1){It.warn("try mediaDevice selection workaround on iOS / Mobile Safari - after MediaError"),this.iOSMediaSelectionWorkAroundApplied=!0,this.gum_config.video={};var qt=apiCC.getMediaDeviceLabelFromDeviceid(this.inputs.videoSourceId);It.log("getMediaDeviceLabelFromDeviceid :",qt),qt==="Caméra arrière"||qt==="Back Camera"?(It.log("Setting FacingMode to environment :",qt),this.gum_config=apiCC.setVideoFacingModeInConstraint("environment",this.gum_config)):(It.log("Setting FacingMode to user :",qt),this.gum_config=apiCC.setVideoFacingModeInConstraint("user",this.gum_config)),this.inputs.videoSourceId=null,this.getUserMedia()}else this.tryAudioCallAfterUserMediaError===!0?(It.warn("try AudioCall after UserMediaError is activated"),this.tryAudioCallAfterUserMediaError=!1,this.gum_config.video!==!1?(It.debug("[ApiCCUserMediaStream] Trying to getUserMedia with audioOnly"),this.inputs.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):(Vt(this.userMediaStreamId),this.manageFailure(xt))):(Vt(this.userMediaStreamId),this.manageFailure(xt));else Vt(this.userMediaStreamId),this.manageFailure(xt)},this.getDisplayMediaProcess=function(){var xt=this;It.debug("using getDisplayMedia with browser :",rt.Xh),It.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints),Ot(this.displayMediaStreamConstraints)==="object"&&Array.isArray(this.displayMediaStreamConstraints)!==!0||(It.warn("Defined displayMediaStreamConstraints format is not correct, reinitialization ..."),ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},It.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints)),typeof apiRTC_React<"u"?(It.debug("getDisplayMedia - React version"),mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){It.info("getDisplayMedia React stream available"),xt.onUserMediaSuccess(Vt)}).catch(function(Vt){It.debug("getDisplayMedia - React version error : ",Vt),xt.onUserMediaError(Vt)})):navigator.getDisplayMedia?(It.debug("navigator.getDisplayMedia defined"),navigator.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){It.debug("getDisplayMedia stream available"),xt.onUserMediaSuccess(Vt)}).catch(function(Vt){It.debug("getDisplayMedia error :",Vt),xt.onUserMediaError(Vt)})):navigator.mediaDevices.getDisplayMedia?(It.debug("navigator.mediaDevices.getDisplayMedia defined"),navigator.mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){It.debug("getDisplayMedia stream available"),xt.onUserMediaSuccess(Vt)}).catch(function(Vt){It.debug("getDisplayMedia error :",Vt),xt.onUserMediaError(Vt)})):(It.debug("getDisplayMedia not available"),Dt.createDesktopCaptureEvent("Browser_Not_Compatible"))},this.getScreenMedia=function(){if(It.debug("[ApiCCUserMediaStream] getScreenMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)if(rt.Xh==="Chrome"||rt.Xh==="Firefox"&&rt.PR>=52)if(rt.Xh==="Chrome")if(It.log("shareScreen on Chrome"),rt.PR>=72&&this.forceExtensionOnChrome===!1)this.getDisplayMediaProcess();else{if(It.debug("this.captureSourceType :",this.captureSourceType),apiCC.apiRTCExtensionInstalled===!1)return apiCC.waitingShareScreenUserMediaStreamId=this.userMediaStreamId,function(xt){It.debug("[ApiCCUserMediaStream] moveUserMediaEntryInWaitingScreen: "+xt);for(var Vt=apiCC.userMediaStreamTable.length;--Vt>=0;)if(apiCC.userMediaStreamTable[Vt].userMediaStreamId===xt){apiCC.waitingShareScreenUserMediaStream=apiCC.userMediaStreamTable.splice(Vt,1);break}}(this.userMediaStreamId),void apiCC.manageNotInstalledExtension("getScreenMedia","getScreenMedia",this.captureSourceType);this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType=["screen","window","tab"]),Array.isArray(this.captureSourceType)===!1&&(It.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType=["screen","window","tab"],It.debug("this.captureSourceType :",this.captureSourceType)),window.postMessage({command:"getDesktopId",callNumber:this.userMediaStreamId,remoteId:"getScreenMedia",captureSourceType:this.captureSourceType,browser_major_version:rt.PR},"*")}else It.log("shareScreen on Firefox"),rt.PR>=67?this.getDisplayMediaProcess():(this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType="screen"),typeof this.captureSourceType=="string"&&(It.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType="screen",It.debug("this.captureSourceType :",this.captureSourceType)),this.registerScreenMedia(this.captureSourceType));else this.getDisplayMediaProcess()},this.registerScreenMedia=function(xt,Vt){var Zt=null,an=this.getOwnerCallInfo(),qt=this.getCall(an),tn=null;if(It.debug("[ApiCCUserMediaStream] registerScreenMedia; userMediaStreamId: "+this.userMediaStreamId),Vt==="mediaError")qt!==null?(tn=qt.callee===!0?qt.callerId:qt.calleeId,qt.callType==="screenSharing"||qt.callType==="screenSharingWithAudio"?apiCC.session.apiCCWebRTCClient.webRTCClient.removeCallFromTableWithCallIdandRemoteId(qt.callId,tn,"Media_Error"):It.log("switch video / screen : call is not removed"),window.location.protocol!=="https:"&&It.log("Please connect to your web page using 'HTTPS'. This is mandatory for desktop capture"),Dt.createDesktopCaptureEvent("UserMediaError",qt.callId,tn)):(It.log("Call not found on message EventListener"),Dt.createDesktopCaptureEvent("UserMediaError")),function(gn){for(var rn=apiCC.userMediaStreamTable.length;--rn>=0;)if(apiCC.userMediaStreamTable[rn].userMediaStreamId===gn){apiCC.userMediaStreamTable.splice(rn,1);break}}(this.userMediaStreamId),this.callbacks.failure(this,"UserMediaError");else try{if(rt.Xh==="Chrome")It.log("desktopId: "+Vt),Zt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Vt}}};else{if(It.log("captureSourceType: "+xt),xt!=="screen"&&xt!=="window"&&xt!=="application")return void It.error("captureSourceType value is not correct");Zt={video:{mediaSource:xt}}}rt.Xh==="IE"&&rt.dc>8?apiCC.getUserMediaWithCB(Zt,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(Zt).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(gn){It.error("getUserMedia() failed. Is this a WebRTC capable browser?"),It.log("getUserMedia failed with exception: "+gn.message)}},this.stopScreenSharing=function(){It.debug("[ApiCCUserMediaStream] stopScreenSharing; userMediaStreamId: "+this.userMediaStreamId);var xt=!0;if(apiRTC.session.remoteAccessInvitation!==null&&this.userMediaStreamId===apiRTC.session.remoteAccessInvitation.screenSharingStreamId&&(It.debug("this is a remote access screenSharing, need to stop remote access"),apiRTC.session.remoteAccessInvitation.stop(!0,{code:"SCREEN_SHARING_STOP"})),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Vt=this.callInfoList.length;--Vt>=0;)this.callInfoList[Vt].owner===!0&&(xt=!1),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(this.callInfoList[Vt].callId);xt===!0&&this.release()},this.getCall=function(xt){var Vt=null;return xt&&apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&(xt.flavor==="call"?Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(xt.callId):xt.flavor==="userMedia"&&(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(xt.callId))),Vt},this.getOwnerCallInfo=function(){for(var xt=this.callInfoList.length;--xt>=0;)if(this.callInfoList[xt].owner===!0)return this.callInfoList[xt];return null},this.getCallInfo=function(xt){for(var Vt=this.callInfoList.length;--Vt>=0;)if(this.callInfoList[Vt].callId===xt)return this.callInfoList[Vt];return null},this.containsCallInfo=function(xt){for(var Vt=!1,Zt=this.callInfoList.length;--Zt>=0;)if(this.callInfoList[Zt].callId===xt){Vt=!0;break}return Vt},this.addCallInfo=function(xt,Vt,Zt){return xt!==null&&typeof xt=="string"&&(Vt!=="call"&&Vt!=="userMedia"&&(Vt="call"),Zt!==null&&typeof Zt=="boolean"||(Zt=!1),!this.containsCallInfo(xt))&&(this.callInfoList.push({callId:xt,flavor:Vt,owner:Zt}),!0)},this.removeCallInfo=function(xt){for(var Vt=!1,Zt=this.callInfoList.length;--Zt>=0;)if(this.callInfoList[Zt].callId===xt){this.callInfoList.splice(Zt,1),Vt=!0;break}return Vt},this.accessToLocalMedia=function(){return this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"&&this.callType!=="data"&&this.stream!==null},this.muteAudioOnStreams=function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return It.debug("[ApiCCUserMediaStream] muteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(Vt){Vt.enabled=!1}),xt==="enabled"?this.audioMuted=!0:xt==="muted"&&(this.audioSilent=!0),this.notifyMLineMuted("audio",!0,xt),{type:"audio",muted:!0}},this.unMuteAudioOnStreams=function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return It.debug("[ApiCCUserMediaStream] unMuteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(Vt){Vt.enabled=!0}),xt==="enabled"?this.audioMuted=!1:xt==="muted"&&(this.audioSilent=!1),this.notifyMLineMuted("audio",!1,xt),{type:"audio",muted:!1}},this.muteVideoOnStreams=function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return It.debug("[ApiCCUserMediaStream] muteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(Vt){Vt.enabled=!1}),xt==="enabled"?this.videoMuted=!0:xt==="muted"&&(this.videoSilent=!0),this.notifyMLineMuted("video",!0,xt),{type:"video",muted:!0}},this.unMuteVideoOnStreams=function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return It.debug("[ApiCCUserMediaStream] unMuteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(Vt){Vt.enabled=!0}),xt==="enabled"?this.videoMuted=!1:xt==="muted"&&(this.videoSilent=!1),this.notifyMLineMuted("video",!1,xt),{type:"video",muted:!1}},this.removeVideoTrackOnStreams=function(){var xt;return It.debug("[ApiCCUserMediaStream] removeVideoTrackOnStreams; userMediaStreamId: "+this.userMediaStreamId),(xt=this.stream.getVideoTracks()).length>0&&this.stream.removeTrack(xt[0]),this.video=!1,{type:"video",present:!1}},this.notifyMLineMuted=function(xt,Vt,Zt){var an,qt,tn=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var gn=this.callInfoList.length;--gn>=0;)this.callInfoList[gn].flavor==="call"?(an=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[gn].callId),this.notifyMLineMutedCall(xt,Vt,Zt,an,null)):this.callInfoList[gn].flavor==="userMedia"&&(qt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[gn].callId),this.notifyMLineMutedCall(xt,Vt,Zt,null,qt)),this.callInfoList[gn].owner===!0&&(tn=!1);tn===!0&&this.notifyMLineMutedCall(xt,Vt,Zt,null,null)},this.notifyMLineMutedCall=function(xt,Vt,Zt,an,qt){It.debug("notifyMLineMutedCall; mline: "+xt+", muted: "+Vt);var tn=[];Zt==="enabled"?tn=[xt+"IsMuted"]:Zt==="muted"&&(tn=[xt+"IsSilent"]);var gn={available:this.audio,deviceLabel:this.audioDeviceLabel,active:!0,muted:this.audioMuted,silent:this.audioSilent},rn={available:this.video,deviceLabel:this.videoDeviceLabel,active:!0,muted:this.videoMuted,silent:this.videoSilent},pn=null;an?(xt==="audio"?an.isLocalAudioMuted=Vt:xt==="video"&&(an.isLocalVideoMuted=Vt),an.belongsToRoom()?(pn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:an.callId,roomId:an.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:xt},an.data.mesh&&(pn.mesh=an.data.mesh),Zt==="muted"?(pn.change="silent",pn.silent=Vt,an.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",pn)):Zt==="enabled"&&(pn.muted=Vt,an.myWebRTC_Stack.sendInfo("streamTrackChanged",pn))):(pn={callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:an.callee?an.callerId:an.calleeId,callId:an.callId,mline:xt},Zt==="muted"?(pn.type="streamTrackStatusChanged",pn.change="silent",pn.silent=Vt):Zt==="enabled"&&(pn.type="streamTrackChanged",pn.muted=Vt),an.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,pn)),gn.active=an.localCallProfile.audioActive,rn.active=an.localCallProfile.videoActive,Dt.createLocalStreamUpdatedEvent(tn,gn,rn,!0,an.callType,an.callId,this.stream,this.userMediaStreamId,"userAction")):qt?(pn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:qt.userMediaId,roomId:qt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:xt},Zt==="muted"?(pn.change="silent",pn.silent=Vt,qt.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",pn)):Zt==="enabled"&&(pn.muted=Vt,qt.myWebRTC_Stack.sendInfo("streamTrackChanged",pn)),qt.audioSdpDirection==="inactive"&&(gn.active=!1),qt.videoSdpDirection==="inactive"&&(rn.active=!1),Dt.createLocalStreamUpdatedEvent(tn,gn,rn,!0,qt.callType,qt.userMediaId,this.stream,this.userMediaStreamId,"userAction")):Dt.createLocalStreamUpdatedEvent(tn,gn,rn,!1,null,null,this.stream,this.userMediaStreamId,"userAction")},this.notifyActiveSpeaker=function(xt){var Vt,Zt,an=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var qt=this.callInfoList.length;--qt>=0;)this.callInfoList[qt].flavor==="call"?(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[qt].callId),this.notifyActiveSpeakerCall(xt,Vt,null)):this.callInfoList[qt].flavor==="userMedia"&&(Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[qt].callId),this.notifyActiveSpeakerCall(xt,null,Zt)),this.callInfoList[qt].owner===!0&&(an=!1);an===!0&&this.notifyActiveSpeakerCall(xt,null,null)},this.notifyActiveSpeakerCall=function(xt,Vt,Zt){var an=null;Vt?(Vt.belongsToRoom()?(an={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Vt.callId,roomId:Vt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Vt.data.mesh&&(an.mesh=Vt.data.mesh),Vt.myWebRTC_Stack.sendInfo("activeSpeaker",an)):(an={type:"activeSpeaker",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:Vt.callee?Vt.callerId:Vt.calleeId,callId:Vt.callId,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Vt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,an)),Dt.createAudioAmplitudeEvent(xt,!0,Vt.callId,this.userMediaStreamId)):Zt?(an={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Zt.userMediaId,roomId:Zt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Zt.myWebRTC_Stack.sendInfo("activeSpeaker",an),Dt.createAudioAmplitudeEvent(xt,!0,Zt.userMediaId,this.userMediaStreamId)):Dt.createAudioAmplitudeEvent(xt,!0,null,this.userMediaStreamId)},this.notifyNotActiveSpeaker=function(xt){var Vt,Zt,an=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var qt=this.callInfoList.length;--qt>=0;)this.callInfoList[qt].flavor==="call"?(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[qt].callId),this.notifyNotActiveSpeakerCall(xt,Vt,null)):this.callInfoList[qt].flavor==="userMedia"&&(Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[qt].callId),this.notifyNotActiveSpeakerCall(xt,null,Zt)),this.callInfoList[qt].owner===!0&&(an=!1);an===!0&&this.notifyNotActiveSpeakerCall(xt,null,null)},this.notifyNotActiveSpeakerCall=function(xt,Vt,Zt){var an=null;Vt?(Vt.belongsToRoom()?(an={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Vt.callId,roomId:Vt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Vt.data.mesh&&(an.mesh=Vt.data.mesh),Vt.myWebRTC_Stack.sendInfo("stopSpeaking",an)):(an={type:"stopSpeaking",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:Vt.callee?Vt.callerId:Vt.calleeId,callId:Vt.callId,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Vt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,an)),Dt.createAudioAmplitudeEvent(xt,!1,Vt.callId,this.userMediaStreamId)):Zt?(an={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Zt.userMediaId,roomId:Zt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:xt,streamID:this.userMediaStreamId}},Zt.myWebRTC_Stack.sendInfo("stopSpeaking",an),Dt.createAudioAmplitudeEvent(xt,!1,Zt.userMediaId,this.userMediaStreamId)):Dt.createAudioAmplitudeEvent(xt,!1,null,this.userMediaStreamId)},this.callback=function(xt,Vt){return this.closureHandler=function(Zt,an){return xt[Vt](Zt,an)},this.closureHandler},this.isUserMediaAccessAllowed=function(){return localStorage!==null&&(typeof localStorage>"u"?"undefined":Ot(localStorage))==="object"&&typeof localStorage.getItem=="function"?localStorage.getItem(Et)==="true":null},this.setUserMediaAccessAllowed=function(xt){return localStorage!==null&&(typeof localStorage>"u"?"undefined":Ot(localStorage))==="object"&&typeof localStorage.setItem=="function"?(localStorage.setItem(Et,xt?"true":"false"),!!xt):null},this.applyFiltersIfNeeded=function(xt){return this.filters===null?Promise.resolve(xt):(this.mediaFilterManager=new Kt(xt,this.filters,this.userMediaStreamId),this.mediaFilterManager.applyFilters())},this.getVideoSettings=function(){if(this.videoSettings!==!1)return this.videoSettings;var xt=this.getVideoTrack();if(!xt||typeof xt.getSettings!="function")return this.videoSettings=null,this.videoSettings;var Vt=xt.getSettings();return Vt?(this.videoSettings={},Object.prototype.hasOwnProperty.call(Vt,"width")&&(this.videoSettings.width=Vt.width),Object.prototype.hasOwnProperty.call(Vt,"height")&&(this.videoSettings.height=Vt.height),Object.prototype.hasOwnProperty.call(Vt,"frameRate")&&(this.videoSettings.frameRate=Vt.frameRate),this.videoSettings):(this.videoSettings=null,this.videoSettings)},this.isSimulcastCompliant=function(){return!!this.getVideoSettings()},this.getSimulcastProfile=function(){var xt=this.getVideoSettings();if(!xt)return null;var Vt={substream:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}},temporal:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}}};return ot.wL.type==="chrome"&&((xt.width<1280||xt.height<720)&&(Vt.substream.low.selectable=!1),Vt.temporal.high.active=!1,Vt.temporal.high.selectable=!1),Vt}}},1192:(nt,it,s)=>{s.d(it,{D:()=>Mn}),s(3710),s(1539),s(9714),s(2772),s(8674);var et=s(1549),rt=(s(4916),s(5306),s(2564),s(4812),s(561),s(5735),s(3753),s(4603),s(6755),s(9554),s(4747),s(6992),s(8783),s(3948),s(9601),s(8309),s(8264),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7042),s(7941),s(2526),s(1817),s(2165),s(5945)),ot=s(4708),gt=s(940);function dt(Kt){return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},dt(Kt)}function pt(){this.sdp={original:null,global:[],mlines:[]},this.mlines=[]}function st(Kt){var Ot=new pt,lt=Kt.split(`\r
`),Tt=0,It=null,Dt=null,Et=null,$t=null;for(Ot.sdp.original=Kt;Tt<lt.length;)if((It=lt[Tt]).length!==0)if(Et!==null)if(It.match(/^m=/))Dt=null,Et=null;else if(It.match(/^a=/)){if(Dt.push(It),!($t=It.match(/^a=([\w-]+):(\d+) (.+)$/))||$t[1]!=="rtpmap"&&$t[1]!=="rtcp-fb"&&$t[1]!=="fmtp"){if($t=It.match(/^a=mid:(\w+)$/))Et.mid=$t[1];else if(It==="a=sendrecv")Et.direction="sendrecv";else if(It==="a=recvonly")Et.direction="recvonly";else if(It==="a=sendonly")Et.direction="sendonly";else if(It==="a=inactive")Et.direction="inactive";else if($t=It.match(/^a=ssrc-group:SIM (.+)$/)){var xt=$t[1].split(" ");Et.ssrc_groups.sim.push(xt.slice())}else if($t=It.match(/^a=ssrc-group:FID (.+)$/)){var Vt=$t[1].split(" ");Et.ssrc_groups.fid.push(Vt.slice())}else if($t=It.match(/^a=ssrc:(\d+) (.+)$/)){var Zt=Et.ssrcs.find(function(In){return In.original===$t[1]});Zt||(Zt={original:$t[1],ssrc:$t[1],content:{}},Et.ssrcs.push(Zt));var an=$t[2].match(/^(\w+):(.+)$/);if(!an)throw new Error("cannot parse ssrc parameters (regex failure): "+$t[2]);if(an[1]==="cname")Zt.content.cname=an[2];else if(an[1]==="msid")Zt.content.msid=an[2];else if(an[1]==="mslabel")Zt.content.mslabel=an[2];else{if(an[1]!=="label")throw new Error("cannot parse ssrc parameters (wrong attribute): "+an[1]);Zt.content.label=an[2]}}}else if($t[1]==="rtpmap")Et.codecs[$t[2]].codec=$t[3].split("/")[0].toLowerCase(),Et.codecs[$t[2]].rtpmap=$t[3];else if($t[1]==="rtcp-fb")Et.codecs[$t[2]]["rtcp-fb"]||(Et.codecs[$t[2]]["rtcp-fb"]=[]),Et.codecs[$t[2]]["rtcp-fb"].push($t[3]);else if($t[1]==="fmtp"){Et.codecs[$t[2]].fmtp=[];for(var qt=$t[3].split(";"),tn=0;tn<qt.length;tn+=1){var gn=qt[tn].split("=");gn.length===2&&Et.codecs[$t[2]].fmtp.push(gn)}}Tt+=1}else if(It.match(/^b=/)){if(Dt.push(It),$t=It.match(/^b=AS:(\d+)$/)){Et.bandwidth=parseInt($t[1],10),Tt+=1;continue}Tt+=1}else Dt.push(It),Tt+=1;else{if($t=It.match(/^m=([a-z]+) (\d+) ([A-Z/]+) ([0-9 ]+)$/)){Dt=[],Ot.sdp.mlines.push(Dt),Dt.push(It),Et={type:$t[1],port:parseInt($t[2],10),proto:$t[3],payload_types:[],direction:"sendrecv",mid:$t[1],bandwidth:0,codecs:{},ssrc_groups:{sim:[],fid:[]},ssrcs:[]};for(var rn=$t[4].split(" "),pn=0;pn<rn.length;pn+=1)Et.payload_types.push(rn[pn]),Et.codecs[rn[pn]]={};Ot.mlines.push(Et),Tt+=1;continue}Ot.sdp.global.push(It),Tt+=1}else Tt+=1;for(Ot.unifiedPlan=!0,Tt=Ot.mlines.length;--Tt>=0;)Ot.mlines[Tt].type!=="audio"||Ot.audio?Ot.mlines[Tt].type!=="video"||Ot.video||(Ot.video=Ot.mlines[Tt]):Ot.audio=Ot.mlines[Tt],Ot.unifiedPlan===!0&&Ot.mlines[Tt].mid!==String(Tt)&&(Ot.unifiedPlan=!1);return Ot.isAudioActive=ht.bind(null,Ot,"audio"),Ot.isVideoActive=ht.bind(null,Ot,"video"),Ot}function ht(Kt,Ot){return!(Ot!=="audio"&&Ot!=="video"||Kt===null||dt(Kt)!=="object"||!Object.prototype.hasOwnProperty.call(Kt,Ot)||Kt[Ot]===null||dt(Kt[Ot])!=="object"||Kt[Ot].direction!=="sendrecv"&&Kt[Ot].direction!=="sendonly"&&Kt[Ot].direction!=="recvonly")}s(3123),s(4765),s(4723),s(9600),s(1058),s(9826),pt.prototype.mungeForSimulcasting=function(){if(this.simulcasting!==!0){this.simulcasting=!0;for(var Kt=0;Kt<this.mlines.length;Kt+=1){var Ot=this.mlines[Kt];if(Ot.type==="video"){var lt=Ot.ssrcs[0].content.cname,Tt=Ot.ssrcs[0].content.msid,It=Ot.ssrcs[0].content.mslabel,Dt=Ot.ssrcs[0].content.label,Et=[];Et.push(Ot.ssrcs[0].ssrc);for(var $t=2;--$t>=0;){var xt=Math.floor(4294967295*Math.random());Ot.ssrcs.push({original:xt,ssrc:xt,content:{cname:lt,msid:Tt,mslabel:It,label:Dt}});var Vt=Math.floor(4294967295*Math.random());Ot.ssrcs.push({original:Vt,ssrc:Vt,content:{cname:lt,msid:Tt,mslabel:It,label:Dt}}),Ot.ssrc_groups.fid.push([xt,Vt]),Et.push(xt)}Ot.ssrc_groups.sim.push(Et)}}}},pt.prototype.generate=function(){for(var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ot=[],lt=0;lt<this.sdp.global.length;lt+=1){var Tt=this.sdp.global[lt],It=Tt.match(/^a=group:BUNDLE([\w ]+)$/);if(It){Ot.push("a=group:BUNDLE");for(var Dt=0;Dt<this.mlines.length;Dt+=1)this.mlines[Dt].direction==="inactive"&&Kt.stripInactiveMLines===!0||(Ot.push(" "),Ot.push(this.mlines[Dt].mid));Ot.push(`\r
`)}else Ot.push(Tt),Ot.push(`\r
`)}for(var Et=0;Et<this.sdp.mlines.length;Et+=1){var $t=this.mlines[Et];if($t.direction!=="inactive"||Kt.stripInactiveMLines!==!0)for(var xt=!1,Vt=this.sdp.mlines[Et],Zt=0;Zt<Vt.length;Zt+=1){var an=Vt[Zt];if(an.match(/^m=/))Ot.push("m="),Ot.push($t.type),Ot.push(" "),Ot.push($t.port),Ot.push(" "),Ot.push($t.proto),Ot.push(" "),Ot.push($t.payload_types.join(" ")),Ot.push(`\r
`);else if(an.match(/^a=/)){var qt=an.match(/^a=([\w-]+):(\d+) (.+)$/);if(qt&&(qt[1]==="rtpmap"||qt[1]==="rtcp-fb"||qt[1]==="fmtp")){if(qt[1]==="rtpmap"){var tn=qt[2];if($t.codecs[tn]){Ot.push("a=rtpmap:"),Ot.push(tn),Ot.push(" "),Ot.push($t.codecs[tn].rtpmap),Ot.push(`\r
`);var gn=$t.codecs[tn]["rtcp-fb"];if(gn)for(var rn=0;rn<gn.length;rn+=1)Ot.push("a=rtcp-fb:"),Ot.push(tn),Ot.push(" "),Ot.push(gn[rn]),Ot.push(`\r
`);var pn=$t.codecs[tn].fmtp;if(pn){for(var In=[],Pn=0;Pn<pn.length;Pn+=1)In.push(pn[Pn].join("="));In.length>0&&(Ot.push("a=fmtp:"),Ot.push(tn),Ot.push(" "),Ot.push(In.join(";")),Ot.push(`\r
`))}continue}continue}if(qt[1]==="rtcp-fb"||qt[1]==="fmtp")continue;throw new Error("internal error")}if(an.match(/^a=mid:(\w+)$/))Ot.push("a=mid:"),Ot.push($t.mid),Ot.push(`\r
`),$t.bandwidth>0&&(Ot.push("b=AS:"),Ot.push($t.bandwidth),Ot.push(`\r
`),Ot.push("b=TIAS:"),Ot.push($t.bandwidth),Ot.push("000"),Ot.push(`\r
`));else if(an!=="a=sendrecv"&&an!=="a=recvonly"&&an!=="a=sendonly"&&an!=="a=inactive"){if(!an.match(/^a=ssrc-group:SIM (.+)$/)){if(!an.match(/^a=ssrc-group:FID (.+)$/)){if(an.match(/^a=ssrc:(\d+) (.+)$/)){if(xt)continue;xt=!0;for(var _n=0;_n<$t.ssrc_groups.sim.length;_n+=1)Ot.push("a=ssrc-group:SIM "),Ot.push($t.ssrc_groups.sim[_n].join(" ")),Ot.push(`\r
`);for(var Ln=0;Ln<$t.ssrc_groups.fid.length;Ln+=1)Ot.push("a=ssrc-group:FID "),Ot.push($t.ssrc_groups.fid[Ln].join(" ")),Ot.push(`\r
`);for(var Vn=function(hr){var mr=$t.ssrcs[hr];["cname","msid","mslabel","label"].forEach(function(yr){Object.prototype.hasOwnProperty.call(mr.content,yr)&&(Ot.push("a=ssrc:"),Ot.push(mr.ssrc),Ot.push(" "),Ot.push(yr),Ot.push(":"),Ot.push(mr.content[yr]),Ot.push(`\r
`))})},or=0;or<$t.ssrcs.length;or+=1)Vn(or);continue}Ot.push(an),Ot.push(`\r
`);continue}}}else Ot.push("a="),Ot.push($t.direction),Ot.push(`\r
`)}else{if(an.match(/^b=/))continue;Ot.push(an),Ot.push(`\r
`)}}}return Ot.join("")};var at=et.Y.get("SDPManager"),ut=function(){at.debug("SDPManager"),this.getSDPLines=function(Kt){at.debug("SDPManager::getSDPLines");var Ot,lt=Kt.split(`\r
`);for(Ot=0;Ot<lt.length;Ot+=1)at.log("sdpLines[i] : "+lt[Ot]);return lt},this.getAudioMediaDescriptionPart=function(Kt){at.debug("SDPManager::getAudioMediaDescriptionPart");var Ot=Kt.split("m=audio"),lt=null;return Ot[1]!==void 0&&Ot[1]!==null?(lt=Ot[1].split("m=video"),at.log("SDP audio part : "+lt[0]),lt[0]):null},this.getVideoMediaDescriptionPart=function(Kt){at.debug("SDPManager::getVideoMediaDescriptionPart");var Ot,lt=Kt.split("m=video");for(Ot=0;Ot<lt.length;Ot+=1)at.log("sdpMediaPart[i] : "+lt[Ot]);return lt[1]},this.searchMediaDescriptionForRecvOnly=function(Kt){return at.debug("searchMediaDescriptionForRecvOnly"),Kt.search("a=recvonly")!==-1?(at.log("recvonly found in media description"),!0):(at.log("recvonly not found in media description"),!1)},this.searchSDPForRecvOnly=function(Kt){return Kt!==void 0?(at.log("sdpPart !== undefined"),this.searchMediaDescriptionForRecvOnly(Kt)):(at.log("recvonly not found in SDP"),!1)},this.searchMediaDescriptionForSendOnly=function(Kt){return at.debug("searchMediaDescriptionForSendOnly"),Kt.search("a=sendonly")!==-1?(at.log("sendonly found in media description"),!0):(at.log("sendonly not found in media description"),!1)},this.searchSDPForSendOnly=function(Kt){return Kt!==void 0?(at.log("sdpPart !== undefined"),this.searchMediaDescriptionForSendOnly(Kt)):(at.log("sendonly not found in SDP"),!1)},this.searchMediaDescriptionForInactive=function(Kt){return at.debug("searchMediaDescriptionForInactive"),Kt.search("a=inactive")!==-1?(at.log("inactive found in media description"),!0):(at.log("inactive not found in media description"),!1)},this.searchSDPForInactive=function(Kt){return Kt!==void 0?(at.log("sdpPart !== undefined"),this.searchMediaDescriptionForInactive(Kt)):(at.log("inactive not found in SDP"),!1)},this.stripAudioMediaDescriptionFromSDP=function(Kt){at.debug("SDPManager::stripAudioMediaDescriptionFromSDP");var Ot=this.createGuideline(Kt);return Ot.audio?(Ot.audio.direction="inactive",Ot.generate({stripInactiveMLines:!0})):Kt},this.stripVideoMediaDescriptionFromSDP=function(Kt){at.debug("SDPManager::stripVideoMediaDescriptionFromSDP");var Ot=this.createGuideline(Kt);return Ot.video?(Ot.video.direction="inactive",Ot.generate({stripInactiveMLines:!0})):Kt},this.setAudioBandwidth=function(Kt,Ot){return at.info("SDPManager::setAudioBandwidth",Ot),Ot?Kt=Kt.replace(/a=mid:audio\r\n/g,`a=mid:audio\r
b=AS:`+Ot+`\r
`):(at.warn("No maxAudioBW !"),Kt)},this.setVideoBandwidth=function(Kt,Ot){if(at.info("SDPManager::setVideoBandwidth",Ot),!Ot)return at.warn("No maxVideoBW !"),Kt;for(var lt=[],Tt=Kt.split(`\r
`),It=0,Dt=null,Et=null;It<Tt.length;)if((Dt=Tt[It]).length!==0)if(Et!==null)Dt.match(/^m=/)?Et=null:Dt.match(/^a=mid:(\w+)$/)?(lt.push(Dt),lt.push(`\r
`),lt.push("b=AS:"),lt.push(Ot),lt.push(`\r
`),lt.push("b=TIAS:"),lt.push(Ot),lt.push("000"),lt.push(`\r
`),It+=1):(Dt.match(/^b=([A-Z]+):(\w+)$/)||(lt.push(Dt),lt.push(`\r
`)),It+=1);else{var $t=Dt.match(/^m=([a-z]+)(.+)$/);if($t&&$t[1]==="video"){Et="video",lt.push(Dt),lt.push(`\r
`),It+=1;continue}lt.push(Dt),lt.push(`\r
`),It+=1}else It+=1;return lt.join("")},this.setDataBandwidth=function(Kt,Ot){return at.info("SDPManager::setDataBandwidth",Ot),Ot?Kt=Kt.replace(/a=mid:data\r\n/g,`a=mid:data\r
b=AS:`+Ot+`\r
`):(at.warn("No maxDataBW !"),Kt)},this.setSendOnlyForAudio=function(Kt){at.debug("SDPManager::setSendOnlyForAudio");var Ot=this.createGuideline(Kt);return(0,ot.ki)(Ot,"audio","object")&&(Ot.audio.direction="sendonly"),Ot.generate()},this.setSendOnlyForVideo=function(Kt){at.debug("SDPManager::setSendOnlyForVideo");var Ot=this.createGuideline(Kt);return(0,ot.ki)(Ot,"video","object")&&(Ot.video.direction="sendonly"),Ot.generate()},this.setSendOnly=function(Kt){at.debug("SDPManager::setSendOnly : global");var Ot=this.createGuideline(Kt);return(0,ot.ki)(Ot,"audio","object")&&(Ot.audio.direction="sendonly"),(0,ot.ki)(Ot,"video","object")&&(Ot.video.direction="sendonly"),Ot.generate()},this.setRecvOnlyForAudio=function(Kt){at.debug("SDPManager::setRecvOnlyForAudio");var Ot=this.createGuideline(Kt);return Ot.audio&&Ot.audio.direction!=="inactive"&&(Ot.audio.direction="recvonly"),Ot.generate()},this.setRecvOnlyForVideo=function(Kt){at.debug("SDPManager::setRecvOnlyForVideo");var Ot=this.createGuideline(Kt);return Ot.video&&Ot.video.direction!=="inactive"&&(Ot.video.direction="recvonly"),Ot.generate()},this.setRecvOnly=function(Kt){at.debug("SDPManager::setRecvOnly : global");var Ot=this.createGuideline(Kt);return Ot.audio&&Ot.audio.direction!=="inactive"&&(Ot.audio.direction="recvonly"),Ot.video&&Ot.video.direction!=="inactive"&&(Ot.video.direction="recvonly"),Ot.generate()},this.updateSDPcodecs=function(Kt,Ot,lt,Tt){var It,Dt,Et,$t,xt,Vt,Zt,an,qt=!1,tn=new RegExp(`\r
$`),gn=!1,rn=null,pn="",In="",Pn="",_n="",Ln="",Vn="",or="",hr="";if(at.log(`updateSDPcodecs():
	sdpType = `+Ot+`
	mediaType = `+lt+`
	availableCodecSet = `+Tt+`
`),Tt=="")return Kt;for(Et=(Et=RTCSessionDescription&&Kt instanceof RTCSessionDescription?Kt.sdp:window.SessionDescription&&Kt instanceof SessionDescription?Kt.toSdp():Kt).split(`\r
m=`),tn.test(Et[Et.length-2])===!1&&(Et[Et.length-2]=Et[Et.length-2]+`\r
`,gn=!0),It=0;It<Et.length;It++)if(Et[It].indexOf(lt)===0){for(rn=Et[It].split(`\r
`)[0].split(" "),Dt=3;Dt<rn.length;Dt++)if($t=!0,isNaN(rn[Dt])===!1){switch(In="a=rtpmap:"+rn[Dt]+" ",(xt=Et[It].indexOf(In))!==-1&&(Vt=Et[It].indexOf(`\r
`,xt)),rn[Dt]){case 0:pn="PCMU/8000";break;case 8:pn="PCMA/8000";break;case 9:pn="G722/8000";break;case 13:pn="CN/8000";break;case 18:pn="G729/8000";break;default:xt!==-1&&(pn=Et[It].substring(xt+In.length,Vt))}pn!=""&&Tt.indexOf(pn)!==-1?at.log("PT("+rn[Dt]+"): "+pn+` FOUND in availableCodecSet.
`):($t=!1,at.log("PT("+rn[Dt]+"): "+pn+` NOT FOUND in availableCodecSet.
`)),$t||(Pn=In+`.*\r
`,_n="a=fmtp:"+rn[Dt]+` .*\r
`,or="a=rtcp-fb:"+rn[Dt]+` .*\r
`,Ln=" "+rn[Dt]+" ",Vn=" "+rn[Dt]+"\r",Et[It]=Et[It].replace(new RegExp(Pn,"g"),""),Et[It]=Et[It].replace(new RegExp(_n,"g"),""),Et[It]=Et[It].replace(new RegExp(or,"g"),""),(an=(Zt=Et[It].split(`
`))[0].split("RTP"))[1]=an[1].replace(Ln," "),an[1]=an[1].replace(Vn,"\r"),Zt[0]=an.join("RTP"),Et[It]=Zt.join(`
`),lt==="video"&&(or="a=rtcp-fb:"+rn[Dt]+` .*\r
`,Et[It]=Et[It].replace(new RegExp(or,"g"),""),pn!=""&&pn.substr(0,4)==="rtx/"&&(hr=`a=ssrc-group:FID .*\r
`,Et[It]=Et[It].replace(new RegExp(hr,"g"),""),(Zt=Et[It].split(`\r
a=`)).splice(Zt.length-8,4),Et[It]=Zt.join(`\r
a=`))),qt=!0)}break}return gn&&(Et[Et.length-2]=Et[Et.length-2].substr(0,Et[Et.length-2].length-2)),Et=Et.join(`\r
m=`),qt===!0?(at.log("updateSDPcodecs(), SDP has been updated."),RTCSessionDescription&&Kt instanceof RTCSessionDescription?new RTCSessionDescription({type:Ot,sdp:Et}):window.SessionDescription&&Kt instanceof SessionDescription?new SessionDescription(Et):Et):(at.log("updateSDPcodecs(), SDP has not been updated."),Kt)},this.preferOpus=function(Kt){var Ot,lt=Kt.split(`\r
`),Tt=0,It=null;for(Ot=0;Ot<lt.length;Ot+=1)if(lt[Ot].search("m=audio")!==-1){Tt=Ot;break}if(Tt===0)return Kt;for(Ot=0;Ot<lt.length;Ot+=1)if(lt[Ot].search("opus/48000")!==-1){(It=this.extractSdp(lt[Ot],/:(\d+) opus\/48000/i))&&(lt[Tt]=this.setDefaultCodec(lt[Tt],It));break}return(lt=this.removeCN(lt,Tt)).join(`\r
`)},this.removeCN=function(Kt,Ot){var lt=0,Tt=Kt[Ot].split(" "),It=null,Dt=0;for(lt=Kt.length-1;lt>=0;lt--)(It=this.extractSdp(Kt[lt],/a=rtpmap:(\d+) CN\/\d+/i))&&((Dt=Tt.indexOf(It))!==-1&&Tt.splice(Dt,1),Kt.splice(lt,1));return Kt[Ot]=Tt.join(" "),Kt},this.extractSdp=function(Kt,Ot){var lt=Kt.match(Ot);return lt&&lt.length==2?lt[1]:null},this.setDefaultCodec=function(Kt,Ot){var lt=0,Tt=Kt.split(" "),It=Tt.slice(0,3);for(It.push(Ot),lt=3;lt<Tt.length;lt++)Tt[lt]!==Ot&&It.push(Tt[lt]);return It.join(" ")},this.findLineInRange=function(Kt,Ot,lt,Tt,It){var Dt,Et=lt!==-1?lt:Kt.length;for(Dt=Ot;Dt<Et;++Dt)if(Kt[Dt].indexOf(Tt)===0&&(!It||Kt[Dt].toLowerCase().indexOf(It.toLowerCase())!==-1))return Dt;return null},this.findLine=function(Kt,Ot,lt){return this.findLineInRange(Kt,0,-1,Ot,lt)},this.getCodecPayloadType=function(Kt,Ot){var lt=this.findLine(Kt,"a=rtpmap",Ot);return lt?this.getCodecPayloadTypeFromLine(Kt[lt]):null},this.getCodecPayloadTypeFromLine=function(Kt){var Ot=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),lt=Kt.match(Ot);return lt&&lt.length===2?lt[1]:null},this.findFmtpLine=function(Kt,Ot){var lt=this.getCodecPayloadType(Kt,Ot);return lt?this.findLine(Kt,"a=fmtp:"+lt.toString()):null},this.writeFmtpLine=function(Kt){if(!Kt.hasOwnProperty("pt")||!Kt.hasOwnProperty("params"))return null;var Ot=Kt.pt,lt=Kt.params,Tt=[],It=0,Dt=null;for(Dt in lt)Tt[It]=Dt+"="+lt[Dt],++It;return It===0?null:"a=fmtp:"+Ot.toString()+" "+Tt.join("; ")},this.setCodecParam=function(Kt,Ot,lt,Tt){var It=Kt.split(`\r
`),Dt=this.findFmtpLine(It,Ot),Et={},$t=null,xt=null;if(Dt===null){if((xt=this.findLine(It,"a=rtpmap",Ot))===null)return Kt;$t=this.getCodecPayloadTypeFromLine(It[xt]),Et.pt=$t.toString(),Et.params={},Et.params[lt]=Tt,It.splice(xt+1,0,this.writeFmtpLine(Et))}else(Et=function(Vt){var Zt,an={},qt=Vt.indexOf(" "),tn=Vt.substring(qt+1).split("; "),gn=new RegExp("a=fmtp:(\\d+)"),rn=Vt.match(gn),pn={},In=null;if(!rn||rn.length!==2)return null;for(an.pt=rn[1],Zt=0;Zt<tn.length;++Zt)(In=tn[Zt].split("=")).length===2&&(pn[In[0]]=In[1]);return an.params=pn,an}(It[Dt])).params[lt]=Tt,It[Dt]=this.writeFmtpLine(Et);return It.join(`\r
`)},this.maybePreferCodec=function(Kt,Ot,lt){var Tt,It,Dt=Ot+" codec",Et=null;return lt?(at.log("Prefer "+Dt+": "+lt),Et=Kt.split(`\r
`),(Tt=this.findLine(Et,"m=",Ot))===null?(at.log("mLineIndex === null"),Kt):((It=this.getCodecPayloadType(Et,lt))&&(Et[Tt]=this.setDefaultCodec(Et[Tt],It)),Kt=Et.join(`\r
`))):(at.log("No preference on "+Dt+"."),Kt)},this.createGuideline=st};function ft(Kt,Ot){(Ot==null||Ot>Kt.length)&&(Ot=Kt.length);for(var lt=0,Tt=new Array(Ot);lt<Ot;lt++)Tt[lt]=Kt[lt];return Tt}function mt(Kt,Ot){for(var lt=0;lt<Ot.length;lt++){var Tt=Ot[lt];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(Kt,Tt.key,Tt)}}function yt(){return!0}function At(Kt){return Kt===null}function wt(Kt){return Kt!==null}s(9753),s(1038),s(4553),s(9070);var Pt=function(){function Kt(){(function(Tt,It){if(!(Tt instanceof It))throw new TypeError("Cannot call a class as a function")})(this,Kt),this._callbacks=[],this._timeout=null,this._err=null,this._data=null,this._interrupted=null,this._fulfilled=!1}var Ot,lt;return Ot=Kt,lt=[{key:"err",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._err}},{key:"data",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._data}},{key:"interrupted",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._interrupted}},{key:"fulfilled",get:function(){return this._fulfilled}},{key:"_fulfill",value:function(Tt,It,Dt){this._err=Tt,this._data=It,this._interrupted=Dt,this._fulfilled=!0;var Et=this._callbacks.slice();this.clear();var $t,xt=function(qt,tn){var gn=typeof Symbol<"u"&&qt[Symbol.iterator]||qt["@@iterator"];if(!gn){if(Array.isArray(qt)||(gn=function(Ln,Vn){if(Ln){if(typeof Ln=="string")return ft(Ln,Vn);var or=Object.prototype.toString.call(Ln).slice(8,-1);return or==="Object"&&Ln.constructor&&(or=Ln.constructor.name),or==="Map"||or==="Set"?Array.from(Ln):or==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or)?ft(Ln,Vn):void 0}}(qt))||tn&&qt&&typeof qt.length=="number"){gn&&(qt=gn);var rn=0,pn=function(){};return{s:pn,n:function(){return rn>=qt.length?{done:!0}:{done:!1,value:qt[rn++]}},e:function(Ln){throw Ln},f:pn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var In,Pn=!0,_n=!1;return{s:function(){gn=gn.call(qt)},n:function(){var Ln=gn.next();return Pn=Ln.done,Ln},e:function(Ln){_n=!0,In=Ln},f:function(){try{Pn||gn.return==null||gn.return()}finally{if(_n)throw In}}}}(Et);try{for(xt.s();!($t=xt.n()).done;){var Vt=$t.value,Zt=Vt.match,an=Vt.callback;Zt(this._err)&&an(this._err,this._data,this._interrupted)}}catch(qt){xt.e(qt)}finally{xt.f()}}},{key:"clear",value:function(){this.clearTimeout(),this.removeCallback()}},{key:"setTimeout",value:function(Tt){function It(Dt,Et,$t){return Tt.apply(this,arguments)}return It.toString=function(){return Tt.toString()},It}(function(Tt,It,Dt){var Et=this;this.clearTimeout(),this._timeout=setTimeout(It===null?function(){Et._fulfill(null,Dt,!0)}:function(){Et._fulfill(typeof It=="string"?new Error(It):It,void 0,!0)},Tt)})},{key:"clearTimeout",value:function(Tt){function It(){return Tt.apply(this,arguments)}return It.toString=function(){return Tt.toString()},It}(function(){this._timeout!==null&&(clearTimeout(this._timeout),this._timeout=null)})},{key:"onFulfillment",value:function(Tt){this._callbacks.push({match:yt,callback:Tt})}},{key:"onSuccess",value:function(Tt){this._callbacks.push({match:At,callback:Tt})}},{key:"onFailure",value:function(Tt){this._callbacks.push({match:wt,callback:Tt})}},{key:"removeCallback",value:function(Tt){if(typeof Tt=="function"){var It=this._callbacks.findIndex(function(Dt){return Dt.callback===Tt});It>=0&&this._callbacks.splice(It,1)}else this._callbacks.splice(0,this._callbacks.length)}},{key:"fulfill",value:function(Tt,It){Tt===null?this._fulfill(null,It,!1):this._fulfill(typeof Tt=="string"?new Error(Tt):Tt,void 0,!1)}}],lt&&mt(Ot.prototype,lt),Object.defineProperty(Ot,"prototype",{writable:!1}),Kt}(),Rt=(s(1249),s(7327),s(3843),function(Kt,Ot,lt,Tt,It,Dt,Et,$t){this.rawStats={},this.rawStats.connectedPair=[],this.rawStats.audio_send=[],this.rawStats.audio_recv=[],this.rawStats.video_send=[],this.rawStats.video_recv=[],this.instantRTT=0,this.moyRttCP=[0,0,0,0,0,0,0,0,0,0],this.moyRttAS=[0,0,0,0,0,0,0,0,0,0],this.moyRttVS=[0,0,0,0,0,0,0,0,0,0],this.tauxPacketLossAS=[0],this.oldLostAS=this.oldSentAS=0,this.oldLostVS=this.oldLostVS=0,this.cptTaux=0,this.tauxPacketLossVS=[0],this.oldBandwidthAS=0,this.oldBandwidthVS=0,this.oldBandwidthAR=0,this.oldBandwidthVR=0,this.bandwidthAS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthAR=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVR=[0,0,0,0,0,0,0,0,0,0],this.qosIn=0,this.qosInAverage=0,this.qosInAverageCount=0,this.qosAudioIn=0,this.qosAudioInAverage=0,this.qosAudioInAverageCount=0,this.qosVideoIn=0,this.qosVideoInAverage=0,this.qosVideoInAverageCount=0,this.qosOut=0,this.qosOutAverage=0,this.qosOutAverageCount=0,this.qosAudioOut=0,this.qosAudioOutAverage=0,this.qosAudioOutAverageCount=0,this.qosVideoOut=0,this.qosVideoOutAverage=0,this.qosVideoOutAverageCount=0,this.onQosChange=Ot,this.onQosAudioChange=lt,this.onQosVideoChange=Tt,this.cpt=0,this.cptRes=5,this.cptDb=60,this.saveStatsFlag=!0,this.tabQosIn=[],this.tabQosAudioIn=[],this.tabQosVideoIn=[],this.tabQosOut=[],this.tabQosAudioOut=[],this.tabQosVideoOut=[],this.tabTimestamp=[],this.tabDelay=[],this.tabJitterBufferAudio=[],this.tabJitterBufferVideo=[],this.tabAudioRtt=[],this.tabVideoRtt=[],this.tabAudioBW=[],this.tabVideoBW=[],this.clientId=Et,this.callId=It,this.apiKey=Dt,this.socket=$t,this.interval=Kt,this.insertStats=function(xt,Vt,Zt,an){var qt,tn,gn,rn=null;for(this.cpt=this.cpt+this.interval,qt=0;qt<xt.length;++qt){var pn=xt[qt];switch(pn.type){case"googCandidatePair":for(rn=pn.names(),gn=0;gn<rn.length;++gn)if(rn[gn]=="googActiveConnection"&&pn.stat(rn[gn])=="true")for(tn=0;tn<rn.length;++tn)rn[tn]=="bytesSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.connectedPair.bytesSent=pn.stat(rn[tn])),rn[tn]=="bytesReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.connectedPair.bytesReceived=pn.stat(rn[tn])),rn[tn]=="googRtt"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.connectedPair.googRtt=pn.stat(rn[tn]));break;case"ssrc":for(rn=pn.names(),gn=0;gn<rn.length;++gn){if(rn[gn]=="audioOutputLevel")for(tn=0;tn<rn.length;++tn)rn[tn]=="packetsLost"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.packetsLost=pn.stat(rn[tn])),rn[tn]=="googDecodingPLC"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.googDecodingPLC=pn.stat(rn[tn])),rn[tn]=="googJitterReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.googJitterReceived=pn.stat(rn[tn])),rn[tn]=="googJitterBufferMs"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.googJitterBufferMs=pn.stat(rn[tn])),rn[tn]=="googCurrentDelayMs"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.googCurrentDelayMs=pn.stat(rn[tn])),rn[tn]=="bytesReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_recv.bytesReceived=pn.stat(rn[tn]));if(rn[gn]=="audioInputLevel")for(tn=0;tn<rn.length;++tn)rn[tn]=="googRtt"&&pn.stat(rn[tn])!==void 0&&pn.stat(rn[tn])!=-1&&(this.rawStats.audio_send.googRtt=pn.stat(rn[tn])),rn[tn]=="packetsLost"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_send.packetsLost=pn.stat(rn[tn])),rn[tn]=="packetsSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_send.packetsSent=pn.stat(rn[tn])),rn[tn]=="bytesSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_send.bytesSent=pn.stat(rn[tn])),rn[tn]=="googJitterReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.audio_send.googJitterReceived=pn.stat(rn[tn]));if(rn[gn]=="googFrameHeightReceived")for(tn=0;tn<rn.length;++tn)rn[tn]=="googFrameHeightReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.FrameHeight=pn.stat(rn[tn])),rn[tn]=="googFrameWidthReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.FrameWidth=pn.stat(rn[tn])),rn[tn]=="googCurrentDelayMs"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.delay=pn.stat(rn[tn])),rn[tn]=="packetsLost"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.packetsLost=pn.stat(rn[tn])),rn[tn]=="googNacksSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.googNacksSent=pn.stat(rn[tn])),rn[tn]=="googJitterBufferMs"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.googJitterBufferMs=pn.stat(rn[tn])),rn[tn]=="bytesReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.bytesReceived=pn.stat(rn[tn])),rn[tn]=="googFrameRateReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_recv.googFrameRateReceived=pn.stat(rn[tn]));if(rn[gn]=="googFrameHeightSent")for(tn=0;tn<rn.length;++tn)rn[tn]=="googFrameHeightSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.FrameHeight=pn.stat(rn[tn])),rn[tn]=="googFrameWidthSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.FrameWidth=pn.stat(rn[tn])),rn[tn]=="packetsLost"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.packetsLost=pn.stat(rn[tn])),rn[tn]=="googNacksReceived"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.googNacksReceived=pn.stat(rn[tn])),rn[tn]=="googRtt"&&pn.stat(rn[tn])!==void 0&&pn.stat(rn[tn])!=-1&&(this.rawStats.video_send.googRtt=pn.stat(rn[tn])),rn[tn]=="packetsSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.packetsSent=pn.stat(rn[tn])),rn[tn]=="bytesSent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.bytesSent=pn.stat(rn[tn])),rn[tn]=="googEncodeUsagePercent"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.googEncodeUsagePercent=pn.stat(rn[tn])),rn[tn]=="googCpuLimitedResolution"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.googCpuLimitedResolution=pn.stat(rn[tn])),rn[tn]=="googBandwidthLimitedResolution"&&pn.stat(rn[tn])!==void 0&&(this.rawStats.video_send.googBandwidthLimitedResolution=pn.stat(rn[tn]))}}}this.computeStats(Vt,Zt,an),this.cpt%this.cptRes==0&&this.saveStatsLocal(),this.cpt%this.cptDb==0&&this.saveStatsToDb(!1)},this.saveStatsLocal=function(){if(this.saveStatsFlag){var xt=Date.now();this.tabTimestamp.push(xt),this.tabQosIn.push(this.qosIn),this.tabQosAudioIn.push(this.qosAudioIn),this.qosVideoIn!==0&&this.tabQosVideoIn.push(this.qosVideoIn),this.tabQosOut.push(this.qosOut),this.tabQosAudioOut.push(this.qosAudioOut),this.qosVideoOut!==0&&this.tabQosVideoOut.push(this.qosVideoOut),this.tabJitterBufferAudio.push(this.rawStats.audio_recv.googJitterBufferMs),this.rawStats.video_recv.googJitterBufferMs!==void 0&&this.tabJitterBufferVideo.push(this.rawStats.video_recv.googJitterBufferMs),this.rawStats.video_send.googRtt!==void 0&&this.tabVideoRtt.push(this.rawStats.video_send.googRtt),this.tabAudioRtt.push(this.rawStats.audio_send.googRtt),this.bandwidthAS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAS)/1024),this.bandwidthVS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVS)/1024),this.bandwidthAR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAR)/1024),this.bandwidthVR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVR)/1024)}},this.saveStatsToDb=function(xt){},this.saveStatsToDb=function(xt){this.saveStatsFlag=xt},this.computeStats=function(xt,Vt,Zt){var an=0;this.rawStats.connectedPair.googRtt!==-1&&this.rawStats.connectedPair.googRtt!==0&&this.rawStats.connectedPair.googRtt!==void 0&&this.add(this.rawStats.connectedPair.googRtt,this.moyRttCP),this.rawStats.video_send.googRtt!==-1&&this.rawStats.video_send.googRtt!==0&&this.rawStats.video_send.googRtt!==void 0&&(this.add(this.rawStats.video_send.googRtt,this.moyRttVS),this.instantRTT=this.rawStats.video_send.googRtt),this.rawStats.audio_send.googRtt!==-1&&this.rawStats.audio_send.googRtt!==0&&this.rawStats.audio_send.googRtt!==void 0&&this.add(this.rawStats.audio_send.googRtt,this.moyRttAS),this.rawStats.audio_send.packetsLost!==-1&&this.rawStats.audio_send.packetsLost!==void 0&&this.rawStats.audio_send.packetsSent!==-1&&this.rawStats.audio_send.packetsSent!==0&&this.rawStats.audio_send.packetsSent!==void 0&&(an=100*(this.rawStats.audio_send.packetsLost-this.oldLostAS)/(this.rawStats.audio_send.packetsSent-this.oldSentAS),this.oldLostAS=this.rawStats.audio_send.packetsLost,this.oldSentAS=this.rawStats.audio_send.packetsSent,this.add(an,this.tauxPacketLossAS)),this.rawStats.video_send.packetsLost!==-1&&this.rawStats.video_send.packetsLost!==void 0&&this.rawStats.video_send.packetsSent!==-1&&this.rawStats.video_send.packetsSent!==0&&this.rawStats.video_send.packetsSent!==void 0&&(an=100*(this.rawStats.video_send.packetsLost-this.oldLostVS)/(this.rawStats.video_send.packetsSent-this.oldSentVS),this.oldLostVS=this.rawStats.video_send.packetsLost,this.oldSentVS=this.rawStats.video_send.packetsSent,this.add(an,this.tauxPacketLossVS)),this.rawStats.audio_recv.bytesReceived!==-1&&this.rawStats.audio_recv.bytesReceived!==void 0&&(this.oldBandwidthAR===void 0&&(this.oldBandwidthAR=0),this.add((this.rawStats.audio_recv.bytesReceived-this.oldBandwidthAR)/this.interval,this.bandwidthAR),this.oldBandwidthAR=this.rawStats.audio_recv.bytesReceived),this.rawStats.video_recv.bytesReceived!==-1&&this.rawStats.video_recv.bytesReceived!==void 0&&(this.oldBandwidthVR===void 0&&(this.oldBandwidthVR=0),this.add((this.rawStats.video_recv.bytesReceived-this.oldBandwidthVR)/this.interval,this.bandwidthVR),this.oldBandwidthVR=this.rawStats.video_recv.bytesReceived),this.rawStats.audio_send.bytesSent!==-1&&this.rawStats.audio_send.bytesSent!==void 0&&(this.oldBandwidthAS===void 0&&(this.oldBandwidthAS=0),this.add((this.rawStats.audio_send.bytesSent-this.oldBandwidthAS)/this.interval,this.bandwidthAS),this.oldBandwidthAS=this.rawStats.audio_send.bytesSent),this.rawStats.video_send.bytesSent!==-1&&this.rawStats.video_send.bytesSent!==void 0&&(this.oldBandwidthVS===void 0&&(this.oldBandwidthVS=0),this.add((this.rawStats.video_send.bytesSent-this.oldBandwidthVS)/this.interval,this.bandwidthVS),this.oldBandwidthVS=this.rawStats.video_send.bytesSent);var qt=0,tn=0,gn=0,rn=0,pn=0,In=0,Pn=0,_n=0,Ln=0,Vn=0,or=this.getCodecs(Vt),hr=8*this.Average(this.bandwidthAS)/1024;if(hr<5?qt=1:hr>=5&&hr<10?qt=2:hr>=10&&(qt=3),or!==null&&or[1]){var mr=8*this.Average(this.bandwidthVS)/1024;mr<240?rn=1:mr>=240&&mr<330?rn=2:mr>=330&&(rn=3)}this.rawStats.audio_recv.googJitterBufferMs<60?tn=3:this.rawStats.audio_recv.googJitterBufferMs>=60&&this.rawStats.audio_recv.googJitterBufferMs<100?tn=2:this.rawStats.audio_recv.googJitterBufferMs>=100&&(tn=1),this.rawStats.audio_recv.googCurrentDelayMs<100?gn=3:this.rawStats.audio_recv.googCurrentDelayMs>=100&&this.rawStats.audio_recv.googCurrentDelayMs<200?gn=2:this.rawStats.audio_recv.googCurrentDelayMs>=200&&(gn=1),or!==null&&or[1]&&(this.rawStats.video_recv.googJitterBufferMs<100?pn=3:this.rawStats.video_recv.googJitterBufferMs>=100&&this.rawStats.video_recv.googJitterBufferMs<200?pn=2:this.rawStats.video_recv.googJitterBufferMs>=200&&(pn=1));var yr=!1,Rr=!1,Or=!1;or!==null&&or[1]?(Math.ceil((qt+2*rn+pn+tn+gn)/6)!=this.qosIn&&(yr=!0),this.qosIn=Math.ceil((qt+2*rn+pn+tn+gn)/6),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((qt+tn+gn)/3)!=this.qosAudioIn&&(Rr=!0),this.qosAudioIn=Math.ceil((qt+tn+gn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++,Math.ceil((2*rn+pn)/3)!=this.qosVideoIn&&(Or=!0),this.qosVideoIn=Math.ceil((2*rn+pn)/3),this.qosVideoInAverage=(this.qosVideoInAverage*this.qosVideoInAverageCount+this.qosVideoIn)/(this.qosVideoInAverageCount+1),this.qosVideoInAverageCount++):(Math.ceil((qt+tn+gn)/3)!=this.qosOut&&(yr=!0),this.qosIn=Math.ceil((qt+tn+gn)/3),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((qt+tn+gn)/3)!=this.qosAudioIn&&(Rr=!0),this.qosAudioIn=Math.ceil((qt+tn+gn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++),this.RttAverage(this.moyRttAS)<80?Pn=3:this.RttAverage(this.moyRttAS)>=80&&this.RttAverage(this.moyRttAS)<150?Pn=2:this.RttAverage(this.moyRttAS)>=150&&(Pn=1),this.tauxPacketLossAS<=5?In=3:this.tauxPacketLossAS>5&&this.tauxPacketLossAS<10?In=2:this.tauxPacketLossAS>=10&&(In=1),this.rawStats.audio_recv.googJitterReceived<80?_n=3:this.rawStats.audio_recv.googJitterReceived>=80&&this.rawStats.audio_recv.googJitterReceived<150?_n=2:this.rawStats.audio_recv.googJitterReceived>=150&&(_n=1),or!==null&&or[1]&&(this.tauxPacketLossVS<=5?Ln=3:this.tauxPacketLossVS>5&&this.tauxPacketLossVS<10?Ln=2:this.tauxPacketLossVS>=10&&(Ln=1),this.RttAverage(this.moyRttVS)<80?Vn=3:this.RttAverage(this.moyRttVS)>=80&&this.RttAverage(this.moyRttVS)<150?Vn=2:this.RttAverage(this.moyRttVS)>=150&&(Vn=1)),or!==null&&or[1]?(Math.ceil((Pn+2*In+_n+2*Ln+Vn)/7)!=this.qosOut&&(yr=!0),this.qosOut=Math.ceil((Pn+2*In+_n+2*Ln+Vn)/7),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Pn+2*In+_n)/4)!=this.qosAudioOut&&(Rr=!0),this.qosAudioOut=Math.ceil((Pn+2*In+_n)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++,Math.ceil((2*Ln+Vn)/3)!=this.qosVideoOut&&(Or=!0),this.qosVideoOut=Math.ceil((2*Ln+Vn)/3),this.qosVideoOutAverage=(this.qosVideoOutAverage*this.qosVideoOutAverageCount+this.qosVideoOut)/(this.qosVideoOutAverageCount+1),this.qosVideoOutAverageCount++):(Math.ceil((Pn+2*In+_n)/4)!=this.qosOut&&(yr=!0),this.qosOut=Math.ceil((Pn+2*In+_n)/4),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Pn+2*In+_n)/4)!=this.qosAudioOut&&(Rr=!0),this.qosAudioOut=Math.ceil((Pn+2*In+_n)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++),yr&&this.onQosChange(this.qosIn,this.qosOut),Rr&&this.onQosAudioChange(this.qosAudioIn,this.qosAudioOut),Or&&this.onQosVideoChange(this.qosVideoIn,this.qosVideoOut)},this.getCodecs=function(xt){var Vt=!1,Zt=!1,an=null,qt=null;if(xt!=null&&xt.sdp!==void 0){for(var tn=xt.sdp.split(`
`),gn=0;gn<tn.length;gn++)tn[gn].indexOf("a=mid:audio")!=-1&&(Vt=!0),tn[gn].indexOf("a=mid:video")!=-1&&(Zt=!0),Vt&&tn[gn].indexOf("a=rtpmap:")!=-1&&(an=tn[gn],Vt=!1),Zt&&tn[gn].indexOf("a=rtpmap:")!=-1&&(qt=tn[gn],Zt=!1);return[an,qt]}return null},this.getQosScore=function(){return[this.qosIn,this.qosOut,this.qosAudioIn,this.qosAudioOut,this.qosVideoIn,this.qosVideoOut]},this.getStat=function(xt){switch(xt){case"AudioOutBandwidth":return 8*this.Average(this.bandwidthAS)/1024;case"VideoOutBandwidth":return 8*this.Average(this.bandwidthVS)/1024;case"AudioInBandwidth":return 8*this.Average(this.bandwidthAR)/1024;case"VideoInBandwidth":return 8*this.Average(this.bandwidthVR)/1024;case"AudioInJitterReceived":return this.rawStats.audio_recv.googJitterReceived;case"AudioInJitterBufferMs":return this.rawStats.audio_recv.googJitterBufferMs;case"AudioInDelay":return this.rawStats.audio_recv.googCurrentDelayMs;case"AudioOutLossRate":return this.tauxPacketLossAS;case"AudioOutRtt":return this.RttAverage(this.moyRttAS);case"AudioOutJitterReceived":return this.rawStats.audio_send.googJitterReceived;case"VideoInJitterBufferMs":return this.rawStats.video_recv.googJitterBufferMs;case"VideoOutLossRate":return this.tauxPacketLossVS;case"VideoOutRtt":return this.RttAverage(this.moyRttVS)}},this.getAllStats=function(){for(var xt={AudioRecv:{},AudioSend:{},VideoRecv:{},VideoSend:{}},Vt={AudioRecv:"audio_recv",VideoRecv:"video_recv",AudioSend:"audio_send",VideoSend:"video_send"},Zt=Object.keys(Vt),an=0;an<Zt.length;an++)for(var qt=Object.keys(this.rawStats[Vt[Zt[an]]]),tn=0;tn<qt.length;tn++)xt[Zt[an]][qt[tn]]=this.rawStats[Vt[Zt[an]]][qt[tn]];return xt.AudioRecv.bandwidth=8*this.Average(this.bandwidthAR)/1024,xt.VideoRecv.bandwidth=8*this.Average(this.bandwidthVR)/1024,xt.AudioSend.bandwidth=8*this.Average(this.bandwidthAS)/1024,xt.VideoSend.bandwidth=8*this.Average(this.bandwidthVS)/1024,xt.AudioRecv.jitterReceived=this.rawStats.audio_recv.googJitterReceived,xt.AudioRecv.jitterBufferMs=this.rawStats.audio_recv.googJitterBufferMs,xt.VideoRecv.jitterBufferMs=this.rawStats.video_recv.googJitterBufferMs,xt.AudioRecv.delay=this.rawStats.audio_recv.googCurrentDelayMs,xt.AudioSend.rtt=this.RttAverage(this.moyRttAS),xt.VideoSend.moyRtt=this.RttAverage(this.moyRttVS),xt.VideoSend.rtt=this.instantRTT,xt.VideoSend.FrameHeight=this.rawStats.video_send.FrameHeight,xt.VideoSend.FrameWidth=this.rawStats.video_send.FrameWidth,xt.AudioSend.packetLostRatio=this.tauxPacketLossAS[this.tauxPacketLossAS.length-1],xt.VideoSend.packetLostRatio=this.tauxPacketLossVS[this.tauxPacketLossVS.length-1],xt.VideoSend.googEncodeUsagePercent=this.rawStats.video_send.googEncodeUsagePercent,xt.VideoSend.googCpuLimitedResolution=this.rawStats.video_send.googCpuLimitedResolution,xt.VideoSend.googBandwidthLimitedResolution=this.rawStats.video_send.googBandwidthLimitedResolution,delete xt.AudioRecv.googCurrentDelayMs,delete xt.AudioRecv.googJitterReceived,delete xt.AudioRecv.googJitterBufferMs,delete xt.VideoRecv.googJitterBufferMs,delete xt.AudioSend.googRtt,delete xt.VideoSend.googRtt,xt},this.displayComputedStats=function(){console.log("Audio IN JitterReceived:"+this.rawStats.audio_recv.googJitterReceived+" jitterbufferMs:"+this.rawStats.audio_recv.googJitterBufferMs+" delay:"+this.rawStats.audio_recv.googCurrentDelayMs+" bandwidth :"+8*this.Average(this.bandwidthAS)/1024+" kBits/s"),console.log("Audio OUT  lossRate:"+this.tauxPacketLossAS+" rtt:"+this.RttAverage(this.moyRttAS)+" googJitterReceived:"+this.rawStats.audio_recv.googJitterReceived),console.log("Video IN jitter buffer ms:"+this.rawStats.video_recv.googJitterBufferMs+" bandwidth:"+8*this.Average(this.bandwidthVS)/1024+" kBits/s"),console.log("Video OUT loss rate:"+this.tauxPacketLossVS+" rtt:"+this.RttAverage(this.moyRttVS))},this.RttAverage=function(xt){for(var Vt=0,Zt=0,an=0;an<xt.length;++an)xt[an]!==0&&xt[an]!==-1&&xt[an]!==void 0&&(Vt+=parseInt(xt[an],10),Zt++);return parseInt(Vt/Zt,10)},this.Average=function(xt){for(var Vt=0,Zt=0,an=0;an<xt.length;++an)xt[an]!=-1&&xt[an]!==void 0&&(Vt+=parseInt(xt[an],10),Zt++);return parseInt(Vt/Zt,10)},this.add=function(xt,Vt){Vt.pop(),Vt.unshift(xt)},this.displayTab=function(xt){for(var Vt in xt)console.log(Vt+" = "+xt[Vt])}}),kt=et.Y.get("DataChannelFileSender"),bt=apiCC.myWebRTC_Event,Nt=1<<17,Ft=function(Kt){this.call=Kt,this.sendChunkNb=0,this.send=function(Ot,lt,Tt){var It=12e3,Dt={},Et=null,$t={},xt=!1,Vt={};if(kt.info("DataChannelFileSender send"),kt.log("data.name :"+Ot.name),Ot.file instanceof Blob?(kt.log("Blob"),this.blob=Ot.file,this.contentType=Ot.file.type,this.size=Ot.file.size,this.originalDataType="Blob"):Ot.file instanceof ArrayBuffer?(kt.log("ArrayBuffer"),this.blob=Ot.file,this.contentType="application/octet-stream",this.size=Ot.file.byteLength,this.originalDataType="ArrayBuffer"):Ot.file instanceof String||typeof Ot.file=="string"?(kt.log("string"),this.blob=Ot.file,this.size=Ot.file.length,this.contentType="application/octet-stream",this.originalDataType="String"):(kt.log("unknown type"),this.blob=Ot.file,this.contentType="application/octet-stream",this.size=Ot.file.length||Ot.file.byteLength||Ot.file.size,this.originalDataType="Unknown"),this.contentType||(this.contentType="application/octet-stream"),this.size===0)return kt.log("sending done"),Tt!==void 0&&(kt.log("onProgress"),this.transferDuration=new Date-this.startingDate,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,lastPacket:xt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0})),bt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,lastPacket:xt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0}),void bt.createEvent({eventType:"onFileSended",callId:Kt.callId,remoteId:Kt.remoteId,name:Ot.name,uuid:Ot.uuid});if(lt)if(lt.readyState==="open"){if(this.sendChunkNb===0&&kt.log("first packet"),this.sendChunkNb===0){Ot.uuid=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-"),$t={name:Ot.name,type:Ot.type,size:this.size,contentType:this.contentType,uuid:Ot.uuid},kt.log("first packet",$t),this.fileSize=this.size,Tt!==void 0&&(kt.log("onProgress"),this.startingDate=new Date,this.transferDuration=0,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,lastPacket:xt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),bt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,lastPacket:xt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{lt.send(JSON.stringify($t))}catch(Zt){kt.warn("error detected when sending on datachannel :",lt),kt.warn("error is :",Zt)}bt.createEvent({eventType:"onFileSending",callId:Kt.callId,remoteId:Kt.remoteId,name:Ot.name,uuid:Ot.uuid})}else{It<this.size?(kt.log("sending chunk"),Dt=this.blob.slice(0,It)):(kt.log("sending last chunk"),Dt=this.blob.slice(0),xt=!0),kt.log("dataToSend.byteLength ="+Dt.byteLength),this.originalDataType==="ArrayBuffer"?Vt.message=ot.cw.encode(Dt):Vt.message=Dt,Vt.messageSize=Dt.byteLength,Vt.uuid=Ot.uuid,Vt.originalDataType=this.originalDataType,Tt!==void 0&&(kt.log("onProgress"),this.transferDuration=new Date-this.startingDate,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,startingDate:this.startingDate,lastPacket:xt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),bt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Kt.callId,uuid:Ot.uuid,remoteId:Kt.remoteId,startingDate:this.startingDate,lastPacket:xt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{lt.send(JSON.stringify(Vt))}catch(Zt){kt.warn("error detected when sending on datachannel :",lt),kt.warn("error is :",Zt)}}Et=this.sendChunkNb===0?this.blob:this.blob.slice(It),xt===!1?this.sendChunkNb++:this.sendChunkNb=0,Ot.file=Et,setTimeout((function(){this.send(Ot,lt,Tt)}).bind(this))}else kt.log("Trying to send on a closed channel");else kt.log("No data channel to send data")},this.terminateTransfer=function(){var Ot=this;kt.debug("terminateTransfer; terminated: "+this.terminated),this.channel!==null?this.useBufferedAmount===!0&&this.channel.bufferedAmount>0&&this.canceled!==!0?setTimeout(this.terminateTransfer.bind(this)):this.terminated!==!0&&(this.terminated=!0,this.recvDataEndAckTimeoutId&&(clearTimeout(this.recvDataEndAckTimeoutId),delete this.recvDataEndAckTimeoutId),delete this.call.dcfs,kt.debug("terminateTransfer; terminating"),this.call.pipelineCallId?(this.call.pipelineCall&&(delete this.call.pipelineCall.clientCall,delete this.call.pipelineCall,this.call.sendDataChannel=null),this.channel=null):setTimeout(function(){Ot.channel.close(),Ot.channel=null}),setTimeout(function(){if(Ot.canceled===!0)bt.createEvent({eventType:"onFileSended",callId:Ot.call.callId,remoteId:Ot.call.remoteId,name:Ot.call.data.filename,error:"canceled"}),Ot.call.callbacks.failure("canceled");else if(Ot.call.failure)bt.createEvent({eventType:"onFileSended",callId:Ot.call.callId,remoteId:Ot.call.remoteId,name:Ot.call.data.filename,error:Ot.call.failure}),Ot.call.callbacks.failure(Ot.call.failure);else{var lt={eventType:"onFileSended",callId:Ot.call.callId,remoteId:Ot.call.remoteId,name:Ot.call.data.filename};Ot.call.success.data&&(lt.data=Ot.call.success.data),bt.createEvent(lt),Ot.call.callbacks.success(Ot.call.success)}apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Ot.call.callId)})):kt.warn("No data channel to send data, leaving terminateTransfer")},this.recvDataEndAckTimeout=function(){kt.error("recvDataEndAckTimeout"),this.call.failure="ackNotReceived",setTimeout(this.terminateTransfer.bind(this))},this.subsequentTransfer=function(){var Ot,lt=!1;if(kt.debug("subsequentTransfer; remByteCount: "+this.remByteCount),this.canceled!==!0)if(this.channel!==null)if(this.useBufferedAmount===!0&&this.channel.bufferedAmount>Nt)setTimeout(this.subsequentTransfer.bind(this));else try{for(;;){if(!(this.remByteCount>=this.chunkLength)){Ot=this.data.slice(this.offset,this.offset+this.remByteCount),this.channel.send(Ot),this.packetsSent+=1,kt.debug("packetSent "+this.packetsSent+" "+this.remByteCount),this.offset+=this.remByteCount,this.remByteCount-=this.remByteCount,lt=!0;break}if(Ot=this.data.slice(this.offset,this.offset+this.chunkLength),this.channel.send(Ot),this.packetsSent+=1,kt.debug("packetSent "+this.packetsSent+" "+this.chunkLength),this.offset+=this.chunkLength,this.remByteCount-=this.chunkLength,this.remByteCount<=0){lt=!0;break}if(this.useBufferedAmount!==!0||this.channel.bufferedAmount>Nt)break}lt===!0?(bt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:100}),this.call.callbacks.progress({state:"complete",filename:this.call.data.filename,size:this.call.data.size,remBytes:0,progress:100}),this.call.success={state:"complete",filename:this.call.data.filename,size:this.call.data.size,mediaURL:this.call.mediaURL,mediaId:this.call.mediaId},this.recvDataEndAckTimeoutId=setTimeout(this.recvDataEndAckTimeout.bind(this),3e4)):(bt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:Math.floor(100*this.offset/this.call.data.size)}),this.call.callbacks.progress({state:"incomplete",filename:this.call.data.filename,size:this.call.data.size,remBytes:this.remByteCount,progress:Math.floor(100*this.offset/this.call.data.size)}),setTimeout(this.subsequentTransfer.bind(this)))}catch(Tt){return kt.error("transfer: "+Tt),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}else kt.warn("No data channel to send data, leaving subsequentTransfer");else setTimeout(this.terminateTransfer.bind(this))},this.transfer=function(Ot,lt,Tt){var It=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Dt=It.hasOwnProperty("delay")?It.delay:100;if(kt.info("transfer",lt,Dt),this.call.beginTimeoutId&&(clearTimeout(this.call.beginTimeoutId),delete this.call.beginTimeoutId),this.data=Ot,this.channel=Tt,this.channel!==null){typeof this.channel.bufferedAmount=="number"&&this.channel.bufferedAmount>=0&&(kt.debug("browserDetails",ot.wL),ot.wL.type==="chrome"?ot.wL.version>=37&&(this.useBufferedAmount=!0,kt.debug("useBufferedAmount enabled")):(this.useBufferedAmount=!0,kt.debug("useBufferedAmount enabled"))),this.chunkLength=8192,lt>0?(this.offset=Math.floor(lt/this.chunkLength)*this.chunkLength,this.remByteCount=this.data.byteLength-this.offset):(this.offset=0,this.remByteCount=this.data.byteLength),this.packetsSent=0;try{var Et={chunkLength:this.chunkLength,offset:this.offset,remBytes:this.remByteCount};this.call.pipelineCallId&&(Et.pluginName=Kt.data.pluginName,Et.pluginData=Kt.data.pluginData,Kt.data.context&&(Et.context=Kt.data.context)),this.channel.send(JSON.stringify(Et))}catch($t){return kt.error("transfer:",$t),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}bt.createEvent({eventType:"onFileSending",callId:this.call.callId,remoteId:this.call.remoteId,name:this.call.data.filename}),setTimeout(this.subsequentTransfer.bind(this),Dt)}else kt.warn("No data channel to send data, leaving transfer")}},Ut=(et.Y.get("CallStatsMonitor"),function(Kt,Ot,lt,Tt){this.interval=Kt,this.browserType=Ot,this.browserVersion=lt,this.flavor=Tt,this.prevData={},this.prevDataThreshold=10/Kt,this.prevDataThreshold<2&&(this.prevDataThreshold=2),this.STANDARD_STAT_KEYS={audioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},audioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1}},this.refineStats_chrome_proprietary=function(It,Dt){var Et,$t;for(Et=0;Et<Dt.length;Et+=1){var xt=Dt[Et],Vt=null,Zt=null;if(xt.type==="ssrc"){if(xt.id.indexOf("recv")>=0){if(xt.stat("mediaType")==="audio")for(It.audioReceived={timestamp:Math.floor(Date.parse(xt.timestamp))/1e3,type:"inbound-rtp",isRemote:!1,mediaType:"audio",packetsReceived:0,bytesReceived:0},Vt=xt.names(),$t=0;$t<Vt.length;$t+=1)(Zt=Vt[$t])==="packetsReceived"?It.audioReceived.packetsReceived=parseInt(xt.stat("packetsReceived"),10):Zt==="bytesReceived"&&(It.audioReceived.bytesReceived=parseInt(xt.stat("bytesReceived"),10));else if(xt.stat("mediaType")==="video")for(It.videoReceived={timestamp:Math.floor(Date.parse(xt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesDecoded:0,packetsReceived:0,bytesReceived:0},Vt=xt.names(),$t=0;$t<Vt.length;$t+=1)(Zt=Vt[$t])==="framesDecoded"?It.videoReceived.framesDecoded=parseInt(xt.stat("framesDecoded"),10):Zt==="packetsReceived"?It.videoReceived.packetsReceived=parseInt(xt.stat("packetsReceived"),10):Zt==="bytesReceived"&&(It.videoReceived.bytesReceived=parseInt(xt.stat("bytesReceived"),10))}else if(xt.id.indexOf("send")>=0){if(xt.stat("mediaType")==="audio")for(It.audioSent={timestamp:Math.floor(Date.parse(xt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"audio",packetsSent:0,bytesSent:0},Vt=xt.names(),$t=0;$t<Vt.length;$t+=1)(Zt=Vt[$t])==="packetsSent"?It.audioSent.packetsSent=parseInt(xt.stat("packetsSent"),10):Zt==="bytesSent"&&(It.audioSent.bytesSent=parseInt(xt.stat("bytesSent"),10));else if(xt.stat("mediaType")==="video")for(It.videoSent={timestamp:Math.floor(Date.parse(xt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesEncoded:0,packetsSent:0,bytesSent:0},Vt=xt.names(),$t=0;$t<Vt.length;$t+=1)(Zt=Vt[$t])==="framesEncoded"?It.videoSent.framesEncoded=parseInt(xt.stat("framesEncoded"),10):Zt==="packetsSent"?It.videoSent.packetsSent=parseInt(xt.stat("packetsSent"),10):Zt==="bytesSent"&&(It.videoSent.bytesSent=parseInt(xt.stat("bytesSent"),10))}}}return!1},this.refineStats_chrome_legacy=function(It,Dt){var Et=!1;return Dt.forEach(function($t){var xt=null,Vt=null;if($t.type==="ssrc"&&$t.id.indexOf("recv")>=0){if($t.mediaType==="audio"){for(Vt in It.audioReceived={},xt=Math.floor(Date.parse($t.timestamp)/1e3),$t)Vt==="timestamp"?It.audioReceived.timestamp=xt:It.audioReceived[Vt]=$t[Vt];Et=!0}else if($t.mediaType==="video"){for(Vt in It.videoReceived={},xt=Math.floor(Date.parse($t.timestamp)/1e3),$t)Vt==="timestamp"?It.videoReceived.timestamp=xt:It.videoReceived[Vt]=$t[Vt];Et=!0}}else if($t.type==="ssrc"&&$t.id.indexOf("send")>=0){if($t.mediaType==="audio"){for(Vt in It.audioSent={},xt=Math.floor(Date.parse($t.timestamp)/1e3),$t)Vt==="timestamp"?It.audioSent.timestamp=xt:It.audioSent[Vt]=$t[Vt];Et=!0}else if($t.mediaType==="video"){for(Vt in It.videoSent={},xt=Math.floor(Date.parse($t.timestamp)/1e3),$t)Vt==="timestamp"?It.videoSent.timestamp=xt:It.videoSent[Vt]=$t[Vt];Et=!0}}}),Et},this.refineStats_chrome_58=function(It,Dt){var Et=this,$t=!1;return Dt.forEach(function(xt){if(xt.type!=="inbound-rtp"||xt.isRemote){if(xt.type==="outbound-rtp"&&!xt.isRemote){if(xt.mediaType==="audio"){It.audioSent={};var Vt=Math.floor(xt.timestamp/1e3);for(var Zt in xt)Et.STANDARD_STAT_KEYS.audioSent[Zt]!==!1&&(Zt==="timestamp"?It.audioSent.timestamp=Vt:It.audioSent[Zt]=xt[Zt]);$t=!0}else if(xt.mediaType==="video"){It.videoSent={};var an=Math.floor(xt.timestamp/1e3);for(var qt in xt)Et.STANDARD_STAT_KEYS.videoSent[qt]!==!1&&(qt==="timestamp"?It.videoSent.timestamp=an:It.videoSent[qt]=xt[qt]);$t=!0}}}else if(xt.mediaType==="audio"||xt.id.indexOf("Audio")>=0){It.audioReceived={};var tn=Math.floor(xt.timestamp/1e3);for(var gn in xt)Et.STANDARD_STAT_KEYS.audioReceived[gn]!==!1&&(gn==="timestamp"?It.audioReceived.timestamp=tn:It.audioReceived[gn]=xt[gn]);$t=!0}else if(xt.mediaType==="video"||xt.id.indexOf("Video")>=0){It.videoReceived={};var rn=Math.floor(xt.timestamp/1e3);for(var pn in xt)Et.STANDARD_STAT_KEYS.videoReceived[pn]!==!1&&(pn==="timestamp"?It.videoReceived.timestamp=rn:It.videoReceived[pn]=xt[pn]);$t=!0}}),$t},this.refineStats_firefox_legacy=function(It,Dt){var Et=!1,$t=this;return Dt.forEach(function(xt){var Vt=null,Zt=null;if(xt.type==="inbound-rtp"&&xt.isRemote===!1){if(xt.mediaType==="audio"){for(Vt in It.audioReceived={packetsReceived:0,bytesReceived:0},Zt=Math.floor(xt.timestamp/1e3),xt)$t.STANDARD_STAT_KEYS.audioReceived[Vt]!==!1&&(Vt==="timestamp"?It.audioReceived.timestamp=Zt:It.audioReceived[Vt]=xt[Vt]);Et=!0}else if(xt.mediaType==="video"){for(Vt in It.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0},Zt=Math.floor(xt.timestamp/1e3),xt)$t.STANDARD_STAT_KEYS.videoReceived[Vt]!==!1&&(Vt==="timestamp"?It.videoReceived.timestamp=Zt:It.videoReceived[Vt]=xt[Vt]);Et=!0}}else if(xt.type==="outbound-rtp"&&xt.isRemote===!1){if(xt.mediaType==="audio"){for(Vt in It.audioSent={packetsSent:0,bytesSent:0},Zt=Math.floor(xt.timestamp/1e3),xt)$t.STANDARD_STAT_KEYS.audioSent[Vt]!==!1&&(Vt==="timestamp"?It.audioSent.timestamp=Zt:It.audioSent[Vt]=xt[Vt]);Et=!0}else if(xt.mediaType==="video"){for(Vt in It.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0},Zt=Math.floor(xt.timestamp/1e3),xt)$t.STANDARD_STAT_KEYS.videoSent[Vt]!==!1&&(Vt==="timestamp"?It.videoSent.timestamp=Zt:It.videoSent[Vt]=xt[Vt]);Et=!0}}}),Et},this.refineStats_firefox_63=function(It,Dt){var Et=!1,$t=this;return Dt.forEach(function(xt){if(xt.type!=="inbound-rtp"||xt.isRemote){if(xt.type==="outbound-rtp"&&!xt.isRemote){if(xt.kind==="audio"){It.audioSent={packetsSent:0,bytesSent:0};var Vt=Math.floor(xt.timestamp/1e3);for(var Zt in xt)$t.STANDARD_STAT_KEYS.audioSent[Zt]!==!1&&(Zt==="timestamp"?It.audioSent.timestamp=Vt:It.audioSent[Zt]=xt[Zt]);Et=!0}else if(xt.kind==="video"){It.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0};var an=Math.floor(xt.timestamp/1e3);for(var qt in xt)$t.STANDARD_STAT_KEYS.videoSent[qt]!==!1&&(qt==="timestamp"?It.videoSent.timestamp=an:It.videoSent[qt]=xt[qt]);Et=!0}}}else if(xt.kind==="audio"){It.audioReceived={packetsReceived:0,bytesReceived:0};var tn=Math.floor(xt.timestamp/1e3);for(var gn in xt)$t.STANDARD_STAT_KEYS.audioReceived[gn]!==!1&&(gn==="timestamp"?It.audioReceived.timestamp=tn:It.audioReceived[gn]=xt[gn]);Et=!0}else if(xt.kind==="video"){It.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0};var rn=Math.floor(xt.timestamp/1e3);for(var pn in xt)$t.STANDARD_STAT_KEYS.videoReceived[pn]!==!1&&(pn==="timestamp"?It.videoReceived.timestamp=rn:It.videoReceived[pn]=xt[pn]);Et=!0}}),Et},this.addCallStats=function(It){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et={};if(this.refineStats!==void 0){if(this.refineStats(Et,It),Et.audioReceived!==void 0){if(this.prevData.audioReceived!==void 0){var $t=Et.audioReceived.timestamp-this.prevData.audioReceived[0].timestamp;$t>0?(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=Math.floor((Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)/$t)),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=Math.floor(8*(Et.audioReceived.bytesReceived-this.prevData.audioReceived[0].bytesReceived)/$t)),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=Math.floor((Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/$t)),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=100*(Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/(Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)),Et.audioReceived.samplingInterval=$t):(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0)}else Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0,this.prevData.audioReceived=[];for(this.prevData.audioReceived.push(Et.audioReceived);this.prevData.audioReceived.length>this.prevDataThreshold;)this.prevData.audioReceived.shift()}if(Et.videoReceived!==void 0){if(this.prevData.videoReceived!==void 0){var xt=Et.videoReceived.timestamp-this.prevData.videoReceived[0].timestamp;xt>0?(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=Math.floor((Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)/xt)),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=Math.floor(8*(Et.videoReceived.bytesReceived-this.prevData.videoReceived[0].bytesReceived)/xt)),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=Math.floor((Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/xt)),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=Math.floor((Et.videoReceived.framesDecoded-this.prevData.videoReceived[0].framesDecoded)/xt)),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=100*(Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/(Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)),Et.videoReceived.samplingInterval=xt):(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0)}else Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0,this.prevData.videoReceived=[];for(this.prevData.videoReceived.push(Et.videoReceived);this.prevData.videoReceived.length>this.prevDataThreshold;)this.prevData.videoReceived.shift()}if(Et.audioSent!==void 0){if(this.prevData.audioSent!==void 0){var Vt=Et.audioSent.timestamp-this.prevData.audioSent[0].timestamp;Vt>0?(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=Math.floor((Et.audioSent.packetsSent-this.prevData.audioSent[0].packetsSent)/Vt)),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=Math.floor(8*(Et.audioSent.bytesSent-this.prevData.audioSent[0].bytesSent)/Vt)),Et.audioSent.samplingInterval=Vt):(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0)}else Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0,this.prevData.audioSent=[];for(this.prevData.audioSent.push(Et.audioSent);this.prevData.audioSent.length>this.prevDataThreshold;)this.prevData.audioSent.shift()}if(Et.videoSent!==void 0){if(this.prevData.videoSent!==void 0){var Zt=Et.videoSent.timestamp-this.prevData.videoSent[0].timestamp;Zt>0?(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=Math.floor((Et.videoSent.packetsSent-this.prevData.videoSent[0].packetsSent)/Zt)),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=Math.floor(8*(Et.videoSent.bytesSent-this.prevData.videoSent[0].bytesSent)/Zt)),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=Math.floor((Et.videoSent.framesEncoded-this.prevData.videoSent[0].framesEncoded)/Zt)),Et.videoSent.samplingInterval=Zt):(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0)}else Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0,this.prevData.videoSent=[];for(this.prevData.videoSent.push(Et.videoSent);this.prevData.videoSent.length>this.prevDataThreshold;)this.prevData.videoSent.shift()}}return Object.keys(Et).length>0&&typeof Dt.post=="function"&&Dt.post(Et),Et},this.browserType==="chrome"?Tt==="proprietary"?this.refineStats=this.refineStats_chrome_proprietary:this.browserVersion>=58?this.refineStats=this.refineStats_chrome_58:this.refineStats=this.refineStats_chrome_legacy:this.browserType==="firefox"?this.browserVersion>=63?this.refineStats=this.refineStats_firefox_63:this.refineStats=this.refineStats_firefox_legacy:this.browserType==="safari"&&(this.refineStats=this.refineStats_chrome_58)}),Jt=(s(658),function(){this.NarrowBandSpeechQuality=function(Kt,Ot){var lt,Tt,It=1,Dt=1+Kt/10,Et=1+Kt/150,$t=(94.769-(lt=80+2.5*(65-40*Math.log10(Dt/Et)+6*Math.exp(Kt*Kt*-.3)-14)))*(94.769-lt)/4+100;return(Tt=93.193-((94.769-lt)/2+Math.sqrt($t)-1)*(1-Math.exp(-Kt))-(0+Ot/(Ot+4.3)*95))<0&&(It=1),Tt<100&Tt>0&&(It=1+.035*Tt+Tt*(Tt-60)*(100-Tt)*7*1e-6),Tt>100&&(It=4.5),It},this.WideBandspeechQuality=function(Kt,Ot){var lt,Tt,It,Dt=0,Et=1;Kt<100&&(Dt=.08-Kt+10),Kt>=100&&(Dt=18);var $t=1+Kt/10,xt=1+Kt/150,Vt=(129-(lt=80+3*(65+Dt-40*Math.log10($t/xt)+6*Math.exp(Kt*Kt*-.3)-14)))*(129-lt)/4+100;return(It=(Tt=129-((129-lt)/2+Math.sqrt(Vt)-1)*(1-Math.exp(-Kt))-(0+Ot/(Ot+4.3)*95))/1.29)<=0&&(Et=1),It<100&It>0&&(Et=1+.035*Tt+Tt*(Tt-60)*(100-Tt)*7*1e-6),It>=100&&(Et=4.5),Et},this.videoQuality=function(Kt,Ot,lt,Tt,It){var Dt,Et,$t,xt,Vt,Zt,an,qt,tn;return tn=Ot>720?[0,2.77,.009,3.95,460,1.28,2.12,32e-5,1.28,262,1.98,22.84,7.999]:Ot>576?[0,6.31,.008,3.68,262,1.28,1.97,33e-5,1.24,343,2.76,6.25,6.013]:Ot>480?[0,6.96,.007,3.58,214,1.2,1.75,63e-5,1.13,171,4.25,7.98,12.001]:Ot>288?[0,5.61,.01,3.38,182,1.31,2.23,75e-5,1.51,136,4.05,20.16,22.332]:[0,3.988,.013,3.625,89.25,1.125,.713,0,1.542,245.5,3.011,39.31,16.67],Zt=1+Math.pow(Tt/tn[4],tn[5]),Dt=tn[3]-tn[3]/Zt,Et=tn[1]+tn[2]*Tt,$t=tn[6]+tn[7]*Tt,an=Math.pow(Math.log(It)-Math.log(Et),2),qt=2*Math.pow($t,2),xt=Dt*Math.exp(-an/qt),Vt=tn[10]+tn[11]*Math.exp(-It/tn[8])+tn[12]*Math.exp(-Tt/tn[9]),1+xt*Math.exp(-lt/Vt)},this.audiovisualQuality=function(Kt,Ot,lt,Tt){var It,Dt,Et,$t,xt;return Kt>0&&Ot>0?(It=(xt=[0,-.6966,-.8127,.4562,3.003,-.1638,.3626,.1291,.5457,-1251e-7,3.763,-.001065,.01465,-.001002,0])[9]*(lt+Tt)+xt[10],lt>=Tt&&(Dt=Math.min(xt[11]*(lt-Tt)+xt[12],0)),lt<Tt&&(Dt=Math.min(xt[13]*(Tt-lt)+xt[14],0)),Et=Math.max(It+Dt,1),xt[1]*($t=xt[5]*Kt+xt[6]*Ot+xt[7]*Kt*Ot+xt[8])+xt[2]*Et+xt[3]*$t*Et+xt[4]):"NoAudiovisualStream"}});function hn(Kt,Ot){var lt=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(!lt){if(Array.isArray(Kt)||(lt=function(xt,Vt){if(xt){if(typeof xt=="string")return Xt(xt,Vt);var Zt=Object.prototype.toString.call(xt).slice(8,-1);return Zt==="Object"&&xt.constructor&&(Zt=xt.constructor.name),Zt==="Map"||Zt==="Set"?Array.from(xt):Zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zt)?Xt(xt,Vt):void 0}}(Kt))||Ot&&Kt&&typeof Kt.length=="number"){lt&&(Kt=lt);var Tt=0,It=function(){};return{s:It,n:function(){return Tt>=Kt.length?{done:!0}:{done:!1,value:Kt[Tt++]}},e:function(xt){throw xt},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt,Et=!0,$t=!1;return{s:function(){lt=lt.call(Kt)},n:function(){var xt=lt.next();return Et=xt.done,xt},e:function(xt){$t=!0,Dt=xt},f:function(){try{Et||lt.return==null||lt.return()}finally{if($t)throw Dt}}}}function Xt(Kt,Ot){(Ot==null||Ot>Kt.length)&&(Ot=Kt.length);for(var lt=0,Tt=new Array(Ot);lt<Ot;lt++)Tt[lt]=Kt[lt];return Tt}var zt=et.Y.get("WebRTC_Call"),cn=apiCC.myWebRTC_Event,vn=function(Kt){this.dest_roomId="",this.pc=null,this.callId=0,this.callee=!1,this.callerId=0,this.calleeId=0,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.myWebRTC_Stack=new gt.S(Kt.socket),this.remoteMediaStreams=[],this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.dtmfSender=null,this.incomingcandidatesQueue=[],rt.Xh==="Firefox"?rt.PR>43?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!1}},this.mediaConstraints={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}):rt.Xh==="Chrome"?rt.PR<55?(this.mediaConstraintsAudioOnly={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this.mediaConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):rt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}),rt.ag.name==="iOS"&&(zt.log("Defining mediaConstraints for iOS "),this.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),this.trickleIce=Kt.trickleIce,this.callLocalStream=null,this.generatedLocalStream=!1,this.audioOnly=!1,this.inviteSended=!1,this.sendInviteTrickleIceFalseTimeOutId=0,this.sendInviteTrickleIceFalseTimer=5e3,this.message200OKSended=!1,this.send200OKTrickleIceFalseTimeOutId=0,this.send200OKTrickleIceFalseTimer=5e3,this.message200OKReceived=!1,this.callCancelled=!1,this.screenSharing=!1,this.desktopId=0,this.pc_config=Kt.pc_config,this.pc_constraints=Kt.pc_constraints,this.audioFileMediaElement=null,this.videoReceivedWidth=640,this.videoReceivedHeight=480,this.videoSendWidth=640,this.videoSendHeight=480,this.videoReceivedDelay=0,this.audioReceivedDelay=0,this.audioSendDelay=0,this.videoSendDelay=0,this.videoSendPacketLossRatio=0,this.audioSendPacketLossRatio=0,this.getStatsInterval=Kt.qosInterval,this.qm=null,this.statisticId=null,this.csmIntervalMs=Kt.csmIntervalMs,this.csmIntervalId=null,this.remoteId=0,this.callType="media",this.localCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.remoteCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.disconnectionTimeoutId=0,this.disconnectionTimer=4e4,this.disconnectionWarningDelay=9e3,this.disconnectionWarningInterval=0,this.disconnectionWarningTimeout=0,this.disconnectionWarningCount=0,this.checkCandidateTypesTimer=1e4,this.checkCandidateTypesTimeoutId=0,this.checkCandidateTypesTimeoutTable=[],this.data={},this.screenStream=null,this.screenIsDisplayed=!1,this.addingDataChannelOnCallOngoing=!1,this.sendDataChannel=null,this.receiveDataChannel=null,this.receiveChunkNb={},this.firstDataPacket={},this.receivedSize={},this.receiveArrayToStoreChunks={},this.destCallType="media",this.mcuRemoteStream=null,this.userMediaAccessRequired=!0,this.settingUpMode="normal",this.remoteType="web",this.mediaTypeForIncomingCall=Kt.mediaTypeForIncomingCall,this.mediaTypeForOutgoingCall=Kt.mediaTypeForOutgoingCall,this.mediaRoutingMode=Kt.mediaRoutingMode,this.stripAudioSDPActivated=!1,this.stripVideoSDPActivated=!1,this.iceState="notdefined",this.restarted=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.isLocalAudioMuted=!1,this.isLocalVideoMuted=!1,this.isRemoteAudioMuted=!1,this.isRemoteVideoMuted=!1,this.isRemoteAudioSilent=!1,this.isRemoteVideoSilent=!1,this.isAccepted=!1,this.accessToMedia=!1,this.callConfiguration=null,this.captureSourceType=null,this.preferH264Codec=!1,this.preferVP8Codec=!1,this.preferVP9Codec=!1,this.candidateNb=0,this.sessionMCU=null,this.instanceId=0,this.retryUpdateMedia=!1,this.updateMediaOngoing=!1,this.setCallTurnServer=function(Ot){zt.info("setCallTurnServer :",Ot);var lt=JSON.stringify(this.pc_config);lt=lt.replace(/mp1.apizee.com/g,Ot),this.pc_config=JSON.parse(lt)},this.setCallMediaRoutingMode=function(Ot){zt.info("setCallMediaRoutingMode :",Ot),Ot==="hostOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.hostOnly:Ot==="stun"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.stun:Ot==="stunOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.stunOnly:Ot==="turn"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.turn:Ot==="turnOnly"?this.mediaRoutingMode=Kt.mediaRoutingModeEnum.turnOnly:(zt.log("parameter error when calling function : setCallMediaRoutingMode()"),this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setCallMediaRoutingMode()","PARAMETER_ERROR_SETCALLMEDIAROUTINGMODE"))},this.checkDTLSCompliancy=function(){if(zt.debug("checkDTLSCompliancy"),apiCC.session.isDeviceDTLSCompliant()===!1)zt.log("Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]};else{var Ot=apiCC.session.isClientDTLSCompliant(this.remoteId);Ot!==!1&&Ot!=="false"||(zt.log("Remote Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]})}},this.sendData=function(Ot,lt){zt.info("datachannel - sendData");var Tt=null,It=null;if(Ot.file instanceof File)return zt.log("File"),this.contentType=Ot.file.type,this.originalDataType="File",Tt=new FileReader,It=this,Tt.onload=function(Dt){var Et=Dt.target.result||Tt.result;It.sendData({file:Et,name:Ot.name,type:Ot.type},lt)},void Tt.readAsArrayBuffer(Ot.file);new Ft(this).send(Ot,this.sendDataChannel,lt)},zt.log("New Call for client with Id :"+Kt.clientId),this.generateCallId=function(){this.callId=apiCC.generateCallId(),zt.info("new call with callId :"+this.callId)},this.sendInviteTrickleIceFalse=function(){zt.log("sendInviteTrickleIceFalse"),zt.log("sendInvite on candidate timer reached"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0},this.send200OkTrickleIceFalse=function(){zt.log("send200OkTrickleIceFalse"),this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,this.pc.localDescription,this.data),this.message200OKSended=!0},this.onSetLocalDescriptionSuccess=function(){zt.info("onSetLocalDescriptionSuccess"),this.localDescriptionSetted=!0,this.asyncCallbacks&&this.asyncCallbacks.type==="subscribe"&&delete this.asyncCallbacks,this.trickleIce===!1&&(this.callee===!0?(zt.info("starting send200OKTrickleIceFalseTimeOutId"),this.send200OKTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"send200OkTrickleIceFalse"),this.send200OKTrickleIceFalseTimer)):(zt.info("starting sendInviteTrickleIceFalseTimeOutId"),this.sendInviteTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"sendInviteTrickleIceFalse"),this.sendInviteTrickleIceFalseTimer))),Kt.rtpSenderSetParamatersCapable&&Kt.evaluateVideoCap(this)},this.onSetLocalDescriptionFailure=function(Ot){zt.warn("onSetLocalDescriptionFailure",Ot);var lt=null,Tt=null;this.callControl&&(lt=this.callControl.roomName,Tt=this.callControl.type),cn.createErrorEvent("Set local Description Failure","SET_LOCAL_DESCRIPTION_FAILURE",this.callId,lt,Tt),Kt.onHangup(this.callId,"Local_Description_Failure")},this.onSetRemoteDescriptionSuccess=function(){zt.info("onSetRemoteDescriptionSuccess");var Ot=null;for(this.remoteDescriptionSetted=!0,this.restarting===!0&&delete this.restarting,this.data&&(this.data.mesh||this.data.subscribeOrder)||cn.createCallEstablishedEvent(this.calleeId,this.callType,this.callId,this.destCallType);this.incomingcandidatesQueue.length;)Ot=this.incomingcandidatesQueue.shift(),this.processCandidateMsg(Ot);if(Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]!==void 0){for(zt.debug("Restoring candidate from client, this.callId :"+this.callId+" , instanceId :"+this.instanceId);Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].length;)Ot=Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].shift(),this.processCandidateMsg(Ot);delete Kt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]}if(this.asyncCallbacks&&(this.asyncCallbacks.type==="addingUserMedia"?(this.asyncCallbacks.resolve(this.callConfiguration.userMediaStreamId),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks):this.asyncCallbacks.type==="updateCallConfiguration"&&(this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)),this.updateMediaOngoing=!1,this.retryUpdateMedia===!0){zt.debug("an updateMedia was waiting for sig stable state or an other updateMedia end, updating Media now ..."),this.retryUpdateMedia=!1;var lt=this.updateMedia(!1);zt.debug("Retried updateMediaResult :",lt)}},this.processCandidateMsg=function(Ot){zt.info("processCandidateMsg :",Ot);var lt=null;this.pc!==null?(Ot.completeCandidate!==void 0?(zt.trace("new behavior of 2.13.8"),lt=new apiCC.myWebRTC_Adapter.RTCIceCandidate(Ot.completeCandidate)):(zt.log("old behavior < 2.13.8"),lt=new apiCC.myWebRTC_Adapter.RTCIceCandidate({sdpMLineIndex:Ot.label,candidate:Ot.candidate})),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("addIceCandidate"),this.pc.addIceCandidate(lt,function(){zt.trace("addIceCandidate success")},function(Tt){zt.warn("addIceCandidate failure: "+Tt),Tt=null})):(zt.log("addIceCandidate - Promise version"),this.pc.addIceCandidate(lt).then(function(){zt.trace("addIceCandidate success")}).catch(function(Tt){zt.warn("addIceCandidate failure: "+Tt),Tt=null}))):zt.error("Error, call is not null but pc is null")},this.onSetRemoteDescriptionFailure=function(Ot){zt.warn("onSetRemoteDescriptionFailure :",Ot);var lt=null,Tt=null;this.callControl&&(lt=this.callControl.roomName,Tt=this.callControl.type),cn.createErrorEvent("Set remote Description Failure","SET_REMOTE_DESCRIPTION_FAILURE",this.callId,lt,Tt),Kt.onHangup(this.callId,"Remote_Description_Failure")},this.getUserMediaOnCall=function(){var Ot=this,lt=!1;if(zt.info("getUserMediaOnCall, audio Only :"+this.audioOnly),zt.info("getUserMediaOnCall, screenSharing activated :"+this.screenSharing),zt.log("webRTCClient.gum_config :",Kt.gum_config),this.callerId===Kt.clientId){if(zt.log("outgoing call"),this.mediaTypeForOutgoingCall==="VIDEO"||this.mediaTypeForOutgoingCall==="VIDEOONLY")if(zt.log("mediaTypeForOutgoingCall :"+this.mediaTypeForOutgoingCall),this.mediaTypeForOutgoingCall==="VIDEOONLY"&&(lt=!0),this.screenSharing!==!0){if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return zt.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();zt.log("video is not present :"+this.callType),this.callType==="media"&&(zt.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else zt.log("screenSharing, no device checking");else if(this.mediaTypeForOutgoingCall==="AUDIO")zt.log("mediaTypeForOutgoingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForOutgoingCall==="NONE"||this.mediaTypeForOutgoingCall==="DATA")return zt.log("mediaTypeForOutgoingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall()}else if(zt.log("incoming call"),this.mediaTypeForIncomingCall==="VIDEO"||this.mediaTypeForIncomingCall==="VIDEOONLY"){if(zt.log("mediaTypeForIncomingCall :"+this.mediaTypeForIncomingCall),this.mediaTypeForIncomingCall==="VIDEOONLY"&&(lt=!0),apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return zt.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();zt.log("video is not present :"+this.callType),this.callType==="media"&&(zt.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else if(this.mediaTypeForIncomingCall==="AUDIO")zt.log("mediaTypeForIncomingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForIncomingCall==="NONE"||this.mediaTypeForIncomingCall==="DATA")return zt.log("mediaTypeForIncomingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall();Kt.getUserMediaOnGoing=!0;var Tt=null,It=null;if(zt.log("this.screenSharing :"+this.screenSharing),zt.log("this.audioOnly :"+this.audioOnly),this.screenSharing===!0)if(zt.log("getScreenMedia"),rt.Xh==="Chrome")zt.log("this.desktopId :"+this.desktopId),Tt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.desktopId}}};else{if(zt.log("this.captureSourceType :"+this.captureSourceType),this.captureSourceType!=="screen"&&this.captureSourceType!=="window"&&this.captureSourceType!=="application")return void zt.error("captureSourceType value is not correct");Tt={video:{mediaSource:this.captureSourceType}}}else this.audioOnly===!0?(zt.log("this.audioOnly = true"),Kt.gum_config=apiCC.setAudioSourceIdInConstraint(Kt.audioSourceId,Kt.gum_config),It=JSON.parse(JSON.stringify(Kt.gum_config)),Kt.allowAsymetricMediaCalls===!1?It.video=!1:zt.log("allow AsymetricMediaCalls is activated"),Tt=It):(zt.log("audio and video call"),Tt=(0,ot.ws)({},Kt.gum_config),lt?Tt.audio=!1:Tt=apiCC.setAudioSourceIdInConstraint(Kt.audioSourceId,Tt),Tt=apiCC.setVideoSourceIdInConstraint(Kt.videoSourceId,Tt),Tt=apiCC.setVideoFacingModeInConstraint(Kt.facingMode,Tt),typeof apiRTC_React<"u"&&(Tt={audio:!0,video:{mandatory:{minWidth:500,minHeight:300,minFrameRate:30},facingMode:"user"}}));apiCC.createUserMediaStream({callId:this.callId,type:this.callType,gum_config:Tt,success:function(Dt){zt.debug("[getUserMediaOnCall] success; userMediaStreamId: "+Dt.userMediaStreamId),Ot.callConfiguration!==void 0&&Ot.callConfiguration!==null||(Ot.callConfiguration={}),Ot.callConfiguration.userMediaStreamId=Dt.userMediaStreamId,Ot.onUserMediaSuccessOnCall(Dt.stream)},failure:function(Dt,Et){zt.debug("[getUserMediaOnCall] failure; userMediaStreamId: "+Dt.userMediaStreamId),Ot.onUserMediaErrorOnCall(Et)}})},this.handleToneChangeEvent=function(Ot){zt.debug("handleToneChangeEvent :",Ot.tone),Ot.tone!==""?zt.debug("Tone played: "+Ot.tone):zt.debug("All tones have played.")},this.sendTones=function(Ot,lt,Tt){zt.debug("sendTones :"),this.dtmfSender&&(zt.debug("sendTones : Tones, duration, gap: ",Ot,lt,Tt),this.dtmfSender.insertDTMF(Ot,lt,Tt))},this.addStream=function(Ot){var lt,Tt=null,It=null,Dt=0,Et=!1,$t=null,xt=[];if(rt.Xh==="Firefox"&&rt.PR<51||rt.Xh==="Chrome"&&rt.PR<65||rt.Xh==="Safari"&&rt.dc<12.1||rt.Xh==="Mobile Safari"&&rt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)zt.info("using addStream method"),this.pc.addStream(Ot),zt.debug("end addStream method");else{if(!(rt.Xh==="Firefox"&&rt.PR<59||rt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||typeof apiRTC_React<"u")){for(zt.info("using addTrack/replaceTrack method"),Tt=Ot.getTracks(),lt=0;lt<Tt.length;lt+=1){for(Et=!1,It=this.rtpSenders[Tt[lt].kind],Dt=0;Dt<It.length;Dt+=1)if(It[Dt].track===null){Et=!0;break}if(Et===!0)xt.push(It[Dt].replaceTrack(Tt[lt])),zt.debug("addStream -> replaceTrack",It[Dt]);else{if(this.simulcast==="RID"&&Tt[lt].kind==="video"&&ot.wL.type==="chrome"){var Vt=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}];this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings&&(Vt=this.callControl.callConfiguration.simulcast.sendEncodings.slice()),$t=this.pc.addTransceiver(Tt[lt],{direction:"sendonly",streams:[Ot],sendEncodings:Vt}).sender}else if($t=this.pc.addTrack(Tt[lt],Ot),this.simulcast==="RID"&&Tt[lt].kind==="video"&&ot.wL.type==="firefox"){var Zt=$t.getParameters();Zt||(Zt={}),this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings?Zt.encodings=this.callControl.callConfiguration.simulcast.sendEncodings.slice():Zt.encodings=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],xt.push($t.setParameters(Zt))}zt.debug("addStream -> addTrack",$t),this.rtpSenders[Tt[lt].kind].push($t)}}return zt.debug("end addTrack/replaceTrack method"),this.rtpSenders.audio.length>0&&(this.dtmfSender=this.rtpSenders.audio[0].dtmf,this.dtmfSender&&(this.dtmfSender.ontonechange=this.handleToneChangeEvent)),new Promise(function(an,qt){Promise.all(xt).then(function(tn){an()}).catch(qt)})}for(zt.info("using addTrack method"),Tt=Ot.getTracks(),lt=0;lt<Tt.length;lt+=1)this.pc.addTrack(Tt[lt],Ot);zt.debug("end addTrack method")}return Promise.resolve()},this.removeStream=function(Ot){var lt,Tt=null,It=[];if(zt.info("removeStream in call",Ot.id),rt.Xh==="Firefox"&&rt.PR<51||rt.Xh==="Chrome"&&rt.PR<65||rt.Xh==="Safari"&&rt.dc<12.1||rt.Xh==="Mobile Safari"&&rt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)zt.info("using removeStream method"),this.pc.removeStream(Ot),zt.debug("end removeStream method");else{if(!(rt.Xh==="Firefox"&&rt.PR<59||rt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome")){for(zt.info("using replaceTrack method"),lt=0;lt<this.rtpSenders.audio.length;lt+=1)It.push(this.rtpSenders.audio[lt].replaceTrack(null));for(lt=0;lt<this.rtpSenders.video.length;lt+=1)It.push(this.rtpSenders.video[lt].replaceTrack(null));return zt.debug("end replaceTrack method"),new Promise(function(Dt,Et){Promise.all(It).then(function($t){Dt()}).catch(Et)})}for(zt.info("using removeTrack method"),Tt=this.pc.getSenders(),zt.debug("senders :",Tt),lt=0;lt<Tt.length;lt+=1)this.pc.removeTrack(Tt[lt]);zt.debug("end removeTrack method")}return Promise.resolve()},this.stopStream=function(Ot){zt.info("stopStream in call");var lt,Tt=null;if(rt.Xh==="Chrome"&&rt.PR<45||rt.Xh==="Firefox"&&rt.PR<44||rt.Xh==="Opera"&&rt.PR<34||rt.Xh==="Chromium"&&rt.PR<44||rt.Xh==="Chrome WebView"&&rt.PR<45)zt.log("... using MediaStream.stop"),Ot.stop();else{for(zt.log("... using MediaStreamTrack.stop"),Tt=Ot.getTracks(),lt=0;lt<Tt.length;lt+=1)Tt[lt].stop();zt.log("... tracks stopped")}Ot=null},this.addVideoMedia=function(){var Ot=this;zt.info("addVideoMedia");var lt=Kt.gum_config;apiCC.createUserMediaStream({callId:this.callId,type:"media",gum_config:lt,success:function(Tt){zt.debug("[addVideoMedia] success; userMediaStreamId: "+Tt.userMediaStreamId);var It=apiCC.getUserMediaStream(Ot.callConfiguration.userMediaStreamId),Dt=Promise.resolve();It&&(Dt=Ot.removeStream(It.stream).then(function(){Kt.myWebRTC_Event.createLocalStreamRemovedEvent(Ot.callType,Ot.callId,It.stream,Ot.remoteId,Ot.destCallType),apiCC.releaseUserMediaStream(It.userMediaStreamId,Ot.callId)})),Dt.then(function(){Ot.callConfiguration.userMediaStreamId=Tt.userMediaStreamId,Ot.callLocalStream=Tt.stream,Ot.addStream(Tt.stream),Ot.updateMediaWithRetryManagement(!1)}).catch(function(Et){zt.error("Failed to addVideoMedia",Et);var $t=null,xt=null;Ot.callControl&&($t=Ot.callControl.roomName,xt=Ot.callControl.type),Kt.myWebRTC_Event.createErrorEvent("Failed to addVideoMedia","MEDIA_UPDATE_ERROR",Ot.callId,$t,xt)})},failure:function(Tt,It){zt.debug("[addVideoMedia] failure; userMediaStreamId: "+Tt.userMediaStreamId),Ot.onUserMediaErrorOnCall(It)}})},this.stopScreenSharing=function(){zt.debug("stopScreenSharing detected"),Kt.removeCallFromTableWithCallIdAndSendBye(this.callId,"stop_ScreenSharing")},this.checkingMutingState=function(){var Ot=this,lt=null;zt.debug("checkingMutingState");var Tt=function(){(0,ot.ki)(Ot,"mcuRemoteStream","object")||(Ot.mcuRemoteStream={}),Ot.mcuRemoteStream.videoMuted=!0},It=function(){(0,ot.ki)(Ot,"mcuRemoteStream","object")||(Ot.mcuRemoteStream={}),Ot.mcuRemoteStream.audioMuted=!0};(0,ot.ki)(this.callConfiguration,"userMediaStreamId","string")&&(lt=apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId))&&(lt.videoMuted?(Tt(),this.isLocalVideoMuted=!0):this.isLocalVideoMuted=!1,lt.audioMuted?(It(),this.isLocalAudioMuted=!0):this.isLocalAudioMuted=!1);var Dt=function(){Ot.isLocalVideoMuted||(lt?lt.video&&!lt.videoMuted&&lt.muteVideoOnStreams("enabled"):Ot.callLocalStream&&(Kt.muteTracks(Ot.callLocalStream.getVideoTracks()),Ot.isLocalVideoMuted=!0),Tt())},Et=function(){Ot.isLocalAudioMuted||(lt?lt.audio&&!lt.audioMuted&&lt.muteAudioOnStreams("enabled"):Ot.callLocalStream&&(Kt.muteTracks(Ot.callLocalStream.getAudioTracks()),Ot.isLocalAudioMuted=!0),It())};Kt.isVideoMuted===!0&&(zt.log("Client is video muted, applying to call"),Dt()),Kt.isAudioMuted===!0&&(zt.log("Client is audio muted, applying to call"),Et()),(0,ot.ki)(this.callConfiguration,"muted","string")&&(zt.log("callConfiguration muted is set :",this.callConfiguration.muted),this.callConfiguration.muted==="VIDEO"&&(Dt(),Et()),this.callConfiguration.muted==="AUDIOONLY"&&Et(),this.callConfiguration.muted==="VIDEOONLY"&&Dt(),delete this.callConfiguration.muted)},this.onUserMediaSuccessOnCall=function(Ot){zt.info("onUserMediaSuccessOnCall");var lt=(0,ot.Pj)(),Tt={};Kt.userMediaErrorDetected===!0&&(Kt.userMediaErrorDetected=!1,Tt.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(Tt)),zt.log("isHTTPS()"+lt),Kt.getUserMediaOnGoing=!1,zt.log("User has granted access to local media."),Kt.accessToLocalMedia=!0,this.accessToMedia=!0,this.screenSharing===!0?(this.callType="screenSharing",Ot!=null&&(Ot.onended=this.callback(this,"stopScreenSharing"),Ot.getVideoTracks().length>0&&(Ot.getVideoTracks()[0].onended=this.callback(this,"stopScreenSharing")))):this.audioOnly===!0&&(this.callType="audio"),Ot!==void 0&&(this.callLocalStream=Ot),(0,ot.yJ)()?(zt.log("isHTTP true"),this.establishCall()):(zt.log("webRTCClient.userAcceptOnIncomingCall :"+Kt.userAcceptOnIncomingCall),zt.log("this.callee :"+this.callee),this.data!==void 0&&zt.log("this.data.MCUType :"+this.data.MCUType),Kt.userAcceptOnIncomingCall!==!0||this.callee!==!0&&this.data.MCUType!=="MCU-Callee"||this.isAccepted!==!1?this.calleeId!=="LOCAL"?this.establishCall():zt.log("call is not established as this is a LOCAL stream request"):zt.log("Stand-by :: wait for establishCall"))},this.establishCall=function(){var Ot=this;zt.debug("establishCall()"),this.started!==!0||this.addingUserMedia!==!0||!this.belongsToRoom()||this.settingUpType!=="publish"||this.data&&this.data.hasOwnProperty("MCUType")||!this.sessionMCU||this.sessionMCU.hasOwnProperty("roomMode")||(this.restarting=!0,this.pc.close(),this.pc=null,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.updateUserMedia=!1,this.updateCause=null,this.incomingcandidatesQueue=[],this.message200OKReceived=!1,this.statisticId&&(clearInterval(this.statisticId),this.statisticId=null),this.csmIntervalId&&(clearInterval(this.csmIntervalId),this.csmIntervalId=null),this.instanceId=apiCC.generateInstanceId(),this.data.instanceId=this.instanceId),this.dataCall!==!0&&this.checkingMutingState(),this.maybeStart();var lt=null;this.callee&&this.addingUserMedia!==!0&&this.updateUserMedia!==!0?(lt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),zt.log("Avant setRemote pour le callee :",lt),this.pc!==null?(Kt.preferSendingH264Codec&&(zt.log("Modification of SDP to set H264 as prefered sending codec"),lt.sdp=Kt.mySDPManager.maybePreferCodec(lt.sdp,"video","H264")),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("establishCall : before setRemoteDescription for callee"),this.pc.setRemoteDescription(lt,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(zt.log("establishCall : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(lt).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure")))):zt.log("Error : PC is null"),this.doAnswer()):this.addingUserMedia===!0?(zt.log("Adding local stream 1."),this.pc!==null?(this.callLocalStream===null&&Kt.localStream!==null&&(this.callLocalStream=Kt.localStream),this.callLocalStream!==null?(zt.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream).then(function(){Ot.updateMediaWithRetryManagement(!1)}).catch(function(Tt){zt.error("failed to add stream",Tt)})):(zt.log("No Stream to addStream"),this.updateMediaWithRetryManagement(!1))):zt.error("Error : PC is null")):this.updateUserMedia===!0&&this.updateMediaWithRetryManagement(!1),zt.log("End of establishCall()")},this.onUserMediaSuccessTestUni=function(){Kt.getUserMediaOnGoing=!1,zt.info("onUserMediaSuccessTestUni : User has not granted access to local media.");var Ot=null,lt={};Kt.userMediaErrorDetected===!0&&(Kt.userMediaErrorDetected=!1,lt.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(lt)),Kt.accessToLocalMedia=!0,this.maybeStart(),this.callee&&(Ot=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),Kt.preferSendingH264Codec&&(zt.log("Modification of SDP to set H264 as prefered sending codec"),Ot.sdp=Kt.mySDPManager.maybePreferCodec(Ot.sdp,"video","H264")),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee"),this.pc.setRemoteDescription(Ot,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(zt.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(Ot).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))),this.doAnswer())},this.onUserMediaErrorOnCall=function(Ot){var lt=this;zt.log("onUserMediaErrorOnCall");var Tt={};Kt.getUserMediaOnGoing=!1,setTimeout(function(){cn.createErrorEvent(Ot,"USER_MEDIA_ERROR",lt.callId)}),zt.error("Failed to get access to local media. Error code was "+Ot.code),zt.error(Ot),Ot=null,rt.$6!=="electron"&&rt.Xh==="Chrome"&&rt.PR>47&&(zt.log("browser_version > 47"),window.location.protocol!=="https:"&&zt.error("HTTPS is now mandatory to use getUserMedia()")),this.screenSharing===!0&&(this.callType="screenSharing",window.location.protocol!=="https:"?(zt.log("You need to be connected using HTTPS for screenSharing"),cn.createDesktopCaptureEvent("UserMediaError_HTTPS_needed",this.callId,this.remoteId)):(zt.log("screenSharing UserMediaError"),cn.createDesktopCaptureEvent("UserMediaError",this.callId,this.remoteId))),this.callee===!0?(this.myWebRTC_Stack.sendBye(this.callId,this.calleeId,this.dest_roomId,this.callerId,"User_Media_Error",this.data),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.callerId,"User_Media_Error")):(this.data!==void 0&&this.data!==null&&this.data.MCUType==="MCU-Callee"&&this.myWebRTC_Stack.sendBye(this.callId,this.callerId,this.dest_roomId,this.calleeId,"User_Media_Error",this.data),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"User_Media_Error")),this.screenSharing===!1&&(Kt.userMediaErrorDetected=!0,Tt.userMediaErrorDetected=Kt.userMediaErrorDetected,apiCC.session.setUserData(Tt))},this.maybeStart=function(){zt.debug("maybeStart"),!this.started&&Kt.channelReady&&(Kt.accessToLocalMedia||this.dataCall)&&(zt.log("Creating PeerConnection."),this.createPeerConnection(),Kt.unidirectionelCallOnly||this.screenSharing===!0?this.callee===!1&&(zt.log("Adding local stream 2."),this.callLocalStream!==null?(zt.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Kt.localStream!==null?(zt.log("Add Stream of client.localStream"),this.addStream(Kt.localStream),this.callLocalStream=Kt.localStream):zt.log("No Stream to add")):this.dataCall||(zt.log("Adding local stream 3."),this.callLocalStream!==null?(zt.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Kt.localStream!==null?(zt.log("Add Stream of client.localStream"),this.addStream(Kt.localStream),this.callLocalStream=Kt.localStream):(zt.log("No Stream to add"),this.belongsToRoom()||ot.wL.type!=="safari"||typeof this.pc.addTransceiver!="function"||(zt.debug("add transceivers"),this.pc.addTransceiver("audio",{direction:"recvonly"}),this.pc.addTransceiver("video",{direction:"recvonly"})))),this.started=!0,this.callee===!1&&(zt.log("Before doCall()"),this.doCall())),zt.log("End of maybeStart")},this.createDataChannel=function(){if(zt.info("createDataChannel"),rt.Xh==="Edge"&&rt.PR<79&&apiRTC.browserDetails.type!=="chrome")zt.warn("Cannot create DataChannel as it is not supported on Edge");else if(this.sendDataChannel===null)try{this.sendDataChannel=this.pc.createDataChannel("apiRTCDataChannel",{}),this.sendDataChannel.binaryType="arraybuffer",zt.log("Created data channel"),zt.log("Subscribing to dc events"),this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")}catch(Ot){zt.log("createDataChannel() failed with exception: "+Ot.message)}else zt.log("Datachannel already exist")},this.createPeerConnection=function(){zt.info("createPeerConnection");try{zt.log("createPeerConnection with pc_config:",JSON.stringify(this.pc_config)),zt.log("and pc_constraints:",JSON.stringify(this.pc_constraints)),ot.wL.type==="chrome"&&ot.wL.version>=72&&ot.wL.version<78?(zt.debug("Chrome 72=+ and 78-, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0?(zt.debug("Cordova, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):zt.debug("sdpSemantics unified-plan is being used"),this.pc=new apiCC.myWebRTC_Adapter.RTCPeerConnection(this.pc_config,this.pc_constraints),this.dataCall&&this.createDataChannel(),this.pc.onicecandidate=this.callback(this,"onIceCandidate")}catch(Ot){return zt.log("Failed to create PeerConnection, exception: "+Ot.message),void zt.error("Cannot create RTCPeerConnection object; WebRTC is not supported by this browser.")}rt.Xh==="Firefox"&&rt.PR>=53||rt.Xh==="Edge"||ot.wL.type==="chrome"&&ot.wL.version>=64?(this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"),this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded")):rt.Xh==="Safari"&&rt.PR>=12||rt.Xh==="Mobile Safari"&&rt.PR>=12||typeof apiRTC_React<"u"?this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"):this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded"),this.pc.onremovestream=this.callback(this,"onRemoteStreamRemoved"),this.pc.onnegotiationneeded=this.callback(this,"onNegotiationNeeded"),this.pc.onsignalingstatechange=this.callback(this,"onSignalingStateChange"),this.pc.oniceconnectionstatechange=this.callback(this,"onIceConnectionStateChange"),this.pc.ondatachannel=this.callback(this,"onDataChannel"),this.pc.onicegatheringstatechange=this.callback(this,"onIceGatheringStateChange"),this.pc.onconnectionstatechange=this.callback(this,"onConnectionStateChange"),Kt.qosEnable&&(this.statisticId=setInterval(this.callback(this,"getStatistics"),this.getStatsInterval)),Kt.csmEnable&&(this.csmLastResults={},this.csmIntervalId=setInterval(this.callback(this,"csmHandler"),this.csmIntervalMs))},this.onIceGatheringStateChange=function(Ot){zt.log("onIceGatheringStateChange"),this.pc!==null&&(zt.info("onIceGatheringStateChange, Ice Gathering State is now : "+this.pc.iceGatheringState),this.pc.iceGatheringState==="complete"&&this.candidateNb===0&&zt.warn("Warning, no candidate where retrieved for this call on client"))},this.onConnectionStateChange=function(Ot){zt.log("onConnectionStateChange event :",Ot)},this.onDataChannel=function(Ot){zt.info("onDataChannel event"),this.receiveDataChannel=Ot.channel,this.receiveDataChannel.binaryType="arraybuffer",this.sendDataChannel===null&&(zt.log("Setting this.sendDataChannel with receivedDataChannel"),this.sendDataChannel=Ot.channel,this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")),zt.log("got dataChannel",Ot.channel.label),zt.log("Subscribing to dc events"),this.receiveDataChannel.onopen=this.callback(this,"onReceiveDataChannelOpen"),this.receiveDataChannel.onclose=this.callback(this,"onReceiveDataChannelClose"),this.receiveDataChannel.onmessage=this.callback(this,"onReceiveDataChannelMessage"),this.receiveDataChannel.onerror=this.callback(this,"onReceiveDataChannelError")},this.onSendDataChannelOpen=function(Ot){zt.info("onSendDataChannelOpen"),this.callType==="data"&&this.calleeId==="dataChannelConnector"&&(this.pushDataStatus&&this.pushDataStatus.type==="pipeline"?(this.pushDataStatus.state="ready",setTimeout(function(){Kt.startNextPushData()})):this.transferStarted!==!0&&this.startTransfer()),cn.createEvent({eventType:"sendDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.onSendDataChannelClose=function(Ot){zt.info("onSendDataChannelClose"),this.sendDataChannel=null,cn!==null&&cn.createEvent({eventType:"sendDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.processOnDataChannelMessage=function(Ot){var lt,Tt,It=null,Dt=null,Et="",$t=0;if(zt.info("processOnDataChannelMessage"),It=JSON.parse(Ot.data),zt.log("data.uuid :"+It.uuid),zt.log("data.messageSize :"+It.messageSize),zt.log("data.originalDataType :"+It.originalDataType),lt=It.uuid,It.originalDataType==="ArrayBuffer"&&(zt.log("ArrayBuffer conversion"),It.message=ot.cw.decode(It.message)),zt.log("data :"+It),zt.log("data.uuid :"+lt),zt.log("receiveChunkNb[uuid] :"+this.receiveChunkNb[lt]),this.receiveChunkNb[lt]===void 0)zt.log("receiving first packet for uuid :"+lt),zt.log("evt.data.message :"+Ot.data),this.firstDataPacket[lt]=It,this.receiveChunkNb[lt]=1,this.receivedSize[lt]=0,this.startingDate=new Date,this.transferDuration=0,cn.createEvent({eventType:"onFileReceiving",remoteId:this.remoteId,callId:this.callId,name:It.name,uuid:lt}),cn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[lt],fileSize:this.firstDataPacket[lt].size,remainingSize:this.firstDataPacket[lt].size,callId:this.callId,uuid:lt,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:0,transferEnded:!1});else if(zt.log("new packet for uuid :"+lt),this.receiveChunkNb[lt]+=1,zt.log("data.messageSize :"+It.messageSize),zt.log("data.message.length :"+It.message.length),$t=It.messageSize||It.message.length,zt.log("receivedSize :"+$t),this.receiveArrayToStoreChunks[lt]||(this.receiveArrayToStoreChunks[lt]=[]),this.receiveArrayToStoreChunks[lt].push(It.message),this.receivedSize[lt]+=$t,this.transferDuration=new Date-this.startingDate,this.receivedSize[lt]===this.firstDataPacket[lt].size){if(zt.log("End of data transfert"),zt.log("this.firstDataPacket.type :"+this.firstDataPacket[lt].type),this.firstDataPacket[lt].type==="image/png-dataUrl"){for(zt.log("Photo received from a takeSnapshot"),Tt=0;Tt<this.receiveArrayToStoreChunks[lt].length;Tt+=1)Et+=this.receiveArrayToStoreChunks[lt][Tt];Dt=Et}else Dt=new window.Blob(this.receiveArrayToStoreChunks[lt]);cn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[lt],fileSize:this.firstDataPacket[lt].size,remainingSize:0,callId:this.callId,uuid:lt,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:100,transferEnded:!0}),cn.createEvent({eventType:"onFileReceived",callId:this.callId,uuid:lt,remoteId:this.remoteId,callerId:this.callerId,calleeId:this.calleeId,data:{file:Dt,name:this.firstDataPacket[lt].name,type:this.firstDataPacket[lt].type,uuid:lt},details:Ot}),delete this.receiveArrayToStoreChunks[lt],delete this.receivedSize[lt],delete this.receiveChunkNb[lt],delete this.firstDataPacket[lt]}else cn.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[lt],fileSize:this.firstDataPacket[lt].size,remainingSize:this.firstDataPacket[lt].size-this.receivedSize[lt],callId:this.callId,uuid:lt,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*this.receivedSize[lt]/this.firstDataPacket[lt].size,10),transferEnded:!1})},this.onSendDataChannelMessage=function(Ot){zt.info("onSendDataChannelMessage :",Ot),this.processOnDataChannelMessage(Ot)},this.onSendDataChannelError=function(Ot){zt.info("onSendDataChannelError"),this.sendDataChannel=null,cn.createEvent({eventType:"sendDataChannelError",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.onReceiveDataChannelOpen=function(Ot){zt.info("onReceiveChannelOpen"),cn.createEvent({eventType:"receiveDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.onReceiveDataChannelClose=function(Ot){zt.info("onReceiveDataChannelClose"),this.receiveDataChannel=null,cn!==null&&cn.createEvent({eventType:"receiveDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.onReceiveDataChannelMessage=function(Ot){zt.info("onReceiveChannelMessage"),this.processOnDataChannelMessage(Ot)},this.onReceiveDataChannelError=function(Ot){zt.info("onReceiveChannelError"),cn.createEvent({eventType:"receiveDataChannelError",callId:this.callId,remoteId:this.remoteId,details:Ot})},this.startTransfer=function(){var Ot=this,lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=lt.hasOwnProperty("delay")?lt.delay:100;this.transferStarted!==!0&&(zt.info("startTransfer",Tt),this.transferStarted=!0,setTimeout(function(){Ot.dcfs||(Ot.dcfs=new Ft(Ot),Ot.data.offset>0?Ot.dcfs.transfer(Ot.fileContent.buffer,Ot.data.offset,Ot.sendDataChannel,{delay:Tt}):Ot.dcfs.transfer(Ot.fileContent.buffer,0,Ot.sendDataChannel,{delay:Tt}))},Tt))},this.statisticsAnswer=function(Ot){var lt=Ot.result(),Tt=null;this.qm||(this.qm=new Rt(this.getStatsInterval/1e3,this.callback(this,"onQosChange"),this.callback(this,"onQosAudioChange"),this.callback(this,"onQosVideoChange"),this.callId,Kt.apiKey,Kt.clientId,Kt.socket)),lt&&(this.qm.insertStats(lt,this.sendedSdpOfferMessage,this.receivedSdpOfferMessage,Kt.remoteVideo),Tt=this.qm.getAllStats(),Kt.qosEnable&&cn.createEvent({eventType:"onQosStatsUpdate",callId:this.callId,remoteId:this.remoteId,stats:Tt}),this.videoReceivedWidth=Tt.VideoRecv.FrameWidth,this.videoReceivedHeight=Tt.VideoRecv.FrameHeight,this.videoSendWidth=Tt.VideoSend.FrameWidth,this.videoSendHeight=Tt.VideoSend.FrameHeight,this.videoReceivedDelay=Tt.VideoRecv.delay,this.audioReceivedDelay=Tt.AudioRecv.delay,this.audioSendDelay=Tt.AudioSend.rtt,this.videoSendDelay=Tt.VideoSend.rtt,this.videoSendMoyDelay=Tt.VideoSend.moyRtt,this.videoSendPacketLossRatio=Tt.VideoSend.packetLostRatio,this.audioSendPacketLossRatio=Tt.AudioSend.packetLostRatio,this.videoSendEncodeUsagePercent=Tt.VideoSend.googEncodeUsagePercent,this.videoSendCpuLimitedResolution=Tt.VideoSend.googCpuLimitedResolution,this.videoSendBandwidthLimitedResolution=Tt.VideoSend.googBandwidthLimitedResolution,this.videoSendCpuLimitedResolution!==void 0&&JSON.parse(this.videoSendCpuLimitedResolution)===!0&&cn.createEvent({eventType:"cpuLimited",callId:this.callId,encodeUsagePercent:this.videoSendEncodeUsagePercent}),this.videoSendBandwidthLimitedResolution!==void 0&&JSON.parse(this.videoSendBandwidthLimitedResolution)===!0&&cn.createEvent({eventType:"bandwidthLimited",callId:this.callId}))},this.csmGetStatsHandler=function(Ot){var lt,Tt=this,It=null,Dt=null,Et={};if(this.csm||(this.csm=new Ut(this.csmIntervalMs/1e3,ot.wL.type,ot.wL.version,"standard"),this.csm.browserInfo={browserAbout:rt.Xh+" "+rt.dc,browserType:ot.wL.type,browserVersion:ot.wL.version},(0,ot.Ym)(this.mcuRemoteStream,"attributes","object")&&(this.mcuRemoteStream.replay===!0?(0,ot.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.recId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId,modifier:"replay",recId:this.mcuRemoteStream.attributes.recId}):(0,ot.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,ot.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId}))),Et.post=function(xt){Tt.mos||(Tt.mos=new Jt),xt.quality={},xt.audioReceived?Tt.isRemoteAudioMuted?xt.quality.mosS="Muted":xt.audioReceived.bitsReceivedPerSecond!==0?(xt.audioReceived.delay=parseInt(Tt.audioReceivedDelay,10),xt.quality.mosS=Tt.mos.NarrowBandSpeechQuality(xt.audioReceived.delay,xt.audioReceived.packetLossRatio)):xt.quality.mosS="NoStream":xt.quality.mosS="NoStream",xt.videoReceived?Tt.isRemoteVideoMuted?xt.quality.mosV="Muted":xt.videoReceived.bitsReceivedPerSecond!==0?(xt.videoReceived.width=Tt.videoReceivedWidth,xt.videoReceived.height=Tt.videoReceivedHeight,xt.videoReceived.delay=parseInt(Tt.videoReceivedDelay,10),xt.quality.mosV=Tt.mos.videoQuality(xt.videoReceived.width,xt.videoReceived.height,xt.videoReceived.packetLossRatio,Math.floor(xt.videoReceived.bitsReceivedPerSecond/1e3),xt.videoReceived.framesDecodedPerSecond)):xt.quality.mosV="NoStream":xt.quality.mosV="NoStream",xt.audioReceived&&xt.videoReceived&&(xt.quality.mosAV=Tt.mos.audiovisualQuality(xt.quality.mosS,xt.quality.mosV,xt.audioReceived.delay,xt.videoReceived.delay)),xt.audioSent?Tt.isLocalAudioMuted?xt.quality.mosSS="Muted":xt.audioSent.bitsSentPerSecond!==0?(xt.audioSent.delay=parseInt(Tt.audioSendDelay,10),xt.audioSent.packetLossRatio=Tt.audioSendPacketLossRatio,xt.quality.mosSS=Tt.mos.NarrowBandSpeechQuality(xt.audioSent.delay,xt.audioSent.packetLossRatio)):xt.quality.mosSS="NoStream":xt.quality.mosSS="NoStream",xt.videoSent?Tt.isLocalVideoMuted?xt.quality.mosSV="Muted":xt.videoSent.bitsSentPerSecond!==0?(xt.videoSent.width=Tt.videoSendWidth,xt.videoSent.height=Tt.videoSendHeight,xt.videoSent.delay=parseInt(Tt.videoSendDelay,10),xt.videoSent.moyDelay=parseInt(Tt.videoSendMoyDelay,10),xt.videoSent.packetLossRatio=Tt.videoSendPacketLossRatio,xt.videoSent.encodeUsagePercent=Tt.videoSendEncodeUsagePercent,xt.videoSent.cpuLimitedResolution=Tt.videoSendCpuLimitedResolution,xt.videoSent.bandwidthLimitedResolution=Tt.videoSendBandwidthLimitedResolution,xt.quality.mosSV=Tt.mos.videoQuality(xt.videoSent.width,xt.videoSent.height,xt.videoSent.packetLossRatio,Math.floor(xt.videoSent.bitsSentPerSecond/1e3),xt.videoSent.framesEncodedPerSecond)):xt.quality.mosSV="NoStream":xt.quality.mosSV="NoStream",xt.audioSent&&xt.videoSent&&(xt.quality.mosSAV=Tt.mos.audiovisualQuality(xt.quality.mosSS,xt.quality.mosSV,xt.audioSent.delay,xt.videoSent.delay))},lt=this.csm.addCallStats(Ot,Et),Object.keys(lt).length!==0){!lt.quality||lt.quality.mosS==="Muted"&&lt.quality.mosV==="Muted"&&lt.quality.mosSS==="Muted"&&lt.quality.mosSV==="Muted"||Kt.qualityScoreEnable&&cn.createEvent({eventType:"onCallScoreUpdate",callId:this.callId,score:lt.quality}),this.csmLastResults=lt,this.callLocalStream&&typeof this.callLocalStream.getVideoTracks=="function"&&(It=this.callLocalStream.getVideoTracks())&&It[0]&&typeof It[0].getSettings=="function"&&(Dt=It[0].getSettings());var $t={save:!0,clientId:Kt.clientId,callId:this.callId,instanceId:this.instanceId,browserInfo:this.csm.browserInfo,stats:lt};this.sessionMCU&&($t.roomId=this.sessionMCU.roomName,$t.pubSub=Kt.MCUClient.pubConnector),this.csm.callFeed&&($t.callFeed=this.csm.callFeed),Dt&&($t.videoSettings=Dt),this.data.mesh&&($t.mesh=this.data.mesh),this.myWebRTC_Stack.sendInfo("callStats",$t),Kt.csmEnable&&(this.data&&this.data.mesh&&(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Kt.compositeClientId:this.data.mesh.calleeId===Kt.clientId)?cn.createEvent({eventType:"onCallStatsUpdate",callId:this.data.mesh.calleeCallId,userId:this.data.mesh.callerId,stats:lt}):cn.createEvent({eventType:"onCallStatsUpdate",callId:this.callId,stats:lt}))}},this.onQosChange=function(Ot,lt){cn.createEvent({eventType:"onQosChange",callId:this.callId,remoteId:this.remoteId,qosIn:Ot,qosOut:lt})},this.onQosAudioChange=function(Ot,lt){cn.createEvent({eventType:"onQosAudioChange",callId:this.callId,remoteId:this.remoteId,qosAudioIn:Ot,qosAudioOut:lt})},this.onQosVideoChange=function(Ot,lt){cn.createEvent({eventType:"onQosVideoChange",callId:this.callId,remoteId:this.remoteId,qosVideoIn:Ot,qosVideoOut:lt})},this.getStatistics=function(){this.pc&&(rt.Xh==="Chrome"&&rt.PR>112?zt.debug("getStats with callback in now deprecated on Chrome, getStatistics() / QoSMonitor can no more be used"):this.pc.getStats&&rt.Xh==="Chrome"&&this.pc.getStats(this.callback(this,"statisticsAnswer")))},this.csmHandler=function(){this.statisticId||this.getStatistics(),this.pc&&typeof this.pc.getStats=="function"&&this.pc.getStats(null).then(this.callback(this,"csmGetStatsHandler")).catch(function(Ot){zt.warn("failed to get stats",Ot)})},this.doCall=function(){var Ot=null;zt.log("Sending offer to peer"),this.audioOnly?(zt.log("audioOnly call :",this.mediaConstraintsAudioOnly),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(zt.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.screenSharing===!0?(zt.log("screenSharing call : one way media :",Ot),Ot={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),Ot)):(zt.log("createOffer - Promise version"),this.pc.createOffer(Ot).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.dataCall===!0?(zt.log("call is data only :",Ot),Ot=rt.Xh==="Firefox"&&rt.PR>43?{offerToReceiveAudio:!1,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),Ot)):(zt.log("createOffer - Promise version"),this.pc.createOffer(Ot).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):(zt.log("call is audio & video :",this.mediaConstraints),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(zt.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure"))))},this.doAnswer=function(){zt.info("doAnswer");var Ot=null;this.audioOnly?(zt.log("audioOnly call"),Ot=this.mediaConstraintsAudioOnly):Ot=this.mediaConstraints,rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessage"),this.callback(this,"onCreateAnswerFailure"),Ot)):(zt.log("createAnswer - Promise version"),this.pc.createAnswer(Ot).then(this.callback(this,"setLocalAndSendMessage")).catch(this.callback(this,"onCreateAnswerFailure")))},this.doUpdateAnswer=function(){zt.info("doUpdateAnswer");var Ot=null;this.audioOnly?(zt.log("audioOnly call"),Ot=this.mediaConstraintsAudioOnly):Ot=this.mediaConstraints,rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessageUpdate"),this.callback(this,"onCreateAnswerFailure"),Ot)):(zt.log("createAnswer - Promise version"),this.pc.createAnswer(Ot).then(this.callback(this,"setLocalAndSendMessageUpdate")).catch(this.callback(this,"onCreateAnswerFailure")))},this.updateMediaWithRetryManagement=function(Ot){zt.debug("updateMediaWithRetryManagement");var lt=this.updateMedia(Ot);zt.debug("updateMediaResult :",lt),lt.reason!=="Sig_state_not_stable"&&lt.reason!=="Update_already_ongoing"||(zt.debug("updateMedia will be retried later for reason :",lt.reason),this.retryUpdateMedia=!0)},this.updateMedia=function(Ot){return zt.debug("updateMedia, callId :",this.callId),zt.log("iceRestartActivated :",Ot),this.pc===null?(zt.log("updateMedia, pc no more exist"),{status:"Not_Done",reason:"PC_Not_Exit"}):this.updateMediaOngoing===!0?(zt.log("updateMedia, already ongoing"),{status:"Not_Done",reason:"Update_already_ongoing"}):(this.updateMediaOngoing=!0,this.pc.signalingState!=="stable"?{status:"Not_Done",reason:"Sig_state_not_stable"}:(zt.log("Sending Update offer to peer."),this.audioOnly?(zt.log("audioOnly call :",this.mediaConstraintsAudioOnly),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),this.mediaConstraintsAudioOnly.mandatory!==void 0?this.mediaConstraintsAudioOnly.mandatory.IceRestart=!0:this.mediaConstraintsAudioOnly.iceRestart=!0,zt.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(zt.log("createOffer - Promise version"),Ot===!0&&(this.mediaConstraintsAudioOnly.iceRestart=!0),zt.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure")))):rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("createOffer"),Ot===!0&&(this.mediaConstraints.mandatory!==void 0?this.mediaConstraints.mandatory.IceRestart=!0:this.mediaConstraints.iceRestart=!0),zt.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(zt.log("createOffer - Promise version"),Ot===!0&&(this.mediaConstraints.iceRestart=!0),zt.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure"))),{status:"OnGoing",reason:"OK"}))},this.manipulateSDP=function(Ot,lt){var Tt=null,It=!1;return zt.log("manipulateSDP with type :",lt),Kt.receiveMediaDeactivated===!0&&(zt.log("setting receiveMediaDeactivated in SDP :"+Kt.receiveMediaDeactivated),Ot.sdp=Kt.mySDPManager.setSendOnly(Ot.sdp)),Kt.RTPMedia===!0&&(Ot.sdp=Ot.sdp.replace(/RTP\/SAVPF/g,"RTP/SF")),Kt.audioBandwidth!==null&&(zt.log("setting audioBandwidth in SDP :"+Kt.audioBandwidth),Ot.sdp=Kt.mySDPManager.setAudioBandwidth(Ot.sdp,Kt.audioBandwidth)),Kt.videoBandwidth!==null&&(zt.log("setting videoBandwidth in SDP :"+Kt.videoBandwidth),Ot.sdp=Kt.mySDPManager.setVideoBandwidth(Ot.sdp,Kt.videoBandwidth)),Kt.dataBandwidth!==null&&(zt.log("setting dataBandwidth in SDP :"+Kt.dataBandwidth),Ot.sdp=Kt.mySDPManager.setDataBandwidth(Ot.sdp,Kt.dataBandwidth)),Kt.preferOpusCodec===!0&&(zt.log("setting preferOpusCodec"),Ot.sdp=Kt.mySDPManager.preferOpus(Ot.sdp)),Kt.preferVP9Codec!==!0&&this.preferVP9Codec!==!0||(zt.log("Call prefer VP9 Codec"),Ot.sdp=Kt.mySDPManager.maybePreferCodec(Ot.sdp,"video","VP9")),Kt.preferH264Codec!==!0&&this.preferH264Codec!==!0||(zt.log("Call prefer H264 Codec"),Ot.sdp=Kt.mySDPManager.maybePreferCodec(Ot.sdp,"video","H264")),this.preferVP8Codec===!0&&(zt.log("Call prefer VP8 Codec"),Ot.sdp=Kt.mySDPManager.maybePreferCodec(Ot.sdp,"video","VP8")),Kt.setStereo===!0&&(zt.log("Set Stereo"),Ot.sdp=Kt.mySDPManager.setCodecParam(Ot.sdp,"opus/48000","stereo","1")),Ot=Kt.mySDPManager.updateSDPcodecs(Ot,Ot.type,"audio",Kt.allowedAudioCodecs),Ot=Kt.mySDPManager.updateSDPcodecs(Ot,Ot.type,"video",Kt.allowedVideoCodecs),lt==="OFFER"?this.settingUpType==="publish"&&this.mediaTypeForIncomingCall==="NONE"?(Tt=Kt.mySDPManager.createGuideline(Ot.sdp),this.mediaTypeForOutgoingCall==="VIDEO"?((0,ot.ki)(Tt,"audio","object")&&Tt.audio.direction!=="sendonly"&&(Tt.audio.direction="sendonly",It=!0),(0,ot.ki)(Tt,"video","object")&&Tt.video.direction!=="sendonly"&&(Tt.video.direction="sendonly",It=!0)):this.mediaTypeForOutgoingCall==="AUDIO"?((0,ot.ki)(Tt,"audio","object")&&Tt.audio.direction!=="sendonly"&&(Tt.audio.direction="sendonly",It=!0),(0,ot.ki)(Tt,"video","object")&&Tt.video.direction!=="inactive"&&(Tt.video.direction="inactive",It=!0)):this.mediaTypeForOutgoingCall==="VIDEOONLY"&&((0,ot.ki)(Tt,"audio","object")&&Tt.audio.direction!=="inactive"&&(Tt.audio.direction="inactive",It=!0),(0,ot.ki)(Tt,"video","object")&&Tt.video.direction!=="sendonly"&&(Tt.video.direction="sendonly",It=!0)),It===!0&&(Ot.sdp=Tt.generate())):this.mediaTypeForOutgoingCall==="VIDEO"?zt.log("mediaTypeForOutgoingCall is VIDEO"):this.mediaTypeForOutgoingCall==="AUDIO"||this.audioOnly===!0?(zt.log("mediaTypeForOutgoingCall is AUDIO"),Ot.sdp=Kt.mySDPManager.setRecvOnlyForVideo(Ot.sdp)):this.mediaTypeForOutgoingCall==="VIDEOONLY"?(zt.log("mediaTypeForOutgoingCall is VIDEOONLY"),Ot.sdp=Kt.mySDPManager.setRecvOnlyForAudio(Ot.sdp)):this.mediaTypeForOutgoingCall==="NONE"&&(zt.log("mediaTypeForOutgoingCall is NONE"),Ot.sdp=Kt.mySDPManager.setRecvOnly(Ot.sdp)):lt==="ANSWER"&&(this.mediaTypeForIncomingCall==="VIDEO"?zt.log("mediaTypeForIncomingCall is VIDEO"):this.mediaTypeForIncomingCall==="AUDIO"||this.audioOnly===!0?(zt.log("mediaTypeForIncomingCall is AUDIO"),Ot.sdp=Kt.mySDPManager.setRecvOnlyForVideo(Ot.sdp)):this.mediaTypeForIncomingCall==="VIDEOONLY"?(zt.log("mediaTypeForIncomingCall is VIDEOONLY"),Ot.sdp=Kt.mySDPManager.setRecvOnlyForAudio(Ot.sdp)):this.mediaTypeForIncomingCall==="NONE"&&(zt.log("mediaTypeForIncomingCall is NONE"),Ot.sdp=Kt.mySDPManager.setRecvOnly(Ot.sdp))),this.simulcast==="SDP"&&lt==="OFFER"&&this.settingUpType==="publish"&&((Tt=Kt.mySDPManager.createGuideline(Ot.sdp)).mungeForSimulcasting(),Ot.sdp=Tt.generate()),Ot},this.setLocalAndSendMessageonOffer=function(Ot){zt.info("setLocalAndSendMessageonOffer"),zt.log("sessionDescription = ",Ot),zt.log("sessionDescription.sdp = ",Ot.sdp);var lt=null;Ot.sdp=this.manipulateSDP(Ot,"OFFER").sdp,zt.log("manipulated sessionDescription.sdp = ",Ot.sdp),this.stripAudioSDPActivated===!0&&(Ot.sdp=Kt.mySDPManager.stripAudioMediaDescriptionFromSDP(Ot.sdp)),this.stripVideoSDPActivated===!0&&(Ot.sdp=Kt.mySDPManager.stripVideoMediaDescriptionFromSDP(Ot.sdp)),this.setLocalCallProfile(Kt.evalCallProfileWithSdp(Ot.sdp,"local","send")),this.sendedSdpOfferMessage=Ot,this.dataCall===!0&&(zt.log("setLocalAndSendMessageonOffer : data Call"),this.callType="data"),this.callCancelled===!1?Kt.NtoNConf===!1?(zt.log("Conf N to 1"),this.screenSharing===!0&&(lt=Kt.mySDPManager.getAudioMediaDescriptionPart(this.sendedSdpOfferMessage.sdp),this.callType=lt!=null?"screenSharingWithAudio":"screenSharing"),this.trickleIce===!0&&(this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:Ot,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessageonOffer : before setLocalDescription"),this.pc.setLocalDescription(this.sendedSdpOfferMessage,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(zt.log("setLocalAndSendMessageonOffer : before setLocalDescription - Promise version"),this.pc.setLocalDescription(this.sendedSdpOfferMessage).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(zt.log("Conf N to N"),this.myWebRTC_Stack.sendInviteBroadcast(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,Ot),this.inviteSended=!0):(zt.warn("Invite is not sent has call has been canceled"),Kt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"Call_Cancelled"),Kt.callsTable.length===0&&zt.log("No more established calls for client"))},this.setLocalAndSendMessageonOfferUpdate=function(Ot){var lt,Tt=null;zt.info("setLocalAndSendMessageonOfferUpdate, sessionDescription :"+Ot),this.sendedSdpOfferMessage=Ot,zt.log("sessionDescription.sdp = ",Ot.sdp),((0,ot.Ym)(this.audioSdpDirection,"string")||(0,ot.Ym)(this.videoSdpDirection,"string"))&&(Tt=Kt.mySDPManager.createGuideline(Ot.sdp),(0,ot.ki)(Tt,"audio","object")&&(0,ot.Ym)(this.audioSdpDirection,"string")&&(Tt.audio.direction=this.audioSdpDirection),(0,ot.ki)(Tt,"video","object")&&(0,ot.Ym)(this.videoSdpDirection,"string")&&(Tt.video.direction=this.videoSdpDirection),Ot.sdp=Tt.generate()),this.setLocalCallProfile(Kt.evalCallProfileWithSdp(Ot.sdp,"local","send"),!0),lt=this.callee?this.callerId:this.calleeId,this.trickleIce===!0?(this.myWebRTC_Stack.sendUpdate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot,this.callType,this.data),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(Ot,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(zt.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(Ot).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(zt.log("Updating PC offer and answer after switch Stream"),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(Ot,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(zt.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(Ot).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),Kt.preferSendingH264Codec&&(zt.log("Modification of SDP to set H264 as prefered sending codec"),this.pc.remoteDescription.sdp=Kt.mySDPManager.maybePreferCodec(this.pc.remoteDescription.sdp,"video","H264")),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription"),this.pc.setRemoteDescription(this.pc.remoteDescription,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(zt.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription - Promise version"),this.pc.setRemoteDescription(this.pc.remoteDescription).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))))},this.onCreateOfferFailure=function(Ot){zt.info("onCreateOfferFailure"+Ot),Ot=null},this.onCreateAnswerFailure=function(Ot){zt.info("onCreateAnswerFailure"+Ot),Ot=null},this.setLocalAndSendMessage=function(Ot){var lt;zt.info("setLocalAndSendMessage"),zt.log("sessionDescription.sdp = ",Ot.sdp),this.pc!==null?(Ot=this.manipulateSDP(Ot,"ANSWER"),lt=Kt.mySDPManager.createGuideline(Ot.sdp),this.setLocalCallProfile(Kt.evalCallProfileWithSdpGuideline(lt,Ot.sdp,"local","send")),this.setRemoteCallProfile(Kt.evalCallProfileWithSdpGuideline(lt,Ot.sdp,"local","receive")),zt.log("manipulated sessionDescription.sdp = ",Ot.sdp),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessage : before setLocalDescription"),this.pc.setLocalDescription(Ot,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(zt.log("setLocalAndSendMessage : before setLocalDescription - Promise version"),this.pc.setLocalDescription(Ot).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),this.sendedSdpOfferMessage=Ot,this.trickleIce===!0&&this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,Ot,this.data)):zt.log("setLocalAndSendMessage, pc no more exist")},this.setLocalAndSendMessageUpdate=function(Ot){var lt;if(this.pc!==null){ot.wL.type==="safari"&&(Ot.sdp=this.manipulateSDP(Ot,"OFFER").sdp),lt=Kt.mySDPManager.createGuideline(Ot.sdp),this.mediaType==="AUDIOONLY"?lt.hasOwnProperty("video")&&lt.video.direction!=="inactive"&&(zt.debug("Only audio was requested at call setup: deactivating video"),lt.video.direction="inactive",Ot.sdp=lt.generate()):this.mediaType==="VIDEOONLY"&&lt.hasOwnProperty("audio")&&lt.audio.direction!=="inactive"&&(zt.debug("Only video was requested at call setup: deactivating audio"),lt.audio.direction="inactive",Ot.sdp=lt.generate()),this.setLocalCallProfile(Kt.evalCallProfileWithSdpGuideline(lt,Ot.sdp,"local","send"),!0),this.setRemoteCallProfile(Kt.evalCallProfileWithSdpGuideline(lt,Ot.sdp,"local","receive"),!0),this.updateOngoingTimeoutId&&(clearTimeout(this.updateOngoingTimeoutId),delete this.updateOngoingTimeoutId),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?(zt.log("setLocalAndSendMessageUpdate : before setLocalDescription"),this.pc.setLocalDescription(Ot,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(zt.log("setLocalAndSendMessageUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(Ot).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")));var Tt;Tt=this.callee?this.callerId:this.calleeId,this.myWebRTC_Stack.send200Update(this.callId,this.callerId,this.calleeId,this.dest_roomId,Tt,Ot,this.data),this.asyncCallbacks&&this.asyncCallbacks.type==="updateMediaType"&&(zt.debug("asyncCallbacks resolve"),this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)}else zt.log("setLocalAndSendMessageUpdate, pc no more exist")},this.onIceCandidate=function(Ot){try{zt.debug("onIceCandidate :",JSON.stringify(Ot.candidate))}catch(Dt){zt.error(Dt)}var lt,Tt=0,It=0;lt=this.callee?this.callerId:this.calleeId,this.pc!==null&&(zt.debug("Ice Connection State is now : "+this.pc.iceConnectionState),zt.debug("Ice Gathering State is now : "+this.pc.iceGatheringState)),Ot.candidate?(this.candidateNb+=1,this.trickleIce===!0?this.mediaRoutingMode===Kt.mediaRoutingModeEnum.hostOnly?(Tt=Ot.candidate.candidate.search("host"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot.candidate.sdpMLineIndex,Ot.candidate.sdpMid,Ot.candidate.candidate,this.data,Ot.candidate,{volatile:!!this.restarted}):zt.log("Media routing mode is hostOnly and not a HOST Candidate : ignoring message"):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.stun?(Tt=Ot.candidate.candidate.search("host"),It=Ot.candidate.candidate.search("srflx"),Tt!==-1||It!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot.candidate.sdpMLineIndex,Ot.candidate.sdpMid,Ot.candidate.candidate,this.data,Ot.candidate,{volatile:!!this.restarted}):zt.log("Media routing mode is stun and not a HOST or SRFLX Candidate : ignoring message")):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.stunOnly?(Tt=Ot.candidate.candidate.search("srflx"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot.candidate.sdpMLineIndex,Ot.candidate.sdpMid,Ot.candidate.candidate,this.data,Ot.candidate,{volatile:!!this.restarted}):zt.log("Media routing mode is stunOnly and not a SRFLX Candidate : ignoring message"):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.turn?(zt.log("Media routing mode is turn : all candidates are considered"),this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot.candidate.sdpMLineIndex,Ot.candidate.sdpMid,Ot.candidate.candidate,this.data,Ot.candidate,{volatile:!!this.restarted})):this.mediaRoutingMode===Kt.mediaRoutingModeEnum.turnOnly&&((Tt=Ot.candidate.candidate.search("relay"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,lt,Ot.candidate.sdpMLineIndex,Ot.candidate.sdpMid,Ot.candidate.candidate,this.data,Ot.candidate,{volatile:!!this.restarted}):zt.log("Media routing mode is TurnOnly and not a RELAY Candidate : ignoring message")):zt.log("trickleIce is deactivated : candidates are not sended")):(zt.info("End of candidates."),this.trickleIce===!1&&(zt.log("trickleIce === false"),this.callee===!0?(this.send200OKTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.send200OKTrickleIceFalseTimeOutId),this.send200OKTrickleIceFalseTimeOutId=0),this.message200OKSended===!1?this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Kt.nickname,this.dest_roomId,this.pc.localDescription,this.data):zt.log("200OK already sended")):this.pc!==null&&(this.sendInviteTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.sendInviteTrickleIceFalseTimeOutId),this.sendInviteTrickleIceFalseTimeOutId=0),this.inviteSended===!1?(zt.log("sendInvite on end of candidate"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Kt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0):zt.log("Invite already sended"))))},this.combineRemoteStreams=function(Ot,lt,Tt,It){var Dt=Ot.getTracks(),Et=Tt.getTracks();if(Dt.length===1&&Et.length===1&&(Dt[0].kind==="audio"&&Et[0].kind==="video"||Dt[0].kind==="video"&&Et[0].kind==="audio")){zt.debug("combineRemoteStreams");var $t=new MediaStream;return $t.addTrack(Dt[0]),$t.addTrack(Et[0]),It==="internal"&&(Tt.removeTrack(Et[0]),this.onRemoteStreamRemoved({stream:Tt})),lt==="internal"&&(Ot.removeTrack(Dt[0]),this.onRemoteStreamRemoved({stream:Ot})),this.onRemoteStreamAdded({stream:$t}),!0}return!1},this.checkRemoteStreamExists=function(Ot,lt){var Tt=!1,It=null,Dt=null,Et=null,$t=null,xt=null;for(lt&&Array.isArray(lt)&&($t=lt.slice(0)),It=this.remoteMediaStreams.length;--It>=0;){if(this.remoteMediaStreams[It].id===Ot){Tt=!0;break}if($t)for(Et=(Dt=this.remoteMediaStreams[It].getTracks()).length;--Et>=0;)(xt=lt.indexOf(Dt[Et].id))>=0&&($t[xt]=!0)}if(!Tt&&$t){for(xt=0,Et=$t.length;--Et>=0;)$t[Et]===!0&&(xt+=1);xt===$t.length&&(Tt=!0)}return Tt},this.onRemoteStreamAdded=function(Ot){var lt,Tt,It=this;if(zt.info("onRemoteStreamAdded",Ot),this.checkRemoteStreamExists(Ot.stream.id,Ot.stream.getTracks().map(function(qt){return qt.id})))zt.debug("onRemoteStreamAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",Ot.stream,"event")){zt.debug("onRemoteStreamAdded adding",Ot.stream.id),this.remoteMediaStreams.push(Ot.stream),zt.log("CallId is :"+this.callId),zt.log("ClientId is :"+Kt.clientId),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Kt.processRemoteStreamAdded(this,Ot.stream),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio");var Dt,Et=function(qt){var tn=null,gn=null;qt.onmute=function(rn){zt.debug(qt.kind+" mute event");var pn="";qt.kind==="audio"&&tn===null?tn=setTimeout(function(){It.isRemoteAudioSilent=!0,pn="audioIsSilentLocally";var In={},Pn={},_n=[];_n.push(pn),In.available=It.remoteCallProfile.audio,In.active=It.remoteCallProfile.audioActive,In.muted=It.isRemoteAudioMuted,In.silent=It.isRemoteAudioSilent,Pn.available=It.remoteCallProfile.video,Pn.active=It.remoteCallProfile.videoActive,Pn.muted=It.isRemoteVideoMuted,Pn.silent=It.isRemoteVideoSilent,It.myWebRTC_Event.createRemoteStreamUpdatedEvent(_n,In,Pn,It.destCallType,It.callId,"browserAction"),tn=null},2520):qt.kind==="video"&&gn===null&&(gn=setTimeout(function(){It.isRemoteVideoSilent=!0,pn="videoIsSilentLocally";var In={},Pn={},_n=[];_n.push(pn),In.available=It.remoteCallProfile.audio,In.active=It.remoteCallProfile.audioActive,In.muted=It.isRemoteAudioMuted,In.silent=It.isRemoteAudioSilent,Pn.available=It.remoteCallProfile.video,Pn.active=It.remoteCallProfile.videoActive,Pn.muted=It.isRemoteVideoMuted,Pn.silent=It.isRemoteVideoSilent,It.myWebRTC_Event.createRemoteStreamUpdatedEvent(_n,In,Pn,It.destCallType,It.callId,"browserAction"),gn=null},2520))},qt.onunmute=function(rn){if(zt.debug(qt.kind+" unmute event"),qt.kind==="audio"&&tn!==null)clearTimeout(tn),tn=null;else if(qt.kind==="video"&&gn!==null)clearTimeout(gn),gn=null;else{var pn="";qt.kind==="audio"?(It.isRemoteAudioSilent=!1,pn="audioIsSilentLocally"):qt.kind==="video"&&(It.isRemoteVideoSilent=!1,pn="videoIsSilentLocally");var In={},Pn={},_n=[];_n.push(pn),In.available=It.remoteCallProfile.audio,In.active=It.remoteCallProfile.audioActive,In.muted=It.isRemoteAudioMuted,In.silent=It.isRemoteAudioSilent,Pn.available=It.remoteCallProfile.video,Pn.active=It.remoteCallProfile.videoActive,Pn.muted=It.isRemoteVideoMuted,Pn.silent=It.isRemoteVideoSilent,It.myWebRTC_Event.createRemoteStreamUpdatedEvent(_n,In,Pn,It.destCallType,It.callId,"browserAction")}},qt.onended=function(rn){zt.debug(qt.kind+" ended event"),qt.kind==="audio"&&tn!==null?(clearTimeout(tn),tn=null):qt.kind==="video"&&gn!==null&&(clearTimeout(gn),gn=null)}},$t=hn(Ot.stream.getVideoTracks());try{for($t.s();!(Dt=$t.n()).done;){var xt=Dt.value;Et(xt),this.isRemoteVideoSilent=xt.muted}}catch(qt){$t.e(qt)}finally{$t.f()}var Vt,Zt=hn(Ot.stream.getAudioTracks());try{for(Zt.s();!(Vt=Zt.n()).done;){var an=Vt.value;Et(an),this.isRemoteAudioSilent=an.muted}}catch(qt){Zt.e(qt)}finally{Zt.f()}lt={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Tt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.stream,this.remoteId,this.destCallType,lt,Tt):this.data.type==="publish"&&this.data.mode!=="passive"?zt.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(zt.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,Ot.stream,this.remoteId,this.destCallType,lt,Tt)):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.stream,this.remoteId,this.destCallType,lt,Tt):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.stream,this.remoteId,this.destCallType,lt,Tt)}},this.onRemoteTrackAdded=function(Ot){var lt,Tt;if(zt.info("onRemoteTrackAdded",Ot),Ot.streams[0]!==void 0&&Ot.track!==void 0){if(this.checkRemoteStreamExists(Ot.streams[0].id,[Ot.track.id]))zt.debug("onRemoteTrackAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",Ot.streams[0],"event")){if(this.belongsToRoom()){if(this.callType==="audio"&&Ot.track.kind!=="audio"||this.callType==="videoOnly"&&Ot.track.kind!=="video"||this.callType==="media"&&Ot.track.kind!=="video"||this.callType==="screenSharing"&&Ot.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&Ot.track.kind!=="video")return void zt.debug("onRemoteTrackAdded: ignoring event; callType: "+this.callType+", event.track.kind: "+Ot.track.kind)}else if(this.destCallType==="audio"&&Ot.track.kind!=="audio"||this.destCallType==="videoOnly"&&Ot.track.kind!=="video"||this.destCallType==="media"&&Ot.track.kind!=="video"||this.destCallType==="screenSharing"&&Ot.track.kind!=="video"||this.destCallType==="screenSharingWithAudio"&&Ot.track.kind!=="video")return zt.debug("onRemoteTrackAdded: ignoring event; destCallType: "+this.destCallType+", event.track.kind: "+Ot.track.kind),void(this.remoteMediaStreams.length===2&&this.combineRemoveStreams(this.remoteMediaStreams[0],"internal",this.remoteMediaStreams[1],"internal"));zt.debug("onRemoteTrackAdded adding; stream.id: "+Ot.streams[0].id),this.remoteMediaStreams.push(Ot.streams[0]),zt.log("CallId is :"+this.callId),zt.log("ClientId is :"+Kt.clientId),zt.log("this.callType :"+this.callType),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio"),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Kt.processRemoteStreamAdded(this,Ot.streams[0]),Ot.streams[0].onaddtrack=function(It){zt.debug("onRemoteTrackAdded ontrack.onaddtrack",It)},Ot.streams[0].onremovetrack=(function(It){var Dt=null;if(zt.debug("onRemoteTrackAdded ontrack.onremovetrack",It),this.updateOngoingTimeoutId)return zt.debug("onRemoteTrackAdded onremovetrack: update ongoing"),void zt.debug("onRemoteTrackAdded onremovetrack: ignoring event",It.track.kind);if(this.callType==="audio"&&It.track.kind!=="audio"||this.callType==="videoOnly"&&It.track.kind!=="video"||this.callType==="media"&&It.track.kind!=="video"||this.callType==="screenSharing"&&It.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&It.track.kind!=="video")zt.debug("onRemoteTrackAdded onremovetrack: ignoring event",It.track.kind);else if(It.target instanceof MediaStream){for(Dt=this.remoteMediaStreams.length;--Dt>=0;)if(this.remoteMediaStreams[Dt].id===It.target.id){zt.debug("onRemoteTrackAdded onremovetrack removing",It.target.id),this.remoteMediaStreams.splice(Dt,1);break}Kt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,It.target,this.remoteId,this.destCallType)}else zt.debug("onRemoteTrackAdded onremovetrack: ignoring event target not MediaStream")}).bind(this),lt={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Tt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?(this.callType==="audio"&&Ot.track.kind==="audio"||this.callType==="videoOnly"&&Ot.track.kind==="video"||this.callType==="media"&&Ot.track.kind==="video"||this.callType==="screenSharing"&&Ot.track.kind==="video"||this.callType==="screenSharingWithAudio"&&Ot.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt):this.data.type==="publish"&&this.data.mode!=="passive"?zt.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.belongsToRoom()?(this.callType==="audio"&&Ot.track.kind==="audio"||this.callType==="videoOnly"&&Ot.track.kind==="video"||this.callType==="media"&&Ot.track.kind==="video"||this.callType==="screenSharing"&&Ot.track.kind==="video"||this.callType==="screenSharingWithAudio"&&Ot.track.kind==="video")&&(this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(zt.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt)):Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt)):(this.destCallType==="audio"&&Ot.track.kind==="audio"||this.destCallType==="videoOnly"&&Ot.track.kind==="video"||this.destCallType==="media"&&Ot.track.kind==="video"||this.destCallType==="screenSharing"&&Ot.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&Ot.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt):this.belongsToRoom()?(this.callType==="audio"&&Ot.track.kind==="audio"||this.callType==="videoOnly"&&Ot.track.kind==="video"||this.callType==="media"&&Ot.track.kind==="video"||this.callType==="screenSharing"&&Ot.track.kind==="video"||this.callType==="screenSharingWithAudio"&&Ot.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt):(this.destCallType==="audio"&&Ot.track.kind==="audio"||this.destCallType==="videoOnly"&&Ot.track.kind==="video"||this.destCallType==="media"&&Ot.track.kind==="video"||this.destCallType==="screenSharing"&&Ot.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&Ot.track.kind==="video")&&Kt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,Ot.streams[0],this.remoteId,this.destCallType,lt,Tt)}}else zt.debug("onRemoteTrackAdded: ignoring event; event data are not correct")},this.onRemoteStreamRemoved=function(Ot){var lt=null;for(zt.info("onRemoteStreamRemoved",Ot),lt=this.remoteMediaStreams.length;--lt>=0;)if(this.remoteMediaStreams[lt].id===Ot.stream.id){zt.debug("onRemoteStreamRemoved removing",Ot.stream.id),this.remoteMediaStreams.splice(lt,1);break}Kt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,Ot.stream,this.remoteId,this.destCallType),Ot=null},this.onNegotiationNeeded=function(Ot){zt.debug("onNegotiationNeeded",Ot),Ot=null,this.addingDataChannelOnCallOngoing&&(this.updateMediaWithRetryManagement(!1),this.addingDataChannelOnCallOngoing=!1)},this.onSignalingStateChange=function(Ot){zt.debug("onSignalingStateChange",Ot),Ot=null},this.onCallDisconnection=function(){zt.info("onCallDisconnection; callId: "+this.callId);var Ot=new Date;zt.debug("date:",Ot),this.disconnectionWarningInterval!==0&&(zt.debug("date:",Ot),zt.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.disconnectionWarningTimeout!==0&&(zt.debug("date:",Ot),zt.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.disconnectionWarningTimeout),this.disconnectionWarningTimeout=0),this.belongsToRoom()?Kt.onHangup(this.callId,"disconnected"):Kt.onHangup(this.callId,"Ice_disconnected")},this.sendDisconnectionWarning=function(){zt.log("sendDisconnectionWarning()");var Ot=null,lt=null;if(this.callControl&&(Ot=this.callControl.roomName,lt=this.callControl.type),this.disconnectionWarningCount++,cn.createEvent({eventType:"disconnectionWarning",callId:this.callId,remoteId:this.remoteId,tries:this.disconnectionWarningCount,roomName:Ot,settingUpType:lt}),(this.disconnectionWarningCount-1)*this.disconnectionWarningDelay>=this.disconnectionTimer&&this.disconnectionWarningInterval!==0){var Tt=Date();zt.debug("date :"+Tt),zt.debug("clearing disconnectionWarningInterval : no more warnings"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0}},this.createIceErrorDescriptor=function(Ot,lt){var Tt={};return Ot==="disconnected"?Tt.iceState="disconnected":Ot==="failed"?(Tt.iceState="failed",lt===!0&&(Tt.previousIceState="disconnected")):Tt.iceState="unknown",Tt.callType=this.callType,this.belongsToRoom()?(Tt.context="conf",this.data.mesh?(Tt.mode="mesh",(this.data.mesh.callerCompositeUserId?this.data.mesh.callerCompositeUserId===Kt.compositeClientId:this.data.mesh.callerId===Kt.clientId)?(Tt.type="subscribe",Tt.clientId=this.data.mesh.callerId,Tt.remoteId=this.data.mesh.calleeId):(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Kt.compositeClientId:this.data.mesh.calleeId===Kt.clientId)?(Tt.type="publish",Tt.clientId=this.data.mesh.calleeId,Tt.remoteId=this.data.mesh.callerId):Tt.type="unknown",Tt.mesh=this.data.mesh):(Tt.mode="sfu",this.settingUpType==="publish"||this.settingUpType==="shareScreen"?Tt.type="publish":this.settingUpType==="subscribe"?Tt.type="subscribe":Tt.type="unknown",this.callee?(Tt.clientId=this.calleeId,Tt.remoteId=this.callerId):(Tt.clientId=this.callerId,Tt.remoteId=this.calleeId)),this.mcuRemoteStream&&(Tt.stream=this.mcuRemoteStream)):(Tt.context="call",Tt.mode="p2p",this.callerId===Kt.clientId?(Tt.clientId=this.callerId,Tt.remoteId=this.calleeId):this.calleeId===Kt.clientId&&(Tt.clientId=this.calleeId,Tt.remoteId=this.callerId)),Tt},this.onIceConnectionStateChange=function(Ot){zt.debug("onIceConnectionStateChange: ",Ot),Ot=null;var lt=0,Tt=null,It=null,Dt=null;this.pc!==null?(zt.info("Ice Connection State is now : "+this.pc.iceConnectionState),this.iceState=this.pc.iceConnectionState,this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"||this.pc.iceConnectionState==="checking"?(zt.debug("iceConnectionState === connected or completed or checking"),zt.debug("this.disconnectionTimeoutId :"+this.disconnectionTimeoutId),this.disconnectionTimeoutId!==0&&(lt=Date(),zt.debug("date:",lt),zt.debug("clearing disconnectionTimeout"),clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0),this.disconnectionWarningInterval!==0&&(lt=Date(),zt.debug("date:",lt),zt.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.pc.iceConnectionState!=="checking"&&(this.checkCandidateTypesTimeoutId=setTimeout(this.callback(this,"checkCandidateTypes"),this.checkCandidateTypesTimer),this.checkCandidateTypesTimeoutTable.push(this.checkCandidateTypesTimeoutId))):this.pc.iceConnectionState==="disconnected"?(this.callControl&&(Tt=this.callControl.roomName,It=this.callControl.type),(Dt=this.createIceErrorDescriptor("disconnected")).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Kt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Kt.MCUClient.pubConnector,descriptor:Dt}),zt.warn("disconnection detected"),cn.createErrorEvent("iceDisconnection detected","ICE_CONNECTION_STATE_DISCONNECTED",this.callId,Tt,It,Dt),lt=new Date,zt.debug("date:",lt),this.disconnectionTimeoutId=setTimeout(this.callback(this,"onCallDisconnection"),this.disconnectionTimer),this.disconnectionWarningCount=0,this.disconnectionWarningTimeout=setTimeout(this.callback(this,"sendDisconnectionWarning"),2e3),this.disconnectionWarningInterval=setInterval(this.callback(this,"sendDisconnectionWarning"),this.disconnectionWarningDelay)):this.pc.iceConnectionState==="failed"&&(this.callControl&&(Tt=this.callControl.roomName,It=this.callControl.type),(Dt=this.createIceErrorDescriptor("failed",this.disconnectionTimeoutId!==0)).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Kt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Kt.MCUClient.pubConnector,descriptor:Dt}),zt.warn("iceConnection failed detected"),cn.createErrorEvent("iceConnection failed detected","ICE_CONNECTION_STATE_FAILED",this.callId,Tt,It,Dt),this.disconnectionTimeoutId!==0?this.belongsToRoom()&&(clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0,Kt.onHangup(this.callId,"disconnected")):this.belongsToRoom()&&(0,ot.ki)(this.callControl,["autoRestart","counter"],"number")&&this.callControl.autoRestart.counter>0?Kt.onHangup(this.callId,"disconnected"):(zt.warn("Removing call with callId: "+this.callId),Kt.removeCallFromTableWithCallIdAndSendBye(this.callId,"Ice_failed")))):zt.log("Ice Connection State change with pc is null")},this.callback=function(Ot,lt){return this.closureHandler=function(Tt,It){return Ot[lt](Tt,It)},this.closureHandler},this.onSelectedCandidate=function(Ot){if(this.selectedCandidate===void 0||this.selectedCandidate===null||this.selectedCandidate.LocalCandidateType!==Ot.LocalCandidateType||this.selectedCandidate.RemoteCandidateType!==Ot.RemoteCandidateType||this.selectedCandidate.LocalAddress!==Ot.LocalAddress||this.selectedCandidate.RemoteAddress!==Ot.RemoteAddress||this.selectedCandidate.TransportType!==Ot.TransportType||this.selectedCandidate.LocalTransportType!==Ot.LocalTransportType){zt.debug("WebRTC_Call::onSelectedCandidate() :",Ot),this.selectedCandidate=Ot,this.callControl&&this.callControl.autoRestart&&(zt.debug("selectedCandidate, this.callControl.autoRestart.counter:",this.callControl.autoRestart.counter),zt.debug("selectedCandidate, this.callControl.autoRestart.callIdWhenStartingTimer:",this.callControl.autoRestart.callIdWhenStartingTimer),this.callControl.autoRestart.counter&&(zt.debug("Reinit of autoRestart.counter"),this.callControl.autoRestart.counter=0,this.callControl.autoRestart.callIdWhenStartingTimer!==void 0&&Kt.stopMaxCallRetriesTimer(this.callControl.autoRestart.callIdWhenStartingTimer))),this.myWebRTC_Event.createSelectedICECandidateEvent(this.callId,Ot.LocalCandidateType,Ot.RemoteCandidateType,Ot.LocalAddress,Ot.RemoteAddress,Ot.TransportType,Ot.LocalTransportType);var lt=Ot;lt.callId=this.callId,lt.clientId=Kt.clientId,lt.roomId=this.dest_roomId,this.data.pubSub!==void 0&&(lt.pubSub=this.data.pubSub),this.data.confId!==void 0&&(lt.confId=this.data.confId),this.data.mesh!==void 0&&(lt.mesh=this.data.mesh),this.data.instanceId!==void 0&&(lt.instanceId=this.data.instanceId),this.myWebRTC_Stack.sendInfo("callSelectedCandidate",lt)}else zt.debug("filtering duplicate candidate")},this.checkCandidateTypes=function(){zt.debug("WebRTC_Call::checkCandidatesTypes()");var Ot=this,lt={LocalCandidateType:"unknow",RemoteCandidateType:"unknow",LocalAddress:"unknow",RemoteAddress:"unknow",TransportType:"unknow",LocalTransportType:"unknow",relayTransportType:"unknow"},Tt=["googLocalAddress","googLocalCandidateType","googRemoteAddress","googRemoteCandidateType","googTransportType"];this.pc===null?(zt.warn("Peer connection is null : no candidates"),Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt)):typeof apiRTC_React<"u"?(zt.debug("apiRTC_React : WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats().then(function(It){var Dt=null;if(It.forEach(function(xt){xt.nominated===!0&&(Dt=xt)}),Dt!==null){var Et=It.get(Dt.localCandidateId),$t=It.get(Dt.remoteCandidateId);lt.LocalCandidateType=Et.candidateType,lt.RemoteCandidateType=$t.candidateType,Et.address&&Et.port&&(lt.LocalAddress=Et.address+":"+Et.port),$t.address&&$t.port&&(lt.RemoteAddress=$t.address+":"+$t.port),lt.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(lt.relayTransportType=Et.relayProtocol),Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt)}}).catch(function(It){zt.error(It)})):ot.wL.type==="chrome"&&rt.PR<=112?(zt.debug("WebRTC_Call::checkCandidatesTypes() chrome <= 112"),this.pc.getStats(function(It){var Dt=It.result().filter(function(Et){return Et.id.indexOf("Conn-")===0&&Et.stat("googActiveConnection")==="true"})[0];Dt?(Tt.forEach(function(Et){lt[Et.replace("goog","")]=Dt.stat(Et)}),Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt)):(Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt))})):ot.wL.type==="chrome"||ot.wL.type==="firefox"||ot.wL.type==="safari"?(zt.debug("WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats(null).then(function(It){var Dt=null;if(It.forEach(function(xt){xt.selected===!0&&ot.wL.type==="firefox"?(Dt!==null&&zt.warn("multiple selected candidate-pairs"),Dt=xt):xt.nominated===!0&&(Dt=xt)}),Dt!==null){var Et=It.get(Dt.localCandidateId),$t=It.get(Dt.remoteCandidateId);lt.LocalCandidateType=Et.candidateType,lt.RemoteCandidateType=$t.candidateType,Et.address&&Et.port?lt.LocalAddress=Et.address+":"+Et.port:Et.ipAddress&&Et.portNumber&&(lt.LocalAddress=Et.ipAddress+":"+Et.portNumber),$t.address&&$t.port?lt.RemoteAddress=$t.address+":"+$t.port:$t.ipAddress&&$t.portNumber&&(lt.RemoteAddress=$t.ipAddress+":"+$t.portNumber),lt.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(lt.relayTransportType=Et.relayProtocol),Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt)}}).catch(function(It){zt.warn("failed to get stats",It)})):(zt.debug("checkCandidateTypes not Chrome or Firefox"),Ot.myWebRTC_Event.createICECandidateTypeUpdateEvent(Ot.callId,lt.LocalCandidateType,lt.RemoteCandidateType),Ot.onSelectedCandidate(lt))},this.belongsToRoom=function(){return!!(0,ot.ki)(this.sessionMCU,"roomName","string")&&((0,ot.ki)(this.data,"MCUType","string")&&(this.data.MCUType==="MCU-Caller"||this.data.MCUType==="MCU-Callee")&&(0,ot.ki)(this.data,"confId","string")?this.data.confId===this.sessionMCU.roomName:this.dest_roomId===this.sessionMCU.roomName)},this.setLocalCallProfile=function(Ot){var lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Tt=[],It={},Dt={},Et=null,$t=null,xt="adaptation";this.dataCall!==!0&&this.settingUpType!=="subscribe"&&(this.localCallProfile.audioActive!==Ot.audioActive&&Tt.push("audioIsActive"),this.localCallProfile.videoActive!==Ot.videoActive&&Tt.push("videoIsActive"),this.localCallProfile=Ot,this.screenSharing===!0?this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Tt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")):this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Tt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")),lt===!0&&Tt.length>0&&(It.available=this.localCallProfile.audio,It.active=this.localCallProfile.audioActive,It.muted=this.isLocalAudioMuted,It.silent=this.isRemoteAudioSilent,Dt.available=this.localCallProfile.video,Dt.active=this.localCallProfile.videoActive,Dt.muted=this.isLocalVideoMuted,Dt.silent=this.isRemoteVideoSilent,this.callConfiguration&&this.callConfiguration.userMediaStreamId&&(Et=this.callConfiguration.userMediaStreamId,($t=apiCC.getUserMediaStream(Et))&&(It.deviceLabel=$t.audioDeviceLabel,Dt.deviceLabel=$t.videoDeviceLabel)),this.updateCause&&(xt=this.updateCause),this.myWebRTC_Event.createLocalStreamUpdatedEvent(Tt,It,Dt,!0,this.callType,this.callId,this.callLocalStream,Et,xt)))},this.setRemoteCallProfile=function(Ot){var lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Tt=[],It={},Dt={},Et="adaptation";this.dataCall!==!0&&(this.remoteCallProfile.audioActive!==Ot.audioActive&&Tt.push("audioIsActive"),this.remoteCallProfile.videoActive!==Ot.videoActive&&Tt.push("videoIsActive"),this.remoteCallProfile=Ot,this.settingUpType==="subscribe"?(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")):this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")),lt===!0&&Tt.length>0&&(It.available=this.remoteCallProfile.audio,It.active=this.remoteCallProfile.audioActive,It.muted=this.isRemoteAudioMuted,It.silent=this.isRemoteAudioSilent,Dt.available=this.remoteCallProfile.video,Dt.active=this.remoteCallProfile.videoActive,Dt.muted=this.isRemoteVideoMuted,Dt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Tt,It,Dt,this.callType,this.callId,Et))):(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharingWithAudio"&&(this.destCallType="screenSharingWithAudio",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharing"&&(this.destCallType="screenSharing",Tt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Tt.push("callType")):this.settingUpType!=="publish"&&this.settingUpType!=="shareScreen"||(this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="media"&&(this.destCallType="media",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="videoOnly"&&(this.destCallType="videoOnly",Tt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Tt.push("callType"))),lt===!0&&Tt.length>0&&(It.available=this.remoteCallProfile.audio,It.active=this.remoteCallProfile.audioActive,It.muted=this.isRemoteAudioMuted,It.silent=this.isRemoteAudioSilent,Dt.available=this.remoteCallProfile.video,Dt.active=this.remoteCallProfile.videoActive,Dt.muted=this.isRemoteVideoMuted,Dt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Tt,It,Dt,this.destCallType,this.callId,Et))))},this.setMediaConstraintsToSendOnlyOffer=function(){ot.wL.type==="firefox"?rt.PR>43?this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:ot.wL.type==="edge"?this.mediaConstraints={offerToReceiveAudio:0,offerToReceiveVideo:0}:ot.wL.type==="chrome"&&ot.wL.version<55?this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1,mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},this.mediaConstraintsAudioOnly=this.mediaConstraints},this.applyOutgoingBitrate=function(Ot){var lt=this;zt.debug("applyOutgoingBitrate",this.callId,Ot);for(var Tt=null,It=0;It<this.rtpSenders.video.length;It+=1)if(this.rtpSenders.video[It].track){Tt=this.rtpSenders.video[It];break}if(Tt)if(typeof Tt.getParameters=="function"&&typeof Tt.setParameters=="function"){var Dt=Tt.getParameters();if(Object.prototype.hasOwnProperty.call(Dt,"encodings")){if(Dt.encodings.length!==1)return void zt.debug("encodings cannot be changed",this.callId,Dt.encodings.length)}else Dt.encodings=[{}];if(Ot!==null&&typeof Ot=="number"){Ot<50&&(Ot=50);var Et=1e3*Ot;if(Dt.encodings[0].maxBitrate===Et)return;Dt.encodings[0].maxBitrate=Et}else{if(!Object.prototype.hasOwnProperty.call(Dt.encodings[0],"maxBitrate"))return;delete Dt.encodings[0].maxBitrate}Tt.setParameters(Dt).catch(function($t){zt.error("applyOutgoingBitrate - setParameters",lt.callId,$t)})}else zt.warn("no such functions: getParameters/setParameters",this.callId);else zt.warn("no such video rtpSender",this.callId)},this.configureSimulcastEncodings=function(Ot){var lt=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zt.debug("configureSimulcastEncodings",this.callId,Ot,Tt.maxBitrate),this.simulcast==="RID"){for(var It=null,Dt=0;Dt<this.rtpSenders.video.length;Dt+=1)if(this.rtpSenders.video[Dt].track){It=this.rtpSenders.video[Dt];break}if(It)if(typeof It.getParameters=="function"&&typeof It.setParameters=="function"){var Et=It.getParameters();if(Object.prototype.hasOwnProperty.call(Et,"encodings"))if(Et.encodings.length===3){for(var $t=null,xt=null,Vt=null,Zt=Et.encodings.length;--Zt>=0;){var an=Et.encodings[Zt];$t||an.rid!=="h"?xt||an.rid!=="m"?Vt||an.rid!=="l"||(Vt=an):xt=an:$t=an}if($t&&Object.prototype.hasOwnProperty.call($t,"maxBitrate")&&xt&&Object.prototype.hasOwnProperty.call(xt,"maxBitrate")&&Vt&&Object.prototype.hasOwnProperty.call(Vt,"maxBitrate")){var qt=!1,tn=Math.floor(Vt.maxBitrate/1e3),gn=!1,rn=!1;if($t.active&&$t.maxBitrate>1&&(tn+=Math.floor($t.maxBitrate/1e3),gn=!0),xt.active&&xt.maxBitrate>1&&(tn+=Math.floor(xt.maxBitrate/1e3),rn=!0),zt.debug("currentStatus",tn,gn,rn),Ot==="changeMaxBitrate"){if(!(0,ot.ki)(Tt,"maxBitrate","number"))return;var pn=Tt.maxBitrate;tn<=pn?(rn||tn+this.callConfiguration.simulcast.encodings.medium.maxBitrate<=pn&&(ot.wL.type==="chrome"?xt.active=!0:ot.wL.type==="firefox"&&(xt.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.medium.maxBitrate),this.callConfiguration.simulcast.encodings.medium.active=!0,rn=!0,tn+=this.callConfiguration.simulcast.encodings.medium.maxBitrate,qt=!0),gn||tn+this.callConfiguration.simulcast.encodings.high.maxBitrate<=pn&&(ot.wL.type==="chrome"?$t.active=!0:ot.wL.type==="firefox"&&($t.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.high.maxBitrate),this.callConfiguration.simulcast.encodings.high.active=!0,gn=!0,tn+=this.callConfiguration.simulcast.encodings.high.maxBitrate,qt=!0)):(gn&&(gn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,tn-=Math.floor($t.maxBitrate/1e3),ot.wL.type==="chrome"?$t.active=!1:ot.wL.type==="firefox"&&($t.maxBitrate=1),qt=!0),tn>pn&&rn&&(rn=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,tn-=Math.floor(xt.maxBitrate/1e3),ot.wL.type==="chrome"?xt.active=!1:ot.wL.type==="firefox"&&(xt.maxBitrate=1),qt=!0))}else Ot==="disableEncoding"&&(gn?(gn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,tn-=Math.floor($t.maxBitrate/1e3),ot.wL.type==="chrome"?$t.active=!1:ot.wL.type==="firefox"&&($t.maxBitrate=1),qt=!0):rn&&(rn=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,tn-=Math.floor(xt.maxBitrate/1e3),ot.wL.type==="chrome"?xt.active=!1:ot.wL.type==="firefox"&&(xt.maxBitrate=1),qt=!0));zt.debug("applyChanges",tn,gn,rn,qt),qt&&(It.setParameters(Et).catch(function(In){zt.error("configureEncodings - setParameters",lt.callId,In)}),this.myWebRTC_Stack.sendInfo("configureEncodings",{pubSub:Kt.MCUClient.pubConnector,clientId:Kt.clientId,roomId:this.sessionMCU.roomName,callId:this.callId,instanceId:this.instanceId,hint:"simulcast",encodings:this.callConfiguration.simulcast.encodings}))}else zt.warn("cannot find h/m/l encodings",this.callId)}else zt.warn("wrong encodings",this.callId,Et.encodings.length);else zt.warn("no encodings configured",this.callId)}else zt.warn("no such functions: getParameters/setParameters",this.callId);else zt.warn("no such video rtpSender",this.callId)}}},Sn=(s(4363),s(9653),function(Kt){this.disconnectionTimer=15e3,Number.MAX_SAFE_INTEGER!==void 0?this.userMediaId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaId=Math.floor(1000001*Math.random()).toString(),this.callType="media",this.audio=!1,this.video=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.callConfiguration={},this.sessionMCU=null,this.myWebRTC_Stack=new gt.S(Kt.socket),this.getUserMediaStream=function(){return this.callConfiguration&&this.callConfiguration.userMediaStreamId?apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId):null},this.releaseUserMediaStream=function(){if(this.callConfiguration&&this.callConfiguration.userMediaStreamId){var Ot=this.callConfiguration.userMediaStreamId;return delete this.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(Ot,this.userMediaId)}return!1},this.close=function(){(this.addAck||this.addTimeoutId)&&(delete this.addAck,clearTimeout(this.addTimeoutId),delete this.addTimeoutId)}});function fn(Kt){return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},fn(Kt)}function mn(Kt,Ot){var lt=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(!lt){if(Array.isArray(Kt)||(lt=function(xt,Vt){if(xt){if(typeof xt=="string")return bn(xt,Vt);var Zt=Object.prototype.toString.call(xt).slice(8,-1);return Zt==="Object"&&xt.constructor&&(Zt=xt.constructor.name),Zt==="Map"||Zt==="Set"?Array.from(xt):Zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zt)?bn(xt,Vt):void 0}}(Kt))||Ot&&Kt&&typeof Kt.length=="number"){lt&&(Kt=lt);var Tt=0,It=function(){};return{s:It,n:function(){return Tt>=Kt.length?{done:!0}:{done:!1,value:Kt[Tt++]}},e:function(xt){throw xt},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dt,Et=!0,$t=!1;return{s:function(){lt=lt.call(Kt)},n:function(){var xt=lt.next();return Et=xt.done,xt},e:function(xt){$t=!0,Dt=xt},f:function(){try{Et||lt.return==null||lt.return()}finally{if($t)throw Dt}}}}function bn(Kt,Ot){(Ot==null||Ot>Kt.length)&&(Ot=Kt.length);for(var lt=0,Tt=new Array(Ot);lt<Ot;lt++)Tt[lt]=Kt[lt];return Tt}var un=et.Y.get("ApiCCMCUClient"),Tn=apiCC.myWebRTC_Event,kn=3e4,xn=function(Kt,Ot){un.debug("ApiCCMCUClient creation"),this.pubConnector="janusConnector",this.meshModeEnabled=!1,this.sessionMCUs=[],this.distantCalls=[],this.streamList=[],this.disputableStreamList=[],this.publishCallId=null,this.joinSessionReqs=[],this.transitionCount=0,this.browserCapabilities={updateStream:!0,mesh2janusTransition:!0,checkCallStatus:!0},this.receiveSessionId=function(lt){un.debug("receiveSessionId()"),Tn.createMCUSessionCreationEvent(lt.sessionId,lt.token),this.publish(lt.sessionId,lt.token)},this.sendSessionInvitation=function(lt,Tt,It){var Dt,Et;un.debug("sendSessionInvitation()"),Tt!=null?(It===void 0&&(It=0),Dt={type:"MCUSessionInvitation",srcId:Ot,destId:lt,sessionId:Tt,groupChatId:It},Et=JSON.stringify(Dt),un.log("C->S: "+Et),apiCC.session.channel.socket.emit("MCUSessionInvitation",Et)):un.log("Session is null or undefined, MCU Session invitation is not sended")},this.sendSessionInvitationToGroupChat=function(lt,Tt){if(un.debug("sendSessionInvitationToGroupChat()"),lt!=null)if(Tt!=null){var It,Dt;It={type:"MCUSessionInvitationToGroupChat",srcId:Ot,groupChatId:lt,sessionId:Tt},Dt=JSON.stringify(It),un.log("C->S: "+Dt),apiCC.session.channel.socket.emit("MCUSessionInvitationToGroupChat",Dt)}else un.log("Session is null or undefined, MCU Session invitation is not sended");else un.log("groupChatId is null or undefined, MCU Session invitation is not sended")},this.receiveSessionInvitation=function(lt){un.debug("receiveSessionInvitation()"),un.log("msg.sessionId :"+lt.sessionId),un.log("msg.token :"+lt.token),un.log("msg.groupChatId :"+lt.groupChatId),Tn.createReceiveMCUSessionInvitationEvent(lt.sessionId,lt.token,lt.groupChatId,lt.srcId)},this.acceptSessionInvitation=function(lt,Tt){un.debug("acceptSessionInvitation()"),un.log("sessionId :"+lt),un.log("token :"+Tt),this.publish(lt,Tt)},this.leaveSession=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};un.info("leaveSession()");var It=null,Dt=null,Et=null;if(!(Et=lt?this.getSessionMCU(lt):this.getSessionMCU(null,{first:!0})))return new Error("leaveSession: session not set");Tt.noHangup!==!0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.removeAllCallsFromRoom(Et.roomName,"leaveSession"),this.meshOnHangup(null,null,{roomId:Et.roomName}));var $t=[],xt={};$t.push(Et.roomName),xt.doneByApiRTC=!0,apiCC.session.leavePresenceGroup($t,xt),apiCC.session.unsubscribePresenceGroup($t,xt),It={type:"leaveSession",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},Dt=JSON.stringify(It),un.log("C->S: "+Dt),apiCC.session.channel.socket.emit("leaveSession",Dt),un.debug("leaveSession: distant call clean up");for(var Vt=this.distantCalls.length;--Vt>=0;)this.distantCalls[Vt].roomId===Et.roomName&&(un.debug("leaveSession: remove distant call descriptor",this.distantCalls[Vt]),this.distantCalls.splice(Vt,1));apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({multi:!0,roomName:Et.roomName});for(var Zt=this.streamList.length;--Zt>=0;)this.streamList[Zt].roomId===Et.roomName&&this.streamList.splice(Zt,1);return this.removeSessionMCU(Et),"OK"},this.createJoinSessionMessage=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=null;lt||(It=Tt.hasOwnProperty("sessionMCU")?Tt.sessionMCU:this.getSessionMCU(null,{first:!0}))&&(lt=It.roomName);var Dt=It&&It.roomMode==="mesh"||this.meshModeEnabled===!0||Tt.meshModeEnabled===!0,Et=It&&It.meshOnly===!0||Tt.meshOnlyEnabled===!0,$t={type:"joinSession",roomId:lt,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,meshModeEnabled:Dt,meshOnlyEnabled:Et,videoBandwidthSettings:apiCC.session.apiCCWebRTCClient.webRTCClient.videoBandwidthSettings,browserInfo:{browserAbout:rt.Xh+" "+rt.dc,browserType:ot.wL.type,browserVersion:ot.wL.version,osName:rt.BF,osVersion:rt.MM,deviceType:rt.vO}}};if(Tt.hasOwnProperty("transactionId")&&($t.transactionId=Tt.transactionId),Tt.hasOwnProperty("convId")?$t.data.convId=Tt.convId:It&&It.hasOwnProperty("convId")&&($t.data.convId=It.convId),Tt.moderationEnabled&&($t.data.moderationEnabled=!0),Tt.moderator&&($t.data.moderator=!0),Tt.qualityAdaptationEnabled&&($t.data.qualityAdaptationEnabled=!0),Array.isArray(Tt.supportedVideoCodecs)){$t.data.supportedVideoCodecs=[];var xt,Vt=mn(Tt.supportedVideoCodecs);try{for(Vt.s();!(xt=Vt.n()).done;){var Zt=xt.value;Zt==="h264"?$t.data.supportedVideoCodecs.push({codec:"h264",profilelevelid:"42e01f"}):typeof Zt=="string"?$t.data.supportedVideoCodecs.push({codec:Zt}):$t.data.supportedVideoCodecs.push(Zt)}}catch(an){Vt.e(an)}finally{Vt.f()}}else ot.wL.type==="safari"&&(rt.Xh==="Safari"&&rt.dc<12.1||rt.Xh==="Mobile Safari"&&rt.dc<12.1)&&($t.data.supportedVideoCodecs=[{codec:"h264",profilelevelid:"42e01f"}]);return $t.data.capabilities=this.browserCapabilities,$t},this.createSessionDescriptor=function(lt){var Tt={roomId:lt.roomName};return lt.convId&&(Tt.convId=lt.convId),lt.roomMode&&(Tt.roomMode=lt.roomMode),lt.modeChangeKind&&(Tt.modeChangeKind=lt.modeChangeKind),Tt},this.joinSession=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.getSessionMCU(lt))return un.warn("joinSession: session already set"),new Error("joinSession: session already set");if(this.getJoinSessionReq(lt))return un.warn("joinSession: session already requested"),new Error("joinSession: session already requested");var It={};It.roomId=lt,It.transactionId=apiCC.randomString(12),this.joinSessionReqs.push(It);var Dt=Object.assign({},Tt);Dt.transactionId=It.transactionId,un.info("joinSession() on ApiRTC MCU with roomId:",lt);var Et=this.createJoinSessionMessage(lt,Dt),$t=JSON.stringify(Et);return un.log("C->S: "+$t),apiCC.session.channel.socket.emit("joinSession",$t),"OK"},this.joinSessionAnswer=function(lt){if(un.debug("joinSessionAnswer()"),this.getSessionMCU(lt.roomName))un.warn("joinSessionAnswer: session already set");else{var Tt=null;if(lt.hasOwnProperty("transactionId")&&(Tt=this.getJoinSessionReq(null,{transactionId:lt.transactionId})),Tt||(Tt=this.getJoinSessionReq(lt.roomName)),Tt){this.removeJoinSessionReq(Tt);var It={};if(It.roomID=lt.sessionId,It.roomName=lt.roomName,lt.hasOwnProperty("convId")&&(It.convId=lt.convId),It.joinSessionAnswer={},(0,ot.ki)(lt,"data","object")?(lt.data.failed===!0?(It.joinSessionAnswer.failed=!0,It.joinSessionAnswer.reason=lt.data.reason):It.joinSessionAnswer.failed=!1,lt.data.mode&&typeof lt.data.mode=="string"&&(It.roomMode=lt.data.mode,un.debug("session joined with mode; roomMode: "+It.roomMode)),It.roomMode==="mesh"&&lt.data.meshOnly===!0&&(It.meshOnly=!0,un.debug("meshOnly"))):It.joinSessionAnswer.failed=!1,this.sessionMCUs.push(It),!It.joinSessionAnswer.failed){var Dt=[],Et={};Dt.push(lt.roomName),Et.doneByApiRTC=!0,apiCC.session.joinPresenceGroup(Dt,Et),apiCC.session.subscribePresenceGroup(Dt,Et)}Tn.createJoinMCUSessionAnswerEvent(lt.sessionId,lt.token,lt.groupChatId,lt.initiator,It)}else un.debug("joinSessionAnswer: no joinSession requested")}},this.changeSessionMode=function(lt,Tt){var It=this.getSessionMCU(lt.roomName);if(It)if(It.roomMode==="mesh"){for(var Dt=0,Et=Kt.userMediaTable.length;--Et>=0;)if(Kt.userMediaTable[Et].sessionMCU===It){un.debug("changeSessionMode: userMedia",Kt.userMediaTable[Et]),Kt.userMediaTable[Et].distantCalls=[],Dt+=1;for(var $t=this.distantCalls.length;--$t>=0;)un.debug("changeSessionMode: distantCall",this.distantCalls[$t]),this.distantCalls[$t].callMode==="mesh"&&this.distantCalls[$t].callFeed.callId===Kt.userMediaTable[Et].userMediaId&&(un.debug("changeSessionMode: match"),Kt.userMediaTable[Et].distantCalls.push(this.distantCalls[$t]))}for(var xt=0,Vt=Kt.callControlTable.length;--Vt>=0;)Kt.callControlTable[Vt].type==="subscribe"&&Kt.callControlTable[Vt].roomName===It.roomName&&(xt+=1,Kt.callControlTable[Vt].autoRestart.force=!0);if(Tn.createMCURoomModeChangedEvent(It.roomName,"mesh","sfu","ongoing"),Dt===0&&xt===0)delete It.roomMode,Tn.createMCURoomModeChangedEvent(It.roomName,"mesh","sfu","complete");else{It.modeChangeKind="old";var Zt={};Zt.roomID=lt.roomName,Zt.roomName=lt.roomName,lt.hasOwnProperty("convId")&&(Zt.convId=lt.convId),Zt.joinSessionAnswer={failed:!1},Zt.modeChangeKind="new",Zt.transitionTimeoutId=setTimeout((function(an,qt){delete qt.transitionTimeoutId,Kt.finalizeMeshToJanusTransition(an,qt,{force:!0})}).bind(this,It,Zt),3e4),this.sessionMCUs.push(Zt),this.transitionCount+=1}}else un.warn("changeSessionMode: session not using mesh mode");else un.warn("changeSessionMode: no session")},this.updateSessionAnswer=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};un.debug("updateSessionAnswer");var It=this.getSessionMCU(lt.roomName);if(!It){if(!Tt.createSession)return void un.warn("updateSessionAnswer: no such session",lt.roomName);un.debug("force session creation; roomName: "+lt.roomName),(It={}).roomID=lt.roomName,It.roomName=lt.roomName,lt.hasOwnProperty("convId")&&(It.convId=lt.convId),It.joinSessionAnswer={failed:!1},this.sessionMCUs.push(It);for(var Dt=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;--Dt>=0;){var Et=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Dt];!Et.data||Et.data.MCUType!=="MCU-Caller"&&Et.data.MCUType!=="MCU-Callee"||Et.data.confId!==It.roomName||(Et.sessionMCU=It)}}var $t=!1;if(lt.data&&lt.data.mode==="mesh"?(It.roomMode="mesh",lt.data.meshOnly===!0&&(It.meshOnly=!0)):(It.roomMode==="mesh"&&($t=!0),delete It.roomMode),It.modeChangeKind==="new"){un.debug("transition already ongoing");var xt=this.getSessionMCU(null,{callback:function(pn){return pn.roomName===It.roomName&&pn.modeChangeKind==="old"}});xt&&Kt.finalizeMeshToJanusTransition(xt,It,{force:!0})}else if($t){un.debug("transition NOT ongoing but should be"),Tn.createMCURoomModeChangedEvent(It.roomName,"mesh","sfu","ongoing"),It.modeChangeKind="old";var Vt={};Vt.roomID=It.roomID,Vt.roomName=It.roomName,It.hasOwnProperty("convId")&&(Vt.convId=It.convId),Vt.joinSessionAnswer={failed:!1},Vt.modeChangeKind="new",this.sessionMCUs.push(Vt),this.transitionCount+=1,Kt.finalizeMeshToJanusTransition(It,Vt,{force:!0})}if(Tt.updateCalls)if(un.debug("update stream list (prune)"),this.updateStreamList(lt,{prune:!0}),It.roomMode==="mesh"){un.debug("restart publish/shareScreen calls");for(var Zt=Kt.userMediaTable.slice(),an=Zt.length;--an>=0;){var qt=Zt[an];qt.sessionMCU===It&&Kt.onHangup(qt.userMediaId,"disconnected")}}else{un.debug("roomMode is SFU, checking calls");for(var tn=Kt.callsTable.slice(),gn=tn.length;--gn>=0;){var rn=tn[gn];rn.sessionMCU===It&&(rn.settingUpType!=="publish"&&rn.settingUpType!=="shareScreen"||rn.data&&rn.data.mesh||rn.pc?rn.message200OKReceived===!1&&(un.debug("restart call without 200OK received"),Kt.onHangup(rn.callId,"disconnected")):(un.debug("restart publish/shareScreen calls with no PeerConnection"),Kt.onHangup(rn.callId,"disconnected")))}}},this.processCheckCallStatus=function(lt){this.updateStreamList(lt)},this.updateStreamList=function(lt){for(var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=(0,ot.ki)(lt,"availableStreams","array")?lt.availableStreams.slice():null,Dt=(0,ot.ki)(lt,"availableComposite","array")?lt.availableComposite.slice():null,Et=(0,ot.ki)(lt,"availableReplay","array")?lt.availableReplay.slice():null,$t=this.streamList.length;--$t>=0;){var xt=this.streamList[$t];if(xt.type==="regular"){if(!It)continue;for(var Vt=It.length;--Vt>=0&&It[Vt].id!==xt.streamInfo.id;);if(Vt>=0){(0,ot.ki)(xt,"clearDisputableEntry","function")&&xt.clearDisputableEntry(),It.splice(Vt,1);continue}Tt.prune===!0?((0,ot.ki)(xt,"clearDisputableEntry","function")&&xt.clearDisputableEntry(),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:xt.streamInfo}),Tn.createMCURemovedStreamEvent(xt.streamInfo.id),this.streamList.splice($t,1)):xt.disputableTimeoutId||(xt.disputableTimeoutId=setTimeout(An.bind(this,xt.streamInfo.id),kn),xt.clearDisputableEntry=En.bind(this,xt.streamInfo.id),this.disputableStreamList.push(xt))}else if(xt.type==="composite"){if(!Dt)continue;for(var Zt=Dt.length;--Zt>=0&&Dt[Zt].id!==xt.streamInfo.id;);if(Zt>=0){Dt.splice(Zt,1);continue}apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:xt.streamInfo}),Tn.createMCURemovedStreamEvent(xt.streamInfo.id),this.streamList.splice($t,1)}else if(xt.type==="replay"){if(!Et)continue;for(var an=Et.length;--an>=0&&Et[an].id!==xt.streamInfo.id;);an>=0&&Et.splice(an,1)}}if(It)for(var qt=0;qt<It.length;qt+=1){var tn=[];tn.push(It[qt]);var gn=this.newAvailableStream(tn,"regular");Tn.createMCUAvailableStreamEvent(tn,gn)}if(Dt)for(var rn=0;rn<Dt.length;rn+=1){var pn=[];pn.push(Dt[rn]);var In=this.newAvailableStream(pn,"composite");Tn.createMCUAvailableCompositeEvent(pn,In)}if(Et)for(var Pn=0;Pn<Et.length;Pn+=1){var _n=[];_n.push(Et[Pn]);var Ln=this.newAvailableReplay(_n);Tn.createMCUAvailableReplayEvent(_n,Ln)}},this.getStreamList=function(){return un.debug("getStreamList :",this.streamList),this.streamList},this.getStreamFromList=function(lt){var Tt;for(un.debug("getStreamFromList() with Id :",lt),un.log("this.streamList :",this.streamList),Tt=0;Tt<this.streamList.length;Tt+=1){if(this.streamList[Tt].streamInfo.id===lt)return un.log("stream found",this.streamList[Tt].streamInfo),this.streamList[Tt].streamInfo;un.log("not the same stream",lt)}return null},this.getStreamIdOfUser=function(lt){var Tt;for(un.debug("getStreamIdOfUser() with Id :",lt),un.log("this.streamList :",this.streamList),Tt=0;Tt<this.streamList.length;Tt+=1)if(this.streamList[Tt].type!=="replay"){if(this.streamList[Tt].userId===lt)return un.log("stream found",this.streamList[Tt].streamInfo),this.streamList[Tt].streamInfo.id;un.log("not the same userId",lt)}return null},this.getStreamOfUserCall=function(lt,Tt){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Dt=this.streamList.length,Et=!1;for((0,ot.ki)(It,"replay","boolean")&&It.replay===!0&&(Et=!0);--Dt>=0;){if(Et===!0){if(this.streamList[Dt].type!=="replay")continue}else if(this.streamList[Dt].type==="replay")continue;if(this.streamList[Dt].userId===lt&&this.streamList[Dt].streamInfo.attributes.callId===Tt)return this.streamList[Dt].streamInfo}return null},this.newAvailableStream=function(lt,Tt,It){un.debug("newAvailableStream():",lt);var Dt=!1,Et=!1,$t=this.getSessionMCU(lt[0].room);if($t){lt[0].attributes.callerId!==Ot&&(Dt=!0);for(var xt=Kt.getCallControls(["publish","shareScreen"],{addUserMedia:!0}),Vt=0;Vt<lt.length;Vt+=1){for(var Zt=this.streamList.length;--Zt>=0&&(this.streamList[Zt].type!=="regular"||lt[Vt].id!==this.streamList[Zt].streamInfo.id););Zt>=0?(Et=!0,(0,ot.ki)(this.streamList[Zt],"clearDisputableEntry","function")?this.streamList[Zt].clearDisputableEntry():un.debug("clearDisputableEntry is not set")):un.debug("streamList is empty"),Dt=!Object.prototype.hasOwnProperty.call(xt,lt[Vt].attributes.callId);var an={type:Tt,userId:lt[Vt].attributes.callerId,roomId:$t.roomName,isRemoteStream:Dt,streamInfo:lt[Vt]};if(Et===!0?this.streamList[Zt]=an:this.streamList.push(an),un.log("this.streamList :",this.streamList),Dt!==!0)if($t.roomMode==="mesh"){var qt=Kt.findUserMediaById(lt[Vt].attributes.callId);qt&&qt.addAck===!0&&(delete qt.addAck,clearTimeout(qt.addTimeoutId),delete qt.addTimeoutId,Tn.createCallEstablishedEvent($t.roomName,qt.callType,qt.userMediaId,"none"))}else{var tn=Kt.findCallWithCallId(lt[Vt].attributes.callId),gn=apiCC.getUserMediaStream(tn.callConfiguration.userMediaStreamId);if(tn&&gn)for(var rn=0,pn=["audioMuted","videoMuted"];rn<pn.length;rn++){var In=pn[rn],Pn=In==="audioMuted"?"audio":"video";gn[In]!==lt[Vt][In]&&gn.notifyMLineMutedCall(Pn,gn[In],"enabled",tn,null)}}var _n=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:lt[Vt]});if(_n&&!_n.autoRestart.pending){un.info("[newAvailableStream] auto subscribing to stream");var Ln=!!_n.autoRestart.force;delete _n.autoRestart.force;var Vn=_n.callId,or=Kt.findCallWithCallId(Vn);or!==null&&or.sessionMCU!==null&&or.sessionMCU.modeChangeKind==="old"&&(un.debug("Re-init of autoRestart.counter"),delete _n.autoRestart.counter);var hr=this.subscribeToStreams([lt[Vt]],_n.mediaType,_n.data,_n.callConfiguration,{noStreamCheck:!0,force:Ln});Vn&&hr[0]&&Tn.createCallRestartingEvent(_n.callType,_n.audioOnly,Vn,hr[0],"subscribe",apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,_n.roomName,_n.roomName,lt[Vt].id)}if(Et!==!0&&(0,ot.Ym)(It,"function")&&It(Dt,lt[Vt],Tt),lt[Vt].context!==void 0&&lt[Vt].context.remoteAccessCtx!==void 0){var mr=lt[Vt].context.remoteAccessCtx.invitationId;un.debug("remoteAccess stream for invitationId : ",mr),apiRTC.session.remoteAccessInvitation!==null&&mr===apiRTC.session.remoteAccessInvitation.id&&Dt===!0?(un.debug("Setting screenSharingStreamId for remote"),apiRTC.session.remoteAccessInvitation.screenSharingStreamId=lt[Vt].id,un.debug("apiRTC.session.remoteAccessInvitation.screenSharingStreamId :",apiRTC.session.remoteAccessInvitation.screenSharingStreamId),apiRTC.session.remoteAccessInvitation.screenWidth=lt[Vt].context.remoteAccessCtx.screenWidth,apiRTC.session.remoteAccessInvitation.screenHeight=lt[Vt].context.remoteAccessCtx.screenHeight):un.debug("Stream not linked to remoteAccessInvitation or this is localStream")}}return Dt}un.debug("newAvailableStream() but client is not in session")},this.updateAvailableStream=function(lt,Tt,It){un.info("updateAvailableStream():",lt);var Dt=!1;if(this.getSessionMCU(lt[0].room)){lt[0].attributes.callerId!==Ot&&(Dt=!0);for(var Et=0;Et<lt.length;Et+=1)for(var $t=this.streamList.length;--$t>=0;)if(this.streamList[$t].streamInfo.id===lt[Et].id){for(var xt=[],Vt=0,Zt=["audio","audioMuted","video","videoMuted"];Vt<Zt.length;Vt++){var an=Zt[Vt];this.streamList[$t].streamInfo[an]!==lt[Et][an]&&(this.streamList[$t].streamInfo[an]=lt[Et][an],xt.push(an))}this.streamList[$t].streamInfo.attributes.callType!==lt[Et].attributes.callType&&(this.streamList[$t].streamInfo.attributes.callType=lt[Et].attributes.callType,xt.push("callType")),this.streamList[$t].streamInfo.attributes.descriptor&&lt[Et].attributes.descriptor&&this.streamList[$t].streamInfo.attributes.descriptor.priority!==lt[Et].attributes.descriptor.priority&&(this.streamList[$t].streamInfo.attributes.descriptor.priority=lt[Et].attributes.descriptor.priority,xt.push("priority")),xt.length>0&&(0,ot.Ym)(It,"function")&&It(Dt,lt[Et],Tt,xt);break}return Dt}un.log("updateAvailableStream() but client is not in session")},this.newAvailableReplay=function(lt){un.info("newAvailableReplay() :",lt);var Tt=!1,It=this.getSessionMCU(lt[0].room);if(It){lt[0].attributes.callerId!==Ot&&(Tt=!0);for(var Dt=0;Dt<lt.length;Dt+=1){var Et={type:"replay",userId:lt[Dt].attributes.callerId,roomId:It.roomName,isRemoteStream:Tt,streamInfo:lt[Dt]};this.streamList.push(Et)}return Tt}un.log("newAvailableReplay() but client is not in session")},this.subscribeToStreams=function(lt,Tt,It,Dt){var Et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};un.info("subscribeToStreams():",lt);var $t,xt,Vt=[],Zt=null,an=null,qt=null,tn=function(rn){return setTimeout(function(){un.warn("invite + SDP offer not received -> restart call"),Kt.onHangup(rn,"disconnected")},15e3)};for(qt in lt){if($t=lt[qt],apiCC.session===null||apiCC.session===void 0)return un.debug("no session, leaving subscribeToStreams()"),Vt;if((Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId($t.id,{ignoreModeChangeKindOld:!0}))!==null){if(un.debug("call already exists"),Et.force!==!0){Vt[qt]=Zt.callId;continue}un.debug("Force is true")}else un.debug("call does not exist");for(xt=this.streamList.length;--xt>=0&&this.streamList[xt].streamInfo.id!==$t.id;);if(xt>=0){if(un.debug("stream exists"),this.streamList[xt].disputableTimeoutId){un.debug("stream temporarily not available"),Vt[qt]=null,Et.autoSub===!0&&((an=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:$t}))||apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:$t.room,mediaType:Tt,callConfiguration:Dt,data:It,stream:$t}));continue}}else if(un.debug("stream does not exist"),Et.noStreamCheck!==!0){Vt[qt]=null,Tn.createErrorEvent("stream not available","STREAM_NOT_AVAILABLE",null,$t.room,null,{stream:$t});continue}un.info("stream:",$t);var gn=this.getSessionMCU($t.room);gn&&((an=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:$t}))||(an=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:gn.roomName,mediaType:Tt,callConfiguration:Dt,data:It,stream:$t})),$t.attributes.callType!=="COMPOSITE"&&this.pubConnector==="janusConnector"?(It===void 0&&(It={}),It.mesh&&delete It.mesh,(0,ot.Ym)(Dt,"qos","object")?(It.qos={},Dt.qos.videoForbidInactive===!1?It.qos.videoForbidInactive=!1:It.qos.videoForbidInactive=!0):(It.qos={},It.qos.videoForbidInactive=!0),(0,ot.Ym)(Dt,"simulcast","object")&&(It.simulcast={},Dt.simulcast.streamQuality&&(Dt.simulcast.streamQuality==="high"?It.simulcast.substream=2:Dt.simulcast.streamQuality==="medium"?It.simulcast.substream=1:Dt.simulcast.streamQuality==="low"&&(It.simulcast.substream=0)),Dt.simulcast.streamFrameRate&&(Dt.simulcast.streamFrameRate==="high"?It.simulcast.temporal=2:Dt.simulcast.streamFrameRate==="medium"?It.simulcast.temporal=1:Dt.simulcast.streamFrameRate==="low"&&(It.simulcast.temporal=0))),(Zt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Zt.callControl=an,(0,ot.ki)(Zt.callControl.autoRestart,"counter","number")?(Zt.callControl.autoRestart.counter+=1,Zt.restarted=!0):Zt.callControl.autoRestart.counter=0,Zt.settingUpType="subscribe",Dt!=null&&Dt.turnServerAddress!==void 0&&Dt.turnServerAddress!==null&&Zt.setCallTurnServer(Dt.turnServerAddress),Zt.generateCallId(),an.callId=Zt.callId,Zt.setupTimeoutId=tn(Zt.callId),Zt.callerId=gn.roomName,Zt.calleeId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Zt.callee=!0,Zt.mcuRemoteStream=$t,Zt.dest_roomId=gn.roomName,Zt.callType=$t.attributes.callType,Zt.callControl.callType=$t.attributes.callType,$t.attributes.callType!=="audio"&&Tt!=="AUDIOONLY"||(Zt.audioOnly=!0,Zt.callControl.audioOnly=!0),Zt.remoteId=$t.attributes.callerId,Zt.remoteMailAddress=$t.attributes.mailAddress,Zt.streamId=$t.id,Zt.mediaType=Tt,Zt.sessionMCU=gn,un.log("call.streamId: "+Zt.streamId),(0,ot.Ym)(It,"object")?Zt.data=(0,ot.ws)({},It):Zt.data={},Zt.data.pubSub="janusConnector",Zt.data.type="subscribe",Zt.data.mode="passive",Zt.data.mediaType=Tt,Zt.data.capabilities=this.browserCapabilities,Zt.data.cloudConvId=gn.convId,Zt.data.instanceId=Zt.instanceId,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Zt),Vt[qt]=Zt.callId,Zt.myWebRTC_Stack.sendInvite(Zt.callId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,gn.roomName,gn.roomName,$t.attributes.callType,{mode:"passive",data:Zt.data,stream:$t,volatile:!!Zt.restarted})):((Zt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Zt.callControl=an,(0,ot.ki)(Zt.callControl.autoRestart,"counter","number")?(Zt.callControl.autoRestart.counter+=1,Zt.restarted=!0):Zt.callControl.autoRestart.counter=0,Zt.settingUpType="subscribe",Dt!=null&&Dt.turnServerAddress!==void 0&&Dt.turnServerAddress!==null&&Zt.setCallTurnServer(Dt.turnServerAddress),It===void 0&&(It={}),Zt.data=It,Zt.data.pubSub=this.pubConnector,Zt.data.type="subscribe",Zt.data.capabilities=this.browserCapabilities,Zt.data.cloudConvId=gn.convId,Zt.data.instanceId=Zt.instanceId,un.log("mediaType: ",Tt),un.log("stream.attributes.callType: ",$t.attributes.callType),Zt.callType=$t.attributes.callType,Zt.callControl.callType=$t.attributes.callType,$t.attributes.callType==="COMPOSITE"&&this.pubConnector==="janusConnector"||$t.attributes.callType==="audio"||Tt==="AUDIOONLY"?(un.log("Setting call as audioOnly"),Zt.audioOnly=!0,Zt.callControl.audioOnly=!0,Zt.stripVideoSDPActivated=!0):Tt==="VIDEOONLY"&&(Zt.stripAudioSDPActivated=!0,Zt.callType="videoOnly",Zt.callControl.callType="videoOnly"),Zt.mcuRemoteStream=$t,Zt.dest_roomId=gn.roomName,Zt.calleeId=gn.roomName,Zt.generateCallId(),an.callId=Zt.callId,Zt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Zt.sessionMCU=gn,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Zt),Zt.createPeerConnection(),Zt.doCall(),Zt.started=!0,Zt.callType=$t.attributes.callType,Zt.remoteId=$t.attributes.callerId,Zt.remoteMailAddress=$t.attributes.mailAddress,$t.audio===!0?$t.video===!0?Zt.destCallType="media":Zt.destCallType="audio":$t.video===!0&&(Zt.destCallType="videoOnly"),$t.id===void 0&&un.log("stream.id is undefined :",$t),Zt.streamId=$t.id,Zt.mediaType=Tt,un.log("stream.attributes.callType: ",$t.attributes.callType),Vt[qt]=Zt.callId),Zt.asyncCallbacks={},Zt.asyncCallbacks.type="subscribe")}return Vt},this.unsubscribe=function(lt){un.info("unsubscribe() :",lt);var Tt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(lt);Tt===null?un.log("error call not found on unsubscribe"):Tt.callId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId)},this.publish=function(lt,Tt,It,Dt,Et,$t){un.info("publish roomName :",lt),un.log("publish sessionId :",Tt),un.log("publish token :",It),un.log("publish callConfiguration :",Dt);var xt=null,Vt=!1,Zt=!1,an=null,qt=null,tn=this.getSessionMCU(lt);if(!tn)return un.error("roomName does not match any sessionMCU"),null;if(Et!==null&&fn(Et)==="object"||(Et={}),this.pubConnector==="janusConnector"&&!Et.mesh&&$t&&$t.callControl&&$t.callControl.callId&&apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId($t.callControl.callId))return un.debug("call already exists",$t.callControl.callId),$t.callControl.callId;if(Dt===!0||Dt==="true"?(un.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Vt=!0,Dt={}):Dt===!1||Dt==="false"?(un.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Dt={}):Dt!==null&&fn(Dt)==="object"||(Dt={}),Dt.audioOnly===!0&&Dt.videoOnly===!0)return Tn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,lt),null;if(Dt.audioOnly===!0&&(Vt=!0),Dt.videoOnly===!0&&(Zt=!0),["audioOnly","videoOnly","record","private"].forEach(function(rn){Dt.hasOwnProperty(rn)&&((0,ot.ki)(Et,"callConfiguration","object")||(Et.callConfiguration={}),Et.callConfiguration[rn]=Dt[rn])}),tn.convId&&(Et.cloudConvId=tn.convId),(0,ot.Ym)(Dt,"qos","object")?(Et.qos={},Dt.qos.videoMinBitrate?Et.qos.videoMinBitrate=Dt.qos.videoMinBitrate:Dt.qos.videoMinQuality&&["excellent","good","medium","bad"].indexOf(Dt.qos.videoMinQuality)>=0?Et.qos.videoMinQuality=Dt.qos.videoMinQuality:Et.qos.videoMinQuality="bad",Dt.qos.videoStartBitrate?Et.qos.videoStartBitrate=Dt.qos.videoStartBitrate:Dt.qos.videoStartQuality&&["upper","excellent","good","medium","bad"].indexOf(Dt.qos.videoStartQuality)>=0&&(Et.qos.videoStartQuality=Dt.qos.videoStartQuality),Dt.qos.videoForbidInactive===!1?Et.qos.videoForbidInactive=!1:Et.qos.videoForbidInactive=!0):Et.qos={videoMinQuality:"bad",videoForbidInactive:!0},Dt.simulcast&&(Dt.userMediaStreamId&&(qt=apiCC.getUserMediaStream(Dt.userMediaStreamId))&&qt.isSimulcastCompliant()||delete Dt.simulcast),function(rn){if(!(0,ot.ki)(rn,"simulcast","object")||ot.wL.type==="safari"&&rn.simulcast.mode!=="SDP")return delete rn.simulcast,!1;delete rn.simulcast.sendEncodings,(0,ot.ki)(rn.simulcast,"maxBitrate","number")?ot.wL.type==="chrome"&&ot.wL.version>=78&&rn.simulcast.mode!=="SDP"?(un.debug("configure simulcast RID chrome maxBitrate"),!Dn(rn.simulcast,rn.simulcast.maxBitrate)&&(un.warn("cannot configure simulcast"),delete rn.simulcast)):ot.wL.type==="firefox"?(un.debug("configure simulcast RID firefox maxBitrate"),!Dn(rn.simulcast,rn.simulcast.maxBitrate)&&(un.warn("cannot configure simulcast"),delete rn.simulcast)):delete rn.simulcast.encodings:(0,ot.ki)(rn.simulcast,"encodings","object")?ot.wL.type==="chrome"&&ot.wL.version>=78&&rn.simulcast.mode!=="SDP"?(un.debug("configure simulcast RID chrome encodings"),!wn(rn.simulcast)&&(un.warn("cannot configure simulcast"),delete rn.simulcast)):ot.wL.type==="firefox"?(un.debug("configure simulcast RID firefox encodings"),!wn(rn.simulcast)&&(un.warn("cannot configure simulcast"),delete rn.simulcast)):delete rn.simulcast.encodings:ot.wL.type==="chrome"&&ot.wL.version>=78&&rn.simulcast.mode!=="SDP"?(un.debug("configure simulcast RID chrome default"),rn.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!wn(rn.simulcast)&&delete rn.simulcast):ot.wL.type==="firefox"&&(un.debug("configure simulcast RID firefox default"),rn.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!wn(rn.simulcast))&&delete rn.simulcast}(Dt),Dt.distributedBroadcastEnabled&&!Dt.simulcast&&(Et.distributedBroadcastEnabled=!0),["audioLabels","videoLabels"].forEach(function(rn){(0,ot.Ym)(Dt[rn],"array")&&(Et[rn]=[],Dt[rn].forEach(function(pn){(0,ot.Ym)(pn,"string")&&Et[rn].push(pn)}))}),(0,ot.Ym)(Dt,"context","object"))try{JSON.stringify(Dt.context),Et.context=Dt.context}catch{}if((0,ot.Ym)(Dt,"profileType","string")&&(Et.profileType=Dt.profileType),(0,ot.Ym)(Dt,"priority","number")&&Dt.priority>=0&&(Et.priority=Dt.priority),(0,ot.Ym)(Dt,"downgradeProfileList","array")&&(Et.downgradeProfileList=Dt.downgradeProfileList),un.debug("callConfiguration; audioOnly: "+Vt+", videoOnly: "+Zt),$t&&$t.forceScreenSharingCallType===!0)un.debug("publish screenSharing");else if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return un.debug("publish without any device, leaving publish ..."),Et.publishWithoutMediaDeviceDetected=!0,apiCC.session.setUserData(Et),Tn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,lt),null;Vt!==!0&&(un.debug("publish video, but no webcam present, forcing callType to audio"),Vt=!0)}else apiCC.mediaDeviceMgr.audioDevicePresent===!1&&Zt!==!0&&(un.debug("publish video, but no microphone present, forcing callType to videoOnly"),Zt=!0);if(xt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient),Et.mesh!==void 0&&Et.instanceId!==void 0?(un.debug("keeping instanceId "),xt.instanceId=Et.instanceId):xt.instanceId=apiCC.generateInstanceId(),this.pubConnector!=="janusConnector"||Et.mesh?(xt.settingUpType="publish",xt.generateCallId()):(xt.settingUpType="publish",$t&&$t.callControl?(xt.callControl=$t.callControl,xt.callControl.autoRestart.counter+=1,xt.callId=xt.callControl.callId,xt.restarted=!0):(xt.callControl=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"publish",roomName:lt,callConfiguration:Dt,data:Et}),xt.callControl.sessionId=Tt,xt.callControl.token=It,xt.callControl.autoRestart.counter=0,xt.generateCallId(),xt.callControl.callId=xt.callId)),Dt!=null&&Dt.turnServerAddress!==void 0&&Dt.turnServerAddress!==null&&xt.setCallTurnServer(Dt.turnServerAddress),Dt.userMediaStreamId&&((qt=apiCC.getUserMediaStream(Dt.userMediaStreamId))?(xt.callType=qt.callType,un.debug("Setting callType to "+xt.callType),xt.callType==="screenSharing"&&(xt.screenSharing=!0)):(un.debug("callConfiguration.userMediaStreamId is setted but stream is not present"),delete Dt.userMediaStreamId)),xt.data=Et,xt.data.instanceId=xt.instanceId,Tt==="restarted"&&(xt.restarted=!0),xt.mediaTypeForIncomingCall="NONE",Vt===!0?(un.log("Setting call as audioOnly"),xt.audioOnly=!0,xt.callType="audio",xt.mediaTypeForOutgoingCall="AUDIO"):Zt===!0?(un.log("Setting call as videoOnly"),xt.callType="videoOnly",xt.mediaTypeForOutgoingCall="VIDEOONLY"):un.log("Not Setting call as audioOnly nor videoOnly"),xt.dest_roomId=tn.roomName,xt.calleeId=tn.roomName,xt.data.pubSub=this.pubConnector,xt.data.type="publish",xt.data.capabilities=this.browserCapabilities,xt.data.cloudConvId=tn.convId,xt.callConfiguration=Dt,xt.sessionMCU=tn,xt.setMediaConstraintsToSendOnlyOffer(),xt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,(0,ot.Ym)(Dt,"simulcast","object")){var gn=null;qt&&(gn=qt.getSimulcastProfile()),ot.wL.type==="chrome"&&ot.wL.version>=78&&Dt.simulcast.mode!=="SDP"?(un.debug("simulcast chrome 78+ -> RID",Dt.simulcast),xt.simulcast="RID",xt.data.simulcast={enabled:!0,mode:"RID"},xt.data.simulcast.encodings=Object.assign({},Dt.simulcast.encodings),gn&&(xt.data.simulcast.profile=gn)):ot.wL.type==="chrome"?(un.debug("simulcast chrome -> SDP",Dt.simulcast),xt.simulcast="SDP",xt.data.simulcast={enabled:!0,mode:"SDP"}):ot.wL.type==="firefox"?(un.debug("simulcast firefox -> RID",Dt.simulcast),xt.simulcast="RID",xt.data.simulcast={enabled:!0,mode:"RID"},xt.data.simulcast.encodings=Object.assign({},Dt.simulcast.encodings),gn&&(xt.data.simulcast.profile=gn)):ot.wL.type==="safari"&&(un.debug("simulcast safari -> SDP",Dt.simulcast),xt.simulcast="SDP",xt.data.simulcast={enabled:!0,mode:"SDP"})}return un.log("webRTCClient.accessToLocalMedia :",Kt.accessToLocalMedia),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(xt),this.publishCallId=xt.callId,xt.callControl&&xt.callControl.autoRestart.stream&&un.debug("call.callControl.autoRestart.stream.active :",xt.callControl.autoRestart.stream.active),this.pubConnector==="janusConnector"&&xt.callControl&&xt.callControl.autoRestart.stream&&xt.callControl.autoRestart.stream.active?(apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,xt.callLocalStream=xt.callControl.autoRestart.stream,xt.establishCall(),xt.callId):(Et.mesh!==void 0&&(an=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Et.mesh.calleeCallId))!==null&&an.callConfiguration&&an.callConfiguration.userMediaStreamId&&(xt.callType=an.callType,Dt.userMediaStreamId=an.callConfiguration.userMediaStreamId),Dt.userMediaStreamId?((qt=apiCC.getUserMediaStream(Dt.userMediaStreamId)).addCallInfo(xt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&xt.callControl&&(xt.callControl.autoRestart.stream=qt.stream),xt.callConfiguration.userMediaStreamId=qt.userMediaStreamId,xt.callLocalStream=qt.stream,xt.establishCall(),xt.callId):apiCC.userMediaStreamTable.length>0?((qt=apiCC.userMediaStreamTable[0]).addCallInfo(xt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&xt.callControl&&(xt.callControl.autoRestart.stream=qt.stream),xt.callConfiguration.userMediaStreamId=qt.userMediaStreamId,xt.callLocalStream=qt.stream,xt.establishCall(),xt.callId):(apiCC.createUserMediaStream({callId:xt.callId,type:xt.callType,audioSourceId:Kt.audioSourceId,videoSourceId:Kt.videoSourceId,success:function(rn){un.debug("[publish] success; userMediaStreamId: "+rn.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&xt.callControl&&(xt.callControl.autoRestart.stream=rn.stream),xt.callConfiguration.userMediaStreamId=rn.userMediaStreamId,xt.callLocalStream=rn.stream,xt.establishCall()}}),xt.callId))},this.publishScreen=function(lt,Tt,It,Dt){un.info("publishScreen()");var Et=this.getSessionMCU(lt);return Et?(Tt==null&&(Tt={}),It==null&&(It={}),It.record!==void 0&&(Tt.callConfiguration!==void 0||(Tt.callConfiguration={}),Tt.callConfiguration.record=It.record),It.private!==void 0&&(Tt.callConfiguration!==void 0||(Tt.callConfiguration={}),Tt.callConfiguration.private=It.private),Tt.pubSub=this.pubConnector,Tt.type="publish",apiCC.session.apiCCWebRTCClient.webRTCClient.shareScreen(Et.roomName,Tt,Dt,It)):(un.error("roomId does not match any sessionMCU"),null)},this.unpublish=function(lt){un.info("unpublish call with callId :",lt),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(lt),this.publishCallId=null},this.removeMCUStream=function(lt,Tt,It){var Dt,Et=!1;for(It!=="Broken_by_MCU"&&It!=="disconnected"||(Et=!0),un.debug("streamId:",Tt),un.debug("reason:",It),un.debug("quiet:",Et),Dt=0;Dt<this.streamList.length;Dt+=1)if(un.log("this.streamList[i].streamInfo.id :",this.streamList[Dt].streamInfo.id),this.streamList[Dt].streamInfo.id===Tt){Et===!0?(un.debug("add stream into disputableStreamList: ",Tt),this.streamList[Dt].disputableTimeoutId=setTimeout(An.bind(this,this.streamList[Dt].streamInfo.id),kn),this.streamList[Dt].clearDisputableEntry=En.bind(this,this.streamList[Dt].streamInfo.id),this.disputableStreamList.push(this.streamList[Dt])):(un.debug("remove stream from streamList:",Tt),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:this.streamList[Dt].streamInfo}),this.streamList.splice(Dt,1));break}lt!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(lt),Et!==!0&&Tn.createMCURemovedStreamEvent(Tt)},this.startStreaming=function(lt,Tt,It,Dt){un.info("startStreaming");var Et,$t,xt=lt!=null&&lt.length>0,Vt=Tt!=null&&Tt.length>0,Zt={};if(!xt&&!Vt||It==null||It.length===0)return!1;if(Dt===void 0){if(this.publishCallId===null)return un.log("Cannot start streaming as no stream is published"),!1;Dt=this.publishCallId}var an=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Dt);return an||(an=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Dt))?an.sessionMCU?(xt||(lt="custom"),Zt.pubSub=this.pubConnector,Zt.service=lt,Vt&&(Zt.server=Tt),Zt.streamKey=It,un.log("startStreaming() on ApiRTC MCU with roomId:",an.sessionMCU.roomName),Et={type:"startStreaming",roomId:an.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Dt,data:Zt},$t=JSON.stringify(Et),un.log("C->S: "+$t),apiCC.session.channel.socket.emit("startStreaming",$t),!0):(un.error("no such sessionMCU"),!1):(un.error("callIdToStream does not match any call"),!1)},this.stopStreaming=function(lt){var Tt,It;if(un.info("stopStreaming"),lt===void 0){if(this.publishCallId===null)return un.log("Cannot stop streaming as no stream is published"),!1;lt=this.publishCallId}var Dt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(lt);if(!Dt)return un.error("callIdToStream does not match any call"),!1;var Et=this.getSessionMCU(Dt.dest_roomId);return Et?(un.log("stopStreaming() on ApiRTC MCU with roomId:",Et.roomName),Tt={type:"stopStreaming",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:lt,data:{pubSub:this.pubConnector}},It=JSON.stringify(Tt),un.log("C->S: "+It),apiCC.session.channel.socket.emit("stopStreaming",It),!0):(un.error("dest_roomId does not match any sessionMCU"),!1)},this.startRecording=function(lt,Tt,It,Dt,Et){var $t,xt;if(un.info("startRecording"),Dt==null){if(this.publishCallId===null)return void un.log("Call recording can not start as stream is not published");Dt=this.publishCallId}var Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Dt);return Vt||(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Dt))?Vt.sessionMCU?(lt!=="AUDIO-ONLY"&&lt!=="VIDEO-ONLY"&&(lt="AUDIO-VIDEO"),Et==null&&(Et={}),Et.pubSub=this.pubConnector,un.log("startRecording() on ApiRTC MCU with roomId :",Vt.sessionMCU.roomName),$t={type:"startRecording",roomId:Vt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Dt,data:Et,customIdInFilename:Tt,mediaType:lt,convId:It},xt=JSON.stringify($t),un.log("C->S: "+xt),void apiCC.session.channel.socket.emit("startRecording",xt)):(un.error("no such sessionMCU"),!1):(un.error("callIdToRecord does not match any call"),!1)},this.stopRecording=function(lt){var Tt,It;if(un.info("stopRecording"),lt===void 0){if(this.publishCallId===null)return void un.log("Call recording can not stop as stream is not published");lt=this.publishCallId}var Dt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(lt);if(!Dt)return un.error("callIdToRecord does not match any call"),!1;var Et=this.getSessionMCU(Dt.dest_roomId);if(!Et)return un.error("dest_roomId does not match any sessionMCU"),!1;un.log("stopRecording() on ApiRTC MCU with roomId :",Et.roomName),Tt={type:"stopRecording",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:lt,data:{pubSub:this.pubConnector}},It=JSON.stringify(Tt),un.log("C->S: "+It),apiCC.session.channel.socket.emit("stopRecording",It)},this.recordingStarted=function(lt){un.info("recordingStarted:",lt),Tn.createMCURecordingStartedEvent(lt.roomName,lt.callId,lt.clientId,lt.recordType,lt.time,lt.convId,lt.mediaId,lt.mediaURL,lt.remoteId,lt.recordedFileName,lt.mediaType,lt.descriptor)},this.recordingStopped=function(lt){un.info("recordingStopped:",lt),Tn.createMCURecordingStoppedEvent(lt.roomName,lt.callId,lt.clientId,lt.recordType,lt.time,lt.convId,lt.mediaId,lt.mediaURL,lt.remoteId,lt.recordedFileName,lt.mediaType,lt.descriptor)},this.recordingStreamAvailable=function(lt){un.info("recordingStreamAvailable :",lt),Tn.createMCURecordedStreamsAvailableEvent(lt.roomName,lt.callId,lt.clientId,lt.recordedFileName,lt.convId,lt.mediaId,lt.mediaURL,lt.recordType,lt.remoteId,lt.mediaType,lt.descriptor),this.pubConnector==="janusConnector"&&lt.hasOwnProperty("confId")&&lt.hasOwnProperty("remoteId")&&Tn.createRecordedStreamsAvailableEvent(lt.confId,lt.clientId,lt.remoteId,lt.callId,lt.convId,lt.mediaId,lt.mediaURL)},this.streamingStarted=function(lt){un.info("streamingStarted: ",lt),Tn.createMCUStreamingStartedEvent(lt.roomName,lt.callId,lt.clientId,lt.time)},this.streamingStopped=function(lt){un.info("streamingStopped: ",lt),Tn.createMCUStreamingStoppedEvent(lt.roomName,lt.callId,lt.clientId,lt.time)},this.startComposite=function(lt){var Tt,It,Dt;(Dt=lt?this.getSessionMCU(lt):this.getSessionMCU(null,{first:!0}))?(un.log("startComposite() on ApiRTC MCU with roomId :",Dt.roomName),Tt={type:"startComposite",roomId:Dt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},It=JSON.stringify(Tt),un.log("C->S: "+It),apiCC.session.channel.socket.emit("startComposite",It)):un.log("startComposite() but client is not in session")},this.stopComposite=function(lt){var Tt,It,Dt;(Dt=lt?this.getSessionMCU(lt):this.getSessionMCU(null,{first:!0}))?(un.log("stopComposite() on ApiRTC MCU with roomId :",Dt.roomName),Tt={type:"stopComposite",roomId:Dt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},It=JSON.stringify(Tt),un.log("C->S: "+It),apiCC.session.channel.socket.emit("stopComposite",It)):un.log("stopComposite() but client is not in session")},this.startCompositeRecording=function(lt,Tt,It,Dt,Et){un.info("startCompositeRecording with convId :",It);var $t,xt,Vt;(Vt=Et?this.getSessionMCU(Et):this.getSessionMCU(null,{first:!0}))?(lt!=="AUDIO-ONLY"&&lt!=="VIDEO-ONLY"&&(lt="AUDIO-VIDEO"),(Dt=(0,ot.Ym)(Dt,"object")?(0,ot.ws)({},Dt):{}).pubSub=this.pubConnector,["complete","efficient","audioOnly"].indexOf(Dt.mode)<0&&(Dt.mode="complete"),Dt.labelEnabled=Dt.labelEnabled===!0,(0,ot.Ym)(Dt,"labels","array")||(Dt.labels=["microphone","camera","screenSharing","sip"]),un.log("startRecording() on ApiRTC MCU with roomId :",Vt.roomName),$t={type:"startRecording",roomId:Vt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:Dt,customIdInFilename:Tt,mediaType:lt,convId:It},xt=JSON.stringify($t),un.log("C->S: "+xt),apiCC.session.channel.socket.emit("startRecording",xt)):un.log("startCompositeRecording() but client is not in session")},this.stopCompositeRecording=function(lt){un.info("stopCompositeRecording");var Tt,It,Dt;(Dt=lt?this.getSessionMCU(lt):this.getSessionMCU(null,{first:!0}))?(un.log("stopRecording() on ApiRTC MCU with roomId :",Dt.roomName),Tt={type:"stopRecording",roomId:Dt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:{pubSub:this.pubConnector}},It=JSON.stringify(Tt),un.log("C->S: "+It),apiCC.session.channel.socket.emit("stopRecording",It)):un.log("stopCompositeRecording() but client is not in session")},this.inviteVoIP=function(lt,Tt,It){var Dt=this;return new Promise(function(Et,$t){if(!lt||typeof lt!="string")return $t(new Error("wrong roomId"));if(!Dt.getSessionMCU(lt))return $t(new Error("no such session"));if(!Tt||typeof Tt!="string")return $t(new Error("wrong convId"));if(!It||typeof It!="string")return $t(new Error("wrong phoneNumber"));var xt="inviteVoIP-"+It;try{if(Kt.hasReceiptHook(xt))return $t(new Error("busy"));var Vt=new Pt;Vt.onSuccess(function(){return Et()}),Vt.onFailure(function(qt){return $t(qt)}),Vt.setTimeout(1e4,"timeout"),Kt.createReceiptHook(xt,Vt)}catch(qt){return un.debug("inviteVoIP: createReceiptHook",qt),$t(new Error("internal error"))}var Zt={type:"inviteVoIP",clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:lt,convId:Tt,phoneNumber:It,receiptId:xt,data:{pubSub:"sipConnector"}},an=JSON.stringify(Zt);un.debug("C->S:",an),apiCC.session.channel.socket.emit("inviteVoIP",an)})},this.enforceMCU=function(lt){var Tt;if(Tt=lt?this.getSessionMCU(lt):this.getSessionMCU(null,{first:!0})){var It={type:"info",infoType:"enforceMCU",data:{clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:Tt.roomName,pubSub:this.pubConnector}},Dt=JSON.stringify(It);un.log("C->S: "+Dt),apiCC.session.channel.socket.emit("info",Dt)}else un.log("enforceMCU() but client is not in session")},this.meshPublish=function(lt,Tt,It,Dt,Et,$t){var xt=!1,Vt=null,Zt=null,an=this.getSessionMCU(lt);if(!an)return un.error("meshPublish() - missing sessionMCU"),null;if(Dt===!0||Dt===!1||Dt==="true"||Dt==="false"?(un.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),xt=Dt,Dt={}):Dt!==null&&fn(Dt)==="object"||(Dt={}),Et!==null&&fn(Et)==="object"||(Et={}),(0,ot.Ym)(Dt,"profileType","string")&&(Et.profileType=Dt.profileType),(0,ot.Ym)(Dt,"priority","number")&&Dt.priority>=0&&(Et.priority=Dt.priority),(0,ot.Ym)(Dt,"downgradeProfileList","array")&&(Et.downgradeProfileList=Dt.downgradeProfileList),Dt.audioOnly!==void 0&&(xt=Dt.audioOnly,Et.callConfiguration!==void 0||(Et.callConfiguration={}),Et.callConfiguration.audioOnly=Dt.audioOnly),(0,ot.Ym)(Dt,"context","object"))try{JSON.stringify(Dt.context),Et.context=Dt.context}catch{}return Vt=new Sn(apiCC.session.apiCCWebRTCClient.webRTCClient),xt!==!0&&xt!=="true"||(un.log("Setting call as audioOnly"),Vt.callType="audio"),Vt.roomId=lt,Vt.sessionId=Tt,Vt.token=It,Vt.callConfiguration=Dt,Vt.data=Et,Vt.options=$t,Vt.sessionMCU=an,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(Vt),Dt.userMediaStreamId?((Zt=apiCC.getUserMediaStream(Dt.userMediaStreamId)).addCallInfo(Vt.userMediaId,"userMedia"),Vt.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,Vt.callType=Zt.callType,Vt.audio=Zt.audio,Vt.video=Zt.video,Vt.audioMuted=Zt.audioMuted,Vt.videoMuted=Zt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Vt),apiCC.checkMutingStateForUserMedia(Dt,Zt)):apiCC.createUserMediaStream({callId:Vt.userMediaId,callFlavor:"userMedia",type:Vt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(qt){un.debug("[meshPublish] success; userMediaStreamId: "+qt.userMediaStreamId),Vt.callConfiguration.userMediaStreamId=qt.userMediaStreamId,Vt.callType=qt.callType,Vt.audio=qt.audio,Vt.video=qt.video,Vt.audioMuted=qt.audioMuted,Vt.videoMuted=qt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Vt),apiCC.checkMutingStateForUserMedia(Dt,qt)}}),Vt.userMediaId},this.meshOnUserMediaSuccess=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],It=null,Dt=null;Tt===!0?((It={}).type="streamStatusChanged",It.callerId=Kt.clientId,It.roomId=lt.roomId,It.streams={},It.streams[lt.userMediaId]={eventType:"modify",callId:lt.userMediaId,callType:lt.callType,audio:lt.audio,video:lt.video,audioMuted:lt.audioMuted,videoMuted:lt.videoMuted},It.data={},It.data.meshPublish=!0,It.data.pubSub=this.pubConnector,Dt=JSON.stringify(It),un.log("C->S: "+Dt),apiCC.session.channel.socket.emit("streamStatusChanged",Dt)):(this.publishCallId=lt.userMediaId,lt.addAck=!0,lt.addTimeoutId=setTimeout(function(){Kt.onRemoteHangup(lt.userMediaId,Kt.clientId,lt.roomId,"Unable_to_establish",null,null)},lt.disconnectionTimer),(It={}).type="streamStatusChanged",It.callerId=Kt.clientId,It.roomId=lt.roomId,It.streams={},It.streams[lt.userMediaId]={eventType:"add",callId:lt.userMediaId,callType:lt.callType,audio:lt.audio,video:lt.video,audioMuted:lt.audioMuted,videoMuted:lt.videoMuted},It.data=lt.data,It.data.meshPublish=!0,It.data.pubSub=this.pubConnector,Dt=JSON.stringify(It),un.log("C->S: "+Dt),apiCC.session.channel.socket.emit("streamStatusChanged",Dt))},this.meshPublishScreen=function(lt,Tt,It,Dt,Et){var $t=null,xt=null,Vt=this.getSessionMCU(lt);return Vt?(It!==null&&fn(It)==="object"||(It={}),($t=new Sn(apiCC.session.apiCCWebRTCClient.webRTCClient)).roomId=lt,$t.data=Tt,$t.callConfiguration=It,$t.captureSourceType=Dt,$t.sessionMCU=Vt,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push($t),It.userMediaStreamId?((xt=apiCC.getUserMediaStream(It.userMediaStreamId)).addCallInfo($t.userMediaId,"userMedia"),$t.callConfiguration.userMediaStreamId=xt.userMediaStreamId,$t.callType=xt.callType,$t.audio=xt.audio,$t.video=xt.video,$t.audioMuted=xt.audioMuted,$t.videoMuted=xt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess($t)):apiCC.createUserMediaStream({callId:$t.userMediaId,callFlavor:"userMedia",type:"screenSharing",captureSourceType:Dt,success:function(Zt){un.debug("[meshPublishScreen] success; userMediaStreamId: "+Zt.userMediaStreamId),$t.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,$t.callType=Zt.callType,$t.audio=Zt.audio,$t.video=Zt.video,$t.audioMuted=Zt.audioMuted,$t.videoMuted=Zt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnScreenMediaSuccess($t)}}),$t.userMediaId):(un.error("meshPublishScreen() - missing sessionMCU"),null)},this.meshOnScreenMediaSuccess=function(lt){var Tt,It=null;lt.addAck=!0,lt.addTimeoutId=setTimeout(function(){Kt.onRemoteHangup(lt.userMediaId,Kt.clientId,lt.roomId,"Unable_to_establish",null,null)},lt.disconnectionTimer),(It={}).type="streamStatusChanged",It.callerId=Kt.clientId,It.roomId=lt.roomId,It.streams={},It.streams[lt.userMediaId]={eventType:"add",callId:lt.userMediaId,callType:lt.callType,audio:lt.audio,video:lt.video,audioMuted:lt.audioMuted,videoMuted:lt.videoMuted},It.data={},It.data.pubSub=this.pubConnector,Tt=JSON.stringify(It),un.log("C->S: "+Tt),apiCC.session.channel.socket.emit("streamStatusChanged",Tt)},this.meshOnHangup=function(lt,Tt){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Dt=0,Et=null,$t=null,xt=null;if(Tt!==null&&fn(Tt)==="object"||(Tt={}),lt){if((Et=Kt.findUserMediaById(lt))!==null){for(Et.close(),Et.streamStolen!==!0&&(Kt.myWebRTC_Event.createHangupEvent("local",Kt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.releaseUserMediaStream()),($t={}).type="streamStatusChanged",$t.callerId=Kt.clientId,$t.roomId=Et.roomId,$t.streams={},$t.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},It.restart&&($t.streams[Et.userMediaId].restart=!0),$t.data={},$t.data.pubSub=this.pubConnector,xt=JSON.stringify($t),un.log("C->S: "+xt),apiCC.session.channel.socket.emit("streamStatusChanged",xt),Dt=Kt.userMediaTable.length;--Dt>=0;)if(Kt.userMediaTable[Dt]===Et){Kt.userMediaTable.splice(Dt,1);break}}}else for(Dt=Kt.userMediaTable.length;--Dt>=0;)Et=Kt.userMediaTable[Dt],It.hasOwnProperty("roomId")&&Et.sessionMCU.roomName!==It.roomId||(Kt.myWebRTC_Event.createHangupEvent("local",Kt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.close(),Et.releaseUserMediaStream(),($t={}).type="streamStatusChanged",$t.callerId=Kt.clientId,$t.roomId=Et.roomId,$t.streams={},$t.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},$t.data={},$t.data.pubSub=this.pubConnector,xt=JSON.stringify($t),un.log("C->S: "+xt),apiCC.session.channel.socket.emit("streamStatusChanged",xt),Kt.userMediaTable.splice(Dt,1))},this.participantEjected=function(lt){(0,ot.Ym)(lt.data,"clientId","string")&&Kt.myWebRTC_Event.createMCUParticipantEjectedEvent(lt.roomId,lt.data.clientId,lt.data.info)},this.ejectParticipant=function(lt,Tt,It){var Dt;if(Dt=It?this.getSessionMCU(It):this.getSessionMCU(null,{first:!0})){var Et={type:"ejectParticipant",roomId:Dt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,clientId:lt}};Tt&&(Et.data.info=Tt);var $t=JSON.stringify(Et);un.log("C->S: "+$t),apiCC.session.channel.socket.emit("ejectParticipant",$t)}else un.debug("ejectParticipant() - missing sessionMCU")},this.getJoinSessionReq=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=null;if(!lt){if(Tt.hasOwnProperty("transactionId")){for(var Dt=this.joinSessionReqs.length;--Dt>=0;)if(this.joinSessionReqs[Dt].transactionId===Tt.transactionId){It=this.joinSessionReqs[Dt];break}return It}return null}for(var Et=this.joinSessionReqs.length;--Et>=0;)if(this.joinSessionReqs[Et].roomId===lt){It=this.joinSessionReqs[Et];break}return It},this.removeJoinSessionReq=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!lt){if(Tt.all===!0)return this.joinSessionReqs.splice(0,this.joinSessionReqs.length),!0;Tt.hasOwnProperty("roomId")&&(lt=this.getJoinSessionReq(Tt.roomId))}if(!lt)return!1;for(var It=this.joinSessionReqs.length;--It>=0&&this.joinSessionReqs[It]!==lt;);return It>=0&&(this.joinSessionReqs.splice(It,1),!0)},this.getSessionMCU=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=null;if(!lt){if(Tt.first===!0)return this.sessionMCUs[0];if((0,ot.Ym)(Tt.callback,"function")){un.debug("getSessionMCU callback");for(var Dt=this.sessionMCUs.length;--Dt>=0;)if(Tt.callback(this.sessionMCUs[Dt])){It=this.sessionMCUs[Dt];break}}return It}for(var Et=this.sessionMCUs.length;--Et>=0;)if(this.sessionMCUs[Et].roomName===lt){It=this.sessionMCUs[Et];break}return It},this.removeSessionMCU=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!lt&&Tt.all===!0)return this.sessionMCUs.splice(0,this.sessionMCUs.length),!0;if(!lt)return!1;for(var It=this.sessionMCUs.length;--It>=0&&this.sessionMCUs[It]!==lt;);return It>=0&&(this.sessionMCUs.splice(It,1),!0)},this.callback=function(lt,Tt){return this.closureHandler=function(It){return lt[Tt](It)},this.closureHandler}};function An(Kt){un.debug("disputableEntryTimeout",Kt);for(var Ot=apiCC.session.apiCCWebRTCClient.webRTCClient,lt=this.disputableStreamList.length;--lt>=0;)if(this.disputableStreamList[lt].streamInfo.id===Kt){this.disputableStreamList.splice(lt,1);break}for(var Tt=null,It=this.streamList.length;--It>=0;)if(this.streamList[It].streamInfo.id===Kt){Tt=Ot.destroyCallControl({type:"subscribe",stream:this.streamList[It].streamInfo}),this.streamList.splice(It,1);break}Tt&&Tt.callId&&Tn.createHangupEvent("remote",Ot.clientId,Tt.roomName,!1,"Hangup_From_Callee",Tt.callId,Tt.callType),Tn.createMCURemovedStreamEvent(Kt)}function En(Kt){un.debug("clearDisputableEntry",Kt);for(var Ot=this.disputableStreamList.length;--Ot>=0;)if(this.disputableStreamList[Ot].streamInfo.id===Kt){this.disputableStreamList.splice(Ot,1);break}for(var lt=this.streamList.length;--lt>=0;)if(this.streamList[lt].streamInfo.id===Kt){this.streamList[lt].disputableTimeoutId&&(clearTimeout(this.streamList[lt].disputableTimeoutId),delete this.streamList[lt].disputableTimeoutId),delete this.streamList[lt].clearDisputableEntry;break}}function Rn(Kt){var Ot={};return(0,ot.ki)(Kt,"maxBitrate","number")&&(Ot.maxBitrate=Kt.maxBitrate),(0,ot.ki)(Kt,"scaleResolutionDownBy","number")&&(Ot.scaleResolutionDownBy=Kt.scaleResolutionDownBy),Ot}function wn(Kt){return(0,ot.Ym)(Kt.encodings,"object")?(0,ot.ki)(Kt.encodings.high,"maxBitrate","number")&&(0,ot.ki)(Kt.encodings.medium,"maxBitrate","number")&&(0,ot.ki)(Kt.encodings.low,"maxBitrate","number")?(Kt.encodings.high=Object.assign({active:!0},Rn(Kt.encodings.high)),Kt.encodings.medium=Object.assign({active:!0},Rn(Kt.encodings.medium)),Kt.encodings.low=Object.assign({active:!0},Rn(Kt.encodings.low)),Kt.sendEncodings=[{rid:"h",active:!0},{rid:"m",active:!0},{rid:"l",active:!0}],Kt.sendEncodings[0].maxBitrate=1e3*Kt.encodings.high.maxBitrate,Kt.sendEncodings[1].maxBitrate=1e3*Kt.encodings.medium.maxBitrate,Kt.sendEncodings[2].maxBitrate=1e3*Kt.encodings.low.maxBitrate,(0,ot.ki)(Kt.encodings.medium,"scaleResolutionDownBy","number")&&(Kt.sendEncodings[1].scaleResolutionDownBy=Kt.encodings.medium.scaleResolutionDownBy),(0,ot.ki)(Kt.encodings.low,"scaleResolutionDownBy","number")&&(Kt.sendEncodings[2].scaleResolutionDownBy=Kt.encodings.low.scaleResolutionDownBy),!0):(un.warn("no such maxBitrate"),!1):(un.warn("no such encodings"),!1)}function Dn(Kt,Ot){if(Ot<650)return!1;var lt=Math.floor(9*Ot/13),Tt=Math.floor(3*Ot/13),It=Ot-lt-Tt;return Kt.encodings={high:{maxBitrate:lt},medium:{maxBitrate:Tt,scaleResolutionDownBy:2},low:{maxBitrate:It,scaleResolutionDownBy:4}},wn(Kt)}et.Y.get("CallControl");var Bn=function(Kt){this.type=Kt.type,Kt.callId&&(this.callId=Kt.callId),Kt.callType?this.callType=Kt.callType:this.callType="media",Object.prototype.hasOwnProperty.call(Kt,"audioOnly")&&(this.audioOnly=!!Kt.audioOnly),Kt.roomName&&(this.roomName=Kt.roomName),Kt.mediaType&&(this.mediaType=Kt.mediaType),Kt.callConfiguration&&(this.callConfiguration=Kt.callConfiguration),Kt.data&&(this.data=Kt.data),Kt.stream&&(this.stream=Kt.stream),this.autoRestart={}},zn=function(){var Kt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];this.a=1,this.b=0,this.c=7,this.d=0,this.update=function(Ot,lt,Tt){var It=0;for(lt==null&&(lt=0),Tt==null&&(Tt=Ot.length);It<Tt;It+=1)this.a=(this.a+Ot[lt+It])%65521,this.b=(this.b+this.a)%65521,this.c=(this.c+3)*(Ot[lt+It]+5)%65521,this.d=(this.d+this.c)%65521},this.digest=function(Ot){return Kt[this.d>>12&15]+Kt[this.d>>8&15]+Kt[this.d>>4&15]+Kt[15&this.d]+Kt[this.c>>12&15]+Kt[this.c>>8&15]+Kt[this.c>>4&15]+Kt[15&this.c]+Kt[this.b>>12&15]+Kt[this.b>>8&15]+Kt[this.b>>4&15]+Kt[15&this.b]+Kt[this.a>>12&15]+Kt[this.a>>8&15]+Kt[this.a>>4&15]+Kt[15&this.a]}};function Hn(Kt,Ot){return Kt==="checksum64"?new zn:null}function nr(Kt){return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},nr(Kt)}var sn=et.Y.get("WebRTC_Client"),Gn=apiCC.myWebRTC_Event,Zn=4e4,rr=function(Kt){function Ot(lt,Tt,It){var Dt,Et=lt.width,$t=Et<<2,xt=lt.height,Vt=null,Zt=0,an=0,qt=0,tn=0,gn=0,rn=0,pn=0,In=0,Pn=0,_n=0,Ln=0,Vn=0,or=0,hr=0,mr=0,yr=0;if(Tt){for(Vt=Tt.data,It<0&&(It=0),In=1-((gn=(2.44413*(Zt=It>=2.5?.98711*It-.9633:It>=.5?3.97156-4.14554*Math.sqrt(1-.26891*It):2*It*(3.97156-4.14554*Math.sqrt(.865545)))+2.85619*(an=Zt*Zt)+1.26661*(qt=an*Zt))/(tn=1.57825+2.44413*Zt+1.4281*an+.422205*qt))+(rn=-(1.4281*an+1.26661*qt)/tn)+(pn=.422205*qt/tn)),Dt=0;Dt<3;Dt++)for(Pn=0;Pn<xt;Pn++){for(Ln=Pn*$t+(Et-1<<2)+Dt,mr=hr=or=Vn=Vt[_n=Pn*$t+Dt],_n=Pn*$t+Dt;_n<=Ln;_n+=4)Vn=In*Vt[_n]+gn*or+rn*hr+pn*mr,Vt[_n]=Vn,mr=hr,hr=or,or=Vn;for(Ln=Pn*$t+Dt,mr=hr=or=Vn=Vt[_n=Pn*$t+(Et-1<<2)+Dt],_n=Pn*$t+(Et-1<<2)+Dt;_n>=Ln;_n-=4)Vn=In*Vt[_n]+gn*or+rn*hr+pn*mr,Vt[_n]=Vn,mr=hr,hr=or,or=Vn}for(Dt=0;Dt<3;Dt++)for(yr=0;yr<Et;yr++){for(Ln=(xt-1)*$t+(yr<<2)+Dt,mr=hr=or=Vn=Vt[_n=(yr<<2)+Dt],_n=(yr<<2)+Dt;_n<=Ln;_n+=$t)Vn=In*Vt[_n]+gn*or+rn*hr+pn*mr,Vt[_n]=Vn,mr=hr,hr=or,or=Vn;for(Ln=(yr<<2)+Dt,mr=hr=or=Vn=Vt[_n=(xt-1)*$t+(yr<<2)+Dt],_n=(xt-1)*$t+(yr<<2)+Dt;_n>=Ln;_n-=$t)Vn=In*Vt[_n]+gn*or+rn*hr+pn*mr,Vt[_n]=Vn,mr=hr,hr=or,or=Vn}return Tt}}this.localStream=null,this.remoteStream=null,this.channelReady=!1,this.socket=Kt.channel.socket,this.clientId=Kt.apiCCId,this.compositeClientId=Kt.apiCCId+"@"+Kt.apiCCSessionId,this.apiKey=Kt.apiKey,this.isVideoMuted=!1,this.isAudioMuted=!1,this.receiptHooks={},this.callControlTable=[],this.userMediaTable=[],this.callsTable=[],this.callsRetriesTable={},this.restartCallDelay=1e3,this.maxCallsRetriesDuration=15e4,this.accessToLocalMedia=!1,this.unidirectionelCallOnly=!1,this.NtoNConf=!1,this.autoAnswer=!1,this.RTPMedia=!1,this.logoAdded=!1,this.preferOpusCodec=!1,this.preferVP9Codec=!1,typeof apiRTC_React<"u"&&rt.BF==="iOS"?(sn.log("React and iOS : Setting H264 as preferred codec"),this.preferH264Codec=!0):this.preferH264Codec=!1,this.preferSendingH264Codec=!1,this.setStereo=!1,this.allowedAudioCodecs="",this.allowedVideoCodecs="",this.mediaRoutingModeEnum={hostOnly:1,stun:2,stunOnly:3,turn:4,turnOnly:5},this.mediaRoutingMode=this.mediaRoutingModeEnum.turn,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.getUserMediaOnGoing=!1,this.userAcceptOnIncomingCall=!1,this.userAcceptOnIncomingCallBeforeGetUserMedia=!1,this.userAcceptOnIncomingDataCall=!1,this.userAcceptOnIncomingScreenSharingCall=!1,this.maxWidthRemoteVideo=0,this.maxHeightRemoteVideo=0,this.nickname=Kt.nickname,this.allowMultipleCalls=!1,this.mySDPManager=new ut,this.MCUClient=new xn(this,this.clientId),this.audioSourceId=null,this.audioOutputId=null,this.videoSourceId=null,this.facingMode=null,this.apiRTCExtensionInstalled=!1,this.trickleIce=!0,this.waitingShareScreenCallId=0,this.waitingShareScreenDestNumber=0,this.waitingCaptureSourceType=null,this.qosEnable=!1,this.qosInterval=5e3,this.csmEnable=!1,this.qualityScoreEnable=!1,this.qualityScoreIntervalMs=5e3,this.csmIntervalMs=5e3,this.recordedCall=!1,this.audioBandwidth=null,this.videoBandwidth=null,this.videoRemoteBandwidth=null,this.videoBandwidthSettings={},this.dataBandwidth=null,this.pc_config="",this.clientIncomingCandidatesQueue=[],this.cleanStoredCallCandidateTimer=6e4,this.initializeGumConfig=function(){rt.Xh==="Edge"&&rt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:rt.Xh==="Chrome"&&rt.PR<49||rt.Xh==="Firefox"&&rt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}}},this.initializeGumConfig(),this.setGumConfigWithDevicePresent=function(){apiCC.mediaDeviceMgr.audioDevicePresent===!1&&(this.gum_config.audio=!1),apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.gum_config.video=!1),apiCC.mediaDeviceMgr.audioDevicePresent===!1&&apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.unidirectionelCallOnly=!0),sn.log("this.gum_config:",this.gum_config)},this.userMediaErrorDetected=!1,this.lastUsedUserMediaConstraint=null,this.mediaTypeForIncomingCall="VIDEO",this.mediaTypeForOutgoingCall="VIDEO",this.allowAsymetricMediaCalls=!1,this.receiveMediaDeactivated=!1,this.configTurnServer=null,apiCC.myWebRTC_Adapter.adaptForIoSCordova(),this.pc_config={iceServers:[{urls:["turns:mp1.apizee.com:443?transport=udp","turns:mp1.apizee.com:443?transport=tcp","turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turns:mp2.apizee.com:443?transport=udp","turns:mp2.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]},rt.Xh==="Firefox"&&rt.PR<53?(sn.log("createPeerConnection FIREFOX"),sn.log("webrtcDetectedVersion : "+apiCC.myWebRTC_Adapter.webrtcDetectedVersion),rt.PR<38?this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}:rt.PR>=42?this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}:this.pc_config={iceServers:[{urls:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"}]}):rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11?(sn.log("Browser is :"+rt.Xh+" - using Plugin"),this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}):rt.Xh==="Edge"&&rt.PR<45&&apiRTC.browserDetails.type!=="chrome"?(sn.log("Browser is Edge < 45 - removing Turns config"),this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}):sn.log("default this.pc_config configuration"),this.pc_constraints={optional:[]},ot.wL.type==="edge"?sn.debug("not data channel capable"):ot.wL.type==="safari"?ot.wL.version>=11?this.dataChannelCapable=!0:sn.debug("not data channel capable"):this.dataChannelCapable=!0,ot.wL.type==="chrome"&&ot.wL.version>=68||ot.wL.type==="firefox"&&ot.wL.version>=64||ot.wL.type==="safari"&&ot.wL.version>=12?(sn.debug("RTCRtpSender#setParameters is available"),this.rtpSenderSetParamatersCapable=!0):(sn.debug("RTCRtpSender#setParameters is NOT available"),this.rtpSenderSetParamatersCapable=!1),this.setClientTurnServer=function(lt){sn.info("setClientTurnServer :",lt);var Tt=JSON.stringify(this.pc_config);Tt=Tt.replace(/mp1.apizee.com/g,lt),this.pc_config=JSON.parse(Tt)},this.activateScreenSharing=function(lt){apiCC.activateScreenSharing(lt)},this.setGetUserMediaConfig=function(lt){if(sn.log("setGetUserMediaConfig :",lt),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0){var Tt=navigator.mediaDevices.getSupportedConstraints();sn.log("Supported Constraints :",Tt)}lt.video!==void 0&&(lt.video.height===void 0&&lt.video.width===void 0||lt.optional!==void 0&&(sn.warn("contraints with both optional/mandatory and specific or advanced constraints usage : this may failed depending of browsers"),sn.log("setGetUserMediaConfig : contraints modification to avoid both optional/mandatory and specific or advanced constraints usage"),lt.optional.sourceId!==void 0&&(sn.log("sourceId contraints modification to deviceId"),lt.video.deviceId===void 0&&(lt.video.deviceId={}),lt.video.deviceId.ideal=lt.optional.sourceId),delete lt.optional)),sn.log("this.gum_config :",this.gum_config),this.gum_config=lt},this.getUserMedia=function(){try{this.gum_config=apiCC.setAudioSourceIdInConstraint(this.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,this.gum_config),this.lastUsedUserMediaConstraint=this.gum_config,rt.Xh==="IE"&&rt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(lt){sn.error("getUserMedia() failed. Is this a WebRTC capable browser?"),sn.log("getUserMedia failed with exception: "+lt.message)}},this.onUserMediaSuccess=function(lt){sn.info("onUserMediaSuccess : User has granted access to local media."),this.accessToLocalMedia=!0;var Tt=!1,It="Unknown",Dt=!1,Et="Unknown";this.localStream=lt,lt.getAudioTracks().length>0&&(Tt=!0,lt.getAudioTracks()[0].label&&(It=lt.getAudioTracks()[0].label),sn.log("Using audio device: "+It)),lt.getVideoTracks().length>0&&(Dt=!0,lt.getVideoTracks()[0].label&&(Et=lt.getVideoTracks()[0].label),sn.log("Using video device: "+Et)),this.myWebRTC_Event.createUserMediaSuccessEvent(!1,Tt,It,Dt,Et,"media",null,lt,null,!1)},this.onUserMediaError=function(lt){sn.info("onUserMediaError : Failed to get access to local media. Error : ",lt),sn.error(lt),this.accessToLocalMedia=!1,rt.$6!=="electron"&&rt.Xh==="Chrome"&&rt.PR>47&&(sn.log("browser_version > 47"),window.location.protocol!=="https:"&&sn.error("HTTPS is now mandatory to use getUserMedia()")),this.myWebRTC_Event.createUserMediaErrorEvent(!1,"media",lt,null,null,null,this.gum_config),lt=null,apiCC.session.tryAudioCallAfterUserMediaError===!0?(sn.log("this.lastUsedUserMediaConstraint :",this.lastUsedUserMediaConstraint),sn.log("this.lastUsedUserMediaConstraint.video :",this.lastUsedUserMediaConstraint.video),this.lastUsedUserMediaConstraint.video!==!1?(sn.log("this.lastUsedUserMediaConstraint.audio :",this.lastUsedUserMediaConstraint.audio),sn.log("UserMediaError, Trying to getUserMedia with audioOnly"),this.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):sn.log("onUserMediaError without video")):sn.log("try AudioCall after UserMediaError is not activated")},this.evalCallProfileWithSdp=function(lt,Tt,It){return this.evalCallProfileWithSdpGuideline(this.mySDPManager.createGuideline(lt),lt,Tt,It)},this.evalCallProfileWithSdpGuideline=function(lt,Tt,It,Dt){var Et={};return lt.hasOwnProperty("audio")?(Et.audio=!0,Et.audioActive=It==="local"&&Dt==="send"?lt.audio.direction==="sendrecv"||lt.audio.direction==="sendonly":It==="local"&&Dt==="receive"||It==="remote"&&Dt==="send"?lt.audio.direction==="sendrecv"||lt.audio.direction==="recvonly":It==="remote"&&Dt==="receive"&&(lt.audio.direction==="sendrecv"||lt.audio.direction==="sendonly")):(Et.audio=!1,Et.audioActive=!1),lt.hasOwnProperty("video")?(Et.video=!0,Et.videoActive=It==="local"&&Dt==="send"?lt.video.direction==="sendrecv"||lt.video.direction==="sendonly":It==="local"&&Dt==="receive"||It==="remote"&&Dt==="send"?lt.video.direction==="sendrecv"||lt.video.direction==="recvonly":It==="remote"&&Dt==="receive"&&(lt.video.direction==="sendrecv"||lt.video.direction==="sendonly")):(Et.video=!1,Et.videoActive=!1),Et},this.checkDestCallTypeWithSDP=function(lt,Tt){sn.debug("checkDestCallTypeWithSDP");var It=this.mySDPManager.createGuideline(lt),Dt=!1,Et=!1;!It.audio||It.audio.direction!=="sendrecv"&&It.audio.direction!=="sendonly"||(Dt=!0),!It.video||It.video.direction!=="sendrecv"&&It.video.direction!=="sendonly"||(Et=!0),Tt.destCallType=Dt===!0?Et===!0?"media":"audio":Et===!0?"videoOnly":"inactive",sn.debug("call.destCallType: "+Tt.destCallType),Tt.callee!==!0||It.audio&&It.audio.direction!=="sendonly"||It.video&&It.video.direction!=="sendonly"||(Tt.userMediaAccessRequired=!1,Tt.mediaTypeForOutgoingCall="NONE",sn.debug("access to user media not required"))},this.evaluateVideoCap=function(lt){delete lt.videoCap,lt.belongsToRoom()?lt.settingUpType!=="publish"&&lt.settingUpType!=="shareScreen"||lt.localCallProfile&&lt.localCallProfile.video&&lt.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(lt):(this.rtpSenderSetParamatersCapable||!lt.callee)&&lt.localCallProfile&&lt.localCallProfile.video&&lt.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(lt)},this.processInvite=function(lt){sn.info("processInvite() - invite received from :"+lt.callerId);var Tt,It=0,Dt=null,Et=null,$t=null,xt=null,Vt=!1,Zt=null,an=null,qt=null,tn={};if(lt.data!==void 0&&lt.data.type==="publish"&&lt.data.mesh!==void 0){if(sn.info("received invite publish mesh; mesh: "+JSON.stringify(lt.data.mesh)),(Dt=this.findCallWithCallIdAndInstanceId(lt.data.mesh.callerCallId,lt.data.instanceId))==null)return void sn.error("cannot find call; callId: "+lt.data.mesh.callerCallId);Dt.userMediaAccessRequired=!1,Dt.data.mesh=lt.data.mesh,Dt.setupTimeoutId&&(clearTimeout(Dt.setupTimeoutId),delete Dt.setupTimeoutId),Vt=!0}else{if(lt.data!==void 0&&lt.data.type==="subscribe"&&lt.data.mesh!==void 0){if(sn.debug("received invite subscribe mesh; mesh: ",lt.data.mesh),(Et=this.findUserMediaById(lt.data.mesh.calleeCallId))!==null)if(this.MCUClient.distantCalls.push({early:!0,roomId:lt.roomId,clientId:lt.data.mesh.callerId,callId:lt.data.mesh.callerCallId,callMode:"mesh",callDirection:"recvonly",callFeed:{clientId:lt.data.mesh.calleeId,callId:lt.data.mesh.calleeCallId}}),setTimeout((function(pn,In,Pn){sn.debug("early distant call descriptor timeout");for(var _n=this.MCUClient.distantCalls.length;--_n>=0;)if(this.MCUClient.distantCalls[_n].early&&this.MCUClient.distantCalls[_n].roomId===pn&&this.MCUClient.distantCalls[_n].clientId===In&&this.MCUClient.distantCalls[_n].callId===Pn){sn.debug("remove early distant call descriptor: timeout"),this.MCUClient.distantCalls.splice(_n,1);break}}).bind(this,lt.roomId,lt.data.callerId,lt.data.callerCallId),3e4),Et.callType==="screenSharing"||Et.callType==="screenSharingWithAudio")tn.type="publish",tn.mesh=lt.data.mesh,tn.instanceId=lt.data.instanceId,this.MCUClient.publishScreen(lt.roomId,tn,null,Et.captureSourceType);else{var gn=(0,ot.ws)({},Et.callConfiguration);lt.data.mediaType==="AUDIOONLY"?gn.audioOnly=!0:lt.data.mediaType==="VIDEOONLY"&&(gn.videoOnly=!0),($t=apiCC.getUserMediaStream(gn.userMediaStreamId))&&($t.audioMuted&&$t.videoMuted?gn.muted="VIDEO":$t.audioMuted?gn.muted="AUDIOONLY":$t.videoMuted?gn.muted="VIDEOONLY":delete gn.muted),delete gn.distributedBroadcastEnabled,delete gn.simulcast,tn.type="publish",tn.mesh=lt.data.mesh,tn.instanceId=lt.data.instanceId,this.MCUClient.publish(lt.roomId,null,null,gn,tn,null)}else sn.debug("media not found: sending bye : Call_not_found"),new gt.S(apiCC.session.channel.socket).sendBye(lt.callId,lt.calleeId,lt.roomId,lt.callerId,"Call_not_found",lt.data);return}if(lt.data!==void 0&&lt.data.type==="publish"&&lt.data.mode==="passive"){if((Dt=this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.callerId,lt.data.instanceId))==null)return void sn.debug("cannot find call; callId: "+lt.callId+", callerId: "+lt.callerId+", instanceId: "+lt.data.instanceId);Dt.userMediaAccessRequired=!1,Dt.setupTimeoutId&&(clearTimeout(Dt.setupTimeoutId),delete Dt.setupTimeoutId),Vt=!0}else(Dt=new vn(this)).callId=lt.callId,Dt.instanceId=lt.data.instanceId,Dt.callerId=lt.callerId,Dt.calleeId=this.clientId,Dt.callee=!0,Dt.remoteId=lt.callerId}if(Dt.dest_roomId=lt.roomId,Dt.data!==void 0&&Vt===!0)for(qt in lt.data)lt.data.hasOwnProperty(qt)&&(Dt.data[qt]=lt.data[qt]);else Dt.data=lt.data;if(Dt.data.instanceId=Dt.instanceId,lt.data!==void 0&&lt.data.pubSub==="sipConnector"&&(Dt.trickleIce=!1,Dt.remoteType="sip"),Dt.checkDTLSCompliancy(),rt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"&&(Zt=apiCC.session.getConnectedUserInfo(lt.callerId,"userData"),sn.log("destUserInfo :",Zt),Zt!=="User_Not_Found"&&Zt!==void 0&&(an=JSON.parse(Zt)).browser==="Chrome"&&an.osName==="Android"&&(sn.log("Browser is Edge and caller is Chrome on Android, setting VP8 as prefered codec for the call"),Dt.preferVP8Codec=!0)),lt.data!==void 0&&lt.data.type==="publish"&&lt.data.mode==="passive"&&lt.stream!==void 0&&lt.stream.id!==void 0&&(Dt.streamId=lt.stream.id,sn.log("call.streamId: "+Dt.streamId)),It=this.callsTable.length,sn.log("processInvite() - Actual call Number is :"+It),lt.callType==="screenSharing"||lt.callType==="screenSharingWithAudio")Dt.screenSharing=!0,Dt.callType=lt.callType;else if(lt.callType!=="data"){if(this.allowMultipleCalls===!1){for(sn.log("processInvite() - Refusing double call checking ..."),Tt=0;Tt<It;Tt+=1)if(this.callsTable[Tt].callType!=="screenSharing"&&this.callsTable[Tt].callType!=="screenSharingWithAudio"&&this.callsTable[Tt].callType!=="data")return sn.log("processInvite() - Refusing double call"),Vt===!1?this.callsTable.push(Dt):sn.log("callAlreadyExist in table"),this.myWebRTC_Event.createCallAttemptEvent(this.clientId,lt.callerId,lt.callerNickname,Dt.callId),void this.refuseCall(Dt.callId,"User_Busy");sn.log("NOT Refusing double call")}}Vt===!1?(It=this.callsTable.push(Dt),sn.log("processInvite() - New call Number is :"+It)):(sn.log("callAlreadyExist in table"),sn.log("processInvite() - call Number is :"+It)),this.checkDestCallTypeWithSDP(lt.sdpoffer.sdp,Dt);var rn=this.mySDPManager.createGuideline(lt.sdpoffer.sdp);if(Dt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(rn,lt.sdpoffer.sdp,"remote","send")),Dt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(rn,lt.sdpoffer.sdp,"remote","receive")),this.rtpSenderSetParamatersCapable||(this.evaluateVideoCap(Dt),Dt.videoCap&&(rn.video.bandwidth=Dt.videoCap,lt.sdpoffer.sdp=rn.generate())),Dt.receivedSdpOfferMessage=lt.sdpoffer,(0,ot.ki)(lt,"stream","object")&&(lt.stream.audioMuted===!0&&(Dt.isRemoteAudioMuted=!0),lt.stream.videoMuted===!0&&(Dt.isRemoteVideoMuted=!0)),lt.callType==="data"){if(sn.log("Receiving DATA call"),Dt.callType="data",Dt.dataCall=!0,rt.Xh==="Edge"&&rt.PR<79&&apiRTC.browserDetails.type!=="chrome")return sn.warn("Cannot create DataChannel as it is not supported on Edge"),void this.refuseCall(Dt.callId,"DataChannel_Not_Supported");this.userAcceptOnIncomingDataCall||Dt.onUserMediaSuccessTestUni(),this.myWebRTC_Event.createIncomingCallEvent(this.clientId,lt.callerId,lt.callerNickname,Dt.callId,!1,It,!1,lt.callType,!1,Dt.remoteType,Dt.destCallType)}else Dt.userMediaAccessRequired===!1||this.unidirectionelCallOnly||Dt.screenSharing===!0?(sn.log("call.userMediaAccessRequired :",Dt.userMediaAccessRequired),sn.log("this.unidirectionelCallOnly :",this.unidirectionelCallOnly),sn.log("call.screenSharing :",Dt.screenSharing),Dt.screenSharing===!0?this.userAcceptOnIncomingScreenSharingCall===!1?Dt.onUserMediaSuccessTestUni():sn.debug("userAcceptOnIncomingScreenSharingCall is activated : need user accept"):Vt===!0?(sn.log("processInvite() - callAlreadyExist"),Dt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?sn.log("processInvite() - Waiting for call accept or refuse from user - 1"):(sn.log("processInvite() - userAcceptOnIncomingCall is not activated"),Dt.onUserMediaSuccessTestUni()),lt.data!==void 0&&lt.data.subscribeOrder===!0||Vt!==!1||this.myWebRTC_Event.createIncomingCallEvent(this.clientId,lt.callerId,lt.callerNickname,Dt.callId,!1,It,!1,lt.callType,!1,Dt.remoteType,Dt.destCallType)):(apiCC.userMediaStreamTable.length>0&&(xt=apiCC.userMediaStreamTable[0].userMediaStreamId),this.accessToLocalMedia!==!0&&!xt||this.autoAnswer!==!0?(Dt.audioOnly===!0&&apiCC.mediaDeviceMgr.audioDevicePresent===!1?(sn.log("processInvite() - audio and video media are not transmitted"),Dt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?sn.log("Stand-by :: wait for getUserMediaOnCall && establishCall"):(sn.debug("processInvite() - call.getUserMediaOnCall()"),sn.log("processInvite() - this.autoAnswer :"+this.autoAnswer),Dt.getUserMediaOnCall()),Vt===!1&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,lt.callerId,lt.callerNickname,Dt.callId,!1,It,Dt.audioOnly,lt.callType,!1,Dt.remoteType,Dt.destCallType)):(sn.log("processInvite() :: User has already granted access to local media and AutoAnswer activated : establishing call"),this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?sn.log("processInvite() - Waiting for call accept or refuse from user - 2"):xt?(sn.log("using First available stream on apiRTC"),($t=apiCC.getUserMediaStream(xt)).addCallInfo(Dt.callId),Dt.callConfiguration!==void 0&&Dt.callConfiguration!==null||(Dt.callConfiguration={}),Dt.callConfiguration.userMediaStreamId=$t.userMediaStreamId,Dt.onUserMediaSuccessOnCall($t.stream)):Dt.establishCall(),Vt===!1&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,lt.callerId,lt.callerNickname,Dt.callId,!0,It,Dt.audioOnly,lt.callType,!1,Dt.remoteType,Dt.destCallType)))},this.setRemoteDescriptionProcess=function(lt,Tt){this.preferSendingH264Codec&&(sn.log("Modification of SDP to set H264 as prefered sending codec"),Tt.sdp=this.mySDPManager.maybePreferCodec(Tt.sdp,"video","H264")),rt.Xh==="Chrome"&&rt.PR<55||rt.Xh==="Firefox"&&rt.PR<50||rt.Xh==="IE"?lt.pc!==null?lt.pc.setRemoteDescription(Tt,lt.callback(lt,"onSetRemoteDescriptionSuccess"),lt.callback(lt,"onSetRemoteDescriptionFailure")):sn.debug("setRemoteDescriptionProcess - pc is null"):(sn.log("before setRemoteDescription - Promise version"),lt.pc!==null?lt.pc.setRemoteDescription(Tt).then(lt.callback(lt,"onSetRemoteDescriptionSuccess")).catch(lt.callback(lt,"onSetRemoteDescriptionFailure")):sn.debug("setRemoteDescriptionProcess - pc is null"))},this.process200OK=function(lt){var Tt,It=null,Dt=null;if(lt.data!==void 0&&lt.data.instanceId!==void 0?(sn.info("200OK received from callId :"+lt.calleeId+", intanceId is :"+lt.data.instanceId),It=this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.calleeId,lt.data.instanceId)):(sn.info("200OK received from callId :"+lt.calleeId),It=this.findCallWithCallIdAndRemoteId(lt.callId,lt.calleeId)),It===null)return sn.warn("200OK received but callId and instanceId are not matching, no process"),void this.myWebRTC_Event.createErrorEvent("200OK received but callId is not matching, no process","NOT_MATCHING_CALLID_ON_200OK");It.calleeId=lt.calleeId,lt.sdpanswer&&lt.sdpanswer.type!=="no-answer"?It.message200OKReceived===!1?(sn.debug("first 200OK for the call"),It.message200OKReceived=!0,It.data.type!=="subscribe"&&this.checkDestCallTypeWithSDP(lt.sdpanswer.sdp,It),Tt=this.mySDPManager.createGuideline(lt.sdpanswer.sdp),It.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Tt,lt.sdpanswer.sdp,"remote","send")),It.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Tt,lt.sdpanswer.sdp,"remote","receive")),this.evaluateVideoCap(It),!this.rtpSenderSetParamatersCapable&&It.videoCap&&(Tt.video.bandwidth=It.videoCap,lt.sdpanswer.sdp=Tt.generate()),It.receivedSdpOfferMessage=lt.sdpanswer,sn.log("process200OK : before setRemoteDescription"),Dt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(lt.sdpanswer),this.videoRemoteBandwidth&&(sn.log("Modification of SDP to set remote video bandwidth"),Dt.sdp=this.mySDPManager.setVideoBandwidth(Dt.sdp,this.videoRemoteBandwidth)),this.setRemoteDescriptionProcess(It,Dt),lt.data!==null&&lt.data!==void 0&&(It.data!==null&&It.data!==void 0?It.data=(0,ot.S6)(It.data,lt.data):It.data=lt.data)):sn.debug("200OK has already been received for this call, leaving process200OK"):Gn.createCallEstablishedEvent(It.calleeId,It.callType,It.callId,It.destCallType)},this.cleanStoredCallCandidate=function(lt,Tt){sn.debug("cleanStoredCallCandidate from callId :"+lt+", instanceId is :"+Tt),this.clientIncomingCandidatesQueue[lt+"-"+Tt]!==void 0&&this.clientIncomingCandidatesQueue[lt+"-"+Tt].length!==0&&(this.clientIncomingCandidatesQueue[lt+"-"+Tt].splice(0,this.clientIncomingCandidatesQueue[lt+"-"+Tt].length),delete this.clientIncomingCandidatesQueue[lt+"-"+Tt])},this.processCandidate=function(lt){var Tt=null,It=lt.data&&lt.data.instanceId?lt.data.instanceId:null;sn.debug("Candidate received from callId :"+lt.callId+", instanceId is :"+It),Tt=lt.callerId===this.clientId?It?this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.calleeId,It):this.findCallWithCallIdAndRemoteId(lt.callId,lt.calleeId):It?this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.callerId,It):this.findCallWithCallIdAndRemoteId(lt.callId,lt.callerId),sn.trace("msg.label :"+lt.label),sn.log("msg.candidate :"+lt.candidate),Tt!==null?Tt.started&&Tt.remoteDescriptionSetted?Tt.processCandidateMsg(lt):(sn.log("Call not started or remoteDescription is not yet setted"),Tt.incomingcandidatesQueue.push(lt)):It&&(sn.debug("Call not found, Candidate message is not handled, storing candidate message in client"),this.clientIncomingCandidatesQueue[lt.callId+"-"+It]!==null&&this.clientIncomingCandidatesQueue[lt.callId+"-"+It]!==void 0||(this.clientIncomingCandidatesQueue[lt.callId+"-"+It]=[],sn.debug("First candidate for this call, starting a timeout before candidate storage cleaning"),setTimeout(this.cleanStoredCallCandidate.bind(this),this.cleanStoredCallCandidateTimer,lt.callId,It)),this.clientIncomingCandidatesQueue[lt.callId+"-"+It].push(lt))},this.processUpdate=function(lt){sn.info("Update message on:"+lt.roomId);var Tt,It=null;if((It=lt.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.calleeId,lt.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.callerId,lt.data.instanceId))!==null)if(lt.hasOwnProperty("sdpoffer")&&lt.sdpoffer.hasOwnProperty("sdp"))It.setRemoteCallProfile(this.evalCallProfileWithSdp(lt.sdpoffer.sdp,"remote","receive"),!0),It.updateOngoingTimeoutId=setTimeout(function(){delete It.updateOngoingTimeoutId},Zn),this.checkDestCallTypeWithSDP(lt.sdpoffer.sdp,It),sn.log("processUpdate : before setRemoteDescription"),Tt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(lt.sdpoffer),this.setRemoteDescriptionProcess(It,Tt),It.doUpdateAnswer();else if((0,ot.ki)(lt.data,"mesh","object")&&(lt.data.mesh.calleeCompositeUserId?lt.data.mesh.calleeCompositeUserId===this.compositeClientId:lt.data.mesh.calleeId===this.clientId)){sn.debug("mesh update from subscriber");var Dt={};lt.data.mediaType==="AUDIOONLY"?Dt.audioOnly=!0:lt.data.mediaType==="VIDEOONLY"&&(Dt.videoOnly=!0),this.updateCallConfigurationOnCall(lt.callId,Dt).then(function(){sn.debug("updateCallConfigurationOnCall OK")}).catch(function(Et){sn.error("updateCallConfigurationOnCall failed",Et)})}else sn.error("update without SDP offer");else this.myWebRTC_Event.createErrorEvent("Cannot find call to process Update","CALL_NOT_FOUND_ON_UPDATE")},this.process200Update=function(lt){sn.info("200 Update received from :"+lt.calleeId);var Tt,It=null,Dt=null;if((It=lt.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.calleeId,lt.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(lt.callId,lt.callerId,lt.data.instanceId))===null)return sn.info("Call not found on 200 Update"),void this.myWebRTC_Event.createErrorEvent("Cannot find call to process 200 Update","CALL_NOT_FOUND_ON_200UPDATE");It.calleeId=lt.calleeId,Tt=this.mySDPManager.createGuideline(lt.sdpanswer.sdp),It.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Tt,lt.sdpanswer.sdp,"remote","send"),!0),It.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Tt,lt.sdpanswer.sdp,"remote","receive"),!0),this.evaluateVideoCap(It),!this.rtpSenderSetParamatersCapable&&It.videoCap&&(Tt.video.bandwidth=It.videoCap,lt.sdpanswer.sdp=Tt.generate()),sn.log("process200Update : before setRemoteDescription"),Dt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(lt.sdpanswer),this.videoBandwidth&&(sn.log("Modification of SDP to set remote video bandwidth"),Dt.sdp=this.mySDPManager.setVideoBandwidth(Dt.sdp,this.videoBandwidth)),this.setRemoteDescriptionProcess(It,Dt),sn.log("msg.sdpanswer.sdp :",lt.sdpanswer.sdp),It.addingUserMedia===!0&&(It.addingUserMedia=!1),It.updateUserMedia===!0&&(It.updateUserMedia=!1),It.updateCause&&(It.updateCause=null)},this.processSlowLink=function(lt,Tt){for(var It=this.callsTable.length,Dt=null;--It>=0;)if(this.callsTable[It].callId===lt){Dt=this.callsTable[It];break}if(Dt!==null){var Et=null;Tt&&Tt.advice&&(Et=Tt.advice),this.myWebRTC_Event.createSlowLinkEvent(Dt.callId,Et)}},this.processAudioAmplitude=function(lt,Tt){Gn.createAudioAmplitudeEvent(lt.descriptor.audioAmplitude,Tt,lt.callId,lt.descriptor.streamID)},this.processDistantIceError=function(lt){lt.descriptor.iceState==="disconnected"?this.myWebRTC_Event.createErrorEvent("distant iceDisconnection detected","DISTANT_ICE_CONNECTION_STATE_DISCONNECTED",null,lt.roomId,null,lt.descriptor):lt.descriptor.iceState==="failed"&&Gn.createErrorEvent("distant iceConnection failed detected","DISTANT_ICE_CONNECTION_STATE_FAILED",null,lt.roomId,null,lt.descriptor)},this.processStreamTrackMuteChanged=function(lt,Tt,It){for(var Dt=this.callsTable.length,Et=null,$t=[],xt={},Vt={};--Dt>=0;)if(this.callsTable[Dt].callId===lt){Et=this.callsTable[Dt];break}Et!==null&&(Tt==="audio"?(Et.isRemoteAudioMuted=It,$t.push("audioIsMuted"),xt.available=Et.remoteCallProfile.audio,xt.active=Et.remoteCallProfile.audioActive,xt.muted=Et.isRemoteAudioMuted,xt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent):Tt==="video"&&(Et.isRemoteVideoMuted=It,$t.push("videoIsMuted"),xt.available=Et.remoteCallProfile.audio,xt.active=Et.remoteCallProfile.audioActive,xt.muted=Et.isRemoteAudioMuted,xt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent),$t.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent($t,xt,Vt,Et.destCallType,Et.callId,"userAction"))},this.processStreamTrackStatusChanged=function(lt,Tt,It){for(var Dt=this.callsTable.length,Et=null,$t=[],xt={},Vt={};--Dt>=0;)if(this.callsTable[Dt].callId===lt){Et=this.callsTable[Dt];break}Et!==null&&(Tt==="audio"?(Et.isRemoteAudioSilent=It,$t.push("audioIsSilent"),xt.available=Et.remoteCallProfile.audio,xt.active=Et.remoteCallProfile.audioActive,xt.muted=Et.isRemoteAudioMuted,xt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent):Tt==="video"&&(Et.isRemoteVideoSilent=It,$t.push("videoIsSilent"),xt.available=Et.remoteCallProfile.audio,xt.active=Et.remoteCallProfile.audioActive,xt.muted=Et.isRemoteAudioMuted,xt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent),$t.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent($t,xt,Vt,Et.destCallType,Et.callId,"userAction"))},this.processUpdateStream=function(lt,Tt,It){for(var Dt=this.callsTable.length,Et=null;--Dt>=0;)if((0,ot.ki)(this.callsTable[Dt].data,"mesh","object")&&this.callsTable[Dt].data.mesh.calleeCallId===lt||this.callsTable[Dt].callId===lt){Et=this.callsTable[Dt];break}if(!Et)return!1;var $t=!1;return Tt==="audio"?It==="inactive"?Et.callType==="media"&&(Et.callType="videoOnly",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection="inactive",Et.establishCall(),$t=!0):Et.callType==="videoOnly"&&(Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection=null,Et.establishCall(),$t=!0):Tt==="video"&&(It==="inactive"?Et.callType==="media"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="audio",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection="inactive",Et.establishCall(),$t=!0):Et.callType==="audio"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection=null,Et.establishCall(),$t=!0)),$t},this.processUpdateVideoQuality=function(lt,Tt){sn.debug("processUpdateVideoQuality",lt,Tt);var It=this.findCallWithCallId(lt);if(It)if(It.sessionMCU&&It.sessionMCU.roomMode!=="mesh"){var Dt=apiCC.getUserMediaStream(It.callConfiguration.userMediaStreamId);if(Dt){var Et=Dt.getVideoTrack();if(Et){var $t={};Tt.width&&Tt.height&&($t.width=Tt.width,$t.height=Tt.height),Tt.frameRate&&($t.frameRate=Tt.frameRate),Et.applyConstraints($t).then(function(xt){sn.debug("processUpdateVideoQuality - applyConstraints; OK")}).catch(function(xt){sn.error("processUpdateVideoQuality - applyConstraints",xt)})}else sn.warn("processUpdateVideoQuality - no such video track; callId:",lt)}else sn.warn("processUpdateVideoQuality - no such userMediaStream; callId:",lt)}else sn.warn("processUpdateVideoQuality - wrong roomMode; callId:",lt);else sn.warn("processUpdateVideoQuality - no such call; callId:",lt)},this.removeAllCallsFromRoom=function(lt,Tt){sn.info("removeAllCallsFromRoom :"+lt+" with reason :"+Tt);var It,Dt,Et=this.callsTable.length,$t=[],xt={};for(It=0;It<Et;It+=1)this.callsTable[It].dest_roomId==lt&&(sn.log("Call is attached to the room, removing ..."),xt={callId:this.callsTable[It].callId},$t.push(xt));for(Dt=0;Dt<$t.length;Dt+=1)this.removeCallFromTableWithCallIdAndSendBye($t[Dt].callId,Tt);$t.splice(0,$t.length)},this.onHangup=function(lt,Tt){var It=null,Dt=null,Et=null,$t=null,xt=[],Vt=!1,Zt=!1,an=null,qt=null;if(lt?typeof lt!="string"&&(lt=String(lt)):lt=null,Tt?typeof Tt!="string"&&(Tt=null):Tt=null,sn.info("Hanging up."),lt===null)sn.log("Leaving all calls that are established"),this.MCUClient&&this.MCUClient.meshOnHangup(),this.removeAllCalls(),this.callControlTable.splice(0,this.callControlTable.length);else if((Dt=this.findUserMediaById(lt))!==null){for(this.MCUClient.pubConnector!=="janusConnector"||Tt!=="RTC_Setup_Timeout"&&Tt!=="disconnected"||(Et=Dt.getUserMediaStream())&&Et.stream&&(Vt=!0,an=Et.stream,Dt.streamStolen=!0,Dt.sessionMCU.roomMode==="mesh"?Zt=!0:(qt=Et.getCallInfo(Dt.userMediaId))&&(qt.flavor="call")),$t=this.callsTable.length;--$t>=0;)(0,ot.Ym)(this.callsTable[$t].data,"object")&&(0,ot.Ym)(this.callsTable[$t].data.mesh,"object")&&this.callsTable[$t].data.mesh.calleeCallId===lt&&xt.push(this.callsTable[$t].callId);for($t=xt.length;--$t>=0;)this.removeCallFromTableWithCallIdAndSendBye(xt[$t],Tt);this.MCUClient.meshOnHangup(lt,null,{restart:Vt})}else(It=this.findCallWithCallId(lt))!==null&&(this.MCUClient.pubConnector!=="janusConnector"||Tt!=="RTC_Setup_Timeout"&&Tt!=="disconnected"||(It.settingUpType==="publish"||It.settingUpType==="shareScreen"?It.data&&It.data.mesh||(Vt=!0,It.streamStolen=!0):It.settingUpType==="subscribe"&&(Vt=!0)),sn.log("Leaving call with callId :"+lt),this.removeCallFromTableWithCallIdAndSendBye(lt,Tt));Vt===!0?It!==null?this.restartCall(It):Dt&&(Zt===!0?this.restartCall(Dt,{userMedia:!0,mesh:!0}):this.restartCall(Dt,{userMedia:!0,stream:an})):(It&&It.callControl&&this.destroyCallControl(It.callControl),this.stopMaxCallRetriesTimer(lt),this.stopRestartCallTimer(lt),delete this.callsRetriesTable[lt])},this.stopStream=function(lt){sn.info("stopStream in client");var Tt,It=null;if(rt.Xh==="Chrome"&&rt.PR<45||rt.Xh==="Firefox"&&rt.PR<44||rt.Xh==="Opera"&&rt.PR<34||rt.Xh==="Chromium"&&rt.PR<44||rt.Xh==="Chrome WebView"&&rt.PR<45)lt.onended=null,lt.stop();else{for(lt.onended=null,sn.log("MediaStream.stop is now deprecated, using MediaStreamTrack.stop"),It=lt.getTracks(),Tt=0;Tt<It.length;Tt+=1)It[Tt].onended=null,It[Tt].stop();sn.log("... tracks stopped")}lt=null},this.clearCallTimeouts=function(lt){var Tt;for(sn.debug("clearCallTimeouts"),lt.send200OKTrickleIceFalseTimeOutId!==0&&(sn.debug("clearing send200OKTrickleIceFalseTimeOutId"),clearTimeout(lt.send200OKTrickleIceFalseTimeOutId),lt.send200OKTrickleIceFalseTimeOutId=0),lt.sendInviteTrickleIceFalseTimeOutId!==0&&(sn.debug("clearing sendInviteTrickleIceFalseTimeOutId"),clearTimeout(lt.sendInviteTrickleIceFalseTimeOutId),lt.sendInviteTrickleIceFalseTimeOutId=0),lt.disconnectionTimeoutId!==0&&(sn.debug("clearing disconnectionTimeout"),clearTimeout(lt.disconnectionTimeoutId),lt.disconnectionTimeoutId=0),lt.disconnectionWarningInterval!==0&&(sn.debug("clearing disconnectionWarningInterval"),clearInterval(lt.disconnectionWarningInterval),lt.disconnectionWarningInterval=0),Tt=0;Tt<lt.checkCandidateTypesTimeoutTable.length;Tt+=1)sn.debug("clearing checkCandidateTypesTimeout :",lt.checkCandidateTypesTimeoutTable[Tt]),clearTimeout(lt.checkCandidateTypesTimeoutTable[Tt]);lt.checkCandidateTypesTimeoutTable.splice(0,lt.checkCandidateTypesTimeoutTable.length)},this.removeAllCalls=function(){sn.info("removeAllCalls");var lt,Tt=this.callsTable.length,It=0,Dt=null,Et=0,$t=null;for(sn.log("callsNumber = "+Tt),lt=0;lt<Tt;lt+=1){if(It=this.callsTable[lt-Et].callee?this.callsTable[lt-Et].callerId:this.callsTable[lt-Et].calleeId,this.callsTable[lt-Et].callee===!0)Dt="Hangup_From_Callee",this.callsTable[lt-Et].myWebRTC_Stack.sendBye(this.callsTable[lt-Et].callId,this.clientId,this.callsTable[lt-Et].dest_roomId,It,Dt,this.callsTable[lt-Et].data);else{if(Dt="Hangup_From_Caller",this.callsTable[lt-Et].inviteSended!==!0){this.callsTable[lt-Et].callCancelled=!0,sn.warn("Leaving call iteration on removeAllCalls");continue}this.callsTable[lt-Et].myWebRTC_Stack.sendBye(this.callsTable[lt-Et].callId,this.clientId,this.callsTable[lt-Et].dest_roomId,It,Dt,this.callsTable[lt-Et].data)}(0,ot.ki)(this.callsTable[lt-Et].sessionMCU,"roomName","string")&&(0,ot.ki)(this.callsTable[lt-Et].data,"MCUType","string")&&(this.callsTable[lt-Et].data.MCUType==="MCU-Caller"||this.callsTable[lt-Et].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[lt-Et].sessionMCU.roomName,{noHangup:!0}),this.callsTable[lt-Et].callConfiguration&&this.callsTable[lt-Et].callConfiguration.userMediaStreamId&&($t=apiCC.getUserMediaStream(this.callsTable[lt-Et].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream($t.userMediaStreamId,this.callsTable[lt-Et].callId),this.callsTable[lt-Et].screenStream!==null&&(sn.log("stopping screenStream"),this.stopStream(this.callsTable[lt-Et].screenStream),Gn.createUserMediaStopEvent(this.callsTable[lt-Et].callId,"screen")),this.callsTable[lt-Et].pc!==null&&(sn.log("Closing PC"),this.qosEnable&&this.callsTable[lt-Et].qm!==void 0&&this.callsTable[lt-Et].qm!==null&&typeof this.callsTable[lt-Et].qm.saveStatsToDb=="function"&&(this.callsTable[lt-Et].qm.saveStatsToDb(!0),clearInterval(this.callsTable[lt-Et].statisticId)),this.callsTable[lt-Et].csmIntervalId&&clearInterval(this.callsTable[lt-Et].csmIntervalId),this.callsTable[lt-Et].pc.close(),this.callsTable[lt-Et].pc=null),this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[lt-Et].remoteId,!0,Dt,this.callsTable[lt-Et].callId,this.callsTable[lt-Et].callType),this.callsTable[lt-Et].data!==void 0&&this.callsTable[lt-Et].data!==null&&(this.callsTable[lt-Et].data.pubSub==="janusConnector"||this.callsTable[lt-Et].data.MCUType!=="MCU-Caller"&&this.callsTable[lt-Et].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[lt-Et].data.confId,this.callsTable[lt-Et].callerId,this.callsTable[lt-Et].calleeId,this.callsTable[lt-Et].callId)),this.clearCallTimeouts(this.callsTable[lt-Et]),this.callsTable[lt-Et].incomingcandidatesQueue.length!==0&&this.callsTable[lt-Et].incomingcandidatesQueue.splice(0,this.callsTable[lt-Et].incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[this.callsTable[lt-Et].callId+"-"+this.callsTable[lt-Et].instanceId]!==void 0&&this.clientIncomingCandidatesQueue[this.callsTable[lt-Et].callId+"-"+this.callsTable[lt-Et].instanceId].length!==0&&this.clientIncomingCandidatesQueue[this.callsTable[lt-Et].callId+"-"+this.callsTable[lt-Et].instanceId].splice(0,this.clientIncomingCandidatesQueue[this.callsTable[lt-Et].callId+"-"+this.callsTable[lt-Et].instanceId].length),sn.log("Removing call from table"),this.callsTable.splice(lt-Et,1),Et+=1}},this.onRemoteHangup=function(lt,Tt,It,Dt,Et,$t){var xt=this;sn.debug("onRemoteHangup");var Vt=null,Zt=null,an=null,qt=null,tn=!1,gn=!1,rn=!1,pn=null,In=null;if(sn.log("callId :"+lt),sn.log("confId :"+Et),this.MCUClient.pubConnector==="janusConnector")if(Dt==="RTC_Setup_Timeout"||Dt==="Broken_by_MCU"||Dt==="disconnected")if((Zt=$t==null?this.findCallWithCallId(lt):this.findCallWithCallIdAndInstanceId(lt,$t.instanceId))!=null){if(Zt.setupTimeoutId&&(clearTimeout(Zt.setupTimeoutId),delete Zt.setupTimeoutId),Zt.restarting===!0)return void sn.debug("call restarting");if(Zt.settingUpType==="publish"||Zt.settingUpType==="shareScreen"?Zt.data&&Zt.data.mesh||(tn=!0,Zt.streamStolen=!0):Zt.settingUpType==="subscribe"&&(tn=!0),Zt.sessionMCU!==null&&Zt.sessionMCU.modeChangeKind==="old")return void sn.debug("onRemoteHangup ignore")}else(an=this.findUserMediaById(lt))!==null?(an.close(),(qt=an.getUserMediaStream())&&qt.stream&&(an.sessionMCU!==null&&an.sessionMCU.modeChangeKind==="old"?(tn=!0,pn=qt.stream,an.streamStolen=!0,an.distantCalls.length>0&&(rn=!0),(In=qt.getCallInfo(an.userMediaId))&&(In.flavor="call")):an.sessionMCU!==null&&an.sessionMCU.roomMode==="mesh"?(tn=!0,gn=!0,pn=qt.stream,an.streamStolen=!0):(tn=!0,pn=qt.stream,an.streamStolen=!0,(In=qt.getCallInfo(an.userMediaId))&&(In.flavor="call")))):sn.debug("No call and no userMedia found");else(Zt=$t==null?this.findCallWithCallId(lt):this.findCallWithCallIdAndInstanceId(lt,$t.instanceId))?(Zt.setupTimeoutId&&(clearTimeout(Zt.setupTimeoutId),delete Zt.setupTimeoutId),Zt.settingUpType==="subscribe"&&Dt!=="Ejected"&&(tn=!0)):(an=this.findUserMediaById(lt))&&an.close();if(!rn)if(an!==null){var Pn=null,_n=[];for(Pn=this.callsTable.length;--Pn>=0;)(0,ot.ki)(this.callsTable[Pn].data,"mesh","object")&&this.callsTable[Pn].data.mesh.calleeCallId===lt&&this.callsTable[Pn].settingUpType!=="subscribe"&&_n.push(this.callsTable[Pn].callId);for(Pn=_n.length;--Pn>=0;)this.removeCallFromTableWithCallIdAndSendBye(_n[Pn],Dt);if(this.MCUClient.meshOnHangup(lt),an.sessionMCU.modeChangeKind==="old"){var Ln=this.MCUClient.getSessionMCU(null,{callback:function(Vn){return Vn.roomName===an.sessionMCU.roomName&&Vn.modeChangeKind==="new"}});Ln&&this.finalizeMeshToJanusTransition(an.sessionMCU,Ln)}}else lt!==void 0?Vt=$t==null?this.removeCallFromTableWithCallIdandRemoteId(lt,Tt,Dt):this.removeCallFromTableWithCallIdandInstanceId(lt,$t.instanceId,Dt):Et!==void 0&&(Vt=this.removeCallFromTableWithConfIdandRemoteId(Et,Tt,Dt));sn.log("Reason : "+Dt),Zt&&tn!==!0?this.callsTable.length===0&&this.userMediaTable.length===0?(sn.log("No more established calls for client"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!0,Dt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!0,Dt,lt,Vt),this.getUserMediaOnGoing===!0&&Kt.deactivateReloadOnCancel!==!0&&(sn.log("Cancel from Remote"),typeof apiRTC_React>"u"&&location.reload(),this.getUserMediaOnGoing=!1)):(sn.log("Other calls are still established"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!1,Dt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!1,Dt,lt,Vt)):Zt&&Zt.settingUpType==="subscribe"&&(this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!1,"restarted"),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!1,"restarted",lt,Vt)),$t!=null&&(this.MCUClient.pubConnector==="janusConnector"||$t.MCUType!=="MCU-Caller"&&$t.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(Et,this.clientId,Tt,lt)),tn===!0?Zt!==null?this.restartCall(Zt):an&&(gn===!0?this.restartCall(an,{userMedia:!0,mesh:!0}):this.randomDelayOnRestart?(sn.debug("onRemoteHangup - randomDelayOnRestart"),setTimeout(function(){xt.restartCall(an,{userMedia:!0,stream:pn})},5e3*Math.random())):this.restartCall(an,{userMedia:!0,stream:pn})):(Zt&&Zt.callControl&&this.destroyCallControl(Zt.callControl),(Zt||an)&&(this.stopMaxCallRetriesTimer(lt),this.stopRestartCallTimer(lt),delete this.callsRetriesTable[lt]))},this.startMaxCallRetriesTimer=function(lt){var Tt=this;sn.debug("startMaxCallRetriesTimer for callIdWhenStartingTimer :",lt);var It=setTimeout(function(){sn.debug("[restartCall] MaxCallRetriesTimer reached for callIdWhenStartingTimer :",lt),Tt.callsRetriesTable[lt].allowedStatus=!1,delete Tt.callsRetriesTable[lt].maxCallsRetriesDurationTimeOutId},this.maxCallsRetriesDuration);this.callsRetriesTable[lt]={},this.callsRetriesTable[lt].maxCallsRetriesDurationTimeOutId=It},this.stopMaxCallRetriesTimer=function(lt){sn.debug("stopMaxCallRetriesTimer for callId :",lt),this.callsRetriesTable[lt]!==void 0&&this.callsRetriesTable[lt].maxCallsRetriesDurationTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[lt].maxCallsRetriesDurationTimeOutId),sn.debug("[restartCall] MaxCallRetriesTimer cleared for callId :",lt),delete this.callsRetriesTable[lt])},this.stopRestartCallTimer=function(lt){sn.debug("stopRestartCallTimer for callId :",lt),this.callsRetriesTable[lt]!==void 0&&this.callsRetriesTable[lt].restartCallTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[lt].restartCallTimeOutId),sn.error("[restartCall] RestartCallTimer cleared for callId :",lt),delete this.callsRetriesTable[lt].restartCallTimeOutId)},this.restartCall=function(lt){var Tt=this,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};sn.debug("[restartCall] restartCall for callId :",lt.callId);var Dt=-1;if(It.userMedia!==!0)if(lt.callControl&&lt.callControl.autoRestart)if((Dt=lt.callControl.autoRestart.counter)===0&&(lt.callControl.autoRestart.callIdWhenStartingTimer=lt.callId,this.startMaxCallRetriesTimer(lt.callId)),this.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&this.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer].allowedStatus===void 0){sn.debug("[restartCall] ... for callIdWhenStartingTimer :",lt.callControl.autoRestart.callIdWhenStartingTimer),sn.debug("AutoRestartCounter :",Dt),sn.debug("Calling restartCallProcess in :",this.restartCallDelay*Math.pow(2,Dt));var Et=setTimeout(function(){sn.debug("Timer reached for restartCall"),delete lt.callControl.autoRestart.pending,Tt.restartCallProcess(lt,It),Tt.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&Tt.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId!==void 0&&delete Tt.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId},this.restartCallDelay*Math.pow(2,Dt));lt.callControl.autoRestart.pending=!0,this.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId=Et}else sn.warn("CALL_ABORTED, retries not allowed (maxCallsRetriesDuration reached) for callIdWhenStartingTimer :",lt.callControl.autoRestart.callIdWhenStartingTimer),this.destroyCallControl(lt.callControl),Gn.createErrorEvent("call aborted after calls retries (maxCallsRetriesDuration reached)","CALL_ABORTED",lt.callId,lt.callControl.roomName),this.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&delete this.callsRetriesTable[lt.callControl.autoRestart.callIdWhenStartingTimer];else sn.debug("[restartCall] autoRestart options not defined");else this.restartCallProcess(lt,It)},this.restartCallProcess=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};sn.debug("restartCallProcess ");var It=!1,Dt=!1,Et=null;if(lt.restarting!==!0){if(lt.restarting=!0,Tt.userMedia===!0&&(It=!0),Tt.mesh===!0&&(Dt=!0),It===!0)if(Dt===!0)lt.callType==="screenSharing"||lt.callType==="screenSharingWithAudio"?(lt.restarting=!1,this.userMediaTable.push(lt),this.MCUClient.meshOnScreenMediaSuccess(lt)):(lt.restarting=!1,this.userMediaTable.push(lt),this.MCUClient.meshOnUserMediaSuccess(lt));else if(lt.callType==="screenSharing"||lt.callType==="screenSharingWithAudio"){delete lt.data.meshPublish,lt.data.type="publish";var $t=this.createCallControl({type:"shareScreen",callId:lt.userMediaId,roomName:lt.roomId,callConfiguration:lt.callConfiguration,data:lt.data});$t.captureSourceType=lt.captureSourceType,$t.autoRestart.counter=0,$t.autoRestart.stream=Tt.stream,this.shareScreen(lt.roomId,lt.data,lt.captureSourceType,lt.callConfiguration,{callControl:$t}),this.myWebRTC_Event.createCallRestartingEvent(lt.callType,lt.audioOnly,lt.userMediaId,lt.userMediaId,"publish",this.clientId,lt.roomId,lt.roomId,null)}else{delete lt.data.meshPublish;var xt=this.createCallControl({type:"publish",callId:lt.userMediaId,callType:lt.callType,roomName:lt.roomId,callConfiguration:lt.callConfiguration,data:lt.data});xt.audioOnly=lt.callType==="audio",xt.sessionId=lt.sessionId,xt.token=lt.token,xt.autoRestart.counter=0,xt.autoRestart.stream=Tt.stream,this.MCUClient.publish(lt.roomId,lt.sessionId,lt.token,lt.callConfiguration,lt.data,{callControl:xt}),this.myWebRTC_Event.createCallRestartingEvent(lt.callType,lt.callType==="audio",lt.userMediaId,lt.userMediaId,"publish",this.clientId,lt.roomId,lt.roomId,null)}else if(lt.settingUpType==="publish")(0,ot.Ym)(lt.callControl,"object")?(sn.debug("[restartCall] restarting call publish"),this.MCUClient.publish(lt.callControl.roomName,lt.callControl.sessionId,lt.callControl.token,lt.callControl.callConfiguration,lt.callControl.data,{callControl:lt.callControl}),this.myWebRTC_Event.createCallRestartingEvent(lt.callType,lt.audioOnly,lt.callId,lt.callId,"publish",this.clientId,lt.callControl.roomName,lt.callControl.roomName,null)):sn.warn("[restartCall] cannot auto restart; missing info");else if(lt.settingUpType==="shareScreen")(0,ot.Ym)(lt.callControl,"object")?(sn.debug("[restartCall] restarting call shareScreen"),this.shareScreen(lt.callControl.roomName,lt.callControl.data,lt.callControl.captureSourceType,lt.callControl.callConfiguration,{callControl:lt.callControl}),this.myWebRTC_Event.createCallRestartingEvent(lt.callType,lt.audioOnly,lt.callId,lt.callId,"publish",this.clientId,lt.callControl.roomName,lt.callControl.roomName,null)):sn.warn("[restartCall] cannot auto restart; missing info");else if(lt.settingUpType==="subscribe"&&(sn.debug("[restartCall] restarting call subscribe"),Et=lt.mcuRemoteStream.replay===!0?this.MCUClient.getStreamOfUserCall(lt.mcuRemoteStream.attributes.callerId,lt.mcuRemoteStream.attributes.callId,{replay:!0}):this.MCUClient.getStreamOfUserCall(lt.mcuRemoteStream.attributes.callerId,lt.mcuRemoteStream.attributes.callId),(0,ot.Ym)(lt.callControl,"object")&&Et)){sn.debug("[restartCall] stream exists, subscribing to it");var Vt=!!lt.callControl.autoRestart.force;delete lt.callControl.autoRestart.force;var Zt=lt.callControl.callId,an=this.MCUClient.subscribeToStreams([Et],lt.callControl.mediaType,lt.callControl.data,lt.callControl.callConfiguration,{noStreamCheck:!0,autoSub:!0,force:Vt});Zt&&an[0]&&this.myWebRTC_Event.createCallRestartingEvent(lt.callType,lt.audioOnly,Zt,an[0],"subscribe",this.clientId,lt.callControl.roomName,lt.callControl.roomName,Et.id)}}else sn.debug("[restartCall] call already restarting")},this.closingCallProcess=function(lt,Tt){sn.log("Session terminated.");var It=null;(0,ot.ki)(this.callsTable[lt].sessionMCU,"roomName","string")&&(0,ot.ki)(this.callsTable[lt].data,"MCUType","string")&&(this.callsTable[lt].data.MCUType==="MCU-Caller"||this.callsTable[lt].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[lt].sessionMCU.roomName),this.callsTable[lt].callConfiguration&&this.callsTable[lt].callConfiguration.userMediaStreamId&&this.callsTable[lt].streamStolen!==!0&&(It=apiCC.getUserMediaStream(this.callsTable[lt].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(It.userMediaStreamId,this.callsTable[lt].callId),this.callsTable[lt].screenStream!==null&&(sn.log("stopping screenStream"),this.stopStream(this.callsTable[lt].screenStream),Gn.createUserMediaStopEvent(this.callsTable[lt].callId,"screen")),this.callsTable[lt].pc!==null&&(sn.log("Closing PC"),this.qosEnable&&this.callsTable[lt].qm!==void 0&&this.callsTable[lt].qm!==null&&typeof this.callsTable[lt].qm.saveStatsToDb=="function"&&(this.callsTable[lt].qm.saveStatsToDb(!0),clearInterval(this.callsTable[lt].statisticId)),this.callsTable[lt].csmIntervalId&&clearInterval(this.callsTable[lt].csmIntervalId),this.callsTable[lt].beginTimeoutId&&(clearTimeout(this.callsTable[lt].beginTimeoutId),delete this.callsTable[lt].beginTimeoutId),this.callsTable[lt].dcfs?Tt==="Ice_failed"?this.callsTable[lt].dcfs.failure="iceFailed":this.callsTable[lt].dcfs.canceled=!0:this.callsTable[lt].callType==="data"&&this.callsTable[lt].calleeId==="dataChannelConnector"&&(this.callsTable[lt].failure||this.callsTable[lt].success||setTimeout(function(Dt,Et){Gn.createEvent({eventType:"onFileSended",callId:Dt.callId,remoteId:Dt.remoteId,name:Dt.data.filename,error:Et}),Dt.callbacks&&Dt.callbacks.failure&&Dt.callbacks.failure(Et)},0,this.callsTable[lt],Tt==="Ice_failed"?"iceFailed":"canceled")),this.callsTable[lt].pc.close(),this.callsTable[lt].pc=null)},this.removeCallProcess=function(lt){var Tt=this,It=this.callsTable[lt];this.clearCallTimeouts(It),It.incomingcandidatesQueue.length!==0&&It.incomingcandidatesQueue.splice(0,It.incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[It.callId+"-"+It.instanceId]!==void 0&&this.clientIncomingCandidatesQueue[It.callId+"-"+It.instanceId].length!==0&&this.clientIncomingCandidatesQueue[It.callId+"-"+It.instanceId].splice(0,this.clientIncomingCandidatesQueue[It.callId+"-"+It.instanceId].length),sn.log("Removing call from table"),this.callsTable.splice(lt,1),sn.log("this.callsTable.length :",this.callsTable.length),sn.log("Call is terminated"),setTimeout(function(){Tt.startNextPushData()}),this.evalOutgoingVideoBandwithCap()},this.removeCallFromTableWithCallIdAndSendBye=function(lt,Tt){sn.debug("removeCallFromTableWithCallIdAndSendBye()",lt);var It,Dt=null;if((It=this.findCallIndexWithCallId(lt))!==-1){if(this.closingCallProcess(It,Tt),this.callsTable[It].callId,this.callsTable[It].calleeId,this.callsTable[It].callee?(Dt=this.callsTable[It].callerId,Tt===null&&(Tt="Hangup_From_Callee")):(Dt=this.callsTable[It].calleeId,Tt===null&&(Tt="Hangup_From_Caller")),sn.log("reason is :"+Tt),this.callsTable[It].calleeId!=="LOCAL"&&apiCC.session!==null){var Et=apiCC.session.getConnectedUserInfo(this.callsTable[It].calleeId,"userData"),$t=null;if(Et!=="User_Not_Found")try{$t=JSON.parse(Et)}catch{sn.error("userInfo parse fail",Et)}$t!=null&&$t.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCancelCallRequest",{number:this.callsTable[It].calleeId,callId:lt}):this.callsTable[It].myWebRTC_Stack.sendBye(this.callsTable[It].callId,this.clientId,this.callsTable[It].dest_roomId,Dt,Tt,this.callsTable[It].data)}Tt!=="Broken_by_MCU"&&this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[It].remoteId,!0,Tt,this.callsTable[It].callId,this.callsTable[It].callType),this.callsTable[It].data!==void 0&&this.callsTable[It].data!==null&&(this.callsTable[It].data.pubSub==="janusConnector"||this.callsTable[It].data.MCUType!=="MCU-Caller"&&this.callsTable[It].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[It].data.confId,this.callsTable[It].callerId,this.callsTable[It].calleeId,this.callsTable[It].callId)),this.removeCallProcess(It)}else sn.log("No call removed");this.MCUClient.publishCallId===lt&&(this.publishCallId=null)},this.removeCall=function(lt){sn.info("removeCall");var Tt=null;return lt!==-1?(this.closingCallProcess(lt,null),this.callsTable[lt].disconnectionWarningTimeout!==0&&(sn.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.callsTable[lt].disconnectionWarningTimeout),this.callsTable[lt].disconnectionWarningTimeout=0),Tt=this.callsTable[lt].callType,this.removeCallProcess(lt)):sn.debug("No call removed"),Tt},this.removeCallFromTableWithConfIdandRemoteId=function(lt,Tt,It){var Dt;return sn.debug("removeCallFromTableWithConfIdandRemoteId() with reason :"+It),It=null,Dt=this.findCallIndexWithConfIdAndRemoteId(lt,Tt),this.removeCall(Dt)},this.removeCallFromTableWithCallIdandRemoteId=function(lt,Tt,It){var Dt;return sn.debug("removeCallFromTableWithCallIdandRemoteId() with reason :"+It),sn.log("callId :"+lt),sn.log("remoteId :"+Tt),It=null,Dt=this.findCallIndexWithCallIdAndRemoteId(lt,Tt),this.removeCall(Dt)},this.removeCallFromTableWithCallIdandInstanceId=function(lt,Tt,It){var Dt;return sn.debug("removeCallFromTableWithCallIdandInstanceId() with reason :"+It),sn.log("callId :"+lt),sn.log("instanceId :"+Tt),It=null,Dt=this.findCallIndexWithCallIdAndInstanceId(lt,Tt),this.removeCall(Dt)},this.toggleVideoMute=function(lt){sn.debug("toggleVideoMute");var Tt,It,Dt=this.callsTable.length,Et=null,$t=null;if(lt==null){for(sn.debug("no callId defined, toggleVideoMute all local video"),this.isVideoMuted?this.localStream!==null&&(sn.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getVideoTracks())):this.localStream!==null&&(sn.debug("localStream muteTracks"),this.muteTracks(this.localStream.getVideoTracks())),this.isVideoMuted=!this.isVideoMuted,Tt=0;Tt<Dt;Tt+=1)this.callsTable[Tt].data&&this.callsTable[Tt].data.mesh||($t=null,this.callsTable[Tt].callConfiguration&&($t=apiCC.getUserMediaStream(this.callsTable[Tt].callConfiguration.userMediaStreamId)),$t?$t.videoMuted?$t.unMuteVideoOnStreams("enabled"):$t.muteVideoOnStreams("enabled"):this.callsTable[Tt].callLocalStream!==null&&(this.callsTable[Tt].isLocalVideoMuted?(sn.debug("unmuting call :",this.callsTable[Tt].callId),this.unMuteTracks(this.callsTable[Tt].callLocalStream.getVideoTracks())):(sn.debug("muting call :",this.callsTable[Tt].callId),this.muteTracks(this.callsTable[Tt].callLocalStream.getVideoTracks())),this.callsTable[Tt].isLocalVideoMuted=!this.callsTable[Tt].isLocalVideoMuted));for(Dt=this.userMediaTable.length,Tt=0;Tt<Dt;Tt+=1)$t=null,this.userMediaTable[Tt].callConfiguration&&($t=apiCC.getUserMediaStream(this.userMediaTable[Tt].callConfiguration.userMediaStreamId)),$t&&($t.videoMuted?$t.unMuteVideoOnStreams("enabled"):$t.muteVideoOnStreams("enabled"));return{muteState:this.isVideoMuted,callId:"ALL"}}return sn.debug("callId is defined :",lt),(It=this.findCallIndexWithCallId(lt))>=0?(this.callsTable[It].callConfiguration&&($t=apiCC.getUserMediaStream(this.callsTable[It].callConfiguration.userMediaStreamId)),$t?($t.videoMuted?$t.unMuteVideoOnStreams("enabled"):$t.muteVideoOnStreams("enabled"),{muteState:$t.videoMuted,callId:lt}):this.callsTable[It].callLocalStream!==null?(this.callsTable[It].isLocalVideoMuted?(sn.debug("unmuting call :",this.callsTable[It].callId),this.unMuteTracks(this.callsTable[It].callLocalStream.getVideoTracks())):(sn.debug("muting call :",this.callsTable[It].callId),this.muteTracks(this.callsTable[It].callLocalStream.getVideoTracks())),this.callsTable[It].isLocalVideoMuted=!this.callsTable[It].isLocalVideoMuted,{muteState:this.callsTable[It].isLocalVideoMuted,callId:lt}):{muteState:"STREAM_NOT_FOUND",callId:lt}):(Et=this.findUserMediaById(lt))&&(Et.callConfiguration&&($t=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),$t)?($t.videoMuted?$t.unMuteVideoOnStreams("enabled"):$t.muteVideoOnStreams("enabled"),{muteState:$t.videoMuted,callId:lt}):{muteState:"CALL_NOT_FOUND",callId:lt}},this.unMuteTracks=function(lt){var Tt;if(lt.length!==0){for(Tt=0;Tt<lt.length;Tt+=1)lt[Tt].enabled=!0;sn.log("tracks unMuted.")}else sn.log("No tracks available.")},this.muteTracks=function(lt){var Tt;if(lt.length!==0){for(Tt=0;Tt<lt.length;Tt+=1)lt[Tt].enabled=!1;sn.log("tracks muted.")}else sn.log("No tracks available.")},this.toggleAudioMute=function(lt){sn.debug("toggleAudioMute");var Tt,It,Dt=this.callsTable.length,Et=null,$t=null;if(lt==null){for(sn.debug("no callId defined, toggleAudioMute all local audio"),this.isAudioMuted?this.localStream!==null&&(sn.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getAudioTracks())):this.localStream!==null&&(sn.debug("localStream muteTracks"),this.muteTracks(this.localStream.getAudioTracks())),this.isAudioMuted=!this.isAudioMuted,Tt=0;Tt<Dt;Tt+=1)this.callsTable[Tt].data&&this.callsTable[Tt].data.mesh||($t=null,this.callsTable[Tt].callConfiguration&&($t=apiCC.getUserMediaStream(this.callsTable[Tt].callConfiguration.userMediaStreamId)),$t?$t.audioMuted?$t.unMuteAudioOnStreams("enabled"):$t.muteAudioOnStreams("enabled"):this.callsTable[Tt].callLocalStream!==null&&(this.callsTable[Tt].isLocalAudioMuted?(sn.debug("unmuting call :",this.callsTable[Tt].callId),this.unMuteTracks(this.callsTable[Tt].callLocalStream.getAudioTracks())):(sn.debug("muting call :",this.callsTable[Tt].callId),this.muteTracks(this.callsTable[Tt].callLocalStream.getAudioTracks())),this.callsTable[Tt].isLocalAudioMuted=!this.callsTable[Tt].isLocalAudioMuted));for(Dt=this.userMediaTable.length,Tt=0;Tt<Dt;Tt+=1)$t=null,this.userMediaTable[Tt].callConfiguration&&($t=apiCC.getUserMediaStream(this.userMediaTable[Tt].callConfiguration.userMediaStreamId)),$t&&($t.audioMuted?$t.unMuteAudioOnStreams("enabled"):$t.muteAudioOnStreams("enabled"));return{muteState:this.isAudioMuted,callId:"ALL"}}return sn.debug("callId is defined :",lt),(It=this.findCallIndexWithCallId(lt))>=0?(this.callsTable[It].callConfiguration&&($t=apiCC.getUserMediaStream(this.callsTable[It].callConfiguration.userMediaStreamId)),$t?($t.audioMuted?$t.unMuteAudioOnStreams("enabled"):$t.muteAudioOnStreams("enabled"),{muteState:$t.audioMuted,callId:lt}):this.callsTable[It].callLocalStream!==null?(this.callsTable[It].isLocalAudioMuted?(sn.debug("unmuting call :",this.callsTable[It].callId),this.unMuteTracks(this.callsTable[It].callLocalStream.getAudioTracks())):(sn.debug("muting call :",this.callsTable[It].callId),this.muteTracks(this.callsTable[It].callLocalStream.getAudioTracks())),this.callsTable[It].isLocalAudioMuted=!this.callsTable[It].isLocalAudioMuted,{muteState:this.callsTable[It].isLocalAudioMuted,callId:lt}):{muteState:"STREAM_NOT_FOUND",callId:lt}):(Et=this.findUserMediaById(lt))&&(Et.callConfiguration&&($t=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),$t)?($t.audioMuted?$t.unMuteAudioOnStreams("enabled"):$t.muteAudioOnStreams("enabled"),{muteState:$t.audioMuted,callId:lt}):{muteState:"CALL_NOT_FOUND",callId:lt}},this.sendDTMF=function(lt,Tt,It,Dt){sn.debug("sendDTMF");var Et=0;lt!=null?(sn.debug("callId is defined :",lt),Et=this.findCallIndexWithCallId(lt),sn.debug("index :",Et),Et>=0&&(sn.debug("index :",Et),this.callsTable[Et].sendTones(Tt,It,Dt))):sn.debug("no callId defined, leaving sendDTMF")},this.xhr=function(lt,Tt,It,Dt){var Et=new XMLHttpRequest;Et.onreadystatechange=function(){Et.readyState===4&&Et.status===200&&It(Et.responseText)},Dt!==void 0&&(Et.upload.onprogress=Dt),Et.open("POST",lt),Et.send(Tt)},this.takeSnapshot=function(lt,Tt,It,Dt,Et,$t,xt){var Vt=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{};sn.info("takeSnapshot");var Zt,an=null,qt=null,tn=document.createElement("canvas"),gn=null,rn=null,pn=new Date,In=pn.toJSON(),Pn=In.replace(new RegExp(":","g"),"-"),_n=null;switch(Dt){case"Desactivated":Zt=0;break;case"Low":Zt=2;break;case"Medium":Zt=4;break;case"High":Zt=6;break;default:sn.log("blurLevel not defined switch case : "+Dt),Zt=0}return xt===void 0?(sn.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot"),sn.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("Deprecated - localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(sn.log("takeSnapshot of defined video Id :"+xt),(_n=document.getElementById(xt))===null?(sn.log("Cannot find video with Id :"+xt),sn.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(tn.width=_n.videoWidth,tn.height=_n.videoHeight,Vt.hasOwnProperty("width")&&(sn.debug("options.width is set :"+Vt.width),tn.width=Vt.width),Vt.hasOwnProperty("height")&&(sn.debug("options.height is set :"+Vt.height),tn.height=Vt.height),sn.log("snapshot.width : "+tn.width),sn.log("snapshot.height :"+tn.height),(an=tn.getContext("2d")).drawImage(_n,0,0,tn.width,tn.height),(qt=document.createElement("img")).src=tn.toDataURL("image/png"),qt.style.padding=5,qt.width=tn.width,qt.height=tn.height,Zt!==0?(sn.log("Adding Blur on Photo"),gn=an.getImageData(0,0,tn.width,tn.height),sn.log("av pixels data : "+gn.data),gn=Ot(qt,gn,Zt),sn.log("ap pixels data : "+gn.data),an.putImageData(gn,0,0),qt.src=tn.toDataURL("image/png")):sn.log("blur on photo is desactivated"),nr(Tt)==="object"?Tt!==null?Tt.src=qt.src:sn.log("localPhotoIdOrDiv is null"):document.getElementById(Tt)!==null?document.getElementById(Tt).src=qt.src:sn.log("localPhotoId is not defined"),rn=new FormData,Et!==void 0?(sn.log("sessionId !== undefined :"+Et),rn.append("destFileName",this.clientId+"-"+Pn+".png"),rn.append("data",tn.toDataURL("image/png")),rn.append("sessionId",Et)):(sn.log("Upload on data1"),rn.append("photo",tn.toDataURL("image/png")),rn.append("clientId",this.clientId),rn.append("apiKey",apiCC.session.apiKey)),void this.xhr(lt,rn,function(Ln){if(sn.log("fileName :",Ln),Ln!==null)try{var Vn=JSON.parse(Ln);Vn.resultCode==="OK"&&(sn.log("files loaded, filename :"+Vn.fileUrl),Gn.createSnapShotPhotoUploaded(Vn.fileUrl))}catch(or){sn.log("Parsing error:",or)}Ln!=="Photo received"&&Ln!=="An error occurred."&&Ln.substring(0,6)!=="Photo-"||Gn.createSnapShotPhotoUploaded(Ln)},$t)))},this.takeSnapshotAndSendOnDataChannel=function(lt,Tt,It,Dt){sn.info("takeSnapshotAndSendOnDataChannel");var Et,$t=null,xt=document.createElement("canvas"),Vt=null;if(Tt!==void 0){if(sn.log("takeSnapshot of defined video Id :"+Tt),(Vt=document.getElementById(Tt))===null)return sn.log("Cannot find video with Id :"+Tt),sn.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")}else sn.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot");Vt!=null&&(xt.width=Vt.clientWidth,xt.height=Vt.clientHeight),sn.log("snapshot.width : "+xt.width),sn.log("snapshot.height :"+xt.height),xt.getContext("2d").drawImage(Vt,0,0,xt.width,xt.height),($t=document.createElement("img")).src=xt.toDataURL("image/png"),$t.style.padding=5,$t.width=xt.width,$t.height=xt.height,nr(lt)==="object"?lt!==null?lt.src=$t.src:sn.log("localPhotoIdOrDiv is null"):document.getElementById(lt)!==null?document.getElementById(lt).src=$t.src:sn.log("localPhotoId is not defined"),Et=xt.toDataURL("image/png"),this.sendDataWithCallId(It,{file:Et,name:"nomFichier",type:"image/png-dataUrl"},Dt)},this.callWithNumber=function(lt,Tt,It,Dt){sn.info("Click on Call Button, video activated : "+Tt),sn.log("callConfiguration : ",Dt);var Et=null,$t=0,xt=null,Vt=null,Zt=null,an=null,qt=null;if(typeof lt=="number"&&(sn.log("called number type is number, converting to string"),lt=lt.toString()),lt!==""&&lt!==this.clientId){if((Et=new vn(this)).instanceId=apiCC.generateInstanceId(),sn.log("Calling destination number :"+lt),Dt==null||Dt.apzcallId===void 0||Dt.apzcallId===null?Et.generateCallId():Et.callId=Dt.apzcallId,apiCC.isSIPNumber(lt)===!0?(sn.log("Prefix 0 , + , or 'sip:' detected, calling a SIP device"),lt.toString().startsWith("sip:")===!0&&(lt=lt.toString().replace("sip:",""),sn.log("called SIP number is :",lt)),It!=null?It.pubSub="sipConnector":(It={}).pubSub="sipConnector",Et.trickleIce=!1):sn.log("Establishing Web call"),Et.callerId=this.clientId,Et.calleeId=lt,Et.dest_roomId=lt,Et.audioOnly=!Tt,Et.remoteId=lt,Et.callConfiguration=Dt,Dt!=null?(Dt.mediaTypeForOutgoingCall==="VIDEO"||Dt.mediaTypeForOutgoingCall==="AUDIO"||Dt.mediaTypeForOutgoingCall==="VIDEOONLY"||Dt.mediaTypeForOutgoingCall==="NONE"?(sn.log("Setting mediaTypeForOutgoingCall :"+Dt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=Dt.mediaTypeForOutgoingCall):(sn.log("mediaTypeForOutgoingCall is not set"),Tt===!1&&(sn.log("videoActivated is false, setting mediaTypeForOutgoingCall to AUDIO"),Et.mediaTypeForOutgoingCall="AUDIO")),Dt.mediaRoutingMode!==void 0&&Dt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(Dt.mediaRoutingMode),Dt.turnServerAddress!==void 0&&Dt.turnServerAddress!==null&&Et.setCallTurnServer(Dt.turnServerAddress),Dt.preferVP9Codec!==!0&&Dt.preferVP9Codec!==!1||(Et.preferVP9Codec=Dt.preferVP9Codec),Dt.hasOwnProperty("forceCallType")&&(Et.callType=Dt.forceCallType,Et.callType!=="screenSharing"&&Et.callType!=="screenSharingWithAudio"||(Et.screenSharing=!0))):sn.log("callConfiguration is not set"),It!==void 0&&It.MCUType!==void 0&&(It.MCUType!=="MCU-Caller"&&It.MCUType!=="MCU-Callee"||(this.MCUClient.pubConnector==="janusConnector"&&rt.Xh==="Firefox"&&(rt.PR>43?Et.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:Et.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}),It.pubSub=this.MCUClient.pubConnector,It.videoBandwidthSettings=this.videoBandwidthSettings,It.pubSub==="groupKurentoConnector"&&(It.pubSub="kurentoConnector"))),Et.checkDTLSCompliancy(),xt=Et.callId,Vt=apiCC.session.getConnectedUserInfo(lt,"userData"),sn.log("userInfo :",Vt),Vt!=="User_Not_Found"&&Vt!==void 0&&(Zt=JSON.parse(Vt))!==void 0&&Zt.react==="true"&&(sn.log("userInfoJson.react :",JSON.stringify(Zt.react)),sn.log("userInfoJson.osName :",JSON.stringify(Zt.osName)),Zt.osName==="iOS"&&(sn.log("Callee : React and iOS detected, setting H264 as preferred codec for the call"),Et.preferH264Codec=!0)),Et.audioOnly===!0&&(Et.callType="audio"),It!==void 0?Et.data=It:It={},It.convId&&(It.cloudConvId||(It.cloudConvId=It.convId),delete It.convId),It.dataCall===!0&&(Et.dataCall=!0),Et.data.instanceId=Et.instanceId,$t=this.callsTable.push(Et),sn.log("Call Number is :"+$t),Et.data&&Et.data.MCUType==="MCU-Caller"&&Et.mediaTypeForOutgoingCall==="NONE")return Et.inviteSended=!0,Et.myWebRTC_Stack.sendInvite(Et.callId,Et.callerId,this.nickname,Et.dest_roomId,Et.dest_roomId,"none",{offer:{type:"no-offer"},data:Et.data}),Et.callId;Et.data&&Et.data.MCUType==="MCU-Caller"&&(Et.settingUpType="publish",Et.callControl=this.createCallControl({type:"publish",callId:Et.callId,roomName:Et.data.confId,callConfiguration:Et.callConfiguration,data:Et.data}),Et.callControl.sessionId=Et.data.confId,Et.callControl.token=Et.data.confId,Et.callControl.autoRestart.counter=0,Et.setMediaConstraintsToSendOnlyOffer()),(0,ot.ki)(Dt,"userMediaStreamId","string")&&(qt=Dt.userMediaStreamId),Zt!=null&&Zt.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCallRequest",{number:lt,call:Et,videoActivated:Tt,data:It,callConfiguration:{apzcallId:Et.callId}}):this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||qt?Et.dataCall?(sn.log("Datachannel call"),Et.establishCall()):(sn.log("callWithNumber :: User has already granted access to local media and AutoAnswer activated : establishing call"),qt?((an=apiCC.getUserMediaStream(qt)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=an.userMediaStreamId,Et.onUserMediaSuccessOnCall(an.stream)):Et.establishCall()):It.MCUType==="MCU-Callee"&&this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?sn.log("Stand-by :: wait for AcceptCall on recorded 1to1 call"):Et.getUserMediaOnCall()}else sn.log("Call Number is incorrect");return xt},this.startTestCall=function(lt,Tt){sn.info("startTestCall : video activated : "+lt);var It,Dt,Et=null,$t=null,xt={};return(Et=new vn(this)).generateCallId(),Et.instanceId=apiCC.generateInstanceId(),Et.callerId=this.clientId,Et.calleeId=12345,Et.dest_roomId=12345,Et.audioOnly=!lt,Et.remoteId=12345,Et.callConfiguration=Tt,Tt!=null?(Tt.mediaTypeForOutgoingCall==="VIDEO"||Tt.mediaTypeForOutgoingCall==="AUDIO"||Tt.mediaTypeForOutgoingCall==="VIDEOONLY"||Tt.mediaTypeForOutgoingCall==="NONE"?(sn.log("Setting mediaTypeForOutgoingCall :"+Tt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=Tt.mediaTypeForOutgoingCall):sn.log("mediaTypeForOutgoingCall is not set"),Tt.mediaRoutingMode!==void 0&&Tt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(Tt.mediaRoutingMode),Tt.turnServerAddress!==void 0&&Tt.turnServerAddress!==null&&Et.setCallTurnServer(Tt.turnServerAddress),Tt.preferVP9Codec!==!0&&Tt.preferVP9Codec!==!1||(Et.preferVP9Codec=Tt.preferVP9Codec)):(sn.log("callConfiguration is not set"),Tt={}),Et.checkDTLSCompliancy(),Dt=Et.callId,xt.pubSub="testCallKurentoConnector",Et.data=xt,Et.data.instanceId=Et.instanceId,Et.audioOnly===!0&&(Et.callType="audio"),It=this.callsTable.push(Et),sn.log("Call Number is :"+It),this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||Tt.userMediaStreamId||apiCC.userMediaStreamTable.length>0?Et.dataCall?(sn.log("Datachannel call"),Et.establishCall()):(sn.log("startTestCall :: User has already granted access to local media and AutoAnswer activated : establishing call"),Tt.userMediaStreamId?(($t=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=$t.userMediaStreamId,Et.callLocalStream=$t.stream,Et.establishCall()):(apiCC.userMediaStreamTable.length>0&&(($t=apiCC.userMediaStreamTable[0]).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=$t.userMediaStreamId,Et.callLocalStream=$t.stream),Et.establishCall())):Et.getUserMediaOnCall(),Dt},this.extensionInstallationSuccessCallback=function(){sn.debug("extensionInstallationSuccessCallback"),apiCC.session.apiCCWebRTCClient.webRTCClient.apiRTCExtensionInstalled=!0},this.extensionInstallationFailureCallback=function(lt,Tt){sn.debug("extensionInstallationFailureCallback : Error :"+lt+", "+Tt),lt=null,Tt=null,Gn.createDesktopCaptureEvent("Extension_installation_Error",this.waitingShareScreenCallId,this.waitingShareScreenDestNumber,this.waitingCaptureSourceType)},this.manageNotInstalledExtension=function(lt,Tt,It){sn.debug("manageNotInstalledExtension"),sn.warn("apiRTC extension not installed"),Gn.createDesktopCaptureEvent("Extension_not_installed",lt,Tt),sn.warn("Starting apiRTC extension installation"),this.waitingShareScreenDestNumber=Tt,this.waitingShareScreenCallId=lt,this.waitingCaptureSourceType=It,chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",this.callback(this,"extensionInstallationSuccessCallback"),this.callback(this,"extensionInstallationFailureCallback"))},this.shareScreen=function(lt,Tt,It,Dt,Et){sn.info("shareScreen");var $t=null,xt=null,Vt=null,Zt=null;if(apiCC.isScreenSharingCompliant()===!0)if(lt!==""&&lt!==this.clientId){if(Tt!==null&&nr(Tt)==="object"||(Tt={}),this.MCUClient.pubConnector==="janusConnector"&&!Tt.mesh&&Et&&Et.callControl&&Et.callControl.callId&&this.findCallWithCallId(Et.callControl.callId))return sn.debug("call already exists",Et.callControl.callId),Et.callControl.callId;if(Dt!==null&&nr(Dt)==="object"||(Dt={}),Dt.qos!==null&&nr(Dt.qos)==="object"?(Tt.qos={},Dt.qos.videoMinQuality==="excellent"?Tt.qos.videoMinQuality="excellent":Dt.qos.videoMinQuality==="good"?Tt.qos.videoMinQuality="good":Dt.qos.videoMinQuality==="medium"?Tt.qos.videoMinQuality="medium":(Dt.qos.videoMinQuality,Tt.qos.videoMinQuality="bad"),Dt.qos.videoForbidInactive===!0&&(Tt.qos.videoForbidInactive=!0)):Tt.qos={videoMinQuality:"bad"},["audioLabels","videoLabels"].forEach(function(qt){(0,ot.Ym)(Dt[qt],"array")&&(Tt[qt]=[],Dt[qt].forEach(function(tn){(0,ot.Ym)(tn,"string")&&Tt[qt].push(tn)}))}),(0,ot.Ym)(Dt,"context","object"))try{JSON.stringify(Dt.context),Tt.context=Dt.context}catch{}sn.log("shareScreen; callConfiguration: "+JSON.stringify(Dt)),xt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient),Tt.mesh!==void 0&&Tt.instanceId!==void 0?(sn.debug("keeping instanceId "),xt.instanceId=Tt.instanceId):xt.instanceId=apiCC.generateInstanceId(),sn.log("Calling destination number :"+lt);var an=this.MCUClient.getSessionMCU(lt);if(an&&(xt.sessionMCU=an),xt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&!Tt.mesh?(xt.settingUpType="shareScreen",Et&&Et.callControl?(xt.callControl=Et.callControl,xt.callControl.autoRestart.counter+=1,xt.callId=xt.callControl.callId,xt.restarted=!0):(xt.callControl=this.createCallControl({type:"shareScreen",roomName:lt,callConfiguration:Dt,data:Tt}),xt.callControl.captureSourceType=It,xt.callControl.autoRestart.counter=0,xt.generateCallId(),xt.callControl.callId=xt.callId)):(xt.settingUpType="shareScreen",xt.generateCallId()),$t=xt.callId,xt.callerId=this.clientId,xt.calleeId=lt,xt.dest_roomId=lt,xt.audioOnly=!1,xt.screenSharing=!0,xt.remoteId=lt,xt.callType="screenSharing",xt.captureSourceType=It,xt.callConfiguration=Dt,xt.data=Tt,xt.data.instanceId=xt.instanceId,an&&an.convId&&(xt.data.cloudConvId=an.convId),Dt!=null&&Dt.turnServerAddress!==void 0&&Dt.turnServerAddress!==null&&xt.setCallTurnServer(Dt.turnServerAddress),xt.checkDTLSCompliancy(),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(xt),xt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&xt.callControl&&xt.callControl.autoRestart.stream)return sn.debug("shareScreen; autoRestart"),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,xt.callLocalStream=xt.callControl.autoRestart.stream,xt.establishCall(),xt.callId;if(Tt!==void 0&&Tt.mesh!==void 0&&(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Tt.mesh.calleeCallId))!==null&&Vt.callConfiguration&&Vt.callConfiguration.userMediaStreamId)return(Zt=apiCC.getUserMediaStream(Vt.callConfiguration.userMediaStreamId)).addCallInfo(xt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,xt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&xt.callControl&&(xt.callControl.autoRestart.stream=Zt.stream),xt.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,xt.callLocalStream=Zt.stream,xt.establishCall(),xt.callId;apiCC.createUserMediaStream({callId:xt.callId,type:xt.callType,captureSourceType:It,success:function(qt){sn.debug("[shareScreen] success; userMediaStreamId: "+qt.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,xt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&xt.callControl&&(xt.callControl.autoRestart.stream=qt.stream),xt.callConfiguration.userMediaStreamId=qt.userMediaStreamId,xt.callLocalStream=qt.stream,xt.establishCall()}})}else sn.log("Call Number is incorrect");else sn.log("shareScreen is not supported on this browser"),Gn.createDesktopCaptureEvent("Browser_Not_Compatible",$t,lt);return sn.info("shareScreen, callId :",$t),$t},this.startScreenSharingOnCall=function(lt,Tt){sn.info("getScreenMedia for callId :"+lt);var It=null;if(rt.Xh==="Chrome")if((It=this.findCallWithCallId(lt))!==null){if(this.apiRTCExtensionInstalled===!1)return void this.manageNotInstalledExtension(It.callId,It.remoteId,Tt);Tt==null&&(Tt=["screen","window","tab"]),window.postMessage({command:"getDesktopId",callNumber:It.callId,remoteId:It.remoteId,captureSourceType:Tt,browser_major_version:rt.PR},"*")}else sn.log("call not found");else sn.log("shareScreen is only available for chrome Browser"),Gn.createDesktopCaptureEvent("Browser_Not_Compatible",lt,null)},this.toggleVideoScreen=function(lt){sn.info("toggleVideoScreen for callId :"+lt);var Tt=this.findCallWithCallId(lt);Tt!==null?Tt.toggleVideoScreen():sn.log("call not found")},this.addVideoMedia=function(lt){sn.info("webRTCClient::addVideoMedia for callId :"+lt);var Tt=this.findCallWithCallId(lt);Tt!==null?Tt.addVideoMedia():sn.log("call not found")},this.callbymail=function(lt){var Tt;sn.info("Click on Call per mail Button"),Tt=lt,new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i").test(Tt)?(sn.log("Calling Destination mail :"+lt),this.socket.emit("webrtc_invite_permail",lt),Kt.channel.socket.emit("webrtc_invite_permail",lt)):sn.log("Mail address is not correct :"+lt)},this.callperURL=function(lt){sn.info("Call per URL");var Tt,It=null;(It=new vn(this)).instanceId=apiCC.generateInstanceId(),sn.log("Calling Destination number :"+lt),It.generateCallId(),It.callerId=this.clientId,It.calleeId=lt,It.dest_roomId=lt,It.audioOnly=!1,It.getUserMediaOnCall(),It.remoteId=lt,It.checkDTLSCompliancy(),Tt=this.callsTable.push(It),sn.log("Call Number is :"+Tt)},this.acceptCall=function(lt,Tt){sn.info("acceptCall for callId :"+lt),sn.log("acceptCall() - callConfiguration : ",Tt);var It=null,Dt=null;if((It=this.findCallWithCallId(lt))!==null){if(sn.log("acceptCall() - Call found"),It.isAccepted=!0,Tt!=null?(Tt.mediaTypeForIncomingCall==="VIDEO"||Tt.mediaTypeForIncomingCall==="AUDIO"||Tt.mediaTypeForIncomingCall==="VIDEOONLY"||Tt.mediaTypeForIncomingCall==="NONE"||Tt.mediaTypeForIncomingCall==="DATA"?(sn.log("acceptCall() - Setting mediaTypeForIncomingCall :"+Tt.mediaTypeForIncomingCall),It.mediaTypeForIncomingCall=Tt.mediaTypeForIncomingCall):sn.log("acceptCall() - mediaTypeForIncomingCall is not set"),Tt.mediaRoutingMode!==void 0&&Tt.mediaRoutingMode!==null&&It.setCallMediaRoutingMode(Tt.mediaRoutingMode),Tt.turnServerAddress!==void 0&&Tt.turnServerAddress!==null&&It.setCallTurnServer(Tt.turnServerAddress),Tt.preferVP9Codec!==!0&&Tt.preferVP9Codec!==!1||(It.preferVP9Codec=Tt.preferVP9Codec)):(sn.log("acceptCall() - callConfiguration is not set"),Tt={}),It.screenSharing===!0&&(sn.log("acceptCall() for screenSharing : forcing mediaTypeForIncomingCall to NONE"),Tt.mediaTypeForIncomingCall="NONE",It.mediaTypeForIncomingCall="NONE"),It.callConfiguration=(0,ot.S6)(It.callConfiguration,Tt),It.mediaTypeForIncomingCall==="VIDEO"?It.setLocalCallProfile({audio:!0,audioActive:!0,video:!0,videoActive:!0}):It.mediaTypeForIncomingCall==="AUDIO"?It.setLocalCallProfile({audio:!0,audioActive:!0,video:!1,videoActive:!1}):It.mediaTypeForIncomingCall==="VIDEOONLY"?It.setLocalCallProfile({audio:!1,audioActive:!1,video:!0,videoActive:!0}):It.mediaTypeForIncomingCall==="NONE"&&It.setLocalCallProfile({audio:!1,audioActive:!1,video:!1,videoActive:!1}),It.data&&It.data.MCUType==="MCU-Callee"&&It.mediaTypeForIncomingCall==="NONE")return void It.myWebRTC_Stack.sendInvite(It.callId,It.callerId,this.nickname,It.dest_roomId,It.dest_roomId,"none",{offer:{type:"no-offer"},data:It.data});It.data&&It.data.MCUType==="MCU-Callee"&&(It.mediaTypeForOutgoingCall=It.mediaTypeForIncomingCall,It.settingUpType="publish",It.callControl=this.createCallControl({type:"publish",callId:It.callId,roomName:It.data.confId,callConfiguration:It.callConfiguration,data:It.data}),It.callControl.sessionId=It.data.confId,It.callControl.token=It.data.confId,It.callControl.autoRestart.counter=0,It.setMediaConstraintsToSendOnlyOffer()),this.unidirectionelCallOnly?(sn.log("acceptCall() - unidirectional call"),It.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?(sn.log("acceptCall with userAcceptOnIncomingCallBeforeGetUserMedia"),Tt.userMediaStreamId?((Dt=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(It.callId),It.callConfiguration!==void 0&&It.callConfiguration!==null||(It.callConfiguration={}),It.callConfiguration.userMediaStreamId=Dt.userMediaStreamId,It.onUserMediaSuccessOnCall(Dt.stream)):It.getUserMediaOnCall()):It.accessToMedia===!0||Tt.userMediaStreamId||It.dataCall?(sn.log("acceptCall() :: User has already granted access to local media and AutoAnswer activated : establishing call"),It.dataCall||Tt.userMediaStreamId&&((Dt=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(It.callId),It.callConfiguration!==void 0&&It.callConfiguration!==null||(It.callConfiguration={}),It.callConfiguration.userMediaStreamId=Dt.userMediaStreamId,It.callLocalStream=Dt.stream),It.establishCall()):sn.log("acceptCall() - call will be established when user accept his media")}else sn.log("Call not found")},this.refuseCall=function(lt,Tt){sn.info("refuseCall for callId :"+lt);var It,Dt=null;It=Tt!==void 0?Tt:"User_Refused_Call",(Dt=this.findCallWithCallId(lt))!==null?(sn.log("Call found"),Dt.data.MCUType==="MCU-Callee"?(Dt.myWebRTC_Stack.sendBye(Dt.callId,Dt.callerId,Dt.dest_roomId,Dt.calleeId,"User_Media_Error",Dt.data),this.removeCallFromTableWithCallIdandRemoteId(Dt.callId,Dt.calleeId,It)):(Dt.myWebRTC_Stack.sendBye(Dt.callId,Dt.calleeId,Dt.dest_roomId,Dt.callerId,It,Dt.data),this.removeCallFromTableWithCallIdandRemoteId(Dt.callId,Dt.callerId,It)),this.callsTable.length===0&&sn.log("No more established calls for client")):sn.log("Call not found")},this.stopMedia=function(lt){var Tt=this,It=null,Dt=null;return new Promise(function(Et,$t){var xt=null,Vt=null;return(xt=Tt.findCallWithCallId(lt))?xt.callLocalStream?void xt.removeStream(xt.callLocalStream).then(function(){return Dt=xt.callLocalStream.id,xt.callLocalStream=null,(0,ot.ki)(xt.callConfiguration,"userMediaStreamId","string")&&(It=xt.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(xt.callConfiguration.userMediaStreamId,xt.callId),delete xt.callConfiguration.userMediaStreamId),Et({oldUserMediaStreamId:It,oldMediaStreamId:Dt})}).catch($t):Et({oldUserMediaStreamId:It,oldMediaStreamId:Dt}):((Vt=Tt.findUserMediaById(lt))&&(It=lt,Vt.releaseUserMediaStream()),Et({oldUserMediaStreamId:It,oldMediaStreamId:Dt}))})},this.addMedia=function(lt,Tt,It,Dt){var Et=this;sn.info("addMedia for callId :"+lt);var $t=null,xt=null,Vt=null,Zt=function(){return Promise.resolve()},an=function(){return Promise.resolve()};Tt===!0&&(Zt=function(){return Et.stopMedia(lt)}),(0,ot.Ym)(It,"string")&&(Vt=apiCC.getUserMediaStream(It),It=null);var qt=function(){sn.error("[addMedia] success; userMediaStreamId: "+Vt.userMediaStreamId),xt.callConfiguration!==void 0&&xt.callConfiguration!==null||(xt.callConfiguration={}),xt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,xt.callType=Vt.callType,xt.audio=Vt.audio,xt.video=Vt.video,xt.audioMuted=Vt.audioMuted,xt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(xt,!0)},tn=function(pn){pn.callConfiguration!==void 0&&pn.callConfiguration!==null||(pn.callConfiguration={}),pn.isLocalAudioMuted&&pn.isLocalVideoMuted?pn.callConfiguration.muted="VIDEO":pn.isLocalAudioMuted?pn.callConfiguration.muted="AUDIOONLY":pn.isLocalVideoMuted&&(pn.callConfiguration.muted="VIDEOONLY")},gn=function(pn,In,Pn){In==="audio"?Pn?pn.audioSdpDirection=null:(0,ot.ki)(pn.remoteCallProfile,"audio","boolean")&&pn.remoteCallProfile.audio===!0&&pn.remoteCallProfile.audioActive===!0?pn.audioSdpDirection="recvonly":pn.audioSdpDirection="inactive":In==="video"&&(Pn?pn.videoSdpDirection=null:(0,ot.ki)(pn.remoteCallProfile,"video","boolean")&&pn.remoteCallProfile.video===!0&&pn.remoteCallProfile.videoActive===!0?pn.videoSdpDirection="recvonly":pn.videoSdpDirection="inactive")},rn=function(pn,In,Pn,_n){pn.callConfiguration!==void 0&&pn.callConfiguration!==null||(pn.callConfiguration={}),pn.callConfiguration.userMediaStreamId=In.userMediaStreamId,gn(pn,"audio",In.audio),gn(pn,"video",In.video),tn(pn),function(Ln,Vn,or){Vn&&or?(Ln.audioOnly=!1,Ln.mediaTypeForIncomingCall="VIDEO",Ln.mediaTypeForOutgoingCall="VIDEO"):Vn?(Ln.audioOnly=!1,Ln.mediaTypeForIncomingCall="AUDIO",Ln.mediaTypeForOutgoingCall="AUDIO"):or?(Ln.audioOnly=!1,Ln.mediaTypeForIncomingCall="VIDEOONLY",Ln.mediaTypeForOutgoingCall="VIDEOONLY"):(Ln.audioOnly=!1,Ln.mediaTypeForIncomingCall="NONE",Ln.mediaTypeForOutgoingCall="NONE")}(pn,In.audio,In.video),pn.callLocalStream=In.stream,pn.started?pn.addingUserMedia=!0:Et.accessToLocalMedia=!0,pn.asyncCallbacks={},pn.asyncCallbacks.type="addingUserMedia",pn.asyncCallbacks.resolve=Pn,pn.asyncCallbacks.reject=_n,pn.asyncCallbacks.timeoutId=setTimeout(function(){pn.asyncCallbacks&&typeof pn.asyncCallbacks.reject=="function"&&(pn.asyncCallbacks.reject("addMedia timeout"),delete pn.asyncCallbacks)},Zn),pn.establishCall()};if(($t=this.findCallWithCallId(lt))!==null){if($t.asyncCallbacks)return Promise.reject("job already ongoing");an=function(){return new Promise(function(pn,In){Vt?(Vt.addCallInfo($t.callId),rn($t,Vt,pn,In)):It?apiCC.createUserMediaStream({type:"media",callId:$t.callId,stream:It,sync:!0,success:function(Pn){sn.debug("[addMedia] success; userMediaStreamId: "+Pn.userMediaStreamId),rn($t,Pn,pn,In)},failure:function(Pn,_n){return In(_n)}}):(0,ot.ki)(Dt,"getUserMediaStreamId","function")?Dt.getUserMediaStreamId().then(function(Pn){if(!(Vt=apiCC.getUserMediaStream(Pn)))return In("wrong userMediaStreamId");Vt.addCallInfo($t.callId),rn($t,Vt,pn,In)}).catch(In):apiCC.userMediaStreamTable.length>0?((Vt=apiCC.userMediaStreamTable[0]).addCallInfo($t.callId),rn($t,Vt,pn,In)):(tn($t),$t.addingUserMedia=!0,$t.asyncCallbacks={},$t.asyncCallbacks.type="addingUserMedia",$t.asyncCallbacks.resolve=pn,$t.asyncCallbacks.reject=In,$t.asyncCallbacks.timeoutId=setTimeout(function(){$t.asyncCallbacks&&typeof $t.asyncCallbacks.reject=="function"&&($t.asyncCallbacks.reject("addMedia timeout"),delete $t.asyncCallbacks)},Zn),$t.getUserMediaOnCall())})}}else if(xt=this.findUserMediaById(lt)){if(xt.addingUserMedia===!0)return Promise.reject("addMedia already ongoing");an=function(){return new Promise(function(pn,In){xt.addingUserMedia=!0,new Promise(function(Pn,_n){if(Vt)return Vt.addCallInfo(xt.userMediaId,"userMedia"),xt.callConfiguration!==void 0&&xt.callConfiguration!==null||(xt.callConfiguration={}),xt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,xt.callType=Vt.callType,xt.audio=Vt.audio,xt.video=Vt.video,xt.audioMuted=Vt.audioMuted,xt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(xt,!0),Pn(Vt.userMediaStreamId);if(It)apiCC.createUserMediaStream({callId:xt.userMediaId,callFlavor:"userMedia",type:xt.callType,stream:It,sync:!0,success:function(){return qt(),Pn(Vt.userMediaStreamId)},failure:function(Ln,Vn){return _n(Vn)}});else if((0,ot.ki)(Dt,"getUserMediaStreamId","function"))Dt.getUserMediaStreamId().then(function(Ln){return(Vt=apiCC.getUserMediaStream(Ln))?(Vt.addCallInfo(xt.userMediaId,"userMedia"),xt.callConfiguration!==void 0&&xt.callConfiguration!==null||(xt.callConfiguration={}),xt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,xt.callType=Vt.callType,xt.audio=Vt.audio,xt.video=Vt.video,xt.audioMuted=Vt.audioMuted,xt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(xt,!0),Pn(Vt.userMediaStreamId)):_n("wrong userMediaStreamId")}).catch(_n);else{if(apiCC.userMediaStreamTable.length>0)return(Vt=apiCC.userMediaStreamTable[0]).addCallInfo(xt.userMediaId,"userMedia"),xt.callConfiguration!==void 0&&xt.callConfiguration!==null||(xt.callConfiguration={}),xt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,xt.callType=Vt.callType,xt.audio=Vt.audio,xt.video=Vt.video,xt.audioMuted=Vt.audioMuted,xt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(xt,!0),Pn(Vt.userMediaStreamId);apiCC.createUserMediaStream({callId:xt.userMediaId,callFlavor:"userMedia",type:xt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(){return qt(),Pn(Vt.userMediaStreamId)},failure:function(Ln,Vn){return _n(Vn)}})}}).then(function(Pn){return function(_n){return new Promise(function(Ln,Vn){for(var or=[],hr=0;hr<apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;hr+=1){var mr=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[hr];if(mr.data!==void 0&&mr.data.mesh!==void 0&&mr.data.mesh.calleeCallId===lt){var yr=apiCC.session.apiCCWebRTCClient.webRTCClient.addMedia(mr.callId,!0,_n);or.push(yr.userMediaStreamId)}}Promise.all(or).then(function(){return Ln(_n)}).catch(Vn)})}(Pn)}).then(function(Pn){return delete xt.addingUserMedia,pn(Pn)}).catch(function(Pn){return delete xt.addingUserMedia,In(Pn)})})}}else an=function(){return Promise.reject("no suitable replacement")};return new Promise(function(pn,In){var Pn=null,_n=null;Zt().then(function(Ln){return Pn=Ln.oldUserMediaStreamId,_n=Ln.oldMediaStreamId,an()}).then(function(Ln){return sn.info("addMedia success; userMediaStreamId: "+Ln),pn({userMediaStreamId:Ln,oldUserMediaStreamId:Pn,oldMediaStreamId:_n})}).catch(function(Ln){sn.error("addMedia failure: "+Ln);var Vn=null,or=null;return $t?($t.callControl&&(Vn=$t.callControl.roomName,or=$t.callControl.type),Gn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",$t.callId,Vn,or)):xt&&Gn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",xt.userMediaId,null,"publish"),In(Ln)})})},this.updateMediaDeviceOnCall=function(lt,Tt){return sn.info("updateMediaDeviceOnCall for callId :"+lt),this.addMedia(lt,!0,Tt),lt},this.updateMediaTypeOnCall=function(lt,Tt){var It=function($t,xt,Vt){return new Promise(function(Zt,an){var qt,tn={};$t.callControl.mediaType=Vt,$t.mediaType=Vt,$t.data.mediaType=Vt,$t.updateCause="userAction",tn.type="update",tn.mode="passive",tn.callId=$t.callId,tn.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,tn.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,tn.calleeId=$t.sessionMCU.roomName,tn.roomId=$t.sessionMCU.roomName,tn.callType=xt.attributes.callType,tn.data=(0,ot.S6)($t.data),tn.data.type="subscribe",tn.stream=xt,qt=JSON.stringify(tn),sn.log("C->S: "+qt),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("update",qt),$t.asyncCallbacks={},$t.asyncCallbacks.type="updateMediaType",$t.asyncCallbacks.resolve=Zt,$t.asyncCallbacks.reject=an,$t.asyncCallbacks.timeoutId=setTimeout(function(){$t.asyncCallbacks&&typeof $t.asyncCallbacks.reject=="function"&&($t.asyncCallbacks.reject("timeout"),delete $t.asyncCallbacks)},2e4)})},Dt=this.findCallWithCallId(lt);if(!Dt)return Promise.reject("call not found");if(Dt.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(Dt.asyncCallbacks)return Promise.reject("job already ongoing");var Et=this.MCUClient.getStreamFromList(Dt.streamId);if(!Et)return Promise.reject("wrong streamId");if(Dt.callControl.mediaType==="VIDEO"){if(Tt==="AUDIOONLY"&&Et.audio||Tt==="VIDEOONLY"&&Et.video)return It(Dt,Et,Tt)}else if(Dt.callControl.mediaType==="AUDIOONLY"){if(Tt==="VIDEO"&&Et.video||Tt==="VIDEOONLY"&&Et.video)return It(Dt,Et,Tt)}else if(Dt.callControl.mediaType==="VIDEOONLY"&&(Tt==="VIDEO"&&Et.video||Tt==="AUDIOONLY"&&Et.audio))return It(Dt,Et,Tt);return Promise.reject("wrong mediaType")},this.updateSimulcastFeedOnCall=function(lt,Tt){var It=this.findCallWithCallId(lt);if(!It)return Promise.reject("call not found");if(It.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(It.asyncCallbacks)return Promise.reject("job already ongoing");var Dt=this.MCUClient.getStreamFromList(It.streamId);if(!Dt)return Promise.reject("wrong streamId");if(!Tt)return Promise.reject("wrong simulcast");It.callControl.callConfiguration.simulcast||(It.callControl.callConfiguration.simulcast={}),It.data.simulcast||(It.data.simulcast={}),Tt.streamQuality&&(Tt.streamQuality==="high"?(It.callControl.callConfiguration.simulcast.substream=2,It.data.simulcast.substream=2):Tt.streamQuality==="medium"?(It.callControl.callConfiguration.simulcast.substream=1,It.data.simulcast.substream=1):Tt.streamQuality==="low"?(It.callControl.callConfiguration.simulcast.substream=0,It.data.simulcast.substream=0):(It.callControl.callConfiguration.simulcast.substream=-1,It.data.simulcast.substream=-1)),Tt.streamFrameRate&&(Tt.streamFrameRate==="high"?(It.callControl.callConfiguration.simulcast.temporal=2,It.data.simulcast.temporal=2):Tt.streamFrameRate==="medium"?(It.callControl.callConfiguration.simulcast.temporal=1,It.data.simulcast.temporal=1):Tt.streamFrameRate==="low"?(It.callControl.callConfiguration.simulcast.temporal=0,It.data.simulcast.temporal=0):(It.callControl.callConfiguration.simulcast.temporal=-1,It.data.simulcast.temporal=-1));var Et={type:"updateSimulcastFeed"};Et.callId=It.callId,Et.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.calleeId=It.sessionMCU.roomName,Et.roomId=It.sessionMCU.roomName,Et.callType=Dt.attributes.callType,Et.data=(0,ot.S6)(It.data),Et.stream=Dt;var $t=JSON.stringify(Et);return sn.log("C->S: "+$t),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("updateSimulcastFeed",$t),Promise.resolve()},this.updateCallConfigurationOnCall=function(lt,Tt){var It=function(Et,$t,xt){$t==="audio"?Et.audioSdpDirection=xt?null:"inactive":$t==="video"&&(Et.videoSdpDirection=xt?null:"inactive")},Dt=this.findCallWithCallId(lt);return Dt?Dt.settingUpType!=="publish"?Promise.reject("wrong call type"):Dt.asyncCallbacks?Promise.reject("job already ongoing"):((0,ot.Ym)(Tt,"object")||(Tt={}),(0,ot.ki)(Tt,"audioOnly","boolean")||(Tt.audioOnly=!1),(0,ot.ki)(Tt,"videoOnly","boolean")||(Tt.videoOnly=!1),function(Et,$t){return new Promise(function(xt,Vt){Et.mediaTypeForIncomingCall="NONE",$t.audioOnly===!0?(sn.log("Setting call as audioOnly"),Et.audioOnly=!0,Et.callType="audio",Et.mediaTypeForOutgoingCall="AUDIO",It(Et,"audio",!0),It(Et,"video",!1)):$t.videoOnly===!0?(sn.log("Setting call as videoOnly"),Et.audioOnly=!1,Et.callType="videoOnly",Et.mediaTypeForOutgoingCall="VIDEOONLY",It(Et,"audio",!1),It(Et,"video",!0)):(sn.log("Setting call as media"),Et.audioOnly=!1,Et.callType="media",Et.mediaTypeForOutgoingCall="VIDEO",It(Et,"audio",!0),It(Et,"video",!0)),Et.updateUserMedia=!0,Et.updateCause="userAction",Et.establishCall(),Et.asyncCallbacks={},Et.asyncCallbacks.type="updateCallConfiguration",Et.asyncCallbacks.resolve=xt,Et.asyncCallbacks.reject=Vt,Et.asyncCallbacks.timeoutId=setTimeout(function(){Et.asyncCallbacks&&typeof Et.asyncCallbacks.reject=="function"&&(Et.asyncCallbacks.reject("timeout"),delete Et.asyncCallbacks)},2e4)})}(Dt,Tt)):Promise.reject("call not found")},this.findUserMediaById=function(lt){for(var Tt=this.userMediaTable.length;--Tt>=0;)if(this.userMediaTable[Tt].userMediaId===lt)return this.userMediaTable[Tt];return null},this.findCallIndexWithCallIdAndRemoteId=function(lt,Tt){sn.debug("findCallIndexWithCallIdAndRemoteId");var It,Dt=this.callsTable.length;for(sn.trace("callsNumber : "+Dt),It=0;It<Dt;It+=1)if(this.callsTable[It].callId===lt&&(sn.log("callId found"),sn.log("this.callsTable[i].callee :"+this.callsTable[It].callee),sn.log("this.callsTable[i].calleeId :"+this.callsTable[It].calleeId),this.callsTable[It].callee===!0&&this.callsTable[It].callerId===Tt||this.callsTable[It].callee===!1&&this.callsTable[It].calleeId===Tt))return It;return sn.log("Call not found"),-1},this.findCallIndexWithConfIdAndRemoteId=function(lt,Tt){sn.debug("findCallIndexWithConfIdAndRemoteId"),sn.log("confId :"+lt),sn.log("remoteId :"+Tt);var It,Dt=this.callsTable.length;for(It=0;It<Dt;It+=1)if(sn.log("this.callsTable[i].data.confId :"+this.callsTable[It].data.confId),this.callsTable[It].data.confId===lt){if(this.callsTable[It].callee===!0&&this.callsTable[It].callerId===Tt||this.callsTable[It].callee===!1&&this.callsTable[It].calleeId===Tt)return It}else sn.debug("ConfId is different");return sn.debug("Call not found - findCallIndexWithConfIdAndRemoteId"),-1},this.findCallIndexWithCallId=function(lt){sn.debug("findCallIndexWithCallId");var Tt,It=this.callsTable.length;for(Tt=0;Tt<It;Tt+=1)if(this.callsTable[Tt].callId===lt)return sn.log("Call found with callId"),Tt;return sn.debug("Call not found - findCallIndexWithCallId"),-1},this.findCallWithCallIdAndInstanceId=function(lt,Tt){sn.debug("findCallWithCallIdAndInstanceId :"+lt+" ,instanceId : "+Tt),Tt===void 0&&sn.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var It,Dt=this.callsTable.length;for(sn.trace("callsNumber :"+Dt),It=0;It<Dt;It+=1)if(this.callsTable[It].callId===lt&&this.callsTable[It].instanceId===Tt)return this.callsTable[It];return sn.debug("Call not found, findCallWithCallIdAndInstanceId"),null},this.findCallIndexWithCallIdAndInstanceId=function(lt,Tt){sn.debug("findCallIndexWithCallIdAndInstanceId :"+lt+" ,instanceId : "+Tt),Tt===void 0&&sn.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var It,Dt=this.callsTable.length;for(sn.trace("callsNumber :"+Dt),It=0;It<Dt;It+=1)if(this.callsTable[It].callId===lt&&this.callsTable[It].instanceId===Tt)return It;return sn.debug("Call not found, findCallIndexWithCallIdAndInstanceId"),-1},this.findCallWithCallId=function(lt){sn.trace("findCallWithCallId :"+lt);var Tt,It=this.callsTable.length;for(sn.trace("callsNumber :"+It),Tt=0;Tt<It;Tt+=1)if(sn.trace("this.callsTable[i].callId :"+this.callsTable[Tt].callId),this.callsTable[Tt].callId===lt)return this.callsTable[Tt];return sn.debug("Call not found"),null},this.findCallWithStreamId=function(lt,Tt){sn.debug("findCallWithStreamId :"+lt);var It,Dt=!(!Tt||!Tt.ignoreModeChangeKindOld),Et=this.callsTable.length;for(sn.trace("callsNumber :"+Et),It=0;It<Et;It+=1)if(sn.log("this.callsTable[i].streamId :"+this.callsTable[It].streamId),!(this.callsTable[It].streamId!=lt||Dt&&this.callsTable[It].sessionMCU&&this.callsTable[It].sessionMCU.modeChangeKind==="old"))return sn.log("Call found"),this.callsTable[It];return sn.log("Call not found"),null},this.findCallWithCallIdAndRemoteIdAndInstanceId=function(lt,Tt,It){sn.debug("findCallWithCallIdAndRemoteIdAndInstanceId callId : "+lt+" ,instanceId : "+It);var Dt,Et=this.callsTable.length;for(sn.trace("callsNumber :"+Et),Dt=0;Dt<Et;Dt+=1)if(this.callsTable[Dt].callId===lt&&this.callsTable[Dt].instanceId===It&&(this.callsTable[Dt].callee===!0&&this.callsTable[Dt].callerId===Tt||this.callsTable[Dt].callee===!1&&this.callsTable[Dt].calleeId===Tt))return this.callsTable[Dt];return sn.debug("Call not found"),null},this.findCallWithCallIdAndRemoteId=function(lt,Tt){sn.log("findCallWithCallIdAndRemoteId");var It,Dt=this.callsTable.length;for(sn.trace("callsNumber :"+Dt),It=0;It<Dt;It+=1)if(this.callsTable[It].callId===lt&&(this.callsTable[It].callee===!0&&this.callsTable[It].callerId===Tt||this.callsTable[It].callee===!1&&this.callsTable[It].calleeId===Tt))return this.callsTable[It];return sn.log("Call not found"),null},this.releaseUserMedia=function(){sn.info("releaseUserMedia"),this.localStream!==null&&(sn.log("stopping localStream"),this.stopStream(this.localStream),Gn.createUserMediaStopEvent(null,"media"),this.accessToLocalMedia=!1,this.autoAnswer=!1,sn.log("this.autoAnswer :"+this.autoAnswer)),this.screenStream!==null&&this.screenStream!==void 0&&(sn.log("stopping screenStream"),this.stopStream(this.screenStream),Gn.createUserMediaStopEvent(null,"screen"))},this.startDataChannelOnCall=function(lt){sn.info("startDataChannelOnCall with callId :"+lt);var Tt=this.findCallWithCallId(lt);Tt?(sn.log("Call found",Tt),Tt.addingDataChannelOnCallOngoing=!0,Tt.createDataChannel()):sn.log("Call not found")},this.sendDataWithCallId=function(lt,Tt,It){sn.info("sendDataWithCallId :"+lt);var Dt=this.findCallWithCallId(lt);Dt?(sn.log("Call found",Dt),Dt.sendData(Tt,It)):sn.log("Call not found")},this.processDataAck=function(lt){sn.debug("processDataAck",lt);var Tt=this.findCallWithCallId(lt.callId);if(Tt)if(lt.result==="ok")if((0,ot.ki)(lt,"capabilities","object")&&(0,ot.ki)(lt.capabilities,"dataEndAckEnabled","boolean")&&(Tt.dataEndAckEnabled=lt.capabilities.dataEndAckEnabled,sn.debug("dataEndAckEnabled",Tt.dataEndAckEnabled)),lt.state==="complete")Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.success({state:"complete",filename:Tt.data.filename,size:Tt.data.size,mediaURL:lt.mediaURL,mediaId:lt.mediaId}),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId);else if(lt.state==="incomplete"){var It,Dt,Et=131072,$t=[],xt=Math.floor(Tt.data.size/Et),Vt=Tt.data.size%Et;for(It=0;It<xt;It+=1)(Dt=Hn("checksum64")).update(Tt.fileContent,It*Et,Et),$t.push(Dt.digest("hex"));if(Vt>0&&((Dt=Hn("checksum64")).update(Tt.fileContent,xt*Et,Vt),$t.push(Dt.digest("hex"))),sn.debug(JSON.stringify($t)),lt.checksums.length===$t.length){for(It=0;It<$t.length&&lt.checksums[It]===$t[It];It+=1);Tt.data.offset=Et*It}Tt.mediaURL=lt.mediaURL,Tt.mediaId=lt.mediaId,Tt.establishCall()}else lt.state==="missing"?(Tt.mediaURL=lt.mediaURL,Tt.mediaId=lt.mediaId,Tt.establishCall()):lt.state==="ready"?Tt.establishCall():(sn.debug("wrong state "+lt.state),Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId));else sn.debug("wrong result "+lt.result),Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId);else sn.debug("no such call",lt.callId)},this.processDataEndAck=function(lt){sn.debug("processDataEndAck",lt);var Tt=this.findCallWithCallId(lt.callId);if(Tt){var It=null;if(!Tt.dcfs){if(!Tt.data||Tt.data.transferType!=="pipeline")return void sn.debug("not pipeline");sn.debug("pipeline"),It=Tt,Tt.clientCall?(sn.debug("resolve client call"),Tt=Tt.clientCall):(sn.debug("no client call"),Tt=null)}Tt&&(Tt.success&&lt.data&&(Tt.success.data=lt.data),lt.result==="ok"?(lt.complete===!0||(delete Tt.success,Tt.failure="transferIncomplete"),Tt.dcfs.terminateTransfer()):lt.result==="error"&&(delete Tt.success,Tt.failure=lt.errorInfo,Tt.dcfs.terminateTransfer())),It&&lt.result==="error"&&(sn.debug("error on pipeline"),It.failure=lt.errorInfo,Gn.createEvent({eventType:"onFileSended",callId:It.callId,remoteId:It.remoteId,name:It.filename,error:It.failure}),It.callbacks.failure(It.failure),this.onHangup(It.callId))}else sn.debug("no such call",lt.callId)},this.pushData=function(lt,Tt,It,Dt){var Et=this;if(!(0,ot.Ym)(Tt,"object")||((Tt=Object.assign({},Tt)).transferType||(Tt.transferType="file"),Tt.transferType==="file"&&!lt)||Tt.transferType!=="file"&&Tt.transferType!=="pipeline"&&Tt.transferType!=="plugin"||!(Tt.transferType!=="plugin"||Tt.pluginName&&Tt.pluginData))return null;(0,ot.Ym)(Dt,"object")||(Dt={}),typeof Dt.pending!="function"&&(Dt.pending=function(){}),typeof Dt.progress!="function"&&(Dt.progress=function(){}),typeof Dt.success!="function"&&(Dt.success=function(){}),typeof Dt.failure!="function"&&(Dt.failure=function(){});var $t=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient);if($t.generateCallId(),$t.instanceId=apiCC.generateInstanceId(),$t.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,$t.calleeId="dataChannelConnector",$t.dest_roomId="dataChannelConnector",$t.callType="data",$t.dataCall=!0,$t.remoteId="dataChannelConnector",Tt.pipelineCallId&&($t.pipelineCallId=Tt.pipelineCallId),$t.data={},$t.data.pubSub="dataChannelConnector",$t.data.transferType=Tt.transferType,Tt.transferType==="pipeline"?(Tt.checksumEnabled=!1,$t.transferCount=0):Tt.transferType==="plugin"&&(Tt.checksumEnabled=!1,$t.data.pluginName=Tt.pluginName,$t.data.pluginData=Object.assign({},Tt.pluginData),$t.data.pluginData.headers&&($t.data.pluginData.headers=Object.assign({},$t.data.pluginData.headers)),$t.data.pluginData.data&&($t.data.pluginData.data=Object.assign({},$t.data.pluginData.data)),$t.data.pluginData.formData&&($t.data.pluginData.formData=Object.assign({},$t.data.pluginData.formData))),(0,ot.ki)(Tt,"context","object"))try{JSON.stringify(Tt.context),$t.data.context=Object.assign({},Tt.context)}catch{}if(Tt.overwrite===!0&&($t.data.overwrite=!0),(0,ot.Ym)(Tt,"ttl","number")&&Tt.ttl>0&&($t.data.ttl=Tt.ttl),$t.data.instanceId=$t.instanceId,lt&&($t.data.cloudConvId=lt),$t.callbacks=Dt,It!=null&&It.turnServerAddress!==void 0&&It.turnServerAddress!==null&&$t.setCallTurnServer(It.turnServerAddress),$t.data.transferType==="pipeline")$t.data.size=0,$t.pushDataStatus={type:"pipeline",state:"pending",data:Tt},this.callsTable.push($t),setTimeout(function(){Et.startNextPushData()});else if((0,ot.Ym)(Tt,"file","object")&&(Tt.file instanceof File||Tt.file.constructor===File||Tt.asFile===!0))(0,ot.Ym)(Tt,"filename","string")?$t.data.filename=Tt.filename:$t.data.filename=Tt.file.name,(0,ot.Ym)(Tt,"filetype","string")?$t.data.contentType=Tt.filetype:$t.data.contentType=Tt.file.type,(0,ot.Ym)(Tt,"sourceType","string")&&Tt.sourceType.length>0&&($t.data.sourceType=Tt.sourceType),$t.data.size=Tt.file.size,$t.data.metadata=Tt.metadata,$t.pushDataStatus={type:"file",state:"pending",convId:String(lt),data:Tt},this.callsTable.push($t),setTimeout(function(){Et.startNextPushData()});else{if(!(0,ot.Ym)(Tt,"buffer","object")||!(Tt.buffer instanceof ArrayBuffer||Tt.buffer.constructor===ArrayBuffer||Tt.asBuffer===!0)||!(0,ot.Ym)(Tt,"filename","string")||!(0,ot.Ym)(Tt,"filetype","string"))return null;$t.data.filename=Tt.filename,$t.data.contentType=Tt.filetype,(0,ot.Ym)(Tt,"sourceType","string")&&Tt.sourceType.length>0&&($t.data.sourceType=Tt.sourceType),$t.data.size=Tt.buffer.byteLength,$t.data.metadata=Tt.metadata,$t.pushDataStatus={type:"buffer",state:"pending",convId:String(lt),data:Tt},this.callsTable.push($t),setTimeout(function(){Et.startNextPushData()})}return $t.callId},this.startNextPushData=function(){for(var lt=this,Tt=[],It=0;It<this.callsTable.length;It+=1){var Dt=this.callsTable[It];if(Dt.callType==="data"&&Dt.dataCall&&Dt.remoteId==="dataChannelConnector"&&Dt.pushDataStatus){if(Dt.pushDataStatus.state==="ready")continue;Tt.push(Dt)}}if(Tt.length===0)return!1;var Et=null;Tt[0].pushDataStatus.state==="active"?Tt.splice(0,1):Tt[0].pushDataStatus.state==="pending"&&(Et=Tt[0],Tt.splice(0,1));for(var $t=0;$t<Tt.length;$t+=1){var xt=Tt[$t];xt.pushDataStatus.rank!==$t&&(xt.pushDataStatus.rank=$t,Gn.createEvent({eventType:"onFilePending",callId:xt.callId,remoteId:xt.remoteId,name:xt.data.filename,rank:$t}),xt.callbacks.pending({state:"pending",callId:xt.callId,rank:$t}))}if(!Et)return!1;sn.debug("startNextPushData",Et.callId);var Vt=Et.pushDataStatus.data;if(delete Et.pushDataStatus.data,Et.pushDataStatus.type==="pipeline"){Et.pushDataStatus.state="active";var Zt={type:"pushData",callerId:apiCC.session.apiCCId,callId:Et.callId,data:Et.data},an=JSON.stringify(Zt);return sn.debug("C->S: "+an),apiCC.session.channel.socket.emit("pushData",an),!0}if(Et.pushDataStatus.type==="file"){Et.pushDataStatus.state="active";var qt=new FileReader;qt.onload=function(tn){apiCC.session.apiCCWebRTCClient.webRTCClient.startPushData(Et,Vt,tn.target.result)},qt.readAsArrayBuffer(Vt.file)}else{if(Et.pushDataStatus.type!=="buffer")return sn.error("startNextPushData - wrong type"),Et.callbacks.failure("start",Et.callId),this.onHangup(Et.callId),!1;Et.pushDataStatus.state="active",this.startPushData(Et,Vt,Vt.buffer)}return Et.beginTimeoutId=setTimeout(function(){delete Et.beginTimeoutId,Et.callbacks.failure("timeout",Et.callId),lt.onHangup(Et.callId)},2e4),!0},this.startPushData=function(lt,Tt,It){if(lt.fileContent=new Uint8Array(It),lt.pipelineCallId){var Dt=this.findCallWithCallId(lt.pipelineCallId);if(!Dt)return sn.error("no such pipeline call"),void this.onHangup(lt.callId);lt.pipelineCall=Dt,Dt.clientCall=lt,lt.sendDataChannel=Dt.sendDataChannel;var Et=Dt.transferCount===0?100:0;lt.startTransfer({delay:Et}),Dt.transferCount+=1}else{if(!Object.prototype.hasOwnProperty.call(Tt,"checksumEnabled")||Tt.checksumEnabled){var $t=Hn("checksum64");$t.update(lt.fileContent),lt.data.checksum=$t.digest("hex")}else lt.data.checksumEnabled=!1;var xt={type:"pushData",callerId:apiCC.session.apiCCId,convId:lt.pushDataStatus.convId,callId:lt.callId,data:lt.data},Vt=JSON.stringify(xt);sn.debug("C->S: "+Vt),apiCC.session.channel.socket.emit("pushData",Vt)}},this.cancelPushData=function(lt){for(var Tt=null,It=this.callsTable.length;--It>=0;){var Dt=this.callsTable[It];if(Dt.callId===lt&&Dt.callType==="data"&&Dt.dataCall&&Dt.remoteId==="dataChannelConnector"&&Dt.pushDataStatus){Tt=Dt;break}}if(!Tt)return sn.error("cancelPushData - no such call",lt),"no such call";if(Tt.pushDataStatus.state==="pending")Gn.createEvent({eventType:"onFileSended",callId:Tt.callId,remoteId:Tt.remoteId,name:Tt.data.filename,error:"canceled"}),Tt.callbacks.failure("canceled"),this.onHangup(Tt.callId);else if(Tt.pushDataStatus.state==="active")this.onHangup(Tt.callId);else{if(Tt.pushDataStatus.state!=="ready")return sn.error("cancelPushData - wrong state"),"wrong state";Tt.clientCall&&this.cancelPushData(Tt.clientCall.callId),Tt.success={state:"complete"},Gn.createEvent({eventType:"onFileSended",callId:Tt.callId,remoteId:Tt.remoteId}),Tt.callbacks.success(Tt.success),this.onHangup(Tt.callId)}return null},this.setVideoBandwidth=function(lt,Tt,It){if(typeof lt=="number"){var Dt=!1,Et=!1;if(Tt==="overall"?It==="incoming"?lt>0?(this.videoBandwidthSettings.overallIncoming=lt,Dt=!0):(delete this.videoBandwidthSettings.overallIncoming,Dt=!0):It==="outgoing"&&(lt>0?(this.videoBandwidthSettings.overallOutgoing=lt,Dt=!0,Et=!0):(delete this.videoBandwidthSettings.overallOutgoing,Dt=!0,Et=!0)):Tt==="perCall"?It==="incoming"?lt>0?(this.videoBandwidthSettings.perCallIncoming=lt,Dt=!0):(delete this.videoBandwidthSettings.perCallIncoming,Dt=!0):It==="outgoing"&&(lt>0?(this.videoBandwidthSettings.perCallOutgoing=lt,Dt=!0,Et=!0):(delete this.videoBandwidthSettings.perCallOutgoing,Dt=!0,Et=!0)):Tt==="remote"&&(this.videoRemoteBandwidth=lt),Dt)for(var $t=this.MCUClient.sessionMCUs.length;--$t>=0;){var xt={type:"info",infoType:"setVideoBandwidthSettings",data:{clientId:this.clientId,roomId:this.MCUClient.sessionMCUs[$t].roomName,pubSub:this.MCUClient.pubConnector,videoBandwidthSettings:this.videoBandwidthSettings}},Vt=JSON.stringify(xt);sn.log("C->S: "+Vt),apiCC.session.channel.socket.emit("info",Vt)}Et&&this.evalOutgoingVideoBandwithCap()}else sn.error("Unvalid target bandwidth usage value needs to be a number :",lt)},this.setAudioBandwidth=function(lt){this.audioBandwidth=lt},this.setDataBandwidth=function(lt){this.dataBandwidth=lt},this.processCheckCallStatus=function(lt){this.MCUClient.processCheckCallStatus(lt);var Tt={type:"updateCallStatus",clientId:this.clientId,data:{}};lt.data.pubSub&&(Tt.data.pubSub=lt.data.pubSub),Tt.sessions=[];for(var It=0;It<this.MCUClient.sessionMCUs.length;It+=1)Tt.sessions.push(this.MCUClient.createSessionDescriptor(this.MCUClient.sessionMCUs[It]));Tt.calls=[];for(var Dt=0;Dt<this.userMediaTable.length;Dt+=1){var Et=this.userMediaTable[Dt];Tt.calls.push({callId:Et.userMediaId,callType:Et.callType,remoteId:Et.remoteId,roomId:Et.roomId,data:Et.data,meshPublish:!0})}for(var $t=0;$t<this.callsTable.length;$t+=1){var xt=this.callsTable[$t];Tt.calls.push({callId:xt.callId,callType:xt.callType,remoteId:xt.remoteId,roomId:xt.roomId,data:xt.data,remoteStream:xt.mcuRemoteStream})}var Vt=JSON.stringify(Tt);apiCC.session.channel.socket.emit("updateCallStatus",Vt)},this.processRemoteStreamAdded=function(lt,Tt){if(lt.sessionMCU&&lt.sessionMCU.modeChangeKind==="new"){sn.debug("processRemoteStreamAdded",lt);var It=this.MCUClient.getSessionMCU(null,{callback:function(Et){return Et.roomName===lt.sessionMCU.roomName&&Et.modeChangeKind==="old"}});if(!It)return void sn.error("wrong roomId: no such old session");sn.debug("oldSessionMCU",It);for(var Dt=this.callsTable.length;--Dt>=0;)if(this.callsTable[Dt].sessionMCU===It&&(0,ot.ki)(this.callsTable[Dt],["mcuRemoteStream","attributes","callId"],"string")&&this.callsTable[Dt].mcuRemoteStream.attributes.callId===lt.mcuRemoteStream.attributes.callId){sn.debug("processRemoteStreamAdded: bye",this.callsTable[Dt]),this.removeCallFromTableWithCallIdAndSendBye(this.callsTable[Dt].callId);break}}},this.processDistantCallEstablished=function(lt){if(sn.debug("processDistantCallEstablished",lt),(0,ot.ki)(lt,["descriptor","callFeed","callId"],"string"))if(lt.descriptor.callFeed.clientId===this.clientId){var Tt=null;if(lt.descriptor.callMode==="mesh"?Tt=this.MCUClient.getSessionMCU(null,{callback:function(_n){return _n.roomName===lt.descriptor.roomId&&_n.roomMode==="mesh"}}):lt.descriptor.callMode==="sfu"&&(Tt=this.MCUClient.getSessionMCU(null,{callback:function(_n){return _n.roomName===lt.descriptor.roomId&&!_n.hasOwnProperty("roomMode")}})),Tt){sn.debug("sessionMCU",Tt);var It=null,Dt=null;if(lt.descriptor.callMode==="mesh"?(It=this.findUserMediaById(lt.descriptor.callFeed.callId),sn.debug("userMedia",It)):(Dt=this.findCallWithCallId(lt.descriptor.callFeed.callId),sn.debug("call",Dt)),lt.active){if(!It&&!Dt)return void sn.debug("wrong callId: no such call");for(var Et=this.MCUClient.distantCalls.length;--Et>=0&&(this.MCUClient.distantCalls[Et].roomId!==lt.descriptor.roomId||this.MCUClient.distantCalls[Et].clientId!==lt.descriptor.clientId||this.MCUClient.distantCalls[Et].callId!==lt.descriptor.callId););if(Et>=0){if(!this.MCUClient.distantCalls[Et].early)return void sn.debug("processDistantCallEstablished: descriptor already exists");sn.debug("processDistantCallEstablished: replace early descriptor",this.MCUClient.distantCalls[Et],lt.descriptor),this.MCUClient.distantCalls[Et]=lt.descriptor}else sn.debug("processDistantCallEstablished: add descriptor",lt.descriptor),this.MCUClient.distantCalls.push(lt.descriptor)}else if(Tt.modeChangeKind==="old"){for(var $t=this.MCUClient.distantCalls.length;--$t>=0;)if(this.MCUClient.distantCalls[$t].roomId===lt.descriptor.roomId&&this.MCUClient.distantCalls[$t].clientId===lt.descriptor.clientId&&this.MCUClient.distantCalls[$t].callId===lt.descriptor.callId){sn.debug("processDistantCallEstablished: set descriptor to removed",this.MCUClient.distantCalls[$t]),this.MCUClient.distantCalls[$t].removed=!0;break}}else for(var xt=this.MCUClient.distantCalls.length;--xt>=0;)if(this.MCUClient.distantCalls[xt].roomId===lt.descriptor.roomId&&this.MCUClient.distantCalls[xt].clientId===lt.descriptor.clientId&&this.MCUClient.distantCalls[xt].callId===lt.descriptor.callId){sn.debug("processDistantCallEstablished: remove descriptor",this.MCUClient.distantCalls[xt]),this.MCUClient.distantCalls.splice(xt,1);break}if(Tt.modeChangeKind==="new"){var Vt=this.MCUClient.getSessionMCU(null,{callback:function(_n){return _n.roomName===lt.descriptor.roomId&&_n.modeChangeKind==="old"}});if(!Vt)return void sn.error("wrong roomId: no such old session");sn.debug("oldSessionMCU",Vt),sn.debug("processDistantCallEstablished: replacement");for(var Zt=!1,an=this.userMediaTable.length;--an>=0;){var qt=this.userMediaTable[an];if(qt.sessionMCU===Vt){var tn=!1,gn=0;sn.debug("processDistantCallEstablished: userMedia",qt);for(var rn=qt.distantCalls.length;--rn>=0;)qt.distantCalls[rn].replaced?gn+=1:qt.distantCalls[rn].callFeed.callId===lt.descriptor.callFeed.callId&&(sn.debug("processDistantCallEstablished: distantCall",qt.distantCalls[rn]),tn=!0,qt.distantCalls[rn].replaced=!0,gn+=1);if(tn){if(gn===qt.distantCalls.length){sn.debug("processDistantCallEstablished: remove replaced distant call descriptors");for(var pn=this.MCUClient.distantCalls.length;--pn>=0;)this.MCUClient.distantCalls[pn].callMode==="mesh"&&this.MCUClient.distantCalls[pn].callFeed.callId===qt.userMediaId&&this.MCUClient.distantCalls[pn].replaced&&(sn.debug("processDistantCallEstablished: remove distantCall",this.MCUClient.distantCalls[pn]),this.MCUClient.distantCalls.splice(pn,1));sn.debug("processDistantCallEstablished: close old calls");for(var In=this.callsTable.slice(),Pn=In.length;--Pn>=0;)(0,ot.ki)(In[Pn].data,"mesh","object")&&In[Pn].data.mesh.calleeCallId===qt.userMediaId&&In[Pn].settingUpType!=="subscribe"&&this.removeCallFromTableWithCallIdAndSendBye(In[Pn].callId);this.MCUClient.meshOnHangup(qt.userMediaId),Zt=!0}break}}}Zt&&this.finalizeMeshToJanusTransition(Vt,Tt)}}else sn.debug("wrong roomId: no such session")}else sn.debug("wrong clientId: message not intended for self");else sn.debug("wrong format: missing callFeed")},this.finalizeMeshToJanusTransition=function(lt,Tt){var It=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};sn.debug("finalizeMeshToJanusTransition");var Dt=0,Et=0;if(It.force===!0){for(var $t=this.callsTable.slice(),xt=$t.length;--xt>=0;){var Vt=$t[xt];Vt.sessionMCU===lt&&((Vt.settingUpType==="publish"||Vt.settingUpType==="shareScreen")&&Vt.data&&Vt.data.mesh?this.onHangup(Vt.callId):this.onHangup(Vt.callId,"disconnected"))}for(var Zt=this.userMediaTable.slice(),an=Zt.length;--an>=0;){var qt=Zt[an];qt.sessionMCU===lt&&this.onHangup(qt.userMediaId,"disconnected")}}else for(var tn=this.userMediaTable.length;--tn>=0;){var gn=this.userMediaTable[tn];if(gn.sessionMCU===lt){Dt+=1;for(var rn=0,pn=gn.distantCalls.length;--pn>=0;)sn.debug("finalizeMeshToJanusTransition: distantCall",gn.distantCalls[pn]),gn.distantCalls[pn].replaced&&(rn+=1);rn===gn.distantCalls.length&&(Et+=1)}}Dt===Et&&(sn.debug("finalizeMeshToJanusTransition: finalize transition"),Tt.transitionTimeoutId&&(clearTimeout(Tt.transitionTimeoutId),delete Tt.transitionTimeoutId),this.MCUClient.removeSessionMCU(lt),delete Tt.modeChangeKind,this.MCUClient.transitionCount-=1,this.MCUClient.transitionCount<=0&&this.evalOutgoingVideoBandwithCap(),Gn.createMCURoomModeChangedEvent(Tt.roomName,"mesh","sfu","complete"))},this.processConfigureEncodings=function(lt){var Tt=this.findCallWithCallId(lt.callId);if(Tt&&Object.prototype.hasOwnProperty.call(lt,"command")&&Tt.simulcast==="RID"){var It={};Object.prototype.hasOwnProperty.call(lt,"maxBitrate")&&(It.maxBitrate=lt.maxBitrate),Tt.configureSimulcastEncodings(lt.command,It)}},this.processSimulcastFeedChanged=function(lt){var Tt=this.findCallWithCallId(lt.callId);if(Tt){var It={};lt.substream===2?It.streamQuality="high":lt.substream===1?It.streamQuality="medium":lt.substream===0&&(It.streamQuality="low"),lt.temporal===2?It.streamFrameRate="high":lt.temporal===1?It.streamFrameRate="medium":lt.temporal===0&&(It.streamFrameRate="low"),Object.keys(It).length>0&&Gn.createSimulcastFeedChanged(Tt.callId,It)}},this.hasReceiptHook=function(lt){if(!lt||typeof lt!="string")throw new Error("wrong receiptId");return Object.prototype.hasOwnProperty.call(this.receiptHooks,lt)},this.createReceiptHook=function(lt,Tt){var It=this;if(this.hasReceiptHook(lt))throw new Error("receiptHook already exists");if(!Tt||Tt.fulfilled!==!1)throw new Error("wrong future");Tt.onFulfillment(function(){delete It.receiptHooks[lt]}),this.receiptHooks[lt]=Tt},this.finalizeReceiptHookFailure=function(lt,Tt){if(sn.debug("finalizeReceiptHookFailure",lt,Tt),!lt||typeof lt!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,lt))throw new Error("receiptHook does not exist");this.receiptHooks[lt].fulfill(Tt)},this.finalizeReceiptHookSuccess=function(lt,Tt){if(sn.debug("finalizeReceiptHookSuccess",lt,Tt),!lt||typeof lt!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,lt))throw new Error("receiptHook does not exist");this.receiptHooks[lt].fulfill(null,Tt)},this.processReceipt=function(lt){if(lt&&nr(lt)==="object"){var Tt=lt.receiptId,It=lt.result;if(Tt&&typeof Tt=="string")try{this.finalizeReceiptHookSuccess(Tt,It)}catch(Dt){sn.debug("processReceipt: finalizeReceiptHookSuccess",Dt)}else sn.warn("processReceipt: wrong receiptId")}else sn.warn("processReceipt: wrong msg")},this.processError=function(lt){var Tt=lt.receiptId,It=lt.errorInfo,Dt=lt.errorCode,Et=lt.callId,$t=lt.roomId,xt=lt.convId;if(Tt&&typeof Tt=="string")try{this.finalizeReceiptHookFailure(Tt,new Error(It))}catch(Vt){sn.debug("processError: finalizeReceiptHookFailure",Vt)}Gn.createErrorEvent(It,Dt,Et,$t,null,null,xt)},this.createCallControl=function(lt){var Tt=new Bn(lt);return this.callControlTable.push(Tt),Tt},this.destroyCallControl=function(lt){if(lt.multi){if(!lt.roomName)return sn.warn("findCallControl: cannot destroy without roomName"),null;for(var Tt=[],It=this.callControlTable.length;--It>=0;)this.callControlTable[It].roomName===lt.roomName&&(Tt.push(this.callControlTable[It]),this.callControlTable.splice(It,1));return Tt}var Dt=this.findCallControl(lt,{accept:"index"});if(Dt!==null&&Dt>=0){var Et=this.callControlTable[Dt];return this.callControlTable.splice(Dt,1),Et}return null},this.findCallControl=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=Tt.accept==="index";if(lt.type==="publish"||lt.type==="shareScreen"){if(!lt.callId)return sn.warn("findCallControl: cannot search without callId"),null;for(var Dt=null,Et=null,$t=this.callControlTable.length;--$t>=0;)if((this.callControlTable[$t].type==="publish"||this.callControlTable[$t].type==="shareScreen")&&this.callControlTable[$t].callId===lt.callId){Dt=this.callControlTable[$t],Et=$t;break}return Dt?It?Et:Dt:null}if(lt.type==="subscribe"){if(!(0,ot.ki)(lt,"stream","object")||!Object.prototype.hasOwnProperty.call(lt.stream,"id")||!(0,ot.ki)(lt.stream,"attributes","object"))return sn.warn("findCallControl: cannot search without stream"),null;for(var xt=null,Vt=null,Zt=this.callControlTable.length;--Zt>=0;)if(this.callControlTable[Zt].type==="subscribe"&&(this.callControlTable[Zt].stream.id===lt.stream.id||this.callControlTable[Zt].stream.attributes.callerId===lt.stream.attributes.callerId&&this.callControlTable[Zt].stream.attributes.callId===lt.stream.attributes.callId)){xt=this.callControlTable[Zt],Vt=Zt;break}return xt?It?Vt:xt:null}return sn.warn("findCallControl: wrong type",lt.type),null},this.getCallControls=function(lt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It={};if(Tt.addUserMedia)for(var Dt=this.userMediaTable.length;--Dt>=0;){var Et=this.userMediaTable[Dt];It[Et.userMediaId]=Et}if(lt){for(var $t=this.callControlTable.length;--$t>=0;){var xt=this.callControlTable[$t];lt.indexOf(xt.type)>=0&&(It[xt.callId]=xt)}return It}for(var Vt=this.callControlTable.length;--Vt>=0;){var Zt=this.callControlTable[Vt];It[Zt.callId]=Zt}return It},this.getCallIds=function(lt){for(var Tt=[],It=this.callControlTable.length;--It>=0;){var Dt=this.callControlTable[It];lt.indexOf(Dt.type)>=0&&Tt.push(Dt.callId)}return Tt},this.evalOutgoingVideoBandwithCap=function(lt){if(sn.debug("evalOutgoingVideoBandwithCap"),!(this.MCUClient.transitionCount>0)){var Tt=null;this.videoBandwidthSettings.perCallOutgoing&&(Tt=this.videoBandwidthSettings.perCallOutgoing);for(var It=[],Dt=this.callsTable.length;--Dt>=0;)this.callsTable[Dt].belongsToRoom()&&this.callsTable[Dt].settingUpType!=="publish"&&this.callsTable[Dt].settingUpType!=="shareScreen"||this.callsTable[Dt].localCallProfile&&this.callsTable[Dt].localCallProfile.video&&this.callsTable[Dt].localCallProfile.videoActive&&It.push(this.callsTable[Dt]);if(It.length===0)return Tt;if(this.videoBandwidthSettings.overallOutgoing){var Et=Math.floor(this.videoBandwidthSettings.overallOutgoing/It.length);Tt=Tt?Math.min(Tt,Et):Et}for(var $t=It.length;--$t>=0;)lt&&It[$t]===lt?Tt&&It[$t].videoCap!==Tt?(It[$t].videoCap=Tt,this.rtpSenderSetParamatersCapable&&It[$t].applyOutgoingBitrate(It[$t].videoCap)):!Tt&&It[$t].videoCap&&(delete It[$t].videoCap,this.rtpSenderSetParamatersCapable&&It[$t].applyOutgoingBitrate(null)):Tt&&It[$t].videoCap!==Tt?(It[$t].videoCap=Tt,this.rtpSenderSetParamatersCapable?It[$t].applyOutgoingBitrate(It[$t].videoCap):setTimeout(function(xt){xt.belongsToRoom()||!xt.callee?(xt.updateUserMedia=!0,xt.establishCall()):sn.debug("Call is not to be updated")},0,It[$t])):!Tt&&It[$t].videoCap&&(delete It[$t].videoCap,this.rtpSenderSetParamatersCapable?It[$t].applyOutgoingBitrate(null):setTimeout(function(xt){xt.belongsToRoom()||!xt.callee?(xt.updateUserMedia=!0,xt.establishCall()):sn.debug("Call is not to be updated")},0,It[$t]));return Tt}sn.debug("evalOutgoingVideoBandwithCap - transition ongoing")},this.callback=function(lt,Tt){return this.closureHandler=function(It){return lt[Tt](It)},this.closureHandler},this.callbackWithParams=function(lt,Tt){return this.closureHandler=function(It,Dt,Et){return lt[Tt](It,Dt,Et)},this.closureHandler},this.simulatedAgentLaunchWaitingCall=function(){this.socket.emit("simulatedAgentLaunchWaitingCall",{type:"simulatedAgentLaunchWaitingCall"})}},Fn=(s(2707),et.Y.get("PreCallTest")),Xn=125e3,Yn=2e4,Nn=apiCC.myWebRTC_Event,Un=function(Kt,Ot,lt,Tt,It){var Dt=this;this.webRTCClient=Kt.webRTCClient,this.notifyTerminated=Kt.notifyTerminated,this.audioSourceId=Tt,this.videoSourceId=It,this.testId="initial",this.stepId="initial",this.report={tests:[],resolutions:[],failurCause:""},this.maxHeight=240,this.maxWidth=320,this.resolutions=[[320,240,"QVGA"],[640,480,"VGA"],[1024,576,"SD"],[1280,720,"HD 720p"],[1920,1080,"HD 1080p"]],this.currentResolution=0,this.userMediastreamId=null,lt==="simpleVideoRecordTest"&&(Fn.warn("Simple video record test is activated"),this.simpleVideoRecordTest=!0),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled===!0&&(Fn.debug("Forcing meshModeEnabled to false for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!1,this.modifyMeshModeEnabledValueBeforePreCall=!0),this.generateId=function(Et){for(var $t="",xt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Vt=0;Vt<Et;Vt+=1)$t+=xt.charAt(Math.floor(Math.random()*xt.length));return $t},this.generateRoomId=function(){return"PC-"+this.generateId(4)+"-"+this.generateId(4)+"-"+this.generateId(4)},this.pushStats=function(Et,$t){return Et.data.push($t),!0},this.evalQuartiles=function(Et,$t,xt){var Vt=[];if(xt===void 0?Et.forEach(function(Qr){typeof Qr[$t]=="number"&&Vt.push(Qr[$t])}):Et.forEach(function(Qr){Vt.push(xt(Qr[$t]))}),Vt.sort(function(Qr,Jr){return Qr<Jr?-1:Qr===Jr?0:1}),Vt.length%2==0){var Zt=Vt.length/2,an=Math.floor((Vt[Zt-1]+Vt[Zt])/2);if(Zt%2==0){var qt=Zt/2,tn=Math.floor((Vt[qt-1]+Vt[qt])/2),gn=Zt+qt,rn=Math.floor((Vt[gn-1]+Vt[gn])/2);return{min:Vt[0],firstQuartile:tn,median:an,thirdQuartile:rn,max:Vt[Vt.length-1]}}var pn=Math.floor(Zt/2),In=Vt[pn],Pn=Vt[Zt+pn];return{min:Vt[0],firstQuartile:In,median:an,thirdQuartile:Pn,max:Vt[Vt.length-1]}}var _n=Math.floor(Vt.length/2),Ln=Vt[_n];if((_n+1)%2==0){var Vn=(_n+1)/2,or=Math.floor((Vt[Vn-1]+Vt[Vn])/2),hr=_n+Vn,mr=Math.floor((Vt[hr-1]+Vt[hr])/2);return{min:Vt[0],firstQuartile:or,median:Ln,thirdQuartile:mr,max:Vt[Vt.length-1]}}var yr=Math.floor(_n/2),Rr=Vt[yr],Or=Vt[_n+yr];return{min:Vt[0],firstQuartile:Rr,median:Ln,thirdQuartile:Or,max:Vt[Vt.length-1]}},this.runBitRateTest=function(){apiCC.webRTCCompliant?(Fn.debug("Run bitrate test"),this.testId==="initial"&&(this.handlers=[{type:"joinMCUSessionAnswer",callback:this.handleJoinMCUSessionAnswer.bind(this)},{type:"MCUAvailableStream",callback:this.handleMCUAvailableStream.bind(this)},{type:"onCallStatsUpdate",callback:this.handleOnCallStatsUpdate.bind(this)},{type:"remoteStreamAdded",callback:this.handleRemoteStreamAdded.bind(this)},{type:"userMediaSuccess",callback:this.handleuserMediaSuccess.bind(this)},{type:"MCURecordedStreamsAvailable",callback:this.handleRecordingStreamAvailable.bind(this)}],this.handlers.forEach(function(Et){apiRTC.addEventListener(Et.type,Et.callback)}),this.webRTCClient.setMCUConnector("mcu4.apizee.com"),this.webRTCClient.setAllowMultipleCalls(!0),this.webRTCClient.enableCallStatsMonitoring(!0,1e3),this.webRTCClient.enableQualityEvaluating(!0,1e3),this.startNextTest())):(this.report.failurCause="Your device is not WebRTC Compliant",this.terminate())},this.startNextTest=function(){if(this.simpleVideoRecordTest===!0)this.testId==="initial"?(Fn.debug("initial simple test"),Ot?this.runResolutionTest():this.startTestAudioNlVideo(2e3)):this.testId==="resolution-test"?(Fn.debug("resolution-test simple"),this.startTestAudioNlVideo(2e3)):this.testId==="audio-and-video-2000"&&(Fn.debug("Before recordThenTerminate simple"),this.recordThenTerminate());else if(this.testId==="initial")Ot?this.runResolutionTest():this.startTestAudioNlVideo(lt);else if(this.testId==="resolution-test")this.startTestAudioNlVideo(lt);else if(this.testId==="audio-and-video-"+lt)if(this.report[this.testId].status==="success"){var Et=this.report[this.testId].subscribeCallIds[0],$t=this.stats[Et].videoReceived;$t.bitsReceivedPerSecond.max!==void 0&&$t.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():$t.bitsReceivedPerSecond.max>=15e5?this.startTestAudioNlVideo(1500):$t.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):$t.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):$t.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1500")if(this.report[this.testId].status==="success"){var xt=this.report[this.testId].subscribeCallIds[0],Vt=this.stats[xt].videoReceived;Vt.bitsReceivedPerSecond.max!==void 0&&Vt.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():Vt.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):Vt.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):Vt.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1000")if(this.report[this.testId].status==="success"){var Zt=this.report[this.testId].subscribeCallIds[0],an=this.stats[Zt].videoReceived;an.bitsReceivedPerSecond.max!==void 0&&an.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():an.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):an.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-600")if(this.report[this.testId].status==="success"){var qt=this.report[this.testId].subscribeCallIds[0],tn=this.stats[qt].videoReceived;tn.bitsReceivedPerSecond.max!==void 0&&tn.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():tn.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-250")if(this.report[this.testId].status==="success"){var gn=this.report[this.testId].subscribeCallIds[0],rn=this.stats[gn].videoReceived;rn.bitsReceivedPerSecond.max!==void 0&&rn.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else this.recordThenTerminate()},this.startTestAudioNlVideo=function(Et){this.prepareEnvForNewTest(),Fn.debug("%ctestAudioNlVideo"+Et),this.testId="audio-and-video-"+Et,this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!0,this.videoBandwidth=Et,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!0,videoLimited:!0,videoBandwidth:this.videoBandwidth,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Yn)},this.startTestAudioNlOnly=function(){this.prepareEnvForNewTest(),Fn.debug("%cstartTestAudioNlOnly"),this.testId="audio-only",this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!1,this.webRTCClient.setRemoteVideoBandwidth(null),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!1,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Yn)},this.startTestVideoNlOnly=function(){this.prepareEnvForNewTest(),Fn.debug("%cstartTestVideoNlOnly"),this.testId="video-only",this.report.tests.push(this.testId),this.audioEnabled=!1,this.videoEnabled=!0,this.videoBandwidth=600,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!1,audioLimited:!1,videoEnabled:!0,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Yn)},this.recordThenTerminate=function(){Dt.modifyMeshModeEnabledValueBeforePreCall===!0&&(Fn.debug("Restoring meshModeEnabled to true, as it was modified for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!0);var Et=null;if(Dt.videoEnabled&&Dt.audioEnabled?Et="AUDIO-VIDEO":Dt.audioEnabled?Et="AUDIO-ONLY":Dt.videoEnabled&&(Et="VIDEO-ONLY"),!Et)return Fn.error("Can't define record type"),void Dt.terminate();Fn.debug("Start recording with type:",Et),Dt.webRTCClient.startRecording(Et,"recordPreCall",null,null,{ttl:900}),setTimeout(function(){Fn.debug("Stop recording"),Dt.webRTCClient.stopRecording()},1e4)},this.terminate=function(){Fn.debug("Terminate"),this.testId="terminated",this.handlers&&this.handlers.forEach(function(Et){apiRTC.removeEventListener(Et.type,Et.callback)}),this.notifyTerminated(this.report),this.leaveSession()},this.succeed=function(){Nn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"success",stepId:this.stepId}),this.report[this.testId].status="success",this.startNextTest()},this.fail=function(){Fn.debug("fail"),Nn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId}),this.report[this.testId].status="failure",this.report[this.testId].stepId=this.stepId,this.leaveSession(),this.startNextTest()},this.prepareEnvForNewTest=function(){Dt.mcuSession!==void 0&&Dt.leaveSession()},this.abortJoinMCUSession=function(){Fn.debug("abortJoinMCUSession"),this.fail()},this.abortStreamPublishing=function(){Fn.debug("abortStreamPublishing"),this.fail()},this.abortStreamSubscribing=function(){Fn.debug("abortStreamSubscribing"),this.fail()},this.observeStreamPublished=function(){if(Fn.debug("observeStreamPublished"),apiRTC.browser==="Safari"||apiRTC.browser==="Mobile Safari")return Fn.info("Safari"),Fn.error("observeStreamPublished not supported on Safari"),clearInterval(this.intervalId),void this.fail();if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.fail();if(this.audioEnabled&&this.videoEnabled){var Et=0;if(this.stats[this.publishCallId]!==void 0&&(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4&&(Et+=1),this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=Xn&&(Et+=1)),Et===2){clearInterval(this.intervalId);var $t=this.streams[0];this.subscribeToUserStream($t.attributes.callerId,$t.id,"VIDEO"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Yn)}else Fn.debug("okCnt !== 2")}else if(this.audioEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4){clearInterval(this.intervalId);var xt=this.streams[0];this.subscribeToUserStream(xt.attributes.callerId,xt.id,"AUDIOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Yn)}else Fn.debug("no stats audio 1 ");else Fn.debug("no stats audio 2");else Fn.debug("no stats audio 3");else if(this.videoEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=Xn){clearInterval(this.intervalId);var Vt=this.streams[0];this.subscribeToUserStream(Vt.attributes.callerId,Vt.id,"VIDEOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Yn)}else Fn.debug("no stats video 1 ");else Fn.debug("no stats video 2");else Fn.debug("no stats video 3");else Fn.debug("no audio or video"),clearInterval(this.intervalId),this.fail()},this.observeStreamSubscribed=function(){if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.succeed();var Et=null,$t=null,xt=0,Vt=0;this.audioEnabled&&(Et=this.stats[this.publishCallId].audioSent),this.videoEnabled&&($t=this.stats[this.publishCallId].videoSent);for(var Zt=0;Zt<this.subscribeCallIds.length;Zt+=1){var an=this.subscribeCallIds[Zt];if(this.audioEnabled&&this.videoEnabled){var qt=0;this.stats[an]!==void 0&&(this.stats[an].audioReceived!==void 0&&this.stats[an].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[an].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile-2e3&&(qt+=1),this.stats[an].videoReceived!==void 0&&this.stats[an].videoReceived.bitsReceivedPerSecond!==void 0&&$t!=null&&$t.bitsSentPerSecond!==void 0&&this.stats[an].videoReceived.bitsReceivedPerSecond.thirdQuartile>=$t.bitsSentPerSecond.firstQuartile&&(qt+=1)),qt===2&&(xt+=1)}else this.audioEnabled?this.stats[an]!==void 0&&this.stats[an].audioReceived!==void 0&&this.stats[an].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[an].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile&&(xt+=1):Vt+=1}Vt>0?(clearInterval(this.intervalId),this.fail()):xt===this.subscribeCallIds.length&&(clearInterval(this.intervalId),this.succeed())},this.handleJoinMCUSessionAnswer=function(Et){if(this.stepId==="joining-mcu-session"){if(Nn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),clearTimeout(this.timeoutId),this.mcuSession.sessionId=Et.detail.sessionId,this.mcuSession.token=Et.detail.token,this.audioEnabled&&this.videoEnabled){var $t=this,xt={audio:{},video:{}};xt=apiCC.setResolutionInConstraint(this.maxWidth,this.maxHeight,xt),Fn.debug("constraints :",xt),apiRTC.createUserMediaStream({type:"media",audioSourceId:this.audioSourceId,videoSourceId:this.videoSourceId,gum_config:xt,release:function(Vt){Fn.debug("createUserMediaStream release",Vt.userMediaStreamId)},success:function(Vt){Fn.debug("createUserMediaStream success",Vt.userMediaStreamId),Fn.debug("audioSourceId",Tt),Fn.debug("videoSourceId",It)},failure:function(Vt,Zt){Fn.error("createUserMediaStream failure",Vt.userMediaStreamId),Fn.error("failure; userMediaStreamId: "+Vt.userMediaStreamId),Fn.error("failure; error: "+Zt),Nn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId,createUserMediaStreamError:Zt}),$t.terminate()}})}else if(this.audioEnabled)this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{audioOnly:!0});else{if(!this.videoEnabled)return void this.fail();this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{videoOnly:!0,qos:{videoStartQuality:"upper"}})}this.subscribeCallIds=[],this.report[this.testId].publishCallId=this.publishCallId,this.report[this.testId].subscribeCallIds=[],this.streams=[],this.stepId="stream-publishing",this.timeoutId=setTimeout(this.abortStreamPublishing.bind(this),Yn)}},this.handleuserMediaSuccess=function(Et){var $t={userMediaStreamId:Et.detail.userMediaStreamId,qos:{videoStartQuality:"upper"}};this.userMediastreamId=Et.detail.userMediaStreamId,this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,$t),this.report[this.testId].publishCallId=this.publishCallId},this.handleRecordingStreamAvailable=function(Et){Fn.debug("handleRecordingStreamAvailable"),this.terminate()},this.handleMCUAvailableStream=function(Et){if(this.stepId==="stream-publishing"&&Et.detail.isRemoteStream===!1)for(var $t=0;$t<Et.detail.streams.length;$t+=1){var xt=Et.detail.streams[$t];if(xt.room===this.mcuSession.roomId&&xt.attributes.callId===this.publishCallId&&this.stepId==="stream-publishing"){if(clearTimeout(this.timeoutId),this.stepId="stream-published",this.streams.push(xt),this.simpleVideoRecordTest===!0){var Vt="VIDEO";xt.audio===!1&&(Vt="VIDEOONLY"),xt.video===!1&&(Vt="AUDIOONLY"),this.subscribeToUserStream(xt.attributes.callerId,xt.id,Vt),this.stepId="stream-subscribing"}else this.intervalId=setInterval(this.observeStreamPublished.bind(this),1e3);this.intervalCounter=0}}},this.handleRemoteStreamAdded=function(Et){this.stepId==="stream-subscribing"&&this.subscribeCallIds.find(function($t){return $t===Et.detail.callId})!==void 0&&(clearTimeout(this.timeoutId),this.stepId="stream-subscribed",this.intervalId=setInterval(this.observeStreamSubscribed.bind(this),1e3),this.intervalCounter=0)},this.handleOnCallStatsUpdate=function(Et){var $t=this;if(this.stepId!=="stream-published"&&this.stepId!=="stream-subscribing"&&this.stepId!=="stream-subscribed"||(this.stats[this.publishCallId]===void 0&&(this.stats[this.publishCallId]={}),Et.detail.stats.audioSent!==void 0&&(this.stats[this.publishCallId].audioSent===void 0&&(this.stats[this.publishCallId].audioSent={startTime:Et.detail.stats.audioSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].audioSent,Et.detail.stats.audioSent)?this.stats[this.publishCallId].audioSent.data.length>=5&&["bitsSentPerSecond","packetsSentPerSecond"].forEach(function(an){var qt=$t.evalQuartiles($t.stats[$t.publishCallId].audioSent.data,an);qt.sampleCount=$t.stats[$t.publishCallId].audioSent.data.length,qt.time=Et.detail.stats.audioSent.timestamp-$t.stats[$t.publishCallId].audioSent.startTime,$t.stats[$t.publishCallId].audioSent[an]=qt}):Fn.debug("audio stats not pushed for :",this.publishCallId)),Et.detail.stats.videoSent!==void 0&&(this.stats[this.publishCallId].videoSent===void 0&&(this.stats[this.publishCallId].videoSent={startTime:Et.detail.stats.videoSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].videoSent,Et.detail.stats.videoSent)?this.stats[this.publishCallId].videoSent.data.length>=5&&(["bitsSentPerSecond","packetsSentPerSecond","framesEncodedPerSecond"].forEach(function(an){var qt=$t.evalQuartiles($t.stats[$t.publishCallId].videoSent.data,an);qt.sampleCount=$t.stats[$t.publishCallId].videoSent.data.length,qt.time=Et.detail.stats.videoSent.timestamp-$t.stats[$t.publishCallId].videoSent.startTime,$t.stats[$t.publishCallId].videoSent[an]=qt}),this.stats[this.publishCallId].videoSent.width=Et.detail.stats.videoSent.width,this.stats[this.publishCallId].videoSent.height=Et.detail.stats.videoSent.height):Fn.debug("video stats not pushed for :",this.publishCallId))),this.stepId==="stream-subscribed")for(var xt=function(an){Zt=0;var qt=$t.subscribeCallIds[an];$t.stats[qt]===void 0&&($t.stats[qt]={}),Et.detail.stats.audioReceived!==void 0&&($t.stats[qt].audioReceived===void 0&&($t.stats[qt].audioReceived={startTime:Et.detail.stats.audioReceived.timestamp,data:[]}),$t.pushStats($t.stats[qt].audioReceived,Et.detail.stats.audioReceived)?(Zt=$t.stats[qt].audioReceived.data.length,$t.stats[qt].audioReceived.data[Zt-1].mosS===void 0&&($t.stats[qt].audioReceived.data[Zt-1].mosS={}),$t.stats[qt].audioReceived.data[Zt-1].mosS=Et.detail.stats.quality.mosS,$t.stats[qt].audioReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","delay"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].audioReceived.data,tn);gn.sampleCount=$t.stats[qt].audioReceived.data.length,gn.time=Et.detail.stats.audioReceived.timestamp-$t.stats[qt].audioReceived.startTime,$t.stats[qt].audioReceived[tn]=gn}),$t.stats[qt].audioReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].audioReceived.data,tn,function(rn){return Math.floor(1e3*rn)});gn.sampleCount=$t.stats[qt].audioReceived.data.length,gn.time=Et.detail.stats.audioReceived.timestamp-$t.stats[qt].audioReceived.startTime,$t.stats[qt].audioReceived[tn]=gn}),$t.stats[qt].audioReceived.packetsLost={max:Et.detail.stats.audioReceived.packetsLost,sampleCount:$t.stats[qt].audioReceived.data.length,time:Et.detail.stats.audioReceived.timestamp-$t.stats[qt].audioReceived.startTime},["packetsLostRatio"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].audioReceived.data,tn);gn.sampleCount=$t.stats[qt].audioReceived.data.length,gn.time=Et.detail.stats.audioReceived.timestamp-$t.stats[qt].audioReceived.startTime,$t.stats[qt].audioReceived[tn]=gn}),$t.stats[qt].audioReceived.mosS===void 0&&($t.stats[qt].audioReceived.mosS={}),["mosS"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].audioReceived.data,tn);gn.sampleCount=$t.stats[qt].audioReceived.data.length,$t.stats[qt].audioReceived[tn]=gn}))):Fn.error("audio stats not pushed for callId :",qt)),Et.detail.stats.videoReceived!==void 0&&($t.stats[qt].videoReceived===void 0&&($t.stats[qt].videoReceived={startTime:Et.detail.stats.videoReceived.timestamp,data:[]}),$t.pushStats($t.stats[qt].videoReceived,Et.detail.stats.videoReceived)?(Zt=$t.stats[qt].videoReceived.data.length,$t.stats[qt].videoReceived.data[Zt-1].mosV===void 0&&($t.stats[qt].videoReceived.data[Zt-1].mosV={}),$t.stats[qt].videoReceived.data[Zt-1].mosAV===void 0&&($t.stats[qt].videoReceived.data[Zt-1].mosAV={}),$t.stats[qt].videoReceived.data[Zt-1].mosV=Et.detail.stats.quality.mosV,$t.stats[qt].videoReceived.data[Zt-1].mosAV=Et.detail.stats.quality.mosAV,$t.stats[qt].videoReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","framesDecodedPerSecond"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].videoReceived.data,tn);gn.sampleCount=$t.stats[qt].videoReceived.data.length,gn.time=Et.detail.stats.videoReceived.timestamp-$t.stats[qt].videoReceived.startTime,$t.stats[qt].videoReceived[tn]=gn}),$t.stats[qt].videoReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].videoReceived.data,tn,function(rn){return Math.floor(1e3*rn)});gn.sampleCount=$t.stats[qt].videoReceived.data.length,gn.time=Et.detail.stats.videoReceived.timestamp-$t.stats[qt].videoReceived.startTime,$t.stats[qt].videoReceived[tn]=gn}),$t.stats[qt].videoReceived.packetsLost={max:Et.detail.stats.videoReceived.packetsLost,sampleCount:$t.stats[qt].videoReceived.data.length,time:Et.detail.stats.videoReceived.timestamp-$t.stats[qt].videoReceived.startTime},["packetsLostRatio"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].videoReceived.data,tn);gn.sampleCount=$t.stats[qt].videoReceived.data.length,gn.time=Et.detail.stats.videoReceived.timestamp-$t.stats[qt].videoReceived.startTime,$t.stats[qt].videoReceived[tn]=gn}),$t.stats[qt].videoReceived.mosV===void 0&&($t.stats[qt].videoReceived.mosV={}),["mosV"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].videoReceived.data,tn);gn.sampleCount=$t.stats[qt].videoReceived.data.length,$t.stats[qt].videoReceived[tn]=gn}),$t.stats[qt].videoReceived.mosAV===void 0&&($t.stats[qt].videoReceived.mosAV={}),["mosAV"].forEach(function(tn){var gn=$t.evalQuartiles($t.stats[qt].videoReceived.data,tn);gn.sampleCount=$t.stats[qt].videoReceived.data.length,$t.stats[qt].videoReceived[tn]=gn}),$t.stats[qt].videoReceived.width=Et.detail.stats.videoReceived.width,$t.stats[qt].videoReceived.height=Et.detail.stats.videoReceived.height)):Fn.error("video stats not pushed for callId :",qt))},Vt=0;Vt<this.subscribeCallIds.length;Vt+=1){var Zt;xt(Vt)}},this.subscribeToUserStream=function(Et,$t,xt){var Vt=this,Zt=this.webRTCClient.getStreamFromList($t);if(Zt!=null){var an=[];an.push(Zt),this.webRTCClient.subscribe(an,xt).forEach(function(qt){Vt.subscribeCallIds.push(qt),Vt.report[Vt.testId].subscribeCallIds.push(qt)})}},this.leaveSession=function(){Fn.debug("leaveSession"),this.streams!==void 0&&typeof this.streams[0]=="number"&&this.webRTCClient!==null&&this.webRTCClient.unsubscribe(this.streams[0]),this.userMediastreamId!==null&&apiRTC.releaseUserMediaStream(this.userMediastreamId),delete this.streams,delete this.subscribeCallIds,typeof this.publishCallId=="string"&&this.webRTCClient.unpublish(this.publishCallId),delete this.publishCallId,this.mcuSession!==void 0&&this.mcuSession.sessionId!==void 0&&(this.webRTCClient.leaveMCUSession(),delete this.mcuSession.sessionId),delete this.mcuSession,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.length),Fn.debug("leaveSession done")},this.runResolutionTest=function(){this.testId="resolution-test",this.stepId="resolution-test",Nn.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),Fn.debug("Run resolution test"),this.startGetUserMedia(this.resolutions[this.currentResolution])},this.startGetUserMedia=function(Et){Fn.debug("startGetUserMedia :",Et);var $t={audio:!1,video:{}};$t=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,$t),$t=apiCC.setResolutionInConstraint(Et[0],Et[1],$t),Fn.debug("startGetUserMedia constraints:",$t),apiCC.getUserMedia($t).then((function(xt){this.resolutions.length>1?(this.report.resolutions.push(Et[2]+":   "+Et[0]+"x"+Et[1]),this.maxWidth=Et[0],this.maxHeight=Et[1],xt.getTracks().forEach(function(Vt){Vt.stop()}),this.maybeContinueGetUserMedia()):Fn.debug("No video track in returned stream.")}).bind(this)).catch((function(xt){Fn.debug("startGetUserMedia catch error:",xt),this.resolutions.length>1?Fn.debug(Et[0]+"x"+Et[1]+" not supported"):Fn.error("getUserMedia failed with error: "+xt.name),this.maybeContinueGetUserMedia()}).bind(this))},this.maybeContinueGetUserMedia=function(){this.currentResolution!==this.resolutions.length-1?(this.currentResolution++,this.startGetUserMedia(this.resolutions[this.currentResolution])):this.startNextTest()}},Cn=et.Y.get("ApiCCWebRTCClient"),Mn=function(Kt){Cn.debug("apiCC.ApiCCWebRTCClient"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.webRTCClient=new rr(Kt),this.webRTCClient.channelReady=!0,this.callTest=null,this.call=function(Ot,lt,Tt){return lt==="RECORD"&&Cn.warn("DEPRECATED : usage of data parameter on call() as a string with 'RECORD' value will be deprecated in a next version of apiRTC. Please consider using a JSON Data parameter instead : data = {isRecorded : true}"),this.webRTCClient.recordedCall===!0&&(Cn.log("recordedCall option is activated"),lt!==void 0&&lt!=="RECORD"||(lt={}),lt.MCUType="MCU-Caller",lt.confId=Math.floor(1000001*Math.random()).toString()),lt!==void 0&&(lt!=="RECORD"&&lt.isRecorded!==!0||(Cn.log("recordedCall option is activated"),lt==="RECORD"&&(lt={}),lt.MCUType="MCU-Caller",lt.confId=Math.floor(1000001*Math.random()).toString())),Tt!=null&&Tt.record===!0&&(Cn.log("callConfiguration record option is activated"),lt!==void 0&&lt!=="RECORD"||(lt={}),lt.MCUType="MCU-Caller",lt.confId=Math.floor(1000001*Math.random()).toString()),Cn.log("session.webRTCPluginActivated =",Kt.webRTCPluginActivated),(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&Kt.webRTCPluginActivated===!0?(Cn.log("managing call with WebRTC Plugin"),Tt==null&&(Tt={}),Tt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){Cn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.callWithNumber(Ot,!0,lt,Tt)},function(){Cn.log("actionOnInstallationNeeded")}),Tt.apzcallId):(Cn.log("managing call with browser"),this.webRTCClient.callWithNumber(Ot,!0,lt,Tt))},this.getStatsFromCall=function(Ot,lt){var Tt=this.webRTCClient.findCallWithCallId(Ot);Tt===null?lt(new Error("Call was not found"),null):Tt.pc===null?lt(new Error("Call has no peerconnection"),null):this.webRTCClient.csmEnable===!0?lt(null,this.webRTCClient.csmLastResults):lt(new Error("Call stats monitoring not activated"),null)},this.testCall=function(Ot){return Cn.log("session.webRTCPluginActivated =",Kt.webRTCPluginActivated),(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&Kt.webRTCPluginActivated===!0?(Cn.log("managing call with WebRTC Plugin"),Ot==null&&(Ot={}),Ot.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){Cn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.startTestCall(!0,Ot)},function(){Cn.log("actionOnInstallationNeeded")}),Ot.apzcallId):(Cn.log("managing call with browser"),this.webRTCClient.startTestCall(!0,Ot))},this.setClientTurnServer=function(Ot){this.webRTCClient.setClientTurnServer(Ot)},this.activateScreenSharing=function(Ot){this.webRTCClient.activateScreenSharing(Ot)},this.shareScreen=function(Ot,lt,Tt){return Cn.info("shareScreen"),this.webRTCClient.shareScreen(Ot,lt,Tt)},this.startScreenSharingOnCall=function(Ot,lt){Cn.info("startScreenSharingOnCall"),this.webRTCClient.startScreenSharingOnCall(Ot,lt)},this.startDataChannel=function(Ot,lt){if(Cn.info("startDataChannel"),!(rt.Xh==="Edge"&&rt.PR<79&&apiRTC.browserDetails.type!=="chrome"))return lt!==void 0?lt.dataCall=!0:(lt={}).dataCall=!0,this.webRTCClient.callWithNumber(Ot,!0,lt,null);Cn.warn("Cannot startDataChannel as it is not supported on Edge")},this.startDataChannelOnCall=function(Ot){this.webRTCClient.startDataChannelOnCall(Ot)},this.sendDataWithCallId=function(Ot,lt,Tt){this.webRTCClient.sendDataWithCallId(Ot,lt,Tt)},this.callAudio=function(Ot,lt,Tt){return Cn.info("callAudio"),this.webRTCClient.callWithNumber(Ot,!1,lt,Tt)},this.callbymail=function(Ot){this.webRTCClient.callbymail(Ot)},this.addMedia=function(Ot){return this.webRTCClient.addMedia(Ot),Ot},this.hangUp=function(Ot){this.webRTCClient.onHangup(Ot)},this.getMyMedia=function(Ot,lt){Cn.info("getMyMedia : ",Ot),Ot==="screen"?this.webRTCClient.shareScreen("LOCAL",{},lt):this.webRTCClient.getUserMedia()},this.releaseStream=function(Ot){Cn.info("releaseStream : ",Ot),Cn.info("releaseStream.callId : ",Ot.callId),Ot.callId!==void 0?this.webRTCClient.removeCallFromTableWithCallIdAndSendBye(Ot.callId,"stop_ScreenSharing"):this.webRTCClient.stopStream(Ot)},this.autoAnswerUserMediaSuccessHandler=function(Ot){Cn.info("autoAnswerUserMediaSuccessHandler :"+Ot),Ot=null,this.webRTCClient.autoAnswer=!0},this.autoAnswerUserMediaErrorHandler=function(Ot){Cn.info("autoAnswerUserMediaErrorHandler :"+Ot),Ot=null,this.webRTCClient.autoAnswer=!1},this.activateAutoAnswer=function(){apiCC.addEventListener("userMediaSuccess",this.callback(this,"autoAnswerUserMediaSuccessHandler")),apiCC.addEventListener("userMediaError",this.callback(this,"autoAnswerUserMediaErrorHandler")),this.webRTCClient.getUserMedia()},this.getAutoAnswer=function(){return this.webRTCClient.autoAnswer},this.setUnidirectionalCall=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.unidirectionelCallOnly=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUnidirectionalCall()","PARAMETER_ERROR_SETUNIDIRCALL")},this.setReceiveMediaDeactivated=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.receiveMediaDeactivated=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setReceiveMediaDeactivated()","PARAMETER_ERROR_SETRECVMEDIADEACTIVATED")},this.setPreferVP9Codec=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.preferVP9Codec=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferVP9Codec()","PARAMETER_ERROR_SETPREFERVP9CODEC")},this.setPreferH264Codec=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.preferH264Codec=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferH264Codec()","PARAMETER_ERROR_SETPREFERH264CODEC")},this.getUnidirectionalCall=function(){return this.webRTCClient.unidirectionelCallOnly},this.toggleVideoMute=function(Ot){return this.webRTCClient.toggleVideoMute(Ot)},this.isVideoMuted=function(Ot){var lt;return Cn.debug("isVideoMuted :",Ot),Ot==null?this.webRTCClient.isVideoMuted:(Cn.debug("callId is defined :",Ot),(lt=this.webRTCClient.findCallIndexWithCallId(Ot))!==-1?this.webRTCClient.callsTable[lt].isLocalVideoMuted:void 0)},this.toggleAudioMute=function(Ot){return this.webRTCClient.toggleAudioMute(Ot)},this.sendDTMF=function(Ot,lt,Tt,It){return this.webRTCClient.sendDTMF(Ot,lt,Tt,It)},this.isAudioMuted=function(Ot){var lt;return Cn.debug("isAudioMuted :",Ot),Ot==null?this.webRTCClient.isAudioMuted:(Cn.debug("callId is defined :",Ot),(lt=this.webRTCClient.findCallIndexWithCallId(Ot))!==-1?this.webRTCClient.callsTable[lt].isLocalAudioMuted:void 0)},this.setNtoNConf=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.NtoNConf=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setNtoNConf()","PARAMETER_ERROR_SETNTONCONF")},this.getNtoNConf=function(){return this.webRTCClient.NtoNConf},this.setRTPMedia=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.RTPMedia=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRTPMedia()","PARAMETER_ERROR_SETRTPMEDIA")},this.getRTPMedia=function(){return this.webRTCClient.RTPMedia},this.setMediaRoutingMode=function(Ot){Ot==="hostOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.hostOnly:Ot==="stun"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stun:Ot==="stunOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stunOnly:Ot==="turn"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turn:Ot==="turnOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turnOnly:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setMediaRoutingMode()","PARAMETER_ERROR_SETMEDIAROUTINGMODE")},this.enableQos=function(Ot,lt){apiCC.browser!=="Chrome"&&apiCC.browser!=="Firefox"&&(Cn.warn("enableQos() is only supported on Chrome and Firefox, support on other browsers will be added soon"),Ot=!1),Cn.info("this.enableQos="+Ot),this.webRTCClient.qosEnable=Ot,this.webRTCClient.qosInterval=lt||this.webRTCClient.qosInterval},this.enableCallStatsMonitoring=function(Ot,lt){["chrome","firefox","safari"].indexOf(ot.wL.type)<0?Cn.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):(this.webRTCClient.csmEnable=Ot,lt&&(this.webRTCClient.csmIntervalMs=lt))},this.enableQualityEvaluating=function(Ot,lt){["chrome","firefox"].indexOf(ot.wL.type)<0?Cn.warn("enableQualityEvaluating() is only supported on Chrome and Firefox, support on other browsers will be added soon"):(this.webRTCClient.qualityScoreEnable=Ot,lt&&(this.webRTCClient.qualityScoreIntervalMs=lt))},this.getMediaRoutingMode=function(){var Ot=null;return this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.hostOnly?Ot="hostOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stun?Ot="stun":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stunOnly?Ot="stunOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turn?Ot="turn":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turnOnly&&(Ot="turnOnly"),Ot},this.setMediaTypeForIncomingCall=function(Ot){Cn.debug("setMediaTypeForIncomingCall :",Ot),Ot==="VIDEO"||Ot==="AUDIO"||Ot==="VIDEOONLY"||Ot==="NONE"?this.webRTCClient.mediaTypeForIncomingCall=Ot:Cn.log("setMediaTypeForIncomingCall, value is not correct",Ot)},this.setMediaTypeForOutgoingCall=function(Ot){Cn.debug("setMediaTypeForOutgoingCall :",Ot),Ot==="VIDEO"||Ot==="AUDIO"||Ot==="VIDEOONLY"||Ot==="NONE"?this.webRTCClient.mediaTypeForOutgoingCall=Ot:Cn.log("setMediaTypeForOutgoingCall, value is not correct",Ot)},this.setStereo=function(Ot){Cn.info("setStereo :",Ot),Ot===!0?(this.webRTCClient.setStereo=Ot,this.webRTCClient.gum_config={audio:{mandatory:{echoCancellation:!1,googEchoCancellation:!1},optional:[]},video:{mandatory:{},optional:[]}}):Ot===!1?this.webRTCClient.setStereo=Ot:Cn.log("setStereo, value is not correct",Ot)},this.setMCUConnector=function(Ot){Cn.info("setMCUConnector :",Ot),Cn.log("setting value :",Ot),Ot==="mcu4.apizee.com"?this.webRTCClient.MCUClient.pubConnector="janusConnector":Ot==="mcu3.apizee.com"?this.webRTCClient.MCUClient.pubConnector="groupKurentoConnector":Cn.log("value is incorrect :",Ot)},this.enableMeshRoomMode=function(Ot){Cn.info("enableMeshRoomMode :",Ot),rt.Xh==="IE"?(Cn.log("IE detected, MeshRoomMode is not supported"),this.webRTCClient.MCUClient.meshModeEnabled=!1):this.webRTCClient.MCUClient.meshModeEnabled=Ot},this.setAllowAsymetricMediaCalls=function(Ot){Cn.info("setAllowAsymetricMediaCalls :",Ot),Ot===!0||Ot===!1?this.webRTCClient.allowAsymetricMediaCalls=Ot:Cn.log("setAllowAsymetricMediaCalls, value is not correct",Ot)},this.takeSnapshot=function(Ot,lt,Tt,It,Dt,Et,$t){this.webRTCClient.takeSnapshot(Ot,lt,Kt.apiKey,Tt,It,Dt,Et,$t)},this.takeSnapshotAndSendOnDataChannel=function(Ot,lt,Tt,It){this.webRTCClient.takeSnapshotAndSendOnDataChannel(Ot,lt,Tt,It)},this.setUserAcceptOnIncomingCall=function(Ot){Cn.info("setUserAcceptOnIncomingCall :",Ot),Ot===!0||Ot===!1?this.webRTCClient.userAcceptOnIncomingCall=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingCallBeforeGetUserMedia=function(Ot){Cn.info("setUserAcceptOnIncomingCallBeforeGetUserMedia :",Ot),Ot===!0||Ot===!1?this.webRTCClient.userAcceptOnIncomingCallBeforeGetUserMedia=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCallBeforeGetUserMedia()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALLBEFOREGUM")},this.setUserAcceptOnIncomingDataCall=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.userAcceptOnIncomingDataCall=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingDataCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingScreenSharingCall=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.userAcceptOnIncomingScreenSharingCall=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingScreenSharingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOSCREENSHARINGCALL")},this.setAllowMultipleCalls=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.allowMultipleCalls=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setAllowMultipleCalls()","PARAMETER_ERROR_SETALLOWMULTIPLECALLS")},this.setPcConfig=function(Ot){Cn.info("Setting PC_config to :",Ot),this.webRTCClient.pc_config=Ot},this.setPcConstraints=function(Ot){Cn.info("Setting PC_constraints to :"+Ot),this.webRTCClient.pc_constraints=Ot},this.setGetUserMediaConfig=function(Ot){this.webRTCClient.setGetUserMediaConfig(Ot)},this.setTrickleIce=function(Ot){Cn.info("Setting trickleIce to :"+Ot),Ot===!0||Ot===!1?this.webRTCClient.trickleIce=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setTrickleIce()","PARAMETER_ERROR_SETTRICKLEICE")},this.setRecordedCall=function(Ot){Ot===!0||Ot===!1?this.webRTCClient.recordedCall=Ot:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRecordedCall()","PARAMETER_ERROR_SETRECORDEDCALL")},this.getRecordedCall=function(){return this.webRTCClient.recordedCall},this.acceptCall=function(Ot,lt){this.webRTCClient.acceptCall(Ot,lt)},this.refuseCall=function(Ot){Cn.info("refuseCall"),this.webRTCClient.refuseCall(Ot)},this.addVideoMedia=function(Ot){Cn.info("addVideoMedia"),this.webRTCClient.addVideoMedia(Ot)},this.updateMediaDeviceOnCall=function(Ot,lt){return Cn.info("updateMediaDeviceOnCall"),this.webRTCClient.updateMediaDeviceOnCall(Ot,lt)},this.updateMediaTypeOnCall=function(Ot,lt){return!(0,ot.Ym)(Ot,"string")||lt!=="VIDEO"&&lt!=="AUDIOONLY"&&lt!=="VIDEOONLY"?Promise.reject("wrong arguments"):this.webRTCClient.updateMediaTypeOnCall(Ot,lt)},this.releaseUserMedia=function(){this.webRTCClient.releaseUserMedia()},this.setAllowedAudioCodecs=function(Ot){this.webRTCClient.allowedAudioCodecs=Ot},this.setAllowedVideoCodecs=function(Ot){this.webRTCClient.allowedVideoCodecs=Ot},this.setAudioBandwidth=function(Ot){this.webRTCClient.setAudioBandwidth(Ot)},this.setVideoBandwidth=function(Ot){},this.setRemoteVideoBandwidth=function(Ot){typeof Ot=="number"?this.webRTCClient.setVideoBandwidth(Ot,"remote"):Cn.error("Unvalid target bandwidth usage value needs to be a number :",Ot)},this.setOverallIncomingVideoBandwidth=function(Ot){typeof Ot=="number"?this.webRTCClient.setVideoBandwidth(Ot,"overall","incoming"):Cn.error("Unvalid target bandwidth usage value needs to be a number :",Ot)},this.setOverallOutgoingVideoBandwidth=function(Ot){typeof Ot=="number"?this.webRTCClient.setVideoBandwidth(Ot,"overall","outgoing"):Cn.error("Unvalid target bandwidth usage value needs to be a number :",Ot)},this.setPerCallIncomingVideoBandwidth=function(Ot){typeof Ot=="number"?this.webRTCClient.setVideoBandwidth(Ot,"perCall","incoming"):Cn.error("Unvalid target bandwidth usage value needs to be a number :",Ot)},this.setPerCallOutgoingVideoBandwidth=function(Ot){typeof Ot=="number"?this.webRTCClient.setVideoBandwidth(Ot,"perCall","outgoing"):Cn.error("Unvalid target bandwidth usage value needs to be a number :",Ot)},this.setDataBandwidth=function(Ot){this.webRTCClient.setDataBandwidth(Ot)},this.createMCUSession=function(Ot,lt){Cn.info("createMCUSession"),this.webRTCClient.MCUClient.initDivElements(Ot,lt),this.webRTCClient.MCUClient.createSession()},this.joinMCUSession=function(Ot){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Cn.debug("joinMCUSession"),Ot?this.webRTCClient.MCUClient.joinSession(Ot,lt):new Error("wrong roomId")},this.getMCUStreamList=function(){return Cn.debug("getMCUStreamList"),this.webRTCClient.MCUClient.getStreamList()},this.getStreamFromList=function(Ot){return Cn.debug("getStreamFromList"),this.webRTCClient.MCUClient.getStreamFromList(Ot)},this.getStreamIdOfUser=function(Ot){return Cn.debug("getStreamIdOfUser"),this.webRTCClient.MCUClient.getStreamIdOfUser(Ot)},this.getCallIdFromStreamId=function(Ot){Cn.debug("getCallIdFromStreamId");var lt=this.webRTCClient.findCallWithStreamId(Ot);return lt===null?(Cn.log("call not found in getCallIdFromStreamId"),null):lt.callId},this.getCallIdFromRemoteMCUUser=function(Ot){var lt,Tt;return Cn.debug("getCallIdFromRemoteMCUUser"),lt=this.webRTCClient.MCUClient.getStreamIdOfUser(Ot),(Tt=this.webRTCClient.findCallWithStreamId(lt))===null?(Cn.log("call not found in getCallIdFromRemoteMCUUser"),null):Tt.callId},this.ejectParticipantFromMCUSession=function(Ot,lt,Tt){this.webRTCClient.MCUClient.ejectParticipant(Ot,lt,Tt)},this.publish=function(Ot,lt,Tt,It,Dt,Et){if(rt.Xh==="IE"&&(Cn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),Cn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1)return Cn.log("managing call with WebRTC Plugin"),It==null&&(It={}),It.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){apiCC.webRTCPluginInstalled=!0,Cn.info("manageWebRTCPlugin cb in call");var xt=this.webRTCClient.MCUClient.getSessionMCU(Ot);return xt&&xt.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(Ot,lt,Tt,It,Dt,Et):(Cn.debug("publish"),this.webRTCClient.MCUClient.publish(Ot,lt,Tt,It,Dt,Et))},function(){Cn.log("actionOnInstallationNeeded")}),It.apzcallId;var $t=this.webRTCClient.MCUClient.getSessionMCU(Ot);return $t&&$t.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(Ot,lt,Tt,It,Dt,Et):(Cn.debug("publish"),this.webRTCClient.MCUClient.publish(Ot,lt,Tt,It,Dt,Et))},this.unpublish=function(Ot){Cn.info("unpublish"),this.webRTCClient.MCUClient.unpublish(Ot)},this.publishScreen=function(Ot,lt,Tt,It){var Dt=this.webRTCClient.MCUClient.getSessionMCU(Ot);return Dt&&Dt.roomMode==="mesh"?(Cn.info("publishScreen"),this.webRTCClient.MCUClient.meshPublishScreen(Ot,lt,Tt,It)):(Cn.info("publishScreen"),this.webRTCClient.MCUClient.publishScreen(Ot,lt,Tt,It))},this.subscribe=function(Ot,lt,Tt,It,Dt){return Cn.info("subscribe :",Ot),rt.Xh==="IE"&&(Cn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),Cn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1?(Cn.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){return apiCC.webRTCPluginInstalled=!0,Cn.log("manageWebRTCPlugin cb in subscribe"),typeof lt=="boolean"&&(Cn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),lt=lt===!0?"AUDIOONLY":"VIDEO"),apiCC.session.apiCCWebRTCClient.subscribe(Ot,lt,Tt,It)},function(){Cn.log("actionOnInstallationNeeded")}),"WebRTC_Plugin"):(typeof lt=="boolean"&&(Cn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),lt=lt===!0?"AUDIOONLY":"VIDEO"),this.webRTCClient.MCUClient.subscribeToStreams(Ot,lt,Tt,It,Dt))},this.unsubscribe=function(Ot){Cn.info("unsubscribe :",Ot),this.webRTCClient!==null&&this.webRTCClient.MCUClient!==null&&this.webRTCClient.MCUClient.unsubscribe(Ot)},this.startStreaming=function(Ot,lt,Tt,It){return Cn.info("startStreaming"),this.webRTCClient.MCUClient.startStreaming(Ot,lt,Tt,It)},this.stopStreaming=function(Ot){return Cn.info("stopStreaming"),this.webRTCClient.MCUClient.stopStreaming(Ot)},this.startRecording=function(Ot,lt,Tt,It,Dt){Cn.info("startRecording"),this.webRTCClient.MCUClient.startRecording(Ot,lt,Tt,It,Dt)},this.stopRecording=function(Ot){Cn.info("stopRecording"),this.webRTCClient.MCUClient.stopRecording(Ot)},this.changeStreamPriority=function(Ot,lt){var Tt=this.webRTCClient.findCallWithCallId(Ot);if(!Tt&&!(Tt=this.webRTCClient.findUserMediaById(Ot)))return Cn.error("changeStreamPriority - no such call",Ot),!1;if(!Tt.sessionMCU)return Cn.error("changeStreamPriority - no such sessionMCU"),!1;if(!(0,ot.Ym)(lt,"number")||lt<0)return Cn.error("changeStreamPriority - wrong priority",lt),!1;var It=JSON.stringify({type:"changeStreamPriority",roomId:Tt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Ot,data:{pubSub:this.webRTCClient.MCUClient.pubConnector,priority:lt}});return Cn.log("C->S: "+It),apiCC.session.channel.socket.emit("changeStreamPriority",It),!0},this.startComposite=function(Ot){Cn.info("startComposite"),this.webRTCClient.MCUClient.startComposite(Ot)},this.stopComposite=function(Ot){Cn.info("stopComposite"),this.webRTCClient.MCUClient.stopComposite(Ot)},this.startCompositeRecording=function(Ot,lt,Tt,It,Dt){Cn.info("startCompositeRecording"),this.webRTCClient.MCUClient.startCompositeRecording(Ot,lt,Tt,It,Dt)},this.stopCompositeRecording=function(Ot){Cn.info("stopCompositeRecording"),this.webRTCClient.MCUClient.stopCompositeRecording(Ot)},this.checkCallExist=function(Ot){for(var lt=null,Tt=this.webRTCClient.callsTable.length;--Tt>=0;){var It=this.webRTCClient.callsTable[Tt];if(It.callId===Ot&&It.data&&It.sessionMCU&&(It.data.MCUType==="MCU-Caller"||It.data.MCUType==="MCU-Callee")&&It.data.confId===It.sessionMCU.roomName){lt=It;break}}return lt||Cn.error("startCallRecording: no such call"),lt},this.startCallRecording=function(Ot){var lt;if(lt=this.checkCallExist(Ot)){var Tt=(0,ot.ws)({},lt.data);this.webRTCClient.MCUClient.startCompositeRecording("AUDIO-VIDEO",null,lt.sessionMCU.convId,Tt,lt.sessionMCU.roomName)}},this.stopCallRecording=function(Ot){var lt;(lt=this.checkCallExist(Ot))&&this.webRTCClient.MCUClient.stopCompositeRecording(lt.sessionMCU.roomName)},this.enforceMCU=function(Ot){this.webRTCClient.MCUClient.enforceMCU(Ot)},this.takeSnapshotOnMCUSession=function(Ot){return Cn.info("takeSnapshotOnMCUSession"),this.webRTCClient.MCUClient.takeSnapshot(Ot)},this.sendMCUSessionInvitation=function(Ot,lt,Tt){this.webRTCClient.MCUClient.sendSessionInvitation(Ot,lt,Tt)},this.sendMCUSessionInvitationToGroupChat=function(Ot,lt){this.webRTCClient.MCUClient.sendSessionInvitationToGroupChat(Ot,lt)},this.acceptMCUSessionInvitation=function(Ot,lt,Tt,It){this.webRTCClient.MCUClient.initDivElements(Tt,It),this.webRTCClient.MCUClient.acceptSessionInvitation(Ot,lt)},this.leaveMCUSession=function(Ot){this.webRTCClient.MCUClient.leaveSession(Ot)},this.recordStream=function(Ot){Cn.info("recordStream :",Ot),MediaRecorder!==void 0?apiCC.recordMgr.record(Ot).then(function(){Cn.log("Recording started")}).catch(function(lt){Cn.error("startRecord failed :",lt)}):Cn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.stopRecordStream=function(Ot){Cn.info("stopRecordStream"),MediaRecorder!==void 0?apiCC.recordMgr.stop().then(function(lt){Cn.log("Recording stopped"),Ot(lt)}).catch(function(lt){Cn.error("stopRecord failed :",lt)}):Cn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.getMediaDevices=function(Ot){Cn.debug("getMediaDevices 2"),apiCC.getMediaDevices().then(function(lt){Ot(lt),apiCC.mediaDeviceMgr.gotSources(lt)}).catch(function(lt){Ot(null),apiCC.mediaDeviceMgr.gotSources(null)})},this.setAudioSourceId=function(Ot){Cn.info("setAudioSourceId :"+Ot),this.webRTCClient.audioSourceId=Ot},this.setAudioOutputId=function(Ot){Cn.info("setaudioOutputId :"+Ot),this.webRTCClient.audioOutputId=Ot},this.setVideoSourceId=function(Ot){Cn.info("setVideoSourceId :"+Ot),this.webRTCClient.videoSourceId=Ot},this.setVideoFacingMode=function(Ot){Cn.info("setVideoFacingMode :"+Ot),Ot==="user"||Ot==="environment"||Ot==="left"||Ot==="right"||Ot==="deactivated"?this.webRTCClient.facingMode=Ot==="deactivated"?null:Ot:Cn.log("facingMode value is not correct")},this.attachMediaStream=function(Ot,lt){Cn.debug("attachMediaStream"),apiCC.attachMediaStream(Ot,lt)},this.addStreamInDiv=function(Ot,lt,Tt,It,Dt,Et){Cn.debug("addStreamInDiv"),apiCC.addStreamInDiv(Ot,lt,Tt,It,Dt,Et)},this.removeElementFromDiv=function(Ot,lt){Cn.debug("removeElementFromDiv"),apiCC.removeElementFromDiv(Ot,lt)},this.setSelectedStream=function(Ot){Cn.warn("setSelectedStream() is now deprecated")},this.callback=function(Ot,lt){return this.closureHandler=function(Tt){return Ot[lt](Tt)},this.closureHandler},this.startPrecallTest=function(Ot,lt,Tt,It,Dt){var Et={webRTCClient:this,notifyTerminated:Ot};this.callTest=new Un(Et,lt,Tt,It,Dt),this.callTest.runBitRateTest()}}},6527:(nt,it,s)=>{s.d(it,{p:()=>rt}),s(3843),s(3710),s(7941),s(4916),s(2772),s(2564),s(561),s(1058),s(9653),s(3290),s(6755),s(3123),s(2222),s(4812);var et=s(1549).Y.get("ApiCCWhiteBoardClient"),rt=function(ot,gt,dt,pt,st){function ht(at){at.style.display="none"}et.debug("Loading apiCC.ApiCCWhiteBoardClient"),this.roomId=null,this.whiteBoardDisconnectionTimeoutId=0,this.sessionStarted=!1,this.prev={},this.lastEmit=Date.now(),this.clients={},this.listenedPeers={},this.touchScreenActivated=!1,this.touchControlPoint={},this.drawElements=[],this.ghostElements={},this.redoStack=[],this.undoIndex=0,this.userCursorColor=null,this.cursors={},this.cursorStyle="cross",this.CURSOR_STYLES=["circle","cross"],this.currentScale=1,this.dx=0,this.dy=0,this.instructionsFaded=!1,this.canvas=null,this.ctx=null,this.currentTool="pen",this.currentColor="rgba(0, 0, 0, 1)",this.currentBrushWidth=1,this.readOnly=!1,this.isDrawing=!1,this.focusOnDrawing=!1,this.paperSheetId=0,this.drawingId=0,this.offline=!1,this.roomJoined=!1,this.laserModeActivated=!1,this.AVAILABLE_TOOLS=["pen","ellipse","rectangle","erase","void","arrow"],this.GEOMETRY_TOOLS=["arrow","rectangle","ellipse"],this.disconnectionTimer=st!==void 0?st:3e4,et.log("Setting Whiteboard disconnectionTimer to : "+this.disconnectionTimer),this.setCanvas=function(at){et.debug("[Whiteboard] setCanvas() :",at),this.canvas!==null&&(et.log("Unsetting old canvas events"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)))),at!==null&&document.getElementById(at)!==null?(this.canvas=document.getElementById(at),this.ctx=this.canvas.getContext("2d"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))):(at!==null&&document.getElementById(at)===null&&et.warn("No such element whose id is : "+at),this.canvas=null,this.ctx=null)},this.setCanvas(gt),this.sendDataToRoom=function(at){if(et.info("[Whiteboard] sendDataToRoom()"),this.offline===!1&&this.roomId!==null){if(apiCC.session===null||apiCC.session===void 0)return void et.info("apiCC.session does not exist, leaving process");et.debug("this.drawElements :",this.drawElements),et.debug("data.tool :",at.tool);var ut=[];et.debug("drawElementsToSend :",ut);var ft,mt={x:0,y:0,drawing:!1,tool:this.currentTool,cursorColor:this.userCursorColor,color:this.currentColor,width:this.currentBrushWidth,paperSheetId:this.paperSheetId,drawElements:ut,id:apiCC.session.apiCCId},yt=Object.keys(at);for(ft=0;ft<yt.length;ft++)mt[yt[ft]]=at[yt[ft]];apiCC.session.roomMgr.sendMessageToRoom(this.roomId,"whiteBoard",mt)}},this.setCursorsDiv=function(){et.warn("[Whiteboard] setCursorsDiv() - method obsolete, please use setUserCursorColor to set a cursor pointer that will be seen by other users")},this.setUserCursorColor=function(at){et.debug("[Whiteboard] setUserCursorColor() : "+at),at===null||at==="invisible"?this.userCursorColor="invisible":/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(at)?this.userCursorColor=at:(et.warn("[Whiteboard] setUserCursorColor() color "+at+" is invalid, defaulting to invisible"),this.userCursorColor="invisible")},this.setUserCursorColor(dt),this.setCursorStyle=function(at){et.debug("[Whiteboard] setCursorStyle() : "+at),this.CURSOR_STYLES.indexOf(at)>-1?(this.userCursorColor="invisible",this.cursorStyle=at):et.error("[Whiteboard] setCursorStyle() style "+at+" is invalid")},this.setFocusOnDrawing=function(at){et.debug("[Whiteboard] setFocusOnDrawing()"),this.focusOnDrawing=at},this.createRoom=function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et.debug("[Whiteboard] createRoom()"),apiCC.session.roomMgr.createRoom("whiteBoard",at)},this.requestContactListInRoom=function(at){et.log("[Whiteboard] requestContactListInRoom :"+at),apiCC.session.roomMgr.requestContactListInRoom(at)},this.setDrawingTool=function(at){et.debug("[Whiteboard] setDrawingTool()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.AVAILABLE_TOOLS.indexOf(at)>-1&&(this.currentTool=at,this.ghostElements[ut]=null)},this.setReadOnly=function(at){et.debug("[Whiteboard] setReadOnly()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.ghostElements[ut]=null,this.readOnly=at===!0,this.readOnly&&this.canvas!==null?(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))):this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))},this.laserModeProcess=function(at){var ut=this;setTimeout(function(){return ut.undo(at)},5e3)},this.undo=function(at){et.debug("[Whiteboard] undo()");var ut=this.drawElements.length-1,ft=null,mt=[],yt=[],At=null,wt=0;if(apiCC.session!==null&&(wt=apiCC.session.apiCCId),at===void 0)for(;ut>=0;)this.drawElements[ut].userId==wt&&(ft===null&&(ft=this.drawElements[ut].undoIndex),ft===this.drawElements[ut].undoIndex&&(At=this.drawElements.splice(ut,1)[0],mt.push(At),yt.push(At.drawingId))),ut--;else for(ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].userId==wt&&this.drawElements[ut].drawingId===at&&(et.debug("[Whiteboard] element found with drawingId in undo laser :",at),At=this.drawElements.splice(ut,1)[0],mt.push(At),yt.push(At.drawingId));mt.length>0&&(this.redraw(),this.sendDataToRoom({tool:"void",delete:yt,undoneElements:mt}),this.redoStack.push(mt))},this.redo=function(){et.debug("[Whiteboard] redo()");var at,ut=[];if(this.redoStack.length>0){for(ut=this.redoStack.pop(),at=0;at<ut.length;at++)this.addNewDrawing(ut[at]);this.sendDataToRoom({tool:"void",drawObjectsArray:ut}),this.redraw()}},this.setBrushSize=function(at){et.debug("[Whiteboard] setBrushSize()"),!isNaN(at)&&at>0&&(this.currentBrushWidth=at)},this.setBrushColor=function(at){et.debug("[Whiteboard] setBrushColor()"),this.currentColor=at},this.setScale=function(at){et.debug("[Whiteboard] setScale()"),at>0?(this.currentScale=at,this.redraw()):et.warn("Scale factor must be > 0!")},this.getScale=function(){return et.debug("[Whiteboard] getScale()"),this.currentScale},this.setOffset=function(at,ut){et.debug("[Whiteboard] setOffset()");var ft=parseInt(at,10),mt=parseInt(ut,10);isNaN(ft)||isNaN(mt)||(this.dx=Number(ft),this.dy=Number(mt),this.redraw())},this.getOffset=function(){return et.debug("[Whiteboard] getOffset()"),{x:this.dx,y:this.dy}},this.printSharedText=function(at,ut,ft,mt,yt,At){et.debug("[Whiteboard] printSharedText()"),this.setBrushStyle(this.currentColor,this.currentBrushWidth),this.undoIndex++,this.redoStack=[];var wt=0;apiCC.session!==null&&(wt=apiCC.session.apiCCId);var Pt={type:"text",x:at,y:ut,text:ft,size:mt,font:yt,border:At,userId:wt,drawingId:this.drawingId,color:this.currentColor,width:this.currentBrushWidth,undoIndex:this.undoIndex,time:Date.now()};this.sendDataToRoom({x:at,y:ut,tool:"void",drawObject:Pt}),this.drawingId++,this.addNewDrawing(Pt)},this.addPeerListener=function(at,ut){et.debug("[Whiteboard] addPeerListener()"),this.listenedPeers.hasOwnProperty(at)||(this.listenedPeers[at]=[]),this.listenedPeers[at].push(ut)},this.inviteInRoom=function(at,ut,ft){var mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};et.debug("[Whiteboard] inviteInRoom()"),at!==null?ut!==null?apiCC.session.roomMgr.inviteInRoom(at,ut,"whiteBoard",ft,mt):et.debug("wrong destId"):et.debug("wrong roomId")},this.answerToRoomInvitation=function(at,ut){et.info("[Whiteboard] answerToRoomInvitation()");var ft=ut&&!this.isInRoom();return this.isInRoom()?et.error("[Whiteboard] cannot answer room invitation : user is already in a room"):apiCC.session.roomMgr.answerToRoomInvitation(at,ut,"whiteBoard"),ft&&(et.log("[Whiteboard] user joining room"),this.paperSheetId=0,this.drawingId=0,this.roomId=at,this.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),ft},this.joinRoom=function(at){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};et.info("[Whiteboard] joinRoom() roomId :",at),at==null?et.error("[Whiteboard] cannot join room : room is null or undefined"):this.isInRoom()&&this.roomJoined===!0?et.error("[Whiteboard] cannot join room : user is already in a room"):apiCC.session.roomMgr.joinRoom(at,"whiteBoard",ut)},this.leaveRoom=function(){et.info("[Whiteboard] leaveRoom()"),this.isInRoom()&&(apiCC.session.roomMgr.leaveRoom(this.roomId,"whiteBoard"),this.roomId=null,this.paperSheetId=0,this.drawingId=0,this.listenedPeers={},this.roomJoined=!1)},this.isInRoom=function(){return this.roomId!==null},this.clearPaper=function(){et.debug("[Whiteboard] clearPaper()"),this.deleteHistory()},this.refreshCanvas=function(){if(this.canvas!==null&&this.ctx!==null){var at=this.canvas.width;this.canvas.width=at}},this.deleteHistory=function(){et.info("[Whiteboard] deleteHistory()");var at=0;apiCC.session!==null&&(at=apiCC.session.apiCCId),this.refreshCanvas(),this.drawElements=[],this.ghostElements[at]=null,this.paperSheetId++,this.drawingId=0,this.sendDataToRoom({tool:"void",deleteHistory:!0})},this.setBrushStyle=function(at,ut){this.ctx!==null&&(this.ctx.strokeStyle=at,this.ctx.fillStyle=at,this.ctx.lineWidth=ut)},this.redraw=function(){var at,ut,ft;for(et.debug("[Whiteboard] redraw()"),this.refreshCanvas(),at=0;at<this.drawElements.length;at++)this.drawSingleObject(this.drawElements[at]);for(ut=Object.keys(this.ghostElements),at=0;at<ut.length;at++)this.ghostElements[ut[at]]!==null&&this.drawSingleObject(this.ghostElements[ut[at]]);for(ut=Object.keys(this.cursors),at=0;at<ut.length;at++)if(this.cursors[ut[at]]!==null&&this.cursors[ut[at]].color!=="invisible"&&(this.cursors[ut[at]].x!==0||this.cursors[ut[at]].y!==0))switch(ft={fromx:(this.cursors[ut[at]].x-this.dx)*this.currentScale-13,fromy:(this.cursors[ut[at]].y-this.dy)*this.currentScale-13,tox:(this.cursors[ut[at]].x-this.dx)*this.currentScale+13,toy:(this.cursors[ut[at]].y-this.dy)*this.currentScale+13},this.setBrushStyle(this.cursors[ut[at]].color,4),this.cursorStyle){case"circle":this.ctx!==null&&(this.ctx.globalAlpha=.4,this.fillEllipse(ft.fromx,ft.fromy,ft.tox,ft.toy),this.drawEllipse(ft.fromx+2,ft.fromy+2,ft.tox-2,ft.toy-2),this.ctx.globalAlpha=1);break;case"cross":this.ctx!==null&&(this.ctx.globalAlpha=.7,this.ctx.beginPath(),this.ctx.moveTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.fromy),this.ctx.lineTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.toy),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(ft.fromx,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineTo(ft.tox,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.globalAlpha=1)}},this.addNewDrawing=function(at){var ut=0;this.drawElements.push(at),this.drawSingleObject(at),apiCC.session!==null&&(ut=apiCC.session.apiCCId),at.userId===ut&&this.laserModeActivated===!0&&this.laserModeProcess(at.drawingId)},this.drawSingleObject=function(at){if(this.ctx!==null&&this.canvas!==null){var ut={};switch(this.setBrushStyle(at.color,at.width),this.ctx.scale(this.currentScale,this.currentScale),ut.fromx=at.fromx-this.dx,ut.tox=at.tox-this.dx,ut.x=at.x-this.dx,ut.fromy=at.fromy-this.dy,ut.toy=at.toy-this.dy,ut.y=at.y-this.dy,at.type){case"arrow":this.drawArrow(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"ellipse":this.drawEllipse(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"rectangle":this.drawRectangle(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"pen":this.drawLine(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"erase":this.eraseArea(ut.fromx,ut.fromy);break;case"text":this.drawText(ut.x,ut.y,at.text,at.size,at.font,at.border)}this.ctx.scale(1/this.currentScale,1/this.currentScale)}},this.drawLine=function(at,ut,ft,mt){this.ctx!==null&&(this.ctx.beginPath(),this.ctx.moveTo(at,ut),this.ctx.lineTo(ft,mt),this.ctx.lineCap="round",this.ctx.stroke())},this.drawText=function(at,ut,ft,mt,yt,At){if(this.ctx!==null){var wt,Pt,Rt="Arial";yt!=null&&(Rt=yt),this.ctx.font=mt+"px "+Rt,this.ctx.fillText(ft,at,ut),At!=null&&(wt=this.ctx.strokeStyle,Pt=this.ctx.lineWidth,this.ctx.strokeStyle=At,this.ctx.lineWidth=1,this.ctx.strokeText(ft,at,ut),this.ctx.strokeStyle=wt,this.ctx.lineWidth=Pt)}},this.eraseArea=function(at,ut){this.ctx!==null&&this.ctx.clearRect(at-this.ctx.lineWidth-1,ut-this.ctx.lineWidth-1,2*this.ctx.lineWidth+2,2*this.ctx.lineWidth+2)},this.drawArrow=function(at,ut,ft,mt){if(this.ctx!==null){var yt=Math.atan2(mt-ut,ft-at);this.ctx.beginPath(),this.ctx.lineCap="butt",this.ctx.moveTo(at,ut),this.ctx.lineTo(ft,mt),this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(ft,mt),this.ctx.rotate(yt+Math.PI/2),this.ctx.moveTo(0,-this.ctx.lineWidth),this.ctx.lineTo(5*this.ctx.lineWidth*.5+1,10+.25*this.ctx.lineWidth),this.ctx.lineTo(-5*this.ctx.lineWidth*.5-1,10+.25*this.ctx.lineWidth),this.ctx.closePath(),this.ctx.restore(),this.ctx.fill()}},this.drawEllipse=function(at,ut,ft,mt){var yt=null,At=null;this.ctx!==null&&(yt={x:Math.abs(at-ft)/2,y:Math.abs(ut-mt)/2},At={x:at-(at-ft)/2,y:ut-(ut-mt)/2},this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(At.x,At.y,yt.x,yt.y,0,0,2*Math.PI),this.ctx.stroke())},this.fillEllipse=function(at,ut,ft,mt){if(this.ctx!==null){var yt={x:Math.abs(at-ft)/2,y:Math.abs(ut-mt)/2},At={x:at-(at-ft)/2,y:ut-(ut-mt)/2};this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(At.x,At.y,yt.x,yt.y,0,0,2*Math.PI),this.ctx.fill()}},this.drawRectangle=function(at,ut,ft,mt){if(this.ctx!==null){this.ctx.beginPath();var yt=at,At=ut;at>ft&&(yt=ft),ut>mt&&(At=mt),this.ctx.rect(yt,At,Math.abs(at-ft),Math.abs(ut-mt)),this.ctx.stroke()}},this.getContext=function(){return this.ctx},this.loadPhotoInBackground=function(at){et.debug("[Whiteboard] loadPhotoInBackground :"+at);var ut=document.getElementsByTagName("body")[0];ut.style.backgroundImage="url("+at+")",ut.style.backgroundPosition="50% 50%",ut.style.backgroundRepeat="no-repeat"},this.messageProcessing=function(at){et.debug("[Whiteboard] messageProcessing");var ut,ft=null,mt=null,yt=!1,At=null,wt=null,Pt=null,Rt=null,kt=null;if(this.cursors[at.id]||(et.log("[Whiteboard] messageProcessing - creating cursor for new user : "+at.id),this.cursors[at.id]={id:at.id},this.clients[at.id]={}),this.cursors[at.id].x=at.x,this.cursors[at.id].y=at.y,this.cursors[at.id].lastUpdate=Date.now(),at.cursorColor&&at.cursorColor!==null?this.cursors[at.id].color=at.cursorColor:this.cursors[at.id].color="invisible",apiRTC.userAgentInstance===void 0||apiRTC.userAgentInstance.capabilities.whiteboardCursor==="ON"?this.cursors[at.id].color!=="invisible"&&(yt=!0):(et.debug("[Whiteboard] - cursor is not supported on userAgent"),this.cursors[at.id].color="invisible"),this.ghostElements[at.id]!==null&&(this.ghostElements[at.id]=null,yt=!0),this.listenedPeers.hasOwnProperty(at.id))for(At={id:at.id,x:at.x,y:at.y,tool:at.tool,drawing:at.drawing},ut=0;ut<this.listenedPeers[at.id].length;ut++)typeof this.listenedPeers[at.id][ut]=="function"?this.listenedPeers[at.id][ut](At):et.warn("[Whiteboard] Peer listenener is not a function!");if(at.drawing&&this.clients[at.id]&&(et.debug("data.drawing && this.clients[data.id]"),mt={fromx:at.prevX!==void 0?at.prevX:this.clients[at.id].x,fromy:at.prevY!==void 0?at.prevY:this.clients[at.id].y,tox:at.x,toy:at.y,type:at.tool!==null?at.tool:"pen",color:at.color,width:at.width,userId:at.id,drawingId:at.drawingId},this.GEOMETRY_TOOLS.indexOf(mt.type)>-1?at.prevX&&at.prevY&&(this.ghostElements[at.id]=mt,yt=!0):this.addNewDrawing(mt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(at.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(at.y-this.dy)-ft.clientHeight/2)),at.drawObject&&((mt=at.drawObject).color=at.color,mt.width=at.width,this.ghostElements[at.id]=null,this.addNewDrawing(mt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(at.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(at.y-this.dy)-ft.clientHeight/2)),at.hasOwnProperty("drawObjectsArray"))for(ut=0;ut<at.drawObjectsArray.length;ut++)this.addNewDrawing(at.drawObjectsArray[ut]);if(at.hasOwnProperty("delete"))for(ut=this.drawElements.length-1,yt=!0;ut>=0;)at.delete.indexOf(this.drawElements[ut].drawingId)>-1&&this.drawElements[ut].userId==at.id&&this.drawElements.splice(ut,1),ut--;if(at.hasOwnProperty("paperSheetId")){if(at.paperSheetId<this.paperSheetId)et.debug("[Whiteboard] - data.paperSheetId < this.paperSheetId");else if(at.paperSheetId>this.paperSheetId){if(et.debug("[Whiteboard] - messageProcessing : peer has a more recent version : "+this.paperSheetId+" vs "+at.paperSheetId),at.hasOwnProperty("deleteHistory")&&et.debug("User : "+at.id+" ,has deleted the history"),at.hasOwnProperty("drawElements")){for(et.debug("[Whiteboard] - messageProcessing : receiving update from peer"),at.drawElements!==null?this.drawElements=at.drawElements:this.drawElements=[],ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].hasOwnProperty("userId")&&this.drawElements[ut].hasOwnProperty("drawingId")&&(this.clients[this.drawElements[ut].userId]={x:0,y:0,drawing:!1,tool:"pen",cursorColor:null,color:null,width:1,paperSheetId:this.paperSheetId,drawingId:this.drawElements[ut].drawingId,id:this.drawElements[ut].userId});this.paperSheetId=at.paperSheetId,this.drawingId=0,yt=!0}}else if(at.hasOwnProperty("drawingId"))if(et.debug("[Whiteboard] - data.hasOwnProperty(drawingId): "),at.drawingId!==0&&this.clients[at.id]===void 0||this.clients[at.id]!==void 0&&this.clients[at.id].hasOwnProperty("drawingId")&&at.drawingId-this.clients[at.id].drawingId>1)et.log("[Whiteboard] - messageProcessing : catchup from peer required : "+at.drawingId),Rt=at.id+"||-1",this.clients[at.id]!==void 0&&this.clients[at.id].hasOwnProperty("drawingId")&&(Rt=at.id+"||"+this.clients[at.id].drawingId),this.sendDataToRoom({tool:"void",needCatchUp:Rt});else if(at.hasOwnProperty("needCatchUp")&&(at.needCatchUp.startsWith(apiCC.session.apiCCId+"||")||at.needCatchUp.startsWith("*||"))){for(et.debug("[Whiteboard] - messageProcessing : letting peer catchup: "+at.id),wt=at.needCatchUp.split("||")[1],Pt=[],ut=0;ut<this.drawElements.length;ut++)(kt=this.drawElements[ut]).hasOwnProperty("userId")&&kt.hasOwnProperty("drawingId")&&kt.userId===apiCC.session.apiCCId&&kt.drawingId>parseInt(wt,10)&&Pt.push(kt);this.sendDataToRoom({tool:"void",catchUpData:Pt,catchupIndex:wt})}else et.debug("[Whiteboard] - else - drawingId");else if(at.hasOwnProperty("needCatchUp")){for(et.debug("[Whiteboard] - messageProcessing : needCatchUp"+at.id),wt=at.needCatchUp.split("||")[1],Pt=[],ut=0;ut<this.drawElements.length;ut++)kt=this.drawElements[ut],Pt.push(kt);et.debug("[Whiteboard] - sending catchUpData : ",Pt),this.sendDataToRoom({tool:"void",catchUpData:Pt,catchupIndex:wt})}else et.debug("[Whiteboard] - else - paperSheetId");if(at.hasOwnProperty("catchUpData")){for(et.debug("[Whiteboard] - messageProcessing : catching up: "+at.id),at.catchUpStatus==="complete"&&(et.debug("catchUpData is complete, cleaning drawElements"),this.drawElements.splice(0,this.drawElements.length)),ut=0;ut<at.catchUpData.length;ut++)kt=at.catchUpData[ut],at.userId===apiCC.session.apiCCId&&kt.hasOwnProperty("drawingId")&&this.drawingId<kt.drawingId&&(this.drawingId=kt.drawingId+1);this.drawElements=at.catchUpData.concat(this.drawElements),this.paperSheetId=at.paperSheetId,yt=!0}}yt&&this.redraw(),this.clients[at.id]=at},this.isStarted=function(){return this.sessionStarted},this.start=function(){this.isStarted()?et.warn("[Whiteboard] WhiteBoardClient is already started"):(et.info("[Whiteboard] starting WhiteBoardClient"),this.isDrawing=!1,this.prev={},this.lastEmit=Date.now(),this.currentScale=1,this.dx=0,this.dy=0,this.drawingId=0,this.clients={},this.listenedPeers={},this.cursors={},this.drawElements=[],this.touchScreenActivated=!1,this.sessionStarted=!0,this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove),this.redraw()),apiCC.session!==null&&apiCC.session.roomMgr!==void 0||(et.log("[Whiteboard] roomMgr is not defined, setting offline mode"),this.offline=!0)},this.stop=function(){this.isStarted()?(et.info("[Whiteboard] Stopping WhiteBoardClient"),this.isInRoom()&&this.leaveRoom(),this.sessionStarted=!1,this.canvas!==null&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))),this.drawElements=[],this.ghostElements={},this.redoStack=[]):et.info("[Whiteboard] cannot stop WhiteboardClient as it is not started")},this.getTouchOffSet=function(at){et.debug("[Whiteboard] getTouchOffSet():");var ut,ft,mt,yt,At=null,wt={offsetX:0,offsetY:0};return At=at.target,ut=window.getComputedStyle(At,null),ft=parseInt(ut.borderLeftWidth,10),mt=parseInt(ut.borderTopWidth,10),yt=At.getBoundingClientRect(),wt.offsetX=at.clientX-ft-yt.left,wt.offsetY=at.clientY-mt-yt.top,et.log("offset.offsetX :"+wt.offsetX),et.log("offset.offsetY :"+wt.offsetY),wt},this.toggleTouchScreen=function(){this.touchScreenActivated===!0?this.deactivateTouchScreen():this.activateTouchScreen()},this.activateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!0,this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to activateTouchScreen() while canvas is null.")},this.deactivateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!1,this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to deactivateTouchScreen() while canvas is null.")},this.activateLaserMode=function(){this.laserModeActivated=!0},this.deactivateLaserMode=function(){this.laserModeActivated=!1},this.sendDrawingData=function(at,ut,ft){et.debug("[Whiteboard] sendDrawingData()");var mt={x:at.offsetX,y:at.offsetY,drawing:ut,prevX:this.prev.x,prevY:this.prev.y};if(ut!==!1||this.userCursorColor!=="invisible"){var yt=0;apiCC.session!==null&&(yt=apiCC.session.apiCCId),ft!==null&&(mt.drawObject=ft,mt.drawObject.drawingId=this.drawingId,mt.drawObject.userId=yt,this.drawingId++),mt.drawingId=this.drawingId,this.sendDataToRoom(mt)}else et.debug("isDrawing false and userCursorColor invisible - leaving sendDrawingData")},this.onmousedown=(function(at){at.preventDefault();var ut,ft,mt=at.target||at.srcElement,yt=mt.currentStyle||window.getComputedStyle(mt,null),At=parseInt(yt.borderLeftWidth,10)||0,wt=parseInt(yt.borderTopWidth,10)||0,Pt=mt.getBoundingClientRect(),Rt={offsetX:this.dx+1/this.currentScale*(at.clientX-At-Pt.left),offsetY:this.dy+1/this.currentScale*(at.clientY-wt-Pt.top)};if(this.prev.x=Rt.offsetX,this.prev.y=Rt.offsetY,this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(ut=document.getElementById(pt))===null||this.instructionsFaded||(ht(ut),this.instructionsFaded=!0),this.currentTool==="erase"){this.sendDrawingData(Rt,this.isDrawing,null);var kt=0;apiCC.session!==null&&(kt=apiCC.session.apiCCId),this.lastEmit=Date.now(),ft={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:kt,drawingId:this.drawingId,undoIndex:this.undoIndex,time:Date.now()},this.drawingId++,this.addNewDrawing(ft),this.redraw()}}).bind(this),this.onmouseup=(function(at){var ut,ft=null,mt=null,yt=0,At=0,wt=null,Pt={offsetX:0,offsetY:0},Rt=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(mt=(ft=at.target||at.srcElement).currentStyle||window.getComputedStyle(ft,null),yt=parseInt(mt.borderLeftWidth,10)||0,At=parseInt(mt.borderTopWidth,10)||0,wt=ft.getBoundingClientRect(),Pt.offsetX=this.dx+1/this.currentScale*(at.clientX-yt-wt.left),Pt.offsetY=this.dy+1/this.currentScale*(at.clientY-At-wt.top),apiCC.session!==null&&(Rt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:Pt.offsetX,toy:Pt.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:Rt,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(Pt,this.isDrawing,ut),this.ghostElements[Rt]=null,this.redraw(),this.addNewDrawing(ut),this.prev.x=Pt.offsetX,this.prev.y=Pt.offsetY),this.isDrawing=!1,this.ghostElements[Rt]=null}).bind(this),this.onmouseleave=(function(){var at=0;apiCC.session!==null&&(at=apiCC.session.apiCCId),this.isDrawing=!1,this.sendDrawingData({offsetX:0,offsetY:0},this.isDrawing,null),this.ghostElements[at]=null}).bind(this),this.onmousemove=(function(at){var ut,ft,mt,yt,At,wt=null,Pt={};if(ut=(wt=at.target||at.srcElement).currentStyle||window.getComputedStyle(wt,null),ft=parseInt(ut.borderLeftWidth,10)||0,mt=parseInt(ut.borderTopWidth,10)||0,yt=wt.getBoundingClientRect(),Pt.offsetX=this.dx+1/this.currentScale*(at.clientX-ft-yt.left),Pt.offsetY=this.dy+1/this.currentScale*(at.clientY-mt-yt.top),Date.now()-this.lastEmit>30)if(this.sendDrawingData(Pt,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing){var Rt=0;apiCC.session!==null&&(Rt=apiCC.session.apiCCId),At={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:Rt,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(At.tox=Pt.offsetX,At.toy=Pt.offsetY),At.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(At),this.prev.x=Pt.offsetX,this.prev.y=Pt.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(At.tox=Pt.offsetX,At.toy=Pt.offsetY,this.ghostElements[Rt]=At),this.currentTool!=="pen"&&this.redraw()}else this.currentTool==="erase"&&(this.redraw(),At={type:"rectangle",fromx:Pt.offsetX-this.currentBrushWidth,fromy:Pt.offsetY-this.currentBrushWidth,tox:parseInt(Pt.offsetX,10)+parseInt(this.currentBrushWidth,10),toy:parseInt(Pt.offsetY,10)+parseInt(this.currentBrushWidth,10),color:"#444444",width:1},this.drawSingleObject(At),At.color="#DDDDDD",At.fromx=At.fromx-1,At.fromy=At.fromy-1,At.tox=At.tox+1,At.toy=At.toy+1,this.drawSingleObject(At))}).bind(this),this.onTouchStart=(function(at){et.debug("[Whiteboard] handleStart"),at.preventDefault();var ut,ft=at.changedTouches,mt={};this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(mt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*mt.offsetX,mt.offsetY=this.dy+1/this.currentScale*mt.offsetY,this.prev.x=mt.offsetX,this.prev.y=mt.offsetY,this.sendDrawingData(mt,!1,null),(ut=document.getElementById(pt))!==null&&ht(ut)}).bind(this),this.onTouchEnd=(function(at){et.debug("[Whiteboard] handleEnd :"+at);var ut,ft={},mt=at.changedTouches,yt=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&((ft=this.getTouchOffSet(mt[0])).offsetX=this.dx+1/this.currentScale*ft.offsetX,ft.offsetY=this.dy+1/this.currentScale*ft.offsetY,apiCC.session!==null&&(yt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:ft.offsetX,toy:ft.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:yt,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(ft,this.isDrawing,ut),this.addNewDrawing(ut),this.prev.x=ft.offsetX,this.prev.y=ft.offsetY),this.isDrawing=!1,this.ghostElements[yt]=null,at=null}).bind(this),this.onTouchCancel=(function(at){et.debug("[Whiteboard] handleCancel :"+at);var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.isDrawing=!1,this.ghostElements[ut]=null,at=null}).bind(this),this.onTouchMove=(function(at){et.debug("[Whiteboard] handleMove :"+at);var ut,ft=at.changedTouches,mt={};if(Date.now()-this.lastEmit>30&&((mt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*mt.offsetX,mt.offsetY=this.dy+1/this.currentScale*mt.offsetY,this.sendDrawingData(mt,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing)){(mt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*mt.offsetX,mt.offsetY=this.dy+1/this.currentScale*mt.offsetY;var yt=0;apiCC.session!==null&&(yt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:yt,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(ut.tox=mt.offsetX,ut.toy=mt.offsetY),ut.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(ut),this.prev.x=mt.offsetX,this.prev.y=mt.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(ut.tox=mt.offsetX,ut.toy=mt.offsetY,this.ghostElements[yt]=ut,this.redraw())}}).bind(this)}},8560:(nt,it,s)=>{s.r(it),s(2772),s(3710),s(9554),s(1539),s(8674),s(561),s(2564),s(8309),s(4916),s(3123),s(1058),s(6992),s(8783),s(3948),s(285),s(1637),s(4363),s(9653),s(9714),s(3843),s(7941),s(4812),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2222),s(9600),s(6755),s(4747),s(2526),s(1817),s(2165);var et=s(1549),rt=s(5945),ot=s(8765),gt=s(1215),dt=s(3173),pt=et.Y.get("RecordManager"),st=s(4708);function ht(Rt,kt){for(var bt=0;bt<kt.length;bt++){var Nt=kt[bt];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(Rt,Nt.key,Nt)}}s(2707),s(7042),s(9070);var at=et.Y.get("AudioProcessor"),ut=window.AudioContext||window.webkitAudioContext||!1,ft=function(){function Rt(){(function(Nt,Ft){if(!(Nt instanceof Ft))throw new TypeError("Cannot call a class as a function")})(this,Rt),this.audioContext=null}var kt,bt;return kt=Rt,(bt=[{key:"getOrCreateAudioContext",value:function(){return at.debug("getOrCreateAudioContext"),apiRTC.osName==="iOS"&&typeof cordova<"u"?at.debug("No audioContext for iOS cordova"):ut&&(this.audioContext=new ut),this.audioContext.state==="suspended"&&this.audioContext.resume().then(function(){at.debug("AudioContext is resumed")}),this.audioContext}},{key:"listenToAudio",value:function(Nt,Ft){if(at.debug("listenToAudio()"),Ft!=null&&apiCC.activeSpeakerDetect===!0&&Ft.childStreamType!=="noiseReduction"){at.debug("activeSpeakerDetect()");var Ut=null,Jt=!1,hn=this.getOrCreateAudioContext();hn!=null?(Ft.nodeCtx={},Ft.nodeCtx.sourceNode=hn.createMediaStreamSource(Nt),Ft.nodeCtx.analyserNode=hn.createAnalyser(),Ft.nodeCtx.analyserNode.fftSize=2048,Ft.nodeCtx.sourceNode.connect(Ft.nodeCtx.analyserNode),Ft.nodeCtx.listenToAudioIntervalId=setInterval(function(){var Xt,zt,cn=new Uint8Array(Ft.nodeCtx.analyserNode.frequencyBinCount),vn=0;for(Ft.nodeCtx.analyserNode.getByteFrequencyData(cn),cn.sort(function(Sn,fn){return fn-Sn}),cn=cn.slice(0,50),zt=0;zt<cn.length;zt++)vn+=cn[zt];(Xt=vn/cn.length)>255*apiCC.activeSpeakerThreshold&&(Jt||(Jt=!0,Ft.notifyActiveSpeaker(Xt),at.debug("notifyActiveSpeaker this.userMediaStreamId :",Ft.userMediaStreamId)),Ut!==null&&clearTimeout(Ut),Ut=setTimeout(function(){Ft.notifyNotActiveSpeaker(Xt),at.debug("notifyNotActiveSpeaker this.userMediaStreamId :",Ft.userMediaStreamId),Jt=!1},1e3))},100)):at.error("listenToAudio() - Unable to create audio context")}else at.debug("activeSpeakerDetecting is not activated or stream type is noiseReduction")}},{key:"checkstopAudioNodeCtxConditions",value:function(Nt){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Nt===void 0?"nodeCtx undefined":"OK"}},{key:"stopAudioNodeCtx",value:function(Nt){at.debug("stopAudioNodeCtx :",Nt);var Ft=this.checkstopAudioNodeCtxConditions(Nt);if(Ft!=="OK")return Ft;Nt.sourceNode!==void 0&&Nt.sourceNode!==null&&(Nt.sourceNode.disconnect(),Nt.sourceNode=null),Nt.analyserNode!==void 0&&Nt.analyserNode!==null&&(Nt.analyserNode.disconnect(),Nt.analyserNode=null),Nt.audioDestination!==void 0&&Nt.audioDestination!==null&&(Nt.audioDestination.disconnect(),Nt.audioDestination=null),Nt.originalMediaTrack!==void 0&&Nt.originalMediaTrack!==null&&(Nt.originalMediaTrack=null),Nt.outputMediaTrack!==void 0&&Nt.outputMediaTrack!==null&&(Nt.outputMediaTrack=null),Nt.listenToAudioIntervalId!==void 0&&Nt.listenToAudioIntervalId!==null&&(clearInterval(Nt.listenToAudioIntervalId),Nt.listenToAudioIntervalId=null),Nt.noiseSuppressorNode!==void 0&&Nt.noiseSuppressorNode!==null&&(Nt.noiseSuppressorNode.port.onmessage=null,Nt.noiseSuppressorNode.port.close(),Nt.noiseSuppressorNode=null)}},{key:"checkChildTypeConditions",value:function(Nt){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Nt.childType!==void 0&&Nt.childType==="noiseReduction"?"This stream has already a noiseReduction effect applied : "+Nt.childType:Nt.childrenTypeExists("noiseReduction")?"This stream has already has a noiseReduction sub instance running":"OK"}},{key:"startNoiseReduction",value:function(Nt){var Ft=this,Ut=null,Jt=!1;return new Promise(function(hn,Xt){at.debug("startNoiseReduction");var zt=Ft.checkChildTypeConditions(Nt);if(zt!=="OK")return Xt(zt);Nt.nodeCtx={},Nt.nodeCtx.originalMediaTrack=Nt.data.getAudioTracks()[0];var cn=apiCC.audioProcessor.getOrCreateAudioContext();Nt.nodeCtx.sourceNode=cn.createMediaStreamSource(Nt.data);var vn={channelCount:Nt.data.getAudioTracks()[0].getSettings().channelCount,channelCountMode:"explicit"};Nt.nodeCtx.audioDestination=new MediaStreamAudioDestinationNode(cn,vn),Nt.nodeCtx.outputMediaTrack=Nt.nodeCtx.audioDestination.stream.getAudioTracks()[0],cn.audioWorklet.addModule("https://cdn.apizee.com/apiRTC/lib/noiseReduction/ApiRTC_NR_Worklet_1.0.1.js").then(function(){Nt.nodeCtx.noiseSuppressorNode=new AudioWorkletNode(cn,"NoiseSuppressorWorklet",{parameterData:{activeSpeakerDetect:apiCC.activeSpeakerDetect}}),Nt.nodeCtx.sourceNode.connect(Nt.nodeCtx.noiseSuppressorNode).connect(Nt.nodeCtx.audioDestination);var Sn={audioFilterIsApplied:Nt.audioFilterIsApplied,audioAppliedFilter:Nt.audioAppliedFilter,videoFilterIsApplied:Nt.videoFilterIsApplied,videoAppliedFilter:Nt.videoAppliedFilter,childType:Nt.childType},fn=Nt.nodeCtx.audioDestination.stream;Nt.data.getVideoTracks().forEach(function(mn){fn.addTrack(mn.clone())}),Nt.createChildStreamFromStream(fn,"noiseReduction",Sn).then(function(mn){Nt.addChildren(mn,"noiseReduction"),mn.applyMuteStatusFromParent();var bn=apiCC.getUserMediaStream(Nt.userMediaStreamId);apiCC.audioProcessor.stopAudioNodeCtx(bn.nodeCtx);var un=apiCC.getUserMediaStream(mn.userMediaStreamId);return Nt.nodeCtx.noiseSuppressorNode.port.onmessage=function(Tn){Tn.data.vadScore>apiCC.activeSpeakerThreshold&&(Jt||(Jt=!0,un.notifyActiveSpeaker(Tn.data.vadScore),at.debug("notifyActiveSpeaker this.userMediaStreamId :",un.userMediaStreamId)),Ut!==null&&clearTimeout(Ut),Ut=setTimeout(function(){un.notifyNotActiveSpeaker(Tn.data.vadScore),at.debug("notifyNotActiveSpeaker this.userMediaStreamId :",un.userMediaStreamId),Jt=!1},1e3))},hn(mn)}).catch(Xt)}).catch(function(Sn){console.error("Error while adding audio worklet module: ",Sn)})})}}])&&ht(kt.prototype,bt),Object.defineProperty(kt,"prototype",{writable:!1}),Rt}();function mt(Rt){return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},mt(Rt)}var yt=et.Y.get("ApiCC_Methods"),At=s(6075).F;apiCC.myWebRTC_Adapter=new At,apiCC.myWebRTC_Event=new ot.K;var wt=apiCC.myWebRTC_Event;apiCC.myEventTable=[],apiCC.ApiCCSession=s(3720).K,apiCC.ApiCCWebRTCClient=s(1192).D,apiCC.ApiCCUserMediaStream=s(7323).q,apiCC.ApiCCPointerSharingClient=s(9213).X,apiCC.ApiCCWhiteBoardClient=s(6527).p,apiCC.ApiCCDataClient=s(128)._,apiCC.ApiCCIMClient=s(6844).U,apiCC.recordMgr=new function(){pt.debug("RecordManager creation"),this.mediaRecorder=null,this.recordedBlobs=[],this.mimeType=null,this.record=function(Rt,kt){var bt=this;return pt.info("record"),pt.log("stream :"+Rt),pt.log("stream :",Rt),new Promise(function(Nt,Ft){var Ut=null;if(MediaRecorder===void 0)return pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void Ft(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt));if(Rt===null)return pt.debug("Stream has no data, cannot record"),void Ft(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"Stream has no data, cannot record",pt));if(bt.mediaRecorder!==null&&(pt.log("this.mediaRecorder.state :"+bt.mediaRecorder.state),bt.mediaRecorder.state==="recording"||bt.mediaRecorder.state==="paused"))return pt.log("mediaRecorder is already ongoing, use stopRecordStream before trying another record"),void Ft(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already ongoing, use stopRecordStream before trying another record",pt));if(pt.debug("checking MediaRecorderOptions mimeType support"),kt!=null?(pt.debug("options is defined :",kt),kt.mimeType!==null&&kt.mimeType!==void 0&&(pt.debug("contentType is defined :",kt.mimeType),MediaRecorder.isTypeSupported(kt.mimeType)&&(Ut=kt.mimeType))):kt={},Ut===null){var Jt="video/webm;codecs=vp8,opus";MediaRecorder.isTypeSupported(Jt)||(pt.debug(Jt+" is not Supported"),Jt="video/webm;codecs=vp9,opus",MediaRecorder.isTypeSupported(Jt)||(pt.debug(Jt+" is not Supported"),Jt="video/webm",MediaRecorder.isTypeSupported(Jt)||(pt.debug(Jt+" is not Supported"),Jt=""))),kt.mimeType=Jt}bt.mimeType=kt.mimeType,pt.debug("Start record with MediaRecorderOptions :",kt);try{bt.recordedBlobs=[],bt.mediaRecorder=new MediaRecorder(Rt,kt)}catch(hn){return pt.error("Exception while creating MediaRecorder: "+hn+". mimeType: "+kt.mimeType),void Ft(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"Exception while creating MediaRecorder: "+hn+". mimeType: "+kt.mimeType,pt))}bt.mediaRecorder.onstart=function(hn){pt.log("onstart :"+hn),this.onerror=null,Nt()},bt.mediaRecorder.ondataavailable=function(hn){hn.data&&hn.data.size>0&&apiCC.recordMgr.recordedBlobs.push(hn.data)},bt.mediaRecorder.onerror=function(hn){pt.log("onerror :"+hn),Ft(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+hn,pt)),this.onerror=null},bt.mediaRecorder.start(10),pt.log("MediaRecorder started",bt.mediaRecorder)})},this.stop=function(){var Rt=this;return pt.info("stop"),new Promise(function(kt,bt){return Rt.mediaRecorder.onstop=function(Nt){pt.log("mediaRecorder onstop :"+Nt),this.onstart=null,this.onstop=null,this.onerror=null,this.onpause=null,this.onresume=null,this.ondataavailable=null;var Ft=new Blob(apiCC.recordMgr.recordedBlobs,{type:this.mimeType});kt(Ft)},MediaRecorder===void 0?(pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt))):Rt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to stop"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to stop",pt))):(pt.log("this.mediaRecorder.state :"+Rt.mediaRecorder.state),Rt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is already inactive"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already inactive",pt))):void Rt.mediaRecorder.stop())})},this.pause=function(){var Rt=this;return pt.info("pause"),new Promise(function(kt,bt){return Rt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to pause"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to pause",pt))):(pt.log("this.mediaRecorder.state :"+Rt.mediaRecorder.state),Rt.mediaRecorder.state==="paused"?(pt.log("mediaRecorder is already paused"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already paused",pt))):Rt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(Rt.mediaRecorder.onerror=function(Nt){pt.log("onerror :"+Nt),bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Nt,pt)),this.onerror=null},Rt.mediaRecorder.onpause=function(Nt){pt.log("onpause :"+Nt),this.onerror=null,kt()},void Rt.mediaRecorder.pause()))})},this.resume=function(){var Rt=this;return pt.info("resume"),new Promise(function(kt,bt){return Rt.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to resume"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to resume",pt))):(pt.log("this.mediaRecorder.state :"+Rt.mediaRecorder.state),Rt.mediaRecorder.state==="recording"?(pt.log("mediaRecorder is already recording"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already recording",pt))):Rt.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(Rt.mediaRecorder.onerror=function(Nt){pt.log("onerror :"+Nt),bt(gt.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Nt,pt)),this.onerror=null},Rt.mediaRecorder.onresume=function(Nt){pt.log("onresume :"+Nt),this.onerror=null,kt()},void Rt.mediaRecorder.resume()))})}},apiCC.audioProcessor=new ft,apiCC.pendingPromises=[],apiCC.pendingPromisesId=0,rt.$6!=="electron"?s(2746):yt.debug("Electron detected, not loading onbeforeunload"),apiCC.addEventListener=function(Rt,kt,bt){var Nt={},Ft=null;["sessionReady","incomingCall","callEstablished","remoteHangup","userMediaSuccess","userMediaError","userMediaStop","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCUAvailableReplay","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","localStreamRemoved","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onCallScoreUpdate","activeSpeaker","stopSpeaking","audioAmplitude","preCallTestStatus","onQosVideoChange","onCallStatsUpdate","cpuLimited","bandwidthLimited","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","callRestarting","selectedICECandidate","MCUParticipantEjected","MCURoomModeChanged","MCUStreamingStarted","MCUStreamingStopped","mediaDeviceChanged","externalJsLoadingStatus","slowLink","localStreamUpdated","remoteStreamUpdated","simulcastFeedChanged","videoQualityChanged","bandwidthResourceManagement","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","cloudEventOccurred"].indexOf(Rt)>-1?(Rt==="remoteHangup"&&yt.warn("DEPRECATED : ApiRTC : remoteHangup event is now deprecated, please use hangup event instead"),yt.log("Adding listener on type :"+Rt),typeof apiRTC_React<"u"?eventManager.addEventListener(Rt,kt):document.addEventListener?document.addEventListener(Rt,kt,!1):typeof $jqApz<"u"?(yt.log("using $jqApz"),$jqApz(document).on(Rt,kt)):typeof jQuery<"u"?(yt.log("using jQuery"),jQuery(document).on(Rt,kt)):yt.warn("Custom Events not supported on this browser : addEventListener()"),Nt={type:Rt,listener:kt,setBy:bt},Ft=apiCC.myEventTable.push(Nt),yt.trace("number of myEventTable:"+Ft)):(wt.createErrorEvent("ERROR: Trying to add a listener on an unknow event","UNKNOWN_EVENT_ON_ADDLISTENER"),yt.log("ERROR: Trying to add a listener on an unknow event :"+Rt))},apiCC.removeEventListener=function(Rt,kt){yt.debug("Removing listener on type :"+Rt),document.removeEventListener?document.removeEventListener(Rt,kt,!1):typeof jQuery<"u"?jQuery(document).off(Rt,kt):yt.log("Custom Events not supported on this browser")},apiCC.setSessionStorage=function(Rt,kt,bt){yt.debug("setSessionStorage"),bt=bt||36e5;var Nt=new Date,Ft=new Date;Ft.setTime(Nt.getTime()+bt);try{var Ut=JSON.stringify({value:kt,expiresAt:Ft});sessionStorage.setItem(Rt,Ut)}catch{yt.error("Sotheming went wrong during json strigify to set session storage values")}},apiCC.isWebRTCCompliant=function(){yt.debug("isWebRTCCompliant");var Rt=!1,kt=!1;return["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(bt){Rt||bt in window&&(Rt=!0)}),Rt===!1?(yt.debug("isWebRTCCompliant::isWebRTCSupported false"),!1):(["getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia"].forEach(function(bt){kt||bt in navigator&&(kt=!0)}),kt===!1?(yt.debug("isWebRTCCompliant::isWebRTCGUMSupported false or you are connected with HTTP"),!1):rt.Xh==="MIUI Browser"?(yt.debug("isWebRTCCompliant::MIUI Browser detected false"),!1):rt.Xh==="UCBrowser"?(yt.debug("isWebRTCCompliant::UCBrowser detected false"),!1):rt.Xh==="QQ"||rt.Xh==="QQBrowser"||rt.Xh==="QQBrowserLite"?(yt.debug("isWebRTCCompliant::QQ or QQBrowser or QQBrowserLite detected false"),!1):rt.Xh==="Baidu"||rt.Xh==="baidu"?(yt.debug("isWebRTCCompliant::Baidu or baidu detected false"),!1):(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&this.webRTCPluginActivated!==!0?(yt.debug("isWebRTCCompliant FALSE : IE or Safari"),!1):(yt.debug("isWebRTCCompliant:: WebRTC is supported"),!0))},apiCC.isQoSStatCompliant=function(){var Rt=!1;return["chrome","firefox"].indexOf(apiCC.browserDetails.type)<0?(yt.debug("QoS Statistics is only supported on Chrome and Firefox"),Rt):Rt=!0},apiCC.isScreenSharingCompliant=function(){var Rt=!1;return typeof apiRTC_React<"u"?Rt=!0:(rt.Xh==="IE"||rt.BF==="Android"||apiRTC.osName==="iOS"&&typeof cordova<"u"||(rt.Xh==="Chrome"||rt.Xh==="Firefox"&&rt.PR>=52||navigator.getDisplayMedia||navigator.mediaDevices.getDisplayMedia?Rt=!0:yt.debug("ScreenSharing is not supported")),Rt)},apiCC.getMediaDevices=function(){return yt.debug("getMediaDevices"),new Promise(function(Rt,kt){if(typeof apiRTC_React<"u")yt.log("enumerateDevices() is supported - React Native"),mediaDevices.enumerateDevices().then(function(bt){yt.log("enumerateDevices(), sources :",bt),apiCC.mediaDeviceMgr.mediaSourceInfos=bt,Rt(bt)}).catch(function(bt){yt.log("enumerateDevices(), error :",bt),kt(bt)});else if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)yt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(function(bt){yt.log("enumerateDevices(), sources :",bt),apiCC.mediaDeviceMgr.mediaSourceInfos=bt,Rt(bt)}).catch(function(bt){yt.log("enumerateDevices(), error :",bt),kt(bt)});else if(yt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")yt.warn("This browser does not support MediaStreamTrack"),kt(new Error("getMediaDevices() - MediaStreamTrack undefined"));else try{MediaStreamTrack.getSources(Rt)}catch(bt){yt.debug("catch MediaStreamTrack.getSources :"+bt),kt(new Error("getMediaDevices() - Error on MediaStreamTrack.getSources :"+bt))}})},apiCC.getMediaDevicesWithCB=function(Rt){if(yt.debug("getMediaDevicesWithCB"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)yt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(Rt).catch(function(kt){yt.log("navigator.mediaDevices.enumerateDevices error: ",kt),kt=null});else if(yt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")Rt(null),yt.warn("This browser does not support MediaStreamTrack");else try{MediaStreamTrack.getSources(Rt)}catch(kt){yt.debug("catch MediaStreamTrack.getSources :"+kt),Rt(null)}},apiCC.getUserMedia=function(Rt){return yt.info("getUserMedia"),yt.debug("with constraints :",Rt),new Promise(function(kt,bt){navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(yt.debug("webRTC getUserMedia with promises"),navigator.mediaDevices.getUserMedia(Rt).then(kt).catch(bt)):typeof apiRTC_React<"u"?(yt.debug("webRTC getUserMedia with promises on React Native"),mediaDevices.getUserMedia(Rt).then(kt).catch(bt)):(yt.debug("webRTC getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(Rt,kt,bt))})},apiCC.getUserMediaWithCB=function(Rt,kt,bt){yt.info("getUserMediaWithCB"),yt.debug("with constraints :"+JSON.stringify(Rt)),navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(yt.log("getUserMedia with promises"),navigator.mediaDevices.getUserMedia(Rt).then(kt).catch(bt)):(yt.log("getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(Rt,kt,bt))},apiCC.userMediaStreamTable=[],apiCC.getUserMediaStreamIds=function(){for(var Rt=[],kt=apiCC.userMediaStreamTable.length;--kt>=0;)Rt.push(apiCC.userMediaStreamTable[kt].userMediaStreamId);return Rt},apiCC.getUserMediaStream=function(Rt,kt){var bt=null,Nt=apiCC.userMediaStreamTable.length;if(Rt==null){if(kt&&typeof kt.accept=="function"){for(;--Nt>=0;)if(kt.accept(apiCC.userMediaStreamTable[Nt])===!0){bt=apiCC.userMediaStreamTable[Nt];break}}}else for(;--Nt>=0;)if(apiCC.userMediaStreamTable[Nt].userMediaStreamId===Rt){bt=apiCC.userMediaStreamTable[Nt];break}return bt},apiCC.getFirstUserMediaStream=function(){return apiCC.userMediaStreamTable.length>0?apiCC.userMediaStreamTable[0]:null},apiCC.createUserMediaStream=function(Rt){var kt=function(Ft){for(var Ut=apiCC.userMediaStreamTable.length;--Ut>=0;)if(apiCC.userMediaStreamTable[Ut].userMediaStreamId===Ft){apiCC.userMediaStreamTable.splice(Ut,1);break}},bt=new apiCC.ApiCCUserMediaStream,Nt="call";return yt.debug("[createUserMediaStream] userMediaStreamId: "+bt.userMediaStreamId),Rt==null&&(Rt={}),Rt.type&&(bt.callType=Rt.type),Rt.stream?(bt.stream=Rt.stream,bt.streamStolen=!0,bt.notifyUserMediaStop=!1,bt.listenForMuteEvents()):Rt.gum_config&&(bt.gum_config=(0,st.S6)(Rt.gum_config)),Rt.audioSourceId&&(bt.inputs.audioSourceId=Rt.audioSourceId),Rt.videoSourceId&&(bt.inputs.videoSourceId=Rt.videoSourceId),Rt.facingMode&&(bt.inputs.facingMode=Rt.facingMode),Rt.captureSourceType&&(bt.captureSourceType=Rt.captureSourceType),Rt.notifyUserMediaSuccess&&(bt.notifyUserMediaSuccess=Rt.notifyUserMediaSuccess),Rt.notifyUserMediaError&&(bt.notifyUserMediaError=Rt.notifyUserMediaError),Rt.tryAudioCallAfterUserMediaError&&(bt.tryAudioCallAfterUserMediaError=Rt.tryAudioCallAfterUserMediaError),Rt.displayMediaStreamConstraints&&(bt.displayMediaStreamConstraints=Rt.displayMediaStreamConstraints),Rt.forceExtensionOnChrome&&(bt.forceExtensionOnChrome=Rt.forceExtensionOnChrome),Rt.filters&&(bt.filters=Rt.filters),Rt.callId&&(Rt.callFlavor!=="call"&&Rt.callFlavor!=="userMedia"||(Nt=Rt.callFlavor),bt.stream===null?bt.addCallInfo(Rt.callId,Nt,!0):bt.addCallInfo(Rt.callId,Nt,!1)),Rt.childStreamType&&(bt.childStreamType=Rt.childStreamType),bt.callbacks.release=typeof Rt.release=="function"?Rt.release:function(){},bt.callbacks.success=typeof Rt.success=="function"?Rt.success:function(){},bt.callbacks.failure=typeof Rt.failure=="function"?Rt.failure:function(){},apiCC.userMediaStreamTable.push(bt),bt.stream===null?bt.callType==="screenSharing"||bt.callType==="screenSharingWithAudio"?bt.getScreenMedia():bt.callType!=="data"?bt.getUserMedia():Rt.sync===!0?(kt(bt.userMediaStreamId),bt.callbacks.failure(bt,"wrong type")):setTimeout(function(){kt(bt.userMediaStreamId),bt.callbacks.failure(bt,"wrong type")},0):(bt.updateMediaProperties(bt.stream),Rt.sync===!0?bt.callbacks.success(bt):setTimeout(function(){bt.callbacks.success(bt)},0)),bt},apiCC.releaseUserMediaStream=function(Rt,kt,bt){var Nt=!1,Ft=apiCC.userMediaStreamTable.length,Ut=null;if(kt!==null&&typeof kt!="string"&&(kt=null),Rt==null){if(bt&&typeof bt.accept=="function"){for(;--Ft>=0;)if(bt.accept(apiCC.userMediaStreamTable[Ft])===!0){if(kt){if((Ut=apiCC.userMediaStreamTable[Ft].getOwnerCallInfo())===null||Ut.callId!==kt){apiCC.userMediaStreamTable[Ft].removeCallInfo(kt);break}}else if((Ut=apiCC.userMediaStreamTable[Ft].getOwnerCallInfo())!==null)break;yt.debug("[releaseUserMediaStream] match; userMediaStreamId: "+apiCC.userMediaStreamTable[Ft].userMediaStreamId),apiCC.userMediaStreamTable[Ft].release(),kt&&apiCC.userMediaStreamTable[Ft].removeCallInfo(kt),apiCC.userMediaStreamTable.splice(Ft,1),Nt=!0;break}}}else for(;--Ft>=0;)if(apiCC.userMediaStreamTable[Ft].userMediaStreamId===Rt){if(kt){if((Ut=apiCC.userMediaStreamTable[Ft].getOwnerCallInfo())===null||Ut.callId!==kt){apiCC.userMediaStreamTable[Ft].removeCallInfo(kt);break}}else if((Ut=apiCC.userMediaStreamTable[Ft].getOwnerCallInfo())!==null)break;yt.debug("[releaseUserMediaStream] id; userMediaStreamId: "+apiCC.userMediaStreamTable[Ft].userMediaStreamId),apiCC.userMediaStreamTable[Ft].release(),kt&&apiCC.userMediaStreamTable[Ft].removeCallInfo(kt),apiCC.userMediaStreamTable.splice(Ft,1),Nt=!0;break}return Nt},apiCC.activeSpeakerDetect=!1,apiCC.activeSpeakerThreshold=.4,apiCC.enableActiveSpeakerDetecting=function(Rt,kt){apiCC.activeSpeakerDetect=Rt,kt&&(apiCC.activeSpeakerThreshold=kt)},apiCC.apiRTCExtensionInstalled=!1,apiCC.extensionInstallationSuccessCallback=function(){yt.debug("extensionInstallationSuccessCallback"),apiCC.apiRTCExtensionInstalled=!0},apiCC.extensionInstallationFailureCallback=function(Rt,kt){yt.debug("extensionInstallationFailureCallback : Error :"+Rt+", "+kt),Rt=null,kt=null,wt.createDesktopCaptureEvent("Extension_installation_Error",apiRTC.waitingShareScreenCallId,apiRTC.waitingShareScreenDestNumber,apiRTC.waitingCaptureSourceType)},apiCC.manageNotInstalledExtension=function(Rt,kt,bt){yt.debug("manageNotInstalledExtension"),yt.warn("apiRTC extension not installed"),wt.createDesktopCaptureEvent("Extension_not_installed",Rt,kt),yt.warn("Starting apiRTC extension installation"),apiRTC.waitingShareScreenDestNumber=kt,apiRTC.waitingShareScreenCallId=Rt,apiRTC.waitingCaptureSourceType=bt,rt.PR>=71?(yt.debug("Chrome >= 71, opening Chrome web Store"),apiRTC.extensionInstallationFailureCallback("Chrome71 : chrome.webstore.install() no more supported","Chrome71-screenShare"),window.open("https://chrome.google.com/webstore/detail/apizee-desktop-capture/mjjnofoemoepfididplbfimokpnpcoeg")):chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",apiRTC.extensionInstallationSuccessCallback,apiRTC.extensionInstallationFailureCallback)},apiCC.activateScreenSharing=function(Rt){yt.debug("activateScreenSharing");var kt=null;Rt!==void 0?yt.log("extensionId is defined :"+Rt):(yt.log("using apirtc extension's Id"),Rt="mjjnofoemoepfididplbfimokpnpcoeg"),rt.Xh==="Chrome"?document.getElementById(Rt)!==null?(yt.log("extensionLink is present, screenSharing is already activated"),window.postMessage("apiRTC-extension","*")):(yt.log("screenSharing is not yet activated"),(kt=document.createElement("link")).href="https://chrome.google.com/webstore/detail/"+Rt,kt.rel="chrome-webstore-item",kt.id=Rt,document.getElementsByTagName("head")[0].appendChild(kt),window.addEventListener("message",function(bt){var Nt=null;if(yt.log("message: event: "+JSON.stringify(bt.data)),bt.origin==window.location.origin){if(bt.data!=="apiRTC-DeskstopCapture-loaded")return bt.data==="extensionInstalledAndLoaded"?(apiCC.apiRTCExtensionInstalled=!0,apiCC.waitingShareScreenUserMediaStream!==null&&apiCC.waitingShareScreenUserMediaStream!==void 0&&(apiCC.userMediaStreamTable.push(apiCC.waitingShareScreenUserMediaStream[0]),delete apiCC.waitingShareScreenUserMediaStream),void(apiCC.waitingShareScreenUserMediaStreamId&&(Nt=apiCC.getUserMediaStream(apiCC.waitingShareScreenUserMediaStreamId),delete apiCC.waitingShareScreenUserMediaStreamId,Nt&&Nt.getScreenMedia()))):void(mt(bt.data)==="object"&&bt.data.desktopId!==void 0&&(bt.data.remoteId!=="getScreenMedia"||(Nt=apiCC.getUserMediaStream(bt.data.callNumber))===null||Nt.registerScreenMedia(bt.data.captureSourceType,bt.data.desktopId)));apiCC.apiRTCExtensionInstalled=!0}}),window.postMessage("apiRTC-extension","*")):(yt.log("activateScreenSharing is only available for chrome Browser"),wt.createDesktopCaptureEvent("Browser_Not_Compatible",null,null))},apiCC.checkIfAudioSourceIdExistOnDevice=function(Rt){yt.log("checkIfAudioSourceIdExistOnDevice :",Rt);var kt,bt=!1,Nt=null;if(apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Nt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).kind!=="audio"&&Nt.kind!=="audioinput"||(Nt.deviceId===Rt?(yt.log("Audio device present :",Rt),bt=!0):yt.log("not this deviceId"));return bt},apiCC.setAudioSourceIdInConstraint=function(Rt,kt){return yt.log("setAudioSourceIdInConstraint:",kt),Rt==null?yt.log("audioSourceId not defined"):kt.audio===!1?yt.log("constraints.audio === false, no audio device present"):apiCC.checkIfAudioSourceIdExistOnDevice(Rt)===!1?(yt.log("audioSourceId not found on device"),kt.audio={}):(kt.audio!==!0&&kt.audio!==void 0||(kt.audio={}),yt.log("audioSourceId is defined :",Rt),rt.ag.name==="iOS"?rt.Xh==="Mobile Safari"||(kt.audio.deviceId=Rt):rt.Xh==="Firefox"&&rt.PR>=50?kt.audio.deviceId=Rt:rt.Xh==="Chrome"&&rt.PR<48||rt.Xh==="Safari"&&rt.PR<11?kt.audio.optional=[{sourceId:Rt}]:kt.audio.deviceId=Rt?{ideal:Rt}:void 0),yt.debug("constraints =",kt),kt},apiCC.checkIfVideoSourceIdExistOnDevice=function(Rt){yt.log("checkIfVideoSourceIdExistOnDevice :",Rt);var kt,bt=!1,Nt=null;if(yt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Nt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).kind!=="video"&&Nt.kind!=="videoinput"||(Nt.deviceId===Rt?(yt.log("Video device present :",Rt),bt=!0):yt.log("not this deviceId"));return bt},apiCC.getMediaDeviceLabelFromDeviceid=function(Rt){yt.log("getMediaDeviceLabelFromDeviceid :",Rt);var kt,bt="Not_Found",Nt=null;if(yt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(kt=0;kt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++kt)(Nt=apiCC.mediaDeviceMgr.mediaSourceInfos[kt]).deviceId===Rt?(yt.log("Video device present :",Rt),bt=Nt.label):yt.log("not this deviceId");return bt},apiCC.setVideoSourceIdInConstraint=function(Rt,kt){if(yt.log("setVideoSourceIdInConstraint : ",kt),Rt==null)yt.log("videoSourceId not defined");else if(kt.video===!1)yt.log("constraints.video === false, no video device present");else if(apiCC.checkIfVideoSourceIdExistOnDevice(Rt)===!1)yt.log("videoSourceId not found on device"),kt.video={};else if(yt.log("videoSourceId is defined :",Rt),kt.video!==!0&&kt.video!==void 0||(kt.video={}),rt.ag.name==="iOS")if(rt.Xh==="Mobile Safari"){if(Rt){var bt=!1,Nt=rt.ag.version.split(".");Nt.length>0&&parseInt(Nt[0])<13&&(bt=!0),kt.video.deviceId=bt?{exact:Rt}:{ideal:Rt}}}else kt.video.deviceId=Rt;else rt.Xh==="Firefox"&&rt.PR>=50?rt.Xh==="Firefox"&&rt.PR>=77?(yt.debug("FX > 77 using exact to set deviceId"),kt.video.deviceId={exact:Rt}):kt.video.deviceId=Rt:rt.Xh==="Chrome"&&rt.PR<48||rt.Xh==="Safari"&&rt.PR<11?kt.video.optional=[{sourceId:Rt}]:kt.video.deviceId=Rt?{ideal:Rt}:void 0;return yt.log("constraints =",kt),kt},apiCC.setVideoFacingModeInConstraint=function(Rt,kt){yt.log("setVideoFacingModeInConstraint");var bt={};return kt.video===!1?(yt.log("facingMode value is not setted, constraints.video is false"),kt):Rt==null?(yt.log("facingMode value is not setted"),kt):Rt!=="user"&&Rt!=="environment"&&Rt!=="left"&&Rt!=="right"?(yt.log("facingMode value is not correct"),kt):(navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0&&(bt=navigator.mediaDevices.getSupportedConstraints()),bt.hasOwnProperty("facingMode")?(yt.log("Setting FacingMode in constraint"),kt.video===!0&&(kt.video={}),kt.video.facingMode={ideal:Rt}):yt.log("FacingMode not supported by device"),yt.debug("constraints =",kt),kt)},apiCC.setResolutionInConstraint=function(Rt,kt,bt){return yt.log("setResolutionInConstraint"),Rt<=0||kt<=0?(yt.log("Resolution value must be positif non null"),bt):(bt.video===!0||bt.video!==void 0?rt.ag.name==="iOS"?rt.Xh==="Mobile Safari"?(bt.video.width=Rt?{exact:Rt}:void 0,bt.video.height=kt?{exact:kt}:void 0):(bt.video.width=Rt,bt.video.height=kt):rt.Xh==="Firefox"&&rt.PR>=50?(bt.video.width=Rt,bt.video.height=kt):rt.Xh==="Safari"&&rt.PR>=11||rt.Xh==="Mobile Safari"||rt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||rt.Xh==="Chrome"&&rt.PR>=49||rt.Xh==="Firefox"&&rt.PR>=50?(bt.video.width=Rt?{exact:Rt}:void 0,bt.video.height=kt?{exact:kt}:void 0):bt.video.mandatory=[{width:Rt,height:kt}]:yt.error("setResolutionInConstraint : contraint.video must be true or defined"),yt.debug("constraints =",bt),bt)},apiCC.checkConstraintDependingOnDevice=function(Rt){yt.debug("checkConstraintDependingOnDevice :",Rt),rt.Xh==="Mobile Safari"&&rt.PR>=13&&Rt.video!==void 0&&Rt.video.height!==void 0&&Rt.video.width!==void 0&&Rt.video.height.ideal===1080&&Rt.video.width.ideal===1920&&(yt.debug("Downgrading selected height and width resolution on iOS, to avoid stream issue"),Rt.video.height.ideal=720,Rt.video.width.ideal=1280)},apiCC.attachMediaStream=function(Rt,kt){yt.debug("attachMediaStream"),Rt!==null?(Rt.srcObject!==void 0?Rt.srcObject=kt:Rt.mozSrcObject!==void 0?Rt.mozSrcObject=kt:Rt.src!==void 0?rt.Xh==="Chrome"&&rt.PR<46?(yt.log("Attaching media stream for Chrome < 46"),Rt.src=webkitURL.createObjectURL(kt)):Rt.src=URL.createObjectURL(kt):yt.error("Error attaching stream to element."),rt.ag.name==="iOS"&&(yt.log("iOS detected"),Rt.setAttribute("playsinline",!0))):yt.log("videoElt is null")},apiCC.addStreamInDiv=function(Rt,kt,bt,Nt,Ft,Ut,Jt){yt.debug("addStreamInDiv");var hn,Xt=null,zt=null,cn=!1,vn=null;(0,st.Ym)(Jt,"object")&&Jt.type!=null&&(kt=Jt.type),(0,st.Ym)(Jt,"object")&&Jt.forceAudioAndVideoMediaElementSeparation!==void 0&&(yt.debug("forceAudioAndVideoMediaElementSeparation is set"),cn=!0),kt==="audio"?Xt=document.createElement("audio"):(rt.BF==="iOS"&&rt.Xh==="Mobile Safari"&&(yt.debug("iOS && Mobile Safari"),cn=!0),Xt=document.createElement("video")),Xt.id=Nt,Xt.autoplay=!0,cn===!0&&Ut===!1?(yt.debug("before adding separated MediaEltAudio"),(vn=document.createElement("audio")).id=Nt+"_sepAudio",vn.muted=Ut,vn.autoplay=!0,Xt.muted=!0):Xt.muted=Ut,Xt.style.width=Ft.width,Xt.style.height=Ft.height,Ft.controls===!0&&(Xt.controls=!0),hn=function(Sn){var fn=null,mn=Sn.play();fn=function(){var bn=Sn.play();yt.log("funcFixIoS"),bn!==void 0&&bn.then(function(){yt.log("Autoplay started"),document.removeEventListener("touchstart",fn)}).catch(function(un){yt.error("Autoplay was prevented")})},mn!==void 0&&mn.then(function(){yt.log("Autoplay started")}).catch(function(bn){rt.ag.name==="iOS"?(yt.warn("iOS : Autoplay was prevented, activating touch event to start media play"),apiCC.myWebRTC_Event.createErrorEvent("ERROR: iOS : Autoplay was prevented","IOS_AUTOPLAY_PREVENTED"),document.addEventListener("touchstart",fn)):yt.warn("Autoplay was prevented")})},rt.Xh==="Chrome"&&rt.PR==="61"&&rt.BF==="Android"&&(Xt.style.borderRadius="1px",yt.log("Patch for video display on Chrome 61 Android")),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==null?(yt.log("audioOutputId set to: "+apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId),Xt.setSinkId(apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId).then(function(){yt.log("Success, audio output device attached")})):yt.log("No audioOutputId set"),rt.BF!=="iOS"&&(zt=document.getElementById(bt)).appendChild(Xt),Rt!==void 0&&(apiCC.attachMediaStream(Xt,Rt),cn===!0&&Ut===!1&&apiCC.attachMediaStream(vn,Rt)),rt.BF==="iOS"&&(zt=document.getElementById(bt)).appendChild(Xt),cn===!0&&Ut===!1&&zt!==null&&zt.appendChild(vn),hn(Xt),cn===!0&&Ut===!1&&hn(vn)},apiCC.removeElementFromDiv=function(Rt,kt){yt.debug("removeElementFromDiv");var bt,Nt,Ft=null;bt=document.getElementById(kt),Ft=document.getElementById(Rt),bt!==null&&(yt.log("Removing video element with Id : "+kt),Ft!==null&&Ft.removeChild(bt)),(Nt=document.getElementById(kt+"_sepAudio"))!==null&&(yt.log("iOS : Removing audio element with Id : "+kt+"_sepAudio"),Ft!==null&&Ft.removeChild(Nt))},apiCC.randomString=function(Rt,kt){for(var bt=typeof kt=="string"&&kt.length>0?kt:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Nt="";--Rt>=0;)Nt+=bt.charAt(Math.floor(Math.random()*bt.length));return Nt},apiCC.generateCallId=function(){var Rt;return Rt=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),yt.debug("new callId :"+Rt),Rt},apiCC.generateInstanceId=function(){var Rt;return Rt=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),yt.debug("new instanceId :"+Rt),Rt},apiCC.myApiCCWhiteBoardClient=null,apiCC.createWhiteBoard=function(Rt,kt,bt,Nt){return yt.debug("createWhiteBoard"),apiCC.myApiCCWhiteBoardClient=new apiCC.ApiCCWhiteBoardClient(apiCC.session,Rt,kt,bt,Nt),apiCC.myApiCCWhiteBoardClient},apiCC.closeWhiteBoardClient=function(Rt){yt.info("closeWhiteBoardClient"),wt.createClosingWhiteBoardEvent(apiCC.myApiCCWhiteBoardClient.roomId,Rt),apiCC.myApiCCWhiteBoardClient.isInRoom()&&apiCC.myApiCCWhiteBoardClient.leaveRoom(),apiCC.myApiCCWhiteBoardClient.stop()},apiCC.registerIOsDevice=function(Rt){yt.debug("call registerIOsDevice 1");var kt={type:"registerIOsDevice",senderId:apiCC.session.apiCCId,token:Rt},bt=JSON.stringify(kt);yt.debug("call registerIOsDevice "+bt),apiCC.session.channel.socket.emit("registerIOsDevice",bt),yt.debug("call registerIOsDevice  done")},apiCC.registerAndroidDevice=function(Rt){yt.debug("registerAndroidDevice");var kt={type:"registerAndroidDevice",senderId:apiCC.session.apiCCId,token:Rt},bt=JSON.stringify(kt);apiCC.session.channel.socket.emit("registerAndroidDevice",bt)},apiCC.unRegisterIOsDevice=function(Rt){yt.debug("unRegisterIOsDevice");var kt={type:"unRegisterIOsDevice",senderId:apiCC.session.apiCCId,token:Rt},bt=JSON.stringify(kt);apiCC.session.channel.socket.emit("unRegisterIOsDevice",bt)},apiCC.unRegisterAndroidDevice=function(Rt){yt.debug("unRegisterAndroidDevice");var kt={type:"unRegisterAndroidDevice",senderId:apiCC.session.apiCCId,token:Rt},bt=JSON.stringify(kt);apiCC.session.channel.socket.emit("unRegisterAndroidDevice",bt)},apiCC.storeSessionInfoInSessionStorage=function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(yt.info("storeSessionInfoInSessionStorage",Rt),apiCC.session){var kt=5e3;(0,st.ki)(apiCC.session,"apiCCIdPersistenceTimeout","number")&&apiCC.session.apiCCIdPersistenceTimeout>=0&&(kt=apiCC.session.apiCCIdPersistenceTimeout),(0,st.Ym)(Rt.apiCCIdPersistenceTimeout,"number")&&Rt.apiCCIdPersistenceTimeout>=0&&(kt=Rt.apiCCIdPersistenceTimeout),apiCC.setSessionStorage("apiCCId",apiCC.session.apiCCId,kt),apiCC.setSessionStorage("apiKey",apiCC.session.apiKey,kt),apiCC.session.sessionId!==null&&apiCC.setSessionStorage("sessionId",apiCC.session.sessionId,kt)}},apiCC.disconnect=function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt.info("disconnect",Rt),apiCC!==null&&apiCC.cleanAllEventListener(Rt),apiCC.session!==null&&apiCC.session!==void 0&&(typeof apiRTC_React>"u"&&Rt.invalidateApiCCId!==!0&&apiCC.storeSessionInfoInSessionStorage(Rt),apiCC.myApiCCWhiteBoardClient!==null&&(yt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null&&apiCC.closeWhiteBoardClient("USER_DISCONNECTION")),yt.log("Disconnecting from Server"),apiCC.session.channel.socket!==void 0&&apiCC.session.channel.socket!==null&&apiCC.session.channel.socket.disconnect(),apiCC.session.channel.channelHasBeenDisconnected=!1,apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length)),apiCC&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiCC.reconnect=function(){yt.log("Reconnect"),yt.log("apiCC.session.channel.socket:",apiCC.session.channel.socket),apiCC.session.channel.socket.socket.connect()},apiCC.cleanApiRTCContext=function(){apiCC.session!==null&&apiCC.session!==void 0&&(apiCC.session.apiCCWebRTCClient!==null&&apiCC.session.apiCCWebRTCClient!==void 0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length!==0&&yt.warn("Call is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length>0&&yt.log("MCU session is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.hangUp(),apiCC.session.apiCCWebRTCClient.webRTCClient.localStream!==null&&(apiCC.session.apiCCWebRTCClient.webRTCClient.stopStream(apiCC.session.apiCCWebRTCClient.webRTCClient.localStream),wt.createUserMediaStopEvent(null,"media")),apiCC.session.apiCCWebRTCClient=null),apiCC.session.apiCCIMClient!==null&&apiCC.session.apiCCIMClient!==void 0&&(apiCC.session.apiCCIMClient=null),apiCC.session.apiCCDataClient!==null&&apiCC.session.apiCCDataClient!==void 0&&(apiCC.session.apiCCDataClient=null),apiCC.myApiCCWhiteBoardClient!==null&&apiCC.myApiCCWhiteBoardClient!==void 0&&(apiCC.myApiCCWhiteBoardClient=null))},apiCC.cleanAllEventListener=function(){var Rt,kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},bt=0;if(apiCC!==null&&apiCC.myEventTable!==null&&(bt=apiCC.myEventTable.length),bt!==0){for(yt.trace("number of myEventTable:"+bt),Rt=0;Rt<bt;Rt+=1)kt.unregister===!0&&apiCC.myEventTable[Rt].setBy==="UserAgent"?yt.debug("Keeping event for UserAgent process"):apiCC.removeEventListener(apiCC.myEventTable[Rt].type,apiCC.myEventTable[Rt].listener);apiCC.myEventTable.splice(0,bt),bt=apiCC.myEventTable.length,yt.trace("number of myEventTable after splice:"+bt)}},apiCC.testUserPing=function(Rt){yt.debug("testUserPing()");var kt,bt,Nt,Ft,Ut=apiCC.bandwidthTestServer+"/upload-test",Jt=new XMLHttpRequest,hn=new FormData,Xt=Math.round(5*Math.random()),zt=!1;"withCredentials"in Jt?Jt.open("POST",Ut,!0):typeof XDomainRequest<"u"?(Jt=new XDomainRequest).open("POST",Ut):Jt=null,kt=new Blob([Xt],{type:"text/xml"}),hn.append("file",kt),Jt?(Jt.onload=function(){Jt.status===200&&(Ft=Date.now()-bt,zt||(clearTimeout(Nt),Rt(null,Ft)))},Jt.onerror=function(cn){yt.log("testUserUpload onerror status :",cn.target.status),Rt({err:"An error occured during XMLHttpRequest",msg:cn.target.status},null)},Nt=setTimeout(function(){zt=!0,Rt("Ping timeout",-1)},5e3),Jt.send(hn),bt=Date.now()):Rt({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserDownload=function(Rt,kt){yt.debug("testUserDownload()");var bt,Nt,Ft,Ut,Jt,hn,Xt=apiCC.bandwidthTestServer+"/files/noise_"+Rt+"ko.jpg",zt=0,cn=new Image,vn=0;Xt+="?nnn="+Date.now();var Sn=[[256,257529],[500,525944],[768,787234],[1e3,1055741],[1500,1541044],[2e3,1992034],[2500,2596028],[3e3,2904977],[3500,3648299],[4e3,4151187],[4500,4741712],[5e3,5264577],[5500,5776081],[6e3,6318553],[6500,6779868],[7e3,7334256],[7500,7874040],[8e3,8081460],[8500,8651795],[9e3,9081899],[9500,9503574],[1e4,10082008],[10500,10543425],[11e3,11200424],[11500,11200424],[12e3,12110671],[12500,12715962],[13e3,13222120],[13500,13605073],[14e3,13954769],[14500,14777594],[15e3,15178928],[15500,15602106],[16e3,16054618],[16500,16578623],[17e3,17048069],[17500,17456403],[18e3,17910332],[18500,18725846],[19e3,19284746],[19500,19771902],[2e4,20121527],[21e3,20975042],[22e3,22189200],[23e3,23027928],[24e3,24027870],[25e3,24878845],[26e3,26237503],[27e3,27112004],[28e3,27953446],[29e3,29313013],[3e4,30474095]];for(Jt=0;Jt<Sn.length;Jt++)Rt===Sn[Jt][0]&&(zt=Sn[Jt][1]);apiCC.testUserPing(function(fn,mn){cn.onload=function(){for((Nt=Date.now()-bt)-mn>10&&(Nt-=mn),Ft=zt/(Nt/1e3),Ut=Math.round(Ft/1e3),hn={type:"download",kBPerSec:Ut},Jt=0;Jt<apiCC.bandwidthRatingThresholds.length;Jt++)8*hn.kBPerSec>=apiCC.bandwidthRatingThresholds[Jt]&&vn++;hn.rating=vn+"/"+apiCC.bandwidthRatingThresholds.length,kt(null,hn)},cn.onerror=function(bn,un){kt({label:"Error when downloading",err:bn,msg:un},null)},bt=new Date().getTime(),cn.src=Xt})},apiCC.testUserUpload=function(Rt,kt){yt.debug("testUserUpload()");var bt,Nt,Ft,Ut,Jt,hn,Xt,zt=apiCC.bandwidthTestServer+"/upload-test",cn=new XMLHttpRequest,vn=new FormData,Sn="",fn=0;for(("withCredentials"in cn)?cn.open("POST",zt,!0):typeof XDomainRequest<"u"?(cn=new XDomainRequest).open("POST",zt):cn=null,Nt=0;Nt<Rt;Nt++)Sn+=Math.round(5*Math.random());bt=new Blob([Sn],{type:"text/xml"}),vn.append("file",bt),cn?(cn.onload=function(){if(cn.status===200){for(Jt=Date.now()-Ut,hn=Rt/(Jt/1e3),Xt=Math.round(hn/1e3),Ft={type:"upload",kBPerSec:Xt},Nt=0;Nt<apiCC.bandwidthRatingThresholds.length;Nt++)8*Ft.kBPerSec>=apiCC.bandwidthRatingThresholds[Nt]&&fn++;Ft.rating=fn+"/"+apiCC.bandwidthRatingThresholds.length,kt(null,Ft)}else kt({err:"An error occured during XMLHttpRequest",msg:cn.status},null)},cn.onerror=function(mn){yt.log("testUserUpload onerror status :",mn.target.status),kt({err:"An error occured during XMLHttpRequest",msg:mn.target.status},null)},cn.send(vn),Ut=Date.now()):kt({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserUploadLoop=function(Rt,kt,bt){var Nt={type:"upload",kBPerSec:kt.kbps/8,kbps:kt.kbps,rating:kt.rating},Ft=0;kt.kbps>1e3?apiCC.testUserUpload(Rt,function(Ut,Jt){Ut!==null?bt({err:"An error occured during XMLHttpRequest"},null):(Nt.kBPerSec=Jt.kBPerSec,Nt.kbps=8*Jt.kBPerSec,Nt.rating=Jt.rating,Ft=Nt.kbps-kt.kbps,yt.debug("upload "+Rt+" "+JSON.stringify(Nt)+"; diff "+Ft),Ft>=2e4&&Rt<12e6?apiCC.testUserUploadLoop(Rt+8e6,Nt,bt):Ft>=1e4&&Rt<14e6?apiCC.testUserUploadLoop(Rt+6e6,Nt,bt):Ft>=5e3&&Rt<16e6?apiCC.testUserUploadLoop(Rt+4e6,Nt,bt):Ft>=1e3&&Rt<18e6?apiCC.testUserUploadLoop(Rt+2e6,Nt,bt):Ft>=200&&Rt<19e6?apiCC.testUserUploadLoop(Rt+1e6,Nt,bt):bt(null,Nt))}):bt(null,Nt)},apiCC.testUserDownloadLoop=function(Rt,kt,bt){var Nt={type:"download",kBPerSec:kt.kbps/8,kbps:kt.kbps,rating:kt.rating},Ft=0;kt.kbps>=3500?apiCC.testUserDownload(Rt,function(Ut,Jt){Ut!==null?bt({err:"Error when downloading"},null):(Nt.kBPerSec=Jt.kBPerSec,Nt.kbps=8*Jt.kBPerSec,Nt.rating=Jt.rating,Ft=Nt.kbps-kt.kbps,yt.debug("download "+Rt+" "+JSON.stringify(Nt)+"; diff "+Ft),Ft>=2e4?apiCC.testUserDownloadLoop(3e4,Nt,bt):Ft>=1e4&&Rt<=2e4?apiCC.testUserDownloadLoop(Rt+1e4,Nt,bt):Ft>=5e3&&Rt<=25e3?apiCC.testUserDownloadLoop(Rt+5e3,Nt,bt):Ft>=1e3&&Rt<=27e3?apiCC.testUserDownloadLoop(Rt+3e3,Nt,bt):Ft>=200&&Rt<=29e3?apiCC.testUserDownloadLoop(Rt+1e3,Nt,bt):bt(null,Nt))}):bt(null,Nt)},apiCC.listenedAudioSources={};var Pt=window.AudioContext||window.webkitAudioContext||!1;apiCC.audioContext=null,apiCC.getAudioContext=function(){return apiRTC.osName==="iOS"&&typeof cordova<"u"?yt.debug("No audioContext for iOS cordova"):Pt&&apiCC.audioContext===null&&(apiCC.audioContext=new Pt),apiCC.audioContext},apiCC.listenToAudioSources=function(Rt){yt.debug("listenToAudioSources()");var kt,bt=apiCC.getAudioContext();bt!=null?(Object.keys(apiCC.listenedAudioSources).length>0&&apiCC.stopAudioSourceListening(),apiCC.getMediaDevices().then(function(Nt){for(yt.log(Nt),kt=0;kt<Nt.length;kt++)Nt[kt].kind==="audioinput"&&(apiCC.listenedAudioSources[Nt[kt].deviceId]={deviceId:Nt[kt].deviceId,callback:Rt,label:Nt[kt].label},navigator.getUserMedia({audio:{optional:[{sourceId:Nt[kt].deviceId}]},video:!1},(function(Ft){yt.log("new stream processing function for : "+this.device.deviceId),this.device.audioListener=this;var Ut=this,Jt=bt.createScriptProcessor(2048,1,1),hn=bt.createMediaStreamSource(Ft);Jt.connect(bt.destination),Jt.onaudioprocess=function(){var Xt,zt,cn,vn=new Uint8Array(this.analyser.frequencyBinCount),Sn=0;for(this.analyser.getByteFrequencyData(vn),zt=0;zt<vn.length;zt++)Sn+=vn[zt];Xt=Sn/vn.length,cn={deviceId:Ut.device.deviceId,label:Ut.device.label,amplitude:Xt,active:Ft.active},Ut.device.callback(cn)},Jt.analyser=bt.createAnalyser(),Jt.analyser.smoothingTimeConstant=.3,Jt.analyser.fftSize=1024,hn.connect(Jt.analyser),Jt.analyser.connect(Jt),this.destroy=function(){yt.log("destroy()");var Xt,zt=Ft.getTracks();for(Xt=0;Xt<zt.length;Xt+=1)zt[Xt].stop();hn.disconnect(),Jt.analyser.disconnect(),Jt.disconnect()}}).bind({device:apiCC.listenedAudioSources[Nt[kt].deviceId]}),function(Ft){yt.error("Error getting microphone",Ft)}))},function(Nt){yt.debug("listenToAudioSources() - getMediaDevices error :",Nt)})):yt.debug("listenToAudioSources() - Unable to create audio context")},apiCC.stopAudioSourceListening=function(){var Rt;for(yt.debug("stopAudioSourceListening()"),Rt=0;Rt<Object.keys(apiCC.listenedAudioSources).length;Rt++)apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Rt]]!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Rt]].audioListener!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[Rt]].audioListener.destroy():yt.warn("error on stopAudioSourceListening, audioListener"):yt.warn("error on stopAudioSourceListening, listenedAudioSources element");apiCC.listenedAudioSources={}},apiCC.webRTCPluginInstalled=!1,apiCC.iePluginInstallationPreventUnload=!1,apiCC.setlogStorageActivated=function(Rt,kt){yt.debug("setlogStorageActivated :",Rt),this.logStorageActivated=(Rt===!0||Rt===!1)&&Rt,kt!==void 0&&(this.logStorageLevel=kt)},apiCC.sendLogToCloud=function(Rt,kt,bt,Nt){yt.info("sendLogToCloud");var Ft,Ut,Jt=[],hn=null,Xt=[],zt=null,cn=null;for(Jt.push(JSON.stringify({title:"ApiRTC logs",description:"Logs of apiRTC client"})),Jt.push(JSON.stringify({ts:Date.now(),name:"system-info",args:{browserName:apiCC.browser,browserVersion:apiCC.browser_version,platform:apiCC.osName}})),Ft=0;Ft<Rt.length;Ft++)hn=Rt[Ft][0]==="error"?{name:"test-run",args:{error:Rt[Ft][1]}}:{name:"test-run",args:{info:Rt[Ft][1]}},Jt.push(JSON.stringify(hn));Xt=Jt.concat(apiCC.logStorage),zt=new FormData,Ut="["+Xt.join(`,
`)+"]",yt.debug("fileContent :",Ut),Nt!==!0&&(zt.append("data",Ut),zt.append("apiKey",apiCC.initApiKey),kt!==void 0&&zt.append("id",kt),(cn=new XMLHttpRequest).open("POST",bt+"/test/api/",!0),cn.onreadystatechange=function(){cn.readyState===4&&cn.status===200&&console.info("[apiRTC_Logs] POST'd successfully"),console.trace(cn.responseText)},cn.send(zt))},apiCC.manageWebRTCPlugin=function(Rt,kt){yt.debug("manageWebRTCPlugin");var bt;bt=window.location.protocol!=="https:"?"http":"https",_e([bt+"://cdn.temasys.io/adapterjs/0.15.x/adapter.debug.js"],"temAdapter",{async:!0,numRetries:apiCC.extJsLoadingRetryNb||100,reqdelay:apiCC.extJsLoadingRetryDelay||200,success:function(){yt.log("End of .js loading for plugin"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","loaded"),AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,function(){apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,AdapterJS.webRTCReady(function(Nt){return yt.log("webRTCReady, plugin already installed"),Rt()})},function(){return apiCC.iePluginInstallationPreventUnload=!0,kt(),AdapterJS.webRTCReady(function(Nt){return yt.log("webRTCReady after plugin install"),apiCC.iePluginInstallationPreventUnload=!1,apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,Rt()}),apiCC.session.apiCCWebRTCClient.myWebRTC_Event.createEvent({eventType:"webRTCPluginInstallation"}),null})},error:function(Nt){yt.error("temAdapter loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","error")},retrycb:function(Nt,Ft){yt.warn("temAdapter loading retry :"+Nt+" ,delay before retry :"+Ft),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","retry")}})},apiCC.checkMutingStateForUserMedia=function(Rt,kt){yt.debug("checkMutingStateForUserMedia"),(0,st.ki)(Rt,"muted","string")&&(yt.log("callConfiguration muted is set :",Rt.muted),Rt.muted==="VIDEO"&&(kt.muteVideoOnStreams("enabled"),kt.muteAudioOnStreams("enabled")),Rt.muted==="AUDIOONLY"&&kt.muteAudioOnStreams("enabled"),Rt.muted==="VIDEOONLY"&&kt.muteVideoOnStreams("enabled"))},apiCC.isSIPNumber=function(Rt){var kt,bt=null,Nt=!1;return kt=Rt.toString().startsWith("sip:"),Rt.toString().length<=20&&(bt=!0),(Rt.toString().indexOf("0")!==0&&Rt.toString().indexOf("+")!==0||bt!==!0)&&kt!==!0||(Nt=!0),Nt},apiCC.loadSentry=function(Rt,kt){yt.debug("Remote logging activation"),_e([kt+"://browser.sentry-cdn.com/5.24.2/bundle.tracing.min.js"],"Sentry",{async:!0,numRetries:10,reqdelay:500,success:function(){Sentry.init({dsn:"https://c24c226714f841dbbc3d1518b6cc7fe8@o333237.ingest.sentry.io/5448622",release:apiCC.version,tracesSampleRate:1}),Sentry.configureScope(function(bt){bt.setTag("apiKey",Rt)})},error:function(bt){console.error("Remote logging - loading error")},retrycb:function(bt,Nt){console.warn("Remote logging - loading retry :"+bt+" ,delay before retry :"+Nt)}})},apiCC.sendSentryEvent=function(Rt){if(yt.debug("sendSentryEvent",Rt),typeof Sentry<"u"){var kt="",bt={};Rt.eventType==="muteUnmuteEvent"?(kt="Mute event on callId:"+Rt.callId,bt.muteType=Rt.muteType,bt.source=Rt.source,bt.mLine=Rt.mLine,bt.state=Rt.state,bt.callId=Rt.callId,bt.username=Rt.username):yt.error("sendSentryEvent error : type ",Rt.eventType," is not supported");var Nt=Object.keys(bt);kt!==""&&Nt.length>0&&Sentry.withScope(function(Ft){Nt.forEach(function(Ut){Ft.setTag(Ut,bt[Ut])}),Sentry.captureMessage(kt)})}else yt.debug("Sentry not activated")},apiCC.addPendingPromise=function(Rt,kt,bt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;yt.debug("addPendingPromise"),apiCC.pendingPromisesId++;var Ft=function(Jt){apiCC.cleanPendingPromiseTable(Jt),bt("Timeout problem during ".concat(Rt," process on a remote stream"))},Ut=setTimeout(function(){Ft(apiCC.pendingPromisesId)},Nt);return apiCC.pendingPromises.push({timeout:Ut,resolve:kt,reject:bt,pendingPromisesId:apiCC.pendingPromisesId}),Ut},apiCC.resolvePendingPromise=function(Rt,kt){yt.debug("resolvePendingPromise"),apiCC.pendingPromises.forEach(function(bt){Rt===bt.timeout&&(clearTimeout(Rt),bt.resolve(kt),apiCC.cleanPendingPromiseTable(bt.pendingPromisesId))})},apiCC.rejectPendingPromise=function(Rt,kt){yt.debug("rejectPendingPromise"),apiCC.pendingPromises.forEach(function(bt){Rt===bt.timeout&&(clearTimeout(Rt),bt.reject(kt),apiCC.cleanPendingPromiseTable(bt.pendingPromisesId))})},apiCC.cleanPendingPromiseTable=function(Rt){apiCC.pendingPromises.forEach(function(kt,bt){Rt===kt.pendingPromisesId&&apiCC.pendingPromises.splice(bt,1)})}},5945:(nt,it,s)=>{s.d(it,{$6:()=>mt,AA:()=>wt,Ak:()=>ft,BF:()=>st,Cm:()=>ut,E2:()=>rt,MM:()=>ht,Ne:()=>At,PR:()=>dt,TI:()=>Pt,Xh:()=>ot,ag:()=>pt,cf:()=>yt,dc:()=>gt,vO:()=>at}),s(8309),s(2772),s(9064);var et,rt=null,ot=null,gt=null,dt=null,pt=null,st=null,ht=null,at=null,ut=null,ft=null,mt=null,yt=null,At=null,wt=null,Pt=null;et=(rt=new UAParser).getBrowser(),pt=rt.getOS(),yt=rt.getBrowser(),typeof apiRTC_React<"u"?(gt=DeviceInfo.getSystemVersion(),st=DeviceInfo.getSystemName(),ot=DeviceInfo.getUserAgent(),at=DeviceInfo.getModel()):(gt=et.version||"Unknown",st=rt.getOS().name||"Unknown",ht=rt.getOS().version||"Unknown",ot=et.name||"Unknown",At=rt.getCPU().architecture||"Unknown",at=rt.getDevice().type||"Unknown",ut=rt.getDevice().vendor||"Unknown",ft=rt.getDevice().model||"Unknown",wt=rt.getEngine().name||"Unknown",Pt=rt.getEngine().version||"Unknown"),dt=gt!==void 0?et.major:99,window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase().indexOf(" electron/")>=0&&(mt="electron")},4708:(nt,it,s)=>{function et(Pt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rt){return typeof Rt}:function(Rt){return Rt&&typeof Symbol=="function"&&Rt.constructor===Symbol&&Rt!==Symbol.prototype?"symbol":typeof Rt},et(Pt)}s.d(it,{Pj:()=>gt,S6:()=>ht,Wc:()=>st,Ym:()=>yt,_C:()=>ot,cw:()=>mt,dD:()=>pt,fS:()=>wt,ki:()=>At,wL:()=>ut,ws:()=>at,yJ:()=>dt}),s(4603),s(4916),s(9714),s(3123),s(9600),s(1249),s(7941),s(4723),s(1058),s(6992),s(9575),s(1539),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(9753),s(7042),s(2526),s(1817),s(2165),s(8783),s(3948);var rt=s(1549).Y.get("Utils");function ot(Pt){return new RegExp("^[0-9-.]*$","g").test(Pt)}function gt(){return typeof apiRTC_React<"u"||window.location.protocol==="https:"}function dt(){return typeof apiRTC_React>"u"&&window.location.protocol==="http:"}function pt(Pt){var Rt,kt,bt,Nt,Ft={};for(bt=0,Nt=(Rt=Pt.split("&")).length;bt<Nt;bt++)Ft[(kt=Rt[bt].split("="))[0]]=kt[1];return Ft}function st(Pt){return Object.keys(Pt).map(function(Rt){return Rt+"="+Pt[Rt]}).join("&")}function ht(Pt,Rt){rt.debug("mergeJSON");var kt={},bt=null;if(Pt)for(bt in Pt)Pt.hasOwnProperty(bt)&&(kt[bt]=Pt[bt]);if(Rt)for(bt in Rt)Rt.hasOwnProperty(bt)&&(kt[bt]=Rt[bt]);return rt.log(kt),kt}var at=function(Pt,Rt){var kt,bt,Nt;for(Pt==null&&(Pt={}),kt=1;kt<arguments.length;kt+=1)for(bt in Nt=arguments[kt])Nt.hasOwnProperty(bt)&&(Pt[bt]=Nt[bt]);return Pt},ut=function(){var Pt=function(kt,bt,Nt){var Ft=kt.match(bt);return Ft&&Ft.length>=Nt&&parseInt(Ft[Nt],10)},Rt={};if(typeof apiRTC_React<"u")return Rt.type="react-native",Rt;if(window!==void 0&&window.navigator!==void 0)if(window.navigator.mozGetUserMedia)Rt.type="firefox",Rt.version=Pt(window.navigator.userAgent,/Firefox\/(\d+)\./,1);else if(window.navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)Rt.type="chrome",Rt.version=Pt(window.navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!window.navigator.userAgent.match(/Version\/(\d+).(\d+)/))return Rt;Rt.type="safari",Rt.version=Pt(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(window.navigator.mediaDevices&&window.navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))Rt.type="edge",Rt.version=Pt(window.navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.navigator.mediaDevices||!window.navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return Rt;Rt.type="safari",Rt.version=Pt(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return Rt}(),ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/=",mt={decode:function(Pt){var Rt,kt=ft.indexOf(Pt.charAt(Pt.length-1)),bt=ft.indexOf(Pt.charAt(Pt.length-2)),Nt=Pt.length/4*3,Ft=null,Ut=null,Jt=null,hn=null,Xt=null,zt=null,cn=0,vn=null;for(kt===64&&Nt--,bt===64&&Nt--,vn=new Uint8Array(Nt),Rt=0;Rt<Nt;Rt+=3)Ft=ft.indexOf(Pt.charAt(cn++))<<2|(hn=ft.indexOf(Pt.charAt(cn++)))>>4,Ut=(15&hn)<<4|(Xt=ft.indexOf(Pt.charAt(cn++)))>>2,Jt=(3&Xt)<<6|(zt=ft.indexOf(Pt.charAt(cn++))),vn[Rt]=Ft,Xt!==64&&(vn[Rt+1]=Ut),zt!==64&&(vn[Rt+2]=Jt);return vn},encode:function(Pt){var Rt,kt="",bt=new Uint8Array(Pt),Nt=bt.byteLength,Ft=Nt%3,Ut=Nt-Ft,Jt=null;for(Rt=0;Rt<Ut;Rt+=3)Jt=bt[Rt]<<16|bt[Rt+1]<<8|bt[Rt+2],kt+=ft[(16515072&Jt)>>18]+ft[(258048&Jt)>>12]+ft[(4032&Jt)>>6]+ft[63&Jt];return Ft===1?(Jt=bt[Ut],kt+=ft[(252&Jt)>>2]+ft[(3&Jt)<<4]+"=="):Ft===2&&(Jt=bt[Ut]<<8|bt[Ut+1],kt+=ft[(64512&Jt)>>10]+ft[(1008&Jt)>>4]+ft[(15&Jt)<<2]+"="),kt}};function yt(Pt,Rt){return arguments.length===3?At(arguments[0],arguments[1],arguments[2]):Rt==="null"?Pt===null:Rt==="array"?Pt!==null&&et(Pt)==="object"&&Array.isArray(Pt):Pt!==null&&et(Pt)===Rt}function At(Pt,Rt,kt){if(Rt!==null&&et(Rt)==="object"&&Array.isArray(Rt)&&Rt.length>=1){var bt=Rt[0];if(Rt.length>1)return yt(Pt,"object")&&yt(bt,"string")&&Pt.hasOwnProperty(bt)&&yt(Pt[bt],"object")&&At(Pt[bt],Rt.slice(1),kt);Rt=bt}return kt==="undefined"?yt(Pt,"object")&&yt(Rt,"string")&&!Pt.hasOwnProperty(Rt)&&yt(Pt[Rt],kt):yt(Pt,"object")&&yt(Rt,"string")&&Pt.hasOwnProperty(Rt)&&yt(Pt[Rt],kt)}function wt(Pt,Rt){if(Pt===Rt)return!0;if(!(Pt instanceof Object&&Rt instanceof Object)||Pt.constructor!==Rt.constructor)return!1;for(var kt in Pt)if(Pt.hasOwnProperty(kt)){if(!Rt.hasOwnProperty(kt))return!1;if(Pt[kt]===Rt[kt])continue;if(et(Pt[kt])!=="object"||!wt(Pt[kt],Rt[kt]))return!1}for(kt in Rt)if(Rt.hasOwnProperty(kt)&&!Pt.hasOwnProperty(kt))return!1;return!0}},6075:(nt,it,s)=>{s.d(it,{F:()=>rt});var et=s(1549).Y.get("WebRTC_Stack"),rt=function(){this.adaptForIoSCordova=function(){if(apiRTC.osName==="iOS"&&typeof cordova<"u"){if(et.log("Modification for iOS cordova"),cordova.plugins===void 0)return void et.log("cordova.plugins not defined");if(cordova.plugins.iosrtc===void 0)return void et.log("cordova.plugins.iosrtc not defined");this.RTCPeerConnection=cordova.plugins.iosrtc.RTCPeerConnection,this.RTCSessionDescription=cordova.plugins.iosrtc.RTCSessionDescription,this.RTCIceCandidate=cordova.plugins.iosrtc.RTCIceCandidate}},typeof RTCSessionDescription<"u"?this.RTCSessionDescription=RTCSessionDescription:et.log("RTCSessionDescription is undefined"),typeof RTCIceCandidate<"u"?this.RTCIceCandidate=RTCIceCandidate:et.log("RTCIceCandidate is undefined"),typeof RTCPeerConnection<"u"?this.RTCPeerConnection=RTCPeerConnection:et.log("RTCPeerConnection is undefined"),navigator.getUserMedia!==void 0?this.getUserMedia=navigator.getUserMedia:typeof getUserMedia<"u"?this.getUserMedia=getUserMedia:et.log("getUserMedia is undefined")}},8765:(nt,it,s)=>{s.d(it,{K:()=>pt}),s(6755),s(2772),s(3710),s(8309),s(9601),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(1549),rt=s(5945),ot=s(4708);function gt(st){return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ht){return typeof ht}:function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},gt(st)}var dt=et.Y.get("WebRTC_Event"),pt=function(){if(dt.debug("WebRTC_Event"),this.customEventIsDefined="notTested",this.customEventIsDefined==="notTested")try{new CustomEvent("test",{detail:"test",bubbles:!0,cancelable:!0}),this.customEventIsDefined=!0}catch(st){this.customEventIsDefined=!1,dt.log("customEvent error :"+st)}(rt.Xh==="IE"&&rt.dc>8||rt.Xh==="Netscape")&&(dt.log("polyfill the CustomEvent()"),function(){function st(ht,at){at=at||{bubbles:!1,cancelable:!1,detail:void 0};var ut=document.createEvent("CustomEvent");return ut.initCustomEvent(ht,at.bubbles,at.cancelable,at.detail),ut}st.prototype=window.CustomEvent.prototype,window.CustomEvent=st}(),this.customEventIsDefined=!0),rt.Xh==="IE"&&rt.dc>8&&(dt.log("polyfill startsWith()"),String.prototype.startsWith||(String.prototype.startsWith=function(st,ht){return ht=ht||0,this.indexOf(st,ht)===ht})),this.eventDispatchMgr=function(st,ht){if(typeof apiRTC_React<"u"){var at={type:st,detail:ht};eventManager.dispatchEvent(at)}else if(this.customEventIsDefined===!1)typeof $jqApz<"u"?(dt.log("CustomEvent not supported by Browser, using $jqApz "),$jqApz.event.trigger({type:st,detail:ht})):typeof jQuery<"u"?(dt.log("CustomEvent not supported by Browser, using jQuery "),jQuery.event.trigger({type:st,detail:ht})):dt.warn("Custom Events not supported on this browser : eventDispatchMgr()");else{var ut=new CustomEvent(st,{detail:ht,bubbles:!0,cancelable:!0});document.dispatchEvent(ut)}},this.createIncomingCallEvent=function(st,ht,at,ut,ft,mt,yt,At,wt,Pt,Rt){var kt={eventType:"incomingCall",time:new Date,clientId:st,callerId:ht,callId:ut,autoAnswerActivated:ft,callNumber:mt,callerNickname:at,audioOnly:yt,callType:At,destCallType:Rt,recordedCall:wt,remoteType:Pt};this.eventDispatchMgr("incomingCall",kt)},this.createCallAttemptEvent=function(st,ht,at,ut){var ft={eventType:"callAttempt",time:new Date,clientId:st,callerId:ht,callId:ut,callerNickname:at};this.eventDispatchMgr("callAttempt",ft)},this.createCallEstablishedEvent=function(st,ht,at,ut){dt.debug("createCallEstablishedEvent with callType : "+ht),dt.debug("destCallType : "+ut);var ft={eventType:"callEstablished",time:new Date,calleeId:st,callType:ht,callId:at,destCallType:ut};this.eventDispatchMgr("callEstablished",ft)},this.createHangupEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"hangup",time:new Date,hangupType:st,clientId:ht,remoteId:at,lastEstablishedCall:ut,reason:ft,callId:mt,callType:yt};this.eventDispatchMgr("hangup",At)},this.createRemoteHangupEvent=function(st,ht,at,ut){var ft={eventType:"remoteHangup",time:new Date,clientId:st,remoteId:ht,lastEstablishedCall:at,reason:ut};this.eventDispatchMgr("remoteHangup",ft)},this.createCallRestartingEvent=function(st,ht,at,ut,ft,mt,yt,At,wt){var Pt={eventType:"callRestarting",time:new Date,callType:st,audioOnly:ht,oldCallId:at,newCallId:ut,dataType:ft,clientId:mt,remoteId:yt,destRoom:At,streamId:wt};this.eventDispatchMgr("callRestarting",Pt)},this.createUserMediaSuccessEvent=function(st,ht,at,ut,ft,mt,yt,At,wt,Pt,Rt){var kt={eventType:"userMediaSuccess",time:new Date,onCallEstablishment:st,audioIsAvailable:ht,audioDeviceLabel:at,videoIsAvailable:ut,videoDeviceLabel:ft,callType:mt,callId:yt,stream:At,remoteId:wt,restarted:Pt,userMediaStreamId:Rt};this.eventDispatchMgr("userMediaSuccess",kt)},this.createUserMediaErrorEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"userMediaError",time:new Date,onCallEstablishment:st,callType:ht,userMediaStreamId:ut,callId:ft,tryAudioCallActivated:mt,gumConfig:yt};gt(at)==="object"?(At.error={},At.error.message=at.message,At.error.code=at.code,At.error.name=at.name):At.error=at,this.eventDispatchMgr("userMediaError",At)},this.createUserMediaStopEvent=function(st,ht,at){var ut={eventType:"userMediaStop",time:new Date,callId:st,mediaType:ht,userMediaStreamId:at};this.eventDispatchMgr("userMediaStop",ut)},this.createICECandidateTypeUpdateEvent=function(st,ht,at){var ut={eventType:"ICECandidateTypeUpdate",time:new Date,callId:st,localCandidate:ht,remoteCandidate:at};this.eventDispatchMgr("ICECandidateTypeUpdate",ut)},this.createSelectedICECandidateEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"selectedICECandidate",time:new Date,callId:st,localCandidateType:ht,remoteCandidateType:at,localAddress:ut,remoteAdress:ft,transportType:mt,localTransportType:yt};this.eventDispatchMgr("selectedICECandidate",At)},this.createErrorEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"error",time:new Date,errorInfo:st,errorCode:ht,callId:at,roomName:ut,roomCallType:ft};(0,ot.Ym)(mt,"object")&&(At.data=mt),(0,ot.Ym)(yt,"string")&&(At.convId=yt),this.eventDispatchMgr("error",At)},this.createReceiveIMMessageEvent=function(st,ht,at,ut,ft,mt){var yt={eventType:"receiveIMMessage",time:new Date,senderId:st,senderNickname:ht,senderPhotoURL:at,message:ut,UUCSeq:ft,convId:mt};this.eventDispatchMgr("receiveIMMessage",yt)},this.createChannelEvent=function(st,ht){var at={eventType:"channelEvent",time:new Date,channelEvent:st,event:ht};this.eventDispatchMgr("channelEvent",at)},this.createSessionReadyEvent=function(st){dt.debug("createSessionReadyEvent");var ht={eventType:"sessionReady",time:new Date,apiCCId:st};this.eventDispatchMgr("sessionReady",ht)},this.createWebRTCClientCreatedEvent=function(){var st={eventType:"webRTCClientCreated",time:new Date};this.eventDispatchMgr("webRTCClientCreated",st)},this.createUpdatePresenceEvent=function(st,ht,at){var ut={eventType:"updatePresence",time:new Date,connectedUsersList:st,connectedUsersListWithStatus:at,state:ht};this.eventDispatchMgr("updatePresence",ut)},this.createCloudEventOccurredEvent=function(st,ht){var at={eventType:"cloudEventOccurred",time:new Date,topic:st,target:ht};this.eventDispatchMgr("cloudEventOccurred",at)},this.createUpdateUserStatusEvent=function(st){var ht={eventType:"updateUserStatus",time:new Date,message:st};this.eventDispatchMgr("updateUserStatus",ht)},this.createGroupChatCreationEvent=function(st,ht,at,ut,ft,mt){var yt={eventType:"groupChatCreation",time:new Date,status:st,groupChatId:ht,initialDestId:at,invitationSendedToInitialDestId:ut,newContactId:ft,invitationSendedToNewContactId:mt};this.eventDispatchMgr("groupChatCreation",yt)},this.createGroupChatInvitationEvent=function(st,ht,at,ut,ft){var mt={eventType:"groupChatInvitation",time:new Date,groupChatId:st,contactList:ft,senderId:ht,senderNickname:at,senderPhotoURL:ut};this.eventDispatchMgr("groupChatInvitation",mt)},this.createGroupChatMemberUpdateEvent=function(st,ht,at){var ut={eventType:"groupChatMemberUpdate",time:new Date,groupChatId:st,contactList:ht,status:at};this.eventDispatchMgr("groupChatMemberUpdate",ut)},this.createAddUserInGroupChatEvent=function(st,ht,at){var ut={eventType:"addUserInGroupChatAnswer",time:new Date,invitationSended:st,groupChatId:ht,contactId:at};this.eventDispatchMgr("addUserInGroupChatAnswer",ut)},this.createReceiveGroupChatMessageEvent=function(st,ht,at,ut,ft){var mt={eventType:"receiveGroupChatMessage",time:new Date,groupChatId:st,senderId:ht,senderNickname:at,message:ut};(0,ot.Ym)(ft,"object")&&(mt.metadata=ft),this.eventDispatchMgr("receiveGroupChatMessage",mt)},this.createReceiveConversationListAnswerEvent=function(st){var ht={eventType:"receiveConversationList",time:new Date,convList:st};this.eventDispatchMgr("receiveConversationList",ht)},this.createReceiveContactOccurrencesFromConversationListAnswerEvent=function(st){var ht={eventType:"receiveContactOccurrencesFromConversationList",time:new Date,occurrencesList:st};this.eventDispatchMgr("receiveContactOccurrencesFromConversationList",ht)},this.createReceiveConversationDetailReportAnswerEvent=function(st){var ht={eventType:"receiveConversationDetailReport",time:new Date,CDR:st};this.eventDispatchMgr("receiveConversationDetailReport",ht)},this.createReceiveConversationHistoryEvent=function(st,ht,at){var ut={eventType:"receiveConversationHistory",time:new Date,convId:st,convHistory:ht,status:at};this.eventDispatchMgr("receiveConversationHistory",ut)},this.createUserDataAnswerEvent=function(st,ht,at,ut){var ft={eventType:"userDataAnswer",time:new Date,userFound:st,contactId:ht,nickname:at,photoURL:ut};this.eventDispatchMgr("userDataAnswer",ft)},this.createFetchUserDataAnswerEvent=function(st){var ht="fetchUserDataAnswer",at={eventType:ht,timeout:st.timeout,userData:st.userData,id:st.id};this.eventDispatchMgr(ht,at)},this.createReceiveDataEvent=function(st,ht,at){var ut={eventType:"receiveData",time:new Date,senderId:st,dstRoomId:ht,data:at};this.eventDispatchMgr("receiveData",ut)},this.createMCUSessionCreationEvent=function(st,ht){var at={eventType:"MCUSessionCreation",time:new Date,sessionId:st,token:ht};this.eventDispatchMgr("MCUSessionCreation",at)},this.createJoinMCUSessionAnswerEvent=function(st,ht,at,ut,ft){var mt={eventType:"joinMCUSessionAnswer",time:new Date,sessionId:st,token:ht,groupChatId:at,initiator:ut,roomId:ft.roomName};ft.roomMode&&(mt.mode=ft.roomMode),ft.meshOnly===!0&&(mt.meshOnly=!0),ft.joinSessionAnswer&&(mt.result=Object.assign({},ft.joinSessionAnswer)),this.eventDispatchMgr("joinMCUSessionAnswer",mt)},this.createMCUAvailableStreamEvent=function(st,ht){var at={eventType:"MCUAvailableStream",time:new Date,streams:st,isRemoteStream:ht};this.eventDispatchMgr("MCUAvailableStream",at)},this.createMCUAvailableReplayEvent=function(st,ht){var at={eventType:"MCUAvailableReplay",time:new Date,streams:st,isRemoteStream:ht};this.eventDispatchMgr("MCUAvailableReplay",at)},this.createMCUAvailableCompositeEvent=function(st,ht){var at={eventType:"MCUAvailableComposite",time:new Date,streams:st,isRemoteStream:ht};this.eventDispatchMgr("MCUAvailableComposite",at)},this.createMCURemovedStreamEvent=function(st){var ht={eventType:"MCURemoveStream",time:new Date,streamId:st};this.eventDispatchMgr("MCURemoveStream",ht)},this.createMCUAvailableStreamUpdateEvent=function(st,ht){var at={eventType:"MCUAvailableStreamUpdate",time:new Date,streams:st,isRemoteStream:ht};this.eventDispatchMgr("MCUAvailableStreamUpdate",at)},this.createMCUParticipantEjectedEvent=function(st,ht,at){var ut={eventType:"MCUParticipantEjected",time:new Date,roomId:st,clientId:ht};at&&(ut.data=at),this.eventDispatchMgr("MCUParticipantEjected",ut)},this.createReceiveMCUSessionInvitationEvent=function(st,ht,at,ut){at===void 0&&(at=0);var ft={eventType:"receiveMCUSessionInvitation",time:new Date,sessionId:st,token:ht,groupChatId:at,initiatorId:ut};this.eventDispatchMgr("receiveMCUSessionInvitation",ft)},this.createRemoteStreamAddedEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"remoteStreamAdded",time:new Date,callId:ht,callType:st,stream:at,remoteId:ut,destCallType:ft,audioIsAvailable:mt.available,audioIsActive:mt.active,audioIsMuted:mt.muted,videoIsAvailable:yt.available,videoIsActive:yt.active,videoIsMuted:yt.muted};this.eventDispatchMgr("remoteStreamAdded",At)},this.createRemoteStreamRemovedEvent=function(st,ht,at,ut,ft){var mt={eventType:"remoteStreamRemoved",time:new Date,callId:ht,callType:st,stream:at,remoteId:ut,destCallType:ft};this.eventDispatchMgr("remoteStreamRemoved",mt)},this.createSimulcastFeedChanged=function(st,ht){var at={eventType:"simulcastFeedChanged",time:new Date,callId:st,simulcast:ht};this.eventDispatchMgr("simulcastFeedChanged",at)},this.createLocalStreamRemovedEvent=function(st,ht,at,ut,ft){var mt={eventType:"localStreamRemoved",time:new Date,callId:ht,callType:st,stream:at,remoteId:ut,destCallType:ft};this.eventDispatchMgr("localStreamRemoved",mt)},this.createSlowLinkEvent=function(st,ht){var at={eventType:"slowLink",time:new Date,callId:st};ht&&(at.advice=ht),this.eventDispatchMgr("slowLink",at)},this.createVideoQualityChangedEvent=function(st,ht,at,ut){var ft={eventType:"videoQualityChanged",time:new Date,roomname:ht,callId:st,hint:at,profileType:ut.name};ut.bitrate&&(ft.bitrate=ut.bitrate),ut.width&&ut.height&&(ft.width=ut.width,ft.height=ut.height),ut.frameRate&&(ft.frameRate=ut.frameRate),this.eventDispatchMgr("videoQualityChanged",ft)},this.createAudioAmplitudeEvent=function(st,ht,at,ut){var ft={eventType:"audioAmplitude",time:new Date,callId:at,userMediaStreamId:ut,descriptor:{amplitude:st,isSpeaking:ht}};this.eventDispatchMgr("audioAmplitude",ft)},this.createLocalStreamUpdatedEvent=function(st,ht,at,ut,ft,mt,yt,At,wt){var Pt={eventType:"localStreamUpdated",time:new Date,changeList:st,audioIsAvailable:ht.available,audioDeviceLabel:ht.deviceLabel,audioIsActive:ht.active,audioIsMuted:ht.muted,audioIsSilent:ht.silent,videoIsAvailable:at.available,videoDeviceLabel:at.deviceLabel,videoIsActive:at.active,videoIsMuted:at.muted,videoIsSilent:at.silent,onCall:ut,callType:ft,callId:mt,stream:yt,userMediaStreamId:At,cause:wt};this.eventDispatchMgr("localStreamUpdated",Pt)},this.createRemoteStreamUpdatedEvent=function(st,ht,at,ut,ft,mt){var yt={eventType:"remoteStreamUpdated",time:new Date,changeList:st,audioIsAvailable:ht.available,audioIsActive:ht.active,audioIsMuted:ht.muted,audioIsSilent:ht.silent,videoIsAvailable:at.available,videoIsActive:at.active,videoIsMuted:at.muted,videoIsSilent:at.silent,callType:ut,callId:ft,cause:mt};this.eventDispatchMgr("remoteStreamUpdated",yt)},this.createCanPlayRemoteVideoEvent=function(st,ht,at){var ut={eventType:"canPlayRemoteVideo",time:new Date,videoDivId:st,callType:ht,remoteId:at};this.eventDispatchMgr("canPlayRemoteVideo",ut)},this.createRecordedFileAvailableEvent=function(st){var ht={eventType:"recordedFileAvailable",time:new Date,fileName:st};this.eventDispatchMgr("recordedFileAvailable",ht)},this.createRecordedStreamsAvailableEvent=function(st,ht,at,ut,ft,mt,yt){var At={eventType:"recordedStreamsAvailable",time:new Date,confId:st,userId1:ht,userId2:at,callId:ut,apiKey:apiCC.session.apiKey};ft&&(At.convId=ft),mt&&(At.mediaId=mt),yt&&(At.mediaURL=yt),this.eventDispatchMgr("recordedStreamsAvailable",At)},this.createMCURecordedStreamsAvailableEvent=function(st,ht,at,ut,ft,mt,yt,At,wt,Pt,Rt){var kt={eventType:"MCURecordedStreamsAvailable",time:new Date,roomName:st,callId:ht,clientId:at,convId:ft,mediaId:mt,mediaURL:yt,recordType:At};wt&&(kt.remoteId=wt),ut&&(kt.recordedFileName=ut),Pt&&(kt.mediaType=Pt),(0,ot.Ym)(Rt,"object")?(kt.descriptor={},(0,ot.Ym)(Rt,"mode","string")&&(kt.descriptor.mode=Rt.mode),(0,ot.Ym)(Rt,"labelEnabled","boolean")&&(kt.descriptor.labelEnabled=Rt.labelEnabled),kt.descriptor.labelEnabled===!0&&(0,ot.Ym)(Rt,"labels","array")&&(kt.descriptor.labels=Rt.labels)):kt.descriptor={mode:"complete",labelEnabled:!1},this.eventDispatchMgr("MCURecordedStreamsAvailable",kt)},this.createMCURecordingStartedEvent=function(st,ht,at,ut,ft,mt,yt,At,wt,Pt,Rt,kt){var bt={eventType:"MCURecordingStarted",time:new Date,roomName:st,callId:ht,clientId:at,recordType:ut,recordStartTime:ft};mt&&(bt.convId=mt),yt&&(bt.mediaId=yt),At&&(bt.mediaURL=At),wt&&(bt.remoteId=wt),Pt&&(bt.recordedFileName=Pt),Rt&&(bt.mediaType=Rt),(0,ot.Ym)(kt,"object")&&(bt.descriptor={},(0,ot.Ym)(kt,"mode","string")&&(bt.descriptor.mode=kt.mode),(0,ot.Ym)(kt,"labelEnabled","boolean")&&(bt.descriptor.labelEnabled=kt.labelEnabled),bt.descriptor.labelEnabled===!0&&(0,ot.Ym)(kt,"labels","array")&&(bt.descriptor.labels=kt.labels)),this.eventDispatchMgr("MCURecordingStarted",bt)},this.createMCURecordingStoppedEvent=function(st,ht,at,ut,ft,mt,yt,At,wt,Pt,Rt,kt){var bt={eventType:"MCURecordingStopped",time:new Date,roomName:st,callId:ht,clientId:at,recordType:ut,recordStartTime:ft};mt&&(bt.convId=mt),yt&&(bt.mediaId=yt),At&&(bt.mediaURL=At),wt&&(bt.remoteId=wt),Pt&&(bt.recordedFileName=Pt),Rt&&(bt.mediaType=Rt),(0,ot.Ym)(kt,"object")&&(bt.descriptor={},(0,ot.Ym)(kt,"mode","string")&&(bt.descriptor.mode=kt.mode),(0,ot.Ym)(kt,"labelEnabled","boolean")&&(bt.descriptor.labelEnabled=kt.labelEnabled),bt.descriptor.labelEnabled===!0&&(0,ot.Ym)(kt,"labels","array")&&(bt.descriptor.labels=kt.labels)),this.eventDispatchMgr("MCURecordingStopped",bt)},this.createStopRecordEvent=function(){var st={eventType:"stopRecord",time:new Date};this.eventDispatchMgr("stopRecord",st)},this.createMCUStreamingStartedEvent=function(st,ht,at,ut){var ft={eventType:"MCUStreamingStarted",time:new Date,roomName:st,callId:ht,clientId:at,streamingStartTime:ut};this.eventDispatchMgr("MCUStreamingStarted",ft)},this.createMCUStreamingStoppedEvent=function(st,ht,at,ut){var ft={eventType:"MCUStreamingStopped",time:new Date,roomName:st,callId:ht,clientId:at,streamingEndTime:ut};this.eventDispatchMgr("MCUStreamingStopped",ft)},this.createMCURoomModeChangedEvent=function(st,ht,at,ut){var ft={eventType:"MCURoomModeChanged",time:new Date,roomId:st,oldMode:ht,newMode:at,state:ut};this.eventDispatchMgr("MCURoomModeChanged",ft)},this.createSnapShotPhotoUploaded=function(st){var ht={eventType:"snapShotPhotoUploaded",time:new Date,fileName:st};this.eventDispatchMgr("snapShotPhotoUploaded",ht)},this.createRoomCreationEvent=function(st,ht,at){var ut={eventType:"roomCreation",time:new Date,status:st,roomId:ht,roomType:at};this.eventDispatchMgr("roomCreation",ut)},this.createRoomJoinedEvent=function(st,ht,at){var ut={eventType:"roomJoined",time:new Date,status:st,roomId:ht,roomType:at};this.eventDispatchMgr("roomJoined",ut)},this.createRoomInvitationEvent=function(st,ht,at,ut,ft,mt){var yt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},At="roomInvitation",wt={eventType:"roomInvitation",time:new Date,roomId:st,contactList:ft,senderId:ht,senderNickname:at,senderPhotoURL:ut,roomType:mt};yt.cloudConvId&&(wt.cloudConvId=yt.cloudConvId),yt.webconf===!0&&(wt.webconf=!0),this.eventDispatchMgr(At,wt)},this.createRoomMemberUpdateEvent=function(st,ht,at,ut){var ft={eventType:"roomMemberUpdate",time:new Date,roomId:st,contactList:ht,status:at,roomType:ut};this.eventDispatchMgr("roomMemberUpdate",ft)},this.createContactListInRoomEvent=function(st,ht,at){var ut={eventType:"contactListInRoom",time:new Date,roomId:st,contactList:ht,roomType:at};this.eventDispatchMgr("contactListInRoom",ut)},this.createReceiveRoomMessageEvent=function(st,ht,at,ut,ft){var mt={eventType:"receiveRoomMessage",time:new Date,roomId:st,senderId:ht,senderNickname:at,message:ut,roomType:ft};this.eventDispatchMgr("receiveRoomMessage",mt)},this.createDesktopCaptureEvent=function(st,ht,at){var ut={eventType:"desktopCapture",time:new Date,event:st,callId:ht,remoteId:at};this.eventDispatchMgr("desktopCapture",ut)},this.createMediaDeviceChangedEvent=function(st,ht,at){var ut="NotDefined";ht!=null&&(ut=ht);var ft={eventType:"mediaDeviceChanged",time:new Date,diff:st,updateReason:ut,firstMediaDeviceListInitialization:at};this.eventDispatchMgr("mediaDeviceChanged",ft)},this.createSwitchStreamEvent=function(st,ht){var at={eventType:"switchStream",time:new Date,callId:st,stream:ht};this.eventDispatchMgr("switchStream",at)},this.createConnectedUsersListUpdateEvent=function(st,ht,at,ut){var ft={eventType:"ConnectedUsersListUpdate",time:new Date,group:st,usersList:ht,status:at,updateReason:ut};this.eventDispatchMgr("connectedUsersListUpdate",ft)},this.createClosingWhiteBoardEvent=function(st,ht){var at={eventType:"closingWhiteBoard",time:new Date,roomId:st,reason:ht};this.eventDispatchMgr("closingWhiteBoard",at)},this.createExternalJsLoadingStatusEvent=function(st,ht){var at={eventType:"externalJsLoadingStatus",extjs:st,status:ht,time:new Date};this.eventDispatchMgr("externalJsLoadingStatus",at)},this.createBackgroundSubstractionStopVisibilityChangeEvent=function(st){var ht={userMediaStreamId:st};this.eventDispatchMgr("backgroundSubstractionStopVisibilityChange",ht)},this.createBackgroundSubstractionStopComputeTimeEvent=function(st){var ht={userMediaStreamId:st};this.eventDispatchMgr("backgroundSubstractionStopComputeTime",ht)},this.createAIESnapshotEvent=function(st,ht){var at={userMediaStreamId:st,image:ht};this.eventDispatchMgr("AIESnapshot",at)},this.createAIELogEvent=function(st,ht){var at={userMediaStreamId:st,log:ht};this.eventDispatchMgr("AIELog",at)},this.createEvent=function(st){if(!st.eventType)throw new Error("The event json must have an eventType"+st);st.time=new Date,this.eventDispatchMgr(st.eventType,st)}}},940:(nt,it,s)=>{s.d(it,{S:()=>gt}),s(2772);var et=s(1549),rt=s(5945),ot=et.Y.get("WebRTC_Stack"),gt=function(dt){this.sendInvite=function(pt,st,ht,at,ut,ft){var mt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{};ot.debug("WebRTC_Stack::sendInvite()"),ft||(ft="media");var yt={type:"invite",callId:pt,callerId:st,callerNickname:ht,calleeId:at,roomId:ut,callType:ft};mt.mode&&(yt.mode=mt.mode);var At=mt.offer;if(At){if(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11){var wt=At.type,Pt=At.sdp;ot.log("JSON.stringify(type):",JSON.stringify(wt)),ot.log("JSON.stringify(sdp):",JSON.stringify(Pt)),At={type:wt,sdp:Pt}}yt.sdpoffer=At}mt.data&&(yt.data=mt.data),mt.stream&&(yt.stream=mt.stream);var Rt=JSON.stringify(yt);ot.info("C->S:",Rt),dt.emit("invite",Rt)},this.sendInviteBroadcast=function(pt,st,ht,at,ut,ft){var mt,yt;ot.debug("WebRTC_Stack::sendInviteBroadcast()"),mt={type:"invite",callId:pt,callerId:st,callerNickname:ht,calleeId:at,roomId:ut,sdpoffer:ft},yt=JSON.stringify(mt),ot.debug("C->S: "+yt),dt.emit("invite_broadcast",yt)},this.send200OK=function(pt,st,ht,at,ut,ft,mt){ot.debug("WebRTC_Stack::send200OK()");var yt,At,wt=null;(rt.Xh==="IE"||rt.Xh==="Safari"&&rt.PR<11)&&(ot.log("JSON.stringify(offer.sdp) :"+JSON.stringify(ft.sdp)),ot.log("JSON.stringify(offer.type) :"+JSON.stringify(ft.type)),(wt={}).sdp=ft.sdp,wt.type=ft.type,ft=wt),yt={type:"200OK",callId:pt,callerId:st,calleeId:ht,calleeNickname:at,roomId:ut,sdpanswer:ft,data:mt},At=JSON.stringify(yt),ot.info("C->S: "+At),dt.emit("200OK",At)},this.sendCandidate=function(pt,st,ht,at,ut,ft,mt,yt,At,wt){ot.debug("WebRTC_Stack::sendCandidate()");var Pt=null,Rt={};ot.debug("completeCandidate :",wt),rt.Xh==="IE"?(ot.log("Browser is IE, adapting completeCandidate"),Rt.sdpMLineIndex=wt.sdpMLineIndex,Rt.candidate=wt.candidate,Rt.sdpMid=wt.sdpMid):Rt=wt,At!==null?(ot.log("call data is defined :",At),Pt={type:"candidate",callId:pt,callerId:st,calleeId:ht,roomId:at,dst:ut,label:ft,id:mt,candidate:yt,data:At,completeCandidate:Rt}):(ot.log("call data is undefined"),Pt={type:"candidate",callId:pt,callerId:st,calleeId:ht,roomId:at,dst:ut,label:ft,id:mt,candidate:yt,completeCandidate:Rt});var kt=JSON.stringify(Pt);ot.info("C->S:",kt),dt.emit("candidate",kt)},this.sendBye=function(pt,st,ht,at,ut,ft){ot.debug("WebRTC_Stack::sendBye()");var mt,yt=null;ft!==null?(ot.log("call data is defined :"+ft),yt={type:"bye",callId:pt,clientId:st,roomId:ht,dst:at,reason:ut,data:ft}):(ot.log("call data is undefined"),yt={type:"bye",callId:pt,clientId:st,roomId:ht,dst:at,reason:ut}),mt=JSON.stringify(yt),ot.info("C->S: "+mt),dt.emit("bye",mt)},this.sendUpdate=function(pt,st,ht,at,ut,ft,mt,yt){ot.debug("WebRTC_Stack::sendUpdate()");var At,wt=null;wt={type:"update",callId:pt,callerId:st,calleeId:ht,roomId:at,dst:ut,sdpoffer:ft,callType:mt},yt!=null&&(ot.log("call data is defined: "+yt),wt.data=yt),At=JSON.stringify(wt),ot.info("C->S: "+At),dt.emit("update",At)},this.send200Update=function(pt,st,ht,at,ut,ft,mt){ot.debug("WebRTC_Stack::send200Update()");var yt,At=null;mt!==null?(ot.log("call data is defined :"+mt),At={type:"200update",callId:pt,callerId:st,calleeId:ht,roomId:at,dst:ut,sdpanswer:ft,data:mt}):(ot.log("call data is undefined"),At={type:"200update",callId:pt,callerId:st,calleeId:ht,roomId:at,dst:ut,sdpanswer:ft}),yt=JSON.stringify(At),ot.info("C->S: "+yt),dt.emit("200update",yt)},this.sendDebugCommand=function(pt,st,ht){var at,ut;ot.debug("WebRTC_Stack::sendDebugCommand :"+pt),at={type:"debugCommand",command:pt,apiKey:st,clientId:ht},ut=JSON.stringify(at),ot.info("C->S: "+ut),dt.emit("debugCommand",ut)},this.sendAck=function(pt,st,ht){var at,ut;ot.debug("WebRTC_Stack::sendAck()"),at={type:"Ack",AckMessageType:pt,cSeq:st,dst:ht},ut=JSON.stringify(at),ot.info("C->S: "+ut),dt.emit("Ack",ut)},this.sendInfo=function(pt,st){var ht,at,ut=["activeSpeaker","callStats","stopSpeaking"];ut.indexOf(pt)<0&&ot.debug("WebRTC_Stack::sendInfo()"),ht={type:"info",infoType:pt,data:st},at=JSON.stringify(ht),ut.indexOf(pt)<0&&ot.info("C->S: "+at),dt.emit("info",at)},this.sendDataMessage=function(pt,st){ot.debug("WebRTC_Stack::sendDataMessage()");var ht={type:"apiRTCDataMessage",senderId:pt,data:st},at=JSON.stringify(ht);ot.info("C->S: "+at),dt.emit("apiRTCDataMessage",at)}}},4170:(nt,it,s)=>{s.r(it),s(4916),s(4723),s(3710),s(1539),s(9714),s(561),function(et){var rt,ot,gt=null,dt=null,pt=[];function st(){return Math.random().toString(36).substr(2)}rt=function(){if(typeof apiRTC_React<"u")return"react-native";var ht,at=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(ht=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=ht[1]),(ft=ft?[ft[1],ft[2]]:[at,navigator.appVersion,"-?"])[0]}(),ot=function(){if(typeof apiRTC_React<"u")return 1;var ht,at=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(ht=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=ht[1]),(ft=ft?[ft[1],ft[2]]:[at,navigator.appVersion,"-?"])[1]}(),dt=new function(){(rt==="MSIE"&&ot>8||rt==="Netscape")&&function(){function ht(at,ut){ut=ut||{bubbles:!1,cancelable:!1,detail:void 0};var ft=document.createEvent("CustomEvent");return ft.initCustomEvent(at,ut.bubbles,ut.cancelable,ut.detail),ft}ht.prototype=et.CustomEvent.prototype,et.CustomEvent=ht}(),this.eventDispatchMgr=function(ht,at){if(typeof apiRTC_React<"u"){var ut={type:ht,detail:at};eventManager.dispatchEvent(ut)}else if(rt==="MSIE"&&ot<=8)typeof $jqApz<"u"?$jqApz.event.trigger({type:ht,detail:at}):typeof jQuery<"u"&&jQuery.event.trigger({type:ht,detail:at});else{var ft=new CustomEvent(ht,{detail:at,bubbles:!0,cancelable:!0});document.dispatchEvent(ft)}},this.createGetUserFromIdAnswerEvent=function(ht){var at={eventType:"getUserFromIdAnswer",time:new Date,message:ht};this.eventDispatchMgr("getUserFromIdAnswer",at)},this.createGetAllUsersAnswerEvent=function(ht){var at={eventType:"getAllUsersAnswer",time:new Date,message:ht};this.eventDispatchMgr("getAllUsersAnswer",at)},this.createErrorEvent=function(ht){var at={eventType:"error :",time:new Date,errorInfo:ht};this.eventDispatchMgr("error",at)},this.createSearchUserAnswerEvent=function(ht,at,ut){var ft={eventType:"searchUserAnswer :",time:new Date,searchStr:ht,searchAnswerList:at,group:ut};this.eventDispatchMgr("searchUserAnswer",ft)}},(gt={version:"1.0.4",description:"ApiRTC DataBase Library"}).init=function(ht){this.socket=ht,this.socket.on("getUserFromIdAnswer",this.callback(this,"onGetUserFromIdAnswer")).on("getAllUsersAnswer",this.callback(this,"onGetAllUsersAnswer")).on("searchUserAnswer",this.callback(this,"onSearchUserAnswer"))},gt.createUser=function(ht){if(ht!==null&&ht.mail!==null&&ht.id!==null){var at=JSON.stringify(ht);this.socket.emit("createUser",at)}},gt.searchUserInGroup=function(ht,at,ut,ft){var mt=null,yt=null,At=st();(at===void 0||at!=="all"&&at!=="connected"&&at!=="disconnected")&&(at="all"),ht!==null&&(mt={searchStr:ht,presenceState:at,group:ut},ft!==void 0&&(mt.callbackId=At,pt[At]=ft),yt=JSON.stringify(mt),this.socket.emit("searchUser",yt))},gt.searchUser=function(ht,at,ut,ft){var mt=null;typeof ut=="function"?(mt=ut,gt.searchUserInGroup(ht,at,void 0,mt)):gt.searchUserInGroup(ht,at,ut,ft)},gt.onSearchUserAnswer=function(ht){var at=JSON.parse(ht);at.callbackId!==void 0&&at.callbackId in pt?(pt[at.callbackId](at.searchStr,at.searchAnswerList),pt.splice(at.callbackId,1)):dt.createSearchUserAnswerEvent(at.searchStr,at.searchAnswerList,at.group)},gt.getUserFromId=function(ht,at){var ut=null,ft=null,mt=st();ht!==null&&(ut={id:ht},at!==void 0&&(ut.callbackId=mt,pt[mt]=at),ft=JSON.stringify(ut),this.socket.emit("getUserFromId",ft))},gt.onGetUserFromIdAnswer=function(ht){ht!==null&&ht.callbackId!==void 0&&ht.callbackId in pt?(pt[ht.callbackId](ht),pt.splice(ht.callbackId,1)):dt.createGetUserFromIdAnswerEvent(ht)},gt.getAllUsers=function(){var ht,at;ht={},at=JSON.stringify(ht),this.socket.emit("getAllUsers",at)},gt.onGetAllUsersAnswer=function(ht){dt.createGetAllUsersAnswerEvent(ht)},gt.setPresenceStatus=function(ht,at,ut){var ft,mt;ft={id:ht,presenceStatus:at,commentStatus:ut},mt=JSON.stringify(ft),this.socket.emit("setPresenceStatus",mt)},gt.setUserStatus=function(ht,at){var ut;at.id=ht,ut=JSON.stringify(at),this.socket.emit("setUserStatus",ut)},gt.setUserInfos=function(ht){var at,ut;at=ht,ut=JSON.stringify(at),this.socket.emit("setUserInfos",ut)},gt.addEventListener=function(ht,at){typeof apiRTC_React<"u"?eventManager.addEventListener(ht,at):ht!=="getUserFromIdAnswer"||ht!=="error"||ht!=="getAllUsersAnswer"||ht!=="searchUserAnswer"?document.addEventListener(ht,at,!1):dt.createErrorEvent("ERROR: Trying to add a listener on an unknow event")},gt.callback=function(ht,at){return this.closureHandler=function(ut){return ht[at](ut)},this.closureHandler},et.apiDB=gt}(window)},2746:(nt,it,s)=>{s.r(it);var et=s(1549).Y.get("onbeforeunload");apiCC.beforeUnloadFct=function(rt){et.debug("User has refreshed or left the page, eventType :",rt);try{if(typeof mailClicked<"u"&&mailClicked!==null&&(et.log("mailClicked variable is defined"),mailClicked===!0))return et.log("mailClicked is true : leaving onbeforeunload"),void(mailClicked=!1)}catch(gt){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in chrome when mailto :"+gt)}try{if(apiCC.iePluginInstallationPreventUnload!==void 0&&apiCC.iePluginInstallationPreventUnload!==null&&apiCC.iePluginInstallationPreventUnload===!0)return void et.log("iePluginInstallationPreventUnload is true : leaving onbeforeunload")}catch(gt){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in IE when installing webRTC plugin :"+gt)}if(apiCC!=null){if(apiRTC.session!==null&&apiRTC.session.remoteAccessInvitation!==null){var ot;ot=apiRTC.session.remoteAccessInvitation.invitationType==="sent"?{code:"AGENT_LEFT"}:{code:"USER_LEFT"},et.debug("Stopping remote access on refresh"),apiRTC.session.remoteAccessInvitation.stop(!0,ot)}apiCC.storeSessionInfoInSessionStorage(),apiCC.cleanApiRTCContext(),apiCC.disconnect({invalidateApiCCId:!0}),apiCC.cleanAllEventListener(),apiCC.myEventTable=[]}apiCC!=null&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiRTC.browser==="Mobile Safari"?window.addEventListener("pagehide",function(){apiCC.beforeUnloadFct("unload_MobileSafari")}):window.onbeforeunload=function(){apiCC.beforeUnloadFct("unload")}},9064:(nt,it,s)=>{function et(rt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ot){return typeof ot}:function(ot){return ot&&typeof Symbol=="function"&&ot.constructor===Symbol&&ot!==Symbol.prototype?"symbol":typeof ot},et(rt)}s(2222),s(2772),s(4916),s(3123),s(5306),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948),nt=s.hmd(nt),function(rt){var ot="function",gt="undefined",dt="object",pt="string",st="model",ht="name",at="type",ut="vendor",ft="version",mt="architecture",yt="console",At="mobile",wt="tablet",Pt="smarttv",Rt="wearable",kt="embedded",bt="Amazon",Nt="Apple",Ft="ASUS",Ut="BlackBerry",Jt="Google",hn="Huawei",Xt="LG",zt="Microsoft",cn="Motorola",vn="Samsung",Sn="Sharp",fn="Sony",mn="Xiaomi",bn="Zebra",un="Facebook",Tn="Chromium OS",kn="Mac OS",xn=function(Gn){for(var Zn={},rr=0;rr<Gn.length;rr++)Zn[Gn[rr].toUpperCase()]=Gn[rr];return Zn},An=function(Gn,Zn){return et(Gn)===pt&&En(Zn).indexOf(En(Gn))!==-1},En=function(Gn){return Gn.toLowerCase()},Rn=function(Gn,Zn){if(et(Gn)===pt)return Gn=Gn.replace(/^\s\s*/,""),et(Zn)===gt?Gn:Gn.substring(0,350)},wn=function(Gn,Zn){for(var rr,Fn,Xn,Yn,Nn,Un,Cn=0;Cn<Zn.length&&!Nn;){var Mn=Zn[Cn],Kt=Zn[Cn+1];for(rr=Fn=0;rr<Mn.length&&!Nn&&Mn[rr];)if(Nn=Mn[rr++].exec(Gn))for(Xn=0;Xn<Kt.length;Xn++)Un=Nn[++Fn],et(Yn=Kt[Xn])===dt&&Yn.length>0?Yn.length===2?et(Yn[1])==ot?this[Yn[0]]=Yn[1].call(this,Un):this[Yn[0]]=Yn[1]:Yn.length===3?et(Yn[1])!==ot||Yn[1].exec&&Yn[1].test?this[Yn[0]]=Un?Un.replace(Yn[1],Yn[2]):void 0:this[Yn[0]]=Un?Yn[1].call(this,Un,Yn[2]):void 0:Yn.length===4&&(this[Yn[0]]=Un?Yn[3].call(this,Un.replace(Yn[1],Yn[2])):void 0):this[Yn]=Un||void 0;Cn+=2}},Dn=function(Gn,Zn){for(var rr in Zn)if(et(Zn[rr])===dt&&Zn[rr].length>0){for(var Fn=0;Fn<Zn[rr].length;Fn++)if(An(Zn[rr][Fn],Gn))return rr==="?"?void 0:rr}else if(An(Zn[rr],Gn))return rr==="?"?void 0:rr;return Gn},Bn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},zn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ft,[ht,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ft,[ht,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ht,ft],[/opios[\/ ]+([\w\.]+)/i],[ft,[ht,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[ft,[ht,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[ht,ft],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ft,[ht,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ft,[ht,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ft,[ht,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ft,[ht,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ft,[ht,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ft,[ht,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[ht,/(.+)/,"$1 Secure Browser"],ft],[/\bfocus\/([\w\.]+)/i],[ft,[ht,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[ft,[ht,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ft,[ht,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ft,[ht,"Dolphin"]],[/coast\/([\w\.]+)/i],[ft,[ht,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[ft,[ht,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[ft,[ht,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ht,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[ht,/(.+)/,"$1 Browser"],ft],[/(comodo_dragon)\/([\w\.]+)/i],[[ht,/_/g," "],ft],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[ht,ft],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[ht],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ht,un],ft],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[ht,ft],[/\bgsa\/([\w\.]+) .*safari\//i],[ft,[ht,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ft,[ht,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ft,[ht,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ht,"Chrome WebView"],ft],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ft,[ht,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ht,ft],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ft,[ht,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ft,ht],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ht,[ft,Dn,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[ht,ft],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ht,"Netscape"],ft],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ft,[ht,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[ht,ft],[/(cobalt)\/([\w\.]+)/i],[ht,[ft,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[mt,"amd64"]],[/(ia32(?=;))/i],[[mt,En]],[/((?:i[346]|x)86)[;\)]/i],[[mt,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[mt,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[mt,"armhf"]],[/windows (ce|mobile); ppc;/i],[[mt,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[mt,/ower/,"",En]],[/(sun4\w)[;\)]/i],[[mt,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[mt,En]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[st,[ut,vn],[at,wt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[st,[ut,vn],[at,At]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[st,[ut,Nt],[at,At]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[st,[ut,Nt],[at,wt]],[/(macintosh);/i],[st,[ut,Nt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[st,[ut,Sn],[at,At]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[st,[ut,hn],[at,wt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[st,[ut,hn],[at,At]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[st,/_/g," "],[ut,mn],[at,At]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[st,/_/g," "],[ut,mn],[at,wt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[st,[ut,"OPPO"],[at,At]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[st,[ut,"Vivo"],[at,At]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[st,[ut,"Realme"],[at,At]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[st,[ut,cn],[at,At]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[st,[ut,cn],[at,wt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[st,[ut,Xt],[at,wt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[st,[ut,Xt],[at,At]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[st,[ut,"Lenovo"],[at,wt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[st,/_/g," "],[ut,"Nokia"],[at,At]],[/(pixel c)\b/i],[st,[ut,Jt],[at,wt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[st,[ut,Jt],[at,At]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[st,[ut,fn],[at,At]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[st,"Xperia Tablet"],[ut,fn],[at,wt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[st,[ut,"OnePlus"],[at,At]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[st,[ut,bt],[at,wt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[st,/(.+)/g,"Fire Phone $1"],[ut,bt],[at,At]],[/(playbook);[-\w\),; ]+(rim)/i],[st,ut,[at,wt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[st,[ut,Ut],[at,At]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[st,[ut,Ft],[at,wt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[st,[ut,Ft],[at,At]],[/(nexus 9)/i],[st,[ut,"HTC"],[at,wt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[ut,[st,/_/g," "],[at,At]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[st,[ut,"Acer"],[at,wt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[st,[ut,"Meizu"],[at,At]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[ut,st,[at,At]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[ut,st,[at,wt]],[/(surface duo)/i],[st,[ut,zt],[at,wt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[st,[ut,"Fairphone"],[at,At]],[/(u304aa)/i],[st,[ut,"AT&T"],[at,At]],[/\bsie-(\w*)/i],[st,[ut,"Siemens"],[at,At]],[/\b(rct\w+) b/i],[st,[ut,"RCA"],[at,wt]],[/\b(venue[\d ]{2,7}) b/i],[st,[ut,"Dell"],[at,wt]],[/\b(q(?:mv|ta)\w+) b/i],[st,[ut,"Verizon"],[at,wt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[st,[ut,"Barnes & Noble"],[at,wt]],[/\b(tm\d{3}\w+) b/i],[st,[ut,"NuVision"],[at,wt]],[/\b(k88) b/i],[st,[ut,"ZTE"],[at,wt]],[/\b(nx\d{3}j) b/i],[st,[ut,"ZTE"],[at,At]],[/\b(gen\d{3}) b.+49h/i],[st,[ut,"Swiss"],[at,At]],[/\b(zur\d{3}) b/i],[st,[ut,"Swiss"],[at,wt]],[/\b((zeki)?tb.*\b) b/i],[st,[ut,"Zeki"],[at,wt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[ut,"Dragon Touch"],st,[at,wt]],[/\b(ns-?\w{0,9}) b/i],[st,[ut,"Insignia"],[at,wt]],[/\b((nxa|next)-?\w{0,9}) b/i],[st,[ut,"NextBook"],[at,wt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[ut,"Voice"],st,[at,At]],[/\b(lvtel\-)?(v1[12]) b/i],[[ut,"LvTel"],st,[at,At]],[/\b(ph-1) /i],[st,[ut,"Essential"],[at,At]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[st,[ut,"Envizen"],[at,wt]],[/\b(trio[-\w\. ]+) b/i],[st,[ut,"MachSpeed"],[at,wt]],[/\btu_(1491) b/i],[st,[ut,"Rotor"],[at,wt]],[/(shield[\w ]+) b/i],[st,[ut,"Nvidia"],[at,wt]],[/(sprint) (\w+)/i],[ut,st,[at,At]],[/(kin\.[onetw]{3})/i],[[st,/\./g," "],[ut,zt],[at,At]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[st,[ut,bn],[at,wt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[st,[ut,bn],[at,At]],[/smart-tv.+(samsung)/i],[ut,[at,Pt]],[/hbbtv.+maple;(\d+)/i],[[st,/^/,"SmartTV"],[ut,vn],[at,Pt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[ut,Xt],[at,Pt]],[/(apple) ?tv/i],[ut,[st,"Apple TV"],[at,Pt]],[/crkey/i],[[st,"Chromecast"],[ut,Jt],[at,Pt]],[/droid.+aft(\w)( bui|\))/i],[st,[ut,bt],[at,Pt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[st,[ut,Sn],[at,Pt]],[/(bravia[\w ]+)( bui|\))/i],[st,[ut,fn],[at,Pt]],[/(mitv-\w{5}) bui/i],[st,[ut,mn],[at,Pt]],[/Hbbtv.*(technisat) (.*);/i],[ut,st,[at,Pt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[ut,Rn],[st,Rn],[at,Pt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[at,Pt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[ut,st,[at,yt]],[/droid.+; (shield) bui/i],[st,[ut,"Nvidia"],[at,yt]],[/(playstation [345portablevi]+)/i],[st,[ut,fn],[at,yt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[st,[ut,zt],[at,yt]],[/((pebble))app/i],[ut,st,[at,Rt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[st,[ut,Nt],[at,Rt]],[/droid.+; (glass) \d/i],[st,[ut,Jt],[at,Rt]],[/droid.+; (wt63?0{2,3})\)/i],[st,[ut,bn],[at,Rt]],[/(quest( 2| pro)?)/i],[st,[ut,un],[at,Rt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[ut,[at,kt]],[/(aeobc)\b/i],[st,[ut,bt],[at,kt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[st,[at,At]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[st,[at,wt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[at,wt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[at,At]],[/(android[-\w\. ]{0,9});.+buil/i],[st,[ut,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ft,[ht,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ft,[ht,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[ht,ft],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ft,ht]],os:[[/microsoft (windows) (vista|xp)/i],[ht,ft],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[ht,[ft,Dn,Bn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[ht,"Windows"],[ft,Dn,Bn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ft,/_/g,"."],[ht,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ht,kn],[ft,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ft,ht],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ht,ft],[/\(bb(10);/i],[ft,[ht,Ut]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ft,[ht,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ft,[ht,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ft,[ht,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ft,[ht,"watchOS"]],[/crkey\/([\d\.]+)/i],[ft,[ht,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[ht,Tn],ft],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ht,ft],[/(sunos) ?([\w\.\d]*)/i],[[ht,"Solaris"],ft],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[ht,ft]]},Hn=function Gn(Zn,rr){if(et(Zn)===dt&&(rr=Zn,Zn=void 0),!(this instanceof Gn))return new Gn(Zn,rr).getResult();var Fn=et(rt)!==gt&&rt.navigator?rt.navigator:void 0,Xn=Zn||(Fn&&Fn.userAgent?Fn.userAgent:""),Yn=Fn&&Fn.userAgentData?Fn.userAgentData:void 0,Nn=rr?function(Cn,Mn){var Kt={};for(var Ot in Cn)Mn[Ot]&&Mn[Ot].length%2==0?Kt[Ot]=Mn[Ot].concat(Cn[Ot]):Kt[Ot]=Cn[Ot];return Kt}(zn,rr):zn,Un=Fn&&Fn.userAgent==Xn;return this.getBrowser=function(){var Cn,Mn={name:void 0,version:void 0};return wn.call(Mn,Xn,Nn.browser),Mn.major=et(Cn=Mn.version)===pt?Cn.replace(/[^\d\.]/g,"").split(".")[0]:void 0,Un&&Fn&&Fn.brave&&et(Fn.brave.isBrave)==ot&&(Mn.name="Brave"),Mn},this.getCPU=function(){var Cn={architecture:void 0};return wn.call(Cn,Xn,Nn.cpu),Cn},this.getDevice=function(){var Cn={vendor:void 0,model:void 0,type:void 0};return wn.call(Cn,Xn,Nn.device),Un&&!Cn.type&&Yn&&Yn.mobile&&(Cn.type=At),Un&&Cn.model=="Macintosh"&&Fn&&et(Fn.standalone)!==gt&&Fn.maxTouchPoints&&Fn.maxTouchPoints>2&&(Cn.model="iPad",Cn.type=wt),Cn},this.getEngine=function(){var Cn={name:void 0,version:void 0};return wn.call(Cn,Xn,Nn.engine),Cn},this.getOS=function(){var Cn={name:void 0,version:void 0};return wn.call(Cn,Xn,Nn.os),Un&&!Cn.name&&Yn&&Yn.platform!="Unknown"&&(Cn.name=Yn.platform.replace(/chrome os/i,Tn).replace(/macos/i,kn)),Cn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Xn},this.setUA=function(Cn){return Xn=et(Cn)===pt&&Cn.length>350?Rn(Cn,350):Cn,this},this.setUA(Xn),this};Hn.VERSION="1.0.35",Hn.BROWSER=xn([ht,ft,"major"]),Hn.CPU=xn([mt]),Hn.DEVICE=xn([st,ut,at,yt,At,Pt,wt,Rt,kt]),Hn.ENGINE=Hn.OS=xn([ht,ft]),et(o)!==gt?(et(nt)!==gt&&nt.exports&&(o=nt.exports=Hn),o.UAParser=Hn,rt.UAParser=Hn):et(rt)!==gt&&(rt.UAParser=Hn);var nr=et(rt)!==gt&&(rt.jQuery||rt.Zepto);if(nr&&!nr.ua){var sn=new Hn;nr.ua=sn.getResult(),nr.ua.get=function(){return sn.getUA()},nr.ua.set=function(Gn){sn.setUA(Gn);var Zn=sn.getResult();for(var rr in Zn)nr.ua[rr]=Zn[rr]}}}((typeof window>"u"?"undefined":et(window))==="object"?window:void 0)},1256:(nt,it,s)=>{s.r(it),s.d(it,{Call:()=>Qr,CloudApi:()=>cp,Conference:()=>Fs,Contact:()=>No,Conversation:()=>$o,ConversationCall:()=>Gl,DataChannel:()=>ys,Enterprise:()=>Xs,EventCenter:()=>kt,EventEmitter:()=>dt,MediaDevice:()=>Ft,Observable:()=>cn,PointerSharingRoom:()=>ru,ReceivedCallInvitation:()=>Er,ReceivedConversationInvitation:()=>Vt,ReceivedConversationJoinRequest:()=>Ho,ReceivedDataChannelInvitation:()=>zo,ReceivedFileTransferInvitation:()=>eo,ReceivedInvitation:()=>Mn,ReceivedPointerSharingInvitation:()=>Ml,ReceivedWhiteboardInvitation:()=>vs,SentInvitation:()=>Do,Session:()=>Br,Stream:()=>so,UserAgent:()=>sp,UserData:()=>Io,default:()=>Em}),s(7941),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(3173);function rt(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function ot(Wt){return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},ot(Wt)}function gt(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}s(4603),s(4916),s(9714),s(7042),s(561),s(9070),s(8309),s(1038),s(9753);var dt=function(){function Wt(){(function(Mt,Bt){if(!(Mt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt)}var jt,Qt;return jt=Wt,Qt=[{key:"getListeners",value:function(Mt){var Bt,ln,dn=this._getEvents();if(Mt instanceof RegExp)for(ln in Bt={},dn)dn.hasOwnProperty(ln)&&Mt.test(ln)&&(Bt[ln]=dn[ln]);else Bt=dn[Mt]||(dn[Mt]=[]);return Bt}},{key:"flattenListeners",value:function(Mt){var Bt,ln=[];for(Bt=0;Bt<Mt.length;Bt+=1)ln.push(Mt[Bt].listener);return ln}},{key:"getListenersAsObject",value:function(Mt){var Bt,ln=this.getListeners(Mt);return ln instanceof Array&&((Bt={})[Mt]=ln),Bt||ln}},{key:"emit",value:function(Mt){var Bt=Array.prototype.slice.call(arguments,1);return this.emitEvent(Mt,Bt)}},{key:"addListener",value:function(Mt,Bt){if(!at(Bt))throw new TypeError("listener must be a function");var ln,dn=this.getListenersAsObject(Mt),Yt=ot(Bt)==="object";for(ln in dn)dn.hasOwnProperty(ln)&&st(dn[ln],Bt)===-1&&dn[ln].push(Yt?Bt:{listener:Bt,once:!1});if(Mt==="contactListUpdate"){apiRTC.userAgentInstance.currentSession.contactListUpdateListenerSetted=!0;var Ct,St=function(Gt,en){var nn=typeof Symbol<"u"&&Gt[Symbol.iterator]||Gt["@@iterator"];if(!nn){if(Array.isArray(Gt)||(nn=function(dr,fr){if(dr){if(typeof dr=="string")return rt(dr,fr);var Ar=Object.prototype.toString.call(dr).slice(8,-1);return Ar==="Object"&&dr.constructor&&(Ar=dr.constructor.name),Ar==="Map"||Ar==="Set"?Array.from(dr):Ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ar)?rt(dr,fr):void 0}}(Gt))||en&&Gt&&typeof Gt.length=="number"){nn&&(Gt=nn);var on=0,yn=function(){};return{s:yn,n:function(){return on>=Gt.length?{done:!0}:{done:!1,value:Gt[on++]}},e:function(dr){throw dr},f:yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var On,Qn=!0,tr=!1;return{s:function(){nn=nn.call(Gt)},n:function(){var dr=nn.next();return Qn=dr.done,dr},e:function(dr){tr=!0,On=dr},f:function(){try{Qn||nn.return==null||nn.return()}finally{if(tr)throw On}}}}(apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent);try{for(St.s();!(Ct=St.n()).done;){var Lt=Ct.value;this.emit("contactListUpdate",Lt)}}catch(Gt){St.e(Gt)}finally{St.f()}apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent=[]}else if(Mt==="mediaDeviceChanged"&&apiRTC.mediaDeviceMgr.mediaDeviceChangedDetected===!0){var Ht=apiRTC.mediaDeviceMgr.getMediaDeviceListsDiff(apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);apiRTC.myWebRTC_Event.createMediaDeviceChangedEvent(Ht,"updatedOnDeviceChange",apiRTC.mediaDeviceMgr.realMediaDevicesListInitializationWasAlreadyDone)}return this}},{key:"addOnceListener",value:function(Mt,Bt){return this.addListener(Mt,{listener:Bt,once:!0})}},{key:"defineEvent",value:function(Mt){return this.getListeners(Mt),this}},{key:"defineEvents",value:function(Mt){for(var Bt=0;Bt<Mt.length;Bt+=1)this.defineEvent(Mt[Bt]);return this}},{key:"removeListener",value:function(Mt,Bt){var ln,dn,Yt=this.getListenersAsObject(Mt);for(dn in Yt)Yt.hasOwnProperty(dn)&&(ln=st(Yt[dn],Bt))!==-1&&Yt[dn].splice(ln,1);return this}},{key:"addListeners",value:function(Mt,Bt){return this.manipulateListeners(!1,Mt,Bt)}},{key:"removeListeners",value:function(Mt,Bt){return this.manipulateListeners(!0,Mt,Bt)}},{key:"manipulateListeners",value:function(Mt,Bt,ln){var dn,Yt,Ct=Mt?this.removeListener:this.addListener,St=Mt?this.removeListeners:this.addListeners;if(ot(Bt)!=="object"||Bt instanceof RegExp)for(dn=ln.length;dn--;)Ct.call(this,Bt,ln[dn]);else for(dn in Bt)Bt.hasOwnProperty(dn)&&(Yt=Bt[dn])&&(typeof Yt=="function"?Ct.call(this,dn,Yt):St.call(this,dn,Yt));return this}},{key:"removeEvent",value:function(Mt){var Bt,ln=ot(Mt),dn=this._getEvents();if(ln==="string")delete dn[Mt];else if(Mt instanceof RegExp)for(Bt in dn)dn.hasOwnProperty(Bt)&&Mt.test(Bt)&&delete dn[Bt];else delete this._events;return this}},{key:"emitEvent",value:function(Mt,Bt){var ln,dn,Yt,Ct,St=this.getListenersAsObject(Mt);for(Ct in St)if(St.hasOwnProperty(Ct))for(ln=St[Ct].slice(0),Yt=0;Yt<ln.length;Yt++)(dn=ln[Yt]).once===!0&&this.removeListener(Mt,dn.listener),dn.listener.apply(this,Bt||[])===this._getOnceReturnValue()&&this.removeListener(Mt,dn.listener);return this}},{key:"setOnceReturnValue",value:function(Mt){return this._onceReturnValue=Mt,this}},{key:"_getOnceReturnValue",value:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue}},{key:"_getEvents",value:function(){return this._events||(this._events={})}}],Qt&&gt(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}(),pt=dt.prototype,st=function(Wt,jt){for(var Qt=Wt.length;Qt--;)if(Wt[Qt].listener===jt)return Qt;return-1},ht=function(Wt){return function(){return this[Wt].apply(this,arguments)}},at=function Wt(jt){return typeof jt=="function"||jt instanceof RegExp||!(!jt||ot(jt)!=="object")&&Wt(jt.listener)};pt.on=ht("addListener"),pt.once=ht("addOnceListener"),pt.off=ht("removeListener"),pt.removeAllListeners=ht("removeEvent"),pt.trigger=ht("emitEvent"),s(1249);var ut=s(5945),ft=s(1549),mt=s(4708);ft.Y.get("ApiCC");var yt={description:"ApiRTC Cloud Communication Library",session:null,jsLoaded:!1,initApiKey:null,initApiCCId:null,extJsLoadingRetryNb:null,extJsLoadingRetryDelay:null,bandwidthTestServer:"https://cloud.apizee.com",bandwidthRatingThresholds:[300,500,1e3,1500,2e3],LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,browser:ut.Xh,browser_major_version:ut.PR,browser_version:ut.dc,osName:ut.BF,osVersion:ut.MM,osUAParser:ut.ag,browserInfo:ut.cf,browserDetails:mt.wL,parser:ut.E2,logStorageActivated:!1,logStorageLevel:3,logStorage:[],eventCenter:null,sioEmbedded:!1,apizee_version:"5.0"};function At(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var wt=ft.Y.get("EventCenter"),Pt="eventCenterData",Rt="[REMOTE-EVENTCENTER]",kt=function(){function Wt(){var Mt=this;(function(Bt,ln){if(!(Bt instanceof ln))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.consoleOutputEnabled=!1,this.storageDisabled=!1,typeof apiRTC_React>"u"&&(document.addEventListener("error",function(Bt){Mt.handleErrorEvent(Bt)}),document.addEventListener("userMediaError",function(Bt){Mt.handleErrorEvent(Bt)}))}var jt,Qt;return jt=Wt,Qt=[{key:"handleErrorEvent",value:function(Mt){var Bt=Mt.detail;if(this.storageDisabled!==!0)if(Bt!==void 0){var ln={},dn={},Yt="UNKNOWN";ln.type=Mt.type;for(var Ct=0,St=Object.keys(Bt);Ct<St.length;Ct++){var Lt=St[Ct];Lt!=="eventType"&&(ln[Lt]=Bt[Lt])}ln.systemInfo={apiRTC:yt.version,app:ut.$6,device:ut.vO,osName:ut.BF,osVersion:ut.MM,browser:ut.Xh,browser_version:ut.dc},yt.session!==null&&yt.session!==void 0?Yt=yt.session.apiCCId:yt.initApiCCId!==null&&yt.initApiCCId!==void 0&&(Yt=yt.initApiCCId),ln.userInfo={apiCCId:Yt,apiKey:apiRTC.initApiKey};var Ht=localStorage.getItem(Pt);(Ht=Ht?JSON.parse(Ht):[]).unshift(ln),Ht.length>100&&Ht.splice(100,Ht.length-100),localStorage.setItem(Pt,JSON.stringify(Ht)),this.consoleOutputEnabled&&wt.error("[EVENTCENTER]",ln),typeof Sentry<"u"&&(Mt.detail.errorCode!=="USER_MEDIA_ERROR"?(dn.type=Mt.type,Mt.detail.error&&(dn.error=Mt.detail.error),Mt.detail.errorInfo&&(dn.errorInfo=Mt.detail.errorInfo),Mt.detail.errorCode&&(dn.errorCode=Mt.detail.errorCode),Mt.detail.callId&&(dn.callId=Mt.detail.callId),Mt.detail.convId&&(dn.convId=Mt.detail.convId),Mt.detail.gumConfig&&(Mt.detail.gumConfig.video===!1?dn.gumConfigVideo=!1:dn.gumConfigVideo=!0),Sentry.withScope(function(Gt){Gt.setTag("event-center",!0),Gt.setTag("userId",yt.session.apiCCId),Sentry.captureException(new Error(JSON.stringify(dn)))})):wt.debug("Filtering error event for USER_MEDIA_ERROR for Sentry"))}else wt.error("Can't handle error event: data is undefined");else wt.debug("Event Center is disabled")}},{key:"handleDataAnswer",value:function(Mt){Mt?Mt.map(function(Bt){wt.debug(Rt+": ",Bt)}):wt.debug(Rt+": "+this.getUsername()+" has no event records")}},{key:"getStoredData",value:function(){var Mt=localStorage.getItem(Pt);return Mt===void 0?(wt.warn("No data was stored by event center"),null):JSON.parse(Mt)}},{key:"clearStoredData",value:function(){localStorage.removeItem(Pt)}},{key:"enableConsoleOutput",value:function(Mt){this.consoleOutputEnabled=Mt}},{key:"disableStorage",value:function(Mt){this.storageDisabled=Mt}}],Qt&&At(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function bt(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}s(3710);var Nt=ft.Y.get("MediaDevice"),Ft=function(){function Wt(Mt,Bt,ln,dn){(function(Yt,Ct){if(!(Yt instanceof Ct))throw new TypeError("Cannot call a class as a function")})(this,Wt),Nt.trace("Create "+Bt+" MediaDevice"),this.id=Mt,this.type=Bt,this.label=ln,this.capabilities=dn}var jt,Qt;return jt=Wt,(Qt=[{key:"getId",value:function(){return this.id.toString()}},{key:"getType",value:function(){return this.type}},{key:"getLabel",value:function(){return this.label}},{key:"isCamera",value:function(){return this.type==="videoinput"}},{key:"isMicrophone",value:function(){return this.type==="audioinput"}},{key:"isAudioOutput",value:function(){return this.type==="audiooutput"}},{key:"getCapabilities",value:function(){return this.capabilities}}])&&bt(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}(),Ut=(s(1532),s(4129),s(9653),s(4363),s(2772),s(9554),s(4747),s(8674),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2707),s(2564),s(7327),s(9600),s(285),s(1637),s(2479),s(4812),s(2222),s(1058),s(6755),s(4986),s(8304),s(489),s(2419),s(8011),s(2443),s(3680),s(3706),s(2703),s(4819),s(5003),s(1215));function Jt(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function hn(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var Xt=new WeakMap,zt=new WeakMap,cn=function(){function Wt(Bt){(function(ln,dn){if(!(ln instanceof dn))throw new TypeError("Cannot call a class as a function")})(this,Wt),zt.set(this,Bt),Xt.set(this,new dt)}var jt,Qt,Mt;return jt=Wt,Mt=[{key:"getAvailableEvents",value:function(){return[]}}],(Qt=[{key:"on",value:function(Bt,ln){return this.constructor.getAvailableEvents().indexOf(Bt)>-1?Xt.get(this).on(Bt,ln):zt.get(this).error("No such event "+Bt),this}},{key:"removeListener",value:function(Bt,ln){if(this.constructor.getAvailableEvents().indexOf(Bt)>-1){var dn,Yt=!1,Ct=function(St,Lt){var Ht=typeof Symbol<"u"&&St[Symbol.iterator]||St["@@iterator"];if(!Ht){if(Array.isArray(St)||(Ht=function(On,Qn){if(On){if(typeof On=="string")return Jt(On,Qn);var tr=Object.prototype.toString.call(On).slice(8,-1);return tr==="Object"&&On.constructor&&(tr=On.constructor.name),tr==="Map"||tr==="Set"?Array.from(On):tr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tr)?Jt(On,Qn):void 0}}(St))||Lt&&St&&typeof St.length=="number"){Ht&&(St=Ht);var Gt=0,en=function(){};return{s:en,n:function(){return Gt>=St.length?{done:!0}:{done:!1,value:St[Gt++]}},e:function(On){throw On},f:en}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nn,on=!0,yn=!1;return{s:function(){Ht=Ht.call(St)},n:function(){var On=Ht.next();return on=On.done,On},e:function(On){yn=!0,nn=On},f:function(){try{on||Ht.return==null||Ht.return()}finally{if(yn)throw nn}}}}(Xt.get(this).getListeners(Bt));try{for(Ct.s();!(dn=Ct.n()).done;)if(dn.value.listener===ln){Yt=!0;break}}catch(St){Ct.e(St)}finally{Ct.f()}Yt?Xt.get(this).off(Bt,ln):zt.get(this).trace("removeListener() - No such listener for event "+Bt)}else zt.get(this).error("No such event "+Bt);return this}}])&&hn(jt.prototype,Qt),Mt&&hn(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function vn(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return Sn(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?Sn(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function Sn(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function fn(Wt){return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},fn(Wt)}function mn(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}s(6699),s(2023),s(3843);var bn=ft.Y.get("ApiRTCManager"),un=["sessionReady","incomingCall","callEstablished","userMediaSuccess","userMediaStop","userMediaError","callRestarting","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onQosVideoChange","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","MCUParticipantEjected","MCUStreamingStarted","MCUStreamingStopped","MCUAvailableReplay","MCURoomModeChanged","onCallStatsUpdate","slowLink","localStreamUpdated","remoteStreamUpdated","audioAmplitude","videoQualityChanged","cpuLimited","bandwidthLimited","simulcastFeedChanged","cloudEventOccurred","groupUnsubscribed","transferBegun","transferProgress","transferEnded"],Tn=null,kn=!1,xn=!1,An=function(Wt){if(Tn!==null&&Tn.isInitialized()){if(Wt==="groupUnsubscribed"||Wt==="transferBegun"||Wt==="transferProgress"||Wt==="transferEnded")return;apiRTC.addEventListener(Wt,function(jt){bn.trace("Emiting "+Wt,jt),Tn.eventEmitter.emit(Wt,jt)})}},En=function(Wt){Tn!==null&&Tn.isInitialized()&&apiRTC.removeEventListener(Wt,function(jt){bn.trace("Emiting "+Wt,jt),Tn.eventEmitter.emit(Wt,jt)})},Rn=function(){function Wt(){if(function(Bt,ln){if(!(Bt instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,Wt),Tn!==null)throw"Cannot construct singleton ApiRTCManager";this.eventEmitter=new dt,this.apiRTCSession=null,this.whiteBoardClient=null,this.pointerSharingClient=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,this.contactDisconnectionDelay=et.g.CONTACT_DISCONNECTION_DELAY,Tn=this}var jt,Qt,Mt;return jt=Wt,Qt=[{key:"onEvent",value:function(Bt,ln){return un.indexOf(Bt)>-1?this.eventEmitter.on(Bt,ln):bn.error("No such apiRTC event "+Bt),this}},{key:"onceEvent",value:function(Bt,ln){un.indexOf(Bt)>-1?this.eventEmitter.once(Bt,ln):bn.error("No such apiRTC event "+Bt)}},{key:"sendData",value:function(Bt,ln){var dn=this;return new Promise(function(Yt,Ct){dn.dataClient===null?Ct(et.g.ERROR_APIRTC_INITIALISATION_FAILED):dn.dataClient.sendData(Bt,ln,function(St){var Lt=et.g.ERROR_OTHER;St!=null?St.reason!=="timeoutReached"&&St.reason!=="destNotFound"?Yt():(St.reason==="timerReached"?Lt=et.g.ERROR_TIMED_OUT:St.reason==="destNotFound"&&(Lt=et.g.ERROR_NOT_FOUND),Ct(Lt)):Ct(Lt)})})}},{key:"sendMessage",value:function(Bt,ln){var dn=this,Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,St){dn.IMClient===null?St(et.g.ERROR_APIRTC_INITIALISATION_FAILED):dn.IMClient.sendMessage(Bt,ln,function(Lt){var Ht=et.g.ERROR_OTHER;Lt!=null?Lt.reason!=="timeoutReached"&&Lt.reason!=="destNotFound"?Ct(Lt.UUCSeq):(Lt.reason==="timerReached"?Ht=et.g.ERROR_TIMED_OUT:Lt.reason==="destNotFound"&&(Ht=et.g.ERROR_NOT_FOUND),St(Ht)):St(Ht)},Yt)})}},{key:"joinGroupChat",value:function(Bt){var ln=this;return new Promise(function(dn,Yt){if(ln.IMClient===null)return Yt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat"));ln.IMClient.joinGroupChat(Bt),dn()})}},{key:"leaveGroupChat",value:function(Bt){var ln=this;return new Promise(function(dn,Yt){if(ln.IMClient===null)return Yt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - cannot leave group chat"));ln.IMClient.leaveGroupChat(Bt),dn()})}},{key:"sendMessageToGroupChat",value:function(Bt,ln){var dn=this,Yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,St){if(dn.IMClient===null)St(et.g.ERROR_APIRTC_INITIALISATION_FAILED);else{var Lt={};Ut.g.isTypeof(Yt,"metadata","object")&&(Lt.metadata=Yt.metadata),dn.IMClient.sendMessageToGroupChat(Bt,ln,function(Ht){return Ht!==null&&fn(Ht)==="object"?Ht.reason==="ack"?Ct(Ht.UUCSeq):Ht.reason==="timeoutReached"?St(et.g.ERROR_TIMED_OUT):Ht.reason==="destNotFound"?St(et.g.ERROR_NOT_FOUND):St(et.g.ERROR_OTHER):St(et.g.ERROR_OTHER)},Lt)}})}},{key:"removeEventListener",value:function(Bt,ln){ln!=null&&(un.indexOf(Bt)>-1?this.eventEmitter.off(Bt,ln):bn.error("No such apiRTC event "+Bt))}},{key:"isInitialized",value:function(){return kn}},{key:"unsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.unsubscribePresenceGroup([Bt]),Tn.eventEmitter.emit("groupUnsubscribed",Bt)):bn.error("apiRTC session is not initialized")}},{key:"joinAndSubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.joinPresenceGroup([Bt]),this.apiRTCSession.subscribePresenceGroup([Bt])):bn.error("apiRTC session is not initialized")}},{key:"leaveAndUnsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.leavePresenceGroup([Bt]),this.unsubscribeToPresenceGroup(Bt)):bn.error("apiRTC session is not initialized")}},{key:"subscribeToCloudEvent",value:function(Bt,ln){this.apiRTCSession?this.apiRTCSession.subscribeToCloudEvent(Bt,ln):bn.error("apiRTC session is not initialized")}},{key:"unsubscribeToCloudEvent",value:function(Bt,ln){this.apiRTCSession?this.apiRTCSession.unsubscribeToCloudEvent(Bt,ln):bn.error("apiRTC session is not initialized")}},{key:"disconnect",value:function(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(apiRTC.disconnect(Bt),kn=!1,this.apiRTCSession=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,xn){var ln,dn=vn(un);try{for(dn.s();!(ln=dn.n()).done;){var Yt=ln.value;En(Yt)}}catch(Ct){dn.e(Ct)}finally{dn.f()}xn=!1}}},{key:"initializeApiRTC",value:function(Bt){return bn.info("initializeApiRTC()"),new Promise(function(ln,dn){if(Bt===void 0||Bt.apiKey===void 0)dn("Invalid apiRTC initialization params");else{var Yt=function(Ct){switch(bn.debug("onChannelEventDuringInit()",Ct.detail),Ct.detail.channelEvent){case"onChannelError":dn("Channel Error : "+Ct.detail.event);break;case"onChannelConnectError":dn("Channel Connect Error : "+Ct.detail.event);break;case"onChannelOpened":bn.debug("onChannelOpened");break;default:bn.debug("Unhandle case in onChannelEventDuringInit :",Ct.detail.channelEvent)}};apiRTC.addEventListener("channelEvent",Yt),Bt.onReady=function(){if(kn=!0,Tn.webRTCClient=apiRTC.session.createWebRTCClient({}),Tn.webRTCClient.setMCUConnector(Bt.hasOwnProperty("mcu")?Bt.mcu:et.g.DEFAULT_MCU),Ut.g.isPropertyTypeof(Bt,"turnServerAddress","string")&&Tn.webRTCClient.setClientTurnServer(Bt.turnServerAddress),Tn.webRTCClient.setUserAcceptOnIncomingCallBeforeGetUserMedia(!0),Ut.g.isPropertyTypeof(Bt,"userAcceptOnIncomingDataCall","boolean")?Tn.webRTCClient.setUserAcceptOnIncomingDataCall(Bt.userAcceptOnIncomingDataCall):Tn.webRTCClient.setUserAcceptOnIncomingDataCall(!0),Ut.g.isPropertyTypeof(Bt,"userAcceptOnIncomingScreenSharingCall","boolean")?Tn.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(Bt.userAcceptOnIncomingScreenSharingCall):Tn.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(!1),Tn.dataClient=apiRTC.session.createDataClient(),Tn.IMClient=apiRTC.session.createIMClient(),Tn.pointerSharingClient=apiRTC.session.createPointerSharingClient(),Tn.webRTCClient.setAllowMultipleCalls(!0),Tn.apiRTCSession=apiRTC.session,!xn){var Ct,St=vn(un);try{for(St.s();!(Ct=St.n()).done;){var Lt=Ct.value;An(Lt)}}catch(Ht){St.e(Ht)}finally{St.f()}xn=!0}apiRTC.removeEventListener("channelEvent",Yt),ln(apiRTC.session.apiCCId)},kn=!1,Tn.apiRTCSession=null,Tn.webRTCClient=null,Tn.dataClient=null,Tn.IMClient=null,apiRTC.init(Bt)}})}},{key:"createWhiteBoard",value:function(){bn.debug("createWhiteBoard()"),Tn.whiteBoardClient=apiRTC.createWhiteBoard(null,"invisible",null,6e4)}},{key:"getMediaDevices",value:function(){return bn.debug("ApiRTCManager::getMediaDevices()"),new Promise(function(Bt,ln){apiRTC.getMediaDevices().then(function(dn){bn.debug("ApiRTCManager::getMediaDevices(), sources :",dn),Bt(dn)}).catch(function(dn){var Yt="getMediaDevices() - error";bn.error(Yt,dn),ln(new Error(Yt))})})}},{key:"getUserMedia",value:function(Bt){return new Promise(function(ln,dn){apiRTC.getUserMedia(Bt).then(function(Yt){bn.debug("ApiRTCManager::getUserMedia() success"),ln(Yt)}).catch(function(Yt){bn.error("ApiRTCManager::getUserMedia() - Could not get user media :",Yt),dn(new Error("ApiRTCManager::getUserMedia() - Could not get user media :"+Yt))})})}},{key:"setAudioSourceIdInConstraint",value:function(Bt,ln){return apiRTC.setAudioSourceIdInConstraint(Bt,ln)}},{key:"setVideoSourceIdInConstraint",value:function(Bt,ln){return apiRTC.setVideoSourceIdInConstraint(Bt,ln)}},{key:"attachMediaStream",value:function(Bt,ln){apiRTC.attachMediaStream(Bt,ln)}},{key:"addStreamInDiv",value:function(Bt,ln,dn,Yt,Ct,St,Lt){apiRTC.addStreamInDiv(Bt,ln,dn,Yt,Ct,St,Lt)}},{key:"removeElementFromDiv",value:function(Bt,ln){bn.debug("removeElementFromDiv"),apiRTC.removeElementFromDiv(Bt,ln)}},{key:"getClientId",value:function(){return this.apiRTCSession!==null&&this.apiRTCSession.apiCCWebRTCClient!==null?this.apiRTCSession.apiCCWebRTCClient.webRTCClient.clientId:null}},{key:"getActiveApiKey",value:function(){return apiRTC.session!==void 0&&apiRTC.session!==null?apiRTC.session.apiKey:null}}],Mt=[{key:"get",value:function(){return Tn===null&&(Tn=new Wt),Tn}}],Qt&&mn(jt.prototype,Qt),Mt&&mn(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function wn(Wt){return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},wn(Wt)}function Dn(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Bn(Wt,jt){return Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Bn(Wt,jt)}function zn(Wt,jt){if(jt&&(wn(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hn(Wt)}function Hn(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function nr(Wt){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},nr(Wt)}var sn=ft.Y.get("Invitation"),Gn=new WeakMap,Zn=["statusChange"],rr=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Bn(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=nr(Bt);if(ln){var Lt=nr(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return zn(this,Ct)});function Yt(){var Ct;return function(St,Lt){if(!(St instanceof Lt))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Ct=dn.call(this,sn)).id=null,Gn.set(Hn(Ct),et.g.INVITATION_STATUS_STANDBY),Ct.apiRTCManager=Rn.get(),Ct.type="not_defined",Ct}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return Zn}}],(Qt=[{key:"setStatus",value:function(Ct){Gn.set(this,Ct),Xt.get(this).emit("statusChange",{status:Ct,id:this.id})}},{key:"getStatus",value:function(){return Gn.get(this)}}])&&Dn(jt.prototype,Qt),Mt&&Dn(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn);function Fn(Wt){return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Fn(Wt)}function Xn(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Yn(Wt,jt){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Yn(Wt,jt)}function Nn(Wt,jt){if(jt&&(Fn(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Un(Wt){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Un(Wt)}ft.Y.get("ReceivedInvitation");var Cn=["statusChange","messageDelivered","messageNotDelivered"],Mn=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Yn(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Un(Bt);if(ln){var Lt=Un(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Nn(this,Ct)});function Yt(Ct,St){var Lt;return function(Ht,Gt){if(!(Ht instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Lt=dn.call(this)).invitationType="received",Lt.id=St,Lt.sender=Ct,Lt.receiveTime=Date.now(),Lt}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return Cn}}],(Qt=[{key:"accept",value:function(){return new Promise}},{key:"decline",value:function(Ct){}},{key:"getSender",value:function(){return this.sender}},{key:"getReceiveTime",value:function(){return this.receiveTime}},{key:"getId",value:function(){return this.id}}])&&Xn(jt.prototype,Qt),Mt&&Xn(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(rr);function Kt(Wt){return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Kt(Wt)}function Ot(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function lt(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Tt(Wt,jt){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Tt(Wt,jt)}function It(Wt,jt){if(jt&&(Kt(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dt(Wt)}function Dt(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Et(Wt){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Et(Wt)}var $t=ft.Y.get("ReceivedInvitation"),xt=new WeakMap,Vt=function(Wt){(function(Yt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Ct&&Tt(Yt,Ct)})(dn,Wt);var jt,Qt,Mt,Bt,ln=(Mt=dn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Yt,Ct=Et(Mt);if(Bt){var St=Et(this).constructor;Yt=Reflect.construct(Ct,arguments,St)}else Yt=Ct.apply(this,arguments);return It(this,Yt)});function dn(Yt,Ct,St){var Lt,Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ot(this,dn),Lt=ln.call(this,Yt,Ct.invitationId),$t.info("Create ReceivedConversationInvitation"),Lt.conversation=St,Lt.type="conversation",Lt.invitationData=Ct,xt.set(Dt(Lt),Ht),Lt}return jt=dn,Qt=[{key:"accept",value:function(Yt){var Ct=this,St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=function(){return new Promise(function(Gt,en){var nn=xt.get(Ct);St.hasOwnProperty("password")&&(nn.password=St.password),St.hasOwnProperty("session")&&(nn.session=St.session),Ct.conversation.join(nn).then(function(){Yt!=null&&Ct.conversation.publish(Yt),Gt(Ct.conversation)}).catch(function(on){en(Ut.g.createError(et.g.ERROR_OTHER,"accept() - cannot join webconf",$t,{fromError:on}))})})},Ht=function(){return new Promise(function(Gt,en){Ct.conversation.joinGroupChat().then(function(){Gt(Ct.conversation)}).catch(function(nn){en(Ut.g.createError(et.g.ERROR_OTHER,"accept() - cannot join groupChat",$t,{fromError:nn}))})})};return new Promise(function(Gt,en){return Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY?en(Ut.g.createError(et.g.ERROR_WRONG_STATE,"accept() - cannot accept invitation",$t)):(Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"}),Ct.invitationData&&Ct.invitationData.conversationTypes?Ct.invitationData.conversationTypes.indexOf("WEBCONF")>=0?Lt().then(Gt).catch(en):Ct.invitationData.conversationTypes.indexOf("GROUP_CHAT")>=0?Ht().then(Gt).catch(en):void 0:Lt().then(Gt).catch(en))})}},{key:"decline",value:function(Yt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Yt,answer:"decline"}))}},{key:"getConversation",value:function(){return this.conversation}}],Qt&&lt(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),dn}(Mn);function Zt(Wt){return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Zt(Wt)}function an(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return qt(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?qt(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function qt(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function tn(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function gn(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function rn(Wt,jt){return rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},rn(Wt,jt)}function pn(Wt,jt){if(jt&&(Zt(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return In(Wt)}function In(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Pn(Wt){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Pn(Wt)}s(189);var _n=ft.Y.get("Call"),Ln=Rn.get(),Vn=["streamAdded","streamRemoved","response","accepted","declined","hangup","localStreamAvailable","recordAvailable","statsUpdate","error","disconnectionWarning","userMediaError","desktopCapture","remoteStreamUpdated","recordingStarted","recordingStopped","recordingAvailable","remoteStreamIdUpdated"],or=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),hr=new WeakMap,mr=new WeakMap,yr=new WeakMap,Rr=new WeakMap,Or=new WeakMap,Qr=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&rn(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Pn(Bt);if(ln){var Lt=Pn(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return pn(this,Ct)});function Yt(Ct,St){var Lt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(tn(this,Yt),Lt=dn.call(this,_n),_n.debug("Create Call with id "+Ct),hr.set(In(Lt),Ct),mr.set(In(Lt),St),Lt.publishedStreams=new Map,Lt.receivedStreams=new Map,Lt.stats={},yr.set(In(Lt),Ht.hasOwnProperty("started")&&Ht.started?et.g.CALL_STATUS_ONGOING:et.g.CALL_STATUS_WAITING_FOR_CALLEE),Rr.set(In(Lt),!!Ht.hasOwnProperty("isRecorded")&&Ht.isRecorded),Ht.isRecorded){Lt.confId=null,Lt.recordingStatus=null;for(var Gt=Ln.webRTCClient.webRTCClient.callsTable.length;--Gt>=0;){var en=Ln.webRTCClient.webRTCClient.callsTable[Gt];if(en.callId===Ct&&en.data){Lt.confId=en.data.confId;break}}Rr.set(In(Lt),!0)}else Rr.set(In(Lt),!1);var nn={hangup:function(yn){Lt.getId()===yn.detail.callId&&Lt.destroy()},receiveData:function(yn){if(yn.detail.data.info!==void 0)yn.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&yn.detail.data.invitationId.toString()===Lt.getId()&&Lt.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&(_n.info("Call answer from "+Lt.getContact().getUsername()+" for "+Lt.getId()),yn.detail.data.answer==="accept"?(yr.set(In(Lt),et.g.CALL_STATUS_ONGOING),Xt.get(In(Lt)).emit("accepted"),Xt.get(In(Lt)).emit("response","accepted")):(yr.set(In(Lt),et.g.CALL_STATUS_ENDED),Xt.get(In(Lt)).emit("declined",{reason:"User_Refused_Call"}),Xt.get(In(Lt)).emit("response","declined")));else if(Lt.getId()===yn.detail.data.callId&&yn.detail.data.event===et.g.CONTACT_STREAM_UPDATED_INFO){var On={callId:yn.detail.data.callId,newStreamId:yn.detail.data.newStreamId,oldStreamId:yn.detail.data.oldStreamId};Xt.get(In(Lt)).emit("remoteStreamIdUpdated",On)}},remoteStreamUpdated:function(yn){if(Lt.getId()===yn.detail.callId){var On={callId:yn.detail.callId,audio:yn.detail.audioIsAvailable&&yn.detail.audioIsActive,audioMuted:yn.detail.audioIsMuted,audioSilent:yn.detail.audioIsSilent,video:yn.detail.videoIsAvailable&&yn.detail.videoIsActive,videoMuted:yn.detail.videoIsMuted,videoSilent:yn.detail.videoIsSilent};Xt.get(In(Lt)).emit("remoteStreamUpdated",On)}},MCURecordingStarted:function(yn){if(Rr.get(In(Lt))&&yn.detail.roomName===Lt.confId){var On=Ut.g.parseRecordingEvent("MCURecordingStarted",yn.detail);On.callId==="COMPOSITE"&&(Lt.recordingStatus=On,Xt.get(In(Lt)).emit("recordingStarted",On))}},MCURecordingStopped:function(yn){if(Rr.get(In(Lt))&&yn.detail.roomName===Lt.confId){var On=Ut.g.parseRecordingEvent("MCURecordingStopped",yn.detail);On.callId==="COMPOSITE"&&(delete Lt.recordingStatus,Xt.get(In(Lt)).emit("recordingStopped",On))}},MCURecordedStreamsAvailable:function(yn){if(Rr.get(In(Lt))&&yn.detail.roomName===Lt.confId){var On=Ut.g.parseRecordingEvent("MCURecordedStreamsAvailable",yn.detail);Xt.get(In(Lt)).emit("recordingAvailable",On)}}};for(var on in nn)Ln.onEvent(on,nn[on]);return Or.set(In(Lt),nn),Lt}return jt=Yt,Qt=[{key:"destroy",value:function(){var Ct=Or.get(this);if(Ct){for(var St in Ct)Ln.removeEventListener(St,Ct[St]);Or.delete(this)}}},{key:"getId",value:function(){return hr.get(this).toString()}},{key:"isRecorded",value:function(){return Rr.get(this)}},{key:"getContact",value:function(){return mr.get(this)}},{key:"getStatus",value:function(){return yr.get(this)}},{key:"setStatus",value:function(Ct){yr.set(this,Ct)}},{key:"getPublishedStreams",value:function(){var Ct,St=[],Lt=an(this.publishedStreams.values());try{for(Lt.s();!(Ct=Lt.n()).done;){var Ht=Ct.value;St.push(Ht)}}catch(Gt){Lt.e(Gt)}finally{Lt.f()}return St}},{key:"getReceivedStreams",value:function(){var Ct,St=[],Lt=an(this.receivedStreams.values());try{for(Lt.s();!(Ct=Lt.n()).done;){var Ht=Ct.value;St.push(Ht)}}catch(Gt){Lt.e(Gt)}finally{Lt.f()}return St}},{key:"hangUp",value:function(){this.getStatus()===et.g.CALL_STATUS_ENDED?_n.error("hangUp() - Call has already ended"):Ln.webRTCClient.hangUp(this.getId())}},{key:"getStats",value:function(){return Ut.g.assignObject({},this.stats)}},{key:"stopPublishedStreams",value:function(){return Ln.webRTCClient.webRTCClient.stopMedia(this.getId())}},{key:"replacePublishedStreams",value:function(Ct,St){var Lt=this,Ht=function(Gt){if(yo.has(Gt))return yo.get(Gt);var en=apiCC.getUserMediaStream(Gt);if(en){var nn="audio";return en.video===!0&&(nn="video"),new so(en.stream,{type:nn,constructor:!0,userMediaStreamId:en.userMediaStreamId})}return null};return new Promise(function(Gt,en){if(Lt.getStatus()!==et.g.CALL_STATUS_ONGOING)return en(new Error("replacePublishedStreams() - Cannot replace stream as call is not ongoing"));if(Ct===null)if(Ut.g.isPropertyTypeof(St,"getStream","function")){var nn={getUserMediaStreamId:function(){return St.getStream().then(function(on){return on.userMediaStreamId}).catch(en)}};Ln.webRTCClient.webRTCClient.addMedia(Lt.getId(),!0,null,nn).then(function(on){var yn=Ht(on.userMediaStreamId);return yn!==null&&Lt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Lt.getId(),newStreamId:yn.data.id,oldStreamId:on.oldMediaStreamId}),Gt(yn)}).catch(function(on){return en(new Error("replacePublishedStreams() - "+on))})}else Ln.webRTCClient.webRTCClient.addMedia(Lt.getId(),!0,null,null).then(function(on){var yn=Ht(on.userMediaStreamId);return yn!==null&&Lt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Lt.getId(),newStreamId:yn.data.id,oldStreamId:on.oldMediaStreamId}),Gt(yn)}).catch(function(on){return en(new Error("replacePublishedStreams() - "+on))});else Ln.webRTCClient.webRTCClient.addMedia(Lt.getId(),!0,Ct.userMediaStreamId).then(function(on){return Lt.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Lt.getId(),newStreamId:Ct.data.id,oldStreamId:on.oldMediaStreamId}),Gt(Ct)}).catch(function(on){return en(new Error("replacePublishedStreams() - "+on))})})}},{key:"getRecordingInfo",value:function(){return Rr.get(this)?this.recordingStatus:null}},{key:"startRecording",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.asyncCallbacks)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",_n));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",_n))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - "+Ht.detail.errorInfo,_n))},Ct.asyncCallbacks.recordingStarted=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var Gt=Ut.g.parseRecordingEvent("MCURecordingStarted",Ht.detail);return St(Gt)}},Ln.onEvent("error",Ct.asyncCallbacks.error),Ln.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),Ln.webRTCClient.startCallRecording(hr.get(Ct))})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.asyncCallbacks)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",_n));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopRecording() - timeout",_n))},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Ht.detail.errorInfo,_n))},Ct.asyncCallbacks.recordingStopped=function(Ht){if(Ct.confId===Ht.detail.roomName&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Ln.removeEventListener("error",Ct.asyncCallbacks.error),Ln.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var Gt=Ut.g.parseRecordingEvent("MCURecordingStopped",Ht.detail);return St(Gt)}},Ln.onEvent("error",Ct.asyncCallbacks.error),Ln.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),Ln.webRTCClient.stopCallRecording(hr.get(Ct))})}},{key:"manageCallEstablishedEvent",value:function(Ct){_n.debug("callEstablished",Ct.detail,this.getId());var St=Ct.detail.callId.toString();this.getId()===St&&(_n.info("callEstablished from "+this.getContact().getUsername(),Ct),this.getStatus()!==et.g.CALL_STATUS_ONGOING&&this.getStatus()!==et.g.CALL_STATUS_ENDED&&(Xt.get(this).emit("accepted"),Xt.get(this).emit("response","accepted"),yr.set(this,et.g.CALL_STATUS_ONGOING)))}},{key:"manageRemoteStreamAddedEvent",value:function(Ct){_n.debug("remoteStreamAdded",Ct.detail,this.getId());var St=Ct.detail.callId.toString();if(this.getId()===St){var Lt=Ct.detail.destCallType==="audio"?"audio":"video",Ht=Ct.detail.callType==="screenSharing",Gt=new so(Ct.detail.stream,{screensharing:Ht,type:Lt,contact:this.getContact(),streamId:Ct.detail.stream.id,callId:Ct.detail.callId,callAudioAvailable:Ct.detail.audioIsAvailable,callAudioActive:Ct.detail.audioIsActive,callAudioMuted:Ct.detail.audioIsMuted,callVideoAvailable:Ct.detail.videoIsAvailable,callVideoActive:Ct.detail.videoIsActive,callVideoMuted:Ct.detail.videoIsMuted,constructor:!0});this.receivedStreams.set(Ct.detail.stream.id,Gt),Xt.get(this).emit("streamAdded",Gt)}}},{key:"manageRemoteStreamRemovedEvent",value:function(Ct){_n.debug("remoteStreamRemoved",Ct.detail,this.getId());var St=Ct.detail.callId.toString();if(this.getId()===St){var Lt=this.receivedStreams.get(Ct.detail.stream.id);this.receivedStreams.delete(Ct.detail.stream.id),Xt.get(this).emit("streamRemoved",Lt)}}},{key:"manageUserMediaSuccessEvent",value:function(Ct){_n.debug("UserMediaSuccess",Ct.detail,this.getId());var St,Lt=null;if(St=Ct.detail.videoIsAvailable===!0?"video":"audio",Ct.detail.callId!==null&&(Lt=Ct.detail.callId.toString()),this.getId()===Lt){_n.info("localStreamAvailable",Ct.detail);var Ht=yo.get(Ct.detail.userMediaStreamId);Ht||(Ht=new so(Ct.detail.stream,{type:St,constructor:!0,userMediaStreamId:Ct.detail.userMediaStreamId,callId:this.getId()})),this.publishedStreams.set(Ut.g.guid(),Ht),Xt.get(this).emit("localStreamAvailable",Ht)}}},{key:"manageCallStatsUpdateEvent",value:function(Ct){if(this.getId()===Ct.detail.callId){for(var St=0,Lt=Object.keys(Ct.detail.stats);St<Lt.length;St++){var Ht=Lt[St];or.has(Ht)&&(this.stats[Ht]=Ct.detail.stats[Ht])}Xt.get(this).emit("statsUpdate",Ut.g.assignObject({},{stats:this.stats}))}}},{key:"manageErrorEvent",value:function(Ct){if(_n.debug("Error",Ct.detail,this.getId()),this.getId()===Ct.detail.callId){var St={errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo};Ct.detail.data&&(St.descriptor=Ct.detail.data),Xt.get(this).emit("error",St)}}},{key:"manageDisconnectionWarningEvent",value:function(Ct){_n.debug("DisconnectionWarning",Ct.detail,this.getId()),this.getId()===Ct.detail.callId&&Xt.get(this).emit("disconnectionWarning",{tries:Ct.detail.tries})}},{key:"manageHangupEvent",value:function(Ct){_n.debug("hangup",Ct.detail,this.getId());var St=Ct.detail.callId.toString(),Lt=this.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&Ct.detail.hangupType==="remote";if(this.getId()===St&&this.getStatus()!==et.g.CALL_STATUS_ENDED){yr.set(this,et.g.CALL_STATUS_ENDED),_n.info("Hangup from "+this.getContact().getUsername(),Ct);var Ht,Gt=an(this.receivedStreams.keys());try{for(Gt.s();!(Ht=Gt.n()).done;){var en=Ht.value,nn=this.receivedStreams.get(en);this.receivedStreams.delete(en),Xt.get(this).emit("streamRemoved",nn)}}catch(on){Gt.e(on)}finally{Gt.f()}Xt.get(this).emit("hangup",{from:Ct.detail.hangupType,reason:Ct.detail.reason}),Lt&&(Xt.get(this).emit("declined",{reason:Ct.detail.reason}),Xt.get(this).emit("response","declined"))}}},{key:"manageRecordAvailableEvent",value:function(Ct){_n.warn("recordedStreamsAvailable",Ct.detail,this.getId()),Xt.get(this).emit("recordAvailable",{mediaURL:Ct.detail.mediaURL})}},{key:"manageUserMediaErrorEvent",value:function(Ct){_n.warn("userMediaError",Ct.detail,this.getId()),Xt.get(this).emit("userMediaError",{callType:Ct.detail.callType,error:Ct.detail.error,onCallEstablishment:Ct.detail.onCallEstablishment,userMediaStreamId:Ct.detail.userMediaStreamId,tryAudioCallActivated:Ct.detail.tryAudioCallActivated})}},{key:"manageDesktopCaptureEvent",value:function(Ct){_n.warn("desktopCapture",Ct.detail,this.getId()),Xt.get(this).emit("desktopCapture",{event:Ct.detail.event})}}],Mt=[{key:"getAvailableEvents",value:function(){return Vn}}],Qt&&gn(jt.prototype,Qt),Mt&&gn(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn);function Jr(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function Sr(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var Nr=ft.Y.get("ConversationCatalog"),wr=null,_r=function(){function Wt(){if(function(Bt,ln){if(!(Bt instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,Wt),wr!==null)throw"Cannot construct singleton CallCatalog";this.callList=new Map,wr=this}var jt,Qt,Mt;return jt=Wt,Mt=[{key:"get",value:function(){return wr===null&&(wr=new Wt),wr}}],(Qt=[{key:"getOrCreateCall",value:function(Bt,ln,dn){var Yt=null;return Bt!=null&&(this.callList.has(Bt.toString())?Yt=this.callList.get(Bt.toString()):(Yt=new Qr(Bt.toString(),ln,dn),this.callList.set(Bt.toString(),Yt))),Yt}},{key:"getCall",value:function(Bt,ln){var dn=null;if(Bt!=null){if(!this.callList.has(Bt.toString()))return null;dn=this.callList.get(Bt.toString())}else if(ln){var Yt,Ct=function(Ht,Gt){var en=typeof Symbol<"u"&&Ht[Symbol.iterator]||Ht["@@iterator"];if(!en){if(Array.isArray(Ht)||(en=function(tr,dr){if(tr){if(typeof tr=="string")return Jr(tr,dr);var fr=Object.prototype.toString.call(tr).slice(8,-1);return fr==="Object"&&tr.constructor&&(fr=tr.constructor.name),fr==="Map"||fr==="Set"?Array.from(tr):fr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fr)?Jr(tr,dr):void 0}}(Ht))||Gt&&Ht&&typeof Ht.length=="number"){en&&(Ht=en);var nn=0,on=function(){};return{s:on,n:function(){return nn>=Ht.length?{done:!0}:{done:!1,value:Ht[nn++]}},e:function(tr){throw tr},f:on}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yn,On=!0,Qn=!1;return{s:function(){en=en.call(Ht)},n:function(){var tr=en.next();return On=tr.done,tr},e:function(tr){Qn=!0,yn=tr},f:function(){try{On||en.return==null||en.return()}finally{if(Qn)throw yn}}}}(this.callList.values());try{for(Ct.s();!(Yt=Ct.n()).done;){var St=Yt.value,Lt=St.getContact();if(Lt&&Lt.getId()===ln.getId()){dn=St;break}}}catch(Ht){Ct.e(Ht)}finally{Ct.f()}}return dn}},{key:"removeCallFromList",value:function(Bt){Nr.log("removeCallFromList : av instance.callList :",wr.callList),wr.callList.has(Bt)&&wr.callList.delete(Bt),Nr.log("removeCallFromList : ap instance.callList :",wr.callList)}},{key:"getCalls",value:function(){return this.callList}}])&&Sr(jt.prototype,Qt),Mt&&Sr(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function Ur(Wt){return Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Ur(Wt)}function Hr(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function na(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Kn(Wt,jt){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Kn(Wt,jt)}function sr(Wt,jt){if(jt&&(Ur(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qn(Wt)}function qn(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function vr(Wt){return vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},vr(Wt)}var Jn=ft.Y.get("ReceivedInvitation"),$r=_r.get(),xr=["expired","statusChange"],Er=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Kn(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=vr(Bt);if(ln){var Lt=vr(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return sr(this,Ct)});function Yt(Ct,St,Lt){var Ht,Gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Hr(this,Yt),Ht=dn.call(this,Ct,St),Jn.info("Create ReceivedCallInvitation with call type "+Lt),Ht.type="call",Ht.callType=Lt,Ht.isRecordedCall=!!Gt.hasOwnProperty("isRecorded")&&Gt.isRecorded,Ht.call=$r.getOrCreateCall(Ht.id,Ht.sender,{isRecorded:Ht.isRecorded()}),Ht.apiRTCManager.onEvent("hangup",function(en){var nn=en.detail.callId.toString();Ht.id.toString()===nn&&Ht.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(Ht.setStatus(et.g.INVITATION_STATUS_EXPIRED),Xt.get(qn(Ht)).emit("expired"))}),Ht}return jt=Yt,Qt=[{key:"getCallType",value:function(){return this.callType}},{key:"isRecorded",value:function(){return this.isRecordedCall}},{key:"accept",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){var en=St.getCallType()==="audio",nn=!0,on=Lt;Lt.hasOwnProperty("audioOnly")&&(en=Lt.audioOnly,delete Lt.audioOnly,on.mediaTypeForIncomingCall!==void 0&&on.mediaTypeForIncomingCall!==null||Lt.audioOnly===!0&&(on.mediaTypeForIncomingCall="AUDIO")),Lt.hasOwnProperty("noStream")&&(on.mediaTypeForIncomingCall="NONE",nn=!1),on.mediaTypeForIncomingCall==="NONE"&&(nn=!1),St.getStatus()===et.g.INVITATION_STATUS_STANDBY?(St.setStatus(et.g.INVITATION_STATUS_ACCEPTED),St.apiRTCManager.sendData(St.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:St.id,answer:"accept"}),St.call.setStatus(et.g.CALL_STATUS_ONGOING),nn&&Ct!==null&&Ct instanceof so&&(Jn.debug("accept() - A stream was preselected; audio only : ",en),on.userMediaStreamId=Ct.userMediaStreamId),St.apiRTCManager.webRTCClient.acceptCall(St.id,on),Ht(St.call)):Gt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this call, invitation state invalid",Jn))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}},{key:"getCall",value:function(){return this.call}}],Mt=[{key:"getAvailableEvents",value:function(){return xr}}],Qt&&na(jt.prototype,Qt),Mt&&na(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(Mn);function Wn(Wt){return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Wn(Wt)}function pr(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Pr(Wt,jt){return Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Pr(Wt,jt)}function Tr(Wt,jt){if(jt&&(Wn(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Kr(Wt){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Kr(Wt)}var jr=ft.Y.get("ReceivedInvitation"),Co=["error","progress","statusChange"],eo=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Pr(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Kr(Bt);if(ln){var Lt=Kr(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Tr(this,Ct)});function Yt(Ct,St,Lt){var Ht;return function(Gt,en){if(!(Gt instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Yt),Ht=dn.call(this,Ct,St),jr.debug("Create ReceivedFileTransferInvitation"),Ht.type="sendFile",Ht.fileInfo=Lt,Ht.apiRTCManager.onEvent("hangup",function(Gt){jr.debug("hangup");var en=Gt.detail.callId.toString();Ht.getId()===en&&(jr.debug("hangup for ReceivedFileTransferInvitation"),Ht.getStatus()===et.g.INVITATION_STATUS_ENDED?jr.debug("invitation ended"):(jr.debug("invitation is cancelled"),Ht.setStatus(et.g.INVITATION_STATUS_CANCELLED)),apiRTC.userAgentInstance.currentSession.invitationsMap.has(Gt.detail.remoteId+"-sendfile-"+en)&&apiRTC.userAgentInstance.currentSession.invitationsMap.delete(Gt.detail.remoteId+"-sendfile-"+en))}),Ht}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return Co}}],(Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY)Lt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this file transfer session, invitation state invalid",jr));else{Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Ht=Ct;Ct.apiRTCManager.onEvent("onFileReceived",function Gt(en){if(en.detail.callId.toString()===Ht.id.toString()){if(jr.debug("typeof(e.detail.data.file) :",Wn(en.detail.data.file)),typeof en.detail.data.file=="string")St({file:en.detail.data.file,name:en.detail.data.name,type:en.detail.data.type});else{var nn=new FileReader;nn.addEventListener("loadend",function(){Ct.setStatus(et.g.INVITATION_STATUS_ENDED),Ct.apiRTCManager.webRTCClient.hangUp(Ht.id.toString());try{jr.info("accept() - file received from "+Ht.sender.getUsername()+" !"),St({file:en.detail.data.file,name:en.detail.data.name,type:en.detail.data.type})}catch(on){jr.error("File Error",on),Lt(Ut.g.createError(et.g.ERROR_OTHER,"accept() - Could not read file received",jr))}}),nn.readAsArrayBuffer(en.detail.data.file)}Ct.apiRTCManager.removeEventListener("onFileReceived",Gt)}}),Ct.apiRTCManager.onEvent("onFileProgress",function(Gt){Gt.detail.callId.toString()===Ht.id.toString()&&(jr.trace("file transfering",Gt.detail),Xt.get(Ht).emit("progress",{uuid:Gt.detail.uuid,fileSize:Gt.detail.fileSize,remainingSize:Gt.detail.remainingSize,percentage:Gt.detail.percentage,sendChunkNb:Gt.detail.sendChunkNb,transferDuration:Gt.detail.transferDuration,lastPacket:Gt.detail.lastPacket}))}),Ct.apiRTCManager.onEvent("receiveDataChannelError",function(Gt){Gt.detail.callId.toString()===Ht.id.toString()&&(jr.warn("receiveDataChannelError",Gt.detail),Xt.get(Ht).emit("error","receiveDataChannelError"))}),Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"})}})}},{key:"getFileInfo",value:function(){return this.fileInfo}},{key:"decline",value:function(Ct){jr.log("decline"),this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&pr(jt.prototype,Qt),Mt&&pr(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(Mn);function ga(Wt){return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},ga(Wt)}function gs(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Qo(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Zs(Wt,jt){return Zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Zs(Wt,jt)}function fp(Wt,jt){if(jt&&(ga(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function ms(Wt){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},ms(Wt)}var mu=ft.Y.get("ReceivedInvitation"),vs=function(Wt){(function(Yt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Ct&&Zs(Yt,Ct)})(dn,Wt);var jt,Qt,Mt,Bt,ln=(Mt=dn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Yt,Ct=ms(Mt);if(Bt){var St=ms(this).constructor;Yt=Reflect.construct(Ct,arguments,St)}else Yt=Ct.apply(this,arguments);return fp(this,Yt)});function dn(Yt,Ct){var St,Lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return gs(this,dn),St=ln.call(this,Yt,Ct),mu.info("Create ReceivedWhiteboardInvitation"),St.type="whiteboard",Lt.cloudConvId&&(St.cloudConvId=Lt.cloudConvId),Lt.webconf===!0&&(St.webconf=!0),St}return jt=dn,(Qt=[{key:"accept",value:function(){var Yt=this;return new Promise(function(Ct,St){if(Yt.getStatus()===et.g.INVITATION_STATUS_STANDBY){Yt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Yt.apiRTCManager.sendData(Yt.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+Yt.id,answer:"accept"}),Yt.apiRTCManager.whiteBoardClient.leaveRoom(),Yt.apiRTCManager.whiteBoardClient.start();var Lt={};Yt.cloudConvId&&(Lt.convId=Yt.cloudConvId),Yt.webconf===!0&&(Lt.webconf=!0),Yt.apiRTCManager.whiteBoardClient.joinRoom(Yt.id,Lt),Ct(Yt.id)}else St(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this whiteboard session, invitation state invalid",mu))})}},{key:"decline",value:function(Yt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+this.id,reason:Yt,answer:"decline"}))}}])&&Qo(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),dn}(Mn);function Cl(Wt){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Cl(Wt)}function hp(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function vu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function yl(Wt,jt){return yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},yl(Wt,jt)}function gp(Wt,jt){if(jt&&(Cl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yr(Wt)}function Yr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Cs(Wt){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Cs(Wt)}var To=ft.Y.get("DataChannel"),Sl=Rn.get(),mp=["response","accepted","declined","error","opened","closed","error","transferProgress","transferComplete","dataReceived","ended"],Cu=new WeakMap,bu=new WeakMap,Zo=new WeakMap,bs=new WeakMap,ys=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&yl(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Cs(Bt);if(ln){var Lt=Cs(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return gp(this,Ct)});function Yt(Ct,St){var Lt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return hp(this,Yt),Lt=dn.call(this,To),To.debug("Create DataChannel with id "+Ct),Cu.set(Yr(Lt),Ct),bu.set(Yr(Lt),St),bs.set(Yr(Lt),et.g.DATACHANNEL_TYPE_RECEIVE),Ht.hasOwnProperty("type")&&(Ht.type===et.g.DATACHANNEL_TYPE_RECEIVE?bs.set(Yr(Lt),et.g.DATACHANNEL_TYPE_RECEIVE):Ht.type===et.g.DATACHANNEL_TYPE_SEND&&bs.set(Yr(Lt),et.g.DATACHANNEL_TYPE_SEND)),Zo.set(Yr(Lt),et.g.DATACHANNEL_STATUS_WAITING),Sl.onEvent("receiveData",function(Gt){Gt.detail.data.info!==void 0&&Gt.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&Gt.detail.data.invitationId.toString()===Lt.getId()&&Lt.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&(To.info("DataChannel answer from "+Lt.getContact().getUsername()+" for "+Lt.getId()),Gt.detail.data.answer==="accept"?Xt.get(Yr(Lt)).emit("accepted"):(Zo.set(Yr(Lt),et.g.DATACHANNEL_STATUS_ENDED),Xt.get(Yr(Lt)).emit("declined")),Xt.get(Yr(Lt)).emit("response"))}).onEvent("callEstablished",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&(To.info("callEstablished from "+Lt.getContact().getUsername(),Gt),Lt.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING&&Lt.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&Xt.get(Yr(Lt)).emit("accepted"))}).onEvent("hangup",function(Gt){var en=Gt.detail.callId.toString(),nn=Lt.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&Gt.detail.hangupType==="remote";Lt.getId()===en&&Lt.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&(Zo.set(Yr(Lt),et.g.DATACHANNEL_STATUS_ENDED),To.info("Hangup from "+Lt.getContact().getUsername(),Gt),Xt.get(Yr(Lt)).emit("ended",{from:Gt.detail.hangupType}),nn&&Xt.get(Yr(Lt)).emit("declined"))}).onEvent("onFileReceived",function(Gt){if(Gt.detail.callId.toString()===Lt.getId()){var en=Gt.detail.data,nn=new FileReader;nn.addEventListener("loadend",function(){try{var on=Ut.g.arrayBuffertoString(nn.result);To.info("dataReceived !"),Xt.get(Yr(Lt)).emit("dataReceived",{uuid:en.uuid,data:on})}catch(yn){To.error("dataReceived Error",yn)}}),nn.readAsArrayBuffer(en.file)}}).onEvent("onFileProgress",function(Gt){if(Gt.detail.callId.toString()===Lt.getId()){var en=Gt.detail;To.trace("file transfering",en);var nn={uuid:en.uuid,fileSize:en.fileSize,remainingSize:en.remainingSize,percentage:en.percentage,sendChunkNb:en.sendChunkNb,transferDuration:en.transferDuration,lastPacket:en.lastPacket};Xt.get(Yr(Lt)).emit("transferProgress",nn),en.transferEnded&&Xt.get(Yr(Lt)).emit("transferComplete",nn)}}).onEvent("receiveDataChannelError",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&Xt.get(Yr(Lt)).emit("error","receiveDataChannelError")}).onEvent("sendDataChannelError",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&Xt.get(Yr(Lt)).emit("error","sendDataChannelError")}).onEvent("receiveDataChannelClose",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&Xt.get(Yr(Lt)).emit("closed")}).onEvent("sendDataChannelClose",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&Xt.get(Yr(Lt)).emit("closed")}).onEvent("receiveDataChannelOpen",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&(Zo.set(Yr(Lt),et.g.DATACHANNEL_STATUS_ONGOING),Xt.get(Yr(Lt)).emit("opened"))}).onEvent("sendDataChannelOpen",function(Gt){var en=Gt.detail.callId.toString();Lt.getId()===en&&Xt.get(Yr(Lt)).emit("opened")}),Lt}return jt=Yt,Qt=[{key:"getId",value:function(){return Cu.get(this).toString()}},{key:"getContact",value:function(){return bu.get(this)}},{key:"getType",value:function(){return bs.get(this)}},{key:"getStatus",value:function(){return Zo.get(this)}},{key:"sendData",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){var en=!1;St.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING?Gt(Ut.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is not ongoing",To)):St.getType()!==et.g.DATACHANNEL_TYPE_SEND?Gt(Ut.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is receiving only",To)):Sl.webRTCClient.sendDataWithCallId(St.getId(),{file:Ct,name:Lt.name,type:Lt.type},function(nn){en||(en=!0,Ht(nn.uuid)),To.trace("sendData() - progress : ",nn);var on={uuid:nn.uuid,fileSize:nn.fileSize,remainingSize:nn.remainingSize,percentage:nn.percentage,sendChunkNb:nn.sendChunkNb,transferDuration:nn.transferDuration,lastPacket:nn.lastPacket};Xt.get(St).emit("transferProgress",on),nn.transferEnded&&Xt.get(St).emit("transferComplete",on)})})}},{key:"close",value:function(){this.getStatus()===et.g.DATACHANNEL_STATUS_ENDED?To.error("close() - DataChannel session has already ended"):Sl.webRTCClient.hangUp(this.getId())}}],Mt=[{key:"getAvailableEvents",value:function(){return mp}}],Qt&&vu(jt.prototype,Qt),Mt&&vu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn);function Tl(Wt){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Tl(Wt)}function yu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Il(Wt,jt){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Il(Wt,jt)}function vp(Wt,jt){if(jt&&(Tl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Su(Wt)}function Su(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ss(Wt){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Ss(Wt)}var Tu=ft.Y.get("ReceivedInvitation"),Cp=["expired","statusChange"],zo=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Il(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Ss(Bt);if(ln){var Lt=Ss(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return vp(this,Ct)});function Yt(Ct,St){var Lt;return function(Ht,Gt){if(!(Ht instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this,Yt),Lt=dn.call(this,Ct,St),Tu.info("Create ReceivedDataChannelInvitation "),Lt.type="dataChannel",Lt.apiRTCManager.onEvent("hangup",function(Ht){var Gt=Ht.detail.callId.toString();Lt.id.toString()===Gt&&Lt.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(Lt.setStatus(et.g.INVITATION_STATUS_EXPIRED),Xt.get(Su(Lt)).emit("expired"))}),Lt}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return Cp}}],(Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Ht=new ys(Ct.id,Ct.sender,{started:!0,type:et.g.DATACHANNEL_TYPE_SEND});Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"}),St(Ht)}else Lt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this datachannel session, invitation state invalid",Tu))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&yu(jt.prototype,Qt),Mt&&yu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(Mn);function Rl(Wt){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Rl(Wt)}function bp(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function El(Wt,jt){return El=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},El(Wt,jt)}function yp(Wt,jt){if(jt&&(Rl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Ts(Wt){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Ts(Wt)}var Ol=ft.Y.get("ReceivedInvitation"),Ho=function(Wt){(function(Yt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Ct&&El(Yt,Ct)})(dn,Wt);var jt,Qt,Mt,Bt,ln=(Mt=dn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Yt,Ct=Ts(Mt);if(Bt){var St=Ts(this).constructor;Yt=Reflect.construct(Ct,arguments,St)}else Yt=Ct.apply(this,arguments);return yp(this,Yt)});function dn(Yt,Ct,St){var Lt;return function(Ht,Gt){if(!(Ht instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this,dn),Lt=ln.call(this,Yt,St),Ol.info("Create ReceivedConversationJoinRequest"),Lt.type="conversationJoinRequest",Lt.conversation=Ct||null,Lt}return jt=dn,(Qt=[{key:"getConversation",value:function(){return this.conversation}},{key:"accept",value:function(){var Yt=this;return new Promise(function(Ct,St){Yt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Yt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Yt.conversation?Yt.conversation.allowEntry(Yt.sender,{invitationId:Yt.id,answer:"accept",ackEnabled:!0}).then(Ct).catch(St):(Yt.apiRTCManager.sendData(Yt.sender.getId(),{roomname:Yt.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Yt.id,answer:"accept",command:"access",value:{access:!0}}),Ct())):St(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept request, invitation state invalid",Ol))})}},{key:"decline",value:function(Yt){var Ct=this;return new Promise(function(St,Lt){Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Ct.setStatus(et.g.INVITATION_STATUS_DECLINED),Ct.conversation?Ct.conversation.denyEntry(Ct.sender,{invitationId:Ct.id,answer:"decline",reason:Yt}).then(St).catch(Lt):(Ct.apiRTCManager.sendData(Ct.sender.getId(),{roomname:Ct.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,reason:Yt,answer:"decline",command:"access",value:{access:!1}}),St())):Lt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"decline() - Cannot decline request, invitation state invalid",Ol))})}}])&&bp(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),dn}(Mn);function _l(Wt){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},_l(Wt)}function Sp(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Al(Wt,jt){return Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Al(Wt,jt)}function Tp(Wt,jt){if(jt&&(_l(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Is(Wt){return Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Is(Wt)}var Iu=ft.Y.get("ReceivedInvitation"),Ml=function(Wt){(function(Yt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Ct&&Al(Yt,Ct)})(dn,Wt);var jt,Qt,Mt,Bt,ln=(Mt=dn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Yt,Ct=Is(Mt);if(Bt){var St=Is(this).constructor;Yt=Reflect.construct(Ct,arguments,St)}else Yt=Ct.apply(this,arguments);return Tp(this,Yt)});function dn(Yt,Ct,St){var Lt;return function(Ht,Gt){if(!(Ht instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this,dn),(Lt=ln.call(this,Yt,Ct)).session=St,Lt.type="pointerSharing",Lt}return jt=dn,(Qt=[{key:"accept",value:function(){var Yt=this;return new Promise(function(Ct,St){Yt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Yt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Yt.session.joinPointerSharingRoom(Yt.id).then(Ct).catch(function(Lt){St(Ut.g.createError(et.g.ERROR_OTHER,"accept() - cannot accept invitation",Iu))})):St(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - cannot accept invitation",Iu))})}},{key:"decline",value:function(Yt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&this.setStatus(et.g.INVITATION_STATUS_DECLINED)}}])&&Sp(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),dn}(Mn);function Ip(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}s(4723);var Lr=ft.Y.get("AicConsoleManager"),Ru=function(){function Wt(){var Mt=this;(function(Bt,ln){if(!(Bt instanceof ln))throw new TypeError("Cannot call a class as a function")})(this,Wt),Lr.info("Create AicConsoleManager"),this.ws=null,this.connectedToapplication=!1,this.domStream=null,this.keyboard_mode=0,this.ports=[4545,5858,37371,41793,42803],this.port_index=0,this.aic_agent_running=0,this.ip="127.0.0.1",this.aic_agent_handshake_done=0,this.controlActivated=!1,this.handshakeTimeoutId=0,this.kd=function(Bt){Mt.key_down(Bt)},this.ku=function(Bt){Mt.key_up(Bt)},this.wfl=function(Bt){Mt.window_focus_lost(Bt)},this.mm=function(Bt){Mt.mouse_move(Bt)},this.dc=function(Bt){Mt.mouse_doubleclick(Bt)},this.md=function(Bt){Mt.mouse_down(Bt)},this.mu=function(Bt){Mt.mouse_up(Bt)},this.mw=function(Bt){Mt.mouse_wheel(Bt)}}var jt,Qt;return jt=Wt,Qt=[{key:"aic_control_onmessage",value:function(Mt){if(Lr.debug("Message to send to remote app :",Mt),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),message:Mt};apiRTC.session.remoteAccessInvitation.send(Bt).then(function(){}).catch(function(ln){Lr.warn("Contact#send CONTACT_REMOTEACCESS_APP_MESSAGE message error:",ln)})}else Lr.error("Error on aic_control_onmessage, remoteAccessInvitation is not initialized")}},{key:"aic_keyboard_keydown",value:function(Mt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+Mt+'","KEY_DOWN,'+Bt+'")')}},{key:"aic_keyboard_keyup",value:function(Mt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+Mt+'","KEY_UP,'+Bt+'")')}},{key:"key_down",value:function(Mt){if(Lr.debug("key_down"),Mt.target===document.body)if(Mt.preventDefault(),Mt.isComposing||Mt.keyCode===229)Lr.debug("Ignoring event "+Mt);else if(this.keyboard_mode===0){var Bt=(Mt.altKey?"MOD_ALT,":"")+(Mt.ctrlKey?"MOD_CONTROL,":"")+(Mt.metaKey?"MOD_META,":"")+(Mt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keydown(Mt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keydown("+Mt.keyCode+")");else Lr.debug("this is not document body, ignoring this event")}},{key:"key_up",value:function(Mt){if(Lr.debug("key_up"),Mt.target===document.body)if(Mt.preventDefault(),Mt.isComposing||Mt.keyCode===229)console.log("Ignoring event "+Mt);else if(this.keyboard_mode===0){var Bt=(Mt.altKey?"MOD_ALT,":"")+(Mt.ctrlKey?"MOD_CONTROL,":"")+(Mt.metaKey?"MOD_META,":"")+(Mt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keyup(Mt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keyup("+Mt.keyCode+")");else Lr.debug("this is not document body, ignoring this event")}},{key:"window_focus_lost",value:function(Mt){Lr.debug("window_focus_lost"),this.aic_keyboard_keyup("Shift","MOD_ALT,MOD_CONTROL,MOD_META,MOD_SHIFT")}},{key:"mouse_doubleclick",value:function(Mt){this.mouse_move(Mt),this.aic_control_onmessage("aic_mouse_doubleclick("+Mt.which+")")}},{key:"mouse_down",value:function(Mt){this.mouse_move(Mt),this.aic_control_onmessage("aic_mouse_down("+Mt.which+")")}},{key:"mouse_up",value:function(Mt){this.mouse_move(Mt),this.aic_control_onmessage("aic_mouse_up("+Mt.which+")")}},{key:"mouse_wheel",value:function(Mt){Mt.preventDefault(),this.aic_control_onmessage("aic_mouse_scroll("+Mt.deltaX+","+-1*Mt.deltaY+")")}},{key:"mouse_move",value:function(Mt){var Bt=window.screen.width,ln=window.screen.height;apiRTC.session.remoteAccessInvitation!==null&&(Bt=apiRTC.session.remoteAccessInvitation.screenWidth,ln=apiRTC.session.remoteAccessInvitation.screenHeight);var dn=getComputedStyle(Mt.target),Yt=parseInt(dn.getPropertyValue("width"),10),Ct=parseInt(dn.getPropertyValue("height"),10),St=0,Lt=0,Ht=!1;Yt/parseInt(Mt.target.videoWidth,10)<=Ct/parseInt(Mt.target.videoHeight,10)&&(Ht=!0),Ht===!0?(Lr.debug("Keeping width"),Lt=Yt*Mt.target.videoHeight/Mt.target.videoWidth,St=Yt):(Lr.debug("Keeping height"),St=Ct*Mt.target.videoWidth/Mt.target.videoHeight,Lt=Ct);var Gt=Mt.target.getBoundingClientRect(),en=Mt.clientX-Gt.left-(Yt-St)/2,nn=Mt.clientY-Gt.top-(Ct-Lt)/2,on=Math.floor(en/St*Bt),yn=Math.floor(nn/Lt*ln);this.aic_control_onmessage("aic_mouse_move("+on+","+yn+")")}},{key:"searchDOMElement",value:function(Mt){var Bt=this;return new Promise(function(ln,dn){if(Bt.domStream=document.getElementById(Mt),Bt.domStream)ln();else{var Yt="Dom element not found in searchDOMElement";Lr.debug(Yt),dn(new Error(Yt))}})}},{key:"aic_control_start",value:function(){var Mt=this;return new Promise(function(Bt,ln){Lr.debug("aic_control_start"),window.oncontextmenu=function(){return!1};var dn=apiRTC.session.remoteAccessInvitation.screenSharingStreamDOMElementId;Lr.debug("domSearchFilter :",dn),Mt.searchDOMElement(dn).then(function(){if(Mt.domStream)Lr.debug("Adding mouse and keyboard events listeners"),document.addEventListener("keydown",Mt.kd,{passive:!1}),document.addEventListener("keyup",Mt.ku,{passive:!1}),document.addEventListener("blur",Mt.wfl,{passive:!1}),Mt.domStream.addEventListener("mousemove",Mt.mm,!0),Mt.domStream.addEventListener("mousedown",Mt.md,!0),Mt.domStream.addEventListener("mouseup",Mt.mu,!0),Mt.domStream.addEventListener("wheel",Mt.mw,{passive:!1}),Mt.controlActivated=!0,Bt();else{var Yt="Dom element not found";Lr.debug(Yt),ln(new Error(Yt))}}).catch(function(Yt){ln(Yt)})})}},{key:"aic_control_stop",value:function(){var Mt=this;return Lr.debug("aic_control_stop"),new Promise(function(Bt,ln){if(window.oncontextmenu=function(){return!0},Mt.domStream)Lr.debug("Removing mouse and keyboard events listeners"),document.removeEventListener("keydown",Mt.kd,{passive:!1}),document.removeEventListener("keyup",Mt.ku,{passive:!1}),document.removeEventListener("blur",Mt.wfl,{passive:!1}),Mt.domStream.removeEventListener("mousemove",Mt.mm,!0),Mt.domStream.removeEventListener("dblclick",Mt.dc,!0),Mt.domStream.removeEventListener("mousedown",Mt.md,!0),Mt.domStream.removeEventListener("mouseup",Mt.mu,!0),Mt.domStream.removeEventListener("wheel",Mt.mw,{passive:!1}),Mt.controlActivated=!1,Bt();else{var dn="Dom element not found";Lr.debug(dn),ln(new Error(dn))}})}},{key:"aic_agent_send_message",value:function(Mt){this.ws!==void 0?this.ws.readyState===1?this.ws.send(Mt):Lr.info("aic_agent_send_message : ws in not in readyState"):Lr.info("aic_agent_send_message : ws in not defined")}},{key:"ws_onopen",value:function(){var Mt=this;Lr.debug("ws_onopen : Connected"),this.aic_agent_handshake_done=0,this.aic_agent_send_message("aic_agent_start()"),this.handshakeTimeoutId=setTimeout(function(){Lr.error("Timeout reached on handshake"),Mt.ws.close(1e3,"HANDSHAKE_NOK")},1e3)}},{key:"ws_onmessage",value:function(Mt){var Bt=Mt.data;Lr.debug("received_msg :",Bt);var ln=Bt.match(/^aic_notify\(\"([^\"]*)\",\"([^\"]*)\"\)$/);ln&&ln[1]==="aic_agent_version"&&(Lr.debug("aic_agent_version is :",ln[2]),clearTimeout(this.handshakeTimeoutId),this.aic_agent_handshake_done=1,this.connectedToapplication=!0,this.send_application_status("APP_CONNECTION_OK"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ok"))}},{key:"ws_onclose",value:function(Mt){var Bt=this;Lr.debug("ws_onclose : Closed - event :",Mt),this.connectedToapplication===!0?(apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.stop(!0),this.connectedToapplication=!1):this.ws_reconnect()===2&&setTimeout(function(){Bt.ws_reconnect()},3e3)}},{key:"ws_onerror",value:function(Mt){Lr.debug("ws_onerror : "+Mt)}},{key:"ws_connect",value:function(Mt){var Bt=this;Lr.debug("ws_connect : Connecting ");var ln="ws://"+this.ip+":"+Mt+"/ws";Lr.debug("... on url :",ln),this.ws=new WebSocket(ln,"ws-server-aic"),this.ws.addEventListener("open",function(dn){Bt.ws_onopen(dn)}),this.ws.addEventListener("message",function(dn){Bt.ws_onmessage(dn)}),this.ws.addEventListener("close",function(dn){Bt.ws_onclose(dn)}),this.ws.addEventListener("error",function(dn){Bt.ws_onerror(dn)})}},{key:"ws_reconnect",value:function(){return this.aic_agent_running===0?0:this.port_index>=this.ports.length?(this.port_index=0,2):(this.ws_connect(this.ports[this.port_index]),this.port_index++,0)}},{key:"send_application_status",value:function(Mt){if(Lr.debug("send_application_status"),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),status:Mt};apiRTC.session.remoteAccessInvitation.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,Bt).then(function(){}).catch(function(ln){Lr.warn("Contact#send send_application_status message error:",ln)})}else Lr.warn("send_application_status but not linked to a remoteAccessInvitation")}},{key:"aic_agent_start",value:function(){Lr.debug("aic_agent_start"),"WebSocket"in window?(this.aic_agent_running=1,this.send_application_status("APP_CONNECTION_ONGOING"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ongoing"),this.ws_reconnect(this.ip)):Lr.error("WebSocket NOT supported by your Browser!")}},{key:"aic_agent_stop",value:function(){Lr.debug("aic_agent_stop"),this.aic_agent_running=0,this.ws.close()}},{key:"aic_agent_exit",value:function(){this.aic_agent_send_message("aic_agent_exit()")}}],Qt&&Ip(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function xl(Wt){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},xl(Wt)}function Rp(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Eu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Pl(Wt,jt){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Pl(Wt,jt)}function Ep(Wt,jt){if(jt&&(xl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Rs(Wt){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Rs(Wt)}var _a=ft.Y.get("ReceivedInvitation"),wp=["stop","messageDelivered","messageNotDelivered","application_connection_ongoing","application_connection_ok"],kp=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Pl(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Rs(Bt);if(ln){var Lt=Rs(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Ep(this,Ct)});function Yt(Ct,St,Lt){var Ht,Gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Rp(this,Yt),_a.debug("Create ReceivedRemoteAccessInvitation"),(Ht=dn.call(this,Ct,St.invitationId)).type="remoteAccess",Ht.conversation=Lt,Gt.cloudConvId&&(Ht.cloudConvId=Gt.cloudConvId),Gt.webconf===!0&&(Ht.webconf=!0),Ht.aicConsoleManager=null,Ht.screenSharingStreamId=null,Ht.screenSharingStream=null,Ht.apiRTCManager.onEvent("receiveData",function(en){_a.debug("ReceivedRemoteAccessInvitation receiveData "),en.detail.data.event!==void 0&&en.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&en.detail.data.invitationId.toString()===Ht.id.toString()?(_a.debug("Received stop for "+Ht.id,en.detail.data),Ht.stop(!1,en.detail.data.reason)):en.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_MESSAGE&&en.detail.data.invitationId.toString()===Ht.id.toString()&&(_a.debug("Received CONTACT_REMOTEACCESS_APP_MESSAGE for "+Ht.id,en.detail.data),Ht.aicConsoleManager!==null?Ht.aicConsoleManager.aic_agent_send_message(en.detail.data.message):_a.debug("aicConsoleManager is not initialized"))}),Ht.conversation.on("contactLeft",function(en){en.id===Ht.sender.id&&(_a.debug("Remote user has left, stopping remoteAccess"),Ht.stop(!1,{code:"AGENT_LEFT"}))}),Ht}return jt=Yt,Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(St,Lt){if(_a.debug("ReceivedRemoteAccessInvitation accept"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED);var Ht={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"accept"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Ht).then(function(){St(Ct.id)}).catch(function(Gt){Lt(Gt)})}else Lt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept remote access, invitation state invalid",_a))})}},{key:"decline",value:function(){var Ct=this;return new Promise(function(St,Lt){if(_a.debug("ReceivedRemoteAccessInvitation decline"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_DECLINED);var Ht={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"decline"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Ht).then(function(){St(Ct.id)}).catch(function(Gt){Lt(Gt)}),Ct.stop(!0,{code:"USER_DECLINE"})}else Lt(Ut.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot decline remote access, invitation state invalid",_a))})}},{key:"sendMessageToSender",value:function(Ct,St){var Lt=this;return _a.debug("sendMessageToSender :",St),new Promise(function(Ht,Gt){Lt.apiRTCManager.sendData(Lt.sender.getId(),St).then(function(){Xt.get(Lt).emit("messageDelivered",{event:Ct,contact:Lt.sender,messageData:St}),Ht()}).catch(function(en){var nn=Ut.g.createError(en,"Invitation not delivered",_a);Xt.get(Lt).emit("messageNotDelivered",{error:nn,contact:Lt.sender,event:Ct,messageData:St}),Gt(nn)})})}},{key:"fireEvent",value:function(Ct,St){Xt.get(this).emit(Ct,St)}},{key:"startScreenSharingAndPublish",value:function(){var Ct=this;return _a.debug("startScreenSharingAndPublish"),new Promise(function(St,Lt){apiRTC.Stream.createDisplayMediaStream({video:{cursor:"always",displaySurface:"monitor"},surfaceSwitching:"exclude",selfBrowserSurface:"exclude",systemAudio:"exclude"}).then(function(Ht){Ht.screensharingRemoteAccessStream=!0;var Gt={},en={};en.invitationId=Ct.id,en.screenWidth=window.screen.width,en.screenHeight=window.screen.height,Gt.context={remoteAccessCtx:en},Ct.screenSharingStreamId=Ht.getId(),Ct.screenSharingStream=Ht,_a.debug("setting screenSharingStreamId :",Ct.screenSharingStreamId),Ct.conversation.publish(Ht,Gt).then(function(nn){Ct.aicConsoleManager=new Ru,Ct.aicConsoleManager.aic_agent_start(),St(nn)}).catch(function(nn){var on={code:"DISPLAY_MEDIA_PUBLISH_ERROR",error:nn};Ct.stop(!0,on),Lt(nn)})}).catch(function(Ht){_a.error("error on createDisplayMediaStream :",Ht);var Gt={code:"CREATE_DISPLAY_MEDIA_ERROR",error:Ht};Ct.stop(!0,Gt),Lt(Ht)})})}},{key:"downloadApplication",value:function(){return _a.debug("downloadApplication"),new Promise(function(Ct,St){fetch("https://dev.cdn.apizee.com/apiRTC/app/remoteAccess.exe").then(function(Lt){return Lt.blob()}).then(function(Lt){var Ht=window.URL.createObjectURL(Lt),Gt=document.createElement("a");Gt.href=Ht,Gt.download="remoteAccess.exe",document.body.appendChild(Gt),Gt.click(),Gt.remove(),Ct()}).catch(function(Lt){_a.error("Something went wrong during remote access application loading.. toString :",Lt.toString()),St(new Error("error on application fetch :"+Lt.toString()))})})}},{key:"stop",value:function(){var Ct=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_a.debug("stop with sendMessage :",Ct),St==null&&(St={code:"USER_STOP"});var Lt=this.conversation.conversationPublishedStreams.get(this.screenSharingStreamId);if(Lt!=null&&(_a.debug("streamInfo :",Lt),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Lt.callId)),this.screenSharingStream!==null&&(this.screenSharingStream.release(),this.screenSharingStream=null),this.aicConsoleManager!==null&&(this.aicConsoleManager.aic_agent_exit(),this.aicConsoleManager.aic_agent_stop(),this.aicConsoleManager=null),apiRTC.session.remoteAccessInvitation=null,Ct){var Ht={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:St};this.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,Ht).then(function(){}).catch(function(Gt){_a.warn("Contact#send stop message error:",Gt)})}Xt.get(this).emit("stop",St)}}],Mt=[{key:"getAvailableEvents",value:function(){return wp}}],Qt&&Eu(jt.prototype,Qt),Mt&&Eu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(Mn),Op=s(8364),Go=s.n(Op);function Es(Wt){return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Es(Wt)}function _p(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function wu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}s(9601),s(5306);var Ap=ft.Y.get("UserData"),Mp=Rn.get(),Io=function(){function Wt(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var ln in _p(this,Wt),Bt)Bt.hasOwnProperty(ln)&&(this[ln]=Bt[ln])}var jt,Qt,Mt;return jt=Wt,Mt=[{key:"equals",value:function(Bt,ln){if(!(Bt instanceof Object&&ln instanceof Object))return!1;for(var dn in Bt)if(ln[dn]===void 0||Es(ln[dn])==="object"&&!this.equals(ln[dn],Bt[dn])||ln[dn]!==Bt[dn])return!1;for(var Yt in ln)if(Bt[Yt]===void 0||Es(Bt[Yt])==="object"&&!this.equals(Bt[Yt],ln[Yt])||Bt[Yt]!==ln[Yt])return!1;return!0}}],(Qt=[{key:"get",value:function(Bt){return this.hasOwnProperty(Bt)&&this[Bt]!==void 0&&this[Bt]!=="null"&&this[Bt]!==null?this[Bt]:null}},{key:"setToSession",value:function(){try{var Bt={};for(var ln in this)this.hasOwnProperty(ln)&&typeof this[ln]!="function"&&(Bt[ln]=this[ln]);Mp.apiRTCSession.setUserData(Bt)}catch{Ap.error("setUserData() - could not set userData")}}},{key:"setProp",value:function(Bt,ln){return this[Bt]=ln,this}},{key:"setProps",value:function(Bt){for(var ln in Bt)Bt.hasOwnProperty(ln)&&(this[ln]=Bt[ln]);return this}}])&&wu(jt.prototype,Qt),Mt&&wu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function Dl(Wt){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Dl(Wt)}function xp(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function ku(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Nl(Wt,jt){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Nl(Wt,jt)}function Pp(Wt,jt){if(jt&&(Dl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ws(Wt)}function ws(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ks(Wt){return ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},ks(Wt)}var _o=ft.Y.get("SentInvitation"),Dp=["response","receive","statusChange"],Do=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Nl(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=ks(Bt);if(ln){var Lt=ks(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Pp(this,Ct)});function Yt(Ct,St){var Lt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return xp(this,Yt),(Lt=dn.call(this)).conversation=St,_o.info("Create SentInvitation"),Lt.invitationType="sent",Lt.contact=Ct,Lt.id=Ut.g.guid(),Lt.sendTime=Date.now(),Lt.expirationTime=null,Lt.expirationTimeout=null,Ht.hasOwnProperty("expirationTime")&&(Lt.expirationTime=Ht.expirationTime,Lt.expirationTimeout=setTimeout(function(){Lt.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(_o.info("Conversation invitation expired"),Lt.setStatus(et.g.INVITATION_STATUS_EXPIRED),Xt.get(ws(Lt)).emit("response",Lt.getStatus()))},Ht.expirationTime)),Ht.hasOwnProperty("receiveNotifier")&&Ht.receiveNotifier.on("receive",function(){Xt.get(ws(Lt)).emit("receive")}),Lt.apiRTCManager.onEvent("receiveData",function(Gt){_o.debug("SentInvitation receiveData "),Gt.detail.data.event!==void 0&&(Gt.detail.data.event!==et.g.INVITATION_ANSWER_IDENTIFIER&&Gt.detail.data.event!==et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER||Gt.detail.data.invitationId.toString()!==Lt.id.toString()||Lt.getStatus()!==et.g.INVITATION_STATUS_STANDBY||(_o.debug("Received invitation answer for "+Lt.id,Gt.detail.data),Lt.expirationTimeout!==null&&clearTimeout(Lt.expirationTimeout),Gt.detail.data.answer==="accept"?Lt.setStatus(et.g.INVITATION_STATUS_ACCEPTED):Lt.setStatus(et.g.INVITATION_STATUS_DECLINED),Xt.get(ws(Lt)).emit("response",Lt.getStatus())))}),Lt.apiRTCManager.onEvent("hangup",function(Gt){_o.debug("hangup");var en=Gt.detail.callId.toString();Lt.getId()===en&&(_o.debug("hangup for sentInvitation"),Lt.setStatus(et.g.INVITATION_STATUS_ENDED))}),Lt}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return Dp}}],(Qt=[{key:"getId",value:function(){return this.id}},{key:"onResponse",value:function(Ct){this.on("response",Ct)}},{key:"cancel",value:function(){_o.info("cancel"),this.type==="sendFile"?(_o.info("cancel sendfile"),this.apiRTCManager.webRTCClient.hangUp(this.id)):_o.warn("cancel is not managed for invitation with type :",this.type)}},{key:"send",value:function(Ct){var St=this;return _o.debug("SentInvitation#send"),new Promise(function(Lt,Ht){St.apiRTCManager.sendData(St.contact.getId(),Ct).then(function(){return Lt()}).catch(function(Gt){var en=Ut.g.createError(Gt,"Invitation not delivered",_o);return Ht(en)})})}}])&&ku(jt.prototype,Qt),Mt&&ku(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(rr);function Ll(Wt){return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Ll(Wt)}function Np(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Ou(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Ul(Wt,jt){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Ul(Wt,jt)}function Lp(Wt,jt){if(jt&&(Ll(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(Wt)}function Os(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function _s(Wt){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},_s(Wt)}var go=ft.Y.get("SentRemoteAccessInvitation"),Up=["response","receive","remoteAccessStreamAdded","stop","application_connection_ongoing","application_connection_ok"],jp=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Ul(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=_s(Bt);if(ln){var Lt=_s(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Lp(this,Ct)});function Yt(Ct,St){var Lt,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Np(this,Yt),Lt=dn.call(this,Ct,St,Ht),go.debug("Create sentRemoteAccessInvitation"),Lt.type="remoteAccess",Lt.screenSharingStreamId=null,Lt.screenSharingStream=null,Lt.aicConsoleManager=null,Lt.screenSharingStreamDOMElementId=null,Lt.apiRTCManager.onEvent("receiveData",function(Gt){go.debug("SentRemoteAccessInvitation receiveData "),Gt.detail.data.event!==void 0&&(Gt.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&Gt.detail.data.invitationId.toString()===Lt.id.toString()?(go.debug("SentRemoteAccessInvitation Received stop for "+Lt.id,Gt.detail.data),Lt.stop(!1,Gt.detail.data.reason)):Gt.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE&&Gt.detail.data.invitationId.toString()===Lt.id.toString()&&(go.debug("CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE : "+Lt.id,Gt.detail.data.status),Gt.detail.data.status==="APP_CONNECTION_ONGOING"?(Xt.get(Os(Lt)).emit("application_connection_ongoing"),Lt.aicConsoleManager=new Ru,Lt.aicConsoleManager.controlActivated===!0&&Lt.aicConsoleManager.aic_control_stop().then(function(){Xt.get(Os(Lt)).emit("controlStop")}).catch(function(en){go.debug("aic_control_stop error:",en)})):Gt.detail.data.status==="APP_CONNECTION_OK"&&Xt.get(Os(Lt)).emit("application_connection_ok")))}),Lt.conversation.on("contactLeft",function(Gt){Gt.id===Lt.contact.id&&(go.debug("Remote user has left, stopping remoteAccess"),Lt.stop(!1,{code:"USER_LEFT"}))}),Lt}return jt=Yt,Qt=[{key:"setRemoteAccessStream",value:function(Ct){go.debug("setRemoteAccessStream"),this.screenSharingStream=Ct,Xt.get(this).emit("remoteAccessStreamAdded",this.screenSharingStream)}},{key:"setScreenSharingStreamDOMElementId",value:function(Ct){var St=this;this.screenSharingStreamDOMElementId=Ct,this.aicConsoleManager!==null?this.aicConsoleManager.aic_control_start().then(function(){Xt.get(St).emit("controlStart")}).catch(function(Lt){go.warn("aic_control_start error:",Lt)}):go.debug("aicConsoleManager is not activated")}},{key:"toggleMouseAndKeyboardAccess",value:function(){var Ct=this;return go.debug("toggleMouseAndKeyboardAccess"),new Promise(function(St,Lt){if(Ct.aicConsoleManager!==null)Ct.aicConsoleManager.controlActivated===!0?Ct.aicConsoleManager.aic_control_stop().then(function(){Xt.get(Ct).emit("controlStop"),St()}).catch(function(Gt){Lt(Gt)}):Ct.aicConsoleManager.aic_control_start().then(function(){Xt.get(Ct).emit("controlStart"),St()}).catch(function(Gt){Lt(Gt)});else{var Ht="aicConsoleManager is not activated";go.debug(Ht),Lt(new Error(Ht))}})}},{key:"getMouseAndKeyboardAccessStatus",value:function(){return this.aicConsoleManager.controlActivated}},{key:"stop",value:function(){var Ct=this,St=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(go.debug("stop"),Lt==null&&(Lt={code:"AGENT_STOP"}),this.aicConsoleManager!==null&&(this.aicConsoleManager.controlActivated===!0&&this.aicConsoleManager.aic_control_stop().then(function(){Xt.get(Ct).emit("controlStop")}).catch(function(Gt){go.warn("aic_control_stop error:",Gt)}),this.aicConsoleManager=null),St){var Ht={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:Lt};this.send(Ht).then(function(){}).catch(function(Gt){go.warn("Contact#send stop message error:",Gt)})}apiRTC.session.remoteAccessInvitation!==null&&(Xt.get(this).emit("stop",Lt),apiRTC.session.remoteAccessInvitation=null)}}],Mt=[{key:"getAvailableEvents",value:function(){return Up}}],Qt&&Ou(jt.prototype,Qt),Mt&&Ou(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(Do);function $l(Wt){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},$l(Wt)}function _u(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return Au(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?Au(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function Au(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function $p(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Mu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Fl(Wt,jt){return Fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Fl(Wt,jt)}function Fp(Wt,jt){if(jt&&($l(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qr(Wt)}function qr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function As(Wt){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},As(Wt)}var ar=ft.Y.get("Contact"),Vr=Rn.get(),es=new(Go()),Wl=_r.get(),Wp=["message","conversationInvitation","data","joinGroup","leaveGroup","whiteboardInvitation","fileSentSuccessfully","fileTransferInvitation","fileTransferProgress","dataChannelInvitation","incomingCall","newMediaAvailable","customEvent","fileTransferError","incomingScreenSharingCall","incomingScreenSharingCallInvitation"],Bl=new WeakMap,xu=new WeakMap,Vl=new Map,No=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Fl(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=As(Bt);if(ln){var Lt=As(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Fp(this,Ct)});function Yt(Ct){var St,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $p(this,Yt),St=dn.call(this,ar),ar.debug("Create Contact with id "+Ct),ar.debug("Create Contact with userData :",Lt),xu.set(qr(St),Ct.toString()),St.groups=[],St.previousMessages=[],St.userData=new Io(Lt),St.enterprise=null,St.streams=new Map,St.profile=null,St.fileTransfers=[],St.promises=[],Bl.set(qr(St),[]),Vr.onEvent("roomInvitation",function(Ht){if(Ht.detail.senderId!==null&&Ht.detail.senderId!==void 0&&Ht.detail.roomType==="whiteBoard"&&Ht.detail.senderId.toString()===St.getId()){ar.info("Received whiteboard invitation from "+St.getUsername());var Gt={};Ht.detail.cloudConvId&&(Gt.cloudConvId=Ht.detail.cloudConvId),Ht.detail.webconf===!0&&(Gt.webconf=!0),Xt.get(qr(St)).emit("whiteboardInvitation",new vs(qr(St),Ht.detail.roomId,Gt))}}).onEvent("receiveIMMessage",function(Ht){Ht.detail.senderId.toString()===St.getId()&&(Xt.get(qr(St)).emit("message",{content:Ht.detail.message,uuid:Ht.detail.UUCSeq,time:Ht.detail.time}),St.addMessageToHistory(Ht.detail.message,Math.round(Ht.detail.time.getTime()/1e3),Ht.detail.UUCSeq,!0))}).onEvent("receiveData",function(Ht){if(Ht.detail.senderId.toString()===St.getId()){ar.debug("Received data e.detail.data : ",Ht.detail.data);var Gt=Ht.detail.data,en=null,nn=po.get();if(Gt.roomname!==void 0&&(en=nn.isConference(Gt.roomname)?nn.getOrCreateConference(nn.getNameFromTechnicalName(Gt.roomname)):nn.getOrCreateConversation(nn.getNameFromTechnicalName(Gt.roomname))),Gt.apiRTCRequest===!0&&St.manageApiRTCRequest(Ht.detail,en),Gt.event!==void 0)switch(Gt.event){case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:case et.g.INVITATION_ANSWER_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:ar.trace("Received data from "+St.getUsername(),Gt.content),Xt.get(qr(St)).emit("data",Gt.content);break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(en!==null){ar.debug("Received conversation invitation from "+St.getId());var on={};Gt.hasOwnProperty("password")&&(on.password=Gt.password),Xt.get(qr(St)).emit("conversationInvitation",new Vt(qr(St),Gt,en,on))}break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:ar.debug("Received file info from "+St.getUsername(),Gt.fileInfo);var yn=Gt.callId.toString();if(Ut.g._private.dataCallsFileInfo.set(yn,Gt.fileInfo),Ut.g._private.dataCallsOnHold.has(yn)){var On=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(St.getId()+"-sendfile-"+yn)?(On=apiRTC.userAgentInstance.currentSession.invitationsMap.get(St.getId()+"-sendfile-"+yn),ar.debug("invitation already exist :",On)):(On=new eo(qr(St),yn,Gt.fileInfo),apiRTC.userAgentInstance.currentSession.invitationsMap.set(St.getId()+"-sendfile-"+yn,On)),Xt.get(qr(St)).emit("fileTransferInvitation",On)}break;case et.g.CONTACT_DATACHANNEL_INVITATION:ar.debug("Received datachannel invitation from "+St.getUsername()),Ut.g._private.dataChannelInvitations.set(Gt.callId.toString(),!0),Ut.g._private.dataCallsOnHold.has(Gt.callId.toString())&&Xt.get(qr(St)).emit("dataChannelInvitation",new zo(qr(St),Gt.callId.toString()));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:ar.debug("New media available from "+St.getUsername(),Gt.fileinfo),Xt.get(qr(St)).emit("newMediaAvailable",{media:Gt.media});break;case et.g.CONTACT_EVENTCENTER_DATA_REQUEST:ar.debug("New request for event center data from "+St.getUsername());var Qn=apiRTC.eventCenter.getStoredData();if(Qn===void 0)return void ar.error("Can't send event center stored data, it's undefined");ar.debug("Sending requested event center data"),St.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_ANSWER,{data:Qn});break;case et.g.CONTACT_EVENTCENTER_DATA_ANSWER:if(ar.debug("New event center data from "+St.getUsername()),Gt.data===void 0)return void ar.error("Can't handle remote event center data, it's undefined");apiRTC.eventCenter.handleDataAnswer(Gt.data);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER:ar.debug("New getAudioFlowStatus from "+Gt.requesterId+" on stream "+Gt.streamId);var tr=St.getContact(Gt.requesterId),dr=St.getLocalStreamPublished();if(dr===null)return St.sendToContactRemoteStreamError("No stream found on remote",tr,Gt);tr.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout,audioFlowStatus:dr.getAudioFlowStatus()});break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER:ar.debug("New getVideoFlowStatus from "+Gt.requesterId+" on stream "+Gt.streamId);var fr=St.getContact(Gt.requesterId),Ar=St.getLocalStreamPublished();if(Ar===null)return St.sendToContactRemoteStreamError("No stream found on remote",fr,Gt);fr.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout,videoFlowStatus:Ar.getVideoFlowStatus()});break;case et.g.CONTACT_GET_SETTINGS_IDENTIFIER:ar.debug("CONTACT_GET_SETTINGS_IDENTIFIER");var Xr,_i=St.getContact(Gt.requesterId);if((Xr=Gt.mediaStreamId!==void 0?St.getLocalStreamWithMediaStreamId(Gt.mediaStreamId):St.getLocalStreamWithCallId(Gt.streamId))===null)return St.sendToContactRemoteStreamError("No stream found on remote",_i,Gt);Xr.getSettings().then(function(lo){_i.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout,settings:lo})}).catch(function(lo){St.sendToContactRemoteStreamError(lo.message,_i,Gt)});break;case et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER:ar.debug("CONTACT_GET_CAPABILITIES_IDENTIFIER");var Vo,lr=St.getContact(Gt.requesterId);if((Vo=Gt.mediaStreamId!==void 0?St.getLocalStreamWithMediaStreamId(Gt.mediaStreamId):St.getLocalStreamWithCallId(Gt.streamId))===null)return St.sendToContactRemoteStreamError("No stream found on remote",lr,Gt);Vo.getCapabilities().then(function(lo){lr.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout,capabilities:lo})}).catch(function(lo){St.sendToContactRemoteStreamError(lo.message,lr,Gt)});break;case et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER:ar.debug("New getConstraints from "+Gt.requesterId);var ir=St.getContact(Gt.requesterId),Ir=St.getLocalStreamPublished();if(Ir===null)return St.sendToContactRemoteStreamError("No stream found on remote",ir,Gt);Ir.getConstraints().then(function(lo){ir.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout,constraints:lo})}).catch(function(lo){St.sendToContactRemoteStreamError(lo.message,ir,Gt)});break;case et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER:var kr;ar.debug("CONTACT_APPLY_CONSTRAINTS_IDENTIFIER"),kr=Gt.mediaStreamId!==void 0?St.getLocalStreamWithMediaStreamId(Gt.mediaStreamId):St.getLocalStreamWithCallId(Gt.streamId);var br=St.getContact(Gt.requesterId);if(kr===null)return St.sendToContactRemoteStreamError("No stream found on remote",br,Gt);kr.applyConstraints(Gt.constraints).then(function(){br.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER,{callId:Gt.callId,streamId:Gt.streamId,timeout:Gt.timeout}),kr.emitConstraintsChanged(Gt.constraints)}).catch(function(lo){St.sendToContactRemoteStreamError(lo.message,br,Gt)});break;case et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER:var $a;ar.debug("CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER from :"+Gt.requesterId),($a=apiRTC.userAgentInstance.getStreamWithMediaStreamId(Gt.mediaStreamId))!=="NOT_FOUND"&&$a.emitConstraintsChanged(Gt.constraints);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER:ar.debug("getRemoteAudioFlowStatus result :",Gt);var to=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);to===null?ar.error("Can't find the local stream to resolve the request.."):to.resolvePendingPromise(Gt.timeout,Gt.audioFlowStatus);break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER:ar.debug("getRemoteVideoFlowStatus result :",Gt);var vo=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);vo===null?ar.error("Can't find the local stream to resolve the request.."):vo.resolvePendingPromise(Gt.timeout,Gt.videoFlowStatus);break;case et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER:ar.debug("remote getSettings result :",Gt);var Oo=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);Oo===null?ar.error("Can't find the local stream to resolve the request.."):Oo.resolvePendingPromise(Gt.timeout,Gt.settings);break;case et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER:ar.debug("remote getCapabilities result :",Gt);var Wr=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);Wr===null?ar.error("Can't find the local stream to resolve the request.."):Wr.resolvePendingPromise(Gt.timeout,Gt.capabilities);break;case et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER:ar.debug("remote getConstraints result :",Gt);var fo=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);fo===null?ar.error("Can't find the local stream to resolve the request.."):fo.resolvePendingPromise(Gt.timeout,Gt.constraints);break;case et.g.CONTACT_GET_REMOTE_ERROR:ar.debug("remote stream request error:",Gt);var So=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);So===null?ar.error("Can't find the local stream to reject the request.."):So.rejectPendingPromise(Gt.timeout,Gt.message);break;case et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER:ar.debug("remote applyConstraints result :",Gt);var ps=St.getRemoteStreamSubscribed(Gt.callId,Gt.streamId);ps===null?ar.error("Can't find the local stream to resolve the request.."):ps.resolvePendingPromise(Gt.timeout,Gt.constraints);break;default:var fs={event:Gt.event,content:Gt};en!==null&&(fs.conversation=en),Xt.get(qr(St)).emit("customEvent",fs)}}}).onEvent("incomingCall",function(Ht){if(Ht.detail.callerId.toString()===St.getId()){var Gt=Ht.detail.callId.toString();if(Ht.detail.callType==="data")if(ar.debug("Received file transfer invitation from "+St.getUsername()),Ut.g._private.dataCallsFileInfo.has(Gt)){var en=Ut.g._private.dataCallsFileInfo.get(Gt),nn=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(St.getId()+"-sendfile-"+Gt)?(nn=apiRTC.userAgentInstance.currentSession.invitationsMap.get(St.getId()+"-sendfile-"+Gt),ar.debug("invitation already exist :",nn)):(nn=new eo(qr(St),Gt,en),apiRTC.userAgentInstance.currentSession.invitationsMap.set(St.getId()+"-sendfile-"+Gt,nn)),Xt.get(qr(St)).emit("fileTransferInvitation",nn)}else Ut.g._private.dataChannelInvitations.has(Gt)?Xt.get(qr(St)).emit("dataChannelInvitation",new zo(qr(St),Gt)):(ar.info("File information has not been received yet, putting invitation on hold"),Ut.g._private.dataCallsOnHold.set(Gt));else if(Ht.detail.callType==="screenSharing"||Ht.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){ar.debug("Received screenSharingCallInvitation from "+St.getUsername());var on=new Er(qr(St),Gt,Ht.detail.callType,{isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall});Xt.get(qr(St)).emit("incomingScreenSharingCallInvitation",on)}else{ar.debug("Received screenSharingCall from "+St.getUsername());var yn=Wl.getOrCreateCall(Gt,qr(St),{started:!0,isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall});Xt.get(qr(St)).emit("incomingScreenSharingCall",yn)}else ar.info("Received call invitation from "+St.getUsername()),Xt.get(qr(St)).emit("incomingCall",new Er(qr(St),Gt,Ht.detail.callType,{isRecorded:!!Ht.detail.hasOwnProperty("recordedCall")&&Ht.detail.recordedCall}))}}).onEvent("hangup",function(Ht){var Gt=Ht.detail.callId.toString();St.getId()===Ht.detail.remoteId.toString()&&(ar.debug("hangup event :",Ht.detail),St.fileTransfers.includes(Gt)&&(ar.info("File transfer finished from "+St.getUsername()),St.fileTransfers.splice(St.fileTransfers.indexOf(Gt),1)))}).onEvent("sendDataChannelError",function(Ht){var Gt=Ht.detail.callId.toString();St.getId()===Ht.detail.remoteId.toString()&&St.fileTransfers.includes(Gt)&&(ar.info("File transfer error from "+St.getUsername()),Xt.get(qr(St)).emit("fileTransferError",{error:"sendDataChannelError",invitationId:Gt}))}).onEvent("fetchUserDataAnswer",function(Ht){St.getId()===Ht.detail.id.toString()&&(St.userData=new Io(Ht.detail.userData),St.promises.forEach(function(Gt){Ht.detail.timeout===Gt.timeout&&(clearTimeout(Gt.timeout),Gt.resolve(Ht.detail.userData))}))}),St}return jt=Yt,Qt=[{key:"getId",value:function(){return xu.get(this)}},{key:"id",get:function(){return ar.warn("contact.id is deprecated, please use contact.getId() instead"),this.getId()}},{key:"fetchProfileInformation",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Ht,Gt){St.profile===null||Lt?es.getUserProfile(Vr.getActiveApiKey(),St.getId(),Ct).then(function(en){St.profile=en,Ht(en)}).catch(Gt):Ht(St.profile)})}},{key:"getActiveStreams",value:function(){return this.streams.values()}},{key:"getLocalStreamWithCallId",value:function(Ct){for(var St=null,Lt=so.getLocalStreams(),Ht=Lt.next();!Ht.done;){for(var Gt=Ht.value,en=Gt.publishedInConversations.values(),nn=en.next();!nn.done;)nn.value===Ct&&(ar.debug("Finding Stream in a conversation"),St=Gt),nn=en.next();Gt.callId===Ct&&(ar.debug("Finding Stream in a call"),St=Gt),Ht=Lt.next()}return St}},{key:"getLocalStreamPublished",value:function(){var Ct=so.getLocalStreams().next();return Ct.value===void 0?null:Ct.value}},{key:"getLocalStreamWithMediaStreamId",value:function(Ct){for(var St=null,Lt=so.getLocalStreams(),Ht=Lt.next();!Ht.done;){var Gt=Ht.value;if(Gt.data.id===Ct)return Gt;Ht=Lt.next()}return St}},{key:"getRemoteStreamSubscribed",value:function(Ct,St){var Lt=Br.getActiveSession().getCall(Ct);if(Lt){ar.debug("remote stream is associated to a call");var Ht,Gt=_u(Lt.getReceivedStreams());try{for(Gt.s();!(Ht=Gt.n()).done;){var en=Ht.value;if(en.getId()===St)return en}}catch(dr){Gt.e(dr)}finally{Gt.f()}}else{var nn=Br.getActiveSession().getActiveConversations(),on=Br.getActiveSession().getActiveConferences();for(var yn in nn){var On=nn[yn].getSubscribedStream(St);if(On!==void 0)return ar.debug("remote stream is associated to a conversation"),On}for(var Qn in on){var tr=on[Qn].getSubscribedStream(St);if(tr!==void 0)return ar.debug("remote stream is associated to a conference"),tr}}return null}},{key:"addMessageToHistory",value:function(Ct,St,Lt,Ht){Bl.get(this).indexOf(Lt.toString())===-1&&(this.previousMessages.push({content:Ct,timestamp:St,uuid:Lt,fromContact:Ht}),Bl.get(this).push(Lt.toString()))}},{key:"getPreviousMessages",value:function(){return this.previousMessages.sort(function(Ct,St){return new Date(St.timestamp)-new Date(Ct.timestamp)}),this.previousMessages}},{key:"getUserData",value:function(){return this.userData}},{key:"getRemoteAccessSupport",value:function(){var Ct=!1;return this.userData.remoteAccessUserSupport==="ON"&&(Ct=!0),Ct}},{key:"fetchUserData",value:function(){var Ct=this;return new Promise(function(St,Lt){var Ht=setTimeout(function(){Lt("Timeout error during fetchUserData() process")},5e3);Ct.promises.push({timeout:Ht,resolve:St}),apiRTC.session.fetchUserData({apiKey:Vr.getActiveApiKey(),id:Ct.getId(),timeout:Ht})})}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.getId()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"fetchWebSessionInformation",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){Ct instanceof Br?Vl.has(St.getId()+":"+Ct.getId())?Lt(Vl.get(St.getId()+":"+Ct.getId())):es.getWebSession(Ct,St,Vr.getActiveApiKey()).then(function(Gt){Vl.set(St.getId()+":"+Ct.getId(),Gt),Lt(Gt)}).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_OTHER,"fetchWebSessionInformation() - could not fetch web session information",ar))}):Ht(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"fetchWebSessionInformation() - parameter is not an instance of apiRTC.Session",ar))})}},{key:"loadMessageHistory",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){St.fetchWebSessionInformation(Ct).then(function(en){return es.getSessionHistory(en.webSessionId,Ct.getToken(),Lt)}).then(function(en){ar.debug("loadMessageHistory() - got messages",en.messages);var nn,on=_u(en.messages);try{for(on.s();!(nn=on.n()).done;){var yn=nn.value;St.addMessageToHistory(yn.value,yn.timestamp,yn.uuid,yn.destId.toString()!==St.getId())}}catch(On){on.e(On)}finally{on.f()}Ht()}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"loadMessageHistory() - could not load session history",ar))})})}},{key:"addToGroup",value:function(Ct){this.inGroup(Ct)||(this.groups.push(Ct),Xt.get(this).emit("joinGroup",Ct))}},{key:"removeFromGroup",value:function(Ct){this.inGroup(Ct)&&(this.groups.splice(this.groups.indexOf(Ct),1),Xt.get(this).emit("leaveGroup",Ct))}},{key:"inGroup",value:function(Ct){return this.groups.includes(Ct)}},{key:"isOnline",value:function(){return this.groups.length!==0}},{key:"sendData",value:function(Ct){var St=this;return this.isOnline()||ar.warn("sendData() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Lt,Ht){Vr.sendData(St.getId(),{event:et.g.CONTACT_SEND_DATA_IDENTIFIER,content:Ct}).then(Lt).catch(function(Gt){switch(Gt){case et.g.ERROR_TIMED_OUT:Ht(Ut.g.createError(et.g.ERROR_TIMED_OUT,"sendData() - Data transmission timed out ",ar));break;case et.g.ERROR_NOT_FOUND:Ht(Ut.g.createError(et.g.ERROR_NOT_FOUND,"sendData() - Contact was not found ",ar));break;default:Ht(Ut.g.createError(et.g.ERROR_OTHER,"sendData() - Data default error ",ar))}})})}},{key:"sendCustomEvent",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||ar.warn("sendCustomEvent() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,Gt){var en=Lt;en.event=Ct,Vr.sendData(St.getId(),en).then(Ht).catch(function(nn){switch(nn){case et.g.ERROR_TIMED_OUT:Gt(Ut.g.createError(et.g.ERROR_TIMED_OUT,"sendCustomEvent() - Data transmission timed out ",ar));break;case et.g.ERROR_NOT_FOUND:Gt(Ut.g.createError(et.g.ERROR_NOT_FOUND,"sendCustomEvent() - Contact was not found ",ar));break;default:Gt(Ut.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - Data transmission timed out ",ar))}})})}},{key:"sendRequest",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||ar.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,Gt){var en=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-");Vr.onceEvent("receiveData",function(on){ar.debug("Received data e.detail.data : ",on.detail.data),on.detail.data.apiRTCAnswer===!0&&(on.detail.data.requestUUID===en?Ht():ar.error("uuid is not correct"))});var nn=Lt;nn.apiRTCRequest=!0,nn.requestType=Ct,nn.uuid=en,Vr.sendData(St.getId(),nn).then(function(){ar.debug("sendData ok")}).catch(function(on){ar.error("Error on sendData",on),Gt()})})}},{key:"sendAnswer",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||ar.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ht,Gt){var en=Lt;en.apiRTCAnswer=!0,en.answerType=Ct,Vr.sendData(St.getId(),en).then(function(){Ht()}).catch(function(nn){ar.error("Error on sendData",nn),Gt()})})}},{key:"sendDataAnswer",value:function(Ct,St,Lt){this.getContact(Ct.senderId).sendAnswer(St,Lt).then(function(){ar.debug("sendAnswer OK")}).catch(function(Ht){ar.error("Error on sendAnswer",Ht)})}},{key:"manageApiRTCStreamRequest",value:function(Ct,St){var Lt=this;ar.debug("manageApiRTCStreamRequest : ",Ct);var Ht=Ct.data.requestType,Gt={};Gt.requestUUID=Ct.data.uuid,Gt.result="NOK";var en=null;if((en=apiRTC.userAgentInstance.getStreamWithRoomNameAndCallId(St.getName(),Ct.data.streamId))==="NOT_FOUND")Gt.reason="STREAM_NOT_FOUND",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Gt);else if(Ht!==void 0)switch(Ht){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:en.disableAudio().then(function(){Gt.result="OK",Lt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,Gt)}).catch(function(){Gt.reason="ERROR_ON_DISABLE_AUDIO",Lt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,Gt)});break;case et.g.CONTACT_ENABLE_AUDIO_REQUEST:en.enableAudio().then(function(){Gt.result="OK",Lt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,Gt)}).catch(function(){Gt.reason="ERROR_ON_ENABLE_AUDIO",Lt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,Gt)});break;case et.g.CONTACT_DISABLE_VIDEO_REQUEST:en.disableVideo().then(function(){Gt.result="OK",Lt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,Gt)}).catch(function(){Gt.reason="ERROR_ON_DISABLE_VIDEO",Lt.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,Gt)});break;case et.g.CONTACT_ENABLE_VIDEO_REQUEST:en.enableVideo().then(function(){Gt.result="OK",Lt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Gt)}).catch(function(){Gt.reason="ERROR_ON_ENABLE_VIDEO",Lt.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Gt)});break;default:ar.error("not a defined apiRTC request :",Ht),Gt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Gt)}else ar.error("requestType is undefined :",Ht),Gt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Gt)}},{key:"manageApiRTCRequest",value:function(Ct,St){ar.debug("manageApiRTCRequest : ",Ct);var Lt=Ct.data.requestType,Ht={};if(Ht.requestUUID=Ct.data.uuid,Ht.result="NOK",Lt!==void 0)switch(Lt){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:case et.g.CONTACT_ENABLE_AUDIO_REQUEST:case et.g.CONTACT_DISABLE_VIDEO_REQUEST:case et.g.CONTACT_ENABLE_VIDEO_REQUEST:this.manageApiRTCStreamRequest(Ct,St);break;default:ar.error("not a defined apiRTC request :",Lt),Ht.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Ht)}}},{key:"sendMessage",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isOnline()||ar.warn("sendMessage() - contact "+this.getUsername()+" does not seem to be connected.");var Ht=null,Gt=function(){return new Promise(function(en,nn){Lt.hasOwnProperty("session")?St.fetchWebSessionInformation(Lt.session).then(function(on){en({save:!0,cloudSessionId:on.webSessionId,apiRTCId:Lt.session.getId()})}).catch(nn):en({})})};return new Promise(function(en,nn){return typeof Ct!="string"?nn(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is not instance of string",ar)):Ct===""?nn(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",ar)):void Gt().then(function(on){Ht=on,ar.info("sendMessage() - with options :",Ht),Vr.sendMessage(St.getId(),Ct,Ht).then(function(yn){St.addMessageToHistory(Ct,Math.floor(Date.now()/1e3),yn,!1),en(yn)}).catch(function(yn){switch(yn){case et.g.ERROR_TIMED_OUT:nn(Ut.g.createError(et.g.ERROR_TIMED_OUT,"sendMessage() - Data transmission timed out ",ar));break;case et.g.ERROR_NOT_FOUND:nn(Ut.g.createError(et.g.ERROR_NOT_FOUND,"sendMessage() - Contact was not found ",ar));break;default:nn(Ut.g.createError(et.g.ERROR_OTHER,"sendMessage() - Data transmission timed out ",ar))}})},function(on){nn(Ut.g.createError(et.g.ERROR_OTHER,"sendMessage() - Error occured when fetching options for sending message",ar))})})}},{key:"inviteTo",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.sendConversationInvitation(Ct,St)}},{key:"sendConversationInvitation",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ct instanceof $o?Ct.sendInvitation(this,St):(ar.error("sendConversationInvitation() - Parameter is not a conversation"),null)}},{key:"sendWhiteboardInvitation",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vr.whiteBoardClient.roomId!==Ct&&(Vr.whiteBoardClient.leaveRoom(),Vr.whiteBoardClient.start(),Vr.whiteBoardClient.joinRoom(Ct));var Lt=St.context?St.context:null,Ht={};St.cloudConversationId&&(Ht.convId=St.cloudConversationId),Vr.whiteBoardClient.inviteInRoom(Ct,this.getId(),Lt,Ht);var Gt=new Do(this,null);return Gt.id="wb-"+Ct,Gt.type="whiteboard",Gt}},{key:"call",value:function(Ct){var St,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{mediaTypeForOutgoingCall:"VIDEO",record:!1};this.isOnline()||ar.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var Ht={},Gt=Ut.g.assignObject({},Lt),en=!!Lt.hasOwnProperty("audioOnly")&&Lt.audioOnly;Lt.hasOwnProperty("record")&&(Gt.record!==void 0&&Gt.record!==null||(Gt.record=Lt.record)),Ct!==null&&Ct instanceof so&&(Gt.userMediaStreamId=Ct.userMediaStreamId,Ct.isScreensharing()&&(Gt.forceCallType="screenSharing")),Gt.cloudConversationId&&(Ht.cloudConvId=Gt.cloudConversationId,delete Gt.cloudConversationId),St=en?Vr.webRTCClient.callAudio(this.getId(),Ht,Gt):Vr.webRTCClient.call(this.getId(),Ht,Gt);var nn=Wl.getOrCreateCall(St,this,{isRecorded:Gt.record});return nn}},{key:"shareScreen",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.isOnline()||ar.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var St={},Lt=null,Ht=Ct,Gt=Ct.captureSourceType;ar.warn("call() - contact "+this.getUsername()+" does not seem to be connected."),Lt=Vr.webRTCClient.shareScreen(this.getId(),St,Gt);var en=Wl.getOrCreateCall(Lt,this,{isRecorded:Ht.record});return en}},{key:"startDataChannel",value:function(){if(this.isOnline()||ar.warn("startDataChannel() - contact "+this.getUsername()+" does not seem to be connected."),!(ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")){var Ct=Vr.webRTCClient.startDataChannel(this.getId());return Vr.sendData(this.getId(),{callId:Ct,event:et.g.CONTACT_DATACHANNEL_INVITATION}),new ys(Ct,this,{type:et.g.DATACHANNEL_TYPE_SEND})}ar.warn("Cannot startDataChannel as it is not supported on Edge")}},{key:"sendFile",value:function(Ct,St){if(this.isOnline()||ar.warn("sendFile() - contact "+this.getUsername()+" does not seem to be connected."),ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")return ar.warn("Cannot sendFile as Datachannel is not supported on Edge"),null;var Lt=Vr.webRTCClient.startDataChannel(this.getId()),Ht=this;if(Lt===void 0)return ar.warn("Error on startDataChannel"),null;Vr.sendData(this.getId(),{fileInfo:Ct,callId:Lt,event:et.g.CONTACT_SEND_FILEINFO_IDENTIFIER}),Vr.onEvent("sendDataChannelOpen",function en(nn){ar.debug("sendFile() - DataChannel open",nn.detail),nn.detail.callId.toString()===Lt.toString()&&(Vr.webRTCClient.sendDataWithCallId(Lt,{file:St,name:Ct.name,type:Ct.type},function(on){ar.trace("sendFile() - progress : ",on);var yn={uuid:on.uuid,fileSize:on.fileSize,remainingSize:on.remainingSize,percentage:on.percentage,sendChunkNb:on.sendChunkNb,transferDuration:on.transferDuration,lastPacket:on.lastPacket};Xt.get(Ht).emit("fileTransferProgress",{fileInfo:Ct,transferInformation:yn}),on.transferEnded&&Xt.get(Ht).emit("fileSentSuccessfully",{fileInfo:Ct,transferInformation:yn})}),Vr.removeEventListener("sendDataChannelOpen",en))}),this.fileTransfers.push(Lt.toString());var Gt=new Do(this,null);return Gt.id=Lt.toString(),Gt.type="sendFile",Gt.on("response",function(){Gt.getStatus()!==et.g.INVITATION_STATUS_ACCEPTED&&ar.log("sendFile() - invitation has not been accepted, cleaning listeners")}),Gt}},{key:"pushMedia",value:function(Ct,St){var Lt=this,Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Gt,en){Lt.fetchWebSessionInformation(St).then(function(nn){return Ht.token=St.token,es.pushConversationMedia(nn.conversationId,Ct,Vr.getActiveApiKey(),Ht)}).then(function(nn){Vr.sendData(Lt.getId(),{event:et.g.CONTACT_NEW_MEDIA_IDENTIFIER,media:{url:nn.url,id:nn.id}}),Gt({url:nn.url,id:nn.id})}).catch(function(nn){en(Ut.g.createError(et.g.ERROR_OTHER,"pushMedia() - failed to push media",ar))})})}},{key:"fetchMediaList",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ar.debug("fetchMediaList()"),new Promise(function(Ht,Gt){St.fetchWebSessionInformation(Ct).then(function(en){return Lt.token=Ct.getToken(),es.getConversationMediaList(en.conversationId,Vr.getActiveApiKey(),Lt)}).then(Ht).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"getMediaList() - failed to get media list",ar))})})}},{key:"sendEventCenterDataRequest",value:function(){return this.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_REQUEST)}},{key:"getContact",value:function(Ct){return Br.getActiveSession().getOrCreateContact(Ct)}},{key:"sendToContactRemoteStreamError",value:function(Ct,St,Lt){ar.debug("sendToContactRemoteStreamError",Ct,St,Lt),St.sendCustomEvent(et.g.CONTACT_GET_REMOTE_ERROR,{callId:Lt.callId,streamId:Lt.streamId,timeout:Lt.timeout,message:Ct})}},{key:"sendRemoteAccessInvitation",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){if(St.isOnline()||ar.warn("sendRemoteAccessInvitation() - contact "+St.getUsername()+" does not seem to be connected."),apiRTC.session.remoteAccessInvitation!==null)return ar.warn("sendRemoteAccessInvitation() already ongoing"),Gt(new Error("sendRemoteAccessInvitation() already ongoing"));var en=new jp(St,Ct,Lt);apiRTC.session.remoteAccessInvitation=en,en.type=et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER;var nn={event:et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER,invitationId:en.id,roomname:en.conversation._getTechnicalName(),sendTime:en.sendTime};en.send(nn).then(function(){Ht(en)}).catch(function(on){return ar.error("Contact#sendRemoteAccessInvitation send error:",on),Gt(new Error(on))})})}}],Mt=[{key:"getAvailableEvents",value:function(){return Wp}}],Qt&&Mu(jt.prototype,Qt),Mt&&Mu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn);function zl(Wt){return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},zl(Wt)}function Bp(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Hl(Wt,jt){return Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Hl(Wt,jt)}function Vp(Wt,jt){if(jt&&(zl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Ms(Wt){return Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Ms(Wt)}var co=ft.Y.get("ConversationCall"),Fr=Rn.get(),Gl=function(Wt){(function(Yt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Object.defineProperty(Yt,"prototype",{writable:!1}),Ct&&Hl(Yt,Ct)})(dn,Wt);var jt,Qt,Mt,Bt,ln=(Mt=dn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Yt,Ct=Ms(Mt);if(Bt){var St=Ms(this).constructor;Yt=Reflect.construct(Ct,arguments,St)}else Yt=Ct.apply(this,arguments);return Vp(this,Yt)});function dn(Yt,Ct,St){var Lt;return function(Ht,Gt){if(!(Ht instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this,dn),(Lt=ln.call(this,co)).conversation=Yt,Lt.callId=Ct,Lt.stream=St,Lt}return jt=dn,Qt=[{key:"getConversation",value:function(){return this.conversation}},{key:"getCallId",value:function(){return this.callId}},{key:"getStream",value:function(){return this.stream}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"isStreamed",value:function(){return!!this.streamingStatus}},{key:"getStreamingInfo",value:function(){return this.isStreamed()?this.streamingStatus:null}},{key:"startRecordingPublishedStream",value:function(Yt){var Ct=this;return Yt||(Yt={}),new Promise(function(St,Lt){if(Ct.asyncCallbacks)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - busy",co));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Fr.removeEventListener("error",Ct.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - timeout",co))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(nn){if(String(nn.detail.convId)===Ct.conversation.getCloudConversationId()&&nn.detail.callId===Ct.callId&&nn.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(Fr.removeEventListener("error",Ct.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - "+nn.detail.errorInfo,co))},Ct.asyncCallbacks.recordingStarted=function(nn){if(String(nn.detail.convId)===Ct.conversation.getCloudConversationId()&&nn.detail.callId===Ct.callId){Ct.asyncCallbacks&&(Fr.removeEventListener("error",Ct.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var on=Ut.g.parseRecordingEvent("MCURecordingStarted",nn.detail);return St(on)}},Fr.onEvent("error",Ct.asyncCallbacks.error),Fr.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted);var Ht="AUDIO-VIDEO";Yt.audioOnly===!0?Ht="AUDIO-ONLY":Yt.videoOnly===!0&&(Ht="VIDEO-ONLY");var Gt="userStream";Ut.g.isPropertyTypeof(Yt,"customIdInFilename","string")&&(Gt=Yt.customIdInFilename);var en={};Ut.g.isPropertyTypeof(Yt,"data","object")&&(en=Object.assign({},Yt.data)),Ut.g.isPropertyTypeof(Yt,"ttl","number")&&Yt.ttl>0&&(en.ttl=Yt.ttl),Fr.webRTCClient.startRecording(Ht,Gt,Ct.conversation.getCloudConversationId(),Ct.callId,en)})}},{key:"stopRecordingPublishedStream",value:function(){var Yt=this;return new Promise(function(Ct,St){if(Yt.asyncCallbacks)return St(Ut.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - busy",co));Yt.asyncCallbacks={},Yt.asyncCallbacks.timeoutId=setTimeout(function(){return Yt.asyncCallbacks&&(Fr.removeEventListener("error",Yt.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStopped",Yt.asyncCallbacks.recordingStopped),delete Yt.asyncCallbacks),Ct(Yt.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Yt.asyncCallbacks.error=function(Lt){if(String(Lt.detail.convId)===Yt.conversation.getCloudConversationId()&&Lt.detail.callId===Yt.callId&&Lt.detail.errorCode.indexOf("STOP_RECORD")>=0)return Yt.asyncCallbacks&&(Fr.removeEventListener("error",Yt.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStopped",Yt.asyncCallbacks.recordingStopped),clearTimeout(Yt.asyncCallbacks.timeoutId),delete Yt.asyncCallbacks),St(Ut.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - "+Lt.detail.errorInfo,co))},Yt.asyncCallbacks.recordingStopped=function(Lt){if(String(Lt.detail.convId)===Yt.conversation.getCloudConversationId()&&Lt.detail.callId===Yt.callId){Yt.asyncCallbacks&&(Fr.removeEventListener("error",Yt.asyncCallbacks.error),Fr.removeEventListener("MCURecordingStopped",Yt.asyncCallbacks.recordingStopped),clearTimeout(Yt.asyncCallbacks.timeoutId),delete Yt.asyncCallbacks);var Ht=Ut.g.parseRecordingEvent("MCURecordingStopped",Lt.detail);return Ct(Ht)}},Fr.onEvent("error",Yt.asyncCallbacks.error),Fr.onEvent("MCURecordingStopped",Yt.asyncCallbacks.recordingStopped),Fr.webRTCClient.stopRecording(Yt.callId)})}},{key:"replacePublishedStream",value:function(Yt,Ct){var St=this;return co.debug("replacePublishedStream"),new Promise(function(Lt,Ht){if(Yt===null){if(!Ut.g.isPropertyTypeof(Ct,"getStream","function"))return Ht(new Error("replacePublishedStream() - Cannot replace stream, wrong arguments"));St.stream.publishedInConversations.delete(St.conversation.getName()),St.conversation.conversationPublishedStreams.delete(St.stream.userMediaStreamId);var Gt={getUserMediaStreamId:function(){return Ct.getStream().then(function(nn){St.stream=nn,nn.publishedInConversations.set(St.conversation.getName(),St.callId),St.conversation.callIdToStreamId.set(St.callId,nn.userMediaStreamId);var on={contact:null,isRemote:!1,hasAudio:nn.hasAudio(),hasVideo:nn.hasVideo(),isScreensharing:nn.isScreensharing(),streamId:nn.userMediaStreamId,callId:St.callId};return St.conversation.conversationPublishedStreams.set(nn.userMediaStreamId,on),nn.userMediaStreamId}).catch(Ht)}};Fr.webRTCClient.webRTCClient.addMedia(St.callId,!0,null,Gt).then(function(nn){var on=function(yn){if(yo.has(yn))return yo.get(yn);var On=apiCC.getUserMediaStream(yn);if(On){var Qn="audio";return On.video===!0&&(Qn="video"),new so(On.stream,{type:Qn,constructor:!0,userMediaStreamId:On.userMediaStreamId})}return null}(nn.userMediaStreamId);return on!==null&&St.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:St.getCallId(),newStreamId:on.data.id,oldStreamId:nn.oldMediaStreamId}),Lt(on)}).catch(function(nn){return Ht(new Error("replacePublishedStream() - "+nn))})}else{St.stream.publishedInConversations.delete(St.conversation.getName()),St.conversation.conversationPublishedStreams.delete(St.stream.userMediaStreamId),Fr.webRTCClient.webRTCClient.addMedia(St.callId,!0,Yt.userMediaStreamId).then(function(nn){return St.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:St.getCallId(),newStreamId:Yt.data.id,oldStreamId:nn.oldMediaStreamId}),Lt(Yt)}).catch(function(nn){return Ht(new Error("replacePublishedStream() - "+nn))}),St.stream=Yt,Yt.publishedInConversations.set(St.conversation.getName(),St.callId),St.conversation.callIdToStreamId.set(St.callId,Yt.userMediaStreamId);var en={contact:null,isRemote:!1,hasAudio:Yt.hasAudio(),hasVideo:Yt.hasVideo(),isScreensharing:Yt.isScreensharing(),streamId:Yt.userMediaStreamId,callId:St.callId};St.conversation.conversationPublishedStreams.set(Yt.userMediaStreamId,en)}})}},{key:"startStreaming",value:function(){var Yt=this,Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(St,Lt){return Yt.asyncCallbacks?Lt(Ut.g.createError(et.g.ERROR_OTHER,"startStreaming() - busy",co)):Fr.webRTCClient.startStreaming(Ct.service,Ct.server,Ct.streamKey,Yt.callId)?(Yt.asyncCallbacks={},Yt.asyncCallbacks.timeoutId=setTimeout(function(){return Yt.asyncCallbacks&&(Fr.removeEventListener("MCUStreamingStarted",Yt.asyncCallbacks.streamingStarted),delete Yt.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"startStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STARTED_DELAY),Yt.asyncCallbacks.streamingStarted=function(Ht){if(Ht.detail.roomName===Yt.conversation._getTechnicalName()&&Ht.detail.callId===Yt.callId){Yt.asyncCallbacks&&(Fr.removeEventListener("MCUStreamingStarted",Yt.asyncCallbacks.streamingStarted),clearTimeout(Yt.asyncCallbacks.timeoutId),delete Yt.asyncCallbacks);var Gt=$s("MCUStreamingStarted",Ht.detail);return St(Gt)}},void Fr.onEvent("MCUStreamingStarted",Yt.asyncCallbacks.streamingStarted)):Lt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"startStreaming() - cannot start streaming",co))})}},{key:"stopStreaming",value:function(){var Yt=this;return new Promise(function(Ct,St){return Yt.asyncCallbacks?St(Ut.g.createError(et.g.ERROR_OTHER,"stopStreaming() - busy",co)):Fr.webRTCClient.stopStreaming(Yt.callId)?(Yt.asyncCallbacks={},Yt.asyncCallbacks.timeoutId=setTimeout(function(){return Yt.asyncCallbacks&&(Fr.removeEventListener("MCUStreamingStopped",Yt.asyncCallbacks.streamingStopped),delete Yt.asyncCallbacks),St(Ut.g.createError(et.g.ERROR_OTHER,"stopStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STOPPED_DELAY),Yt.asyncCallbacks.streamingStopped=function(Lt){if(Lt.detail.roomName===Yt.conversation._getTechnicalName()&&Lt.detail.callId===Yt.callId){Yt.asyncCallbacks&&(Fr.removeEventListener("MCUStreamingStopped",Yt.asyncCallbacks.streamingStopped),clearTimeout(Yt.asyncCallbacks.timeoutId),delete Yt.asyncCallbacks);var Ht=$s("MCUStreamingStopped",Lt.detail);return Ct(Ht)}},void Fr.onEvent("MCUStreamingStopped",Yt.asyncCallbacks.streamingStopped)):St(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"stopStreaming() - cannot stop streaming",co))})}},{key:"changeStreamPriority",value:function(Yt){var Ct=this;return new Promise(function(St,Lt){return Fr.webRTCClient.changeStreamPriority(Ct.callId,Yt)?(Ct.conversation.changeStreamPriority(Ct.stream.userMediaStreamId,!1,Yt),St()):Lt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"changeStreamPriority() - cannot change stream priority",co))})}},{key:"updatePublishedStream",value:function(Yt,Ct){var St=this;return new Promise(function(Lt,Ht){if(Yt!=="audio"&&Yt!=="video")return Ht(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"updatePublishedStream() - wrong type",co));var Gt=Ct?"sendonly":"inactive";return Fr.webRTCClient.webRTCClient.processUpdateStream(St.callId,Yt,Gt)?Lt():Ht(Ut.g.createError(et.g.ERROR_OTHER,"updatePublishedStream() - cannot update",co))})}}],Qt&&Bp(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),dn}(cn);function Lo(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return Pu(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?Pu(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function Pu(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function Du(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var no=ft.Y.get("ContactCatalog"),mo=null,Mo={},bo={leftGroup:{},joinedGroup:{},userDataChanged:[]},Ro=function(){function Wt(){if(function(ln,dn){if(!(ln instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Wt),mo!==null)throw"Cannot construct singleton ContactCatalog";this.contactList=new Map,this.eventEmitter=new dt,mo=this;var Bt=Rn.get();Bt.onEvent("connectedUsersListUpdate",function(ln){var dn=apiRTC.session.apiCCId.toString(),Yt={};switch(ln.detail.updateReason){case"newConnectionState":if(ln.detail.status==="online"){no.debug("new connection");var Ct,St=Lo(ln.detail.usersList);try{for(St.s();!(Ct=St.n()).done;)(Yt={userId:Ct.value,group:ln.detail.group}).userId.toString()!==dn&&Hp(Yt)}catch(yn){St.e(yn)}finally{St.f()}}else{no.debug("new disconnection");var Lt,Ht=Lo(ln.detail.usersList);try{for(Ht.s();!(Lt=Ht.n()).done;)Yt={userId:Lt.value,group:ln.detail.group},Mo[Yt.group]===void 0&&(Mo[Yt.group]={}),Yt.userId.toString()!==dn&&(Mo[Yt.group][Yt.userId.toString()]=setTimeout(zp(Yt),Bt.contactDisconnectionDelay))}catch(yn){Ht.e(yn)}finally{Ht.f()}}break;case"userDataUpdate":no.debug("userDataUpdate");var Gt,en=Lo(ln.detail.usersList);try{for(en.s();!(Gt=en.n()).done;)(Yt={userId:Gt.value,group:ln.detail.group}).userId.toString()!==dn&&Nu(Yt)}catch(yn){en.e(yn)}finally{en.f()}break;case"callState":no.debug("callState change for user");var nn,on=Lo(ln.detail.usersList);try{for(on.s();!(nn=on.n()).done;)(Yt={userId:nn.value,group:ln.detail.group}).userId.toString()!==dn&&Nu(Yt)}catch(yn){on.e(yn)}finally{on.f()}break;default:no.warn("default case for updateReason value")}}).onEvent("groupUnsubscribed",function(ln){var dn,Yt=mo.getContacts(ln),Ct=Lo(Yt.keys());try{for(Ct.s();!(dn=Ct.n()).done;){var St=dn.value;Yt.get(St).removeFromGroup(ln)}}catch(Lt){Ct.e(Lt)}finally{Ct.f()}})}var jt,Qt,Mt;return jt=Wt,Qt=[{key:"onUpdate",value:function(Bt){this.eventEmitter.on("update",Bt)}},{key:"removeUpdateListener",value:function(Bt){this.eventEmitter.off("update",Bt)}},{key:"getContact",value:function(Bt){return Bt!=null&&this.contactList.has(Bt.toString())?this.contactList.get(Bt.toString()):null}},{key:"getOrCreateContact",value:function(Bt){var ln=null;if(Bt!=null)if(this.contactList.has(Bt.toString()))ln=this.contactList.get(Bt.toString());else try{ln=new No(Bt.toString(),{}),this.contactList.set(Bt.toString(),ln)}catch(dn){no.debug("Contact not added : "+dn)}return ln}},{key:"getContacts",value:function(Bt){if(Bt==null)return this.contactList;var ln,dn=new Map,Yt=Lo(this.contactList.keys());try{for(Yt.s();!(ln=Yt.n()).done;){var Ct=ln.value;this.contactList.get(Ct).inGroup(Bt)&&dn.set(Ct,this.contactList.get(Ct))}}catch(St){Yt.e(St)}finally{Yt.f()}return dn}},{key:"getOnlineContacts",value:function(Bt){var ln=new Map;if(Bt==null){var dn,Yt=Lo(this.contactList.keys());try{for(Yt.s();!(dn=Yt.n()).done;){var Ct=dn.value;this.contactList.get(Ct).isOnline()&&ln.set(Ct,this.contactList.get(Ct))}}catch(Gt){Yt.e(Gt)}finally{Yt.f()}}else{var St,Lt=Lo(this.contactList.keys());try{for(Lt.s();!(St=Lt.n()).done;){var Ht=St.value;this.contactList.get(Ht).inGroup(Bt)&&this.contactList.get(Ht).isOnline()&&ln.set(Ht,this.contactList.get(Ht))}}catch(Gt){Lt.e(Gt)}finally{Lt.f()}}return ln}}],Mt=[{key:"get",value:function(){return mo===null&&(mo=new Wt),mo}}],Qt&&Du(jt.prototype,Qt),Mt&&Du(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function zp(Wt){return function(){var jt=Wt.userId.toString();if(no.info("Contact disconnected "+jt+" from "+Wt.group),mo.contactList.has(jt)){var Qt=mo.contactList.get(jt);if(Qt===void 0)return void no.debug("Contact not exist with userId :",jt);Qt.removeFromGroup(Wt.group),function(Mt,Bt){no.debug("updateContactListOnUserDisconnect()"),bo.leftGroup[Mt]===void 0&&(bo.leftGroup[Mt]=[]),bo.leftGroup[Mt].push(Bt),Kl()}(Wt.group,Qt),Mo[Wt.group]!==void 0&&Mo[Wt.group][jt]!==void 0&&delete Mo[Wt.group][jt]}}}function Kl(){Object.keys(bo.leftGroup).length===0&&Object.keys(bo.joinedGroup).length===0&&bo.userDataChanged.length===0||(mo.eventEmitter.emit("update",bo),bo={leftGroup:{},joinedGroup:{},userDataChanged:[]})}function Hp(Wt){no.debug("updateContactListOnUserConnection()");var jt=Wt.userId.toString(),Qt=null,Mt=apiRTC.session.getConnectedUserInfo(jt,"userData");no.debug("userData :",Mt);try{Wt.userData=JSON.parse(Mt)}catch(Bt){no.warn("userData parse error : "+Bt)}if(mo.contactList.has(jt))Qt=mo.contactList.get(Wt.userId),Io.equals(Qt.userData,Wt.userData)||(Qt.userData=new Io(Wt.userData),bo.userDataChanged.push(Qt));else{try{Qt=new No(jt,Wt.userData),mo.contactList.set(jt,Qt)}catch(Bt){no.debug("Contact not added : "+Bt)}Qt=mo.contactList.get(jt)}Qt!==void 0?(Mo[Wt.group]!==void 0&&Mo[Wt.group][jt]!==void 0&&(clearTimeout(Mo[Wt.group][jt]),delete Mo[Wt.group][jt]),Qt.inGroup(Wt.group)||(Qt.addToGroup(Wt.group),bo.joinedGroup[Wt.group]===void 0&&(bo.joinedGroup[Wt.group]=[]),bo.joinedGroup[Wt.group].push(Qt)),Kl()):no.debug("Contact not exist with userId :",jt)}function Nu(Wt){no.debug("updateContactListOnUserDataUpdate()");var jt=Wt.userId.toString(),Qt=mo.contactList.get(Wt.userId);if(Qt!==void 0){var Mt=apiRTC.session.getConnectedUserInfo(jt,"userData");no.debug("userData :",Mt);try{Wt.userData=JSON.parse(Mt)}catch(Bt){no.warn("userData parse error : "+Bt)}Io.equals(Qt.userData,Wt.userData)||(Qt.userData=new Io(Wt.userData),bo.userDataChanged.push(Qt)),Kl()}else no.debug("Contact not exist with userId :",jt)}function xs(Wt){return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},xs(Wt)}function uo(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return Lu(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?Lu(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function Lu(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function Gp(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Uu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Yl(Wt,jt){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},Yl(Wt,jt)}function Kp(Wt,jt){if(jt&&(xs(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ur(Wt)}function ur(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ps(Wt){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Ps(Wt)}var jn=ft.Y.get("Conversation"),er=Rn.get(),Eo=new(Go()),ro=Ro.get(),qp=["adaptationTriggered","audioAmplitude","availableStreamsUpdated","bandwidthLimited","callStatsUpdate","compositeListChanged","contactJoined","contactJoinedWaitingRoom","contactLeft","contactLeftWaitingRoom","cpuLimited","customEvent","data","disconnectionWarning","entryAllowed","entryDenied","error","hangup","joined","left","localStreamUpdated","message","messageNotDelivered","moderatorConnected","newMediaAvailable","newWhiteboardSession","participantEjected","persistentDataUpdated","pointerLocationChanged","pointerSharingEnabled","recordingAvailable","recordingStarted","recordingStopped","remoteStreamUpdated","replayListChanged","roomModeChanged","simulcastFeedChanged","slowLink","streamAdded","streamListChanged","streamRemoved","streamingStarted","streamingStopped","transferPending","transferBegun","transferEnded","transferProgress","whiteboardRoomMemberUpdate","videoQualityChanged","waitingForModeratorAcceptance","remoteStreamIdUpdated"],ju=new Set(["CHAT","CALL","GROUP_CHAT","WEBCONF","REPORT","REPORT_PART","TICKET","EVENT","OTHER","BOT"]),Yp=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),Jp=new Set(["CALL_ABORTED","SET_LOCAL_DESCRIPTION_FAILURE","SET_REMOTE_DESCRIPTION_FAILURE"]),ts=new WeakMap,ns=new WeakMap,Ko=new WeakMap,Po=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Ao=new WeakMap,wo=new WeakMap,Jl=new WeakMap,Xl=new WeakMap,Ls=new WeakMap,Us=new WeakMap,js=new WeakMap,$o=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&Yl(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Ps(Bt);if(ln){var Lt=Ps(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return Kp(this,Ct)});function Yt(Ct){var St,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gp(this,Yt),St=dn.call(this,jn),jn.debug("Create Conversation"),Ct==null?ts.set(ur(St),Ut.g.guid().toString()):ts.set(ur(St),Ct.toString()),ns.set(ur(St),"OTHER"),St.active=!Object.prototype.hasOwnProperty.call(Lt,"active")||typeof Lt.active!="boolean"||Lt.active,St.meshModeEnabled=Lt.meshModeEnabled===!0,St.meshOnlyEnabled=Lt.meshOnlyEnabled===!0,St.moderationEnabled=Lt.moderationEnabled===!0,St.moderator=Lt.moderator===!0,St.conversationCalls=new Map,St.callIdToStreamId=new Map,St.token=null,St.sessionId=null,St.webconfId=null,St.conversationStreams=new Map,St.conversationPublishedStreams=new Map,St.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,St.status=et.g.CONVERSATION_STATUS_NOT_JOINED,St.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,St.pointerSharingState=et.g.STATE_IDLE,St.pointerSharingAutoInvite=!1,St.pgroupWaitingRoomSubscribedTo=!1,Ds.set(ur(St),null),Ns.set(ur(St),null),Ao.set(ur(St),new Map),Po.set(ur(St),null),wo.set(ur(St),null),Ko.set(ur(St),{}),Ls.set(ur(St),new Map),js.set(ur(St),null),Us.set(ur(St),null),St.transferCallIds=[],St.uploadCap=null,St.downloadCap=null,St.reservedStreams=[];var Ht={contactCatalog:{}};for(var Gt in Ht.contactCatalog.onUpdate=function(nn){jn.debug("onUpdate: contactList",nn);var on=St._getTechnicalName();if(nn.joinedGroup[on]!==void 0){var yn,On=uo(nn.joinedGroup[on]);try{for(On.s();!(yn=On.n()).done;){var Qn=yn.value;jn.debug(Qn.getUsername()+" joined conversation "+St.getName()),Xt.get(ur(St)).emit("contactJoined",Qn),St.pointerSharingState===et.g.STATE_ACTIVE&&St.pointerSharingAutoInvite===!0&&er.pointerSharingClient.inviteInRoom(on,Qn.getId())}}catch(ir){On.e(ir)}finally{On.f()}}else jn.debug("not an event joinedGroup for conversation");if(nn.leftGroup[on]!==void 0){var tr,dr=uo(nn.leftGroup[on]);try{for(dr.s();!(tr=dr.n()).done;){var fr=tr.value;jn.debug(fr.getUsername()+" left conversation "+St.getName()),Xt.get(ur(St)).emit("contactLeft",fr)}}catch(ir){dr.e(ir)}finally{dr.f()}}else jn.debug("not an event leftGroup for conversation");if(St.getRole()===et.g.CONVERSATION_ROLE_MODERATOR){var Ar,Xr=ro.getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+on),_i=uo(Ls.get(ur(St)).keys());try{for(_i.s();!(Ar=_i.n()).done;){var Vo=Ar.value;if(!Xr.has(Vo)){var lr=ro.getContact(Vo);lr!==null&&(jn.debug(lr.getUsername()+" left waiting room "+St.getName()),Xt.get(ur(St)).emit("contactLeftWaitingRoom",lr))}}}catch(ir){_i.e(ir)}finally{_i.f()}Xr.forEach(function(ir,Ir){Ls.get(ur(St)).has(Ir)||ir===null||(jn.debug(ir.getUsername()+" joined waiting room "+St.getName()),Xt.get(ur(St)).emit("contactJoinedWaitingRoom",ir),er.sendData(Ir,{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:on}).catch(function(kr){var br=Ut.g.createError(kr,"Notification not delivered",jn);Xt.get(ur(St)).emit("messageNotDelivered",{error:br,contact:ir,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})}))}),Ls.set(ur(St),Xr)}},ro.onUpdate(Ht.contactCatalog.onUpdate),Xt.get(ur(St)).on("contactJoined",function(nn){St.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&er.sendData(nn.getId(),{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:St._getTechnicalName()}).catch(function(on){var yn=Ut.g.createError(on,"Notification not delivered",jn);Xt.get(ur(St)).emit("messageNotDelivered",{error:yn,contact:nn,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})})}),Ht.apiRTCManager={},Ht.apiRTCManager.receiveData=function(nn){var on=nn.detail.data;if(on!==void 0){if(on.roomname===St._getTechnicalName()){var yn=ro.getOrCreateContact(nn.detail.senderId);if(on.event)switch(on.event){case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:if(St.status!==et.g.CONVERSATION_STATUS_JOINED)break;Xt.get(ur(St)).emit("data",{sender:yn,content:on.content});break;case et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER:if(St.status!==et.g.CONVERSATION_STATUS_JOINED)break;jn.info("New media available in conversation",on.media),Xt.get(ur(St)).emit("newMediaAvailable",{sender:yn,media:on.media});break;case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:if(St.status!==et.g.CONVERSATION_STATUS_JOINED)break;St.updateData();break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:Xt.get(ur(St)).emit("moderatorConnected",yn);break;case et.g.CONVERSATION_CLOSED_IDENTIFIER:on.instanceId===St.getInstanceId()&&(jn.info("Conference "+St.getName()+" has been closed..."),Xt.get(ur(St)).emit("closed"),St.leave());break;case et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER:if(on.access===void 0||on.access===null){jn.error("Conversation join answer has no access data");break}Xt.get(ur(St)).emit(on.access?"entryAllowed":"entryDenied");break;case et.g.CONTACT_STREAM_UPDATED_INFO:jn.debug("CONTACT_STREAM_UPDATED_INFO :",nn.detail.data);var On={callId:nn.detail.data.callId,newStreamId:nn.detail.data.newStreamId,oldStreamId:nn.detail.data.oldStreamId};Xt.get(ur(St)).emit("remoteStreamIdUpdated",On);break;default:Xt.get(ur(St)).emit("customEvent",{event:on.event,content:on,sender:yn})}else if(on.command==="new_snapshot"){if(St.status!==et.g.CONVERSATION_STATUS_JOINED)return;jn.info("New media available in conversation",on.value.snapshot),Xt.get(ur(St)).emit("newMediaAvailable",{sender:yn,media:on.value.snapshot})}else jn.debug("Unprocessed conversation message",on)}}else jn.debug("Received data undefined, leaving process")},Ht.apiRTCManager.receiveGroupChatMessage=function(nn){if((St.status===et.g.CONVERSATION_STATUS_JOINED||St.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED)&&nn.detail.groupChatId.toString()===St._getTechnicalName()){var on={sender:ro.getOrCreateContact(nn.detail.senderId),sender_id:nn.detail.senderId,content:nn.detail.message,time:new Date};Ut.g.isTypeof(nn.detail,"metadata","object")&&(on.metadata=nn.detail.metadata),Xt.get(ur(St)).emit("message",on)}},Ht.apiRTCManager.receiveRoomMessage=function(nn){if(nn.detail.roomType==="pointerSharing"&&St.pointerSharingState===et.g.STATE_ACTIVE&&nn.detail.message.type==="pointerLocation"&&nn.detail.roomId===St._getTechnicalName()){var on={sender:ro.getOrCreateContact(nn.detail.senderId),source:nn.detail.message.source,x:nn.detail.message.x,y:nn.detail.message.y};Ut.g.isPropertyTypeof(nn.detail.message,"data","object")&&(on.data=nn.detail.message.data),Xt.get(ur(St)).emit("pointerLocationChanged",on)}},Ht.apiRTCManager.roomInvitation=function(nn){if(jn.info("roomInvitation event handler ",nn),nn.detail.roomId.toString()===St._getTechnicalName())if(jn.info("roomInvitation for actual conversation",nn),nn.detail.roomType==="whiteBoard"){if(St.status===et.g.CONVERSATION_STATUS_JOINED){var on=ro.getOrCreateContact(nn.detail.senderId);Xt.get(ur(St)).emit("newWhiteboardSession",{sender:on})}}else nn.detail.roomType==="pointerSharing"&&Ql(ur(St),!1,!0).then(function(){}).catch(function(yn){})},Ht.apiRTCManager.onFilePending=function(nn){if(St.transferCallIds.includes(nn.detail.callId)){var on={id:nn.detail.callId,name:nn.detail.name,rank:nn.detail.rank};Xt.get(ur(St)).emit("transferPending",on)}},Ht.apiRTCManager.onFileSending=function(nn){if(St.transferCallIds.includes(nn.detail.callId)){var on={id:nn.detail.callId,name:nn.detail.name};Xt.get(ur(St)).emit("transferBegun",on)}},Ht.apiRTCManager.onFileProgress=function(nn){if(St.transferCallIds.includes(nn.detail.callId)){var on={id:nn.detail.callId,name:nn.detail.name,size:nn.detail.fileSize,remBytes:nn.detail.remainingSize,percentage:nn.detail.percentage};Xt.get(ur(St)).emit("transferProgress",on)}},Ht.apiRTCManager.onFileSended=function(nn){var on=St.transferCallIds.indexOf(nn.detail.callId);if(on>=0){var yn={id:nn.detail.callId,name:nn.detail.name};nn.detail.error&&(yn.error=nn.detail.error),Xt.get(ur(St)).emit("transferEnded",yn),St.transferCallIds.splice(on,1)}},Ht.apiRTCManager)er.onEvent(Gt,Ht.apiRTCManager[Gt]);Jl.set(ur(St),Ht);var en={MCUAvailableStream:function(nn){var on,yn=uo(nn.detail.streams);try{for(yn.s();!(on=yn.n()).done;){var On=on.value;if(On.room===St._getTechnicalName()){var Qn={contact:ro.getOrCreateContact(On.attributes.callerId),isRemote:nn.detail.isRemoteStream,hasAudio:On.audio,hasVideo:On.video,isAudioMuted:On.audioMuted,isVideoMuted:On.videoMuted,isScreensharing:On.attributes.callType==="screenSharing"||On.attributes.callType==="screenSharingWithAudio",isSIP:On.sip===!0,isSimulcast:On.simulcast===!0,streamId:On.id,type:"regular",callId:On.attributes.callId,descriptor:On.attributes.descriptor,context:On.context};St.conversationStreams.set(Qn.streamId,Qn);var tr={listEventType:"added"};Ut.g.assignObject(tr,Qn),Xt.get(ur(St)).emit("streamListChanged",tr)}}}catch(_i){yn.e(_i)}finally{yn.f()}jn.debug("Nb stream into conversation :"+St.conversationStreams.size);var dr,fr={},Ar=uo(St.conversationStreams.keys());try{for(Ar.s();!(dr=Ar.n()).done;){var Xr=dr.value;fr[Xr]=St.conversationStreams.get(Xr)}}catch(_i){Ar.e(_i)}finally{Ar.f()}Xt.get(ur(St)).emit("availableStreamsUpdated",fr)},MCUAvailableStreamUpdate:function(nn){var on,yn=uo(nn.detail.streams);try{for(yn.s();!(on=yn.n()).done;){var On=on.value;if(On.room===St._getTechnicalName()){var Qn=St.conversationStreams.get(On.id);if(Qn&&Qn.type==="regular"){Qn.hasAudio=On.audio,Qn.hasVideo=On.video,Qn.isAudioMuted=On.audioMuted,Qn.isVideoMuted=On.videoMuted,Qn.descriptor=On.attributes.descriptor;var tr={listEventType:"updated"};Ut.g.assignObject(tr,Qn),Xt.get(ur(St)).emit("streamListChanged",tr),Qn.descriptor&&Object.prototype.hasOwnProperty.call(Qn.descriptor,"priority")&&St.changeStreamPriority(Qn.streamId,!0,Qn.descriptor.priority)}}}}catch(_i){yn.e(_i)}finally{yn.f()}jn.debug("Nb stream into conversation :"+St.conversationStreams.size);var dr,fr={},Ar=uo(St.conversationStreams.keys());try{for(Ar.s();!(dr=Ar.n()).done;){var Xr=dr.value;fr[Xr]=St.conversationStreams.get(Xr)}}catch(_i){Ar.e(_i)}finally{Ar.f()}Xt.get(ur(St)).emit("availableStreamsUpdated",fr)},MCUAvailableComposite:function(nn){var on,yn=uo(nn.detail.streams);try{for(yn.s();!(on=yn.n()).done;){var On=on.value;if(On.room===St._getTechnicalName()){var Qn={isRemote:nn.detail.isRemoteStream,hasAudio:On.audio,hasVideo:On.video,isAudioMuted:On.audioMuted,isVideoMuted:On.videoMuted,isScreensharing:On.attributes.callType==="screenSharing"||On.attributes.callType==="screenSharingWithAudio",isSIP:On.sip===!0,streamId:On.id,type:"composite",callId:On.attributes.callId,descriptor:On.attributes.descriptor,context:On.context};St.conversationStreams.set(Qn.streamId,Qn);var tr={listEventType:"added"};Ut.g.assignObject(tr,Qn),Xt.get(ur(St)).emit("compositeListChanged",tr)}}}catch(dr){yn.e(dr)}finally{yn.f()}},MCUAvailableReplay:function(nn){var on,yn=uo(nn.detail.streams);try{for(yn.s();!(on=yn.n()).done;){var On=on.value;if(On.room===St._getTechnicalName()){var Qn={contact:ro.getOrCreateContact(On.attributes.callerId),isRemote:nn.detail.isRemoteStream,hasAudio:On.audio,hasVideo:On.video,isAudioMuted:On.audioMuted,isVideoMuted:On.videoMuted,isScreensharing:On.attributes.callType==="screenSharing"||On.attributes.callType==="screenSharingWithAudio",isSIP:On.sip===!0,streamId:On.id,type:"replay",callId:On.attributes.callId,descriptor:On.attributes.descriptor,context:On.context};St.conversationStreams.set(Qn.streamId,Qn);var tr={listEventType:"added"};Ut.g.assignObject(tr,Qn),Xt.get(ur(St)).emit("replayListChanged",tr)}}}catch(dr){yn.e(dr)}finally{yn.f()}},MCURemoveStream:function(nn){if(St.conversationStreams.has(nn.detail.streamId)){var on={listEventType:"removed"};Ut.g.assignObject(on,St.conversationStreams.get(nn.detail.streamId)),on.type==="regular"?Xt.get(ur(St)).emit("streamListChanged",on):on.type==="composite"&&Xt.get(ur(St)).emit("compositeListChanged",on),St.conversationStreams.delete(nn.detail.streamId),jn.debug("Nb stream into conversation :"+St.conversationStreams.size);var yn,On={},Qn=uo(St.conversationStreams.keys());try{for(Qn.s();!(yn=Qn.n()).done;){var tr=yn.value;On[tr]=St.conversationStreams.get(tr)}}catch(dr){Qn.e(dr)}finally{Qn.f()}Xt.get(ur(St)).emit("availableStreamsUpdated",On)}else jn.debug("Not a conversation's stream")},remoteStreamAdded:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){jn.info("remoteStreamAdded",nn.detail);var on=ro.getOrCreateContact(nn.detail.remoteId),yn=St.callIdToStreamId.get(nn.detail.callId),On=Ao.get(ur(St));On.has(yn)&&Xt.get(ur(St)).emit("streamRemoved",On.get(yn));var Qn=nn.detail.callType==="audio"?"audio":"video",tr=nn.detail.callType==="screenSharing",dr=new so(nn.detail.stream,{type:Qn,contact:on,streamId:yn,callId:nn.detail.callId,callAudioAvailable:nn.detail.audioIsAvailable,callAudioActive:nn.detail.audioIsActive,callAudioMuted:nn.detail.audioIsMuted,callVideoAvailable:nn.detail.videoIsAvailable,callVideoActive:nn.detail.videoIsActive,callVideoMuted:nn.detail.videoIsMuted,screensharing:tr,constructor:!0});dr.publishedInConversations.set(St.getName(),nn.detail.callId),Ao.get(ur(St)).set(yn,dr),apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.screenSharingStreamId===yn?(jn.debug("This is screensharing stream for remoteAccess"),dr.screensharingRemoteAccessStream=!0,apiRTC.session.remoteAccessInvitation.setRemoteAccessStream(dr)):Xt.get(ur(St)).emit("streamAdded",dr)}},remoteStreamRemoved:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn=Ao.get(ur(St));yn.has(on)&&(Xt.get(ur(St)).emit("streamRemoved",yn.get(on)),yn.delete(on))}},roomMemberUpdate:function(nn){jn.info("roomMemberUpdate event handler ",nn);var on,yn=[],On=uo(nn.detail.contactList);try{for(On.s();!(on=On.n()).done;){var Qn=on.value;yn.push(ro.getOrCreateContact(Qn.contactId))}}catch(tr){On.e(tr)}finally{On.f()}nn.detail.roomType==="whiteBoard"&&(jn.info("Received whiteboard room member update"),Xt.get(ur(St)).emit("whiteboardRoomMemberUpdate",{contacts:yn,roomId:nn.detail.roomId,status:nn.detail.status}))},slowLink:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on};nn.detail.advice&&(yn.advice=nn.detail.advice),Xt.get(ur(St)).emit("slowLink",yn)}},videoQualityChanged:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,hint:nn.detail.hint,profileType:nn.detail.profileType};nn.detail.bitrate&&(yn.bitrate=nn.detail.bitrate),nn.detail.width&&nn.detail.height&&(yn.width=nn.detail.width,yn.height=nn.detail.height),nn.detail.frameRate&&(yn.frameRate=nn.detail.frameRate),Xt.get(ur(St)).emit("videoQualityChanged",yn)}},simulcastFeedChanged:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,simulcast:nn.detail.simulcast};Xt.get(ur(St)).emit("simulcastFeedChanged",yn)}},localStreamUpdated:function(nn){if(nn.detail.onCall&&St.callIdToStreamId.has(nn.detail.callId)){var on={callId:nn.detail.callId,streamId:nn.detail.userMediaStreamId,audio:nn.detail.audioIsAvailable&&nn.detail.audioIsActive,audioMuted:nn.detail.audioIsMuted,audioSilent:nn.detail.audioIsSilent,video:nn.detail.videoIsAvailable&&nn.detail.videoIsActive,videoMuted:nn.detail.videoIsMuted,videoSilent:nn.detail.videoIsSilent,cause:nn.detail.cause};Xt.get(ur(St)).emit("localStreamUpdated",on)}},remoteStreamUpdated:function(nn){var on=nn.detail,yn=on.callId,On=on.cause;if(St.callIdToStreamId.has(yn)&&(On==="adaptation"||On==="userAction")){var Qn={callId:yn,streamId:St.callIdToStreamId.get(yn),audio:nn.detail.audioIsAvailable&&nn.detail.audioIsActive,audioMuted:nn.detail.audioIsMuted,audioSilent:nn.detail.audioIsSilent,video:nn.detail.videoIsAvailable&&nn.detail.videoIsActive,videoMuted:nn.detail.videoIsMuted,videoSilent:nn.detail.videoIsSilent,cause:On};setTimeout(function(){Xt.get(ur(St)).emit("remoteStreamUpdated",Qn)})}},MCURecordingStarted:function(nn){if(nn.detail.roomName===St._getTechnicalName()){var on=Ut.g.parseRecordingEvent("MCURecordingStarted",nn.detail);if(on.callId==="COMPOSITE")St.recordingStatus=on;else{var yn=St.conversationCalls.get(on.callId);yn&&(yn.recordingStatus=on)}Xt.get(ur(St)).emit("recordingStarted",on)}},MCURecordingStopped:function(nn){if(nn.detail.roomName===St._getTechnicalName()){var on=Ut.g.parseRecordingEvent("MCURecordingStopped",nn.detail);if(on.callId==="COMPOSITE")delete St.recordingStatus;else{var yn=St.conversationCalls.get(on.callId);yn&&delete yn.recordingStatus}Xt.get(ur(St)).emit("recordingStopped",on)}},MCURecordedStreamsAvailable:function(nn){if(nn.detail.roomName===St._getTechnicalName()){var on=Ut.g.parseRecordingEvent("MCURecordedStreamsAvailable",nn.detail);Xt.get(ur(St)).emit("recordingAvailable",on)}},MCUStreamingStarted:function(nn){if(nn.detail.roomName===St._getTechnicalName()){var on=$s("MCUStreamingStarted",nn.detail),yn=St.conversationCalls.get(on.callId);yn&&(yn.streamingStatus=on),Xt.get(ur(St)).emit("streamingStarted",on)}},MCUStreamingStopped:function(nn){if(nn.detail.roomName===St._getTechnicalName()){var on=$s("MCUStreamingStopped",nn.detail),yn=St.conversationCalls.get(on.callId);yn&&delete yn.streamingStatus,Xt.get(ur(St)).emit("streamingStopped",on)}},onCallStatsUpdate:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,stats:{}};nn.detail.userId&&(yn.mesh=!0,yn.userId=nn.detail.userId,yn.contact=ro.getOrCreateContact(nn.detail.userId));for(var On=0,Qn=Object.keys(nn.detail.stats);On<Qn.length;On++){var tr=Qn[On];Yp.has(tr)&&(yn.stats[tr]=nn.detail.stats[tr])}Xt.get(ur(St)).emit("callStatsUpdate",yn)}},cpuLimited:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,encodeUsagePercent:nn.detail.encodeUsagePercent};Xt.get(ur(St)).emit("cpuLimited",yn)}},bandwidthLimited:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,resolutionChanged:!0};Xt.get(ur(St)).emit("bandwidthLimited",yn)}},audioAmplitude:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn={callId:nn.detail.callId,streamId:on,amplitude:nn.detail.descriptor.amplitude,isSpeaking:nn.detail.descriptor.isSpeaking,descriptor:{amplitude:nn.detail.descriptor.amplitude,isSpeaking:nn.detail.descriptor.isSpeaking}};Xt.get(ur(St)).emit("audioAmplitude",yn)}},hangup:function(nn){if(St.callIdToStreamId.has(nn.detail.callId)){var on=St.callIdToStreamId.get(nn.detail.callId),yn=Ao.get(ur(St));yn.has(on)&&(Xt.get(ur(St)).emit("streamRemoved",yn.get(on)),yn.delete(on)),nn.detail.reason!=="restarted"&&nn.detail.reason!=="disconnected"&&nn.detail.reason!=="Broken_by_MCU"&&nn.detail.reason!=="RTC_Setup_Timeout"&&(St.conversationCalls.has(nn.detail.callId)?Bu(ur(St),nn.detail.callId):(St.callIdToStreamId.delete(nn.detail.callId),St.releaseResources(on,{isRemote:!0,triggerAdaptation:!0})),Xt.get(ur(St)).emit("hangup",{from:nn.detail.hangupType,reason:nn.detail.reason,streamId:on}))}},callRestarting:function(nn){if(St.callIdToStreamId.has(nn.detail.oldCallId)){var on=St.callIdToStreamId.get(nn.detail.oldCallId);St.callIdToStreamId.delete(nn.detail.oldCallId),St.callIdToStreamId.set(nn.detail.newCallId,on)}},MCUParticipantEjected:function(nn){if(St._getTechnicalName()===nn.detail.roomId){var on=wo.get(ur(St));if(nn.detail.clientId===on.getId())St.leave().catch(function(On){jn.error("leave",On)}).then(function(){Xt.get(ur(St)).emit("participantEjected",{self:!0})});else{var yn=ro.getOrCreateContact(nn.detail.clientId);Xt.get(ur(St)).emit("participantEjected",{self:!1,contact:yn})}}},MCURoomModeChanged:function(nn){St._getTechnicalName()===nn.detail.roomId&&Xt.get(ur(St)).emit("roomModeChanged",{oldMode:nn.detail.oldMode,newMode:nn.detail.newMode,state:nn.detail.state})}};return Xl.set(ur(St),en),Xt.get(ur(St)).on("left",function(){St.pgroupWaitingRoomSubscribedTo&&(er.apiRTCSession.unsubscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+St._getTechnicalName()]),St.pgroupWaitingRoomSubscribedTo=!1),Ds.set(ur(St),null),Ns.set(ur(St),null),wo.set(ur(St),null),js.set(ur(St),null)}),St}return jt=Yt,Qt=[{key:"destroy",value:function(){po.get().deleteConversation(this.getName());var Ct=Jl.get(this);if(Ct){if(Ct.apiRTCManager)for(var St in Ct.apiRTCManager)er.removeEventListener(St,Ct.apiRTCManager[St]);Ct.contactCatalog&&ro.removeUpdateListener(Ct.contactCatalog.onUpdate),Jl.delete(this)}}},{key:"getStatus",value:function(){return this.status}},{key:"getName",value:function(){return ts.get(this).toString()}},{key:"_getTechnicalName",value:function(){return ts.get(this).toString()}},{key:"getRole",value:function(){return Ds.get(this)}},{key:"getInstanceId",value:function(){return js.get(this)}},{key:"getFriendlyName",value:function(){return null}},{key:"getModerator",value:function(){return Ns.get(this)}},{key:"getType",value:function(){return ns.get(this)}},{key:"setType",value:function(Ct){return!this.isBound()&&!!ju.has(Ct)&&(ns.set(this,Ct),!0)}},{key:"getCloudConversationId",value:function(){var Ct=Po.get(this);return Ct?Ct.toString():null}},{key:"getMedia",value:function(Ct){return new Promise(function(St,Lt){apiRTC.CloudApi.cloudFetchMedia(Ct).then(function(Ht){St(Ht)}).catch(function(Ht){Lt(Ht)})})}},{key:"bind",value:function(Ct){var St=this;Ct||(Ct={});var Lt=Po.get(this);return Lt!==null?Promise.resolve(String(Lt)):new Promise(function(Ht,Gt){Fu(St,Ct).then(function(en){Ht(String(en.id))}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_HTTP,"bind() - cannot bind conversation",jn,{fromError:en}))})})}},{key:"isBound",value:function(){return Po.get(this)!==null}},{key:"isGroupChatJoined",value:function(){return this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED}},{key:"joinGroupChat",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED)return Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat",jn));Ct.bind().then(function(){return new Promise(function(Ht,Gt){if(Ct.asyncCallbacks)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - busy",jn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return er.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),delete Ct.asyncCallbacks,Gt(Ut.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - timeout",jn))},et.g.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY),Ct.asyncCallbacks.groupChatMemberUpdate=function(en){if(en.detail.groupChatId===Ct._getTechnicalName()&&en.detail.status==="online"&&function(nn,on){for(var yn=nn.length;--yn>=0;)if(nn[yn].contactId===on)return!0;return!1}(en.detail.contactList,er.getClientId()))return Ct.asyncCallbacks&&(er.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ht()},er.onEvent("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),er.joinGroupChat(Ct._getTechnicalName())})}).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_JOINED,er.joinAndSubscribeToPresenceGroup(Ct._getTechnicalName()),St()}).catch(function(Ht){Lt(Ut.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - cannot join group chat",jn,{fromError:Ht}))})})}},{key:"leaveGroupChat",value:function(){var Ct=this;return new Promise(function(St,Lt){return Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED?Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - group chat not joined",jn)):Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED?Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - webconf active",jn)):void er.leaveGroupChat(Ct._getTechnicalName()).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,er.leaveAndUnsubscribeToPresenceGroup(Ct._getTechnicalName()),St()}).catch(function(Ht){Lt(Ut.g.createError(et.g.ERROR_OTHER,"leaveGroupChat() - cannot leave group chat",jn,{fromError:Ht}))})})}},{key:"isJoined",value:function(){return this.status===et.g.CONVERSATION_STATUS_JOINED}},{key:"isPublishedStream",value:function(Ct){return Ct.publishedInConversations.has(this.getName())}},{key:"publish",value:function(Ct,St){var Lt=this;return St||(St={}),new Promise(function(Ht,Gt){if(Lt.status!==et.g.CONVERSATION_STATUS_JOINED)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - conversation not joined",jn));if(!(Ct instanceof so))return Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - No stream specified",jn));if(Lt.isPublishedStream(Ct))return Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - Stream is already published in this conversation!",jn));var en={};en.userMediaStreamId=Ct.userMediaStreamId,St!==null&&xs(St)==="object"&&(en.audioOnly=St.audioOnly,en.videoOnly=St.videoOnly,en.private=St.private,en.record=St.record,en.turnServerAddress=St.turnServerAddress,en.profileType=St.profileType,en.priority=St.priority,en.downgradeProfileList=St.downgradeProfileList,en.distributedBroadcastEnabled=St.distributedBroadcastEnabled),Ut.g.isPropertyTypeof(St,"mediaType","string")&&(en.mediaType=St.mediaType,en.audioOnly&&(en.mediaType="AUDIOONLY"),en.videoOnly&&(en.mediaType="VIDEOONLY")),Ut.g.isPropertyTypeof(St,"qos","object")&&(en.qos={},Ut.g.isPropertyTypeof(St.qos,"videoMinBitrate","number")&&(en.qos.videoMinBitrate=St.qos.videoMinBitrate),Ut.g.isPropertyTypeof(St.qos,"videoMinQuality","string")&&(en.qos.videoMinQuality=St.qos.videoMinQuality),Ut.g.isPropertyTypeof(St.qos,"videoStartBitrate","number")&&(en.qos.videoStartBitrate=St.qos.videoStartBitrate),Ut.g.isPropertyTypeof(St.qos,"videoStartQuality","string")&&(en.qos.videoStartQuality=St.qos.videoStartQuality),Ut.g.isPropertyTypeof(St.qos,"videoForbidInactive","boolean")&&(en.qos.videoForbidInactive=St.qos.videoForbidInactive)),Ut.g.isPropertyTypeof(St,"simulcast","object")&&!en.audioOnly&&(en.simulcast={},Ut.g.isPropertyTypeof(St.simulcast,"mode","string")&&["RID","SDP"].indexOf(St.simulcast.mode)>=0&&(en.simulcast.mode=St.simulcast.mode),Ut.g.isPropertyTypeof(St.simulcast,"maxBitrate","number")?en.simulcast.maxBitrate=St.simulcast.maxBitrate:Ut.g.isPropertyTypeof(St.simulcast,"encodings","object")&&(en.simulcast.encodings=Object.assign({},St.simulcast.encodings))),["audioLabels","videoLabels"].forEach(function(dr){Ut.g.isTypeof(St,dr,"array")&&(en[dr]=[],St[dr].forEach(function(fr){Ut.g.isTypeof(fr,"string")&&en[dr].push(fr)}))}),Ut.g.isPropertyTypeof(St,"context","object")&&(en.context=St.context);var nn=null;if(Ct.hasVideo()&&Lt.getNetworkCap({capacity:!0})&&St.profileType&&St.downgradeProfileList){for(var on=St.downgradeProfileList.length;--on>=0;)if(St.downgradeProfileList[on].name===St.profileType){St.downgradeProfileList[on].bitrate&&(nn=St.downgradeProfileList[on].bitrate);break}}if(nn){if(!Lt.reserveResources(St.profileType,nn,Ct.userMediaStreamId,!1,St.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:en.audioOnly,control:!0})&&!Lt.disableLowerPriorityVideo(!1,nn,St.priority)){if(!Ct.hasAudio())return Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - not enough bandwidth",jn));en.audioOnly=!0}Lt.reserveResources(St.profileType,nn,Ct.userMediaStreamId,!1,St.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:en.audioOnly})}jn.info("callConfiguration:",en);var yn=Ct.isScreensharing(),On=er.webRTCClient.publish(Lt.sessionId,Lt.sessionId,Lt.token,en,{},{forceScreenSharingCallType:yn});if(!On)return Lt.releaseResources(Ct.userMediaStreamId),Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - failed to establish call",jn));Lt.conversationCalls.set(On,new Gl(Lt,On,Ct)),Ct.publishedInConversations.set(Lt.getName(),On),Lt.callIdToStreamId.set(On,Ct.userMediaStreamId);var Qn={contact:null,isRemote:!1,hasAudio:Ct.hasAudio(),hasVideo:Ct.hasVideo(),isScreensharing:Ct.isScreensharing(),streamId:Ct.userMediaStreamId,callId:On};Lt.conversationPublishedStreams.set(Ct.userMediaStreamId,Qn);var tr={callEstablishedHandler:function(dr){dr.detail.callId.toString()===On.toString()&&(er.removeEventListener("callEstablished",tr.callEstablishedHandler),Lt.removeListener("error",tr.errorHandler),Ht(Ct))}};er.onEvent("callEstablished",tr.callEstablishedHandler),tr.errorHandler=function(dr){dr.callId===On&&(er.removeEventListener("callEstablished",tr.callEstablishedHandler),Lt.removeListener("error",tr.errorHandler),Lt.releaseResources(Ct.userMediaStreamId),Gt(Ut.g.createError(et.g.ERROR_OTHER,"publish() - "+dr.errorInfo,jn)))},Lt.on("error",tr.errorHandler)})}},{key:"unpublish",value:function(Ct,St){if(St||(St={}),Ct instanceof so)if(this.isPublishedStream(Ct)){var Lt=Ct.publishedInConversations.get(this.getName()),Ht=!St.noTriggerAdaptation;Bu(this,Lt,{stream:Ct,triggerAdaptation:Ht}),er.webRTCClient&&er.webRTCClient.unpublish(Lt)}else jn.error("unpublish() - Stream is not published to conversation");else jn.error("unpublish() - No stream specified",Ct)}},{key:"getConversationCall",value:function(Ct){if(!Ct)return null;var St=Ct.publishedInConversations.get(this.getName());return St?this.conversationCalls.get(St):null}},{key:"replacePublishedStream",value:function(Ct,St,Lt){var Ht=this;return jn.info("replacePublishedStream"),new Promise(function(Gt,en){var nn=Ht.getConversationCall(Ct);if(nn===null)return en(new Error("CALL_NOT_FOUND"));nn.replacePublishedStream(St,Lt).then(function(on){console.error("replacePublishedStream OK"),Gt(on)}).catch(function(on){console.error("replacePublishedStream NOK"),en(on)})})}},{key:"getCallId",value:function(Ct){return Ct.publishedInConversations.get(this.getName())}},{key:"checkAccess",value:function(Ct){var St=this;return Ct||(Ct={}),new Promise(function(Lt,Ht){if(Ct.force!==!0&&St.accessStatus)return Lt(St.accessStatus);Ct.hasOwnProperty("session")||Br.getActiveSession()===null||(Ct.session=Br.getActiveSession()),St.bind(Ct).then(function(Gt){return Ct.convId=Gt,Eo.checkConferenceAccess(St._getTechnicalName(),er.getActiveApiKey(),Ct)}).then(function(Gt){return Gt.access!==et.g.CONVERSATION_ACCESS_GRANTED&&Gt.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION&&jn.warn("checkAccess() - unknown access response:",Gt.access),Gt.role!==et.g.CONVERSATION_ROLE_MODERATOR&&Gt.role!==et.g.CONVERSATION_ROLE_CONTRIBUTOR&&Gt.role!==et.g.CONVERSATION_ROLE_GUEST&&jn.warn("checkAccess() - unknown role response:",Gt.role),Gt.hasOwnProperty("webconfId")&&(St.webconfId=Gt.webconfId,delete Gt.webconfId),St.accessStatus=Ut.g.assignObject({},Gt),Lt(St.accessStatus)}).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"checkAccess() - cannot check access",jn,{fromError:Gt}))})})}},{key:"join",value:function(){var Ct=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return jn.debug("Joining "+this.getName()),new Promise(function(Lt,Ht){if(Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED)return Ht(Ut.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",jn));St=Object.assign({},St);var Gt=!1;St.qualityAdaptationEnabled&&(Gt=!0,delete St.qualityAdaptationEnabled);var en=null;St.supportedVideoCodecs&&(en=St.supportedVideoCodecs,delete St.supportedVideoCodecs),Ct.checkAccess(St).then(function(nn){if(!Ct.conference){if(nn.type!=="public")return Promise.reject(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - wrong conference type",jn));if(nn.access!==et.g.CONVERSATION_ACCESS_GRANTED)return Promise.reject(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - access to conference not granted",jn))}return Qp(Ct,nn)}).then(function(nn){if(Ds.set(Ct,nn.role),Ct.status=et.g.CONVERSATION_STATUS_JOINING,Ct.conference)return St.hasOwnProperty("password")&&Us.set(Ct,St.password),Ct.friendlyName=nn.hasOwnProperty("friendlyName")?nn.friendlyName:Ct.friendlyName,js.set(Ct,nn.instanceId),Zp(Ct,wo.get(Ct),er.getActiveApiKey())}).then(function(){var nn=Ct,on=function Qn(tr){if(jn.debug("joinMCUSessionAnswer",nn._getTechnicalName(),tr.detail),tr.detail.roomId.toString()===nn._getTechnicalName()){if(tr.detail.result&&tr.detail.result.failed){jn.error("Conversation "+nn.getName()+" join failed",tr.detail),this.status=et.g.CONVERSATION_STATUS_NOT_JOINED;var dr=tr.detail.result.reason?tr.detail.result.reason:"join failed";return Ht(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - "+dr,jn))}jn.info("Conversation "+nn.getName()+" joined",tr.detail),er.removeEventListener("joinMCUSessionAnswer",Qn),nn.status=et.g.CONVERSATION_STATUS_JOINED,nn.token=tr.detail.token,nn.sessionId=tr.detail.sessionId,nn.mode=tr.detail.mode,nn.conversationStreams=new Map;var fr=Xl.get(nn);er.onEvent("MCUAvailableStream",fr.MCUAvailableStream).onEvent("MCUAvailableStreamUpdate",fr.MCUAvailableStreamUpdate).onEvent("MCURemoveStream",fr.MCURemoveStream).onEvent("MCUAvailableComposite",fr.MCUAvailableComposite).onEvent("MCUAvailableReplay",fr.MCUAvailableReplay).onEvent("MCUParticipantEjected",fr.MCUParticipantEjected).onEvent("remoteStreamAdded",fr.remoteStreamAdded).onEvent("remoteStreamRemoved",fr.remoteStreamRemoved).onEvent("roomMemberUpdate",fr.roomMemberUpdate).onEvent("slowLink",fr.slowLink).onEvent("localStreamUpdated",fr.localStreamUpdated).onEvent("remoteStreamUpdated",fr.remoteStreamUpdated).onEvent("simulcastFeedChanged",fr.simulcastFeedChanged).onEvent("MCURecordingStarted",fr.MCURecordingStarted).onEvent("MCURecordingStopped",fr.MCURecordingStopped).onEvent("MCURecordedStreamsAvailable",fr.MCURecordedStreamsAvailable).onEvent("MCUStreamingStarted",fr.MCUStreamingStarted).onEvent("MCUStreamingStopped",fr.MCUStreamingStopped).onEvent("MCURoomModeChanged",fr.MCURoomModeChanged).onEvent("onCallStatsUpdate",fr.onCallStatsUpdate).onEvent("hangup",fr.hangup).onEvent("callRestarting",fr.callRestarting).onEvent("audioAmplitude",fr.audioAmplitude).onEvent("videoQualityChanged",fr.videoQualityChanged).onEvent("cpuLimited",fr.cpuLimited).onEvent("bandwidthLimited",fr.bandwidthLimited),nn.conference&&nn.updateData(),nn.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(er.apiRTCSession.subscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+nn._getTechnicalName()]),nn.pgroupWaitingRoomSubscribedTo=!0),nn.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED&&(nn.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED),Xt.get(nn).emit("joined");var Ar={};tr.detail.mode==="mesh"&&(Ar.mode="mesh",tr.detail.meshOnly===!0&&(Ar.meshOnly=!0)),Lt(Ar)}};er.onEvent("joinMCUSessionAnswer",on);var yn={};yn.convId=Ct.getCloudConversationId(),Ct.meshModeEnabled&&(yn.meshModeEnabled=Ct.meshModeEnabled),Ct.meshOnlyEnabled&&(yn.meshOnlyEnabled=Ct.meshOnlyEnabled),Ct.conference||(Ct.moderationEnabled&&(yn.moderationEnabled=!0),Ct.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(yn.moderator=!0)),Gt&&(yn.qualityAdaptationEnabled=!0),en&&(yn.supportedVideoCodecs=en);var On=er.webRTCClient.joinMCUSession(Ct._getTechnicalName(),yn);if(On instanceof Error)return er.removeEventListener("joinMCUSessionAnswer",on),nn.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Ht(Ut.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation :"+On.message,jn))}).catch(function(nn){return Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Ht(Ut.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",jn,{fromError:nn}))})})}},{key:"cancelJoin",value:function(){return this.cancelJoin0!==null&&typeof this.cancelJoin0=="function"&&this.cancelJoin0()}},{key:"eject",value:function(Ct,St){var Lt=this;return new Promise(function(Ht,Gt){if(Lt.status!==et.g.CONVERSATION_STATUS_JOINED)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"eject() - conference not joined",jn));if(Lt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return Gt(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"eject() - only moderator can eject a contact",jn));var en={};en.timeoutId=setTimeout(function(){return en&&(er.removeEventListener("MCUParticipantEjected",en.ejected),en=!1),Gt(Ut.g.createError(et.g.ERROR_OTHER,"eject() - timeout",jn))},et.g.CONVERSATION_PARTICIPANT_EJECTION_DELAY),en.ejected=function(nn){if(nn.detail.roomId===Lt._getTechnicalName()&&nn.detail.clientId===Ct.getId())return en&&(clearTimeout(en.timeoutId),er.removeEventListener("MCUParticipantEjected",en.ejected),en=!1),Ht()},er.onEvent("MCUParticipantEjected",en.ejected),er.webRTCClient.ejectParticipantFromMCUSession(Ct.getId(),St)})}},{key:"allowEntry",value:function(Ct,St){var Lt=this;return St||(St={}),new Promise(function(Ht,Gt){if(Lt.status!==et.g.CONVERSATION_STATUS_JOINED)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"allowEntry() - conference not joined",jn));if(!(Ct instanceof No))return Gt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"allowEntry() - parameter is not an instance of apiRTC.Contact",jn));if(Lt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return Gt(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"allowEntry() - only moderator can allow entry to a contact",jn));var en={roomname:Lt._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!0,command:"access",value:{access:!0}};if(St.hasOwnProperty("invitationId")&&(en.invitationId=St.invitationId),St.hasOwnProperty("answer")&&(en.answer=St.answer),er.sendData(Ct.getId(),en).catch(function(on){var yn=Ut.g.createError(on,"Notification not delivered",jn);Xt.get(Lt).emit("messageNotDelivered",{error:yn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),St.ackEnabled===!0){var nn=setInterval(function(){en.command="access-new",er.sendData(Ct.getId(),en).catch(function(on){var yn=Ut.g.createError(on,"Notification not delivered",jn);Xt.get(Lt).emit("messageNotDelivered",{error:yn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL);er.onEvent("receiveData",function on(yn){var On=ro.getOrCreateContact(yn.detail.senderId);yn.detail.hasOwnProperty("data")&&yn.detail.data.command==="access-ack"&&yn.detail.data.roomname===Lt._getTechnicalName()&&On.getId()===Ct.getId()&&(clearInterval(nn),er.removeEventListener("receiveData",on))})}return Ht()})}},{key:"denyEntry",value:function(Ct,St){var Lt=this;return St||(St={}),new Promise(function(Ht,Gt){if(Lt.status!==et.g.CONVERSATION_STATUS_JOINED)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"denyEntry() - conference not joined",jn));if(!(Ct instanceof No))return Gt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"denyEntry() - parameter is not an instance of apiRTC.Contact",jn));if(Lt.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return Gt(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"denyEntry() - only moderator can deny entry to a contact",jn));var en={roomname:Lt._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!1,command:"access",value:{access:!1}};return St.hasOwnProperty("invitationId")&&(en.invitationId=St.invitationId),St.hasOwnProperty("answer")&&(en.answer=St.answer),St.hasOwnProperty("reason")&&(en.reason=St.reason),er.sendData(Ct.getId(),en).catch(function(nn){var on=Ut.g.createError(nn,"Notification not delivered",jn);Xt.get(Lt).emit("messageNotDelivered",{error:on,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),Ht()})}},{key:"sendJoinRequest",value:function(){var Ct=this;if(this.status===et.g.CONVERSATION_STATUS_WAITING){if(!this.joinRequestIntervalId){var St=Xp(this);St&&(er.sendData(St,{roomname:this._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:this._getTechnicalName(),sendTime:Date.now(),command:"userWaiting",value:{username:$u()}}).catch(function(Lt){var Ht=Ut.g.createError(Lt,"Notification not delivered",jn);Xt.get(Ct).emit("messageNotDelivered",{error:Ht,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting"})}),this.joinRequestIntervalId=setInterval(function(){er.sendData(St,{roomname:Ct._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:Ct._getTechnicalName(),sendTime:Date.now(),command:"userWaiting-new",value:{username:$u()}}).catch(function(Lt){var Ht=Ut.g.createError(Lt,"Notification not delivered",jn);Xt.get(Ct).emit("messageNotDelivered",{error:Ht,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting-new"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL))}}else jn.error("sendJoinRequest() - Not in conversation's waiting room, cannot send join request")}},{key:"leave",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"leave() - webconf not joined",jn));for(var Ht=Xl.get(Ct),Gt=0,en=Object.keys(Ht);Gt<en.length;Gt++){var nn=en[Gt];jn.info("Session, removing apiRTCManager event :",nn);var on=Ht[nn];er.removeEventListener(nn,on)}var yn,On=uo(Ct.conversationStreams.keys());try{for(On.s();!(yn=On.n()).done;){var Qn=yn.value;jn.trace("Leave() - unsubscribe to "+Qn),er.webRTCClient!==null&&er.webRTCClient.unsubscribe(Qn)}}catch(tr){On.e(tr)}finally{On.f()}Ql(Ct,!1,!1).then(function(){}).catch(function(tr){}),er.webRTCClient!==null&&er.IMClient.leaveGroupChat(Ct._getTechnicalName()),Ct.whiteboardStarted===et.g.CONVERSATION_WHITEBOARD_STARTED&&er.whiteBoardClient.roomId===Ct._getTechnicalName()&&(er.whiteBoardClient.leaveRoom(),er.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED),er.webRTCClient!==null&&er.webRTCClient.leaveMCUSession(),Ct.conversationStreams=new Map,Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Xt.get(Ct).emit("left"),St()})}},{key:"subscribeToStream",value:function(Ct,St){var Lt=this;if(St||(St={}),jn.debug("subscribeToMedia",Ct),!this.isJoined())return Promise.reject(Ut.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - conversation not joined",jn));var Ht={};St.turnServerAddress!==null&&St.turnServerAddress!==void 0&&(Ht.turnServerAddress=St.turnServerAddress),Ut.g.isPropertyTypeof(St,"qos","object")&&(Ht.qos={},Ut.g.isPropertyTypeof(St.qos,"videoForbidInactive","boolean")&&(Ht.qos.videoForbidInactive=St.qos.videoForbidInactive));var Gt=Number(Ct),en=er.webRTCClient.getStreamFromList(Gt),nn=this.conversationStreams.get(Gt);if(!en||!nn)return Promise.reject(Ut.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - no such stream",jn));if(Ut.g.isPropertyTypeof(St,"simulcast","object")){var on=["high","medium","low"];Ht.simulcast={},St.simulcast.streamQuality&&(on.indexOf(St.simulcast.streamQuality)>=0?Ht.simulcast.streamQuality=St.simulcast.streamQuality:Ht.simulcast.streamQuality="default"),St.simulcast.streamFrameRate&&(on.indexOf(St.simulcast.streamFrameRate)>=0?Ht.simulcast.streamFrameRate=St.simulcast.streamFrameRate:Ht.simulcast.streamFrameRate="default")}return new Promise(function(yn,On){var Qn="VIDEO";if(nn.hasVideo&&Lt.getNetworkCap({capacity:!0})&&Ut.g.isPropertyTypeof(nn,"descriptor","object")){var tr=nn.descriptor;if(!Lt.reserveResources(tr.profileType,tr.bitrate,Gt,!0,tr.priority,{isVideoOnly:!nn.hasAudio,isVideoMuted:St.audioOnly,control:!0})&&!Lt.disableLowerPriorityVideo(!0,tr.bitrate,tr.priority)){if(!nn.hasAudio)return On(Ut.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - not enough bandwidth",jn));St.audioOnly=!0}Lt.reserveResources(tr.profileType,tr.bitrate,Gt,!0,tr.priority,{isVideoOnly:!nn.hasAudio,isVideoMuted:St.audioOnly})}St.audioOnly===!0?Qn="AUDIOONLY":St.videoOnly===!0&&(Qn="VIDEOONLY");var dr=er.webRTCClient.subscribe([en],Qn,{},Ht,St)[0];if(!dr)return Lt.releaseResources(Gt),On(Ut.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - stream not available",jn));Lt.callIdToStreamId.set(dr,Gt),jn.debug("Subscribed to stream "+Ct+" through call "+dr);var fr={streamAddedHandler:function(Ar){Ar.streamId===Gt&&(Lt.removeListener("streamAdded",fr.streamAddedHandler),Lt.removeListener("error",fr.errorHandler),yn(Ar))}};Lt.on("streamAdded",fr.streamAddedHandler),fr.errorHandler=function(Ar){Ar.callId===dr&&(Lt.removeListener("streamAdded",fr.streamAddedHandler),Lt.removeListener("error",fr.errorHandler),Lt.releaseResources(Gt),On(Ut.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - "+Ar.errorInfo,jn)))},Lt.on("error",fr.errorHandler)})}},{key:"updateSubscribedStream",value:function(Ct,St){St||(St={});var Lt=Number(Ct);if(!Ao.get(this).has(Lt))return jn.error("updateSubscribedStream() - Conversation stream "+Ct+" does not exist or was not subscribed to"),Promise.reject("wrong streamId");var Ht=Ao.get(this).get(Lt);if(Ut.g.isTypeof(St.simulcast,"object"))return er.webRTCClient.webRTCClient.updateSimulcastFeedOnCall(Ht.callId,St.simulcast);var Gt="VIDEO";return St.audioOnly===!0?Gt="AUDIOONLY":St.videoOnly===!0&&(Gt="VIDEOONLY"),er.webRTCClient.webRTCClient.updateMediaTypeOnCall(Ht.callId,Gt)}},{key:"unsubscribeToStream",value:function(Ct,St){St||(St={});var Lt=Number(Ct);er.webRTCClient!==null&&er.webRTCClient.unsubscribe(Lt);var Ht=!St.noTriggerAdaptation;this.releaseResources(Ct,{isRemote:!0,triggerAdaptation:Ht})}},{key:"subscribeToMedia",value:function(Ct,St){return this.subscribeToStream(Ct,St)}},{key:"unsubscribeToMedia",value:function(Ct){this.unsubscribeToStream(Ct)}},{key:"startRecording",value:function(Ct){var St=this;return Ct||(Ct={}),new Promise(function(Lt,Ht){if(St.status!==et.g.CONVERSATION_STATUS_JOINED)return Ht(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - conversation not joined",jn));if(St.asyncCallbacks)return Ht(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",jn));St.asyncCallbacks={},St.asyncCallbacks.timeoutId=setTimeout(function(){return St.asyncCallbacks&&(er.removeEventListener("error",St.asyncCallbacks.error),er.removeEventListener("MCURecordingStarted",St.asyncCallbacks.recordingStarted),delete St.asyncCallbacks),Ht(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",jn))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),St.asyncCallbacks.error=function(on){if(String(on.detail.convId)===St.getCloudConversationId()&&on.detail.callId==="COMPOSITE"&&on.detail.errorCode.indexOf("START_RECORD")>=0)return St.asyncCallbacks&&(er.removeEventListener("error",St.asyncCallbacks.error),er.removeEventListener("MCURecordingStarted",St.asyncCallbacks.recordingStarted),clearTimeout(St.asyncCallbacks.timeoutId),delete St.asyncCallbacks),Ht(Ut.g.createError(et.g.ERROR_OTHER,"startRecording() - "+on.detail.errorInfo,jn))},St.asyncCallbacks.recordingStarted=function(on){if(String(on.detail.convId)===St.getCloudConversationId()&&on.detail.callId==="COMPOSITE"){St.asyncCallbacks&&(er.removeEventListener("error",St.asyncCallbacks.error),er.removeEventListener("MCURecordingStarted",St.asyncCallbacks.recordingStarted),clearTimeout(St.asyncCallbacks.timeoutId),delete St.asyncCallbacks);var yn=Ut.g.parseRecordingEvent("MCURecordingStarted",on.detail);return Lt(yn)}},er.onEvent("error",St.asyncCallbacks.error),er.onEvent("MCURecordingStarted",St.asyncCallbacks.recordingStarted);var Gt="AUDIO-VIDEO";Ct.audioOnly===!0?Gt="AUDIO-ONLY":Ct.videoOnly===!0&&(Gt="VIDEO-ONLY");var en="composite";Ut.g.isPropertyTypeof(Ct,"customIdInFilename","string")&&(en=Ct.customIdInFilename);var nn={};Ut.g.isPropertyTypeof(Ct,"data","object")&&(nn=Ut.g.assignObject({},Ct.data)),["complete","efficient","audioOnly"].indexOf(Ct.mode)>=0?nn.mode=Ct.mode:nn.mode="complete",nn.labelEnabled=Ct.labelEnabled===!0,nn.labelEnabled===!0&&(nn.labels=[],Ut.g.isTypeof(Ct.labels,"array")&&Ct.labels.forEach(function(on){Ut.g.isTypeof(on,"string")&&nn.labels.push(on)})),Ut.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(nn.ttl=Ct.ttl),er.webRTCClient.startCompositeRecording(Gt,en,St.getCloudConversationId(),nn)})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.asyncCallbacks)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",jn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(er.removeEventListener("error",Ct.asyncCallbacks.error),er.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),St(Ct.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Ht){if(String(Ht.detail.convId)===Ct.getCloudConversationId()&&Ht.detail.callId==="COMPOSITE"&&Ht.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(er.removeEventListener("error",Ct.asyncCallbacks.error),er.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Ht.detail.errorInfo,jn))},Ct.asyncCallbacks.recordingStopped=function(Ht){if(String(Ht.detail.convId)===Ct.getCloudConversationId()&&Ht.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(er.removeEventListener("error",Ct.asyncCallbacks.error),er.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var Gt=Ut.g.parseRecordingEvent("MCURecordingStopped",Ht.detail);return St(Gt)}},er.onEvent("error",Ct.asyncCallbacks.error),er.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),er.webRTCClient.stopCompositeRecording()})}},{key:"getContacts",value:function(){jn.debug("getContacts()");var Ct={};if(this.isBound()){var St,Lt=Ro.get().getContacts(this._getTechnicalName()),Ht=uo(Lt.keys());try{for(Ht.s();!(St=Ht.n()).done;){var Gt=St.value;Ct[Gt]=Lt.get(Gt)}}catch(en){Ht.e(en)}finally{Ht.f()}}else jn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsArray",value:function(){jn.debug("getContactsArray()");var Ct=[];if(this.isBound()){var St,Lt=Ro.get().getContacts(this._getTechnicalName()),Ht=uo(Lt.keys());try{for(Ht.s();!(St=Ht.n()).done;){var Gt=St.value;Ct.push(Lt.get(Gt))}}catch(en){Ht.e(en)}finally{Ht.f()}}else jn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsNumber",value:function(){jn.debug("getContactsNumber()");var Ct=0;return this.isBound()?Ct=Ro.get().getContacts(this._getTechnicalName()).size:jn.warn("getContactsNumber() - Cannot get contacts as conversation is not joined"),Ct}},{key:"getData",value:function(){return jn.debug("getData()"),this.isBound()||jn.warn("getData() - Cannot get most recent data as conversation is not joined, you may want to call Conversation.updateData() instead"),Ko.get(this)}},{key:"setData",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){St.bind().then(function(){return Eo.setConversationData(Po.get(St),JSON.stringify(Ct),er.getActiveApiKey(),{token:wo.get(St).token})}).then(function(){Ko.set(St,Ct),er.dataClient.sendDataToGroup(St._getTechnicalName(),{event:et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER,roomname:St._getTechnicalName()}),Lt()}).catch(function(){Ht(Ut.g.createError(et.g.ERROR_OTHER,"setData() - cannot set conversation data",jn))})})}},{key:"updateData",value:function(){var Ct=this;return new Promise(function(St,Lt){(Ct.isBound()?Fu(Ct):Ct.bind()).then(function(){St(),Xt.get(Ct).emit("persistentDataUpdated",Ko.get(Ct))}).catch(function(Ht){Lt(Ut.g.createError(et.g.ERROR_OTHER,"updateData() - cannot update conversation data",jn,{fromError:Ht}))})})}},{key:"getAvailableMediaList",value:function(){return jn.warn("Function deprecated, please use Conversation.getAvailableStreamList() instead"),this.getAvailableStreamList()}},{key:"getAvailableStreamList",value:function(){var Ct,St=[],Lt=uo(this.conversationStreams.keys());try{for(Lt.s();!(Ct=Lt.n()).done;){var Ht=Ct.value;St.push(this.conversationStreams.get(Ht))}}catch(Gt){Lt.e(Gt)}finally{Lt.f()}return St}},{key:"getStreamInfo",value:function(Ct){return this.conversationStreams.get(Ct)}},{key:"getSubscribedStream",value:function(Ct){return Ao.get(this).get(Number(Ct))}},{key:"linkWhiteboardClientToConversation",value:function(){jn.warn("DEPRECATED : linkWhiteboardClientToConversation : no more needed")}},{key:"startNewWhiteboardSession",value:function(Ct,St){var Lt=this;return jn.debug("startNewWhiteboardSession()"),new Promise(function(Ht,Gt){Lt.bind().then(function(){if(Lt.asyncCallbacks)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - busy",jn));if(Lt.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_NOT_STARTED)return Ht();er.whiteBoardClient.start(),Lt.asyncCallbacks={},Lt.asyncCallbacks.ackHandler=function(nn){var on=nn.detail;on.roomId===Lt._getTechnicalName()&&on.roomType==="whiteBoard"&&(on.eventType==="roomCreation"&&on.status==="roomCreated"||on.eventType==="roomJoined"&&on.status==="roomJoined")&&(Lt.asyncCallbacks&&(er.removeEventListener("roomCreation",Lt.asyncCallbacks.ackHandler),er.removeEventListener("roomJoined",Lt.asyncCallbacks.ackHandler),clearTimeout(Lt.asyncCallbacks.timeoutId),delete Lt.asyncCallbacks),er.whiteBoardClient.setCanvas(Ct),St!=null&&er.whiteBoardClient.setUserCursorColor(St),er.whiteBoardClient.deleteHistory(),Lt.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_STARTED,Ht())},er.onEvent("roomCreation",Lt.asyncCallbacks.ackHandler),er.onEvent("roomJoined",Lt.asyncCallbacks.ackHandler),Lt.asyncCallbacks.timeoutId=setTimeout(function(){return Lt.asyncCallbacks&&(er.removeEventListener("roomCreation",Lt.asyncCallbacks.ackHandler),er.removeEventListener("roomJoined",Lt.asyncCallbacks.ackHandler),delete Lt.asyncCallbacks),Gt(Ut.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - timeout",jn))},et.g.CONVERSATION_WHITEBOARD_START_DELAY);var en=Lt.getCloudConversationId();er.whiteBoardClient.joinRoom(Lt._getTechnicalName(),{convId:en,webconf:!0})}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - cannot start whiteboard session",jn,{fromError:en}))})})}},{key:"stopNewWhiteboardSession",value:function(){var Ct=this;return jn.debug("stopNewWhiteboardSession()"),new Promise(function(St,Lt){Ct.bind().then(function(){return Ct.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_STARTED?(jn.error("Conversation is not joined!"),Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - Conversation not joined",jn))):er.whiteBoardClient.roomId!==Ct._getTechnicalName()?(jn.error("Whiteboard session is not joined for this conversation!"),Lt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - whiteboard not joined",jn))):(er.whiteBoardClient.leaveRoom(),er.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,void St())}).catch(function(Ht){Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopNewWhiteboardSession() - cannot stop whiteboard session",jn,{fromError:Ht}))})})}},{key:"enablePointerSharing",value:function(Ct){return Ql(this,!0,Ct)}},{key:"sendPointerLocation",value:function(Ct,St,Lt,Ht){er.pointerSharingClient.sendPointerLocation(this._getTechnicalName(),Ct,St,Lt,Ht)}},{key:"sendData",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){St.bind().then(function(){er.dataClient.sendDataToGroup(St._getTechnicalName(),{event:et.g.CONVERSATION_SEND_DATA_IDENTIFIER,content:Ct,roomname:St._getTechnicalName()}),Lt()}).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_OTHER,"sendData() - cannot send data",jn))})})}},{key:"sendRawData",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){St.bind().then(function(){er.dataClient.sendDataToGroup(St._getTechnicalName(),Ct),Lt()}).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_OTHER,"sendRawData() - cannot send data",jn))})})}},{key:"sendCustomEvent",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){St.bind().then(function(){var en=Lt;en.event=Ct,en.roomname=St._getTechnicalName(),er.dataClient.sendDataToGroup(St._getTechnicalName(),en),Ht()}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - cannot send data",jn))})})}},{key:"sendMessage",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=function(Gt){return new Promise(function(en,nn){var on=wo.get(St);on!==null?Eo.saveGroupChatMessage(St,on,er.getActiveApiKey(),Ct,Gt,Lt).then(function(){en(Gt)}).catch(nn):en(Gt)})};return new Promise(function(Gt,en){if(St.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED&&St.status!==et.g.CONVERSATION_STATUS_JOINED)return en(Ut.g.createError(et.g.ERROR_WRONG_STATE,"sendMessage() - group chat not joined",jn));if(Ct===null||typeof Ct!="string")return en(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - wrong type of message",jn));if(Ct==="")return en(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",jn));var nn={};Ut.g.isTypeof(Lt,"metadata","object")&&(nn.metadata=Lt.metadata),er.sendMessageToGroupChat(St._getTechnicalName(),Ct,nn).then(function(on){Ht(on).then(function(){Gt(on)}).catch(function(yn){en(Ut.g.createError(et.g.ERROR_OTHER,"sendMessage() - error on save",jn,{fromError:yn}))})}).catch(function(on){en(Ut.g.createError(et.g.ERROR_OTHER,"sendMessage() - cannot send message",jn,{fromError:on}))})})}},{key:"pushMedia",value:function(Ct,St){var Lt=this;return St||(St={}),new Promise(function(Ht,Gt){Lt.bind().then(function(){return St.hasOwnProperty("token")||(St.token=wo.get(Lt).token),Eo.pushConversationMedia(Po.get(Lt),Ct,er.getActiveApiKey(),St)}).then(function(en){er.dataClient.sendDataToGroup(Lt._getTechnicalName(),{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:Lt._getTechnicalName(),media:{url:en.url,id:en.id},command:"new_snapshot",value:{snapshot:en.url}}),Ht({url:en.url,id:en.id})}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"pushMedia() - cannot push media",jn,{fromError:en}))})})}},{key:"pushData",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt=Ut.g.assignObject({},Lt),new Promise(function(Ht,Gt){if(er.webRTCClient.webRTCClient.dataChannelCapable!==!0||Lt.forceHTTP===!0){if(!Ct.file)return Gt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"pushData() - missing file",jn));var en={};if(Ut.g.isTypeof(Ct,"metadata","object"))try{en.metadata=JSON.stringify(Ct.metadata)}catch(nn){jn.error("JSON.stringify",nn)}en.asFile=!0,Ut.g.isTypeof(Ct,"filename","string")?en.filename=Ct.filename:en.filename=Ct.file.name,Ct.overwrite===!0&&(en.overwrite=!0),Ut.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(en.ttl=Ct.ttl),St.pushMedia(Ct.file,en).then(Ht).catch(Gt)}else St.bind().then(function(){var nn=St._getTechnicalName(),on={};Lt.hasOwnProperty("turnServerAddress")&&(on.turnServerAddress=Lt.turnServerAddress,delete Lt.turnServerAddress);var yn=er.webRTCClient.webRTCClient.pushData(St.getCloudConversationId(),Ct,on,{success:function(On){if(On.state!=="complete")return Gt(Ut.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",jn));er.dataClient.sendDataToGroup(nn,{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:nn,media:{url:On.mediaURL,id:On.mediaId},command:"new_snapshot",value:{snapshot:On.mediaURL}}),Ht({url:On.mediaURL,id:On.mediaId})},failure:function(On,Qn){if(On==="iceFailed"){var tr=Ut.g.assignObject({},Lt);return tr.forceHTTP=!0,void St.pushData(Ct,tr).then(Ht).catch(Gt)}if(On==="timeout"){if(Qn){var dr=St.transferCallIds.indexOf(Qn);dr>=0&&St.transferCallIds.splice(dr,1)}return Gt(Ut.g.createError(et.g.ERROR_TIMED_OUT,"pushData() - push data timed out",jn))}return Gt(On==="canceled"?Ut.g.createError(et.g.ERROR_OPERATION_CANCELED,"pushData() - push data canceled",jn):Ut.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",jn,{fromError:On}))}});if(!yn)return Gt(Ut.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",jn));St.transferCallIds.push(yn)}).catch(function(nn){return Gt(Ut.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",jn,{fromError:nn}))})})}},{key:"cancelPushData",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){if(!St.transferCallIds.includes(Ct))return Ht(Ut.g.createError(et.g.ERROR_OTHER,"cancelPushData() - no such push data",jn));var Gt=er.webRTCClient.webRTCClient.cancelPushData(Ct);if(Gt)return Ht(Ut.g.createError(et.g.ERROR_OTHER,"cancelPushData() - "+Gt,jn));Lt()})}},{key:"fetchMediaList",value:function(Ct,St){var Lt=this;return St||(St={}),new Promise(function(Ht,Gt){Lt.bind().then(function(){return Object.prototype.hasOwnProperty.call(St,"token")||(Ut.g.isTypeof(Ct,"object")&&Ct instanceof Br?St.token=Ct.getToken():St.token=wo.get(Lt).token),Eo.getConversationMediaList(Po.get(Lt),er.getActiveApiKey(),St)}).then(Ht).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"fetchMediaList() - cannot fetch media list",jn,{fromError:en}))})})}},{key:"getWaitingRoomContacts",value:function(){jn.debug("getWaitingRoomContacts()");var Ct={};if(this.status!==et.g.CONVERSATION_STATUS_JOINED)jn.error("getWaitingRoomContacts() - Conversation is not joined, cannot get waiting room contacts");else if(this.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)jn.error("getWaitingRoomContacts() - Role is not moderator, cannot get waiting room contacts");else{var St,Lt=Ro.get().getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+this._getTechnicalName()),Ht=uo(Lt.keys());try{for(Ht.s();!(St=Ht.n()).done;){var Gt=St.value;Ct[Gt]=Lt.get(Gt)}}catch(en){Ht.e(en)}finally{Ht.f()}}return Ct}},{key:"fetchMessageHistory",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ht,Gt){St.bind().then(function(){return Object.prototype.hasOwnProperty.call(Lt,"token")?Eo.loadGroupChatMessages(St,null,Lt.token):(Ut.g.isTypeof(Ct,"object")&&Ct instanceof Br||(Ct=wo.get(St)),Eo.loadGroupChatMessages(St,Ct))}).then(function(en){var nn=en.map(function(on){var yn={content:on.content,timestamp:1e3*on.created_at,date:new Date(1e3*on.created_at),sender_id:on.user_id,display_name:on.display_name};return on.user_id.toString()!==Ct.getId()&&(yn.sender=Ct.getOrCreateContact(on.user_id)),yn});Ht(nn)}).catch(function(en){Gt(Ut.g.createError(et.g.ERROR_OTHER,"fetchMessageHistory() - cannot fetch message history",jn))})})}},{key:"sendInvitation",value:function(Ct,St){var Lt=this;if(St||(St={}),Ct instanceof No){jn.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||jn.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Ht={receiveNotifier:new dt};St.hasOwnProperty("expirationTime")&&(Ht.expirationTime=St.expirationTime);var Gt=new Do(Ct,this,Ht);Gt.type="conversation";var en={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:Gt.id,roomname:this._getTechnicalName(),sendTime:Gt.sendTime,conversationTypes:[]};return this.status===et.g.CONVERSATION_STATUS_JOINED?en.conversationTypes.push("WEBCONF"):this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED&&en.conversationTypes.push("GROUP_CHAT"),er.sendData(Ct.getId(),en).then(function(){Ht.receiveNotifier.emit("receive")}).catch(function(nn){var on=Ut.g.createError(nn,"Invitation not delivered",jn);Xt.get(Lt).emit("messageNotDelivered",{error:on,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),Gt}return jn.error("Parameter is not a contact"),null}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"setNetworkCap",value:function(Ct,St){return typeof Ct!="number"||typeof St!="number"?(jn.error("setNetworkCap - wrong cap",Ct,St),!1):Ct<=0||St<=0?(this.uploadCap=null,this.downloadCap=null,!0):(this.uploadCap=Ct,this.downloadCap=St,!0)}},{key:"getNetworkCap",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.uploadCap||!this.downloadCap)return null;if(Ct.capacity)return[this.uploadCap,this.downloadCap];for(var St=this.uploadCap,Lt=this.downloadCap,Ht=this.reservedStreams.length;--Ht>=0;)this.reservedStreams[Ht].isVideoMuted||(this.reservedStreams[Ht].isRemote?Lt-=this.reservedStreams[Ht].resource:St-=this.reservedStreams[Ht].resource);return[St,Lt]}},{key:"getStreamResourceReservation",value:function(Ct){for(var St=this.reservedStreams.length;--St>=0;)if(this.reservedStreams[St].streamId===Ct)return this.reservedStreams[St];return null}},{key:"reserveResources",value:function(Ct,St,Lt,Ht,Gt){var en=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(jn.debug("reserveResources",Lt),this.getStreamResourceReservation(Lt))throw new Error("reserveResources - already reserved stream");var nn=!1,on={streamId:Lt,profileType:Ct,priority:Gt,resource:St,isRemote:Ht};if(on.isVideoOnly=!!en.isVideoOnly,en.isVideoMuted)on.isVideoMuted=!0,nn=!0;else{on.isVideoMuted=!1;var yn=this.getNetworkCap();nn=Ht?yn[1]>=on.resource:yn[0]>=on.resource}if(en.control)return nn;if(!nn)throw new Error("reserveResources - no such bandwidth availability");return this.reservedStreams.push(on),this.reservedStreams.sort(function(On,Qn){return On.priority>Qn.priority?-1:On.priority===Qn.priority?0:1}),jn.debug("reservedStreams",this.reservedStreams),!0}},{key:"releaseResources",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.getNetworkCap({capacity:!0}))return!1;jn.debug("releaseResources",Ct);for(var Lt=!1,Ht=this.reservedStreams.length;--Ht>=0;)if(this.reservedStreams[Ht].streamId===Ct){this.reservedStreams.splice(Ht,1),Lt=!0;break}return jn.debug("reservedStreams",this.reservedStreams),Lt&&St.triggerAdaptation&&this.enableHigherPriorityVideo(!!St.isRemote),Lt}},{key:"changeStreamPriority",value:function(Ct,St,Lt){jn.debug("changeStreamPriority",Ct,St,Lt);for(var Ht=null,Gt=this.reservedStreams.length;--Gt>=0;)if(this.reservedStreams[Gt].isRemote===St&&this.reservedStreams[Gt].streamId===Ct){Ht=this.reservedStreams[Gt];break}return!(!Ht||Ht.priority===Lt||(Ht.priority=Lt,this.reservedStreams.sort(function(en,nn){return en.priority>nn.priority?-1:en.priority===nn.priority?0:1}),jn.debug("reservedStreams",this.reservedStreams),Ht.isVideoMuted?this.disableLowerPriorityVideo(Ht.isRemote,Ht.resource,Ht.priority)&&zu(this,Ht):this.enableHigherPriorityVideo(Ht.isRemote,{resource:Ht.resource,priority:Ht.priority,control:!0})&&(Vu(this,Ht),this.enableHigherPriorityVideo(Ht.isRemote)),0))}},{key:"disableLowerPriorityVideo",value:function(Ct,St,Lt){jn.debug("disableLowerPriorityVideo",Ct,St,Lt);for(var Ht=[],Gt=0,en=this.reservedStreams.length;--en>=0&&(this.reservedStreams[en].isRemote!==Ct||this.reservedStreams[en].isVideoMuted||this.reservedStreams[en].priority>=Lt||(Ht.push(this.reservedStreams[en]),!((Gt+=this.reservedStreams[en].resource)>=St))););if(Ht.length===0||Gt<St)return!1;for(var nn=Ht.length;--nn>=0;)Vu(this,Ht[nn]);return!0}},{key:"enableHigherPriorityVideo",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};jn.debug("enableHigherPriorityVideo",Ct);var Lt=this.getNetworkCap(),Ht=Ct?Lt[1]:Lt[0];St.resource&&St.resource>0&&(Ht+=St.resource);for(var Gt=[],en=0;en<this.reservedStreams.length;en+=1)this.reservedStreams[en].isRemote===Ct&&this.reservedStreams[en].isVideoMuted&&(Object.prototype.hasOwnProperty.call(St,"priority")&&this.reservedStreams[en].priority<=St.priority||this.reservedStreams[en].resource<=Ht&&(Ht-=this.reservedStreams[en].resource,Gt.push(this.reservedStreams[en])));if(Gt.length===0)return!1;if(St.control)return!0;for(var nn=Gt.length;--nn>=0;)zu(this,Gt[nn]);return!0}},{key:"startComposite",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"startComposite() - conversation not joined",jn));er.webRTCClient.startComposite(Ct._getTechnicalName()),St()})}},{key:"stopComposite",value:function(){var Ct=this;return new Promise(function(St,Lt){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Lt(Ut.g.createError(et.g.ERROR_OTHER,"stopComposite() - conversation not joined",jn));er.webRTCClient.stopComposite(Ct._getTechnicalName()),St()})}},{key:"callVoIP",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){return Ct&&typeof Ct=="string"?St.status!==et.g.CONVERSATION_STATUS_JOINED?Ht(Ut.g.createError(et.g.ERROR_OTHER,"callVoIP() - conversation not joined",jn)):void er.webRTCClient.webRTCClient.MCUClient.inviteVoIP(St._getTechnicalName(),St.getCloudConversationId(),Ct).then(Lt).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_OTHER,"callVoIP() - "+Gt.message,jn))}):Ht(Ut.g.createError(et.g.ERROR_OTHER,"callVoIP() - wrong phoneNumber",jn))})}},{key:"manageDisconnectionWarningEvent",value:function(Ct){jn.debug("manageDisconnectionWarningEvent",Ct.detail);var St={};if(this.callIdToStreamId.has(Ct.detail.callId)){jn.debug("call is linked with conversation");var Lt=this.callIdToStreamId.get(Ct.detail.callId);St=Ct.detail.settingUpType==="publish"||Ct.detail.settingUpType==="shareScreen"?this.conversationPublishedStreams.get(Lt):this.conversationStreams.get(Lt),Xt.get(this).emit("disconnectionWarning",{streamInfo:St})}else jn.debug("call is not linked with conversation")}},{key:"manageErrorEvent",value:function(Ct){if(jn.debug("manageErrorEvent",Ct.detail),Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_DISCONNECTED"||Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_FAILED")Xt.get(this).emit("error",{errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,descriptor:Ct.detail.data});else if(this.callIdToStreamId.has(Ct.detail.callId)){jn.debug("call is linked with conversation");var St=this.callIdToStreamId.get(Ct.detail.callId),Lt={streamInfo:Ct.detail.settingUpType==="publish"?this.conversationPublishedStreams.get(St):this.conversationStreams.get(St),errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,callId:Ct.detail.callId,streamId:St};if(Ct.detail.data&&(Lt.descriptor=Ct.detail.data),Xt.get(this).emit("error",Lt),Jp.has(Ct.detail.errorCode)){var Ht=this.conversationCalls.get(Ct.detail.callId);Ht?this.unpublish(Ht.stream):(this.unsubscribeToStream(St),Ct.detail.errorCode==="CALL_ABORTED"&&this.callIdToStreamId.delete(Ct.detail.callId))}}else jn.debug("call is not linked with conversation")}}],Mt=[{key:"getAvailableEvents",value:function(){return qp}}],Qt&&Uu(jt.prototype,Qt),Mt&&Uu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn),$u=function(){var Wt="guest";if(apiRTC.userAgentInstance){var jt=apiRTC.userAgentInstance.getUsername();jt&&(Wt=jt)}return Wt},Fu=function(Wt){var jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Qt,Mt){var Bt=null;if(Ut.g.isPropertyTypeof(jt,"session","object")&&jt.session instanceof Br)Bt=jt.session;else{if(Br.getActiveSession()===null)return Mt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"getOrCreateConversation() - missing session",jn));Bt=Br.getActiveSession()}var ln={};ln.token=Bt.getToken(),ln.active=Wt.active,Eo.getOrCreateConversation(Wt,er.getActiveApiKey(),ln).then(function(dn){Ut.g.isTypeof(dn,"public_id","string")&&(dn.id=dn.public_id,delete dn.public_id),Po.set(Wt,dn.id),Ko.set(Wt,dn.data),Ut.g.isTypeof(dn.typeString,"string")&&ju.has(dn.typeString)&&ns.set(Wt,dn.typeString),wo.set(Wt,Bt),Qt(dn)}).catch(function(dn){Po.set(Wt,null),Ko.set(Wt,null),ns.set(Wt,null),Mt(Ut.g.createError(et.g.ERROR_HTTP,"getOrCreateConversation() - cannot get/create conversation",jn,{fromError:dn}))})})},Xp=function(Wt){var jt=Wt.getModerator();return jt?jt.getId():!Wt.conference&&Wt.moderationEnabled?"#":null},Qp=function(Wt,jt){return new Promise(function(Qt,Mt){if(Wt.conference){if(jt.access===et.g.CONVERSATION_ACCESS_GRANTED)return Qt(jt);if(jt.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION)return Mt(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"You were not allowed to join the conference"));var Bt=ro.getOrCreateContact(jt.moderator);Ns.set(Wt,Bt),Wu(Wt).then(function(){Qt(jt)}).catch(Mt)}else{if(!Wt.moderationEnabled)return Qt(Object.assign(jt,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_GUEST}));if(Wt.moderator)return Qt(Object.assign(jt,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_MODERATOR}));Wu(Wt).then(function(){Qt(Object.assign(jt,{access:et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION,role:et.g.CONVERSATION_ROLE_GUEST}))}).catch(Mt)}})},Wu=function(Wt){return new Promise(function(jt,Qt){var Mt=Wt.getModerator();Wt.status=et.g.CONVERSATION_STATUS_WAITING;var Bt=!1,ln=setTimeout(function(){er.apiRTCSession.joinPresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}),Bt=!0},et.g.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT);Mt&&Xt.get(Wt).emit("waitingForModeratorAcceptance",Mt);var dn=new Do(Mt,Wt);dn.id=Wt._getTechnicalName(),dn.type=Wt.conference?"conference":"conversation",Wt.sendJoinRequest();var Yt=function Ct(St){jn.debug("dataMessage (waitingRoom)",St.detail);var Lt=St.detail.data;if(Lt.roomname===Wt._getTechnicalName()){var Ht=St.detail.senderId.toString();Lt.command==="access"||Lt.command==="access-new"||Lt.event===et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER?(delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),er.removeEventListener("receiveData",Ct),Bt===!0?er.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):ln&&clearTimeout(ln),Lt.value.hasOwnProperty("access")&&Lt.value.access||Lt.access?(er.sendData(Ht,{roomname:Wt._getTechnicalName(),command:"access-ack"}).catch(function(Gt){var en=Ut.g.createError(Gt,"Notification not delivered",jn);Xt.get(Wt).emit("messageNotDelivered",{error:en,contact:Mt,command:"access-ack"})}),jt()):(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",jn)))):Lt.event===et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER&&Lt.roomname===Wt._getTechnicalName()&&Xt.get(Wt).emit("moderatorConnected",ro.getOrCreateContact(Ht))}};er.onEvent("receiveData",Yt),dn.onResponse(function(Ct){er.removeEventListener("receiveData",Yt),Bt===!0?er.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()]):ln&&clearTimeout(ln),Ct===et.g.INVITATION_STATUS_ACCEPTED?jt():(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",jn)))}),Wt.cancelJoin0=function(){return delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),er.removeEventListener("receiveData",Yt),Bt===!0?er.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):ln&&clearTimeout(ln),Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Ut.g.createError(et.g.ERROR_OPERATION_CANCELED,"Operation canceled",jn)),!0}})},Zp=function(Wt,jt,Qt){return new Promise(function(Mt){Eo.updateConferencePresence(Wt,jt,Qt).then(Mt,function(Bt){jn.warn("updateConferencePresence",Bt),Mt()})})},Bu=function(Wt,jt){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Mt=Qt.stream;if(!Mt){var Bt=Wt.conversationCalls.get(jt);if(!Bt)return!1;Mt=Bt.stream}return Qt.noTriggerAdaptation?Wt.releaseResources(Mt.userMediaStreamId):Wt.releaseResources(Mt.userMediaStreamId,{triggerAdaptation:!0}),Mt.publishedInConversations.delete(Wt.getName()),Wt.conversationPublishedStreams.delete(Mt.userMediaStreamId),Wt.callIdToStreamId.delete(jt),Wt.conversationCalls.delete(jt),!0},Vu=function(Wt,jt){var Qt={streamId:jt.streamId,isRemote:jt.isRemote};if(jt.isRemote)if(jt.isVideoOnly){Qt.action="hangup";var Mt=Ao.get(Wt).get(jt.streamId);Mt&&(Qt.callId=Mt.callId),jn.debug("disableVideoTrack - hangup",jt.streamId),Wt.unsubscribeToStream(jt.streamId,{noTriggerAdaptation:!0})}else{Qt.action="disableTrack",Qt.trackType="video";var Bt=Ao.get(Wt).get(jt.streamId);Bt&&(Qt.callId=Bt.callId),jn.debug("disableVideoTrack - disable video track",jt.streamId),Wt.updateSubscribedStream(jt.streamId,{audioOnly:!0}).catch(function(Ct){jn.error("disableVideoTrack - updateSubscribedStream",Ct)}),jt.isVideoMuted=!0}else if(jt.isVideoOnly){Qt.action="hangup";var ln=yo.get(jt.streamId),dn=Wt.getConversationCall(ln);dn&&(Qt.callId=dn.callId),jn.debug("disableVideoTrack - hangup",jt.streamId),Wt.unpublish(ln,{noTriggerAdaptation:!0})}else{var Yt=Wt.getConversationCall(yo.get(jt.streamId));Yt?(Qt.action="disableTrack",Qt.trackType="video",Qt.callId=Yt.callId,jn.debug("disableVideoTrack - disable video track",jt.streamId),Yt.updatePublishedStream("video",!1).catch(function(Ct){jn.error("disableVideoTrack - updatePublishedStream",Ct)}),jt.isVideoMuted=!0):Qt=null}Qt&&Xt.get(Wt).emit("adaptationTriggered",Qt)},zu=function(Wt,jt){var Qt={streamId:jt.streamId,isRemote:jt.isRemote,action:"enableTrack",trackType:"video"};if(jt.isRemote){var Mt=Ao.get(Wt).get(jt.streamId);Mt&&(Qt.callId=Mt.callId),jn.debug("enableVideoTrack - enable video track",jt.streamId),Wt.updateSubscribedStream(jt.streamId,{audioOnly:!1}).catch(function(ln){jn.error("enableVideoTrack - updateSubscribedStream",ln)}),jt.isVideoMuted=!1}else{var Bt=Wt.getConversationCall(yo.get(jt.streamId));Bt?(Qt.callId=Bt.callId,jn.debug("enableVideoTrack - enable video track",jt.streamId),Bt.updatePublishedStream("video",!0).catch(function(ln){jn.error("enableVideoTrack - updatePublishedStream",ln)}),jt.isVideoMuted=!1):Qt=null}Qt&&Xt.get(Wt).emit("adaptationTriggered",Qt)},Ql=function(Wt,jt,Qt){return Qt===!0?Wt.pointerSharingState===et.g.STATE_IDLE?(Wt.pointerSharingState=et.g.STATE_JOINING,new Promise(function(Mt,Bt){er.pointerSharingClient.joinRoom(Wt._getTechnicalName(),{success:function(ln){Wt.pointerSharingState=et.g.STATE_ACTIVE,jt===!0&&(Wt.pointerSharingAutoInvite=!0);var dn={enabled:!0,roomId:ln};Xt.get(Wt).emit("pointerSharingEnabled",dn),Mt(),Wt.pointerSharingAutoInvite===!0&&ro.getContacts(Wt._getTechnicalName()).forEach(function(Yt){er.pointerSharingClient.inviteInRoom(Wt._getTechnicalName(),Yt.getId())})},failure:function(ln,dn){Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1,Bt(ln)}})})):Promise.reject(Ut.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot enable pointer sharing")):Qt===!1?Wt.pointerSharingState===et.g.STATE_ACTIVE?(Wt.pointerSharingState=et.g.STATE_LEAVING,new Promise(function(Mt,Bt){er.pointerSharingClient.leaveRoom(Wt._getTechnicalName()),Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1;var ln={enabled:!1,roomId:Wt._getTechnicalName()};Xt.get(Wt).emit("pointerSharingEnabled",ln),Mt()})):Promise.reject(Ut.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot disable pointer sharing")):Promise.reject(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"enablePointerSharing() - cannot enable/disable pointer sharing"))},$s=function(Wt,jt){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return["roomName","callId","clientId"].forEach(function(Mt){jt.hasOwnProperty(Mt)&&(Qt[Mt]=String(jt[Mt]))}),Qt};function Zl(Wt){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Zl(Wt)}function _f(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Hu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function _c(){return _c=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,jt,Qt){var Mt=_h(Wt,jt);if(Mt){var Bt=Object.getOwnPropertyDescriptor(Mt,jt);return Bt.get?Bt.get.call(arguments.length<3?Wt:Qt):Bt.value}},_c.apply(this,arguments)}function _h(Wt,jt){for(;!Object.prototype.hasOwnProperty.call(Wt,jt)&&(Wt=qo(Wt))!==null;);return Wt}function _d(Wt,jt){return _d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},_d(Wt,jt)}function _g(Wt,jt){if(jt&&(Zl(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function qo(Wt){return qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},qo(Wt)}var ba=ft.Y.get("Conference"),em=$o.getAvailableEvents().concat(["closed"]),Fs=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&_d(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=qo(Bt);if(ln){var Lt=qo(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return _g(this,Ct)});function Yt(Ct){var St,Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _f(this,Yt),St=dn.call(this,Ct,Lt),ba.info("Create conference"),St.conference=!0,St.friendlyName=Lt.hasOwnProperty("friendlyName")?Lt.friendlyName:Ct,St}return jt=Yt,Mt=[{key:"getAvailableEvents",value:function(){return em}}],(Qt=[{key:"destroy",value:function(){po.get().deleteConference(this.getName()),_c(qo(Yt.prototype),"destroy",this).call(this)}},{key:"_getTechnicalName",value:function(){return tm()+ts.get(this)}},{key:"getFriendlyName",value:function(){return this.friendlyName}},{key:"getInfo",value:function(){var Ct=this;return new Promise(function(St,Lt){var Ht={},Gt=wo.get(Ct);Gt&&(Ht.token=Gt.getToken()),Eo.getWebconf(Ct._getTechnicalName(),Ht).then(function(en){return St({dtmfCode:en.dtmfCode,endTime:en.end,hasPassword:en.hasPassword,sipNumber:en.sipNumber,startTime:en.start,state:en.state,type:en.type})}).catch(function(en){return Lt(Ut.g.createError(et.g.ERROR_OTHER,"getInfo() - Cannot get conference info",ba))})})}},{key:"close",value:function(){var Ct=this;return ba.debug("Closing "+this.getName()),new Promise(function(St,Lt){Ct.status!==et.g.CONVERSATION_STATUS_JOINED?Lt(Ut.g.createError(et.g.ERROR_OTHER,"close() - Conversation has to be joined to be closed",ba)):Ct.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR?Lt(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"close() - Role has to be moderator to close the conversation",ba)):Eo.closeConferenceInstance(Ct,wo.get(Ct)).then(function(){ba.debug("Conversation closed successfully"),er.dataClient.sendDataToGroup(Ct._getTechnicalName(),{event:et.g.CONVERSATION_CLOSED_IDENTIFIER,instanceId:Ct.getInstanceId(),roomname:Ct._getTechnicalName()}),Xt.get(Ct).emit("closed"),Ct.leave(),St()}).catch(function(Ht){var Gt="close() - An error occured when closing conversation",en={error:new Error(Gt),code:et.g.ERROR_OTHER};ba.error(Gt,Ht),Ht.hasOwnProperty("code")?en.code=Ht.code:Ht.hasOwnProperty("http_code")&&(en.code=Ht.http_code.toString().startsWith("4")?et.g.ERROR_UNAUTHORIZED:et.g.ERROR_SERVER_UNAVAILABLE),Lt(en)})})}},{key:"sendInvitation",value:function(Ct,St){var Lt=this;if(St||(St={}),Ct instanceof No){ba.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||ba.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Ht={receiveNotifier:new dt};St.hasOwnProperty("expirationTime")&&(Ht.expirationTime=St.expirationTime);var Gt=new Do(Ct,this,Ht),en={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:Gt.id,roomname:this._getTechnicalName(),friendlyName:this.getFriendlyName(),sendTime:Gt.sendTime};return Gt.type="conference",Us.get(this)!==null&&(en.password=Us.get(this)),er.sendData(Ct.getId(),en).then(function(){Ht.receiveNotifier.emit("receive")}).catch(function(nn){var on=Ut.g.createError(nn,"Invitation not delivered",ba);Xt.get(Lt).emit("messageNotDelivered",{error:on,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),Gt}return ba.error("Parameter is not a contact"),null}},{key:"getTags",value:function(){var Ct=this;return new Promise(function(St,Lt){var Ht=Br.getActiveSession();if(!Ht)return Lt(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no session found",ba));var Gt=Ht.getUserAgent().getEnterprise();if(!Gt)return Lt(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no enterprise found",ba));Gt.getTags(Ct).then(function(en){for(var nn=[],on=0;on<en.length;on+=1)en[on].selected===!0&&nn.push(en[on]);return St(nn)}).catch(function(en){return Lt(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - cannot get tags",ba,{fromError:en}))})})}},{key:"setTags",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){if(!Array.isArray(Ct))return Ht(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ba));if(!St.webconfId)return Ht(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no webconf found",ba));var Gt=Br.getActiveSession();if(!Gt)return Ht(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no session found",ba));var en=Gt.getUserAgent().getEnterprise();if(!en)return Ht(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no enterprise found",ba));var nn=Gt.getToken();if(!nn)return Ht(Ut.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no token found",ba));for(var on=[],yn=0;yn<Ct.length;yn+=1){if(!Ct[yn].hasOwnProperty("id"))return Ht(Ut.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ba));on.push(Ct[yn].id)}Eo.updateWebconfTags(en.getId(),St.webconfId,on,nn).then(function(){return Lt()}).catch(function(On){return Ht(Ut.g.createError(et.g.ERROR_OTHER,"setTags() - cannot set tags",ba,{fromError:On}))})})}}])&&Hu(jt.prototype,Qt),Mt&&Hu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}($o),tm=function(){return er.getActiveApiKey()+":"};function Gu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}ft.Y.get("ConversationCatalog");var rs=null,po=function(){function Wt(){if(function(Bt,ln){if(!(Bt instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,Wt),rs!==null)throw"Cannot construct singleton ConversationCatalog";this.conversationList=new Map,this.conferenceList=new Map,rs=this}var jt,Qt,Mt;return jt=Wt,Qt=[{key:"deleteConversation",value:function(Bt){return!!(Ut.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conversationList.delete(Bt)}},{key:"deleteConference",value:function(Bt){return!!(Ut.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conferenceList.delete(Bt)}},{key:"getOrCreateConversation",value:function(Bt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=null;return Bt!=null&&Bt!==""?this.conversationList.has(Bt.toString())?dn=this.conversationList.get(Bt.toString()):(dn=new $o(Bt.toString(),ln),this.conversationList.set(Bt.toString(),dn)):(dn=new $o(null,ln),this.conversationList.set(dn.getName(),dn)),dn}},{key:"getOrCreateConference",value:function(Bt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=null;return Bt!=null&&Bt!==""?this.conferenceList.has(Bt.toString())?dn=this.conferenceList.get(Bt.toString()):(dn=new Fs(Bt.toString(),ln),this.conferenceList.set(Bt.toString(),dn)):(dn=new Fs(null,ln),this.conferenceList.set(dn.getName(),dn)),dn}},{key:"getConversations",value:function(){return this.conversationList}},{key:"getConferences",value:function(){return this.conferenceList}},{key:"isConference",value:function(Bt){return Ku(Bt).hasOwnProperty("apiKey")}},{key:"getNameFromTechnicalName",value:function(Bt){return Ku(Bt).name}}],Mt=[{key:"get",value:function(){return rs===null&&(rs=new Wt),rs}}],Qt&&Gu(jt.prototype,Qt),Mt&&Gu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function Ku(Wt){var jt=Wt.match(/^([^:]+)[:]([^:]+)$/);return jt===null||jt.length<3?{name:Wt}:{apiKey:jt[1],name:jt[2]}}function eu(Wt){return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},eu(Wt)}function Yo(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return qu(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?qu(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function qu(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function Yu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function tu(Wt,jt){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},tu(Wt,jt)}function nm(Wt,jt){if(jt&&(eu(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dr(Wt)}function Dr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ws(Wt){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Ws(Wt)}var cr=ft.Y.get("Session"),zr=Rn.get(),Bs=new(Go()),ao=_r.get(),rm=["rawData","whiteboardInvitation","fileTransferInvitation","conversationMessage","conversationData","dataChannelInvitation","contactMessage","contactData","customEvent","conversationInvitation","incomingCall","disconnect","error","contactListUpdate","reconnecting","reconnection","conversationJoinRequest","newMediaAvailableFromContact","whiteboardRoomMemberUpdate","incomingScreenSharingCall","pointerSharingInvitation","pointerLocationChanged","incomingScreenSharingCallInvitation","cloudEventOccurred","remoteAccessInvitation"],Ju=new WeakMap,is=new WeakMap,Vs=null,nu=new WeakMap,as=new WeakMap,Br=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&tu(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Ws(Bt);if(ln){var Lt=Ws(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return nm(this,Ct)});function Yt(Ct){var St;(function(en,nn){if(!(en instanceof nn))throw new TypeError("Cannot call a class as a function")})(this,Yt),St=dn.call(this,cr),cr.debug("Create Session"),St.id=null,St.token=null,St.ccsToken=null,Ju.set(Dr(St),Ct),is.set(Dr(St),null),as.set(Dr(St),{}),St.isRecording=!1,St.userData=new Io,St.contactListUpdateListenerSetted=!1,St.waitingContactListUpdateEvent=[];var Lt=Ro.get(),Ht=po.get(),Gt={};return St.invitationsMap=new Map,Gt.channelEvent=function(en){switch(en.detail.channelEvent){case"onChannelReconnecting":Xt.get(Dr(St)).emit("reconnecting",en);break;case"onChannelReconnect":Xt.get(Dr(St)).emit("reconnection",en);break;case"onChannelError":Xt.get(Dr(St)).emit("error",en);break;case"onChannelDisconnect":cr.error("Session :: onChannelDisconnect"),Xt.get(Dr(St)).emit("disconnect",en)}},Gt.incomingCall=function(en){var nn=Lt.getOrCreateContact(en.detail.callerId),on=en.detail.callId.toString();if(en.detail.callType==="data")if(cr.info("Received file transfer invitation from "+nn.getUsername()),Ut.g._private.dataCallsFileInfo.has(on)){var yn=Ut.g._private.dataCallsFileInfo.get(on),On=null;St.invitationsMap.has(en.detail.callerId+"-sendfile-"+on)?(On=St.invitationsMap.get(en.detail.callerId+"-sendfile-"+on),cr.debug("invitation already exist :",On)):(On=new eo(nn,on,yn),St.invitationsMap.set(en.detail.callerId+"-sendfile-"+on,On)),Xt.get(Dr(St)).emit("fileTransferInvitation",On)}else Ut.g._private.dataChannelInvitations.has(on)?Xt.get(Dr(St)).emit("dataChannelInvitation",new zo(nn,on)):(cr.debug("File information has not been received yet, putting invitation on hold"),Ut.g._private.dataCallsOnHold.set(on));else if(en.detail.callType==="screenSharing"||en.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){cr.debug("Received screenSharingCallInvitation from "+nn.getUsername());var Qn=new Er(nn,on,en.detail.callType,{isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});Xt.get(Dr(St)).emit("incomingScreenSharingCallInvitation",Qn)}else{cr.debug("Received screenSharingCall from "+nn.getUsername());var tr=ao.getOrCreateCall(on,nn,{started:!0,isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});Xt.get(Dr(St)).emit("incomingScreenSharingCall",tr)}else{cr.info("Received call invitation from "+nn.getUsername());var dr=new Er(nn,on,en.detail.callType,{isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});Xt.get(Dr(St)).emit("incomingCall",dr)}},Gt.roomInvitation=function(en){var nn=Lt.getOrCreateContact(en.detail.senderId);if(en.detail.roomType==="whiteBoard"){if(nn!==null){cr.info("Received whiteboard invitation from "+nn.getUsername());var on={};en.detail.cloudConvId&&(on.cloudConvId=en.detail.cloudConvId),en.detail.webconf===!0&&(on.webconf=!0),Xt.get(Dr(St)).emit("whiteboardInvitation",new vs(nn,en.detail.roomId,on))}}else en.detail.roomType==="pointerSharing"&&(nn===null||Ht.getConversations().has(en.detail.roomId)||Ht.getConferences().has(en.detail.roomId)||(cr.info("Received pointer sharing invitation from "+nn.getUsername()),Xt.get(Dr(St)).emit("pointerSharingInvitation",new Ml(nn,en.detail.roomId,Dr(St)))))},Gt.roomMemberUpdate=function(en){var nn,on=[],yn=Yo(en.detail.contactList);try{for(yn.s();!(nn=yn.n()).done;){var On=nn.value;on.push(Lt.getOrCreateContact(On.contactId))}}catch(Qn){yn.e(Qn)}finally{yn.f()}en.detail.roomType==="whiteBoard"&&(cr.info("Received whiteboard room member update"),Xt.get(Dr(St)).emit("whiteboardRoomMemberUpdate",{contacts:on,roomId:en.detail.roomId,status:en.detail.status}))},Gt.receiveRoomMessage=function(en){if(cr.debug("receiveRoomMessage",en),en.detail.roomType==="pointerSharing"&&en.detail.message.type==="pointerLocation"&&as.get(Dr(St)).hasOwnProperty(en.detail.roomId)){var nn={sender:Lt.getOrCreateContact(en.detail.senderId),source:en.detail.message.source,x:en.detail.message.x,y:en.detail.message.y};Ut.g.isPropertyTypeof(en.detail.message,"data","object")&&(nn.data=en.detail.message.data),Xt.get(Dr(St)).emit("pointerLocationChanged",nn)}},Gt.receiveIMMessage=function(en){var nn=Lt.getOrCreateContact(en.detail.senderId);cr.debug("Received IM from "+nn.getUsername()+" : ",en.detail.message),Xt.get(Dr(St)).emit("contactMessage",{sender:nn,content:en.detail.message,uuid:en.detail.UUCSeq,time:en.detail.time})},Gt.receiveData=function(en){var nn=Lt.getOrCreateContact(en.detail.senderId),on=en.detail.data;if(on!==void 0){var yn=null;if(on.roomname!==void 0&&(yn=Ht.isConference(on.roomname)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(on.roomname)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(on.roomname))),cr.trace("Received data from "+nn.getId(),en.detail),Xt.get(Dr(St)).emit("rawData",{sender:nn,content:on}),on.event!==void 0)switch(on.event){case et.g.INVITATION_ANSWER_IDENTIFIER:case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:cr.debug("Received contact data from "+nn.getUsername(),on.content),Xt.get(Dr(St)).emit("contactData",{sender:nn,content:on.content});break;case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:on.roomname!==void 0&&(cr.debug("Received conversation data from "+nn.getUsername(),on.content),Xt.get(Dr(St)).emit("conversationData",{sender:nn,conversation:yn,content:on.content}));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:Xt.get(Dr(St)).emit("newMediaAvailableFromContact",{sender:nn,media:on.media});break;case et.g.CONTACT_DATACHANNEL_INVITATION:cr.debug("Received datachannel invitation from "+nn.getUsername()),Ut.g._private.dataChannelInvitations.set(on.callId.toString(),!0),Ut.g._private.dataCallsOnHold.has(on.callId.toString())&&Xt.get(Dr(St)).emit("dataChannelInvitation",new zo(nn,on.callId.toString()));break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:cr.debug("Received file info from "+nn.getUsername(),on.fileInfo);var On=on.callId.toString();if(Ut.g._private.dataCallsFileInfo.set(On,on.fileInfo),Ut.g._private.dataCallsOnHold.has(On)){var Qn=null;St.invitationsMap.has(nn.getId()+"-sendfile-"+On)?(Qn=St.invitationsMap.get(nn.getId()+"-sendfile-"+On),cr.debug("invitation already exist :",Qn)):(Qn=new eo(nn,On,on.fileInfo),St.invitationsMap.set(en.detail.callerId+"-sendfile-"+On,Qn)),Xt.get(Dr(St)).emit("fileTransferInvitation",Qn)}else cr.debug("no dataCallsOnHold");break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(on.roomname!==void 0){cr.info("Received conversation invitation from "+nn.getUsername());var tr={session:Dr(St)};on.hasOwnProperty("password")&&(tr.password=on.password),yn?(on.hasOwnProperty("friendlyName")&&yn.name===yn.friendlyName&&(yn.friendlyName=on.friendlyName),Xt.get(Dr(St)).emit("conversationInvitation",new Vt(nn,on,yn,tr))):Xt.get(Dr(St)).emit("conversationInvitation",new Vt(nn,on,null,tr))}break;case et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER:cr.info("Received conversation join request from "+nn.getUsername()),yn?Xt.get(Dr(St)).emit("conversationJoinRequest",new Ho(nn,yn,on.invitationId)):Xt.get(Dr(St)).emit("conversationJoinRequest",new Ho(nn,null,null));break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:case et.g.CONVERSATION_CLOSED_IDENTIFIER:break;case et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER:if(cr.debug("Received remote access invitation"),apiRTC.session.remoteAccessInvitation===null){var dr=new kp(nn,on,yn,{});apiRTC.session.remoteAccessInvitation=dr,Xt.get(Dr(St)).emit("remoteAccessInvitation",dr)}else cr.error("remoteAccess session is already ongoing");break;case et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_APP_MESSAGE:case et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE:break;default:var fr={event:on.event,content:on,sender:nn};yn!==null&&(fr.conversation=yn),Xt.get(Dr(St)).emit("customEvent",fr)}else if(on.command!==void 0)switch(on.command){case"userWaiting":case"userWaiting-new":cr.info("Received conversation join request from "+nn.getUsername()),yn?Xt.get(Dr(St)).emit("conversationJoinRequest",new Ho(nn,yn,null)):Xt.get(Dr(St)).emit("conversationJoinRequest",new Ho(nn,null,null))}}else cr.debug("Received data undefined, leaving process")},Gt.receiveGroupChatMessage=function(en){var nn=Lt.getOrCreateContact(en.detail.senderId),on=null,yn=en.detail.groupChatId.toString();if(yn!==void 0&&(on=Ht.isConference(yn)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(yn)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(yn))),on!==null){cr.debug("Received conversation message from "+nn.getUsername(),en.detail.message);var On={sender:nn,conversation:on,content:en.detail.message};Ut.g.isTypeof(en.detail,"metadata","object")&&(On.metadata=en.detail.metadata),Xt.get(Dr(St)).emit("conversationMessage",On)}},Gt.cloudEventOccurred=function(en){var nn={topic:en.detail.topic,target:en.detail.target};Xt.get(Dr(St)).emit("cloudEventOccurred",nn)},Gt.callEstablished=function(en){if(en.detail.callId!==void 0){var nn=en.detail.callId.toString();cr.debug("callEstablished",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&on.manageCallEstablishedEvent(en)}else cr.debug("callEstablished",en.detail)},Gt.remoteStreamAdded=function(en){if(en.detail.callId!==void 0){var nn=en.detail.callId.toString();cr.debug("remoteStreamAdded",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&on.manageRemoteStreamAddedEvent(en)}else cr.debug("remoteStreamAdded",en.detail)},Gt.remoteStreamRemoved=function(en){if(en.detail.callId!==void 0){var nn=en.detail.callId.toString();cr.debug("remoteStreamRemoved",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&on.manageRemoteStreamRemovedEvent(en)}else cr.debug("remoteStreamRemoved",en.detail)},Gt.userMediaSuccess=function(en){var nn=null;if(en.detail.callId!==void 0&&en.detail.callId!==null){nn=en.detail.callId.toString(),cr.debug("userMediaSuccess",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&on.manageUserMediaSuccessEvent(en)}else cr.debug("userMediaSuccess",en.detail)},Gt.onCallStatsUpdate=function(en){if(en.detail.callId!==void 0){var nn=en.detail.callId.toString(),on=ao.getCall(nn,null,{});on!==null&&on.manageCallStatsUpdateEvent(en)}else cr.debug("onCallStatsUpdate",en.detail)},Gt.error=function(en){if(cr.debug("error",en.detail),en.detail.roomName!==null&&en.detail.roomName!==void 0){cr.debug("error on conversation :",en.detail,en.detail.roomName,en.detail.callId);var nn=null;en.detail.roomName!==void 0&&(nn=Ht.isConference(en.detail.roomName)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(en.detail.roomName)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(en.detail.roomName)))!==null&&nn.manageErrorEvent(en)}else if(en.detail.callId!==void 0){var on=en.detail.callId.toString();cr.debug("error",en.detail,on);var yn=ao.getCall(on,null,{});yn!==null&&(yn.manageErrorEvent(en),en.detail.errorCode==="RECORDING_FAILED"&&ao.removeCallFromList(yn.getId()))}else cr.debug("error",en.detail),Xt.get(Dr(St)).emit("error",en.detail)},Gt.disconnectionWarning=function(en){if(en.detail.roomName!==null){cr.debug("disconnectionWarning on conversation :",en.detail,en.detail.roomName,en.detail.callId);var nn=null;en.detail.roomName!==void 0&&(nn=Ht.isConference(en.detail.roomName)?Ht.getOrCreateConference(Ht.getNameFromTechnicalName(en.detail.roomName)):Ht.getOrCreateConversation(Ht.getNameFromTechnicalName(en.detail.roomName)))!==null&&nn.manageDisconnectionWarningEvent(en)}else if(en.detail.callId){var on=en.detail.callId.toString();cr.debug("disconnectionWarning",en.detail,on);var yn=ao.getCall(on,null,{});yn!==null&&yn.manageDisconnectionWarningEvent(en)}else cr.debug("disconnectionWarning",en.detail)},Gt.hangup=function(en){if(en.detail.callId){var nn=en.detail.callId.toString();cr.debug("hangup",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&(on.manageHangupEvent(en),on.isRecorded()===!1&&ao.removeCallFromList(on.getId()))}else cr.debug("hangup",en.detail)},Gt.recordedStreamsAvailable=function(en){if(en.detail.userId2){var nn=Lt.getOrCreateContact(en.detail.userId2),on=ao.getCall(null,nn);on&&(on.manageRecordAvailableEvent(en),ao.removeCallFromList(on.getId()))}else cr.debug("recordedStreamsAvailable",en.detail)},Gt.desktopCapture=function(en){if(en.detail.callId){var nn=en.detail.callId.toString();cr.warn("desktopCapture",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&(on.manageDesktopCaptureEvent(en),ao.removeCallFromList(on.getId()))}else cr.debug("desktopCapture",en.detail)},Gt.userMediaError=function(en){if(en.detail.callId){var nn=en.detail.callId.toString();cr.warn("userMediaError",en.detail,nn);var on=ao.getCall(nn,null,{});on!==null&&(on.manageUserMediaErrorEvent(en),en.detail.tryAudioCallActivated===!1&&ao.removeCallFromList(on.getId()))}else cr.debug("userMediaError",en.detail)},cr.debug("av apiRTCManager onEvent ..."),zr.onEvent("disconnectionWarning",Gt.disconnectionWarning).onEvent("incomingCall",Gt.incomingCall).onEvent("roomInvitation",Gt.roomInvitation).onEvent("roomMemberUpdate",Gt.roomMemberUpdate).onEvent("receiveRoomMessage",Gt.receiveRoomMessage).onEvent("receiveIMMessage",Gt.receiveIMMessage).onEvent("receiveData",Gt.receiveData).onEvent("receiveGroupChatMessage",Gt.receiveGroupChatMessage).onEvent("cloudEventOccurred",Gt.cloudEventOccurred).onEvent("callEstablished",Gt.callEstablished).onEvent("remoteStreamAdded",Gt.remoteStreamAdded).onEvent("remoteStreamRemoved",Gt.remoteStreamRemoved).onEvent("userMediaSuccess",Gt.userMediaSuccess).onEvent("onCallStatsUpdate",Gt.onCallStatsUpdate).onEvent("error",Gt.error).onEvent("hangup",Gt.hangup).onEvent("recordedStreamsAvailable",Gt.recordedStreamsAvailable).onEvent("desktopCapture",Gt.desktopCapture).onEvent("userMediaError",Gt.userMediaError),apiRTC.addEventListener("channelEvent",Gt.channelEvent),Lt.onUpdate(function(en){St.contactListUpdateListenerSetted===!1&&(cr.debug("No listener for contactListUpdate, storing event ..."),St.waitingContactListUpdateEvent.push(en)),Xt.get(Dr(St)).emit("contactListUpdate",en)}),nu.set(Dr(St),Gt),St}return jt=Yt,Qt=[{key:"getToken",value:function(){return this.token}},{key:"getApzToken",value:function(){var Ct=null;return apiRTC.session!==void 0&&apiRTC.session!==null&&(Ct=apiRTC.session.JWTApzToken),Ct}},{key:"getId",value:function(){return this.id}},{key:"getUserAgent",value:function(){return Ju.get(this)}},{key:"getContact",value:function(Ct){return cr.warn("getContact() - Method deprecated, use Session.getOrCreateContact() instead"),Ro.get().getOrCreateContact(Ct)}},{key:"getOrCreateContact",value:function(Ct){return Ro.get().getOrCreateContact(Ct)}},{key:"createConversation",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cr.warn("createConversation() - Method deprecated, use Session.getConversation() instead"),this.getConversation(Ct,St)}},{key:"getConversation",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cr.trace("Getting conversation "+Ct,St),po.get().getOrCreateConversation(Ct)}},{key:"getConference",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cr.trace("Getting conference "+Ct,St),po.get().getOrCreateConference(Ct)}},{key:"getOrCreateConversation",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=po.get().getNameFromTechnicalName(Ct);return po.get().isConference(Ct)?po.get().getOrCreateConference(Lt,St):po.get().getOrCreateConversation(Lt,St)}},{key:"getOrCreateConference",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.getOrCreateConversation(Ct,St)}},{key:"getActiveConversations",value:function(){var Ct,St={},Lt=po.get().getConversations(),Ht=Yo(Lt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var Gt=Ct.value,en=Lt.get(Gt);en.isJoined()&&(St[Gt]=en)}}catch(nn){Ht.e(nn)}finally{Ht.f()}return St}},{key:"getActiveConferences",value:function(){var Ct,St={},Lt=po.get().getConferences(),Ht=Yo(Lt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var Gt=Ct.value,en=Lt.get(Gt);en.isJoined()&&(St[Gt]=en)}}catch(nn){Ht.e(nn)}finally{Ht.f()}return St}},{key:"getWhiteboardClient",value:function(){return cr.trace("getWhiteboardClient()"),zr.whiteBoardClient}},{key:"setUserData",value:function(Ct){this.userData.setProps(Ct).setToSession()}},{key:"setUsername",value:function(Ct){this.userData.setProp("username",Ct).setToSession()}},{key:"setPhotoUrl",value:function(Ct){this.userData.setProp("photo_url",Ct).setToSession()}},{key:"getUserData",value:function(){return this.userData}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.id.toString()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"subscribeToGroup",value:function(Ct){if(this.getSubscribedPresenceGroup().includes(Ct)){cr.debug("Already subscribed to this group");var St=apiCC.session.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ct);St!==-1&&apiCC.session.subscribeToPresenceGroupAddedByApiRTC.splice(St,1)}else zr.apiRTCSession.subscribePresenceGroup([Ct])}},{key:"unsubscribeToGroup",value:function(Ct){this.getSubscribedPresenceGroup().includes(Ct)?zr.unsubscribeToPresenceGroup(Ct):cr.debug("Not subscribed to this group")}},{key:"joinGroup",value:function(Ct){if(this.getPresenceGroup().includes(Ct)){cr.debug("Already joined this group");var St=apiCC.session.presenceGroupAddedByApiRTC.indexOf(Ct);St!==-1&&apiCC.session.presenceGroupAddedByApiRTC.splice(St,1)}else zr.joinAndSubscribeToPresenceGroup(Ct)}},{key:"leaveGroup",value:function(Ct){this.getPresenceGroup().includes(Ct)?zr.leaveAndUnsubscribeToPresenceGroup(Ct):cr.debug("Group was not joined")}},{key:"subscribeToCloudEvent",value:function(Ct,St){zr.subscribeToCloudEvent(Ct,St)}},{key:"unsubscribeToCloudEvent",value:function(Ct,St){zr.unsubscribeToCloudEvent(Ct,St)}},{key:"joinConversationSpace",value:function(Ct){zr.apiRTCSession.joinConversationSpace(Ct)}},{key:"leaveConversationSpace",value:function(Ct){zr.apiRTCSession.leaveConversationSpace(Ct)}},{key:"getContacts",value:function(Ct){cr.trace("getContacts()");var St,Lt={},Ht=Ro.get().getContacts(Ct),Gt=Yo(Ht.keys());try{for(Gt.s();!(St=Gt.n()).done;){var en=St.value;Lt[en]=Ht.get(en)}}catch(nn){Gt.e(nn)}finally{Gt.f()}return Lt}},{key:"getContactsArray",value:function(Ct){cr.log("getContactsArray");var St=Ro.get().getContacts(Ct);return Array.from(St.values())}},{key:"getOnlineContactsArray",value:function(Ct){cr.log("getOnlineContactsArray");var St=Ro.get().getOnlineContacts(Ct);return Array.from(St.values())}},{key:"getCall",value:function(Ct){return cr.trace("getCall()"),_r.get().getCall(Ct)}},{key:"getCalls",value:function(){cr.trace("getCalls()");var Ct,St={},Lt=_r.get().getCalls(),Ht=Yo(Lt.keys());try{for(Ht.s();!(Ct=Ht.n()).done;){var Gt=Ct.value;St[Gt]=Lt.get(Gt)}}catch(en){Ht.e(en)}finally{Ht.f()}return St}},{key:"disconnect",value:function(){var Ct=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0};return new Promise(function(Lt,Ht){if(cr.info("disconnect()"),Ct.token===null&&Ct.id===null)cr.error("disconnect() - Session is already disconnected"),Ht("disconnect() - Session is already disconnected");else{var Gt,en=Yo(po.get().getConversations().keys());try{for(en.s();!(Gt=en.n()).done;){var nn=Gt.value;nn.status===et.g.CONVERSATION_STATUS_JOINED&&nn.leave()}}catch(dr){en.e(dr)}finally{en.f()}if(clearInterval(is.get(Ct)),is.set(Ct,null),Ct.token!==null&&St.hasOwnProperty("invalidateUserToken")&&St.invalidateUserToken)Bs.invalidateUserToken(Ct.token).then(function(){Vs=null,St.invalidateApiCCId=!0,zr.disconnect(St),Ct.id=null,Ct.token=null;for(var dr=nu.get(Ct),fr=0,Ar=Object.keys(dr);fr<Ar.length;fr++){var Xr=Ar[fr];cr.info("Session, removing apiRTCManager event :",Xr);var _i=dr[Xr];zr.removeEventListener(Xr,_i)}Lt()}).catch(function(dr){cr.error("disconnect() - An error occured during disconnection",dr),Ht(new Error("disconnect() - An error occured during disconnection"))});else{Vs=null,zr.disconnect(St),Ct.id=null;for(var on=nu.get(Ct),yn=0,On=Object.keys(on);yn<On.length;yn++){var Qn=On[yn];cr.info("Session, removing apiRTCManager event :",Qn);var tr=on[Qn];zr.removeEventListener(Qn,tr)}Lt()}}})}},{key:"cloudRequest",value:function(Ct,St,Lt){return Bs.cloudRequest(Ct,St,Lt)}},{key:"sendRawData",value:function(Ct,St){return new Promise(function(Lt,Ht){Ct!=null?zr.sendData(Ct.getId(),St).then(Lt).catch(function(Gt){switch(Gt){case et.g.ERROR_TIMED_OUT:Ht(Ut.g.createError(et.g.ERROR_TIMED_OUT,"sendRawData() - Data transmission timed out ",cr));break;case et.g.ERROR_NOT_FOUND:Ht(Ut.g.createError(et.g.ERROR_NOT_FOUND,"sendRawData() - Contact was not found ",cr));break;default:Ht(Ut.g.createError(et.g.ERROR_OTHER,"sendRawData() - Data transmission timed out ",cr))}}):Ht(Ut.g.createError(et.g.ERROR_OTHER,"sendRawData() - Contact undefined",cr))})}},{key:"startRecordingOutgoingStream",value:function(Ct,St){this.isRecording?cr.error("startRecordingOutgoingStream() - already recording"):(zr.webRTCClient.startRecording(Ct,St),this.isRecording=!0)}},{key:"stopRecordingOutgoingStream",value:function(){var Ct=this;return new Promise(function(St,Lt){Ct.isRecording?(Ct.isRecording=!1,zr.onceEvent("MCURecordedStreamsAvailable",function(Ht){St({filename:Ht.detail.recordedFileName,url:et.g.RECORD_PLAY_URL+Ht.detail.recordedFileName})}),zr.webRTCClient.stopRecording()):(cr.error("stopRecordingOutgoingStream() - not recording"),Lt(new Error("stopRecordingOutgoingStream() - not recording")))})}},{key:"init",value:function(Ct){var St=this;this.id=Ct,Vs=this,is.get(this)===null&&is.set(this,setInterval(function(){im(St)},3e4))}},{key:"setMCUServer",value:function(Ct){zr.webRTCClient.setMCUConnector(Ct)}},{key:"allowMultipleCalls",value:function(Ct){zr.webRTCClient.setAllowMultipleCalls(Ct)}},{key:"setCallStatsMonitoringEnabled",value:function(Ct,St){zr.webRTCClient.enableCallStatsMonitoring(Ct,St)}},{key:"setQualityEvaluatingEnabled",value:function(Ct,St){zr.webRTCClient.enableQualityEvaluating(Ct,St)}},{key:"getContactFromWebSession",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){Bs.getSessionHistory(Ct,St.getToken()).then(function(Gt){Gt.exist.toString()!=="1"?Ht(Ut.g.createError(et.g.ERROR_NOT_FOUND,"No such web session",cr)):Gt.user1.toString()===St.getId()?Lt(St.getContact(Gt.user2)):Gt.user2.toString()===St.getId()?Lt(St.getContact(Gt.user1)):Ht(Ut.g.createError(et.g.ERROR_UNAUTHORIZED,"User has no access to this web session",cr))}).catch(function(Gt){Gt.hasOwnProperty("code")?Ht({code:Gt.code,error:Gt.error}):Gt.hasOwnProperty("http_code")?Gt.http_code.toString().startsWith("4")?Ht(Ut.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",cr)):Ht(Ut.g.createError(et.g.ERROR_SERVER_UNAVAILABLE,"Error while getting contact from websession",cr)):Ht(Ut.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",cr))})})}},{key:"joinPointerSharingRoom",value:function(Ct){var St=this;return new Promise(function(Lt,Ht){if(as.get(St).hasOwnProperty(Ct))return Ht(Ut.g.createError(et.g.ERROR_WRONG_STATE,"joinPointerSharingRoom() - cannot join pointer sharing room again",cr));zr.pointerSharingClient.joinRoom(Ct,{success:function(Gt){var en=new ru(St,Gt);as.get(St)[Gt]=en,Lt(en)},failure:function(Gt,en){Ht(Gt==="timeout"?Ut.g.createError(et.g.ERROR_TIMED_OUT,"joinPointerSharingRoom() - cannot join pointer sharing room",cr):Ut.g.createError(et.g.ERROR_OTHER,"joinPointerSharingRoom() - cannot join pointer sharing room",cr))}})})}},{key:"getSubscribedPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.subscribeToPresenceGroup:[]}},{key:"getPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.presenceGroup:[]}}],Mt=[{key:"getAvailableEvents",value:function(){return rm}},{key:"getActiveSession",value:function(){return Vs}}],Qt&&Yu(jt.prototype,Qt),Mt&&Yu(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn),ru=function(Wt,jt){this.session=Wt,this.roomId=jt,this.getRoomId=function(){return this.roomId},this.isActive=function(){return this.session!==null&&this.roomId!==null&&zr.pointerSharingClient.roomActive(this.roomId)},this.leaveRoom=function(){var Qt=this;return new Promise(function(Mt,Bt){if(Qt.session===null||Qt.roomId===null)return Bt(Ut.g.createError(et.g.ERROR_WRONG_STATE,"leaveRoom() - cannot leave room again",cr));zr.pointerSharingClient.leaveRoom(Qt.roomId),delete as.get(Qt.session)[Qt.roomId],Qt.session=null,Qt.roomId=null,Mt()})},this.invite=function(Qt,Mt){var Bt=this;return new Promise(function(ln,dn){if(Bt.session===null||Bt.roomId===null)return dn(Ut.g.createError(et.g.ERROR_WRONG_STATE,"invite() - cannot invite",cr));zr.pointerSharingClient.inviteInRoom(Bt.roomId,Qt.getId(),Mt),ln()})},this.sendPointerLocation=function(Qt,Mt,Bt,ln){var dn=this;return new Promise(function(Yt,Ct){return dn.session===null||dn.roomId===null?Ct(Ut.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",cr)):zr.pointerSharingClient.sendPointerLocation(dn.roomId,Qt,Mt,Bt,ln)?void Yt():Ct(Ut.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",cr))})}},im=function(Wt){for(var jt=Wt.getActiveConferences(),Qt=0,Mt=Object.keys(jt);Qt<Mt.length;Qt++){var Bt=jt[Mt[Qt]];Bs.updateConferencePresence(Bt,Wt,zr.getActiveApiKey())}},iu=s(7618);function zs(Wt){var jt=typeof Map=="function"?new Map:void 0;return zs=function(Qt){if(Qt===null||(Mt=Qt,Function.toString.call(Mt).indexOf("[native code]")===-1))return Qt;var Mt;if(typeof Qt!="function")throw new TypeError("Super expression must either be null or a function");if(jt!==void 0){if(jt.has(Qt))return jt.get(Qt);jt.set(Qt,Bt)}function Bt(){return au(Qt,arguments,Fo(this).constructor)}return Bt.prototype=Object.create(Qt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),ls(Bt,Qt)},zs(Wt)}function au(Wt,jt,Qt){return au=ep()?Reflect.construct.bind():function(Mt,Bt,ln){var dn=[null];dn.push.apply(dn,Bt);var Yt=new(Function.bind.apply(Mt,dn));return ln&&ls(Yt,ln.prototype),Yt},au.apply(null,arguments)}function ou(){return ou=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,jt,Qt){var Mt=am(Wt,jt);if(Mt){var Bt=Object.getOwnPropertyDescriptor(Mt,jt);return Bt.get?Bt.get.call(arguments.length<3?Wt:Qt):Bt.value}},ou.apply(this,arguments)}function am(Wt,jt){for(;!Object.prototype.hasOwnProperty.call(Wt,jt)&&(Wt=Fo(Wt))!==null;);return Wt}function ss(Wt){return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},ss(Wt)}function oo(){oo=function(){return Wt};var Wt={},jt=Object.prototype,Qt=jt.hasOwnProperty,Mt=typeof Symbol=="function"?Symbol:{},Bt=Mt.iterator||"@@iterator",ln=Mt.asyncIterator||"@@asyncIterator",dn=Mt.toStringTag||"@@toStringTag";function Yt(lr,ir,Ir){return Object.defineProperty(lr,ir,{value:Ir,enumerable:!0,configurable:!0,writable:!0}),lr[ir]}try{Yt({},"")}catch{Yt=function(ir,Ir,kr){return ir[Ir]=kr}}function Ct(lr,ir,Ir,kr){var br=ir&&ir.prototype instanceof Ht?ir:Ht,$a=Object.create(br.prototype),to=new Xr(kr||[]);return $a._invoke=function(vo,Oo,Wr){var fo="suspendedStart";return function(So,ps){if(fo==="executing")throw new Error("Generator is already running");if(fo==="completed"){if(So==="throw")throw ps;return{value:void 0,done:!0}}for(Wr.method=So,Wr.arg=ps;;){var fs=Wr.delegate;if(fs){var lo=dr(fs,Wr);if(lo){if(lo===Lt)continue;return lo}}if(Wr.method==="next")Wr.sent=Wr._sent=Wr.arg;else if(Wr.method==="throw"){if(fo==="suspendedStart")throw fo="completed",Wr.arg;Wr.dispatchException(Wr.arg)}else Wr.method==="return"&&Wr.abrupt("return",Wr.arg);fo="executing";var hs=St(vo,Oo,Wr);if(hs.type==="normal"){if(fo=Wr.done?"completed":"suspendedYield",hs.arg===Lt)continue;return{value:hs.arg,done:Wr.done}}hs.type==="throw"&&(fo="completed",Wr.method="throw",Wr.arg=hs.arg)}}}(lr,Ir,to),$a}function St(lr,ir,Ir){try{return{type:"normal",arg:lr.call(ir,Ir)}}catch(kr){return{type:"throw",arg:kr}}}Wt.wrap=Ct;var Lt={};function Ht(){}function Gt(){}function en(){}var nn={};Yt(nn,Bt,function(){return this});var on=Object.getPrototypeOf,yn=on&&on(on(_i([])));yn&&yn!==jt&&Qt.call(yn,Bt)&&(nn=yn);var On=en.prototype=Ht.prototype=Object.create(nn);function Qn(lr){["next","throw","return"].forEach(function(ir){Yt(lr,ir,function(Ir){return this._invoke(ir,Ir)})})}function tr(lr,ir){function Ir(br,$a,to,vo){var Oo=St(lr[br],lr,$a);if(Oo.type!=="throw"){var Wr=Oo.arg,fo=Wr.value;return fo&&ss(fo)=="object"&&Qt.call(fo,"__await")?ir.resolve(fo.__await).then(function(So){Ir("next",So,to,vo)},function(So){Ir("throw",So,to,vo)}):ir.resolve(fo).then(function(So){Wr.value=So,to(Wr)},function(So){return Ir("throw",So,to,vo)})}vo(Oo.arg)}var kr;this._invoke=function(br,$a){function to(){return new ir(function(vo,Oo){Ir(br,$a,vo,Oo)})}return kr=kr?kr.then(to,to):to()}}function dr(lr,ir){var Ir=lr.iterator[ir.method];if(Ir===void 0){if(ir.delegate=null,ir.method==="throw"){if(lr.iterator.return&&(ir.method="return",ir.arg=void 0,dr(lr,ir),ir.method==="throw"))return Lt;ir.method="throw",ir.arg=new TypeError("The iterator does not provide a 'throw' method")}return Lt}var kr=St(Ir,lr.iterator,ir.arg);if(kr.type==="throw")return ir.method="throw",ir.arg=kr.arg,ir.delegate=null,Lt;var br=kr.arg;return br?br.done?(ir[lr.resultName]=br.value,ir.next=lr.nextLoc,ir.method!=="return"&&(ir.method="next",ir.arg=void 0),ir.delegate=null,Lt):br:(ir.method="throw",ir.arg=new TypeError("iterator result is not an object"),ir.delegate=null,Lt)}function fr(lr){var ir={tryLoc:lr[0]};1 in lr&&(ir.catchLoc=lr[1]),2 in lr&&(ir.finallyLoc=lr[2],ir.afterLoc=lr[3]),this.tryEntries.push(ir)}function Ar(lr){var ir=lr.completion||{};ir.type="normal",delete ir.arg,lr.completion=ir}function Xr(lr){this.tryEntries=[{tryLoc:"root"}],lr.forEach(fr,this),this.reset(!0)}function _i(lr){if(lr){var ir=lr[Bt];if(ir)return ir.call(lr);if(typeof lr.next=="function")return lr;if(!isNaN(lr.length)){var Ir=-1,kr=function br(){for(;++Ir<lr.length;)if(Qt.call(lr,Ir))return br.value=lr[Ir],br.done=!1,br;return br.value=void 0,br.done=!0,br};return kr.next=kr}}return{next:Vo}}function Vo(){return{value:void 0,done:!0}}return Gt.prototype=en,Yt(On,"constructor",en),Yt(en,"constructor",Gt),Gt.displayName=Yt(en,dn,"GeneratorFunction"),Wt.isGeneratorFunction=function(lr){var ir=typeof lr=="function"&&lr.constructor;return!!ir&&(ir===Gt||(ir.displayName||ir.name)==="GeneratorFunction")},Wt.mark=function(lr){return Object.setPrototypeOf?Object.setPrototypeOf(lr,en):(lr.__proto__=en,Yt(lr,dn,"GeneratorFunction")),lr.prototype=Object.create(On),lr},Wt.awrap=function(lr){return{__await:lr}},Qn(tr.prototype),Yt(tr.prototype,ln,function(){return this}),Wt.AsyncIterator=tr,Wt.async=function(lr,ir,Ir,kr,br){br===void 0&&(br=Promise);var $a=new tr(Ct(lr,ir,Ir,kr),br);return Wt.isGeneratorFunction(ir)?$a:$a.next().then(function(to){return to.done?to.value:$a.next()})},Qn(On),Yt(On,dn,"Generator"),Yt(On,Bt,function(){return this}),Yt(On,"toString",function(){return"[object Generator]"}),Wt.keys=function(lr){var ir=[];for(var Ir in lr)ir.push(Ir);return ir.reverse(),function kr(){for(;ir.length;){var br=ir.pop();if(br in lr)return kr.value=br,kr.done=!1,kr}return kr.done=!0,kr}},Wt.values=_i,Xr.prototype={constructor:Xr,reset:function(lr){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ar),!lr)for(var ir in this)ir.charAt(0)==="t"&&Qt.call(this,ir)&&!isNaN(+ir.slice(1))&&(this[ir]=void 0)},stop:function(){this.done=!0;var lr=this.tryEntries[0].completion;if(lr.type==="throw")throw lr.arg;return this.rval},dispatchException:function(lr){if(this.done)throw lr;var ir=this;function Ir(Oo,Wr){return $a.type="throw",$a.arg=lr,ir.next=Oo,Wr&&(ir.method="next",ir.arg=void 0),!!Wr}for(var kr=this.tryEntries.length-1;kr>=0;--kr){var br=this.tryEntries[kr],$a=br.completion;if(br.tryLoc==="root")return Ir("end");if(br.tryLoc<=this.prev){var to=Qt.call(br,"catchLoc"),vo=Qt.call(br,"finallyLoc");if(to&&vo){if(this.prev<br.catchLoc)return Ir(br.catchLoc,!0);if(this.prev<br.finallyLoc)return Ir(br.finallyLoc)}else if(to){if(this.prev<br.catchLoc)return Ir(br.catchLoc,!0)}else{if(!vo)throw new Error("try statement without catch or finally");if(this.prev<br.finallyLoc)return Ir(br.finallyLoc)}}}},abrupt:function(lr,ir){for(var Ir=this.tryEntries.length-1;Ir>=0;--Ir){var kr=this.tryEntries[Ir];if(kr.tryLoc<=this.prev&&Qt.call(kr,"finallyLoc")&&this.prev<kr.finallyLoc){var br=kr;break}}br&&(lr==="break"||lr==="continue")&&br.tryLoc<=ir&&ir<=br.finallyLoc&&(br=null);var $a=br?br.completion:{};return $a.type=lr,$a.arg=ir,br?(this.method="next",this.next=br.finallyLoc,Lt):this.complete($a)},complete:function(lr,ir){if(lr.type==="throw")throw lr.arg;return lr.type==="break"||lr.type==="continue"?this.next=lr.arg:lr.type==="return"?(this.rval=this.arg=lr.arg,this.method="return",this.next="end"):lr.type==="normal"&&ir&&(this.next=ir),Lt},finish:function(lr){for(var ir=this.tryEntries.length-1;ir>=0;--ir){var Ir=this.tryEntries[ir];if(Ir.finallyLoc===lr)return this.complete(Ir.completion,Ir.afterLoc),Ar(Ir),Lt}},catch:function(lr){for(var ir=this.tryEntries.length-1;ir>=0;--ir){var Ir=this.tryEntries[ir];if(Ir.tryLoc===lr){var kr=Ir.completion;if(kr.type==="throw"){var br=kr.arg;Ar(Ir)}return br}}throw new Error("illegal catch attempt")},delegateYield:function(lr,ir,Ir){return this.delegate={iterator:_i(lr),resultName:ir,nextLoc:Ir},this.method==="next"&&(this.arg=void 0),Lt}},Wt}function Xu(Wt,jt,Qt,Mt,Bt,ln,dn){try{var Yt=Wt[ln](dn),Ct=Yt.value}catch(St){return void Qt(St)}Yt.done?jt(Ct):Promise.resolve(Ct).then(Mt,Bt)}function Uo(Wt){return function(){var jt=this,Qt=arguments;return new Promise(function(Mt,Bt){var ln=Wt.apply(jt,Qt);function dn(Ct){Xu(ln,Mt,Bt,dn,Yt,"next",Ct)}function Yt(Ct){Xu(ln,Mt,Bt,dn,Yt,"throw",Ct)}dn(void 0)})}}function jo(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return Qu(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?Qu(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function Qu(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function Hs(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function Zu(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function Gs(Wt,jt,Qt){return jt&&Zu(Wt.prototype,jt),Qt&&Zu(Wt,Qt),Object.defineProperty(Wt,"prototype",{writable:!1}),Wt}function Ks(Wt,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function");Wt.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Wt,writable:!0,configurable:!0}}),Object.defineProperty(Wt,"prototype",{writable:!1}),jt&&ls(Wt,jt)}function ls(Wt,jt){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},ls(Wt,jt)}function qs(Wt){var jt=ep();return function(){var Qt,Mt=Fo(Wt);if(jt){var Bt=Fo(this).constructor;Qt=Reflect.construct(Mt,arguments,Bt)}else Qt=Mt.apply(this,arguments);return om(this,Qt)}}function om(Wt,jt){if(jt&&(ss(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zr(Wt)}function Zr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ep(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fo(Wt){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Fo(Wt)}var $n=ft.Y.get("Stream"),su=Rn.get(),sm=po.get(),lm=["stopped","trackStopped","audioAmplitude","audioAmplitudeInfo","muteStateChange","activeStateChange","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","flowStatusChanged","audioFlowStatusChanged","videoFlowStatusChanged","remoteAudioFlowStatusChanged","remoteVideoFlowStatusChanged","release","constraintsChanged"],yo=new Map,Ys=new WeakMap,cs=new WeakMap,ds=new WeakMap,lu=new WeakMap,Jo={},so=function(Wt){Ks(Qt,Wt);var jt=qs(Qt);function Qt(Mt){var Bt,ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Hs(this,Qt),Bt=jt.call(this,$n),ln.constructor!==!0)throw new Error("Stream constructor should not be used directly, please use a static method of class Stream such as : createStreamFromUserMedia, createStreamFromMediaStream, createScreensharingStream");if(delete ln.constructor,!ln.hasOwnProperty("type"))throw new Error("Cannot create Stream with no type");if($n.debug("Create Stream with options",ln),Bt.data=Mt,Bt.audioInput=ln.hasOwnProperty("audioInput")?ln.audioInput:null,Bt.videoInput=ln.hasOwnProperty("videoInput")?ln.videoInput:null,Bt.audioFilterIsApplied=!1,Bt.videoFilterIsApplied=!1,Bt.audioAppliedFilter="none",Bt.videoAppliedFilter="none",Bt.originalMediaTrack=null,ln.hasOwnProperty("userMediaStreamId")?(Bt.userMediaStreamId=ln.userMediaStreamId,Bt.isRemote=!1,yo.set(Bt.userMediaStreamId,Zr(Bt))):(Bt.userMediaStreamId=null,Bt.isRemote=!0),Ut.g.isPropertyTypeof(ln,"streamId","number")?Bt.streamId=ln.streamId:Bt.userMediaStreamId!==null?Bt.streamId=Number(Bt.userMediaStreamId):Number.MAX_SAFE_INTEGER!==void 0?Bt.streamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER):Bt.streamId=Math.floor(1024*Math.random()*1024*1024),Bt.contact=ln.hasOwnProperty("contact")?ln.contact:null,ln.hasOwnProperty("callId")?(Bt.callId=ln.callId,Bt.callAudioAvailable=ln.callAudioAvailable,Bt.callAudioActive=ln.callAudioActive,Bt.callAudioMuted=ln.callAudioMuted,Bt.callAudioSilent=ln.callAudioSilent,Bt.callVideoAvailable=ln.callVideoAvailable,Bt.callVideoActive=ln.callVideoActive,Bt.callVideoMuted=ln.callVideoMuted,Bt.callVideoSilent=ln.callVideoSilent):Bt.callId=null,Bt.publishedInConversations=new Map,Bt.mediaRecorder=null,Bt.recordedBlobs=[],Ys.set(Zr(Bt),!!ln.hasOwnProperty("screensharing")&&ln.screensharing),cs.set(Zr(Bt),null),ds.set(Zr(Bt),null),Bt.screensharingRemoteAccessStream=!1,apiRTC.userAgentInstance.apiRTCStreamsList.set(Bt.streamId,Zr(Bt)),Bt.type=ln.type,Bt.visibilityChangeHandlerWhenTorchOn=function(on){if($n.debug("visibilityChangeHandlerWhenTorchOn :",document.visibilityState),document.visibilityState==="hidden"&&($n.debug("visibilitychange is now hidden"),apiRTC.osName==="Android")){var yn={video:{advanced:[{torch:!1}]}};Bt.informContactsOfChangedConstraints(yn),Bt.emitConstraintsChanged(yn),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)}},apiRTC.browser!=="IE"&&Bt.data!==null){var dn,Yt=function(on){on.addEventListener("ended",function(yn){Jo.hasOwnProperty(on.id)||(Xt.get(Zr(Bt)).emit("trackStopped",{type:on.kind,id:on.id,reason:"ended"}),Jo[on.id]=!0)})},Ct=jo(Bt.data.getVideoTracks());try{for(Ct.s();!(dn=Ct.n()).done;){var St=dn.value;Yt(St)}}catch(on){Ct.e(on)}finally{Ct.f()}var Lt,Ht=jo(Bt.data.getAudioTracks());try{for(Ht.s();!(Lt=Ht.n()).done;){var Gt=Lt.value;Yt(Gt)}}catch(on){Ht.e(on)}finally{Ht.f()}}var en={};if(Ut.g.isTypeof(Bt.userMediaStreamId,"string")?(en.userMediaStop=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId){var yn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};Xt.get(Zr(Bt)).emit("stopped",yn);var On=lu.get(Zr(Bt));if(On)for(var Qn in On)apiRTC.removeEventListener(Qn,On[Qn])}},en.localStreamUpdated=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId&&on.detail.callId===null){if(on.detail.changeList.indexOf("audioIsMuted")>=0){var yn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"audio",muted:on.detail.audioIsMuted};Xt.get(Zr(Bt)).emit("muteStateChange",yn),Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")}if(on.detail.changeList.indexOf("videoIsMuted")>=0){var On={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"video",muted:on.detail.videoIsMuted};Xt.get(Zr(Bt)).emit("muteStateChange",On),Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video")}on.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),on.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}},en.backgroundSubstractionStopVisibilityChange=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId){var yn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};Xt.get(Zr(Bt)).emit("backgroundSubstractionStopVisibilityChange",yn)}},en.backgroundSubstractionStopComputeTime=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId){var yn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};Xt.get(Zr(Bt)).emit("backgroundSubstractionStopComputeTime",yn)}},en.AIESnapshot=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId){var yn=on.detail.image;Xt.get(Zr(Bt)).emit("AIESnapshot",yn)}},en.AIELog=function(on){if(on.detail.userMediaStreamId===Bt.userMediaStreamId){var yn=on.detail.log;Xt.get(Zr(Bt)).emit("AIELog",yn)}}):Ut.g.isTypeof(Bt.callId,"string")&&(en.hangup=function(on){if(on.detail.hangupType==="remote"&&on.detail.callId===Bt.callId){var yn={streamId:Bt.streamId,callId:Bt.callId};Xt.get(Zr(Bt)).emit("stopped",yn);var On=lu.get(Zr(Bt));for(var Qn in On)apiRTC.removeEventListener(Qn,On[Qn])}},en.remoteStreamUpdated=function(on){if(on.detail.callId===Bt.callId){if(on.detail.changeList.indexOf("audioIsActive")>=0){Bt.callAudioActive=on.detail.audioIsActive;var yn={streamId:Bt.streamId,callId:Bt.callId,type:"audio",active:on.detail.audioIsActive};Xt.get(Zr(Bt)).emit("activeStateChange",yn)}if(on.detail.changeList.indexOf("audioIsMuted")>=0){Bt.callAudioMuted=on.detail.audioIsMuted;var On={streamId:Bt.streamId,callId:Bt.callId,type:"audio",muted:on.detail.audioIsMuted};Xt.get(Zr(Bt)).emit("muteStateChange",On),Bt.sendRemoteAudioFlowStatusChanged({enabled:!on.detail.audioIsMuted,muted:on.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!on.detail.audioIsMuted,muted:on.detail.audioIsSilent})}if(on.detail.changeList.indexOf("videoIsActive")>=0){Bt.callVideoActive=on.detail.videoIsActive;var Qn={streamId:Bt.streamId,callId:Bt.callId,type:"video",active:on.detail.videoIsActive};Xt.get(Zr(Bt)).emit("activeStateChange",Qn)}if(on.detail.changeList.indexOf("videoIsMuted")>=0){Bt.callVideoMuted=on.detail.videoIsMuted;var tr={streamId:Bt.streamId,callId:Bt.callId,type:"video",muted:on.detail.videoIsMuted};Xt.get(Zr(Bt)).emit("muteStateChange",tr),Bt.sendRemoteVideoFlowStatusChanged({enabled:!on.detail.videoIsMuted,muted:on.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!on.detail.videoIsMuted,muted:on.detail.videoIsSilent})}on.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.callAudioSilent=on.detail.audioIsSilent,Bt.sendRemoteAudioFlowStatusChanged({enabled:!on.detail.audioIsMuted,muted:on.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!on.detail.audioIsMuted,muted:on.detail.audioIsSilent})),on.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.callVideoSilent=on.detail.videoIsSilent,Bt.sendRemoteVideoFlowStatusChanged({enabled:!on.detail.videoIsMuted,muted:on.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!on.detail.videoIsMuted,muted:on.detail.videoIsSilent})),on.detail.changeList.indexOf("audioIsSilentLocally")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),on.detail.changeList.indexOf("videoIsSilentLocally")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}}),Object.keys(en).length>0)for(var nn in lu.set(Zr(Bt),en),en)apiRTC.addEventListener(nn,en[nn]);return Bt}return Gs(Qt,[{key:"getContact",value:function(){return this.contact}},{key:"getData",value:function(){return this.data}},{key:"getConversations",value:function(){var Mt,Bt=[],ln=jo(this.publishedInConversations.keys());try{for(ln.s();!(Mt=ln.n()).done;){var dn=Mt.value;Bt.push(sm.getConversations(dn))}}catch(Yt){ln.e(Yt)}finally{ln.f()}return Bt}},{key:"isScreensharing",value:function(){return Ys.get(this)}},{key:"isScreensharingRemoteAccess",value:function(){return this.screensharingRemoteAccessStream}},{key:"hasData",value:function(){return this.data!==null}},{key:"hasVideo",value:function(){return this.callId?this.callVideoAvailable&&this.callVideoActive:!!this.hasData()&&this.data.getVideoTracks().length>0}},{key:"hasAudio",value:function(){return this.callId?this.callAudioAvailable&&this.callAudioActive:!!this.hasData()&&this.data.getAudioTracks().length>0}},{key:"isVideoMuted",value:function(){if(this.callId)return this.callVideoSilent;if(this.hasData()){var Mt=this.data.getVideoTracks();if(Mt&&Mt.length>0)return Mt[0].muted}return!0}},{key:"isVideoEnabled",value:function(){if(this.callId)return!this.callVideoMuted;if(this.hasData()){var Mt=this.data.getVideoTracks();return Mt&&Mt.length>0&&Mt[0].enabled}return!1}},{key:"isAudioMuted",value:function(){if(this.callId)return this.callAudioSilent;if(this.hasData()){var Mt=this.data.getAudioTracks();if(Mt&&Mt.length>0)return Mt[0].muted}return!0}},{key:"isAudioEnabled",value:function(){if(this.callId)return!this.callAudioMuted;if(this.hasData()){var Mt=this.data.getAudioTracks();return Mt&&Mt.length>0&&Mt[0].enabled}return!1}},{key:"getType",value:function(){return this.type}},{key:"release",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.childType==="noiseReduction"&&this.parent!==void 0){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx);var Bt=apiCC.getUserMediaStream(this.parent.userMediaStreamId);apiCC.audioProcessor.listenToAudio(this.parent.data,Bt)}this.hasData()&&(this.releaseAudio(),this.releaseVideo(),this.data=null,this.userMediaStreamId&&(apiCC.releaseUserMediaStream(this.userMediaStreamId),yo.delete(this.userMediaStreamId))),Xt.get(this).emit("release",{streamId:this.streamId,userMediaStreamId:this.userMediaStreamId}),Mt.releaseChildrenStream!==!1&&this.releaseAllChildren(),Mt.releaseParentStream!==!1&&this.parent!==void 0&&($n.debug("release parent is also requested"),this.parent.release(Mt)),$n.debug("Removing in apiRTCStreamsList :",this.streamId),apiRTC.userAgentInstance.apiRTCStreamsList.delete(this.streamId)}},{key:"releaseAudio",value:function(){var Mt=this;this.hasData()&&(this.disableAudioAnalysis(),this.data.getAudioTracks().forEach(function(Bt){Bt.stop(),Jo.hasOwnProperty(Bt.id)||(Xt.get(Mt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseAudio"}),Jo[Bt.id]=!0)}))}},{key:"releaseVideo",value:function(){var Mt=this;this.hasData()&&this.data.getVideoTracks().forEach(function(Bt){Bt.stop(),Jo.hasOwnProperty(Bt.id)||(Xt.get(Mt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseVideo"}),Jo[Bt.id]=!0)})}},{key:"muteAudio",value:function(){$n.warn("This method is deprecated now, please use Stream.disableAudio() instead"),this.disableAudio()}},{key:"muteVideo",value:function(){$n.warn("This method is deprecated now, please use Stream.disableVideo() instead"),this.disableVideo()}},{key:"unmuteAudio",value:function(){$n.warn("This method is deprecated now, please use Stream.enableAudio() instead"),this.enableAudio()}},{key:"unmuteVideo",value:function(){$n.warn("This method is deprecated now, please use Stream.enableVideo() instead"),this.enableVideo()}},{key:"sendStreamRequest",value:function(Mt,Bt,ln){var dn={};dn.streamId=this.streamId;var Yt=this.publishedInConversations.keys();dn.roomname=Yt.next().value,this.contact.sendRequest(Mt,dn).then(function(){return Bt()}).catch(function(Ct){return $n.error("Error on sendRequest :",Ct),ln()})}},{key:"enableAudio",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var ln=Uo(oo().mark(function dn(Yt,Ct){var St;return oo().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(Mt.isAudioEnabled()!==!0||Mt.isRemote!==!1){Lt.next=3;break}return $n.debug("audio already enabled"),Lt.abrupt("return",Yt());case 3:if(!Mt.userMediaStreamId){Lt.next=16;break}if(St=apiCC.getUserMediaStream(Mt.userMediaStreamId)){Lt.next=7;break}return Lt.abrupt("return",Ct());case 7:if(St.unMuteAudioOnStreams("enabled"),Mt.parent===void 0){Lt.next=12;break}return $n.debug("this is a child stream, need to unmute parent if necessary"),Lt.next=12,Mt.parent.enableAudio();case 12:return Mt.childrens!==void 0&&Mt.childrens.forEach(function(){var Ht=Uo(oo().mark(function Gt(en,nn){return oo().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,en.enableAudio();case 2:case"end":return on.stop()}},Gt)}));return function(Gt,en){return Ht.apply(this,arguments)}}()),Lt.abrupt("return",Yt());case 16:if(!Mt.callId){Lt.next=29;break}if(Bt!==!0){Lt.next=23;break}$n.debug("enableAudio remote with applyRemotely"),$n.debug("this.contact :",Mt.contact),Mt.sendStreamRequest(et.g.CONTACT_ENABLE_AUDIO_REQUEST,Yt,Ct),Lt.next=28;break;case 23:if(Mt.hasData()){Lt.next=25;break}return Lt.abrupt("return",Ct());case 25:Mt.data.getAudioTracks().forEach(function(Ht){Ht.enabled=!0}),Mt.sendAudioFlowStatusChanged(),Mt.sendFlowStatusChanged("audio");case 28:return Lt.abrupt("return",Yt());case 29:return Lt.abrupt("return",Ct());case 30:case"end":return Lt.stop()}},dn)}));return function(dn,Yt){return ln.apply(this,arguments)}}())}},{key:"disableAudio",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var ln=Uo(oo().mark(function dn(Yt,Ct){var St;return oo().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(Mt.isAudioEnabled()!==!1||Mt.isRemote!==!1){Lt.next=3;break}return $n.debug("audio already disabled"),Lt.abrupt("return",Yt());case 3:if(!Mt.userMediaStreamId){Lt.next=16;break}if(St=apiCC.getUserMediaStream(Mt.userMediaStreamId)){Lt.next=7;break}return Lt.abrupt("return",Ct());case 7:if(St.muteAudioOnStreams("enabled"),Mt.parent===void 0){Lt.next=12;break}return $n.debug("this is a child stream, need to mute parent if necessary"),Lt.next=12,Mt.parent.disableAudio();case 12:return Mt.childrens!==void 0&&Mt.childrens.forEach(function(){var Ht=Uo(oo().mark(function Gt(en,nn){return oo().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,en.disableAudio();case 2:case"end":return on.stop()}},Gt)}));return function(Gt,en){return Ht.apply(this,arguments)}}()),Lt.abrupt("return",Yt());case 16:if(!Mt.callId){Lt.next=29;break}if(Bt!==!0){Lt.next=23;break}$n.debug("disableAudio remote with applyRemotely"),$n.debug("this.contact :",Mt.contact),Mt.sendStreamRequest(et.g.CONTACT_DISABLE_AUDIO_REQUEST,Yt,Ct),Lt.next=28;break;case 23:if(Mt.hasData()){Lt.next=25;break}return Lt.abrupt("return",Ct());case 25:Mt.data.getAudioTracks().forEach(function(Ht){Ht.enabled=!1}),Mt.sendAudioFlowStatusChanged(),Mt.sendFlowStatusChanged("audio");case 28:return Lt.abrupt("return",Yt());case 29:return Lt.abrupt("return",Ct());case 30:case"end":return Lt.stop()}},dn)}));return function(dn,Yt){return ln.apply(this,arguments)}}())}},{key:"enableVideo",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var ln=Uo(oo().mark(function dn(Yt,Ct){var St;return oo().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(Mt.isVideoEnabled()!==!0||Mt.isRemote!==!1){Lt.next=3;break}return $n.debug("video already enabled"),Lt.abrupt("return",Yt());case 3:if(!Mt.userMediaStreamId){Lt.next=16;break}if(St=apiCC.getUserMediaStream(Mt.userMediaStreamId)){Lt.next=7;break}return Lt.abrupt("return",Ct());case 7:if(St.unMuteVideoOnStreams("enabled"),Mt.parent===void 0){Lt.next=12;break}return $n.debug("this is a child stream, need to unmute parent if necessary"),Lt.next=12,Mt.parent.enableVideo();case 12:return Mt.childrens!==void 0&&Mt.childrens.forEach(function(){var Ht=Uo(oo().mark(function Gt(en,nn){return oo().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,en.enableVideo();case 2:case"end":return on.stop()}},Gt)}));return function(Gt,en){return Ht.apply(this,arguments)}}()),Lt.abrupt("return",Yt());case 16:if(!Mt.callId){Lt.next=29;break}if(Bt!==!0){Lt.next=23;break}$n.debug("enableVideo remote with applyRemotely"),$n.debug("this.contact :",Mt.contact),Mt.sendStreamRequest(et.g.CONTACT_ENABLE_VIDEO_REQUEST,Yt,Ct),Lt.next=28;break;case 23:if(Mt.hasData()){Lt.next=25;break}return Lt.abrupt("return",Ct());case 25:Mt.data.getVideoTracks().forEach(function(Ht){Ht.enabled=!0}),Mt.sendVideoFlowStatusChanged(),Mt.sendFlowStatusChanged("video");case 28:return Lt.abrupt("return",Yt());case 29:return Lt.abrupt("return",Ct());case 30:case"end":return Lt.stop()}},dn)}));return function(dn,Yt){return ln.apply(this,arguments)}}())}},{key:"disableVideo",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var ln=Uo(oo().mark(function dn(Yt,Ct){var St;return oo().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(Mt.isVideoEnabled()!==!1||Mt.isRemote!==!1){Lt.next=3;break}return $n.debug("video already disabled"),Lt.abrupt("return",Yt());case 3:if(!Mt.userMediaStreamId){Lt.next=16;break}if(St=apiCC.getUserMediaStream(Mt.userMediaStreamId)){Lt.next=7;break}return Lt.abrupt("return",Ct());case 7:if(St.muteVideoOnStreams("enabled"),Mt.parent===void 0){Lt.next=12;break}return $n.debug("this is a child stream, need to mute parent if necessary"),Lt.next=12,Mt.parent.disableVideo();case 12:return Mt.childrens!==void 0&&Mt.childrens.forEach(function(){var Ht=Uo(oo().mark(function Gt(en,nn){return oo().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,en.disableVideo();case 2:case"end":return on.stop()}},Gt)}));return function(Gt,en){return Ht.apply(this,arguments)}}()),Lt.abrupt("return",Yt());case 16:if(!Mt.callId){Lt.next=29;break}if(Bt!==!0){Lt.next=23;break}$n.debug("disableVideo remote with applyRemotely"),$n.debug("this.contact :",Mt.contact),Mt.sendStreamRequest(et.g.CONTACT_DISABLE_VIDEO_REQUEST,Yt,Ct),Lt.next=28;break;case 23:if(Mt.hasData()){Lt.next=25;break}return Lt.abrupt("return",Ct());case 25:Mt.data.getVideoTracks().forEach(function(Ht){Ht.enabled=!1}),Mt.sendVideoFlowStatusChanged(),Mt.sendFlowStatusChanged("video");case 28:return Lt.abrupt("return",Yt());case 29:return Lt.abrupt("return",Ct());case 30:case"end":return Lt.stop()}},dn)}));return function(dn,Yt){return ln.apply(this,arguments)}}())}},{key:"getAudioFlowStatus",value:function(){var Mt={};return this.data.getAudioTracks().forEach(function(Bt){Mt.enabled=Bt.enabled,Mt.muted=Bt.muted}),Mt}},{key:"getVideoFlowStatus",value:function(){var Mt={};return this.data.getVideoTracks().forEach(function(Bt){Mt.enabled=Bt.enabled,Mt.muted=Bt.muted}),Mt}},{key:"getRemoteAudioFlowStatus",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(!Mt.isRemote)return ln("Please use this function on a remote Stream");if($n.debug("getRemoteAudioFlowStatus()"),Mt.contact===null)return ln("No contact associated");var dn=Mt.addPendingPromise("getRemoteAudioFlowStatus",Bt,ln);Mt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Mt.callId,streamId:Mt.getId(),timeout:dn})})}},{key:"getRemoteVideoFlowStatus",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(!Mt.isRemote)return ln("Please use this function on a remote Stream");if($n.debug("getRemoteVideoFlowStatus()"),Mt.contact===null)return ln("No contact associated");var dn=Mt.addPendingPromise("getRemoteVideoFlowStatus",Bt,ln);Mt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Mt.callId,streamId:Mt.getId(),timeout:dn})})}},{key:"attachToElement",value:function(Mt){$n.debug("attachToElement"),su.attachMediaStream(Mt,this.data)}},{key:"addInDiv",value:function(Mt,Bt,ln,dn,Yt){$n.debug("addInDiv"),su.addStreamInDiv(this.data,this.type,Mt,Bt,ln,dn,Yt)}},{key:"removeFromDiv",value:function(Mt,Bt){$n.debug("removeFromDiv"),su.removeElementFromDiv(Mt,Bt)}},{key:"startRecord",value:function(Mt){return $n.info("startRecord :",Mt),apiCC.recordMgr.record(this.data,Mt)}},{key:"stopRecord",value:function(){return $n.info("stopRecord() - Stopping record"),apiCC.recordMgr.stop()}},{key:"pauseRecord",value:function(){return $n.info("pauseRecord() - Pausing record"),apiCC.recordMgr.pause()}},{key:"resumeRecord",value:function(){return $n.info("resumeRecord() - Resuming record"),apiCC.recordMgr.resume()}},{key:"enableAudioAnalysis",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n.info("enableAudioAnalysis()");var ln=Ut.g.getAudioContext(),dn=null,Yt=!1,Ct=ds.get(this),St=cs.get(this);ln?this.hasData()?Ct!==null||St!==null?$n.error("enableAudioAnalysis() - Audio analysis already enabled"):(Ct=ln.createMediaStreamSource(this.data),(St=ln.createScriptProcessor(2048,1,1)).connect(ln.destination),St.onaudioprocess=function(){var Lt,Ht=new Uint8Array(St.analyser.frequencyBinCount),Gt=0;St.analyser.getByteFrequencyData(Ht);var en,nn=jo(Ht);try{for(nn.s();!(en=nn.n()).done;)Gt+=en.value}catch(Qn){nn.e(Qn)}finally{nn.f()}Lt=Gt/Ht.length,Xt.get(Mt).emit("audioAmplitude",Lt);var on=0;Ht.sort(function(Qn,tr){return tr-Qn}),Ht=Ht.slice(0,50);for(var yn=0;yn<Ht.length;yn++)on+=Ht[yn];Lt=on/Ht.length;var On=typeof Bt.threshold=="number"?Bt.threshold:et.g.STREAM_AUDIO_ANALYSIS_THRESHOLD;Lt>On&&(Yt||(Yt=!0,Xt.get(Mt).emit("audioAmplitudeInfo",{amplitude:Lt,isSpeaking:!0})),dn!==null&&clearTimeout(dn),dn=setTimeout(function(){Xt.get(Mt).emit("audioAmplitudeInfo",{amplitude:Lt,isSpeaking:!1}),Yt=!1},1e3))},St.analyser=ln.createAnalyser(),St.analyser.smoothingTimeConstant=.5,St.analyser.fftSize=1024,Ct.connect(St.analyser),St.analyser.connect(St),cs.set(this,St),ds.set(this,Ct)):$n.error("enableAudioAnalysis() - Stream has no data, unable to enable audio analysis"):$n.error("enableAudioAnalysis() - AudioContext is not available, unable to enable audio analysis")}},{key:"disableAudioAnalysis",value:function(){$n.info("disableAudioAnalysis()");var Mt=ds.get(this),Bt=cs.get(this);Mt!==null&&Mt.disconnect(),Bt!==null&&(Bt.analyser.disconnect(),Bt.disconnect()),cs.set(this,null),ds.set(this,null)}},{key:"takeSnapshot",value:function(){var Mt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n.info("takeSnapshot()");var ln=null,dn=null;return new Promise(function(Yt,Ct){if(Mt.hasData()){Mt.hasVideo()||$n.warn("takeSnapshot() - This stream does not have a video track"),ln=document.createElement("video"),dn=function(Gt){if(St.width=ln.videoWidth,St.height=ln.videoHeight,Bt.hasOwnProperty("width")&&(St.width=Bt.width),Bt.hasOwnProperty("height")&&(St.height=Bt.height),Bt.hasOwnProperty("filters")){for(var en=[],nn=0,on=Object.keys(Bt.filters);nn<on.length;nn++){var yn=on[nn];en.push(yn+"("+Bt.filters[yn]+")")}Lt.filter=en.join(" ")}Lt.drawImage(ln,0,0,St.width,St.height),Gt===!0&&ln.remove(),Bt.hasOwnProperty("output")&&Bt.output==="blob"?Bt.outputMimeType!==void 0?($n.debug("options.outputMimeType is defined :",Bt.outputMimeType),St.toBlob(function(On){Yt(On)},Bt.outputMimeType,Bt.outputQualityArgument)):St.toBlob(function(On){Yt(On)},"image/png"):Bt.outputMimeType!==void 0?($n.debug("options.outputMimeType is defined :",Bt.outputMimeType),Yt(St.toDataURL(Bt.outputMimeType,Bt.outputQualityArgument))):Yt(St.toDataURL("image/png"))};var St=document.createElement("canvas"),Lt=St.getContext("2d");Bt.divId===void 0||Bt.divId===null?setTimeout(function(){Mt.attachToElement(ln),ln.addEventListener("canplay",function(){dn(!0)}),ln.muted=!0,ln.play()},1e3):(ln=document.getElementById(Bt.divId))===null?$n.error("divId not found for snapshot"):dn(!1)}else{var Ht="takeSnapshot() - Stream has no data, cannot get snapshot";$n.error(Ht),Ct(new Error(Ht))}})}},{key:"getId",value:function(){return String(this.streamId)}},{key:"getOwner",value:function(){return this.contact?this.contact:Br.getActiveSession().getUserAgent()}},{key:"getLabels",value:function(){var Mt={};return this.hasData()&&this.data.getAudioTracks().length>0&&(Mt.audioSourceLabel="",this.data.getAudioTracks()[0].label&&(Mt.audioSourceLabel=this.data.getAudioTracks()[0].label)),this.hasData()&&this.data.getVideoTracks().length>0&&(Mt.videoSourceLabel="",this.data.getVideoTracks()[0].label&&(Mt.videoSourceLabel=this.data.getVideoTracks()[0].label)),$n.debug("getLabels:",Mt),Mt}},{key:"checkImageCaptureCompatibility",value:function(){return typeof ImageCapture>"u"}},{key:"getLocalMediaStreamTrack",value:function(){var Mt=null;return this.data.getVideoTracks().length===1&&(Mt=this.data.getVideoTracks()[0]),Mt}},{key:"getLocalMediaStreamAudioTrack",value:function(){var Mt=null;return this.data.getAudioTracks().length===1&&(Mt=this.data.getAudioTracks()[0]),Mt}},{key:"informContactsOfChangedConstraints",value:function(Mt){var Bt,ln=po.get().getConversations(),dn=jo(ln.keys());try{for(dn.s();!(Bt=dn.n()).done;){var Yt=Bt.value,Ct=ln.get(Yt).getContactsArray(),St=void 0;for(St=0;St<Ct.length;St++)Ct[St].sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:Mt,mediaStreamId:this.data.id})}}catch(Ht){dn.e(Ht)}finally{dn.f()}if(this.callId!==null){$n.debug("This stream is used in a call, send CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER to remote");var Lt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callId);Lt!==null&&Br.getActiveSession().getOrCreateContact(Lt.remoteId).sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:Mt,mediaStreamId:this.data.id})}}},{key:"applyConstraints",value:function(Mt){var Bt=this;return new Promise(function(ln,dn){if(Bt.isRemote){if($n.debug("applyConstraints() on a remote stream"),Bt.contact===null)return dn("No contact associated");var Yt=Bt.addPendingPromise("applyConstraints",ln,dn);Bt.contact.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Bt.callId,streamId:Bt.getId(),timeout:Yt,constraints:Mt})}else{if($n.debug("applyConstraints() local"),!MediaStreamTrack.prototype.hasOwnProperty("applyConstraints"))return dn("Navigator not compatible with this function");var Ct=null,St=null;if(Mt===void 0)return dn("Missing argument");if(Mt.audio!==void 0){var Lt=Bt.getLocalMediaStreamAudioTrack();Lt!==null&&(Ct=Lt.applyConstraints(Mt.audio))}if(Mt.video!==void 0){var Ht=Bt.getLocalMediaStreamTrack();Ht!==null&&(St=Ht.applyConstraints(Mt.video))}Promise.all([Ct,St]).then(function(Gt){return $n.debug("Constraints applied :",Mt),Mt&&Mt.video&&Mt.video.advanced&&Mt.video.advanced[0].torch===!0?($n.debug("Torch to true:",Mt),document.addEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)):Mt&&Mt.video&&Mt.video.advanced&&Mt.video.advanced[0].torch===!1&&($n.debug("Torch to false:",Mt),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)),Bt.informContactsOfChangedConstraints(Mt),ln()}).catch(function(Gt){return $n.error("reject Promise all :",Gt),dn(Gt)})}})}},{key:"applyConstraint",value:function(Mt,Bt){$n.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"setCapability",value:function(Mt,Bt){$n.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"getSettings",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(!Mt.isRemote)return $n.debug("getSettings()"),MediaStreamTrack.prototype.hasOwnProperty("getSettings")?Bt({audio:Mt.getStreamTrackSettings(Mt.getLocalMediaStreamAudioTrack()),video:Mt.getStreamTrackSettings(Mt.getLocalMediaStreamTrack())}):ln("Navigator not compatible with this function");if($n.debug("getSettings() on a remote stream"),Mt.contact===null)return ln("No contact associated");var dn=Mt.addPendingPromise("getSettings",Bt,ln);Mt.contact.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Mt.callId,streamId:Mt.getId(),timeout:dn})})}},{key:"getStreamTrackSettings",value:function(Mt){if(Mt!==null)return Mt.getSettings()}},{key:"getCapabilities",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(!Mt.isRemote)return $n.debug("getCapabilities()"),MediaStreamTrack.prototype.hasOwnProperty("getCapabilities")?Bt({audio:Mt.getStreamTrackCapabilities(Mt.getLocalMediaStreamAudioTrack()),video:Mt.getStreamTrackCapabilities(Mt.getLocalMediaStreamTrack())}):ln("Navigator not compatible with this function");if($n.debug("getCapabilities() on a remote stream"),Mt.contact===null)return ln("No contact associated");var dn=Mt.addPendingPromise("getCapabilities",Bt,ln);Mt.contact.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Mt.callId,streamId:Mt.getId(),timeout:dn})})}},{key:"getStreamTrackCapabilities",value:function(Mt){return Mt!==null?Mt.getCapabilities():{}}},{key:"getConstraints",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(!Mt.isRemote)return $n.debug("getConstraints()"),MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?Bt({audio:Mt.getStreamTrackConstraints(Mt.getLocalMediaStreamAudioTrack()),video:Mt.getStreamTrackConstraints(Mt.getLocalMediaStreamTrack())}):ln("Navigator not compatible with this function");if($n.debug("getConstraints() on a remote stream"),Mt.contact===null)return ln("No contact associated");var dn=Mt.addPendingPromise("getConstraints",Bt,ln);Mt.contact.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER,{requesterId:Br.getActiveSession().getUserAgent().userId,callId:Mt.callId,streamId:Mt.getId(),timeout:dn})})}},{key:"getStreamTrackConstraints",value:function(Mt){return Mt!==null?Mt.getConstraints():{}}},{key:"takePhoto",value:function(){var Mt=this;return new Promise(function(Bt,ln){if($n.debug("takePhoto()"),Mt.checkImageCaptureCompatibility())ln("Your navigator is not compatible with takePhoto()");else{var dn=Mt.getLocalMediaStreamTrack();dn!==null?new ImageCapture(dn).takePhoto().then(function(Yt){var Ct=new Image;Ct.src=URL.createObjectURL(Yt),Bt(Ct)}).catch(function(Yt){ln("takePhoto() error: ",Yt)}):ln("No local mediaStreamTrack found")}})}},{key:"activateAIAnnotations",value:function(){var Mt=this.getStreamAIE();Mt!==null&&Mt.activateAnnotations()}},{key:"stopAIAnnotations",value:function(){var Mt=this.getStreamAIE();Mt!==null&&Mt.stopAnnotations()}},{key:"activateAILogs",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof Mt!="number")return $n.error("minLogPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateLogs(Mt)}},{key:"stopAILogs",value:function(){var Mt=this.getStreamAIE();Mt!==null&&Mt.stopLogs()}},{key:"activateAISnapshots",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof Mt!="number")return $n.error("minSnapshotPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateSnapshots(Mt)}},{key:"stopAISnapshots",value:function(){var Mt=this.getStreamAIE();Mt!==null&&Mt.stopSnapshots()}},{key:"getStreamAIE",value:function(){var Mt=null;if(apiCC!==void 0){var Bt=apiCC.getUserMediaStream(this.userMediaStreamId);if(Bt.mediaFilterManager!==null){var ln=Bt.mediaFilterManager.filters;Object.values(ln).forEach(function(dn){dn.streamAIE!==null&&(Mt=dn.streamAIE)}),Mt===null&&$n.error("Applied filter is not an AI filter")}else $n.error("No filter applied on stream")}return Mt}},{key:"addChildren",value:function(Mt,Bt){this.childrenTypeExists(Bt)?$n.error("This stream already has a sub instance running for this"):(this.childrens===void 0&&(this.childrens=[]),this.childrens.push(Mt))}},{key:"releaseChildren",value:function(Mt){this.childrens!==void 0&&this.childrens.forEach(function(Bt,ln){Bt.childType===Mt&&Bt.release({releaseParentStream:!1})})}},{key:"releaseAllChildren",value:function(){$n.debug("releaseAllChildren"),this.childrens!==void 0&&this.childrens.forEach(function(Mt,Bt){Mt.release({releaseParentStream:!1})})}},{key:"removeChildren",value:function(Mt){var Bt=this;this.childrens!==void 0&&this.childrens.forEach(function(ln,dn){if(ln.childType===Mt)return Bt.childrens.splice(dn,1)})}},{key:"childrenTypeExists",value:function(Mt){var Bt=!1;return this.childrens!==void 0&&this.childrens.forEach(function(ln){ln.childType===Mt&&(Bt=!0)}),Bt}},{key:"createChildStreamFromStream",value:function(Mt,Bt){var ln=this,dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Yt,Ct){$n.debug("createChildStreamFromStream");var St={};St.type=et.g.STREAM_TYPE_NO_INPUT,Mt.getAudioTracks().length>0&&(St.type=et.g.STREAM_TYPE_AUDIO),Mt.getVideoTracks().length>0&&(St.type=et.g.STREAM_TYPE_VIDEO);var Lt=ln;apiRTC.createUserMediaStream({type:"media",stream:Mt,success:function(Ht){$n.debug("[createChildStreamFromStream] success; userMediaStreamId: "+Ht.userMediaStreamId),St.constructor=!0,St.userMediaStreamId=Ht.userMediaStreamId;var Gt=new cm(Ht.stream,St,Lt,Bt);Gt.parentStreamCtx=dn,dn.audioFilterIsApplied===!0&&(Gt.audioFilterIsApplied=dn.audioFilterIsApplied,Gt.audioAppliedFilter=dn.audioAppliedFilter),dn.videoFilterIsApplied===!0&&(Gt.videoFilterIsApplied=dn.videoFilterIsApplied,Gt.videoAppliedFilter=dn.videoAppliedFilter),Yt(Gt)},failure:function(Ht,Gt){$n.debug("[createChildStreamFromStream] failure :",Gt),Ct()},childStreamType:Bt})})}},{key:"applyMuteStatusFromParent",value:function(){var Mt=this,Bt=0;this.data.getAudioTracks().forEach(function(dn){dn.enabled=Mt.parent.data.getAudioTracks()[Bt].enabled,Bt++});var ln=0;this.data.getVideoTracks().forEach(function(dn){dn.enabled=Mt.parent.data.getVideoTracks()[ln].enabled,ln++})}},{key:"loadTFLiteModule",value:function(){return new Promise(function(Mt,Bt){var ln;if(ln=iu.feature.simd?"https://cdn.apizee.com/apiRTC/lib/tflite/tflite-simd.js":"https://cdn.apizee.com/apiRTC/lib/tflite/tflite.js",apiRTC.userAgentInstance.tFLiteModuleLoaded===!1){$n.debug("loading tflite");var dn={async:!0,numRetries:20,reqdelay:200,success:function(){$n.debug("loaded successfully",iu.feature.simd),iu.feature.simd?createTFLiteSIMDModule().then(function(Yt){apiRTC.userAgentInstance.tFLiteSIMDModule=Yt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,Mt(Yt)}):createTFLiteModule().then(function(Yt){apiRTC.userAgentInstance.tFLiteSIMDModule=Yt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,Mt(Yt)})},error:function(Yt){Bt("Resources loading failed, depsNotFound: "+Yt)},retrycb:function(Yt,Ct){$n.warn("Blur API module loading retry :"+Yt+" ,delay before retry :"+Ct)}};apiCC.resourcesLoader.loadjs([ln],"blur-api",dn)}else $n.debug("tflite already loaded and TFLiteSIMDModule already created"),Mt(apiRTC.userAgentInstance.tFLiteSIMDModule)})}},{key:"setupTFLiteModule",value:function(Mt){return new Promise(function(Bt,ln){$n.debug("setupTFLiteModule"),apiRTC.userAgentInstance.modelLoadedInModule===!1?($n.debug("loading model landscape"),fetch("https://cdn.apizee.com/apiRTC/lib/tflite/models/selfie_segmentation_landscape.tflite").then(function(dn){if(!dn.ok)throw new Error("Failed to download tflite model!");$n.debug("loaded successfully");var Yt=Mt._getModelBufferMemoryOffset();dn.arrayBuffer().then(function(Ct){Mt.HEAPU8.set(new Uint8Array(Ct),Yt),Mt._loadModel(Ct.byteLength),$n.debug("module setup complete"),apiRTC.userAgentInstance.modelLoadedInModule=!0,apiRTC.userAgentInstance.tFLiteSIMDModule=Mt,Bt(Mt)})}).catch(function(dn){$n.error("Something went wrong during tflite model loading..",dn)})):($n.debug("model landscape already loaded in module"),Bt(apiRTC.userAgentInstance.tFLiteSIMDModule))})}},{key:"onMaskFrameTimer",value:function(Mt){Mt.data.id===this.blurVariables.TIMEOUT_TICK&&this.renderMask()}},{key:"renderMask",value:function(){this.resizeSource(),this.runInference(),this.runPostProcessing(),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.SET_TIMEOUT,timeMs:1e3/30})}},{key:"resizeSource",value:function(){this.blurVariables.segmentationMaskCtx.drawImage(this.blurVariables.inputVideoElement,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height,0,0,this.blurVariables.width,this.blurVariables.height);for(var Mt=this.blurVariables.segmentationMaskCtx.getImageData(0,0,this.blurVariables.width,this.blurVariables.height),Bt=this.blurVariables.tfliteModel._getInputMemoryOffset()/4,ln=0;ln<this.blurVariables.segmentationPixelCount;ln++)this.blurVariables.tfliteModel.HEAPF32[Bt+3*ln]=Mt.data[4*ln]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*ln+1]=Mt.data[4*ln+1]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*ln+2]=Mt.data[4*ln+2]/255}},{key:"runInference",value:function(){this.blurVariables.tfliteModel._runInference();for(var Mt=this.blurVariables.tfliteModel._getOutputMemoryOffset()/4,Bt=0;Bt<this.blurVariables.segmentationPixelCount;Bt++){var ln=this.blurVariables.tfliteModel.HEAPF32[Mt+Bt];this.blurVariables.segmentationMask.data[4*Bt+3]=255*ln}this.blurVariables.segmentationMaskCtx.putImageData(this.blurVariables.segmentationMask,0,0)}},{key:"runPostProcessing",value:function(){var Mt=this.blurVariables.firstVideoTrack.getSettings?this.blurVariables.firstVideoTrack.getSettings():this.blurVariables.firstVideoTrack.getConstraints(),Bt=Mt.height,ln=Mt.width;if(this.blurVariables.outputCanvasElement.height=Bt,this.blurVariables.outputCanvasElement.width=ln,this.blurVariables.outputCanvasCtx.globalCompositeOperation="copy",this.blurVariables.outputCanvasCtx.filter=this.blurVariables.virtualBackground==="image"?"blur(4px)":"blur(8px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.segmentationMaskCanvas,0,0,this.blurVariables.width,this.blurVariables.height,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height),this.blurVariables.outputCanvasCtx.globalCompositeOperation="source-in",this.blurVariables.outputCanvasCtx.filter="none",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0),this.blurVariables.outputCanvasCtx.globalCompositeOperation="destination-over",this.blurVariables.virtualBackground==="image")if(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height===this.blurVariables.imageRatio)this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,0,this.blurVariables.virtualImage.width,this.blurVariables.virtualImage.height,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height);else if(this.blurVariables.imageRatio>1){var dn=this.blurVariables.virtualImage.height*(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Yt=this.blurVariables.virtualImage.height,Ct=Math.abs(this.blurVariables.virtualImage.width-dn)/2;dn>this.blurVariables.virtualImage.width&&(dn=this.blurVariables.virtualImage.width,Ct=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,Ct,0,dn,Yt,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else{var St=this.blurVariables.virtualImage.width,Lt=this.blurVariables.virtualImage.width/(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Ht=Math.abs(this.blurVariables.virtualImage.height-Lt)/2;Lt>this.blurVariables.virtualImage.height&&(Lt=this.blurVariables.virtualImage.height,Ht=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,Ht,St,Lt,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else this.blurVariables.outputCanvasCtx.filter="blur(15px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0)}},{key:"startSelfieSegmentation",value:function(){var Mt=this;return new Promise(function(Bt,ln){$n.debug("startSelfieSegmentation"),Mt.loadTFLiteModule().then(function(dn){Mt.setupTFLiteModule(dn).then(function(Yt){if(Mt.blurVariables.tfliteModel=Yt,Mt.blurVariables.firstVideoTrack=Mt.data.getVideoTracks()[0],Mt.blurVariables.firstVideoTrack!==null&&Mt.blurVariables.firstVideoTrack!==void 0){var Ct=Mt.blurVariables.firstVideoTrack.getSettings?Mt.blurVariables.firstVideoTrack.getSettings():Mt.blurVariables.firstVideoTrack.getConstraints(),St=Ct.height,Lt=Ct.frameRate,Ht=Ct.width;Mt.blurVariables.height=144,Mt.blurVariables.width=256,Mt.blurVariables.frameRate=Lt,Mt.blurVariables.segmentationPixelCount=Mt.blurVariables.width*Mt.blurVariables.height,Mt.onMaskFrameTimer=Mt.onMaskFrameTimer.bind(Mt),Mt.blurVariables.outputCanvasElement=document.createElement("canvas"),Mt.blurVariables.outputCanvasElement.getContext("2d"),Mt.blurVariables.inputVideoElement=document.createElement("video"),Mt.blurVariables.SET_TIMEOUT=1,Mt.blurVariables.CLEAR_TIMEOUT=2,Mt.blurVariables.TIMEOUT_TICK=3,Mt.blurVariables.maskFrameTimerWorker=new Worker(URL.createObjectURL(new Blob([`
                                        var timer;
                                        onmessage = function(request) {
                                            switch (request.data.id) {
                                            case `.concat(Mt.blurVariables.SET_TIMEOUT,`: {
                                                timer = setTimeout(() => {
                                                    postMessage({ id: `).concat(Mt.blurVariables.TIMEOUT_TICK,` });
                                                }, request.data.timeMs);
                                                break;
                                            }
                                            case `).concat(Mt.blurVariables.CLEAR_TIMEOUT,`: {
                                                if (timer) {
                                                    clearTimeout(timer);
                                                }
                                                break;
                                            }
                                            }
                                        };
                                    `)],{type:"application/javascript"})),{name:"Blur effect worker"}),Mt.blurVariables.maskFrameTimerWorker.onmessage=Mt.onMaskFrameTimer,Mt.blurVariables.segmentationMask=new ImageData(Mt.blurVariables.width,Mt.blurVariables.height),Mt.blurVariables.segmentationMaskCanvas=document.createElement("canvas"),Mt.blurVariables.segmentationMaskCanvas.width=Mt.blurVariables.width,Mt.blurVariables.segmentationMaskCanvas.height=Mt.blurVariables.height,Mt.blurVariables.segmentationMaskCtx=Mt.blurVariables.segmentationMaskCanvas.getContext("2d"),Mt.blurVariables.outputCanvasElement.width=parseInt(Ht,10),Mt.blurVariables.outputCanvasElement.height=parseInt(St,10),Mt.blurVariables.outputCanvasCtx=Mt.blurVariables.outputCanvasElement.getContext("2d"),Mt.blurVariables.inputVideoElement.width=parseInt(Ht,10),Mt.blurVariables.inputVideoElement.height=parseInt(St,10),Mt.blurVariables.inputVideoElement.autoplay=!0,Mt.blurVariables.inputVideoElement.srcObject=Mt.data,Mt.blurVariables.inputVideoElement.onloadeddata=function(){Mt.blurVariables.inputVideoElement.muted=!0,Mt.blurVariables.maskFrameTimerWorker.postMessage({id:Mt.blurVariables.SET_TIMEOUT,timeMs:1e3/30})},Bt(Mt.blurVariables.outputCanvasElement.captureStream(parseInt(Mt.blurVariables.frameRate,10)))}else ln("No video track on stream")}).catch(function(){return $n.error("Catch on setupTFLiteModule"),ln("Catch on setupTFLiteModule")})}).catch(function(){return $n.error("Catch on loadTFLiteModule"),ln("Catch on loadTFLiteModule")})})}},{key:"stopSelfieSegmentation",value:function(){$n.debug("stopSelfieSegmentation"),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.CLEAR_TIMEOUT}),this.blurVariables.maskFrameTimerWorker.terminate()}},{key:"checkChildTypeConditions",value:function(){return this.childType!==void 0&&this.videoFilterIsApplied?"This stream is already a childStream : need to remove previous applied effect : "+this.childType:this.childrenTypeExists("blur")?"This stream already has a blur sub instance running : need to unblur()":this.childrenTypeExists("backgroundImage")?"This stream already has a backgroundImage sub instance running : need to unBackgroundImage()":MediaStreamTrack.prototype.hasOwnProperty("getSettings")&&MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?"OK":"Navigator not compatible with this function"}},{key:"blur",value:function(){var Mt=this;return new Promise(function(Bt,ln){var dn=Mt.checkChildTypeConditions();if(dn!=="OK")return ln(dn);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return ln("Navigator not compatible with this function");var Yt=Mt;Mt.blurVariables={},Mt.blurVariables.virtualBackground="blur",Mt.startSelfieSegmentation().then(function(Ct){var St,Lt=jo(Yt.data.getAudioTracks());try{for(Lt.s();!(St=Lt.n()).done;){var Ht=St.value;Ct.addTrack(Ht.clone())}}catch(en){Lt.e(en)}finally{Lt.f()}var Gt={audioFilterIsApplied:Mt.audioFilterIsApplied,audioAppliedFilter:Mt.audioAppliedFilter,videoFilterIsApplied:Mt.videoFilterIsApplied,videoAppliedFilter:Mt.videoAppliedFilter,childType:Mt.childType};Yt.createChildStreamFromStream(Ct,"blur",Gt).then(function(en){return Mt.addChildren(en,"blur"),en.applyMuteStatusFromParent(),Bt(en)}).catch(function(){return $n.error("Catch on createChildStreamFromStream blur"),ln("error on createChildStreamFromStream")})}).catch(function(Ct){return $n.error("Catch on startSelfieSegmentation blur : ",Ct),ln(Ct)})})}},{key:"unblur",value:function(){var Mt=this;return new Promise(function(Bt,ln){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return ln("Navigator not compatible with this function");if(Mt.childType==="blur"){$n.debug("This is the blurred stream : applying process with parent stream");var dn=Mt.parent;return dn.stopSelfieSegmentation(),dn.releaseChildren("blur"),dn.removeChildren("blur"),Bt(dn)}return Mt.childrenTypeExists("blur")?($n.debug("This is the parent stream : applying process with this stream"),Mt.stopSelfieSegmentation(),Mt.releaseChildren("blur"),Mt.removeChildren("blur"),Bt(Mt)):($n.debug("No blurred instance found for this stream"),ln("No blurred instance found for this stream"))})}},{key:"backgroundImage",value:function(Mt){var Bt=this;return $n.debug("backgroundImage",Mt),new Promise(function(ln,dn){var Yt=Bt.checkChildTypeConditions();if(Yt!=="OK")return dn(Yt);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return dn("Navigator not compatible with this function");var Ct=Bt;Bt.blurVariables={},Bt.blurVariables.virtualBackground="image",Bt.blurVariables.virtualImage=new Image,Bt.blurVariables.virtualImage.crossOrigin="anonymous",Bt.blurVariables.virtualImage.src=Mt,Bt.blurVariables.virtualImage.onload=function(){Bt.blurVariables.imageRatio=Bt.blurVariables.virtualImage.width/Bt.blurVariables.virtualImage.height,Bt.startSelfieSegmentation().then(function(St){var Lt,Ht=jo(Ct.data.getAudioTracks());try{for(Ht.s();!(Lt=Ht.n()).done;){var Gt=Lt.value;St.addTrack(Gt.clone())}}catch(nn){Ht.e(nn)}finally{Ht.f()}var en={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Ct.createChildStreamFromStream(St,"backgroundImage",en).then(function(nn){return Bt.addChildren(nn,"backgroundImage"),nn.applyMuteStatusFromParent(),ln(nn)}).catch(function(){return $n.error("Catch on createChildStreamFromStream bck"),dn("error on createChildStreamFromStream")})}).catch(function(St){return $n.error("Catch on startSelfieSegmentation bck : ",St),dn(St)})},Bt.blurVariables.virtualImage.onerror=function(){return $n.debug("Error on image loading"),dn("Error on image loading")}})}},{key:"unBackgroundImage",value:function(){var Mt=this;return $n.debug("unBackgroundImage"),new Promise(function(Bt,ln){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return ln("Navigator not compatible with this function");if(Mt.childType==="backgroundImage"){$n.debug("This is the backgroundImage stream : applying process with parent stream");var dn=Mt.parent;return dn.stopSelfieSegmentation(),dn.releaseChildren("backgroundImage"),dn.removeChildren("backgroundImage"),Bt(dn)}return Mt.childrenTypeExists("backgroundImage")?($n.debug("This is the parent stream : applying process with this stream"),Mt.stopSelfieSegmentation(),Mt.releaseChildren("backgroundImage"),Mt.removeChildren("backgroundImage"),Bt(Mt)):($n.debug("No background image instance found for this stream"),ln("No background image instance found for this stream"))})}},{key:"applyVideoProcessor",value:function(Mt,Bt){var ln=this;return new Promise(function(dn,Yt){if(Mt!=="none"&&Mt!=="blur"&&Mt!=="backgroundImage")return Yt(new Gr("Requested videoProcessorType is not correct","none",ln));var Ct=ln,St="none",Lt=null,Ht=ln,Gt=!1;if(ln.childType==="noiseReduction"&&ln.videoFilterIsApplied===!0&&($n.debug("This is a noised reduced stream ... applying filter on parent"),Ht=ln.parent,ln.release({releaseParentStream:!1}),Gt=!0),Ht.childType!==void 0&&Ht.videoFilterIsApplied===!0&&(Ht.childType==="blur"?St="blur":Ht.childType==="backgroundImage"&&(St="backgroundImage"),Ct=Ht.parent,Lt=Ht),Ht.childrenTypeExists("blur")&&(St="blur",Ht.childrens.forEach(function(on){Lt=on})),Ht.childrenTypeExists("backgroundImage")&&(St="backgroundImage",Ht.childrens.forEach(function(on){Lt=on})),$n.debug("actual applied effect =",St),Mt==="none"&&St==="none")return Yt(new Gr("Requested videoProcessorType none and no effect applied","none",Ct));if(Mt==="none"&&St==="blur")$n.debug("need to unblur"),Ct.unblur().then(function(on){if(Gt!==!0)return dn(on);on.startNoiseReduction().then(function(yn){return dn(yn)}).catch(function(yn){return $n.error("Catch on startNoiseReduction :",yn),Yt(new Wo(yn,on.audioAppliedFilter,Ct))})}).catch(function(on){return $n.error("Catch on unblur: ",on),Yt(new Gr(on,"none",Ct))});else if(Mt==="none"&&St==="backgroundImage")$n.debug("need to unBackgroundImage"),Ct.unBackgroundImage().then(function(on){if(Gt!==!0)return dn(on);on.startNoiseReduction().then(function(yn){return dn(yn)}).catch(function(yn){return $n.error("Catch on startNoiseReduction :",yn),Yt(new Wo(yn,on.audioAppliedFilter,Ct))})}).catch(function(on){return $n.error("Catch on unBackgroundImage :",on),Yt(new Gr(on,"none",Ct))});else if(Mt==="blur"&&St==="none")$n.debug("need to blur"),Ct.blur().then(function(on){if(Gt!==!0)return dn(on);on.startNoiseReduction().then(function(yn){return dn(yn)}).catch(function(yn){return $n.error("Catch on startNoiseReduction :",yn),Yt(new Wo(yn,on.audioAppliedFilter,Ct))})}).catch(function(on){return $n.error("Catch on blur :",on),Yt(new Gr(on,"none",Ct))});else{if(Mt==="blur"&&St==="blur")return Yt(new Gr("Requested videoProcessorType blur and blur already applied","blur",Lt));if(Mt==="blur"&&St==="backgroundImage"){$n.debug("need to unBackgroundImage then blur");var en=Ct.blurVariables.virtualImage.src;Ct.unBackgroundImage().then(function(on){on.blur().then(function(yn){if(Gt!==!0)return dn(yn);yn.startNoiseReduction().then(function(On){return dn(On)}).catch(function(On){return $n.error("Catch on startNoiseReduction :",On),Yt(new Wo(On,yn.audioAppliedFilter,Ct))})}).catch(function(yn){$n.warn("Catch on blur - unBackgroundImage to blur :",yn),$n.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(en).then(function(On){if($n.warn("Could not apply blur effect, background restored"),Gt!==!0)return Yt(new Gr("Could not apply blur effect, background restored","backgroundImage",On));On.startNoiseReduction().then(function(Qn){return Yt(new Gr("Could not apply blur effect, background restored","backgroundImage",Qn))}).catch(function(Qn){return $n.error("Catch on startNoiseReduction :",Qn),Yt(new Gr("Could not apply blur effect, background restored","backgroundImage",On))})}).catch(function(On){return $n.error("Could not apply blur effect and error in restoring background :",On),Yt(new Gr("Could not apply blur effect and error in restoring background","none",Ct))})})}).catch(function(on){return $n.error("Catch on unBackgroundImage :",on),Yt(new Gr(on,"none",Ct))})}else if(Mt==="backgroundImage"&&St==="none"){if($n.debug("need to backgroundImage"),Bt===void 0||Bt.backgroundImageUrl===void 0)return Yt(new Gr("Error options.backgroundImageUrl is not defined","none",Ct));Ct.backgroundImage(Bt.backgroundImageUrl).then(function(on){if(Gt!==!0)return dn(on);on.startNoiseReduction().then(function(yn){return dn(yn)}).catch(function(yn){return $n.error("Catch on startNoiseReduction :",yn),Yt(new Gr("Could not apply blur effect, background restored","backgroundImage",on))})}).catch(function(on){return $n.error("Catch on backgroundImage :",on),Yt(new Gr(on,"none",Ct))})}else if(Mt==="backgroundImage"&&St==="blur")$n.debug("need to unblur then backgroundImage"),Ct.unblur().then(function(on){on.backgroundImage(Bt.backgroundImageUrl).then(function(yn){if(Gt!==!0)return dn(yn);yn.startNoiseReduction().then(function(On){return dn(On)}).catch(function(On){return $n.error("Catch on startNoiseReduction :",On),Yt(new Gr("Could not apply blur effect, background restored","backgroundImage",yn))})}).catch(function(yn){$n.warn("Catch on backgroundImage - unBackgroundImage to blur :",yn),$n.debug("Reactivating previous effect : blur"),Ct.blur().then(function(On){if(Gt!==!0)return $n.warn("Could not apply background effect, blur restored"),Yt(new Gr("Could not apply background effect, blur restored","blur",On));On.startNoiseReduction().then(function(Qn){return Yt(new Gr("Could not apply background effect, blur restored","blur",Qn))}).catch(function(Qn){return $n.error("Catch on startNoiseReduction :",Qn),Yt(new Gr("Could not apply background effect, blur restored","blur",On))})}).catch(function(On){return $n.error("Could not apply background effect and error in restoring blur :",On),Yt(new Gr("Could not apply background effect and error in restoring blur","none",Ct))})})}).catch(function(on){return $n.error("Catch on unblur :",on),Yt(new Gr(on,"none",Ct))});else if(Mt==="backgroundImage"&&St==="backgroundImage"){var nn=Ct.blurVariables.virtualImage.src;if(Bt.backgroundImageUrl.startsWith("data:image")===!1&&nn.substring(nn.lastIndexOf("/")+1)===Bt.backgroundImageUrl.substring(Bt.backgroundImageUrl.lastIndexOf("/")+1))return $n.debug("Same background image is already applied"),Yt(new Gr("Requested videoProcessorType backgroundImage and backgroundImage with the same image already applied","backgroundImage",Lt));$n.debug("New background image is to be applied"),Ct.unBackgroundImage().then(function(on){on.backgroundImage(Bt.backgroundImageUrl).then(function(yn){if(Gt!==!0)return dn(yn);yn.startNoiseReduction().then(function(On){return dn(On)}).catch(function(On){return $n.error("Catch on startNoiseReduction :",On),Yt(new Gr("Could not apply background effect, blur restored","blur",yn))})}).catch(function(yn){$n.warn("Catch on backgroundImage - change background image :",yn),$n.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(nn).then(function(On){if(Gt!==!0)return Yt(new Gr("Could not apply new image on background, former background restored","backgroundImage",On));On.startNoiseReduction().then(function(Qn){return $n.warn("Could not apply new image on background, former background restored"),Yt(new Gr("Could not apply new image on background, former background restored","backgroundImage",Qn))}).catch(function(Qn){return $n.error("Catch on startNoiseReduction :",Qn),Yt(new Gr("Could not apply background effect, blur restored","blur",On))})}).catch(function(On){return $n.error("Could not apply new image on background and error in restoring former background :",On),Yt(new Gr("Could not apply new image on background and error in restoring former background","none",Ct))})})}).catch(function(on){return $n.error("Catch on unBackgroundImage :",on),Yt(new Gr(on,"none",Ct))})}}})}},{key:"checkAudioProcessorType",value:function(Mt){return Mt!=="none"&&Mt!=="noiseReduction"?"Requested audioProcessorType is not correct":Mt==="none"&&this.audioAppliedFilter!=="noiseReduction"?"Not a noised reduction stream":"OK"}},{key:"applyAudioProcessor",value:function(Mt){var Bt=this;return new Promise(function(ln,dn){var Yt=Bt,Ct="none",St="none",Lt=Bt.checkAudioProcessorType(Mt);if(Lt!=="OK")return dn(new Wo(Lt,Bt.audioAppliedFilter,Bt));if(Mt==="none"){if(Bt.childType!=="noiseReduction"&&Bt.parent.childType==="noiseReduction"?($n.debug("applying process on parent stream as this one must be a video effect stream"),Yt=Bt.parent,Ct=Bt.childType,Bt.parent.blurVariables!==void 0&&Bt.parent.blurVariables.virtualImage!==void 0&&(St=Bt.parent.blurVariables.virtualImage.src),Bt.release({releaseParentStream:!1})):$n.debug("no noiseReduction applied"),Yt.stopNoiseReduction(),Ct==="none"){$n.debug("Release noiseReduction stream");var Ht=Bt.parent;return Yt.release({releaseParentStream:!1}),ln(Ht)}var Gt={backgroundImageUrl:St};Yt.parent.applyVideoProcessor(Ct,Gt).then(function(en){return $n.debug("Release noiseReduction stream"),Yt.release({releaseParentStream:!1}),ln(en)}).catch(function(en){return $n.error("Catch on applyVideoProcessor() - reapply effect : ",en),dn(new Wo("Error on restoring applied video filter",this.audioAppliedFilter,this))})}else Mt==="noiseReduction"&&Yt.startNoiseReduction().then(function(en){return ln(en)}).catch(function(en){return $n.error("Catch on startNoiseReduction :",en),dn(new Wo(en,Yt.audioAppliedFilter,Yt))})})}},{key:"startNoiseReduction",value:function(){return apiCC.audioProcessor.startNoiseReduction(this)}},{key:"stopNoiseReduction",value:function(){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx)}},{key:"createMediaStreamTrackProcessor",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if($n.debug("mediaStreamTrackProcessor kind: ".concat(Mt?"audio":"video"," created")),Mt){var Bt=this.data.getAudioTracks();if(Bt.length)return new MediaStreamTrackProcessor({track:Bt[0]});throw new Error("No audio tracks found")}var ln=this.data.getVideoTracks();if(ln.length)return new MediaStreamTrackProcessor({track:ln[0]});throw new Error("No video tracks found")}},{key:"createMediaStreamTrackGenerator",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return $n.debug("mediaStreamTrackGenerator kind: ".concat(Mt?"audio":"video"," created")),Mt?new MediaStreamTrackGenerator({kind:"audio"}):new MediaStreamTrackGenerator({kind:"video"})}},{key:"loadSegmentationAPI",value:function(){return new Promise(function(Mt,Bt){var ln={async:!0,numRetries:20,reqdelay:200,success:function(){$n.debug("Segmentation API loaded"),mergeReality.then(Mt)},error:function(dn){Bt("Resources loading failed, depsNotFound: "+dn)},retrycb:function(dn,Yt){$n.warn("Blur API model loading retry :"+dn+" ,delay before retry :"+Yt)}};apiCC.resourcesLoader.loadjs(["https://cdn.apizee.com/apiRTC/lib/mergereality/v1.0/merge_reality.js"],"merge-reality",ln)})}},{key:"startMergeReality",value:function(Mt){var Bt=this;this.mergeRealityData={},this.mergeRealityLib=Mt,this.mergeRealityData.stop=!1,this.mergeRealityData.WIDTH=this.getSettings().width,this.mergeRealityData.HEIGHT=this.getSettings().height,this.mergeRealityData.WEBCAM_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WEBCAM_CTX=this.mergeRealityData.WEBCAM_CANVAS.getContext("2d",{alpha:!1}),this.mergeRealityData.MASK_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MASK_CTX=this.mergeRealityData.MASK_CANVAS.getContext("2d",{alpha:!0}),this.mergeRealityData.SCREEN_VIDEO=document.createElement("video"),this.mergeRealityData.BG_SUB=new this.mergeRealityLib.BackgroundSubtractor,this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MSTP=this.createMediaStreamTrackProcessor().readable,this.mergeRealityData.MSTG=this.createMediaStreamTrackGenerator(),this.mergeRealityData.SINK=this.mergeRealityData.MSTG.writable,this.mergeRealityData.MASK_TRANSFORMER=new TransformStream({transform:function(ln,dn){Bt.mergeRealityData.stop||(Bt.mergeRealityData.MASK_CTX.save(),Bt.mergeRealityData.MASK_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.drawImage(ln,0,0),Bt.mergeRealityData.MASK_DATA=Bt.mergeRealityData.BG_SUB.computeMask(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.background),Bt.mergeRealityData.RES=Bt.mergeRealityData.BG_SUB.applyTransparency(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_DATA),Bt.mergeRealityData.MASK_CTX.putImageData(Bt.mergeRealityData.RES,0,0),Bt.mergeRealityData.MASK_CTX.globalCompositeOperation="destination-atop",Bt.mergeRealityData.MASK_CTX.drawImage(Bt.mergeRealityData.SCREEN_VIDEO,0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_CTX.restore(),dn.enqueue(new VideoFrame(Bt.mergeRealityData.MASK_CANVAS))),ln.close()}}),this.mergeRealityData.RES_MS=new MediaStream}},{key:"stopMergeReality",value:function(){this.mergeRealityData.stop=!0}},{key:"calibrateBackground",value:function(){this.childrenTypeExists("merge")?this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT):$n.error("No merged instance found for this stream")}},{key:"mergeReality",value:function(Mt){var Bt=this;return new Promise(function(ln,dn){return window.MediaStreamTrackGenerator===void 0||window.MediaStreamTrackProcessor===void 0||window.TransformStream===void 0?dn("Your browser does not support InsertableStreams"):Bt.childrenTypeExists("merge")?dn("This stream already has a sub instance running for this"):void Bt.loadSegmentationAPI().then(function(Yt){Bt.startMergeReality(Yt),Mt.attachToElement(Bt.mergeRealityData.SCREEN_VIDEO),Bt.mergeRealityData.SCREEN_VIDEO.autoplay=!0,Bt.mergeRealityData.MSTP.pipeThrough(Bt.mergeRealityData.MASK_TRANSFORMER).pipeTo(Bt.mergeRealityData.SINK),Bt.mergeRealityData.RES_MS.addTrack(Bt.mergeRealityData.MSTG);var Ct,St=jo(Bt.data.getAudioTracks());try{for(St.s();!(Ct=St.n()).done;){var Lt=Ct.value;Bt.mergeRealityData.RES_MS.addTrack(Lt)}}catch(en){St.e(en)}finally{St.f()}var Ht=Bt,Gt={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Bt.createChildStreamFromStream(Bt.mergeRealityData.RES_MS,"merge",Gt).then(function(en){Ht.addChildren(en,"merge"),en.applyMuteStatusFromParent(),ln(en)}).catch(function(){$n.error("Catch on createChildStreamFromStream mergeReality")})})})}},{key:"unmergeReality",value:function(){this.childrenTypeExists("merge")?(this.stopMergeReality(),this.releaseChildren("merge"),this.removeChildren("merge")):$n.error("No merged instance found for this stream")}},{key:"addPendingPromise",value:function(Mt,Bt,ln){var dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;return apiCC.addPendingPromise(Mt,Bt,ln,dn)}},{key:"resolvePendingPromise",value:function(Mt,Bt){apiCC.resolvePendingPromise(Mt,Bt)}},{key:"rejectPendingPromise",value:function(Mt,Bt){apiCC.rejectPendingPromise(Mt,Bt)}},{key:"sendAudioFlowStatusChanged",value:function(){var Mt=this.getAudioFlowStatus();Xt.get(this).emit("audioFlowStatusChanged",Mt)}},{key:"sendVideoFlowStatusChanged",value:function(){var Mt=this.getVideoFlowStatus();Xt.get(this).emit("videoFlowStatusChanged",Mt)}},{key:"sendFlowStatusChanged",value:function(Mt){var Bt;Mt==="audio"?Bt=this.getAudioFlowStatus():Mt==="video"&&(Bt=this.getVideoFlowStatus()),Bt.type=Mt,Xt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendFlowStatusChangedForRemote",value:function(Mt,Bt){Bt.type=Mt,Xt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendRemoteAudioFlowStatusChanged",value:function(Mt){Xt.get(this).emit("remoteAudioFlowStatusChanged",Mt)}},{key:"sendRemoteVideoFlowStatusChanged",value:function(Mt){Xt.get(this).emit("remoteVideoFlowStatusChanged",Mt)}},{key:"emitConstraintsChanged",value:function(Mt){Xt.get(this).emit("constraintsChanged",Mt)}}],[{key:"getAvailableEvents",value:function(){return lm}},{key:"createStreamFromUserMedia",value:function(Mt,Bt,ln){var dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return $n.debug("createStreamFromUserMedia"),$n.debug("audioInput :",Mt),$n.debug("videoInput :",Bt),$n.debug("constraints :",ln),$n.debug("options :",dn),new Promise(function(Yt,Ct){var St=Mt!==!1&&(Mt!==null||ln===void 0||ln!==void 0&&ln.hasOwnProperty("audio")),Lt=Bt!==!1&&(Bt!==null||ln===void 0||ln!==void 0&&ln.hasOwnProperty("video")),Ht={type:et.g.STREAM_TYPE_NO_INPUT,audioInput:Mt,videoInput:Bt},Gt="media";Lt?Ht.type=et.g.STREAM_TYPE_VIDEO:St&&(Ht.type=et.g.STREAM_TYPE_AUDIO),St&&!Lt?Gt="audio":!St&&Lt&&(Gt="videoOnly"),St&&dn.enhancedAudioActivated===!0&&($n.debug("Enhanced Audio is activated"),apiRTC.browser!=="Chrome"?$n.debug("enhancedAudioActivated option is only available for Chrome"):(ln===void 0&&(ln={}),ln.audio&&ss(ln.audio)==="object"||(ln.audio={}),ln.video===void 0&&(ln.video={}),ln.audio.echoCancellation=!1,ln.audio.autoGainControl=!1,ln.audio.noiseSuppression=!1)),apiRTC.createUserMediaStream({audioSourceId:Mt,videoSourceId:Bt,facingMode:dn.facingMode,gum_config:ln,filters:dn.filters,type:Gt,success:function(en){$n.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+en.userMediaStreamId),Ht.constructor=!0,Ht.userMediaStreamId=en.userMediaStreamId,Yt(new Qt(en.stream,Ht))},failure:function(en,nn){$n.debug("[createStreamFromUserMedia] failure :",nn),Ct(nn)}})})}},{key:"createStreamFromMediaStream",value:function(Mt){return $n.debug("createStreamFromMediaStream"),new Promise(function(Bt,ln){var dn={};dn.type=et.g.STREAM_TYPE_NO_INPUT,Mt.getAudioTracks().length>0&&(dn.type=et.g.STREAM_TYPE_AUDIO),Mt.getVideoTracks().length>0&&(dn.type=et.g.STREAM_TYPE_VIDEO),apiRTC.createUserMediaStream({type:"media",stream:Mt,success:function(Yt){$n.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Yt.userMediaStreamId),dn.constructor=!0,dn.userMediaStreamId=Yt.userMediaStreamId,Bt(new Qt(Yt.stream,dn))},failure:function(Yt,Ct){$n.debug("[createStreamFromUserMedia] failure :",Ct),ln()}})})}},{key:"createScreensharingStream",value:function(Mt){return new Promise(function(Bt,ln){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:Mt,success:function(dn){$n.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+dn.userMediaStreamId);var Yt=new Qt(dn.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:dn.userMediaStreamId});Ys.set(Yt,!0),Bt(Yt)},failure:function(dn,Yt){$n.debug("[createStreamFromUserMedia] failure :",Yt),ln(Yt)}})})}},{key:"createDisplayMediaStream",value:function(Mt,Bt){return new Promise(function(ln,dn){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:Mt,displayMediaStreamConstraints:Mt,forceExtensionOnChrome:Bt,success:function(Yt){$n.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Yt.userMediaStreamId);var Ct=new Qt(Yt.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:Yt.userMediaStreamId});Ys.set(Ct,!0),ln(Ct)},failure:function(Yt,Ct){$n.debug("[createStreamFromUserMedia] failure :",Ct),dn(Ct)}})})}},{key:"getLocalStreams",value:function(){return yo.values()}},{key:"getStream",value:function(Mt){return Mt!=null&&yo.has(Mt.toString())?yo.get(Mt.toString()):null}}]),Qt}(cn),cm=function(Wt){Ks(Qt,Wt);var jt=qs(Qt);function Qt(Mt,Bt,ln,dn){var Yt;return Hs(this,Qt),(Yt=jt.call(this,Mt,Bt)).parent=ln,Yt.childType=dn,dn==="noiseReduction"&&(Yt.audioFilterIsApplied=!0,Yt.audioAppliedFilter=dn),dn!=="blur"&&dn!=="backgroundImage"||(Yt.videoFilterIsApplied=!0,Yt.videoAppliedFilter=dn),Yt}return Gs(Qt,[{key:"release",value:function(Mt){this.childType!=="blur"&&this.childType!=="backgroundImage"||this.parent.stopSelfieSegmentation(),this.parent.removeChildren(this.childType),this.clonedStream!==void 0&&($n.debug("to be released ..."),this.clonedStream.getAudioTracks().forEach(function(Bt){Bt.stop()}),this.clonedStream.getVideoTracks().forEach(function(Bt){Bt.stop()})),ou(Fo(Qt.prototype),"release",this).call(this,Mt)}}]),Qt}(so),Gr=function(Wt){Ks(Qt,Wt);var jt=qs(Qt);function Qt(Mt,Bt,ln){var dn;return Hs(this,Qt),(dn=jt.call(this,Mt)).name=dn.constructor.name,dn.appliedVideoProcessorType=Bt,dn.stream=ln,dn}return Gs(Qt)}(zs(Error)),Wo=function(Wt){Ks(Qt,Wt);var jt=qs(Qt);function Qt(Mt,Bt,ln){var dn;return Hs(this,Qt),(dn=jt.call(this,Mt)).name=dn.constructor.name,dn.appliedAudioProcessorType=Bt,dn.stream=ln,dn}return Gs(Qt)}(zs(Error));function Js(Wt,jt){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,St){if(Ct){if(typeof Ct=="string")return tp(Ct,St);var Lt=Object.prototype.toString.call(Ct).slice(8,-1);return Lt==="Object"&&Ct.constructor&&(Lt=Ct.constructor.name),Lt==="Map"||Lt==="Set"?Array.from(Ct):Lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Lt)?tp(Ct,St):void 0}}(Wt))||jt&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var Mt=0,Bt=function(){};return{s:Bt,n:function(){return Mt>=Wt.length?{done:!0}:{done:!1,value:Wt[Mt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,dn=!0,Yt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return dn=Ct.done,Ct},e:function(Ct){Yt=!0,ln=Ct},f:function(){try{dn||Qt.return==null||Qt.return()}finally{if(Yt)throw ln}}}}function tp(Wt,jt){(jt==null||jt>Wt.length)&&(jt=Wt.length);for(var Qt=0,Mt=new Array(jt);Qt<jt;Qt++)Mt[Qt]=Wt[Qt];return Mt}function np(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var ho=ft.Y.get("Session"),dm=Rn.get(),xo=new(Go()),cu=Ro.get(),du=po.get(),um=Symbol("ENTERPRISE_NOT_LOADED"),uu=Symbol("ENTERPRISE_LOADED"),rp=new WeakMap,ip=new WeakMap,ap=new WeakMap,Xs=function(){function Wt(Bt,ln,dn){if(function(Yt,Ct){if(!(Yt instanceof Ct))throw new TypeError("Cannot call a class as a function")}(this,Wt),ho.info("Create Enterprise"),!(dn instanceof Br))throw"Cannot create Enterprise without a session";rp.set(this,dn),ap.set(this,ln),ip.set(this,Bt),this.status=um}var jt,Qt,Mt;return jt=Wt,Qt=[{key:"getSession",value:function(){return rp.get(this)}},{key:"getId",value:function(){return ip.get(this).toString()}},{key:"getApiKey",value:function(){return ap.get(this).toString()}},{key:"load",value:function(){var Bt=this;return new Promise(function(ln,dn){xo.getEnterpriseUserList(Bt.getId(),Bt.getSession().getToken()).then(function(Yt){ho.info("Enterprise loaded!",Yt);var Ct,St=Js(Yt.users);try{for(St.s();!(Ct=St.n()).done;){var Lt=Ct.value;if(Bt.getSession().user.userId.toString()!==Lt.id.toString()){var Ht=cu.getOrCreateContact(Lt.id);Ht.profile=Lt,Ht.enterprise=Bt,Ht.userData.get("username")===null&&Ht.userData.setProp("username",Lt.username),Ht.userData.get("photo_url")===null&&Ht.userData.setProp("photo_url",Lt.photo_url)}}}catch(Gt){St.e(Gt)}finally{St.f()}Bt.status=uu,ln()}).catch(function(Yt){var Ct="load() - Enterprise load error",St={error:new Error(Ct),code:et.g.ERROR_OTHER};Yt.hasOwnProperty("code")?St.code=Yt.code:Yt.hasOwnProperty("http_code")&&(Yt.http_code.toString().startsWith("4")?St.code=et.g.ERROR_INVALID_CREDENTIALS:St.code=et.g.ERROR_SERVER_UNAVAILABLE),ho.error(Ct,Yt),dn(St)})})}},{key:"getContacts",value:function(){var Bt={};if(this.status!==uu)ho.error("Enterprise is not loaded, unable to getContacts");else{var ln,dn=cu.getContacts(),Yt=Js(dn.keys());try{for(Yt.s();!(ln=Yt.n()).done;){var Ct=ln.value,St=dn.get(Ct);St.enterprise!==null&&St.enterprise.id.toString()===this.getId()&&(Bt[St.getId()]=St)}}catch(Lt){Yt.e(Lt)}finally{Yt.f()}}return Bt}},{key:"getConfiguration",value:function(){return null}},{key:"uploadFile",value:function(Bt){var ln=this,dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Yt,Ct){ho.info("uploadFile()"),ln.status===uu?xo.uploadFile(Bt,ln.getSession().getToken(),dn).then(function(St){Yt(St.url)}).catch(function(St){ho.error(St),Ct(St)}):(ho.error("Enterprise is not loaded, cannot upload file"),Ct(new Error("Enterprise is not loaded, cannot upload file")))})}},{key:"getAvailableConferences",value:function(){var Bt=this;return ho.info("getAvailableConferences()"),new Promise(function(ln,dn){var Yt={};xo.getConferenceList(Bt.getSession().getToken()).then(function(Ct){var St,Lt=Js(Ct);try{for(Lt.s();!(St=Lt.n()).done;){var Ht=St.value;Yt[Ht.hash]=du.getOrCreateConference(Ht.hash),Yt[Ht.hash].friendlyName=Ht.friendlyName}}catch(Gt){Lt.e(Gt)}finally{Lt.f()}ln(Yt)}).catch(function(Ct){ho.error(Ct),dn(Ct)})})}},{key:"getConference",value:function(Bt){var ln=this;return new Promise(function(dn,Yt){var Ct={};Ct.token=ln.getSession().getToken(),xo.getWebconf(Bt,Ct).then(function(St){return dn(du.getOrCreateConference(St.hash))}).catch(function(St){return ho.error("getConference",St),Yt(St)})})}},{key:"createPrivateConference",value:function(){var Bt=this,ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ho.info("createPrivateConference()"),new Promise(function(dn,Yt){var Ct=ln.hasOwnProperty("friendlyName")?ln.friendlyName:Ut.g.guid(),St=null,Lt=Bt.getSession().getToken();xo.createConference(Lt,Ct,ln).then(function(Ht){(St=du.getOrCreateConference(Ht.hash)).friendlyName=Ct;var Gt=ln.hasOwnProperty("password")?ln.password:"";return St.join({password:Gt,session:Bt.getSession()})}).then(function(){dn(St)}).catch(function(Ht){var Gt="createPrivateConference() - Could not create conference";ho.error(Gt,Ht),Yt(new Error(Gt))})})}},{key:"getTags",value:function(Bt){var ln=this;return new Promise(function(dn,Yt){var Ct={};Bt&&Bt.hasOwnProperty("webconfId")&&(Ct.webconfId=Bt.webconfId),xo.getEnterpriseTagList(ln.getId(),ln.getSession().getToken(),Ct).then(function(St){return St.hasOwnProperty("tags")&&Array.isArray(St.tags)?dn(St.tags):Yt(Ut.g.createError(et.g.ERROR_OTHER,"getTags() - unexpected response",ho))}).catch(function(St){return Yt(Ut.g.createError(et.g.ERROR_OTHER,"getTags() - cannot get tags",ho,{fromError:St}))})})}}],Mt=[{key:"fetchEnterpriseInformation",value:function(Bt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ln.hasOwnProperty("cloudUrl")&&xo.setCloudURL(ln.cloudUrl),xo.getEnterpriseInformation(ln,Bt)}},{key:"fetchSiteAgents",value:function(Bt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(dn,Yt){ln.hasOwnProperty("cloudUrl")&&xo.setCloudURL(ln.cloudUrl);var Ct=[];xo.getSiteAgents(dm.getActiveApiKey(),Bt,ln).then(function(St){var Lt,Ht=Js(St);try{for(Ht.s();!(Lt=Ht.n()).done;){var Gt=Lt.value;Ct.push({contact:cu.getOrCreateContact(Gt.id),title:Gt.title,nickname:Gt.nickname,isPrefered:Gt.isPrefered})}}catch(en){Ht.e(en)}finally{Ht.f()}dn(Ct)}).catch(function(St){Yt(Ut.g.createError(et.g.ERROR_OTHER,"fetchSiteAgents() - could not fetch site agents",ho))})})}}],Qt&&np(jt.prototype,Qt),Mt&&np(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}();function pu(Wt){return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},pu(Wt)}function pm(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}function op(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}function fu(Wt,jt){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,Mt){return Qt.__proto__=Mt,Qt},fu(Wt,jt)}function fm(Wt,jt){if(jt&&(pu(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bo(Wt)}function Bo(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Qs(Wt){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(jt){return jt.__proto__||Object.getPrototypeOf(jt)},Qs(Wt)}s(3123);var gr=ft.Y.get("UserAgent"),Cr=Rn.get(),ko=new(Go()),hm="apizee:",gm="apirtc:",mm="token:",vm="apzkey:",Cm="apiKey:",us=new WeakMap,bm=["mediaDeviceChanged","externalJsLoadingStatus","ccsConnectionStatus","userMediaError"],sp=function(Wt){(function(Ct,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(St&&St.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),St&&fu(Ct,St)})(Yt,Wt);var jt,Qt,Mt,Bt,ln,dn=(Bt=Yt,ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,St=Qs(Bt);if(ln){var Lt=Qs(this).constructor;Ct=Reflect.construct(St,arguments,Lt)}else Ct=St.apply(this,arguments);return fm(this,Ct)});function Yt(){var Ct,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pm(this,Yt),Ct=dn.call(this,gr),gr.debug("Create UserAgent"),Ct.uri=St.hasOwnProperty("uri")?St.uri:null,Ct.userId=null,Ct.username=null,Ct.profile=null,Ct.preRegisterUserData=new Io,Ct.callStatsMonitoringEnabled=null,Ct.callStatsMonitoringInterval=null,Ct.meshModeEnabled=null,Ct.apiRTCMediaDeviceDetectionEnabled=!!St.hasOwnProperty("apiRTCMediaDeviceDetectionEnabled")&&St.apiRTCMediaDeviceDetectionEnabled,Ct.apiRTCMediaDeviceDetectionDelay=St.hasOwnProperty("apiRTCMediaDeviceDetectionDelay")?St.apiRTCMediaDeviceDetectionDelay:et.g.APIRTC_MEDIA_DEVICE_DETECTION_DELAY,Ct.targetBandwidthUsage=0,Ct.videoBandwidthSettings={overallIncoming:3e3,overallOutgoing:3e3},Ct.currentSession=null,Ct.enterprise=null,Ct.capabilities={whiteboardCursor:"ON",mediaDeviceChanged:"ON",webRTCCompliant:"ON",screenSharingCompliant:"ON",qoSStatCompliant:"ON",backgroundRemoval:"ON",streamCapabilities:"ON",noiseReduction:"ON",remoteAccessUser:"ON"},Ct.browser=apiRTC.browser,Ct.browser_major_version=apiRTC.browser_major_version,Ct.browser_version=apiRTC.browser_version,Ct.osName=apiRTC.osName,Ct.osVersion=apiRTC.osVersion,Ct.browserInfo=apiRTC.browserInfo,Ct.browserDetails=apiRTC.browserDetails,Ct.tFLiteModuleLoaded=!1,Ct.tFLiteSIMDModule=null,Ct.modelLoadedInModule=!1,Ct.apiRTCStreamsList=new Map,us.set(Bo(Ct),null),Cr.createWhiteBoard(),apiCC.activateScreenSharing();var Lt=function(nn){Xt.get(Bo(Ct)).emit("mediaDeviceChanged",{added:nn.detail.diff.added,removed:nn.detail.diff.removed,updated:nn.detail.diff.updated,updateReason:nn.detail.updateReason,firstMediaDeviceListInitialization:nn.detail.firstMediaDeviceListInitialization})};apiRTC.addEventListener("mediaDeviceChanged",Lt,"UserAgent");var Ht=function(nn){Xt.get(Bo(Ct)).emit("externalJsLoadingStatus",{extjs:nn.detail.extjs,status:nn.detail.status})};apiRTC.addEventListener("externalJsLoadingStatus",Ht,"UserAgent");var Gt=function(nn){var on=null;nn.detail.channelEvent==="onChannelOpened"?on="connected":nn.detail.channelEvent==="onChannelDisconnect"?on="disconnected":nn.detail.channelEvent==="onChannelReconnecting"?on="retry":(nn.detail.channelEvent==="onChannelConnectError"||nn.detail.channelEvent==="onChannelError")&&(on="error"),on!==null&&Xt.get(Bo(Ct)).emit("ccsConnectionStatus",{status:on})};apiRTC.addEventListener("channelEvent",Gt,"UserAgent");var en=function(nn){var on={error:nn.detail.error};nn.detail.callType==="media"?(on.audio=!0,on.video=!0,on.screenSharing=!1):nn.detail.callType==="audio"?(on.audio=!0,on.video=!1,on.screenSharing=!1):nn.detail.callType==="videoOnly"?(on.audio=!1,on.video=!0,on.screenSharing=!1):nn.detail.callType==="screenSharing"?(on.audio=!1,on.video=!0,on.screenSharing=!0):nn.detail.callType==="screenSharingWithAudio"&&(on.audio=!0,on.video=!0,on.screenSharing=!0),Xt.get(Bo(Ct)).emit("userMediaError",on)};return apiRTC.addEventListener("userMediaError",en,"UserAgent"),Ct.checkUACapabilities(),Ct.capabilities.mediaDeviceChanged==="OFF"&&(gr.debug("mediaDeviceChanged is not supported"),Ct.apiRTCMediaDeviceDetectionEnabled===!0&&(gr.debug("apiRTCMediaDeviceDetectionEnabled is activated, starting process"),setInterval(function(){apiCC.mediaDeviceMgr.getMediaDevices()},Ct.apiRTCMediaDeviceDetectionDelay))),apiRTC.userAgentInstance=Bo(Ct),Ct}return jt=Yt,Qt=[{key:"fetchUserMediaDevices",value:function(){return gr.warn("DEPRECATION WARNING : fetchUserMediaDevices() is now deprecated, use getUserMediaDevices() instead"),new Promise(function(Ct,St){apiCC.browser==="IE"&&apiCC.browser_version>8?(apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)):apiCC.getMediaDevices().then(function(Lt){apiCC.mediaDeviceMgr.gotSources(Lt),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)}).catch(function(){gr.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null),St(Ut.g.createError(et.g.ERROR_OTHER,"fetchUserMediaDevices() - Could not get media devices",gr))})})}},{key:"getUserMediaDevices",value:function(){return apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray}},{key:"createStream",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return gr.info("createStream() with option :",Ct),so.createStreamFromUserMedia(Ct.audioInputId,Ct.videoInputId,Ct.constraints,Ct)}},{key:"createStreamFromMediaStream",value:function(Ct){return gr.info("createStreamFromMediaStream()"),so.createStreamFromMediaStream(Ct)}},{key:"fetchNetworkInformation_v2",value:function(Ct,St){gr.debug("fetchNetworkInformation Version 2 :",Ct);var Lt=ko.cloudUrl;Ct!=null&&(Lt=Ct);var Ht={testServer:Lt,httpPing:{},upload:{},download:{}};return St!=null&&Array.isArray(St)?(apiRTC.bandwidthRatingThresholds=St,gr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):gr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=Lt,gr.info("Start Network test"),new Promise(function(Gt,en){apiRTC.testUserPing(function(nn,on){nn!==null?en(nn):(Ht.httpPing=on,apiRTC.testUserUpload(25e4,function(yn,On){yn!==null?en(yn):(Ht.upload.kbps=8*On.kBPerSec,Ht.upload.rating=On.rating,apiRTC.testUserUploadLoop(5e5,Ht.upload,function(Qn,tr){Qn!==null?en(Qn):(Ht.upload.kbps=8*tr.kBPerSec,Ht.upload.rating=tr.rating,apiRTC.testUserDownload(256,function(dr,fr){dr!==null?en(dr):(Ht.download.kbps=8*fr.kBPerSec,Ht.download.rating=fr.rating,apiRTC.testUserDownloadLoop(1e3,Ht.download,function(Ar,Xr){Ar!==null?en(Ar):(Ht.download.kbps=8*Xr.kBPerSec,Ht.download.rating=Xr.rating,Gt(Ht))}))}))}))}))})})}},{key:"fetchNetworkInformation_v1",value:function(Ct,St){gr.debug("fetchNetworkInformation Version 1 :",Ct);var Lt=ko.cloudUrl;Ct!=null&&(Lt=Ct);var Ht={testServer:Lt,httpPing:{},upload:{},download:{}};return St!=null&&Array.isArray(St)?(apiRTC.bandwidthRatingThresholds=St,gr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):gr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=Lt,gr.info("Start Network test"),new Promise(function(Gt,en){apiRTC.testUserPing(function(nn,on){nn!==null?en(nn):(Ht.httpPing=on,apiRTC.testUserUpload(25e4,function(yn,On){yn!==null?en(yn):(Ht.upload.kbps=8*On.kBPerSec,Ht.upload.rating=On.rating,Ht.upload.kbps>=1e3&&apiRTC.testUserUpload(5e5,function(Qn,tr){Qn!==null?en(Qn):(Ht.upload.kbps=8*tr.kBPerSec,Ht.upload.rating=tr.rating)}),apiRTC.testUserDownload(256,function(Qn,tr){Qn!==null?en(Qn):(Ht.download.kbps=8*tr.kBPerSec,Ht.download.rating=tr.rating,Ht.download.kbps>=500&&Ht.download.kbps<1500?apiRTC.testUserDownload(500,function(dr,fr){dr!==null?en(dr):(Ht.download.kbps=8*fr.kBPerSec,Ht.download.rating=fr.rating,Gt(Ht))}):Ht.download.kbps>=1500?apiRTC.testUserDownload(768,function(dr,fr){dr!==null?en(dr):(Ht.download.kbps=8*fr.kBPerSec,Ht.download.rating=fr.rating,Gt(Ht))}):Gt(Ht))}))}))})})}},{key:"fetchNetworkInformation",value:function(Ct,St){return this.fetchNetworkInformation_v1(Ct,St)}},{key:"fetchGeolocationInformation",value:function(Ct){return Ct==null&&(Ct={enableHighAccuracy:!1,timeout:1/0,maximumAge:0}),new Promise(function(St,Lt){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(Ht){St(Ht)},function(Ht){Lt(Ht)},Ct)})}},{key:"setUserData",value:function(Ct){this.currentSession&&this.currentSession.setUserData(Ct)}},{key:"setUsername",value:function(Ct){this.currentSession?this.currentSession.setUsername(Ct):this.preRegisterUserData.setProp("username",Ct)}},{key:"setPhotoUrl",value:function(Ct){this.currentSession?this.currentSession.setPhotoUrl(Ct):this.preRegisterUserData.setProp("photo_url",Ct)}},{key:"getUserData",value:function(){return this.currentSession?this.currentSession.getUserData():this.preRegisterUserData}},{key:"getUsername",value:function(){return this.currentSession?this.currentSession.getUsername():this.preRegisterUserData.get("username")!==null?this.preRegisterUserData.get("username"):this.preRegisterUserData.get("nickname")!==null?this.preRegisterUserData.get("nickname"):this.username}},{key:"getPhotoUrl",value:function(){return this.currentSession?this.currentSession.getPhotoUrl():this.preRegisterUserData.get("photo_url")!==null?this.preRegisterUserData.get("photo_url"):this.preRegisterUserData.get("photoUrl")!==null?this.preRegisterUserData.get("photoUrl"):null}},{key:"fetchProfileInformation",value:function(Ct){var St=this,Lt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Ht,Gt){var en=null;St.profile===null||Lt?St.userId&&(en=Cr.getActiveApiKey())!==null?ko.getUserProfile(en,St.userId,Ct).then(function(nn){St.profile=nn,Ht(nn)}).catch(Gt):Gt("fetchProfileInformation() - missing registration"):Ht(St.profile)})}},{key:"getEnterprise",value:function(){return us.get(this)}},{key:"getCurrentSession",value:function(){return this.currentSession}},{key:"getEventCenter",value:function(){return apiRTC.eventCenter}},{key:"startWhiteboard",value:function(Ct,St){gr.trace("startWhiteboard()"),Cr.whiteBoardClient.start(),Cr.whiteBoardClient.setCanvas(Ct),St!=null&&Cr.whiteBoardClient.setUserCursorColor(St)}},{key:"stopWhiteboard",value:function(){gr.trace("stopWhiteboard()"),Cr.whiteBoardClient.stop()}},{key:"getWhiteboardClient",value:function(){return gr.trace("getWhiteboardClient()"),Cr.whiteBoardClient}},{key:"register",value:function(){var Ct=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(Lt,Ht){if(gr.info("Register "+Ct.uri),St.hasOwnProperty("uri")&&(Ct.uri=St.uri),St.hasOwnProperty("cloudUrl")&&ko.setCloudURL(St.cloudUrl),St.hasOwnProperty("cloudFetchRetries")&&ko.setFetchRetries(St.cloudFetchRetries),St.hasOwnProperty("cloudFetchRetryDelay")&&ko.setFetchRetryDelay(St.cloudFetchRetryDelay),Ct.uri!==null)if(Ct.currentSession)Ht(Ut.g.createError(et.g.ERROR_APIRTC_SESSION_ALREADY_ON,"register() - Session already ON",gr));else if(Ct.uri.startsWith(mm))Sm(Ct,St,Lt,Ht);else if(Ct.uri.startsWith(hm)||Ct.uri.startsWith(gm))ym(Ct,St,Lt,Ht);else if(Ct.uri.startsWith(vm)||Ct.uri.startsWith(Cm))Tm(Ct,St,Lt,Ht);else{var Gt=Ct.uri.split(":")[0];Ht(Ut.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - prefix invalid used for uri :"+Gt,gr))}else Ht(Ut.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - Cannot register UserAgent, no uri was specified",gr))})}},{key:"unregister",value:function(){var Ct=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0,unregister:!0};return new Promise(function(Lt,Ht){Ct.currentSession!==null?Ct.currentSession.disconnect(St).then(function(){Ct.currentSession=null,us.set(Ct,null),Lt()}).catch(function(Gt){Ht(Ut.g.createError(et.g.ERROR_OTHER,"unregister() - unregistration error",gr))}):Ht(Ut.g.createError(et.g.ERROR_OTHER,"unregister() - no current session",gr))})}},{key:"isRegistered",value:function(){return this.currentSession!==null}},{key:"getDefaultDevices",value:function(){return{audioInput:apiCC.mediaDeviceMgr.defaultAudioInput,audioOutput:apiCC.mediaDeviceMgr.defaultAudioOuput,videoInput:apiCC.mediaDeviceMgr.defaultVideoInput}}},{key:"enableCallStatsMonitoring",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};["chrome","firefox","safari"].indexOf(apiCC.browserDetails.type)<0?gr.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):Ct===!0?(this.callStatsMonitoringEnabled=!0,Ut.g.isPropertyTypeof(St,"interval","number")&&St.interval>=1e3&&(this.callStatsMonitoringInterval=St.interval),this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.enableCallStatsMonitoring(!0,this.callStatsMonitoringInterval)):(this.callStatsMonitoringEnabled=!1,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.enableCallStatsMonitoring(!1))}},{key:"enableActiveSpeakerDetecting",value:function(Ct){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ct===!0?Ut.g.isPropertyTypeof(St,"threshold","number")&&St.threshold>0?apiRTC.enableActiveSpeakerDetecting(!0,St.threshold):apiRTC.enableActiveSpeakerDetecting(!0):apiRTC.enableActiveSpeakerDetecting(!1)}},{key:"enableMeshRoomMode",value:function(Ct){Ct===!1||Ct===!0?(this.meshModeEnabled=Ct,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.enableMeshRoomMode(Ct)):gr.error("Wrong value",Ct)}},{key:"setTargetBandwidthUsage",value:function(Ct){typeof Ct!="number"&&!isNaN(Ct)&&Ct>0?(this.targetBandwidthUsage=Ct,this.isRegistered&&Cr.webRTCClient.setVideoBandwidth(Ct)):gr.error("Unvalid target bandwidth usage value",Ct)}},{key:"setOverallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallIncoming=Ct,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setOverallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallIncoming,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setOverallIncomingVideoBandwidth(0))}},{key:"setOverallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallOutgoing=Ct,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setOverallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallOutgoing,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setOverallOutgoingVideoBandwidth(0))}},{key:"setPerCallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallIncoming=Ct,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setPerCallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallIncoming,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setPerCallIncomingVideoBandwidth(0))}},{key:"setPerCallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallOutgoing=Ct,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setPerCallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallOutgoing,this.isRegistered&&Cr.webRTCClient&&Cr.webRTCClient.setPerCallOutgoingVideoBandwidth(0))}},{key:"updateMediaOnCall",value:function(Ct,St){Cr.webRTCClient.updateMediaDeviceOnCall(Ct,St)}},{key:"getCapabilities",value:function(){return this.capabilities}},{key:"getBrowser",value:function(){return this.browser}},{key:"getBrowserMajorVersion",value:function(){return this.browser_major_version}},{key:"getBrowserVersion",value:function(){return this.browser_version}},{key:"getOsName",value:function(){return this.osName}},{key:"getOsVersion",value:function(){return this.osVersion}},{key:"getBrowserInfo",value:function(){return this.browserInfo}},{key:"getBrowserDetails",value:function(){return this.browserDetails}},{key:"getCPUArchitecture",value:function(){return this.getUserData().cpuArchitecture}},{key:"getDeviceVendor",value:function(){return this.getUserData().deviceVendor}},{key:"getDeviceModel",value:function(){return this.getUserData().deviceModel}},{key:"getEngineName",value:function(){return this.getUserData().engineName}},{key:"getEngineVersion",value:function(){return this.getUserData().engineVersion}},{key:"checkUACapabilities",value:function(){gr.debug("checkUACapabilities"),apiRTC.osName==="iOS"&&(gr.debug("Deactivating whiteboardCursor for iOS"),this.capabilities.whiteboardCursor="OFF"),apiRTC.osName==="Android"&&apiRTC.browser==="Chrome"&&(gr.debug("mediaDeviceChanged not supported on Chrome/Android"),this.capabilities.mediaDeviceChanged="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(gr.debug("mediaDeviceChanged not supported on Safari"),this.capabilities.mediaDeviceChanged="OFF"),apiRTC.webRTCCompliant===!1&&(gr.debug("WebRTC not compliant"),this.capabilities.webRTCCompliant="OFF"),apiRTC.screenSharingCompliant===!1&&(gr.debug("screenSharing not compliant"),this.capabilities.screenSharingCompliant="OFF"),apiRTC.qoSStatCompliant===!1&&(gr.debug("qoS Stat not compliant"),this.capabilities.qoSStatCompliant="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(gr.debug("background removal not compliant"),this.capabilities.backgroundRemoval="ON",gr.debug("noiseReduction not compliant"),this.capabilities.noiseReduction="OFF"),"getCapabilities"in MediaStreamTrack.prototype||(gr.debug("Stream capabilities not compliant"),this.capabilities.streamCapabilities="OFF"),(apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="10"||apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="11")&&(gr.debug("remoteAccessUser not compliant"),this.capabilities.remoteAccessUser="OFF")}},{key:"startPrecallTest",value:function(Ct,St,Lt,Ht,Gt){Cr.webRTCClient.startPrecallTest(Ct,St,Lt,Ht,Gt)}},{key:"sendLogToCloud",value:function(Ct,St,Lt,Ht){apiCC.sendLogToCloud(Ct,St,Lt,Ht)}},{key:"getStreamWithRoomNameAndCallId",value:function(Ct,St){gr.debug("getStreamWithRoomNameAndCallId");var Lt="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(Ht){var Gt=0;if((Gt=Ht.publishedInConversations.get(Ct))!==void 0&&Gt.toString()===St.toString())return gr.debug(" Stream is found"),Lt=Ht;gr.debug(" This is not the stream")}),Lt}},{key:"getStreamWithMediaStreamId",value:function(Ct){gr.debug("getStreamWithMediaStreamId");var St="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(Lt){if(Lt.data.id===Ct.toString())return gr.debug(" Stream is found"),St=Lt;gr.debug(" This is not the stream")}),St}}],Mt=[{key:"getAvailableEvents",value:function(){return bm}}],Qt&&op(jt.prototype,Qt),Mt&&op(jt,Mt),Object.defineProperty(jt,"prototype",{writable:!1}),Yt}(cn),ym=function(Wt,jt,Qt,Mt){var Bt=Wt.uri.split(":");gr.debug("register() - Registration using prefix :"+Bt[0]);var ln=Bt[1];jt.password!==null&&typeof jt.password=="string"?ko.authentication(ln,jt.password,jt.captcha_token).then(function(dn){return lp(Wt,dn.token,jt)}).then(function(dn){Qt(dn)}).catch(function(dn){gr.error("registerPrefixApizee err : ",dn.message);var Yt="register() - An error occured during cloud credentials registration :"+JSON.stringify(dn),Ct=dn;Ct.message=Yt,dn.hasOwnProperty("code")?Ct.code=dn.code:dn.hasOwnProperty("http_code")&&(dn.http_code.toString().startsWith("4")?Ct.code=et.g.ERROR_INVALID_CREDENTIALS:Ct.code=et.g.ERROR_SERVER_UNAVAILABLE),Mt(Ct)}):Mt(Ut.g.createError(et.g.ERROR_INVALID_CREDENTIALS,"register() - No password was specified for apizee: UserAgent registration",gr))},Sm=function(Wt,jt,Qt,Mt){gr.debug("register() - Registration using prefix :token:");var Bt=Wt.uri.split(":")[1];ko.checkUserToken(Bt).then(function(ln){return lp(Wt,Bt,jt)}).then(Qt).catch(function(ln){Mt(Ut.g.createError(et.g.ERROR_OTHER,"register() - An error occured during cloud token registration",gr))})},Tm=function(Wt,jt,Qt,Mt){var Bt=Wt.uri.split(":");gr.debug("register() - Registration using prefix :"+Bt[0]);var ln=Bt[1];if(!ln||typeof ln!="string")return Mt(Ut.g.createError(et.g.ERROR_OTHER,"register() - Wrong apiKey",gr));new Promise(function(dn,Yt){ko.getPreferredCCS(ln).then(function(Ct){jt.ccs&&jt.ccs!==Ct.ccs&&(gr.debug("Overloading CCS address with init option"),Ct.ccs=jt.ccs),dn(Ct)}).catch(function(){Yt(Ut.g.createError(et.g.ERROR_OTHER,"register() - Could not get preferred CCS",gr))})}).then(function(dn){Wt.currentSession=new Br(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=null,Ut.g.isPropertyTypeof(jt,"nickname","string")?Wt.username=jt.nickname:Wt.username="guest-"+Ut.g.guid().substr(0,13),Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),jt.userData&&Wt.preRegisterUserData.setProps(jt.userData);var Yt={apiKey:ln,MCUActivated:!0,mcu:jt.hasOwnProperty("mcu")?jt.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,ccsServer:dn.ccs,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,userData:Wt.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,extJsLoadingRetryNb:jt.extJsLoadingRetryNb,extJsLoadingRetryDelay:jt.extJsLoadingRetryDelay,ccsConnectionRetryNb:jt.ccsConnectionRetryNb,ccsConnectionRetryDelay:jt.ccsConnectionRetryDelay,turnServerAddress:jt.turnServerAddress,userAcceptOnIncomingDataCall:jt.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:jt.userAcceptOnIncomingScreenSharingCall,cloudIsSecured:dn.secure};return jt.hasOwnProperty("id")&&(Yt.apiCCId=jt.id),Ut.g.isPropertyTypeof(jt,"idPersistenceTimeout","number")&&jt.idPersistenceTimeout>=0&&(Yt.apiCCIdPersistenceTimeout=jt.idPersistenceTimeout),jt.hasOwnProperty("groups")&&(Yt.presenceGroup=jt.groups),jt.hasOwnProperty("subscribeTo")&&(Yt.subscribeToPresenceGroup=jt.subscribeTo),jt.hasOwnProperty("contactDisconnectionDelay")&&(gr.debug("Setting contactDisconnectionDelay :",jt.contactDisconnectionDelay),Cr.contactDisconnectionDelay=jt.contactDisconnectionDelay),Yt.idConversionActivated=!1,jt.hasOwnProperty("idConversionActivated")&&(Yt.idConversionActivated=jt.idConversionActivated),jt.hasOwnProperty("conversationSpace")&&(Yt.conversationSpace=jt.conversationSpace),jt.hasOwnProperty("token")&&(Yt.token=jt.token,Wt.currentSession.ccsToken=jt.token),Cr.initializeApiRTC(Yt)}).then(function(dn){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Cr.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Cr.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Cr.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Cr.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Cr.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Cr.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Cr.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.userId=dn,Wt.currentSession.init(dn),gr.log("register() - APIRTC init OK",dn),Cr.apiRTCSession.userData!==void 0&&Cr.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Cr.apiRTCSession.userData)),Qt(Wt.currentSession)}).catch(function(dn){Mt(Ut.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"register() - ApiRTC Initialization error : "+dn,gr)),delete Wt.currentSession,Wt.currentSession=null})},lp=function(Wt,jt){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Mt=null,Bt=null;return gr.debug("initializeCloudUASession :",Qt),new Promise(function(ln,dn){ko.getConnectedUserInformation(jt).then(function(Yt){if(Bt=Yt,gr.debug("Connected user information : ",Yt),Wt.currentSession=new Br(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=Yt.token,Qt.hasOwnProperty("idPersistenceTimeout")&&(Wt.currentSession.idPersistenceTimeout=Qt.idPersistenceTimeout),Wt.username=Yt.nickname,Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("nickname",Wt.username),Wt.preRegisterUserData.setProp("photo_url",Yt.photo_url),Yt.mail&&Wt.preRegisterUserData.setProp("mail",Yt.mail),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),Qt.userData&&Wt.preRegisterUserData.setProps(Qt.userData),!Qt.hasOwnProperty("overLoadedApiRTCKey")||Qt.overLoadedApiRTCKey===null||Qt.overLoadedApiRTCKey===void 0||Yt.apiKey===Qt.overLoadedApiRTCKey)return Wt.userId=Yt.userId,Mt=new Xs(Yt.enterpriseId,Yt.apiKey,Wt.currentSession),us.set(Wt,Mt),Mt.load();gr.debug("overLoadedApiRTCKey is defined :",Qt.overLoadedApiRTCKey),Mt=new Xs(Yt.enterpriseId,Qt.overLoadedApiRTCKey,Wt.currentSession),delete Qt.id,Wt.userId=null,us.set(Wt,Mt),gr.debug("... no enterprise users data loading")}).then(function(){var Yt={apiKey:Mt.getApiKey(),ccsServer:Qt.ccs||Bt.ccs,MCUActivated:!0,mcu:Qt.hasOwnProperty("mcu")?Qt.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,apiCCId:Qt.hasOwnProperty("id")?Qt.id:Wt.userId,userData:Wt.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,presenceGroup:["agent"],subscribeToPresenceGroup:["agent","visitor"],extJsLoadingRetryNb:Qt.extJsLoadingRetryNb,extJsLoadingRetryDelay:Qt.extJsLoadingRetryDelay,ccsConnectionRetryNb:Qt.ccsConnectionRetryNb,ccsConnectionRetryDelay:Qt.ccsConnectionRetryDelay,turnServerAddress:Qt.turnServerAddress,userAcceptOnIncomingDataCall:Qt.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:Qt.userAcceptOnIncomingScreenSharingCall};return Ut.g.isPropertyTypeof(Qt,"idPersistenceTimeout","number")&&Qt.idPersistenceTimeout>=0&&(Yt.apiCCIdPersistenceTimeout=Qt.idPersistenceTimeout),Qt.hasOwnProperty("groups")&&(Yt.presenceGroup=Qt.groups),Qt.hasOwnProperty("subscribeTo")&&(Yt.subscribeToPresenceGroup=Qt.subscribeTo),Qt.hasOwnProperty("contactDisconnectionDelay")&&(gr.debug("Setting contactDisconnectionDelay :",Qt.contactDisconnectionDelay),Cr.contactDisconnectionDelay=Qt.contactDisconnectionDelay),Yt.idConversionActivated=!1,Qt.hasOwnProperty("idConversionActivated")&&(Yt.idConversionActivated=Qt.idConversionActivated),Qt.hasOwnProperty("conversationSpace")&&(Yt.conversationSpace=Qt.conversationSpace),Cr.initializeApiRTC(Yt)}).then(function(Yt){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Cr.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Cr.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Cr.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Cr.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Cr.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Cr.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Cr.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.currentSession.init(Yt),gr.info("APIRTC init OK",Yt),Cr.apiRTCSession.userData!==void 0&&Cr.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Cr.apiRTCSession.userData)),ln(Wt.currentSession)}).catch(function(Yt){gr.error(Yt),dn(Yt)})})};function Im(Wt,jt){for(var Qt=0;Qt<jt.length;Qt++){var Mt=jt[Qt];Mt.enumerable=Mt.enumerable||!1,Mt.configurable=!0,"value"in Mt&&(Mt.writable=!0),Object.defineProperty(Wt,Mt.key,Mt)}}var Xo=ft.Y.get("ResourcesLoader"),Rm=function(){function Wt(){(function(Mt,Bt){if(!(Mt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.loadedJsLinks=[]}var jt,Qt;return jt=Wt,Qt=[{key:"loadjs",value:function(Mt){function Bt(ln,dn,Yt){return Mt.apply(this,arguments)}return Bt.toString=function(){return Mt.toString()},Bt}(function(Mt,Bt,ln){var dn=this;Xo.info("Load js resources",Mt),Xo.debug("Already loaded js",this.loadedJsLinks);var Yt=ln.success;if((Mt=Mt.filter(function(Ct){return!dn.loadedJsLinks.includes(Ct)})).length===0)return Xo.debug("Skip resources loading, all resources previously loaded"),void(Yt instanceof Function&&Yt());Xo.debug("Filtered resources to load",Mt),ln.success=function(){dn.loadedJsLinks.push.apply(dn.loadedJsLinks,Mt),Yt instanceof Function&&Yt()},_e(Mt,Bt,ln)})},{key:"unloadjs",value:function(Mt){var Bt=this;Xo.info("Unload js",Mt),Mt.forEach(function(ln){var dn=document.querySelector('script[src="'+ln+'"]');dn!==void 0&&(dn.remove(),Bt.loadedJsLinks=Bt.loadedJsLinks.filter(function(Yt){return Yt!==ln}))}),Xo.debug("Scripts unloaded, currently loaded js",this.loadedJsLinks)}},{key:"reset",value:function(){unloadjs(this.loadedJsLinks),this.loadedJsLinks=[]}}],Qt&&Im(jt.prototype,Qt),Object.defineProperty(jt,"prototype",{writable:!1}),Wt}(),Mr=ft.Y.get("Init"),xa=ft.Y.get("MediaDeviceManager");function hu(Wt){return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},hu(Wt)}nt=s.hmd(nt),console!=null&&(typeof apiRTC_React<"u"?console.info&&console.info("Loading APIRTC_REACT_NATIVE_MODULE"):console.info&&console.info("Loading APIRTC_MODULE")),window.Prototype&&delete Array.prototype.toJSON;var cp=new(Go());yt.version="5.0.17",yt.utils={},yt.eventCenter=new kt,yt.resourcesLoader=new Rm;for(var gu=0,dp=Object.keys(et.g);gu<dp.length;gu++){var up=dp[gu];yt[up]=et.g[up]}yt.utils.EventEmitter=dt,yt.utils.EventCenter=kt,yt.MediaDevice=Ft,yt.Stream=so,yt.Call=Qr,yt.Conversation=$o,yt.ConversationCall=Gl,yt.Conference=Fs,yt.Contact=No,yt.Enterprise=Xs,yt.SentInvitation=Do,yt.ReceivedInvitation=Mn,yt.ReceivedCallInvitation=Er,yt.ReceivedConversationJoinRequest=Ho,yt.ReceivedConversationInvitation=Vt,yt.ReceivedFileTransferInvitation=eo,yt.ReceivedWhiteboardInvitation=vs,yt.ReceivedDataChannelInvitation=zo,yt.ReceivedPointerSharingInvitation=Ml,yt.PointerSharingRoom=ru,yt.Session=Br,yt.UserAgent=sp,yt.UserData=Io,yt.CloudApi=cp,yt.DataChannel=ys,yt.Observable=cn,yt.setLogLevel=function(Wt){ft.Y.setLogLevel(Wt)};var pp=!1;window.apiRTC===void 0?(hu(nt)==="object"&&nt.exports&&(nt.exports=yt),window.apiRTC2=window.apiRTC=window.apiCC=window.CC=yt,pp=!0):console.info("APIRTC_MODULE already loaded with version :",apiRTC.version),s(4170),pp===!0&&(yt.init=function(Wt){var jt,Qt;if(Mr.info("apiRTC initialization, version is :"+apiCC.version),Mr.info("osName :"+apiCC.osName),Mr.info("osVersion :"+apiCC.osVersion),Mr.info("browser :"+apiCC.browser),Mr.info("browser_version :"+apiCC.browser_version),jt=Wt.apiKey,Qt=!0,Mr.info("apiKey :",jt),jt.indexOf("[")!==-1&&(Qt=!1),Qt===!0)if(Wt.hasOwnProperty("apiCCId")&&Wt.apiCCId!==null&&Wt.apiCCId!==""&&function(dn){if(dn!==null){var Yt=dn;if(typeof Yt=="number"&&(Yt=String(Yt)),typeof Yt=="string")return Yt.length<=128}return!1}(Wt.apiCCId)!==!0)Mr.error("apiCCId format is not correct, leaving connection process");else{var Mt="";if(Mt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!="https:"?"http":"https",ut.ag.name!=="iOS"&&ut.ag.name!=="Android"||(Mr.log(ut.ag.name+" detected forcing protocol to https"),Mt="https"),Wt.ccsServer===void 0?(Mr.debug("Setting ccsServer"),window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0?window.location.protocol=="https:"||ut.ag.name==="iOS"||ut.ag.name==="Android"?Wt.ccsServer="ccs5.apizee.com:443":Wt.ccsServer="ccs5.apizee.com:80":Wt.ccsServer="ccs5.apizee.com:443"):Mr.log("ccsServer is defined on init()"),Wt.bandwidthTestServer!==null&&Wt.bandwidthTestServer!==void 0?(Mr.log("bandwidthTestServer is defined :",Wt.bandwidthTestServer),apiCC.bandwidthTestServer=Wt.bandwidthTestServer):Mr.log("bandwidthTestServer is not defined"),Wt.userData!==void 0&&Mr.log("userData :",Wt.userData),apiCC.extJsLoadingRetryNb=Wt.extJsLoadingRetryNb,apiCC.extJsLoadingRetryDelay=Wt.extJsLoadingRetryDelay,apiCC.jsLoaded===!1){apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId;var Bt=function(){Mr.log("sio loaded"),apiCC.jsLoaded=!0,apiCC.session=new apiCC.ApiCCSession(Wt),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","loaded")},ln={success:Bt,error:function(){Mr.error("sio loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","error")},retrycb:function(){Mr.warn("sio retry"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","retry")}};apiCC.sioEmbedded?(window.rtcio=io,Bt()):apiRTC_sioLoader.load(Mt,Wt,ln)}else Mr.log("apiRTC JS Librairies already loaded"),Mr.log("initParameters have changed, need to reload session connection"),apiCC.addEventListener("sessionReady",Wt.onReady),Mr.log("initParameters.userData :",Wt.userData),Wt.apiCCId!==void 0&&Wt.apiCCId!==""&&Wt.apiCCId!==null||(Mr.log("keeping apiCCId defined by apiRTC :"+Wt.apiCCId),Wt.apiCCId=apiCC.session.apiCCId),Mr.log("initParameters.apiCCId :"+Wt.apiCCId),Wt.userData!==null&&Wt.userData!==void 0?(Mr.log("userData is defined :",Wt.userData),apiCC.session.userData=Wt.userData):Mr.log("userData is not defined"),Mr.log("apiCC.session.userData :",apiCC.session.userData),Wt.token!==null&&Wt.token!==void 0?(Mr.log("token is defined :"+Wt.token),apiCC.session.token=Wt.token):(Mr.log("token is not defined"),apiCC.session.token=null),Wt.conversationSpace!==null&&Wt.conversationSpace!==void 0?(Mr.log("conversationSpace is defined :"+Wt.conversationSpace),apiCC.session.conversationSpace=Wt.conversationSpace):(Mr.log("conversationSpace is not defined"),apiCC.session.conversationSpace=null),apiCC.session.reOpenChannel(Wt.apiCCId,Wt.apiKey),Wt.nickname!==null&&Wt.nickname!==void 0?(Mr.log("Nickname is defined :"+Wt.nickname),apiCC.session.nickname=Wt.nickname):(Mr.log("Nickname is not defined, setting to apiCCId value :"+apiCC.session.apiCCId),apiCC.session.nickname=apiCC.session.apiCCId),Wt.photoURL!==null&&Wt.photoURL!==void 0?(Mr.log("photoURL is defined :"+Wt.photoURL),apiCC.session.photoURL=Wt.photoURL):(Mr.log("photoURL is not defined"),apiCC.session.photoURL=null),Wt.presenceGroup!==null&&Wt.presenceGroup!==void 0?(Mr.log("presenceGroup is defined :"+Wt.presenceGroup),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(Wt.presenceGroup)&&(Mr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=Wt.presenceGroup,apiCC.session.presenceGroup=Wt.presenceGroup)):(Mr.log('presenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(["default"])&&(Mr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=["default"],apiCC.session.presenceGroup=["default"])),Wt.subscribeToPresenceGroup!==null&&Wt.subscribeToPresenceGroup!==void 0?(Mr.log("subscribeToPresenceGroup is defined :"+Wt.subscribeToPresenceGroup),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(Wt.subscribeToPresenceGroup)&&(Mr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=Wt.subscribeToPresenceGroup,apiCC.session.subscribeToPresenceGroup=Wt.subscribeToPresenceGroup)):(Mr.log('subscribeToPresenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(["default"])&&(Mr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=["default"],apiCC.session.subscribeToPresenceGroup=["default"])),apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId}else Mr.error("Apikey format is not correct, leaving connection process")},s(8560),yt.mediaDeviceMgr=new function(){this.audioDevicePresent=!0,this.videoDevicePresent=!0,this.audioOutputPresent=!0,this.mediaSourceInfos=null,this.mediaDeviceChangedDetected=!1,this.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},this.mediaDeviceSourceInfosArrayBeforeGotSources=null,this.defaultVideoInput=null,this.defaultAudioInput=null,this.defaultAudioOuput=null,this.realMediaDevicesListInitialization=!1,this.realMediaDevicesListInitializationWasAlreadyDone=!1,xa.debug("MediaDeviceManager"),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&(navigator.mediaDevices.ondevicechange=function(Wt){xa.debug("Media device have changed"),apiCC.mediaDeviceMgr.getMediaDevices("updatedOnDeviceChange")}),this.gotSources=function(Wt,jt){xa.debug("gotSources : sourceInfos :",Wt),apiCC.mediaDeviceMgr.audioDevicePresent=!1,apiCC.mediaDeviceMgr.videoDevicePresent=!1,apiCC.mediaDeviceMgr.audioOutputPresent=!1;var Qt=!1;apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources=apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray;var Mt={},Bt=!1;(0,mt.fS)(apiCC.mediaDeviceMgr.mediaSourceInfos,Wt)||(xa.debug("MediaDevices change detected"),Qt=!0);var ln,dn=null,Yt=0,Ct=0,St=0,Lt=null;if(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},apiCC.mediaDeviceMgr.mediaSourceInfos=Wt,Wt!==null)for(ln=0;ln!==Wt.length;++ln)(dn=Wt[ln]).deviceId!==null&&dn.deviceId!==""?(Lt=new Ft(dn.deviceId,dn.kind),dn.label!==null&&dn.label!==void 0&&(this.realMediaDevicesListInitialization=!0)):(xa.debug("MediaDevices change but deviceId is not correct, using fakedeviceId :",ln),Lt=new Ft(ln,dn.kind)),dn.kind==="audio"||dn.kind==="audioinput"?(apiCC.mediaDeviceMgr.audioDevicePresent||(apiCC.mediaDeviceMgr.audioDevicePresent=!0),Lt.label=dn.label||"microphone "+ ++Yt,apiCC.mediaDeviceMgr.defaultAudioInput===null&&(apiCC.mediaDeviceMgr.defaultAudioInput=Lt),dn.getCapabilities!==null&&dn.getCapabilities!==void 0?Lt.capabilities=dn.getCapabilities():xa.debug("getCapabilities not defined")):dn.kind==="video"||dn.kind==="videoinput"?(apiCC.mediaDeviceMgr.videoDevicePresent||(apiCC.mediaDeviceMgr.videoDevicePresent=!0),Lt.label=dn.label||"camera "+ ++Ct,apiCC.mediaDeviceMgr.defaultVideoInput===null&&(apiCC.mediaDeviceMgr.defaultVideoInput=Lt),dn.getCapabilities!==null&&dn.getCapabilities!==void 0?Lt.capabilities=dn.getCapabilities():xa.debug("getCapabilities not defined")):dn.kind==="audiooutput"?(apiCC.mediaDeviceMgr.audioOutputPresent||(apiCC.mediaDeviceMgr.audioOutputPresent=!0),Lt.label=dn.label||"audio output "+ ++St,apiCC.mediaDeviceMgr.defaultAudioOuput===null&&(apiCC.mediaDeviceMgr.defaultAudioOuput=Lt)):(Lt.label=dn.label||"other source "+dn.deviceId,xa.trace("Detected some other kind of source : "+dn.kind)),xa.trace("Local device : "+Lt.label+" - "+Lt.id),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Lt.type]===void 0&&(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Lt.type]={}),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Lt.type][Lt.id]=Lt;else xa.warn("Media detection is not supported by browser, considering micro and camera present"),apiCC.mediaDeviceMgr.audioDevicePresent=!0,apiCC.mediaDeviceMgr.videoDevicePresent=!0,apiCC.mediaDeviceMgr.audioOutputPresent=!0;if(xa.log("Audio device detected :"+apiCC.mediaDeviceMgr.audioDevicePresent),xa.log("Video device detected :"+apiCC.mediaDeviceMgr.videoDevicePresent),xa.log("audio Output device detected :"+apiCC.mediaDeviceMgr.audioOutputPresent),xa.debug("mediaDeviceSourceInfosArray :",apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray),apiCC.mediaDeviceMgr.audioDevicePresent===!1?apiCC.mediaDeviceMgr.videoDevicePresent===!1?apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_AUDIO_NO_VIDEO_DEVICE"):apiCC.myWebRTC_Event.createErrorEvent("Audio device is not present","NO_AUDIO_DEVICE"):apiCC.mediaDeviceMgr.videoDevicePresent===!1&&apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_VIDEO_DEVICE"),(0,mt.fS)(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources)||(xa.debug("mediaDeviceSourceInfosArray change detected"),Qt=!0),Qt===!0){xa.debug("fireMediaChangedEvent :",Qt);var Ht=this.getMediaDeviceListsDiff(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);this.realMediaDevicesListInitialization===!0&&this.realMediaDevicesListInitializationWasAlreadyDone===!1&&(xa.debug("This is the first real initialization of media device list"),Bt=!0),this.realMediaDevicesListInitialization===!0&&(this.realMediaDevicesListInitializationWasAlreadyDone=!0),this.mediaDeviceChangedDetected=!0,apiCC.myWebRTC_Event!==null&&apiCC.myWebRTC_Event.createMediaDeviceChangedEvent(Ht,jt,Bt),xa.debug("fireMediaChangedEvent :",apiCC.mediaDeviceMgr.mediaSourceInfos)}apiCC.session&&apiCC.session.apiCCWebRTCClient&&(apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),Mt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,Mt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(Mt))},this.getMediaDevices=function(Wt){xa.debug("MediaDeviceManager::getMediaDevices : updateReason :",Wt),apiCC.browser==="IE"&&apiCC.browser_version>8?apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources):apiCC.getMediaDevices().then(function(jt){apiCC.mediaDeviceMgr.gotSources(jt,Wt)}).catch(function(){xa.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null,Wt)})},this.getMediaDeviceListsDiff=function(Wt,jt){jt!==void 0&&jt||(jt={}),Wt!==void 0&&Wt||(Wt={});for(var Qt=[],Mt=[],Bt=[],ln=0,dn=Object.keys(jt);ln<dn.length;ln++){var Yt=dn[ln];if(Wt[Yt]===void 0)Mt[Yt]=jt[Yt];else for(var Ct=0,St=Object.keys(jt[Yt]);Ct<St.length;Ct++){var Lt=St[Ct];Wt[Yt][Lt]===void 0&&(Mt[Yt]===void 0&&(Mt[Yt]={}),Mt[Yt][Lt]=jt[Yt][Lt])}}for(var Ht=0,Gt=Object.keys(Wt);Ht<Gt.length;Ht++)for(var en=Gt[Ht],nn=0,on=Object.keys(Wt[en]);nn<on.length;nn++){var yn=on[nn];jt[en]!==void 0&&jt[en][yn]!==void 0||(Qt[en]===void 0&&(Qt[en]={}),Qt[en][yn]=Wt[en][yn]),jt[en]!==void 0&&jt[en][yn]!==void 0&&Wt[en][yn].label!==jt[en][yn].label&&(Bt[en]===void 0&&(Bt[en]={}),Bt[en][yn]=Wt[en][yn])}return{added:Object.keys(Qt).length>0?Qt:null,removed:Object.keys(Mt).length>0?Mt:null,updated:Object.keys(Bt).length>0?Bt:null}}},yt.mediaDeviceMgr.getMediaDevices(),yt.webRTCCompliant=yt.isWebRTCCompliant(),yt.qoSStatCompliant=yt.isQoSStatCompliant(),yt.screenSharingCompliant=yt.isScreenSharingCompliant());const Em=apiRTC},1549:(nt,it,s)=>{s.d(it,{Y:()=>ht}),s(6992),s(1532),s(1539),s(8783),s(3948),s(2772),s(4916),s(5306),s(2222),s(5268),s(3710),s(3161),s(9653),s(9070),s(9753),s(2526),s(1817),s(2165),s(1038),s(7042),s(8309);var et=s(3173);function rt(at){return function(ut){if(Array.isArray(ut))return ot(ut)}(at)||function(ut){if(typeof Symbol<"u"&&ut[Symbol.iterator]!=null||ut["@@iterator"]!=null)return Array.from(ut)}(at)||function(ut,ft){if(ut){if(typeof ut=="string")return ot(ut,ft);var mt=Object.prototype.toString.call(ut).slice(8,-1);return mt==="Object"&&ut.constructor&&(mt=ut.constructor.name),mt==="Map"||mt==="Set"?Array.from(ut):mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt)?ot(ut,ft):void 0}}(at)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ot(at,ut){(ut==null||ut>at.length)&&(ut=at.length);for(var ft=0,mt=new Array(ut);ft<ut;ft++)mt[ft]=at[ft];return mt}function gt(at,ut){for(var ft=0;ft<ut.length;ft++){var mt=ut[ft];mt.enumerable=mt.enumerable||!1,mt.configurable=!0,"value"in mt&&(mt.writable=!0),Object.defineProperty(at,mt.key,mt)}}var dt=new Map,pt=et.g.LOG_LEVEL_WARN,st=function(at){var ut,ft=null,mt=null;for(ut=0;ut<at.length;ut++)typeof at[ut]=="string"&&(at[ut].indexOf('"type":"invite"')!==-1?at[ut].indexOf("candidate")===-1?at[ut].indexOf("S->C:")===-1?at[ut]="invite C->S: without candidate":at[ut]="invite S->C: without candidate":at[ut].indexOf("S->C:")===-1?at[ut]="invite C->S: with candidate":at[ut]="invite S->C: with candidate":at[ut].indexOf('"type":"200OK"')!==-1?at[ut].indexOf("candidate")===-1?at[ut].indexOf("S->C:")===-1?at[ut]="200OK C->S: without candidate":at[ut]="200OK S->C: without candidate":at[ut].indexOf("S->C:")===-1?at[ut]="200OK C->S: with candidate":at[ut]="200OK S->C: with candidate":at[ut].indexOf('"type":"candidate"')!==-1&&(at[ut].indexOf("S->C:")===-1?(ft=at[ut].replace(/C->S: /g,""),mt=JSON.parse(ft),at[ut]="candidate C->S:"+mt.candidate):(ft=at[ut].replace(/onChannelMessage S->C: /g,""),mt=JSON.parse(ft),at[ut]="candidate S->C:"+mt.candidate)));return at},ht=function(){function at(yt){if(function(At,wt){if(!(At instanceof wt))throw new TypeError("Cannot call a class as a function")}(this,at),dt.has(yt))throw new Error("Cannot construct singleton Logger");this.category=yt,dt.set(yt,this)}var ut,ft,mt;return ut=at,ft=[{key:"trace",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_TRACE].concat(At))}},{key:"log",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(At))}},{key:"debug",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(At))}},{key:"info",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_INFO].concat(At))}},{key:"warn",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_WARN].concat(At))}},{key:"error",value:function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];this.logMessage.apply(this,[et.g.LOG_LEVEL_ERROR].concat(At))}},{key:"logMessage",value:function(yt){for(var At=arguments.length,wt=new Array(At>1?At-1:0),Pt=1;Pt<At;Pt++)wt[Pt-1]=arguments[Pt];if(console!=null){if(yt<=pt){var Rt="[".concat(new Date().toISOString(),"]");switch(yt in et.g.LOG_LEVEL_LABELS&&(Rt+="[".concat(et.g.LOG_LEVEL_LABELS[yt],"]")),Rt+=et.g.LOG_PREFIX+"(".concat(this.category,")"),yt){case et.g.LOG_LEVEL_ERROR:var kt;console.error&&(kt=console).error.apply(kt,[Rt].concat(rt(wt)));break;case et.g.LOG_LEVEL_WARN:var bt;console.warn&&(bt=console).warn.apply(bt,[Rt].concat(rt(wt)));break;case et.g.LOG_LEVEL_INFO:var Nt;console.info&&(Nt=console).info.apply(Nt,[Rt].concat(rt(wt)));break;default:var Ft;console.log&&(Ft=console).log.apply(Ft,[Rt].concat(rt(wt)))}}typeof apiCC<"u"&&apiCC.logStorageActivated&&yt<=apiCC.logStorageLevel&&(wt=st(wt),apiCC.logStorage.push(JSON.stringify({name:"log",args:{0:"(".concat(this.category,")")+":"+wt}})))}}}],mt=[{key:"get",value:function(yt){return dt.has(yt)?dt.get(yt):new at(yt)}},{key:"setLogLevel",value:function(yt){if(!Number.isInteger(yt)||yt<0)throw"Log level invalid";pt=yt}},{key:"getLogLevel",value:function(){return pt}}],ft&&gt(ut.prototype,ft),mt&&gt(ut,mt),Object.defineProperty(ut,"prototype",{writable:!1}),at}()},3173:(nt,it,s)=>{s.d(it,{g:()=>et}),s(2526),s(1817),s(1539);var et={LOG_PREFIX:"apiRTC",LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,LOG_LEVEL_LABELS:{}};et.LOG_LEVEL_LABELS[et.LOG_LEVEL_ERROR]="ERROR",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_WARN]="WARN",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_INFO]="INFO",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_DEBUG]="DEBUG",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_TRACE]="TRACE",et.ERROR_OTHER=0,et.ERROR_INVALID_CREDENTIALS=1,et.ERROR_NETWORK_UNAVAILABLE=2,et.ERROR_SERVER_UNAVAILABLE=3,et.ERROR_UNAUTHORIZED=4,et.ERROR_APIRTC_INITIALISATION_FAILED=5,et.ERROR_APIRTC_SESSION_ALREADY_ON=6,et.ERROR_REGISTRATION_URI_INVALID=7,et.ERROR_NOT_FOUND=8,et.ERROR_BAD_PARAMETER=9,et.ERROR_INVITATION_STATE_INVALID=10,et.ERROR_TIMED_OUT=11,et.ERROR_STREAM_RECORD=12,et.ERROR_HTTP=13,et.ERROR_NOT_ALLOWED=14,et.ERROR_OPERATION_CANCELED=15,et.ERROR_WRONG_STATE=16,et.MEDIA_TYPE_PHOTO=0,et.MEDIA_TYPE_VIDEO=1,et.MEDIA_TYPE_AUDIO=2,et.MEDIA_TYPE_DOC=3,et.CONTACT_SEND_DATA_IDENTIFIER="contact_data",et.CONTACT_NEW_MEDIA_IDENTIFIER="contact_new_media",et.CONTACT_SEND_FILEINFO_IDENTIFIER="contact_file_info",et.CONTACT_DATACHANNEL_INVITATION="contact_datachannel_invitation",et.CONTACT_EVENTCENTER_DATA_REQUEST="contact_event_center_data_request",et.CONTACT_EVENTCENTER_DATA_ANSWER="contact_event_center_data_answer",et.CONTACT_GET_CAPABILITIES_IDENTIFIER="contact_get_capabilities",et.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER="contact_get_capabilities_result",et.CONTACT_GET_SETTINGS_IDENTIFIER="contact_get_settings",et.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER="contact_get_settings_result",et.CONTACT_GET_CONSTRAINTS_IDENTIFIER="contact_get_constraints",et.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER="contact_get_constraints_result",et.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER="contact_changed_constraints",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER="contact_get_remote_audio_flow_status",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER="contact_get_remote_video_flow_status",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_audio_flow_status_result",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_video_flow_status_result",et.CONTACT_GET_REMOTE_ERROR="contact_get_remote_error",et.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER="contact_apply_constraints_identifier",et.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER="contact_apply_constraints_result_identifier",et.CONTACT_DISABLE_AUDIO_REQUEST="contact_disable_audio_request",et.CONTACT_DISABLE_AUDIO_ANSWER="contact_disable_audio_answer",et.CONTACT_ENABLE_AUDIO_REQUEST="contact_enable_audio_request",et.CONTACT_ENABLE_AUDIO_ANSWER="contact_enable_audio_answer",et.CONTACT_DISABLE_VIDEO_REQUEST="contact_disable_video_request",et.CONTACT_DISABLE_VIDEO_ANSWER="contact_disable_video_answer",et.CONTACT_ENABLE_VIDEO_REQUEST="contact_enable_video_request",et.CONTACT_ENABLE_VIDEO_ANSWER="contact_enable_video_answer",et.CONTACT_STREAM_UPDATED_INFO="contact_stream_updated_info",et.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER="contact_remote_access_invite",et.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER="contact_remote_access_answer",et.CONTACT_REMOTEACCESS_STOP_IDENTIFIER="contact_remote_access_stop",et.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE="contact_remote_access_app_status_message",et.CONTACT_REMOTEACCESS_APP_MESSAGE="contact_remote_access_app_message",et.CONVERSATION_ACCESS_GRANTED="GRANTED",et.CONVERSATION_NEED_MODERATOR_ACCEPTATION="NEED_MODERATOR_ACCEPTATION",et.CONVERSATION_ROLE_MODERATOR="moderator",et.CONVERSATION_ROLE_CONTRIBUTOR="contributor",et.CONVERSATION_ROLE_GUEST="guest",et.CONVERSATION_WAITING_ROOM_PREFIX="waiting-room-",et.CONVERSATION_SEND_DATA_IDENTIFIER="conv_data",et.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER="conv_persistent_data_update",et.CONVERSATION_JOIN_REQUEST_IDENTIFIER="conv_join_req",et.CONVERSATION_JOIN_ANSWER_IDENTIFIER="conv_join_ans",et.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER="conv_moderator_connected",et.CONVERSATION_NEW_MEDIA_IDENTIFIER="conv_new_media",et.CONVERSATION_CLOSED_IDENTIFIER="conv_closed",et.CONVERSATION_INVITATION_IDENTIFIER="conv_invite",et.INVITATION_ANSWER_IDENTIFIER="invite_ans",et.RECORD_BASE_URL="https://data2.apizee.com:10000/videoManager",et.RECORD_PLAY_URL=et.RECORD_BASE_URL+"?action=play&recordedFileName=",et.DEFAULT_MCU="mcu4.apizee.com",et.DEFAULT_TURNADDRESS="mp1.apizee.com",et.CALL_STATUS_WAITING_FOR_CALLEE=Symbol("CALL_STATUS_WAITING_FOR_CALLEE"),et.CALL_STATUS_ONGOING=Symbol("CALL_STATUS_ONGOING"),et.CALL_STATUS_ENDED=Symbol("CALL_STATUS_ENDED"),et.DATACHANNEL_STATUS_WAITING=Symbol("DATACHANNEL_STATUS_WAITING"),et.DATACHANNEL_STATUS_ONGOING=Symbol("DATACHANNEL_STATUS_ONGOING"),et.DATACHANNEL_STATUS_ENDED=Symbol("DATACHANNEL_STATUS_ENDED"),et.DATACHANNEL_TYPE_RECEIVE=Symbol("DATACHANNEL_TYPE_RECEIVE"),et.DATACHANNEL_TYPE_SEND=Symbol("DATACHANNEL_TYPE_SEND"),et.CONVERSATION_STATUS_JOINED=Symbol("CONVERSATION_STATUS_JOINED"),et.CONVERSATION_STATUS_NOT_JOINED=Symbol("CONVERSATION_STATUS_NOT_JOINED"),et.CONVERSATION_STATUS_WAITING=Symbol("CONVERSATION_STATUS_WAITING"),et.CONVERSATION_STATUS_JOINING=Symbol("CONVERSATION_STATUS_JOINING"),et.CONVERSATION_WHITEBOARD_STARTED=Symbol("CONVERSATION_WHITEBOARD_STARTED"),et.CONVERSATION_WHITEBOARD_NOT_STARTED=Symbol("CONVERSATION_WHITEBOARD_NOT_STARTED"),et.STATE_IDLE=Symbol("STATE_IDLE"),et.STATE_JOINING=Symbol("STATE_JOINING"),et.STATE_ACTIVE=Symbol("STATE_ACTIVE"),et.STATE_LEAVING=Symbol("STATE_LEAVING"),et.INVITATION_STATUS_ACCEPTED=Symbol("INVITATION_STATUS_ACCEPTED"),et.INVITATION_STATUS_DECLINED=Symbol("INVITATION_STATUS_DECLINED"),et.INVITATION_STATUS_STANDBY=Symbol("INVITATION_STATUS_STANDBY"),et.INVITATION_STATUS_EXPIRED=Symbol("INVITATION_STATUS_EXPIRED"),et.INVITATION_STATUS_CANCELLED=Symbol("INVITATION_STATUS_CANCELLED"),et.INVITATION_STATUS_ENDED=Symbol("INVITATION_STATUS_ENDED"),et.STREAM_TYPE_NO_INPUT="no_input",et.STREAM_TYPE_AUDIO="audio",et.STREAM_TYPE_VIDEO="video",et.STREAM_AUDIO_ANALYSIS_THRESHOLD=100,et.STREAM_AUDIO_NOISE_REDUCTION_VAI={soft:.7,medium:.8,hard:.9},et.CONTACT_DISCONNECTION_DELAY=1e4,et.CONVERSATION_JOIN_REQUEST_INTERVAL=5e3,et.APIRTC_MEDIA_DEVICE_DETECTION_DELAY=1e4,et.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY=5e3,et.CONVERSATION_WHITEBOARD_START_DELAY=5e3,et.CONVERSATION_RECORDING_STARTED_DELAY=1e4,et.CONVERSATION_RECORDING_STOPPED_DELAY=5e3,et.CONVERSATION_STREAMING_STARTED_DELAY=1e4,et.CONVERSATION_STREAMING_STOPPED_DELAY=1e4,et.CONVERSATION_PARTICIPANT_EJECTION_DELAY=5e3,et.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT=3e3},1215:(nt,it,s)=>{function et(dt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},et(dt)}function rt(dt,pt){return arguments.length===3?ot(arguments[0],arguments[1],arguments[2]):pt==="null"?dt===null:pt==="array"?dt!==null&&et(dt)==="object"&&Array.isArray(dt):dt!==null&&et(dt)===pt}function ot(dt,pt,st){if(pt!==null&&et(pt)==="object"&&Array.isArray(pt)&&pt.length>=1){var ht=pt[0];if(pt.length>1)return rt(dt,"object")&&rt(ht,"string")&&dt.hasOwnProperty(ht)&&rt(dt[ht],"object")&&ot(dt[ht],pt.slice(1),st);pt=ht}return st==="undefined"?rt(dt,"object")&&rt(pt,"string")&&!dt.hasOwnProperty(pt)&&rt(dt[pt],st):rt(dt,"object")&&rt(pt,"string")&&dt.hasOwnProperty(pt)&&rt(dt[pt],st)}s.d(it,{g:()=>gt}),s(4916),s(5306),s(3710),s(1539),s(9714),s(7941),s(9575),s(6716),s(9554),s(6992),s(1532),s(8783),s(3948),s(9753),s(7042),s(3843),s(2564),s(2526),s(1817),s(2165);var gt={assignObject:function(dt,pt){var st,ht,at;for(dt==null&&(dt={}),st=1;st<arguments.length;st+=1)for(ht in at=arguments[st])at.hasOwnProperty(ht)&&(dt[ht]=at[ht]);return dt},throttle:function(dt,pt){var st,ht,at,ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=null,mt=0,yt=function(){mt=ut.leading===!1?0:Date.now(),ft=null,at=dt.apply(st,ht),ft||(st=ht=null)};return function(){var At=Date.now();mt||ut.leading!==!1||(mt=At);var wt=pt-(At-mt);return st=this,ht=arguments,wt<=0||wt>pt?(ft&&(clearTimeout(ft),ft=null),mt=At,at=dt.apply(st,ht),ft||(st=ht=null)):ft||ut.trailing===!1||(ft=setTimeout(yt,wt)),at}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(dt){var pt=16*Math.random()|0;return(dt==="x"?pt:3&pt|8).toString(16)})},hashString:function(dt){for(var pt=0,st=0,ht=dt.length;st<ht;)pt=(pt<<5)-pt+dt.charCodeAt(st++)<<0;return Math.abs(pt)},arrayBuffertoString:function(dt){var pt=new DataView(dt);return new TextDecoder("utf-8").decode(pt)},getAudioContext:function(){return apiRTC.audioProcessor.getOrCreateAudioContext()},parseRecordingEvent:function(dt,pt){var st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return["roomName","callId","recordType","convId","mediaId","mediaURL","recordedFileName"].forEach(function(ht){pt.hasOwnProperty(ht)&&(st[ht]=String(pt[ht]))}),pt.mediaType==="AUDIO-ONLY"?(st.audioOnly=!0,st.videoOnly=!1):pt.mediaType==="VIDEO-ONLY"?(st.audioOnly=!1,st.videoOnly=!0):(st.audioOnly=!1,st.videoOnly=!1),st.recordType==="composite"&&(pt.hasOwnProperty("mode")?st.mode=pt.mode:st.mode="complete",pt.hasOwnProperty("labelEnabled")?(st.labelEnabled=pt.labelEnabled===!0,st.labelEnabled===!0&&pt.hasOwnProperty("labels")&&(st.labels=pt.labels)):st.labelEnabled=!1),st},paramsToQueryString:function(dt){for(var pt="",st=0,ht=Object.keys(dt);st<ht.length;st++){var at=ht[st];pt+=pt===""?"?":"&",dt[at]===null||dt[at]===void 0?console.warn("apiRTC Utils - paramsToQueryString : "+at+" is undefined!"):pt+=at+"="+dt[at].toString()}return pt},createError:function(dt,pt,st){var ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};st&&st.error(pt);var at={code:dt};return pt instanceof String?at.error=new Error(pt):pt instanceof Error?at.error=pt:at.error=new Error(String(pt)),rt(ht,"object")&&(ht.hasOwnProperty("fromError")&&(at.fromError=ht.fromError),ht.hasOwnProperty("httpCode")&&(at.httpCode=ht.httpCode)),at},isSet:function(dt){return dt!=null},isTypeof:rt,isPropertyTypeof:ot,_private:{dataCallsOnHold:new Map,dataChannelInvitations:new Map,dataCallsFileInfo:new Map}}},9662:(nt,it,s)=>{var et=s(614),rt=s(6330),ot=TypeError;nt.exports=function(gt){if(et(gt))return gt;throw ot(rt(gt)+" is not a function")}},9483:(nt,it,s)=>{var et=s(4411),rt=s(6330),ot=TypeError;nt.exports=function(gt){if(et(gt))return gt;throw ot(rt(gt)+" is not a constructor")}},6077:(nt,it,s)=>{var et=s(614),rt=String,ot=TypeError;nt.exports=function(gt){if(typeof gt=="object"||et(gt))return gt;throw ot("Can't set "+rt(gt)+" as a prototype")}},1223:(nt,it,s)=>{var et=s(5112),rt=s(30),ot=s(3070).f,gt=et("unscopables"),dt=Array.prototype;dt[gt]==null&&ot(dt,gt,{configurable:!0,value:rt(null)}),nt.exports=function(pt){dt[gt][pt]=!0}},1530:(nt,it,s)=>{var et=s(8710).charAt;nt.exports=function(rt,ot,gt){return ot+(gt?et(rt,ot).length:1)}},5787:(nt,it,s)=>{var et=s(7976),rt=TypeError;nt.exports=function(ot,gt){if(et(gt,ot))return ot;throw rt("Incorrect invocation")}},9670:(nt,it,s)=>{var et=s(111),rt=String,ot=TypeError;nt.exports=function(gt){if(et(gt))return gt;throw ot(rt(gt)+" is not an object")}},4019:nt=>{nt.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7556:(nt,it,s)=>{var et=s(7293);nt.exports=et(function(){if(typeof ArrayBuffer=="function"){var rt=new ArrayBuffer(8);Object.isExtensible(rt)&&Object.defineProperty(rt,"a",{value:8})}})},260:(nt,it,s)=>{var et,rt,ot,gt=s(4019),dt=s(9781),pt=s(7854),st=s(614),ht=s(111),at=s(2597),ut=s(648),ft=s(6330),mt=s(8880),yt=s(8052),At=s(3070).f,wt=s(7976),Pt=s(9518),Rt=s(7674),kt=s(5112),bt=s(9711),Nt=s(9909),Ft=Nt.enforce,Ut=Nt.get,Jt=pt.Int8Array,hn=Jt&&Jt.prototype,Xt=pt.Uint8ClampedArray,zt=Xt&&Xt.prototype,cn=Jt&&Pt(Jt),vn=hn&&Pt(hn),Sn=Object.prototype,fn=pt.TypeError,mn=kt("toStringTag"),bn=bt("TYPED_ARRAY_TAG"),un=gt&&!!Rt&&ut(pt.opera)!=="Opera",Tn=!1,kn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},xn={BigInt64Array:8,BigUint64Array:8},An=function(Rn){var wn=Pt(Rn);if(ht(wn)){var Dn=Ut(wn);return Dn&&at(Dn,"TypedArrayConstructor")?Dn.TypedArrayConstructor:An(wn)}},En=function(Rn){if(!ht(Rn))return!1;var wn=ut(Rn);return at(kn,wn)||at(xn,wn)};for(et in kn)(ot=(rt=pt[et])&&rt.prototype)?Ft(ot).TypedArrayConstructor=rt:un=!1;for(et in xn)(ot=(rt=pt[et])&&rt.prototype)&&(Ft(ot).TypedArrayConstructor=rt);if((!un||!st(cn)||cn===Function.prototype)&&(cn=function(){throw fn("Incorrect invocation")},un))for(et in kn)pt[et]&&Rt(pt[et],cn);if((!un||!vn||vn===Sn)&&(vn=cn.prototype,un))for(et in kn)pt[et]&&Rt(pt[et].prototype,vn);if(un&&Pt(zt)!==vn&&Rt(zt,vn),dt&&!at(vn,mn))for(et in Tn=!0,At(vn,mn,{get:function(){return ht(this)?this[bn]:void 0}}),kn)pt[et]&&mt(pt[et],bn,et);nt.exports={NATIVE_ARRAY_BUFFER_VIEWS:un,TYPED_ARRAY_TAG:Tn&&bn,aTypedArray:function(Rn){if(En(Rn))return Rn;throw fn("Target is not a typed array")},aTypedArrayConstructor:function(Rn){if(st(Rn)&&(!Rt||wt(cn,Rn)))return Rn;throw fn(ft(Rn)+" is not a typed array constructor")},exportTypedArrayMethod:function(Rn,wn,Dn,Bn){if(dt){if(Dn)for(var zn in kn){var Hn=pt[zn];if(Hn&&at(Hn.prototype,Rn))try{delete Hn.prototype[Rn]}catch{try{Hn.prototype[Rn]=wn}catch{}}}vn[Rn]&&!Dn||yt(vn,Rn,Dn?wn:un&&hn[Rn]||wn,Bn)}},exportTypedArrayStaticMethod:function(Rn,wn,Dn){var Bn,zn;if(dt){if(Rt){if(Dn){for(Bn in kn)if((zn=pt[Bn])&&at(zn,Rn))try{delete zn[Rn]}catch{}}if(cn[Rn]&&!Dn)return;try{return yt(cn,Rn,Dn?wn:un&&cn[Rn]||wn)}catch{}}for(Bn in kn)!(zn=pt[Bn])||zn[Rn]&&!Dn||yt(zn,Rn,wn)}},getTypedArrayConstructor:An,isView:function(Rn){if(!ht(Rn))return!1;var wn=ut(Rn);return wn==="DataView"||at(kn,wn)||at(xn,wn)},isTypedArray:En,TypedArray:cn,TypedArrayPrototype:vn}},3331:(nt,it,s)=>{var et=s(7854),rt=s(1702),ot=s(9781),gt=s(4019),dt=s(6530),pt=s(8880),st=s(9190),ht=s(7293),at=s(5787),ut=s(9303),ft=s(7466),mt=s(7067),yt=s(1179),At=s(9518),wt=s(7674),Pt=s(8006).f,Rt=s(3070).f,kt=s(1285),bt=s(1589),Nt=s(8003),Ft=s(9909),Ut=dt.PROPER,Jt=dt.CONFIGURABLE,hn=Ft.get,Xt=Ft.set,zt="ArrayBuffer",cn="Wrong index",vn=et.ArrayBuffer,Sn=vn,fn=Sn&&Sn.prototype,mn=et.DataView,bn=mn&&mn.prototype,un=Object.prototype,Tn=et.Array,kn=et.RangeError,xn=rt(kt),An=rt([].reverse),En=yt.pack,Rn=yt.unpack,wn=function(Cn){return[255&Cn]},Dn=function(Cn){return[255&Cn,Cn>>8&255]},Bn=function(Cn){return[255&Cn,Cn>>8&255,Cn>>16&255,Cn>>24&255]},zn=function(Cn){return Cn[3]<<24|Cn[2]<<16|Cn[1]<<8|Cn[0]},Hn=function(Cn){return En(Cn,23,4)},nr=function(Cn){return En(Cn,52,8)},sn=function(Cn,Mn){Rt(Cn.prototype,Mn,{get:function(){return hn(this)[Mn]}})},Gn=function(Cn,Mn,Kt,Ot){var lt=mt(Kt),Tt=hn(Cn);if(lt+Mn>Tt.byteLength)throw kn(cn);var It=hn(Tt.buffer).bytes,Dt=lt+Tt.byteOffset,Et=bt(It,Dt,Dt+Mn);return Ot?Et:An(Et)},Zn=function(Cn,Mn,Kt,Ot,lt,Tt){var It=mt(Kt),Dt=hn(Cn);if(It+Mn>Dt.byteLength)throw kn(cn);for(var Et=hn(Dt.buffer).bytes,$t=It+Dt.byteOffset,xt=Ot(+lt),Vt=0;Vt<Mn;Vt++)Et[$t+Vt]=xt[Tt?Vt:Mn-Vt-1]};if(gt){var rr=Ut&&vn.name!==zt;if(ht(function(){vn(1)})&&ht(function(){new vn(-1)})&&!ht(function(){return new vn,new vn(1.5),new vn(NaN),rr&&!Jt}))rr&&Jt&&pt(vn,"name",zt);else{(Sn=function(Cn){return at(this,fn),new vn(mt(Cn))}).prototype=fn;for(var Fn,Xn=Pt(vn),Yn=0;Xn.length>Yn;)(Fn=Xn[Yn++])in Sn||pt(Sn,Fn,vn[Fn]);fn.constructor=Sn}wt&&At(bn)!==un&&wt(bn,un);var Nn=new mn(new Sn(2)),Un=rt(bn.setInt8);Nn.setInt8(0,2147483648),Nn.setInt8(1,2147483649),!Nn.getInt8(0)&&Nn.getInt8(1)||st(bn,{setInt8:function(Cn,Mn){Un(this,Cn,Mn<<24>>24)},setUint8:function(Cn,Mn){Un(this,Cn,Mn<<24>>24)}},{unsafe:!0})}else fn=(Sn=function(Cn){at(this,fn);var Mn=mt(Cn);Xt(this,{bytes:xn(Tn(Mn),0),byteLength:Mn}),ot||(this.byteLength=Mn)}).prototype,bn=(mn=function(Cn,Mn,Kt){at(this,bn),at(Cn,fn);var Ot=hn(Cn).byteLength,lt=ut(Mn);if(lt<0||lt>Ot)throw kn("Wrong offset");if(lt+(Kt=Kt===void 0?Ot-lt:ft(Kt))>Ot)throw kn("Wrong length");Xt(this,{buffer:Cn,byteLength:Kt,byteOffset:lt}),ot||(this.buffer=Cn,this.byteLength=Kt,this.byteOffset=lt)}).prototype,ot&&(sn(Sn,"byteLength"),sn(mn,"buffer"),sn(mn,"byteLength"),sn(mn,"byteOffset")),st(bn,{getInt8:function(Cn){return Gn(this,1,Cn)[0]<<24>>24},getUint8:function(Cn){return Gn(this,1,Cn)[0]},getInt16:function(Cn){var Mn=Gn(this,2,Cn,arguments.length>1?arguments[1]:void 0);return(Mn[1]<<8|Mn[0])<<16>>16},getUint16:function(Cn){var Mn=Gn(this,2,Cn,arguments.length>1?arguments[1]:void 0);return Mn[1]<<8|Mn[0]},getInt32:function(Cn){return zn(Gn(this,4,Cn,arguments.length>1?arguments[1]:void 0))},getUint32:function(Cn){return zn(Gn(this,4,Cn,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(Cn){return Rn(Gn(this,4,Cn,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(Cn){return Rn(Gn(this,8,Cn,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(Cn,Mn){Zn(this,1,Cn,wn,Mn)},setUint8:function(Cn,Mn){Zn(this,1,Cn,wn,Mn)},setInt16:function(Cn,Mn){Zn(this,2,Cn,Dn,Mn,arguments.length>2?arguments[2]:void 0)},setUint16:function(Cn,Mn){Zn(this,2,Cn,Dn,Mn,arguments.length>2?arguments[2]:void 0)},setInt32:function(Cn,Mn){Zn(this,4,Cn,Bn,Mn,arguments.length>2?arguments[2]:void 0)},setUint32:function(Cn,Mn){Zn(this,4,Cn,Bn,Mn,arguments.length>2?arguments[2]:void 0)},setFloat32:function(Cn,Mn){Zn(this,4,Cn,Hn,Mn,arguments.length>2?arguments[2]:void 0)},setFloat64:function(Cn,Mn){Zn(this,8,Cn,nr,Mn,arguments.length>2?arguments[2]:void 0)}});Nt(Sn,zt),Nt(mn,"DataView"),nt.exports={ArrayBuffer:Sn,DataView:mn}},1048:(nt,it,s)=>{var et=s(7908),rt=s(1400),ot=s(6244),gt=s(5117),dt=Math.min;nt.exports=[].copyWithin||function(pt,st){var ht=et(this),at=ot(ht),ut=rt(pt,at),ft=rt(st,at),mt=arguments.length>2?arguments[2]:void 0,yt=dt((mt===void 0?at:rt(mt,at))-ft,at-ut),At=1;for(ft<ut&&ut<ft+yt&&(At=-1,ft+=yt-1,ut+=yt-1);yt-- >0;)ft in ht?ht[ut]=ht[ft]:gt(ht,ut),ut+=At,ft+=At;return ht}},1285:(nt,it,s)=>{var et=s(7908),rt=s(1400),ot=s(6244);nt.exports=function(gt){for(var dt=et(this),pt=ot(dt),st=arguments.length,ht=rt(st>1?arguments[1]:void 0,pt),at=st>2?arguments[2]:void 0,ut=at===void 0?pt:rt(at,pt);ut>ht;)dt[ht++]=gt;return dt}},8533:(nt,it,s)=>{var et=s(2092).forEach,rt=s(9341)("forEach");nt.exports=rt?[].forEach:function(ot){return et(this,ot,arguments.length>1?arguments[1]:void 0)}},7745:(nt,it,s)=>{var et=s(6244);nt.exports=function(rt,ot){for(var gt=0,dt=et(ot),pt=new rt(dt);dt>gt;)pt[gt]=ot[gt++];return pt}},8457:(nt,it,s)=>{var et=s(9974),rt=s(6916),ot=s(7908),gt=s(3411),dt=s(7659),pt=s(4411),st=s(6244),ht=s(6135),at=s(8554),ut=s(1246),ft=Array;nt.exports=function(mt){var yt=ot(mt),At=pt(this),wt=arguments.length,Pt=wt>1?arguments[1]:void 0,Rt=Pt!==void 0;Rt&&(Pt=et(Pt,wt>2?arguments[2]:void 0));var kt,bt,Nt,Ft,Ut,Jt,hn=ut(yt),Xt=0;if(!hn||this===ft&&dt(hn))for(kt=st(yt),bt=At?new this(kt):ft(kt);kt>Xt;Xt++)Jt=Rt?Pt(yt[Xt],Xt):yt[Xt],ht(bt,Xt,Jt);else for(Ut=(Ft=at(yt,hn)).next,bt=At?new this:[];!(Nt=rt(Ut,Ft)).done;Xt++)Jt=Rt?gt(Ft,Pt,[Nt.value,Xt],!0):Nt.value,ht(bt,Xt,Jt);return bt.length=Xt,bt}},1318:(nt,it,s)=>{var et=s(5656),rt=s(1400),ot=s(6244),gt=function(dt){return function(pt,st,ht){var at,ut=et(pt),ft=ot(ut),mt=rt(ht,ft);if(dt&&st!=st){for(;ft>mt;)if((at=ut[mt++])!=at)return!0}else for(;ft>mt;mt++)if((dt||mt in ut)&&ut[mt]===st)return dt||mt||0;return!dt&&-1}};nt.exports={includes:gt(!0),indexOf:gt(!1)}},2092:(nt,it,s)=>{var et=s(9974),rt=s(1702),ot=s(8361),gt=s(7908),dt=s(6244),pt=s(5417),st=rt([].push),ht=function(at){var ut=at==1,ft=at==2,mt=at==3,yt=at==4,At=at==6,wt=at==7,Pt=at==5||At;return function(Rt,kt,bt,Nt){for(var Ft,Ut,Jt=gt(Rt),hn=ot(Jt),Xt=et(kt,bt),zt=dt(hn),cn=0,vn=Nt||pt,Sn=ut?vn(Rt,zt):ft||wt?vn(Rt,0):void 0;zt>cn;cn++)if((Pt||cn in hn)&&(Ut=Xt(Ft=hn[cn],cn,Jt),at))if(ut)Sn[cn]=Ut;else if(Ut)switch(at){case 3:return!0;case 5:return Ft;case 6:return cn;case 2:st(Sn,Ft)}else switch(at){case 4:return!1;case 7:st(Sn,Ft)}return At?-1:mt||yt?yt:Sn}};nt.exports={forEach:ht(0),map:ht(1),filter:ht(2),some:ht(3),every:ht(4),find:ht(5),findIndex:ht(6),filterReject:ht(7)}},6583:(nt,it,s)=>{var et=s(2104),rt=s(5656),ot=s(9303),gt=s(6244),dt=s(9341),pt=Math.min,st=[].lastIndexOf,ht=!!st&&1/[1].lastIndexOf(1,-0)<0,at=dt("lastIndexOf"),ut=ht||!at;nt.exports=ut?function(ft){if(ht)return et(st,this,arguments)||0;var mt=rt(this),yt=gt(mt),At=yt-1;for(arguments.length>1&&(At=pt(At,ot(arguments[1]))),At<0&&(At=yt+At);At>=0;At--)if(At in mt&&mt[At]===ft)return At||0;return-1}:st},1194:(nt,it,s)=>{var et=s(7293),rt=s(5112),ot=s(7392),gt=rt("species");nt.exports=function(dt){return ot>=51||!et(function(){var pt=[];return(pt.constructor={})[gt]=function(){return{foo:1}},pt[dt](Boolean).foo!==1})}},9341:(nt,it,s)=>{var et=s(7293);nt.exports=function(rt,ot){var gt=[][rt];return!!gt&&et(function(){gt.call(null,ot||function(){return 1},1)})}},3671:(nt,it,s)=>{var et=s(9662),rt=s(7908),ot=s(8361),gt=s(6244),dt=TypeError,pt=function(st){return function(ht,at,ut,ft){et(at);var mt=rt(ht),yt=ot(mt),At=gt(mt),wt=st?At-1:0,Pt=st?-1:1;if(ut<2)for(;;){if(wt in yt){ft=yt[wt],wt+=Pt;break}if(wt+=Pt,st?wt<0:At<=wt)throw dt("Reduce of empty array with no initial value")}for(;st?wt>=0:At>wt;wt+=Pt)wt in yt&&(ft=at(ft,yt[wt],wt,mt));return ft}};nt.exports={left:pt(!1),right:pt(!0)}},1589:(nt,it,s)=>{var et=s(1400),rt=s(6244),ot=s(6135),gt=Array,dt=Math.max;nt.exports=function(pt,st,ht){for(var at=rt(pt),ut=et(st,at),ft=et(ht===void 0?at:ht,at),mt=gt(dt(ft-ut,0)),yt=0;ut<ft;ut++,yt++)ot(mt,yt,pt[ut]);return mt.length=yt,mt}},206:(nt,it,s)=>{var et=s(1702);nt.exports=et([].slice)},4362:(nt,it,s)=>{var et=s(1589),rt=Math.floor,ot=function(pt,st){var ht=pt.length,at=rt(ht/2);return ht<8?gt(pt,st):dt(pt,ot(et(pt,0,at),st),ot(et(pt,at),st),st)},gt=function(pt,st){for(var ht,at,ut=pt.length,ft=1;ft<ut;){for(at=ft,ht=pt[ft];at&&st(pt[at-1],ht)>0;)pt[at]=pt[--at];at!==ft++&&(pt[at]=ht)}return pt},dt=function(pt,st,ht,at){for(var ut=st.length,ft=ht.length,mt=0,yt=0;mt<ut||yt<ft;)pt[mt+yt]=mt<ut&&yt<ft?at(st[mt],ht[yt])<=0?st[mt++]:ht[yt++]:mt<ut?st[mt++]:ht[yt++];return pt};nt.exports=ot},7475:(nt,it,s)=>{var et=s(3157),rt=s(4411),ot=s(111),gt=s(5112)("species"),dt=Array;nt.exports=function(pt){var st;return et(pt)&&(st=pt.constructor,(rt(st)&&(st===dt||et(st.prototype))||ot(st)&&(st=st[gt])===null)&&(st=void 0)),st===void 0?dt:st}},5417:(nt,it,s)=>{var et=s(7475);nt.exports=function(rt,ot){return new(et(rt))(ot===0?0:ot)}},3411:(nt,it,s)=>{var et=s(9670),rt=s(9212);nt.exports=function(ot,gt,dt,pt){try{return pt?gt(et(dt)[0],dt[1]):gt(dt)}catch(st){rt(ot,"throw",st)}}},7072:(nt,it,s)=>{var et=s(5112)("iterator"),rt=!1;try{var ot=0,gt={next:function(){return{done:!!ot++}},return:function(){rt=!0}};gt[et]=function(){return this},Array.from(gt,function(){throw 2})}catch{}nt.exports=function(dt,pt){if(!pt&&!rt)return!1;var st=!1;try{var ht={};ht[et]=function(){return{next:function(){return{done:st=!0}}}},dt(ht)}catch{}return st}},4326:(nt,it,s)=>{var et=s(1702),rt=et({}.toString),ot=et("".slice);nt.exports=function(gt){return ot(rt(gt),8,-1)}},648:(nt,it,s)=>{var et=s(1694),rt=s(614),ot=s(4326),gt=s(5112)("toStringTag"),dt=Object,pt=ot(function(){return arguments}())=="Arguments";nt.exports=et?ot:function(st){var ht,at,ut;return st===void 0?"Undefined":st===null?"Null":typeof(at=function(ft,mt){try{return ft[mt]}catch{}}(ht=dt(st),gt))=="string"?at:pt?ot(ht):(ut=ot(ht))=="Object"&&rt(ht.callee)?"Arguments":ut}},5631:(nt,it,s)=>{var et=s(3070).f,rt=s(30),ot=s(9190),gt=s(9974),dt=s(5787),pt=s(408),st=s(654),ht=s(6340),at=s(9781),ut=s(2423).fastKey,ft=s(9909),mt=ft.set,yt=ft.getterFor;nt.exports={getConstructor:function(At,wt,Pt,Rt){var kt=At(function(Jt,hn){dt(Jt,bt),mt(Jt,{type:wt,index:rt(null),first:void 0,last:void 0,size:0}),at||(Jt.size=0),hn!=null&&pt(hn,Jt[Rt],{that:Jt,AS_ENTRIES:Pt})}),bt=kt.prototype,Nt=yt(wt),Ft=function(Jt,hn,Xt){var zt,cn,vn=Nt(Jt),Sn=Ut(Jt,hn);return Sn?Sn.value=Xt:(vn.last=Sn={index:cn=ut(hn,!0),key:hn,value:Xt,previous:zt=vn.last,next:void 0,removed:!1},vn.first||(vn.first=Sn),zt&&(zt.next=Sn),at?vn.size++:Jt.size++,cn!=="F"&&(vn.index[cn]=Sn)),Jt},Ut=function(Jt,hn){var Xt,zt=Nt(Jt),cn=ut(hn);if(cn!=="F")return zt.index[cn];for(Xt=zt.first;Xt;Xt=Xt.next)if(Xt.key==hn)return Xt};return ot(bt,{clear:function(){for(var Jt=Nt(this),hn=Jt.index,Xt=Jt.first;Xt;)Xt.removed=!0,Xt.previous&&(Xt.previous=Xt.previous.next=void 0),delete hn[Xt.index],Xt=Xt.next;Jt.first=Jt.last=void 0,at?Jt.size=0:this.size=0},delete:function(Jt){var hn=this,Xt=Nt(hn),zt=Ut(hn,Jt);if(zt){var cn=zt.next,vn=zt.previous;delete Xt.index[zt.index],zt.removed=!0,vn&&(vn.next=cn),cn&&(cn.previous=vn),Xt.first==zt&&(Xt.first=cn),Xt.last==zt&&(Xt.last=vn),at?Xt.size--:hn.size--}return!!zt},forEach:function(Jt){for(var hn,Xt=Nt(this),zt=gt(Jt,arguments.length>1?arguments[1]:void 0);hn=hn?hn.next:Xt.first;)for(zt(hn.value,hn.key,this);hn&&hn.removed;)hn=hn.previous},has:function(Jt){return!!Ut(this,Jt)}}),ot(bt,Pt?{get:function(Jt){var hn=Ut(this,Jt);return hn&&hn.value},set:function(Jt,hn){return Ft(this,Jt===0?0:Jt,hn)}}:{add:function(Jt){return Ft(this,Jt=Jt===0?0:Jt,Jt)}}),at&&et(bt,"size",{get:function(){return Nt(this).size}}),kt},setStrong:function(At,wt,Pt){var Rt=wt+" Iterator",kt=yt(wt),bt=yt(Rt);st(At,wt,function(Nt,Ft){mt(this,{type:Rt,target:Nt,state:kt(Nt),kind:Ft,last:void 0})},function(){for(var Nt=bt(this),Ft=Nt.kind,Ut=Nt.last;Ut&&Ut.removed;)Ut=Ut.previous;return Nt.target&&(Nt.last=Ut=Ut?Ut.next:Nt.state.first)?Ft=="keys"?{value:Ut.key,done:!1}:Ft=="values"?{value:Ut.value,done:!1}:{value:[Ut.key,Ut.value],done:!1}:(Nt.target=void 0,{value:void 0,done:!0})},Pt?"entries":"values",!Pt,!0),ht(wt)}}},9320:(nt,it,s)=>{var et=s(1702),rt=s(9190),ot=s(2423).getWeakData,gt=s(9670),dt=s(111),pt=s(5787),st=s(408),ht=s(2092),at=s(2597),ut=s(9909),ft=ut.set,mt=ut.getterFor,yt=ht.find,At=ht.findIndex,wt=et([].splice),Pt=0,Rt=function(Nt){return Nt.frozen||(Nt.frozen=new kt)},kt=function(){this.entries=[]},bt=function(Nt,Ft){return yt(Nt.entries,function(Ut){return Ut[0]===Ft})};kt.prototype={get:function(Nt){var Ft=bt(this,Nt);if(Ft)return Ft[1]},has:function(Nt){return!!bt(this,Nt)},set:function(Nt,Ft){var Ut=bt(this,Nt);Ut?Ut[1]=Ft:this.entries.push([Nt,Ft])},delete:function(Nt){var Ft=At(this.entries,function(Ut){return Ut[0]===Nt});return~Ft&&wt(this.entries,Ft,1),!!~Ft}},nt.exports={getConstructor:function(Nt,Ft,Ut,Jt){var hn=Nt(function(vn,Sn){pt(vn,Xt),ft(vn,{type:Ft,id:Pt++,frozen:void 0}),Sn!=null&&st(Sn,vn[Jt],{that:vn,AS_ENTRIES:Ut})}),Xt=hn.prototype,zt=mt(Ft),cn=function(vn,Sn,fn){var mn=zt(vn),bn=ot(gt(Sn),!0);return bn===!0?Rt(mn).set(Sn,fn):bn[mn.id]=fn,vn};return rt(Xt,{delete:function(vn){var Sn=zt(this);if(!dt(vn))return!1;var fn=ot(vn);return fn===!0?Rt(Sn).delete(vn):fn&&at(fn,Sn.id)&&delete fn[Sn.id]},has:function(vn){var Sn=zt(this);if(!dt(vn))return!1;var fn=ot(vn);return fn===!0?Rt(Sn).has(vn):fn&&at(fn,Sn.id)}}),rt(Xt,Ut?{get:function(vn){var Sn=zt(this);if(dt(vn)){var fn=ot(vn);return fn===!0?Rt(Sn).get(vn):fn?fn[Sn.id]:void 0}},set:function(vn,Sn){return cn(this,vn,Sn)}}:{add:function(vn){return cn(this,vn,!0)}}),hn}}},7710:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(1702),gt=s(4705),dt=s(8052),pt=s(2423),st=s(408),ht=s(5787),at=s(614),ut=s(111),ft=s(7293),mt=s(7072),yt=s(8003),At=s(9587);nt.exports=function(wt,Pt,Rt){var kt=wt.indexOf("Map")!==-1,bt=wt.indexOf("Weak")!==-1,Nt=kt?"set":"add",Ft=rt[wt],Ut=Ft&&Ft.prototype,Jt=Ft,hn={},Xt=function(mn){var bn=ot(Ut[mn]);dt(Ut,mn,mn=="add"?function(un){return bn(this,un===0?0:un),this}:mn=="delete"?function(un){return!(bt&&!ut(un))&&bn(this,un===0?0:un)}:mn=="get"?function(un){return bt&&!ut(un)?void 0:bn(this,un===0?0:un)}:mn=="has"?function(un){return!(bt&&!ut(un))&&bn(this,un===0?0:un)}:function(un,Tn){return bn(this,un===0?0:un,Tn),this})};if(gt(wt,!at(Ft)||!(bt||Ut.forEach&&!ft(function(){new Ft().entries().next()}))))Jt=Rt.getConstructor(Pt,wt,kt,Nt),pt.enable();else if(gt(wt,!0)){var zt=new Jt,cn=zt[Nt](bt?{}:-0,1)!=zt,vn=ft(function(){zt.has(1)}),Sn=mt(function(mn){new Ft(mn)}),fn=!bt&&ft(function(){for(var mn=new Ft,bn=5;bn--;)mn[Nt](bn,bn);return!mn.has(-0)});Sn||((Jt=Pt(function(mn,bn){ht(mn,Ut);var un=At(new Ft,mn,Jt);return bn!=null&&st(bn,un[Nt],{that:un,AS_ENTRIES:kt}),un})).prototype=Ut,Ut.constructor=Jt),(vn||fn)&&(Xt("delete"),Xt("has"),kt&&Xt("get")),(fn||cn)&&Xt(Nt),bt&&Ut.clear&&delete Ut.clear}return hn[wt]=Jt,et({global:!0,constructor:!0,forced:Jt!=Ft},hn),yt(Jt,wt),bt||Rt.setStrong(Jt,wt,kt),Jt}},9920:(nt,it,s)=>{var et=s(2597),rt=s(3887),ot=s(1236),gt=s(3070);nt.exports=function(dt,pt,st){for(var ht=rt(pt),at=gt.f,ut=ot.f,ft=0;ft<ht.length;ft++){var mt=ht[ft];et(dt,mt)||st&&et(st,mt)||at(dt,mt,ut(pt,mt))}}},4964:(nt,it,s)=>{var et=s(5112)("match");nt.exports=function(rt){var ot=/./;try{"/./"[rt](ot)}catch{try{return ot[et]=!1,"/./"[rt](ot)}catch{}}return!1}},8544:(nt,it,s)=>{var et=s(7293);nt.exports=!et(function(){function rt(){}return rt.prototype.constructor=null,Object.getPrototypeOf(new rt)!==rt.prototype})},4994:(nt,it,s)=>{var et=s(3383).IteratorPrototype,rt=s(30),ot=s(9114),gt=s(8003),dt=s(7497),pt=function(){return this};nt.exports=function(st,ht,at,ut){var ft=ht+" Iterator";return st.prototype=rt(et,{next:ot(+!ut,at)}),gt(st,ft,!1,!0),dt[ft]=pt,st}},8880:(nt,it,s)=>{var et=s(9781),rt=s(3070),ot=s(9114);nt.exports=et?function(gt,dt,pt){return rt.f(gt,dt,ot(1,pt))}:function(gt,dt,pt){return gt[dt]=pt,gt}},9114:nt=>{nt.exports=function(it,s){return{enumerable:!(1&it),configurable:!(2&it),writable:!(4&it),value:s}}},6135:(nt,it,s)=>{var et=s(4948),rt=s(3070),ot=s(9114);nt.exports=function(gt,dt,pt){var st=et(dt);st in gt?rt.f(gt,st,ot(0,pt)):gt[st]=pt}},5573:(nt,it,s)=>{var et=s(1702),rt=s(7293),ot=s(6650).start,gt=RangeError,dt=Math.abs,pt=Date.prototype,st=pt.toISOString,ht=et(pt.getTime),at=et(pt.getUTCDate),ut=et(pt.getUTCFullYear),ft=et(pt.getUTCHours),mt=et(pt.getUTCMilliseconds),yt=et(pt.getUTCMinutes),At=et(pt.getUTCMonth),wt=et(pt.getUTCSeconds);nt.exports=rt(function(){return st.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!rt(function(){st.call(new Date(NaN))})?function(){if(!isFinite(ht(this)))throw gt("Invalid time value");var Pt=this,Rt=ut(Pt),kt=mt(Pt),bt=Rt<0?"-":Rt>9999?"+":"";return bt+ot(dt(Rt),bt?6:4,0)+"-"+ot(At(Pt)+1,2,0)+"-"+ot(at(Pt),2,0)+"T"+ot(ft(Pt),2,0)+":"+ot(yt(Pt),2,0)+":"+ot(wt(Pt),2,0)+"."+ot(kt,3,0)+"Z"}:st},7045:(nt,it,s)=>{var et=s(6339),rt=s(3070);nt.exports=function(ot,gt,dt){return dt.get&&et(dt.get,gt,{getter:!0}),dt.set&&et(dt.set,gt,{setter:!0}),rt.f(ot,gt,dt)}},8052:(nt,it,s)=>{var et=s(614),rt=s(3070),ot=s(6339),gt=s(3072);nt.exports=function(dt,pt,st,ht){ht||(ht={});var at=ht.enumerable,ut=ht.name!==void 0?ht.name:pt;if(et(st)&&ot(st,ut,ht),ht.global)at?dt[pt]=st:gt(pt,st);else{try{ht.unsafe?dt[pt]&&(at=!0):delete dt[pt]}catch{}at?dt[pt]=st:rt.f(dt,pt,{value:st,enumerable:!1,configurable:!ht.nonConfigurable,writable:!ht.nonWritable})}return dt}},9190:(nt,it,s)=>{var et=s(8052);nt.exports=function(rt,ot,gt){for(var dt in ot)et(rt,dt,ot[dt],gt);return rt}},3072:(nt,it,s)=>{var et=s(7854),rt=Object.defineProperty;nt.exports=function(ot,gt){try{rt(et,ot,{value:gt,configurable:!0,writable:!0})}catch{et[ot]=gt}return gt}},654:(nt,it,s)=>{var et=s(2109),rt=s(6916),ot=s(1913),gt=s(6530),dt=s(614),pt=s(4994),st=s(9518),ht=s(7674),at=s(8003),ut=s(8880),ft=s(8052),mt=s(5112),yt=s(7497),At=s(3383),wt=gt.PROPER,Pt=gt.CONFIGURABLE,Rt=At.IteratorPrototype,kt=At.BUGGY_SAFARI_ITERATORS,bt=mt("iterator"),Nt="keys",Ft="values",Ut="entries",Jt=function(){return this};nt.exports=function(hn,Xt,zt,cn,vn,Sn,fn){pt(zt,Xt,cn);var mn,bn,un,Tn=function(Dn){if(Dn===vn&&Rn)return Rn;if(!kt&&Dn in An)return An[Dn];switch(Dn){case Nt:case Ft:case Ut:return function(){return new zt(this,Dn)}}return function(){return new zt(this)}},kn=Xt+" Iterator",xn=!1,An=hn.prototype,En=An[bt]||An["@@iterator"]||vn&&An[vn],Rn=!kt&&En||Tn(vn),wn=Xt=="Array"&&An.entries||En;if(wn&&(mn=st(wn.call(new hn)))!==Object.prototype&&mn.next&&(ot||st(mn)===Rt||(ht?ht(mn,Rt):dt(mn[bt])||ft(mn,bt,Jt)),at(mn,kn,!0,!0),ot&&(yt[kn]=Jt)),wt&&vn==Ft&&En&&En.name!==Ft&&(!ot&&Pt?ut(An,"name",Ft):(xn=!0,Rn=function(){return rt(En,this)})),vn)if(bn={values:Tn(Ft),keys:Sn?Rn:Tn(Nt),entries:Tn(Ut)},fn)for(un in bn)(kt||xn||!(un in An))&&ft(An,un,bn[un]);else et({target:Xt,proto:!0,forced:kt||xn},bn);return ot&&!fn||An[bt]===Rn||ft(An,bt,Rn,{name:vn}),yt[Xt]=Rn,bn}},7235:(nt,it,s)=>{var et=s(857),rt=s(2597),ot=s(6061),gt=s(3070).f;nt.exports=function(dt){var pt=et.Symbol||(et.Symbol={});rt(pt,dt)||gt(pt,dt,{value:ot.f(dt)})}},5117:(nt,it,s)=>{var et=s(6330),rt=TypeError;nt.exports=function(ot,gt){if(!delete ot[gt])throw rt("Cannot delete property "+et(gt)+" of "+et(ot))}},9781:(nt,it,s)=>{var et=s(7293);nt.exports=!et(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(nt,it,s)=>{var et=s(7854),rt=s(111),ot=et.document,gt=rt(ot)&&rt(ot.createElement);nt.exports=function(dt){return gt?ot.createElement(dt):{}}},7207:nt=>{var it=TypeError;nt.exports=function(s){if(s>9007199254740991)throw it("Maximum allowed index exceeded");return s}},8324:nt=>{nt.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(nt,it,s)=>{var et=s(317)("span").classList,rt=et&&et.constructor&&et.constructor.prototype;nt.exports=rt===Object.prototype?void 0:rt},8886:(nt,it,s)=>{var et=s(8113).match(/firefox\/(\d+)/i);nt.exports=!!et&&+et[1]},7871:nt=>{nt.exports=typeof window=="object"&&typeof Deno!="object"},256:(nt,it,s)=>{var et=s(8113);nt.exports=/MSIE|Trident/.test(et)},1528:(nt,it,s)=>{var et=s(8113),rt=s(7854);nt.exports=/ipad|iphone|ipod/i.test(et)&&rt.Pebble!==void 0},6833:(nt,it,s)=>{var et=s(8113);nt.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(et)},2805:(nt,it,s)=>{var et=s(4326),rt=s(7854);nt.exports=et(rt.process)=="process"},1036:(nt,it,s)=>{var et=s(8113);nt.exports=/web0s(?!.*chrome)/i.test(et)},8113:(nt,it,s)=>{var et=s(5005);nt.exports=et("navigator","userAgent")||""},7392:(nt,it,s)=>{var et,rt,ot=s(7854),gt=s(8113),dt=ot.process,pt=ot.Deno,st=dt&&dt.versions||pt&&pt.version,ht=st&&st.v8;ht&&(rt=(et=ht.split("."))[0]>0&&et[0]<4?1:+(et[0]+et[1])),!rt&&gt&&(!(et=gt.match(/Edge\/(\d+)/))||et[1]>=74)&&(et=gt.match(/Chrome\/(\d+)/))&&(rt=+et[1]),nt.exports=rt},8008:(nt,it,s)=>{var et=s(8113).match(/AppleWebKit\/(\d+)\./);nt.exports=!!et&&+et[1]},748:nt=>{nt.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(nt,it,s)=>{var et=s(7854),rt=s(1236).f,ot=s(8880),gt=s(8052),dt=s(3072),pt=s(9920),st=s(4705);nt.exports=function(ht,at){var ut,ft,mt,yt,At,wt=ht.target,Pt=ht.global,Rt=ht.stat;if(ut=Pt?et:Rt?et[wt]||dt(wt,{}):(et[wt]||{}).prototype)for(ft in at){if(yt=at[ft],mt=ht.dontCallGetSet?(At=rt(ut,ft))&&At.value:ut[ft],!st(Pt?ft:wt+(Rt?".":"#")+ft,ht.forced)&&mt!==void 0){if(typeof yt==typeof mt)continue;pt(yt,mt)}(ht.sham||mt&&mt.sham)&&ot(yt,"sham",!0),gt(ut,ft,yt,ht)}}},7293:nt=>{nt.exports=function(it){try{return!!it()}catch{return!0}}},7007:(nt,it,s)=>{s(4916);var et=s(1702),rt=s(8052),ot=s(2261),gt=s(7293),dt=s(5112),pt=s(8880),st=dt("species"),ht=RegExp.prototype;nt.exports=function(at,ut,ft,mt){var yt=dt(at),At=!gt(function(){var kt={};return kt[yt]=function(){return 7},""[at](kt)!=7}),wt=At&&!gt(function(){var kt=!1,bt=/a/;return at==="split"&&((bt={}).constructor={},bt.constructor[st]=function(){return bt},bt.flags="",bt[yt]=/./[yt]),bt.exec=function(){return kt=!0,null},bt[yt](""),!kt});if(!At||!wt||ft){var Pt=et(/./[yt]),Rt=ut(yt,""[at],function(kt,bt,Nt,Ft,Ut){var Jt=et(kt),hn=bt.exec;return hn===ot||hn===ht.exec?At&&!Ut?{done:!0,value:Pt(bt,Nt,Ft)}:{done:!0,value:Jt(Nt,bt,Ft)}:{done:!1}});rt(String.prototype,at,Rt[0]),rt(ht,yt,Rt[1])}mt&&pt(ht[yt],"sham",!0)}},6677:(nt,it,s)=>{var et=s(7293);nt.exports=!et(function(){return Object.isExtensible(Object.preventExtensions({}))})},2104:(nt,it,s)=>{var et=s(4374),rt=Function.prototype,ot=rt.apply,gt=rt.call;nt.exports=typeof Reflect=="object"&&Reflect.apply||(et?gt.bind(ot):function(){return gt.apply(ot,arguments)})},9974:(nt,it,s)=>{var et=s(1702),rt=s(9662),ot=s(4374),gt=et(et.bind);nt.exports=function(dt,pt){return rt(dt),pt===void 0?dt:ot?gt(dt,pt):function(){return dt.apply(pt,arguments)}}},4374:(nt,it,s)=>{var et=s(7293);nt.exports=!et(function(){var rt=(function(){}).bind();return typeof rt!="function"||rt.hasOwnProperty("prototype")})},7065:(nt,it,s)=>{var et=s(1702),rt=s(9662),ot=s(111),gt=s(2597),dt=s(206),pt=s(4374),st=Function,ht=et([].concat),at=et([].join),ut={},ft=function(mt,yt,At){if(!gt(ut,yt)){for(var wt=[],Pt=0;Pt<yt;Pt++)wt[Pt]="a["+Pt+"]";ut[yt]=st("C,a","return new C("+at(wt,",")+")")}return ut[yt](mt,At)};nt.exports=pt?st.bind:function(mt){var yt=rt(this),At=yt.prototype,wt=dt(arguments,1),Pt=function(){var Rt=ht(wt,dt(arguments));return this instanceof Pt?ft(yt,Rt.length,Rt):yt.apply(mt,Rt)};return ot(At)&&(Pt.prototype=At),Pt}},6916:(nt,it,s)=>{var et=s(4374),rt=Function.prototype.call;nt.exports=et?rt.bind(rt):function(){return rt.apply(rt,arguments)}},6530:(nt,it,s)=>{var et=s(9781),rt=s(2597),ot=Function.prototype,gt=et&&Object.getOwnPropertyDescriptor,dt=rt(ot,"name"),pt=dt&&(function(){}).name==="something",st=dt&&(!et||et&&gt(ot,"name").configurable);nt.exports={EXISTS:dt,PROPER:pt,CONFIGURABLE:st}},1702:(nt,it,s)=>{var et=s(4374),rt=Function.prototype,ot=rt.bind,gt=rt.call,dt=et&&ot.bind(gt,gt);nt.exports=et?function(pt){return pt&&dt(pt)}:function(pt){return pt&&function(){return gt.apply(pt,arguments)}}},5005:(nt,it,s)=>{var et=s(7854),rt=s(614),ot=function(gt){return rt(gt)?gt:void 0};nt.exports=function(gt,dt){return arguments.length<2?ot(et[gt]):et[gt]&&et[gt][dt]}},1246:(nt,it,s)=>{var et=s(648),rt=s(8173),ot=s(7497),gt=s(5112)("iterator");nt.exports=function(dt){if(dt!=null)return rt(dt,gt)||rt(dt,"@@iterator")||ot[et(dt)]}},8554:(nt,it,s)=>{var et=s(6916),rt=s(9662),ot=s(9670),gt=s(6330),dt=s(1246),pt=TypeError;nt.exports=function(st,ht){var at=arguments.length<2?dt(st):ht;if(rt(at))return ot(et(at,st));throw pt(gt(st)+" is not iterable")}},8173:(nt,it,s)=>{var et=s(9662);nt.exports=function(rt,ot){var gt=rt[ot];return gt==null?void 0:et(gt)}},647:(nt,it,s)=>{var et=s(1702),rt=s(7908),ot=Math.floor,gt=et("".charAt),dt=et("".replace),pt=et("".slice),st=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,ht=/\$([$&'`]|\d{1,2})/g;nt.exports=function(at,ut,ft,mt,yt,At){var wt=ft+at.length,Pt=mt.length,Rt=ht;return yt!==void 0&&(yt=rt(yt),Rt=st),dt(At,Rt,function(kt,bt){var Nt;switch(gt(bt,0)){case"$":return"$";case"&":return at;case"`":return pt(ut,0,ft);case"'":return pt(ut,wt);case"<":Nt=yt[pt(bt,1,-1)];break;default:var Ft=+bt;if(Ft===0)return kt;if(Ft>Pt){var Ut=ot(Ft/10);return Ut===0?kt:Ut<=Pt?mt[Ut-1]===void 0?gt(bt,1):mt[Ut-1]+gt(bt,1):kt}Nt=mt[Ft-1]}return Nt===void 0?"":Nt})}},7854:(nt,it,s)=>{var et=function(rt){return rt&&rt.Math==Math&&rt};nt.exports=et(typeof globalThis=="object"&&globalThis)||et(typeof window=="object"&&window)||et(typeof self=="object"&&self)||et(typeof s.g=="object"&&s.g)||function(){return this}()||Function("return this")()},2597:(nt,it,s)=>{var et=s(1702),rt=s(7908),ot=et({}.hasOwnProperty);nt.exports=Object.hasOwn||function(gt,dt){return ot(rt(gt),dt)}},3501:nt=>{nt.exports={}},842:(nt,it,s)=>{var et=s(7854);nt.exports=function(rt,ot){var gt=et.console;gt&&gt.error&&(arguments.length==1?gt.error(rt):gt.error(rt,ot))}},490:(nt,it,s)=>{var et=s(5005);nt.exports=et("document","documentElement")},4664:(nt,it,s)=>{var et=s(9781),rt=s(7293),ot=s(317);nt.exports=!et&&!rt(function(){return Object.defineProperty(ot("div"),"a",{get:function(){return 7}}).a!=7})},1179:nt=>{var it=Array,s=Math.abs,et=Math.pow,rt=Math.floor,ot=Math.log,gt=Math.LN2;nt.exports={pack:function(dt,pt,st){var ht,at,ut,ft=it(st),mt=8*st-pt-1,yt=(1<<mt)-1,At=yt>>1,wt=pt===23?et(2,-24)-et(2,-77):0,Pt=dt<0||dt===0&&1/dt<0?1:0,Rt=0;for((dt=s(dt))!=dt||dt===1/0?(at=dt!=dt?1:0,ht=yt):(ht=rt(ot(dt)/gt),dt*(ut=et(2,-ht))<1&&(ht--,ut*=2),(dt+=ht+At>=1?wt/ut:wt*et(2,1-At))*ut>=2&&(ht++,ut/=2),ht+At>=yt?(at=0,ht=yt):ht+At>=1?(at=(dt*ut-1)*et(2,pt),ht+=At):(at=dt*et(2,At-1)*et(2,pt),ht=0));pt>=8;)ft[Rt++]=255&at,at/=256,pt-=8;for(ht=ht<<pt|at,mt+=pt;mt>0;)ft[Rt++]=255&ht,ht/=256,mt-=8;return ft[--Rt]|=128*Pt,ft},unpack:function(dt,pt){var st,ht=dt.length,at=8*ht-pt-1,ut=(1<<at)-1,ft=ut>>1,mt=at-7,yt=ht-1,At=dt[yt--],wt=127&At;for(At>>=7;mt>0;)wt=256*wt+dt[yt--],mt-=8;for(st=wt&(1<<-mt)-1,wt>>=-mt,mt+=pt;mt>0;)st=256*st+dt[yt--],mt-=8;if(wt===0)wt=1-ft;else{if(wt===ut)return st?NaN:At?-1/0:1/0;st+=et(2,pt),wt-=ft}return(At?-1:1)*st*et(2,wt-pt)}}},8361:(nt,it,s)=>{var et=s(1702),rt=s(7293),ot=s(4326),gt=Object,dt=et("".split);nt.exports=rt(function(){return!gt("z").propertyIsEnumerable(0)})?function(pt){return ot(pt)=="String"?dt(pt,""):gt(pt)}:gt},9587:(nt,it,s)=>{var et=s(614),rt=s(111),ot=s(7674);nt.exports=function(gt,dt,pt){var st,ht;return ot&&et(st=dt.constructor)&&st!==pt&&rt(ht=st.prototype)&&ht!==pt.prototype&&ot(gt,ht),gt}},2788:(nt,it,s)=>{var et=s(1702),rt=s(614),ot=s(5465),gt=et(Function.toString);rt(ot.inspectSource)||(ot.inspectSource=function(dt){return gt(dt)}),nt.exports=ot.inspectSource},2423:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(3501),gt=s(111),dt=s(2597),pt=s(3070).f,st=s(8006),ht=s(1156),at=s(2050),ut=s(9711),ft=s(6677),mt=!1,yt=ut("meta"),At=0,wt=function(Rt){pt(Rt,yt,{value:{objectID:"O"+At++,weakData:{}}})},Pt=nt.exports={enable:function(){Pt.enable=function(){},mt=!0;var Rt=st.f,kt=rt([].splice),bt={};bt[yt]=1,Rt(bt).length&&(st.f=function(Nt){for(var Ft=Rt(Nt),Ut=0,Jt=Ft.length;Ut<Jt;Ut++)if(Ft[Ut]===yt){kt(Ft,Ut,1);break}return Ft},et({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ht.f}))},fastKey:function(Rt,kt){if(!gt(Rt))return typeof Rt=="symbol"?Rt:(typeof Rt=="string"?"S":"P")+Rt;if(!dt(Rt,yt)){if(!at(Rt))return"F";if(!kt)return"E";wt(Rt)}return Rt[yt].objectID},getWeakData:function(Rt,kt){if(!dt(Rt,yt)){if(!at(Rt))return!0;if(!kt)return!1;wt(Rt)}return Rt[yt].weakData},onFreeze:function(Rt){return ft&&mt&&at(Rt)&&!dt(Rt,yt)&&wt(Rt),Rt}};ot[yt]=!0},9909:(nt,it,s)=>{var et,rt,ot,gt=s(8536),dt=s(7854),pt=s(1702),st=s(111),ht=s(8880),at=s(2597),ut=s(5465),ft=s(6200),mt=s(3501),yt="Object already initialized",At=dt.TypeError,wt=dt.WeakMap;if(gt||ut.state){var Pt=ut.state||(ut.state=new wt),Rt=pt(Pt.get),kt=pt(Pt.has),bt=pt(Pt.set);et=function(Ft,Ut){if(kt(Pt,Ft))throw new At(yt);return Ut.facade=Ft,bt(Pt,Ft,Ut),Ut},rt=function(Ft){return Rt(Pt,Ft)||{}},ot=function(Ft){return kt(Pt,Ft)}}else{var Nt=ft("state");mt[Nt]=!0,et=function(Ft,Ut){if(at(Ft,Nt))throw new At(yt);return Ut.facade=Ft,ht(Ft,Nt,Ut),Ut},rt=function(Ft){return at(Ft,Nt)?Ft[Nt]:{}},ot=function(Ft){return at(Ft,Nt)}}nt.exports={set:et,get:rt,has:ot,enforce:function(Ft){return ot(Ft)?rt(Ft):et(Ft,{})},getterFor:function(Ft){return function(Ut){var Jt;if(!st(Ut)||(Jt=rt(Ut)).type!==Ft)throw At("Incompatible receiver, "+Ft+" required");return Jt}}}},7659:(nt,it,s)=>{var et=s(5112),rt=s(7497),ot=et("iterator"),gt=Array.prototype;nt.exports=function(dt){return dt!==void 0&&(rt.Array===dt||gt[ot]===dt)}},3157:(nt,it,s)=>{var et=s(4326);nt.exports=Array.isArray||function(rt){return et(rt)=="Array"}},614:nt=>{nt.exports=function(it){return typeof it=="function"}},4411:(nt,it,s)=>{var et=s(1702),rt=s(7293),ot=s(614),gt=s(648),dt=s(5005),pt=s(2788),st=function(){},ht=[],at=dt("Reflect","construct"),ut=/^\s*(?:class|function)\b/,ft=et(ut.exec),mt=!ut.exec(st),yt=function(wt){if(!ot(wt))return!1;try{return at(st,ht,wt),!0}catch{return!1}},At=function(wt){if(!ot(wt))return!1;switch(gt(wt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mt||!!ft(ut,pt(wt))}catch{return!0}};At.sham=!0,nt.exports=!at||rt(function(){var wt;return yt(yt.call)||!yt(Object)||!yt(function(){wt=!0})||wt})?At:yt},5032:(nt,it,s)=>{var et=s(2597);nt.exports=function(rt){return rt!==void 0&&(et(rt,"value")||et(rt,"writable"))}},4705:(nt,it,s)=>{var et=s(7293),rt=s(614),ot=/#|\.prototype\./,gt=function(at,ut){var ft=pt[dt(at)];return ft==ht||ft!=st&&(rt(ut)?et(ut):!!ut)},dt=gt.normalize=function(at){return String(at).replace(ot,".").toLowerCase()},pt=gt.data={},st=gt.NATIVE="N",ht=gt.POLYFILL="P";nt.exports=gt},5988:(nt,it,s)=>{var et=s(111),rt=Math.floor;nt.exports=Number.isInteger||function(ot){return!et(ot)&&isFinite(ot)&&rt(ot)===ot}},111:(nt,it,s)=>{var et=s(614);nt.exports=function(rt){return typeof rt=="object"?rt!==null:et(rt)}},1913:nt=>{nt.exports=!1},7850:(nt,it,s)=>{var et=s(111),rt=s(4326),ot=s(5112)("match");nt.exports=function(gt){var dt;return et(gt)&&((dt=gt[ot])!==void 0?!!dt:rt(gt)=="RegExp")}},2190:(nt,it,s)=>{var et=s(5005),rt=s(614),ot=s(7976),gt=s(3307),dt=Object;nt.exports=gt?function(pt){return typeof pt=="symbol"}:function(pt){var st=et("Symbol");return rt(st)&&ot(st.prototype,dt(pt))}},408:(nt,it,s)=>{var et=s(9974),rt=s(6916),ot=s(9670),gt=s(6330),dt=s(7659),pt=s(6244),st=s(7976),ht=s(8554),at=s(1246),ut=s(9212),ft=TypeError,mt=function(At,wt){this.stopped=At,this.result=wt},yt=mt.prototype;nt.exports=function(At,wt,Pt){var Rt,kt,bt,Nt,Ft,Ut,Jt,hn=Pt&&Pt.that,Xt=!(!Pt||!Pt.AS_ENTRIES),zt=!(!Pt||!Pt.IS_RECORD),cn=!(!Pt||!Pt.IS_ITERATOR),vn=!(!Pt||!Pt.INTERRUPTED),Sn=et(wt,hn),fn=function(bn){return Rt&&ut(Rt,"normal",bn),new mt(!0,bn)},mn=function(bn){return Xt?(ot(bn),vn?Sn(bn[0],bn[1],fn):Sn(bn[0],bn[1])):vn?Sn(bn,fn):Sn(bn)};if(zt)Rt=At.iterator;else if(cn)Rt=At;else{if(!(kt=at(At)))throw ft(gt(At)+" is not iterable");if(dt(kt)){for(bt=0,Nt=pt(At);Nt>bt;bt++)if((Ft=mn(At[bt]))&&st(yt,Ft))return Ft;return new mt(!1)}Rt=ht(At,kt)}for(Ut=zt?At.next:Rt.next;!(Jt=rt(Ut,Rt)).done;){try{Ft=mn(Jt.value)}catch(bn){ut(Rt,"throw",bn)}if(typeof Ft=="object"&&Ft&&st(yt,Ft))return Ft}return new mt(!1)}},9212:(nt,it,s)=>{var et=s(6916),rt=s(9670),ot=s(8173);nt.exports=function(gt,dt,pt){var st,ht;rt(gt);try{if(!(st=ot(gt,"return"))){if(dt==="throw")throw pt;return pt}st=et(st,gt)}catch(at){ht=!0,st=at}if(dt==="throw")throw pt;if(ht)throw st;return rt(st),pt}},3383:(nt,it,s)=>{var et,rt,ot,gt=s(7293),dt=s(614),pt=s(30),st=s(9518),ht=s(8052),at=s(5112),ut=s(1913),ft=at("iterator"),mt=!1;[].keys&&("next"in(ot=[].keys())?(rt=st(st(ot)))!==Object.prototype&&(et=rt):mt=!0),et==null||gt(function(){var yt={};return et[ft].call(yt)!==yt})?et={}:ut&&(et=pt(et)),dt(et[ft])||ht(et,ft,function(){return this}),nt.exports={IteratorPrototype:et,BUGGY_SAFARI_ITERATORS:mt}},7497:nt=>{nt.exports={}},6244:(nt,it,s)=>{var et=s(7466);nt.exports=function(rt){return et(rt.length)}},6339:(nt,it,s)=>{var et=s(7293),rt=s(614),ot=s(2597),gt=s(9781),dt=s(6530).CONFIGURABLE,pt=s(2788),st=s(9909),ht=st.enforce,at=st.get,ut=Object.defineProperty,ft=gt&&!et(function(){return ut(function(){},"length",{value:8}).length!==8}),mt=String(String).split("String"),yt=nt.exports=function(At,wt,Pt){String(wt).slice(0,7)==="Symbol("&&(wt="["+String(wt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),Pt&&Pt.getter&&(wt="get "+wt),Pt&&Pt.setter&&(wt="set "+wt),(!ot(At,"name")||dt&&At.name!==wt)&&(gt?ut(At,"name",{value:wt,configurable:!0}):At.name=wt),ft&&Pt&&ot(Pt,"arity")&&At.length!==Pt.arity&&ut(At,"length",{value:Pt.arity});try{Pt&&ot(Pt,"constructor")&&Pt.constructor?gt&&ut(At,"prototype",{writable:!1}):At.prototype&&(At.prototype=void 0)}catch{}var Rt=ht(At);return ot(Rt,"source")||(Rt.source=mt.join(typeof wt=="string"?wt:"")),At};Function.prototype.toString=yt(function(){return rt(this)&&at(this).source||pt(this)},"toString")},403:nt=>{var it=Math.log,s=Math.LOG10E;nt.exports=Math.log10||function(et){return it(et)*s}},4758:nt=>{var it=Math.ceil,s=Math.floor;nt.exports=Math.trunc||function(et){var rt=+et;return(rt>0?s:it)(rt)}},5948:(nt,it,s)=>{var et,rt,ot,gt,dt,pt,st,ht,at=s(7854),ut=s(9974),ft=s(1236).f,mt=s(261).set,yt=s(6833),At=s(1528),wt=s(1036),Pt=s(2805),Rt=at.MutationObserver||at.WebKitMutationObserver,kt=at.document,bt=at.process,Nt=at.Promise,Ft=ft(at,"queueMicrotask"),Ut=Ft&&Ft.value;Ut||(et=function(){var Jt,hn;for(Pt&&(Jt=bt.domain)&&Jt.exit();rt;){hn=rt.fn,rt=rt.next;try{hn()}catch(Xt){throw rt?gt():ot=void 0,Xt}}ot=void 0,Jt&&Jt.enter()},yt||Pt||wt||!Rt||!kt?!At&&Nt&&Nt.resolve?((st=Nt.resolve(void 0)).constructor=Nt,ht=ut(st.then,st),gt=function(){ht(et)}):Pt?gt=function(){bt.nextTick(et)}:(mt=ut(mt,at),gt=function(){mt(et)}):(dt=!0,pt=kt.createTextNode(""),new Rt(et).observe(pt,{characterData:!0}),gt=function(){pt.data=dt=!dt})),nt.exports=Ut||function(Jt){var hn={fn:Jt,next:void 0};ot&&(ot.next=hn),rt||(rt=hn,gt()),ot=hn}},735:(nt,it,s)=>{var et=s(133);nt.exports=et&&!!Symbol.for&&!!Symbol.keyFor},133:(nt,it,s)=>{var et=s(7392),rt=s(7293);nt.exports=!!Object.getOwnPropertySymbols&&!rt(function(){var ot=Symbol();return!String(ot)||!(Object(ot)instanceof Symbol)||!Symbol.sham&&et&&et<41})},590:(nt,it,s)=>{var et=s(7293),rt=s(5112),ot=s(1913),gt=rt("iterator");nt.exports=!et(function(){var dt=new URL("b?a=1&b=2&c=3","http://a"),pt=dt.searchParams,st="";return dt.pathname="c%20d",pt.forEach(function(ht,at){pt.delete("b"),st+=at+ht}),ot&&!dt.toJSON||!pt.sort||dt.href!=="http://a/c%20d?a=1&c=3"||pt.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!pt[gt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||st!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8536:(nt,it,s)=>{var et=s(7854),rt=s(614),ot=s(2788),gt=et.WeakMap;nt.exports=rt(gt)&&/native code/.test(ot(gt))},8523:(nt,it,s)=>{var et=s(9662),rt=function(ot){var gt,dt;this.promise=new ot(function(pt,st){if(gt!==void 0||dt!==void 0)throw TypeError("Bad Promise constructor");gt=pt,dt=st}),this.resolve=et(gt),this.reject=et(dt)};nt.exports.f=function(ot){return new rt(ot)}},3929:(nt,it,s)=>{var et=s(7850),rt=TypeError;nt.exports=function(ot){if(et(ot))throw rt("The method doesn't accept regular expressions");return ot}},3009:(nt,it,s)=>{var et=s(7854),rt=s(7293),ot=s(1702),gt=s(1340),dt=s(3111).trim,pt=s(1361),st=et.parseInt,ht=et.Symbol,at=ht&&ht.iterator,ut=/^[+-]?0x/i,ft=ot(ut.exec),mt=st(pt+"08")!==8||st(pt+"0x16")!==22||at&&!rt(function(){st(Object(at))});nt.exports=mt?function(yt,At){var wt=dt(gt(yt));return st(wt,At>>>0||(ft(ut,wt)?16:10))}:st},1574:(nt,it,s)=>{var et=s(9781),rt=s(1702),ot=s(6916),gt=s(7293),dt=s(1956),pt=s(5181),st=s(5296),ht=s(7908),at=s(8361),ut=Object.assign,ft=Object.defineProperty,mt=rt([].concat);nt.exports=!ut||gt(function(){if(et&&ut({b:1},ut(ft({},"a",{enumerable:!0,get:function(){ft(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var yt={},At={},wt=Symbol(),Pt="abcdefghijklmnopqrst";return yt[wt]=7,Pt.split("").forEach(function(Rt){At[Rt]=Rt}),ut({},yt)[wt]!=7||dt(ut({},At)).join("")!=Pt})?function(yt,At){for(var wt=ht(yt),Pt=arguments.length,Rt=1,kt=pt.f,bt=st.f;Pt>Rt;)for(var Nt,Ft=at(arguments[Rt++]),Ut=kt?mt(dt(Ft),kt(Ft)):dt(Ft),Jt=Ut.length,hn=0;Jt>hn;)Nt=Ut[hn++],et&&!ot(bt,Ft,Nt)||(wt[Nt]=Ft[Nt]);return wt}:ut},30:(nt,it,s)=>{var et,rt=s(9670),ot=s(6048),gt=s(748),dt=s(3501),pt=s(490),st=s(317),ht=s(6200)("IE_PROTO"),at=function(){},ut=function(yt){return"<script>"+yt+"<\/script>"},ft=function(yt){yt.write(ut("")),yt.close();var At=yt.parentWindow.Object;return yt=null,At},mt=function(){try{et=new ActiveXObject("htmlfile")}catch{}var yt,At;mt=typeof document<"u"?document.domain&&et?ft(et):((At=st("iframe")).style.display="none",pt.appendChild(At),At.src="javascript:",(yt=At.contentWindow.document).open(),yt.write(ut("document.F=Object")),yt.close(),yt.F):ft(et);for(var wt=gt.length;wt--;)delete mt.prototype[gt[wt]];return mt()};dt[ht]=!0,nt.exports=Object.create||function(yt,At){var wt;return yt!==null?(at.prototype=rt(yt),wt=new at,at.prototype=null,wt[ht]=yt):wt=mt(),At===void 0?wt:ot.f(wt,At)}},6048:(nt,it,s)=>{var et=s(9781),rt=s(3353),ot=s(3070),gt=s(9670),dt=s(5656),pt=s(1956);it.f=et&&!rt?Object.defineProperties:function(st,ht){gt(st);for(var at,ut=dt(ht),ft=pt(ht),mt=ft.length,yt=0;mt>yt;)ot.f(st,at=ft[yt++],ut[at]);return st}},3070:(nt,it,s)=>{var et=s(9781),rt=s(4664),ot=s(3353),gt=s(9670),dt=s(4948),pt=TypeError,st=Object.defineProperty,ht=Object.getOwnPropertyDescriptor;it.f=et?ot?function(at,ut,ft){if(gt(at),ut=dt(ut),gt(ft),typeof at=="function"&&ut==="prototype"&&"value"in ft&&"writable"in ft&&!ft.writable){var mt=ht(at,ut);mt&&mt.writable&&(at[ut]=ft.value,ft={configurable:"configurable"in ft?ft.configurable:mt.configurable,enumerable:"enumerable"in ft?ft.enumerable:mt.enumerable,writable:!1})}return st(at,ut,ft)}:st:function(at,ut,ft){if(gt(at),ut=dt(ut),gt(ft),rt)try{return st(at,ut,ft)}catch{}if("get"in ft||"set"in ft)throw pt("Accessors not supported");return"value"in ft&&(at[ut]=ft.value),at}},1236:(nt,it,s)=>{var et=s(9781),rt=s(6916),ot=s(5296),gt=s(9114),dt=s(5656),pt=s(4948),st=s(2597),ht=s(4664),at=Object.getOwnPropertyDescriptor;it.f=et?at:function(ut,ft){if(ut=dt(ut),ft=pt(ft),ht)try{return at(ut,ft)}catch{}if(st(ut,ft))return gt(!rt(ot.f,ut,ft),ut[ft])}},1156:(nt,it,s)=>{var et=s(4326),rt=s(5656),ot=s(8006).f,gt=s(1589),dt=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];nt.exports.f=function(pt){return dt&&et(pt)=="Window"?function(st){try{return ot(st)}catch{return gt(dt)}}(pt):ot(rt(pt))}},8006:(nt,it,s)=>{var et=s(6324),rt=s(748).concat("length","prototype");it.f=Object.getOwnPropertyNames||function(ot){return et(ot,rt)}},5181:(nt,it)=>{it.f=Object.getOwnPropertySymbols},9518:(nt,it,s)=>{var et=s(2597),rt=s(614),ot=s(7908),gt=s(6200),dt=s(8544),pt=gt("IE_PROTO"),st=Object,ht=st.prototype;nt.exports=dt?st.getPrototypeOf:function(at){var ut=ot(at);if(et(ut,pt))return ut[pt];var ft=ut.constructor;return rt(ft)&&ut instanceof ft?ft.prototype:ut instanceof st?ht:null}},2050:(nt,it,s)=>{var et=s(7293),rt=s(111),ot=s(4326),gt=s(7556),dt=Object.isExtensible,pt=et(function(){});nt.exports=pt||gt?function(st){return!!rt(st)&&(!gt||ot(st)!="ArrayBuffer")&&(!dt||dt(st))}:dt},7976:(nt,it,s)=>{var et=s(1702);nt.exports=et({}.isPrototypeOf)},6324:(nt,it,s)=>{var et=s(1702),rt=s(2597),ot=s(5656),gt=s(1318).indexOf,dt=s(3501),pt=et([].push);nt.exports=function(st,ht){var at,ut=ot(st),ft=0,mt=[];for(at in ut)!rt(dt,at)&&rt(ut,at)&&pt(mt,at);for(;ht.length>ft;)rt(ut,at=ht[ft++])&&(~gt(mt,at)||pt(mt,at));return mt}},1956:(nt,it,s)=>{var et=s(6324),rt=s(748);nt.exports=Object.keys||function(ot){return et(ot,rt)}},5296:(nt,it)=>{var s={}.propertyIsEnumerable,et=Object.getOwnPropertyDescriptor,rt=et&&!s.call({1:2},1);it.f=rt?function(ot){var gt=et(this,ot);return!!gt&&gt.enumerable}:s},7674:(nt,it,s)=>{var et=s(1702),rt=s(9670),ot=s(6077);nt.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var gt,dt=!1,pt={};try{(gt=et(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(pt,[]),dt=pt instanceof Array}catch{}return function(st,ht){return rt(st),ot(ht),dt?gt(st,ht):st.__proto__=ht,st}}():void 0)},4699:(nt,it,s)=>{var et=s(9781),rt=s(1702),ot=s(1956),gt=s(5656),dt=rt(s(5296).f),pt=rt([].push),st=function(ht){return function(at){for(var ut,ft=gt(at),mt=ot(ft),yt=mt.length,At=0,wt=[];yt>At;)ut=mt[At++],et&&!dt(ft,ut)||pt(wt,ht?[ut,ft[ut]]:ft[ut]);return wt}};nt.exports={entries:st(!0),values:st(!1)}},288:(nt,it,s)=>{var et=s(1694),rt=s(648);nt.exports=et?{}.toString:function(){return"[object "+rt(this)+"]"}},2140:(nt,it,s)=>{var et=s(6916),rt=s(614),ot=s(111),gt=TypeError;nt.exports=function(dt,pt){var st,ht;if(pt==="string"&&rt(st=dt.toString)&&!ot(ht=et(st,dt))||rt(st=dt.valueOf)&&!ot(ht=et(st,dt))||pt!=="string"&&rt(st=dt.toString)&&!ot(ht=et(st,dt)))return ht;throw gt("Can't convert object to primitive value")}},3887:(nt,it,s)=>{var et=s(5005),rt=s(1702),ot=s(8006),gt=s(5181),dt=s(9670),pt=rt([].concat);nt.exports=et("Reflect","ownKeys")||function(st){var ht=ot.f(dt(st)),at=gt.f;return at?pt(ht,at(st)):ht}},857:(nt,it,s)=>{var et=s(7854);nt.exports=et},2534:nt=>{nt.exports=function(it){try{return{error:!1,value:it()}}catch(s){return{error:!0,value:s}}}},3702:(nt,it,s)=>{var et=s(7854),rt=s(2492),ot=s(614),gt=s(4705),dt=s(2788),pt=s(5112),st=s(7871),ht=s(1913),at=s(7392),ut=rt&&rt.prototype,ft=pt("species"),mt=!1,yt=ot(et.PromiseRejectionEvent),At=gt("Promise",function(){var wt=dt(rt),Pt=wt!==String(rt);if(!Pt&&at===66||ht&&(!ut.catch||!ut.finally))return!0;if(at>=51&&/native code/.test(wt))return!1;var Rt=new rt(function(bt){bt(1)}),kt=function(bt){bt(function(){},function(){})};return(Rt.constructor={})[ft]=kt,!(mt=Rt.then(function(){})instanceof kt)||!Pt&&st&&!yt});nt.exports={CONSTRUCTOR:At,REJECTION_EVENT:yt,SUBCLASSING:mt}},2492:(nt,it,s)=>{var et=s(7854);nt.exports=et.Promise},9478:(nt,it,s)=>{var et=s(9670),rt=s(111),ot=s(8523);nt.exports=function(gt,dt){if(et(gt),rt(dt)&&dt.constructor===gt)return dt;var pt=ot.f(gt);return(0,pt.resolve)(dt),pt.promise}},612:(nt,it,s)=>{var et=s(2492),rt=s(7072),ot=s(3702).CONSTRUCTOR;nt.exports=ot||!rt(function(gt){et.all(gt).then(void 0,function(){})})},2626:(nt,it,s)=>{var et=s(3070).f;nt.exports=function(rt,ot,gt){gt in rt||et(rt,gt,{configurable:!0,get:function(){return ot[gt]},set:function(dt){ot[gt]=dt}})}},8572:nt=>{var it=function(){this.head=null,this.tail=null};it.prototype={add:function(s){var et={item:s,next:null};this.head?this.tail.next=et:this.head=et,this.tail=et},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}},nt.exports=it},7651:(nt,it,s)=>{var et=s(6916),rt=s(9670),ot=s(614),gt=s(4326),dt=s(2261),pt=TypeError;nt.exports=function(st,ht){var at=st.exec;if(ot(at)){var ut=et(at,st,ht);return ut!==null&&rt(ut),ut}if(gt(st)==="RegExp")return et(dt,st,ht);throw pt("RegExp#exec called on incompatible receiver")}},2261:(nt,it,s)=>{var et,rt,ot=s(6916),gt=s(1702),dt=s(1340),pt=s(7066),st=s(2999),ht=s(2309),at=s(30),ut=s(9909).get,ft=s(9441),mt=s(7168),yt=ht("native-string-replace",String.prototype.replace),At=RegExp.prototype.exec,wt=At,Pt=gt("".charAt),Rt=gt("".indexOf),kt=gt("".replace),bt=gt("".slice),Nt=(rt=/b*/g,ot(At,et=/a/,"a"),ot(At,rt,"a"),et.lastIndex!==0||rt.lastIndex!==0),Ft=st.BROKEN_CARET,Ut=/()??/.exec("")[1]!==void 0;(Nt||Ut||Ft||ft||mt)&&(wt=function(Jt){var hn,Xt,zt,cn,vn,Sn,fn,mn=this,bn=ut(mn),un=dt(Jt),Tn=bn.raw;if(Tn)return Tn.lastIndex=mn.lastIndex,hn=ot(wt,Tn,un),mn.lastIndex=Tn.lastIndex,hn;var kn=bn.groups,xn=Ft&&mn.sticky,An=ot(pt,mn),En=mn.source,Rn=0,wn=un;if(xn&&(An=kt(An,"y",""),Rt(An,"g")===-1&&(An+="g"),wn=bt(un,mn.lastIndex),mn.lastIndex>0&&(!mn.multiline||mn.multiline&&Pt(un,mn.lastIndex-1)!==`
`)&&(En="(?: "+En+")",wn=" "+wn,Rn++),Xt=new RegExp("^(?:"+En+")",An)),Ut&&(Xt=new RegExp("^"+En+"$(?!\\s)",An)),Nt&&(zt=mn.lastIndex),cn=ot(At,xn?Xt:mn,wn),xn?cn?(cn.input=bt(cn.input,Rn),cn[0]=bt(cn[0],Rn),cn.index=mn.lastIndex,mn.lastIndex+=cn[0].length):mn.lastIndex=0:Nt&&cn&&(mn.lastIndex=mn.global?cn.index+cn[0].length:zt),Ut&&cn&&cn.length>1&&ot(yt,cn[0],Xt,function(){for(vn=1;vn<arguments.length-2;vn++)arguments[vn]===void 0&&(cn[vn]=void 0)}),cn&&kn)for(cn.groups=Sn=at(null),vn=0;vn<kn.length;vn++)Sn[(fn=kn[vn])[0]]=cn[fn[1]];return cn}),nt.exports=wt},7066:(nt,it,s)=>{var et=s(9670);nt.exports=function(){var rt=et(this),ot="";return rt.hasIndices&&(ot+="d"),rt.global&&(ot+="g"),rt.ignoreCase&&(ot+="i"),rt.multiline&&(ot+="m"),rt.dotAll&&(ot+="s"),rt.unicode&&(ot+="u"),rt.unicodeSets&&(ot+="v"),rt.sticky&&(ot+="y"),ot}},4706:(nt,it,s)=>{var et=s(6916),rt=s(2597),ot=s(7976),gt=s(7066),dt=RegExp.prototype;nt.exports=function(pt){var st=pt.flags;return st!==void 0||"flags"in dt||rt(pt,"flags")||!ot(dt,pt)?st:et(gt,pt)}},2999:(nt,it,s)=>{var et=s(7293),rt=s(7854).RegExp,ot=et(function(){var pt=rt("a","y");return pt.lastIndex=2,pt.exec("abcd")!=null}),gt=ot||et(function(){return!rt("a","y").sticky}),dt=ot||et(function(){var pt=rt("^r","gy");return pt.lastIndex=2,pt.exec("str")!=null});nt.exports={BROKEN_CARET:dt,MISSED_STICKY:gt,UNSUPPORTED_Y:ot}},9441:(nt,it,s)=>{var et=s(7293),rt=s(7854).RegExp;nt.exports=et(function(){var ot=rt(".","s");return!(ot.dotAll&&ot.exec(`
`)&&ot.flags==="s")})},7168:(nt,it,s)=>{var et=s(7293),rt=s(7854).RegExp;nt.exports=et(function(){var ot=rt("(?<a>b)","g");return ot.exec("b").groups.a!=="b"||"b".replace(ot,"$<a>c")!=="bc"})},4488:nt=>{var it=TypeError;nt.exports=function(s){if(s==null)throw it("Can't call method on "+s);return s}},1150:nt=>{nt.exports=Object.is||function(it,s){return it===s?it!==0||1/it==1/s:it!=it&&s!=s}},7152:(nt,it,s)=>{var et=s(7854),rt=s(2104),ot=s(614),gt=s(8113),dt=s(206),pt=s(8053),st=/MSIE .\./.test(gt),ht=et.Function,at=function(ut){return st?function(ft,mt){var yt=pt(arguments.length,1)>2,At=ot(ft)?ft:ht(ft),wt=yt?dt(arguments,2):void 0;return ut(yt?function(){rt(At,this,wt)}:At,mt)}:ut};nt.exports={setTimeout:at(et.setTimeout),setInterval:at(et.setInterval)}},6340:(nt,it,s)=>{var et=s(5005),rt=s(3070),ot=s(5112),gt=s(9781),dt=ot("species");nt.exports=function(pt){var st=et(pt),ht=rt.f;gt&&st&&!st[dt]&&ht(st,dt,{configurable:!0,get:function(){return this}})}},8003:(nt,it,s)=>{var et=s(3070).f,rt=s(2597),ot=s(5112)("toStringTag");nt.exports=function(gt,dt,pt){gt&&!pt&&(gt=gt.prototype),gt&&!rt(gt,ot)&&et(gt,ot,{configurable:!0,value:dt})}},6200:(nt,it,s)=>{var et=s(2309),rt=s(9711),ot=et("keys");nt.exports=function(gt){return ot[gt]||(ot[gt]=rt(gt))}},5465:(nt,it,s)=>{var et=s(7854),rt=s(3072),ot="__core-js_shared__",gt=et[ot]||rt(ot,{});nt.exports=gt},2309:(nt,it,s)=>{var et=s(1913),rt=s(5465);(nt.exports=function(ot,gt){return rt[ot]||(rt[ot]=gt!==void 0?gt:{})})("versions",[]).push({version:"3.23.4",mode:et?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(nt,it,s)=>{var et=s(9670),rt=s(9483),ot=s(5112)("species");nt.exports=function(gt,dt){var pt,st=et(gt).constructor;return st===void 0||(pt=et(st)[ot])==null?dt:rt(pt)}},8710:(nt,it,s)=>{var et=s(1702),rt=s(9303),ot=s(1340),gt=s(4488),dt=et("".charAt),pt=et("".charCodeAt),st=et("".slice),ht=function(at){return function(ut,ft){var mt,yt,At=ot(gt(ut)),wt=rt(ft),Pt=At.length;return wt<0||wt>=Pt?at?"":void 0:(mt=pt(At,wt))<55296||mt>56319||wt+1===Pt||(yt=pt(At,wt+1))<56320||yt>57343?at?dt(At,wt):mt:at?st(At,wt,wt+2):yt-56320+(mt-55296<<10)+65536}};nt.exports={codeAt:ht(!1),charAt:ht(!0)}},6650:(nt,it,s)=>{var et=s(1702),rt=s(7466),ot=s(1340),gt=s(8415),dt=s(4488),pt=et(gt),st=et("".slice),ht=Math.ceil,at=function(ut){return function(ft,mt,yt){var At,wt,Pt=ot(dt(ft)),Rt=rt(mt),kt=Pt.length,bt=yt===void 0?" ":ot(yt);return Rt<=kt||bt==""?Pt:((wt=pt(bt,ht((At=Rt-kt)/bt.length))).length>At&&(wt=st(wt,0,At)),ut?Pt+wt:wt+Pt)}};nt.exports={start:at(!1),end:at(!0)}},3197:(nt,it,s)=>{var et=s(1702),rt=2147483647,ot=/[^\0-\u007E]/,gt=/[.\u3002\uFF0E\uFF61]/g,dt="Overflow: input needs wider integers to process",pt=RangeError,st=et(gt.exec),ht=Math.floor,at=String.fromCharCode,ut=et("".charCodeAt),ft=et([].join),mt=et([].push),yt=et("".replace),At=et("".split),wt=et("".toLowerCase),Pt=function(bt){return bt+22+75*(bt<26)},Rt=function(bt,Nt,Ft){var Ut=0;for(bt=Ft?ht(bt/700):bt>>1,bt+=ht(bt/Nt);bt>455;)bt=ht(bt/35),Ut+=36;return ht(Ut+36*bt/(bt+38))},kt=function(bt){var Nt=[];bt=function(xn){for(var An=[],En=0,Rn=xn.length;En<Rn;){var wn=ut(xn,En++);if(wn>=55296&&wn<=56319&&En<Rn){var Dn=ut(xn,En++);(64512&Dn)==56320?mt(An,((1023&wn)<<10)+(1023&Dn)+65536):(mt(An,wn),En--)}else mt(An,wn)}return An}(bt);var Ft,Ut,Jt=bt.length,hn=128,Xt=0,zt=72;for(Ft=0;Ft<bt.length;Ft++)(Ut=bt[Ft])<128&&mt(Nt,at(Ut));var cn=Nt.length,vn=cn;for(cn&&mt(Nt,"-");vn<Jt;){var Sn=rt;for(Ft=0;Ft<bt.length;Ft++)(Ut=bt[Ft])>=hn&&Ut<Sn&&(Sn=Ut);var fn=vn+1;if(Sn-hn>ht((rt-Xt)/fn))throw pt(dt);for(Xt+=(Sn-hn)*fn,hn=Sn,Ft=0;Ft<bt.length;Ft++){if((Ut=bt[Ft])<hn&&++Xt>rt)throw pt(dt);if(Ut==hn){for(var mn=Xt,bn=36;;){var un=bn<=zt?1:bn>=zt+26?26:bn-zt;if(mn<un)break;var Tn=mn-un,kn=36-un;mt(Nt,at(Pt(un+Tn%kn))),mn=ht(Tn/kn),bn+=36}mt(Nt,at(Pt(mn))),zt=Rt(Xt,fn,vn==cn),Xt=0,vn++}}Xt++,hn++}return ft(Nt,"")};nt.exports=function(bt){var Nt,Ft,Ut=[],Jt=At(yt(wt(bt),gt,"."),".");for(Nt=0;Nt<Jt.length;Nt++)Ft=Jt[Nt],mt(Ut,st(ot,Ft)?"xn--"+kt(Ft):Ft);return ft(Ut,".")}},8415:(nt,it,s)=>{var et=s(9303),rt=s(1340),ot=s(4488),gt=RangeError;nt.exports=function(dt){var pt=rt(ot(this)),st="",ht=et(dt);if(ht<0||ht==1/0)throw gt("Wrong number of repetitions");for(;ht>0;(ht>>>=1)&&(pt+=pt))1&ht&&(st+=pt);return st}},3111:(nt,it,s)=>{var et=s(1702),rt=s(4488),ot=s(1340),gt=s(1361),dt=et("".replace),pt="["+gt+"]",st=RegExp("^"+pt+pt+"*"),ht=RegExp(pt+pt+"*$"),at=function(ut){return function(ft){var mt=ot(rt(ft));return 1&ut&&(mt=dt(mt,st,"")),2&ut&&(mt=dt(mt,ht,"")),mt}};nt.exports={start:at(1),end:at(2),trim:at(3)}},6532:(nt,it,s)=>{var et=s(6916),rt=s(5005),ot=s(5112),gt=s(8052);nt.exports=function(){var dt=rt("Symbol"),pt=dt&&dt.prototype,st=pt&&pt.valueOf,ht=ot("toPrimitive");pt&&!pt[ht]&&gt(pt,ht,function(at){return et(st,this)},{arity:1})}},261:(nt,it,s)=>{var et,rt,ot,gt,dt=s(7854),pt=s(2104),st=s(9974),ht=s(614),at=s(2597),ut=s(7293),ft=s(490),mt=s(206),yt=s(317),At=s(8053),wt=s(6833),Pt=s(2805),Rt=dt.setImmediate,kt=dt.clearImmediate,bt=dt.process,Nt=dt.Dispatch,Ft=dt.Function,Ut=dt.MessageChannel,Jt=dt.String,hn=0,Xt={};try{et=dt.location}catch{}var zt=function(fn){if(at(Xt,fn)){var mn=Xt[fn];delete Xt[fn],mn()}},cn=function(fn){return function(){zt(fn)}},vn=function(fn){zt(fn.data)},Sn=function(fn){dt.postMessage(Jt(fn),et.protocol+"//"+et.host)};Rt&&kt||(Rt=function(fn){At(arguments.length,1);var mn=ht(fn)?fn:Ft(fn),bn=mt(arguments,1);return Xt[++hn]=function(){pt(mn,void 0,bn)},rt(hn),hn},kt=function(fn){delete Xt[fn]},Pt?rt=function(fn){bt.nextTick(cn(fn))}:Nt&&Nt.now?rt=function(fn){Nt.now(cn(fn))}:Ut&&!wt?(gt=(ot=new Ut).port2,ot.port1.onmessage=vn,rt=st(gt.postMessage,gt)):dt.addEventListener&&ht(dt.postMessage)&&!dt.importScripts&&et&&et.protocol!=="file:"&&!ut(Sn)?(rt=Sn,dt.addEventListener("message",vn,!1)):rt="onreadystatechange"in yt("script")?function(fn){ft.appendChild(yt("script")).onreadystatechange=function(){ft.removeChild(this),zt(fn)}}:function(fn){setTimeout(cn(fn),0)}),nt.exports={set:Rt,clear:kt}},863:(nt,it,s)=>{var et=s(1702);nt.exports=et(1 .valueOf)},1400:(nt,it,s)=>{var et=s(9303),rt=Math.max,ot=Math.min;nt.exports=function(gt,dt){var pt=et(gt);return pt<0?rt(pt+dt,0):ot(pt,dt)}},4599:(nt,it,s)=>{var et=s(7593),rt=TypeError;nt.exports=function(ot){var gt=et(ot,"number");if(typeof gt=="number")throw rt("Can't convert number to bigint");return BigInt(gt)}},7067:(nt,it,s)=>{var et=s(9303),rt=s(7466),ot=RangeError;nt.exports=function(gt){if(gt===void 0)return 0;var dt=et(gt),pt=rt(dt);if(dt!==pt)throw ot("Wrong length or index");return pt}},5656:(nt,it,s)=>{var et=s(8361),rt=s(4488);nt.exports=function(ot){return et(rt(ot))}},9303:(nt,it,s)=>{var et=s(4758);nt.exports=function(rt){var ot=+rt;return ot!=ot||ot===0?0:et(ot)}},7466:(nt,it,s)=>{var et=s(9303),rt=Math.min;nt.exports=function(ot){return ot>0?rt(et(ot),9007199254740991):0}},7908:(nt,it,s)=>{var et=s(4488),rt=Object;nt.exports=function(ot){return rt(et(ot))}},4590:(nt,it,s)=>{var et=s(3002),rt=RangeError;nt.exports=function(ot,gt){var dt=et(ot);if(dt%gt)throw rt("Wrong offset");return dt}},3002:(nt,it,s)=>{var et=s(9303),rt=RangeError;nt.exports=function(ot){var gt=et(ot);if(gt<0)throw rt("The argument can't be less than 0");return gt}},7593:(nt,it,s)=>{var et=s(6916),rt=s(111),ot=s(2190),gt=s(8173),dt=s(2140),pt=s(5112),st=TypeError,ht=pt("toPrimitive");nt.exports=function(at,ut){if(!rt(at)||ot(at))return at;var ft,mt=gt(at,ht);if(mt){if(ut===void 0&&(ut="default"),ft=et(mt,at,ut),!rt(ft)||ot(ft))return ft;throw st("Can't convert object to primitive value")}return ut===void 0&&(ut="number"),dt(at,ut)}},4948:(nt,it,s)=>{var et=s(7593),rt=s(2190);nt.exports=function(ot){var gt=et(ot,"string");return rt(gt)?gt:gt+""}},1694:(nt,it,s)=>{var et={};et[s(5112)("toStringTag")]="z",nt.exports=String(et)==="[object z]"},1340:(nt,it,s)=>{var et=s(648),rt=String;nt.exports=function(ot){if(et(ot)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return rt(ot)}},6330:nt=>{var it=String;nt.exports=function(s){try{return it(s)}catch{return"Object"}}},9843:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(6916),gt=s(9781),dt=s(3832),pt=s(260),st=s(3331),ht=s(5787),at=s(9114),ut=s(8880),ft=s(5988),mt=s(7466),yt=s(7067),At=s(4590),wt=s(4948),Pt=s(2597),Rt=s(648),kt=s(111),bt=s(2190),Nt=s(30),Ft=s(7976),Ut=s(7674),Jt=s(8006).f,hn=s(7321),Xt=s(2092).forEach,zt=s(6340),cn=s(3070),vn=s(1236),Sn=s(9909),fn=s(9587),mn=Sn.get,bn=Sn.set,un=Sn.enforce,Tn=cn.f,kn=vn.f,xn=Math.round,An=rt.RangeError,En=st.ArrayBuffer,Rn=En.prototype,wn=st.DataView,Dn=pt.NATIVE_ARRAY_BUFFER_VIEWS,Bn=pt.TYPED_ARRAY_TAG,zn=pt.TypedArray,Hn=pt.TypedArrayPrototype,nr=pt.aTypedArrayConstructor,sn=pt.isTypedArray,Gn="BYTES_PER_ELEMENT",Zn="Wrong length",rr=function(Cn,Mn){nr(Cn);for(var Kt=0,Ot=Mn.length,lt=new Cn(Ot);Ot>Kt;)lt[Kt]=Mn[Kt++];return lt},Fn=function(Cn,Mn){Tn(Cn,Mn,{get:function(){return mn(this)[Mn]}})},Xn=function(Cn){var Mn;return Ft(Rn,Cn)||(Mn=Rt(Cn))=="ArrayBuffer"||Mn=="SharedArrayBuffer"},Yn=function(Cn,Mn){return sn(Cn)&&!bt(Mn)&&Mn in Cn&&ft(+Mn)&&Mn>=0},Nn=function(Cn,Mn){return Mn=wt(Mn),Yn(Cn,Mn)?at(2,Cn[Mn]):kn(Cn,Mn)},Un=function(Cn,Mn,Kt){return Mn=wt(Mn),!(Yn(Cn,Mn)&&kt(Kt)&&Pt(Kt,"value"))||Pt(Kt,"get")||Pt(Kt,"set")||Kt.configurable||Pt(Kt,"writable")&&!Kt.writable||Pt(Kt,"enumerable")&&!Kt.enumerable?Tn(Cn,Mn,Kt):(Cn[Mn]=Kt.value,Cn)};gt?(Dn||(vn.f=Nn,cn.f=Un,Fn(Hn,"buffer"),Fn(Hn,"byteOffset"),Fn(Hn,"byteLength"),Fn(Hn,"length")),et({target:"Object",stat:!0,forced:!Dn},{getOwnPropertyDescriptor:Nn,defineProperty:Un}),nt.exports=function(Cn,Mn,Kt){var Ot=Cn.match(/\d+$/)[0]/8,lt=Cn+(Kt?"Clamped":"")+"Array",Tt="get"+Cn,It="set"+Cn,Dt=rt[lt],Et=Dt,$t=Et&&Et.prototype,xt={},Vt=function(an,qt){Tn(an,qt,{get:function(){return function(tn,gn){var rn=mn(tn);return rn.view[Tt](gn*Ot+rn.byteOffset,!0)}(this,qt)},set:function(tn){return function(gn,rn,pn){var In=mn(gn);Kt&&(pn=(pn=xn(pn))<0?0:pn>255?255:255&pn),In.view[It](rn*Ot+In.byteOffset,pn,!0)}(this,qt,tn)},enumerable:!0})};Dn?dt&&(Et=Mn(function(an,qt,tn,gn){return ht(an,$t),fn(kt(qt)?Xn(qt)?gn!==void 0?new Dt(qt,At(tn,Ot),gn):tn!==void 0?new Dt(qt,At(tn,Ot)):new Dt(qt):sn(qt)?rr(Et,qt):ot(hn,Et,qt):new Dt(yt(qt)),an,Et)}),Ut&&Ut(Et,zn),Xt(Jt(Dt),function(an){an in Et||ut(Et,an,Dt[an])}),Et.prototype=$t):(Et=Mn(function(an,qt,tn,gn){ht(an,$t);var rn,pn,In,Pn=0,_n=0;if(kt(qt)){if(!Xn(qt))return sn(qt)?rr(Et,qt):ot(hn,Et,qt);rn=qt,_n=At(tn,Ot);var Ln=qt.byteLength;if(gn===void 0){if(Ln%Ot||(pn=Ln-_n)<0)throw An(Zn)}else if((pn=mt(gn)*Ot)+_n>Ln)throw An(Zn);In=pn/Ot}else In=yt(qt),rn=new En(pn=In*Ot);for(bn(an,{buffer:rn,byteOffset:_n,byteLength:pn,length:In,view:new wn(rn)});Pn<In;)Vt(an,Pn++)}),Ut&&Ut(Et,zn),$t=Et.prototype=Nt(Hn)),$t.constructor!==Et&&ut($t,"constructor",Et),un($t).TypedArrayConstructor=Et,Bn&&ut($t,Bn,lt);var Zt=Et!=Dt;xt[lt]=Et,et({global:!0,constructor:!0,forced:Zt,sham:!Dn},xt),Gn in Et||ut(Et,Gn,Ot),Gn in $t||ut($t,Gn,Ot),zt(lt)}):nt.exports=function(){}},3832:(nt,it,s)=>{var et=s(7854),rt=s(7293),ot=s(7072),gt=s(260).NATIVE_ARRAY_BUFFER_VIEWS,dt=et.ArrayBuffer,pt=et.Int8Array;nt.exports=!gt||!rt(function(){pt(1)})||!rt(function(){new pt(-1)})||!ot(function(st){new pt,new pt(null),new pt(1.5),new pt(st)},!0)||rt(function(){return new pt(new dt(2),1,void 0).length!==1})},3074:(nt,it,s)=>{var et=s(7745),rt=s(6304);nt.exports=function(ot,gt){return et(rt(ot),gt)}},7321:(nt,it,s)=>{var et=s(9974),rt=s(6916),ot=s(9483),gt=s(7908),dt=s(6244),pt=s(8554),st=s(1246),ht=s(7659),at=s(260).aTypedArrayConstructor;nt.exports=function(ut){var ft,mt,yt,At,wt,Pt,Rt=ot(this),kt=gt(ut),bt=arguments.length,Nt=bt>1?arguments[1]:void 0,Ft=Nt!==void 0,Ut=st(kt);if(Ut&&!ht(Ut))for(Pt=(wt=pt(kt,Ut)).next,kt=[];!(At=rt(Pt,wt)).done;)kt.push(At.value);for(Ft&&bt>2&&(Nt=et(Nt,arguments[2])),mt=dt(kt),yt=new(at(Rt))(mt),ft=0;mt>ft;ft++)yt[ft]=Ft?Nt(kt[ft],ft):kt[ft];return yt}},6304:(nt,it,s)=>{var et=s(260),rt=s(6707),ot=et.aTypedArrayConstructor,gt=et.getTypedArrayConstructor;nt.exports=function(dt){return ot(rt(dt,gt(dt)))}},9711:(nt,it,s)=>{var et=s(1702),rt=0,ot=Math.random(),gt=et(1 .toString);nt.exports=function(dt){return"Symbol("+(dt===void 0?"":dt)+")_"+gt(++rt+ot,36)}},3307:(nt,it,s)=>{var et=s(133);nt.exports=et&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(nt,it,s)=>{var et=s(9781),rt=s(7293);nt.exports=et&&rt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:nt=>{var it=TypeError;nt.exports=function(s,et){if(s<et)throw it("Not enough arguments");return s}},6061:(nt,it,s)=>{var et=s(5112);it.f=et},5112:(nt,it,s)=>{var et=s(7854),rt=s(2309),ot=s(2597),gt=s(9711),dt=s(133),pt=s(3307),st=rt("wks"),ht=et.Symbol,at=ht&&ht.for,ut=pt?ht:ht&&ht.withoutSetter||gt;nt.exports=function(ft){if(!ot(st,ft)||!dt&&typeof st[ft]!="string"){var mt="Symbol."+ft;dt&&ot(ht,ft)?st[ft]=ht[ft]:st[ft]=pt&&at?at(mt):ut(mt)}return st[ft]}},1361:nt=>{nt.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},8264:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(3331),gt=s(6340),dt=ot.ArrayBuffer;et({global:!0,constructor:!0,forced:rt.ArrayBuffer!==dt},{ArrayBuffer:dt}),gt("ArrayBuffer")},9575:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(7293),gt=s(3331),dt=s(9670),pt=s(1400),st=s(7466),ht=s(6707),at=gt.ArrayBuffer,ut=gt.DataView,ft=ut.prototype,mt=rt(at.prototype.slice),yt=rt(ft.getUint8),At=rt(ft.setUint8);et({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:ot(function(){return!new at(2).slice(1,void 0).byteLength})},{slice:function(wt,Pt){if(mt&&Pt===void 0)return mt(dt(this),wt);for(var Rt=dt(this).byteLength,kt=pt(wt,Rt),bt=pt(Pt===void 0?Rt:Pt,Rt),Nt=new(ht(this,at))(st(bt-kt)),Ft=new ut(this),Ut=new ut(Nt),Jt=0;kt<bt;)At(Ut,Jt++,yt(Ft,kt++));return Nt}})},2222:(nt,it,s)=>{var et=s(2109),rt=s(7293),ot=s(3157),gt=s(111),dt=s(7908),pt=s(6244),st=s(7207),ht=s(6135),at=s(5417),ut=s(1194),ft=s(5112),mt=s(7392),yt=ft("isConcatSpreadable"),At=mt>=51||!rt(function(){var Rt=[];return Rt[yt]=!1,Rt.concat()[0]!==Rt}),wt=ut("concat"),Pt=function(Rt){if(!gt(Rt))return!1;var kt=Rt[yt];return kt!==void 0?!!kt:ot(Rt)};et({target:"Array",proto:!0,arity:1,forced:!At||!wt},{concat:function(Rt){var kt,bt,Nt,Ft,Ut,Jt=dt(this),hn=at(Jt,0),Xt=0;for(kt=-1,Nt=arguments.length;kt<Nt;kt++)if(Pt(Ut=kt===-1?Jt:arguments[kt]))for(Ft=pt(Ut),st(Xt+Ft),bt=0;bt<Ft;bt++,Xt++)bt in Ut&&ht(hn,Xt,Ut[bt]);else st(Xt+1),ht(hn,Xt++,Ut);return hn.length=Xt,hn}})},3290:(nt,it,s)=>{var et=s(2109),rt=s(1285),ot=s(1223);et({target:"Array",proto:!0},{fill:rt}),ot("fill")},7327:(nt,it,s)=>{var et=s(2109),rt=s(2092).filter;et({target:"Array",proto:!0,forced:!s(1194)("filter")},{filter:function(ot){return rt(this,ot,arguments.length>1?arguments[1]:void 0)}})},4553:(nt,it,s)=>{var et=s(2109),rt=s(2092).findIndex,ot=s(1223),gt="findIndex",dt=!0;gt in[]&&Array(1).findIndex(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{findIndex:function(pt){return rt(this,pt,arguments.length>1?arguments[1]:void 0)}}),ot(gt)},9826:(nt,it,s)=>{var et=s(2109),rt=s(2092).find,ot=s(1223),gt="find",dt=!0;gt in[]&&Array(1).find(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{find:function(pt){return rt(this,pt,arguments.length>1?arguments[1]:void 0)}}),ot(gt)},9554:(nt,it,s)=>{var et=s(2109),rt=s(8533);et({target:"Array",proto:!0,forced:[].forEach!=rt},{forEach:rt})},1038:(nt,it,s)=>{var et=s(2109),rt=s(8457);et({target:"Array",stat:!0,forced:!s(7072)(function(ot){Array.from(ot)})},{from:rt})},6699:(nt,it,s)=>{var et=s(2109),rt=s(1318).includes,ot=s(7293),gt=s(1223);et({target:"Array",proto:!0,forced:ot(function(){return!Array(1).includes()})},{includes:function(dt){return rt(this,dt,arguments.length>1?arguments[1]:void 0)}}),gt("includes")},2772:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(1318).indexOf,gt=s(9341),dt=rt([].indexOf),pt=!!dt&&1/dt([1],1,-0)<0,st=gt("indexOf");et({target:"Array",proto:!0,forced:pt||!st},{indexOf:function(ht){var at=arguments.length>1?arguments[1]:void 0;return pt?dt(this,ht,at)||0:ot(this,ht,at)}})},9753:(nt,it,s)=>{s(2109)({target:"Array",stat:!0},{isArray:s(3157)})},6992:(nt,it,s)=>{var et=s(5656),rt=s(1223),ot=s(7497),gt=s(9909),dt=s(3070).f,pt=s(654),st=s(1913),ht=s(9781),at="Array Iterator",ut=gt.set,ft=gt.getterFor(at);nt.exports=pt(Array,"Array",function(yt,At){ut(this,{type:at,target:et(yt),index:0,kind:At})},function(){var yt=ft(this),At=yt.target,wt=yt.kind,Pt=yt.index++;return!At||Pt>=At.length?(yt.target=void 0,{value:void 0,done:!0}):wt=="keys"?{value:Pt,done:!1}:wt=="values"?{value:At[Pt],done:!1}:{value:[Pt,At[Pt]],done:!1}},"values");var mt=ot.Arguments=ot.Array;if(rt("keys"),rt("values"),rt("entries"),!st&&ht&&mt.name!=="values")try{dt(mt,"name",{value:"values"})}catch{}},9600:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(8361),gt=s(5656),dt=s(9341),pt=rt([].join),st=ot!=Object,ht=dt("join",",");et({target:"Array",proto:!0,forced:st||!ht},{join:function(at){return pt(gt(this),at===void 0?",":at)}})},4986:(nt,it,s)=>{var et=s(2109),rt=s(6583);et({target:"Array",proto:!0,forced:rt!==[].lastIndexOf},{lastIndexOf:rt})},1249:(nt,it,s)=>{var et=s(2109),rt=s(2092).map;et({target:"Array",proto:!0,forced:!s(1194)("map")},{map:function(ot){return rt(this,ot,arguments.length>1?arguments[1]:void 0)}})},7042:(nt,it,s)=>{var et=s(2109),rt=s(3157),ot=s(4411),gt=s(111),dt=s(1400),pt=s(6244),st=s(5656),ht=s(6135),at=s(5112),ut=s(1194),ft=s(206),mt=ut("slice"),yt=at("species"),At=Array,wt=Math.max;et({target:"Array",proto:!0,forced:!mt},{slice:function(Pt,Rt){var kt,bt,Nt,Ft=st(this),Ut=pt(Ft),Jt=dt(Pt,Ut),hn=dt(Rt===void 0?Ut:Rt,Ut);if(rt(Ft)&&(kt=Ft.constructor,(ot(kt)&&(kt===At||rt(kt.prototype))||gt(kt)&&(kt=kt[yt])===null)&&(kt=void 0),kt===At||kt===void 0))return ft(Ft,Jt,hn);for(bt=new(kt===void 0?At:kt)(wt(hn-Jt,0)),Nt=0;Jt<hn;Jt++,Nt++)Jt in Ft&&ht(bt,Nt,Ft[Jt]);return bt.length=Nt,bt}})},2707:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(9662),gt=s(7908),dt=s(6244),pt=s(5117),st=s(1340),ht=s(7293),at=s(4362),ut=s(9341),ft=s(8886),mt=s(256),yt=s(7392),At=s(8008),wt=[],Pt=rt(wt.sort),Rt=rt(wt.push),kt=ht(function(){wt.sort(void 0)}),bt=ht(function(){wt.sort(null)}),Nt=ut("sort"),Ft=!ht(function(){if(yt)return yt<70;if(!(ft&&ft>3)){if(mt)return!0;if(At)return At<603;var Ut,Jt,hn,Xt,zt="";for(Ut=65;Ut<76;Ut++){switch(Jt=String.fromCharCode(Ut),Ut){case 66:case 69:case 70:case 72:hn=3;break;case 68:case 71:hn=4;break;default:hn=2}for(Xt=0;Xt<47;Xt++)wt.push({k:Jt+Xt,v:hn})}for(wt.sort(function(cn,vn){return vn.v-cn.v}),Xt=0;Xt<wt.length;Xt++)Jt=wt[Xt].k.charAt(0),zt.charAt(zt.length-1)!==Jt&&(zt+=Jt);return zt!=="DGBEFHACIJK"}});et({target:"Array",proto:!0,forced:kt||!bt||!Nt||!Ft},{sort:function(Ut){Ut!==void 0&&ot(Ut);var Jt=gt(this);if(Ft)return Ut===void 0?Pt(Jt):Pt(Jt,Ut);var hn,Xt,zt=[],cn=dt(Jt);for(Xt=0;Xt<cn;Xt++)Xt in Jt&&Rt(zt,Jt[Xt]);for(at(zt,function(vn){return function(Sn,fn){return fn===void 0?-1:Sn===void 0?1:vn!==void 0?+vn(Sn,fn)||0:st(Sn)>st(fn)?1:-1}}(Ut)),hn=zt.length,Xt=0;Xt<hn;)Jt[Xt]=zt[Xt++];for(;Xt<cn;)pt(Jt,Xt++);return Jt}})},561:(nt,it,s)=>{var et=s(2109),rt=s(7908),ot=s(1400),gt=s(9303),dt=s(6244),pt=s(7207),st=s(5417),ht=s(6135),at=s(5117),ut=s(1194)("splice"),ft=Math.max,mt=Math.min;et({target:"Array",proto:!0,forced:!ut},{splice:function(yt,At){var wt,Pt,Rt,kt,bt,Nt,Ft=rt(this),Ut=dt(Ft),Jt=ot(yt,Ut),hn=arguments.length;for(hn===0?wt=Pt=0:hn===1?(wt=0,Pt=Ut-Jt):(wt=hn-2,Pt=mt(ft(gt(At),0),Ut-Jt)),pt(Ut+wt-Pt),Rt=st(Ft,Pt),kt=0;kt<Pt;kt++)(bt=Jt+kt)in Ft&&ht(Rt,kt,Ft[bt]);if(Rt.length=Pt,wt<Pt){for(kt=Jt;kt<Ut-Pt;kt++)Nt=kt+wt,(bt=kt+Pt)in Ft?Ft[Nt]=Ft[bt]:at(Ft,Nt);for(kt=Ut;kt>Ut-Pt+wt;kt--)at(Ft,kt-1)}else if(wt>Pt)for(kt=Ut-Pt;kt>Jt;kt--)Nt=kt+wt-1,(bt=kt+Pt-1)in Ft?Ft[Nt]=Ft[bt]:at(Ft,Nt);for(kt=0;kt<wt;kt++)Ft[kt+Jt]=arguments[kt+2];return Ft.length=Ut-Pt+wt,Rt}})},3690:(nt,it,s)=>{var et=s(2109),rt=s(3331);et({global:!0,constructor:!0,forced:!s(4019)},{DataView:rt.DataView})},6716:(nt,it,s)=>{s(3690)},3843:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=Date,gt=rt(ot.prototype.getTime);et({target:"Date",stat:!0},{now:function(){return gt(new ot)}})},5268:(nt,it,s)=>{var et=s(2109),rt=s(5573);et({target:"Date",proto:!0,forced:Date.prototype.toISOString!==rt},{toISOString:rt})},5735:(nt,it,s)=>{var et=s(2109),rt=s(7293),ot=s(7908),gt=s(7593);et({target:"Date",proto:!0,arity:1,forced:rt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1})},{toJSON:function(dt){var pt=ot(this),st=gt(pt,"number");return typeof st!="number"||isFinite(st)?pt.toISOString():null}})},3710:(nt,it,s)=>{var et=s(1702),rt=s(8052),ot=Date.prototype,gt="Invalid Date",dt=et(ot.toString),pt=et(ot.getTime);String(new Date(NaN))!=gt&&rt(ot,"toString",function(){var st=pt(this);return st==st?dt(this):gt})},4812:(nt,it,s)=>{var et=s(2109),rt=s(7065);et({target:"Function",proto:!0,forced:Function.bind!==rt},{bind:rt})},8309:(nt,it,s)=>{var et=s(9781),rt=s(6530).EXISTS,ot=s(1702),gt=s(3070).f,dt=Function.prototype,pt=ot(dt.toString),st=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,ht=ot(st.exec);et&&!rt&&gt(dt,"name",{configurable:!0,get:function(){try{return ht(st,pt(this))[1]}catch{return""}}})},8862:(nt,it,s)=>{var et=s(2109),rt=s(5005),ot=s(2104),gt=s(6916),dt=s(1702),pt=s(7293),st=s(3157),ht=s(614),at=s(111),ut=s(2190),ft=s(206),mt=s(133),yt=rt("JSON","stringify"),At=dt(/./.exec),wt=dt("".charAt),Pt=dt("".charCodeAt),Rt=dt("".replace),kt=dt(1 .toString),bt=/[\uD800-\uDFFF]/g,Nt=/^[\uD800-\uDBFF]$/,Ft=/^[\uDC00-\uDFFF]$/,Ut=!mt||pt(function(){var zt=rt("Symbol")();return yt([zt])!="[null]"||yt({a:zt})!="{}"||yt(Object(zt))!="{}"}),Jt=pt(function(){return yt("\uDF06\uD834")!=='"\\udf06\\ud834"'||yt("\uDEAD")!=='"\\udead"'}),hn=function(zt,cn){var vn=ft(arguments),Sn=cn;if((at(cn)||zt!==void 0)&&!ut(zt))return st(cn)||(cn=function(fn,mn){if(ht(Sn)&&(mn=gt(Sn,this,fn,mn)),!ut(mn))return mn}),vn[1]=cn,ot(yt,null,vn)},Xt=function(zt,cn,vn){var Sn=wt(vn,cn-1),fn=wt(vn,cn+1);return At(Nt,zt)&&!At(Ft,fn)||At(Ft,zt)&&!At(Nt,Sn)?"\\u"+kt(Pt(zt,0),16):zt};yt&&et({target:"JSON",stat:!0,arity:3,forced:Ut||Jt},{stringify:function(zt,cn,vn){var Sn=ft(arguments),fn=ot(Ut?hn:yt,null,Sn);return Jt&&typeof fn=="string"?Rt(fn,bt,Xt):fn}})},3706:(nt,it,s)=>{var et=s(7854);s(8003)(et.JSON,"JSON",!0)},9098:(nt,it,s)=>{s(7710)("Map",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},1532:(nt,it,s)=>{s(9098)},658:(nt,it,s)=>{s(2109)({target:"Math",stat:!0},{log10:s(403)})},2703:(nt,it,s)=>{s(8003)(Math,"Math",!0)},9653:(nt,it,s)=>{var et=s(9781),rt=s(7854),ot=s(1702),gt=s(4705),dt=s(8052),pt=s(2597),st=s(9587),ht=s(7976),at=s(2190),ut=s(7593),ft=s(7293),mt=s(8006).f,yt=s(1236).f,At=s(3070).f,wt=s(863),Pt=s(3111).trim,Rt="Number",kt=rt.Number,bt=kt.prototype,Nt=rt.TypeError,Ft=ot("".slice),Ut=ot("".charCodeAt),Jt=function(Sn){var fn=ut(Sn,"number");return typeof fn=="bigint"?fn:hn(fn)},hn=function(Sn){var fn,mn,bn,un,Tn,kn,xn,An,En=ut(Sn,"number");if(at(En))throw Nt("Cannot convert a Symbol value to a number");if(typeof En=="string"&&En.length>2){if(En=Pt(En),(fn=Ut(En,0))===43||fn===45){if((mn=Ut(En,2))===88||mn===120)return NaN}else if(fn===48){switch(Ut(En,1)){case 66:case 98:bn=2,un=49;break;case 79:case 111:bn=8,un=55;break;default:return+En}for(kn=(Tn=Ft(En,2)).length,xn=0;xn<kn;xn++)if((An=Ut(Tn,xn))<48||An>un)return NaN;return parseInt(Tn,bn)}}return+En};if(gt(Rt,!kt(" 0o1")||!kt("0b1")||kt("+0x1"))){for(var Xt,zt=function(Sn){var fn=arguments.length<1?0:kt(Jt(Sn)),mn=this;return ht(bt,mn)&&ft(function(){wt(mn)})?st(Object(fn),mn,zt):fn},cn=et?mt(kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),vn=0;cn.length>vn;vn++)pt(kt,Xt=cn[vn])&&!pt(zt,Xt)&&At(zt,Xt,yt(kt,Xt));zt.prototype=bt,bt.constructor=zt,dt(rt,Rt,zt,{constructor:!0})}},3161:(nt,it,s)=>{s(2109)({target:"Number",stat:!0},{isInteger:s(5988)})},4363:(nt,it,s)=>{s(2109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},9601:(nt,it,s)=>{var et=s(2109),rt=s(1574);et({target:"Object",stat:!0,arity:2,forced:Object.assign!==rt},{assign:rt})},8011:(nt,it,s)=>{s(2109)({target:"Object",stat:!0,sham:!s(9781)},{create:s(30)})},9070:(nt,it,s)=>{var et=s(2109),rt=s(9781),ot=s(3070).f;et({target:"Object",stat:!0,forced:Object.defineProperty!==ot,sham:!rt},{defineProperty:ot})},9720:(nt,it,s)=>{var et=s(2109),rt=s(4699).entries;et({target:"Object",stat:!0},{entries:function(ot){return rt(ot)}})},5003:(nt,it,s)=>{var et=s(2109),rt=s(7293),ot=s(5656),gt=s(1236).f,dt=s(9781),pt=rt(function(){gt(1)});et({target:"Object",stat:!0,forced:!dt||pt,sham:!dt},{getOwnPropertyDescriptor:function(st,ht){return gt(ot(st),ht)}})},9660:(nt,it,s)=>{var et=s(2109),rt=s(133),ot=s(7293),gt=s(5181),dt=s(7908);et({target:"Object",stat:!0,forced:!rt||ot(function(){gt.f(1)})},{getOwnPropertySymbols:function(pt){var st=gt.f;return st?st(dt(pt)):[]}})},489:(nt,it,s)=>{var et=s(2109),rt=s(7293),ot=s(7908),gt=s(9518),dt=s(8544);et({target:"Object",stat:!0,forced:rt(function(){gt(1)}),sham:!dt},{getPrototypeOf:function(pt){return gt(ot(pt))}})},7941:(nt,it,s)=>{var et=s(2109),rt=s(7908),ot=s(1956);et({target:"Object",stat:!0,forced:s(7293)(function(){ot(1)})},{keys:function(gt){return ot(rt(gt))}})},8304:(nt,it,s)=>{s(2109)({target:"Object",stat:!0},{setPrototypeOf:s(7674)})},1539:(nt,it,s)=>{var et=s(1694),rt=s(8052),ot=s(288);et||rt(Object.prototype,"toString",ot,{unsafe:!0})},2479:(nt,it,s)=>{var et=s(2109),rt=s(4699).values;et({target:"Object",stat:!0},{values:function(ot){return rt(ot)}})},1058:(nt,it,s)=>{var et=s(2109),rt=s(3009);et({global:!0,forced:parseInt!=rt},{parseInt:rt})},821:(nt,it,s)=>{var et=s(2109),rt=s(6916),ot=s(9662),gt=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{all:function(st){var ht=this,at=gt.f(ht),ut=at.resolve,ft=at.reject,mt=dt(function(){var yt=ot(ht.resolve),At=[],wt=0,Pt=1;pt(st,function(Rt){var kt=wt++,bt=!1;Pt++,rt(yt,ht,Rt).then(function(Nt){bt||(bt=!0,At[kt]=Nt,--Pt||ut(At))},ft)}),--Pt||ut(At)});return mt.error&&ft(mt.value),at.promise}})},4164:(nt,it,s)=>{var et=s(2109),rt=s(1913),ot=s(3702).CONSTRUCTOR,gt=s(2492),dt=s(5005),pt=s(614),st=s(8052),ht=gt&&gt.prototype;if(et({target:"Promise",proto:!0,forced:ot,real:!0},{catch:function(ut){return this.then(void 0,ut)}}),!rt&&pt(gt)){var at=dt("Promise").prototype.catch;ht.catch!==at&&st(ht,"catch",at,{unsafe:!0})}},3401:(nt,it,s)=>{var et,rt,ot,gt=s(2109),dt=s(1913),pt=s(2805),st=s(7854),ht=s(6916),at=s(8052),ut=s(7674),ft=s(8003),mt=s(6340),yt=s(9662),At=s(614),wt=s(111),Pt=s(5787),Rt=s(6707),kt=s(261).set,bt=s(5948),Nt=s(842),Ft=s(2534),Ut=s(8572),Jt=s(9909),hn=s(2492),Xt=s(3702),zt=s(8523),cn="Promise",vn=Xt.CONSTRUCTOR,Sn=Xt.REJECTION_EVENT,fn=Xt.SUBCLASSING,mn=Jt.getterFor(cn),bn=Jt.set,un=hn&&hn.prototype,Tn=hn,kn=un,xn=st.TypeError,An=st.document,En=st.process,Rn=zt.f,wn=Rn,Dn=!!(An&&An.createEvent&&st.dispatchEvent),Bn="unhandledrejection",zn=function(Nn){var Un;return!(!wt(Nn)||!At(Un=Nn.then))&&Un},Hn=function(Nn,Un){var Cn,Mn,Kt,Ot=Un.value,lt=Un.state==1,Tt=lt?Nn.ok:Nn.fail,It=Nn.resolve,Dt=Nn.reject,Et=Nn.domain;try{Tt?(lt||(Un.rejection===2&&rr(Un),Un.rejection=1),Tt===!0?Cn=Ot:(Et&&Et.enter(),Cn=Tt(Ot),Et&&(Et.exit(),Kt=!0)),Cn===Nn.promise?Dt(xn("Promise-chain cycle")):(Mn=zn(Cn))?ht(Mn,Cn,It,Dt):It(Cn)):Dt(Ot)}catch($t){Et&&!Kt&&Et.exit(),Dt($t)}},nr=function(Nn,Un){Nn.notified||(Nn.notified=!0,bt(function(){for(var Cn,Mn=Nn.reactions;Cn=Mn.get();)Hn(Cn,Nn);Nn.notified=!1,Un&&!Nn.rejection&&Gn(Nn)}))},sn=function(Nn,Un,Cn){var Mn,Kt;Dn?((Mn=An.createEvent("Event")).promise=Un,Mn.reason=Cn,Mn.initEvent(Nn,!1,!0),st.dispatchEvent(Mn)):Mn={promise:Un,reason:Cn},!Sn&&(Kt=st["on"+Nn])?Kt(Mn):Nn===Bn&&Nt("Unhandled promise rejection",Cn)},Gn=function(Nn){ht(kt,st,function(){var Un,Cn=Nn.facade,Mn=Nn.value;if(Zn(Nn)&&(Un=Ft(function(){pt?En.emit("unhandledRejection",Mn,Cn):sn(Bn,Cn,Mn)}),Nn.rejection=pt||Zn(Nn)?2:1,Un.error))throw Un.value})},Zn=function(Nn){return Nn.rejection!==1&&!Nn.parent},rr=function(Nn){ht(kt,st,function(){var Un=Nn.facade;pt?En.emit("rejectionHandled",Un):sn("rejectionhandled",Un,Nn.value)})},Fn=function(Nn,Un,Cn){return function(Mn){Nn(Un,Mn,Cn)}},Xn=function(Nn,Un,Cn){Nn.done||(Nn.done=!0,Cn&&(Nn=Cn),Nn.value=Un,Nn.state=2,nr(Nn,!0))},Yn=function(Nn,Un,Cn){if(!Nn.done){Nn.done=!0,Cn&&(Nn=Cn);try{if(Nn.facade===Un)throw xn("Promise can't be resolved itself");var Mn=zn(Un);Mn?bt(function(){var Kt={done:!1};try{ht(Mn,Un,Fn(Yn,Kt,Nn),Fn(Xn,Kt,Nn))}catch(Ot){Xn(Kt,Ot,Nn)}}):(Nn.value=Un,Nn.state=1,nr(Nn,!1))}catch(Kt){Xn({done:!1},Kt,Nn)}}};if(vn&&(kn=(Tn=function(Nn){Pt(this,kn),yt(Nn),ht(et,this);var Un=mn(this);try{Nn(Fn(Yn,Un),Fn(Xn,Un))}catch(Cn){Xn(Un,Cn)}}).prototype,(et=function(Nn){bn(this,{type:cn,done:!1,notified:!1,parent:!1,reactions:new Ut,rejection:!1,state:0,value:void 0})}).prototype=at(kn,"then",function(Nn,Un){var Cn=mn(this),Mn=Rn(Rt(this,Tn));return Cn.parent=!0,Mn.ok=!At(Nn)||Nn,Mn.fail=At(Un)&&Un,Mn.domain=pt?En.domain:void 0,Cn.state==0?Cn.reactions.add(Mn):bt(function(){Hn(Mn,Cn)}),Mn.promise}),rt=function(){var Nn=new et,Un=mn(Nn);this.promise=Nn,this.resolve=Fn(Yn,Un),this.reject=Fn(Xn,Un)},zt.f=Rn=function(Nn){return Nn===Tn||Nn===void 0?new rt(Nn):wn(Nn)},!dt&&At(hn)&&un!==Object.prototype)){ot=un.then,fn||at(un,"then",function(Nn,Un){var Cn=this;return new Tn(function(Mn,Kt){ht(ot,Cn,Mn,Kt)}).then(Nn,Un)},{unsafe:!0});try{delete un.constructor}catch{}ut&&ut(un,kn)}gt({global:!0,constructor:!0,wrap:!0,forced:vn},{Promise:Tn}),ft(Tn,cn,!1,!0),mt(cn)},8674:(nt,it,s)=>{s(3401),s(821),s(4164),s(6027),s(683),s(6294)},6027:(nt,it,s)=>{var et=s(2109),rt=s(6916),ot=s(9662),gt=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{race:function(st){var ht=this,at=gt.f(ht),ut=at.reject,ft=dt(function(){var mt=ot(ht.resolve);pt(st,function(yt){rt(mt,ht,yt).then(at.resolve,ut)})});return ft.error&&ut(ft.value),at.promise}})},683:(nt,it,s)=>{var et=s(2109),rt=s(6916),ot=s(8523);et({target:"Promise",stat:!0,forced:s(3702).CONSTRUCTOR},{reject:function(gt){var dt=ot.f(this);return rt(dt.reject,void 0,gt),dt.promise}})},6294:(nt,it,s)=>{var et=s(2109),rt=s(5005),ot=s(1913),gt=s(2492),dt=s(3702).CONSTRUCTOR,pt=s(9478),st=rt("Promise"),ht=ot&&!dt;et({target:"Promise",stat:!0,forced:ot||dt},{resolve:function(at){return pt(ht&&this===st?gt:this,at)}})},2419:(nt,it,s)=>{var et=s(2109),rt=s(5005),ot=s(2104),gt=s(7065),dt=s(9483),pt=s(9670),st=s(111),ht=s(30),at=s(7293),ut=rt("Reflect","construct"),ft=Object.prototype,mt=[].push,yt=at(function(){function Pt(){}return!(ut(function(){},[],Pt)instanceof Pt)}),At=!at(function(){ut(function(){})}),wt=yt||At;et({target:"Reflect",stat:!0,forced:wt,sham:wt},{construct:function(Pt,Rt){dt(Pt),pt(Rt);var kt=arguments.length<3?Pt:dt(arguments[2]);if(At&&!yt)return ut(Pt,Rt,kt);if(Pt==kt){switch(Rt.length){case 0:return new Pt;case 1:return new Pt(Rt[0]);case 2:return new Pt(Rt[0],Rt[1]);case 3:return new Pt(Rt[0],Rt[1],Rt[2]);case 4:return new Pt(Rt[0],Rt[1],Rt[2],Rt[3])}var bt=[null];return ot(mt,bt,Rt),new(ot(gt,Pt,bt))}var Nt=kt.prototype,Ft=ht(st(Nt)?Nt:ft),Ut=ot(Pt,Ft,Rt);return st(Ut)?Ut:Ft}})},4819:(nt,it,s)=>{var et=s(2109),rt=s(6916),ot=s(111),gt=s(9670),dt=s(5032),pt=s(1236),st=s(9518);et({target:"Reflect",stat:!0},{get:function ht(at,ut){var ft,mt,yt=arguments.length<3?at:arguments[2];return gt(at)===yt?at[ut]:(ft=pt.f(at,ut))?dt(ft)?ft.value:ft.get===void 0?void 0:rt(ft.get,yt):ot(mt=st(at))?ht(mt,ut,yt):void 0}})},4603:(nt,it,s)=>{var et=s(9781),rt=s(7854),ot=s(1702),gt=s(4705),dt=s(9587),pt=s(8880),st=s(8006).f,ht=s(7976),at=s(7850),ut=s(1340),ft=s(4706),mt=s(2999),yt=s(2626),At=s(8052),wt=s(7293),Pt=s(2597),Rt=s(9909).enforce,kt=s(6340),bt=s(5112),Nt=s(9441),Ft=s(7168),Ut=bt("match"),Jt=rt.RegExp,hn=Jt.prototype,Xt=rt.SyntaxError,zt=ot(hn.exec),cn=ot("".charAt),vn=ot("".replace),Sn=ot("".indexOf),fn=ot("".slice),mn=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,bn=/a/g,un=/a/g,Tn=new Jt(bn)!==bn,kn=mt.MISSED_STICKY,xn=mt.UNSUPPORTED_Y;if(gt("RegExp",et&&(!Tn||kn||Nt||Ft||wt(function(){return un[Ut]=!1,Jt(bn)!=bn||Jt(un)==un||Jt(bn,"i")!="/a/i"})))){for(var An=function(wn,Dn){var Bn,zn,Hn,nr,sn,Gn,Zn=ht(hn,this),rr=at(wn),Fn=Dn===void 0,Xn=[],Yn=wn;if(!Zn&&rr&&Fn&&wn.constructor===An)return wn;if((rr||ht(hn,wn))&&(wn=wn.source,Fn&&(Dn=ft(Yn))),wn=wn===void 0?"":ut(wn),Dn=Dn===void 0?"":ut(Dn),Yn=wn,Nt&&"dotAll"in bn&&(zn=!!Dn&&Sn(Dn,"s")>-1)&&(Dn=vn(Dn,/s/g,"")),Bn=Dn,kn&&"sticky"in bn&&(Hn=!!Dn&&Sn(Dn,"y")>-1)&&xn&&(Dn=vn(Dn,/y/g,"")),Ft&&(nr=function(Nn){for(var Un,Cn=Nn.length,Mn=0,Kt="",Ot=[],lt={},Tt=!1,It=!1,Dt=0,Et="";Mn<=Cn;Mn++){if((Un=cn(Nn,Mn))==="\\")Un+=cn(Nn,++Mn);else if(Un==="]")Tt=!1;else if(!Tt)switch(!0){case Un==="[":Tt=!0;break;case Un==="(":zt(mn,fn(Nn,Mn+1))&&(Mn+=2,It=!0),Kt+=Un,Dt++;continue;case(Un===">"&&It):if(Et===""||Pt(lt,Et))throw new Xt("Invalid capture group name");lt[Et]=!0,Ot[Ot.length]=[Et,Dt],It=!1,Et="";continue}It?Et+=Un:Kt+=Un}return[Kt,Ot]}(wn),wn=nr[0],Xn=nr[1]),sn=dt(Jt(wn,Dn),Zn?this:hn,An),(zn||Hn||Xn.length)&&(Gn=Rt(sn),zn&&(Gn.dotAll=!0,Gn.raw=An(function(Nn){for(var Un,Cn=Nn.length,Mn=0,Kt="",Ot=!1;Mn<=Cn;Mn++)(Un=cn(Nn,Mn))!=="\\"?Ot||Un!=="."?(Un==="["?Ot=!0:Un==="]"&&(Ot=!1),Kt+=Un):Kt+="[\\s\\S]":Kt+=Un+cn(Nn,++Mn);return Kt}(wn),Bn)),Hn&&(Gn.sticky=!0),Xn.length&&(Gn.groups=Xn)),wn!==Yn)try{pt(sn,"source",Yn===""?"(?:)":Yn)}catch{}return sn},En=st(Jt),Rn=0;En.length>Rn;)yt(An,Jt,En[Rn++]);hn.constructor=An,An.prototype=hn,At(rt,"RegExp",An,{constructor:!0})}kt("RegExp")},4916:(nt,it,s)=>{var et=s(2109),rt=s(2261);et({target:"RegExp",proto:!0,forced:/./.exec!==rt},{exec:rt})},9714:(nt,it,s)=>{var et=s(6530).PROPER,rt=s(8052),ot=s(9670),gt=s(1340),dt=s(7293),pt=s(4706),st="toString",ht=RegExp.prototype.toString,at=dt(function(){return ht.call({source:"a",flags:"b"})!="/a/b"}),ut=et&&ht.name!=st;(at||ut)&&rt(RegExp.prototype,st,function(){var ft=ot(this);return"/"+gt(ft.source)+"/"+gt(pt(ft))},{unsafe:!0})},7227:(nt,it,s)=>{s(7710)("Set",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},189:(nt,it,s)=>{s(7227)},2023:(nt,it,s)=>{var et=s(2109),rt=s(1702),ot=s(3929),gt=s(4488),dt=s(1340),pt=s(4964),st=rt("".indexOf);et({target:"String",proto:!0,forced:!pt("includes")},{includes:function(ht){return!!~st(dt(gt(this)),dt(ot(ht)),arguments.length>1?arguments[1]:void 0)}})},8783:(nt,it,s)=>{var et=s(8710).charAt,rt=s(1340),ot=s(9909),gt=s(654),dt="String Iterator",pt=ot.set,st=ot.getterFor(dt);gt(String,"String",function(ht){pt(this,{type:dt,string:rt(ht),index:0})},function(){var ht,at=st(this),ut=at.string,ft=at.index;return ft>=ut.length?{value:void 0,done:!0}:(ht=et(ut,ft),at.index+=ht.length,{value:ht,done:!1})})},4723:(nt,it,s)=>{var et=s(6916),rt=s(7007),ot=s(9670),gt=s(7466),dt=s(1340),pt=s(4488),st=s(8173),ht=s(1530),at=s(7651);rt("match",function(ut,ft,mt){return[function(yt){var At=pt(this),wt=yt==null?void 0:st(yt,ut);return wt?et(wt,yt,At):new RegExp(yt)[ut](dt(At))},function(yt){var At=ot(this),wt=dt(yt),Pt=mt(ft,At,wt);if(Pt.done)return Pt.value;if(!At.global)return at(At,wt);var Rt=At.unicode;At.lastIndex=0;for(var kt,bt=[],Nt=0;(kt=at(At,wt))!==null;){var Ft=dt(kt[0]);bt[Nt]=Ft,Ft===""&&(At.lastIndex=ht(wt,gt(At.lastIndex),Rt)),Nt++}return Nt===0?null:bt}]})},5306:(nt,it,s)=>{var et=s(2104),rt=s(6916),ot=s(1702),gt=s(7007),dt=s(7293),pt=s(9670),st=s(614),ht=s(9303),at=s(7466),ut=s(1340),ft=s(4488),mt=s(1530),yt=s(8173),At=s(647),wt=s(7651),Pt=s(5112)("replace"),Rt=Math.max,kt=Math.min,bt=ot([].concat),Nt=ot([].push),Ft=ot("".indexOf),Ut=ot("".slice),Jt="a".replace(/./,"$0")==="$0",hn=!!/./[Pt]&&/./[Pt]("a","$0")==="";gt("replace",function(Xt,zt,cn){var vn=hn?"$":"$0";return[function(Sn,fn){var mn=ft(this),bn=Sn==null?void 0:yt(Sn,Pt);return bn?rt(bn,Sn,mn,fn):rt(zt,ut(mn),Sn,fn)},function(Sn,fn){var mn=pt(this),bn=ut(Sn);if(typeof fn=="string"&&Ft(fn,vn)===-1&&Ft(fn,"$<")===-1){var un=cn(zt,mn,bn,fn);if(un.done)return un.value}var Tn=st(fn);Tn||(fn=ut(fn));var kn=mn.global;if(kn){var xn=mn.unicode;mn.lastIndex=0}for(var An=[];;){var En=wt(mn,bn);if(En===null||(Nt(An,En),!kn))break;ut(En[0])===""&&(mn.lastIndex=mt(bn,at(mn.lastIndex),xn))}for(var Rn,wn="",Dn=0,Bn=0;Bn<An.length;Bn++){for(var zn=ut((En=An[Bn])[0]),Hn=Rt(kt(ht(En.index),bn.length),0),nr=[],sn=1;sn<En.length;sn++)Nt(nr,(Rn=En[sn])===void 0?Rn:String(Rn));var Gn=En.groups;if(Tn){var Zn=bt([zn],nr,Hn,bn);Gn!==void 0&&Nt(Zn,Gn);var rr=ut(et(fn,void 0,Zn))}else rr=At(zn,bn,Hn,nr,Gn,fn);Hn>=Dn&&(wn+=Ut(bn,Dn,Hn)+rr,Dn=Hn+zn.length)}return wn+Ut(bn,Dn)}]},!!dt(function(){var Xt=/./;return Xt.exec=function(){var zt=[];return zt.groups={a:"7"},zt},"".replace(Xt,"$<a>")!=="7"})||!Jt||hn)},4765:(nt,it,s)=>{var et=s(6916),rt=s(7007),ot=s(9670),gt=s(4488),dt=s(1150),pt=s(1340),st=s(8173),ht=s(7651);rt("search",function(at,ut,ft){return[function(mt){var yt=gt(this),At=mt==null?void 0:st(mt,at);return At?et(At,mt,yt):new RegExp(mt)[at](pt(yt))},function(mt){var yt=ot(this),At=pt(mt),wt=ft(ut,yt,At);if(wt.done)return wt.value;var Pt=yt.lastIndex;dt(Pt,0)||(yt.lastIndex=0);var Rt=ht(yt,At);return dt(yt.lastIndex,Pt)||(yt.lastIndex=Pt),Rt===null?-1:Rt.index}]})},3123:(nt,it,s)=>{var et=s(2104),rt=s(6916),ot=s(1702),gt=s(7007),dt=s(7850),pt=s(9670),st=s(4488),ht=s(6707),at=s(1530),ut=s(7466),ft=s(1340),mt=s(8173),yt=s(1589),At=s(7651),wt=s(2261),Pt=s(2999),Rt=s(7293),kt=Pt.UNSUPPORTED_Y,bt=4294967295,Nt=Math.min,Ft=[].push,Ut=ot(/./.exec),Jt=ot(Ft),hn=ot("".slice);gt("split",function(Xt,zt,cn){var vn;return vn="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Sn,fn){var mn=ft(st(this)),bn=fn===void 0?bt:fn>>>0;if(bn===0)return[];if(Sn===void 0)return[mn];if(!dt(Sn))return rt(zt,mn,Sn,bn);for(var un,Tn,kn,xn=[],An=(Sn.ignoreCase?"i":"")+(Sn.multiline?"m":"")+(Sn.unicode?"u":"")+(Sn.sticky?"y":""),En=0,Rn=new RegExp(Sn.source,An+"g");(un=rt(wt,Rn,mn))&&!((Tn=Rn.lastIndex)>En&&(Jt(xn,hn(mn,En,un.index)),un.length>1&&un.index<mn.length&&et(Ft,xn,yt(un,1)),kn=un[0].length,En=Tn,xn.length>=bn));)Rn.lastIndex===un.index&&Rn.lastIndex++;return En===mn.length?!kn&&Ut(Rn,"")||Jt(xn,""):Jt(xn,hn(mn,En)),xn.length>bn?yt(xn,0,bn):xn}:"0".split(void 0,0).length?function(Sn,fn){return Sn===void 0&&fn===0?[]:rt(zt,this,Sn,fn)}:zt,[function(Sn,fn){var mn=st(this),bn=Sn==null?void 0:mt(Sn,Xt);return bn?rt(bn,Sn,mn,fn):rt(vn,ft(mn),Sn,fn)},function(Sn,fn){var mn=pt(this),bn=ft(Sn),un=cn(vn,mn,bn,fn,vn!==zt);if(un.done)return un.value;var Tn=ht(mn,RegExp),kn=mn.unicode,xn=(mn.ignoreCase?"i":"")+(mn.multiline?"m":"")+(mn.unicode?"u":"")+(kt?"g":"y"),An=new Tn(kt?"^(?:"+mn.source+")":mn,xn),En=fn===void 0?bt:fn>>>0;if(En===0)return[];if(bn.length===0)return At(An,bn)===null?[bn]:[];for(var Rn=0,wn=0,Dn=[];wn<bn.length;){An.lastIndex=kt?0:wn;var Bn,zn=At(An,kt?hn(bn,wn):bn);if(zn===null||(Bn=Nt(ut(An.lastIndex+(kt?wn:0)),bn.length))===Rn)wn=at(bn,wn,kn);else{if(Jt(Dn,hn(bn,Rn,wn)),Dn.length===En)return Dn;for(var Hn=1;Hn<=zn.length-1;Hn++)if(Jt(Dn,zn[Hn]),Dn.length===En)return Dn;wn=Rn=Bn}}return Jt(Dn,hn(bn,Rn)),Dn}]},!!Rt(function(){var Xt=/(?:)/,zt=Xt.exec;Xt.exec=function(){return zt.apply(this,arguments)};var cn="ab".split(Xt);return cn.length!==2||cn[0]!=="a"||cn[1]!=="b"}),kt)},6755:(nt,it,s)=>{var et,rt=s(2109),ot=s(1702),gt=s(1236).f,dt=s(7466),pt=s(1340),st=s(3929),ht=s(4488),at=s(4964),ut=s(1913),ft=ot("".startsWith),mt=ot("".slice),yt=Math.min,At=at("startsWith");rt({target:"String",proto:!0,forced:!(!ut&&!At&&(et=gt(String.prototype,"startsWith"),et&&!et.writable)||At)},{startsWith:function(wt){var Pt=pt(ht(this));st(wt);var Rt=dt(yt(arguments.length>1?arguments[1]:void 0,Pt.length)),kt=pt(wt);return ft?ft(Pt,kt,Rt):mt(Pt,Rt,Rt+kt.length)===kt}})},2443:(nt,it,s)=>{s(7235)("asyncIterator")},4032:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(6916),gt=s(1702),dt=s(1913),pt=s(9781),st=s(133),ht=s(7293),at=s(2597),ut=s(7976),ft=s(9670),mt=s(5656),yt=s(4948),At=s(1340),wt=s(9114),Pt=s(30),Rt=s(1956),kt=s(8006),bt=s(1156),Nt=s(5181),Ft=s(1236),Ut=s(3070),Jt=s(6048),hn=s(5296),Xt=s(8052),zt=s(2309),cn=s(6200),vn=s(3501),Sn=s(9711),fn=s(5112),mn=s(6061),bn=s(7235),un=s(6532),Tn=s(8003),kn=s(9909),xn=s(2092).forEach,An=cn("hidden"),En="Symbol",Rn=kn.set,wn=kn.getterFor(En),Dn=Object.prototype,Bn=rt.Symbol,zn=Bn&&Bn.prototype,Hn=rt.TypeError,nr=rt.QObject,sn=Ft.f,Gn=Ut.f,Zn=bt.f,rr=hn.f,Fn=gt([].push),Xn=zt("symbols"),Yn=zt("op-symbols"),Nn=zt("wks"),Un=!nr||!nr.prototype||!nr.prototype.findChild,Cn=pt&&ht(function(){return Pt(Gn({},"a",{get:function(){return Gn(this,"a",{value:7}).a}})).a!=7})?function(Et,$t,xt){var Vt=sn(Dn,$t);Vt&&delete Dn[$t],Gn(Et,$t,xt),Vt&&Et!==Dn&&Gn(Dn,$t,Vt)}:Gn,Mn=function(Et,$t){var xt=Xn[Et]=Pt(zn);return Rn(xt,{type:En,tag:Et,description:$t}),pt||(xt.description=$t),xt},Kt=function(Et,$t,xt){Et===Dn&&Kt(Yn,$t,xt),ft(Et);var Vt=yt($t);return ft(xt),at(Xn,Vt)?(xt.enumerable?(at(Et,An)&&Et[An][Vt]&&(Et[An][Vt]=!1),xt=Pt(xt,{enumerable:wt(0,!1)})):(at(Et,An)||Gn(Et,An,wt(1,{})),Et[An][Vt]=!0),Cn(Et,Vt,xt)):Gn(Et,Vt,xt)},Ot=function(Et,$t){ft(Et);var xt=mt($t),Vt=Rt(xt).concat(Dt(xt));return xn(Vt,function(Zt){pt&&!ot(lt,xt,Zt)||Kt(Et,Zt,xt[Zt])}),Et},lt=function(Et){var $t=yt(Et),xt=ot(rr,this,$t);return!(this===Dn&&at(Xn,$t)&&!at(Yn,$t))&&(!(xt||!at(this,$t)||!at(Xn,$t)||at(this,An)&&this[An][$t])||xt)},Tt=function(Et,$t){var xt=mt(Et),Vt=yt($t);if(xt!==Dn||!at(Xn,Vt)||at(Yn,Vt)){var Zt=sn(xt,Vt);return!Zt||!at(Xn,Vt)||at(xt,An)&&xt[An][Vt]||(Zt.enumerable=!0),Zt}},It=function(Et){var $t=Zn(mt(Et)),xt=[];return xn($t,function(Vt){at(Xn,Vt)||at(vn,Vt)||Fn(xt,Vt)}),xt},Dt=function(Et){var $t=Et===Dn,xt=Zn($t?Yn:mt(Et)),Vt=[];return xn(xt,function(Zt){!at(Xn,Zt)||$t&&!at(Dn,Zt)||Fn(Vt,Xn[Zt])}),Vt};st||(Xt(zn=(Bn=function(){if(ut(zn,this))throw Hn("Symbol is not a constructor");var Et=arguments.length&&arguments[0]!==void 0?At(arguments[0]):void 0,$t=Sn(Et),xt=function(Vt){this===Dn&&ot(xt,Yn,Vt),at(this,An)&&at(this[An],$t)&&(this[An][$t]=!1),Cn(this,$t,wt(1,Vt))};return pt&&Un&&Cn(Dn,$t,{configurable:!0,set:xt}),Mn($t,Et)}).prototype,"toString",function(){return wn(this).tag}),Xt(Bn,"withoutSetter",function(Et){return Mn(Sn(Et),Et)}),hn.f=lt,Ut.f=Kt,Jt.f=Ot,Ft.f=Tt,kt.f=bt.f=It,Nt.f=Dt,mn.f=function(Et){return Mn(fn(Et),Et)},pt&&(Gn(zn,"description",{configurable:!0,get:function(){return wn(this).description}}),dt||Xt(Dn,"propertyIsEnumerable",lt,{unsafe:!0}))),et({global:!0,constructor:!0,wrap:!0,forced:!st,sham:!st},{Symbol:Bn}),xn(Rt(Nn),function(Et){bn(Et)}),et({target:En,stat:!0,forced:!st},{useSetter:function(){Un=!0},useSimple:function(){Un=!1}}),et({target:"Object",stat:!0,forced:!st,sham:!pt},{create:function(Et,$t){return $t===void 0?Pt(Et):Ot(Pt(Et),$t)},defineProperty:Kt,defineProperties:Ot,getOwnPropertyDescriptor:Tt}),et({target:"Object",stat:!0,forced:!st},{getOwnPropertyNames:It}),un(),Tn(Bn,En),vn[An]=!0},1817:(nt,it,s)=>{var et=s(2109),rt=s(9781),ot=s(7854),gt=s(1702),dt=s(2597),pt=s(614),st=s(7976),ht=s(1340),at=s(3070).f,ut=s(9920),ft=ot.Symbol,mt=ft&&ft.prototype;if(rt&&pt(ft)&&(!("description"in mt)||ft().description!==void 0)){var yt={},At=function(){var Ft=arguments.length<1||arguments[0]===void 0?void 0:ht(arguments[0]),Ut=st(mt,this)?new ft(Ft):Ft===void 0?ft():ft(Ft);return Ft===""&&(yt[Ut]=!0),Ut};ut(At,ft),At.prototype=mt,mt.constructor=At;var wt=String(ft("test"))=="Symbol(test)",Pt=gt(mt.toString),Rt=gt(mt.valueOf),kt=/^Symbol\((.*)\)[^)]+$/,bt=gt("".replace),Nt=gt("".slice);at(mt,"description",{configurable:!0,get:function(){var Ft=Rt(this),Ut=Pt(Ft);if(dt(yt,Ft))return"";var Jt=wt?Nt(Ut,7,-1):bt(Ut,kt,"$1");return Jt===""?void 0:Jt}}),et({global:!0,constructor:!0,forced:!0},{Symbol:At})}},763:(nt,it,s)=>{var et=s(2109),rt=s(5005),ot=s(2597),gt=s(1340),dt=s(2309),pt=s(735),st=dt("string-to-symbol-registry"),ht=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{for:function(at){var ut=gt(at);if(ot(st,ut))return st[ut];var ft=rt("Symbol")(ut);return st[ut]=ft,ht[ft]=ut,ft}})},2165:(nt,it,s)=>{s(7235)("iterator")},2526:(nt,it,s)=>{s(4032),s(763),s(6620),s(8862),s(9660)},6620:(nt,it,s)=>{var et=s(2109),rt=s(2597),ot=s(2190),gt=s(6330),dt=s(2309),pt=s(735),st=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{keyFor:function(ht){if(!ot(ht))throw TypeError(gt(ht)+" is not a symbol");if(rt(st,ht))return st[ht]}})},3680:(nt,it,s)=>{var et=s(5005),rt=s(7235),ot=s(8003);rt("toStringTag"),ot(et("Symbol"),"Symbol")},2990:(nt,it,s)=>{var et=s(1702),rt=s(260),ot=et(s(1048)),gt=rt.aTypedArray;(0,rt.exportTypedArrayMethod)("copyWithin",function(dt,pt){return ot(gt(this),dt,pt,arguments.length>2?arguments[2]:void 0)})},8927:(nt,it,s)=>{var et=s(260),rt=s(2092).every,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("every",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},3105:(nt,it,s)=>{var et=s(260),rt=s(1285),ot=s(4599),gt=s(648),dt=s(6916),pt=s(1702),st=s(7293),ht=et.aTypedArray,at=et.exportTypedArrayMethod,ut=pt("".slice);at("fill",function(ft){var mt=arguments.length;ht(this);var yt=ut(gt(this),0,3)==="Big"?ot(ft):+ft;return dt(rt,this,yt,mt>1?arguments[1]:void 0,mt>2?arguments[2]:void 0)},st(function(){var ft=0;return new Int8Array(2).fill({valueOf:function(){return ft++}}),ft!==1}))},5035:(nt,it,s)=>{var et=s(260),rt=s(2092).filter,ot=s(3074),gt=et.aTypedArray;(0,et.exportTypedArrayMethod)("filter",function(dt){var pt=rt(gt(this),dt,arguments.length>1?arguments[1]:void 0);return ot(this,pt)})},7174:(nt,it,s)=>{var et=s(260),rt=s(2092).findIndex,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("findIndex",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},4345:(nt,it,s)=>{var et=s(260),rt=s(2092).find,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("find",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},2846:(nt,it,s)=>{var et=s(260),rt=s(2092).forEach,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("forEach",function(gt){rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},4731:(nt,it,s)=>{var et=s(260),rt=s(1318).includes,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("includes",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},7209:(nt,it,s)=>{var et=s(260),rt=s(1318).indexOf,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("indexOf",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},6319:(nt,it,s)=>{var et=s(7854),rt=s(7293),ot=s(1702),gt=s(260),dt=s(6992),pt=s(5112)("iterator"),st=et.Uint8Array,ht=ot(dt.values),at=ot(dt.keys),ut=ot(dt.entries),ft=gt.aTypedArray,mt=gt.exportTypedArrayMethod,yt=st&&st.prototype,At=!rt(function(){yt[pt].call([1])}),wt=!!yt&&yt.values&&yt[pt]===yt.values&&yt.values.name==="values",Pt=function(){return ht(ft(this))};mt("entries",function(){return ut(ft(this))},At),mt("keys",function(){return at(ft(this))},At),mt("values",Pt,At||!wt,{name:"values"}),mt(pt,Pt,At||!wt,{name:"values"})},8867:(nt,it,s)=>{var et=s(260),rt=s(1702),ot=et.aTypedArray,gt=et.exportTypedArrayMethod,dt=rt([].join);gt("join",function(pt){return dt(ot(this),pt)})},7789:(nt,it,s)=>{var et=s(260),rt=s(2104),ot=s(6583),gt=et.aTypedArray;(0,et.exportTypedArrayMethod)("lastIndexOf",function(dt){var pt=arguments.length;return rt(ot,gt(this),pt>1?[dt,arguments[1]]:[dt])})},3739:(nt,it,s)=>{var et=s(260),rt=s(2092).map,ot=s(6304),gt=et.aTypedArray;(0,et.exportTypedArrayMethod)("map",function(dt){return rt(gt(this),dt,arguments.length>1?arguments[1]:void 0,function(pt,st){return new(ot(pt))(st)})})},4483:(nt,it,s)=>{var et=s(260),rt=s(3671).right,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduceRight",function(gt){var dt=arguments.length;return rt(ot(this),gt,dt,dt>1?arguments[1]:void 0)})},9368:(nt,it,s)=>{var et=s(260),rt=s(3671).left,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduce",function(gt){var dt=arguments.length;return rt(ot(this),gt,dt,dt>1?arguments[1]:void 0)})},2056:(nt,it,s)=>{var et=s(260),rt=et.aTypedArray,ot=et.exportTypedArrayMethod,gt=Math.floor;ot("reverse",function(){for(var dt,pt=this,st=rt(pt).length,ht=gt(st/2),at=0;at<ht;)dt=pt[at],pt[at++]=pt[--st],pt[st]=dt;return pt})},3462:(nt,it,s)=>{var et=s(7854),rt=s(6916),ot=s(260),gt=s(6244),dt=s(4590),pt=s(7908),st=s(7293),ht=et.RangeError,at=et.Int8Array,ut=at&&at.prototype,ft=ut&&ut.set,mt=ot.aTypedArray,yt=ot.exportTypedArrayMethod,At=!st(function(){var Pt=new Uint8ClampedArray(2);return rt(ft,Pt,{length:1,0:3},1),Pt[1]!==3}),wt=At&&ot.NATIVE_ARRAY_BUFFER_VIEWS&&st(function(){var Pt=new at(2);return Pt.set(1),Pt.set("2",1),Pt[0]!==0||Pt[1]!==2});yt("set",function(Pt){mt(this);var Rt=dt(arguments.length>1?arguments[1]:void 0,1),kt=pt(Pt);if(At)return rt(ft,this,kt,Rt);var bt=this.length,Nt=gt(kt),Ft=0;if(Nt+Rt>bt)throw ht("Wrong length");for(;Ft<Nt;)this[Rt+Ft]=kt[Ft++]},!At||wt)},678:(nt,it,s)=>{var et=s(260),rt=s(6304),ot=s(7293),gt=s(206),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("slice",function(pt,st){for(var ht=gt(dt(this),pt,st),at=rt(this),ut=0,ft=ht.length,mt=new at(ft);ft>ut;)mt[ut]=ht[ut++];return mt},ot(function(){new Int8Array(1).slice()}))},7462:(nt,it,s)=>{var et=s(260),rt=s(2092).some,ot=et.aTypedArray;(0,et.exportTypedArrayMethod)("some",function(gt){return rt(ot(this),gt,arguments.length>1?arguments[1]:void 0)})},3824:(nt,it,s)=>{var et=s(7854),rt=s(1702),ot=s(7293),gt=s(9662),dt=s(4362),pt=s(260),st=s(8886),ht=s(256),at=s(7392),ut=s(8008),ft=pt.aTypedArray,mt=pt.exportTypedArrayMethod,yt=et.Uint16Array,At=yt&&rt(yt.prototype.sort),wt=!(!At||ot(function(){At(new yt(2),null)})&&ot(function(){At(new yt(2),{})})),Pt=!!At&&!ot(function(){if(at)return at<74;if(st)return st<67;if(ht)return!0;if(ut)return ut<602;var Rt,kt,bt=new yt(516),Nt=Array(516);for(Rt=0;Rt<516;Rt++)kt=Rt%4,bt[Rt]=515-Rt,Nt[Rt]=Rt-2*kt+3;for(At(bt,function(Ft,Ut){return(Ft/4|0)-(Ut/4|0)}),Rt=0;Rt<516;Rt++)if(bt[Rt]!==Nt[Rt])return!0});mt("sort",function(Rt){return Rt!==void 0&&gt(Rt),Pt?At(this,Rt):dt(ft(this),function(kt){return function(bt,Nt){return kt!==void 0?+kt(bt,Nt)||0:Nt!=Nt?-1:bt!=bt?1:bt===0&&Nt===0?1/bt>0&&1/Nt<0?1:-1:bt>Nt}}(Rt))},!Pt||wt)},5021:(nt,it,s)=>{var et=s(260),rt=s(7466),ot=s(1400),gt=s(6304),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("subarray",function(pt,st){var ht=dt(this),at=ht.length,ut=ot(pt,at);return new(gt(ht))(ht.buffer,ht.byteOffset+ut*ht.BYTES_PER_ELEMENT,rt((st===void 0?at:ot(st,at))-ut))})},2974:(nt,it,s)=>{var et=s(7854),rt=s(2104),ot=s(260),gt=s(7293),dt=s(206),pt=et.Int8Array,st=ot.aTypedArray,ht=ot.exportTypedArrayMethod,at=[].toLocaleString,ut=!!pt&&gt(function(){at.call(new pt(1))});ht("toLocaleString",function(){return rt(at,ut?dt(st(this)):st(this),dt(arguments))},gt(function(){return[1,2].toLocaleString()!=new pt([1,2]).toLocaleString()})||!gt(function(){pt.prototype.toLocaleString.call([1,2])}))},5016:(nt,it,s)=>{var et=s(260).exportTypedArrayMethod,rt=s(7293),ot=s(7854),gt=s(1702),dt=ot.Uint8Array,pt=dt&&dt.prototype||{},st=[].toString,ht=gt([].join);rt(function(){st.call({})})&&(st=function(){return ht(this)});var at=pt.toString!=st;et("toString",st,at)},2472:(nt,it,s)=>{s(9843)("Uint8",function(et){return function(rt,ot,gt){return et(this,rt,ot,gt)}})},9743:(nt,it,s)=>{s(9843)("Uint8",function(et){return function(rt,ot,gt){return et(this,rt,ot,gt)}},!0)},1202:(nt,it,s)=>{var et,rt=s(7854),ot=s(1702),gt=s(9190),dt=s(2423),pt=s(7710),st=s(9320),ht=s(111),at=s(2050),ut=s(9909).enforce,ft=s(8536),mt=!rt.ActiveXObject&&"ActiveXObject"in rt,yt=function(Nt){return function(){return Nt(this,arguments.length?arguments[0]:void 0)}},At=pt("WeakMap",yt,st);if(ft&&mt){et=st.getConstructor(yt,"WeakMap",!0),dt.enable();var wt=At.prototype,Pt=ot(wt.delete),Rt=ot(wt.has),kt=ot(wt.get),bt=ot(wt.set);gt(wt,{delete:function(Nt){if(ht(Nt)&&!at(Nt)){var Ft=ut(this);return Ft.frozen||(Ft.frozen=new et),Pt(this,Nt)||Ft.frozen.delete(Nt)}return Pt(this,Nt)},has:function(Nt){if(ht(Nt)&&!at(Nt)){var Ft=ut(this);return Ft.frozen||(Ft.frozen=new et),Rt(this,Nt)||Ft.frozen.has(Nt)}return Rt(this,Nt)},get:function(Nt){if(ht(Nt)&&!at(Nt)){var Ft=ut(this);return Ft.frozen||(Ft.frozen=new et),Rt(this,Nt)?kt(this,Nt):Ft.frozen.get(Nt)}return kt(this,Nt)},set:function(Nt,Ft){if(ht(Nt)&&!at(Nt)){var Ut=ut(this);Ut.frozen||(Ut.frozen=new et),Rt(this,Nt)?bt(this,Nt,Ft):Ut.frozen.set(Nt,Ft)}else bt(this,Nt,Ft);return this}})}},4129:(nt,it,s)=>{s(1202)},4747:(nt,it,s)=>{var et=s(7854),rt=s(8324),ot=s(8509),gt=s(8533),dt=s(8880),pt=function(ht){if(ht&&ht.forEach!==gt)try{dt(ht,"forEach",gt)}catch{ht.forEach=gt}};for(var st in rt)rt[st]&&pt(et[st]&&et[st].prototype);pt(ot)},3948:(nt,it,s)=>{var et=s(7854),rt=s(8324),ot=s(8509),gt=s(6992),dt=s(8880),pt=s(5112),st=pt("iterator"),ht=pt("toStringTag"),at=gt.values,ut=function(mt,yt){if(mt){if(mt[st]!==at)try{dt(mt,st,at)}catch{mt[st]=at}if(mt[ht]||dt(mt,ht,yt),rt[yt]){for(var At in gt)if(mt[At]!==gt[At])try{dt(mt,At,gt[At])}catch{mt[At]=gt[At]}}}};for(var ft in rt)ut(et[ft]&&et[ft].prototype,ft);ut(ot,"DOMTokenList")},6815:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(7152).setInterval;et({global:!0,bind:!0,forced:rt.setInterval!==ot},{setInterval:ot})},8417:(nt,it,s)=>{var et=s(2109),rt=s(7854),ot=s(7152).setTimeout;et({global:!0,bind:!0,forced:rt.setTimeout!==ot},{setTimeout:ot})},2564:(nt,it,s)=>{s(6815),s(8417)},5556:(nt,it,s)=>{s(6992);var et=s(2109),rt=s(7854),ot=s(6916),gt=s(1702),dt=s(9781),pt=s(590),st=s(8052),ht=s(9190),at=s(8003),ut=s(4994),ft=s(9909),mt=s(5787),yt=s(614),At=s(2597),wt=s(9974),Pt=s(648),Rt=s(9670),kt=s(111),bt=s(1340),Nt=s(30),Ft=s(9114),Ut=s(8554),Jt=s(1246),hn=s(8053),Xt=s(5112),zt=s(4362),cn=Xt("iterator"),vn="URLSearchParams",Sn="URLSearchParamsIterator",fn=ft.set,mn=ft.getterFor(vn),bn=ft.getterFor(Sn),un=Object.getOwnPropertyDescriptor,Tn=function(qt){if(!dt)return rt[qt];var tn=un(rt,qt);return tn&&tn.value},kn=Tn("fetch"),xn=Tn("Request"),An=Tn("Headers"),En=xn&&xn.prototype,Rn=An&&An.prototype,wn=rt.RegExp,Dn=rt.TypeError,Bn=rt.decodeURIComponent,zn=rt.encodeURIComponent,Hn=gt("".charAt),nr=gt([].join),sn=gt([].push),Gn=gt("".replace),Zn=gt([].shift),rr=gt([].splice),Fn=gt("".split),Xn=gt("".slice),Yn=/\+/g,Nn=Array(4),Un=function(qt){return Nn[qt-1]||(Nn[qt-1]=wn("((?:%[\\da-f]{2}){"+qt+"})","gi"))},Cn=function(qt){try{return Bn(qt)}catch{return qt}},Mn=function(qt){var tn=Gn(qt,Yn," "),gn=4;try{return Bn(tn)}catch{for(;gn;)tn=Gn(tn,Un(gn--),Cn);return tn}},Kt=/[!'()~]|%20/g,Ot={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lt=function(qt){return Ot[qt]},Tt=function(qt){return Gn(zn(qt),Kt,lt)},It=ut(function(qt,tn){fn(this,{type:Sn,iterator:Ut(mn(qt).entries),kind:tn})},"Iterator",function(){var qt=bn(this),tn=qt.kind,gn=qt.iterator.next(),rn=gn.value;return gn.done||(gn.value=tn==="keys"?rn.key:tn==="values"?rn.value:[rn.key,rn.value]),gn},!0),Dt=function(qt){this.entries=[],this.url=null,qt!==void 0&&(kt(qt)?this.parseObject(qt):this.parseQuery(typeof qt=="string"?Hn(qt,0)==="?"?Xn(qt,1):qt:bt(qt)))};Dt.prototype={type:vn,bindURL:function(qt){this.url=qt,this.update()},parseObject:function(qt){var tn,gn,rn,pn,In,Pn,_n,Ln=Jt(qt);if(Ln)for(gn=(tn=Ut(qt,Ln)).next;!(rn=ot(gn,tn)).done;){if(In=(pn=Ut(Rt(rn.value))).next,(Pn=ot(In,pn)).done||(_n=ot(In,pn)).done||!ot(In,pn).done)throw Dn("Expected sequence with length 2");sn(this.entries,{key:bt(Pn.value),value:bt(_n.value)})}else for(var Vn in qt)At(qt,Vn)&&sn(this.entries,{key:Vn,value:bt(qt[Vn])})},parseQuery:function(qt){if(qt)for(var tn,gn,rn=Fn(qt,"&"),pn=0;pn<rn.length;)(tn=rn[pn++]).length&&(gn=Fn(tn,"="),sn(this.entries,{key:Mn(Zn(gn)),value:Mn(nr(gn,"="))}))},serialize:function(){for(var qt,tn=this.entries,gn=[],rn=0;rn<tn.length;)qt=tn[rn++],sn(gn,Tt(qt.key)+"="+Tt(qt.value));return nr(gn,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Et=function(){mt(this,$t);var qt=arguments.length>0?arguments[0]:void 0;fn(this,new Dt(qt))},$t=Et.prototype;if(ht($t,{append:function(qt,tn){hn(arguments.length,2);var gn=mn(this);sn(gn.entries,{key:bt(qt),value:bt(tn)}),gn.updateURL()},delete:function(qt){hn(arguments.length,1);for(var tn=mn(this),gn=tn.entries,rn=bt(qt),pn=0;pn<gn.length;)gn[pn].key===rn?rr(gn,pn,1):pn++;tn.updateURL()},get:function(qt){hn(arguments.length,1);for(var tn=mn(this).entries,gn=bt(qt),rn=0;rn<tn.length;rn++)if(tn[rn].key===gn)return tn[rn].value;return null},getAll:function(qt){hn(arguments.length,1);for(var tn=mn(this).entries,gn=bt(qt),rn=[],pn=0;pn<tn.length;pn++)tn[pn].key===gn&&sn(rn,tn[pn].value);return rn},has:function(qt){hn(arguments.length,1);for(var tn=mn(this).entries,gn=bt(qt),rn=0;rn<tn.length;)if(tn[rn++].key===gn)return!0;return!1},set:function(qt,tn){hn(arguments.length,1);for(var gn,rn=mn(this),pn=rn.entries,In=!1,Pn=bt(qt),_n=bt(tn),Ln=0;Ln<pn.length;Ln++)(gn=pn[Ln]).key===Pn&&(In?rr(pn,Ln--,1):(In=!0,gn.value=_n));In||sn(pn,{key:Pn,value:_n}),rn.updateURL()},sort:function(){var qt=mn(this);zt(qt.entries,function(tn,gn){return tn.key>gn.key?1:-1}),qt.updateURL()},forEach:function(qt){for(var tn,gn=mn(this).entries,rn=wt(qt,arguments.length>1?arguments[1]:void 0),pn=0;pn<gn.length;)rn((tn=gn[pn++]).value,tn.key,this)},keys:function(){return new It(this,"keys")},values:function(){return new It(this,"values")},entries:function(){return new It(this,"entries")}},{enumerable:!0}),st($t,cn,$t.entries,{name:"entries"}),st($t,"toString",function(){return mn(this).serialize()},{enumerable:!0}),at(Et,vn),et({global:!0,constructor:!0,forced:!pt},{URLSearchParams:Et}),!pt&&yt(An)){var xt=gt(Rn.has),Vt=gt(Rn.set),Zt=function(qt){if(kt(qt)){var tn,gn=qt.body;if(Pt(gn)===vn)return tn=qt.headers?new An(qt.headers):new An,xt(tn,"content-type")||Vt(tn,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Nt(qt,{body:Ft(0,bt(gn)),headers:Ft(0,tn)})}return qt};if(yt(kn)&&et({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(qt){return kn(qt,arguments.length>1?Zt(arguments[1]):{})}}),yt(xn)){var an=function(qt){return mt(this,En),new xn(qt,arguments.length>1?Zt(arguments[1]):{})};En.constructor=an,an.prototype=En,et({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:an})}}nt.exports={URLSearchParams:Et,getState:mn}},1637:(nt,it,s)=>{s(5556)},8789:(nt,it,s)=>{s(8783);var et,rt=s(2109),ot=s(9781),gt=s(590),dt=s(7854),pt=s(9974),st=s(1702),ht=s(8052),at=s(7045),ut=s(5787),ft=s(2597),mt=s(1574),yt=s(8457),At=s(1589),wt=s(8710).codeAt,Pt=s(3197),Rt=s(1340),kt=s(8003),bt=s(8053),Nt=s(5556),Ft=s(9909),Ut=Ft.set,Jt=Ft.getterFor("URL"),hn=Nt.URLSearchParams,Xt=Nt.getState,zt=dt.URL,cn=dt.TypeError,vn=dt.parseInt,Sn=Math.floor,fn=Math.pow,mn=st("".charAt),bn=st(/./.exec),un=st([].join),Tn=st(1 .toString),kn=st([].pop),xn=st([].push),An=st("".replace),En=st([].shift),Rn=st("".split),wn=st("".slice),Dn=st("".toLowerCase),Bn=st([].unshift),zn="Invalid scheme",Hn="Invalid host",nr="Invalid port",sn=/[a-z]/i,Gn=/[\d+-.a-z]/i,Zn=/\d/,rr=/^0x/i,Fn=/^[0-7]+$/,Xn=/^\d+$/,Yn=/^[\da-f]+$/i,Nn=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Un=/[\0\t\n\r #/:<>?@[\\\]^|]/,Cn=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Mn=/[\t\n\r]/g,Kt=function(Kn){var sr,qn,vr,Jn;if(typeof Kn=="number"){for(sr=[],qn=0;qn<4;qn++)Bn(sr,Kn%256),Kn=Sn(Kn/256);return un(sr,".")}if(typeof Kn=="object"){for(sr="",vr=function($r){for(var xr=null,Er=1,Wn=null,pr=0,Pr=0;Pr<8;Pr++)$r[Pr]!==0?(pr>Er&&(xr=Wn,Er=pr),Wn=null,pr=0):(Wn===null&&(Wn=Pr),++pr);return pr>Er&&(xr=Wn,Er=pr),xr}(Kn),qn=0;qn<8;qn++)Jn&&Kn[qn]===0||(Jn&&(Jn=!1),vr===qn?(sr+=qn?":":"::",Jn=!0):(sr+=Tn(Kn[qn],16),qn<7&&(sr+=":")));return"["+sr+"]"}return Kn},Ot={},lt=mt({},Ot,{" ":1,'"':1,"<":1,">":1,"`":1}),Tt=mt({},lt,{"#":1,"?":1,"{":1,"}":1}),It=mt({},Tt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Dt=function(Kn,sr){var qn=wt(Kn,0);return qn>32&&qn<127&&!ft(sr,Kn)?Kn:encodeURIComponent(Kn)},Et={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$t=function(Kn,sr){var qn;return Kn.length==2&&bn(sn,mn(Kn,0))&&((qn=mn(Kn,1))==":"||!sr&&qn=="|")},xt=function(Kn){var sr;return Kn.length>1&&$t(wn(Kn,0,2))&&(Kn.length==2||(sr=mn(Kn,2))==="/"||sr==="\\"||sr==="?"||sr==="#")},Vt=function(Kn){return Kn==="."||Dn(Kn)==="%2e"},Zt={},an={},qt={},tn={},gn={},rn={},pn={},In={},Pn={},_n={},Ln={},Vn={},or={},hr={},mr={},yr={},Rr={},Or={},Qr={},Jr={},Sr={},Nr=function(Kn,sr,qn){var vr,Jn,$r,xr=Rt(Kn);if(sr){if(Jn=this.parse(xr))throw cn(Jn);this.searchParams=null}else{if(qn!==void 0&&(vr=new Nr(qn,!0)),Jn=this.parse(xr,null,vr))throw cn(Jn);($r=Xt(new hn)).bindURL(this),this.searchParams=$r}};Nr.prototype={type:"URL",parse:function(Kn,sr,qn){var vr,Jn,$r,xr,Er,Wn=this,pr=sr||Zt,Pr=0,Tr="",Kr=!1,jr=!1,Co=!1;for(Kn=Rt(Kn),sr||(Wn.scheme="",Wn.username="",Wn.password="",Wn.host=null,Wn.port=null,Wn.path=[],Wn.query=null,Wn.fragment=null,Wn.cannotBeABaseURL=!1,Kn=An(Kn,Cn,"")),Kn=An(Kn,Mn,""),vr=yt(Kn);Pr<=vr.length;){switch(Jn=vr[Pr],pr){case Zt:if(!Jn||!bn(sn,Jn)){if(sr)return zn;pr=qt;continue}Tr+=Dn(Jn),pr=an;break;case an:if(Jn&&(bn(Gn,Jn)||Jn=="+"||Jn=="-"||Jn=="."))Tr+=Dn(Jn);else{if(Jn!=":"){if(sr)return zn;Tr="",pr=qt,Pr=0;continue}if(sr&&(Wn.isSpecial()!=ft(Et,Tr)||Tr=="file"&&(Wn.includesCredentials()||Wn.port!==null)||Wn.scheme=="file"&&!Wn.host))return;if(Wn.scheme=Tr,sr)return void(Wn.isSpecial()&&Et[Wn.scheme]==Wn.port&&(Wn.port=null));Tr="",Wn.scheme=="file"?pr=hr:Wn.isSpecial()&&qn&&qn.scheme==Wn.scheme?pr=tn:Wn.isSpecial()?pr=In:vr[Pr+1]=="/"?(pr=gn,Pr++):(Wn.cannotBeABaseURL=!0,xn(Wn.path,""),pr=Qr)}break;case qt:if(!qn||qn.cannotBeABaseURL&&Jn!="#")return zn;if(qn.cannotBeABaseURL&&Jn=="#"){Wn.scheme=qn.scheme,Wn.path=At(qn.path),Wn.query=qn.query,Wn.fragment="",Wn.cannotBeABaseURL=!0,pr=Sr;break}pr=qn.scheme=="file"?hr:rn;continue;case tn:if(Jn!="/"||vr[Pr+1]!="/"){pr=rn;continue}pr=Pn,Pr++;break;case gn:if(Jn=="/"){pr=_n;break}pr=Or;continue;case rn:if(Wn.scheme=qn.scheme,Jn==et)Wn.username=qn.username,Wn.password=qn.password,Wn.host=qn.host,Wn.port=qn.port,Wn.path=At(qn.path),Wn.query=qn.query;else if(Jn=="/"||Jn=="\\"&&Wn.isSpecial())pr=pn;else if(Jn=="?")Wn.username=qn.username,Wn.password=qn.password,Wn.host=qn.host,Wn.port=qn.port,Wn.path=At(qn.path),Wn.query="",pr=Jr;else{if(Jn!="#"){Wn.username=qn.username,Wn.password=qn.password,Wn.host=qn.host,Wn.port=qn.port,Wn.path=At(qn.path),Wn.path.length--,pr=Or;continue}Wn.username=qn.username,Wn.password=qn.password,Wn.host=qn.host,Wn.port=qn.port,Wn.path=At(qn.path),Wn.query=qn.query,Wn.fragment="",pr=Sr}break;case pn:if(!Wn.isSpecial()||Jn!="/"&&Jn!="\\"){if(Jn!="/"){Wn.username=qn.username,Wn.password=qn.password,Wn.host=qn.host,Wn.port=qn.port,pr=Or;continue}pr=_n}else pr=Pn;break;case In:if(pr=Pn,Jn!="/"||mn(Tr,Pr+1)!="/")continue;Pr++;break;case Pn:if(Jn!="/"&&Jn!="\\"){pr=_n;continue}break;case _n:if(Jn=="@"){Kr&&(Tr="%40"+Tr),Kr=!0,$r=yt(Tr);for(var eo=0;eo<$r.length;eo++){var ga=$r[eo];if(ga!=":"||Co){var gs=Dt(ga,It);Co?Wn.password+=gs:Wn.username+=gs}else Co=!0}Tr=""}else if(Jn==et||Jn=="/"||Jn=="?"||Jn=="#"||Jn=="\\"&&Wn.isSpecial()){if(Kr&&Tr=="")return"Invalid authority";Pr-=yt(Tr).length+1,Tr="",pr=Ln}else Tr+=Jn;break;case Ln:case Vn:if(sr&&Wn.scheme=="file"){pr=yr;continue}if(Jn!=":"||jr){if(Jn==et||Jn=="/"||Jn=="?"||Jn=="#"||Jn=="\\"&&Wn.isSpecial()){if(Wn.isSpecial()&&Tr=="")return Hn;if(sr&&Tr==""&&(Wn.includesCredentials()||Wn.port!==null))return;if(xr=Wn.parseHost(Tr))return xr;if(Tr="",pr=Rr,sr)return;continue}Jn=="["?jr=!0:Jn=="]"&&(jr=!1),Tr+=Jn}else{if(Tr=="")return Hn;if(xr=Wn.parseHost(Tr))return xr;if(Tr="",pr=or,sr==Vn)return}break;case or:if(!bn(Zn,Jn)){if(Jn==et||Jn=="/"||Jn=="?"||Jn=="#"||Jn=="\\"&&Wn.isSpecial()||sr){if(Tr!=""){var Qo=vn(Tr,10);if(Qo>65535)return nr;Wn.port=Wn.isSpecial()&&Qo===Et[Wn.scheme]?null:Qo,Tr=""}if(sr)return;pr=Rr;continue}return nr}Tr+=Jn;break;case hr:if(Wn.scheme="file",Jn=="/"||Jn=="\\")pr=mr;else{if(!qn||qn.scheme!="file"){pr=Or;continue}if(Jn==et)Wn.host=qn.host,Wn.path=At(qn.path),Wn.query=qn.query;else if(Jn=="?")Wn.host=qn.host,Wn.path=At(qn.path),Wn.query="",pr=Jr;else{if(Jn!="#"){xt(un(At(vr,Pr),""))||(Wn.host=qn.host,Wn.path=At(qn.path),Wn.shortenPath()),pr=Or;continue}Wn.host=qn.host,Wn.path=At(qn.path),Wn.query=qn.query,Wn.fragment="",pr=Sr}}break;case mr:if(Jn=="/"||Jn=="\\"){pr=yr;break}qn&&qn.scheme=="file"&&!xt(un(At(vr,Pr),""))&&($t(qn.path[0],!0)?xn(Wn.path,qn.path[0]):Wn.host=qn.host),pr=Or;continue;case yr:if(Jn==et||Jn=="/"||Jn=="\\"||Jn=="?"||Jn=="#"){if(!sr&&$t(Tr))pr=Or;else if(Tr==""){if(Wn.host="",sr)return;pr=Rr}else{if(xr=Wn.parseHost(Tr))return xr;if(Wn.host=="localhost"&&(Wn.host=""),sr)return;Tr="",pr=Rr}continue}Tr+=Jn;break;case Rr:if(Wn.isSpecial()){if(pr=Or,Jn!="/"&&Jn!="\\")continue}else if(sr||Jn!="?")if(sr||Jn!="#"){if(Jn!=et&&(pr=Or,Jn!="/"))continue}else Wn.fragment="",pr=Sr;else Wn.query="",pr=Jr;break;case Or:if(Jn==et||Jn=="/"||Jn=="\\"&&Wn.isSpecial()||!sr&&(Jn=="?"||Jn=="#")){if((Er=Dn(Er=Tr))===".."||Er==="%2e."||Er===".%2e"||Er==="%2e%2e"?(Wn.shortenPath(),Jn=="/"||Jn=="\\"&&Wn.isSpecial()||xn(Wn.path,"")):Vt(Tr)?Jn=="/"||Jn=="\\"&&Wn.isSpecial()||xn(Wn.path,""):(Wn.scheme=="file"&&!Wn.path.length&&$t(Tr)&&(Wn.host&&(Wn.host=""),Tr=mn(Tr,0)+":"),xn(Wn.path,Tr)),Tr="",Wn.scheme=="file"&&(Jn==et||Jn=="?"||Jn=="#"))for(;Wn.path.length>1&&Wn.path[0]==="";)En(Wn.path);Jn=="?"?(Wn.query="",pr=Jr):Jn=="#"&&(Wn.fragment="",pr=Sr)}else Tr+=Dt(Jn,Tt);break;case Qr:Jn=="?"?(Wn.query="",pr=Jr):Jn=="#"?(Wn.fragment="",pr=Sr):Jn!=et&&(Wn.path[0]+=Dt(Jn,Ot));break;case Jr:sr||Jn!="#"?Jn!=et&&(Jn=="'"&&Wn.isSpecial()?Wn.query+="%27":Wn.query+=Jn=="#"?"%23":Dt(Jn,Ot)):(Wn.fragment="",pr=Sr);break;case Sr:Jn!=et&&(Wn.fragment+=Dt(Jn,lt))}Pr++}},parseHost:function(Kn){var sr,qn,vr;if(mn(Kn,0)=="["){if(mn(Kn,Kn.length-1)!="]"||(sr=function(Jn){var $r,xr,Er,Wn,pr,Pr,Tr,Kr=[0,0,0,0,0,0,0,0],jr=0,Co=null,eo=0,ga=function(){return mn(Jn,eo)};if(ga()==":"){if(mn(Jn,1)!=":")return;eo+=2,Co=++jr}for(;ga();){if(jr==8)return;if(ga()!=":"){for($r=xr=0;xr<4&&bn(Yn,ga());)$r=16*$r+vn(ga(),16),eo++,xr++;if(ga()=="."){if(xr==0||(eo-=xr,jr>6))return;for(Er=0;ga();){if(Wn=null,Er>0){if(!(ga()=="."&&Er<4))return;eo++}if(!bn(Zn,ga()))return;for(;bn(Zn,ga());){if(pr=vn(ga(),10),Wn===null)Wn=pr;else{if(Wn==0)return;Wn=10*Wn+pr}if(Wn>255)return;eo++}Kr[jr]=256*Kr[jr]+Wn,++Er!=2&&Er!=4||jr++}if(Er!=4)return;break}if(ga()==":"){if(eo++,!ga())return}else if(ga())return;Kr[jr++]=$r}else{if(Co!==null)return;eo++,Co=++jr}}if(Co!==null)for(Pr=jr-Co,jr=7;jr!=0&&Pr>0;)Tr=Kr[jr],Kr[jr--]=Kr[Co+Pr-1],Kr[Co+--Pr]=Tr;else if(jr!=8)return;return Kr}(wn(Kn,1,-1)),!sr))return Hn;this.host=sr}else if(this.isSpecial()){if(Kn=Pt(Kn),bn(Nn,Kn)||(sr=function(Jn){var $r,xr,Er,Wn,pr,Pr,Tr,Kr=Rn(Jn,".");if(Kr.length&&Kr[Kr.length-1]==""&&Kr.length--,($r=Kr.length)>4)return Jn;for(xr=[],Er=0;Er<$r;Er++){if((Wn=Kr[Er])=="")return Jn;if(pr=10,Wn.length>1&&mn(Wn,0)=="0"&&(pr=bn(rr,Wn)?16:8,Wn=wn(Wn,pr==8?1:2)),Wn==="")Pr=0;else{if(!bn(pr==10?Xn:pr==8?Fn:Yn,Wn))return Jn;Pr=vn(Wn,pr)}xn(xr,Pr)}for(Er=0;Er<$r;Er++)if(Pr=xr[Er],Er==$r-1){if(Pr>=fn(256,5-$r))return null}else if(Pr>255)return null;for(Tr=kn(xr),Er=0;Er<xr.length;Er++)Tr+=xr[Er]*fn(256,3-Er);return Tr}(Kn),sr===null))return Hn;this.host=sr}else{if(bn(Un,Kn))return Hn;for(sr="",qn=yt(Kn),vr=0;vr<qn.length;vr++)sr+=Dt(qn[vr],Ot);this.host=sr}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return ft(Et,this.scheme)},shortenPath:function(){var Kn=this.path,sr=Kn.length;!sr||this.scheme=="file"&&sr==1&&$t(Kn[0],!0)||Kn.length--},serialize:function(){var Kn=this,sr=Kn.scheme,qn=Kn.username,vr=Kn.password,Jn=Kn.host,$r=Kn.port,xr=Kn.path,Er=Kn.query,Wn=Kn.fragment,pr=sr+":";return Jn!==null?(pr+="//",Kn.includesCredentials()&&(pr+=qn+(vr?":"+vr:"")+"@"),pr+=Kt(Jn),$r!==null&&(pr+=":"+$r)):sr=="file"&&(pr+="//"),pr+=Kn.cannotBeABaseURL?xr[0]:xr.length?"/"+un(xr,"/"):"",Er!==null&&(pr+="?"+Er),Wn!==null&&(pr+="#"+Wn),pr},setHref:function(Kn){var sr=this.parse(Kn);if(sr)throw cn(sr);this.searchParams.update()},getOrigin:function(){var Kn=this.scheme,sr=this.port;if(Kn=="blob")try{return new wr(Kn.path[0]).origin}catch{return"null"}return Kn!="file"&&this.isSpecial()?Kn+"://"+Kt(this.host)+(sr!==null?":"+sr:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(Kn){this.parse(Rt(Kn)+":",Zt)},getUsername:function(){return this.username},setUsername:function(Kn){var sr=yt(Rt(Kn));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var qn=0;qn<sr.length;qn++)this.username+=Dt(sr[qn],It)}},getPassword:function(){return this.password},setPassword:function(Kn){var sr=yt(Rt(Kn));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var qn=0;qn<sr.length;qn++)this.password+=Dt(sr[qn],It)}},getHost:function(){var Kn=this.host,sr=this.port;return Kn===null?"":sr===null?Kt(Kn):Kt(Kn)+":"+sr},setHost:function(Kn){this.cannotBeABaseURL||this.parse(Kn,Ln)},getHostname:function(){var Kn=this.host;return Kn===null?"":Kt(Kn)},setHostname:function(Kn){this.cannotBeABaseURL||this.parse(Kn,Vn)},getPort:function(){var Kn=this.port;return Kn===null?"":Rt(Kn)},setPort:function(Kn){this.cannotHaveUsernamePasswordPort()||((Kn=Rt(Kn))==""?this.port=null:this.parse(Kn,or))},getPathname:function(){var Kn=this.path;return this.cannotBeABaseURL?Kn[0]:Kn.length?"/"+un(Kn,"/"):""},setPathname:function(Kn){this.cannotBeABaseURL||(this.path=[],this.parse(Kn,Rr))},getSearch:function(){var Kn=this.query;return Kn?"?"+Kn:""},setSearch:function(Kn){(Kn=Rt(Kn))==""?this.query=null:(mn(Kn,0)=="?"&&(Kn=wn(Kn,1)),this.query="",this.parse(Kn,Jr)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var Kn=this.fragment;return Kn?"#"+Kn:""},setHash:function(Kn){(Kn=Rt(Kn))!=""?(mn(Kn,0)=="#"&&(Kn=wn(Kn,1)),this.fragment="",this.parse(Kn,Sr)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var wr=function(Kn){var sr=ut(this,_r),qn=bt(arguments.length,1)>1?arguments[1]:void 0,vr=Ut(sr,new Nr(Kn,!1,qn));ot||(sr.href=vr.serialize(),sr.origin=vr.getOrigin(),sr.protocol=vr.getProtocol(),sr.username=vr.getUsername(),sr.password=vr.getPassword(),sr.host=vr.getHost(),sr.hostname=vr.getHostname(),sr.port=vr.getPort(),sr.pathname=vr.getPathname(),sr.search=vr.getSearch(),sr.searchParams=vr.getSearchParams(),sr.hash=vr.getHash())},_r=wr.prototype,Ur=function(Kn,sr){return{get:function(){return Jt(this)[Kn]()},set:sr&&function(qn){return Jt(this)[sr](qn)},configurable:!0,enumerable:!0}};if(ot&&(at(_r,"href",Ur("serialize","setHref")),at(_r,"origin",Ur("getOrigin")),at(_r,"protocol",Ur("getProtocol","setProtocol")),at(_r,"username",Ur("getUsername","setUsername")),at(_r,"password",Ur("getPassword","setPassword")),at(_r,"host",Ur("getHost","setHost")),at(_r,"hostname",Ur("getHostname","setHostname")),at(_r,"port",Ur("getPort","setPort")),at(_r,"pathname",Ur("getPathname","setPathname")),at(_r,"search",Ur("getSearch","setSearch")),at(_r,"searchParams",Ur("getSearchParams")),at(_r,"hash",Ur("getHash","setHash"))),ht(_r,"toJSON",function(){return Jt(this).serialize()},{enumerable:!0}),ht(_r,"toString",function(){return Jt(this).serialize()},{enumerable:!0}),zt){var Hr=zt.createObjectURL,na=zt.revokeObjectURL;Hr&&ht(wr,"createObjectURL",pt(Hr,zt)),na&&ht(wr,"revokeObjectURL",pt(na,zt))}kt(wr,"URL"),rt({global:!0,constructor:!0,forced:!gt,sham:!ot},{URL:wr})},285:(nt,it,s)=>{s(8789)},3753:(nt,it,s)=>{var et=s(2109),rt=s(6916);et({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return rt(URL.prototype.toString,this)}})},7987:function(nt,it,s){var et,rt;et=function(ot){var gt,dt,pt={template:"[%t] %l:",levelFormatter:function(at){return at.toUpperCase()},nameFormatter:function(at){return at||"root"},timestampFormatter:function(at){return at.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},st={},ht={reg:function(at){if(!at||!at.getLogger)throw new TypeError("Argument is not a root logger");gt=at},apply:function(at,ut){if(!at||!at.setLevel)throw new TypeError("Argument is not a logger");var ft=at.methodFactory,mt=at.name||"",yt=st[mt]||st[""]||pt;return st[mt]||(at.methodFactory=function(At,wt,Pt){var Rt=ft(At,wt,Pt),kt=st[Pt]||st[""],bt=kt.template.indexOf("%t")!==-1,Nt=kt.template.indexOf("%l")!==-1,Ft=kt.template.indexOf("%n")!==-1;return function(){for(var Ut="",Jt=arguments.length,hn=Array(Jt),Xt=0;Xt<Jt;Xt++)hn[Xt]=arguments[Xt];if(mt||!st[Pt]){var zt=kt.timestampFormatter(new Date),cn=kt.levelFormatter(At),vn=kt.nameFormatter(Pt);kt.format?Ut+=kt.format(cn,vn,zt):(Ut+=kt.template,bt&&(Ut=Ut.replace(/%t/,zt)),Nt&&(Ut=Ut.replace(/%l/,cn)),Ft&&(Ut=Ut.replace(/%n/,vn))),hn.length&&typeof hn[0]=="string"?hn[0]=Ut+" "+hn[0]:hn.unshift(Ut)}Rt.apply(void 0,hn)}}),(ut=ut||{}).template&&(ut.format=void 0),st[mt]=function(At){for(var wt,Pt=1,Rt=arguments.length;Pt<Rt;Pt++)for(wt in arguments[Pt])Object.prototype.hasOwnProperty.call(arguments[Pt],wt)&&(At[wt]=arguments[Pt][wt]);return At}({},yt,ut),at.setLevel(at.getLevel()),gt||at.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),at}};return ot&&(dt=ot.prefix,ht.noConflict=function(){return ot.prefix===ht&&(ot.prefix=dt),ht}),ht},(rt=et.call(it,s,it,nt))===void 0||(nt.exports=rt)},2043:function(nt,it,s){var et,rt;(function(ot,gt){et=function(){var dt=function(){},pt="undefined",st=typeof window!==pt&&typeof window.navigator!==pt&&/Trident\/|MSIE /.test(window.navigator.userAgent),ht=["trace","debug","info","warn","error"];function at(bt,Nt){var Ft=bt[Nt];if(typeof Ft.bind=="function")return Ft.bind(bt);try{return Function.prototype.bind.call(Ft,bt)}catch{return function(){return Function.prototype.apply.apply(Ft,[bt,arguments])}}}function ut(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function ft(bt){return bt==="debug"&&(bt="log"),typeof console!==pt&&(bt==="trace"&&st?ut:console[bt]!==void 0?at(console,bt):console.log!==void 0?at(console,"log"):dt)}function mt(bt,Nt){for(var Ft=0;Ft<ht.length;Ft++){var Ut=ht[Ft];this[Ut]=Ft<bt?dt:this.methodFactory(Ut,bt,Nt)}this.log=this.debug}function yt(bt,Nt,Ft){return function(){typeof console!==pt&&(mt.call(this,Nt,Ft),this[bt].apply(this,arguments))}}function At(bt,Nt,Ft){return ft(bt)||yt.apply(this,arguments)}function wt(bt,Nt,Ft){var Ut,Jt=this;Nt=Nt??"WARN";var hn="loglevel";function Xt(){var cn;if(typeof window!==pt&&hn){try{cn=window.localStorage[hn]}catch{}if(typeof cn===pt)try{var vn=window.document.cookie,Sn=vn.indexOf(encodeURIComponent(hn)+"=");Sn!==-1&&(cn=/^([^;]+)/.exec(vn.slice(Sn))[1])}catch{}return Jt.levels[cn]===void 0&&(cn=void 0),cn}}typeof bt=="string"?hn+=":"+bt:typeof bt=="symbol"&&(hn=void 0),Jt.name=bt,Jt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Jt.methodFactory=Ft||At,Jt.getLevel=function(){return Ut},Jt.setLevel=function(cn,vn){if(typeof cn=="string"&&Jt.levels[cn.toUpperCase()]!==void 0&&(cn=Jt.levels[cn.toUpperCase()]),!(typeof cn=="number"&&cn>=0&&cn<=Jt.levels.SILENT))throw"log.setLevel() called with invalid level: "+cn;if(Ut=cn,vn!==!1&&function(Sn){var fn=(ht[Sn]||"silent").toUpperCase();if(typeof window!==pt&&hn){try{return void(window.localStorage[hn]=fn)}catch{}try{window.document.cookie=encodeURIComponent(hn)+"="+fn+";"}catch{}}}(cn),mt.call(Jt,cn,bt),typeof console===pt&&cn<Jt.levels.SILENT)return"No console available for logging"},Jt.setDefaultLevel=function(cn){Nt=cn,Xt()||Jt.setLevel(cn,!1)},Jt.resetLevel=function(){Jt.setLevel(Nt,!1),function(){if(typeof window!==pt&&hn){try{return void window.localStorage.removeItem(hn)}catch{}try{window.document.cookie=encodeURIComponent(hn)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}()},Jt.enableAll=function(cn){Jt.setLevel(Jt.levels.TRACE,cn)},Jt.disableAll=function(cn){Jt.setLevel(Jt.levels.SILENT,cn)};var zt=Xt();zt==null&&(zt=Nt),Jt.setLevel(zt,!1)}var Pt=new wt,Rt={};Pt.getLogger=function(bt){if(typeof bt!="symbol"&&typeof bt!="string"||bt==="")throw new TypeError("You must supply a name when creating a logger.");var Nt=Rt[bt];return Nt||(Nt=Rt[bt]=new wt(bt,Pt.getLevel(),Pt.methodFactory)),Nt};var kt=typeof window!==pt?window.log:void 0;return Pt.noConflict=function(){return typeof window!==pt&&window.log===Pt&&(window.log=kt),Pt},Pt.getLoggers=function(){return Rt},Pt.default=Pt,Pt},(rt=et.call(it,s,it,nt))===void 0||(nt.exports=rt)})()},7618:nt=>{function it(Ut,Jt){if(!et)return!1;const hn=Ut.buffer;let Xt=at.get(hn);if(Xt==null){if((Xt=s.validate(hn))&&Jt)try{new s.Instance(new s.Module(hn)).exports[0]()}catch{Xt=!1}at.set(hn,Xt)}return Xt}const s=globalThis.WebAssembly,et=typeof s=="object",rt=Ut=>Ut!==void 0,ot=(...Ut)=>Uint8Array.of(0,97,115,109,1,0,0,0,...Ut),gt=(...Ut)=>Uint32Array.of(1836278016,1,...Ut),dt=(...Ut)=>gt(1610679297,33751040,...Ut,40239360,259),pt=(...Ut)=>ot(1,4,1,96,0,0,3,2,1,0,...Ut,11,0,10,4,110,97,109,101,2,3,1,0,0),st=(...Ut)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...Ut),ht=(...Ut)=>st(...Ut,2842,4096,28164,28001,357,260,256,560,259,0),at=new WeakMap,ut=gt(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),ft=ot(5,3,1,4,1,0,8,4,110,97,109,101,2,1,0),mt=st(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),yt=gt(1610679297,33751040,134873089,100664833,185276736),At=ot(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),wt=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),Pt=ht(3082,2561,17152,0,0,252),Rt=ht(2058,1537,16640,49152),kt=dt(101318657,301990913,268438272,1835101700,17039717),bt=pt(5,4,1,3,1,1,10,7,1,5,0,254,3,0),Nt=dt(84344833,6357249,17369600,4259847,186257917,1845758464),Ft=pt(10,7,1,5,0,208,112,26);nt.exports={support:(Ut=1)=>et&&it(Uint32Array.of(1836278016,Ut)),get supportStreaming(){return et&&rt(s.instantiateStreaming)},feature:{get bigInt(){return it(ut,!0)},get bulk(){return it(mt)},get exceptions(){return it(yt)},get memory64(){return it(ft)},get mutableGlobal(){return it(At)},get multiValue(){return it(wt)},get saturateConversions(){return it(Pt)},get signExtensions(){return it(Rt)},get tailCall(){return it(kt)},get threads(){return it(bt)},get simd(){return it(Nt)},get references(){return it(Ft)},get typeReflection(){return et&&rt(s.Memory.type)},get funcReferences(){return et&&rt(s.Function)}}}}},ct={};function vt(nt){var it=ct[nt];if(it!==void 0)return it.exports;var s=ct[nt]={id:nt,loaded:!1,exports:{}};return tt[nt].call(s.exports,s,s.exports,vt),s.loaded=!0,s.exports}return vt.amdO={},vt.n=nt=>{var it=nt&&nt.__esModule?()=>nt.default:()=>nt;return vt.d(it,{a:it}),it},vt.d=(nt,it)=>{for(var s in it)vt.o(it,s)&&!vt.o(nt,s)&&Object.defineProperty(nt,s,{enumerable:!0,get:it[s]})},vt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),vt.hmd=nt=>((nt=Object.create(nt)).children||(nt.children=[]),Object.defineProperty(nt,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+nt.id)}}),nt),vt.o=(nt,it)=>Object.prototype.hasOwnProperty.call(nt,it),vt.r=nt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nt,"__esModule",{value:!0})},vt(1256)})())})(apiRTC_min,apiRTC_min.exports);var apiRTC_minExports=apiRTC_min.exports;function _objectWithoutPropertiesLoose(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,vt;for(vt=0;vt<tt.length;vt++)ct=tt[vt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends.apply(this,arguments)}function r$1(a){var o,_e,tt="";if(typeof a=="string"||typeof a=="number")tt+=a;else if(typeof a=="object")if(Array.isArray(a))for(o=0;o<a.length;o++)a[o]&&(_e=r$1(a[o]))&&(tt&&(tt+=" "),tt+=_e);else for(o in a)a[o]&&(tt&&(tt+=" "),tt+=o);return tt}function clsx(){for(var a,o,_e=0,tt="";_e<arguments.length;)(a=arguments[_e++])&&(o=r$1(a))&&(tt&&(tt+=" "),tt+=o);return tt}function isPlainObject(a){return a!==null&&typeof a=="object"&&a.constructor===Object}function deepClone(a){if(!isPlainObject(a))return a;const o={};return Object.keys(a).forEach(_e=>{o[_e]=deepClone(a[_e])}),o}function deepmerge(a,o,_e={clone:!0}){const tt=_e.clone?_extends({},a):a;return isPlainObject(a)&&isPlainObject(o)&&Object.keys(o).forEach(ct=>{ct!=="__proto__"&&(isPlainObject(o[ct])&&ct in a&&isPlainObject(a[ct])?tt[ct]=deepmerge(a[ct],o[ct],_e):_e.clone?tt[ct]=isPlainObject(o[ct])?deepClone(o[ct]):o[ct]:tt[ct]=o[ct])}),tt}function formatMuiErrorMessage(a){let o="https://mui.com/production-error/?code="+a;for(let _e=1;_e<arguments.length;_e+=1)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified MUI error #"+a+"; visit "+o+" for the full message."}var reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$2=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$2=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case b$2:switch(a=a.type,a){case d$2:case f$1:case e$1:case m$2:case n$1:return a;default:switch(a=a&&a.$$typeof,a){case k$1:case h$1:case l$1:case q$2:case p$1:case g$2:return a;default:return o}}case c$2:return o}}}reactIs_production_min$1.ContextConsumer=h$1;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$2;reactIs_production_min$1.ForwardRef=l$1;reactIs_production_min$1.Fragment=d$2;reactIs_production_min$1.Lazy=q$2;reactIs_production_min$1.Memo=p$1;reactIs_production_min$1.Portal=c$2;reactIs_production_min$1.Profiler=f$1;reactIs_production_min$1.StrictMode=e$1;reactIs_production_min$1.Suspense=m$2;reactIs_production_min$1.SuspenseList=n$1;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(a){return v$1(a)===h$1};reactIs_production_min$1.isContextProvider=function(a){return v$1(a)===g$2};reactIs_production_min$1.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===b$2};reactIs_production_min$1.isForwardRef=function(a){return v$1(a)===l$1};reactIs_production_min$1.isFragment=function(a){return v$1(a)===d$2};reactIs_production_min$1.isLazy=function(a){return v$1(a)===q$2};reactIs_production_min$1.isMemo=function(a){return v$1(a)===p$1};reactIs_production_min$1.isPortal=function(a){return v$1(a)===c$2};reactIs_production_min$1.isProfiler=function(a){return v$1(a)===f$1};reactIs_production_min$1.isStrictMode=function(a){return v$1(a)===e$1};reactIs_production_min$1.isSuspense=function(a){return v$1(a)===m$2};reactIs_production_min$1.isSuspenseList=function(a){return v$1(a)===n$1};reactIs_production_min$1.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===d$2||a===f$1||a===e$1||a===m$2||a===n$1||a===t$1||typeof a=="object"&&a!==null&&(a.$$typeof===q$2||a.$$typeof===p$1||a.$$typeof===g$2||a.$$typeof===h$1||a.$$typeof===l$1||a.$$typeof===u$1||a.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$1;function capitalize(a){if(typeof a!="string")throw new Error(formatMuiErrorMessage(7));return a.charAt(0).toUpperCase()+a.slice(1)}function createChainedFunction(...a){return a.reduce((o,_e)=>_e==null?o:function(...ct){o.apply(this,ct),_e.apply(this,ct)},()=>{})}function debounce$1(a,o=166){let _e;function tt(...ct){const vt=()=>{a.apply(this,ct)};clearTimeout(_e),_e=setTimeout(vt,o)}return tt.clear=()=>{clearTimeout(_e)},tt}function ownerDocument(a){return a&&a.ownerDocument||document}function ownerWindow(a){return ownerDocument(a).defaultView||window}function setRef(a,o){typeof a=="function"?a(o):a&&(a.current=o)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(a){const[o,_e]=reactExports.useState(a),tt=a||o;return reactExports.useEffect(()=>{o==null&&(globalId+=1,_e(`mui-${globalId}`))},[o]),tt}const maybeReactUseId=React$2["useId".toString()];function useId(a){if(maybeReactUseId!==void 0){const o=maybeReactUseId();return a??o}return useGlobalId(a)}function useControlled({controlled:a,default:o,name:_e,state:tt="value"}){const{current:ct}=reactExports.useRef(a!==void 0),[vt,nt]=reactExports.useState(o),it=ct?a:vt,s=reactExports.useCallback(et=>{ct||nt(et)},[]);return[it,s]}function useEventCallback(a){const o=reactExports.useRef(a);return useEnhancedEffect$1(()=>{o.current=a}),reactExports.useCallback((..._e)=>(0,o.current)(..._e),[])}function useForkRef(...a){return reactExports.useMemo(()=>a.every(o=>o==null)?null:o=>{a.forEach(_e=>{setRef(_e,o)})},a)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(a){const{type:o,tagName:_e}=a;return!!(_e==="INPUT"&&inputTypesWhitelist[o]&&!a.readOnly||_e==="TEXTAREA"&&!a.readOnly||a.isContentEditable)}function handleKeyDown(a){a.metaKey||a.altKey||a.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(a){a.addEventListener("keydown",handleKeyDown,!0),a.addEventListener("mousedown",handlePointerDown,!0),a.addEventListener("pointerdown",handlePointerDown,!0),a.addEventListener("touchstart",handlePointerDown,!0),a.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(a){const{target:o}=a;try{return o.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(o)}function useIsFocusVisible(){const a=reactExports.useCallback(ct=>{ct!=null&&prepare(ct.ownerDocument)},[]),o=reactExports.useRef(!1);function _e(){return o.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),o.current=!1,!0):!1}function tt(ct){return isFocusVisible(ct)?(o.current=!0,!0):!1}return{isFocusVisibleRef:o,onFocus:tt,onBlur:_e,ref:a}}function getScrollbarSize(a){const o=a.documentElement.clientWidth;return Math.abs(window.innerWidth-o)}function resolveProps(a,o){const _e=_extends({},o);return Object.keys(a).forEach(tt=>{if(tt.toString().match(/^(components|slots)$/))_e[tt]=_extends({},a[tt],_e[tt]);else if(tt.toString().match(/^(componentsProps|slotProps)$/)){const ct=a[tt]||{},vt=o[tt];_e[tt]={},!vt||!Object.keys(vt)?_e[tt]=ct:!ct||!Object.keys(ct)?_e[tt]=vt:(_e[tt]=_extends({},vt),Object.keys(ct).forEach(nt=>{_e[tt][nt]=resolveProps(ct[nt],vt[nt])}))}else _e[tt]===void 0&&(_e[tt]=a[tt])}),_e}function composeClasses(a,o,_e=void 0){const tt={};return Object.keys(a).forEach(ct=>{tt[ct]=a[ct].reduce((vt,nt)=>{if(nt){const it=o(nt);it!==""&&vt.push(it),_e&&_e[nt]&&vt.push(_e[nt])}return vt},[]).join(" ")}),tt}const defaultGenerator=a=>a,createClassNameGenerator=()=>{let a=defaultGenerator;return{configure(o){a=o},generate(o){return a(o)},reset(){a=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(a,o,_e="Mui"){const tt=globalStateClassesMapping[o];return tt?`${_e}-${tt}`:`${ClassNameGenerator$1.generate(a)}-${o}`}function generateUtilityClasses(a,o,_e="Mui"){const tt={};return o.forEach(ct=>{tt[ct]=generateUtilityClass(a,ct,_e)}),tt}function memoize$1(a){var o=Object.create(null);return function(_e){return o[_e]===void 0&&(o[_e]=a(_e)),o[_e]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(a){return reactPropsRegex.test(a)||a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)<91});function sheetForTag(a){if(a.sheet)return a.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===a)return document.styleSheets[o]}function createStyleElement(a){var o=document.createElement("style");return o.setAttribute("data-emotion",a.key),a.nonce!==void 0&&o.setAttribute("nonce",a.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function a(_e){var tt=this;this._insertTag=function(ct){var vt;tt.tags.length===0?tt.insertionPoint?vt=tt.insertionPoint.nextSibling:tt.prepend?vt=tt.container.firstChild:vt=tt.before:vt=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(ct,vt),tt.tags.push(ct)},this.isSpeedy=_e.speedy===void 0?!0:_e.speedy,this.tags=[],this.ctr=0,this.nonce=_e.nonce,this.key=_e.key,this.container=_e.container,this.prepend=_e.prepend,this.insertionPoint=_e.insertionPoint,this.before=null}var o=a.prototype;return o.hydrate=function(tt){tt.forEach(this._insertTag)},o.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ct=this.tags[this.tags.length-1];if(this.isSpeedy){var vt=sheetForTag(ct);try{vt.insertRule(tt,vt.cssRules.length)}catch{}}else ct.appendChild(document.createTextNode(tt));this.ctr++},o.flush=function(){this.tags.forEach(function(tt){return tt.parentNode&&tt.parentNode.removeChild(tt)}),this.tags=[],this.ctr=0},a}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(a,o){return charat(a,0)^45?(((o<<2^charat(a,0))<<2^charat(a,1))<<2^charat(a,2))<<2^charat(a,3):0}function trim(a){return a.trim()}function match(a,o){return(a=o.exec(a))?a[0]:a}function replace(a,o,_e){return a.replace(o,_e)}function indexof(a,o){return a.indexOf(o)}function charat(a,o){return a.charCodeAt(o)|0}function substr(a,o,_e){return a.slice(o,_e)}function strlen(a){return a.length}function sizeof(a){return a.length}function append(a,o){return o.push(a),a}function combine(a,o){return a.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(a,o,_e,tt,ct,vt,nt){return{value:a,root:o,parent:_e,type:tt,props:ct,children:vt,line,column,length:nt,return:""}}function copy(a,o){return assign(node("",null,null,"",null,null,0),a,{length:-a.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(a,o){return substr(characters,a,o)}function token(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(a){return line=column=1,length=strlen(characters=a),position=0,[]}function dealloc(a){return characters="",a}function delimit(a){return trim(slice(position-1,delimiter(a===91?a+2:a===40?a+1:a)))}function whitespace(a){for(;(character=peek())&&character<33;)next();return token(a)>2||token(character)>3?"":" "}function escaping(a,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(a,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(a){for(;next();)switch(character){case a:return position;case 34:case 39:a!==34&&a!==39&&delimiter(character);break;case 40:a===41&&delimiter(a);break;case 92:next();break}return position}function commenter(a,o){for(;next()&&a+character!==47+10;)if(a+character===42+42&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(a===47?a:next())}function identifier(a){for(;!token(peek());)next();return slice(a,position)}function compile(a){return dealloc(parse("",null,null,null,[""],a=alloc(a),0,[0],a))}function parse(a,o,_e,tt,ct,vt,nt,it,s){for(var et=0,rt=0,ot=nt,gt=0,dt=0,pt=0,st=1,ht=1,at=1,ut=0,ft="",mt=ct,yt=vt,At=tt,wt=ft;ht;)switch(pt=ut,ut=next()){case 40:if(pt!=108&&charat(wt,ot-1)==58){indexof(wt+=replace(delimit(ut),"&","&\f"),"&\f")!=-1&&(at=-1);break}case 34:case 39:case 91:wt+=delimit(ut);break;case 9:case 10:case 13:case 32:wt+=whitespace(pt);break;case 92:wt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,_e),s);break;default:wt+="/"}break;case 123*st:it[et++]=strlen(wt)*at;case 125*st:case 59:case 0:switch(ut){case 0:case 125:ht=0;case 59+rt:at==-1&&(wt=replace(wt,/\f/g,"")),dt>0&&strlen(wt)-ot&&append(dt>32?declaration(wt+";",tt,_e,ot-1):declaration(replace(wt," ","")+";",tt,_e,ot-2),s);break;case 59:wt+=";";default:if(append(At=ruleset(wt,o,_e,et,rt,ct,it,ft,mt=[],yt=[],ot),vt),ut===123)if(rt===0)parse(wt,o,At,At,mt,vt,ot,it,yt);else switch(gt===99&&charat(wt,3)===110?100:gt){case 100:case 108:case 109:case 115:parse(a,At,At,tt&&append(ruleset(a,At,At,0,0,ct,it,ft,ct,mt=[],ot),yt),ct,yt,ot,it,tt?mt:yt);break;default:parse(wt,At,At,At,[""],yt,0,it,yt)}}et=rt=dt=0,st=at=1,ft=wt="",ot=nt;break;case 58:ot=1+strlen(wt),dt=pt;default:if(st<1){if(ut==123)--st;else if(ut==125&&st++==0&&prev()==125)continue}switch(wt+=from(ut),ut*st){case 38:at=rt>0?1:(wt+="\f",-1);break;case 44:it[et++]=(strlen(wt)-1)*at,at=1;break;case 64:peek()===45&&(wt+=delimit(next())),gt=peek(),rt=ot=strlen(ft=wt+=identifier(caret())),ut++;break;case 45:pt===45&&strlen(wt)==2&&(st=0)}}return vt}function ruleset(a,o,_e,tt,ct,vt,nt,it,s,et,rt){for(var ot=ct-1,gt=ct===0?vt:[""],dt=sizeof(gt),pt=0,st=0,ht=0;pt<tt;++pt)for(var at=0,ut=substr(a,ot+1,ot=abs(st=nt[pt])),ft=a;at<dt;++at)(ft=trim(st>0?gt[at]+" "+ut:replace(ut,/&\f/g,gt[at])))&&(s[ht++]=ft);return node(a,o,_e,ct===0?RULESET:it,s,et,rt)}function comment(a,o,_e){return node(a,o,_e,COMMENT,from(char()),substr(a,2,-2),0)}function declaration(a,o,_e,tt){return node(a,o,_e,DECLARATION,substr(a,0,tt),substr(a,tt+1,-1),tt)}function serialize(a,o){for(var _e="",tt=sizeof(a),ct=0;ct<tt;ct++)_e+=o(a[ct],ct,a,o)||"";return _e}function stringify(a,o,_e,tt){switch(a.type){case LAYER:if(a.children.length)break;case IMPORT:case DECLARATION:return a.return=a.return||a.value;case COMMENT:return"";case KEYFRAMES:return a.return=a.value+"{"+serialize(a.children,tt)+"}";case RULESET:a.value=a.props.join(",")}return strlen(_e=serialize(a.children,tt))?a.return=a.value+"{"+_e+"}":""}function middleware(a){var o=sizeof(a);return function(_e,tt,ct,vt){for(var nt="",it=0;it<o;it++)nt+=a[it](_e,tt,ct,vt)||"";return nt}}function rulesheet(a){return function(o){o.root||(o=o.return)&&a(o)}}var identifierWithPointTracking=function(o,_e,tt){for(var ct=0,vt=0;ct=vt,vt=peek(),ct===38&&vt===12&&(_e[tt]=1),!token(vt);)next();return slice(o,position)},toRules=function(o,_e){var tt=-1,ct=44;do switch(token(ct)){case 0:ct===38&&peek()===12&&(_e[tt]=1),o[tt]+=identifierWithPointTracking(position-1,_e,tt);break;case 2:o[tt]+=delimit(ct);break;case 4:if(ct===44){o[++tt]=peek()===58?"&\f":"",_e[tt]=o[tt].length;break}default:o[tt]+=from(ct)}while(ct=next());return o},getRules=function(o,_e){return dealloc(toRules(alloc(o),_e))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var _e=o.value,tt=o.parent,ct=o.column===tt.column&&o.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(o.props.length===1&&_e.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!ct){fixedElements.set(o,!0);for(var vt=[],nt=getRules(_e,vt),it=tt.props,s=0,et=0;s<nt.length;s++)for(var rt=0;rt<it.length;rt++,et++)o.props[et]=vt[s]?nt[s].replace(/&\f/g,it[rt]):it[rt]+" "+nt[s]}}},removeLabel=function(o){if(o.type==="decl"){var _e=o.value;_e.charCodeAt(0)===108&&_e.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(a,o){switch(hash$2(a,o)){case 5103:return WEBKIT+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+a+MOZ+a+MS+a+a;case 6828:case 4268:return WEBKIT+a+MS+a+a;case 6165:return WEBKIT+a+MS+"flex-"+a+a;case 5187:return WEBKIT+a+replace(a,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+a;case 5443:return WEBKIT+a+MS+"flex-item-"+replace(a,/flex-|-self/,"")+a;case 4675:return WEBKIT+a+MS+"flex-line-pack"+replace(a,/align-content|flex-|-self/,"")+a;case 5548:return WEBKIT+a+MS+replace(a,"shrink","negative")+a;case 5292:return WEBKIT+a+MS+replace(a,"basis","preferred-size")+a;case 6060:return WEBKIT+"box-"+replace(a,"-grow","")+WEBKIT+a+MS+replace(a,"grow","positive")+a;case 4554:return WEBKIT+replace(a,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+a;case 6187:return replace(replace(replace(a,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),a,"")+a;case 5495:case 3959:return replace(a,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(a,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+a+a;case 4095:case 3583:case 4068:case 2532:return replace(a,/(.+)-inline(.+)/,WEBKIT+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(a)-1-o>6)switch(charat(a,o+1)){case 109:if(charat(a,o+4)!==45)break;case 102:return replace(a,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(a,o+3)==108?"$3":"$2-$3"))+a;case 115:return~indexof(a,"stretch")?prefix(replace(a,"stretch","fill-available"),o)+a:a}break;case 4949:if(charat(a,o+1)!==115)break;case 6444:switch(charat(a,strlen(a)-3-(~indexof(a,"!important")&&10))){case 107:return replace(a,":",":"+WEBKIT)+a;case 101:return replace(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(a,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+a}break;case 5936:switch(charat(a,o+11)){case 114:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return WEBKIT+a+MS+a+a}return a}var prefixer=function(o,_e,tt,ct){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],ct);case RULESET:if(o.length)return combine(o.props,function(vt){switch(match(vt,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(vt,/:(read-\w+)/,":"+MOZ+"$1")]})],ct);case"::placeholder":return serialize([copy(o,{props:[replace(vt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(vt,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(vt,/:(plac\w+)/,MS+"input-$1")]})],ct)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var _e=o.key;if(_e==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(st){var ht=st.getAttribute("data-emotion");ht.indexOf(" ")!==-1&&(document.head.appendChild(st),st.setAttribute("data-s",""))})}var ct=o.stylisPlugins||defaultStylisPlugins,vt={},nt,it=[];nt=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+_e+' "]'),function(st){for(var ht=st.getAttribute("data-emotion").split(" "),at=1;at<ht.length;at++)vt[ht[at]]=!0;it.push(st)});var s,et=[compat,removeLabel];{var rt,ot=[stringify,rulesheet(function(st){rt.insert(st)})],gt=middleware(et.concat(ct,ot)),dt=function(ht){return serialize(compile(ht),gt)};s=function(ht,at,ut,ft){rt=ut,dt(ht?ht+"{"+at.styles+"}":at.styles),ft&&(pt.inserted[at.name]=!0)}}var pt={key:_e,sheet:new StyleSheet({key:_e,container:nt,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:vt,registered:{},insert:s};return pt.sheet.hydrate(it),pt},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e=b$1?Symbol.for("react.fragment"):60107,f=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h=b$1?Symbol.for("react.provider"):60109,k=b$1?Symbol.for("react.context"):60110,l=b$1?Symbol.for("react.async_mode"):60111,m$1=b$1?Symbol.for("react.concurrent_mode"):60111,n=b$1?Symbol.for("react.forward_ref"):60112,p=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case c$1:switch(a=a.type,a){case l:case m$1:case e:case g$1:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return o}}case d$1:return o}}}function A$2(a){return z$1(a)===m$1}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(a){return A$2(a)||z$1(a)===l};reactIs_production_min.isConcurrentMode=A$2;reactIs_production_min.isContextConsumer=function(a){return z$1(a)===k};reactIs_production_min.isContextProvider=function(a){return z$1(a)===h};reactIs_production_min.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===c$1};reactIs_production_min.isForwardRef=function(a){return z$1(a)===n};reactIs_production_min.isFragment=function(a){return z$1(a)===e};reactIs_production_min.isLazy=function(a){return z$1(a)===t};reactIs_production_min.isMemo=function(a){return z$1(a)===r};reactIs_production_min.isPortal=function(a){return z$1(a)===d$1};reactIs_production_min.isProfiler=function(a){return z$1(a)===g$1};reactIs_production_min.isStrictMode=function(a){return z$1(a)===f};reactIs_production_min.isSuspense=function(a){return z$1(a)===p};reactIs_production_min.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===e||a===m$1||a===g$1||a===f||a===p||a===q$1||typeof a=="object"&&a!==null&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w$1||a.$$typeof===x$1||a.$$typeof===y$1||a.$$typeof===v)};reactIs_production_min.typeOf=z$1;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(a,o,_e){var tt="";return _e.split(" ").forEach(function(ct){a[ct]!==void 0?o.push(a[ct]+";"):tt+=ct+" "}),tt}var registerStyles=function(o,_e,tt){var ct=o.key+"-"+_e.name;(tt===!1||isBrowser===!1)&&o.registered[ct]===void 0&&(o.registered[ct]=_e.styles)},insertStyles=function(o,_e,tt){registerStyles(o,_e,tt);var ct=o.key+"-"+_e.name;if(o.inserted[_e.name]===void 0){var vt=_e;do o.insert(_e===vt?"."+ct:"",vt,o.sheet,!0),vt=vt.next;while(vt!==void 0)}};function murmur2(a){for(var o=0,_e,tt=0,ct=a.length;ct>=4;++tt,ct-=4)_e=a.charCodeAt(tt)&255|(a.charCodeAt(++tt)&255)<<8|(a.charCodeAt(++tt)&255)<<16|(a.charCodeAt(++tt)&255)<<24,_e=(_e&65535)*1540483477+((_e>>>16)*59797<<16),_e^=_e>>>24,o=(_e&65535)*1540483477+((_e>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(ct){case 3:o^=(a.charCodeAt(tt+2)&255)<<16;case 2:o^=(a.charCodeAt(tt+1)&255)<<8;case 1:o^=a.charCodeAt(tt)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(a){return isCustomProperty(a)?a:a.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,_e){switch(o){case"animation":case"animationName":if(typeof _e=="string")return _e.replace(animationRegex,function(tt,ct,vt){return cursor={name:ct,styles:vt,next:cursor},ct})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof _e=="number"&&_e!==0?_e+"px":_e},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(a,o,_e){if(_e==null)return"";if(_e.__emotion_styles!==void 0)return _e;switch(typeof _e){case"boolean":return"";case"object":{if(_e.anim===1)return cursor={name:_e.name,styles:_e.styles,next:cursor},_e.name;if(_e.styles!==void 0){var tt=_e.next;if(tt!==void 0)for(;tt!==void 0;)cursor={name:tt.name,styles:tt.styles,next:cursor},tt=tt.next;var ct=_e.styles+";";return ct}return createStringFromObject(a,o,_e)}case"function":{if(a!==void 0){var vt=cursor,nt=_e(a);return cursor=vt,handleInterpolation(a,o,nt)}break}}if(o==null)return _e;var it=o[_e];return it!==void 0?it:_e}function createStringFromObject(a,o,_e){var tt="";if(Array.isArray(_e))for(var ct=0;ct<_e.length;ct++)tt+=handleInterpolation(a,o,_e[ct])+";";else for(var vt in _e){var nt=_e[vt];if(typeof nt!="object")o!=null&&o[nt]!==void 0?tt+=vt+"{"+o[nt]+"}":isProcessableValue(nt)&&(tt+=processStyleName(vt)+":"+processStyleValue(vt,nt)+";");else if(Array.isArray(nt)&&typeof nt[0]=="string"&&(o==null||o[nt[0]]===void 0))for(var it=0;it<nt.length;it++)isProcessableValue(nt[it])&&(tt+=processStyleName(vt)+":"+processStyleValue(vt,nt[it])+";");else{var s=handleInterpolation(a,o,nt);switch(vt){case"animation":case"animationName":{tt+=processStyleName(vt)+":"+s+";";break}default:tt+=vt+"{"+s+"}"}}}return tt}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,_e,tt){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var ct=!0,vt="";cursor=void 0;var nt=o[0];nt==null||nt.raw===void 0?(ct=!1,vt+=handleInterpolation(tt,_e,nt)):vt+=nt[0];for(var it=1;it<o.length;it++)vt+=handleInterpolation(tt,_e,o[it]),ct&&(vt+=nt[it]);labelPattern.lastIndex=0;for(var s="",et;(et=labelPattern.exec(vt))!==null;)s+="-"+et[1];var rt=murmur2(vt)+s;return{name:rt,styles:vt,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports.forwardRef(function(_e,tt){var ct=reactExports.useContext(EmotionCacheContext);return o(_e,ct,tt)})},ThemeContext$2=reactExports.createContext({}),Global=withEmotionCache(function(a,o){var _e=a.styles,tt=serializeStyles([_e],void 0,reactExports.useContext(ThemeContext$2)),ct=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var vt=o.key+"-global",nt=new o.sheet.constructor({key:vt,nonce:o.sheet.nonce,container:o.sheet.container,speedy:o.sheet.isSpeedy}),it=!1,s=document.querySelector('style[data-emotion="'+vt+" "+tt.name+'"]');return o.sheet.tags.length&&(nt.before=o.sheet.tags[0]),s!==null&&(it=!0,s.setAttribute("data-emotion",vt),nt.hydrate([s])),ct.current=[nt,it],function(){nt.flush()}},[o]),useInsertionEffectWithLayoutFallback(function(){var vt=ct.current,nt=vt[0],it=vt[1];if(it){vt[1]=!1;return}if(tt.next!==void 0&&insertStyles(o,tt.next,!0),nt.tags.length){var s=nt.tags[nt.tags.length-1].nextElementSibling;nt.before=s,nt.flush()}o.insert("",tt,nt,!1)},[o,tt.name]),null});function css(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return serializeStyles(o)}var keyframes=function(){var o=css.apply(void 0,arguments),_e="animation-"+o.name;return{name:_e,styles:"@keyframes "+_e+"{"+o.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,_e,tt){var ct;if(_e){var vt=_e.shouldForwardProp;ct=o.__emotion_forwardProp&&vt?function(nt){return o.__emotion_forwardProp(nt)&&vt(nt)}:vt}return typeof ct!="function"&&tt&&(ct=o.__emotion_forwardProp),ct},Insertion=function(o){var _e=o.cache,tt=o.serialized,ct=o.isStringTag;return registerStyles(_e,tt,ct),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(_e,tt,ct)}),null},createStyled$1=function a(o,_e){var tt=o.__emotion_real===o,ct=tt&&o.__emotion_base||o,vt,nt;_e!==void 0&&(vt=_e.label,nt=_e.target);var it=composeShouldForwardProps(o,_e,tt),s=it||getDefaultShouldForwardProp(ct),et=!s("as");return function(){var rt=arguments,ot=tt&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(vt!==void 0&&ot.push("label:"+vt+";"),rt[0]==null||rt[0].raw===void 0)ot.push.apply(ot,rt);else{ot.push(rt[0][0]);for(var gt=rt.length,dt=1;dt<gt;dt++)ot.push(rt[dt],rt[0][dt])}var pt=withEmotionCache(function(st,ht,at){var ut=et&&st.as||ct,ft="",mt=[],yt=st;if(st.theme==null){yt={};for(var At in st)yt[At]=st[At];yt.theme=reactExports.useContext(ThemeContext$2)}typeof st.className=="string"?ft=getRegisteredStyles(ht.registered,mt,st.className):st.className!=null&&(ft=st.className+" ");var wt=serializeStyles(ot.concat(mt),ht.registered,yt);ft+=ht.key+"-"+wt.name,nt!==void 0&&(ft+=" "+nt);var Pt=et&&it===void 0?getDefaultShouldForwardProp(ut):s,Rt={};for(var kt in st)et&&kt==="as"||Pt(kt)&&(Rt[kt]=st[kt]);return Rt.className=ft,Rt.ref=at,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ht,serialized:wt,isStringTag:typeof ut=="string"}),reactExports.createElement(ut,Rt))});return pt.displayName=vt!==void 0?vt:"Styled("+(typeof ct=="string"?ct:ct.displayName||ct.name||"Component")+")",pt.defaultProps=o.defaultProps,pt.__emotion_real=pt,pt.__emotion_base=ct,pt.__emotion_styles=ot,pt.__emotion_forwardProp=it,Object.defineProperty(pt,"toString",{value:function(){return"."+nt}}),pt.withComponent=function(st,ht){return a(st,_extends({},_e,ht,{shouldForwardProp:composeShouldForwardProps(pt,ht,!0)})).apply(void 0,ot)},pt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(a){newStyled[a]=newStyled(a)});function isEmpty$4(a){return a==null||Object.keys(a).length===0}function GlobalStyles$2(a){const{styles:o,defaultTheme:_e={}}=a,tt=typeof o=="function"?ct=>o(isEmpty$4(ct)?_e:ct):o;return jsxRuntimeExports.jsx(Global,{styles:tt})}/**
 * @mui/styled-engine v5.14.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$3(a,o){return newStyled(a,o)}const internal_processStyles=(a,o)=>{Array.isArray(a.__emotion_styles)&&(a.__emotion_styles=o(a.__emotion_styles))},_excluded$T=["values","unit","step"],sortBreakpointsValues=a=>{const o=Object.keys(a).map(_e=>({key:_e,val:a[_e]}))||[];return o.sort((_e,tt)=>_e.val-tt.val),o.reduce((_e,tt)=>_extends({},_e,{[tt.key]:tt.val}),{})};function createBreakpoints(a){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:_e="px",step:tt=5}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$T),vt=sortBreakpointsValues(o),nt=Object.keys(vt);function it(gt){return`@media (min-width:${typeof o[gt]=="number"?o[gt]:gt}${_e})`}function s(gt){return`@media (max-width:${(typeof o[gt]=="number"?o[gt]:gt)-tt/100}${_e})`}function et(gt,dt){const pt=nt.indexOf(dt);return`@media (min-width:${typeof o[gt]=="number"?o[gt]:gt}${_e}) and (max-width:${(pt!==-1&&typeof o[nt[pt]]=="number"?o[nt[pt]]:dt)-tt/100}${_e})`}function rt(gt){return nt.indexOf(gt)+1<nt.length?et(gt,nt[nt.indexOf(gt)+1]):it(gt)}function ot(gt){const dt=nt.indexOf(gt);return dt===0?it(nt[1]):dt===nt.length-1?s(nt[dt]):et(gt,nt[nt.indexOf(gt)+1]).replace("@media","@media not all and")}return _extends({keys:nt,values:vt,up:it,down:s,between:et,only:rt,not:ot,unit:_e},ct)}const shape={borderRadius:4},shape$1=shape;function merge(a,o){return o?deepmerge(a,o,{clone:!1}):a}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:a=>`@media (min-width:${values$1[a]}px)`};function handleBreakpoints(a,o,_e){const tt=a.theme||{};if(Array.isArray(o)){const vt=tt.breakpoints||defaultBreakpoints;return o.reduce((nt,it,s)=>(nt[vt.up(vt.keys[s])]=_e(o[s]),nt),{})}if(typeof o=="object"){const vt=tt.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((nt,it)=>{if(Object.keys(vt.values||values$1).indexOf(it)!==-1){const s=vt.up(it);nt[s]=_e(o[it],it)}else{const s=it;nt[s]=o[s]}return nt},{})}return _e(o)}function createEmptyBreakpointObject(a={}){var o;return((o=a.keys)==null?void 0:o.reduce((tt,ct)=>{const vt=a.up(ct);return tt[vt]={},tt},{}))||{}}function removeUnusedBreakpoints(a,o){return a.reduce((_e,tt)=>{const ct=_e[tt];return(!ct||Object.keys(ct).length===0)&&delete _e[tt],_e},o)}function mergeBreakpointsInOrder(a,...o){const _e=createEmptyBreakpointObject(a),tt=[_e,...o].reduce((ct,vt)=>deepmerge(ct,vt),{});return removeUnusedBreakpoints(Object.keys(_e),tt)}function computeBreakpointsBase(a,o){if(typeof a!="object")return{};const _e={},tt=Object.keys(o);return Array.isArray(a)?tt.forEach((ct,vt)=>{vt<a.length&&(_e[ct]=!0)}):tt.forEach(ct=>{a[ct]!=null&&(_e[ct]=!0)}),_e}function resolveBreakpointValues({values:a,breakpoints:o,base:_e}){const tt=_e||computeBreakpointsBase(a,o),ct=Object.keys(tt);if(ct.length===0)return a;let vt;return ct.reduce((nt,it,s)=>(Array.isArray(a)?(nt[it]=a[s]!=null?a[s]:a[vt],vt=s):typeof a=="object"?(nt[it]=a[it]!=null?a[it]:a[vt],vt=it):nt[it]=a,nt),{})}function getPath(a,o,_e=!0){if(!o||typeof o!="string")return null;if(a&&a.vars&&_e){const tt=`vars.${o}`.split(".").reduce((ct,vt)=>ct&&ct[vt]?ct[vt]:null,a);if(tt!=null)return tt}return o.split(".").reduce((tt,ct)=>tt&&tt[ct]!=null?tt[ct]:null,a)}function getStyleValue$1(a,o,_e,tt=_e){let ct;return typeof a=="function"?ct=a(_e):Array.isArray(a)?ct=a[_e]||tt:ct=getPath(a,_e)||tt,o&&(ct=o(ct,tt,a)),ct}function style$2(a){const{prop:o,cssProperty:_e=a.prop,themeKey:tt,transform:ct}=a,vt=nt=>{if(nt[o]==null)return null;const it=nt[o],s=nt.theme,et=getPath(s,tt)||{};return handleBreakpoints(nt,it,ot=>{let gt=getStyleValue$1(et,ct,ot);return ot===gt&&typeof ot=="string"&&(gt=getStyleValue$1(et,ct,`${o}${ot==="default"?"":capitalize(ot)}`,ot)),_e===!1?gt:{[_e]:gt}})};return vt.propTypes={},vt.filterProps=[o],vt}function memoize(a){const o={};return _e=>(o[_e]===void 0&&(o[_e]=a(_e)),o[_e])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(a=>{if(a.length>2)if(aliases[a])a=aliases[a];else return[a];const[o,_e]=a.split(""),tt=properties[o],ct=directions[_e]||"";return Array.isArray(ct)?ct.map(vt=>tt+vt):[tt+ct]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(a,o,_e,tt){var ct;const vt=(ct=getPath(a,o,!1))!=null?ct:_e;return typeof vt=="number"?nt=>typeof nt=="string"?nt:vt*nt:Array.isArray(vt)?nt=>typeof nt=="string"?nt:vt[nt]:typeof vt=="function"?vt:()=>{}}function createUnarySpacing(a){return createUnaryUnit(a,"spacing",8)}function getValue(a,o){if(typeof o=="string"||o==null)return o;const _e=Math.abs(o),tt=a(_e);return o>=0?tt:typeof tt=="number"?-tt:`-${tt}`}function getStyleFromPropValue(a,o){return _e=>a.reduce((tt,ct)=>(tt[ct]=getValue(o,_e),tt),{})}function resolveCssProperty(a,o,_e,tt){if(o.indexOf(_e)===-1)return null;const ct=getCssProperties(_e),vt=getStyleFromPropValue(ct,tt),nt=a[_e];return handleBreakpoints(a,nt,vt)}function style$1(a,o){const _e=createUnarySpacing(a.theme);return Object.keys(a).map(tt=>resolveCssProperty(a,o,tt,_e)).reduce(merge,{})}function margin(a){return style$1(a,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(a){return style$1(a,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(a=8){if(a.mui)return a;const o=createUnarySpacing({spacing:a}),_e=(...tt)=>(tt.length===0?[1]:tt).map(vt=>{const nt=o(vt);return typeof nt=="number"?`${nt}px`:nt}).join(" ");return _e.mui=!0,_e}function compose(...a){const o=a.reduce((tt,ct)=>(ct.filterProps.forEach(vt=>{tt[vt]=ct}),tt),{}),_e=tt=>Object.keys(tt).reduce((ct,vt)=>o[vt]?merge(ct,o[vt](tt)):ct,{});return _e.propTypes={},_e.filterProps=a.reduce((tt,ct)=>tt.concat(ct.filterProps),[]),_e}function borderTransform(a){return typeof a!="number"?a:`${a}px solid`}const border=style$2({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$2({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$2({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$2({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$2({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$2({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$2({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$2({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$2({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$2({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=a=>{if(a.borderRadius!==void 0&&a.borderRadius!==null){const o=createUnaryUnit(a.theme,"shape.borderRadius",4),_e=tt=>({borderRadius:getValue(o,tt)});return handleBreakpoints(a,a.borderRadius,_e)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=a=>{if(a.gap!==void 0&&a.gap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({gap:getValue(o,tt)});return handleBreakpoints(a,a.gap,_e)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=a=>{if(a.columnGap!==void 0&&a.columnGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({columnGap:getValue(o,tt)});return handleBreakpoints(a,a.columnGap,_e)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=a=>{if(a.rowGap!==void 0&&a.rowGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({rowGap:getValue(o,tt)});return handleBreakpoints(a,a.rowGap,_e)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(a,o){return o==="grey"?o:a}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(a){return a<=1&&a!==0?`${a*100}%`:a}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=a=>{if(a.maxWidth!==void 0&&a.maxWidth!==null){const o=_e=>{var tt,ct;const vt=((tt=a.theme)==null||(tt=tt.breakpoints)==null||(tt=tt.values)==null?void 0:tt[_e])||values$1[_e];return vt?((ct=a.theme)==null||(ct=ct.breakpoints)==null?void 0:ct.unit)!=="px"?{maxWidth:`${vt}${a.theme.breakpoints.unit}`}:{maxWidth:vt}:{maxWidth:sizingTransform(_e)}};return handleBreakpoints(a,a.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:a=>({"@media print":{display:a}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...a){const o=a.reduce((tt,ct)=>tt.concat(Object.keys(ct)),[]),_e=new Set(o);return a.every(tt=>_e.size===Object.keys(tt).length)}function callIfFn(a,o){return typeof a=="function"?a(o):a}function unstable_createStyleFunctionSx(){function a(_e,tt,ct,vt){const nt={[_e]:tt,theme:ct},it=vt[_e];if(!it)return{[_e]:tt};const{cssProperty:s=_e,themeKey:et,transform:rt,style:ot}=it;if(tt==null)return null;if(et==="typography"&&tt==="inherit")return{[_e]:tt};const gt=getPath(ct,et)||{};return ot?ot(nt):handleBreakpoints(nt,tt,pt=>{let st=getStyleValue$1(gt,rt,pt);return pt===st&&typeof pt=="string"&&(st=getStyleValue$1(gt,rt,`${_e}${pt==="default"?"":capitalize(pt)}`,pt)),s===!1?st:{[s]:st}})}function o(_e){var tt;const{sx:ct,theme:vt={}}=_e||{};if(!ct)return null;const nt=(tt=vt.unstable_sxConfig)!=null?tt:defaultSxConfig$1;function it(s){let et=s;if(typeof s=="function")et=s(vt);else if(typeof s!="object")return s;if(!et)return null;const rt=createEmptyBreakpointObject(vt.breakpoints),ot=Object.keys(rt);let gt=rt;return Object.keys(et).forEach(dt=>{const pt=callIfFn(et[dt],vt);if(pt!=null)if(typeof pt=="object")if(nt[dt])gt=merge(gt,a(dt,pt,vt,nt));else{const st=handleBreakpoints({theme:vt},pt,ht=>({[dt]:ht}));objectsHaveSameKeys(st,pt)?gt[dt]=o({sx:pt,theme:vt}):gt=merge(gt,st)}else gt=merge(gt,a(dt,pt,vt,nt))}),removeUnusedBreakpoints(ot,gt)}return Array.isArray(ct)?ct.map(it):it(ct)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$S=["breakpoints","palette","spacing","shape"];function createTheme$1(a={},...o){const{breakpoints:_e={},palette:tt={},spacing:ct,shape:vt={}}=a,nt=_objectWithoutPropertiesLoose(a,_excluded$S),it=createBreakpoints(_e),s=createSpacing(ct);let et=deepmerge({breakpoints:it,direction:"ltr",components:{},palette:_extends({mode:"light"},tt),spacing:s,shape:_extends({},shape$1,vt)},nt);return et=o.reduce((rt,ot)=>deepmerge(rt,ot),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,nt==null?void 0:nt.unstable_sxConfig),et.unstable_sx=function(ot){return styleFunctionSx$1({sx:ot,theme:this})},et}function isObjectEmpty(a){return Object.keys(a).length===0}function useTheme$3(a=null){const o=reactExports.useContext(ThemeContext$2);return!o||isObjectEmpty(o)?a:o}const systemDefaultTheme$1=createTheme$1();function useTheme$2(a=systemDefaultTheme$1){return useTheme$3(a)}function GlobalStyles$1({styles:a,themeId:o,defaultTheme:_e={}}){const tt=useTheme$2(_e),ct=typeof a=="function"?a(o&&tt[o]||tt):a;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:ct})}const _excluded$R=["sx"],splitProps=a=>{var o,_e;const tt={systemProps:{},otherProps:{}},ct=(o=a==null||(_e=a.theme)==null?void 0:_e.unstable_sxConfig)!=null?o:defaultSxConfig$1;return Object.keys(a).forEach(vt=>{ct[vt]?tt.systemProps[vt]=a[vt]:tt.otherProps[vt]=a[vt]}),tt};function extendSxProp(a){const{sx:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$R),{systemProps:tt,otherProps:ct}=splitProps(_e);let vt;return Array.isArray(o)?vt=[tt,...o]:typeof o=="function"?vt=(...nt)=>{const it=o(...nt);return isPlainObject(it)?_extends({},tt,it):tt}:vt=_extends({},tt,o),_extends({},ct,{sx:vt})}const _excluded$Q=["className","component"];function createBox(a={}){const{themeId:o,defaultTheme:_e,defaultClassName:tt="MuiBox-root",generateClassName:ct}=a,vt=styled$3("div",{shouldForwardProp:it=>it!=="theme"&&it!=="sx"&&it!=="as"})(styleFunctionSx$1);return reactExports.forwardRef(function(s,et){const rt=useTheme$2(_e),ot=extendSxProp(s),{className:gt,component:dt="div"}=ot,pt=_objectWithoutPropertiesLoose(ot,_excluded$Q);return jsxRuntimeExports.jsx(vt,_extends({as:dt,ref:et,className:clsx(gt,ct?ct(tt):tt),theme:o&&rt[o]||rt},pt))})}const _excluded$P=["variant"];function isEmpty$3(a){return a.length===0}function propsToClassKey(a){const{variant:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$P);let tt=o||"";return Object.keys(_e).sort().forEach(ct=>{ct==="color"?tt+=isEmpty$3(tt)?a[ct]:capitalize(a[ct]):tt+=`${isEmpty$3(tt)?ct:capitalize(ct)}${capitalize(a[ct].toString())}`}),tt}const _excluded$O=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty$2(a){return Object.keys(a).length===0}function isStringTag(a){return typeof a=="string"&&a.charCodeAt(0)>96}const getStyleOverrides=(a,o)=>o.components&&o.components[a]&&o.components[a].styleOverrides?o.components[a].styleOverrides:null,transformVariants=a=>{const o={};return a&&a.forEach(_e=>{const tt=propsToClassKey(_e.props);o[tt]=_e.style}),o},getVariantStyles=(a,o)=>{let _e=[];return o&&o.components&&o.components[a]&&o.components[a].variants&&(_e=o.components[a].variants),transformVariants(_e)},variantsResolver=(a,o,_e)=>{const{ownerState:tt={}}=a,ct=[];return _e&&_e.forEach(vt=>{let nt=!0;Object.keys(vt.props).forEach(it=>{tt[it]!==vt.props[it]&&a[it]!==vt.props[it]&&(nt=!1)}),nt&&ct.push(o[propsToClassKey(vt.props)])}),ct},themeVariantsResolver=(a,o,_e,tt)=>{var ct;const vt=_e==null||(ct=_e.components)==null||(ct=ct[tt])==null?void 0:ct.variants;return variantsResolver(a,o,vt)};function shouldForwardProp(a){return a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=a=>a&&a.charAt(0).toLowerCase()+a.slice(1);function resolveTheme({defaultTheme:a,theme:o,themeId:_e}){return isEmpty$2(o)?a:o[_e]||o}function defaultOverridesResolver(a){return a?(o,_e)=>_e[a]:null}const muiStyledFunctionResolver=({styledArg:a,props:o,defaultTheme:_e,themeId:tt})=>{const ct=a(_extends({},o,{theme:resolveTheme(_extends({},o,{defaultTheme:_e,themeId:tt}))}));let vt;if(ct&&ct.variants&&(vt=ct.variants,delete ct.variants),vt){const nt=variantsResolver(o,transformVariants(vt),vt);return[ct,...nt]}return ct};function createStyled(a={}){const{themeId:o,defaultTheme:_e=systemDefaultTheme,rootShouldForwardProp:tt=shouldForwardProp,slotShouldForwardProp:ct=shouldForwardProp}=a,vt=nt=>styleFunctionSx$1(_extends({},nt,{theme:resolveTheme(_extends({},nt,{defaultTheme:_e,themeId:o}))}));return vt.__mui_systemSx=!0,(nt,it={})=>{internal_processStyles(nt,mt=>mt.filter(yt=>!(yt!=null&&yt.__mui_systemSx)));const{name:s,slot:et,skipVariantsResolver:rt,skipSx:ot,overridesResolver:gt=defaultOverridesResolver(lowercaseFirstLetter(et))}=it,dt=_objectWithoutPropertiesLoose(it,_excluded$O),pt=rt!==void 0?rt:et&&et!=="Root"&&et!=="root"||!1,st=ot||!1;let ht,at=shouldForwardProp;et==="Root"||et==="root"?at=tt:et?at=ct:isStringTag(nt)&&(at=void 0);const ut=styled$3(nt,_extends({shouldForwardProp:at,label:ht},dt)),ft=(mt,...yt)=>{const At=yt?yt.map(kt=>{if(typeof kt=="function"&&kt.__emotion_real!==kt)return bt=>muiStyledFunctionResolver({styledArg:kt,props:bt,defaultTheme:_e,themeId:o});if(isPlainObject(kt)){let bt=kt,Nt;return kt&&kt.variants&&(Nt=kt.variants,delete bt.variants,bt=Ft=>{let Ut=kt;return variantsResolver(Ft,transformVariants(Nt),Nt).forEach(hn=>{Ut=deepmerge(Ut,hn)}),Ut}),bt}return kt}):[];let wt=mt;if(isPlainObject(mt)){let kt;mt&&mt.variants&&(kt=mt.variants,delete wt.variants,wt=bt=>{let Nt=mt;return variantsResolver(bt,transformVariants(kt),kt).forEach(Ut=>{Nt=deepmerge(Nt,Ut)}),Nt})}else typeof mt=="function"&&mt.__emotion_real!==mt&&(wt=kt=>muiStyledFunctionResolver({styledArg:mt,props:kt,defaultTheme:_e,themeId:o}));s&&gt&&At.push(kt=>{const bt=resolveTheme(_extends({},kt,{defaultTheme:_e,themeId:o})),Nt=getStyleOverrides(s,bt);if(Nt){const Ft={};return Object.entries(Nt).forEach(([Ut,Jt])=>{Ft[Ut]=typeof Jt=="function"?Jt(_extends({},kt,{theme:bt})):Jt}),gt(kt,Ft)}return null}),s&&!pt&&At.push(kt=>{const bt=resolveTheme(_extends({},kt,{defaultTheme:_e,themeId:o}));return themeVariantsResolver(kt,getVariantStyles(s,bt),bt,s)}),st||At.push(vt);const Pt=At.length-yt.length;if(Array.isArray(mt)&&Pt>0){const kt=new Array(Pt).fill("");wt=[...mt,...kt],wt.raw=[...mt.raw,...kt]}const Rt=ut(wt,...At);return nt.muiName&&(Rt.muiName=nt.muiName),Rt};return ut.withConfig&&(ft.withConfig=ut.withConfig),ft}}const styled$2=createStyled(),systemStyled=styled$2;function getThemeProps(a){const{theme:o,name:_e,props:tt}=a;return!o||!o.components||!o.components[_e]||!o.components[_e].defaultProps?tt:resolveProps(o.components[_e].defaultProps,tt)}function useThemeProps$1({props:a,name:o,defaultTheme:_e,themeId:tt}){let ct=useTheme$2(_e);return tt&&(ct=ct[tt]||ct),getThemeProps({theme:ct,name:o,props:a})}function clamp(a,o=0,_e=1){return Math.min(Math.max(o,a),_e)}function hexToRgb(a){a=a.slice(1);const o=new RegExp(`.{1,${a.length>=6?2:1}}`,"g");let _e=a.match(o);return _e&&_e[0].length===1&&(_e=_e.map(tt=>tt+tt)),_e?`rgb${_e.length===4?"a":""}(${_e.map((tt,ct)=>ct<3?parseInt(tt,16):Math.round(parseInt(tt,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(a){if(a.type)return a;if(a.charAt(0)==="#")return decomposeColor(hexToRgb(a));const o=a.indexOf("("),_e=a.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(_e)===-1)throw new Error(formatMuiErrorMessage(9,a));let tt=a.substring(o+1,a.length-1),ct;if(_e==="color"){if(tt=tt.split(" "),ct=tt.shift(),tt.length===4&&tt[3].charAt(0)==="/"&&(tt[3]=tt[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ct)===-1)throw new Error(formatMuiErrorMessage(10,ct))}else tt=tt.split(",");return tt=tt.map(vt=>parseFloat(vt)),{type:_e,values:tt,colorSpace:ct}}function recomposeColor(a){const{type:o,colorSpace:_e}=a;let{values:tt}=a;return o.indexOf("rgb")!==-1?tt=tt.map((ct,vt)=>vt<3?parseInt(ct,10):ct):o.indexOf("hsl")!==-1&&(tt[1]=`${tt[1]}%`,tt[2]=`${tt[2]}%`),o.indexOf("color")!==-1?tt=`${_e} ${tt.join(" ")}`:tt=`${tt.join(", ")}`,`${o}(${tt})`}function hslToRgb(a){a=decomposeColor(a);const{values:o}=a,_e=o[0],tt=o[1]/100,ct=o[2]/100,vt=tt*Math.min(ct,1-ct),nt=(et,rt=(et+_e/30)%12)=>ct-vt*Math.max(Math.min(rt-3,9-rt,1),-1);let it="rgb";const s=[Math.round(nt(0)*255),Math.round(nt(8)*255),Math.round(nt(4)*255)];return a.type==="hsla"&&(it+="a",s.push(o[3])),recomposeColor({type:it,values:s})}function getLuminance(a){a=decomposeColor(a);let o=a.type==="hsl"||a.type==="hsla"?decomposeColor(hslToRgb(a)).values:a.values;return o=o.map(_e=>(a.type!=="color"&&(_e/=255),_e<=.03928?_e/12.92:((_e+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(a,o){const _e=getLuminance(a),tt=getLuminance(o);return(Math.max(_e,tt)+.05)/(Math.min(_e,tt)+.05)}function alpha(a,o){return a=decomposeColor(a),o=clamp(o),(a.type==="rgb"||a.type==="hsl")&&(a.type+="a"),a.type==="color"?a.values[3]=`/${o}`:a.values[3]=o,recomposeColor(a)}function darken(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]*=1-o;else if(a.type.indexOf("rgb")!==-1||a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]*=1-o;return recomposeColor(a)}function lighten(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]+=(100-a.values[2])*o;else if(a.type.indexOf("rgb")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(255-a.values[_e])*o;else if(a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(1-a.values[_e])*o;return recomposeColor(a)}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$1(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(a,o){return typeof o=="function"?o(a):_extends({},a,o)}function ThemeProvider$2(a){const{children:o,theme:_e}=a,tt=useTheme$1(),ct=reactExports.useMemo(()=>{const vt=tt===null?_e:mergeOuterLocalTheme(tt,_e);return vt!=null&&(vt[nested]=tt!==null),vt},[_e,tt]);return jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:ct,children:o})}const EMPTY_THEME={};function useThemeScoping(a,o,_e,tt=!1){return reactExports.useMemo(()=>{const ct=a&&o[a]||o;if(typeof _e=="function"){const vt=_e(ct),nt=a?_extends({},o,{[a]:vt}):vt;return tt?()=>nt:nt}return a?_extends({},o,{[a]:_e}):_extends({},o,_e)},[a,o,_e,tt])}function ThemeProvider$1(a){const{children:o,theme:_e,themeId:tt}=a,ct=useTheme$3(EMPTY_THEME),vt=useTheme$1()||EMPTY_THEME,nt=useThemeScoping(tt,ct,_e),it=useThemeScoping(tt,vt,_e,!0);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:it,children:jsxRuntimeExports.jsx(ThemeContext$2.Provider,{value:nt,children:o})})}const _excluded$N=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$1=systemStyled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemePropsDefault$1=a=>useThemeProps$1({props:a,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$z=(a,o)=>{const _e=s=>generateUtilityClass(o,s),{classes:tt,fixed:ct,disableGutters:vt,maxWidth:nt}=a,it={root:["root",nt&&`maxWidth${capitalize(String(nt))}`,ct&&"fixed",vt&&"disableGutters"]};return composeClasses(it,_e,tt)};function createContainer(a={}){const{createStyledComponent:o=defaultCreateStyledComponent$1,useThemeProps:_e=useThemePropsDefault$1,componentName:tt="MuiContainer"}=a,ct=o(({theme:nt,ownerState:it})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!it.disableGutters&&{paddingLeft:nt.spacing(2),paddingRight:nt.spacing(2),[nt.breakpoints.up("sm")]:{paddingLeft:nt.spacing(3),paddingRight:nt.spacing(3)}}),({theme:nt,ownerState:it})=>it.fixed&&Object.keys(nt.breakpoints.values).reduce((s,et)=>{const rt=et,ot=nt.breakpoints.values[rt];return ot!==0&&(s[nt.breakpoints.up(rt)]={maxWidth:`${ot}${nt.breakpoints.unit}`}),s},{}),({theme:nt,ownerState:it})=>_extends({},it.maxWidth==="xs"&&{[nt.breakpoints.up("xs")]:{maxWidth:Math.max(nt.breakpoints.values.xs,444)}},it.maxWidth&&it.maxWidth!=="xs"&&{[nt.breakpoints.up(it.maxWidth)]:{maxWidth:`${nt.breakpoints.values[it.maxWidth]}${nt.breakpoints.unit}`}}));return reactExports.forwardRef(function(it,s){const et=_e(it),{className:rt,component:ot="div",disableGutters:gt=!1,fixed:dt=!1,maxWidth:pt="lg"}=et,st=_objectWithoutPropertiesLoose(et,_excluded$N),ht=_extends({},et,{component:ot,disableGutters:gt,fixed:dt,maxWidth:pt}),at=useUtilityClasses$z(ht,tt);return jsxRuntimeExports.jsx(ct,_extends({as:ot,ownerState:ht,className:clsx(at.root,rt),ref:s},st))})}const _excluded$M=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=systemStyled("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root});function useThemePropsDefault(a){return useThemeProps$1({props:a,name:"MuiStack",defaultTheme:defaultTheme$3})}function joinChildren(a,o){const _e=reactExports.Children.toArray(a).filter(Boolean);return _e.reduce((tt,ct,vt)=>(tt.push(ct),vt<_e.length-1&&tt.push(reactExports.cloneElement(o,{key:`separator-${vt}`})),tt),[])}const getSideFromDirection=a=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[a],style=({ownerState:a,theme:o})=>{let _e=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:o},resolveBreakpointValues({values:a.direction,breakpoints:o.breakpoints.values}),tt=>({flexDirection:tt})));if(a.spacing){const tt=createUnarySpacing(o),ct=Object.keys(o.breakpoints.values).reduce((s,et)=>((typeof a.spacing=="object"&&a.spacing[et]!=null||typeof a.direction=="object"&&a.direction[et]!=null)&&(s[et]=!0),s),{}),vt=resolveBreakpointValues({values:a.direction,base:ct}),nt=resolveBreakpointValues({values:a.spacing,base:ct});typeof vt=="object"&&Object.keys(vt).forEach((s,et,rt)=>{if(!vt[s]){const gt=et>0?vt[rt[et-1]]:"column";vt[s]=gt}}),_e=deepmerge(_e,handleBreakpoints({theme:o},nt,(s,et)=>a.useFlexGap?{gap:getValue(tt,s)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(et?vt[et]:a.direction)}`]:getValue(tt,s)}}))}return _e=mergeBreakpointsInOrder(o.breakpoints,_e),_e};function createStack(a={}){const{createStyledComponent:o=defaultCreateStyledComponent,useThemeProps:_e=useThemePropsDefault,componentName:tt="MuiStack"}=a,ct=()=>composeClasses({root:["root"]},s=>generateUtilityClass(tt,s),{}),vt=o(style);return reactExports.forwardRef(function(s,et){const rt=_e(s),ot=extendSxProp(rt),{component:gt="div",direction:dt="column",spacing:pt=0,divider:st,children:ht,className:at,useFlexGap:ut=!1}=ot,ft=_objectWithoutPropertiesLoose(ot,_excluded$M),mt={direction:dt,spacing:pt,useFlexGap:ut},yt=ct();return jsxRuntimeExports.jsx(vt,_extends({as:gt,ownerState:mt,ref:et,className:clsx(yt.root,at)},ft,{children:st?joinChildren(ht,st):ht}))})}function createMixins(a,o){return _extends({toolbar:{minHeight:56,[a.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[a.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$L=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(a,o,_e,tt){const ct=tt.light||tt,vt=tt.dark||tt*1.5;a[o]||(a.hasOwnProperty(_e)?a[o]=a[_e]:o==="light"?a.light=lighten(a.main,ct):o==="dark"&&(a.dark=darken(a.main,vt)))}function getDefaultPrimary(a="light"){return a==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(a="light"){return a==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(a="light"){return a==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(a="light"){return a==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(a="light"){return a==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(a="light"){return a==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(a){const{mode:o="light",contrastThreshold:_e=3,tonalOffset:tt=.2}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$L),vt=a.primary||getDefaultPrimary(o),nt=a.secondary||getDefaultSecondary(o),it=a.error||getDefaultError(o),s=a.info||getDefaultInfo(o),et=a.success||getDefaultSuccess(o),rt=a.warning||getDefaultWarning(o);function ot(st){return getContrastRatio(st,dark.text.primary)>=_e?dark.text.primary:light.text.primary}const gt=({color:st,name:ht,mainShade:at=500,lightShade:ut=300,darkShade:ft=700})=>{if(st=_extends({},st),!st.main&&st[at]&&(st.main=st[at]),!st.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,ht?` (${ht})`:"",at));if(typeof st.main!="string")throw new Error(formatMuiErrorMessage(12,ht?` (${ht})`:"",JSON.stringify(st.main)));return addLightOrDark(st,"light",ut,tt),addLightOrDark(st,"dark",ft,tt),st.contrastText||(st.contrastText=ot(st.main)),st},dt={dark,light};return deepmerge(_extends({common:_extends({},common$1),mode:o,primary:gt({color:vt,name:"primary"}),secondary:gt({color:nt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:gt({color:it,name:"error"}),warning:gt({color:rt,name:"warning"}),info:gt({color:s,name:"info"}),success:gt({color:et,name:"success"}),grey:grey$1,contrastThreshold:_e,getContrastText:ot,augmentColor:gt,tonalOffset:tt},dt[o]),ct)}const _excluded$K=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(a){return Math.round(a*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(a,o){const _e=typeof o=="function"?o(a):o,{fontFamily:tt=defaultFontFamily,fontSize:ct=14,fontWeightLight:vt=300,fontWeightRegular:nt=400,fontWeightMedium:it=500,fontWeightBold:s=700,htmlFontSize:et=16,allVariants:rt,pxToRem:ot}=_e,gt=_objectWithoutPropertiesLoose(_e,_excluded$K),dt=ct/14,pt=ot||(at=>`${at/et*dt}rem`),st=(at,ut,ft,mt,yt)=>_extends({fontFamily:tt,fontWeight:at,fontSize:pt(ut),lineHeight:ft},tt===defaultFontFamily?{letterSpacing:`${round$2(mt/ut)}em`}:{},yt,rt),ht={h1:st(vt,96,1.167,-1.5),h2:st(vt,60,1.2,-.5),h3:st(nt,48,1.167,0),h4:st(nt,34,1.235,.25),h5:st(nt,24,1.334,0),h6:st(it,20,1.6,.15),subtitle1:st(nt,16,1.75,.15),subtitle2:st(it,14,1.57,.1),body1:st(nt,16,1.5,.15),body2:st(nt,14,1.43,.15),button:st(it,14,1.75,.4,caseAllCaps),caption:st(nt,12,1.66,.4),overline:st(nt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends({htmlFontSize:et,pxToRem:pt,fontFamily:tt,fontSize:ct,fontWeightLight:vt,fontWeightRegular:nt,fontWeightMedium:it,fontWeightBold:s},ht),gt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...a){return[`${a[0]}px ${a[1]}px ${a[2]}px ${a[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${a[4]}px ${a[5]}px ${a[6]}px ${a[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${a[8]}px ${a[9]}px ${a[10]}px ${a[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$J=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(a){return`${Math.round(a)}ms`}function getAutoHeightDuration(a){if(!a)return 0;const o=a/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(a){const o=_extends({},easing,a.easing),_e=_extends({},duration,a.duration);return _extends({getAutoHeightDuration,create:(ct=["all"],vt={})=>{const{duration:nt=_e.standard,easing:it=o.easeInOut,delay:s=0}=vt;return _objectWithoutPropertiesLoose(vt,_excluded$J),(Array.isArray(ct)?ct:[ct]).map(et=>`${et} ${typeof nt=="string"?nt:formatMs(nt)} ${it} ${typeof s=="string"?s:formatMs(s)}`).join(",")}},a,{easing:o,duration:_e})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$I=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(a={},...o){const{mixins:_e={},palette:tt={},transitions:ct={},typography:vt={}}=a,nt=_objectWithoutPropertiesLoose(a,_excluded$I);if(a.vars)throw new Error(formatMuiErrorMessage(18));const it=createPalette(tt),s=createTheme$1(a);let et=deepmerge(s,{mixins:createMixins(s.breakpoints,_e),palette:it,shadows:shadows$1.slice(),typography:createTypography(it,vt),transitions:createTransitions(ct),zIndex:_extends({},zIndex$1)});return et=deepmerge(et,nt),et=o.reduce((rt,ot)=>deepmerge(rt,ot),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,nt==null?void 0:nt.unstable_sxConfig),et.unstable_sx=function(ot){return styleFunctionSx$1({sx:ot,theme:this})},et}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1,THEME_ID="$$material",rootShouldForwardProp=a=>shouldForwardProp(a)&&a!=="classes",slotShouldForwardProp=shouldForwardProp,styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled;function useThemeProps({props:a,name:o}){return useThemeProps$1({props:a,name:o,defaultTheme:defaultTheme$2,themeId:THEME_ID})}function useTheme(){const a=useTheme$2(defaultTheme$2);return a[THEME_ID]||a}const GridContext=reactExports.createContext(),GridContext$1=GridContext;function getGridUtilityClass(a){return generateUtilityClass("MuiGrid",a)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(a=>`spacing-xs-${a}`),...DIRECTIONS.map(a=>`direction-xs-${a}`),...WRAPS.map(a=>`wrap-xs-${a}`),...GRID_SIZES.map(a=>`grid-xs-${a}`),...GRID_SIZES.map(a=>`grid-sm-${a}`),...GRID_SIZES.map(a=>`grid-md-${a}`),...GRID_SIZES.map(a=>`grid-lg-${a}`),...GRID_SIZES.map(a=>`grid-xl-${a}`)]),gridClasses$1=gridClasses,_excluded$H=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(a){const o=parseFloat(a);return`${o}${String(a).replace(String(o),"")||"px"}`}function generateGrid({theme:a,ownerState:o}){let _e;return a.breakpoints.keys.reduce((tt,ct)=>{let vt={};if(o[ct]&&(_e=o[ct]),!_e)return tt;if(_e===!0)vt={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(_e==="auto")vt={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const nt=resolveBreakpointValues({values:o.columns,breakpoints:a.breakpoints.values}),it=typeof nt=="object"?nt[ct]:nt;if(it==null)return tt;const s=`${Math.round(_e/it*1e8)/1e6}%`;let et={};if(o.container&&o.item&&o.columnSpacing!==0){const rt=a.spacing(o.columnSpacing);if(rt!=="0px"){const ot=`calc(${s} + ${getOffset(rt)})`;et={flexBasis:ot,maxWidth:ot}}}vt=_extends({flexBasis:s,flexGrow:0,maxWidth:s},et)}return a.breakpoints.values[ct]===0?Object.assign(tt,vt):tt[a.breakpoints.up(ct)]=vt,tt},{})}function generateDirection({theme:a,ownerState:o}){const _e=resolveBreakpointValues({values:o.direction,breakpoints:a.breakpoints.values});return handleBreakpoints({theme:a},_e,tt=>{const ct={flexDirection:tt};return tt.indexOf("column")===0&&(ct[`& > .${gridClasses$1.item}`]={maxWidth:"none"}),ct})}function extractZeroValueBreakpointKeys({breakpoints:a,values:o}){let _e="";Object.keys(o).forEach(ct=>{_e===""&&o[ct]!==0&&(_e=ct)});const tt=Object.keys(a).sort((ct,vt)=>a[ct]-a[vt]);return tt.slice(0,tt.indexOf(_e))}function generateRowGap({theme:a,ownerState:o}){const{container:_e,rowSpacing:tt}=o;let ct={};if(_e&&tt!==0){const vt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let nt;typeof vt=="object"&&(nt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:vt})),ct=handleBreakpoints({theme:a},vt,(it,s)=>{var et;const rt=a.spacing(it);return rt!=="0px"?{marginTop:`-${getOffset(rt)}`,[`& > .${gridClasses$1.item}`]:{paddingTop:getOffset(rt)}}:(et=nt)!=null&&et.includes(s)?{}:{marginTop:0,[`& > .${gridClasses$1.item}`]:{paddingTop:0}}})}return ct}function generateColumnGap({theme:a,ownerState:o}){const{container:_e,columnSpacing:tt}=o;let ct={};if(_e&&tt!==0){const vt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let nt;typeof vt=="object"&&(nt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:vt})),ct=handleBreakpoints({theme:a},vt,(it,s)=>{var et;const rt=a.spacing(it);return rt!=="0px"?{width:`calc(100% + ${getOffset(rt)})`,marginLeft:`-${getOffset(rt)}`,[`& > .${gridClasses$1.item}`]:{paddingLeft:getOffset(rt)}}:(et=nt)!=null&&et.includes(s)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses$1.item}`]:{paddingLeft:0}}})}return ct}function resolveSpacingStyles(a,o,_e={}){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[_e[`spacing-xs-${String(a)}`]];const tt=[];return o.forEach(ct=>{const vt=a[ct];Number(vt)>0&&tt.push(_e[`spacing-${ct}-${String(vt)}`])}),tt}const GridRoot=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{container:tt,direction:ct,item:vt,spacing:nt,wrap:it,zeroMinWidth:s,breakpoints:et}=_e;let rt=[];tt&&(rt=resolveSpacingStyles(nt,et,o));const ot=[];return et.forEach(gt=>{const dt=_e[gt];dt&&ot.push(o[`grid-${gt}-${String(dt)}`])}),[o.root,tt&&o.container,vt&&o.item,s&&o.zeroMinWidth,...rt,ct!=="row"&&o[`direction-xs-${String(ct)}`],it!=="wrap"&&o[`wrap-xs-${String(it)}`],...ot]}})(({ownerState:a})=>_extends({boxSizing:"border-box"},a.container&&{display:"flex",flexWrap:"wrap",width:"100%"},a.item&&{margin:0},a.zeroMinWidth&&{minWidth:0},a.wrap!=="wrap"&&{flexWrap:a.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(a,o){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[`spacing-xs-${String(a)}`];const _e=[];return o.forEach(tt=>{const ct=a[tt];if(Number(ct)>0){const vt=`spacing-${tt}-${String(ct)}`;_e.push(vt)}}),_e}const useUtilityClasses$y=a=>{const{classes:o,container:_e,direction:tt,item:ct,spacing:vt,wrap:nt,zeroMinWidth:it,breakpoints:s}=a;let et=[];_e&&(et=resolveSpacingClasses(vt,s));const rt=[];s.forEach(gt=>{const dt=a[gt];dt&&rt.push(`grid-${gt}-${String(dt)}`)});const ot={root:["root",_e&&"container",ct&&"item",it&&"zeroMinWidth",...et,tt!=="row"&&`direction-xs-${String(tt)}`,nt!=="wrap"&&`wrap-xs-${String(nt)}`,...rt]};return composeClasses(ot,getGridUtilityClass,o)},Grid=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiGrid"}),{breakpoints:ct}=useTheme(),vt=extendSxProp(tt),{className:nt,columns:it,columnSpacing:s,component:et="div",container:rt=!1,direction:ot="row",item:gt=!1,rowSpacing:dt,spacing:pt=0,wrap:st="wrap",zeroMinWidth:ht=!1}=vt,at=_objectWithoutPropertiesLoose(vt,_excluded$H),ut=dt||pt,ft=s||pt,mt=reactExports.useContext(GridContext$1),yt=rt?it||12:mt,At={},wt=_extends({},at);ct.keys.forEach(kt=>{at[kt]!=null&&(At[kt]=at[kt],delete wt[kt])});const Pt=_extends({},vt,{columns:yt,container:rt,direction:ot,item:gt,rowSpacing:ut,columnSpacing:ft,wrap:st,zeroMinWidth:ht,spacing:pt},At,{breakpoints:ct.keys}),Rt=useUtilityClasses$y(Pt);return jsxRuntimeExports.jsx(GridContext$1.Provider,{value:yt,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:Pt,className:clsx(Rt.root,nt),as:et,ref:_e},wt))})}),u=Grid,ListContext=reactExports.createContext({}),ListContext$1=ListContext;function _setPrototypeOf(a,o){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf(a,o)}function _inheritsLoose(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,_setPrototypeOf(a,o)}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(o){return o.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(o,a);function o(tt,ct){var vt;vt=a.call(this,tt,ct)||this;var nt=ct,it=nt&&!nt.isMounting?tt.enter:tt.appear,s;return vt.appearStatus=null,tt.in?it?(s=EXITED,vt.appearStatus=ENTERING):s=ENTERED:tt.unmountOnExit||tt.mountOnEnter?s=UNMOUNTED:s=EXITED,vt.state={status:s},vt.nextCallback=null,vt}o.getDerivedStateFromProps=function(ct,vt){var nt=ct.in;return nt&&vt.status===UNMOUNTED?{status:EXITED}:null};var _e=o.prototype;return _e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},_e.componentDidUpdate=function(ct){var vt=null;if(ct!==this.props){var nt=this.state.status;this.props.in?nt!==ENTERING&&nt!==ENTERED&&(vt=ENTERING):(nt===ENTERING||nt===ENTERED)&&(vt=EXITING)}this.updateStatus(!1,vt)},_e.componentWillUnmount=function(){this.cancelNextCallback()},_e.getTimeouts=function(){var ct=this.props.timeout,vt,nt,it;return vt=nt=it=ct,ct!=null&&typeof ct!="number"&&(vt=ct.exit,nt=ct.enter,it=ct.appear!==void 0?ct.appear:nt),{exit:vt,enter:nt,appear:it}},_e.updateStatus=function(ct,vt){if(ct===void 0&&(ct=!1),vt!==null)if(this.cancelNextCallback(),vt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var nt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);nt&&forceReflow(nt)}this.performEnter(ct)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},_e.performEnter=function(ct){var vt=this,nt=this.props.enter,it=this.context?this.context.isMounting:ct,s=this.props.nodeRef?[it]:[ReactDOM.findDOMNode(this),it],et=s[0],rt=s[1],ot=this.getTimeouts(),gt=it?ot.appear:ot.enter;if(!ct&&!nt||config.disabled){this.safeSetState({status:ENTERED},function(){vt.props.onEntered(et)});return}this.props.onEnter(et,rt),this.safeSetState({status:ENTERING},function(){vt.props.onEntering(et,rt),vt.onTransitionEnd(gt,function(){vt.safeSetState({status:ENTERED},function(){vt.props.onEntered(et,rt)})})})},_e.performExit=function(){var ct=this,vt=this.props.exit,nt=this.getTimeouts(),it=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!vt||config.disabled){this.safeSetState({status:EXITED},function(){ct.props.onExited(it)});return}this.props.onExit(it),this.safeSetState({status:EXITING},function(){ct.props.onExiting(it),ct.onTransitionEnd(nt.exit,function(){ct.safeSetState({status:EXITED},function(){ct.props.onExited(it)})})})},_e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},_e.safeSetState=function(ct,vt){vt=this.setNextCallback(vt),this.setState(ct,vt)},_e.setNextCallback=function(ct){var vt=this,nt=!0;return this.nextCallback=function(it){nt&&(nt=!1,vt.nextCallback=null,ct(it))},this.nextCallback.cancel=function(){nt=!1},this.nextCallback},_e.onTransitionEnd=function(ct,vt){this.setNextCallback(vt);var nt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),it=ct==null&&!this.props.addEndListener;if(!nt||it){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[nt,this.nextCallback],et=s[0],rt=s[1];this.props.addEndListener(et,rt)}ct!=null&&setTimeout(this.nextCallback,ct)},_e.render=function(){var ct=this.state.status;if(ct===UNMOUNTED)return null;var vt=this.props,nt=vt.children;vt.in,vt.mountOnEnter,vt.unmountOnExit,vt.appear,vt.enter,vt.exit,vt.timeout,vt.addEndListener,vt.onEnter,vt.onEntering,vt.onEntered,vt.onExit,vt.onExiting,vt.onExited,vt.nodeRef;var it=_objectWithoutPropertiesLoose(vt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof nt=="function"?nt(ct,it):React$1.cloneElement(React$1.Children.only(nt),it))},o}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function _assertThisInitialized(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function getChildMapping(a,o){var _e=function(vt){return o&&reactExports.isValidElement(vt)?o(vt):vt},tt=Object.create(null);return a&&reactExports.Children.map(a,function(ct){return ct}).forEach(function(ct){tt[ct.key]=_e(ct)}),tt}function mergeChildMappings(a,o){a=a||{},o=o||{};function _e(rt){return rt in o?o[rt]:a[rt]}var tt=Object.create(null),ct=[];for(var vt in a)vt in o?ct.length&&(tt[vt]=ct,ct=[]):ct.push(vt);var nt,it={};for(var s in o){if(tt[s])for(nt=0;nt<tt[s].length;nt++){var et=tt[s][nt];it[tt[s][nt]]=_e(et)}it[s]=_e(s)}for(nt=0;nt<ct.length;nt++)it[ct[nt]]=_e(ct[nt]);return it}function getProp(a,o,_e){return _e[o]!=null?_e[o]:a.props[o]}function getInitialChildMapping(a,o){return getChildMapping(a.children,function(_e){return reactExports.cloneElement(_e,{onExited:o.bind(null,_e),in:!0,appear:getProp(_e,"appear",a),enter:getProp(_e,"enter",a),exit:getProp(_e,"exit",a)})})}function getNextChildMapping(a,o,_e){var tt=getChildMapping(a.children),ct=mergeChildMappings(o,tt);return Object.keys(ct).forEach(function(vt){var nt=ct[vt];if(reactExports.isValidElement(nt)){var it=vt in o,s=vt in tt,et=o[vt],rt=reactExports.isValidElement(et)&&!et.props.in;s&&(!it||rt)?ct[vt]=reactExports.cloneElement(nt,{onExited:_e.bind(null,nt),in:!0,exit:getProp(nt,"exit",a),enter:getProp(nt,"enter",a)}):!s&&it&&!rt?ct[vt]=reactExports.cloneElement(nt,{in:!1}):s&&it&&reactExports.isValidElement(et)&&(ct[vt]=reactExports.cloneElement(nt,{onExited:_e.bind(null,nt),in:et.props.in,exit:getProp(nt,"exit",a),enter:getProp(nt,"enter",a)}))}}),ct}var values=Object.values||function(a){return Object.keys(a).map(function(o){return a[o]})},defaultProps={component:"div",childFactory:function(o){return o}},TransitionGroup=function(a){_inheritsLoose(o,a);function o(tt,ct){var vt;vt=a.call(this,tt,ct)||this;var nt=vt.handleExited.bind(_assertThisInitialized(vt));return vt.state={contextValue:{isMounting:!0},handleExited:nt,firstRender:!0},vt}var _e=o.prototype;return _e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_e.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(ct,vt){var nt=vt.children,it=vt.handleExited,s=vt.firstRender;return{children:s?getInitialChildMapping(ct,it):getNextChildMapping(ct,nt,it),firstRender:!1}},_e.handleExited=function(ct,vt){var nt=getChildMapping(this.props.children);ct.key in nt||(ct.props.onExited&&ct.props.onExited(vt),this.mounted&&this.setState(function(it){var s=_extends({},it.children);return delete s[ct.key],{children:s}}))},_e.render=function(){var ct=this.props,vt=ct.component,nt=ct.childFactory,it=_objectWithoutPropertiesLoose(ct,["component","childFactory"]),s=this.state.contextValue,et=values(this.state.children).map(nt);return delete it.appear,delete it.enter,delete it.exit,vt===null?React$1.createElement(TransitionGroupContext.Provider,{value:s},et):React$1.createElement(TransitionGroupContext.Provider,{value:s},React$1.createElement(vt,it,et))},o}(React$1.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup;function Ripple(a){const{className:o,classes:_e,pulsate:tt=!1,rippleX:ct,rippleY:vt,rippleSize:nt,in:it,onExited:s,timeout:et}=a,[rt,ot]=reactExports.useState(!1),gt=clsx(o,_e.ripple,_e.rippleVisible,tt&&_e.ripplePulsate),dt={width:nt,height:nt,top:-(nt/2)+vt,left:-(nt/2)+ct},pt=clsx(_e.child,rt&&_e.childLeaving,tt&&_e.childPulsate);return!it&&!rt&&ot(!0),reactExports.useEffect(()=>{if(!it&&s!=null){const st=setTimeout(s,et);return()=>{clearTimeout(st)}}},[s,it,et]),jsxRuntimeExports.jsx("span",{className:gt,style:dt,children:jsxRuntimeExports.jsx("span",{className:pt})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),touchRippleClasses$1=touchRippleClasses,_excluded$G=["center","classes","className"];let _$3=a=>a,_t$2,_t2$2,_t3$2,_t4$2;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t$2||(_t$2=_$3`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2$2||(_t2$2=_$3`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3$2||(_t3$2=_$3`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4$2||(_t4$2=_$3`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:a})=>a.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:a})=>a.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTouchRipple"}),{center:ct=!1,classes:vt={},className:nt}=tt,it=_objectWithoutPropertiesLoose(tt,_excluded$G),[s,et]=reactExports.useState([]),rt=reactExports.useRef(0),ot=reactExports.useRef(null);reactExports.useEffect(()=>{ot.current&&(ot.current(),ot.current=null)},[s]);const gt=reactExports.useRef(!1),dt=reactExports.useRef(0),pt=reactExports.useRef(null),st=reactExports.useRef(null);reactExports.useEffect(()=>()=>{dt.current&&clearTimeout(dt.current)},[]);const ht=reactExports.useCallback(mt=>{const{pulsate:yt,rippleX:At,rippleY:wt,rippleSize:Pt,cb:Rt}=mt;et(kt=>[...kt,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(vt.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(vt.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(vt.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(vt.child,touchRippleClasses$1.child),childLeaving:clsx(vt.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(vt.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:yt,rippleX:At,rippleY:wt,rippleSize:Pt},rt.current)]),rt.current+=1,ot.current=Rt},[vt]),at=reactExports.useCallback((mt={},yt={},At=()=>{})=>{const{pulsate:wt=!1,center:Pt=ct||yt.pulsate,fakeElement:Rt=!1}=yt;if((mt==null?void 0:mt.type)==="mousedown"&&gt.current){gt.current=!1;return}(mt==null?void 0:mt.type)==="touchstart"&&(gt.current=!0);const kt=Rt?null:st.current,bt=kt?kt.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Nt,Ft,Ut;if(Pt||mt===void 0||mt.clientX===0&&mt.clientY===0||!mt.clientX&&!mt.touches)Nt=Math.round(bt.width/2),Ft=Math.round(bt.height/2);else{const{clientX:Jt,clientY:hn}=mt.touches&&mt.touches.length>0?mt.touches[0]:mt;Nt=Math.round(Jt-bt.left),Ft=Math.round(hn-bt.top)}if(Pt)Ut=Math.sqrt((2*bt.width**2+bt.height**2)/3),Ut%2===0&&(Ut+=1);else{const Jt=Math.max(Math.abs((kt?kt.clientWidth:0)-Nt),Nt)*2+2,hn=Math.max(Math.abs((kt?kt.clientHeight:0)-Ft),Ft)*2+2;Ut=Math.sqrt(Jt**2+hn**2)}mt!=null&&mt.touches?pt.current===null&&(pt.current=()=>{ht({pulsate:wt,rippleX:Nt,rippleY:Ft,rippleSize:Ut,cb:At})},dt.current=setTimeout(()=>{pt.current&&(pt.current(),pt.current=null)},DELAY_RIPPLE)):ht({pulsate:wt,rippleX:Nt,rippleY:Ft,rippleSize:Ut,cb:At})},[ct,ht]),ut=reactExports.useCallback(()=>{at({},{pulsate:!0})},[at]),ft=reactExports.useCallback((mt,yt)=>{if(clearTimeout(dt.current),(mt==null?void 0:mt.type)==="touchend"&&pt.current){pt.current(),pt.current=null,dt.current=setTimeout(()=>{ft(mt,yt)});return}pt.current=null,et(At=>At.length>0?At.slice(1):At),ot.current=yt},[]);return reactExports.useImperativeHandle(_e,()=>({pulsate:ut,start:at,stop:ft}),[ut,at,ft]),jsxRuntimeExports.jsx(TouchRippleRoot,_extends({className:clsx(touchRippleClasses$1.root,vt.root,nt),ref:st},it,{children:jsxRuntimeExports.jsx(TransitionGroup$1,{component:null,exit:!0,children:s})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(a){return generateUtilityClass("MuiButtonBase",a)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),buttonBaseClasses$1=buttonBaseClasses,_excluded$F=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$x=a=>{const{disabled:o,focusVisible:_e,focusVisibleClassName:tt,classes:ct}=a,nt=composeClasses({root:["root",o&&"disabled",_e&&"focusVisible"]},getButtonBaseUtilityClass,ct);return _e&&tt&&(nt.root+=` ${tt}`),nt},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(a,o)=>o.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiButtonBase"}),{action:ct,centerRipple:vt=!1,children:nt,className:it,component:s="button",disabled:et=!1,disableRipple:rt=!1,disableTouchRipple:ot=!1,focusRipple:gt=!1,LinkComponent:dt="a",onBlur:pt,onClick:st,onContextMenu:ht,onDragLeave:at,onFocus:ut,onFocusVisible:ft,onKeyDown:mt,onKeyUp:yt,onMouseDown:At,onMouseLeave:wt,onMouseUp:Pt,onTouchEnd:Rt,onTouchMove:kt,onTouchStart:bt,tabIndex:Nt=0,TouchRippleProps:Ft,touchRippleRef:Ut,type:Jt}=tt,hn=_objectWithoutPropertiesLoose(tt,_excluded$F),Xt=reactExports.useRef(null),zt=reactExports.useRef(null),cn=useForkRef(zt,Ut),{isFocusVisibleRef:vn,onFocus:Sn,onBlur:fn,ref:mn}=useIsFocusVisible(),[bn,un]=reactExports.useState(!1);et&&bn&&un(!1),reactExports.useImperativeHandle(ct,()=>({focusVisible:()=>{un(!0),Xt.current.focus()}}),[]);const[Tn,kn]=reactExports.useState(!1);reactExports.useEffect(()=>{kn(!0)},[]);const xn=Tn&&!rt&&!et;reactExports.useEffect(()=>{bn&&gt&&!rt&&Tn&&zt.current.pulsate()},[rt,gt,bn,Tn]);function An(Kt,Ot,lt=ot){return useEventCallback(Tt=>(Ot&&Ot(Tt),!lt&&zt.current&&zt.current[Kt](Tt),!0))}const En=An("start",At),Rn=An("stop",ht),wn=An("stop",at),Dn=An("stop",Pt),Bn=An("stop",Kt=>{bn&&Kt.preventDefault(),wt&&wt(Kt)}),zn=An("start",bt),Hn=An("stop",Rt),nr=An("stop",kt),sn=An("stop",Kt=>{fn(Kt),vn.current===!1&&un(!1),pt&&pt(Kt)},!1),Gn=useEventCallback(Kt=>{Xt.current||(Xt.current=Kt.currentTarget),Sn(Kt),vn.current===!0&&(un(!0),ft&&ft(Kt)),ut&&ut(Kt)}),Zn=()=>{const Kt=Xt.current;return s&&s!=="button"&&!(Kt.tagName==="A"&&Kt.href)},rr=reactExports.useRef(!1),Fn=useEventCallback(Kt=>{gt&&!rr.current&&bn&&zt.current&&Kt.key===" "&&(rr.current=!0,zt.current.stop(Kt,()=>{zt.current.start(Kt)})),Kt.target===Kt.currentTarget&&Zn()&&Kt.key===" "&&Kt.preventDefault(),mt&&mt(Kt),Kt.target===Kt.currentTarget&&Zn()&&Kt.key==="Enter"&&!et&&(Kt.preventDefault(),st&&st(Kt))}),Xn=useEventCallback(Kt=>{gt&&Kt.key===" "&&zt.current&&bn&&!Kt.defaultPrevented&&(rr.current=!1,zt.current.stop(Kt,()=>{zt.current.pulsate(Kt)})),yt&&yt(Kt),st&&Kt.target===Kt.currentTarget&&Zn()&&Kt.key===" "&&!Kt.defaultPrevented&&st(Kt)});let Yn=s;Yn==="button"&&(hn.href||hn.to)&&(Yn=dt);const Nn={};Yn==="button"?(Nn.type=Jt===void 0?"button":Jt,Nn.disabled=et):(!hn.href&&!hn.to&&(Nn.role="button"),et&&(Nn["aria-disabled"]=et));const Un=useForkRef(_e,mn,Xt),Cn=_extends({},tt,{centerRipple:vt,component:s,disabled:et,disableRipple:rt,disableTouchRipple:ot,focusRipple:gt,tabIndex:Nt,focusVisible:bn}),Mn=useUtilityClasses$x(Cn);return jsxRuntimeExports.jsxs(ButtonBaseRoot,_extends({as:Yn,className:clsx(Mn.root,it),ownerState:Cn,onBlur:sn,onClick:st,onContextMenu:Rn,onFocus:Gn,onKeyDown:Fn,onKeyUp:Xn,onMouseDown:En,onMouseLeave:Bn,onMouseUp:Dn,onDragLeave:wn,onTouchEnd:Hn,onTouchMove:nr,onTouchStart:zn,ref:Un,tabIndex:et?-1:Nt,type:Jt},Nn,hn,{children:[nt,xn?jsxRuntimeExports.jsx(TouchRipple$1,_extends({ref:cn,center:vt},Ft)):null]}))}),ButtonBase$1=ButtonBase,dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),dividerClasses$1=dividerClasses,listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemIconClasses$1=listItemIconClasses;function getTypographyUtilityClass(a){return generateUtilityClass("MuiTypography",a)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$E=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$w=a=>{const{align:o,gutterBottom:_e,noWrap:tt,paragraph:ct,variant:vt,classes:nt}=a,it={root:["root",vt,a.align!=="inherit"&&`align${capitalize(o)}`,_e&&"gutterBottom",tt&&"noWrap",ct&&"paragraph"]};return composeClasses(it,getTypographyUtilityClass,nt)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.variant&&o[_e.variant],_e.align!=="inherit"&&o[`align${capitalize(_e.align)}`],_e.noWrap&&o.noWrap,_e.gutterBottom&&o.gutterBottom,_e.paragraph&&o.paragraph]}})(({theme:a,ownerState:o})=>_extends({margin:0},o.variant==="inherit"&&{font:"inherit"},o.variant!=="inherit"&&a.typography[o.variant],o.align!=="inherit"&&{textAlign:o.align},o.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o.gutterBottom&&{marginBottom:"0.35em"},o.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations$1={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors$1=a=>colorTransformations$1[a]||a,Typography=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTypography"}),ct=transformDeprecatedColors$1(tt.color),vt=extendSxProp(_extends({},tt,{color:ct})),{align:nt="inherit",className:it,component:s,gutterBottom:et=!1,noWrap:rt=!1,paragraph:ot=!1,variant:gt="body1",variantMapping:dt=defaultVariantMapping}=vt,pt=_objectWithoutPropertiesLoose(vt,_excluded$E),st=_extends({},vt,{align:nt,color:ct,className:it,component:s,gutterBottom:et,noWrap:rt,paragraph:ot,variant:gt,variantMapping:dt}),ht=s||(ot?"p":dt[gt]||defaultVariantMapping[gt])||"span",at=useUtilityClasses$w(st);return jsxRuntimeExports.jsx(TypographyRoot,_extends({as:ht,ref:_e,ownerState:st,className:clsx(at.root,it)},pt))}),Typography$1=Typography,listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),listItemTextClasses$1=listItemTextClasses;function getMenuItemUtilityClass(a){return generateUtilityClass("MuiMenuItem",a)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),menuItemClasses$1=menuItemClasses,_excluded$D=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],overridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.dense&&o.dense,_e.divider&&o.divider,!_e.disableGutters&&o.gutters]},useUtilityClasses$v=a=>{const{disabled:o,dense:_e,divider:tt,disableGutters:ct,selected:vt,classes:nt}=a,s=composeClasses({root:["root",_e&&"dense",o&&"disabled",!ct&&"gutters",tt&&"divider",vt&&"selected"]},getMenuItemUtilityClass,nt);return _extends({},nt,s)},MenuItemRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses$1.selected}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity),[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},[`&.${menuItemClasses$1.selected}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity)}},[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${menuItemClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`& + .${dividerClasses$1.root}`]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},[`& + .${dividerClasses$1.inset}`]:{marginLeft:52},[`& .${listItemTextClasses$1.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses$1.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses$1.root}`]:{minWidth:36}},!o.dense&&{[a.breakpoints.up("sm")]:{minHeight:"auto"}},o.dense&&_extends({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,{[`& .${listItemIconClasses$1.root} svg`]:{fontSize:"1.25rem"}}))),MenuItem=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiMenuItem"}),{autoFocus:ct=!1,component:vt="li",dense:nt=!1,divider:it=!1,disableGutters:s=!1,focusVisibleClassName:et,role:rt="menuitem",tabIndex:ot,className:gt}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$D),pt=reactExports.useContext(ListContext$1),st=reactExports.useMemo(()=>({dense:nt||pt.dense||!1,disableGutters:s}),[pt.dense,nt,s]),ht=reactExports.useRef(null);useEnhancedEffect$1(()=>{ct&&ht.current&&ht.current.focus()},[ct]);const at=_extends({},tt,{dense:st.dense,divider:it,disableGutters:s}),ut=useUtilityClasses$v(tt),ft=useForkRef(ht,_e);let mt;return tt.disabled||(mt=ot!==void 0?ot:-1),jsxRuntimeExports.jsx(ListContext$1.Provider,{value:st,children:jsxRuntimeExports.jsx(MenuItemRoot,_extends({ref:ft,role:rt,tabIndex:mt,component:vt,focusVisibleClassName:clsx(ut.focusVisible,et),className:clsx(ut.root,gt)},dt,{ownerState:at,classes:ut}))})}),MenuItem$1=MenuItem;function isHostComponent(a){return typeof a=="string"}function appendOwnerState(a,o,_e){return a===void 0||isHostComponent(a)?o:_extends({},o,{ownerState:_extends({},o.ownerState,_e)})}const defaultContextValue={disableDefaultClasses:!1},ClassNameConfiguratorContext=reactExports.createContext(defaultContextValue);function useClassNamesOverride(a){const{disableDefaultClasses:o}=reactExports.useContext(ClassNameConfiguratorContext);return _e=>o?"":a(_e)}function extractEventHandlers(a,o=[]){if(a===void 0)return{};const _e={};return Object.keys(a).filter(tt=>tt.match(/^on[A-Z]/)&&typeof a[tt]=="function"&&!o.includes(tt)).forEach(tt=>{_e[tt]=a[tt]}),_e}function resolveComponentProps(a,o,_e){return typeof a=="function"?a(o,_e):a}function omitEventHandlers(a){if(a===void 0)return{};const o={};return Object.keys(a).filter(_e=>!(_e.match(/^on[A-Z]/)&&typeof a[_e]=="function")).forEach(_e=>{o[_e]=a[_e]}),o}function mergeSlotProps(a){const{getSlotProps:o,additionalProps:_e,externalSlotProps:tt,externalForwardedProps:ct,className:vt}=a;if(!o){const dt=clsx(ct==null?void 0:ct.className,tt==null?void 0:tt.className,vt,_e==null?void 0:_e.className),pt=_extends({},_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),st=_extends({},_e,ct,tt);return dt.length>0&&(st.className=dt),Object.keys(pt).length>0&&(st.style=pt),{props:st,internalRef:void 0}}const nt=extractEventHandlers(_extends({},ct,tt)),it=omitEventHandlers(tt),s=omitEventHandlers(ct),et=o(nt),rt=clsx(et==null?void 0:et.className,_e==null?void 0:_e.className,vt,ct==null?void 0:ct.className,tt==null?void 0:tt.className),ot=_extends({},et==null?void 0:et.style,_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),gt=_extends({},et,_e,s,it);return rt.length>0&&(gt.className=rt),Object.keys(ot).length>0&&(gt.style=ot),{props:gt,internalRef:et.ref}}const _excluded$C=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function useSlotProps(a){var o;const{elementType:_e,externalSlotProps:tt,ownerState:ct,skipResolvingSlotProps:vt=!1}=a,nt=_objectWithoutPropertiesLoose(a,_excluded$C),it=vt?{}:resolveComponentProps(tt,ct),{props:s,internalRef:et}=mergeSlotProps(_extends({},nt,{externalSlotProps:it})),rt=useForkRef(et,it==null?void 0:it.ref,(o=a.additionalProps)==null?void 0:o.ref);return appendOwnerState(_e,_extends({},s,{ref:rt}),ct)}function getListUtilityClass(a){return generateUtilityClass("MuiList",a)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const _excluded$B=["children","className","component","dense","disablePadding","subheader"],useUtilityClasses$u=a=>{const{classes:o,disablePadding:_e,dense:tt,subheader:ct}=a;return composeClasses({root:["root",!_e&&"padding",tt&&"dense",ct&&"subheader"]},getListUtilityClass,o)},ListRoot=styled$1("ul",{name:"MuiList",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.disablePadding&&o.padding,_e.dense&&o.dense,_e.subheader&&o.subheader]}})(({ownerState:a})=>_extends({listStyle:"none",margin:0,padding:0,position:"relative"},!a.disablePadding&&{paddingTop:8,paddingBottom:8},a.subheader&&{paddingTop:0})),List=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiList"}),{children:ct,className:vt,component:nt="ul",dense:it=!1,disablePadding:s=!1,subheader:et}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$B),ot=reactExports.useMemo(()=>({dense:it}),[it]),gt=_extends({},tt,{component:nt,dense:it,disablePadding:s}),dt=useUtilityClasses$u(gt);return jsxRuntimeExports.jsx(ListContext$1.Provider,{value:ot,children:jsxRuntimeExports.jsxs(ListRoot,_extends({as:nt,className:clsx(dt.root,vt),ref:_e,ownerState:gt},rt,{children:[et,ct]}))})}),List$1=List,_excluded$A=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nextItem(a,o,_e){return a===o?a.firstChild:o&&o.nextElementSibling?o.nextElementSibling:_e?null:a.firstChild}function previousItem(a,o,_e){return a===o?_e?a.firstChild:a.lastChild:o&&o.previousElementSibling?o.previousElementSibling:_e?null:a.lastChild}function textCriteriaMatches(a,o){if(o===void 0)return!0;let _e=a.innerText;return _e===void 0&&(_e=a.textContent),_e=_e.trim().toLowerCase(),_e.length===0?!1:o.repeating?_e[0]===o.keys[0]:_e.indexOf(o.keys.join(""))===0}function moveFocus(a,o,_e,tt,ct,vt){let nt=!1,it=ct(a,o,o?_e:!1);for(;it;){if(it===a.firstChild){if(nt)return!1;nt=!0}const s=tt?!1:it.disabled||it.getAttribute("aria-disabled")==="true";if(!it.hasAttribute("tabindex")||!textCriteriaMatches(it,vt)||s)it=ct(a,it,_e);else return it.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(o,_e){const{actions:tt,autoFocus:ct=!1,autoFocusItem:vt=!1,children:nt,className:it,disabledItemsFocusable:s=!1,disableListWrap:et=!1,onKeyDown:rt,variant:ot="selectedMenu"}=o,gt=_objectWithoutPropertiesLoose(o,_excluded$A),dt=reactExports.useRef(null),pt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect$1(()=>{ct&&dt.current.focus()},[ct]),reactExports.useImperativeHandle(tt,()=>({adjustStyleForScrollbar:(ft,mt)=>{const yt=!dt.current.style.width;if(ft.clientHeight<dt.current.clientHeight&&yt){const At=`${getScrollbarSize(ownerDocument(ft))}px`;dt.current.style[mt.direction==="rtl"?"paddingLeft":"paddingRight"]=At,dt.current.style.width=`calc(100% + ${At})`}return dt.current}}),[]);const st=ft=>{const mt=dt.current,yt=ft.key,At=ownerDocument(mt).activeElement;if(yt==="ArrowDown")ft.preventDefault(),moveFocus(mt,At,et,s,nextItem);else if(yt==="ArrowUp")ft.preventDefault(),moveFocus(mt,At,et,s,previousItem);else if(yt==="Home")ft.preventDefault(),moveFocus(mt,null,et,s,nextItem);else if(yt==="End")ft.preventDefault(),moveFocus(mt,null,et,s,previousItem);else if(yt.length===1){const wt=pt.current,Pt=yt.toLowerCase(),Rt=performance.now();wt.keys.length>0&&(Rt-wt.lastTime>500?(wt.keys=[],wt.repeating=!0,wt.previousKeyMatched=!0):wt.repeating&&Pt!==wt.keys[0]&&(wt.repeating=!1)),wt.lastTime=Rt,wt.keys.push(Pt);const kt=At&&!wt.repeating&&textCriteriaMatches(At,wt);wt.previousKeyMatched&&(kt||moveFocus(mt,At,!1,s,nextItem,wt))?ft.preventDefault():wt.previousKeyMatched=!1}rt&&rt(ft)},ht=useForkRef(dt,_e);let at=-1;reactExports.Children.forEach(nt,(ft,mt)=>{if(!reactExports.isValidElement(ft)){at===mt&&(at+=1,at>=nt.length&&(at=-1));return}ft.props.disabled||(ot==="selectedMenu"&&ft.props.selected||at===-1)&&(at=mt),at===mt&&(ft.props.disabled||ft.props.muiSkipListHighlight||ft.type.muiSkipListHighlight)&&(at+=1,at>=nt.length&&(at=-1))});const ut=reactExports.Children.map(nt,(ft,mt)=>{if(mt===at){const yt={};return vt&&(yt.autoFocus=!0),ft.props.tabIndex===void 0&&ot==="selectedMenu"&&(yt.tabIndex=0),reactExports.cloneElement(ft,yt)}return ft});return jsxRuntimeExports.jsx(List$1,_extends({role:"menu",ref:ht,className:it,onKeyDown:st,tabIndex:ct?0:-1},gt,{children:ut}))}),MenuList$1=MenuList,candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(a){const o=parseInt(a.getAttribute("tabindex")||"",10);return Number.isNaN(o)?a.contentEditable==="true"||(a.nodeName==="AUDIO"||a.nodeName==="VIDEO"||a.nodeName==="DETAILS")&&a.getAttribute("tabindex")===null?0:a.tabIndex:o}function isNonTabbableRadio(a){if(a.tagName!=="INPUT"||a.type!=="radio"||!a.name)return!1;const o=tt=>a.ownerDocument.querySelector(`input[type="radio"]${tt}`);let _e=o(`[name="${a.name}"]:checked`);return _e||(_e=o(`[name="${a.name}"]`)),_e!==a}function isNodeMatchingSelectorFocusable(a){return!(a.disabled||a.tagName==="INPUT"&&a.type==="hidden"||isNonTabbableRadio(a))}function defaultGetTabbable(a){const o=[],_e=[];return Array.from(a.querySelectorAll(candidatesSelector)).forEach((tt,ct)=>{const vt=getTabIndex(tt);vt===-1||!isNodeMatchingSelectorFocusable(tt)||(vt===0?o.push(tt):_e.push({documentOrder:ct,tabIndex:vt,node:tt}))}),_e.sort((tt,ct)=>tt.tabIndex===ct.tabIndex?tt.documentOrder-ct.documentOrder:tt.tabIndex-ct.tabIndex).map(tt=>tt.node).concat(o)}function defaultIsEnabled(){return!0}function FocusTrap(a){const{children:o,disableAutoFocus:_e=!1,disableEnforceFocus:tt=!1,disableRestoreFocus:ct=!1,getTabbable:vt=defaultGetTabbable,isEnabled:nt=defaultIsEnabled,open:it}=a,s=reactExports.useRef(!1),et=reactExports.useRef(null),rt=reactExports.useRef(null),ot=reactExports.useRef(null),gt=reactExports.useRef(null),dt=reactExports.useRef(!1),pt=reactExports.useRef(null),st=useForkRef(o.ref,pt),ht=reactExports.useRef(null);reactExports.useEffect(()=>{!it||!pt.current||(dt.current=!_e)},[_e,it]),reactExports.useEffect(()=>{if(!it||!pt.current)return;const ft=ownerDocument(pt.current);return pt.current.contains(ft.activeElement)||(pt.current.hasAttribute("tabIndex")||pt.current.setAttribute("tabIndex","-1"),dt.current&&pt.current.focus()),()=>{ct||(ot.current&&ot.current.focus&&(s.current=!0,ot.current.focus()),ot.current=null)}},[it]),reactExports.useEffect(()=>{if(!it||!pt.current)return;const ft=ownerDocument(pt.current),mt=wt=>{ht.current=wt,!(tt||!nt()||wt.key!=="Tab")&&ft.activeElement===pt.current&&wt.shiftKey&&(s.current=!0,rt.current&&rt.current.focus())},yt=()=>{const wt=pt.current;if(wt===null)return;if(!ft.hasFocus()||!nt()||s.current){s.current=!1;return}if(wt.contains(ft.activeElement)||tt&&ft.activeElement!==et.current&&ft.activeElement!==rt.current)return;if(ft.activeElement!==gt.current)gt.current=null;else if(gt.current!==null)return;if(!dt.current)return;let Pt=[];if((ft.activeElement===et.current||ft.activeElement===rt.current)&&(Pt=vt(pt.current)),Pt.length>0){var Rt,kt;const bt=!!((Rt=ht.current)!=null&&Rt.shiftKey&&((kt=ht.current)==null?void 0:kt.key)==="Tab"),Nt=Pt[0],Ft=Pt[Pt.length-1];typeof Nt!="string"&&typeof Ft!="string"&&(bt?Ft.focus():Nt.focus())}else wt.focus()};ft.addEventListener("focusin",yt),ft.addEventListener("keydown",mt,!0);const At=setInterval(()=>{ft.activeElement&&ft.activeElement.tagName==="BODY"&&yt()},50);return()=>{clearInterval(At),ft.removeEventListener("focusin",yt),ft.removeEventListener("keydown",mt,!0)}},[_e,tt,ct,nt,it,vt]);const at=ft=>{ot.current===null&&(ot.current=ft.relatedTarget),dt.current=!0,gt.current=ft.target;const mt=o.props.onFocus;mt&&mt(ft)},ut=ft=>{ot.current===null&&(ot.current=ft.relatedTarget),dt.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:it?0:-1,onFocus:ut,ref:et,"data-testid":"sentinelStart"}),reactExports.cloneElement(o,{ref:st,onFocus:at}),jsxRuntimeExports.jsx("div",{tabIndex:it?0:-1,onFocus:ut,ref:rt,"data-testid":"sentinelEnd"})]})}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(a,o){return a.concat([o+"-"+start,o+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(a,o){return a.concat([o,o+"-"+start,o+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(a){return a?(a.nodeName||"").toLowerCase():null}function getWindow(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var o=a.ownerDocument;return o&&o.defaultView||window}return a}function isElement(a){var o=getWindow(a).Element;return a instanceof o||a instanceof Element}function isHTMLElement$1(a){var o=getWindow(a).HTMLElement;return a instanceof o||a instanceof HTMLElement}function isShadowRoot(a){if(typeof ShadowRoot>"u")return!1;var o=getWindow(a).ShadowRoot;return a instanceof o||a instanceof ShadowRoot}function applyStyles(a){var o=a.state;Object.keys(o.elements).forEach(function(_e){var tt=o.styles[_e]||{},ct=o.attributes[_e]||{},vt=o.elements[_e];!isHTMLElement$1(vt)||!getNodeName(vt)||(Object.assign(vt.style,tt),Object.keys(ct).forEach(function(nt){var it=ct[nt];it===!1?vt.removeAttribute(nt):vt.setAttribute(nt,it===!0?"":it)}))})}function effect$2(a){var o=a.state,_e={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(o.elements.popper.style,_e.popper),o.styles=_e,o.elements.arrow&&Object.assign(o.elements.arrow.style,_e.arrow),function(){Object.keys(o.elements).forEach(function(tt){var ct=o.elements[tt],vt=o.attributes[tt]||{},nt=Object.keys(o.styles.hasOwnProperty(tt)?o.styles[tt]:_e[tt]),it=nt.reduce(function(s,et){return s[et]="",s},{});!isHTMLElement$1(ct)||!getNodeName(ct)||(Object.assign(ct.style,it),Object.keys(vt).forEach(function(s){ct.removeAttribute(s)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(a){return a.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var a=navigator.userAgentData;return a!=null&&a.brands&&Array.isArray(a.brands)?a.brands.map(function(o){return o.brand+"/"+o.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!1);var tt=a.getBoundingClientRect(),ct=1,vt=1;o&&isHTMLElement$1(a)&&(ct=a.offsetWidth>0&&round$1(tt.width)/a.offsetWidth||1,vt=a.offsetHeight>0&&round$1(tt.height)/a.offsetHeight||1);var nt=isElement(a)?getWindow(a):window,it=nt.visualViewport,s=!isLayoutViewport()&&_e,et=(tt.left+(s&&it?it.offsetLeft:0))/ct,rt=(tt.top+(s&&it?it.offsetTop:0))/vt,ot=tt.width/ct,gt=tt.height/vt;return{width:ot,height:gt,top:rt,right:et+ot,bottom:rt+gt,left:et,x:et,y:rt}}function getLayoutRect(a){var o=getBoundingClientRect(a),_e=a.offsetWidth,tt=a.offsetHeight;return Math.abs(o.width-_e)<=1&&(_e=o.width),Math.abs(o.height-tt)<=1&&(tt=o.height),{x:a.offsetLeft,y:a.offsetTop,width:_e,height:tt}}function contains(a,o){var _e=o.getRootNode&&o.getRootNode();if(a.contains(o))return!0;if(_e&&isShadowRoot(_e)){var tt=o;do{if(tt&&a.isSameNode(tt))return!0;tt=tt.parentNode||tt.host}while(tt)}return!1}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function isTableElement(a){return["table","td","th"].indexOf(getNodeName(a))>=0}function getDocumentElement(a){return((isElement(a)?a.ownerDocument:a.document)||window.document).documentElement}function getParentNode(a){return getNodeName(a)==="html"?a:a.assignedSlot||a.parentNode||(isShadowRoot(a)?a.host:null)||getDocumentElement(a)}function getTrueOffsetParent(a){return!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed"?null:a.offsetParent}function getContainingBlock(a){var o=/firefox/i.test(getUAString()),_e=/Trident/i.test(getUAString());if(_e&&isHTMLElement$1(a)){var tt=getComputedStyle$1(a);if(tt.position==="fixed")return null}var ct=getParentNode(a);for(isShadowRoot(ct)&&(ct=ct.host);isHTMLElement$1(ct)&&["html","body"].indexOf(getNodeName(ct))<0;){var vt=getComputedStyle$1(ct);if(vt.transform!=="none"||vt.perspective!=="none"||vt.contain==="paint"||["transform","perspective"].indexOf(vt.willChange)!==-1||o&&vt.willChange==="filter"||o&&vt.filter&&vt.filter!=="none")return ct;ct=ct.parentNode}return null}function getOffsetParent(a){for(var o=getWindow(a),_e=getTrueOffsetParent(a);_e&&isTableElement(_e)&&getComputedStyle$1(_e).position==="static";)_e=getTrueOffsetParent(_e);return _e&&(getNodeName(_e)==="html"||getNodeName(_e)==="body"&&getComputedStyle$1(_e).position==="static")?o:_e||getContainingBlock(a)||o}function getMainAxisFromPlacement(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function within(a,o,_e){return max(a,min(o,_e))}function withinMaxClamp(a,o,_e){var tt=within(a,o,_e);return tt>_e?_e:tt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(a){return Object.assign({},getFreshSideObject(),a)}function expandToHashMap(a,o){return o.reduce(function(_e,tt){return _e[tt]=a,_e},{})}var toPaddingObject=function(o,_e){return o=typeof o=="function"?o(Object.assign({},_e.rects,{placement:_e.placement})):o,mergePaddingObject(typeof o!="number"?o:expandToHashMap(o,basePlacements))};function arrow(a){var o,_e=a.state,tt=a.name,ct=a.options,vt=_e.elements.arrow,nt=_e.modifiersData.popperOffsets,it=getBasePlacement(_e.placement),s=getMainAxisFromPlacement(it),et=[left,right].indexOf(it)>=0,rt=et?"height":"width";if(!(!vt||!nt)){var ot=toPaddingObject(ct.padding,_e),gt=getLayoutRect(vt),dt=s==="y"?top:left,pt=s==="y"?bottom:right,st=_e.rects.reference[rt]+_e.rects.reference[s]-nt[s]-_e.rects.popper[rt],ht=nt[s]-_e.rects.reference[s],at=getOffsetParent(vt),ut=at?s==="y"?at.clientHeight||0:at.clientWidth||0:0,ft=st/2-ht/2,mt=ot[dt],yt=ut-gt[rt]-ot[pt],At=ut/2-gt[rt]/2+ft,wt=within(mt,At,yt),Pt=s;_e.modifiersData[tt]=(o={},o[Pt]=wt,o.centerOffset=wt-At,o)}}function effect$1(a){var o=a.state,_e=a.options,tt=_e.element,ct=tt===void 0?"[data-popper-arrow]":tt;ct!=null&&(typeof ct=="string"&&(ct=o.elements.popper.querySelector(ct),!ct)||contains(o.elements.popper,ct)&&(o.elements.arrow=ct))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(a){return a.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(a,o){var _e=a.x,tt=a.y,ct=o.devicePixelRatio||1;return{x:round$1(_e*ct)/ct||0,y:round$1(tt*ct)/ct||0}}function mapToStyles(a){var o,_e=a.popper,tt=a.popperRect,ct=a.placement,vt=a.variation,nt=a.offsets,it=a.position,s=a.gpuAcceleration,et=a.adaptive,rt=a.roundOffsets,ot=a.isFixed,gt=nt.x,dt=gt===void 0?0:gt,pt=nt.y,st=pt===void 0?0:pt,ht=typeof rt=="function"?rt({x:dt,y:st}):{x:dt,y:st};dt=ht.x,st=ht.y;var at=nt.hasOwnProperty("x"),ut=nt.hasOwnProperty("y"),ft=left,mt=top,yt=window;if(et){var At=getOffsetParent(_e),wt="clientHeight",Pt="clientWidth";if(At===getWindow(_e)&&(At=getDocumentElement(_e),getComputedStyle$1(At).position!=="static"&&it==="absolute"&&(wt="scrollHeight",Pt="scrollWidth")),At=At,ct===top||(ct===left||ct===right)&&vt===end){mt=bottom;var Rt=ot&&At===yt&&yt.visualViewport?yt.visualViewport.height:At[wt];st-=Rt-tt.height,st*=s?1:-1}if(ct===left||(ct===top||ct===bottom)&&vt===end){ft=right;var kt=ot&&At===yt&&yt.visualViewport?yt.visualViewport.width:At[Pt];dt-=kt-tt.width,dt*=s?1:-1}}var bt=Object.assign({position:it},et&&unsetSides),Nt=rt===!0?roundOffsetsByDPR({x:dt,y:st},getWindow(_e)):{x:dt,y:st};if(dt=Nt.x,st=Nt.y,s){var Ft;return Object.assign({},bt,(Ft={},Ft[mt]=ut?"0":"",Ft[ft]=at?"0":"",Ft.transform=(yt.devicePixelRatio||1)<=1?"translate("+dt+"px, "+st+"px)":"translate3d("+dt+"px, "+st+"px, 0)",Ft))}return Object.assign({},bt,(o={},o[mt]=ut?st+"px":"",o[ft]=at?dt+"px":"",o.transform="",o))}function computeStyles(a){var o=a.state,_e=a.options,tt=_e.gpuAcceleration,ct=tt===void 0?!0:tt,vt=_e.adaptive,nt=vt===void 0?!0:vt,it=_e.roundOffsets,s=it===void 0?!0:it,et={placement:getBasePlacement(o.placement),variation:getVariation(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:ct,isFixed:o.options.strategy==="fixed"};o.modifiersData.popperOffsets!=null&&(o.styles.popper=Object.assign({},o.styles.popper,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:nt,roundOffsets:s})))),o.modifiersData.arrow!=null&&(o.styles.arrow=Object.assign({},o.styles.arrow,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(a){var o=a.state,_e=a.instance,tt=a.options,ct=tt.scroll,vt=ct===void 0?!0:ct,nt=tt.resize,it=nt===void 0?!0:nt,s=getWindow(o.elements.popper),et=[].concat(o.scrollParents.reference,o.scrollParents.popper);return vt&&et.forEach(function(rt){rt.addEventListener("scroll",_e.update,passive)}),it&&s.addEventListener("resize",_e.update,passive),function(){vt&&et.forEach(function(rt){rt.removeEventListener("scroll",_e.update,passive)}),it&&s.removeEventListener("resize",_e.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,function(o){return hash$1[o]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(a){return a.replace(/start|end/g,function(o){return hash[o]})}function getWindowScroll(a){var o=getWindow(a),_e=o.pageXOffset,tt=o.pageYOffset;return{scrollLeft:_e,scrollTop:tt}}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getWindowScroll(a).scrollLeft}function getViewportRect(a,o){var _e=getWindow(a),tt=getDocumentElement(a),ct=_e.visualViewport,vt=tt.clientWidth,nt=tt.clientHeight,it=0,s=0;if(ct){vt=ct.width,nt=ct.height;var et=isLayoutViewport();(et||!et&&o==="fixed")&&(it=ct.offsetLeft,s=ct.offsetTop)}return{width:vt,height:nt,x:it+getWindowScrollBarX(a),y:s}}function getDocumentRect(a){var o,_e=getDocumentElement(a),tt=getWindowScroll(a),ct=(o=a.ownerDocument)==null?void 0:o.body,vt=max(_e.scrollWidth,_e.clientWidth,ct?ct.scrollWidth:0,ct?ct.clientWidth:0),nt=max(_e.scrollHeight,_e.clientHeight,ct?ct.scrollHeight:0,ct?ct.clientHeight:0),it=-tt.scrollLeft+getWindowScrollBarX(a),s=-tt.scrollTop;return getComputedStyle$1(ct||_e).direction==="rtl"&&(it+=max(_e.clientWidth,ct?ct.clientWidth:0)-vt),{width:vt,height:nt,x:it,y:s}}function isScrollParent(a){var o=getComputedStyle$1(a),_e=o.overflow,tt=o.overflowX,ct=o.overflowY;return/auto|scroll|overlay|hidden/.test(_e+ct+tt)}function getScrollParent(a){return["html","body","#document"].indexOf(getNodeName(a))>=0?a.ownerDocument.body:isHTMLElement$1(a)&&isScrollParent(a)?a:getScrollParent(getParentNode(a))}function listScrollParents(a,o){var _e;o===void 0&&(o=[]);var tt=getScrollParent(a),ct=tt===((_e=a.ownerDocument)==null?void 0:_e.body),vt=getWindow(tt),nt=ct?[vt].concat(vt.visualViewport||[],isScrollParent(tt)?tt:[]):tt,it=o.concat(nt);return ct?it:it.concat(listScrollParents(getParentNode(nt)))}function rectToClientRect(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function getInnerBoundingClientRect(a,o){var _e=getBoundingClientRect(a,!1,o==="fixed");return _e.top=_e.top+a.clientTop,_e.left=_e.left+a.clientLeft,_e.bottom=_e.top+a.clientHeight,_e.right=_e.left+a.clientWidth,_e.width=a.clientWidth,_e.height=a.clientHeight,_e.x=_e.left,_e.y=_e.top,_e}function getClientRectFromMixedType(a,o,_e){return o===viewport?rectToClientRect(getViewportRect(a,_e)):isElement(o)?getInnerBoundingClientRect(o,_e):rectToClientRect(getDocumentRect(getDocumentElement(a)))}function getClippingParents(a){var o=listScrollParents(getParentNode(a)),_e=["absolute","fixed"].indexOf(getComputedStyle$1(a).position)>=0,tt=_e&&isHTMLElement$1(a)?getOffsetParent(a):a;return isElement(tt)?o.filter(function(ct){return isElement(ct)&&contains(ct,tt)&&getNodeName(ct)!=="body"}):[]}function getClippingRect(a,o,_e,tt){var ct=o==="clippingParents"?getClippingParents(a):[].concat(o),vt=[].concat(ct,[_e]),nt=vt[0],it=vt.reduce(function(s,et){var rt=getClientRectFromMixedType(a,et,tt);return s.top=max(rt.top,s.top),s.right=min(rt.right,s.right),s.bottom=min(rt.bottom,s.bottom),s.left=max(rt.left,s.left),s},getClientRectFromMixedType(a,nt,tt));return it.width=it.right-it.left,it.height=it.bottom-it.top,it.x=it.left,it.y=it.top,it}function computeOffsets(a){var o=a.reference,_e=a.element,tt=a.placement,ct=tt?getBasePlacement(tt):null,vt=tt?getVariation(tt):null,nt=o.x+o.width/2-_e.width/2,it=o.y+o.height/2-_e.height/2,s;switch(ct){case top:s={x:nt,y:o.y-_e.height};break;case bottom:s={x:nt,y:o.y+o.height};break;case right:s={x:o.x+o.width,y:it};break;case left:s={x:o.x-_e.width,y:it};break;default:s={x:o.x,y:o.y}}var et=ct?getMainAxisFromPlacement(ct):null;if(et!=null){var rt=et==="y"?"height":"width";switch(vt){case start:s[et]=s[et]-(o[rt]/2-_e[rt]/2);break;case end:s[et]=s[et]+(o[rt]/2-_e[rt]/2);break}}return s}function detectOverflow(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=tt===void 0?a.placement:tt,vt=_e.strategy,nt=vt===void 0?a.strategy:vt,it=_e.boundary,s=it===void 0?clippingParents:it,et=_e.rootBoundary,rt=et===void 0?viewport:et,ot=_e.elementContext,gt=ot===void 0?popper:ot,dt=_e.altBoundary,pt=dt===void 0?!1:dt,st=_e.padding,ht=st===void 0?0:st,at=mergePaddingObject(typeof ht!="number"?ht:expandToHashMap(ht,basePlacements)),ut=gt===popper?reference:popper,ft=a.rects.popper,mt=a.elements[pt?ut:gt],yt=getClippingRect(isElement(mt)?mt:mt.contextElement||getDocumentElement(a.elements.popper),s,rt,nt),At=getBoundingClientRect(a.elements.reference),wt=computeOffsets({reference:At,element:ft,strategy:"absolute",placement:ct}),Pt=rectToClientRect(Object.assign({},ft,wt)),Rt=gt===popper?Pt:At,kt={top:yt.top-Rt.top+at.top,bottom:Rt.bottom-yt.bottom+at.bottom,left:yt.left-Rt.left+at.left,right:Rt.right-yt.right+at.right},bt=a.modifiersData.offset;if(gt===popper&&bt){var Nt=bt[ct];Object.keys(kt).forEach(function(Ft){var Ut=[right,bottom].indexOf(Ft)>=0?1:-1,Jt=[top,bottom].indexOf(Ft)>=0?"y":"x";kt[Ft]+=Nt[Jt]*Ut})}return kt}function computeAutoPlacement(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=_e.boundary,vt=_e.rootBoundary,nt=_e.padding,it=_e.flipVariations,s=_e.allowedAutoPlacements,et=s===void 0?placements:s,rt=getVariation(tt),ot=rt?it?variationPlacements:variationPlacements.filter(function(pt){return getVariation(pt)===rt}):basePlacements,gt=ot.filter(function(pt){return et.indexOf(pt)>=0});gt.length===0&&(gt=ot);var dt=gt.reduce(function(pt,st){return pt[st]=detectOverflow(a,{placement:st,boundary:ct,rootBoundary:vt,padding:nt})[getBasePlacement(st)],pt},{});return Object.keys(dt).sort(function(pt,st){return dt[pt]-dt[st]})}function getExpandedFallbackPlacements(a){if(getBasePlacement(a)===auto)return[];var o=getOppositePlacement(a);return[getOppositeVariationPlacement(a),o,getOppositeVariationPlacement(o)]}function flip(a){var o=a.state,_e=a.options,tt=a.name;if(!o.modifiersData[tt]._skip){for(var ct=_e.mainAxis,vt=ct===void 0?!0:ct,nt=_e.altAxis,it=nt===void 0?!0:nt,s=_e.fallbackPlacements,et=_e.padding,rt=_e.boundary,ot=_e.rootBoundary,gt=_e.altBoundary,dt=_e.flipVariations,pt=dt===void 0?!0:dt,st=_e.allowedAutoPlacements,ht=o.options.placement,at=getBasePlacement(ht),ut=at===ht,ft=s||(ut||!pt?[getOppositePlacement(ht)]:getExpandedFallbackPlacements(ht)),mt=[ht].concat(ft).reduce(function(bn,un){return bn.concat(getBasePlacement(un)===auto?computeAutoPlacement(o,{placement:un,boundary:rt,rootBoundary:ot,padding:et,flipVariations:pt,allowedAutoPlacements:st}):un)},[]),yt=o.rects.reference,At=o.rects.popper,wt=new Map,Pt=!0,Rt=mt[0],kt=0;kt<mt.length;kt++){var bt=mt[kt],Nt=getBasePlacement(bt),Ft=getVariation(bt)===start,Ut=[top,bottom].indexOf(Nt)>=0,Jt=Ut?"width":"height",hn=detectOverflow(o,{placement:bt,boundary:rt,rootBoundary:ot,altBoundary:gt,padding:et}),Xt=Ut?Ft?right:left:Ft?bottom:top;yt[Jt]>At[Jt]&&(Xt=getOppositePlacement(Xt));var zt=getOppositePlacement(Xt),cn=[];if(vt&&cn.push(hn[Nt]<=0),it&&cn.push(hn[Xt]<=0,hn[zt]<=0),cn.every(function(bn){return bn})){Rt=bt,Pt=!1;break}wt.set(bt,cn)}if(Pt)for(var vn=pt?3:1,Sn=function(un){var Tn=mt.find(function(kn){var xn=wt.get(kn);if(xn)return xn.slice(0,un).every(function(An){return An})});if(Tn)return Rt=Tn,"break"},fn=vn;fn>0;fn--){var mn=Sn(fn);if(mn==="break")break}o.placement!==Rt&&(o.modifiersData[tt]._skip=!0,o.placement=Rt,o.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(a,o,_e){return _e===void 0&&(_e={x:0,y:0}),{top:a.top-o.height-_e.y,right:a.right-o.width+_e.x,bottom:a.bottom-o.height+_e.y,left:a.left-o.width-_e.x}}function isAnySideFullyClipped(a){return[top,right,bottom,left].some(function(o){return a[o]>=0})}function hide(a){var o=a.state,_e=a.name,tt=o.rects.reference,ct=o.rects.popper,vt=o.modifiersData.preventOverflow,nt=detectOverflow(o,{elementContext:"reference"}),it=detectOverflow(o,{altBoundary:!0}),s=getSideOffsets(nt,tt),et=getSideOffsets(it,ct,vt),rt=isAnySideFullyClipped(s),ot=isAnySideFullyClipped(et);o.modifiersData[_e]={referenceClippingOffsets:s,popperEscapeOffsets:et,isReferenceHidden:rt,hasPopperEscaped:ot},o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-reference-hidden":rt,"data-popper-escaped":ot})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(a,o,_e){var tt=getBasePlacement(a),ct=[left,top].indexOf(tt)>=0?-1:1,vt=typeof _e=="function"?_e(Object.assign({},o,{placement:a})):_e,nt=vt[0],it=vt[1];return nt=nt||0,it=(it||0)*ct,[left,right].indexOf(tt)>=0?{x:it,y:nt}:{x:nt,y:it}}function offset(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.offset,vt=ct===void 0?[0,0]:ct,nt=placements.reduce(function(rt,ot){return rt[ot]=distanceAndSkiddingToXY(ot,o.rects,vt),rt},{}),it=nt[o.placement],s=it.x,et=it.y;o.modifiersData.popperOffsets!=null&&(o.modifiersData.popperOffsets.x+=s,o.modifiersData.popperOffsets.y+=et),o.modifiersData[tt]=nt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(a){var o=a.state,_e=a.name;o.modifiersData[_e]=computeOffsets({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(a){return a==="x"?"y":"x"}function preventOverflow(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.mainAxis,vt=ct===void 0?!0:ct,nt=_e.altAxis,it=nt===void 0?!1:nt,s=_e.boundary,et=_e.rootBoundary,rt=_e.altBoundary,ot=_e.padding,gt=_e.tether,dt=gt===void 0?!0:gt,pt=_e.tetherOffset,st=pt===void 0?0:pt,ht=detectOverflow(o,{boundary:s,rootBoundary:et,padding:ot,altBoundary:rt}),at=getBasePlacement(o.placement),ut=getVariation(o.placement),ft=!ut,mt=getMainAxisFromPlacement(at),yt=getAltAxis(mt),At=o.modifiersData.popperOffsets,wt=o.rects.reference,Pt=o.rects.popper,Rt=typeof st=="function"?st(Object.assign({},o.rects,{placement:o.placement})):st,kt=typeof Rt=="number"?{mainAxis:Rt,altAxis:Rt}:Object.assign({mainAxis:0,altAxis:0},Rt),bt=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null,Nt={x:0,y:0};if(At){if(vt){var Ft,Ut=mt==="y"?top:left,Jt=mt==="y"?bottom:right,hn=mt==="y"?"height":"width",Xt=At[mt],zt=Xt+ht[Ut],cn=Xt-ht[Jt],vn=dt?-Pt[hn]/2:0,Sn=ut===start?wt[hn]:Pt[hn],fn=ut===start?-Pt[hn]:-wt[hn],mn=o.elements.arrow,bn=dt&&mn?getLayoutRect(mn):{width:0,height:0},un=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Tn=un[Ut],kn=un[Jt],xn=within(0,wt[hn],bn[hn]),An=ft?wt[hn]/2-vn-xn-Tn-kt.mainAxis:Sn-xn-Tn-kt.mainAxis,En=ft?-wt[hn]/2+vn+xn+kn+kt.mainAxis:fn+xn+kn+kt.mainAxis,Rn=o.elements.arrow&&getOffsetParent(o.elements.arrow),wn=Rn?mt==="y"?Rn.clientTop||0:Rn.clientLeft||0:0,Dn=(Ft=bt==null?void 0:bt[mt])!=null?Ft:0,Bn=Xt+An-Dn-wn,zn=Xt+En-Dn,Hn=within(dt?min(zt,Bn):zt,Xt,dt?max(cn,zn):cn);At[mt]=Hn,Nt[mt]=Hn-Xt}if(it){var nr,sn=mt==="x"?top:left,Gn=mt==="x"?bottom:right,Zn=At[yt],rr=yt==="y"?"height":"width",Fn=Zn+ht[sn],Xn=Zn-ht[Gn],Yn=[top,left].indexOf(at)!==-1,Nn=(nr=bt==null?void 0:bt[yt])!=null?nr:0,Un=Yn?Fn:Zn-wt[rr]-Pt[rr]-Nn+kt.altAxis,Cn=Yn?Zn+wt[rr]+Pt[rr]-Nn-kt.altAxis:Xn,Mn=dt&&Yn?withinMaxClamp(Un,Zn,Cn):within(dt?Un:Fn,Zn,dt?Cn:Xn);At[yt]=Mn,Nt[yt]=Mn-Zn}o.modifiersData[tt]=Nt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function getNodeScroll(a){return a===getWindow(a)||!isHTMLElement$1(a)?getWindowScroll(a):getHTMLElementScroll(a)}function isElementScaled(a){var o=a.getBoundingClientRect(),_e=round$1(o.width)/a.offsetWidth||1,tt=round$1(o.height)/a.offsetHeight||1;return _e!==1||tt!==1}function getCompositeRect(a,o,_e){_e===void 0&&(_e=!1);var tt=isHTMLElement$1(o),ct=isHTMLElement$1(o)&&isElementScaled(o),vt=getDocumentElement(o),nt=getBoundingClientRect(a,ct,_e),it={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(tt||!tt&&!_e)&&((getNodeName(o)!=="body"||isScrollParent(vt))&&(it=getNodeScroll(o)),isHTMLElement$1(o)?(s=getBoundingClientRect(o,!0),s.x+=o.clientLeft,s.y+=o.clientTop):vt&&(s.x=getWindowScrollBarX(vt))),{x:nt.left+it.scrollLeft-s.x,y:nt.top+it.scrollTop-s.y,width:nt.width,height:nt.height}}function order(a){var o=new Map,_e=new Set,tt=[];a.forEach(function(vt){o.set(vt.name,vt)});function ct(vt){_e.add(vt.name);var nt=[].concat(vt.requires||[],vt.requiresIfExists||[]);nt.forEach(function(it){if(!_e.has(it)){var s=o.get(it);s&&ct(s)}}),tt.push(vt)}return a.forEach(function(vt){_e.has(vt.name)||ct(vt)}),tt}function orderModifiers(a){var o=order(a);return modifierPhases.reduce(function(_e,tt){return _e.concat(o.filter(function(ct){return ct.phase===tt}))},[])}function debounce(a){var o;return function(){return o||(o=new Promise(function(_e){Promise.resolve().then(function(){o=void 0,_e(a())})})),o}}function mergeByName(a){var o=a.reduce(function(_e,tt){var ct=_e[tt.name];return _e[tt.name]=ct?Object.assign({},ct,tt,{options:Object.assign({},ct.options,tt.options),data:Object.assign({},ct.data,tt.data)}):tt,_e},{});return Object.keys(o).map(function(_e){return o[_e]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return!o.some(function(tt){return!(tt&&typeof tt.getBoundingClientRect=="function")})}function popperGenerator(a){a===void 0&&(a={});var o=a,_e=o.defaultModifiers,tt=_e===void 0?[]:_e,ct=o.defaultOptions,vt=ct===void 0?DEFAULT_OPTIONS:ct;return function(it,s,et){et===void 0&&(et=vt);var rt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,vt),modifiersData:{},elements:{reference:it,popper:s},attributes:{},styles:{}},ot=[],gt=!1,dt={state:rt,setOptions:function(at){var ut=typeof at=="function"?at(rt.options):at;st(),rt.options=Object.assign({},vt,rt.options,ut),rt.scrollParents={reference:isElement(it)?listScrollParents(it):it.contextElement?listScrollParents(it.contextElement):[],popper:listScrollParents(s)};var ft=orderModifiers(mergeByName([].concat(tt,rt.options.modifiers)));return rt.orderedModifiers=ft.filter(function(mt){return mt.enabled}),pt(),dt.update()},forceUpdate:function(){if(!gt){var at=rt.elements,ut=at.reference,ft=at.popper;if(areValidElements(ut,ft)){rt.rects={reference:getCompositeRect(ut,getOffsetParent(ft),rt.options.strategy==="fixed"),popper:getLayoutRect(ft)},rt.reset=!1,rt.placement=rt.options.placement,rt.orderedModifiers.forEach(function(kt){return rt.modifiersData[kt.name]=Object.assign({},kt.data)});for(var mt=0;mt<rt.orderedModifiers.length;mt++){if(rt.reset===!0){rt.reset=!1,mt=-1;continue}var yt=rt.orderedModifiers[mt],At=yt.fn,wt=yt.options,Pt=wt===void 0?{}:wt,Rt=yt.name;typeof At=="function"&&(rt=At({state:rt,options:Pt,name:Rt,instance:dt})||rt)}}}},update:debounce(function(){return new Promise(function(ht){dt.forceUpdate(),ht(rt)})}),destroy:function(){st(),gt=!0}};if(!areValidElements(it,s))return dt;dt.setOptions(et).then(function(ht){!gt&&et.onFirstUpdate&&et.onFirstUpdate(ht)});function pt(){rt.orderedModifiers.forEach(function(ht){var at=ht.name,ut=ht.options,ft=ut===void 0?{}:ut,mt=ht.effect;if(typeof mt=="function"){var yt=mt({state:rt,name:at,instance:dt,options:ft}),At=function(){};ot.push(yt||At)}})}function st(){ot.forEach(function(ht){return ht()}),ot=[]}return dt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(a){return typeof a=="function"?a():a}const Portal=reactExports.forwardRef(function(o,_e){const{children:tt,container:ct,disablePortal:vt=!1}=o,[nt,it]=reactExports.useState(null),s=useForkRef(reactExports.isValidElement(tt)?tt.ref:null,_e);if(useEnhancedEffect$1(()=>{vt||it(getContainer$1(ct)||document.body)},[ct,vt]),useEnhancedEffect$1(()=>{if(nt&&!vt)return setRef(_e,nt),()=>{setRef(_e,null)}},[_e,nt,vt]),vt){if(reactExports.isValidElement(tt)){const et={ref:s};return reactExports.cloneElement(tt,et)}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:tt})}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:nt&&reactDomExports.createPortal(tt,nt)})});function getPopperUtilityClass(a){return generateUtilityClass("MuiPopper",a)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$z=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$3=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(a,o){if(o==="ltr")return a;switch(a){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return a}}function resolveAnchorEl$1(a){return typeof a=="function"?a():a}function isHTMLElement(a){return a.nodeType!==void 0}const useUtilityClasses$t=()=>composeClasses({root:["root"]},useClassNamesOverride(getPopperUtilityClass)),defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(o,_e){var tt;const{anchorEl:ct,children:vt,direction:nt,disablePortal:it,modifiers:s,open:et,placement:rt,popperOptions:ot,popperRef:gt,slotProps:dt={},slots:pt={},TransitionProps:st}=o,ht=_objectWithoutPropertiesLoose(o,_excluded$z),at=reactExports.useRef(null),ut=useForkRef(at,_e),ft=reactExports.useRef(null),mt=useForkRef(ft,gt),yt=reactExports.useRef(mt);useEnhancedEffect$1(()=>{yt.current=mt},[mt]),reactExports.useImperativeHandle(gt,()=>ft.current,[]);const At=flipPlacement(rt,nt),[wt,Pt]=reactExports.useState(At),[Rt,kt]=reactExports.useState(resolveAnchorEl$1(ct));reactExports.useEffect(()=>{ft.current&&ft.current.forceUpdate()}),reactExports.useEffect(()=>{ct&&kt(resolveAnchorEl$1(ct))},[ct]),useEnhancedEffect$1(()=>{if(!Rt||!et)return;const Jt=zt=>{Pt(zt.placement)};let hn=[{name:"preventOverflow",options:{altBoundary:it}},{name:"flip",options:{altBoundary:it}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:zt})=>{Jt(zt)}}];s!=null&&(hn=hn.concat(s)),ot&&ot.modifiers!=null&&(hn=hn.concat(ot.modifiers));const Xt=createPopper(Rt,at.current,_extends({placement:At},ot,{modifiers:hn}));return yt.current(Xt),()=>{Xt.destroy(),yt.current(null)}},[Rt,it,s,et,ot,At]);const bt={placement:wt};st!==null&&(bt.TransitionProps=st);const Nt=useUtilityClasses$t(),Ft=(tt=pt.root)!=null?tt:"div",Ut=useSlotProps({elementType:Ft,externalSlotProps:dt.root,externalForwardedProps:ht,additionalProps:{role:"tooltip",ref:ut},ownerState:o,className:Nt.root});return jsxRuntimeExports.jsx(Ft,_extends({},Ut,{children:typeof vt=="function"?vt(bt):vt}))}),Popper$2=reactExports.forwardRef(function(o,_e){const{anchorEl:tt,children:ct,container:vt,direction:nt="ltr",disablePortal:it=!1,keepMounted:s=!1,modifiers:et,open:rt,placement:ot="bottom",popperOptions:gt=defaultPopperOptions,popperRef:dt,style:pt,transition:st=!1,slotProps:ht={},slots:at={}}=o,ut=_objectWithoutPropertiesLoose(o,_excluded2$3),[ft,mt]=reactExports.useState(!0),yt=()=>{mt(!1)},At=()=>{mt(!0)};if(!s&&!rt&&(!st||ft))return null;let wt;if(vt)wt=vt;else if(tt){const kt=resolveAnchorEl$1(tt);wt=kt&&isHTMLElement(kt)?ownerDocument(kt).body:ownerDocument(null).body}const Pt=!rt&&s&&(!st||ft)?"none":void 0,Rt=st?{in:rt,onEnter:yt,onExited:At}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:it,container:wt,children:jsxRuntimeExports.jsx(PopperTooltip,_extends({anchorEl:tt,direction:nt,disablePortal:it,modifiers:et,ref:_e,open:st?!ft:rt,placement:ot,popperOptions:gt,popperRef:dt,slotProps:ht,slots:at},ut,{style:_extends({position:"fixed",top:0,left:0,display:Pt},pt),TransitionProps:Rt,children:ct}))})});function isOverflowing(a){const o=ownerDocument(a);return o.body===a?ownerWindow(a).innerWidth>o.documentElement.clientWidth:a.scrollHeight>a.clientHeight}function ariaHidden(a,o){o?a.setAttribute("aria-hidden","true"):a.removeAttribute("aria-hidden")}function getPaddingRight(a){return parseInt(ownerWindow(a).getComputedStyle(a).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(a){const _e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(a.tagName)!==-1,tt=a.tagName==="INPUT"&&a.getAttribute("type")==="hidden";return _e||tt}function ariaHiddenSiblings(a,o,_e,tt,ct){const vt=[o,_e,...tt];[].forEach.call(a.children,nt=>{const it=vt.indexOf(nt)===-1,s=!isAriaHiddenForbiddenOnElement(nt);it&&s&&ariaHidden(nt,ct)})}function findIndexOf(a,o){let _e=-1;return a.some((tt,ct)=>o(tt)?(_e=ct,!0):!1),_e}function handleContainer(a,o){const _e=[],tt=a.container;if(!o.disableScrollLock){if(isOverflowing(tt)){const nt=getScrollbarSize(ownerDocument(tt));_e.push({value:tt.style.paddingRight,property:"padding-right",el:tt}),tt.style.paddingRight=`${getPaddingRight(tt)+nt}px`;const it=ownerDocument(tt).querySelectorAll(".mui-fixed");[].forEach.call(it,s=>{_e.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+nt}px`})}let vt;if(tt.parentNode instanceof DocumentFragment)vt=ownerDocument(tt).body;else{const nt=tt.parentElement,it=ownerWindow(tt);vt=(nt==null?void 0:nt.nodeName)==="HTML"&&it.getComputedStyle(nt).overflowY==="scroll"?nt:tt}_e.push({value:vt.style.overflow,property:"overflow",el:vt},{value:vt.style.overflowX,property:"overflow-x",el:vt},{value:vt.style.overflowY,property:"overflow-y",el:vt}),vt.style.overflow="hidden"}return()=>{_e.forEach(({value:vt,el:nt,property:it})=>{vt?nt.style.setProperty(it,vt):nt.style.removeProperty(it)})}}function getHiddenSiblings(a){const o=[];return[].forEach.call(a.children,_e=>{_e.getAttribute("aria-hidden")==="true"&&o.push(_e)}),o}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(o,_e){let tt=this.modals.indexOf(o);if(tt!==-1)return tt;tt=this.modals.length,this.modals.push(o),o.modalRef&&ariaHidden(o.modalRef,!1);const ct=getHiddenSiblings(_e);ariaHiddenSiblings(_e,o.mount,o.modalRef,ct,!0);const vt=findIndexOf(this.containers,nt=>nt.container===_e);return vt!==-1?(this.containers[vt].modals.push(o),tt):(this.containers.push({modals:[o],container:_e,restore:null,hiddenSiblings:ct}),tt)}mount(o,_e){const tt=findIndexOf(this.containers,vt=>vt.modals.indexOf(o)!==-1),ct=this.containers[tt];ct.restore||(ct.restore=handleContainer(ct,_e))}remove(o,_e=!0){const tt=this.modals.indexOf(o);if(tt===-1)return tt;const ct=findIndexOf(this.containers,nt=>nt.modals.indexOf(o)!==-1),vt=this.containers[ct];if(vt.modals.splice(vt.modals.indexOf(o),1),this.modals.splice(tt,1),vt.modals.length===0)vt.restore&&vt.restore(),o.modalRef&&ariaHidden(o.modalRef,_e),ariaHiddenSiblings(vt.container,o.mount,o.modalRef,vt.hiddenSiblings,!1),this.containers.splice(ct,1);else{const nt=vt.modals[vt.modals.length-1];nt.modalRef&&ariaHidden(nt.modalRef,!1)}return tt}isTopModal(o){return this.modals.length>0&&this.modals[this.modals.length-1]===o}}function getContainer(a){return typeof a=="function"?a():a}function getHasTransition(a){return a?a.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager;function useModal(a){const{container:o,disableEscapeKeyDown:_e=!1,disableScrollLock:tt=!1,manager:ct=defaultManager,closeAfterTransition:vt=!1,onTransitionEnter:nt,onTransitionExited:it,children:s,onClose:et,open:rt,rootRef:ot}=a,gt=reactExports.useRef({}),dt=reactExports.useRef(null),pt=reactExports.useRef(null),st=useForkRef(pt,ot),[ht,at]=reactExports.useState(!rt),ut=getHasTransition(s);let ft=!0;(a["aria-hidden"]==="false"||a["aria-hidden"]===!1)&&(ft=!1);const mt=()=>ownerDocument(dt.current),yt=()=>(gt.current.modalRef=pt.current,gt.current.mount=dt.current,gt.current),At=()=>{ct.mount(yt(),{disableScrollLock:tt}),pt.current&&(pt.current.scrollTop=0)},wt=useEventCallback(()=>{const hn=getContainer(o)||mt().body;ct.add(yt(),hn),pt.current&&At()}),Pt=reactExports.useCallback(()=>ct.isTopModal(yt()),[ct]),Rt=useEventCallback(hn=>{dt.current=hn,hn&&(rt&&Pt()?At():pt.current&&ariaHidden(pt.current,ft))}),kt=reactExports.useCallback(()=>{ct.remove(yt(),ft)},[ft,ct]);reactExports.useEffect(()=>()=>{kt()},[kt]),reactExports.useEffect(()=>{rt?wt():(!ut||!vt)&&kt()},[rt,kt,ut,vt,wt]);const bt=hn=>Xt=>{var zt;(zt=hn.onKeyDown)==null||zt.call(hn,Xt),!(Xt.key!=="Escape"||!Pt())&&(_e||(Xt.stopPropagation(),et&&et(Xt,"escapeKeyDown")))},Nt=hn=>Xt=>{var zt;(zt=hn.onClick)==null||zt.call(hn,Xt),Xt.target===Xt.currentTarget&&et&&et(Xt,"backdropClick")};return{getRootProps:(hn={})=>{const Xt=extractEventHandlers(a);delete Xt.onTransitionEnter,delete Xt.onTransitionExited;const zt=_extends({},Xt,hn);return _extends({role:"presentation"},zt,{onKeyDown:bt(zt),ref:st})},getBackdropProps:(hn={})=>{const Xt=hn;return _extends({"aria-hidden":!0},Xt,{onClick:Nt(Xt),open:rt})},getTransitionProps:()=>{const hn=()=>{at(!1),nt&&nt()},Xt=()=>{at(!0),it&&it(),vt&&kt()};return{onEnter:createChainedFunction(hn,s==null?void 0:s.props.onEnter),onExited:createChainedFunction(Xt,s==null?void 0:s.props.onExited)}},rootRef:st,portalRef:Rt,isTopModal:Pt,exited:ht,hasTransition:ut}}const _excluded$y=["onChange","maxRows","minRows","style","value"];function getStyleValue(a){return parseInt(a,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$1(a){return a==null||Object.keys(a).length===0||a.outerHeightStyle===0&&!a.overflow}const TextareaAutosize=reactExports.forwardRef(function(o,_e){const{onChange:tt,maxRows:ct,minRows:vt=1,style:nt,value:it}=o,s=_objectWithoutPropertiesLoose(o,_excluded$y),{current:et}=reactExports.useRef(it!=null),rt=reactExports.useRef(null),ot=useForkRef(_e,rt),gt=reactExports.useRef(null),dt=reactExports.useRef(0),[pt,st]=reactExports.useState({outerHeightStyle:0}),ht=reactExports.useCallback(()=>{const mt=rt.current,At=ownerWindow(mt).getComputedStyle(mt);if(At.width==="0px")return{outerHeightStyle:0};const wt=gt.current;wt.style.width=At.width,wt.value=mt.value||o.placeholder||"x",wt.value.slice(-1)===`
`&&(wt.value+=" ");const Pt=At.boxSizing,Rt=getStyleValue(At.paddingBottom)+getStyleValue(At.paddingTop),kt=getStyleValue(At.borderBottomWidth)+getStyleValue(At.borderTopWidth),bt=wt.scrollHeight;wt.value="x";const Nt=wt.scrollHeight;let Ft=bt;vt&&(Ft=Math.max(Number(vt)*Nt,Ft)),ct&&(Ft=Math.min(Number(ct)*Nt,Ft)),Ft=Math.max(Ft,Nt);const Ut=Ft+(Pt==="border-box"?Rt+kt:0),Jt=Math.abs(Ft-bt)<=1;return{outerHeightStyle:Ut,overflow:Jt}},[ct,vt,o.placeholder]),at=(mt,yt)=>{const{outerHeightStyle:At,overflow:wt}=yt;return dt.current<20&&(At>0&&Math.abs((mt.outerHeightStyle||0)-At)>1||mt.overflow!==wt)?(dt.current+=1,{overflow:wt,outerHeightStyle:At}):mt},ut=reactExports.useCallback(()=>{const mt=ht();isEmpty$1(mt)||st(yt=>at(yt,mt))},[ht]);useEnhancedEffect$1(()=>{const mt=()=>{const bt=ht();isEmpty$1(bt)||reactDomExports.flushSync(()=>{st(Nt=>at(Nt,bt))})},yt=()=>{dt.current=0,mt()};let At;const wt=debounce$1(yt),Pt=rt.current,Rt=ownerWindow(Pt);Rt.addEventListener("resize",wt);let kt;return typeof ResizeObserver<"u"&&(kt=new ResizeObserver(yt),kt.observe(Pt)),()=>{wt.clear(),cancelAnimationFrame(At),Rt.removeEventListener("resize",wt),kt&&kt.disconnect()}},[ht]),useEnhancedEffect$1(()=>{ut()}),reactExports.useEffect(()=>{dt.current=0},[it]);const ft=mt=>{dt.current=0,et||ut(),tt&&tt(mt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",_extends({value:it,onChange:ft,ref:ot,rows:vt,style:_extends({height:pt.outerHeightStyle,overflow:pt.overflow?"hidden":void 0},nt)},s)),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:o.className,readOnly:!0,ref:gt,tabIndex:-1,style:_extends({},styles$2.shadow,nt,{paddingTop:0,paddingBottom:0})})]})}),reflow=a=>a.scrollTop;function getTransitionProps(a,o){var _e,tt;const{timeout:ct,easing:vt,style:nt={}}=a;return{duration:(_e=nt.transitionDuration)!=null?_e:typeof ct=="number"?ct:ct[o.mode]||0,easing:(tt=nt.transitionTimingFunction)!=null?tt:typeof vt=="object"?vt[o.mode]:vt,delay:nt.transitionDelay}}const _excluded$x=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getScale(a){return`scale(${a}, ${a**2})`}const styles$1={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(o,_e){const{addEndListener:tt,appear:ct=!0,children:vt,easing:nt,in:it,onEnter:s,onEntered:et,onEntering:rt,onExit:ot,onExited:gt,onExiting:dt,style:pt,timeout:st="auto",TransitionComponent:ht=Transition$1}=o,at=_objectWithoutPropertiesLoose(o,_excluded$x),ut=reactExports.useRef(),ft=reactExports.useRef(),mt=useTheme(),yt=reactExports.useRef(null),At=useForkRef(yt,vt.ref,_e),wt=Jt=>hn=>{if(Jt){const Xt=yt.current;hn===void 0?Jt(Xt):Jt(Xt,hn)}},Pt=wt(rt),Rt=wt((Jt,hn)=>{reflow(Jt);const{duration:Xt,delay:zt,easing:cn}=getTransitionProps({style:pt,timeout:st,easing:nt},{mode:"enter"});let vn;st==="auto"?(vn=mt.transitions.getAutoHeightDuration(Jt.clientHeight),ft.current=vn):vn=Xt,Jt.style.transition=[mt.transitions.create("opacity",{duration:vn,delay:zt}),mt.transitions.create("transform",{duration:isWebKit154?vn:vn*.666,delay:zt,easing:cn})].join(","),s&&s(Jt,hn)}),kt=wt(et),bt=wt(dt),Nt=wt(Jt=>{const{duration:hn,delay:Xt,easing:zt}=getTransitionProps({style:pt,timeout:st,easing:nt},{mode:"exit"});let cn;st==="auto"?(cn=mt.transitions.getAutoHeightDuration(Jt.clientHeight),ft.current=cn):cn=hn,Jt.style.transition=[mt.transitions.create("opacity",{duration:cn,delay:Xt}),mt.transitions.create("transform",{duration:isWebKit154?cn:cn*.666,delay:isWebKit154?Xt:Xt||cn*.333,easing:zt})].join(","),Jt.style.opacity=0,Jt.style.transform=getScale(.75),ot&&ot(Jt)}),Ft=wt(gt),Ut=Jt=>{st==="auto"&&(ut.current=setTimeout(Jt,ft.current||0)),tt&&tt(yt.current,Jt)};return reactExports.useEffect(()=>()=>{clearTimeout(ut.current)},[]),jsxRuntimeExports.jsx(ht,_extends({appear:ct,in:it,nodeRef:yt,onEnter:Rt,onEntered:kt,onEntering:Pt,onExit:Nt,onExited:Ft,onExiting:bt,addEndListener:Ut,timeout:st==="auto"?null:st},at,{children:(Jt,hn)=>reactExports.cloneElement(vt,_extends({style:_extends({opacity:0,transform:getScale(.75),visibility:Jt==="exited"&&!it?"hidden":void 0},styles$1[Jt],pt,vt.props.style),ref:At},hn))}))});Grow.muiSupportAuto=!0;const Grow$1=Grow,_excluded$w=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(o,_e){const tt=useTheme(),ct={enter:tt.transitions.duration.enteringScreen,exit:tt.transitions.duration.leavingScreen},{addEndListener:vt,appear:nt=!0,children:it,easing:s,in:et,onEnter:rt,onEntered:ot,onEntering:gt,onExit:dt,onExited:pt,onExiting:st,style:ht,timeout:at=ct,TransitionComponent:ut=Transition$1}=o,ft=_objectWithoutPropertiesLoose(o,_excluded$w),mt=reactExports.useRef(null),yt=useForkRef(mt,it.ref,_e),At=Ut=>Jt=>{if(Ut){const hn=mt.current;Jt===void 0?Ut(hn):Ut(hn,Jt)}},wt=At(gt),Pt=At((Ut,Jt)=>{reflow(Ut);const hn=getTransitionProps({style:ht,timeout:at,easing:s},{mode:"enter"});Ut.style.webkitTransition=tt.transitions.create("opacity",hn),Ut.style.transition=tt.transitions.create("opacity",hn),rt&&rt(Ut,Jt)}),Rt=At(ot),kt=At(st),bt=At(Ut=>{const Jt=getTransitionProps({style:ht,timeout:at,easing:s},{mode:"exit"});Ut.style.webkitTransition=tt.transitions.create("opacity",Jt),Ut.style.transition=tt.transitions.create("opacity",Jt),dt&&dt(Ut)}),Nt=At(pt),Ft=Ut=>{vt&&vt(mt.current,Ut)};return jsxRuntimeExports.jsx(ut,_extends({appear:nt,in:et,nodeRef:mt,onEnter:Pt,onEntered:Rt,onEntering:wt,onExit:bt,onExited:Nt,onExiting:kt,addEndListener:Ft,timeout:at},ft,{children:(Ut,Jt)=>reactExports.cloneElement(it,_extends({style:_extends({opacity:0,visibility:Ut==="exited"&&!et?"hidden":void 0},styles[Ut],ht,it.props.style),ref:yt},Jt))}))}),Fade$1=Fade;function getBackdropUtilityClass(a){return generateUtilityClass("MuiBackdrop",a)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const _excluded$v=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$s=a=>{const{classes:o,invisible:_e}=a;return composeClasses({root:["root",_e&&"invisible"]},getBackdropUtilityClass,o)},BackdropRoot=styled$1("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.invisible&&o.invisible]}})(({ownerState:a})=>_extends({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},a.invisible&&{backgroundColor:"transparent"})),Backdrop=reactExports.forwardRef(function(o,_e){var tt,ct,vt;const nt=useThemeProps({props:o,name:"MuiBackdrop"}),{children:it,className:s,component:et="div",components:rt={},componentsProps:ot={},invisible:gt=!1,open:dt,slotProps:pt={},slots:st={},TransitionComponent:ht=Fade$1,transitionDuration:at}=nt,ut=_objectWithoutPropertiesLoose(nt,_excluded$v),ft=_extends({},nt,{component:et,invisible:gt}),mt=useUtilityClasses$s(ft),yt=(tt=pt.root)!=null?tt:ot.root;return jsxRuntimeExports.jsx(ht,_extends({in:dt,timeout:at},ut,{children:jsxRuntimeExports.jsx(BackdropRoot,_extends({"aria-hidden":!0},yt,{as:(ct=(vt=st.root)!=null?vt:rt.Root)!=null?ct:et,className:clsx(mt.root,s,yt==null?void 0:yt.className),ownerState:_extends({},ft,yt==null?void 0:yt.ownerState),classes:mt,ref:_e,children:it}))}))}),Backdrop$1=Backdrop;function getModalUtilityClass(a){return generateUtilityClass("MuiModal",a)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const _excluded$u=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],useUtilityClasses$r=a=>{const{open:o,exited:_e,classes:tt}=a;return composeClasses({root:["root",!o&&_e&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,tt)},ModalRoot=styled$1("div",{name:"MuiModal",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.open&&_e.exited&&o.hidden]}})(({theme:a,ownerState:o})=>_extends({position:"fixed",zIndex:(a.vars||a).zIndex.modal,right:0,bottom:0,top:0,left:0},!o.open&&o.exited&&{visibility:"hidden"})),ModalBackdrop=styled$1(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(a,o)=>o.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt,it,s;const et=useThemeProps({name:"MuiModal",props:o}),{BackdropComponent:rt=ModalBackdrop,BackdropProps:ot,className:gt,closeAfterTransition:dt=!1,children:pt,container:st,component:ht,components:at={},componentsProps:ut={},disableAutoFocus:ft=!1,disableEnforceFocus:mt=!1,disableEscapeKeyDown:yt=!1,disablePortal:At=!1,disableRestoreFocus:wt=!1,disableScrollLock:Pt=!1,hideBackdrop:Rt=!1,keepMounted:kt=!1,onBackdropClick:bt,open:Nt,slotProps:Ft,slots:Ut}=et,Jt=_objectWithoutPropertiesLoose(et,_excluded$u),hn=_extends({},et,{closeAfterTransition:dt,disableAutoFocus:ft,disableEnforceFocus:mt,disableEscapeKeyDown:yt,disablePortal:At,disableRestoreFocus:wt,disableScrollLock:Pt,hideBackdrop:Rt,keepMounted:kt}),{getRootProps:Xt,getBackdropProps:zt,getTransitionProps:cn,portalRef:vn,isTopModal:Sn,exited:fn,hasTransition:mn}=useModal(_extends({},hn,{rootRef:_e})),bn=_extends({},hn,{exited:fn}),un=useUtilityClasses$r(bn),Tn={};if(pt.props.tabIndex===void 0&&(Tn.tabIndex="-1"),mn){const{onEnter:Dn,onExited:Bn}=cn();Tn.onEnter=Dn,Tn.onExited=Bn}const kn=(tt=(ct=Ut==null?void 0:Ut.root)!=null?ct:at.Root)!=null?tt:ModalRoot,xn=(vt=(nt=Ut==null?void 0:Ut.backdrop)!=null?nt:at.Backdrop)!=null?vt:rt,An=(it=Ft==null?void 0:Ft.root)!=null?it:ut.root,En=(s=Ft==null?void 0:Ft.backdrop)!=null?s:ut.backdrop,Rn=useSlotProps({elementType:kn,externalSlotProps:An,externalForwardedProps:Jt,getSlotProps:Xt,additionalProps:{ref:_e,as:ht},ownerState:bn,className:clsx(gt,An==null?void 0:An.className,un==null?void 0:un.root,!bn.open&&bn.exited&&(un==null?void 0:un.hidden))}),wn=useSlotProps({elementType:xn,externalSlotProps:En,additionalProps:ot,getSlotProps:Dn=>zt(_extends({},Dn,{onClick:Bn=>{bt&&bt(Bn),Dn!=null&&Dn.onClick&&Dn.onClick(Bn)}})),className:clsx(En==null?void 0:En.className,ot==null?void 0:ot.className,un==null?void 0:un.backdrop),ownerState:bn});return!kt&&!Nt&&(!mn||fn)?null:jsxRuntimeExports.jsx(Portal,{ref:vn,container:st,disablePortal:At,children:jsxRuntimeExports.jsxs(kn,_extends({},Rn,{children:[!Rt&&rt?jsxRuntimeExports.jsx(xn,_extends({},wn)):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:mt,disableAutoFocus:ft,disableRestoreFocus:wt,isEnabled:Sn,open:Nt,children:reactExports.cloneElement(pt,Tn)})]}))})}),Modal$1=Modal,getOverlayAlpha=a=>{let o;return a<1?o=5.11916*a**2:o=4.5*Math.log(a+1)+2,(o/100).toFixed(2)},getOverlayAlpha$1=getOverlayAlpha;function getPaperUtilityClass(a){return generateUtilityClass("MuiPaper",a)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$t=["className","component","elevation","square","variant"],useUtilityClasses$q=a=>{const{square:o,elevation:_e,variant:tt,classes:ct}=a,vt={root:["root",tt,!o&&"rounded",tt==="elevation"&&`elevation${_e}`]};return composeClasses(vt,getPaperUtilityClass,ct)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],!_e.square&&o.rounded,_e.variant==="elevation"&&o[`elevation${_e.elevation}`]]}})(({theme:a,ownerState:o})=>{var _e;return _extends({backgroundColor:(a.vars||a).palette.background.paper,color:(a.vars||a).palette.text.primary,transition:a.transitions.create("box-shadow")},!o.square&&{borderRadius:a.shape.borderRadius},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.divider}`},o.variant==="elevation"&&_extends({boxShadow:(a.vars||a).shadows[o.elevation]},!a.vars&&a.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha$1(o.elevation))}, ${alpha("#fff",getOverlayAlpha$1(o.elevation))})`},a.vars&&{backgroundImage:(_e=a.vars.overlays)==null?void 0:_e[o.elevation]}))}),Paper=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiPaper"}),{className:ct,component:vt="div",elevation:nt=1,square:it=!1,variant:s="elevation"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$t),rt=_extends({},tt,{component:vt,elevation:nt,square:it,variant:s}),ot=useUtilityClasses$q(rt);return jsxRuntimeExports.jsx(PaperRoot,_extends({as:vt,ownerState:rt,className:clsx(ot.root,ct),ref:_e},et))}),Paper$1=Paper;function getPopoverUtilityClass(a){return generateUtilityClass("MuiPopover",a)}generateUtilityClasses("MuiPopover",["root","paper"]);const _excluded$s=["onEntering"],_excluded2$2=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_excluded3=["slotProps"];function getOffsetTop(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.height/2:o==="bottom"&&(_e=a.height),_e}function getOffsetLeft(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.width/2:o==="right"&&(_e=a.width),_e}function getTransformOriginValue(a){return[a.horizontal,a.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function resolveAnchorEl(a){return typeof a=="function"?a():a}const useUtilityClasses$p=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,o)},PopoverRoot=styled$1(Modal$1,{name:"MuiPopover",slot:"Root",overridesResolver:(a,o)=>o.root})({}),PopoverPaper=styled$1(Paper$1,{name:"MuiPopover",slot:"Paper",overridesResolver:(a,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(o,_e){var tt,ct,vt;const nt=useThemeProps({props:o,name:"MuiPopover"}),{action:it,anchorEl:s,anchorOrigin:et={vertical:"top",horizontal:"left"},anchorPosition:rt,anchorReference:ot="anchorEl",children:gt,className:dt,container:pt,elevation:st=8,marginThreshold:ht=16,open:at,PaperProps:ut={},slots:ft,slotProps:mt,transformOrigin:yt={vertical:"top",horizontal:"left"},TransitionComponent:At=Grow$1,transitionDuration:wt="auto",TransitionProps:{onEntering:Pt}={},disableScrollLock:Rt=!1}=nt,kt=_objectWithoutPropertiesLoose(nt.TransitionProps,_excluded$s),bt=_objectWithoutPropertiesLoose(nt,_excluded2$2),Nt=(tt=mt==null?void 0:mt.paper)!=null?tt:ut,Ft=reactExports.useRef(),Ut=useForkRef(Ft,Nt.ref),Jt=_extends({},nt,{anchorOrigin:et,anchorReference:ot,elevation:st,marginThreshold:ht,externalPaperSlotProps:Nt,transformOrigin:yt,TransitionComponent:At,transitionDuration:wt,TransitionProps:kt}),hn=useUtilityClasses$p(Jt),Xt=reactExports.useCallback(()=>{if(ot==="anchorPosition")return rt;const Dn=resolveAnchorEl(s),zn=(Dn&&Dn.nodeType===1?Dn:ownerDocument(Ft.current).body).getBoundingClientRect();return{top:zn.top+getOffsetTop(zn,et.vertical),left:zn.left+getOffsetLeft(zn,et.horizontal)}},[s,et.horizontal,et.vertical,rt,ot]),zt=reactExports.useCallback(Dn=>({vertical:getOffsetTop(Dn,yt.vertical),horizontal:getOffsetLeft(Dn,yt.horizontal)}),[yt.horizontal,yt.vertical]),cn=reactExports.useCallback(Dn=>{const Bn={width:Dn.offsetWidth,height:Dn.offsetHeight},zn=zt(Bn);if(ot==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(zn)};const Hn=Xt();let nr=Hn.top-zn.vertical,sn=Hn.left-zn.horizontal;const Gn=nr+Bn.height,Zn=sn+Bn.width,rr=ownerWindow(resolveAnchorEl(s)),Fn=rr.innerHeight-ht,Xn=rr.innerWidth-ht;if(ht!==null&&nr<ht){const Yn=nr-ht;nr-=Yn,zn.vertical+=Yn}else if(ht!==null&&Gn>Fn){const Yn=Gn-Fn;nr-=Yn,zn.vertical+=Yn}if(ht!==null&&sn<ht){const Yn=sn-ht;sn-=Yn,zn.horizontal+=Yn}else if(Zn>Xn){const Yn=Zn-Xn;sn-=Yn,zn.horizontal+=Yn}return{top:`${Math.round(nr)}px`,left:`${Math.round(sn)}px`,transformOrigin:getTransformOriginValue(zn)}},[s,ot,Xt,zt,ht]),[vn,Sn]=reactExports.useState(at),fn=reactExports.useCallback(()=>{const Dn=Ft.current;if(!Dn)return;const Bn=cn(Dn);Bn.top!==null&&(Dn.style.top=Bn.top),Bn.left!==null&&(Dn.style.left=Bn.left),Dn.style.transformOrigin=Bn.transformOrigin,Sn(!0)},[cn]);reactExports.useEffect(()=>(Rt&&window.addEventListener("scroll",fn),()=>window.removeEventListener("scroll",fn)),[s,Rt,fn]);const mn=(Dn,Bn)=>{Pt&&Pt(Dn,Bn),fn()},bn=()=>{Sn(!1)};reactExports.useEffect(()=>{at&&fn()}),reactExports.useImperativeHandle(it,()=>at?{updatePosition:()=>{fn()}}:null,[at,fn]),reactExports.useEffect(()=>{if(!at)return;const Dn=debounce$1(()=>{fn()}),Bn=ownerWindow(s);return Bn.addEventListener("resize",Dn),()=>{Dn.clear(),Bn.removeEventListener("resize",Dn)}},[s,at,fn]);let un=wt;wt==="auto"&&!At.muiSupportAuto&&(un=void 0);const Tn=pt||(s?ownerDocument(resolveAnchorEl(s)).body:void 0),kn=(ct=ft==null?void 0:ft.root)!=null?ct:PopoverRoot,xn=(vt=ft==null?void 0:ft.paper)!=null?vt:PopoverPaper,An=useSlotProps({elementType:xn,externalSlotProps:_extends({},Nt,{style:vn?Nt.style:_extends({},Nt.style,{opacity:0})}),additionalProps:{elevation:st,ref:Ut},ownerState:Jt,className:clsx(hn.paper,Nt==null?void 0:Nt.className)}),En=useSlotProps({elementType:kn,externalSlotProps:(mt==null?void 0:mt.root)||{},externalForwardedProps:bt,additionalProps:{ref:_e,slotProps:{backdrop:{invisible:!0}},container:Tn,open:at},ownerState:Jt,className:clsx(hn.root,dt)}),{slotProps:Rn}=En,wn=_objectWithoutPropertiesLoose(En,_excluded3);return jsxRuntimeExports.jsx(kn,_extends({},wn,!isHostComponent(kn)&&{slotProps:Rn,disableScrollLock:Rt},{children:jsxRuntimeExports.jsx(At,_extends({appear:!0,in:at,onEntering:mn,onExited:bn,timeout:un},kt,{children:jsxRuntimeExports.jsx(xn,_extends({},An,{children:gt}))}))}))}),Popover$1=Popover;function getMenuUtilityClass(a){return generateUtilityClass("MuiMenu",a)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const _excluded$r=["onEntering"],_excluded2$1=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$o=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,o)},MenuRoot=styled$1(Popover$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(a,o)=>o.root})({}),MenuPaper=styled$1(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(a,o)=>o.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled$1(MenuList$1,{name:"MuiMenu",slot:"List",overridesResolver:(a,o)=>o.list})({outline:0}),Menu=reactExports.forwardRef(function(o,_e){var tt,ct;const vt=useThemeProps({props:o,name:"MuiMenu"}),{autoFocus:nt=!0,children:it,className:s,disableAutoFocusItem:et=!1,MenuListProps:rt={},onClose:ot,open:gt,PaperProps:dt={},PopoverClasses:pt,transitionDuration:st="auto",TransitionProps:{onEntering:ht}={},variant:at="selectedMenu",slots:ut={},slotProps:ft={}}=vt,mt=_objectWithoutPropertiesLoose(vt.TransitionProps,_excluded$r),yt=_objectWithoutPropertiesLoose(vt,_excluded2$1),At=useTheme(),wt=At.direction==="rtl",Pt=_extends({},vt,{autoFocus:nt,disableAutoFocusItem:et,MenuListProps:rt,onEntering:ht,PaperProps:dt,transitionDuration:st,TransitionProps:mt,variant:at}),Rt=useUtilityClasses$o(Pt),kt=nt&&!et&&gt,bt=reactExports.useRef(null),Nt=(cn,vn)=>{bt.current&&bt.current.adjustStyleForScrollbar(cn,At),ht&&ht(cn,vn)},Ft=cn=>{cn.key==="Tab"&&(cn.preventDefault(),ot&&ot(cn,"tabKeyDown"))};let Ut=-1;reactExports.Children.map(it,(cn,vn)=>{reactExports.isValidElement(cn)&&(cn.props.disabled||(at==="selectedMenu"&&cn.props.selected||Ut===-1)&&(Ut=vn))});const Jt=(tt=ut.paper)!=null?tt:MenuPaper,hn=(ct=ft.paper)!=null?ct:dt,Xt=useSlotProps({elementType:ut.root,externalSlotProps:ft.root,ownerState:Pt,className:[Rt.root,s]}),zt=useSlotProps({elementType:Jt,externalSlotProps:hn,ownerState:Pt,className:Rt.paper});return jsxRuntimeExports.jsx(MenuRoot,_extends({onClose:ot,anchorOrigin:{vertical:"bottom",horizontal:wt?"right":"left"},transformOrigin:wt?RTL_ORIGIN:LTR_ORIGIN,slots:{paper:Jt,root:ut.root},slotProps:{root:Xt,paper:zt},open:gt,ref:_e,transitionDuration:st,TransitionProps:_extends({onEntering:Nt},mt),ownerState:Pt},yt,{classes:pt,children:jsxRuntimeExports.jsx(MenuMenuList,_extends({onKeyDown:Ft,actions:bt,autoFocus:nt&&(Ut===-1||et),autoFocusItem:kt,variant:at},rt,{className:clsx(Rt.list,rt.className),children:it}))}))}),Menu$1=Menu;function getNativeSelectUtilityClasses(a){return generateUtilityClass("MuiNativeSelect",a)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nativeSelectClasses$1=nativeSelectClasses,_excluded$q=["className","disabled","error","IconComponent","inputRef","variant"],useUtilityClasses$n=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:vt,error:nt}=a,it={select:["select",_e,tt&&"disabled",ct&&"multiple",nt&&"error"],icon:["icon",`icon${capitalize(_e)}`,vt&&"iconOpen",tt&&"disabled"]};return composeClasses(it,getNativeSelectUtilityClasses,o)},nativeSelectSelectStyles=({ownerState:a,theme:o})=>_extends({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_extends({},o.vars?{backgroundColor:`rgba(${o.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:o.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${nativeSelectClasses$1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(o.vars||o).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},a.variant==="filled"&&{"&&&":{paddingRight:32}},a.variant==="outlined"&&{borderRadius:(o.vars||o).shape.borderRadius,"&:focus":{borderRadius:(o.vars||o).shape.borderRadius},"&&&":{paddingRight:32}}),NativeSelectSelect=styled$1("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.select,o[_e.variant],_e.error&&o.error,{[`&.${nativeSelectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles),nativeSelectIconStyles=({ownerState:a,theme:o})=>_extends({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(o.vars||o).palette.action.active,[`&.${nativeSelectClasses$1.disabled}`]:{color:(o.vars||o).palette.action.disabled}},a.open&&{transform:"rotate(180deg)"},a.variant==="filled"&&{right:7},a.variant==="outlined"&&{right:7}),NativeSelectIcon=styled$1("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),NativeSelectInput=reactExports.forwardRef(function(o,_e){const{className:tt,disabled:ct,error:vt,IconComponent:nt,inputRef:it,variant:s="standard"}=o,et=_objectWithoutPropertiesLoose(o,_excluded$q),rt=_extends({},o,{disabled:ct,variant:s,error:vt}),ot=useUtilityClasses$n(rt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,_extends({ownerState:rt,className:clsx(ot.select,tt),disabled:ct,ref:it||_e},et)),o.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:nt,ownerState:rt,className:ot.icon})]})}),NativeSelectInput$1=NativeSelectInput;function hasValue(a){return a!=null&&!(Array.isArray(a)&&a.length===0)}function isFilled(a,o=!1){return a&&(hasValue(a.value)&&a.value!==""||o&&hasValue(a.defaultValue)&&a.defaultValue!=="")}function getSelectUtilityClasses(a){return generateUtilityClass("MuiSelect",a)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),selectClasses$1=selectClasses;var _span$1;const _excluded$p=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SelectSelect=styled$1("div",{name:"MuiSelect",slot:"Select",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`&.${selectClasses$1.select}`]:o.select},{[`&.${selectClasses$1.select}`]:o[_e.variant]},{[`&.${selectClasses$1.error}`]:o.error},{[`&.${selectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles,{[`&.${selectClasses$1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled$1("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),SelectNativeInput=styled$1("input",{shouldForwardProp:a=>slotShouldForwardProp(a)&&a!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(a,o)=>o.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(a,o){return typeof o=="object"&&o!==null?a===o:String(a)===String(o)}function isEmpty(a){return a==null||typeof a=="string"&&!a.trim()}const useUtilityClasses$m=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:vt,error:nt}=a,it={select:["select",_e,tt&&"disabled",ct&&"multiple",nt&&"error"],icon:["icon",`icon${capitalize(_e)}`,vt&&"iconOpen",tt&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(it,getSelectUtilityClasses,o)},SelectInput=reactExports.forwardRef(function(o,_e){var tt;const{"aria-describedby":ct,"aria-label":vt,autoFocus:nt,autoWidth:it,children:s,className:et,defaultOpen:rt,defaultValue:ot,disabled:gt,displayEmpty:dt,error:pt=!1,IconComponent:st,inputRef:ht,labelId:at,MenuProps:ut={},multiple:ft,name:mt,onBlur:yt,onChange:At,onClose:wt,onFocus:Pt,onOpen:Rt,open:kt,readOnly:bt,renderValue:Nt,SelectDisplayProps:Ft={},tabIndex:Ut,value:Jt,variant:hn="standard"}=o,Xt=_objectWithoutPropertiesLoose(o,_excluded$p),[zt,cn]=useControlled({controlled:Jt,default:ot,name:"Select"}),[vn,Sn]=useControlled({controlled:kt,default:rt,name:"Select"}),fn=reactExports.useRef(null),mn=reactExports.useRef(null),[bn,un]=reactExports.useState(null),{current:Tn}=reactExports.useRef(kt!=null),[kn,xn]=reactExports.useState(),An=useForkRef(_e,ht),En=reactExports.useCallback(It=>{mn.current=It,It&&un(It)},[]),Rn=bn==null?void 0:bn.parentNode;reactExports.useImperativeHandle(An,()=>({focus:()=>{mn.current.focus()},node:fn.current,value:zt}),[zt]),reactExports.useEffect(()=>{rt&&vn&&bn&&!Tn&&(xn(it?null:Rn.clientWidth),mn.current.focus())},[bn,it]),reactExports.useEffect(()=>{nt&&mn.current.focus()},[nt]),reactExports.useEffect(()=>{if(!at)return;const It=ownerDocument(mn.current).getElementById(at);if(It){const Dt=()=>{getSelection().isCollapsed&&mn.current.focus()};return It.addEventListener("click",Dt),()=>{It.removeEventListener("click",Dt)}}},[at]);const wn=(It,Dt)=>{It?Rt&&Rt(Dt):wt&&wt(Dt),Tn||(xn(it?null:Rn.clientWidth),Sn(It))},Dn=It=>{It.button===0&&(It.preventDefault(),mn.current.focus(),wn(!0,It))},Bn=It=>{wn(!1,It)},zn=reactExports.Children.toArray(s),Hn=It=>{const Dt=zn.find(Et=>Et.props.value===It.target.value);Dt!==void 0&&(cn(Dt.props.value),At&&At(It,Dt))},nr=It=>Dt=>{let Et;if(Dt.currentTarget.hasAttribute("tabindex")){if(ft){Et=Array.isArray(zt)?zt.slice():[];const $t=zt.indexOf(It.props.value);$t===-1?Et.push(It.props.value):Et.splice($t,1)}else Et=It.props.value;if(It.props.onClick&&It.props.onClick(Dt),zt!==Et&&(cn(Et),At)){const $t=Dt.nativeEvent||Dt,xt=new $t.constructor($t.type,$t);Object.defineProperty(xt,"target",{writable:!0,value:{value:Et,name:mt}}),At(xt,It)}ft||wn(!1,Dt)}},sn=It=>{bt||[" ","ArrowUp","ArrowDown","Enter"].indexOf(It.key)!==-1&&(It.preventDefault(),wn(!0,It))},Gn=bn!==null&&vn,Zn=It=>{!Gn&&yt&&(Object.defineProperty(It,"target",{writable:!0,value:{value:zt,name:mt}}),yt(It))};delete Xt["aria-invalid"];let rr,Fn;const Xn=[];let Yn=!1;(isFilled({value:zt})||dt)&&(Nt?rr=Nt(zt):Yn=!0);const Nn=zn.map(It=>{if(!reactExports.isValidElement(It))return null;let Dt;if(ft){if(!Array.isArray(zt))throw new Error(formatMuiErrorMessage(2));Dt=zt.some(Et=>areEqualValues(Et,It.props.value)),Dt&&Yn&&Xn.push(It.props.children)}else Dt=areEqualValues(zt,It.props.value),Dt&&Yn&&(Fn=It.props.children);return reactExports.cloneElement(It,{"aria-selected":Dt?"true":"false",onClick:nr(It),onKeyUp:Et=>{Et.key===" "&&Et.preventDefault(),It.props.onKeyUp&&It.props.onKeyUp(Et)},role:"option",selected:Dt,value:void 0,"data-value":It.props.value})});Yn&&(ft?Xn.length===0?rr=null:rr=Xn.reduce((It,Dt,Et)=>(It.push(Dt),Et<Xn.length-1&&It.push(", "),It),[]):rr=Fn);let Un=kn;!it&&Tn&&bn&&(Un=Rn.clientWidth);let Cn;typeof Ut<"u"?Cn=Ut:Cn=gt?null:0;const Mn=Ft.id||(mt?`mui-component-select-${mt}`:void 0),Kt=_extends({},o,{variant:hn,value:zt,open:Gn,error:pt}),Ot=useUtilityClasses$m(Kt),lt=_extends({},ut.PaperProps,(tt=ut.slotProps)==null?void 0:tt.paper),Tt=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,_extends({ref:En,tabIndex:Cn,role:"combobox","aria-controls":Tt,"aria-disabled":gt?"true":void 0,"aria-expanded":Gn?"true":"false","aria-haspopup":"listbox","aria-label":vt,"aria-labelledby":[at,Mn].filter(Boolean).join(" ")||void 0,"aria-describedby":ct,onKeyDown:sn,onMouseDown:gt||bt?null:Dn,onBlur:Zn,onFocus:Pt},Ft,{ownerState:Kt,className:clsx(Ft.className,Ot.select,et),id:Mn,children:isEmpty(rr)?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"})):rr})),jsxRuntimeExports.jsx(SelectNativeInput,_extends({"aria-invalid":pt,value:Array.isArray(zt)?zt.join(","):zt,name:mt,ref:fn,"aria-hidden":!0,onChange:Hn,tabIndex:-1,disabled:gt,className:Ot.nativeInput,autoFocus:nt,ownerState:Kt},Xt)),jsxRuntimeExports.jsx(SelectIcon,{as:st,className:Ot.icon,ownerState:Kt}),jsxRuntimeExports.jsx(Menu$1,_extends({id:`menu-${mt||""}`,anchorEl:Rn,open:Gn,onClose:Bn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},ut,{MenuListProps:_extends({"aria-labelledby":at,role:"listbox","aria-multiselectable":ft?"true":void 0,disableListWrap:!0,id:Tt},ut.MenuListProps),slotProps:_extends({},ut.slotProps,{paper:_extends({},lt,{style:_extends({minWidth:Un},lt!=null?lt.style:null)})}),children:Nn}))]})}),SelectInput$1=SelectInput;function formControlState({props:a,states:o,muiFormControl:_e}){return o.reduce((tt,ct)=>(tt[ct]=a[ct],_e&&typeof a[ct]>"u"&&(tt[ct]=_e[ct]),tt),{})}const FormControlContext=reactExports.createContext(void 0),FormControlContext$1=FormControlContext;function useFormControl(){return reactExports.useContext(FormControlContext$1)}function getSvgIconUtilityClass(a){return generateUtilityClass("MuiSvgIcon",a)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$o=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$l=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getSvgIconUtilityClass,tt)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>{var _e,tt,ct,vt,nt,it,s,et,rt,ot,gt,dt,pt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:o.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(_e=a.transitions)==null||(tt=_e.create)==null?void 0:tt.call(_e,"fill",{duration:(ct=a.transitions)==null||(ct=ct.duration)==null?void 0:ct.shorter}),fontSize:{inherit:"inherit",small:((vt=a.typography)==null||(nt=vt.pxToRem)==null?void 0:nt.call(vt,20))||"1.25rem",medium:((it=a.typography)==null||(s=it.pxToRem)==null?void 0:s.call(it,24))||"1.5rem",large:((et=a.typography)==null||(rt=et.pxToRem)==null?void 0:rt.call(et,35))||"2.1875rem"}[o.fontSize],color:(ot=(gt=(a.vars||a).palette)==null||(gt=gt[o.color])==null?void 0:gt.main)!=null?ot:{action:(dt=(a.vars||a).palette)==null||(dt=dt.action)==null?void 0:dt.active,disabled:(pt=(a.vars||a).palette)==null||(pt=pt.action)==null?void 0:pt.disabled,inherit:void 0}[o.color]}}),SvgIcon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSvgIcon"}),{children:ct,className:vt,color:nt="inherit",component:it="svg",fontSize:s="medium",htmlColor:et,inheritViewBox:rt=!1,titleAccess:ot,viewBox:gt="0 0 24 24"}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$o),pt=reactExports.isValidElement(ct)&&ct.type==="svg",st=_extends({},tt,{color:nt,component:it,fontSize:s,instanceFontSize:o.fontSize,inheritViewBox:rt,viewBox:gt,hasSvgAsChild:pt}),ht={};rt||(ht.viewBox=gt);const at=useUtilityClasses$l(st);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends({as:it,className:clsx(at.root,vt),focusable:"false",color:et,"aria-hidden":ot?void 0:!0,role:ot?"img":void 0,ref:_e},ht,dt,pt&&ct.props,{ownerState:st,children:[pt?ct.props.children:ct,ot?jsxRuntimeExports.jsx("title",{children:ot}):null]}))});SvgIcon.muiName="SvgIcon";const SvgIcon$1=SvgIcon;function createSvgIcon(a,o){function _e(tt,ct){return jsxRuntimeExports.jsx(SvgIcon$1,_extends({"data-testid":`${o}Icon`,ref:ct},tt,{children:a}))}return _e.muiName=SvgIcon$1.muiName,reactExports.memo(reactExports.forwardRef(_e))}const ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function GlobalStyles(a){return jsxRuntimeExports.jsx(GlobalStyles$1,_extends({},a,{defaultTheme:defaultTheme$2,themeId:THEME_ID}))}function getInputBaseUtilityClass(a){return generateUtilityClass("MuiInputBase",a)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),inputBaseClasses$1=inputBaseClasses,_excluded$n=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rootOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.formControl&&o.formControl,_e.startAdornment&&o.adornedStart,_e.endAdornment&&o.adornedEnd,_e.error&&o.error,_e.size==="small"&&o.sizeSmall,_e.multiline&&o.multiline,_e.color&&o[`color${capitalize(_e.color)}`],_e.fullWidth&&o.fullWidth,_e.hiddenLabel&&o.hiddenLabel]},inputOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.input,_e.size==="small"&&o.inputSizeSmall,_e.multiline&&o.inputMultiline,_e.type==="search"&&o.inputTypeSearch,_e.startAdornment&&o.inputAdornedStart,_e.endAdornment&&o.inputAdornedEnd,_e.hiddenLabel&&o.inputHiddenLabel]},useUtilityClasses$k=a=>{const{classes:o,color:_e,disabled:tt,error:ct,endAdornment:vt,focused:nt,formControl:it,fullWidth:s,hiddenLabel:et,multiline:rt,readOnly:ot,size:gt,startAdornment:dt,type:pt}=a,st={root:["root",`color${capitalize(_e)}`,tt&&"disabled",ct&&"error",s&&"fullWidth",nt&&"focused",it&&"formControl",gt&&gt!=="medium"&&`size${capitalize(gt)}`,rt&&"multiline",dt&&"adornedStart",vt&&"adornedEnd",et&&"hiddenLabel",ot&&"readOnly"],input:["input",tt&&"disabled",pt==="search"&&"inputTypeSearch",rt&&"inputMultiline",gt==="small"&&"inputSizeSmall",et&&"inputHiddenLabel",dt&&"inputAdornedStart",vt&&"inputAdornedEnd",ot&&"readOnly"]};return composeClasses(st,getInputBaseUtilityClass,o)},InputBaseRoot=styled$1("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{color:(a.vars||a).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled,cursor:"default"}},o.multiline&&_extends({padding:"4px 0 5px"},o.size==="small"&&{paddingTop:1}),o.fullWidth&&{width:"100%"})),InputBaseComponent=styled$1("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light",tt=_extends({color:"currentColor"},a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5},{transition:a.transitions.create("opacity",{duration:a.transitions.duration.shorter})}),ct={opacity:"0 !important"},vt=a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5};return _extends({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":tt,"&::-moz-placeholder":tt,"&:-ms-input-placeholder":tt,"&::-ms-input-placeholder":tt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses$1.formControl} &`]:{"&::-webkit-input-placeholder":ct,"&::-moz-placeholder":ct,"&:-ms-input-placeholder":ct,"&::-ms-input-placeholder":ct,"&:focus::-webkit-input-placeholder":vt,"&:focus::-moz-placeholder":vt,"&:focus:-ms-input-placeholder":vt,"&:focus::-ms-input-placeholder":vt},[`&.${inputBaseClasses$1.disabled}`]:{opacity:1,WebkitTextFillColor:(a.vars||a).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},o.size==="small"&&{paddingTop:1},o.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},o.type==="search"&&{MozAppearance:"textfield"})}),inputGlobalStyles=jsxRuntimeExports.jsx(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),InputBase=reactExports.forwardRef(function(o,_e){var tt;const ct=useThemeProps({props:o,name:"MuiInputBase"}),{"aria-describedby":vt,autoComplete:nt,autoFocus:it,className:s,components:et={},componentsProps:rt={},defaultValue:ot,disabled:gt,disableInjectingGlobalStyles:dt,endAdornment:pt,fullWidth:st=!1,id:ht,inputComponent:at="input",inputProps:ut={},inputRef:ft,maxRows:mt,minRows:yt,multiline:At=!1,name:wt,onBlur:Pt,onChange:Rt,onClick:kt,onFocus:bt,onKeyDown:Nt,onKeyUp:Ft,placeholder:Ut,readOnly:Jt,renderSuffix:hn,rows:Xt,slotProps:zt={},slots:cn={},startAdornment:vn,type:Sn="text",value:fn}=ct,mn=_objectWithoutPropertiesLoose(ct,_excluded$n),bn=ut.value!=null?ut.value:fn,{current:un}=reactExports.useRef(bn!=null),Tn=reactExports.useRef(),kn=reactExports.useCallback(Mn=>{},[]),xn=useForkRef(Tn,ft,ut.ref,kn),[An,En]=reactExports.useState(!1),Rn=useFormControl(),wn=formControlState({props:ct,muiFormControl:Rn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});wn.focused=Rn?Rn.focused:An,reactExports.useEffect(()=>{!Rn&&gt&&An&&(En(!1),Pt&&Pt())},[Rn,gt,An,Pt]);const Dn=Rn&&Rn.onFilled,Bn=Rn&&Rn.onEmpty,zn=reactExports.useCallback(Mn=>{isFilled(Mn)?Dn&&Dn():Bn&&Bn()},[Dn,Bn]);useEnhancedEffect$1(()=>{un&&zn({value:bn})},[bn,zn,un]);const Hn=Mn=>{if(wn.disabled){Mn.stopPropagation();return}bt&&bt(Mn),ut.onFocus&&ut.onFocus(Mn),Rn&&Rn.onFocus?Rn.onFocus(Mn):En(!0)},nr=Mn=>{Pt&&Pt(Mn),ut.onBlur&&ut.onBlur(Mn),Rn&&Rn.onBlur?Rn.onBlur(Mn):En(!1)},sn=(Mn,...Kt)=>{if(!un){const Ot=Mn.target||Tn.current;if(Ot==null)throw new Error(formatMuiErrorMessage(1));zn({value:Ot.value})}ut.onChange&&ut.onChange(Mn,...Kt),Rt&&Rt(Mn,...Kt)};reactExports.useEffect(()=>{zn(Tn.current)},[]);const Gn=Mn=>{Tn.current&&Mn.currentTarget===Mn.target&&Tn.current.focus(),kt&&kt(Mn)};let Zn=at,rr=ut;At&&Zn==="input"&&(Xt?rr=_extends({type:void 0,minRows:Xt,maxRows:Xt},rr):rr=_extends({type:void 0,maxRows:mt,minRows:yt},rr),Zn=TextareaAutosize);const Fn=Mn=>{zn(Mn.animationName==="mui-auto-fill-cancel"?Tn.current:{value:"x"})};reactExports.useEffect(()=>{Rn&&Rn.setAdornedStart(!!vn)},[Rn,vn]);const Xn=_extends({},ct,{color:wn.color||"primary",disabled:wn.disabled,endAdornment:pt,error:wn.error,focused:wn.focused,formControl:Rn,fullWidth:st,hiddenLabel:wn.hiddenLabel,multiline:At,size:wn.size,startAdornment:vn,type:Sn}),Yn=useUtilityClasses$k(Xn),Nn=cn.root||et.Root||InputBaseRoot,Un=zt.root||rt.root||{},Cn=cn.input||et.Input||InputBaseComponent;return rr=_extends({},rr,(tt=zt.input)!=null?tt:rt.input),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!dt&&inputGlobalStyles,jsxRuntimeExports.jsxs(Nn,_extends({},Un,!isHostComponent(Nn)&&{ownerState:_extends({},Xn,Un.ownerState)},{ref:_e,onClick:Gn},mn,{className:clsx(Yn.root,Un.className,s,Jt&&"MuiInputBase-readOnly"),children:[vn,jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:null,children:jsxRuntimeExports.jsx(Cn,_extends({ownerState:Xn,"aria-invalid":wn.error,"aria-describedby":vt,autoComplete:nt,autoFocus:it,defaultValue:ot,disabled:wn.disabled,id:ht,onAnimationStart:Fn,name:wt,placeholder:Ut,readOnly:Jt,required:wn.required,rows:Xt,value:bn,onKeyDown:Nt,onKeyUp:Ft,type:Sn},rr,!isHostComponent(Cn)&&{as:Zn,ownerState:_extends({},Xn,rr.ownerState)},{ref:xn,className:clsx(Yn.input,rr.className,Jt&&"MuiInputBase-readOnly"),onBlur:nr,onChange:sn,onFocus:Hn}))}),pt,hn?hn(_extends({},wn,{startAdornment:vn})):null]}))]})}),InputBase$1=InputBase;function getInputUtilityClass(a){return generateUtilityClass("MuiInput",a)}const inputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiInput",["root","underline","input"])),inputClasses$1=inputClasses,_excluded$m=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$j=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getInputUtilityClass,o);return _extends({},o,ct)},InputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{let tt=a.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return a.vars&&(tt=`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`),_extends({position:"relative"},o.formControl&&{"label + &":{marginTop:16}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(a.vars||a).palette[o.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${tt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses$1.disabled}, .${inputClasses$1.error}):before`]:{borderBottom:`2px solid ${(a.vars||a).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${tt}`}},[`&.${inputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),InputInput=styled$1(InputBaseComponent,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt;const it=useThemeProps({props:o,name:"MuiInput"}),{disableUnderline:s,components:et={},componentsProps:rt,fullWidth:ot=!1,inputComponent:gt="input",multiline:dt=!1,slotProps:pt,slots:st={},type:ht="text"}=it,at=_objectWithoutPropertiesLoose(it,_excluded$m),ut=useUtilityClasses$j(it),mt={root:{ownerState:{disableUnderline:s}}},yt=pt??rt?deepmerge(pt??rt,mt):mt,At=(tt=(ct=st.root)!=null?ct:et.Root)!=null?tt:InputRoot,wt=(vt=(nt=st.input)!=null?nt:et.Input)!=null?vt:InputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:At,input:wt},slotProps:yt,fullWidth:ot,inputComponent:gt,multiline:dt,ref:_e,type:ht},at,{classes:ut}))});Input.muiName="Input";const Input$1=Input;function getFilledInputUtilityClass(a){return generateUtilityClass("MuiFilledInput",a)}const filledInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiFilledInput",["root","underline","input"])),filledInputClasses$1=filledInputClasses,_excluded$l=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$i=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getFilledInputUtilityClass,o);return _extends({},o,ct)},FilledInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{var _e;const tt=a.palette.mode==="light",ct=tt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",vt=tt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",nt=tt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",it=tt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _extends({position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:vt,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:nt,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:vt}},[`&.${filledInputClasses$1.focused}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:vt},[`&.${filledInputClasses$1.disabled}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:it}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(_e=(a.vars||a).palette[o.color||"primary"])==null?void 0:_e.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`:ct}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses$1.disabled}, .${filledInputClasses$1.error}):before`]:{borderBottom:`1px solid ${(a.vars||a).palette.text.primary}`},[`&.${filledInputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}},o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&_extends({padding:"25px 12px 8px"},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),FilledInputInput=styled$1(InputBaseComponent,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17},o.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0},o.hiddenLabel&&o.size==="small"&&{paddingTop:8,paddingBottom:9})),FilledInput=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt;const it=useThemeProps({props:o,name:"MuiFilledInput"}),{components:s={},componentsProps:et,fullWidth:rt=!1,inputComponent:ot="input",multiline:gt=!1,slotProps:dt,slots:pt={},type:st="text"}=it,ht=_objectWithoutPropertiesLoose(it,_excluded$l),at=_extends({},it,{fullWidth:rt,inputComponent:ot,multiline:gt,type:st}),ut=useUtilityClasses$i(it),ft={root:{ownerState:at},input:{ownerState:at}},mt=dt??et?deepmerge(dt??et,ft):ft,yt=(tt=(ct=pt.root)!=null?ct:s.Root)!=null?tt:FilledInputRoot,At=(vt=(nt=pt.input)!=null?nt:s.Input)!=null?vt:FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:yt,input:At},componentsProps:mt,fullWidth:rt,inputComponent:ot,multiline:gt,ref:_e,type:st},ht,{classes:ut}))});FilledInput.muiName="Input";const FilledInput$1=FilledInput;var _span;const _excluded$k=["children","classes","className","label","notched"],NotchedOutlineRoot$1=styled$1("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled$1("legend")(({ownerState:a,theme:o})=>_extends({float:"unset",width:"auto",overflow:"hidden"},!a.withLabel&&{padding:0,lineHeight:"11px",transition:o.transitions.create("width",{duration:150,easing:o.transitions.easing.easeOut})},a.withLabel&&_extends({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:o.transitions.create("max-width",{duration:50,easing:o.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},a.notched&&{maxWidth:"100%",transition:o.transitions.create("max-width",{duration:100,easing:o.transitions.easing.easeOut,delay:50})})));function NotchedOutline(a){const{className:o,label:_e,notched:tt}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$k),vt=_e!=null&&_e!=="",nt=_extends({},a,{notched:tt,withLabel:vt});return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,_extends({"aria-hidden":!0,className:o,ownerState:nt},ct,{children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:nt,children:vt?jsxRuntimeExports.jsx("span",{children:_e}):_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"}))})}))}function getOutlinedInputUtilityClass(a){return generateUtilityClass("MuiOutlinedInput",a)}const outlinedInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])),outlinedInputClasses$1=outlinedInputClasses,_excluded$j=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],useUtilityClasses$h=a=>{const{classes:o}=a,tt=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,o);return _extends({},o,tt)},OutlinedInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _extends({position:"relative",borderRadius:(a.vars||a).shape.borderRadius,[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:_e}},[`&.${outlinedInputClasses$1.focused} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette[o.color].main,borderWidth:2},[`&.${outlinedInputClasses$1.error} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.error.main},[`&.${outlinedInputClasses$1.disabled} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.action.disabled}},o.startAdornment&&{paddingLeft:14},o.endAdornment&&{paddingRight:14},o.multiline&&_extends({padding:"16.5px 14px"},o.size==="small"&&{padding:"8.5px 14px"}))}),NotchedOutlineRoot=styled$1(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(a,o)=>o.notchedOutline})(({theme:a})=>{const o=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:o}}),OutlinedInputInput=styled$1(InputBaseComponent,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({padding:"16.5px 14px"},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{padding:"8.5px 14px"},o.multiline&&{padding:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0})),OutlinedInput=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt,it;const s=useThemeProps({props:o,name:"MuiOutlinedInput"}),{components:et={},fullWidth:rt=!1,inputComponent:ot="input",label:gt,multiline:dt=!1,notched:pt,slots:st={},type:ht="text"}=s,at=_objectWithoutPropertiesLoose(s,_excluded$j),ut=useUtilityClasses$h(s),ft=useFormControl(),mt=formControlState({props:s,muiFormControl:ft,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),yt=_extends({},s,{color:mt.color||"primary",disabled:mt.disabled,error:mt.error,focused:mt.focused,formControl:ft,fullWidth:rt,hiddenLabel:mt.hiddenLabel,multiline:dt,size:mt.size,type:ht}),At=(tt=(ct=st.root)!=null?ct:et.Root)!=null?tt:OutlinedInputRoot,wt=(vt=(nt=st.input)!=null?nt:et.Input)!=null?vt:OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:At,input:wt},renderSuffix:Pt=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:yt,className:ut.notchedOutline,label:gt!=null&&gt!==""&&mt.required?it||(it=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[gt," ","*"]})):gt,notched:typeof pt<"u"?pt:!!(Pt.startAdornment||Pt.filled||Pt.focused)}),fullWidth:rt,inputComponent:ot,multiline:dt,ref:_e,type:ht},at,{classes:_extends({},ut,{notchedOutline:null})}))});OutlinedInput.muiName="Input";const OutlinedInput$1=OutlinedInput,_excluded$i=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],_excluded2=["root"],useUtilityClasses$g=a=>{const{classes:o}=a;return o},styledRootConfig={name:"MuiSelect",overridesResolver:(a,o)=>o.root,shouldForwardProp:a=>rootShouldForwardProp(a)&&a!=="variant",slot:"Root"},StyledInput=styled$1(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled$1(OutlinedInput$1,styledRootConfig)(""),StyledFilledInput=styled$1(FilledInput$1,styledRootConfig)(""),Select=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({name:"MuiSelect",props:o}),{autoWidth:ct=!1,children:vt,classes:nt={},className:it,defaultOpen:s=!1,displayEmpty:et=!1,IconComponent:rt=ArrowDropDownIcon,id:ot,input:gt,inputProps:dt,label:pt,labelId:st,MenuProps:ht,multiple:at=!1,native:ut=!1,onClose:ft,onOpen:mt,open:yt,renderValue:At,SelectDisplayProps:wt,variant:Pt="outlined"}=tt,Rt=_objectWithoutPropertiesLoose(tt,_excluded$i),kt=ut?NativeSelectInput$1:SelectInput$1,bt=useFormControl(),Nt=formControlState({props:tt,muiFormControl:bt,states:["variant","error"]}),Ft=Nt.variant||Pt,Ut=_extends({},tt,{variant:Ft,classes:nt}),Jt=useUtilityClasses$g(Ut),hn=_objectWithoutPropertiesLoose(Jt,_excluded2),Xt=gt||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:Ut}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:pt,ownerState:Ut}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:Ut})}[Ft],zt=useForkRef(_e,Xt.ref);return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(Xt,_extends({inputComponent:kt,inputProps:_extends({children:vt,error:Nt.error,IconComponent:rt,variant:Ft,type:void 0,multiple:at},ut?{id:ot}:{autoWidth:ct,defaultOpen:s,displayEmpty:et,labelId:st,MenuProps:ht,onClose:ft,onOpen:mt,open:yt,renderValue:At,SelectDisplayProps:_extends({id:ot},wt)},dt,{classes:dt?deepmerge(hn,dt.classes):hn},gt?gt.props.inputProps:{})},at&&ut&&Ft==="outlined"?{notched:!0}:{},{ref:zt,className:clsx(Xt.props.className,it,Jt.root)},!gt&&{variant:Ft},Rt))})});Select.muiName="Select";const Select$1=Select,Stack=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root}),useThemeProps:a=>useThemeProps({props:a,name:"MuiStack"})}),Stack$1=Stack;function getFormControlLabelUtilityClasses(a){return generateUtilityClass("MuiFormControlLabel",a)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),formControlLabelClasses$1=formControlLabelClasses,_excluded$h=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],useUtilityClasses$f=a=>{const{classes:o,disabled:_e,labelPlacement:tt,error:ct,required:vt}=a,nt={root:["root",_e&&"disabled",`labelPlacement${capitalize(tt)}`,ct&&"error",vt&&"required"],label:["label",_e&&"disabled"],asterisk:["asterisk",ct&&"error"]};return composeClasses(nt,getFormControlLabelUtilityClasses,o)},FormControlLabelRoot=styled$1("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`& .${formControlLabelClasses$1.label}`]:o.label},o.root,o[`labelPlacement${capitalize(_e.labelPlacement)}`]]}})(({theme:a,ownerState:o})=>_extends({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses$1.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses$1.label}`]:{[`&.${formControlLabelClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled}}})),AsteriskComponent=styled$1("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(a,o)=>o.asterisk})(({theme:a})=>({[`&.${formControlLabelClasses$1.error}`]:{color:(a.vars||a).palette.error.main}})),FormControlLabel=reactExports.forwardRef(function(o,_e){var tt,ct;const vt=useThemeProps({props:o,name:"MuiFormControlLabel"}),{className:nt,componentsProps:it={},control:s,disabled:et,disableTypography:rt,label:ot,labelPlacement:gt="end",required:dt,slotProps:pt={}}=vt,st=_objectWithoutPropertiesLoose(vt,_excluded$h),ht=useFormControl(),at=(tt=et??s.props.disabled)!=null?tt:ht==null?void 0:ht.disabled,ut=dt??s.props.required,ft={disabled:at,required:ut};["checked","name","onChange","value","inputRef"].forEach(Rt=>{typeof s.props[Rt]>"u"&&typeof vt[Rt]<"u"&&(ft[Rt]=vt[Rt])});const mt=formControlState({props:vt,muiFormControl:ht,states:["error"]}),yt=_extends({},vt,{disabled:at,labelPlacement:gt,required:ut,error:mt.error}),At=useUtilityClasses$f(yt),wt=(ct=pt.typography)!=null?ct:it.typography;let Pt=ot;return Pt!=null&&Pt.type!==Typography$1&&!rt&&(Pt=jsxRuntimeExports.jsx(Typography$1,_extends({component:"span"},wt,{className:clsx(At.label,wt==null?void 0:wt.className),children:Pt}))),jsxRuntimeExports.jsxs(FormControlLabelRoot,_extends({className:clsx(At.root,nt),ownerState:yt,ref:_e},st,{children:[reactExports.cloneElement(s,ft),ut?jsxRuntimeExports.jsxs(Stack$1,{direction:"row",alignItems:"center",children:[Pt,jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:yt,"aria-hidden":!0,className:At.asterisk,children:[" ","*"]})]}):Pt]}))}),FormControlLabel$1=FormControlLabel;function getSwitchBaseUtilityClass(a){return generateUtilityClass("PrivateSwitchBase",a)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$e=a=>{const{classes:o,checked:_e,disabled:tt,edge:ct}=a,vt={root:["root",_e&&"checked",tt&&"disabled",ct&&`edge${capitalize(ct)}`],input:["input"]};return composeClasses(vt,getSwitchBaseUtilityClass,o)},SwitchBaseRoot=styled$1(ButtonBase$1)(({ownerState:a})=>_extends({padding:9,borderRadius:"50%"},a.edge==="start"&&{marginLeft:a.size==="small"?-3:-12},a.edge==="end"&&{marginRight:a.size==="small"?-3:-12})),SwitchBaseInput=styled$1("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(o,_e){const{autoFocus:tt,checked:ct,checkedIcon:vt,className:nt,defaultChecked:it,disabled:s,disableFocusRipple:et=!1,edge:rt=!1,icon:ot,id:gt,inputProps:dt,inputRef:pt,name:st,onBlur:ht,onChange:at,onFocus:ut,readOnly:ft,required:mt=!1,tabIndex:yt,type:At,value:wt}=o,Pt=_objectWithoutPropertiesLoose(o,_excluded$g),[Rt,kt]=useControlled({controlled:ct,default:!!it,name:"SwitchBase",state:"checked"}),bt=useFormControl(),Nt=cn=>{ut&&ut(cn),bt&&bt.onFocus&&bt.onFocus(cn)},Ft=cn=>{ht&&ht(cn),bt&&bt.onBlur&&bt.onBlur(cn)},Ut=cn=>{if(cn.nativeEvent.defaultPrevented)return;const vn=cn.target.checked;kt(vn),at&&at(cn,vn)};let Jt=s;bt&&typeof Jt>"u"&&(Jt=bt.disabled);const hn=At==="checkbox"||At==="radio",Xt=_extends({},o,{checked:Rt,disabled:Jt,disableFocusRipple:et,edge:rt}),zt=useUtilityClasses$e(Xt);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends({component:"span",className:clsx(zt.root,nt),centerRipple:!0,focusRipple:!et,disabled:Jt,tabIndex:null,role:void 0,onFocus:Nt,onBlur:Ft,ownerState:Xt,ref:_e},Pt,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends({autoFocus:tt,checked:ct,defaultChecked:it,className:zt.input,disabled:Jt,id:hn?gt:void 0,name:st,onChange:Ut,readOnly:ft,ref:pt,required:mt,ownerState:Xt,tabIndex:yt,type:At},At==="checkbox"&&wt===void 0?{}:{value:wt},dt)),Rt?vt:ot]}))}),SwitchBase$1=SwitchBase;function getFormGroupUtilityClass(a){return generateUtilityClass("MuiFormGroup",a)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const _excluded$f=["className","row"],useUtilityClasses$d=a=>{const{classes:o,row:_e,error:tt}=a;return composeClasses({root:["root",_e&&"row",tt&&"error"]},getFormGroupUtilityClass,o)},FormGroupRoot=styled$1("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.row&&o.row]}})(({ownerState:a})=>_extends({display:"flex",flexDirection:"column",flexWrap:"wrap"},a.row&&{flexDirection:"row"})),FormGroup=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiFormGroup"}),{className:ct,row:vt=!1}=tt,nt=_objectWithoutPropertiesLoose(tt,_excluded$f),it=useFormControl(),s=formControlState({props:tt,muiFormControl:it,states:["error"]}),et=_extends({},tt,{row:vt,error:s.error}),rt=useUtilityClasses$d(et);return jsxRuntimeExports.jsx(FormGroupRoot,_extends({className:clsx(rt.root,ct),ownerState:et,ref:_e},nt))}),FormGroup$1=FormGroup;function getUnit(a){return String(a).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(a){return parseFloat(a)}const _excluded$e=["theme"];function ThemeProvider(a){let{theme:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$e);const tt=o[THEME_ID];return jsxRuntimeExports.jsx(ThemeProvider$1,_extends({},_e,{themeId:tt?THEME_ID:void 0,theme:tt||o}))}const defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getIconUtilityClass(a){return generateUtilityClass("MuiIcon",a)}generateUtilityClasses("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$d=["baseClassName","className","color","component","fontSize"],useUtilityClasses$c=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getIconUtilityClass,tt)},IconRoot=styled$1("span",{name:"MuiIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:a.typography.pxToRem(20),medium:a.typography.pxToRem(24),large:a.typography.pxToRem(36)}[o.fontSize],color:{primary:(a.vars||a).palette.primary.main,secondary:(a.vars||a).palette.secondary.main,info:(a.vars||a).palette.info.main,success:(a.vars||a).palette.success.main,warning:(a.vars||a).palette.warning.main,action:(a.vars||a).palette.action.active,error:(a.vars||a).palette.error.main,disabled:(a.vars||a).palette.action.disabled,inherit:void 0}[o.color]})),Icon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIcon"}),{baseClassName:ct="material-icons",className:vt,color:nt="inherit",component:it="span",fontSize:s="medium"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$d),rt=_extends({},tt,{baseClassName:ct,color:nt,component:it,fontSize:s}),ot=useUtilityClasses$c(rt);return jsxRuntimeExports.jsx(IconRoot,_extends({as:it,className:clsx(ct,"notranslate",ot.root,vt),ownerState:rt,"aria-hidden":!0,ref:_e},et))});Icon.muiName="Icon";const Icon$1=Icon;function getIconButtonUtilityClass(a){return generateUtilityClass("MuiIconButton",a)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),iconButtonClasses$1=iconButtonClasses,_excluded$c=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$b=a=>{const{classes:o,disabled:_e,color:tt,edge:ct,size:vt}=a,nt={root:["root",_e&&"disabled",tt!=="default"&&`color${capitalize(tt)}`,ct&&`edge${capitalize(ct)}`,`size${capitalize(vt)}`]};return composeClasses(nt,getIconButtonUtilityClass,o)},IconButtonRoot=styled$1(ButtonBase$1,{name:"MuiIconButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="default"&&o[`color${capitalize(_e.color)}`],_e.edge&&o[`edge${capitalize(_e.edge)}`],o[`size${capitalize(_e.size)}`]]}})(({theme:a,ownerState:o})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:a.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(a.vars||a).palette.action.active,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest})},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.activeChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.edge==="start"&&{marginLeft:o.size==="small"?-3:-12},o.edge==="end"&&{marginRight:o.size==="small"?-3:-12}),({theme:a,ownerState:o})=>{var _e;const tt=(_e=(a.vars||a).palette)==null?void 0:_e[o.color];return _extends({},o.color==="inherit"&&{color:"inherit"},o.color!=="inherit"&&o.color!=="default"&&_extends({color:tt==null?void 0:tt.main},!o.disableRipple&&{"&:hover":_extends({},tt&&{backgroundColor:a.vars?`rgba(${tt.mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(tt.main,a.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),o.size==="small"&&{padding:5,fontSize:a.typography.pxToRem(18)},o.size==="large"&&{padding:12,fontSize:a.typography.pxToRem(28)},{[`&.${iconButtonClasses$1.disabled}`]:{backgroundColor:"transparent",color:(a.vars||a).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIconButton"}),{edge:ct=!1,children:vt,className:nt,color:it="default",disabled:s=!1,disableFocusRipple:et=!1,size:rt="medium"}=tt,ot=_objectWithoutPropertiesLoose(tt,_excluded$c),gt=_extends({},tt,{edge:ct,color:it,disabled:s,disableFocusRipple:et,size:rt}),dt=useUtilityClasses$b(gt);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(dt.root,nt),centerRipple:!0,focusRipple:!et,disabled:s,ref:_e,ownerState:gt},ot,{children:vt}))}),IconButton$1=IconButton,_excluded$b=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled$1(Popper$2,{name:"MuiPopper",slot:"Root",overridesResolver:(a,o)=>o.root})({}),Popper=reactExports.forwardRef(function(o,_e){var tt;const ct=useTheme$3(),vt=useThemeProps({props:o,name:"MuiPopper"}),{anchorEl:nt,component:it,components:s,componentsProps:et,container:rt,disablePortal:ot,keepMounted:gt,modifiers:dt,open:pt,placement:st,popperOptions:ht,popperRef:at,transition:ut,slots:ft,slotProps:mt}=vt,yt=_objectWithoutPropertiesLoose(vt,_excluded$b),At=(tt=ft==null?void 0:ft.root)!=null?tt:s==null?void 0:s.Root,wt=_extends({anchorEl:nt,container:rt,disablePortal:ot,keepMounted:gt,modifiers:dt,open:pt,placement:st,popperOptions:ht,popperRef:at,transition:ut},yt);return jsxRuntimeExports.jsx(PopperRoot,_extends({as:it,direction:ct==null?void 0:ct.direction,slots:{root:At},slotProps:mt??et},wt,{ref:_e}))}),Popper$1=Popper;function getTooltipUtilityClass(a){return generateUtilityClass("MuiTooltip",a)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),tooltipClasses$1=tooltipClasses,_excluded$a=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(a){return Math.round(a*1e5)/1e5}const useUtilityClasses$a=a=>{const{classes:o,disableInteractive:_e,arrow:tt,touch:ct,placement:vt}=a,nt={popper:["popper",!_e&&"popperInteractive",tt&&"popperArrow"],tooltip:["tooltip",tt&&"tooltipArrow",ct&&"touch",`tooltipPlacement${capitalize(vt.split("-")[0])}`],arrow:["arrow"]};return composeClasses(nt,getTooltipUtilityClass,o)},TooltipPopper=styled$1(Popper$1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.popper,!_e.disableInteractive&&o.popperInteractive,_e.arrow&&o.popperArrow,!_e.open&&o.popperClose]}})(({theme:a,ownerState:o,open:_e})=>_extends({zIndex:(a.vars||a).zIndex.tooltip,pointerEvents:"none"},!o.disableInteractive&&{pointerEvents:"auto"},!_e&&{pointerEvents:"none"},o.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses$1.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses$1.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.tooltip,_e.touch&&o.touch,_e.arrow&&o.tooltipArrow,o[`tooltipPlacement${capitalize(_e.placement.split("-")[0])}`]]}})(({theme:a,ownerState:o})=>_extends({backgroundColor:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.92),borderRadius:(a.vars||a).shape.borderRadius,color:(a.vars||a).palette.common.white,fontFamily:a.typography.fontFamily,padding:"4px 8px",fontSize:a.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:a.typography.fontWeightMedium},o.arrow&&{position:"relative",margin:0},o.touch&&{padding:"8px 16px",fontSize:a.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:a.typography.fontWeightRegular},{[`.${tooltipClasses$1.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},o.isRtl?_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},o.isRtl?_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},o.touch&&{marginBottom:"24px"}),[`.${tooltipClasses$1.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},o.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(a,o)=>o.arrow})(({theme:a})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1,hystersisTimer=null,cursorPosition={x:0,y:0};function composeEventHandler(a,o){return _e=>{o&&o(_e),a(_e)}}const Tooltip=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt,it,s,et,rt,ot,gt,dt,pt,st,ht,at,ut,ft,mt,yt;const At=useThemeProps({props:o,name:"MuiTooltip"}),{arrow:wt=!1,children:Pt,components:Rt={},componentsProps:kt={},describeChild:bt=!1,disableFocusListener:Nt=!1,disableHoverListener:Ft=!1,disableInteractive:Ut=!1,disableTouchListener:Jt=!1,enterDelay:hn=100,enterNextDelay:Xt=0,enterTouchDelay:zt=700,followCursor:cn=!1,id:vn,leaveDelay:Sn=0,leaveTouchDelay:fn=1500,onClose:mn,onOpen:bn,open:un,placement:Tn="bottom",PopperComponent:kn,PopperProps:xn={},slotProps:An={},slots:En={},title:Rn,TransitionComponent:wn=Grow$1,TransitionProps:Dn}=At,Bn=_objectWithoutPropertiesLoose(At,_excluded$a),zn=reactExports.isValidElement(Pt)?Pt:jsxRuntimeExports.jsx("span",{children:Pt}),Hn=useTheme(),nr=Hn.direction==="rtl",[sn,Gn]=reactExports.useState(),[Zn,rr]=reactExports.useState(null),Fn=reactExports.useRef(!1),Xn=Ut||cn,Yn=reactExports.useRef(),Nn=reactExports.useRef(),Un=reactExports.useRef(),Cn=reactExports.useRef(),[Mn,Kt]=useControlled({controlled:un,default:!1,name:"Tooltip",state:"open"});let Ot=Mn;const lt=useId(vn),Tt=reactExports.useRef(),It=reactExports.useCallback(()=>{Tt.current!==void 0&&(document.body.style.WebkitUserSelect=Tt.current,Tt.current=void 0),clearTimeout(Cn.current)},[]);reactExports.useEffect(()=>()=>{clearTimeout(Yn.current),clearTimeout(Nn.current),clearTimeout(Un.current),It()},[It]);const Dt=qn=>{clearTimeout(hystersisTimer),hystersisOpen=!0,Kt(!0),bn&&!Ot&&bn(qn)},Et=useEventCallback(qn=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+Sn),Kt(!1),mn&&Ot&&mn(qn),clearTimeout(Yn.current),Yn.current=setTimeout(()=>{Fn.current=!1},Hn.transitions.duration.shortest)}),$t=qn=>{Fn.current&&qn.type!=="touchstart"||(sn&&sn.removeAttribute("title"),clearTimeout(Nn.current),clearTimeout(Un.current),hn||hystersisOpen&&Xt?Nn.current=setTimeout(()=>{Dt(qn)},hystersisOpen?Xt:hn):Dt(qn))},xt=qn=>{clearTimeout(Nn.current),clearTimeout(Un.current),Un.current=setTimeout(()=>{Et(qn)},Sn)},{isFocusVisibleRef:Vt,onBlur:Zt,onFocus:an,ref:qt}=useIsFocusVisible(),[,tn]=reactExports.useState(!1),gn=qn=>{Zt(qn),Vt.current===!1&&(tn(!1),xt(qn))},rn=qn=>{sn||Gn(qn.currentTarget),an(qn),Vt.current===!0&&(tn(!0),$t(qn))},pn=qn=>{Fn.current=!0;const vr=zn.props;vr.onTouchStart&&vr.onTouchStart(qn)},In=$t,Pn=xt,_n=qn=>{pn(qn),clearTimeout(Un.current),clearTimeout(Yn.current),It(),Tt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Cn.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Tt.current,$t(qn)},zt)},Ln=qn=>{zn.props.onTouchEnd&&zn.props.onTouchEnd(qn),It(),clearTimeout(Un.current),Un.current=setTimeout(()=>{Et(qn)},fn)};reactExports.useEffect(()=>{if(!Ot)return;function qn(vr){(vr.key==="Escape"||vr.key==="Esc")&&Et(vr)}return document.addEventListener("keydown",qn),()=>{document.removeEventListener("keydown",qn)}},[Et,Ot]);const Vn=useForkRef(zn.ref,qt,Gn,_e);!Rn&&Rn!==0&&(Ot=!1);const or=reactExports.useRef(),hr=qn=>{const vr=zn.props;vr.onMouseMove&&vr.onMouseMove(qn),cursorPosition={x:qn.clientX,y:qn.clientY},or.current&&or.current.update()},mr={},yr=typeof Rn=="string";bt?(mr.title=!Ot&&yr&&!Ft?Rn:null,mr["aria-describedby"]=Ot?lt:null):(mr["aria-label"]=yr?Rn:null,mr["aria-labelledby"]=Ot&&!yr?lt:null);const Rr=_extends({},mr,Bn,zn.props,{className:clsx(Bn.className,zn.props.className),onTouchStart:pn,ref:Vn},cn?{onMouseMove:hr}:{}),Or={};Jt||(Rr.onTouchStart=_n,Rr.onTouchEnd=Ln),Ft||(Rr.onMouseOver=composeEventHandler(In,Rr.onMouseOver),Rr.onMouseLeave=composeEventHandler(Pn,Rr.onMouseLeave),Xn||(Or.onMouseOver=In,Or.onMouseLeave=Pn)),Nt||(Rr.onFocus=composeEventHandler(rn,Rr.onFocus),Rr.onBlur=composeEventHandler(gn,Rr.onBlur),Xn||(Or.onFocus=rn,Or.onBlur=gn));const Qr=reactExports.useMemo(()=>{var qn;let vr=[{name:"arrow",enabled:!!Zn,options:{element:Zn,padding:4}}];return(qn=xn.popperOptions)!=null&&qn.modifiers&&(vr=vr.concat(xn.popperOptions.modifiers)),_extends({},xn.popperOptions,{modifiers:vr})},[Zn,xn]),Jr=_extends({},At,{isRtl:nr,arrow:wt,disableInteractive:Xn,placement:Tn,PopperComponentProp:kn,touch:Fn.current}),Sr=useUtilityClasses$a(Jr),Nr=(tt=(ct=En.popper)!=null?ct:Rt.Popper)!=null?tt:TooltipPopper,wr=(vt=(nt=(it=En.transition)!=null?it:Rt.Transition)!=null?nt:wn)!=null?vt:Grow$1,_r=(s=(et=En.tooltip)!=null?et:Rt.Tooltip)!=null?s:TooltipTooltip,Ur=(rt=(ot=En.arrow)!=null?ot:Rt.Arrow)!=null?rt:TooltipArrow,Hr=appendOwnerState(Nr,_extends({},xn,(gt=An.popper)!=null?gt:kt.popper,{className:clsx(Sr.popper,xn==null?void 0:xn.className,(dt=(pt=An.popper)!=null?pt:kt.popper)==null?void 0:dt.className)}),Jr),na=appendOwnerState(wr,_extends({},Dn,(st=An.transition)!=null?st:kt.transition),Jr),Kn=appendOwnerState(_r,_extends({},(ht=An.tooltip)!=null?ht:kt.tooltip,{className:clsx(Sr.tooltip,(at=(ut=An.tooltip)!=null?ut:kt.tooltip)==null?void 0:at.className)}),Jr),sr=appendOwnerState(Ur,_extends({},(ft=An.arrow)!=null?ft:kt.arrow,{className:clsx(Sr.arrow,(mt=(yt=An.arrow)!=null?yt:kt.arrow)==null?void 0:mt.className)}),Jr);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(zn,Rr),jsxRuntimeExports.jsx(Nr,_extends({as:kn??Popper$1,placement:Tn,anchorEl:cn?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:sn,popperRef:or,open:sn?Ot:!1,id:lt,transition:!0},Or,Hr,{popperOptions:Qr,children:({TransitionProps:qn})=>jsxRuntimeExports.jsx(wr,_extends({timeout:Hn.transitions.duration.shorter},qn,na,{children:jsxRuntimeExports.jsxs(_r,_extends({},Kn,{children:[Rn,wt?jsxRuntimeExports.jsx(Ur,_extends({},sr,{ref:rr})):null]}))}))}))]})}),Tooltip$1=Tooltip;function getCircularProgressUtilityClass(a){return generateUtilityClass("MuiCircularProgress",a)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _excluded$9=["className","color","disableShrink","size","style","thickness","value","variant"];let _$2=a=>a,_t$1,_t2$1,_t3$1,_t4$1;const SIZE=44,circularRotateKeyframe=keyframes(_t$1||(_t$1=_$2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),circularDashKeyframe=keyframes(_t2$1||(_t2$1=_$2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),useUtilityClasses$9=a=>{const{classes:o,variant:_e,color:tt,disableShrink:ct}=a,vt={root:["root",_e,`color${capitalize(tt)}`],svg:["svg"],circle:["circle",`circle${capitalize(_e)}`,ct&&"circleDisableShrink"]};return composeClasses(vt,getCircularProgressUtilityClass,o)},CircularProgressRoot=styled$1("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`color${capitalize(_e.color)}`]]}})(({ownerState:a,theme:o})=>_extends({display:"inline-block"},a.variant==="determinate"&&{transition:o.transitions.create("transform")},a.color!=="inherit"&&{color:(o.vars||o).palette[a.color].main}),({ownerState:a})=>a.variant==="indeterminate"&&css(_t3$1||(_t3$1=_$2`
      animation: ${0} 1.4s linear infinite;
    `),circularRotateKeyframe)),CircularProgressSVG=styled$1("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(a,o)=>o.svg})({display:"block"}),CircularProgressCircle=styled$1("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.circle,o[`circle${capitalize(_e.variant)}`],_e.disableShrink&&o.circleDisableShrink]}})(({ownerState:a,theme:o})=>_extends({stroke:"currentColor"},a.variant==="determinate"&&{transition:o.transitions.create("stroke-dashoffset")},a.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:a})=>a.variant==="indeterminate"&&!a.disableShrink&&css(_t4$1||(_t4$1=_$2`
      animation: ${0} 1.4s ease-in-out infinite;
    `),circularDashKeyframe)),CircularProgress=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCircularProgress"}),{className:ct,color:vt="primary",disableShrink:nt=!1,size:it=40,style:s,thickness:et=3.6,value:rt=0,variant:ot="indeterminate"}=tt,gt=_objectWithoutPropertiesLoose(tt,_excluded$9),dt=_extends({},tt,{color:vt,disableShrink:nt,size:it,thickness:et,value:rt,variant:ot}),pt=useUtilityClasses$9(dt),st={},ht={},at={};if(ot==="determinate"){const ut=2*Math.PI*((SIZE-et)/2);st.strokeDasharray=ut.toFixed(3),at["aria-valuenow"]=Math.round(rt),st.strokeDashoffset=`${((100-rt)/100*ut).toFixed(3)}px`,ht.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,_extends({className:clsx(pt.root,ct),style:_extends({width:it,height:it},ht,s),ownerState:dt,ref:_e,role:"progressbar"},at,gt,{children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:pt.svg,ownerState:dt,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:pt.circle,style:st,ownerState:dt,cx:SIZE,cy:SIZE,r:(SIZE-et)/2,fill:"none",strokeWidth:et})})}))}),M=CircularProgress,CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(a){return generateUtilityClass("MuiChip",a)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),chipClasses$1=chipClasses,_excluded$8=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$8=a=>{const{classes:o,disabled:_e,size:tt,color:ct,iconColor:vt,onDelete:nt,clickable:it,variant:s}=a,et={root:["root",s,_e&&"disabled",`size${capitalize(tt)}`,`color${capitalize(ct)}`,it&&"clickable",it&&`clickableColor${capitalize(ct)}`,nt&&"deletable",nt&&`deletableColor${capitalize(ct)}`,`${s}${capitalize(ct)}`],label:["label",`label${capitalize(tt)}`],avatar:["avatar",`avatar${capitalize(tt)}`,`avatarColor${capitalize(ct)}`],icon:["icon",`icon${capitalize(tt)}`,`iconColor${capitalize(vt)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(tt)}`,`deleteIconColor${capitalize(ct)}`,`deleteIcon${capitalize(s)}Color${capitalize(ct)}`]};return composeClasses(et,getChipUtilityClass,o)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{color:tt,iconColor:ct,clickable:vt,onDelete:nt,size:it,variant:s}=_e;return[{[`& .${chipClasses$1.avatar}`]:o.avatar},{[`& .${chipClasses$1.avatar}`]:o[`avatar${capitalize(it)}`]},{[`& .${chipClasses$1.avatar}`]:o[`avatarColor${capitalize(tt)}`]},{[`& .${chipClasses$1.icon}`]:o.icon},{[`& .${chipClasses$1.icon}`]:o[`icon${capitalize(it)}`]},{[`& .${chipClasses$1.icon}`]:o[`iconColor${capitalize(ct)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o.deleteIcon},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(it)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIconColor${capitalize(tt)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(s)}Color${capitalize(tt)}`]},o.root,o[`size${capitalize(it)}`],o[`color${capitalize(tt)}`],vt&&o.clickable,vt&&tt!=="default"&&o[`clickableColor${capitalize(tt)})`],nt&&o.deletable,nt&&tt!=="default"&&o[`deletableColor${capitalize(tt)}`],o[s],o[`${s}${capitalize(tt)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses$1.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:_e,fontSize:a.typography.pxToRem(12)},[`& .${chipClasses$1.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${chipClasses$1.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${chipClasses$1.icon}`]:_extends({marginLeft:5,marginRight:-6},o.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},o.iconColor===o.color&&_extends({color:a.vars?a.vars.palette.Chip.defaultIconColor:_e},o.color!=="default"&&{color:"inherit"})),[`& .${chipClasses$1.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:alpha(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:alpha(a.palette.text.primary,.4)}},o.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},o.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[o.color].contrastTextChannel} / 0.7)`:alpha(a.palette[o.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].contrastText}})},o.size==="small"&&{height:24},o.color!=="default"&&{backgroundColor:(a.vars||a).palette[o.color].main,color:(a.vars||a).palette[o.color].contrastText},o.onDelete&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},o.onDelete&&o.color!=="default"&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}})},({theme:a,ownerState:o})=>_extends({},o.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},o.clickable&&o.color!=="default"&&{[`&:hover, &.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}}),({theme:a,ownerState:o})=>_extends({},o.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${chipClasses$1.avatar}`]:{marginLeft:4},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses$1.icon}`]:{marginLeft:4},[`& .${chipClasses$1.iconSmall}`]:{marginLeft:2},[`& .${chipClasses$1.deleteIcon}`]:{marginRight:5},[`& .${chipClasses$1.deleteIconSmall}`]:{marginRight:3}},o.variant==="outlined"&&o.color!=="default"&&{color:(a.vars||a).palette[o.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7)}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:alpha(a.palette[o.color].main,a.palette.action.focusOpacity)},[`& .${chipClasses$1.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{size:tt}=_e;return[o.label,o[`label${capitalize(tt)}`]]}})(({ownerState:a})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.variant==="outlined"&&{paddingLeft:11,paddingRight:11},a.size==="small"&&{paddingLeft:8,paddingRight:8},a.size==="small"&&a.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(a){return a.key==="Backspace"||a.key==="Delete"}const Chip=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiChip"}),{avatar:ct,className:vt,clickable:nt,color:it="default",component:s,deleteIcon:et,disabled:rt=!1,icon:ot,label:gt,onClick:dt,onDelete:pt,onKeyDown:st,onKeyUp:ht,size:at="medium",variant:ut="filled",tabIndex:ft,skipFocusWhenDisabled:mt=!1}=tt,yt=_objectWithoutPropertiesLoose(tt,_excluded$8),At=reactExports.useRef(null),wt=useForkRef(At,_e),Pt=cn=>{cn.stopPropagation(),pt&&pt(cn)},Rt=cn=>{cn.currentTarget===cn.target&&isDeleteKeyboardEvent(cn)&&cn.preventDefault(),st&&st(cn)},kt=cn=>{cn.currentTarget===cn.target&&(pt&&isDeleteKeyboardEvent(cn)?pt(cn):cn.key==="Escape"&&At.current&&At.current.blur()),ht&&ht(cn)},bt=nt!==!1&&dt?!0:nt,Nt=bt||pt?ButtonBase$1:s||"div",Ft=_extends({},tt,{component:Nt,disabled:rt,size:at,color:it,iconColor:reactExports.isValidElement(ot)&&ot.props.color||it,onDelete:!!pt,clickable:bt,variant:ut}),Ut=useUtilityClasses$8(Ft),Jt=Nt===ButtonBase$1?_extends({component:s||"div",focusVisibleClassName:Ut.focusVisible},pt&&{disableRipple:!0}):{};let hn=null;pt&&(hn=et&&reactExports.isValidElement(et)?reactExports.cloneElement(et,{className:clsx(et.props.className,Ut.deleteIcon),onClick:Pt}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Ut.deleteIcon),onClick:Pt}));let Xt=null;ct&&reactExports.isValidElement(ct)&&(Xt=reactExports.cloneElement(ct,{className:clsx(Ut.avatar,ct.props.className)}));let zt=null;return ot&&reactExports.isValidElement(ot)&&(zt=reactExports.cloneElement(ot,{className:clsx(Ut.icon,ot.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:Nt,className:clsx(Ut.root,vt),disabled:bt&&rt?!0:void 0,onClick:dt,onKeyDown:Rt,onKeyUp:kt,ref:wt,tabIndex:mt&&rt?-1:ft,ownerState:Ft},Jt,yt,{children:[Xt||zt,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Ut.label),ownerState:Ft,children:gt}),hn]}))}),Chip$1=Chip;var A$1=function(){return A$1=Object.assign||function(a){for(var o,_e=1,tt=arguments.length;_e<tt;_e++)for(var ct in o=arguments[_e])Object.prototype.hasOwnProperty.call(o,ct)&&(a[ct]=o[ct]);return a},A$1.apply(this,arguments)};function x(a,o){var _e={};for(var tt in a)Object.prototype.hasOwnProperty.call(a,tt)&&o.indexOf(tt)<0&&(_e[tt]=a[tt]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var ct=0;for(tt=Object.getOwnPropertySymbols(a);ct<tt.length;ct++)o.indexOf(tt[ct])<0&&Object.prototype.propertyIsEnumerable.call(a,tt[ct])&&(_e[tt[ct]]=a[tt[ct]])}return _e}var S=function(a){var o=a.children,_e=x(a,["children"]),tt=reactExports.useMemo(function(){var nt,it=React$1.Children.toArray(o);return it.length<=1?nt={xs:12,sx:{height:{xs:"100%"}}}:it.length<=2?nt={xs:12,md:6,sx:{height:{xs:100/it.length+"%",md:100/Math.ceil(it.length/2)+"%"}}}:it.length<=4?nt={xs:12,sm:6,sx:{height:{xs:100/it.length+"%",sm:100/Math.ceil(it.length/2)+"%"}}}:it.length<=6?nt={xs:6,md:4,sx:{height:{xs:100/Math.ceil(it.length/2)+"%",md:100/Math.ceil(it.length/3)+"%"}}}:it.length<=9?nt={xs:6,sm:4,sx:{height:{xs:100/Math.ceil(it.length/2)+"%",sm:100/Math.ceil(it.length/3)+"%"}}}:it.length<=12?nt={xs:4,md:3,sx:{height:{xs:100/Math.ceil(it.length/3)+"%",md:100/Math.ceil(it.length/4)+"%"}}}:it.length<=24?nt={xs:4,sm:2,sx:{height:{xs:100/Math.ceil(it.length/3)+"%",sm:100/Math.ceil(it.length/6)+"%"}}}:it.length<=42?nt={xs:3,sm:2,sx:{height:{xs:100/Math.ceil(it.length/4)+"%",sm:100/Math.ceil(it.length/6)+"%"}}}:nt={xs:2,lg:1,sx:{height:{xs:100/Math.ceil(it.length/6)+"%",lg:100/Math.ceil(it.length/12)+"%"}}},{arrayChildren:it,responsive:nt}},[o]),ct=tt.arrayChildren,vt=tt.responsive;return React$1.createElement(u,A$1({container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"},_e),React$1.Children.map(ct,function(nt,it){return React$1.createElement(u,A$1({item:!0,key:it,display:"flex",justifyContent:"center",alignItems:"center"},vt),nt)}))},w="default";function C(a){var o=a.id,_e=o===void 0?"media-device-selector":o,tt=a.testid,ct=tt===void 0?"test-media-device-selector":tt,vt=a.devices,nt=a.selectedDevice,it=a.setSelectedDevice,s=x(a,["id","testid","devices","selectedDevice","setSelectedDevice"]),et=reactExports.useMemo(function(){return vt[w]},[vt]),rt=Object.values(vt).map(function(ot){return React$1.createElement(MenuItem$1,{key:ot.getId(),value:ot.getId()},ot.getLabel())});return React$1.createElement(Select$1,A$1({id:_e,"data-testid":ct,value:nt?nt.getId():w,onChange:function(ot){ot.preventDefault(),globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat("MediaDeviceSelect","|onSelectDevice"),ot.target.value),it(vt[ot.target.value])}},s),!et&&React$1.createElement(MenuItem$1,{key:w,value:w},"Default"),rt)}var I$1=reactExports.createContext({stream:void 0,muted:!1,toggleMuted:function(){}}),z="Audio";function F(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(z+"|Rendering");var _e=a.id,tt=_e===void 0?(o=a.stream)===null||o===void 0?void 0:o.getId():_e,ct=a.autoPlay,vt=ct===void 0||ct,nt=a.muted,it=a.stream;a.sinkId;var s=x(a,["id","autoPlay","muted","stream","sinkId"]),et=reactExports.useContext(I$1),rt=et.stream,ot=et.muted,gt=ot!==void 0&&ot,dt=reactExports.useMemo(function(){return it??rt},[rt,it]),pt=reactExports.useMemo(function(){return nt??gt},[gt,nt]),st=reactExports.useRef(null);return reactExports.useEffect(function(){var ht=st==null?void 0:st.current;if(dt&&ht)return globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(z+"|useEffect stream",ht,dt),dt.attachToElement(ht),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(z+"|useEffect stream destroy"),ht.src=""}},[dt]),reactExports.useEffect(function(){var ht=st==null?void 0:st.current;ht&&a.sinkId&&ht.setSinkId&&ht.setSinkId(a.sinkId)},[a.sinkId]),React$1.createElement(Box$1,A$1({display:"flex",alignItems:"center",justifyContent:"center"},s),dt&&React$1.createElement(Icon$1,{fontSize:"large"},dt.isRemote?"headset_mic":"mic"),React$1.createElement("audio",{id:tt,ref:st,autoPlay:vt,muted:pt}))}var W="AudioEnableButton";function j$1(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(W)}),tt=_e.id,ct=tt===void 0?"audio-enable-btn":tt,vt=_e.enabledTooltip,nt=vt===void 0?"Audio enabled, click to disable":vt,it=_e.disabledTooltip,s=it===void 0?"Audio disabled, click to enable":it,et=_e.noAudioTooltip,rt=et===void 0?"No Audio":et,ot=_e.tooltipProps,gt=ot===void 0?{placement:"left",arrow:!0}:ot,dt=x(_e,["id","enabledTooltip","disabledTooltip","noAudioTooltip","tooltipProps"]),pt=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable audio",st=reactExports.useReducer(function(ft){return ft+1},0)[1],ht=reactExports.useContext(I$1).stream;reactExports.useEffect(function(){if(ht){var ft=function(mt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(W+"|onAudioFlowStatusChanged",ht,mt,ht.isAudioEnabled()),st()};return ht.on("audioFlowStatusChanged",ft),ht.on("remoteAudioFlowStatusChanged",ft),function(){ht.removeListener("audioFlowStatusChanged",ft),ht.removeListener("remoteAudioFlowStatusChanged",ft)}}},[ht]);var at=function(){ht!=null&&ht.isAudioEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(W+"|stream.disableAudio",ht==null?void 0:ht.isAudioEnabled()),ht==null||ht.disableAudio(!0).catch(function(ft){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn(W+"|stream.disableAudio failed",ft)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(W+"|stream.enableAudio",ht==null?void 0:ht.isAudioEnabled()),ht==null||ht.enableAudio(!0).catch(function(ft){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn(W+"|stream.enableAudio failed",ft)})),st()},ut=ht&&ht.hasAudio()?ht.isAudioEnabled()?nt:s:rt;return React$1.createElement(Tooltip$1,A$1({title:ut},gt),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":pt},dt,{disabled:_e.disabled||ht&&!ht.hasAudio(),onClick:function(ft){ft.preventDefault(),ft.stopPropagation(),at()},onKeyDown:function(ft){ft.preventDefault(),ft.key!==" "||ht!=null&&ht.isAudioEnabled()||at()},onKeyUp:function(ft){ft.preventDefault(),ft.key===" "&&(ht!=null&&ht.isAudioEnabled())&&at()}}),ht&&ht.hasAudio()&&ht.isAudioEnabled()?React$1.createElement(Icon$1,{fontSize:_e.size},"mic"):React$1.createElement(Icon$1,{fontSize:_e.size},"mic_off"))))}var B="MuteButton";function _$1(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(B,"|Rendering"));var _e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(B)}),tt=_e.id,ct=tt===void 0?"mute-btn":tt,vt=_e.mutedTooltip,nt=vt===void 0?"Muted":vt,it=_e.unmutedTooltip,s=it===void 0?"On":it,et=_e.noAudioTooltip,rt=et===void 0?"No Audio":et,ot=_e.tooltipProps,gt=ot===void 0?{placement:"left",arrow:!0}:ot,dt=x(_e,["id","mutedTooltip","unmutedTooltip","noAudioTooltip","tooltipProps"]),pt=(o=_e["aria-label"])!==null&&o!==void 0?o:"mute",st=reactExports.useContext(I$1),ht=st.stream,at=st.muted,ut=st.toggleMuted,ft=ht&&ht.hasAudio()?at?nt:s:rt,mt=ht&&ht.hasAudio()?at?React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_up"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off");return React$1.createElement(Tooltip$1,A$1({title:ft},gt),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":pt},dt,{disabled:a.disabled||ht&&!ht.hasAudio(),onClick:function(yt){yt.preventDefault(),yt.stopPropagation(),ut()}}),mt)))}var q=function(a){var o=reactExports.useState(a),_e=o[0],tt=o[1],ct=reactExports.useCallback(function(){tt(function(vt){return!vt})},[]);return reactExports.useEffect(function(){tt(a)},[a]),reactExports.useMemo(function(){return{value:_e,setValue:tt,toggle:ct}},[_e,ct])},N$1={border:1,borderColor:"primary.main"},G="Stream";function K(a){var o=a.id,_e=a.children,tt=a.controls,ct=a.detectSpeaking,vt=ct!==void 0&&ct,nt=a.muted,it=nt!==void 0&&nt,s=a.name,et=a.nameColor,rt=et===void 0?void 0:et,ot=a.stream,gt=a.sx,dt=x(a,["id","children","controls","detectSpeaking","muted","name","nameColor","stream","sx"]);globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(G+"|Rendering");var pt=q(it),st=pt.value,ht=pt.toggle,at=reactExports.useState(!1),ut=at[0],ft=at[1],mt=reactExports.useRef(null),yt=reactExports.useRef(null),At=reactExports.useState({height:0,width:0}),wt=At[0],Pt=At[1],Rt=reactExports.useState({height:0,width:0}),kt=Rt[0],bt=Rt[1];reactExports.useEffect(function(){if(ot&&vt){var Ft=ot,Ut=function(Jt){ft(Jt.isSpeaking)};return Ft.on("audioAmplitude",Ut),function(){Ft.removeListener("audioAmplitude",Ut)}}},[ot,vt]),reactExports.useEffect(function(){var Ft=mt.current;if(Ft){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(G+"|setSize",Ft.clientHeight,Ft.clientWidth),Pt({height:Ft.clientHeight,width:Ft.clientWidth});var Ut=new ResizeObserver(function(){Pt({height:Ft.clientHeight,width:Ft.clientWidth})});return Ut.observe(Ft),function(){Ut.disconnect()}}},[mt]),reactExports.useEffect(function(){var Ft=yt.current;if(Ft){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(G+"|setControlsSize",Ft.clientHeight,Ft.clientWidth),bt({height:Ft.clientHeight,width:Ft.clientWidth});var Ut=new ResizeObserver(function(){bt({height:Ft.clientHeight,width:Ft.clientWidth})});return Ut.observe(Ft),function(){Ut.disconnect()}}},[yt]);var Nt=reactExports.useMemo(function(){return Math.max(Math.ceil(.01*wt.width),4)},[wt]);return React$1.createElement(I$1.Provider,{value:{stream:ot,muted:st,toggleMuted:ht}},React$1.createElement(Box$1,A$1({id:o,ref:mt,sx:A$1(A$1(A$1({minHeight:kt.height+2*Nt+(s?36:0),minWidth:tt?Math.max(2*kt.width,40)+Nt:0},gt),{position:"relative"}),ut&&N$1),display:"flex",justifyContent:"center",alignItems:"center"},dt),_e,s&&React$1.createElement(Chip$1,{sx:{position:"absolute",top:Nt,left:"50%",transform:"translate(-50%)",opacity:.9},label:s,color:rt}),React$1.createElement(Stack$1,{ref:yt,sx:{position:"absolute",float:"right",bottom:Nt,right:Nt,opacity:.9}},tt)))}var Q="Video";function X(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(Q)}),tt=_e.id,ct=tt===void 0?(o=_e.stream)===null||o===void 0?void 0:o.getId():tt,vt=_e.sx,nt=_e.style,it=_e.autoPlay,s=it===void 0||it,et=_e.muted,rt=_e.pointer,ot=_e.pointerColor,gt=_e.progressColor,dt=_e.stream,pt=_e.sinkId,st=_e.videoMutedTooltip,ht=st===void 0?"Video muted":st,at=x(_e,["id","sx","style","autoPlay","muted","pointer","pointerColor","progressColor","stream","sinkId","videoMutedTooltip"]),ut=reactExports.useContext(I$1),ft=ut.stream,mt=ut.muted,yt=mt!==void 0&&mt,At=reactExports.useMemo(function(){return dt??ft},[ft,dt]),wt=reactExports.useMemo(function(){return et??yt},[yt,et]),Pt=reactExports.useRef(null),Rt=reactExports.useState(!1),kt=Rt[0],bt=Rt[1];return reactExports.useEffect(function(){var Nt=Pt==null?void 0:Pt.current;if(At&&Nt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Q+"|useEffect stream",Nt,At),At.attachToElement(Nt);var Ft=function(Ut){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Q+"|onVideoFlowStatusChanged",At,Ut),bt(Ut.muted)};return At.on("videoFlowStatusChanged",Ft),At.on("remoteVideoFlowStatusChanged",Ft),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Q+"|useEffect stream destroy"),Nt.src="",At.removeListener("audioFlowStatusChanged",Ft),At.removeListener("remoteAudioFlowStatusChanged",Ft)}}},[At]),reactExports.useEffect(function(){var Nt=Pt==null?void 0:Pt.current;Nt&&pt&&Nt.setSinkId&&Nt.setSinkId(pt)},[pt]),React$1.createElement(Box$1,A$1({sx:A$1(A$1({},vt),{position:"relative"})},at),React$1.createElement("video",{id:ct,ref:Pt,style:nt,autoPlay:s,muted:wt}),rt&&React$1.createElement(Icon$1,{sx:{position:"absolute",top:rt.top,left:rt.left,transform:"translate(-50%,-50%)",opacity:.9},color:ot},"adjust"),kt&&React$1.createElement(Tooltip$1,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",opacity:.9},title:ht},React$1.createElement(M,{color:gt})))}var Y="VideoEnableButton";function Z(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(Y)}),tt=_e.id,ct=tt===void 0?"video-enable-btn":tt,vt=_e.enabledTooltip,nt=vt===void 0?"Video enabled, click to disable":vt,it=_e.disabledTooltip,s=it===void 0?"Video disabled, click to enable":it,et=_e.noVideoTooltip,rt=et===void 0?"No Video":et,ot=_e.tooltipProps,gt=ot===void 0?{placement:"left",arrow:!0}:ot,dt=x(_e,["id","enabledTooltip","disabledTooltip","noVideoTooltip","tooltipProps"]),pt=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable video",st=reactExports.useReducer(function(ut){return ut+1},0)[1],ht=reactExports.useContext(I$1).stream;reactExports.useEffect(function(){if(ht){var ut=function(ft){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Y+"|onVideoFlowStatusChanged",ht,ft,ht.isVideoEnabled()),st()};return ht.on("videoFlowStatusChanged",ut),ht.on("remoteVideoFlowStatusChanged",ut),function(){ht.removeListener("videoFlowStatusChanged",ut),ht.removeListener("remoteVideoFlowStatusChanged",ut)}}},[ht]);var at=ht&&ht.hasVideo()?ht.isVideoEnabled()?nt:s:rt;return React$1.createElement(Tooltip$1,A$1({title:at},gt),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":pt},dt,{disabled:_e.disabled||ht&&!ht.hasVideo(),onClick:function(ut){ut.preventDefault(),ut.stopPropagation(),ht!=null&&ht.isVideoEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Y+"|stream.disableVideo",ht==null?void 0:ht.isVideoEnabled()),ht==null||ht.disableVideo(!0).catch(function(ft){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn(Y+"|stream.disableVideo failed",ft)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug(Y+"|stream.enableVideo",ht==null?void 0:ht.isVideoEnabled()),ht==null||ht.enableVideo(!0).catch(function(ft){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn(Y+"|stream.enableVideo failed",ft)})),st()}}),ht&&ht.hasVideo()&&ht.isVideoEnabled()?React$1.createElement(Icon$1,{fontSize:_e.size},"videocam"):React$1.createElement(Icon$1,{fontSize:_e.size},"videocam_off"))))}var $={components:{ApiRtcMuiReactLibAudioEnableButton:{defaultProps:{"aria-label":"activer ou désactiver l'audio",enabledTooltip:"Audio activé, cliquer pour désactiver",disabledTooltip:"Audio désactivé, cliquer pour activer",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibMuteButton:{defaultProps:{"aria-label":"activer ou désactiver le son",mutedTooltip:"Son désactivé, cliquer pour activer",unmutedTooltip:"Son activé, cliquer pour désactiver",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibPublishOptions:{defaultProps:{labelText:"Options de publication",audioAndVideoText:"Audio et Vidéo",audioOnlyText:"Audio seul",videoOnlyText:"Vidéo seule"}},ApiRtcMuiReactLibSnapshotButton:{defaultProps:{"aria-label":"photo",snapshotTooltip:"Prendre une photo"}},ApiRtcMuiReactLibTorchButton:{defaultProps:{"aria-label":"torche",torchOffTooltip:"Eteindre la torche",torchOnTooltip:"Allumer la torche"}},ApiRtcMuiReactLibVideo:{defaultProps:{videoMutedTooltip:"Vidéo coupée"}},ApiRtcMuiReactLibVideoEnableButton:{defaultProps:{"aria-label":"activer ou désactiver la vidéo",enabledTooltip:"Vidéo activée, cliquer pour désactiver",disabledTooltip:"Vidéo désactivée, cliquer pour activer",noVideoTooltip:"Pas de Vidéo"}}}},ee={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function te(a){switch(a){case"debug":globalThis.apirtcMuiReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcMuiReactLibLogLevel=ee;break;case"warn":globalThis.apirtcMuiReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcMuiReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcMuiReactLibLogLevel}globalThis.apirtcMuiReactLibLogLevel=ee,globalThis.setApirtcMuiReactLibLogLevel=te;const c="useCameraStream";function b(a,o={},_e){const[tt,ct]=reactExports.useState(),[vt,nt]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${c}|useEffect`,a,o),a){const it=a.getUserAgent();nt(!0),it.createStream(o).then(s=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${c}|createStream`,o,s),ct(s)}).catch(s=>{console.error(`${c}|createStream error`,o,s),ct(void 0),_e&&_e(s)}).finally(()=>{nt(!1)})}else ct(void 0)},[a,JSON.stringify(o)]),reactExports.useEffect(()=>{const it=tt;if(it)return()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${c}|release stream`,it),it.release()}},[tt]),{stream:tt,grabbing:vt}}const g="useConversation";function d(a,o,_e,tt=!0,ct){const[vt,nt]=reactExports.useState(),[it,s]=reactExports.useState(!1),[et,rt]=reactExports.useState(!1),ot=reactExports.useCallback((dt={})=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|join`,vt,dt),new Promise((pt,st)=>{vt?vt.isJoined()?st(`${g}|join|conversation already joined`):(rt(!0),vt.join(dt).then(()=>{s(!0),pt()}).catch(ht=>{st(ht)}).finally(()=>{rt(!1)})):st(`${g}|join|conversation not defined`)})),[vt]),gt=reactExports.useCallback(()=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|leave`,vt),new Promise((dt,pt)=>{vt?vt.isJoined()?vt.leave().then(()=>{s(!1),dt()}).catch(st=>{pt(st)}):pt(`${g}|leave|conversation is not joined`):pt(`${g}|leave|conversation not defined`)})),[vt]);return reactExports.useEffect(()=>{if(a&&o){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|getOrCreateConversation`,o,_e,tt);const dt=a.getOrCreateConversation(o,_e);return nt(dt),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,o,_e,tt),dt.isJoined()?dt.leave().then(()=>{}).catch(pt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave()`,pt)}).finally(()=>{dt.destroy()}):dt.destroy(),nt(void 0),s(!1)}}},[a,o,JSON.stringify(_e)]),reactExports.useEffect(()=>{if(vt&&tt){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect`,vt,tt,ct);const dt=vt,pt=tt;return pt&&(rt(!0),dt.join(ct).then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${g}|joined`,dt),s(!0)}).catch(st=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.join() error`,dt,ct,st)}).finally(()=>{rt(!1)})),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,dt,pt),dt.isJoined()&&dt.leave().then(()=>{s(!1)}).catch(st=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave() error`,dt,st)})}}},[vt,tt,JSON.stringify(ct)]),{conversation:vt,joining:et,joined:it,join:ot,leave:gt}}function m(a){return a!=null}const E="useConversationStreams";function T(a,o=[],_e){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|hook render|${a==null?void 0:a.getName()}`,o.map(st=>st==null?void 0:st.options));const tt=reactExports.useRef([]),[ct,vt]=reactExports.useState(new Array),[nt,it]=reactExports.useState(new Array),s=reactExports.useCallback((st,ht)=>new Promise((at,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|publish|${a.getName()}`,st,ht),a.publish(st,ht).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|published|${a.getName()}`,ft),vt(mt=>[...mt,ft]),at(ft)}).catch(ft=>{ut(ft)}))}),[a]),et=reactExports.useCallback((st,ht)=>new Promise((at,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|replacePublishedStream|${a.getName()}|${st.getId()} -> ${ht.getId()}`),a.replacePublishedStream(st,ht).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|stream replaced|${a.getName()}`,st,ft),vt(mt=>{const yt=mt.indexOf(st);return yt>=0&&mt.splice(yt,1,ft),Array.from(mt)}),at(ft)}).catch(ft=>{ut(ft)}))}),[a]),rt=reactExports.useCallback(st=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|unpublish|${a.getName()}`,st.getId(),st),a.unpublish(st),vt(ht=>ht.filter(at=>at!==st)))},[a]),ot=reactExports.useCallback(()=>{const st=Math.max(tt.current.length,o.length);globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|doHandlePublication`,o,JSON.stringify(tt.current.map(mt=>mt==null?void 0:mt.stream.getId())),JSON.stringify(o.map(mt=>mt==null?void 0:mt.stream.getId())),st);const ht=[...tt.current],at=o.map(mt=>mt&&mt.options?{stream:mt.stream,options:Object.assign({},mt.options)}:mt);tt.current.length=0,tt.current.push(...at);const ut=new Set(o.filter(m).map(mt=>mt.stream)),ft=(mt,yt)=>{s(yt.stream,yt.options).catch(At=>{tt.current.splice(mt,1,null),_e?_e(At):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${E}|publish|error`,At)})};for(let mt=0;mt<st;mt++){const yt=ht[mt],At=o[mt];if(yt&&At){const wt=()=>{rt(yt.stream),ft(mt,At)};yt.stream===At.stream?JSON.stringify(yt.options)!==JSON.stringify(At.options)&&wt():ut.has(yt.stream)?a&&!a.isPublishedStream(At.stream)&&ft(mt,At):a&&!a.isPublishedStream(At.stream)?JSON.stringify(yt.options)===JSON.stringify(At.options)?et(yt.stream,At.stream).catch(Pt=>{tt.current.splice(mt,1,null),_e?_e(Pt):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${E}|replacePublishedStream|error`,Pt)}):wt():rt(yt.stream)}else yt&&!At?ut.has(yt.stream)||rt(yt.stream):!yt&&At&&a&&!a.isPublishedStream(At.stream)&&ft(mt,At)}},[a,JSON.stringify(o.map(st=>(st==null?void 0:st.stream.getId())+"-"+JSON.stringify(st==null?void 0:st.options))),s,rt,et]),gt=st=>{it(ht=>(ht.forEach(at=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|unsubscribeToStream|${st.getName()}`,at),st.unsubscribeToStream(at.getId())}),new Array))},dt=st=>{(ht=>{vt(at=>(at.forEach(ut=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|unpublish|${ht.getName()}`,ut),ht.unpublish(ut)}),new Array)),tt.current.length=0})(st),gt(st)},pt=reactExports.useCallback(()=>{a&&gt(a)},[a]);return reactExports.useEffect(()=>{if(a){const st=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|on_streamAdded|${a.getName()}`,ut),it(ft=>[...ft,ut])},ht=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|on_streamRemoved|${a.getName()}`,ut),it(ft=>ft.filter(mt=>mt!==ut))},at=ut=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|on_streamListChanged|${a.getName()}`,ut);const ft=String(ut.streamId);ut.isRemote===!0&&(ut.listEventType==="added"?a.subscribeToStream(ft):ut.listEventType==="removed"&&a.unsubscribeToStream(ft))};return a.on("streamAdded",st),a.on("streamRemoved",ht),a.on("streamListChanged",at),()=>{a.removeListener("streamListChanged",at),a.removeListener("streamRemoved",ht),a.removeListener("streamAdded",st),dt(a)}}},[a]),reactExports.useEffect(()=>{if(a){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${E}|useEffect doHandlePublication|${a.getName()}`);const st=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|on_joined|${a.getName()}`,o),ot()},ht=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${E}|on_left|${a.getName()}`),dt(a)};return a.on("joined",st),a.on("left",ht),a.isJoined()&&ot(),()=>{a.removeListener("joined",st),a.removeListener("left",ht)}}},[ot]),{publishedStreams:ct,subscribedStreams:nt,publish:s,unpublish:rt,replacePublishedStream:et,unsubscribeAll:pt}}const y="useSession";function I(a,o,_e){const[tt,ct]=reactExports.useState(),[vt,nt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${y}|useEffect credentials, options`,a,o),a)return it(a,o).catch(s=>{console.error(`${y}|connection failed`,s),ct(void 0),_e?_e(s):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${y}|connect|error`,s)}),()=>{ct(void 0),nt(!1)}},[JSON.stringify(a),JSON.stringify(o)]),reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${y}|useEffect session`,tt),tt){const s=tt;return()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${y}|useEffect session cleanup`,s),s.disconnect().then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${y}|disconnected`,s)}).catch(et=>{console.error(`${y}|disconnect`,et)})}}},[tt]);const it=(s,et)=>new Promise((rt,ot)=>{const gt=et||{cloudUrl:"https://cloud.apirtc.com"};let dt;if(typeof(pt=s)=="object"&&"username"in pt)gt.password=s.password,dt=new apiRTC_minExports.UserAgent({uri:"apirtc:"+s.username});else if(function(st){return typeof st=="object"&&"apiKey"in st}(s))dt=new apiRTC_minExports.UserAgent({uri:`apiKey:${s.apiKey}`});else{if(!function(st){return typeof st=="object"&&"token"in st}(s))return void ot("credentials not recognized");dt=new apiRTC_minExports.UserAgent({uri:`token:${s.token}`})}var pt;nt(!0),dt.register(gt).then(st=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${y}|connected`,st),ct(st),rt()}).catch(st=>{ot(st)}).finally(()=>{nt(!1)})});return{session:tt,connecting:vt,connect:it,disconnect:()=>{ct(void 0)}}}const D="useUserMediaDevices",N=a=>{try{const o=localStorage.getItem(a),_e=o?JSON.parse(o):null;return _e?new apiRTC_minExports.MediaDevice(_e.id,_e.type,_e.label):void 0}catch(o){return void console.warn(`${D}|getMediaDeviceFromLocalStorage`,o)}},J=(a,o)=>{try{localStorage.setItem(a,o)}catch{}};function O(a,o){const _e=o+".audioIn",tt=o+".audioOut",ct=o+".videoIn",[vt,nt]=reactExports.useState(o?N(_e):void 0),[it,s]=reactExports.useState(o?N(tt):void 0),[et,rt]=reactExports.useState(o?N(ct):void 0),ot=reactExports.useMemo(()=>({audioinput:vt?{[vt.getId()]:vt}:{},audiooutput:it?{[it.getId()]:it}:{},videoinput:et?{[et.getId()]:et}:{}}),[vt,it,et]),[gt,dt]=reactExports.useState(ot);return reactExports.useEffect(()=>{if(a){const pt=a.getUserAgent(),st=()=>{const ht=pt.getUserMediaDevices();if(globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${D}|mediaDeviceChanged`,ht),dt(ht),o){const at=N(_e);at&&nt(ht.audioinput[at.getId()]);const ut=N(tt);ut&&s(ht.audiooutput[ut.getId()]);const ft=N(ct);ft&&rt(ht.videoinput[ft.getId()]),globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${D}|userMediaDevices, audioIn, audioOut, videoIn`,ht,at==null?void 0:at.getId(),ut==null?void 0:ut.getId(),ft==null?void 0:ft.getId())}};return pt.on("mediaDeviceChanged",st),()=>{pt.removeListener("mediaDeviceChanged",st),dt(ot)}}},[a]),reactExports.useEffect(()=>{vt&&o&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${D}|Storing audioIn`,vt),J(_e,JSON.stringify({id:vt.getId(),type:vt.getType(),label:vt.getLabel()})))},[vt==null?void 0:vt.getId()]),reactExports.useEffect(()=>{it&&o&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${D}|Storing audioOut`,it),J(tt,JSON.stringify({id:it.getId(),type:it.getType(),label:it.getLabel()})))},[it==null?void 0:it.getId()]),reactExports.useEffect(()=>{et&&o&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${D}|Storing videoIn`,et),J(ct,JSON.stringify({id:et.getId(),type:et.getType(),label:et.getLabel()})))},[et==null?void 0:et.getId()]),{userMediaDevices:gt,selectedAudioIn:vt,setSelectedAudioIn:nt,selectedAudioOut:it,setSelectedAudioOut:s,selectedVideoIn:et,setSelectedVideoIn:rt}}const j={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function A(a){switch(a){case"debug":globalThis.apirtcReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcReactLibLogLevel=j;break;case"warn":globalThis.apirtcReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcReactLibLogLevel}globalThis.apirtcReactLibLogLevel=j,globalThis.setApirtcReactLibLogLevel=A;function getAlertUtilityClass(a){return generateUtilityClass("MuiAlert",a)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),alertClasses$1=alertClasses,SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$7=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$7=a=>{const{variant:o,color:_e,severity:tt,classes:ct}=a,vt={root:["root",`${o}${capitalize(_e||tt)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(vt,getAlertUtilityClass,ct)},AlertRoot=styled$1(Paper$1,{name:"MuiAlert",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color||_e.severity)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?darken:lighten,tt=a.palette.mode==="light"?lighten:darken,ct=o.color||o.severity;return _extends({},a.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},ct&&o.variant==="standard"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),backgroundColor:a.vars?a.vars.palette.Alert[`${ct}StandardBg`]:tt(a.palette[ct].light,.9),[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="outlined"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),border:`1px solid ${(a.vars||a).palette[ct].light}`,[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="filled"&&_extends({fontWeight:a.typography.fontWeightMedium},a.vars?{color:a.vars.palette.Alert[`${ct}FilledColor`],backgroundColor:a.vars.palette.Alert[`${ct}FilledBg`]}:{backgroundColor:a.palette.mode==="dark"?a.palette[ct].dark:a.palette[ct].main,color:a.palette.getContrastText(a.palette[ct].main)}))}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(a,o)=>o.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(a,o)=>o.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(a,o)=>o.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(o,_e){var tt,ct,vt,nt,it,s;const et=useThemeProps({props:o,name:"MuiAlert"}),{action:rt,children:ot,className:gt,closeText:dt="Close",color:pt,components:st={},componentsProps:ht={},icon:at,iconMapping:ut=defaultIconMapping,onClose:ft,role:mt="alert",severity:yt="success",slotProps:At={},slots:wt={},variant:Pt="standard"}=et,Rt=_objectWithoutPropertiesLoose(et,_excluded$7),kt=_extends({},et,{color:pt,severity:yt,variant:Pt}),bt=useUtilityClasses$7(kt),Nt=(tt=(ct=wt.closeButton)!=null?ct:st.CloseButton)!=null?tt:IconButton$1,Ft=(vt=(nt=wt.closeIcon)!=null?nt:st.CloseIcon)!=null?vt:ClearIcon,Ut=(it=At.closeButton)!=null?it:ht.closeButton,Jt=(s=At.closeIcon)!=null?s:ht.closeIcon;return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:mt,elevation:0,ownerState:kt,className:clsx(bt.root,gt),ref:_e},Rt,{children:[at!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:kt,className:bt.icon,children:at||ut[yt]||defaultIconMapping[yt]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:kt,className:bt.message,children:ot}),rt!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:kt,className:bt.action,children:rt}):null,rt==null&&ft?jsxRuntimeExports.jsx(AlertAction,{ownerState:kt,className:bt.action,children:jsxRuntimeExports.jsx(Nt,_extends({size:"small","aria-label":dt,title:dt,color:"inherit",onClick:ft},Ut,{children:jsxRuntimeExports.jsx(Ft,_extends({fontSize:"small"},Jt))}))}):null]}))}),Alert$1=Alert;function getButtonUtilityClass(a){return generateUtilityClass("MuiButton",a)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,ButtonGroupButtonContext=reactExports.createContext(void 0),ButtonGroupButtonContext$1=ButtonGroupButtonContext,_excluded$6=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$6=a=>{const{color:o,disableElevation:_e,fullWidth:tt,size:ct,variant:vt,classes:nt}=a,it={root:["root",vt,`${vt}${capitalize(o)}`,`size${capitalize(ct)}`,`${vt}Size${capitalize(ct)}`,o==="inherit"&&"colorInherit",_e&&"disableElevation",tt&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(ct)}`],endIcon:["endIcon",`iconSize${capitalize(ct)}`]},s=composeClasses(it,getButtonUtilityClass,nt);return _extends({},nt,s)},commonIconStyles=a=>_extends({},a.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},a.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},a.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color)}`],o[`size${capitalize(_e.size)}`],o[`${_e.variant}Size${capitalize(_e.size)}`],_e.color==="inherit"&&o.colorInherit,_e.disableElevation&&o.disableElevation,_e.fullWidth&&o.fullWidth]}})(({theme:a,ownerState:o})=>{var _e,tt;const ct=a.palette.mode==="light"?a.palette.grey[300]:a.palette.grey[800],vt=a.palette.mode==="light"?a.palette.grey.A100:a.palette.grey[700];return _extends({},a.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="text"&&o.color!=="inherit"&&{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="outlined"&&o.color!=="inherit"&&{border:`1px solid ${(a.vars||a).palette[o.color].main}`,backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="contained"&&{backgroundColor:a.vars?a.vars.palette.Button.inheritContainedHoverBg:vt,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},o.variant==="contained"&&o.color!=="inherit"&&{backgroundColor:(a.vars||a).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[o.color].main}}),"&:active":_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:(a.vars||a).palette.action.disabled},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`},o.variant==="contained"&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})},o.variant==="text"&&{padding:"6px 8px"},o.variant==="text"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main},o.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},o.variant==="outlined"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main,border:a.vars?`1px solid rgba(${a.vars.palette[o.color].mainChannel} / 0.5)`:`1px solid ${alpha(a.palette[o.color].main,.5)}`},o.variant==="contained"&&{color:a.vars?a.vars.palette.text.primary:(_e=(tt=a.palette).getContrastText)==null?void 0:_e.call(tt,a.palette.grey[300]),backgroundColor:a.vars?a.vars.palette.Button.inheritContainedBg:ct,boxShadow:(a.vars||a).shadows[2]},o.variant==="contained"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].contrastText,backgroundColor:(a.vars||a).palette[o.color].main},o.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},o.size==="small"&&o.variant==="text"&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="text"&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="outlined"&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="outlined"&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="contained"&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="contained"&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})},({ownerState:a})=>a.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.startIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},a.size==="small"&&{marginLeft:-2},commonIconStyles(a))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.endIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},a.size==="small"&&{marginRight:-2},commonIconStyles(a))),Button=reactExports.forwardRef(function(o,_e){const tt=reactExports.useContext(ButtonGroupContext$1),ct=reactExports.useContext(ButtonGroupButtonContext$1),vt=resolveProps(tt,o),nt=useThemeProps({props:vt,name:"MuiButton"}),{children:it,color:s="primary",component:et="button",className:rt,disabled:ot=!1,disableElevation:gt=!1,disableFocusRipple:dt=!1,endIcon:pt,focusVisibleClassName:st,fullWidth:ht=!1,size:at="medium",startIcon:ut,type:ft,variant:mt="text"}=nt,yt=_objectWithoutPropertiesLoose(nt,_excluded$6),At=_extends({},nt,{color:s,component:et,disabled:ot,disableElevation:gt,disableFocusRipple:dt,fullWidth:ht,size:at,type:ft,variant:mt}),wt=useUtilityClasses$6(At),Pt=ut&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:wt.startIcon,ownerState:At,children:ut}),Rt=pt&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:wt.endIcon,ownerState:At,children:pt}),kt=ct||"";return jsxRuntimeExports.jsxs(ButtonRoot,_extends({ownerState:At,className:clsx(tt.className,wt.root,rt,kt),component:et,disabled:ot,focusRipple:!dt,focusVisibleClassName:clsx(wt.focusVisible,st),ref:_e,type:ft},yt,{classes:wt,children:[Pt,it,Rt]}))}),Button$1=Button;function getCardUtilityClass(a){return generateUtilityClass("MuiCard",a)}generateUtilityClasses("MuiCard",["root"]);const _excluded$5=["className","raised"],useUtilityClasses$5=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardUtilityClass,o)},CardRoot=styled$1(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCard"}),{className:ct,raised:vt=!1}=tt,nt=_objectWithoutPropertiesLoose(tt,_excluded$5),it=_extends({},tt,{raised:vt}),s=useUtilityClasses$5(it);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(s.root,ct),elevation:vt?8:void 0,ref:_e,ownerState:it},nt))}),Card$1=Card;function getCardContentUtilityClass(a){return generateUtilityClass("MuiCardContent",a)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$4=["className","component"],useUtilityClasses$4=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardContentUtilityClass,o)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCardContent"}),{className:ct,component:vt="div"}=tt,nt=_objectWithoutPropertiesLoose(tt,_excluded$4),it=_extends({},tt,{component:vt}),s=useUtilityClasses$4(it);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:vt,className:clsx(s.root,ct),ownerState:it,ref:_e},nt))}),CardContent$1=CardContent,Container=createContainer({createStyledComponent:styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemeProps:a=>useThemeProps({props:a,name:"MuiContainer"})}),Container$1=Container;function getSkeletonUtilityClass(a){return generateUtilityClass("MuiSkeleton",a)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const _excluded$3=["animation","className","component","height","style","variant","width"];let _=a=>a,_t,_t2,_t3,_t4;const useUtilityClasses$3=a=>{const{classes:o,variant:_e,animation:tt,hasChildren:ct,width:vt,height:nt}=a;return composeClasses({root:["root",_e,tt,ct&&"withChildren",ct&&!vt&&"fitContent",ct&&!nt&&"heightAuto"]},getSkeletonUtilityClass,o)},pulseKeyframe=keyframes(_t||(_t=_`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),waveKeyframe=keyframes(_t2||(_t2=_`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),SkeletonRoot=styled$1("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],_e.animation!==!1&&o[_e.animation],_e.hasChildren&&o.withChildren,_e.hasChildren&&!_e.width&&o.fitContent,_e.hasChildren&&!_e.height&&o.heightAuto]}})(({theme:a,ownerState:o})=>{const _e=getUnit(a.shape.borderRadius)||"px",tt=toUnitless(a.shape.borderRadius);return _extends({display:"block",backgroundColor:a.vars?a.vars.palette.Skeleton.bg:alpha(a.palette.text.primary,a.palette.mode==="light"?.11:.13),height:"1.2em"},o.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${tt}${_e}/${Math.round(tt/.6*10)/10}${_e}`,"&:empty:before":{content:'"\\00a0"'}},o.variant==="circular"&&{borderRadius:"50%"},o.variant==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius},o.hasChildren&&{"& > *":{visibility:"hidden"}},o.hasChildren&&!o.width&&{maxWidth:"fit-content"},o.hasChildren&&!o.height&&{height:"auto"})},({ownerState:a})=>a.animation==="pulse"&&css(_t3||(_t3=_`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),pulseKeyframe),({ownerState:a,theme:o})=>a.animation==="wave"&&css(_t4||(_t4=_`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),waveKeyframe,(o.vars||o).palette.action.hover)),Skeleton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSkeleton"}),{animation:ct="pulse",className:vt,component:nt="span",height:it,style:s,variant:et="text",width:rt}=tt,ot=_objectWithoutPropertiesLoose(tt,_excluded$3),gt=_extends({},tt,{animation:ct,component:nt,variant:et,hasChildren:!!ot.children}),dt=useUtilityClasses$3(gt);return jsxRuntimeExports.jsx(SkeletonRoot,_extends({as:nt,ref:_e,className:clsx(dt.root,vt),ownerState:gt},ot,{style:_extends({width:rt,height:it},s)}))}),Skeleton$1=Skeleton,StepperContext=reactExports.createContext({}),StepperContext$1=StepperContext,StepContext=reactExports.createContext({}),StepContext$1=StepContext;function getStepUtilityClass(a){return generateUtilityClass("MuiStep",a)}generateUtilityClasses("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const _excluded$2=["active","children","className","component","completed","disabled","expanded","index","last"],useUtilityClasses$2=a=>{const{classes:o,orientation:_e,alternativeLabel:tt,completed:ct}=a;return composeClasses({root:["root",_e,tt&&"alternativeLabel",ct&&"completed"]},getStepUtilityClass,o)},StepRoot=styled$1("div",{name:"MuiStep",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.orientation],_e.alternativeLabel&&o.alternativeLabel,_e.completed&&o.completed]}})(({ownerState:a})=>_extends({},a.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},a.alternativeLabel&&{flex:1,position:"relative"})),Step=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiStep"}),{active:ct,children:vt,className:nt,component:it="div",completed:s,disabled:et,expanded:rt=!1,index:ot,last:gt}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$2),{activeStep:pt,connector:st,alternativeLabel:ht,orientation:at,nonLinear:ut}=reactExports.useContext(StepperContext$1);let[ft=!1,mt=!1,yt=!1]=[ct,s,et];pt===ot?ft=ct!==void 0?ct:!0:!ut&&pt>ot?mt=s!==void 0?s:!0:!ut&&pt<ot&&(yt=et!==void 0?et:!0);const At=reactExports.useMemo(()=>({index:ot,last:gt,expanded:rt,icon:ot+1,active:ft,completed:mt,disabled:yt}),[ot,gt,rt,ft,mt,yt]),wt=_extends({},tt,{active:ft,orientation:at,alternativeLabel:ht,completed:mt,disabled:yt,expanded:rt,component:it}),Pt=useUtilityClasses$2(wt),Rt=jsxRuntimeExports.jsxs(StepRoot,_extends({as:it,className:clsx(Pt.root,nt),ref:_e,ownerState:wt},dt,{children:[st&&ht&&ot!==0?st:null,vt]}));return jsxRuntimeExports.jsx(StepContext$1.Provider,{value:At,children:st&&!ht&&ot!==0?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[st,Rt]}):Rt})}),Step$1=Step;var build_umd={exports:{}};(function(a,o){(function(tt,ct){a.exports=ct()})(commonjsGlobal,function(){return function(){var _e={"./packages/@logrocket/arson/src/index.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.encode=wt,it.decode=kt;var rt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ot=-1,gt=-2,dt=-3,pt=-4,st=-5,ht=Object.create(null),at=function(Ft,Ut){function Jt(hn){if(typeof Ut[hn]!="function")throw new Error("second argument to ARSON.registerType("+JSON.stringify(Ft)+", ...) must be an object with a "+hn+" method")}Jt("deconstruct"),Jt("reconstruct"),ht[Ft]=Ut},ut=Object.prototype.toString,ft="[object Date]",mt="[object RegExp]",yt="[object Set]",At="[object Map]";typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&at("Buffer",{deconstruct:function(Ft){return Buffer.isBuffer(Ft)&&[Ft.toString("base64"),"base64"]},reconstruct:function(Ft){return Ft&&Buffer.from(Ft[0],Ft[1])}}),at("Date",{deconstruct:function(Ft){return ut.call(Ft)===ft&&[Ft.toJSON()]},reconstruct:function(Ft){return Ft&&new Date(Ft[0])}}),at("RegExp",{deconstruct:function(Ft){if(ut.call(Ft)===mt){var Ut=[Ft.source],Jt="";return Ft.ignoreCase&&(Jt+="i"),Ft.multiline&&(Jt+="m"),Ft.global&&(Jt+="g"),Jt&&Ut.push(Jt),Ut}},reconstruct:function(Ft){return Ft&&new RegExp(Ft[0],Ft[1])}}),typeof Set=="function"&&typeof Array.from=="function"&&at("Set",{deconstruct:function(Ft){if(ut.call(Ft)===yt)return Array.from(Ft)},reconstruct:function(Ft){if(Ft)Ft.forEach(this.add,this);else return new Set}}),typeof Map=="function"&&typeof Array.from=="function"&&at("Map",{deconstruct:function(Ft){if(ut.call(Ft)===At)return Array.from(Ft)},reconstruct:function(Ft){if(Ft)Ft.forEach(function(Ut){this.set(Ut[0],Ut[1])},this);else return new Map}});function wt(Nt){return JSON.stringify(Pt(Nt))}function Pt(Nt){var Ft=[],Ut=typeof Map=="function"&&new Map;function Jt(vn){switch((0,rt.default)(vn)){case"undefined":return ot;case"number":if(isNaN(vn))return dt;if(!isFinite(vn))return vn<0?st:pt}var Sn;return Ut?(Sn=Ut.get(vn),typeof Sn>"u"&&(Sn=Ft.push(vn)-1,Ut.set(vn,Sn))):(Sn=Ft.indexOf(vn),Sn<0&&(Sn=Ft.push(vn)-1)),Sn}function hn(vn){var Sn=vn;if(vn&&(0,rt.default)(vn)==="object"){var fn=Object.keys(vn);if(Rt(vn))Sn={};else if(Array.isArray(vn)){Sn=Array(vn.length);var mn=vn.length;if(mn>fn.length)for(var bn=0;bn<mn;++bn)Sn[bn]=gt}else{for(var un in ht){var Tn=ht[un].deconstruct(vn);if(Tn){for(var bn=0;bn<Tn.length;++bn)Tn[bn]=Jt(Tn[bn]);return Tn.unshift(un),Tn}}return{}.toString.call(vn)}fn.forEach(function(kn){Sn[kn]=Jt(vn[kn])})}return Sn}var Xt=Jt(Nt);if(Xt<0)return Xt;for(var zt=[],cn=0;cn<Ft.length;++cn)zt[cn]=hn(Ft[cn]);return zt}function Rt(Nt){var Ft=Nt&&(0,rt.default)(Nt)==="object";if(Ft){var Ut=Object.getPrototypeOf?Object.getPrototypeOf(Nt):Nt.__proto__;return Ut===Object.prototype}return!1}function kt(Nt){return bt(JSON.parse(Nt))}function bt(Nt){if(typeof Nt=="number"&&Nt<0)return Jt(Nt);var Ft=new Array(Nt.length);function Ut(zt){return zt in Ft?Ft[zt]:Ft[zt]=Jt(zt)}function Jt(zt){if(zt<0){if(zt===ot||zt===gt)return;if(zt===dt)return NaN;if(zt===pt)return 1/0;if(zt===st)return-1/0;throw new Error("invalid ARSON index: "+zt)}var cn=Nt[zt];if(cn&&(0,rt.default)(cn)==="object"){if(Array.isArray(cn)){var vn=cn[0];if(typeof vn=="string"&&vn in ht){var Sn=ht[vn].reconstruct,fn=Sn();return fn&&hn.push({reconstruct:Sn,empty:fn,argIndexes:cn.slice(1)}),Nt[zt]=fn||Sn(cn.slice(1).map(Ut))}}Xt.push(cn)}return cn}var hn=[],Xt=[];return Nt.forEach(function(zt,cn){Ut(cn)}),hn.forEach(function(zt){zt.args=zt.argIndexes.map(Ut)}),Xt.forEach(function(zt){Object.keys(zt).forEach(function(cn){var vn=zt[cn];if(typeof vn=="number")if(vn<0){if(vn===gt){delete zt[cn];return}zt[cn]=Ut(vn)}else zt[cn]=Nt[vn]})}),hn.forEach(function(zt){zt.reconstruct.call(zt.empty,zt.args)}),Nt[0]}},"./packages/@logrocket/console/src/index.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var rt=et(s("./packages/@logrocket/console/src/registerConsole.js")),ot=rt.default;it.default=ot},"./packages/@logrocket/console/src/registerConsole.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var rt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ot=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),gt=s("./packages/@logrocket/exceptions/src/index.js");function dt(pt){var st=[],ht=["log","warn","info","error","debug"];return ht.forEach(function(at){st.push((0,ot.default)(console,at,function(){for(var ut=arguments.length,ft=new Array(ut),mt=0;mt<ut;mt++)ft[mt]=arguments[mt];pt.addEvent("lr.core.LogEvent",function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},At=yt.isEnabled;return(0,rt.default)(At)==="object"&&At[at]===!1||At===!1?null:(at==="error"&&yt.shouldAggregateConsoleErrors&&gt.Capture.captureMessage(pt,ft[0],ft,{},!0),{logLevel:at.toUpperCase(),args:ft})})}))}),function(){st.forEach(function(at){return at()})}}},"./packages/@logrocket/exceptions/src/Capture.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.captureMessage=dt,it.captureException=pt;var rt=s("./packages/@logrocket/utils/src/index.ts"),ot=et(s("./packages/@logrocket/utils/src/TraceKit.js")),gt=et(s("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function dt(st,ht,at){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ft=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,mt={exceptionType:ft?"CONSOLE":"MESSAGE",message:ht,messageArgs:at,browserHref:window.location?window.location.href:""};(0,rt.scrubException)(mt,ut),st.addEvent("lr.core.Exception",function(){return mt})}function pt(st,ht){var at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ft=ut||ot.default.computeStackTrace(ht),mt={exceptionType:"WINDOW",errorType:ft.name,message:ft.message,browserHref:window.location?window.location.href:""};(0,rt.scrubException)(mt,at);var yt={_stackTrace:(0,gt.default)(ft)};st.addEvent("lr.core.Exception",function(){return mt},yt)}},"./packages/@logrocket/exceptions/src/index.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),rt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),Object.defineProperty(it,"registerExceptions",{enumerable:!0,get:function(){return ot.default}}),it.Capture=void 0;var ot=et(s("./packages/@logrocket/exceptions/src/registerExceptions.js")),gt=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));it.Capture=gt;function dt(st){if(typeof WeakMap!="function")return null;var ht=new WeakMap,at=new WeakMap;return(dt=function(ft){return ft?at:ht})(st)}function pt(st,ht){if(!ht&&st&&st.__esModule)return st;if(st===null||rt(st)!=="object"&&typeof st!="function")return{default:st};var at=dt(ht);if(at&&at.has(st))return at.get(st);var ut={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in st)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(st,mt)){var yt=ft?Object.getOwnPropertyDescriptor(st,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(ut,mt,yt):ut[mt]=st[mt]}return ut.default=st,at&&at.set(st,ut),ut}},"./packages/@logrocket/exceptions/src/raven/raven.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),ot=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),gt=et(s("./packages/@logrocket/utils/src/TraceKit.js")),dt=Object.prototype;function pt(mt){return mt===void 0}function st(mt){return typeof mt=="function"}function ht(mt,yt){return dt.hasOwnProperty.call(mt,yt)}function at(mt,yt,At,wt){var Pt=mt[yt];mt[yt]=At(Pt),wt&&wt.push([mt,yt,Pt])}var ut=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{};ut.document;var ft=function(){function mt(yt){var At=yt.captureException;(0,rt.default)(this,mt),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=At,gt.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,ot.default)(mt,[{key:"uninstall",value:function(){gt.default.report.unsubscribe(this._errorHandler);for(var At;this._wrappedBuiltIns.length;){At=this._wrappedBuiltIns.shift();var wt=At[0],Pt=At[1],Rt=At[2];wt[Pt]=Rt}}},{key:"_errorHandler",value:function(At){this._ignoreOnError||this.captureException(At)}},{key:"_ignoreNextOnError",value:function(){var At=this;this._ignoreOnError+=1,setTimeout(function(){At._ignoreOnError-=1})}},{key:"context",value:function(At,wt,Pt){return st(At)&&(Pt=wt||[],wt=At,At=void 0),this.wrap(At,wt).apply(this,Pt)}},{key:"wrap",value:function(At,wt,Pt){var Rt=this;if(pt(wt)&&!st(At))return At;if(st(At)&&(wt=At,At=void 0),!st(wt))return wt;try{if(wt.__lr__)return wt;if(wt.__lr_wrapper__)return wt.__lr_wrapper__;if(!Object.isExtensible(wt))return wt}catch{return wt}function kt(){var Nt=[],Ft=arguments.length,Ut=!At||At&&At.deep!==!1;for(Pt&&st(Pt)&&Pt.apply(this,arguments);Ft--;)Nt[Ft]=Ut?Rt.wrap(At,arguments[Ft]):arguments[Ft];try{return wt.apply(this,Nt)}catch(Jt){throw Rt._ignoreNextOnError(),Rt.captureException(gt.default.computeStackTrace(Jt),At),Jt}}for(var bt in wt)ht(wt,bt)&&(kt[bt]=wt[bt]);return kt.prototype=wt.prototype,wt.__lr_wrapper__=kt,kt.__lr__=!0,kt.__inner__=wt,kt}},{key:"_instrumentTryCatch",value:function(){var At=this,wt=At._wrappedBuiltIns;function Pt(Ft){return function(Ut,Jt){for(var hn=new Array(arguments.length),Xt=0;Xt<hn.length;++Xt)hn[Xt]=arguments[Xt];var zt=hn[0];return st(zt)&&(hn[0]=At.wrap(zt)),Ft.apply?Ft.apply(this,hn):Ft(hn[0],hn[1])}}function Rt(Ft){var Ut=ut[Ft]&&ut[Ft].prototype;Ut&&Ut.hasOwnProperty&&Ut.hasOwnProperty("addEventListener")&&(at(Ut,"addEventListener",function(Jt){return function(hn,Xt,zt,cn){try{Xt&&Xt.handleEvent&&(Xt.handleEvent=At.wrap(Xt.handleEvent))}catch{}var vn;return Jt.call(this,hn,At.wrap(Xt,void 0,vn),zt,cn)}},wt),at(Ut,"removeEventListener",function(Jt){return function(hn,Xt,zt,cn){try{Xt=Xt&&(Xt.__lr_wrapper__?Xt.__lr_wrapper__:Xt)}catch{}return Jt.call(this,hn,Xt,zt,cn)}},wt))}at(ut,"setTimeout",Pt,wt),at(ut,"setInterval",Pt,wt),ut.requestAnimationFrame&&at(ut,"requestAnimationFrame",function(Ft){return function(Ut){return Ft(At.wrap(Ut))}},wt);for(var kt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],bt=0;bt<kt.length;bt++)Rt(kt[bt]);var Nt=ut.jQuery||ut.$;Nt&&Nt.fn&&Nt.fn.ready&&at(Nt.fn,"ready",function(Ft){return function(Ut){return Ft.call(this,At.wrap(Ut))}},wt)}}]),mt}();it.default=ft},"./packages/@logrocket/exceptions/src/registerExceptions.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),rt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=st;var ot=et(s("./packages/@logrocket/exceptions/src/raven/raven.js")),gt=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));function dt(ht){if(typeof WeakMap!="function")return null;var at=new WeakMap,ut=new WeakMap;return(dt=function(mt){return mt?ut:at})(ht)}function pt(ht,at){if(!at&&ht&&ht.__esModule)return ht;if(ht===null||rt(ht)!=="object"&&typeof ht!="function")return{default:ht};var ut=dt(at);if(ut&&ut.has(ht))return ut.get(ht);var ft={},mt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var yt in ht)if(yt!=="default"&&Object.prototype.hasOwnProperty.call(ht,yt)){var At=mt?Object.getOwnPropertyDescriptor(ht,yt):null;At&&(At.get||At.set)?Object.defineProperty(ft,yt,At):ft[yt]=ht[yt]}return ft.default=ht,ut&&ut.set(ht,ft),ft}function st(ht){var at=new ot.default({captureException:function(mt){gt.captureException(ht,null,null,mt)}}),ut=function(mt){ht.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:mt.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",ut),function(){window.removeEventListener("unhandledrejection",ut),at.uninstall()}}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){function rt(ot){return ot===null?void 0:ot}return et.stack?et.stack.map(function(ot){return{lineNumber:rt(ot.line),columnNumber:rt(ot.column),fileName:rt(ot.url),functionName:rt(ot.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=s("./packages/@logrocket/network/src/registerXHR.js"),gt=[];function dt(at,ut){for(var ft=gt.reduce(function(Pt,Rt){return[Rt].concat(Pt)},[]),mt=arguments.length,yt=new Array(mt>2?mt-2:0),At=2;At<mt;At++)yt[At-2]=arguments[At];var wt=Promise.resolve(yt);return ft.forEach(function(Pt){var Rt=Pt.request,kt=Pt.requestError;(Rt||kt)&&(wt=wt.then(function(bt){return Rt.apply(void 0,[ut].concat((0,rt.default)(bt)))},function(bt){return kt.apply(void 0,[ut].concat((0,rt.default)(bt)))}))}),wt=wt.then(function(Pt){(0,ot.setActive)(!1);var Rt,kt;try{Rt=at.apply(void 0,(0,rt.default)(Pt))}catch(bt){kt=bt}if((0,ot.setActive)(!0),kt)throw kt;return Rt}),ft.forEach(function(Pt){var Rt=Pt.response,kt=Pt.responseError;(Rt||kt)&&(wt=wt.then(function(bt){return Rt(ut,bt)},function(bt){return kt&&kt(ut,bt)}))}),wt}function pt(at){if(!(!at.fetch||!at.Promise)){var ut=at.fetch.polyfill;at.fetch=function(ft){var mt=0;return function(){for(var yt=arguments.length,At=new Array(yt),wt=0;wt<yt;wt++)At[wt]=arguments[wt];return dt.apply(void 0,[ft,mt++].concat(At))}}(at.fetch),ut&&(at.fetch.polyfill=ut)}}var st=!1,ht={register:function(ut){return st||(st=!0,pt(window)),gt.push(ut),function(){var ft=gt.indexOf(ut);ft>=0&&gt.splice(ft,1)}},clear:function(){gt=[]}};it.default=ht},"./packages/@logrocket/network/src/index.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ft;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),gt=et(s("./packages/@logrocket/network/src/registerFetch.js")),dt=s("./packages/@logrocket/network/src/registerIonic.ts"),pt=et(s("./packages/@logrocket/network/src/registerNetworkInformation.js")),st=et(s("./packages/@logrocket/network/src/registerXHR.js")),ht=et(s("./packages/@logrocket/utils/src/mapValues.js"));function at(mt,yt){var At=Object.keys(mt);if(Object.getOwnPropertySymbols){var wt=Object.getOwnPropertySymbols(mt);yt&&(wt=wt.filter(function(Pt){return Object.getOwnPropertyDescriptor(mt,Pt).enumerable})),At.push.apply(At,wt)}return At}function ut(mt){for(var yt=1;yt<arguments.length;yt++){var At=arguments[yt]!=null?arguments[yt]:{};yt%2?at(Object(At),!0).forEach(function(wt){(0,rt.default)(mt,wt,At[wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(At)):at(Object(At)).forEach(function(wt){Object.defineProperty(mt,wt,Object.getOwnPropertyDescriptor(At,wt))})}return mt}function ft(mt){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1},At=yt.isReactNative,wt=yt.shouldAugmentNPS,Pt=yt.shouldParseXHRBlob,Rt={},kt=function(cn){var vn=4096e3,Sn=cn;if((0,ot.default)(cn)==="object"&&cn!=null){var fn=Object.getPrototypeOf(cn);(fn===Object.prototype||fn===null)&&(Sn=JSON.stringify(cn))}if(Sn&&Sn.length&&Sn.length>vn&&typeof Sn=="string"){var mn=Sn.substring(0,1e3);return"".concat(mn,` ... LogRocket truncating to first 1000 characters.
      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network`)}return cn},bt=function(cn,vn){var Sn=vn.method;mt.addEvent("lr.network.RequestEvent",function(){var fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mn=fn.isEnabled,bn=mn===void 0?!0:mn,un=fn.requestSanitizer,Tn=un===void 0?function(En){return En}:un;if(!bn)return null;var kn=null;try{kn=Tn(ut(ut({},vn),{},{reqId:cn}))}catch(En){console.error(En)}if(kn){var xn=kn.url;if(typeof document<"u"&&typeof document.createElement=="function"){var An=document.createElement("a");An.href=kn.url,xn=An.href}return{reqId:cn,url:xn,headers:(0,ht.default)(kn.headers,function(En){return"".concat(En)}),body:kt(kn.body),method:Sn,referrer:kn.referrer||void 0,mode:kn.mode||void 0,credentials:kn.credentials||void 0}}return Rt[cn]=!0,null})},Nt=function(cn,vn){var Sn=vn.method,fn=vn.status;mt.addEvent("lr.network.ResponseEvent",function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},bn=mn.isEnabled,un=bn===void 0?!0:bn,Tn=mn.responseSanitizer,kn=Tn===void 0?function(An){return An}:Tn;if(un){if(Rt[cn])return delete Rt[cn],null}else return null;var xn=null;try{xn=kn(ut(ut({},vn),{},{reqId:cn}))}catch(An){console.error(An)}return xn?{reqId:cn,status:xn.status,headers:(0,ht.default)(xn.headers,function(An){return"".concat(An)}),body:kt(xn.body),method:Sn}:{reqId:cn,status:fn,headers:{},body:null,method:Sn}})},Ft=function(cn){return mt.isDisabled||Rt[cn]===!0},Ut=(0,gt.default)({addRequest:bt,addResponse:Nt,isIgnored:Ft}),Jt=(0,st.default)({addRequest:bt,addResponse:Nt,isIgnored:Ft,logger:mt,shouldAugmentNPS:wt,shouldParseXHRBlob:Pt}),hn=(0,dt.registerIonic)({addRequest:bt,addResponse:Nt,isIgnored:Ft}),Xt=At?function(){}:(0,pt.default)(mt);return function(){Xt(),Ut(),Jt(),hn()}}},"./packages/@logrocket/network/src/registerFetch.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ut;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/utils/src/mapValues.js")),gt=et(s("./packages/@logrocket/network/src/fetchIntercept.js"));function dt(ft,mt){var yt=Object.keys(ft);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(ft);mt&&(At=At.filter(function(wt){return Object.getOwnPropertyDescriptor(ft,wt).enumerable})),yt.push.apply(yt,At)}return yt}function pt(ft){for(var mt=1;mt<arguments.length;mt++){var yt=arguments[mt]!=null?arguments[mt]:{};mt%2?dt(Object(yt),!0).forEach(function(At){(0,rt.default)(ft,At,yt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(yt)):dt(Object(yt)).forEach(function(At){Object.defineProperty(ft,At,Object.getOwnPropertyDescriptor(yt,At))})}return ft}function st(ft){if(ft==null||typeof ft.forEach!="function")return ft;var mt={};return ft.forEach(function(yt,At){mt[At]?mt[At]="".concat(mt[At],",").concat(yt):mt[At]="".concat(yt)}),mt}var ht=function(mt){return(0,ot.default)(st(mt),function(yt){return"".concat(yt)})};function at(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:ft.url,headers:ht(ft.headers),method:ft.method&&ft.method.toUpperCase(),referrer:ft.referrer||void 0,mode:ft.mode||void 0,credentials:ft.credentials||void 0}}function ut(ft){var mt=ft.addRequest,yt=ft.addResponse,At=ft.isIgnored,wt="fetch-",Pt={},Rt=gt.default.register({request:function(bt){for(var Nt=arguments.length,Ft=new Array(Nt>1?Nt-1:0),Ut=1;Ut<Nt;Ut++)Ft[Ut-1]=arguments[Ut];var Jt;if(typeof Request<"u"&&Ft[0]instanceof Request){var hn;try{hn=Ft[0].clone().text()}catch(Xt){hn=Promise.resolve("LogRocket fetch error: ".concat(Xt.message))}Jt=hn.then(function(Xt){return pt(pt({},at(Ft[0])),{},{body:Xt})},function(Xt){return pt(pt({},at(Ft[0])),{},{body:"LogRocket fetch error: ".concat(Xt.message)})})}else Jt=Promise.resolve(pt(pt({},at(Ft[1])),{},{url:"".concat(Ft[0]),body:(Ft[1]||{}).body}));return Jt.then(function(Xt){return Pt[bt]=Xt.method,mt("".concat(wt).concat(bt),Xt),Ft})},requestError:function(bt,Nt){return Promise.reject(Nt)},response:function(bt,Nt){var Ft,Ut;if(At("".concat(wt).concat(bt)))return Nt;try{Ft=Nt.clone()}catch(cn){var Jt={url:Nt.url,status:Nt.status,headers:ht(Nt.headers),body:"LogRocket fetch error: ".concat(cn.message),method:Pt[bt]};return delete Pt[bt],yt("".concat(wt).concat(bt),Jt),Nt}try{if(window.TextDecoder&&Ft.body){var hn=Ft.body.getReader(),Xt=new window.TextDecoder("utf-8"),zt="";Ut=hn.read().then(function cn(vn){var Sn=vn.done,fn=vn.value;if(Sn)return zt;var mn=fn?Xt.decode(fn,{stream:!0}):"";return zt+=mn,hn.read().then(cn)})}else Ut=Ft.text()}catch(cn){Ut=Promise.resolve("LogRocket error reading body: ".concat(cn.message))}return Ut.catch(function(cn){if(!(cn.name==="AbortError"&&cn instanceof DOMException))return"LogRocket error reading body: ".concat(cn.message)}).then(function(cn){var vn={url:Nt.url,status:Nt.status,headers:ht(Nt.headers),body:cn,method:Pt[bt]};delete Pt[bt],yt("".concat(wt).concat(bt),vn)}),Nt},responseError:function(bt,Nt){var Ft={url:void 0,status:0,headers:{},body:"".concat(Nt)};return yt("".concat(wt).concat(bt),Ft),Promise.reject(Nt)}});return Rt}},"./packages/@logrocket/network/src/registerIonic.ts":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.mergeHeaders=hn,it.serializeQueryParams=fn,it.appendQueryParamsString=mn,it.processData=Tn,it.registerIonic=An;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),gt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),dt=et(s("./packages/@logrocket/utils/src/protectFunc.js"));function pt(En,Rn){var wn=typeof Symbol<"u"&&En[Symbol.iterator]||En["@@iterator"];if(!wn){if(Array.isArray(En)||(wn=st(En))||Rn&&En&&typeof En.length=="number"){wn&&(En=wn);var Dn=0,Bn=function(){};return{s:Bn,n:function(){return Dn>=En.length?{done:!0}:{done:!1,value:En[Dn++]}},e:function(Gn){throw Gn},f:Bn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zn=!0,Hn=!1,nr;return{s:function(){wn=wn.call(En)},n:function(){var Gn=wn.next();return zn=Gn.done,Gn},e:function(Gn){Hn=!0,nr=Gn},f:function(){try{!zn&&wn.return!=null&&wn.return()}finally{if(Hn)throw nr}}}}function st(En,Rn){if(En){if(typeof En=="string")return ht(En,Rn);var wn=Object.prototype.toString.call(En).slice(8,-1);if(wn==="Object"&&En.constructor&&(wn=En.constructor.name),wn==="Map"||wn==="Set")return Array.from(En);if(wn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(wn))return ht(En,Rn)}}function ht(En,Rn){(Rn==null||Rn>En.length)&&(Rn=En.length);for(var wn=0,Dn=new Array(Rn);wn<Rn;wn++)Dn[wn]=En[wn];return Dn}function at(En,Rn){var wn=Object.keys(En);if(Object.getOwnPropertySymbols){var Dn=Object.getOwnPropertySymbols(En);Rn&&(Dn=Dn.filter(function(Bn){return Object.getOwnPropertyDescriptor(En,Bn).enumerable})),wn.push.apply(wn,Dn)}return wn}function ut(En){for(var Rn=1;Rn<arguments.length;Rn++){var wn=arguments[Rn]!=null?arguments[Rn]:{};Rn%2?at(Object(wn),!0).forEach(function(Dn){(0,rt.default)(En,Dn,wn[Dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(En,Object.getOwnPropertyDescriptors(wn)):at(Object(wn)).forEach(function(Dn){Object.defineProperty(En,Dn,Object.getOwnPropertyDescriptor(wn,Dn))})}return En}var ft=new Set(["get","put","post","patch","head","delete","options","upload","download"]),mt=new Set(["urlencoded","json","utf8"]),yt=new Set(["raw","multipart"]),At="ionic-",wt=new Set(["desktop","mobileweb","pwa"]),Pt=new Set(["FormData"]),Rt=new Set,kt=new Set(["string"]),bt=new Set(["string","array"]),Nt={utf8:kt,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:Rt};function Ft(En,Rn,wn){if(typeof Rn!="string")throw new Error("".concat(wn," must be one of: ").concat((0,gt.default)(En).join(", ")));if(Rn=Rn.trim().toLowerCase(),!En.has(Rn))throw new Error("".concat(wn," must be one of: ").concat((0,gt.default)(En).join(", ")));return Rn}function Ut(En,Rn,wn){if((0,ot.default)(En)!=="object")throw new Error(wn);for(var Dn=0,Bn=Object.keys(En);Dn<Bn.length;Dn++){var zn=Bn[Dn];if(!Rn.has((0,ot.default)(En[zn])))throw new Error(wn)}return En}function Jt(En,Rn){var wn=new URL(En),Dn=wn.host;return Rn.getHeaders(Dn)||null}function hn(En,Rn){return ut(ut({},En),Rn)}function Xt(En,Rn,wn){var Dn=wn.getHeaders("*")||{},Bn=Jt(En,wn)||{};return hn(hn(Dn,Bn),Rn)}function zt(En,Rn){return Rn?encodeURIComponent(En):En}function cn(En,Rn,wn){return En.length?wn?"".concat(encodeURIComponent(En),"[").concat(encodeURIComponent(Rn),"]"):"".concat(En,"[").concat(Rn,"]"):wn?encodeURIComponent(Rn):Rn}function vn(En,Rn,wn){var Dn=[],Bn=pt(Rn),zn;try{for(Bn.s();!(zn=Bn.n()).done;){var Hn=zn.value;if(Array.isArray(Hn)){Dn.push(vn("".concat(En,"[]"),Hn,wn));continue}else if((0,ot.default)(Hn)==="object"){Dn.push(Sn("".concat(En,"[]").concat(Hn),wn,void 0));continue}Dn.push("".concat(cn(En,"",wn),"=").concat(zt(Hn,wn)))}}catch(nr){Bn.e(nr)}finally{Bn.f()}return Dn.join("&")}function Sn(En,Rn,wn){var Dn=[];for(var Bn in Rn)if(Rn.hasOwnProperty(Bn)){var zn=En.length?"".concat(En,"[").concat(Bn,"]"):Bn;if(Array.isArray(Rn[Bn])){Dn.push(vn(zn,Rn[Bn],wn));continue}else if((0,ot.default)(Rn[Bn])==="object"&&Rn[Bn]!==null){Dn.push(Sn(zn,Rn[Bn],wn));continue}Dn.push("".concat(cn(En,Bn,wn),"=").concat(zt(Rn[Bn],wn)))}return Dn.join("&")}function fn(En,Rn){return Sn("",En,Rn)}function mn(En,Rn){if(!En.length||!Rn.length)return En;var wn=new URL(En),Dn=wn.host,Bn=wn.pathname,zn=wn.search,Hn=wn.hash,nr=wn.protocol;return"".concat(nr,"//").concat(Dn).concat(Bn).concat(zn.length?"".concat(zn,"&").concat(Rn):"?".concat(Rn)).concat(Hn)}function bn(En){return Nt[En]||Nt.default}function un(En){return En==="multipart"?Pt:Rt}function Tn(En,Rn){var wn=(0,ot.default)(En),Dn=bn(Rn),Bn=un(Rn);if(Bn.size>0){var zn=!1;if(Bn.forEach(function(Hn){s.g[Hn]&&En instanceof s.g[Hn]&&(zn=!0)}),!zn)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,gt.default)(Bn).join(", ")))}if(Bn.size===0&&!Dn.has(wn))throw new Error("TYPE_MISMATCH_DATA ".concat((0,gt.default)(Dn).join(", ")));switch(Rn){case"utf8":return En;default:return JSON.stringify(En,void 0,2)}}function kn(En,Rn){En=En||{};var wn,Dn=En.data;try{wn=Ft(mt,En.serializer||Rn.getDataSerializer(),"serializer / data payload type")}catch{wn=Ft(yt,En.serializer||Rn.getDataSerializer(),"serializer / data payload type"),Dn={}}return{data:Dn,filePath:En.filePath,followRedirect:En.followRedirect,headers:Ut(En.headers||{},kt,"Invalid header type, must be string"),method:Ft(ft,En.method||ft[0],"method"),name:En.name,params:Ut(En.params||{},bt,"Invalid param, must be of type string or array"),responseType:En.responseType,serializer:wn,connectTimeout:En.connectTimeout,readTimeout:En.readTimeout,timeout:En.timeout}}var xn=0;function An(En){var Rn,wn,Dn,Bn=En.addRequest,zn=En.addResponse,Hn=En.isIgnored,nr=(Rn=window.cordova)===null||Rn===void 0||(wn=Rn.plugin)===null||wn===void 0?void 0:wn.http,sn={},Gn=!1;if(typeof nr>"u")return function(){};var Zn=(Dn=window.ionic)===null||Dn===void 0?void 0:Dn.platforms;if(typeof Zn<"u"&&typeof Zn.some=="function"&&Zn.some(function(Xn){return wt.has(Xn)}))return function(){};var rr=nr.sendRequest,Fn=(0,dt.default)(function(Xn,Yn,Nn){if(!Hn("".concat(At).concat(Nn)))try{var Un={url:Xn.url||"",status:Xn.status<600&&Xn.status>=100?Xn.status:0,headers:Xn.headers||{},body:Yn?Xn.data:Xn.error,method:sn[Nn].toUpperCase()};zn("".concat(At).concat(Nn),Un)}catch(Mn){var Cn={url:Xn.url||"",status:Xn.status<600&&Xn.status>=100?Xn.status:0,headers:Xn.headers||{},body:"LogRocket fetch error: ".concat(Mn.message),method:sn[Nn].toUpperCase()};zn("".concat(At).concat(Nn),Cn)}});return nr.sendRequest=function(Xn,Yn,Nn,Un){var Cn=++xn,Mn=function(xt){Gn||(Fn(xt,!0,Cn),delete sn[Cn]),Nn(xt)},Kt=function(xt){Gn||(Fn(xt,!1,Cn),delete sn[Cn]),Un(xt)};if(!Gn)try{var Ot=kn(Yn,nr),lt=mn(Xn,Sn("",Ot.params,!0)),Tt=Xt(Xn,Ot.headers,nr),It=Ot.method||"get";sn[Cn]=It;var Dt={url:lt,method:It.toUpperCase(),headers:Tt||{},body:Tn(Ot.data||{},Ot.serializer)};Bn("".concat(At).concat(Cn),Dt)}catch($t){var Et={url:Xn,method:(Yn.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat($t.message)};Bn("".concat(At).concat(Cn),Et)}return rr(Xn,Yn,Mn,Kt)},function(){Gn=!0,nr.sendRequest=rr,sn={}}}},"./packages/@logrocket/network/src/registerNetworkInformation.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function et(rt){var ot=void 0;function gt(){var dt={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(dt.effectiveType=s[window.navigator.connection.effectiveType]||"UNKNOWN"):dt.effectiveType="NONE",!(ot&&dt.online===ot.online&&dt.effectiveType===ot.effectiveType)&&(ot=dt,rt.addEvent("lr.network.NetworkStatusEvent",function(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},st=pt.isEnabled,ht=st===void 0?!0:st;return ht?dt:null}))}return setTimeout(gt),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",gt),window.addEventListener("online",gt),window.addEventListener("offline",gt),function(){window.removeEventListener("offline",gt),window.removeEventListener("online",gt),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",gt)}}},"./packages/@logrocket/network/src/registerXHR.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.setActive=st,it.default=at;var rt=et(s("./packages/@logrocket/utils/src/mapValues.js")),ot=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),gt=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt=s("./packages/@logrocket/utils/src/constants/nps.js"),pt=!0;function st(ut){pt=ut}var ht=0;function at(ut){var ft=ut.addRequest,mt=ut.addResponse,yt=ut.isIgnored,At=ut.logger,wt=ut.shouldAugmentNPS,Pt=wt===void 0?!0:wt,Rt=ut.shouldParseXHRBlob,kt=Rt===void 0?!1:Rt,bt=XMLHttpRequest,Nt=new WeakMap,Ft=!1,Ut="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(hn,Xt){var zt=new bt(hn,Xt);if(!pt)return zt;Nt.set(zt,{xhrId:++ht,headers:{}});var cn=zt.open;function vn(){for(var bn=arguments.length,un=new Array(bn),Tn=0;Tn<bn;Tn++)un[Tn]=arguments[Tn];try{var kn=un[1];if(window.URL&&typeof window.URL=="function"&&kn.search(dt.WOOTRIC_RESPONSES_REGEX)===0){var xn=new window.URL(At.recordingURL);xn.searchParams.set("nps","wootric");var An=new window.URL(kn),En=An.searchParams.get("response[text]"),Rn=En?"".concat(En,`

`):"";An.searchParams.set("response[text]","".concat(Rn,"<").concat(xn.href,"|View LogRocket session>")),un[1]=An.href}}catch{}return cn.apply(this,un)}var Sn=zt.send;function fn(){for(var bn=arguments.length,un=new Array(bn),Tn=0;Tn<bn;Tn++)un[Tn]=arguments[Tn];try{var kn=Nt.get(zt);if(window.URL&&typeof window.URL=="function"&&kn&&kn.url&&kn.url.search(dt.DELIGHTED_RESPONSES_REGEX)===0&&un.length&&un[0].indexOf(dt.DELIGHTED_FEEDBACK_PREFIX)!==-1){var xn=new window.URL(At.recordingURL);xn.searchParams.set("nps","delighted");var An=encodeURIComponent(xn.href),En=un[0].split("&").map(function(Rn){if((0,gt.default)(Rn,dt.DELIGHTED_FEEDBACK_PREFIX)){var wn=Rn===dt.DELIGHTED_FEEDBACK_PREFIX;return"".concat(Rn).concat(wn?"":`

`,"<").concat(An,"|View LogRocket session>")}return Rn}).join("&");un[0]=En}}catch{}return Sn.apply(this,un)}Pt&&(zt.open=vn,zt.send=fn),(0,ot.default)(zt,"open",function(bn,un){if(!Ft){var Tn=Nt.get(zt);Tn.method=bn,Tn.url=un}}),(0,ot.default)(zt,"send",function(bn){if(!Ft){var un=Nt.get(zt);if(un){var Tn={url:un.url,method:un.method&&un.method.toUpperCase(),headers:(0,rt.default)(un.headers||{},function(kn){return kn.join(", ")}),body:bn};ft("".concat(Ut).concat(un.xhrId),Tn)}}}),(0,ot.default)(zt,"setRequestHeader",function(bn,un){if(!Ft){var Tn=Nt.get(zt);Tn&&(Tn.headers=Tn.headers||{},Tn.headers[bn]=Tn.headers[bn]||[],Tn.headers[bn].push(un))}});var mn={readystatechange:function(){if(!Ft&&zt.readyState===4){var un=Nt.get(zt);if(!un||yt("".concat(Ut).concat(un.xhrId)))return;var Tn=zt.getAllResponseHeaders()||"",kn=Tn.split(/[\r\n]+/).reduce(function(Rn,wn){var Dn=Rn,Bn=wn.split(": ");if(Bn.length>0){var zn=Bn.shift(),Hn=Bn.join(": ");Rn[zn]?Dn[zn]+=", ".concat(Hn):Dn[zn]=Hn}return Dn},{}),xn;try{switch(zt.responseType){case"json":xn=At._shouldCloneResponse?JSON.parse(JSON.stringify(zt.response)):zt.response;break;case"arraybuffer":case"blob":{xn=zt.response;break}case"document":{xn=zt.responseXML;break}case"text":case"":{xn=zt.responseText;break}default:xn=""}}catch{xn="LogRocket: Error accessing response."}var An={url:un.url,status:zt.status,headers:kn,body:xn,method:(un.method||"").toUpperCase()};if(kt&&An.body instanceof Blob){var En=new FileReader;En.readAsText(An.body),En.onload=function(){try{An.body=JSON.parse(En.result)}catch{}mt("".concat(Ut).concat(un.xhrId),An)}}else mt("".concat(Ut).concat(un.xhrId),An)}}};return Object.keys(mn).forEach(function(bn){zt.addEventListener(bn,mn[bn])}),zt},XMLHttpRequest.prototype=bt.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(Jt){XMLHttpRequest[Jt]=bt[Jt]}),function(){Ft=!0,XMLHttpRequest=bt}}},"./packages/@logrocket/now/src/index.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var s=Date.now.bind(Date),et=s(),rt=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return s()-et};it.default=rt},"./packages/@logrocket/redux/src/createEnhancer.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=st;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/now/src/index.js"));function gt(ht,at){var ut=Object.keys(ht);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(ht);at&&(ft=ft.filter(function(mt){return Object.getOwnPropertyDescriptor(ht,mt).enumerable})),ut.push.apply(ut,ft)}return ut}function dt(ht){for(var at=1;at<arguments.length;at++){var ut=arguments[at]!=null?arguments[at]:{};at%2?gt(Object(ut),!0).forEach(function(ft){(0,rt.default)(ht,ft,ut[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ht,Object.getOwnPropertyDescriptors(ut)):gt(Object(ut)).forEach(function(ft){Object.defineProperty(ht,ft,Object.getOwnPropertyDescriptor(ut,ft))})}return ht}var pt=0;function st(ht){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=at.stateSanitizer,ft=ut===void 0?function(At){return At}:ut,mt=at.actionSanitizer,yt=mt===void 0?function(At){return At}:mt;return function(At){return function(wt,Pt,Rt){var kt=At(wt,Pt,Rt),bt=kt.dispatch,Nt=pt++;ht.addEvent("lr.redux.InitialState",function(){var Ut;try{Ut=ft(kt.getState())}catch(Jt){console.error(Jt.toString())}return{state:Ut,storeId:Nt}});var Ft=function(Jt){var hn=(0,ot.default)(),Xt,zt;try{zt=bt(Jt)}catch(vn){Xt=vn}finally{var cn=(0,ot.default)()-hn;ht.addEvent("lr.redux.ReduxAction",function(){var vn=null,Sn=null;try{vn=ft(kt.getState()),Sn=yt(Jt)}catch(fn){console.error(fn.toString())}return vn&&Sn?{storeId:Nt,action:Sn,duration:cn,stateDelta:vn}:null})}if(Xt)throw Xt;return zt};return dt(dt({},kt),{},{dispatch:Ft})}}}},"./packages/@logrocket/redux/src/createMiddleware.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=gt;var rt=et(s("./packages/@logrocket/now/src/index.js")),ot=0;function gt(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st=pt.stateSanitizer,ht=st===void 0?function(ft){return ft}:st,at=pt.actionSanitizer,ut=at===void 0?function(ft){return ft}:at;return function(ft){var mt=ot++;return dt.addEvent("lr.redux.InitialState",function(){var yt;try{yt=ht(ft.getState())}catch(At){console.error(At.toString())}return{state:yt,storeId:mt}}),function(yt){return function(At){var wt=(0,rt.default)(),Pt,Rt;try{Rt=yt(At)}catch(bt){Pt=bt}finally{var kt=(0,rt.default)()-wt;dt.addEvent("lr.redux.ReduxAction",function(){var bt=null,Nt=null;try{bt=ht(ft.getState()),Nt=ut(At)}catch(Ft){console.error(Ft.toString())}return bt&&Nt?{storeId:mt,action:Nt,duration:kt,stateDelta:bt}:null})}if(Pt)throw Pt;return Rt}}}}},"./packages/@logrocket/redux/src/index.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),Object.defineProperty(it,"createEnhancer",{enumerable:!0,get:function(){return rt.default}}),Object.defineProperty(it,"createMiddleware",{enumerable:!0,get:function(){return ot.default}});var rt=et(s("./packages/@logrocket/redux/src/createEnhancer.js")),ot=et(s("./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":function(nt,it,s){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var et={collectWindowErrors:!0,debug:!1},rt=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{},ot=[].slice,gt="?",dt=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function pt(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}et.report=function(){var at=[],ut=null,ft=null,mt=null;function yt(hn){Nt(),at.push(hn)}function At(hn){for(var Xt=at.length-1;Xt>=0;--Xt)at[Xt]===hn&&at.splice(Xt,1)}function wt(){Ft(),at=[]}function Pt(hn,Xt){var zt=null;if(!(Xt&&!et.collectWindowErrors)){for(var cn in at)if(at.hasOwnProperty(cn))try{at[cn].apply(null,[hn].concat(ot.call(arguments,2)))}catch(vn){zt=vn}if(zt)throw zt}}var Rt,kt;function bt(hn,Xt,zt,cn,vn){var Sn=null;if(mt)et.computeStackTrace.augmentStackTraceWithInitialElement(mt,Xt,zt,hn),Ut();else if(vn)Sn=et.computeStackTrace(vn),Pt(Sn,!0);else{var fn={url:Xt,line:zt,column:cn},mn=void 0,bn=hn,un;if({}.toString.call(hn)==="[object String]"){var un=hn.match(dt);un&&(mn=un[1],bn=un[2])}fn.func=gt,Sn={name:mn,message:bn,url:pt(),stack:[fn]},Pt(Sn,!0)}return Rt?Rt.apply(this,arguments):!1}function Nt(){kt||(Rt=rt.onerror,rt.onerror=bt,kt=!0)}function Ft(){kt&&(rt.onerror=Rt,kt=!1,Rt=void 0)}function Ut(){var hn=mt,Xt=ut;ut=null,mt=null,ft=null,Pt.apply(null,[hn,!1].concat(Xt))}function Jt(hn,Xt){var zt=ot.call(arguments,1);if(mt){if(ft===hn)return;Ut()}var cn=et.computeStackTrace(hn);if(mt=cn,ft=hn,ut=zt,setTimeout(function(){ft===hn&&Ut()},cn.incomplete?2e3:0),Xt!==!1)throw hn}return Jt.subscribe=yt,Jt.unsubscribe=At,Jt.uninstall=wt,Jt}(),et.computeStackTrace=function(){function at(yt){if(!(typeof yt.stack>"u"||!yt.stack)){var At=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,wt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,Pt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Rt=yt.stack.split(`
`),kt=[],bt,Nt;/^(.*) is undefined$/.exec(yt.message);for(var Ft=0,Ut=Rt.length;Ft<Ut;++Ft){if(bt=At.exec(Rt[Ft])){var Jt=bt[2]&&bt[2].indexOf("native")!==-1;Nt={url:Jt?null:bt[2],func:bt[1]||gt,args:Jt?[bt[2]]:[],line:bt[3]?+bt[3]:null,column:bt[4]?+bt[4]:null}}else if(bt=Pt.exec(Rt[Ft]))Nt={url:bt[2],func:bt[1]||gt,args:[],line:+bt[3],column:bt[4]?+bt[4]:null};else if(bt=wt.exec(Rt[Ft]))Nt={url:bt[3],func:bt[1]||gt,args:bt[2]?bt[2].split(","):[],line:bt[4]?+bt[4]:null,column:bt[5]?+bt[5]:null};else continue;!Nt.func&&Nt.line&&(Nt.func=gt),kt.push(Nt)}return kt.length?(!kt[0].column&&typeof yt.columnNumber<"u"&&(kt[0].column=yt.columnNumber+1),{name:yt.name,message:yt.message,url:pt(),stack:kt}):null}}function ut(yt,At,wt,Pt){var Rt={url:At,line:wt};if(Rt.url&&Rt.line){if(yt.incomplete=!1,Rt.func||(Rt.func=gt),yt.stack.length>0&&yt.stack[0].url===Rt.url){if(yt.stack[0].line===Rt.line)return!1;if(!yt.stack[0].line&&yt.stack[0].func===Rt.func)return yt.stack[0].line=Rt.line,!1}return yt.stack.unshift(Rt),yt.partial=!0,!0}else yt.incomplete=!0;return!1}function ft(yt,At){for(var wt=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,Pt=[],Rt={},kt=!1,bt,Nt,Ft=ft.caller;Ft&&!kt;Ft=Ft.caller)if(!(Ft===mt||Ft===et.report)){if(Nt={url:null,func:gt,line:null,column:null},Ft.name?Nt.func=Ft.name:(bt=wt.exec(Ft.toString()))&&(Nt.func=bt[1]),typeof Nt.func>"u")try{Nt.func=bt.input.substring(0,bt.input.indexOf("{"))}catch{}Rt[""+Ft]?kt=!0:Rt[""+Ft]=!0,Pt.push(Nt)}At&&Pt.splice(0,At);var Ut={name:yt.name,message:yt.message,url:pt(),stack:Pt};return ut(Ut,yt.sourceURL||yt.fileName,yt.line||yt.lineNumber,yt.message||yt.description),Ut}function mt(yt,At){var wt=null;At=At==null?0:+At;try{if(wt=at(yt),wt)return wt}catch(Pt){if(et.debug)throw Pt}try{if(wt=ft(yt,At+1),wt)return wt}catch(Pt){if(et.debug)throw Pt}return{name:yt.name,message:yt.message,url:pt()}}return mt.augmentStackTraceWithInitialElement=ut,mt.computeStackTraceFromStackProp=at,mt}();var st=et;it.default=st},"./packages/@logrocket/utils/src/addListener.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return ot.addEventListener(et,rt,{capture:!0,passive:!0}),function(){ot.removeEventListener(et,rt,{capture:!0,passive:!0})}}},"./packages/@logrocket/utils/src/adjustOsVersion.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.adjustOsVersion=s,it.adjustOs=et;function s(rt,ot){var gt=ot;return ot&&rt.toLowerCase().replace(/\s/g,"").indexOf("macos")>-1&&(gt=ot.replace("10.15.7","10.15.7+")),gt}function et(rt){return s(rt,rt)}},"./packages/@logrocket/utils/src/applyUrlSanitizer.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=et.logger,ot=et.url,gt=ot===void 0?"":ot,dt=rt.getConfig("lr.browser")||{},pt=dt.urlSanitizer,st=pt===void 0?function(at){return at}:pt,ht;try{ht=st(gt)}catch(at){console.error(at)}return typeof ht=="string"?ht:""}},"./packages/@logrocket/utils/src/browserUtils.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getNodeName=s,it.getTargetForEvent=et,it.getNodePath=ot;function s(gt){return gt.nodeName==="#document-fragment"&&gt.mode==="open"?"$shadow-root":gt.nodeName?gt.nodeName.toLowerCase():""}function et(gt){return typeof gt.composedPath=="function"&&gt.composed?gt.composedPath()[0]:gt.path?gt.path[0]:gt.target}var rt=1e3;function ot(gt){for(var dt=gt,pt=[],st=0;dt&&(dt.parentNode||dt.host);){var ht=s(dt);if(ht==="body")break;var at={nodeName:ht},ut=at.nodeName.length;if(dt.id&&dt.id.length>0&&(at.id=dt.id,ut+=dt.id.length),dt.classList&&dt.classList.length>0){at.classList=Array.prototype.slice.call(dt.classList,0);var ft=Array.prototype.join.call(dt.classList,"");ft&&(ut+=ft.length)}if(st+ut>rt)break;if(dt.parentNode&&dt.parentNode.children)try{var mt=0,yt=dt;do mt+=1,yt=yt.previousElementSibling;while(yt);at.nthChild=mt}catch{}st+=ut,pt.push(at),dt=dt.parentNode||dt.host}return pt}},"./packages/@logrocket/utils/src/constants/issues.ts":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.ES_ISSUE_TYPE_BASE_FILTER=it.ES_ISSUE_TYPES=it.ISSUE_GROUP_TYPE=it.ISSUE_TYPE=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot,gt={EXCEPTION:"EXCEPTION",NETWORK_ERROR:"NETWORK_ERROR",RAGE_CLICK:"RAGE_CLICK",DEAD_CLICK:"DEAD_CLICK",FRUSTRATING_NETWORK:"FRUSTRATING_NETWORK",ERROR_STATE:"ERROR_STATE"};it.ISSUE_TYPE=gt;var dt={ENCODED_FILTER:"ENCODED_FILTER",SENTRY:"SENTRY",TROYTOWN:"TROYTOWN"};it.ISSUE_GROUP_TYPE=dt;var pt=[gt.RAGE_CLICK,gt.DEAD_CLICK,gt.FRUSTRATING_NETWORK,gt.ERROR_STATE];it.ES_ISSUE_TYPES=pt;var st=(ot={},(0,rt.default)(ot,gt.RAGE_CLICK,{rageClicked:{operator:"TEXT_IS",strings:[]}}),(0,rt.default)(ot,gt.DEAD_CLICK,{deadClicked:{operator:"TEXT_IS",strings:[]}}),ot);it.ES_ISSUE_TYPE_BASE_FILTER=st},"./packages/@logrocket/utils/src/constants/logTypes.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.LOG_FILTER_TYPES=it.LOG_TYPES=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot,gt={LOG:"LOG",WARN:"WARN",ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO",REDUX:"REDUX",LIFECYCLE:"LIFECYCLE",NAVIGATION:"NAVIGATION",NETWORK:"NETWORK",PREV_SESSION:"PREV_SESSION",NEXT_SESSION:"NEXT_SESSION",LOAD_MORE:"LOAD_MORE",EXCEPTION:"EXCEPTION"};it.LOG_TYPES=gt;var dt=(ot={},(0,rt.default)(ot,gt.LOG,{label:"Logs",filterLabel:"Log",types:[gt.LOG]}),(0,rt.default)(ot,gt.WARN,{label:"Warnings",filterLabel:"Warning",types:[gt.WARN]}),(0,rt.default)(ot,gt.ERROR,{label:"Errors",filterLabel:"Error",types:[gt.ERROR,gt.EXCEPTION]}),(0,rt.default)(ot,gt.INFO,{label:"Info",filterLabel:"Info",types:[gt.INFO]}),(0,rt.default)(ot,gt.DEBUG,{label:"Debug",filterLabel:"Debug",types:[gt.DEBUG]}),(0,rt.default)(ot,gt.REDUX,{label:"Redux",types:[gt.REDUX]}),(0,rt.default)(ot,gt.NAVIGATION,{label:"Navigation",types:[gt.NAVIGATION,gt.LIFECYCLE]}),ot);it.LOG_FILTER_TYPES=dt},"./packages/@logrocket/utils/src/constants/metrics.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=it.DEFAULT_HEATMAP_FOR_URL_OPERATOR=it.nextSortDirection=it.SORT_DIRECTION=it.FEEDBACK_SORT_COLUMN=it.HEATMAP_FOR_URL_OPERATOR=it.METRIC_RETENTION_TYPE=it.METRIC_TIMESERIES_TYPE=void 0;var s={SESSION_COUNT:"SESSION_COUNT",PERCENTILE:"PERCENTILE",CONVERSION_RATE:"CONVERSION_RATE",SESSION_PERCENTAGE:"SESSION_PERCENTAGE",ACTIVE_USERS:"ACTIVE_USERS",EVENT_COUNT:"EVENT_COUNT"};it.METRIC_TIMESERIES_TYPE=s;var et={USER_PERCENTAGE:"USER_PERCENTAGE"};it.METRIC_RETENTION_TYPE=et;var rt={IS:"IS",CONTAINS:"CONTAINS",LIKE:"LIKE",HREF_LIKE:"HREF_LIKE"};it.HEATMAP_FOR_URL_OPERATOR=rt;var ot={RATING:"RATING",SUBMISSION_DATE:"SUBMISSION_DATE"};it.FEEDBACK_SORT_COLUMN=ot;var gt={UNSET:"UNSET",ASC:"ASC",DESC:"DESC"};it.SORT_DIRECTION=gt;var dt=function(at){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=ut.reverse,mt=ft===void 0?!1:ft,yt=gt.UNSET,At=gt.ASC,wt=gt.DESC,Pt=[yt,wt,At];mt&&(Pt=[yt,At,wt]);var Rt=Pt.indexOf(at);return Pt[(Rt+1)%Pt.length]};it.nextSortDirection=dt;var pt=rt.IS;it.DEFAULT_HEATMAP_FOR_URL_OPERATOR=pt;var st=rt.HREF_LIKE;it.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=st},"./packages/@logrocket/utils/src/constants/mobile.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.MAXIMUM_SUPPORTED_VERSION=it.MINIMUM_SUPPORTED_VERSION=it.IOS_VERSION=it.ANDROID_VERSION=void 0;var s="1.25.0";it.ANDROID_VERSION=s;var et="1.25.0";it.IOS_VERSION=et;var rt="1.0.0";it.MINIMUM_SUPPORTED_VERSION=rt;var ot="1.26.0";it.MAXIMUM_SUPPORTED_VERSION=ot},"./packages/@logrocket/utils/src/constants/nps.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.DELIGHTED_FEEDBACK_PREFIX=it.DELIGHTED_RESPONSES_REGEX=it.WOOTRIC_RESPONSES_REGEX=void 0;var s=/^https:\/\/production.wootric.com\/responses/;it.WOOTRIC_RESPONSES_REGEX=s;var et=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;it.DELIGHTED_RESPONSES_REGEX=et;var rt="comment=";it.DELIGHTED_FEEDBACK_PREFIX=rt},"./packages/@logrocket/utils/src/constants/replayTypes.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.REPLAY_TYPE=void 0;var s;it.REPLAY_TYPE=s,function(et){et.SKIA="SKIA",et.DOM="DOM",et.PDF="PDF"}(s||(it.REPLAY_TYPE=s={}))},"./packages/@logrocket/utils/src/constants/sdkTypes.ts":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.SESSION_TYPE_TO_DISPLAY=it.SDK_REPLAY_TYPE=it.SDK_TYPE_TO_DISPLAY=it.SDK_TYPE=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),gt,dt,pt;it.SDK_TYPE=pt,function(ut){ut.WEB="web",ut.MOBILE="mobile",ut.UNKNOWN="unknown"}(pt||(it.SDK_TYPE=pt={}));var st=(gt={},(0,rt.default)(gt,pt.WEB,"Web"),(0,rt.default)(gt,pt.MOBILE,"Mobile"),gt);it.SDK_TYPE_TO_DISPLAY=st;var ht=(dt={},(0,rt.default)(dt,pt.WEB,ot.REPLAY_TYPE.DOM),(0,rt.default)(dt,pt.MOBILE,ot.REPLAY_TYPE.SKIA),dt);it.SDK_REPLAY_TYPE=ht;var at=st;it.SESSION_TYPE_TO_DISPLAY=at},"./packages/@logrocket/utils/src/constants/statusCodes.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getStatusText=et,it.STATUS_CODES=void 0;var s={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};it.STATUS_CODES=s;function et(rt){return s[String(rt)]}},"./packages/@logrocket/utils/src/contains.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){return et&&rt&&et.indexOf(rt)>-1}},"./packages/@logrocket/utils/src/deepArsonify.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var rt=gt(s("./packages/@logrocket/arson/src/index.js"));function ot(pt){if(typeof WeakMap!="function")return null;var st=new WeakMap,ht=new WeakMap;return(ot=function(ut){return ut?ht:st})(pt)}function gt(pt,st){if(!st&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var ht=ot(st);if(ht&&ht.has(pt))return ht.get(pt);var at={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var mt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;mt&&(mt.get||mt.set)?Object.defineProperty(at,ft,mt):at[ft]=pt[ft]}return at.default=pt,ht&&ht.set(pt,at),at}function dt(pt){return{arson:rt.encode(pt)}}},"./packages/@logrocket/utils/src/deepDearsonify.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var rt=gt(s("./packages/@logrocket/arson/src/index.js"));function ot(pt){if(typeof WeakMap!="function")return null;var st=new WeakMap,ht=new WeakMap;return(ot=function(ut){return ut?ht:st})(pt)}function gt(pt,st){if(!st&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var ht=ot(st);if(ht&&ht.has(pt))return ht.get(pt);var at={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var mt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;mt&&(mt.get||mt.set)?Object.defineProperty(at,ft,mt):at[ft]=pt[ft]}return at.default=pt,ht&&ht.set(pt,at),at}function dt(pt){return pt&&rt.decode(pt.arson)}},"./packages/@logrocket/utils/src/endsWith.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){return et&&rt&&et.substring(et.length-rt.length)===rt}},"./packages/@logrocket/utils/src/enhanceFunc.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt,ot){var gt=et[rt];function dt(){for(var pt,st=arguments.length,ht=new Array(st),at=0;at<st;at++)ht[at]=arguments[at];return gt&&(pt=gt.apply(this,ht)),ot.apply(this,ht),pt}return et[rt]=dt,function(){et[rt]=gt}}},"./packages/@logrocket/utils/src/find.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){for(var ot=0;ot<et.length;ot++)if(rt(et[ot]))return et[ot]}},"./packages/@logrocket/utils/src/findIndex.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){for(var ot=0;ot<et.length;ot++)if(rt(et[ot]))return ot;return-1}},"./packages/@logrocket/utils/src/findKeyFrames.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ot;var rt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js"));function ot(gt,dt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},st=pt.sdkThrottle,ht=st===void 0?500:st;if(!gt.length)return null;var at=(0,rt.default)(gt,{time:dt},"time"),ut=gt[at]||gt[at-1],ft=gt[at-1]||ut,mt=Math.min(ut.time-ft.time,ht),yt=Math.max(dt-(ut.time-mt),0),At=mt===0?1:Math.min(yt/mt,1);return{prev:ft,next:ut,ratio:At}}},"./packages/@logrocket/utils/src/flatten.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){return et.concat(rt)}},"./packages/@logrocket/utils/src/getCssRules.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getCssRule=it.getCssRules=void 0;var s=function(ot){try{var gt=ot.cssRules;return!gt&&ot instanceof CSSStyleSheet?ot.rules:gt}catch{return null}};it.getCssRules=s;var et=function(ot,gt){var dt=s(ot);return!dt||gt>=dt.length?null:dt.item(gt)};it.getCssRule=et},"./packages/@logrocket/utils/src/getGraphQLOperation.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){if(et)try{var rt=typeof et=="string"?JSON.parse(et):et,ot=rt.query.trim(),gt=ot.match(/(query|mutation) ([a-z_-]+)/i);return gt?{operationType:gt[1],operationName:gt[2]}:{}}catch{return{}}return{}}},"./packages/@logrocket/utils/src/getMockDeveloperUser.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(){return{permissions:{dashboard:{metrics:!0,errors:!0},sessionPlayback:{developerPane:{networkPane:{requestBodiesAndHeaders:!0}}}},appRoles:[]}}},"./packages/@logrocket/utils/src/getNodeSelector.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var rt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ot=(0,rt.default)(function(dt){var pt=dt.nodeName?dt.nodeName.toLowerCase():"",st={nodeName:pt};return dt.id&&dt.id.length>0&&(st.id=dt.id),dt.classList&&dt.classList.length>0&&(st.classList=Array.prototype.slice.call(dt.classList,0)),st}),gt=ot;it.default=gt},"./packages/@logrocket/utils/src/hashString.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.combineHashes=it.hashString=void 0;var rt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ot=s("./packages/@logrocket/utils/src/sendTelemetryData.js");function gt(at,ut){var ft=typeof Symbol<"u"&&at[Symbol.iterator]||at["@@iterator"];if(!ft){if(Array.isArray(at)||(ft=dt(at))||ut&&at&&typeof at.length=="number"){ft&&(at=ft);var mt=0,yt=function(){};return{s:yt,n:function(){return mt>=at.length?{done:!0}:{done:!1,value:at[mt++]}},e:function(kt){throw kt},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At=!0,wt=!1,Pt;return{s:function(){ft=ft.call(at)},n:function(){var kt=ft.next();return At=kt.done,kt},e:function(kt){wt=!0,Pt=kt},f:function(){try{!At&&ft.return!=null&&ft.return()}finally{if(wt)throw Pt}}}}function dt(at,ut){if(at){if(typeof at=="string")return pt(at,ut);var ft=Object.prototype.toString.call(at).slice(8,-1);if(ft==="Object"&&at.constructor&&(ft=at.constructor.name),ft==="Map"||ft==="Set")return Array.from(at);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return pt(at,ut)}}function pt(at,ut){(ut==null||ut>at.length)&&(ut=at.length);for(var ft=0,mt=new Array(ut);ft<ut;ft++)mt[ft]=at[ft];return mt}var st=(0,rt.default)(function(at){try{var ut=0;if(typeof at=="string"&&at.length)for(var ft=0;ft<at.length;ft++)ut=31*ut+at.charCodeAt(ft),ut|=0;return ut}catch{return(0,ot.sendTelemetry)("Failed to hash string",{extra:{str:at}}),null}});it.hashString=st;var ht=function(ut){var ft=ut.shift()||0,mt=gt(ut),yt;try{for(mt.s();!(yt=mt.n()).done;){var At=yt.value;ft^=At+2654435769+(ft<<6)+(ft>>2)}}catch(wt){mt.e(wt)}finally{mt.f()}return ft};it.combineHashes=ht},"./packages/@logrocket/utils/src/identityStatus.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.parseIdentityStatus=et,it.IdentityStatus=void 0;var s;it.IdentityStatus=s,function(rt){rt[rt.Unknown=0]="Unknown",rt[rt.Anonymous=1]="Anonymous",rt[rt.Identified=2]="Identified"}(s||(it.IdentityStatus=s={}));function et(rt){if(!rt)return s.Unknown;switch(parseInt(rt,10)){case s.Anonymous:return s.Anonymous;case s.Identified:return s.Identified;default:return s.Unknown}}},"./packages/@logrocket/utils/src/index.ts":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),rt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0});var ot={enhanceFunc:!0,shallowArsonify:!0,shallowDearsonify:!0,deepArsonify:!0,deepDearsonify:!0,addListener:!0,protectFunc:!0,findIndex:!0,find:!0,flatten:!0,selectorMatches:!0,parseSelectorForMatch:!0,querySelectorWithShadowDom:!0,sendErrorTelemetry:!0,sendTelemetry:!0,sanitizeValue:!0,adjustOs:!0,adjustOsVersion:!0,selectorFromNodePath:!0,startsWith:!0,endsWith:!0,contains:!0,uuid:!0,randomInt:!0,getCssRules:!0,getCssRule:!0,getNodeSelector:!0,getGraphQLOperation:!0,isSessionEvent:!0,isActivityEvent:!0,parseIntFromHex:!0,isRecordingSampled:!0,makeRecordingID:!0,setFromArray:!0,setToArray:!0,applyUrlSanitizer:!0,getMockDeveloperUser:!0,maybeCleanSwiftUIClassName:!0,LOG_FILTER_TYPES:!0,LOG_TYPES:!0,METRIC_TIMESERIES_TYPE:!0,HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR:!0,SORT_DIRECTION:!0,FEEDBACK_SORT_COLUMN:!0,METRIC_RETENTION_TYPE:!0,ISSUE_TYPE:!0,ISSUE_GROUP_TYPE:!0,ES_ISSUE_TYPE_BASE_FILTER:!0,ES_ISSUE_TYPES:!0,findKeyFrames:!0,interpolate:!0,interpolateMobile:!0,removeOutdated:!0,DELIGHTED_RESPONSES_REGEX:!0,WOOTRIC_RESPONSES_REGEX:!0,REPLAY_TYPE:!0,SDK_REPLAY_TYPE:!0,SDK_TYPE:!0,SDK_TYPE_TO_DISPLAY:!0,SESSION_TYPE_TO_DISPLAY:!0,STATUS_CODES:!0,getStatusText:!0,parseQueryString:!0,likeOperator:!0,scrollMapHistogramToPercent:!0,combineHashes:!0,hashString:!0,encodeUserTraitString:!0,parseUserTraitString:!0,IdentityStatus:!0,parseIdentityStatus:!0,scrubException:!0,MobileConstants:!0};Object.defineProperty(it,"enhanceFunc",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(it,"shallowArsonify",{enumerable:!0,get:function(){return dt.default}}),Object.defineProperty(it,"shallowDearsonify",{enumerable:!0,get:function(){return pt.default}}),Object.defineProperty(it,"deepArsonify",{enumerable:!0,get:function(){return st.default}}),Object.defineProperty(it,"deepDearsonify",{enumerable:!0,get:function(){return ht.default}}),Object.defineProperty(it,"addListener",{enumerable:!0,get:function(){return at.default}}),Object.defineProperty(it,"protectFunc",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(it,"findIndex",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(it,"find",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(it,"flatten",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(it,"selectorMatches",{enumerable:!0,get:function(){return At.default}}),Object.defineProperty(it,"parseSelectorForMatch",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(it,"querySelectorWithShadowDom",{enumerable:!0,get:function(){return Pt.default}}),Object.defineProperty(it,"sendErrorTelemetry",{enumerable:!0,get:function(){return Rt.default}}),Object.defineProperty(it,"sendTelemetry",{enumerable:!0,get:function(){return Rt.sendTelemetry}}),Object.defineProperty(it,"sanitizeValue",{enumerable:!0,get:function(){return kt.default}}),Object.defineProperty(it,"adjustOs",{enumerable:!0,get:function(){return bt.adjustOs}}),Object.defineProperty(it,"adjustOsVersion",{enumerable:!0,get:function(){return bt.adjustOsVersion}}),Object.defineProperty(it,"selectorFromNodePath",{enumerable:!0,get:function(){return Nt.default}}),Object.defineProperty(it,"startsWith",{enumerable:!0,get:function(){return Ft.default}}),Object.defineProperty(it,"endsWith",{enumerable:!0,get:function(){return Ut.default}}),Object.defineProperty(it,"contains",{enumerable:!0,get:function(){return Jt.default}}),Object.defineProperty(it,"uuid",{enumerable:!0,get:function(){return hn.default}}),Object.defineProperty(it,"randomInt",{enumerable:!0,get:function(){return Xt.default}}),Object.defineProperty(it,"getCssRules",{enumerable:!0,get:function(){return zt.getCssRules}}),Object.defineProperty(it,"getCssRule",{enumerable:!0,get:function(){return zt.getCssRule}}),Object.defineProperty(it,"getNodeSelector",{enumerable:!0,get:function(){return cn.default}}),Object.defineProperty(it,"getGraphQLOperation",{enumerable:!0,get:function(){return vn.default}}),Object.defineProperty(it,"isSessionEvent",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(it,"isActivityEvent",{enumerable:!0,get:function(){return fn.default}}),Object.defineProperty(it,"parseIntFromHex",{enumerable:!0,get:function(){return mn.default}}),Object.defineProperty(it,"isRecordingSampled",{enumerable:!0,get:function(){return bn.default}}),Object.defineProperty(it,"makeRecordingID",{enumerable:!0,get:function(){return un.default}}),Object.defineProperty(it,"setFromArray",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(it,"setToArray",{enumerable:!0,get:function(){return kn.default}}),Object.defineProperty(it,"applyUrlSanitizer",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(it,"getMockDeveloperUser",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(it,"maybeCleanSwiftUIClassName",{enumerable:!0,get:function(){return En.default}}),Object.defineProperty(it,"LOG_FILTER_TYPES",{enumerable:!0,get:function(){return Rn.LOG_FILTER_TYPES}}),Object.defineProperty(it,"LOG_TYPES",{enumerable:!0,get:function(){return Rn.LOG_TYPES}}),Object.defineProperty(it,"METRIC_TIMESERIES_TYPE",{enumerable:!0,get:function(){return wn.METRIC_TIMESERIES_TYPE}}),Object.defineProperty(it,"HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"DEFAULT_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.DEFAULT_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return wn.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"SORT_DIRECTION",{enumerable:!0,get:function(){return wn.SORT_DIRECTION}}),Object.defineProperty(it,"FEEDBACK_SORT_COLUMN",{enumerable:!0,get:function(){return wn.FEEDBACK_SORT_COLUMN}}),Object.defineProperty(it,"METRIC_RETENTION_TYPE",{enumerable:!0,get:function(){return wn.METRIC_RETENTION_TYPE}}),Object.defineProperty(it,"ISSUE_TYPE",{enumerable:!0,get:function(){return Dn.ISSUE_TYPE}}),Object.defineProperty(it,"ISSUE_GROUP_TYPE",{enumerable:!0,get:function(){return Dn.ISSUE_GROUP_TYPE}}),Object.defineProperty(it,"ES_ISSUE_TYPE_BASE_FILTER",{enumerable:!0,get:function(){return Dn.ES_ISSUE_TYPE_BASE_FILTER}}),Object.defineProperty(it,"ES_ISSUE_TYPES",{enumerable:!0,get:function(){return Dn.ES_ISSUE_TYPES}}),Object.defineProperty(it,"findKeyFrames",{enumerable:!0,get:function(){return Bn.default}}),Object.defineProperty(it,"interpolate",{enumerable:!0,get:function(){return zn.default}}),Object.defineProperty(it,"interpolateMobile",{enumerable:!0,get:function(){return zn.interpolateMobile}}),Object.defineProperty(it,"removeOutdated",{enumerable:!0,get:function(){return Hn.default}}),Object.defineProperty(it,"DELIGHTED_RESPONSES_REGEX",{enumerable:!0,get:function(){return nr.DELIGHTED_RESPONSES_REGEX}}),Object.defineProperty(it,"WOOTRIC_RESPONSES_REGEX",{enumerable:!0,get:function(){return nr.WOOTRIC_RESPONSES_REGEX}}),Object.defineProperty(it,"REPLAY_TYPE",{enumerable:!0,get:function(){return sn.REPLAY_TYPE}}),Object.defineProperty(it,"SDK_REPLAY_TYPE",{enumerable:!0,get:function(){return Gn.SDK_REPLAY_TYPE}}),Object.defineProperty(it,"SDK_TYPE",{enumerable:!0,get:function(){return Gn.SDK_TYPE}}),Object.defineProperty(it,"SDK_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Gn.SDK_TYPE_TO_DISPLAY}}),Object.defineProperty(it,"SESSION_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Gn.SESSION_TYPE_TO_DISPLAY}}),Object.defineProperty(it,"STATUS_CODES",{enumerable:!0,get:function(){return Zn.STATUS_CODES}}),Object.defineProperty(it,"getStatusText",{enumerable:!0,get:function(){return Zn.getStatusText}}),Object.defineProperty(it,"parseQueryString",{enumerable:!0,get:function(){return rr.parseQueryString}}),Object.defineProperty(it,"likeOperator",{enumerable:!0,get:function(){return Fn.likeOperator}}),Object.defineProperty(it,"scrollMapHistogramToPercent",{enumerable:!0,get:function(){return Xn.default}}),Object.defineProperty(it,"combineHashes",{enumerable:!0,get:function(){return Yn.combineHashes}}),Object.defineProperty(it,"hashString",{enumerable:!0,get:function(){return Yn.hashString}}),Object.defineProperty(it,"encodeUserTraitString",{enumerable:!0,get:function(){return Nn.encodeUserTraitString}}),Object.defineProperty(it,"parseUserTraitString",{enumerable:!0,get:function(){return Nn.parseUserTraitString}}),Object.defineProperty(it,"IdentityStatus",{enumerable:!0,get:function(){return Un.IdentityStatus}}),Object.defineProperty(it,"parseIdentityStatus",{enumerable:!0,get:function(){return Un.parseIdentityStatus}}),Object.defineProperty(it,"scrubException",{enumerable:!0,get:function(){return Cn.scrubException}}),it.MobileConstants=void 0;var gt=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),dt=et(s("./packages/@logrocket/utils/src/shallowArsonify.js")),pt=et(s("./packages/@logrocket/utils/src/shallowDearsonify.js")),st=et(s("./packages/@logrocket/utils/src/deepArsonify.js")),ht=et(s("./packages/@logrocket/utils/src/deepDearsonify.js")),at=et(s("./packages/@logrocket/utils/src/addListener.js")),ut=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ft=et(s("./packages/@logrocket/utils/src/findIndex.js")),mt=et(s("./packages/@logrocket/utils/src/find.js")),yt=et(s("./packages/@logrocket/utils/src/flatten.js")),At=et(s("./packages/@logrocket/utils/src/selectorMatches.js")),wt=et(s("./packages/@logrocket/utils/src/parseSelectorForMatch.js")),Pt=et(s("./packages/@logrocket/utils/src/querySelectorWithShadowDom.js")),Rt=Dt(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),kt=et(s("./packages/@logrocket/utils/src/sanitizeValue.js")),bt=s("./packages/@logrocket/utils/src/adjustOsVersion.ts"),Nt=et(s("./packages/@logrocket/utils/src/selectorFromNodePath.js")),Ft=et(s("./packages/@logrocket/utils/src/startsWith.js")),Ut=et(s("./packages/@logrocket/utils/src/endsWith.js")),Jt=et(s("./packages/@logrocket/utils/src/contains.js")),hn=et(s("./packages/@logrocket/utils/src/uuid.js")),Xt=et(s("./packages/@logrocket/utils/src/randomInt.js")),zt=s("./packages/@logrocket/utils/src/getCssRules.ts"),cn=et(s("./packages/@logrocket/utils/src/getNodeSelector.js")),vn=et(s("./packages/@logrocket/utils/src/getGraphQLOperation.js")),Sn=et(s("./packages/@logrocket/utils/src/isSessionEvent.js")),fn=et(s("./packages/@logrocket/utils/src/isActivityEvent.js")),mn=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),bn=et(s("./packages/@logrocket/utils/src/isRecordingSampled.js")),un=et(s("./packages/@logrocket/utils/src/makeRecordingID.js")),Tn=et(s("./packages/@logrocket/utils/src/setFromArray.js")),kn=et(s("./packages/@logrocket/utils/src/setToArray.js")),xn=et(s("./packages/@logrocket/utils/src/applyUrlSanitizer.js")),An=et(s("./packages/@logrocket/utils/src/getMockDeveloperUser.js")),En=et(s("./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts")),Rn=s("./packages/@logrocket/utils/src/constants/logTypes.js"),wn=s("./packages/@logrocket/utils/src/constants/metrics.js"),Dn=s("./packages/@logrocket/utils/src/constants/issues.ts"),Bn=et(s("./packages/@logrocket/utils/src/findKeyFrames.js")),zn=Dt(s("./packages/@logrocket/utils/src/interpolate.js")),Hn=et(s("./packages/@logrocket/utils/src/removeOutdated.js")),nr=s("./packages/@logrocket/utils/src/constants/nps.js"),sn=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),Gn=s("./packages/@logrocket/utils/src/constants/sdkTypes.ts"),Zn=s("./packages/@logrocket/utils/src/constants/statusCodes.ts"),rr=s("./packages/@logrocket/utils/src/parseQueryString.js"),Fn=s("./packages/@logrocket/utils/src/likeOperator.js"),Xn=et(s("./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js")),Yn=s("./packages/@logrocket/utils/src/hashString.js"),Nn=s("./packages/@logrocket/utils/src/userTraitStrings.ts"),Un=s("./packages/@logrocket/utils/src/identityStatus.ts"),Cn=s("./packages/@logrocket/utils/src/scrubException.ts"),Mn=Dt(s("./packages/@logrocket/utils/src/constants/mobile.ts"));it.MobileConstants=Mn;var Kt=s("./packages/@logrocket/utils/src/browserUtils.js");Object.keys(Kt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(ot,Et)||Et in it&&it[Et]===Kt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return Kt[Et]}})});var Ot=s("./packages/@logrocket/utils/src/isValidAppID.ts");Object.keys(Ot).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(ot,Et)||Et in it&&it[Et]===Ot[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return Ot[Et]}})});var lt=s("./packages/@logrocket/utils/src/requireValue.ts");Object.keys(lt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(ot,Et)||Et in it&&it[Et]===lt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return lt[Et]}})});var Tt=s("./packages/@logrocket/utils/src/types.ts");Object.keys(Tt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(ot,Et)||Et in it&&it[Et]===Tt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return Tt[Et]}})});function It(Et){if(typeof WeakMap!="function")return null;var $t=new WeakMap,xt=new WeakMap;return(It=function(Zt){return Zt?xt:$t})(Et)}function Dt(Et,$t){if(!$t&&Et&&Et.__esModule)return Et;if(Et===null||rt(Et)!=="object"&&typeof Et!="function")return{default:Et};var xt=It($t);if(xt&&xt.has(Et))return xt.get(Et);var Vt={},Zt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var an in Et)if(an!=="default"&&Object.prototype.hasOwnProperty.call(Et,an)){var qt=Zt?Object.getOwnPropertyDescriptor(Et,an):null;qt&&(qt.get||qt.set)?Object.defineProperty(Vt,an,qt):Vt[an]=Et[an]}return Vt.default=Et,xt&&xt.set(Et,Vt),Vt}},"./packages/@logrocket/utils/src/interpolate.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ht,it.interpolateMobile=at;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js"));function ot(ut,ft){var mt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!mt){if(Array.isArray(ut)||(mt=gt(ut))||ft&&ut&&typeof ut.length=="number"){mt&&(ut=mt);var yt=0,At=function(){};return{s:At,n:function(){return yt>=ut.length?{done:!0}:{done:!1,value:ut[yt++]}},e:function(bt){throw bt},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt=!0,Pt=!1,Rt;return{s:function(){mt=mt.call(ut)},n:function(){var bt=mt.next();return wt=bt.done,bt},e:function(bt){Pt=!0,Rt=bt},f:function(){try{!wt&&mt.return!=null&&mt.return()}finally{if(Pt)throw Rt}}}}function gt(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var mt=Object.prototype.toString.call(ut).slice(8,-1);if(mt==="Object"&&ut.constructor&&(mt=ut.constructor.name),mt==="Map"||mt==="Set")return Array.from(ut);if(mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var mt=0,yt=new Array(ft);mt<ft;mt++)yt[mt]=ut[mt];return yt}function pt(ut,ft){var mt=Object.keys(ut);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(ut);ft&&(yt=yt.filter(function(At){return Object.getOwnPropertyDescriptor(ut,At).enumerable})),mt.push.apply(mt,yt)}return mt}function st(ut){for(var ft=1;ft<arguments.length;ft++){var mt=arguments[ft]!=null?arguments[ft]:{};ft%2?pt(Object(mt),!0).forEach(function(yt){(0,rt.default)(ut,yt,mt[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(mt)):pt(Object(mt)).forEach(function(yt){Object.defineProperty(ut,yt,Object.getOwnPropertyDescriptor(mt,yt))})}return ut}function ht(ut,ft){if(!ut)return{};var mt=ut.prev,yt=ut.next,At=ut.ratio,wt=st({},yt),Pt=ot(ft),Rt;try{for(Pt.s();!(Rt=Pt.n()).done;){var kt=Rt.value;wt[kt]=mt[kt]+(yt[kt]-mt[kt])*At}}catch(bt){Pt.e(bt)}finally{Pt.f()}return wt}function at(ut,ft,mt){if(!ut)return{};var yt=ut.prev,At=ut.next;return At.type==="MOVE"?ht(ut,ft):yt===At&&Math.abs(mt-At.time)>500?null:At}},"./packages/@logrocket/utils/src/isActivityEvent.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=["lr.browser.MouseEvent","lr.browser.ScrollEvent","lr.browser.InputEvent","lr.browser.InputChangeEvent","lr.android.TouchEvent","lr.android.InputChangeEvent","lr.ios.TouchEvent","lr.ios.InputChangeEvent"];return rt.indexOf(et)>-1}},"./packages/@logrocket/utils/src/isRecordingSampled.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=gt;var rt=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),ot=1e4;function gt(dt,pt){if(pt<=0)return!1;var st=Math.floor(pt*ot),ht=(0,rt.default)(dt),at=ht%ot;return at<=st}},"./packages/@logrocket/utils/src/isSessionEvent.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s=["lr.browser.NavigationEvent","lr.browser.InputChangeEvent","lr.browser.InputEvent"];function et(rt){return s.indexOf(rt.type)>-1||rt.data.eventType==="CLICK"}},"./packages/@logrocket/utils/src/isValidAppID.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.isValidAppID=et;var s=/^[a-z0-9_-]+\/[a-z0-9_-]+$/;function et(rt){return typeof rt=="string"&&s.test(rt)}},"./packages/@logrocket/utils/src/likeOperator.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.likeOperator=s;function s(et,rt){var ot=rt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),gt=ot.replace(/\\\*/g,".*").replace(/\\\?/g,"."),dt=new RegExp("^".concat(gt,"$"));return dt.test(et)}},"./packages/@logrocket/utils/src/logError.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var s=typeof console<"u"&&console.error&&console.error.bind,et=s?console.error.bind(console):function(){},rt=et;it.default=rt},"./packages/@logrocket/utils/src/makeRecordingID.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ot;var rt=et(s("./packages/@logrocket/utils/src/uuid.js"));function ot(){var gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=gt.prefix,pt=dt===void 0?5:dt;return"".concat(pt,"-").concat((0,rt.default)())}},"./packages/@logrocket/utils/src/mapValues.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){if(et==null)return{};var ot={};return Object.keys(et).forEach(function(gt){ot[gt]=rt(et[gt])}),ot}},"./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){return et.replace(/</g,"%3c").replace(/>/g,"%3e").replace(/\s/g,"")}},"./packages/@logrocket/utils/src/parseIntFromHex.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=et.replace(/[^0-9a-f]/g,"");return parseInt("0x".concat(rt),16)||0}},"./packages/@logrocket/utils/src/parseQueryString.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.parseQueryString=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),ot=function(pt){var st={},ht=pt.split("&");return ht.forEach(function(at){var ut=at.split("=").map(function(At){return At.replace(/\+/g," ")}).map(decodeURIComponent),ft=(0,rt.default)(ut,2),mt=ft[0],yt=ft[1];st[mt]=yt}),st},gt=function(pt){var st=pt.indexOf("?");if(st===-1)return{};var ht=pt.substring(st+1);return ot(ht)};it.parseQueryString=gt},"./packages/@logrocket/utils/src/parseSelectorForMatch.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=st;var rt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),gt=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt="~",pt=":nth-child(";function st(ht){var at=ht.replace(/\s*>\s*|:nth-child\(([1-9][0-9]*|odd|even)\)|\s+/gi,function(ut){return ut.indexOf(">")>-1?" >":ut.trim().length===0?" ":"".concat(dt).concat(ut.slice(pt.length))});return at.split(/\s+/).map(function(ut){var ft={},mt=ut;if(mt.charAt(0)===">"&&(ft.directDesc=!0,mt=mt.slice(1)),mt=mt.replace(/^([a-z0-9-_]+)/ig,function(Rt){return ft.nodeName=Rt,""}),mt.charAt(0)===dt){var yt=mt.slice(1).split(")"),At=(0,ot.default)(yt,2),wt=At[0],Pt=At[1];ft.nthChild=wt,mt=Pt}return mt.replace(/\.|#/gi,function(Rt){return" ".concat(Rt)}).trim().split(" ").forEach(function(Rt){if((0,gt.default)(Rt,".")){var kt=Rt.slice(1);ft.classList=ft.classList?[].concat((0,rt.default)(ft.classList),[kt]):[kt]}else(0,gt.default)(Rt,"#")&&(ft.id=Rt.slice(1))}),ft})}},"./packages/@logrocket/utils/src/protectFunc.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=gt;var rt=et(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),ot=et(s("./packages/@logrocket/utils/src/logError.js"));function gt(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var st;try{st=dt.apply(void 0,arguments)}catch(at){if(typeof window<"u"&&window._lrdebug)throw at;var ht=pt(at);(0,ot.default)("LogRocket",at),(0,rt.default)(at,ht)}return st}}},"./packages/@logrocket/utils/src/querySelectorWithShadowDom.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt,it.caseInsensitiveQuerySelector=void 0;function s(pt,st){var ht=typeof Symbol<"u"&&pt[Symbol.iterator]||pt["@@iterator"];if(!ht){if(Array.isArray(pt)||(ht=et(pt))||st&&pt&&typeof pt.length=="number"){ht&&(pt=ht);var at=0,ut=function(){};return{s:ut,n:function(){return at>=pt.length?{done:!0}:{done:!1,value:pt[at++]}},e:function(wt){throw wt},f:ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ft=!0,mt=!1,yt;return{s:function(){ht=ht.call(pt)},n:function(){var wt=ht.next();return ft=wt.done,wt},e:function(wt){mt=!0,yt=wt},f:function(){try{!ft&&ht.return!=null&&ht.return()}finally{if(mt)throw yt}}}}function et(pt,st){if(pt){if(typeof pt=="string")return rt(pt,st);var ht=Object.prototype.toString.call(pt).slice(8,-1);if(ht==="Object"&&pt.constructor&&(ht=pt.constructor.name),ht==="Map"||ht==="Set")return Array.from(pt);if(ht==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ht))return rt(pt,st)}}function rt(pt,st){(st==null||st>pt.length)&&(st=pt.length);for(var ht=0,at=new Array(st);ht<st;ht++)at[ht]=pt[ht];return at}var ot=function(st){var ht=st.root,at=st.selectorList,ut=st.directDesc,ft=at[0].split(/(?=\.)|(?=#)/),mt=ft.shift(),yt="",At=[];ft.forEach(function(Ft){Ft[0]==="#"&&(yt=Ft.toLowerCase().substring(1).trim()),Ft[0]==="."&&At.push(Ft.toLowerCase().substring(1).trim())});var wt;ut?wt=[ht.querySelector(":scope > ".concat(mt))]:wt=ht.querySelectorAll(mt);var Pt=[],Rt=s(wt),kt;try{var bt=function(){var Ut=kt.value;if(!Ut||yt!==Ut.id.toLowerCase())return"continue";var Jt=Array.from(Ut.classList.values()).map(function(hn){return hn.toLowerCase()}).filter(function(hn){return hn!==""&&hn[0]!==":"});if(!At.every(function(hn){return Jt.indexOf(hn)>-1}))return"continue";Pt.push(Ut)};for(Rt.s();!(kt=Rt.n()).done;)var Nt=bt()}catch(Ft){Rt.e(Ft)}finally{Rt.f()}return Pt},gt=function(st,ht){if(!ht.length)return null;var at;if(st.host?at=st:at=st.querySelector("body"),!at)return null;for(var ut=[{matches:[at],selectorList:ht.split(" > "),directDesc:!1}];ut.length;){var ft=ut.shift(),mt=ft.matches,yt=ft.selectorList,At=ft.directDesc,wt=s(mt),Pt;try{for(wt.s();!(Pt=wt.n()).done;){var Rt=Pt.value,kt=ot({root:Rt,selectorList:yt,directDesc:At});if(kt.length&&yt.length===1)return kt[0];kt.length&&ut.push({matches:kt,selectorList:yt.slice(1),directDesc:!0})}}catch(bt){wt.e(bt)}finally{wt.f()}}return null};it.caseInsensitiveQuerySelector=gt;function dt(pt,st){if(st.startsWith("$shadow-root >"))throw new Error("Malformed selector '".concat(st,"': should not start with $shadow-root"));st.endsWith("> $shadow-root")&&(st=st.slice(0,st.length-14));for(var ht=pt,at,ut=st.split("> $shadow-root >"),ft=0;ft<ut.length;ft++)if(at=gt(ht,ut[ft]),at&&ft<ut.length-1)if(at.shadowRoot)ht=at.shadowRoot;else throw new Error("Missing shadowRoot for selector '".concat(st,"' at depth ").concat(ft));return{root:ht,node:at}}},"./packages/@logrocket/utils/src/randomInt.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){var ot=Math.ceil(et),gt=Math.floor(rt);return Math.floor(Math.random()*(gt-ot))+ot}},"./packages/@logrocket/utils/src/removeOutdated.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=gt;var rt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js")),ot=5e3;function gt(dt,pt){if(dt.length===0)return dt;var st=(0,rt.default)(dt,{time:pt.time-ot},"time")-1,ht=dt[st];return ht&&pt.time-ht.time>ot&&st>0?dt.slice(st):dt}},"./packages/@logrocket/utils/src/requireValue.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.requireValue=void 0;var s=function(rt){if(typeof rt>"u")throw new Error("Value must not be undefined.");return rt};it.requireValue=s},"./packages/@logrocket/utils/src/sanitizeValue.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s=function(ot){for(var gt="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ",dt=Math.ceil(ot.length/gt.length),pt="";dt>0;)pt+=gt,dt--;return pt.slice(0,ot.length)};function et(rt,ot){var gt=String(rt);return String(ot).toLowerCase()==="lipsum"?s(gt):""}},"./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){for(var ot=[],gt=et.reduce(function(ht,at){return ht+at.count},0),dt=0,pt=1;pt<=100;pt++){var st=rt*(pt*.01);dt>=et.length?ot.push(0):(ot.push(gt),st>et[dt].maxScroll&&(gt-=et[dt].count,dt++))}return ot}},"./packages/@logrocket/utils/src/scrubException.ts":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.scrubException=at;var rt=et(s("./node_modules/@babel/runtime/helpers/typeof.js"));function ot(ut,ft){var mt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!mt){if(Array.isArray(ut)||(mt=gt(ut))||ft&&ut&&typeof ut.length=="number"){mt&&(ut=mt);var yt=0,At=function(){};return{s:At,n:function(){return yt>=ut.length?{done:!0}:{done:!1,value:ut[yt++]}},e:function(bt){throw bt},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt=!0,Pt=!1,Rt;return{s:function(){mt=mt.call(ut)},n:function(){var bt=mt.next();return wt=bt.done,bt},e:function(bt){Pt=!0,Rt=bt},f:function(){try{!wt&&mt.return!=null&&mt.return()}finally{if(Pt)throw Rt}}}}function gt(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var mt=Object.prototype.toString.call(ut).slice(8,-1);if(mt==="Object"&&ut.constructor&&(mt=ut.constructor.name),mt==="Map"||mt==="Set")return Array.from(ut);if(mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var mt=0,yt=new Array(ft);mt<ft;mt++)yt[mt]=ut[mt];return yt}function pt(ut){return/boolean|number|string/.test((0,rt.default)(ut))}var st=["level","logger"],ht=["tags","extra"];function at(ut,ft){if(ft){var mt=ot(st),yt;try{for(mt.s();!(yt=mt.n()).done;){var At=yt.value,wt=ft[At];pt(wt)&&(ut[At]=wt.toString())}}catch(Xt){mt.e(Xt)}finally{mt.f()}var Pt=ot(ht),Rt;try{for(Pt.s();!(Rt=Pt.n()).done;){for(var kt=Rt.value,bt=ft[kt]||{},Nt={},Ft=0,Ut=Object.keys(bt);Ft<Ut.length;Ft++){var Jt=Ut[Ft],hn=bt[Jt];pt(hn)&&(Nt[Jt.toString()]=hn.toString())}ut[kt]=Nt}}catch(Xt){Pt.e(Xt)}finally{Pt.f()}}}},"./packages/@logrocket/utils/src/selectorFromNodePath.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=pt;var rt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"));function ot(st,ht){var at=typeof Symbol<"u"&&st[Symbol.iterator]||st["@@iterator"];if(!at){if(Array.isArray(st)||(at=gt(st))||ht&&st&&typeof st.length=="number"){at&&(st=at);var ut=0,ft=function(){};return{s:ft,n:function(){return ut>=st.length?{done:!0}:{done:!1,value:st[ut++]}},e:function(Pt){throw Pt},f:ft}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mt=!0,yt=!1,At;return{s:function(){at=at.call(st)},n:function(){var Pt=at.next();return mt=Pt.done,Pt},e:function(Pt){yt=!0,At=Pt},f:function(){try{!mt&&at.return!=null&&at.return()}finally{if(yt)throw At}}}}function gt(st,ht){if(st){if(typeof st=="string")return dt(st,ht);var at=Object.prototype.toString.call(st).slice(8,-1);if(at==="Object"&&st.constructor&&(at=st.constructor.name),at==="Map"||at==="Set")return Array.from(st);if(at==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(at))return dt(st,ht)}}function dt(st,ht){(ht==null||ht>st.length)&&(ht=st.length);for(var at=0,ut=new Array(ht);at<ht;at++)ut[at]=st[at];return ut}function pt(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ht=[],at=ot((0,rt.default)(st).reverse()),ut;try{var ft=function(){var yt=ut.value,At=yt.nodeName,wt=yt.id,Pt=yt.nthChild,Rt=yt.classList,kt=[],bt=[];Pt&&bt.push("nth-child(".concat(Pt,")")),At&&(kt.push(At),bt.sort().map(function(Nt){return kt.push(":".concat(Nt))})),wt&&kt.push("#".concat(wt)),Rt&&Rt.length&&(Rt=Rt.map(function(Nt){return Nt.toLowerCase()}).sort(),kt=[].concat((0,rt.default)(kt),(0,rt.default)(Rt.map(function(Nt){return".".concat(Nt)})))),kt.length&&ht.push(kt.join(" "))};for(at.s();!(ut=at.n()).done;)ft()}catch(mt){at.e(mt)}finally{at.f()}return ht.join(" > ")}},"./packages/@logrocket/utils/src/selectorMatches.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=at;var rt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),ot=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),gt=et(s("./packages/@logrocket/utils/src/findIndex.js"));function dt(ut,ft){var mt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!mt){if(Array.isArray(ut)||(mt=pt(ut))||ft&&ut&&typeof ut.length=="number"){mt&&(ut=mt);var yt=0,At=function(){};return{s:At,n:function(){return yt>=ut.length?{done:!0}:{done:!1,value:ut[yt++]}},e:function(bt){throw bt},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wt=!0,Pt=!1,Rt;return{s:function(){mt=mt.call(ut)},n:function(){var bt=mt.next();return wt=bt.done,bt},e:function(bt){Pt=!0,Rt=bt},f:function(){try{!wt&&mt.return!=null&&mt.return()}finally{if(Pt)throw Rt}}}}function pt(ut,ft){if(ut){if(typeof ut=="string")return st(ut,ft);var mt=Object.prototype.toString.call(ut).slice(8,-1);if(mt==="Object"&&ut.constructor&&(mt=ut.constructor.name),mt==="Map"||mt==="Set")return Array.from(ut);if(mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return st(ut,ft)}}function st(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var mt=0,yt=new Array(ft);mt<ft;mt++)yt[mt]=ut[mt];return yt}function ht(ut,ft){if(!(ut&&ft)||ut.id&&ut.id!==ft.id||ut.nodeName&&ut.nodeName!==ft.nodeName||ut.classList&&(!ft.classList||ut.classList.map(function(yt){return yt.toLowerCase()}).some(function(yt){return ft.classList.map(function(At){return At.toLowerCase()}).indexOf(yt)===-1})))return!1;if(ut.nthChild){var mt=parseInt(ut.nthChild,10);return isNaN(mt)?Math.abs(ft.nthChild%2)===(ut.nthChild==="odd"?1:0):mt===ft.nthChild}return!0}function at(ut,ft){var mt=ut.slice(0).reverse(),yt,At=dt(ft),wt;try{var Pt=function(){var bt=wt.value;if(bt.directDesc)return ht.apply(void 0,[bt].concat((0,rt.default)(mt.splice(0,1))))?"continue":{v:!1};if(yt=(0,gt.default)(mt,function(Nt){return ht(bt,Nt)}),yt===-1)return{v:!1};mt.splice(0,yt+1)};for(At.s();!(wt=At.n()).done;){var Rt=Pt();if(Rt!=="continue"&&(0,ot.default)(Rt)==="object")return Rt.v}}catch(kt){At.e(kt)}finally{At.f()}return!0}},"./packages/@logrocket/utils/src/sendTelemetryData.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.sendTelemetry=at,it.default=ut;var rt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),ot=et(s("./packages/@logrocket/utils/src/logError.js")),gt=et(s("./packages/@logrocket/utils/src/TraceKit.js"));function dt(ft,mt){var yt=Object.keys(ft);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(ft);mt&&(At=At.filter(function(wt){return Object.getOwnPropertyDescriptor(ft,wt).enumerable})),yt.push.apply(yt,At)}return yt}function pt(ft){for(var mt=1;mt<arguments.length;mt++){var yt=arguments[mt]!=null?arguments[mt]:{};mt%2?dt(Object(yt),!0).forEach(function(At){(0,rt.default)(ft,At,yt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(yt)):dt(Object(yt)).forEach(function(At){Object.defineProperty(ft,At,Object.getOwnPropertyDescriptor(yt,At))})}return ft}var st="b0db2bde13abbdaac4ddf7651e7be60eb639ccf7";function ht(ft){var mt=window._lrXMLHttpRequest||XMLHttpRequest;try{var yt=new mt,At=ft.message,wt="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793";yt.open("POST",wt),yt.send(JSON.stringify(pt({message:At,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:st,environment:"test"},ft)))}catch(Pt){(0,ot.default)("Failed to send",Pt)}}function at(ft,mt){if(typeof window<"u"&&window._lrdebug)return void(0,ot.default)(ft);mt&&mt.extra&&mt.extra.appID&&typeof mt.extra.appID.indexOf=="function"&&mt.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||ht(pt({message:ft},mt))}function ut(ft,mt){try{var yt=ft.message,At;try{At=JSON.stringify(mt).slice(0,1e3)}catch{try{At="Could not stringify payload: ".concat(Object.prototype.toString.call(mt))}catch{}}var wt;try{wt=gt.default.computeStackTrace(ft).stack.map(function(Pt){return{filename:Pt.url,lineno:Pt.line,colno:Pt.column,function:Pt.func||"?"}})}catch{}ht({message:yt,extra:{stringPayload:At},exception:{values:[{type:ft.type,value:yt,stacktrace:{frames:wt}}]}})}catch(Pt){(0,ot.default)("Failed to send",Pt)}}},"./packages/@logrocket/utils/src/setFromArray.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=new Set;return et.forEach(function(ot){return rt.add(ot)}),rt}},"./packages/@logrocket/utils/src/setToArray.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=[];return et.forEach(function(ot){return rt.push(ot)}),rt}},"./packages/@logrocket/utils/src/shallowArsonify.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt={}.toString.call(et);switch(rt){case"[object Undefined]":return{undefined:{}};case"[object Null]":return{null:{}};case"[object Boolean]":return{boolean:{bool:et}};case"[object Number]":return{number:{double:et}};case"[object String]":return{string:{string:et}};case"[object Object]":return{object:{map:et}};case"[object Array]":return{array:{map:et}};case"[object Date]":return{date:{double:et.getTime()}};case"[object Error]":return{string:{string:"".concat(et.name,": ").concat(et.message)}};default:return{unsupported:{type:rt}}}}},"./packages/@logrocket/utils/src/shallowDearsonify.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var rt=et.type||Object.keys(et)[0];switch(rt){case"undefined":return;case"null":return null;case"boolean":return et.boolean.bool;case"number":return et.number.double;case"string":return et.string.string;case"object":return et.object.map;case"array":return Object.keys(et.array.map).reduce(function(ot,gt){return ot[gt]=et.array.map[gt],ot},[]);case"date":return new Date(et.date.double);case"unsupported":return et.unsupported.type;default:throw new TypeError("Unexpected value in shallowDearsonify: ".concat(et))}}},"./packages/@logrocket/utils/src/startsWith.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,rt){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return et&&rt&&et.substring(ot,ot+rt.length)===rt}},"./packages/@logrocket/utils/src/types.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0})},"./packages/@logrocket/utils/src/userTraitStrings.ts":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.parseUserTraitString=it.encodeUserTraitString=void 0;var s=":",et=String.fromCharCode(26),rt=function(){for(var dt=arguments.length,pt=new Array(dt),st=0;st<dt;st++)pt[st]=arguments[st];return pt.map(function(ht){return ht.replace(new RegExp(s,"g"),et)}).join(s)};it.encodeUserTraitString=rt;var ot=function(dt){var pt=dt||s;return pt.split(s).map(function(st){return st.replace(new RegExp(et,"g"),s)})};it.parseUserTraitString=ot},"./packages/@logrocket/utils/src/uuid.js":function(nt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){return et?(et^Math.random()*16>>et/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s)}},"./packages/logrocket/src/LogRocket.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=it.MAX_QUEUE_SIZE=void 0;var rt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),ot=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),gt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),pt=et(s("./packages/@logrocket/network/src/index.js")),st=s("./packages/@logrocket/exceptions/src/index.js"),ht=et(s("./packages/@logrocket/console/src/index.js")),at=s("./packages/@logrocket/redux/src/index.js");function ut(wt,Pt){var Rt=Object.keys(wt);if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(wt);Pt&&(kt=kt.filter(function(bt){return Object.getOwnPropertyDescriptor(wt,bt).enumerable})),Rt.push.apply(Rt,kt)}return Rt}function ft(wt){for(var Pt=1;Pt<arguments.length;Pt++){var Rt=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?ut(Object(Rt),!0).forEach(function(kt){(0,gt.default)(wt,kt,Rt[kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(wt,Object.getOwnPropertyDescriptors(Rt)):ut(Object(Rt)).forEach(function(kt){Object.defineProperty(wt,kt,Object.getOwnPropertyDescriptor(Rt,kt))})}return wt}var mt=1e3;it.MAX_QUEUE_SIZE=mt;var yt=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=Pt.ingestServer,kt=(0,dt.default)(Pt,["ingestServer"]);return Rt?ft({serverURL:"".concat(Rt,"/i"),statsURL:"".concat(Rt,"/s")},kt):kt},At=function(){function wt(){var Pt=this;(0,rt.default)(this,wt),this._buffer=[],["log","info","warn","error","debug"].forEach(function(Rt){Pt[Rt]=function(){for(var kt=arguments.length,bt=new Array(kt),Nt=0;Nt<kt;Nt++)bt[Nt]=arguments[Nt];Pt.addEvent("lr.core.LogEvent",function(){var Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rt==="error"&&Ft.shouldAggregateConsoleErrors&&st.Capture.captureMessage(Pt,bt[0],bt,{},!0),{logLevel:Rt.toUpperCase(),args:bt}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,ot.default)(wt,[{key:"addEvent",value:function(Rt,kt){var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Nt=Date.now();this._run(function(Ft){Ft.addEvent(Rt,kt,ft(ft({},bt),{},{timeOverride:Nt}))})}},{key:"onLogger",value:function(Rt){for(this._logger=Rt;this._buffer.length>0;){var kt=this._buffer.shift();kt(this._logger)}}},{key:"_run",value:function(Rt){if(!this._isDisabled)if(this._logger)Rt(this._logger);else{if(this._buffer.length>=mt){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(Rt.bind(this))}}},{key:"init",value:function(Rt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var bt=kt.shouldAugmentNPS,Nt=bt===void 0?!0:bt,Ft=kt.shouldParseXHRBlob,Ut=Ft===void 0?!1:Ft,Jt=kt.shouldDetectExceptions,hn=Jt===void 0?!0:Jt;hn&&this._installed.push((0,st.registerExceptions)(this)),this._installed.push((0,pt.default)(this,{shouldAugmentNPS:!!Nt,shouldParseXHRBlob:!!Ut})),this._installed.push((0,ht.default)(this)),this._isInitialized=!0,this._run(function(Xt){Xt.init(Rt,yt(kt))})}}},{key:"start",value:function(){this._run(function(Rt){Rt.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(Rt){return Rt()}),this._buffer=[],this._run(function(Rt){Rt.uninstall()})}},{key:"identify",value:function(Rt,kt){this._run(function(bt){bt.identify(Rt,kt)})}},{key:"startNewSession",value:function(){this._run(function(Rt){Rt.startNewSession()})}},{key:"track",value:function(Rt,kt){this._run(function(bt){bt.track(Rt,kt)})}},{key:"getSessionURL",value:function(Rt){if(typeof Rt!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(kt){kt.getSessionURL?kt.getSessionURL(Rt):Rt(kt.recordingURL)})}},{key:"getVersion",value:function(Rt){this._run(function(kt){Rt(kt.version)})}},{key:"captureMessage",value:function(Rt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};st.Capture.captureMessage(this,Rt,[Rt],kt)}},{key:"captureException",value:function(Rt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};st.Capture.captureException(this,Rt,kt)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,at.createEnhancer)(this,Rt)}},{key:"reduxMiddleware",value:function(){var Rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,at.createMiddleware)(this,Rt)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),wt}();it.default=At},"./packages/logrocket/src/makeLogRocket.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var rt=et(s("./packages/logrocket/src/LogRocket.js")),ot="LogRocket does not yet support React Native.",gt=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(ht){return function(){return ht.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(ht){return function(at){return ht(at)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(ot);if(typeof window<"u"){if(window._disableLogRocket)return gt();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var st=new rt.default;return pt(st),st}}return gt()}},"./packages/logrocket/src/setup.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var rt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),ot=et(s("./packages/logrocket/src/makeLogRocket.js")),gt={"cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com"};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},st=pt.enterpriseServer,ht=pt.sdkVersion,at=ht===void 0?"6.0.1":ht,ut=(0,rt.default)(pt,["enterpriseServer","sdkVersion"]),ft="https://cdn.logrocket.io",mt;if(at==="script")try{var yt=document.currentScript,At=yt.src.match(/^(https?:\/\/([^\\]+))\/.+$/),wt=At&&At[2];wt&&gt[wt]&&(ft=At&&At[1],mt=gt[wt])}catch{}else ft="https://cdn.lr-intake.com",mt="https://r.lr-intake.com";var Pt=ut.sdkServer||st,Rt=ut.ingestServer||st||mt,kt=(0,ot.default)(function(){var bt=document.createElement("script");Rt&&(typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(Rt,"/i"),window.__SDKCONFIG__.statsURL="".concat(Rt,"/s")),Pt?bt.src="".concat(Pt,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?bt.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?bt.src=window._lrAsyncScript:bt.src="".concat(ft,"/logger-1.min.js"),bt.async=!0,document.head.appendChild(bt),bt.onload=function(){typeof window._LRLogger=="function"?kt.onLogger(new window._LRLogger({sdkVersion:at})):(console.warn("LogRocket: script execution has been blocked by a product or service."),kt.uninstall())},bt.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),kt.uninstall()}});return kt}},"./packages/@logrocket/utils/node_modules/lodash/_DataView.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(rt,"DataView");nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_Hash.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_hashClear.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_hashGet.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_hashHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_hashSet.js");function pt(st){var ht=-1,at=st==null?0:st.length;for(this.clear();++ht<at;){var ut=st[ht];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=rt,pt.prototype.get=ot,pt.prototype.has=gt,pt.prototype.set=dt,nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_ListCache.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js");function pt(st){var ht=-1,at=st==null?0:st.length;for(this.clear();++ht<at;){var ut=st[ht];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=rt,pt.prototype.get=ot,pt.prototype.has=gt,pt.prototype.set=dt,nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Map.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(rt,"Map");nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_MapCache.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js");function pt(st){var ht=-1,at=st==null?0:st.length;for(this.clear();++ht<at;){var ut=st[ht];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=rt,pt.prototype.get=ot,pt.prototype.has=gt,pt.prototype.set=dt,nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Promise.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(rt,"Promise");nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_Set.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(rt,"Set");nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_SetCache.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js");function gt(dt){var pt=-1,st=dt==null?0:dt.length;for(this.__data__=new et;++pt<st;)this.add(dt[pt])}gt.prototype.add=gt.prototype.push=rt,gt.prototype.has=ot,nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_Stack.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_stackClear.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_stackGet.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_stackHas.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_stackSet.js");function st(ht){var at=this.__data__=new et(ht);this.size=at.size}st.prototype.clear=rt,st.prototype.delete=ot,st.prototype.get=gt,st.prototype.has=dt,st.prototype.set=pt,nt.exports=st},"./packages/@logrocket/utils/node_modules/lodash/_Symbol.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),rt=et.Symbol;nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),rt=et.Uint8Array;nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),ot=et(rt,"WeakMap");nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js":function(nt){function it(s,et){for(var rt=-1,ot=s==null?0:s.length,gt=0,dt=[];++rt<ot;){var pt=s[rt];et(pt,rt,s)&&(dt[gt++]=pt)}return dt}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),st=Object.prototype,ht=st.hasOwnProperty;function at(ut,ft){var mt=ot(ut),yt=!mt&&rt(ut),At=!mt&&!yt&&gt(ut),wt=!mt&&!yt&&!At&&pt(ut),Pt=mt||yt||At||wt,Rt=Pt?et(ut.length,String):[],kt=Rt.length;for(var bt in ut)(ft||ht.call(ut,bt))&&!(Pt&&(bt=="length"||At&&(bt=="offset"||bt=="parent")||wt&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||dt(bt,kt)))&&Rt.push(bt);return Rt}nt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js":function(nt){function it(s,et){for(var rt=-1,ot=s==null?0:s.length,gt=Array(ot);++rt<ot;)gt[rt]=et(s[rt],rt,s);return gt}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js":function(nt){function it(s,et){for(var rt=-1,ot=et.length,gt=s.length;++rt<ot;)s[gt+rt]=et[rt];return s}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arraySome.js":function(nt){function it(s,et){for(var rt=-1,ot=s==null?0:s.length;++rt<ot;)if(et(s[rt],rt,s))return!0;return!1}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/eq.js");function rt(ot,gt){for(var dt=ot.length;dt--;)if(et(ot[dt][0],gt))return dt;return-1}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_baseGet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function ot(gt,dt){dt=et(dt,gt);for(var pt=0,st=dt.length;gt!=null&&pt<st;)gt=gt[rt(dt[pt++])];return pt&&pt==st?gt:void 0}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js");function ot(gt,dt,pt){var st=dt(gt);return rt(gt)?st:et(st,pt(gt))}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_objectToString.js"),gt="[object Null]",dt="[object Undefined]",pt=et?et.toStringTag:void 0;function st(ht){return ht==null?ht===void 0?dt:gt:pt&&pt in Object(ht)?rt(ht):ot(ht)}nt.exports=st},"./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js":function(nt){function it(s,et){return s!=null&&et in Object(s)}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot="[object Arguments]";function gt(dt){return rt(dt)&&et(dt)==ot}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js");function ot(gt,dt,pt,st,ht){return gt===dt?!0:gt==null||dt==null||!rt(gt)&&!rt(dt)?gt!==gt&&dt!==dt:et(gt,dt,pt,st,ot,ht)}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_getTag.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),st=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),at=1,ut="[object Arguments]",ft="[object Array]",mt="[object Object]",yt=Object.prototype,At=yt.hasOwnProperty;function wt(Pt,Rt,kt,bt,Nt,Ft){var Ut=pt(Pt),Jt=pt(Rt),hn=Ut?ft:dt(Pt),Xt=Jt?ft:dt(Rt);hn=hn==ut?mt:hn,Xt=Xt==ut?mt:Xt;var zt=hn==mt,cn=Xt==mt,vn=hn==Xt;if(vn&&st(Pt)){if(!st(Rt))return!1;Ut=!0,zt=!1}if(vn&&!zt)return Ft||(Ft=new et),Ut||ht(Pt)?rt(Pt,Rt,kt,bt,Nt,Ft):ot(Pt,Rt,hn,kt,bt,Nt,Ft);if(!(kt&at)){var Sn=zt&&At.call(Pt,"__wrapped__"),fn=cn&&At.call(Rt,"__wrapped__");if(Sn||fn){var mn=Sn?Pt.value():Pt,bn=fn?Rt.value():Rt;return Ft||(Ft=new et),Nt(mn,bn,kt,bt,Ft)}}return vn?(Ft||(Ft=new et),gt(Pt,Rt,kt,bt,Nt,Ft)):!1}nt.exports=wt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),ot=1,gt=2;function dt(pt,st,ht,at){var ut=ht.length,ft=ut,mt=!at;if(pt==null)return!ft;for(pt=Object(pt);ut--;){var yt=ht[ut];if(mt&&yt[2]?yt[1]!==pt[yt[0]]:!(yt[0]in pt))return!1}for(;++ut<ft;){yt=ht[ut];var At=yt[0],wt=pt[At],Pt=yt[1];if(mt&&yt[2]){if(wt===void 0&&!(At in pt))return!1}else{var Rt=new et;if(at)var kt=at(wt,Pt,At,pt,st,Rt);if(!(kt===void 0?rt(Pt,wt,ot|gt,at,Rt):kt))return!1}}return!0}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_isMasked.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),dt=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,st=Function.prototype,ht=Object.prototype,at=st.toString,ut=ht.hasOwnProperty,ft=RegExp("^"+at.call(ut).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mt(yt){if(!ot(yt)||rt(yt))return!1;var At=et(yt)?ft:pt;return At.test(gt(yt))}nt.exports=mt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),gt="[object Arguments]",dt="[object Array]",pt="[object Boolean]",st="[object Date]",ht="[object Error]",at="[object Function]",ut="[object Map]",ft="[object Number]",mt="[object Object]",yt="[object RegExp]",At="[object Set]",wt="[object String]",Pt="[object WeakMap]",Rt="[object ArrayBuffer]",kt="[object DataView]",bt="[object Float32Array]",Nt="[object Float64Array]",Ft="[object Int8Array]",Ut="[object Int16Array]",Jt="[object Int32Array]",hn="[object Uint8Array]",Xt="[object Uint8ClampedArray]",zt="[object Uint16Array]",cn="[object Uint32Array]",vn={};vn[bt]=vn[Nt]=vn[Ft]=vn[Ut]=vn[Jt]=vn[hn]=vn[Xt]=vn[zt]=vn[cn]=!0,vn[gt]=vn[dt]=vn[Rt]=vn[pt]=vn[kt]=vn[st]=vn[ht]=vn[at]=vn[ut]=vn[ft]=vn[mt]=vn[yt]=vn[At]=vn[wt]=vn[Pt]=!1;function Sn(fn){return ot(fn)&&rt(fn.length)&&!!vn[et(fn)]}nt.exports=Sn},"./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/identity.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/property.js");function pt(st){return typeof st=="function"?st:st==null?ot:typeof st=="object"?gt(st)?rt(st[0],st[1]):et(st):dt(st)}nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js"),ot=Object.prototype,gt=ot.hasOwnProperty;function dt(pt){if(!et(pt))return rt(pt);var st=[];for(var ht in Object(pt))gt.call(pt,ht)&&ht!="constructor"&&st.push(ht);return st}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js");function gt(dt){var pt=rt(dt);return pt.length==1&&pt[0][2]?ot(pt[0][0],pt[0][1]):function(st){return st===dt||et(st,dt,pt)}}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/get.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/hasIn.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js"),st=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js"),ht=1,at=2;function ut(ft,mt){return gt(ft)&&dt(mt)?pt(st(ft),mt):function(yt){var At=rt(yt,ft);return At===void 0&&At===mt?ot(yt,ft):et(mt,At,ht|at)}}nt.exports=ut},"./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js":function(nt){function it(s){return function(et){return et==null?void 0:et[s]}}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function rt(ot){return function(gt){return et(gt,ot)}}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),rt=4294967295,ot=rt-1,gt=Math.floor,dt=Math.min;function pt(st,ht,at,ut){var ft=0,mt=st==null?0:st.length;if(mt===0)return 0;ht=at(ht);for(var yt=ht!==ht,At=ht===null,wt=et(ht),Pt=ht===void 0;ft<mt;){var Rt=gt((ft+mt)/2),kt=at(st[Rt]),bt=kt!==void 0,Nt=kt===null,Ft=kt===kt,Ut=et(kt);if(yt)var Jt=ut||Ft;else Pt?Jt=Ft&&(ut||bt):At?Jt=Ft&&bt&&(ut||!Nt):wt?Jt=Ft&&bt&&!Nt&&(ut||!Ut):Nt||Ut?Jt=!1:Jt=ut?kt<=ht:kt<ht;Jt?ft=Rt+1:mt=Rt}return dt(mt,ot)}nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js":function(nt){function it(s,et){for(var rt=-1,ot=Array(s);++rt<s;)ot[rt]=et(rt);return ot}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_baseToString.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),dt=1/0,pt=et?et.prototype:void 0,st=pt?pt.toString:void 0;function ht(at){if(typeof at=="string")return at;if(ot(at))return rt(at,ht)+"";if(gt(at))return st?st.call(at):"";var ut=at+"";return ut=="0"&&1/at==-dt?"-0":ut}nt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js":function(nt){function it(s){return function(et){return s(et)}}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js":function(nt){function it(s,et){return s.has(et)}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_castPath.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/toString.js");function dt(pt,st){return et(pt)?pt:rt(pt,st)?[pt]:ot(gt(pt))}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),rt=et["__core-js_shared__"];nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_SetCache.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_arraySome.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js"),gt=1,dt=2;function pt(st,ht,at,ut,ft,mt){var yt=at&gt,At=st.length,wt=ht.length;if(At!=wt&&!(yt&&wt>At))return!1;var Pt=mt.get(st),Rt=mt.get(ht);if(Pt&&Rt)return Pt==ht&&Rt==st;var kt=-1,bt=!0,Nt=at&dt?new et:void 0;for(mt.set(st,ht),mt.set(ht,st);++kt<At;){var Ft=st[kt],Ut=ht[kt];if(ut)var Jt=yt?ut(Ut,Ft,kt,ht,st,mt):ut(Ft,Ut,kt,st,ht,mt);if(Jt!==void 0){if(Jt)continue;bt=!1;break}if(Nt){if(!rt(ht,function(hn,Xt){if(!ot(Nt,Xt)&&(Ft===hn||ft(Ft,hn,at,ut,mt)))return Nt.push(Xt)})){bt=!1;break}}else if(!(Ft===Ut||ft(Ft,Ut,at,ut,mt))){bt=!1;break}}return mt.delete(st),mt.delete(ht),bt}nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/eq.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_setToArray.js"),st=1,ht=2,at="[object Boolean]",ut="[object Date]",ft="[object Error]",mt="[object Map]",yt="[object Number]",At="[object RegExp]",wt="[object Set]",Pt="[object String]",Rt="[object Symbol]",kt="[object ArrayBuffer]",bt="[object DataView]",Nt=et?et.prototype:void 0,Ft=Nt?Nt.valueOf:void 0;function Ut(Jt,hn,Xt,zt,cn,vn,Sn){switch(Xt){case bt:if(Jt.byteLength!=hn.byteLength||Jt.byteOffset!=hn.byteOffset)return!1;Jt=Jt.buffer,hn=hn.buffer;case kt:return!(Jt.byteLength!=hn.byteLength||!vn(new rt(Jt),new rt(hn)));case at:case ut:case yt:return ot(+Jt,+hn);case ft:return Jt.name==hn.name&&Jt.message==hn.message;case At:case Pt:return Jt==hn+"";case mt:var fn=dt;case wt:var mn=zt&st;if(fn||(fn=pt),Jt.size!=hn.size&&!mn)return!1;var bn=Sn.get(Jt);if(bn)return bn==hn;zt|=ht,Sn.set(Jt,hn);var un=gt(fn(Jt),fn(hn),zt,cn,vn,Sn);return Sn.delete(Jt),un;case Rt:if(Ft)return Ft.call(Jt)==Ft.call(hn)}return!1}nt.exports=Ut},"./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js"),rt=1,ot=Object.prototype,gt=ot.hasOwnProperty;function dt(pt,st,ht,at,ut,ft){var mt=ht&rt,yt=et(pt),At=yt.length,wt=et(st),Pt=wt.length;if(At!=Pt&&!mt)return!1;for(var Rt=At;Rt--;){var kt=yt[Rt];if(!(mt?kt in st:gt.call(st,kt)))return!1}var bt=ft.get(pt),Nt=ft.get(st);if(bt&&Nt)return bt==st&&Nt==pt;var Ft=!0;ft.set(pt,st),ft.set(st,pt);for(var Ut=mt;++Rt<At;){kt=yt[Rt];var Jt=pt[kt],hn=st[kt];if(at)var Xt=mt?at(hn,Jt,kt,st,pt,ft):at(Jt,hn,kt,pt,st,ft);if(!(Xt===void 0?Jt===hn||ut(Jt,hn,ht,at,ft):Xt)){Ft=!1;break}Ut||(Ut=kt=="constructor")}if(Ft&&!Ut){var zt=pt.constructor,cn=st.constructor;zt!=cn&&"constructor"in pt&&"constructor"in st&&!(typeof zt=="function"&&zt instanceof zt&&typeof cn=="function"&&cn instanceof cn)&&(Ft=!1)}return ft.delete(pt),ft.delete(st),Ft}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js":function(nt,it,s){var et=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g;nt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function gt(dt){return et(dt,ot,rt)}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_getMapData.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js");function rt(ot,gt){var dt=ot.__data__;return et(gt)?dt[typeof gt=="string"?"string":"hash"]:dt.map}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function ot(gt){for(var dt=rt(gt),pt=dt.length;pt--;){var st=dt[pt],ht=gt[st];dt[pt]=[st,ht,et(ht)]}return dt}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_getNative.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_getValue.js");function ot(gt,dt){var pt=rt(gt,dt);return et(pt)?pt:void 0}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),rt=Object.prototype,ot=rt.hasOwnProperty,gt=rt.toString,dt=et?et.toStringTag:void 0;function pt(st){var ht=ot.call(st,dt),at=st[dt];try{st[dt]=void 0;var ut=!0}catch{}var ft=gt.call(st);return ut&&(ht?st[dt]=at:delete st[dt]),ft}nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/stubArray.js"),ot=Object.prototype,gt=ot.propertyIsEnumerable,dt=Object.getOwnPropertySymbols,pt=dt?function(st){return st==null?[]:(st=Object(st),et(dt(st),function(ht){return gt.call(st,ht)}))}:rt;nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getTag.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_DataView.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_Promise.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_Set.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),st=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),ht="[object Map]",at="[object Object]",ut="[object Promise]",ft="[object Set]",mt="[object WeakMap]",yt="[object DataView]",At=st(et),wt=st(rt),Pt=st(ot),Rt=st(gt),kt=st(dt),bt=pt;(et&&bt(new et(new ArrayBuffer(1)))!=yt||rt&&bt(new rt)!=ht||ot&&bt(ot.resolve())!=ut||gt&&bt(new gt)!=ft||dt&&bt(new dt)!=mt)&&(bt=function(Nt){var Ft=pt(Nt),Ut=Ft==at?Nt.constructor:void 0,Jt=Ut?st(Ut):"";if(Jt)switch(Jt){case At:return yt;case wt:return ht;case Pt:return ut;case Rt:return ft;case kt:return mt}return Ft}),nt.exports=bt},"./packages/@logrocket/utils/node_modules/lodash/_getValue.js":function(nt){function it(s,et){return s==null?void 0:s[et]}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_hasPath.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function st(ht,at,ut){at=et(at,ht);for(var ft=-1,mt=at.length,yt=!1;++ft<mt;){var At=pt(at[ft]);if(!(yt=ht!=null&&ut(ht,At)))break;ht=ht[At]}return yt||++ft!=mt?yt:(mt=ht==null?0:ht.length,!!mt&&dt(mt)&&gt(At,mt)&&(ot(ht)||rt(ht)))}nt.exports=st},"./packages/@logrocket/utils/node_modules/lodash/_hashClear.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js");function rt(){this.__data__=et?et(null):{},this.size=0}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js":function(nt){function it(s){var et=this.has(s)&&delete this.__data__[s];return this.size-=et?1:0,et}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_hashGet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),rt="__lodash_hash_undefined__",ot=Object.prototype,gt=ot.hasOwnProperty;function dt(pt){var st=this.__data__;if(et){var ht=st[pt];return ht===rt?void 0:ht}return gt.call(st,pt)?st[pt]:void 0}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_hashHas.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),rt=Object.prototype,ot=rt.hasOwnProperty;function gt(dt){var pt=this.__data__;return et?pt[dt]!==void 0:ot.call(pt,dt)}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_hashSet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),rt="__lodash_hash_undefined__";function ot(gt,dt){var pt=this.__data__;return this.size+=this.has(gt)?0:1,pt[gt]=et&&dt===void 0?rt:dt,this}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_isIndex.js":function(nt){var it=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function et(rt,ot){var gt=typeof rt;return ot=ot??it,!!ot&&(gt=="number"||gt!="symbol"&&s.test(rt))&&rt>-1&&rt%1==0&&rt<ot}nt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_isKey.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gt=/^\w*$/;function dt(pt,st){if(et(pt))return!1;var ht=typeof pt;return ht=="number"||ht=="symbol"||ht=="boolean"||pt==null||rt(pt)?!0:gt.test(pt)||!ot.test(pt)||st!=null&&pt in Object(st)}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js":function(nt){function it(s){var et=typeof s;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?s!=="__proto__":s===null}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_isMasked.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js"),rt=function(){var gt=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return gt?"Symbol(src)_1."+gt:""}();function ot(gt){return!!rt&&rt in gt}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js":function(nt){var it=Object.prototype;function s(et){var rt=et&&et.constructor,ot=typeof rt=="function"&&rt.prototype||it;return et===ot}nt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js");function rt(ot){return ot===ot&&!et(ot)}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js":function(nt){function it(){this.__data__=[],this.size=0}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js"),rt=Array.prototype,ot=rt.splice;function gt(dt){var pt=this.__data__,st=et(pt,dt);if(st<0)return!1;var ht=pt.length-1;return st==ht?pt.pop():ot.call(pt,st,1),--this.size,!0}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function rt(ot){var gt=this.__data__,dt=et(gt,ot);return dt<0?void 0:gt[dt][1]}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function rt(ot){return et(this.__data__,ot)>-1}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function rt(ot,gt){var dt=this.__data__,pt=et(dt,ot);return pt<0?(++this.size,dt.push([ot,gt])):dt[pt][1]=gt,this}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Hash.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js");function gt(){this.size=0,this.__data__={hash:new et,map:new(ot||rt),string:new et}}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function rt(ot){var gt=et(this,ot).delete(ot);return this.size-=gt?1:0,gt}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function rt(ot){return et(this,ot).get(ot)}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function rt(ot){return et(this,ot).has(ot)}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function rt(ot,gt){var dt=et(this,ot),pt=dt.size;return dt.set(ot,gt),this.size+=dt.size==pt?0:1,this}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js":function(nt){function it(s){var et=-1,rt=Array(s.size);return s.forEach(function(ot,gt){rt[++et]=[gt,ot]}),rt}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js":function(nt){function it(s,et){return function(rt){return rt==null?!1:rt[s]===et&&(et!==void 0||s in Object(rt))}}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/memoize.js"),rt=500;function ot(gt){var dt=et(gt,function(st){return pt.size===rt&&pt.clear(),st}),pt=dt.cache;return dt}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),rt=et(Object,"create");nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_overArg.js"),rt=et(Object.keys,Object);nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js":function(nt,it,s){nt=s.nmd(nt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),rt=it&&!it.nodeType&&it,ot=rt&&!0&&nt&&!nt.nodeType&&nt,gt=ot&&ot.exports===rt,dt=gt&&et.process,pt=function(){try{var st=ot&&ot.require&&ot.require("util").types;return st||dt&&dt.binding&&dt.binding("util")}catch{}}();nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_objectToString.js":function(nt){var it=Object.prototype,s=it.toString;function et(rt){return s.call(rt)}nt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_overArg.js":function(nt){function it(s,et){return function(rt){return s(et(rt))}}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_root.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),rt=typeof self=="object"&&self&&self.Object===Object&&self,ot=et||rt||Function("return this")();nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js":function(nt){var it="__lodash_hash_undefined__";function s(et){return this.__data__.set(et,it),this}nt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js":function(nt){function it(s){return this.__data__.has(s)}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_setToArray.js":function(nt){function it(s){var et=-1,rt=Array(s.size);return s.forEach(function(ot){rt[++et]=ot}),rt}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackClear.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js");function rt(){this.__data__=new et,this.size=0}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js":function(nt){function it(s){var et=this.__data__,rt=et.delete(s);return this.size=et.size,rt}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackGet.js":function(nt){function it(s){return this.__data__.get(s)}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackHas.js":function(nt){function it(s){return this.__data__.has(s)}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackSet.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),gt=200;function dt(pt,st){var ht=this.__data__;if(ht instanceof et){var at=ht.__data__;if(!rt||at.length<gt-1)return at.push([pt,st]),this.size=++ht.size,this;ht=this.__data__=new ot(at)}return ht.set(pt,st),this.size=ht.size,this}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js"),rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ot=/\\(\\)?/g,gt=et(function(dt){var pt=[];return dt.charCodeAt(0)===46&&pt.push(""),dt.replace(rt,function(st,ht,at,ut){pt.push(at?ut.replace(ot,"$1"):ht||st)}),pt});nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/_toKey.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),rt=1/0;function ot(gt){if(typeof gt=="string"||et(gt))return gt;var dt=gt+"";return dt=="0"&&1/gt==-rt?"-0":dt}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_toSource.js":function(nt){var it=Function.prototype,s=it.toString;function et(rt){if(rt!=null){try{return s.call(rt)}catch{}try{return rt+""}catch{}}return""}nt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/eq.js":function(nt){function it(s,et){return s===et||s!==s&&et!==et}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/get.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function rt(ot,gt,dt){var pt=ot==null?void 0:et(ot,gt);return pt===void 0?dt:pt}nt.exports=rt},"./packages/@logrocket/utils/node_modules/lodash/hasIn.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_hasPath.js");function ot(gt,dt){return gt!=null&&rt(gt,dt,et)}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/identity.js":function(nt){function it(s){return s}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isArguments.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot=Object.prototype,gt=ot.hasOwnProperty,dt=ot.propertyIsEnumerable,pt=et(function(){return arguments}())?et:function(st){return rt(st)&&gt.call(st,"callee")&&!dt.call(st,"callee")};nt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/isArray.js":function(nt){var it=Array.isArray;nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js");function ot(gt){return gt!=null&&rt(gt.length)&&!et(gt)}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/isBuffer.js":function(nt,it,s){nt=s.nmd(nt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/stubFalse.js"),ot=it&&!it.nodeType&&it,gt=ot&&!0&&nt&&!nt.nodeType&&nt,dt=gt&&gt.exports===ot,pt=dt?et.Buffer:void 0,st=pt?pt.isBuffer:void 0,ht=st||rt;nt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/isFunction.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),ot="[object AsyncFunction]",gt="[object Function]",dt="[object GeneratorFunction]",pt="[object Proxy]";function st(ht){if(!rt(ht))return!1;var at=et(ht);return at==gt||at==dt||at==ot||at==pt}nt.exports=st},"./packages/@logrocket/utils/node_modules/lodash/isLength.js":function(nt){var it=9007199254740991;function s(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=it}nt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/isObject.js":function(nt){function it(s){var et=typeof s;return s!=null&&(et=="object"||et=="function")}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js":function(nt){function it(s){return s!=null&&typeof s=="object"}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isSymbol.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ot="[object Symbol]";function gt(dt){return typeof dt=="symbol"||rt(dt)&&et(dt)==ot}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js"),gt=ot&&ot.isTypedArray,dt=gt?rt(gt):et;nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/keys.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js");function gt(dt){return ot(dt)?et(dt):rt(dt)}nt.exports=gt},"./packages/@logrocket/utils/node_modules/lodash/memoize.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),rt="Expected a function";function ot(gt,dt){if(typeof gt!="function"||dt!=null&&typeof dt!="function")throw new TypeError(rt);var pt=function(){var st=arguments,ht=dt?dt.apply(this,st):st[0],at=pt.cache;if(at.has(ht))return at.get(ht);var ut=gt.apply(this,st);return pt.cache=at.set(ht,ut)||at,ut};return pt.cache=new(ot.Cache||et),pt}ot.Cache=et,nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/property.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js"),ot=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),gt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function dt(pt){return ot(pt)?et(gt(pt)):rt(pt)}nt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js"),rt=s("./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js");function ot(gt,dt,pt){return rt(gt,dt,et(pt,2),!0)}nt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/stubArray.js":function(nt){function it(){return[]}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/stubFalse.js":function(nt){function it(){return!1}nt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/toString.js":function(nt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseToString.js");function rt(ot){return ot==null?"":et(ot)}nt.exports=rt},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(nt){function it(s,et){(et==null||et>s.length)&&(et=s.length);for(var rt=0,ot=new Array(et);rt<et;rt++)ot[rt]=s[rt];return ot}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(nt){function it(s){if(Array.isArray(s))return s}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function rt(ot){if(Array.isArray(ot))return et(ot)}nt.exports=rt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(nt){function it(s,et){if(!(s instanceof et))throw new TypeError("Cannot call a class as a function")}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function rt(gt,dt){for(var pt=0;pt<dt.length;pt++){var st=dt[pt];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(gt,et(st.key),st)}}function ot(gt,dt,pt){return dt&&rt(gt.prototype,dt),pt&&rt(gt,pt),Object.defineProperty(gt,"prototype",{writable:!1}),gt}nt.exports=ot,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function rt(ot,gt,dt){return gt=et(gt),gt in ot?Object.defineProperty(ot,gt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ot[gt]=dt,ot}nt.exports=rt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(nt){function it(s){return s&&s.__esModule?s:{default:s}}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(nt){function it(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(nt){function it(s,et){var rt=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(rt!=null){var ot,gt,dt,pt,st=[],ht=!0,at=!1;try{if(dt=(rt=rt.call(s)).next,et===0){if(Object(rt)!==rt)return;ht=!1}else for(;!(ht=(ot=dt.call(rt)).done)&&(st.push(ot.value),st.length!==et);ht=!0);}catch(ut){at=!0,gt=ut}finally{try{if(!ht&&rt.return!=null&&(pt=rt.return(),Object(pt)!==pt))return}finally{if(at)throw gt}}return st}}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(nt){function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(nt){function it(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function rt(ot,gt){if(ot==null)return{};var dt=et(ot,gt),pt,st;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(ot);for(st=0;st<ht.length;st++)pt=ht[st],!(gt.indexOf(pt)>=0)&&Object.prototype.propertyIsEnumerable.call(ot,pt)&&(dt[pt]=ot[pt])}return dt}nt.exports=rt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(nt){function it(s,et){if(s==null)return{};var rt={},ot=Object.keys(s),gt,dt;for(dt=0;dt<ot.length;dt++)gt=ot[dt],!(et.indexOf(gt)>=0)&&(rt[gt]=s[gt]);return rt}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),rt=s("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),ot=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),gt=s("./node_modules/@babel/runtime/helpers/nonIterableRest.js");function dt(pt,st){return et(pt)||rt(pt,st)||ot(pt,st)||gt()}nt.exports=dt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),rt=s("./node_modules/@babel/runtime/helpers/iterableToArray.js"),ot=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),gt=s("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function dt(pt){return et(pt)||rt(pt)||ot(pt)||gt()}nt.exports=dt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default;function rt(ot,gt){if(et(ot)!=="object"||ot===null)return ot;var dt=ot[Symbol.toPrimitive];if(dt!==void 0){var pt=dt.call(ot,gt||"default");if(et(pt)!=="object")return pt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(gt==="string"?String:Number)(ot)}nt.exports=rt,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default,rt=s("./node_modules/@babel/runtime/helpers/toPrimitive.js");function ot(gt){var dt=rt(gt,"string");return et(dt)==="symbol"?dt:String(dt)}nt.exports=ot,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(nt){function it(s){"@babel/helpers - typeof";return nt.exports=it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},nt.exports.__esModule=!0,nt.exports.default=nt.exports,it(s)}nt.exports=it,nt.exports.__esModule=!0,nt.exports.default=nt.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(nt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function rt(ot,gt){if(ot){if(typeof ot=="string")return et(ot,gt);var dt=Object.prototype.toString.call(ot).slice(8,-1);if(dt==="Object"&&ot.constructor&&(dt=ot.constructor.name),dt==="Map"||dt==="Set")return Array.from(ot);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return et(ot,gt)}}nt.exports=rt,nt.exports.__esModule=!0,nt.exports.default=nt.exports}},tt={};function ct(nt){var it=tt[nt];if(it!==void 0)return it.exports;var s=tt[nt]={id:nt,loaded:!1,exports:{}};return _e[nt](s,s.exports,ct),s.loaded=!0,s.exports}(function(){ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){ct.nmd=function(nt){return nt.paths=[],nt.children||(nt.children=[]),nt}}();var vt={};return function(){var nt=vt;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var it=ct("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=void 0;var s=it(ct("./packages/logrocket/src/setup.js")),et=(0,s.default)(),rt=et;nt.default=rt}(),vt=vt.default,vt}()})})(build_umd);var build_umdExports=build_umd.exports;const LogRocket=getDefaultExportFromCjs(build_umdExports),ErrorPage=({errorType:a})=>{let o="An error occurred";switch(a){case 404:o="Invitation not found";break;case 500:o="Internal server error";break;case 401:o="You're not auhorized to join";break;default:o="An error occurred";break}return jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(Box$1,{children:jsxRuntimeExports.jsx(Typography$1,{variant:"h4",children:o})})})})})})};function getLinkUtilityClass(a){return generateUtilityClass("MuiLink",a)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),linkClasses$1=linkClasses,colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=a=>colorTransformations[a]||a,getTextDecoration=({theme:a,ownerState:o})=>{const _e=transformDeprecatedColors(o.color),tt=getPath(a,`palette.${_e}`,!1)||o.color,ct=getPath(a,`palette.${_e}Channel`);return"vars"in a&&ct?`rgba(${ct} / 0.4)`:alpha(tt,.4)},getTextDecoration$1=getTextDecoration,_excluded$1=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],useUtilityClasses$1=a=>{const{classes:o,component:_e,focusVisible:tt,underline:ct}=a,vt={root:["root",`underline${capitalize(ct)}`,_e==="button"&&"button",tt&&"focusVisible"]};return composeClasses(vt,getLinkUtilityClass,o)},LinkRoot=styled$1(Typography$1,{name:"MuiLink",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`underline${capitalize(_e.underline)}`],_e.component==="button"&&o.button]}})(({theme:a,ownerState:o})=>_extends({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&_extends({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:getTextDecoration$1({theme:a,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses$1.focusVisible}`]:{outline:"auto"}})),Link=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiLink"}),{className:ct,color:vt="primary",component:nt="a",onBlur:it,onFocus:s,TypographyClasses:et,underline:rt="always",variant:ot="inherit",sx:gt}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$1),{isFocusVisibleRef:pt,onBlur:st,onFocus:ht,ref:at}=useIsFocusVisible(),[ut,ft]=reactExports.useState(!1),mt=useForkRef(_e,at),yt=Rt=>{st(Rt),pt.current===!1&&ft(!1),it&&it(Rt)},At=Rt=>{ht(Rt),pt.current===!0&&ft(!0),s&&s(Rt)},wt=_extends({},tt,{color:vt,component:nt,focusVisible:ut,underline:rt,variant:ot}),Pt=useUtilityClasses$1(wt);return jsxRuntimeExports.jsx(LinkRoot,_extends({color:vt,className:clsx(Pt.root,ct),classes:et,component:nt,onBlur:yt,onFocus:At,ref:mt,ownerState:wt,variant:ot,sx:[...Object.keys(colorTransformations).includes(vt)?[]:[{color:vt}],...Array.isArray(gt)?gt:[gt]]},dt))}),Link$1=Link,CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(a){return generateUtilityClass("MuiCheckbox",a)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),checkboxClasses$1=checkboxClasses,_excluded=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses=a=>{const{classes:o,indeterminate:_e,color:tt,size:ct}=a,vt={root:["root",_e&&"indeterminate",`color${capitalize(tt)}`,`size${capitalize(ct)}`]},nt=composeClasses(vt,getCheckboxUtilityClass,o);return _extends({},o,nt)},CheckboxRoot=styled$1(SwitchBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.indeterminate&&o.indeterminate,_e.color!=="default"&&o[`color${capitalize(_e.color)}`]]}})(({theme:a,ownerState:o})=>_extends({color:(a.vars||a).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${o.color==="default"?a.vars.palette.action.activeChannel:a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(o.color==="default"?a.palette.action.active:a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${checkboxClasses$1.checked}, &.${checkboxClasses$1.indeterminate}`]:{color:(a.vars||a).palette[o.color].main},[`&.${checkboxClasses$1.disabled}`]:{color:(a.vars||a).palette.action.disabled}})),defaultCheckedIcon=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(o,_e){var tt,ct;const vt=useThemeProps({props:o,name:"MuiCheckbox"}),{checkedIcon:nt=defaultCheckedIcon,color:it="primary",icon:s=defaultIcon,indeterminate:et=!1,indeterminateIcon:rt=defaultIndeterminateIcon,inputProps:ot,size:gt="medium",className:dt}=vt,pt=_objectWithoutPropertiesLoose(vt,_excluded),st=et?rt:s,ht=et?rt:nt,at=_extends({},vt,{color:it,indeterminate:et,size:gt}),ut=useUtilityClasses(at);return jsxRuntimeExports.jsx(CheckboxRoot,_extends({type:"checkbox",inputProps:_extends({"data-indeterminate":et},ot),icon:reactExports.cloneElement(st,{fontSize:(tt=st.props.fontSize)!=null?tt:gt}),checkedIcon:reactExports.cloneElement(ht,{fontSize:(ct=ht.props.fontSize)!=null?ct:gt}),ownerState:at,ref:_e,className:clsx(ut.root,dt)},pt,{classes:ut}))}),Checkbox$1=Checkbox,OptIn=({id:a,checked:o,labels:_e,link:tt,onChange:ct})=>jsxRuntimeExports.jsx(FormControlLabel$1,{required:!0,control:jsxRuntimeExports.jsx(Checkbox$1,{id:`${a}`,"data-testid":`${a}`,checked:o,onChange:()=>ct(a),inputProps:{"aria-label":_e.aria}}),label:jsxRuntimeExports.jsxs(Typography$1,{variant:"body1",component:"span",children:[_e.prefix,jsxRuntimeExports.jsx(Link$1,{target:"_blank",href:tt,color:"info.main",children:_e.link})]}),sx:{".MuiFormControlLabel-asterisk":{display:"none"}}}),OptInList=({labels:a,optIns:o,onSubmit:_e})=>{const[tt,ct]=reactExports.useState(Object.assign({},...o.map(nt=>({[nt.id]:!1})))),vt=nt=>{ct({...tt,[nt]:!tt[nt]})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormGroup$1,{children:o.map(nt=>jsxRuntimeExports.jsx(OptIn,{id:nt.id,checked:tt[nt.id],onChange:vt,labels:nt.labels,link:nt.link},nt.id))}),jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:!Object.values(tt).every(nt=>nt),onClick:_e,children:a.submit})})]})},TextStepper=({activeStep:a,children:o,header:_e,sx:tt={}})=>jsxRuntimeExports.jsxs(Box$1,{sx:{...tt},children:[jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_e,jsxRuntimeExports.jsxs(Typography$1,{sx:{fontWeight:500},children:[a+1,"/",React$1.Children.toArray(o).length]})]}),jsxRuntimeExports.jsx(Box$1,{sx:{padding:"16px 16px 0 16px"},children:React$1.Children.toArray(o)[a]})]}),App$1="",logo=""+new URL("apizee-6b3e8e8d.svg",import.meta.url).href;var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(a){var o=a.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _e=a.indexOf("=");_e===-1&&(_e=o);var tt=_e===o?0:4-_e%4;return[_e,tt]}function byteLength(a){var o=getLens(a),_e=o[0],tt=o[1];return(_e+tt)*3/4-tt}function _byteLength(a,o,_e){return(o+_e)*3/4-_e}function toByteArray(a){var o,_e=getLens(a),tt=_e[0],ct=_e[1],vt=new Arr(_byteLength(a,tt,ct)),nt=0,it=ct>0?tt-4:tt,s;for(s=0;s<it;s+=4)o=revLookup[a.charCodeAt(s)]<<18|revLookup[a.charCodeAt(s+1)]<<12|revLookup[a.charCodeAt(s+2)]<<6|revLookup[a.charCodeAt(s+3)],vt[nt++]=o>>16&255,vt[nt++]=o>>8&255,vt[nt++]=o&255;return ct===2&&(o=revLookup[a.charCodeAt(s)]<<2|revLookup[a.charCodeAt(s+1)]>>4,vt[nt++]=o&255),ct===1&&(o=revLookup[a.charCodeAt(s)]<<10|revLookup[a.charCodeAt(s+1)]<<4|revLookup[a.charCodeAt(s+2)]>>2,vt[nt++]=o>>8&255,vt[nt++]=o&255),vt}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,o,_e){for(var tt,ct=[],vt=o;vt<_e;vt+=3)tt=(a[vt]<<16&16711680)+(a[vt+1]<<8&65280)+(a[vt+2]&255),ct.push(tripletToBase64(tt));return ct.join("")}function fromByteArray(a){for(var o,_e=a.length,tt=_e%3,ct=[],vt=16383,nt=0,it=_e-tt;nt<it;nt+=vt)ct.push(encodeChunk(a,nt,nt+vt>it?it:nt+vt));return tt===1?(o=a[_e-1],ct.push(lookup[o>>2]+lookup[o<<4&63]+"==")):tt===2&&(o=(a[_e-2]<<8)+a[_e-1],ct.push(lookup[o>>10]+lookup[o>>4&63]+lookup[o<<2&63]+"=")),ct.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(a){return typeof a=="object"&&a.buffer&&a.buffer.constructor===ArrayBuffer});var createOutputMethod=function(a,o){return function(_e){return new Sha256(o,!0).update(_e)[a]()}},createMethod=function(a){var o=createOutputMethod("hex",a);NODE_JS&&(o=nodeWrap(o,a)),o.create=function(){return new Sha256(a)},o.update=function(ct){return o.create().update(ct)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createOutputMethod(tt,a)}return o},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(a){if(typeof a=="string")return crypto.createHash(algorithm).update(a,"utf8").digest("hex");if(a==null)throw new Error(ERROR);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),Array.isArray(a)||ArrayBuffer.isView(a)||a.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(a)).digest("hex"):method(a)};return nodeMethod},createHmacOutputMethod=function(a,o){return function(_e,tt){return new HmacSha256(_e,o,!0).update(tt)[a]()}},createHmacMethod=function(a){var o=createHmacOutputMethod("hex",a);o.create=function(ct){return new HmacSha256(ct,a)},o.update=function(ct,vt){return o.create(ct).update(vt)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createHmacOutputMethod(tt,a)}return o};function Sha256(a,o){o?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}Sha256.prototype.update=function(a){if(!this.finalized){var o,_e=typeof a;if(_e!=="string"){if(_e==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);o=!0}for(var tt,ct=0,vt,nt=a.length,it=this.blocks;ct<nt;){if(this.hashed&&(this.hashed=!1,it[0]=this.block,it[16]=it[1]=it[2]=it[3]=it[4]=it[5]=it[6]=it[7]=it[8]=it[9]=it[10]=it[11]=it[12]=it[13]=it[14]=it[15]=0),o)for(vt=this.start;ct<nt&&vt<64;++ct)it[vt>>2]|=a[ct]<<SHIFT[vt++&3];else for(vt=this.start;ct<nt&&vt<64;++ct)tt=a.charCodeAt(ct),tt<128?it[vt>>2]|=tt<<SHIFT[vt++&3]:tt<2048?(it[vt>>2]|=(192|tt>>6)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt&63)<<SHIFT[vt++&3]):tt<55296||tt>=57344?(it[vt>>2]|=(224|tt>>12)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt>>6&63)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt&63)<<SHIFT[vt++&3]):(tt=65536+((tt&1023)<<10|a.charCodeAt(++ct)&1023),it[vt>>2]|=(240|tt>>18)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt>>12&63)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt>>6&63)<<SHIFT[vt++&3],it[vt>>2]|=(128|tt&63)<<SHIFT[vt++&3]);this.lastByteIndex=vt,this.bytes+=vt-this.start,vt>=64?(this.block=it[16],this.start=vt-64,this.hash(),this.hashed=!0):this.start=vt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,o=this.lastByteIndex;a[16]=this.block,a[o>>2]|=EXTRA[o&3],this.block=a[16],o>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,vt=this.h5,nt=this.h6,it=this.h7,s=this.blocks,et,rt,ot,gt,dt,pt,st,ht,at,ut,ft;for(et=16;et<64;++et)dt=s[et-15],rt=(dt>>>7|dt<<25)^(dt>>>18|dt<<14)^dt>>>3,dt=s[et-2],ot=(dt>>>17|dt<<15)^(dt>>>19|dt<<13)^dt>>>10,s[et]=s[et-16]+rt+s[et-7]+ot<<0;for(ft=o&_e,et=0;et<64;et+=4)this.first?(this.is224?(ht=300032,dt=s[0]-1413257819,it=dt-150054599<<0,tt=dt+24177077<<0):(ht=704751109,dt=s[0]-210244248,it=dt-1521486534<<0,tt=dt+143694565<<0),this.first=!1):(rt=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),ot=(ct>>>6|ct<<26)^(ct>>>11|ct<<21)^(ct>>>25|ct<<7),ht=a&o,gt=ht^a&_e^ft,st=ct&vt^~ct&nt,dt=it+ot+st+K[et]+s[et],pt=rt+gt,it=tt+dt<<0,tt=dt+pt<<0),rt=(tt>>>2|tt<<30)^(tt>>>13|tt<<19)^(tt>>>22|tt<<10),ot=(it>>>6|it<<26)^(it>>>11|it<<21)^(it>>>25|it<<7),at=tt&a,gt=at^tt&o^ht,st=it&ct^~it&vt,dt=nt+ot+st+K[et+1]+s[et+1],pt=rt+gt,nt=_e+dt<<0,_e=dt+pt<<0,rt=(_e>>>2|_e<<30)^(_e>>>13|_e<<19)^(_e>>>22|_e<<10),ot=(nt>>>6|nt<<26)^(nt>>>11|nt<<21)^(nt>>>25|nt<<7),ut=_e&tt,gt=ut^_e&a^at,st=nt&it^~nt&ct,dt=vt+ot+st+K[et+2]+s[et+2],pt=rt+gt,vt=o+dt<<0,o=dt+pt<<0,rt=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),ot=(vt>>>6|vt<<26)^(vt>>>11|vt<<21)^(vt>>>25|vt<<7),ft=o&_e,gt=ft^o&tt^ut,st=vt&nt^~vt&it,dt=ct+ot+st+K[et+3]+s[et+3],pt=rt+gt,ct=a+dt<<0,a=dt+pt<<0;this.h0=this.h0+a<<0,this.h1=this.h1+o<<0,this.h2=this.h2+_e<<0,this.h3=this.h3+tt<<0,this.h4=this.h4+ct<<0,this.h5=this.h5+vt<<0,this.h6=this.h6+nt<<0,this.h7=this.h7+it<<0},Sha256.prototype.hex=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,vt=this.h5,nt=this.h6,it=this.h7,s=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]+HEX_CHARS[tt>>28&15]+HEX_CHARS[tt>>24&15]+HEX_CHARS[tt>>20&15]+HEX_CHARS[tt>>16&15]+HEX_CHARS[tt>>12&15]+HEX_CHARS[tt>>8&15]+HEX_CHARS[tt>>4&15]+HEX_CHARS[tt&15]+HEX_CHARS[ct>>28&15]+HEX_CHARS[ct>>24&15]+HEX_CHARS[ct>>20&15]+HEX_CHARS[ct>>16&15]+HEX_CHARS[ct>>12&15]+HEX_CHARS[ct>>8&15]+HEX_CHARS[ct>>4&15]+HEX_CHARS[ct&15]+HEX_CHARS[vt>>28&15]+HEX_CHARS[vt>>24&15]+HEX_CHARS[vt>>20&15]+HEX_CHARS[vt>>16&15]+HEX_CHARS[vt>>12&15]+HEX_CHARS[vt>>8&15]+HEX_CHARS[vt>>4&15]+HEX_CHARS[vt&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15];return this.is224||(s+=HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,vt=this.h5,nt=this.h6,it=this.h7,s=[a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,_e>>24&255,_e>>16&255,_e>>8&255,_e&255,tt>>24&255,tt>>16&255,tt>>8&255,tt&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,vt>>24&255,vt>>16&255,vt>>8&255,vt&255,nt>>24&255,nt>>16&255,nt>>8&255,nt&255];return this.is224||s.push(it>>24&255,it>>16&255,it>>8&255,it&255),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),o=new DataView(a);return o.setUint32(0,this.h0),o.setUint32(4,this.h1),o.setUint32(8,this.h2),o.setUint32(12,this.h3),o.setUint32(16,this.h4),o.setUint32(20,this.h5),o.setUint32(24,this.h6),this.is224||o.setUint32(28,this.h7),a};function HmacSha256(a,o,_e){var tt,ct=typeof a;if(ct==="string"){var vt=[],nt=a.length,it=0,s;for(tt=0;tt<nt;++tt)s=a.charCodeAt(tt),s<128?vt[it++]=s:s<2048?(vt[it++]=192|s>>6,vt[it++]=128|s&63):s<55296||s>=57344?(vt[it++]=224|s>>12,vt[it++]=128|s>>6&63,vt[it++]=128|s&63):(s=65536+((s&1023)<<10|a.charCodeAt(++tt)&1023),vt[it++]=240|s>>18,vt[it++]=128|s>>12&63,vt[it++]=128|s>>6&63,vt[it++]=128|s&63);a=vt}else if(ct==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);a.length>64&&(a=new Sha256(o,!0).update(a).array());var et=[],rt=[];for(tt=0;tt<64;++tt){var ot=a[tt]||0;et[tt]=92^ot,rt[tt]=54^ot}Sha256.call(this,o,_e),this.update(rt),this.oKeyPad=et,this.inner=!0,this.sharedMemory=_e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var a=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(a),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(a){if(!(this instanceof Keycloak))return new Keycloak(a);for(var o=this,_e,tt=[],ct,vt={enable:!0,callbackList:[],interval:5},nt=document.getElementsByTagName("script"),it=0;it<nt.length;it++)(nt[it].src.indexOf("keycloak.js")!==-1||nt[it].src.indexOf("keycloak.min.js")!==-1)&&nt[it].src.indexOf("version=")!==-1&&(o.iframeVersion=nt[it].src.substring(nt[it].src.indexOf("version=")+8).split("&")[0]);var s=!0,et=Sn(console.info),rt=Sn(console.warn);o.init=function(fn){o.authenticated=!1,ct=vn();var mn=["default","cordova","cordova-native"];if(fn&&mn.indexOf(fn.adapter)>-1?_e=Xt(fn.adapter):fn&&typeof fn.adapter=="object"?_e=fn.adapter:window.Cordova||window.cordova?_e=Xt("cordova"):_e=Xt(),fn){if(typeof fn.useNonce<"u"&&(s=fn.useNonce),typeof fn.checkLoginIframe<"u"&&(vt.enable=fn.checkLoginIframe),fn.checkLoginIframeInterval&&(vt.interval=fn.checkLoginIframeInterval),fn.onLoad==="login-required"&&(o.loginRequired=!0),fn.responseMode)if(fn.responseMode==="query"||fn.responseMode==="fragment")o.responseMode=fn.responseMode;else throw"Invalid value for responseMode";if(fn.flow){switch(fn.flow){case"standard":o.responseType="code";break;case"implicit":o.responseType="id_token token";break;case"hybrid":o.responseType="code id_token token";break;default:throw"Invalid value for flow"}o.flow=fn.flow}if(fn.timeSkew!=null&&(o.timeSkew=fn.timeSkew),fn.redirectUri&&(o.redirectUri=fn.redirectUri),fn.silentCheckSsoRedirectUri&&(o.silentCheckSsoRedirectUri=fn.silentCheckSsoRedirectUri),typeof fn.silentCheckSsoFallback=="boolean"?o.silentCheckSsoFallback=fn.silentCheckSsoFallback:o.silentCheckSsoFallback=!0,fn.pkceMethod){if(fn.pkceMethod!=="S256")throw"Invalid value for pkceMethod";o.pkceMethod=fn.pkceMethod}typeof fn.enableLogging=="boolean"?o.enableLogging=fn.enableLogging:o.enableLogging=!1,typeof fn.scope=="string"&&(o.scope=fn.scope),typeof fn.messageReceiveTimeout=="number"&&fn.messageReceiveTimeout>0?o.messageReceiveTimeout=fn.messageReceiveTimeout:o.messageReceiveTimeout=1e4}o.responseMode||(o.responseMode="fragment"),o.responseType||(o.responseType="code",o.flow="standard");var bn=bt(),un=bt();un.promise.then(function(){o.onReady&&o.onReady(o.authenticated),bn.setSuccess(o.authenticated)}).catch(function(En){bn.setError(En)});var Tn=ft();function kn(){var En=function(Dn){Dn||(wn.prompt="none"),o.login(wn).then(function(){un.setSuccess()}).catch(function(Bn){un.setError(Bn)})},Rn=function(){var Dn=document.createElement("iframe"),Bn=o.createLoginUrl({prompt:"none",redirectUri:o.silentCheckSsoRedirectUri});Dn.setAttribute("src",Bn),Dn.setAttribute("title","keycloak-silent-check-sso"),Dn.style.display="none",document.body.appendChild(Dn);var zn=function(Hn){if(!(Hn.origin!==window.location.origin||Dn.contentWindow!==Hn.source)){var nr=Pt(Hn.data);ut(nr,un),document.body.removeChild(Dn),window.removeEventListener("message",zn)}};window.addEventListener("message",zn)},wn={};switch(fn.onLoad){case"check-sso":vt.enable?Ft().then(function(){Jt().then(function(Dn){Dn?un.setSuccess():o.silentCheckSsoRedirectUri?Rn():En(!1)}).catch(function(Dn){un.setError(Dn)})}):o.silentCheckSsoRedirectUri?Rn():En(!1);break;case"login-required":En(!0);break;default:throw"Invalid value for onLoad"}}function xn(){var En=Pt(window.location.href);if(En&&window.history.replaceState(window.history.state,null,En.newUrl),En&&En.valid)return Ft().then(function(){ut(En,un)}).catch(function(Rn){un.setError(Rn)});fn?fn.token&&fn.refreshToken?(yt(fn.token,fn.refreshToken,fn.idToken),vt.enable?Ft().then(function(){Jt().then(function(Rn){Rn?(o.onAuthSuccess&&o.onAuthSuccess(),un.setSuccess(),Ut()):un.setSuccess()}).catch(function(Rn){un.setError(Rn)})}):o.updateToken(-1).then(function(){o.onAuthSuccess&&o.onAuthSuccess(),un.setSuccess()}).catch(function(Rn){o.onAuthError&&o.onAuthError(),fn.onLoad?kn():un.setError(Rn)})):fn.onLoad?kn():un.setSuccess():un.setSuccess()}function An(){var En=bt(),Rn=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",Rn),En.setSuccess())};return document.addEventListener("readystatechange",Rn),Rn(),En.promise}return Tn.then(function(){An().then(hn).then(xn).catch(function(En){bn.setError(En)})}),Tn.catch(function(En){bn.setError(En)}),bn.promise},o.login=function(fn){return _e.login(fn)};function ot(fn){var mn=null,bn=window.crypto||window.msCrypto;if(bn&&bn.getRandomValues&&window.Uint8Array)return mn=new Uint8Array(fn),bn.getRandomValues(mn),mn;mn=new Array(fn);for(var un=0;un<mn.length;un++)mn[un]=Math.floor(256*Math.random());return mn}function gt(fn){return dt(fn,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function dt(fn,mn){for(var bn=ot(fn),un=new Array(fn),Tn=0;Tn<fn;Tn++)un[Tn]=mn.charCodeAt(bn[Tn]%mn.length);return String.fromCharCode.apply(null,un)}function pt(fn,mn){switch(fn){case"S256":var bn=new Uint8Array(sha256.arrayBuffer(mn)),un=base64Js.fromByteArray(bn).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return un;default:throw"Invalid value for pkceMethod"}}function st(fn){var mn={id_token:{acr:fn}};return JSON.stringify(mn)}o.createLoginUrl=function(fn){var mn=wt(),bn=wt(),un=_e.redirectUri(fn),Tn={state:mn,nonce:bn,redirectUri:encodeURIComponent(un)};fn&&fn.prompt&&(Tn.prompt=fn.prompt);var kn;fn&&fn.action=="register"?kn=o.endpoints.register():kn=o.endpoints.authorize();var xn=fn&&fn.scope||o.scope;xn?xn.indexOf("openid")===-1&&(xn="openid "+xn):xn="openid";var An=kn+"?client_id="+encodeURIComponent(o.clientId)+"&redirect_uri="+encodeURIComponent(un)+"&state="+encodeURIComponent(mn)+"&response_mode="+encodeURIComponent(o.responseMode)+"&response_type="+encodeURIComponent(o.responseType)+"&scope="+encodeURIComponent(xn);if(s&&(An=An+"&nonce="+encodeURIComponent(bn)),fn&&fn.prompt&&(An+="&prompt="+encodeURIComponent(fn.prompt)),fn&&fn.maxAge&&(An+="&max_age="+encodeURIComponent(fn.maxAge)),fn&&fn.loginHint&&(An+="&login_hint="+encodeURIComponent(fn.loginHint)),fn&&fn.idpHint&&(An+="&kc_idp_hint="+encodeURIComponent(fn.idpHint)),fn&&fn.action&&fn.action!="register"&&(An+="&kc_action="+encodeURIComponent(fn.action)),fn&&fn.locale&&(An+="&ui_locales="+encodeURIComponent(fn.locale)),fn&&fn.acr){var En=st(fn.acr);An+="&claims="+encodeURIComponent(En)}if(o.pkceMethod){var Rn=gt(96);Tn.pkceCodeVerifier=Rn;var wn=pt(o.pkceMethod,Rn);An+="&code_challenge="+wn,An+="&code_challenge_method="+o.pkceMethod}return ct.add(Tn),An},o.logout=function(fn){return _e.logout(fn)},o.createLogoutUrl=function(fn){var mn=o.endpoints.logout()+"?post_logout_redirect_uri="+encodeURIComponent(_e.redirectUri(fn,!1))+"&id_token_hint="+encodeURIComponent(o.idToken);return mn},o.register=function(fn){return _e.register(fn)},o.createRegisterUrl=function(fn){return fn||(fn={}),fn.action="register",o.createLoginUrl(fn)},o.createAccountUrl=function(fn){var mn=ht(),bn=void 0;return typeof mn<"u"&&(bn=mn+"/account?referrer="+encodeURIComponent(o.clientId)+"&referrer_uri="+encodeURIComponent(_e.redirectUri(fn))),bn},o.accountManagement=function(){return _e.accountManagement()},o.hasRealmRole=function(fn){var mn=o.realmAccess;return!!mn&&mn.roles.indexOf(fn)>=0},o.hasResourceRole=function(fn,mn){if(!o.resourceAccess)return!1;var bn=o.resourceAccess[mn||o.clientId];return!!bn&&bn.roles.indexOf(fn)>=0},o.loadUserProfile=function(){var fn=ht()+"/account",mn=new XMLHttpRequest;mn.open("GET",fn,!0),mn.setRequestHeader("Accept","application/json"),mn.setRequestHeader("Authorization","bearer "+o.token);var bn=bt();return mn.onreadystatechange=function(){mn.readyState==4&&(mn.status==200?(o.profile=JSON.parse(mn.responseText),bn.setSuccess(o.profile)):bn.setError())},mn.send(),bn.promise},o.loadUserInfo=function(){var fn=o.endpoints.userinfo(),mn=new XMLHttpRequest;mn.open("GET",fn,!0),mn.setRequestHeader("Accept","application/json"),mn.setRequestHeader("Authorization","bearer "+o.token);var bn=bt();return mn.onreadystatechange=function(){mn.readyState==4&&(mn.status==200?(o.userInfo=JSON.parse(mn.responseText),bn.setSuccess(o.userInfo)):bn.setError())},mn.send(),bn.promise},o.isTokenExpired=function(fn){if(!o.tokenParsed||!o.refreshToken&&o.flow!="implicit")throw"Not authenticated";if(o.timeSkew==null)return et("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var mn=o.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+o.timeSkew;if(fn){if(isNaN(fn))throw"Invalid minValidity";mn-=fn}return mn<0},o.updateToken=function(fn){var mn=bt();if(!o.refreshToken)return mn.setError(),mn.promise;fn=fn||5;var bn=function(){var Tn=!1;if(fn==-1?(Tn=!0,et("[KEYCLOAK] Refreshing token: forced refresh")):(!o.tokenParsed||o.isTokenExpired(fn))&&(Tn=!0,et("[KEYCLOAK] Refreshing token: token expired")),!Tn)mn.setSuccess(!1);else{var kn="grant_type=refresh_token&refresh_token="+o.refreshToken,xn=o.endpoints.token();if(tt.push(mn),tt.length==1){var An=new XMLHttpRequest;An.open("POST",xn,!0),An.setRequestHeader("Content-type","application/x-www-form-urlencoded"),An.withCredentials=!0,kn+="&client_id="+encodeURIComponent(o.clientId);var En=new Date().getTime();An.onreadystatechange=function(){if(An.readyState==4)if(An.status==200){et("[KEYCLOAK] Token refreshed"),En=(En+new Date().getTime())/2;var Rn=JSON.parse(An.responseText);yt(Rn.access_token,Rn.refresh_token,Rn.id_token,En),o.onAuthRefreshSuccess&&o.onAuthRefreshSuccess();for(var wn=tt.pop();wn!=null;wn=tt.pop())wn.setSuccess(!0)}else{rt("[KEYCLOAK] Failed to refresh token"),An.status==400&&o.clearToken(),o.onAuthRefreshError&&o.onAuthRefreshError();for(var wn=tt.pop();wn!=null;wn=tt.pop())wn.setError(!0)}},An.send(kn)}}};if(vt.enable){var un=Jt();un.then(function(){bn()}).catch(function(Tn){mn.setError(Tn)})}else bn();return mn.promise},o.clearToken=function(){o.token&&(yt(null,null,null),o.onAuthLogout&&o.onAuthLogout(),o.loginRequired&&o.login())};function ht(){if(typeof o.authServerUrl<"u")return o.authServerUrl.charAt(o.authServerUrl.length-1)=="/"?o.authServerUrl+"realms/"+encodeURIComponent(o.realm):o.authServerUrl+"/realms/"+encodeURIComponent(o.realm)}function at(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function ut(fn,mn){var bn=fn.code,un=fn.error,Tn=fn.prompt,kn=new Date().getTime();if(fn.kc_action_status&&o.onActionUpdate&&o.onActionUpdate(fn.kc_action_status),un){if(Tn!="none"){var xn={error:un,error_description:fn.error_description};o.onAuthError&&o.onAuthError(xn),mn&&mn.setError(xn)}else mn&&mn.setSuccess();return}else o.flow!="standard"&&(fn.access_token||fn.id_token)&&wn(fn.access_token,null,fn.id_token,!0);if(o.flow!="implicit"&&bn){var An="code="+bn+"&grant_type=authorization_code",En=o.endpoints.token(),Rn=new XMLHttpRequest;Rn.open("POST",En,!0),Rn.setRequestHeader("Content-type","application/x-www-form-urlencoded"),An+="&client_id="+encodeURIComponent(o.clientId),An+="&redirect_uri="+fn.redirectUri,fn.pkceCodeVerifier&&(An+="&code_verifier="+fn.pkceCodeVerifier),Rn.withCredentials=!0,Rn.onreadystatechange=function(){if(Rn.readyState==4)if(Rn.status==200){var Dn=JSON.parse(Rn.responseText);wn(Dn.access_token,Dn.refresh_token,Dn.id_token,o.flow==="standard"),Ut()}else o.onAuthError&&o.onAuthError(),mn&&mn.setError()},Rn.send(An)}function wn(Dn,Bn,zn,Hn){kn=(kn+new Date().getTime())/2,yt(Dn,Bn,zn,kn),s&&(o.tokenParsed&&o.tokenParsed.nonce!=fn.storedNonce||o.refreshTokenParsed&&o.refreshTokenParsed.nonce!=fn.storedNonce||o.idTokenParsed&&o.idTokenParsed.nonce!=fn.storedNonce)?(et("[KEYCLOAK] Invalid nonce, clearing token"),o.clearToken(),mn&&mn.setError()):Hn&&(o.onAuthSuccess&&o.onAuthSuccess(),mn&&mn.setSuccess())}}function ft(fn){var mn=bt(),bn;a?typeof a=="string"&&(bn=a):bn="keycloak.json";function un(Rn){Rn?o.endpoints={authorize:function(){return Rn.authorization_endpoint},token:function(){return Rn.token_endpoint},logout:function(){if(!Rn.end_session_endpoint)throw"Not supported by the OIDC server";return Rn.end_session_endpoint},checkSessionIframe:function(){if(!Rn.check_session_iframe)throw"Not supported by the OIDC server";return Rn.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!Rn.userinfo_endpoint)throw"Not supported by the OIDC server";return Rn.userinfo_endpoint}}:o.endpoints={authorize:function(){return ht()+"/protocol/openid-connect/auth"},token:function(){return ht()+"/protocol/openid-connect/token"},logout:function(){return ht()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var wn=ht()+"/protocol/openid-connect/login-status-iframe.html";return o.iframeVersion&&(wn=wn+"?version="+o.iframeVersion),wn},thirdPartyCookiesIframe:function(){var wn=ht()+"/protocol/openid-connect/3p-cookies/step1.html";return o.iframeVersion&&(wn=wn+"?version="+o.iframeVersion),wn},register:function(){return ht()+"/protocol/openid-connect/registrations"},userinfo:function(){return ht()+"/protocol/openid-connect/userinfo"}}}if(bn){var Tn=new XMLHttpRequest;Tn.open("GET",bn,!0),Tn.setRequestHeader("Accept","application/json"),Tn.onreadystatechange=function(){if(Tn.readyState==4)if(Tn.status==200||mt(Tn)){var Rn=JSON.parse(Tn.responseText);o.authServerUrl=Rn["auth-server-url"],o.realm=Rn.realm,o.clientId=Rn.resource,un(null),mn.setSuccess()}else mn.setError()},Tn.send()}else{if(!a.clientId)throw"clientId missing";o.clientId=a.clientId;var kn=a.oidcProvider;if(kn)if(typeof kn=="string"){var En;kn.charAt(kn.length-1)=="/"?En=kn+".well-known/openid-configuration":En=kn+"/.well-known/openid-configuration";var Tn=new XMLHttpRequest;Tn.open("GET",En,!0),Tn.setRequestHeader("Accept","application/json"),Tn.onreadystatechange=function(){if(Tn.readyState==4)if(Tn.status==200||mt(Tn)){var wn=JSON.parse(Tn.responseText);un(wn),mn.setSuccess()}else mn.setError()},Tn.send()}else un(kn),mn.setSuccess();else{if(!a.url){for(var xn=document.getElementsByTagName("script"),An=0;An<xn.length;An++)if(xn[An].src.match(/.*keycloak\.js/)){a.url=xn[An].src.substr(0,xn[An].src.indexOf("/js/keycloak.js"));break}}if(!a.realm)throw"realm missing";o.authServerUrl=a.url,o.realm=a.realm,un(null),mn.setSuccess()}}return mn.promise}function mt(fn){return fn.status==0&&fn.responseText&&fn.responseURL.startsWith("file:")}function yt(fn,mn,bn,un){if(o.tokenTimeoutHandle&&(clearTimeout(o.tokenTimeoutHandle),o.tokenTimeoutHandle=null),mn?(o.refreshToken=mn,o.refreshTokenParsed=At(mn)):(delete o.refreshToken,delete o.refreshTokenParsed),bn?(o.idToken=bn,o.idTokenParsed=At(bn)):(delete o.idToken,delete o.idTokenParsed),fn){if(o.token=fn,o.tokenParsed=At(fn),o.sessionId=o.tokenParsed.session_state,o.authenticated=!0,o.subject=o.tokenParsed.sub,o.realmAccess=o.tokenParsed.realm_access,o.resourceAccess=o.tokenParsed.resource_access,un&&(o.timeSkew=Math.floor(un/1e3)-o.tokenParsed.iat),o.timeSkew!=null&&(et("[KEYCLOAK] Estimated time difference between browser and server is "+o.timeSkew+" seconds"),o.onTokenExpired)){var Tn=(o.tokenParsed.exp-new Date().getTime()/1e3+o.timeSkew)*1e3;et("[KEYCLOAK] Token expires in "+Math.round(Tn/1e3)+" s"),Tn<=0?o.onTokenExpired():o.tokenTimeoutHandle=setTimeout(o.onTokenExpired,Tn)}}else delete o.token,delete o.tokenParsed,delete o.subject,delete o.realmAccess,delete o.resourceAccess,o.authenticated=!1}function At(fn){switch(fn=fn.split(".")[1],fn=fn.replace(/-/g,"+"),fn=fn.replace(/_/g,"/"),fn.length%4){case 0:break;case 2:fn+="==";break;case 3:fn+="=";break;default:throw"Invalid token"}return fn=decodeURIComponent(escape(atob(fn))),fn=JSON.parse(fn),fn}function wt(){var fn="0123456789abcdef",mn=dt(36,fn).split("");mn[14]="4",mn[19]=fn.substr(mn[19]&3|8,1),mn[8]=mn[13]=mn[18]=mn[23]="-";var bn=mn.join("");return bn}function Pt(fn){var mn=Rt(fn);if(mn){var bn=ct.get(mn.state);return bn&&(mn.valid=!0,mn.redirectUri=bn.redirectUri,mn.storedNonce=bn.nonce,mn.prompt=bn.prompt,mn.pkceCodeVerifier=bn.pkceCodeVerifier),mn}}function Rt(fn){var mn;switch(o.flow){case"standard":mn=["code","state","session_state","kc_action_status"];break;case"implicit":mn=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":mn=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}mn.push("error"),mn.push("error_description"),mn.push("error_uri");var bn=fn.indexOf("?"),un=fn.indexOf("#"),Tn,kn;if(o.responseMode==="query"&&bn!==-1?(Tn=fn.substring(0,bn),kn=kt(fn.substring(bn+1,un!==-1?un:fn.length),mn),kn.paramsString!==""&&(Tn+="?"+kn.paramsString),un!==-1&&(Tn+=fn.substring(un))):o.responseMode==="fragment"&&un!==-1&&(Tn=fn.substring(0,un),kn=kt(fn.substring(un+1),mn),kn.paramsString!==""&&(Tn+="#"+kn.paramsString)),kn&&kn.oauthParams){if(o.flow==="standard"||o.flow==="hybrid"){if((kn.oauthParams.code||kn.oauthParams.error)&&kn.oauthParams.state)return kn.oauthParams.newUrl=Tn,kn.oauthParams}else if(o.flow==="implicit"&&(kn.oauthParams.access_token||kn.oauthParams.error)&&kn.oauthParams.state)return kn.oauthParams.newUrl=Tn,kn.oauthParams}}function kt(fn,mn){for(var bn=fn.split("&"),un={paramsString:"",oauthParams:{}},Tn=0;Tn<bn.length;Tn++){var kn=bn[Tn].indexOf("="),xn=bn[Tn].slice(0,kn);mn.indexOf(xn)!==-1?un.oauthParams[xn]=bn[Tn].slice(kn+1):(un.paramsString!==""&&(un.paramsString+="&"),un.paramsString+=bn[Tn])}return un}function bt(){var fn={setSuccess:function(mn){fn.resolve(mn)},setError:function(mn){fn.reject(mn)}};return fn.promise=new Promise(function(mn,bn){fn.resolve=mn,fn.reject=bn}),fn.promise.success=function(mn){return logPromiseDeprecation(),this.then(function(un){mn(un)}),this},fn.promise.error=function(mn){return logPromiseDeprecation(),this.catch(function(un){mn(un)}),this},fn}function Nt(fn,mn,bn){var un=null,Tn=new Promise(function(kn,xn){un=setTimeout(function(){xn({error:bn||"Promise is not settled within timeout of "+mn+"ms"})},mn)});return Promise.race([fn,Tn]).finally(function(){clearTimeout(un)})}function Ft(){var fn=bt();if(!vt.enable||vt.iframe)return fn.setSuccess(),fn.promise;var mn=document.createElement("iframe");vt.iframe=mn,mn.onload=function(){var Tn=o.endpoints.authorize();Tn.charAt(0)==="/"?vt.iframeOrigin=at():vt.iframeOrigin=Tn.substring(0,Tn.indexOf("/",8)),fn.setSuccess()};var bn=o.endpoints.checkSessionIframe();mn.setAttribute("src",bn),mn.setAttribute("title","keycloak-session-iframe"),mn.style.display="none",document.body.appendChild(mn);var un=function(Tn){if(!(Tn.origin!==vt.iframeOrigin||vt.iframe.contentWindow!==Tn.source)&&(Tn.data=="unchanged"||Tn.data=="changed"||Tn.data=="error")){Tn.data!="unchanged"&&o.clearToken();for(var kn=vt.callbackList.splice(0,vt.callbackList.length),xn=kn.length-1;xn>=0;--xn){var An=kn[xn];Tn.data=="error"?An.setError():An.setSuccess(Tn.data=="unchanged")}}};return window.addEventListener("message",un,!1),fn.promise}function Ut(){vt.enable&&o.token&&setTimeout(function(){Jt().then(function(fn){fn&&Ut()})},vt.interval*1e3)}function Jt(){var fn=bt();if(vt.iframe&&vt.iframeOrigin){var mn=o.clientId+" "+(o.sessionId?o.sessionId:"");vt.callbackList.push(fn);var bn=vt.iframeOrigin;vt.callbackList.length==1&&vt.iframe.contentWindow.postMessage(mn,bn)}else fn.setSuccess();return fn.promise}function hn(){var fn=bt();if(vt.enable||o.silentCheckSsoRedirectUri){var mn=document.createElement("iframe");mn.setAttribute("src",o.endpoints.thirdPartyCookiesIframe()),mn.setAttribute("title","keycloak-3p-check-iframe"),mn.style.display="none",document.body.appendChild(mn);var bn=function(un){mn.contentWindow===un.source&&(un.data!=="supported"&&un.data!=="unsupported"||(un.data==="unsupported"&&(vt.enable=!1,o.silentCheckSsoFallback&&(o.silentCheckSsoRedirectUri=!1),rt("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(mn),window.removeEventListener("message",bn),fn.setSuccess()))};window.addEventListener("message",bn,!1)}else fn.setSuccess();return Nt(fn.promise,o.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function Xt(fn){if(!fn||fn=="default")return{login:function(kn){return window.location.replace(o.createLoginUrl(kn)),bt().promise},logout:function(kn){return window.location.replace(o.createLogoutUrl(kn)),bt().promise},register:function(kn){return window.location.replace(o.createRegisterUrl(kn)),bt().promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u")window.location.href=kn;else throw"Not supported by the OIDC server";return bt().promise},redirectUri:function(kn,xn){return kn&&kn.redirectUri?kn.redirectUri:o.redirectUri?o.redirectUri:location.href}};if(fn=="cordova"){vt.enable=!1;var mn=function(kn,xn,An){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(kn,xn,An):window.open(kn,xn,An)},bn=function(kn){return kn&&kn.cordovaOptions?Object.keys(kn.cordovaOptions).reduce(function(xn,An){return xn[An]=kn.cordovaOptions[An],xn},{}):{}},un=function(kn){return Object.keys(kn).reduce(function(xn,An){return xn.push(An+"="+kn[An]),xn},[]).join(",")},Tn=function(kn){var xn=bn(kn);return xn.location="no",kn&&kn.prompt=="none"&&(xn.hidden="yes"),un(xn)};return{login:function(kn){var xn=bt(),An=Tn(kn),En=o.createLoginUrl(kn),Rn=mn(En,"_blank",An),wn=!1,Dn=!1,Bn=function(){Dn=!0,Rn.close()};return Rn.addEventListener("loadstart",function(zn){if(zn.url.indexOf("http://localhost")==0){var Hn=Pt(zn.url);ut(Hn,xn),Bn(),wn=!0}}),Rn.addEventListener("loaderror",function(zn){if(!wn)if(zn.url.indexOf("http://localhost")==0){var Hn=Pt(zn.url);ut(Hn,xn),Bn(),wn=!0}else xn.setError(),Bn()}),Rn.addEventListener("exit",function(zn){Dn||xn.setError({reason:"closed_by_user"})}),xn.promise},logout:function(kn){var xn=bt(),An=o.createLogoutUrl(kn),En=mn(An,"_blank","location=no,hidden=yes,clearcache=yes"),Rn;return En.addEventListener("loadstart",function(wn){wn.url.indexOf("http://localhost")==0&&En.close()}),En.addEventListener("loaderror",function(wn){wn.url.indexOf("http://localhost")==0||(Rn=!0),En.close()}),En.addEventListener("exit",function(wn){Rn?xn.setError():(o.clearToken(),xn.setSuccess())}),xn.promise},register:function(kn){var xn=bt(),An=o.createRegisterUrl(),En=Tn(kn),Rn=mn(An,"_blank",En);return Rn.addEventListener("loadstart",function(wn){if(wn.url.indexOf("http://localhost")==0){Rn.close();var Dn=Pt(wn.url);ut(Dn,xn)}}),xn.promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u"){var xn=mn(kn,"_blank","location=no");xn.addEventListener("loadstart",function(An){An.url.indexOf("http://localhost")==0&&xn.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(kn){return"http://localhost"}}}if(fn=="cordova-native")return vt.enable=!1,{login:function(kn){var xn=bt(),An=o.createLoginUrl(kn);return universalLinks.subscribe("keycloak",function(En){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var Rn=Pt(En.url);ut(Rn,xn)}),window.cordova.plugins.browsertab.openUrl(An),xn.promise},logout:function(kn){var xn=bt(),An=o.createLogoutUrl(kn);return universalLinks.subscribe("keycloak",function(En){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),o.clearToken(),xn.setSuccess()}),window.cordova.plugins.browsertab.openUrl(An),xn.promise},register:function(kn){var xn=bt(),An=o.createRegisterUrl(kn);return universalLinks.subscribe("keycloak",function(En){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var Rn=Pt(En.url);ut(Rn,xn)}),window.cordova.plugins.browsertab.openUrl(An),xn.promise},accountManagement:function(){var kn=o.createAccountUrl();if(typeof kn<"u")window.cordova.plugins.browsertab.openUrl(kn);else throw"Not supported by the OIDC server"},redirectUri:function(kn){return kn&&kn.redirectUri?kn.redirectUri:o.redirectUri?o.redirectUri:"http://localhost"}};throw"invalid adapter type: "+fn}var zt=function(){if(!(this instanceof zt))return new zt;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var fn=this;function mn(){for(var bn=new Date().getTime(),un=0;un<localStorage.length;un++){var Tn=localStorage.key(un);if(Tn&&Tn.indexOf("kc-callback-")==0){var kn=localStorage.getItem(Tn);if(kn)try{var xn=JSON.parse(kn).expires;(!xn||xn<bn)&&localStorage.removeItem(Tn)}catch{localStorage.removeItem(Tn)}}}}fn.get=function(bn){if(bn){var un="kc-callback-"+bn,Tn=localStorage.getItem(un);return Tn&&(localStorage.removeItem(un),Tn=JSON.parse(Tn)),mn(),Tn}},fn.add=function(bn){mn();var un="kc-callback-"+bn.state;bn.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(un,JSON.stringify(bn))}},cn=function(){if(!(this instanceof cn))return new cn;var fn=this;fn.get=function(Tn){if(Tn){var kn=bn("kc-callback-"+Tn);if(un("kc-callback-"+Tn,"",mn(-100)),kn)return JSON.parse(kn)}},fn.add=function(Tn){un("kc-callback-"+Tn.state,JSON.stringify(Tn),mn(60))},fn.removeItem=function(Tn){un(Tn,"",mn(-100))};var mn=function(Tn){var kn=new Date;return kn.setTime(kn.getTime()+Tn*60*1e3),kn},bn=function(Tn){for(var kn=Tn+"=",xn=document.cookie.split(";"),An=0;An<xn.length;An++){for(var En=xn[An];En.charAt(0)==" ";)En=En.substring(1);if(En.indexOf(kn)==0)return En.substring(kn.length,En.length)}return""},un=function(Tn,kn,xn){var An=Tn+"="+kn+"; expires="+xn.toUTCString()+"; ";document.cookie=An}};function vn(){try{return new zt}catch{}return new cn}function Sn(fn){return function(){o.enableLogging&&fn.apply(console,Array.prototype.slice.call(arguments))}}}function loginKeyCloakJS(){return new Promise((a,o)=>{const _e=new Keycloak({url:"https://idp.apizee.com/auth",realm:"APIZEE-POC-DGPN",clientId:"visio-assisted"});_e.init({onLoad:"login-required",checkLoginIframe:!1}).then(tt=>{tt?(console.log("Keycloak authenticated"),a(_e)):console.log("Keycloak NOT authenticated...")}).catch(tt=>{console.error("Authenticated Failed",tt),o(tt)})})}const ROOM_THEME_OPTIONS={components:{MuiChip:{variants:[{props:{},style:{color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"}}}]},MuiCircularProgress:{variants:[{props:{},style:{color:"#F7F7F8"}}]},MuiIconButton:{variants:[{props:{},style:{padding:4,margin:2,color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"},":disabled":{color:"#7A8085",backgroundColor:"#CACCCE",opacity:"75%"}}}]},MuiSwitch:{styleOverrides:{colorPrimary:{"&.Mui-checked":{color:"#17821A"}},track:{".Mui-checked.Mui-checked + &":{backgroundColor:"#17821A"}}}}}},VIDEO_ROUNDED_CORNERS={borderRadius:"4px",overflow:"hidden"},DEBUG={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0},INFO={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0},WARN={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0},ERROR={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1};function setLogLevel(a){switch(a){case"debug":globalThis.logLevel=DEBUG;break;case"info":globalThis.logLevel=INFO;break;case"warn":globalThis.logLevel=WARN;break;case"error":globalThis.logLevel=ERROR;break;default:globalThis.logLevel=INFO}}function isInstanceOfTakeSnapshot(a){return typeof a!="object"?!1:"takeSnapshot"in a}function isInstanceOfSwitchFacingMode(a){return typeof a!="object"?!1:"switchFacingMode"in a}function isInstanceOfFileShared(a){return typeof a!="object"?!1:"fileShared"in a}function isInstanceOfHangup(a){return typeof a!="object"?!1:"hangUp"in a}const video_sizing={height:"100%",width:"100%"},COMPONENT_NAME="App";function App(a){var an,qt;const o=useThemeProps({props:a,name:`${COMPONENT_NAME}`}),{optInCGUPrefixText:_e="I agree to the ",optInCGULinkText:tt="General Terms of Sale",optInCGUAriaLabel:ct="accept-terms-conditions",optInPrivacyPrefixText:vt="I agree to the ",optInPrivacyLinkText:nt="Privacy Policy",optInPrivacyAriaLabel:it="accept-privacy-policy",optInButtonText:s="Confirm",backButtonText:et="Back",readyButtonText:rt="Enter",selectDeviceHelperText:ot="Please check what you want to share before entering the room.",hangedUpText:gt="The agent hanged up. Bye!"}=o,dt=useParams(),[pt]=useSearchParams(),st=reactExports.useMemo(()=>pt.get("lL")??globalThis.logLevel.level,[pt]);reactExports.useEffect(()=>{setLogLevel(st),A(st),te(st)},[st]);const ht=reactExports.useMemo(()=>pt.get("lRAppID"),[pt]);reactExports.useEffect(()=>{ht&&ht!==""&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket init`,ht),LogRocket.init(ht))},[ht]);const at=reactExports.useMemo(()=>pt.get("iU")??"https://is.dev.apizee.com/invitations",[pt]),[ut,ft]=reactExports.useState(void 0),[mt,yt]=reactExports.useState(!1),[At,wt]=reactExports.useState(void 0),[Pt,Rt]=reactExports.useState(),[kt,bt]=reactExports.useState(void 0),[Nt,Ft]=reactExports.useState(void 0),[Ut,Jt]=reactExports.useState(0),hn=()=>{Jt(tn=>tn+1)},Xt=()=>{Jt(tn=>tn-1)},zt=reactExports.useMemo(()=>Ut>=1,[Ut]),{value:cn,toggle:vn}=q(!1),[Sn,fn]=reactExports.useState(),[mn,bn]=reactExports.useState(!1),{session:un,disconnect:Tn}=I(ut?{apiKey:ut.apiKey}:void 0,ut?{cloudUrl:ut.cloudUrl?ut.cloudUrl:"https://cloud.apirtc.com",groups:[ut.conversation.name+"-guests"],userData:new apiRTC_minExports.UserData({firstName:ut.user.firstName,lastName:ut.user.lastName})}:void 0),{userMediaDevices:kn,selectedAudioIn:xn,setSelectedAudioIn:An,selectedVideoIn:En,setSelectedVideoIn:Rn}=O(un,isMobile_1?void 0:"apirtc-web-guest"),wn=reactExports.useMemo(()=>ut?ut.streams.find(tn=>tn.type==="user-media"):void 0,[ut]),Dn=reactExports.useMemo(()=>ut?ut.streams.find(tn=>tn.type==="display-media"):void 0,[ut]);reactExports.useEffect(()=>{un&&ut&&un.getUserAgent().enableCallStatsMonitoring(ut.callStatsMonitoringInterval!==void 0,{interval:ut.callStatsMonitoringInterval})},[un,ut]),reactExports.useEffect(()=>{var tn,gn;if(wn){const rn=(tn=wn.constraints)==null?void 0:tn.audio,pn=(gn=wn.constraints)==null?void 0:gn.video;bt(!!rn),Ft(!!pn),pn instanceof Object&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useEffect invitationData has video constraints`,pn),pn.facingMode&&Rt(pn.facingMode))}},[wn]),reactExports.useEffect(()=>{isMobile_1&&(En&&Rn(void 0),Pt==="environment"&&Nn(!0))},[Pt]);const Bn=reactExports.useMemo(()=>{const tn={...wn==null?void 0:wn.constraints};if(tn!=null&&tn.audio&&(kt===void 0||kt)){const gn=tn.audio instanceof Object?{...tn.audio}:{};xn&&(gn.deviceId=xn.id),tn.audio=gn}else tn.audio=!1;if(tn!=null&&tn.video&&(Nt===void 0||Nt)){const gn=tn.video instanceof Object?{...tn.video}:{};En?(gn.deviceId=En.id,delete gn.facingMode):Pt&&(gn.facingMode=Pt,delete gn.deviceId),tn.video=gn}else tn.video=!1;return globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useMemo new_constraints`,tn),tn},[wn,xn,En,Pt,kt,Nt]),{stream:zn}=b(zt&&wn?un:void 0,{constraints:Bn}),[Hn,nr]=reactExports.useState(),{conversation:sn,leave:Gn}=d(un,ut?ut.conversation.name:void 0,ut?ut.conversation.getOrCreateOptions:void 0,!0,ut?ut.conversation.joinOptions:void 0),{publishedStreams:Zn,subscribedStreams:rr}=T(sn,[...zn&&cn?[{stream:zn,options:wn==null?void 0:wn.publishOptions}]:[],...Hn?[{stream:Hn}]:[]]),Fn=reactExports.useCallback(tn=>{sn&&sn.sendData(tn).then(()=>{globalThis.logLevel.isDebugEnabled&&console.log(`${COMPONENT_NAME}|conversation sendData`,tn)}).catch(gn=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation sendData error`,gn)})},[sn]),Xn=()=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|shareScreen calls createDisplayMediaStream`),apiRTC_minExports.Stream.createDisplayMediaStream({},!1).then(tn=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME}|createDisplayMediaStream`,tn),nr(tn)}).catch(tn=>{console.error(`${COMPONENT_NAME}|createDisplayMediaStream error`,tn)}).finally(()=>{})},{value:Yn,setValue:Nn,toggle:Un}=q(!1),[Cn,Mn]=reactExports.useState();reactExports.useEffect(()=>{const tn=rr.find(gn=>gn.isScreensharing());Mn(tn||void 0)},[rr]);const Kt=reactExports.useMemo(()=>rr.length===0?!0:Yn,[rr,Yn]),[Ot,lt]=reactExports.useState({}),Tt=async(tn,gn)=>fetch(`${at}/${tn}`,{method:"GET",headers:{Authorization:`Bearer ${gn}`,"Content-Type":"application/json"}}).then(rn=>rn.status!==200?null:rn.json()).catch(rn=>{console.error(`${COMPONENT_NAME}|getInvitationData`,rn)});reactExports.useEffect(()=>{const tn=gn=>{ft(void 0)};return window.addEventListener("beforeunload",tn),()=>{window.removeEventListener("beforeunload",tn)}},[]),reactExports.useEffect(()=>{const tn=pt.get("i");if(tn)try{const gn=JSON.parse(base64Exports.decode(tn));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify(gn)),ft(gn)}catch(gn){if(gn instanceof SyntaxError){Tt(tn).then(rn=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME}|getInvitationData`,tn,rn),ft(rn.data)});return}else console.error(`${COMPONENT_NAME}|parsing i search parameter error`,gn),yt(!0)}},[pt]),reactExports.useEffect(()=>{if(dt.invitationData)try{const tn=JSON.parse(base64Exports.decode(dt.invitationData));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify(tn)),ft(tn)}catch(tn){if(tn instanceof SyntaxError){const gn=dt.invitationData;loginKeyCloakJS().then(rn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|keycloak.token`,rn.token),Tt(gn).then(pn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|getInvitationData`,gn,pn),ft(pn)})}).catch(rn=>{console.error(`${COMPONENT_NAME}|loginKeyCloakJS error`,rn)})}}},[dt.invitationData]),reactExports.useEffect(()=>{ut&&un&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket identify`,ut.conversation.name,un.getId()),LogRocket.identify(`${ut.conversation.name}-${un.getId()}`))},[ut,un]),reactExports.useEffect(()=>{if(un){const tn=un.getUserAgent(),gn=new uaParserExports.UAParser;globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|UAParser`,gn.getResult());const rn=tn.getUserData();rn.setToSession(),rn.setProp("systemInfo",JSON.stringify(gn.getResult())),tn.setUserData(rn)}},[un]),reactExports.useEffect(()=>{if(un&&zn){const tn=gn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|onContactData`,gn);const rn=gn.sender,pn=gn.content;isInstanceOfTakeSnapshot(pn)?zn.takeSnapshot(pn.takeSnapshot).then(In=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|takeSnapshot of`,zn,In),rn.sendFile({name:`snapshot_${new Date().toISOString()}.png`,type:"image/png"},In).on("statusChange",_n=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|statusChange`,_n)})}).catch(In=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|takeSnapshot error`,In)}):isInstanceOfSwitchFacingMode(pn)&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|SwitchFacingMode`),Rt(In=>In==="user"?"environment":"user"))};return un.on("contactData",tn),()=>{un.removeListener("contactData",tn)}}},[un,zn]),reactExports.useEffect(()=>{if(sn){const tn=gn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|Conversation onData`,gn);const rn=gn.content;isInstanceOfFileShared(rn)?(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|fileShared`,rn),fetch(rn.fileShared.link,{method:"get",mode:"cors",headers:new Headers({Authorization:"Bearer "+rn.fileShared.jwt})}).then(pn=>pn.blob()).then(pn=>{const In=window.URL.createObjectURL(pn);fn(In)}).catch(pn=>{console.error(`${COMPONENT_NAME}|fetch error`,rn.fileShared.link,pn)})):isInstanceOfHangup(rn)&&(sn.leave().then().catch(pn=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation leave error`,pn)}).finally(()=>{Tn()}),bn(!0))};return sn.on("data",tn),()=>{sn.removeListener("data",tn)}}},[sn,Tn]),reactExports.useEffect(()=>{if(sn){const tn=rn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|pointerSharingEnabled`,rn)};sn.on("pointerSharingEnabled",tn);const gn=rn=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|pointerLocationChanged`,rn),lt(pn=>({...pn,[rn.source.contactId]:rn.data})),setTimeout(()=>{lt(pn=>(delete pn[rn.source.contactId],{pointer:pn}))},3e3)};return sn.on("pointerLocationChanged",gn),sn.enablePointerSharing(!0),()=>{sn.removeListener("pointerSharingEnabled",tn),sn.removeListener("pointerLocationChanged",gn)}}},[sn]);const It=reactExports.useCallback((tn,gn)=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|onStreamMouseDown`,tn.getId(),gn),sn&&sn.sendPointerLocation({streamId:tn.getId(),contactId:tn.getContact()?tn.getContact().getId():apiRTC.userAgentInstance.userId},0,0,{top:`${Math.round(gn.nativeEvent.offsetY*100/gn.nativeEvent.target.offsetHeight)}%`,left:`${Math.round(gn.nativeEvent.offsetX*100/gn.nativeEvent.target.offsetWidth)}%`})},[sn]);reactExports.useEffect(()=>{if(Hn)return Hn.on("stopped",()=>{globalThis.logLevel.isInfoEnabled&&console.log(`${COMPONENT_NAME}|The user has ended sharing the screen`),nr(void 0)}),()=>{Hn.release()}},[Hn]),reactExports.useEffect(()=>{zt&&Fn({type:"timeline-event",event:"opt-in-accepted"})},[Fn,zt]),reactExports.useEffect(()=>{zn&&Fn({type:"timeline-event",event:"camera-stream-grabbed"})},[Fn,zn]),reactExports.useEffect(()=>{cn&&Fn({type:"timeline-event",event:"enter-room"})},[Fn,cn]);const Dt=tn=>{var pn,In;const gn=(pn=tn.getContact())==null?void 0:pn.getUserData().get("firstName"),rn=(In=tn.getContact())==null?void 0:In.getUserData().get("lastName");if(!(!gn&&!rn))return`${gn??""} ${rn??""}`},Et=!Kt&&rr.length<=2?"large":void 0,$t=(tn,gn)=>jsxRuntimeExports.jsx(K,{id:"subscribed-stream-"+gn,sx:{...tn.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:tn,name:Dt(tn),controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_$1,{size:Et}),jsxRuntimeExports.jsx(j$1,{size:Et,disabled:!0}),jsxRuntimeExports.jsx(Z,{size:Et,disabled:!0})]}),onClick:Kt?void 0:()=>{Mn(rn=>rn?void 0:tn)},children:tn.hasVideo()?jsxRuntimeExports.jsx(X,{sx:video_sizing,style:{...video_sizing,objectFit:tn.isScreensharing()?"contain":Ot[tn.getContact().getId()]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:Ot[tn.getContact().getId()],onMouseDown:rn=>{It(tn,rn)}}):jsxRuntimeExports.jsx(F,{})},gn),xt=Cn?$t(Cn,0):rr.map((tn,gn)=>$t(tn,gn)),Vt=Kt&&Zn.length<=2?"large":void 0,Zt=Zn.map((tn,gn)=>jsxRuntimeExports.jsx(K,{id:"published-stream-"+gn,sx:{...tn.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:tn,muted:!0,controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(j$1,{size:Vt}),jsxRuntimeExports.jsx(Z,{size:Vt})]}),children:tn.hasVideo()?jsxRuntimeExports.jsx(X,{sx:video_sizing,style:{...video_sizing,objectFit:Ot[apiRTC.userAgentInstance.userId]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:Ot[apiRTC.userAgentInstance.userId],onMouseDown:rn=>{It(tn,rn)}}):jsxRuntimeExports.jsx(F,{})},gn));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!un&&!mt&&jsxRuntimeExports.jsx(Box$1,{display:"flex",alignItems:"center",justifyContent:"center",sx:{mt:5},children:jsxRuntimeExports.jsx("img",{height:"320px",width:"320px",src:logo,alt:"logo"})}),mt&&jsxRuntimeExports.jsx(ErrorPage,{errorType:At}),un&&!mt&&!cn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs(TextStepper,{activeStep:Ut,header:jsxRuntimeExports.jsx("img",{src:logo,alt:"Apizee Logo",height:24}),children:[jsxRuntimeExports.jsx(Step$1,{children:jsxRuntimeExports.jsx(OptInList,{optIns:[{id:"CGU",labels:{aria:ct,prefix:_e,link:tt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/b87662d7-3e82-4519-a4db-9fb6ba67b5cc/Apizee-ConditionsGeneralesUtilisation.pdf":"https://cloud.apizee.com/attachments/cb744e03-182b-453e-bbdf-0d89cf42e182/Apizee-TermsOfUse.pdf"},{id:"Privacy",labels:{aria:it,prefix:vt,link:nt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/f87493b0-483e-4723-a3ee-02d59a501b1c/Apizee-PolitiqueConfidentialite.pdf":"https://cloud.apizee.com/attachments/ae61f778-16d1-4dd4-baa1-cd1ba568a0d6/Apizee-PrivacyPolicy.pdf"}],labels:{submit:s},onSubmit:hn})},"legal"),jsxRuntimeExports.jsxs(Step$1,{children:[wn&&jsxRuntimeExports.jsxs(Stack$1,{sx:{mt:1},direction:{xs:"column"},alignItems:"center",justifyContent:"center",useFlexGap:!0,flexWrap:"wrap",spacing:1,children:[jsxRuntimeExports.jsx(Box$1,{sx:{width:"100%",paddingTop:"75%",position:"relative","& .MuiBox-root":{position:"absolute",height:"100%",maxWidth:"100%"}},children:zn?jsxRuntimeExports.jsx(K,{sx:{top:0,left:0,bottom:0,right:0,maxWidth:{xs:"100%",sm:"100%"},...!zn.hasVideo()&&{position:"absolute",inset:0,borderRadius:"4px",backgroundColor:"#CACCCE"}},stream:zn,muted:!0,children:zn.hasVideo()?jsxRuntimeExports.jsx(X,{style:{height:"100%",...VIDEO_ROUNDED_CORNERS},"data-testid":"local-video"}):jsxRuntimeExports.jsx(F,{"data-testid":"local-audio"})}):jsxRuntimeExports.jsx(Skeleton$1,{variant:"rectangular",width:"100%",height:"100%",sx:{position:"absolute",top:0,left:0}})}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((an=wn.constraints)!=null&&an.audio),onClick:()=>bt(!kt),children:jsxRuntimeExports.jsx(Icon$1,{children:Bn.audio?"mic_on":"mic_off"})}),jsxRuntimeExports.jsx(C,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"audio-in",size:"small",disabled:!Bn.audio,devices:kn.audioinput,selectedDevice:xn,setSelectedDevice:An})]}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((qt=wn.constraints)!=null&&qt.video),onClick:()=>{Ft(!Nt)},children:jsxRuntimeExports.jsx(Icon$1,{children:Bn.video?"videocam_on":"videocam_off"})}),jsxRuntimeExports.jsx(C,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"video-in",size:"small",disabled:!Bn.video,devices:kn.videoinput,selectedDevice:En,setSelectedDevice:Rn})]})]}),Dn&&jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"center",mt:1},children:jsxRuntimeExports.jsx(Button$1,{variant:"outlined",color:"primary",onClick:Xn,children:"share screen"})}),jsxRuntimeExports.jsx(Typography$1,{sx:{mt:1},children:ot}),jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:[jsxRuntimeExports.jsx(Button$1,{onClick:Xt,children:et}),jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:Dn&&!Hn,onClick:vn,children:rt})]})]},"device-selection")]})})})})}),sn&&cn&&jsxRuntimeExports.jsxs(Box$1,{sx:{position:"relative",height:"99vh",width:"100vw",maxWidth:"100%"},children:[jsxRuntimeExports.jsx(S,{sx:{height:"100%",width:"100%"},children:Kt?Zt:xt}),jsxRuntimeExports.jsx(S,{sx:{position:"absolute",bottom:4,left:4,opacity:.9,height:"34%",width:{xs:"50%",sm:"40%",md:"30%",lg:"20%"}},onClick:Un,children:Kt?xt:Zt})]}),Sn&&jsxRuntimeExports.jsx("img",{src:Sn,alt:"sharedImg"}),mn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"md",children:jsxRuntimeExports.jsx(Alert$1,{severity:"info",children:gt})})]})}const index="",frFR={components:{App:{defaultProps:{acceptTitleText:"Documents légaux",optInCGUPrefixText:"J'accepte les ",optInCGULinkText:"Conditions générales d'utilisation",optInCGUAriaLabel:"conditions-générales",optInPrivacyPrefixText:"J'accepte la ",optInPrivacyLinkText:"Politique de confidentialité",optInPrivacyAriaLabel:"politique-confidentialité",optInButtonText:"Confirmer",backButtonText:"Retour",readyButtonText:"Entrer en communication",selectDeviceText:"Sélection de périphériques",selectDeviceHelperText:"Avant d'entrer en communication, vérifiez ce que vous partagerez avec votre interlocuteur.",hangedUpText:"L'agent a raccroché."}}}};setLogLevel("warn");A(globalThis.logLevel.level);te(globalThis.logLevel.level);function getLangFiles(){switch(navigator.language){case"fr":case"fr-FR":return[frFR,$];default:return[]}}document.documentElement.setAttribute("lang",navigator.language.slice(0,2));const theme=createTheme({palette:{mode:"light",primary:{main:"#F76B40",light:"#ba3108",dark:"#f88562"},secondary:{main:"#5b5baf",light:"#8eabc7",dark:"#2e455c"},success:{main:"#0F5712",light:"#17821A",dark:"#0A340B"},info:{main:"#1355AE"},neutral:{main:"rgba(0, 0, 0, 0.23)"}},typography:{button:{textTransform:"none"}},...ROOM_THEME_OPTIONS},...getLangFiles()),container=document.getElementById("root");container&&createRoot(container).render(jsxRuntimeExports.jsx(ThemeProvider,{theme,children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/web-guest",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(Route,{path:"/:invitationData",element:jsxRuntimeExports.jsx(App,{})})]})})}));
