function _mergeNamespaces(a,o){for(var _e=0;_e<o.length;_e++){const tt=o[_e];if(typeof tt!="string"&&!Array.isArray(tt)){for(const ct in tt)if(ct!=="default"&&!(ct in a)){const gt=Object.getOwnPropertyDescriptor(tt,ct);gt&&Object.defineProperty(a,ct,gt.get?gt:{enumerable:!0,get:()=>tt[ct]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))tt(ct);new MutationObserver(ct=>{for(const gt of ct)if(gt.type==="childList")for(const rt of gt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&tt(rt)}).observe(document,{childList:!0,subtree:!0});function _e(ct){const gt={};return ct.integrity&&(gt.integrity=ct.integrity),ct.referrerPolicy&&(gt.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?gt.credentials="include":ct.crossOrigin==="anonymous"?gt.credentials="omit":gt.credentials="same-origin",gt}function tt(ct){if(ct.ep)return;ct.ep=!0;const gt=_e(ct);fetch(ct.href,gt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$4(a){return a===null||typeof a!="object"?null:(a=z$3&&a[z$3]||a["@@iterator"],typeof a=="function"?a:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,o){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,o,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(a,o,_e){this.props=a,this.context=o,this.refs=D$2,this.updater=_e||B$2}var H$1=G$2.prototype=new F$1;H$1.constructor=G$2;C$2(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(a,o,_e){var tt,ct={},gt=null,rt=null;if(o!=null)for(tt in o.ref!==void 0&&(rt=o.ref),o.key!==void 0&&(gt=""+o.key),o)J$1.call(o,tt)&&!L$1.hasOwnProperty(tt)&&(ct[tt]=o[tt]);var it=arguments.length-2;if(it===1)ct.children=_e;else if(1<it){for(var s=Array(it),et=0;et<it;et++)s[et]=arguments[et+2];ct.children=s}if(a&&a.defaultProps)for(tt in it=a.defaultProps,it)ct[tt]===void 0&&(ct[tt]=it[tt]);return{$$typeof:l$3,type:a,key:gt,ref:rt,props:ct,_owner:K$2.current}}function N$2(a,o){return{$$typeof:l$3,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}}function O$2(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$3}function escape$1(a){var o={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(_e){return o[_e]})}var P$2=/\/+/g;function Q$2(a,o){return typeof a=="object"&&a!==null&&a.key!=null?escape$1(""+a.key):o.toString(36)}function R$2(a,o,_e,tt,ct){var gt=typeof a;(gt==="undefined"||gt==="boolean")&&(a=null);var rt=!1;if(a===null)rt=!0;else switch(gt){case"string":case"number":rt=!0;break;case"object":switch(a.$$typeof){case l$3:case n$3:rt=!0}}if(rt)return rt=a,ct=ct(rt),a=tt===""?"."+Q$2(rt,0):tt,I$1(ct)?(_e="",a!=null&&(_e=a.replace(P$2,"$&/")+"/"),R$2(ct,o,_e,"",function(et){return et})):ct!=null&&(O$2(ct)&&(ct=N$2(ct,_e+(!ct.key||rt&&rt.key===ct.key?"":(""+ct.key).replace(P$2,"$&/")+"/")+a)),o.push(ct)),1;if(rt=0,tt=tt===""?".":tt+":",I$1(a))for(var it=0;it<a.length;it++){gt=a[it];var s=tt+Q$2(gt,it);rt+=R$2(gt,o,_e,s,ct)}else if(s=A$4(a),typeof s=="function")for(a=s.call(a),it=0;!(gt=a.next()).done;)gt=gt.value,s=tt+Q$2(gt,it++),rt+=R$2(gt,o,_e,s,ct);else if(gt==="object")throw o=String(a),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$3(a,o,_e){if(a==null)return a;var tt=[],ct=0;return R$2(a,tt,"","",function(gt){return o.call(_e,gt,ct++)}),tt}function T$2(a){if(a._status===-1){var o=a._result;o=o(),o.then(function(_e){(a._status===0||a._status===-1)&&(a._status=1,a._result=_e)},function(_e){(a._status===0||a._status===-1)&&(a._status=2,a._result=_e)}),a._status===-1&&(a._status=0,a._result=o)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$3={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};react_production_min.Children={map:S$3,forEach:function(a,o,_e){S$3(a,function(){o.apply(this,arguments)},_e)},count:function(a){var o=0;return S$3(a,function(){o++}),o},toArray:function(a){return S$3(a,function(o){return o})||[]},only:function(a){if(!O$2(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(a,o,_e){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var tt=C$2({},a.props),ct=a.key,gt=a.ref,rt=a._owner;if(o!=null){if(o.ref!==void 0&&(gt=o.ref,rt=K$2.current),o.key!==void 0&&(ct=""+o.key),a.type&&a.type.defaultProps)var it=a.type.defaultProps;for(s in o)J$1.call(o,s)&&!L$1.hasOwnProperty(s)&&(tt[s]=o[s]===void 0&&it!==void 0?it[s]:o[s])}var s=arguments.length-2;if(s===1)tt.children=_e;else if(1<s){it=Array(s);for(var et=0;et<s;et++)it[et]=arguments[et+2];tt.children=it}return{$$typeof:l$3,type:a.type,key:ct,ref:gt,props:tt,_owner:rt}};react_production_min.createContext=function(a){return a={$$typeof:u$2,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$2,_context:a},a.Consumer=a};react_production_min.createElement=M$2;react_production_min.createFactory=function(a){var o=M$2.bind(null,a);return o.type=a,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$3,render:a}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(a){return{$$typeof:y$1,_payload:{_status:-1,_result:a},_init:T$2}};react_production_min.memo=function(a,o){return{$$typeof:x$2,type:a,compare:o===void 0?null:o}};react_production_min.startTransition=function(a){var o=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,o){return U$1.current.useCallback(a,o)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,o){return U$1.current.useEffect(a,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,o,_e){return U$1.current.useImperativeHandle(a,o,_e)};react_production_min.useInsertionEffect=function(a,o){return U$1.current.useInsertionEffect(a,o)};react_production_min.useLayoutEffect=function(a,o){return U$1.current.useLayoutEffect(a,o)};react_production_min.useMemo=function(a,o){return U$1.current.useMemo(a,o)};react_production_min.useReducer=function(a,o,_e){return U$1.current.useReducer(a,o,_e)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,o,_e){return U$1.current.useSyncExternalStore(a,o,_e)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$3(a,o,_e){var tt,ct={},gt=null,rt=null;_e!==void 0&&(gt=""+_e),o.key!==void 0&&(gt=""+o.key),o.ref!==void 0&&(rt=o.ref);for(tt in o)m$3.call(o,tt)&&!p$3.hasOwnProperty(tt)&&(ct[tt]=o[tt]);if(a&&a.defaultProps)for(tt in o=a.defaultProps,o)ct[tt]===void 0&&(ct[tt]=o[tt]);return{$$typeof:k$3,type:a,key:gt,ref:rt,props:ct,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function o(Ft,un){var vn=Ft.length;Ft.push(un);e:for(;0<vn;){var yn=vn-1>>>1,cn=Ft[yn];if(0<ct(cn,un))Ft[yn]=un,Ft[vn]=cn,vn=yn;else break e}}function _e(Ft){return Ft.length===0?null:Ft[0]}function tt(Ft){if(Ft.length===0)return null;var un=Ft[0],vn=Ft.pop();if(vn!==un){Ft[0]=vn;e:for(var yn=0,cn=Ft.length,gn=cn>>>1;yn<gn;){var Cn=2*(yn+1)-1,fn=Ft[Cn],Tn=Cn+1,On=Ft[Tn];if(0>ct(fn,vn))Tn<cn&&0>ct(On,fn)?(Ft[yn]=On,Ft[Tn]=vn,yn=Tn):(Ft[yn]=fn,Ft[Cn]=vn,yn=Cn);else if(Tn<cn&&0>ct(On,vn))Ft[yn]=On,Ft[Tn]=vn,yn=Tn;else break e}}return un}function ct(Ft,un){var vn=Ft.sortIndex-un.sortIndex;return vn!==0?vn:Ft.id-un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var gt=performance;a.unstable_now=function(){return gt.now()}}else{var rt=Date,it=rt.now();a.unstable_now=function(){return rt.now()-it}}var s=[],et=[],nt=1,at=null,ht=3,dt=!1,pt=!1,lt=!1,mt=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(Ft){for(var un=_e(et);un!==null;){if(un.callback===null)tt(et);else if(un.startTime<=Ft)tt(et),un.sortIndex=un.expirationTime,o(s,un);else break;un=_e(et)}}function bt(Ft){if(lt=!1,ft(Ft),!pt)if(_e(s)!==null)pt=!0,nn(vt);else{var un=_e(et);un!==null&&zt(bt,un.startTime-Ft)}}function vt(Ft,un){pt=!1,lt&&(lt=!1,ot(Nt),Nt=-1),dt=!0;var vn=ht;try{for(ft(un),at=_e(s);at!==null&&(!(at.expirationTime>un)||Ft&&!Mt());){var yn=at.callback;if(typeof yn=="function"){at.callback=null,ht=at.priorityLevel;var cn=yn(at.expirationTime<=un);un=a.unstable_now(),typeof cn=="function"?at.callback=cn:at===_e(s)&&tt(s),ft(un)}else tt(s);at=_e(s)}if(at!==null)var gn=!0;else{var Cn=_e(et);Cn!==null&&zt(bt,Cn.startTime-un),gn=!1}return gn}finally{at=null,ht=vn,dt=!1}}var yt=!1,At=null,Nt=-1,St=5,wt=-1;function Mt(){return!(a.unstable_now()-wt<St)}function Ht(){if(At!==null){var Ft=a.unstable_now();wt=Ft;var un=!0;try{un=At(!0,Ft)}finally{un?Ot():(yt=!1,At=null)}}else yt=!1}var Ot;if(typeof ut=="function")Ot=function(){ut(Ht)};else if(typeof MessageChannel<"u"){var Dt=new MessageChannel,Gt=Dt.port2;Dt.port1.onmessage=Ht,Ot=function(){Gt.postMessage(null)}}else Ot=function(){mt(Ht,0)};function nn(Ft){At=Ft,yt||(yt=!0,Ot())}function zt(Ft,un){Nt=mt(function(){Ft(a.unstable_now())},un)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Ft){Ft.callback=null},a.unstable_continueExecution=function(){pt||dt||(pt=!0,nn(vt))},a.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<Ft?Math.floor(1e3/Ft):5},a.unstable_getCurrentPriorityLevel=function(){return ht},a.unstable_getFirstCallbackNode=function(){return _e(s)},a.unstable_next=function(Ft){switch(ht){case 1:case 2:case 3:var un=3;break;default:un=ht}var vn=ht;ht=un;try{return Ft()}finally{ht=vn}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Ft,un){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var vn=ht;ht=Ft;try{return un()}finally{ht=vn}},a.unstable_scheduleCallback=function(Ft,un,vn){var yn=a.unstable_now();switch(typeof vn=="object"&&vn!==null?(vn=vn.delay,vn=typeof vn=="number"&&0<vn?yn+vn:yn):vn=yn,Ft){case 1:var cn=-1;break;case 2:cn=250;break;case 5:cn=1073741823;break;case 4:cn=1e4;break;default:cn=5e3}return cn=vn+cn,Ft={id:nt++,callback:un,priorityLevel:Ft,startTime:vn,expirationTime:cn,sortIndex:-1},vn>yn?(Ft.sortIndex=vn,o(et,Ft),_e(s)===null&&Ft===_e(et)&&(lt?(ot(Nt),Nt=-1):lt=!0,zt(bt,vn-yn))):(Ft.sortIndex=cn,o(s,Ft),pt||dt||(pt=!0,nn(vt))),Ft},a.unstable_shouldYield=Mt,a.unstable_wrapCallback=function(Ft){var un=ht;return function(){var vn=ht;ht=un;try{return Ft.apply(this,arguments)}finally{ht=vn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,_e=1;_e<arguments.length;_e++)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,o){ha(a,o),ha(a+"Capture",o)}function ha(a,o){for(ea[a]=o,a=0;a<o.length;a++)da.add(o[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,o,_e,tt){if(_e!==null&&_e.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return tt?!1:_e!==null?!_e.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,o,_e,tt){if(o===null||typeof o>"u"||pa(a,o,_e,tt))return!0;if(tt)return!1;if(_e!==null)switch(_e.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$2(a,o,_e,tt,ct,gt,rt){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=tt,this.attributeNamespace=ct,this.mustUseProperty=_e,this.propertyName=a,this.type=o,this.sanitizeURL=gt,this.removeEmptyString=rt}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z$2[a]=new v$2(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var o=a[0];z$2[o]=new v$2(o,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z$2[a]=new v$2(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z$2[a]=new v$2(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z$2[a]=new v$2(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z$2[a]=new v$2(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z$2[a]=new v$2(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z$2[a]=new v$2(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var o=a.replace(ra,sa);z$2[o]=new v$2(o,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z$2[a]=new v$2(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,o,_e,tt){var ct=z$2.hasOwnProperty(o)?z$2[o]:null;(ct!==null?ct.type!==0:tt||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,_e,ct,tt)&&(_e=null),tt||ct===null?oa(o)&&(_e===null?a.removeAttribute(o):a.setAttribute(o,""+_e)):ct.mustUseProperty?a[ct.propertyName]=_e===null?ct.type===3?!1:"":_e:(o=ct.attributeName,tt=ct.attributeNamespace,_e===null?a.removeAttribute(o):(ct=ct.type,_e=ct===3||ct===4&&_e===!0?"":""+_e,tt?a.setAttributeNS(tt,o,_e):a.setAttribute(o,_e))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A$3=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(_e){var o=_e.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+a}var Na=!1;function Oa(a,o){if(!a||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(et){var tt=et}Reflect.construct(a,[],o)}else{try{o.call()}catch(et){tt=et}a.call(o.prototype)}else{try{throw Error()}catch(et){tt=et}a()}}catch(et){if(et&&tt&&typeof et.stack=="string"){for(var ct=et.stack.split(`
`),gt=tt.stack.split(`
`),rt=ct.length-1,it=gt.length-1;1<=rt&&0<=it&&ct[rt]!==gt[it];)it--;for(;1<=rt&&0<=it;rt--,it--)if(ct[rt]!==gt[it]){if(rt!==1||it!==1)do if(rt--,it--,0>it||ct[rt]!==gt[it]){var s=`
`+ct[rt].replace(" at new "," at ");return a.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",a.displayName)),s}while(1<=rt&&0<=it);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return o=a.displayName||null,o!==null?o:Qa(a.type)||"Memo";case Ha:o=a._payload,a=a._init;try{return Qa(a(o))}catch{}}return null}function Ra(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=o.render,a=a.displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(a){var o=Ta(a)?"checked":"value",_e=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),tt=""+a[o];if(!a.hasOwnProperty(o)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var ct=_e.get,gt=_e.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return ct.call(this)},set:function(rt){tt=""+rt,gt.call(this,rt)}}),Object.defineProperty(a,o,{enumerable:_e.enumerable}),{getValue:function(){return tt},setValue:function(rt){tt=""+rt},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var _e=o.getValue(),tt="";return a&&(tt=Ta(a)?a.checked?"true":"false":a.value),a=tt,a!==_e?(o.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,o){var _e=o.checked;return A$3({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??a._wrapperState.initialChecked})}function Za(a,o){var _e=o.defaultValue==null?"":o.defaultValue,tt=o.checked!=null?o.checked:o.defaultChecked;_e=Sa(o.value!=null?o.value:_e),a._wrapperState={initialChecked:tt,initialValue:_e,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(a,o){o=o.checked,o!=null&&ta(a,"checked",o,!1)}function bb(a,o){ab(a,o);var _e=Sa(o.value),tt=o.type;if(_e!=null)tt==="number"?(_e===0&&a.value===""||a.value!=_e)&&(a.value=""+_e):a.value!==""+_e&&(a.value=""+_e);else if(tt==="submit"||tt==="reset"){a.removeAttribute("value");return}o.hasOwnProperty("value")?cb(a,o.type,_e):o.hasOwnProperty("defaultValue")&&cb(a,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(a.defaultChecked=!!o.defaultChecked)}function db(a,o,_e){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var tt=o.type;if(!(tt!=="submit"&&tt!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+a._wrapperState.initialValue,_e||o===a.value||(a.value=o),a.defaultValue=o}_e=a.name,_e!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,_e!==""&&(a.name=_e)}function cb(a,o,_e){(o!=="number"||Xa(a.ownerDocument)!==a)&&(_e==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+_e&&(a.defaultValue=""+_e))}var eb=Array.isArray;function fb(a,o,_e,tt){if(a=a.options,o){o={};for(var ct=0;ct<_e.length;ct++)o["$"+_e[ct]]=!0;for(_e=0;_e<a.length;_e++)ct=o.hasOwnProperty("$"+a[_e].value),a[_e].selected!==ct&&(a[_e].selected=ct),ct&&tt&&(a[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),o=null,ct=0;ct<a.length;ct++){if(a[ct].value===_e){a[ct].selected=!0,tt&&(a[ct].defaultSelected=!0);return}o!==null||a[ct].disabled||(o=a[ct])}o!==null&&(o.selected=!0)}}function gb(a,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$3({},o,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,o){var _e=o.value;if(_e==null){if(_e=o.children,o=o.defaultValue,_e!=null){if(o!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}o=_e}o==null&&(o=""),_e=o}a._wrapperState={initialValue:Sa(_e)}}function ib(a,o){var _e=Sa(o.value),tt=Sa(o.defaultValue);_e!=null&&(_e=""+_e,_e!==a.value&&(a.value=_e),o.defaultValue==null&&a.defaultValue!==_e&&(a.defaultValue=_e)),tt!=null&&(a.defaultValue=""+tt)}function jb(a){var o=a.textContent;o===a._wrapperState.initialValue&&o!==""&&o!==null&&(a.value=o)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,o){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(o):a==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,_e,tt,ct){MSApp.execUnsafeLocalFunction(function(){return a(o,_e,tt,ct)})}:a}(function(a,o){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;o.firstChild;)a.appendChild(o.firstChild)}});function ob(a,o){if(o){var _e=a.firstChild;if(_e&&_e===a.lastChild&&_e.nodeType===3){_e.nodeValue=o;return}}a.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(o){o=o+a.charAt(0).toUpperCase()+a.substring(1),pb[o]=pb[a]})});function rb(a,o,_e){return o==null||typeof o=="boolean"||o===""?"":_e||typeof o!="number"||o===0||pb.hasOwnProperty(a)&&pb[a]?(""+o).trim():o+"px"}function sb(a,o){a=a.style;for(var _e in o)if(o.hasOwnProperty(_e)){var tt=_e.indexOf("--")===0,ct=rb(_e,o[_e],tt);_e==="float"&&(_e="cssFloat"),tt?a.setProperty(_e,ct):a[_e]=ct}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,o){if(o){if(tb[a]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$2(137,a));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$2(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$2(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$2(62))}}function vb(a,o){if(a.indexOf("-")===-1)return typeof o.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p$2(280));var o=a.stateNode;o&&(o=Db(o),yb(a.stateNode,a.type,o))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,o=Ab;if(Ab=zb=null,Bb(a),o)for(a=0;a<o.length;a++)Bb(o[a])}}function Gb(a,o){return a(o)}function Hb(){}var Ib=!1;function Jb(a,o,_e){if(Ib)return a(o,_e);Ib=!0;try{return Gb(a,o,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,o){var _e=a.stateNode;if(_e===null)return null;var tt=Db(_e);if(tt===null)return null;_e=tt[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(a=a.type,tt=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!tt;break e;default:a=!1}if(a)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,o,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,o,_e,tt,ct,gt,rt,it,s){var et=Array.prototype.slice.call(arguments,3);try{o.apply(_e,et)}catch(nt){this.onError(nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,o,_e,tt,ct,gt,rt,it,s){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,o,_e,tt,ct,gt,rt,it,s){if(Tb.apply(this,arguments),Ob){if(Ob){var et=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=et)}}function Vb(a){var o=a,_e=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,o.flags&4098&&(_e=o.return),a=o.return;while(a)}return o.tag===3?_e:null}function Wb(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p$2(188))}function Yb(a){var o=a.alternate;if(!o){if(o=Vb(a),o===null)throw Error(p$2(188));return o!==a?null:a}for(var _e=a,tt=o;;){var ct=_e.return;if(ct===null)break;var gt=ct.alternate;if(gt===null){if(tt=ct.return,tt!==null){_e=tt;continue}break}if(ct.child===gt.child){for(gt=ct.child;gt;){if(gt===_e)return Xb(ct),a;if(gt===tt)return Xb(ct),o;gt=gt.sibling}throw Error(p$2(188))}if(_e.return!==tt.return)_e=ct,tt=gt;else{for(var rt=!1,it=ct.child;it;){if(it===_e){rt=!0,_e=ct,tt=gt;break}if(it===tt){rt=!0,tt=ct,_e=gt;break}it=it.sibling}if(!rt){for(it=gt.child;it;){if(it===_e){rt=!0,_e=gt,tt=ct;break}if(it===tt){rt=!0,tt=gt,_e=ct;break}it=it.sibling}if(!rt)throw Error(p$2(189))}}if(_e.alternate!==tt)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?a:o}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=$b(a);if(o!==null)return o;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,o){var _e=a.pendingLanes;if(_e===0)return 0;var tt=0,ct=a.suspendedLanes,gt=a.pingedLanes,rt=_e&268435455;if(rt!==0){var it=rt&~ct;it!==0?tt=tc(it):(gt&=rt,gt!==0&&(tt=tc(gt)))}else rt=_e&~ct,rt!==0?tt=tc(rt):gt!==0&&(tt=tc(gt));if(tt===0)return 0;if(o!==0&&o!==tt&&!(o&ct)&&(ct=tt&-tt,gt=o&-o,ct>=gt||ct===16&&(gt&4194240)!==0))return o;if(tt&4&&(tt|=_e&16),o=a.entangledLanes,o!==0)for(a=a.entanglements,o&=tt;0<o;)_e=31-oc(o),ct=1<<_e,tt|=a[_e],o&=~ct;return tt}function vc(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,o){for(var _e=a.suspendedLanes,tt=a.pingedLanes,ct=a.expirationTimes,gt=a.pendingLanes;0<gt;){var rt=31-oc(gt),it=1<<rt,s=ct[rt];s===-1?(!(it&_e)||it&tt)&&(ct[rt]=vc(it,o)):s<=o&&(a.expiredLanes|=it),gt&=~it}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var o=[],_e=0;31>_e;_e++)o.push(a);return o}function Ac(a,o,_e){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,o=31-oc(o),a[o]=_e}function Bc(a,o){var _e=a.pendingLanes&~o;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=o,a.mutableReadLanes&=o,a.entangledLanes&=o,o=a.entanglements;var tt=a.eventTimes;for(a=a.expirationTimes;0<_e;){var ct=31-oc(_e),gt=1<<ct;o[ct]=0,tt[ct]=-1,a[ct]=-1,_e&=~gt}}function Cc(a,o){var _e=a.entangledLanes|=o;for(a=a.entanglements;_e;){var tt=31-oc(_e),ct=1<<tt;ct&o|a[tt]&o&&(a[tt]|=o),_e&=~ct}}var C$1=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,o){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(a,o,_e,tt,ct,gt){return a===null||a.nativeEvent!==gt?(a={blockedOn:o,domEventName:_e,eventSystemFlags:tt,nativeEvent:gt,targetContainers:[ct]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),a):(a.eventSystemFlags|=tt,o=a.targetContainers,ct!==null&&o.indexOf(ct)===-1&&o.push(ct),a)}function Uc(a,o,_e,tt,ct){switch(o){case"focusin":return Lc=Tc(Lc,a,o,_e,tt,ct),!0;case"dragenter":return Mc=Tc(Mc,a,o,_e,tt,ct),!0;case"mouseover":return Nc=Tc(Nc,a,o,_e,tt,ct),!0;case"pointerover":var gt=ct.pointerId;return Oc.set(gt,Tc(Oc.get(gt)||null,a,o,_e,tt,ct)),!0;case"gotpointercapture":return gt=ct.pointerId,Pc.set(gt,Tc(Pc.get(gt)||null,a,o,_e,tt,ct)),!0}return!1}function Vc(a){var o=Wc(a.target);if(o!==null){var _e=Vb(o);if(_e!==null){if(o=_e.tag,o===13){if(o=Wb(_e),o!==null){a.blockedOn=o,Ic(a.priority,function(){Gc(_e)});return}}else if(o===3&&_e.stateNode.current.memoizedState.isDehydrated){a.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var _e=Yc(a.domEventName,a.eventSystemFlags,o[0],a.nativeEvent);if(_e===null){_e=a.nativeEvent;var tt=new _e.constructor(_e.type,_e);wb=tt,_e.target.dispatchEvent(tt),wb=null}else return o=Cb(_e),o!==null&&Fc(o),a.blockedOn=_e,!1;o.shift()}return!0}function Zc(a,o,_e){Xc(a)&&_e.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,o){a.blockedOn===o&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function o(ct){return ad(ct,a)}if(0<Kc.length){ad(Kc[0],a);for(var _e=1;_e<Kc.length;_e++){var tt=Kc[_e];tt.blockedOn===a&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(o),Pc.forEach(o),_e=0;_e<Qc.length;_e++)tt=Qc[_e],tt.blockedOn===a&&(tt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(a,o,_e,tt){var ct=C$1,gt=cd.transition;cd.transition=null;try{C$1=1,fd(a,o,_e,tt)}finally{C$1=ct,cd.transition=gt}}function gd(a,o,_e,tt){var ct=C$1,gt=cd.transition;cd.transition=null;try{C$1=4,fd(a,o,_e,tt)}finally{C$1=ct,cd.transition=gt}}function fd(a,o,_e,tt){if(dd){var ct=Yc(a,o,_e,tt);if(ct===null)hd(a,o,tt,id,_e),Sc(a,tt);else if(Uc(ct,a,o,_e,tt))tt.stopPropagation();else if(Sc(a,tt),o&4&&-1<Rc.indexOf(a)){for(;ct!==null;){var gt=Cb(ct);if(gt!==null&&Ec(gt),gt=Yc(a,o,_e,tt),gt===null&&hd(a,o,tt,id,_e),gt===ct)break;ct=gt}ct!==null&&tt.stopPropagation()}else hd(a,o,tt,null,_e)}}var id=null;function Yc(a,o,_e,tt){if(id=null,a=xb(tt),a=Wc(a),a!==null)if(o=Vb(a),o===null)a=null;else if(_e=o.tag,_e===13){if(a=Wb(o),a!==null)return a;a=null}else if(_e===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,o=ld,_e=o.length,tt,ct="value"in kd?kd.value:kd.textContent,gt=ct.length;for(a=0;a<_e&&o[a]===ct[a];a++);var rt=_e-a;for(tt=1;tt<=rt&&o[_e-tt]===ct[gt-tt];tt++);return md=ct.slice(a,1<tt?1-tt:void 0)}function od(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function o(_e,tt,ct,gt,rt){this._reactName=_e,this._targetInst=ct,this.type=tt,this.nativeEvent=gt,this.target=rt,this.currentTarget=null;for(var it in a)a.hasOwnProperty(it)&&(_e=a[it],this[it]=_e?_e(gt):gt[it]);return this.isDefaultPrevented=(gt.defaultPrevented!=null?gt.defaultPrevented:gt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Od[a])?!!o[a]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(a){if(a.key){var o=Md[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge(a,o){switch(a){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,o){switch(a){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee$1);case"textInput":return a=o.data,a===ee$1&&fe?null:a;default:return null}}function ke(a,o){if(ie)return a==="compositionend"||!ae&&ge(a,o)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!le[a.type]:o==="textarea"}function ne(a,o,_e,tt){Eb(tt),o=oe(o,"onChange"),0<o.length&&(_e=new td("onChange","change",null,_e,tt),a.push({event:_e,listeners:o}))}var pe=null,qe=null;function re(a){se(a,0)}function te$1(a){var o=ue(a);if(Wa(o))return a}function ve(a,o){if(a==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var o=[];ne(o,qe,a,xb(a)),Jb(re,o)}}function Ce(a,o,_e){a==="focusin"?(Ae(),pe=o,qe=_e,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee(a,o){if(a==="click")return te$1(o)}function Fe(a,o){if(a==="input"||a==="change")return te$1(o)}function Ge(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,o){if(He(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var _e=Object.keys(a),tt=Object.keys(o);if(_e.length!==tt.length)return!1;for(tt=0;tt<_e.length;tt++){var ct=_e[tt];if(!ja.call(o,ct)||!He(a[ct],o[ct]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,o){var _e=Je(a);a=0;for(var tt;_e;){if(_e.nodeType===3){if(tt=a+_e.textContent.length,a<=o&&tt>=o)return{node:_e,offset:o-a};a=tt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Le(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var a=window,o=Xa();o instanceof a.HTMLIFrameElement;){try{var _e=typeof o.contentWindow.location.href=="string"}catch{_e=!1}if(_e)a=o.contentWindow;else break;o=Xa(a.document)}return o}function Ne(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function Oe(a){var o=Me(),_e=a.focusedElem,tt=a.selectionRange;if(o!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(tt!==null&&Ne(_e)){if(o=tt.start,a=tt.end,a===void 0&&(a=o),"selectionStart"in _e)_e.selectionStart=o,_e.selectionEnd=Math.min(a,_e.value.length);else if(a=(o=_e.ownerDocument||document)&&o.defaultView||window,a.getSelection){a=a.getSelection();var ct=_e.textContent.length,gt=Math.min(tt.start,ct);tt=tt.end===void 0?gt:Math.min(tt.end,ct),!a.extend&&gt>tt&&(ct=tt,tt=gt,gt=ct),ct=Ke(_e,gt);var rt=Ke(_e,tt);ct&&rt&&(a.rangeCount!==1||a.anchorNode!==ct.node||a.anchorOffset!==ct.offset||a.focusNode!==rt.node||a.focusOffset!==rt.offset)&&(o=o.createRange(),o.setStart(ct.node,ct.offset),a.removeAllRanges(),gt>tt?(a.addRange(o),a.extend(rt.node,rt.offset)):(o.setEnd(rt.node,rt.offset),a.addRange(o)))}}for(o=[],a=_e;a=a.parentNode;)a.nodeType===1&&o.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<o.length;_e++)a=o[_e],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,o,_e){var tt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(o=new td("onSelect","select",null,o,_e),a.push({event:o,listeners:tt}),o.target=Qe)))}function Ve(a,o){var _e={};return _e[a.toLowerCase()]=o.toLowerCase(),_e["Webkit"+a]="webkit"+o,_e["Moz"+a]="moz"+o,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var o=We[a],_e;for(_e in o)if(o.hasOwnProperty(_e)&&_e in Ye)return Xe[a]=o[_e];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,o){df.set(a,o),fa(o,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,o,_e){var tt=a.type||"unknown-event";a.currentTarget=_e,Ub(tt,o,void 0,a),a.currentTarget=null}function se(a,o){o=(o&4)!==0;for(var _e=0;_e<a.length;_e++){var tt=a[_e],ct=tt.event;tt=tt.listeners;e:{var gt=void 0;if(o)for(var rt=tt.length-1;0<=rt;rt--){var it=tt[rt],s=it.instance,et=it.currentTarget;if(it=it.listener,s!==gt&&ct.isPropagationStopped())break e;nf(ct,it,et),gt=s}else for(rt=0;rt<tt.length;rt++){if(it=tt[rt],s=it.instance,et=it.currentTarget,it=it.listener,s!==gt&&ct.isPropagationStopped())break e;nf(ct,it,et),gt=s}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,o){var _e=o[of];_e===void 0&&(_e=o[of]=new Set);var tt=a+"__bubble";_e.has(tt)||(pf(o,a,2,!1),_e.add(tt))}function qf(a,o,_e){var tt=0;o&&(tt|=4),pf(_e,a,tt,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,a),qf(_e,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(a,o,_e,tt){switch(jd(o)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}_e=ct.bind(null,o,_e,a),ct=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(ct=!0),tt?ct!==void 0?a.addEventListener(o,_e,{capture:!0,passive:ct}):a.addEventListener(o,_e,!0):ct!==void 0?a.addEventListener(o,_e,{passive:ct}):a.addEventListener(o,_e,!1)}function hd(a,o,_e,tt,ct){var gt=tt;if(!(o&1)&&!(o&2)&&tt!==null)e:for(;;){if(tt===null)return;var rt=tt.tag;if(rt===3||rt===4){var it=tt.stateNode.containerInfo;if(it===ct||it.nodeType===8&&it.parentNode===ct)break;if(rt===4)for(rt=tt.return;rt!==null;){var s=rt.tag;if((s===3||s===4)&&(s=rt.stateNode.containerInfo,s===ct||s.nodeType===8&&s.parentNode===ct))return;rt=rt.return}for(;it!==null;){if(rt=Wc(it),rt===null)return;if(s=rt.tag,s===5||s===6){tt=gt=rt;continue e}it=it.parentNode}}tt=tt.return}Jb(function(){var et=gt,nt=xb(_e),at=[];e:{var ht=df.get(a);if(ht!==void 0){var dt=td,pt=a;switch(a){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":dt=Rd;break;case"focusin":pt="focus",dt=Fd;break;case"focusout":pt="blur",dt=Fd;break;case"beforeblur":case"afterblur":dt=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Vd;break;case $e:case af:case bf:dt=Hd;break;case cf:dt=Xd;break;case"scroll":dt=vd;break;case"wheel":dt=Zd;break;case"copy":case"cut":case"paste":dt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=Td}var lt=(o&4)!==0,mt=!lt&&a==="scroll",ot=lt?ht!==null?ht+"Capture":null:ht;lt=[];for(var ut=et,ft;ut!==null;){ft=ut;var bt=ft.stateNode;if(ft.tag===5&&bt!==null&&(ft=bt,ot!==null&&(bt=Kb(ut,ot),bt!=null&&lt.push(tf(ut,bt,ft)))),mt)break;ut=ut.return}0<lt.length&&(ht=new dt(ht,pt,null,_e,nt),at.push({event:ht,listeners:lt}))}}if(!(o&7)){e:{if(ht=a==="mouseover"||a==="pointerover",dt=a==="mouseout"||a==="pointerout",ht&&_e!==wb&&(pt=_e.relatedTarget||_e.fromElement)&&(Wc(pt)||pt[uf]))break e;if((dt||ht)&&(ht=nt.window===nt?nt:(ht=nt.ownerDocument)?ht.defaultView||ht.parentWindow:window,dt?(pt=_e.relatedTarget||_e.toElement,dt=et,pt=pt?Wc(pt):null,pt!==null&&(mt=Vb(pt),pt!==mt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(dt=null,pt=et),dt!==pt)){if(lt=Bd,bt="onMouseLeave",ot="onMouseEnter",ut="mouse",(a==="pointerout"||a==="pointerover")&&(lt=Td,bt="onPointerLeave",ot="onPointerEnter",ut="pointer"),mt=dt==null?ht:ue(dt),ft=pt==null?ht:ue(pt),ht=new lt(bt,ut+"leave",dt,_e,nt),ht.target=mt,ht.relatedTarget=ft,bt=null,Wc(nt)===et&&(lt=new lt(ot,ut+"enter",pt,_e,nt),lt.target=ft,lt.relatedTarget=mt,bt=lt),mt=bt,dt&&pt)t:{for(lt=dt,ot=pt,ut=0,ft=lt;ft;ft=vf(ft))ut++;for(ft=0,bt=ot;bt;bt=vf(bt))ft++;for(;0<ut-ft;)lt=vf(lt),ut--;for(;0<ft-ut;)ot=vf(ot),ft--;for(;ut--;){if(lt===ot||ot!==null&&lt===ot.alternate)break t;lt=vf(lt),ot=vf(ot)}lt=null}else lt=null;dt!==null&&wf(at,ht,dt,lt,!1),pt!==null&&mt!==null&&wf(at,mt,pt,lt,!0)}}e:{if(ht=et?ue(et):window,dt=ht.nodeName&&ht.nodeName.toLowerCase(),dt==="select"||dt==="input"&&ht.type==="file")var vt=ve;else if(me(ht))if(we)vt=Fe;else{vt=De;var yt=Ce}else(dt=ht.nodeName)&&dt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(vt=Ee);if(vt&&(vt=vt(a,et))){ne(at,vt,_e,nt);break e}yt&&yt(a,ht,et),a==="focusout"&&(yt=ht._wrapperState)&&yt.controlled&&ht.type==="number"&&cb(ht,"number",ht.value)}switch(yt=et?ue(et):window,a){case"focusin":(me(yt)||yt.contentEditable==="true")&&(Qe=yt,Re=et,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(at,_e,nt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(at,_e,nt)}var At;if(ae)e:{switch(a){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else ie?ge(a,_e)&&(Nt="onCompositionEnd"):a==="keydown"&&_e.keyCode===229&&(Nt="onCompositionStart");Nt&&(de&&_e.locale!=="ko"&&(ie||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&ie&&(At=nd()):(kd=nt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),yt=oe(et,Nt),0<yt.length&&(Nt=new Ld(Nt,a,null,_e,nt),at.push({event:Nt,listeners:yt}),At?Nt.data=At:(At=he(_e),At!==null&&(Nt.data=At)))),(At=ce?je(a,_e):ke(a,_e))&&(et=oe(et,"onBeforeInput"),0<et.length&&(nt=new Ld("onBeforeInput","beforeinput",null,_e,nt),at.push({event:nt,listeners:et}),nt.data=At))}se(at,o)})}function tf(a,o,_e){return{instance:a,listener:o,currentTarget:_e}}function oe(a,o){for(var _e=o+"Capture",tt=[];a!==null;){var ct=a,gt=ct.stateNode;ct.tag===5&&gt!==null&&(ct=gt,gt=Kb(a,_e),gt!=null&&tt.unshift(tf(a,gt,ct)),gt=Kb(a,o),gt!=null&&tt.push(tf(a,gt,ct))),a=a.return}return tt}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,o,_e,tt,ct){for(var gt=o._reactName,rt=[];_e!==null&&_e!==tt;){var it=_e,s=it.alternate,et=it.stateNode;if(s!==null&&s===tt)break;it.tag===5&&et!==null&&(it=et,ct?(s=Kb(_e,gt),s!=null&&rt.unshift(tf(_e,s,it))):ct||(s=Kb(_e,gt),s!=null&&rt.push(tf(_e,s,it)))),_e=_e.return}rt.length!==0&&a.push({event:o,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,o,_e){if(o=zf(o),zf(a)!==o&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,o){var _e=o,tt=0;do{var ct=_e.nextSibling;if(a.removeChild(_e),ct&&ct.nodeType===8)if(_e=ct.data,_e==="/$"){if(tt===0){a.removeChild(ct),bd(o);return}tt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tt++;_e=ct}while(_e);bd(o)}function Lf(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(o===0)return a;o--}else _e==="/$"&&o++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var o=a[Of];if(o)return o;for(var _e=a.parentNode;_e;){if(o=_e[uf]||_e[Of]){if(_e=o.alternate,o.child!==null||_e!==null&&_e.child!==null)for(a=Mf(a);a!==null;){if(_e=a[Of])return _e;a=Mf(a)}return o}a=_e,_e=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$2(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E$1(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(a,o){Tf++,Sf[Tf]=a.current,a.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,o){var _e=a.type.contextTypes;if(!_e)return Vf;var tt=a.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===o)return tt.__reactInternalMemoizedMaskedChildContext;var ct={},gt;for(gt in _e)ct[gt]=o[gt];return tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E$1(Wf),E$1(H)}function ag(a,o,_e){if(H.current!==Vf)throw Error(p$2(168));G$1(H,o),G$1(Wf,_e)}function bg(a,o,_e){var tt=a.stateNode;if(o=o.childContextTypes,typeof tt.getChildContext!="function")return _e;tt=tt.getChildContext();for(var ct in tt)if(!(ct in o))throw Error(p$2(108,Ra(a)||"Unknown",ct));return A$3({},_e,tt)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G$1(H,a),G$1(Wf,Wf.current),!0}function dg(a,o,_e){var tt=a.stateNode;if(!tt)throw Error(p$2(169));_e?(a=bg(a,o,Xf),tt.__reactInternalMemoizedMergedChildContext=a,E$1(Wf),E$1(H),G$1(H,a)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,o=C$1;try{var _e=eg;for(C$1=1;a<_e.length;a++){var tt=_e[a];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),ct}finally{C$1=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,o){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=o}function ug(a,o,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var tt=rg;a=sg;var ct=32-oc(tt)-1;tt&=~(1<<ct),_e+=1;var gt=32-oc(o)+ct;if(30<gt){var rt=ct-ct%5;gt=(tt&(1<<rt)-1).toString(32),tt>>=rt,ct-=rt,rg=1<<32-oc(o)+ct|_e<<ct|tt,sg=gt+a}else rg=1<<gt|_e<<ct|tt,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,o){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=o,_e.return=a,o=a.deletions,o===null?(a.deletions=[_e],a.flags|=16):o.push(_e)}function Cg(a,o){switch(a.tag){case 5:var _e=a.type;return o=o.nodeType!==1||_e.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(a.stateNode=o,xg=a,yg=Lf(o.firstChild),!0):!1;case 6:return o=a.pendingProps===""||o.nodeType!==3?null:o,o!==null?(a.stateNode=o,xg=a,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:o,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=o,_e.return=a,a.child=_e,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var o=yg;if(o){var _e=o;if(!Cg(a,o)){if(Dg(a))throw Error(p$2(418));o=Lf(_e.nextSibling);var tt=xg;o&&Cg(a,o)?Ag(tt,_e):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p$2(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var o;if((o=a.tag!==3)&&!(o=a.tag!==5)&&(o=a.type,o=o!=="head"&&o!=="body"&&!Ef(a.type,a.memoizedProps)),o&&(o=yg)){if(Dg(a))throw Hg(),Error(p$2(418));for(;o;)Ag(a,o),o=Lf(o.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$2(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8){var _e=a.data;if(_e==="/$"){if(o===0){yg=Lf(a.nextSibling);break e}o--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||o++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(a,o){if(a&&a.defaultProps){o=A$3({},o),a=a.defaultProps;for(var _e in a)o[_e]===void 0&&(o[_e]=a[_e]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var o=Mg.current;E$1(Mg),a._currentValue=o}function Sg(a,o,_e){for(;a!==null;){var tt=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,tt!==null&&(tt.childLanes|=o)):tt!==null&&(tt.childLanes&o)!==o&&(tt.childLanes|=o),a===_e)break;a=a.return}}function Tg(a,o){Ng=a,Pg=Og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&o&&(Ug=!0),a.firstContext=null)}function Vg(a){var o=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=a,Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return o}var Wg=null;function Xg(a){Wg===null?Wg=[a]:Wg.push(a)}function Yg(a,o,_e,tt){var ct=o.interleaved;return ct===null?(_e.next=_e,Xg(o)):(_e.next=ct.next,ct.next=_e),o.interleaved=_e,Zg(a,tt)}function Zg(a,o){a.lanes|=o;var _e=a.alternate;for(_e!==null&&(_e.lanes|=o),_e=a,a=a.return;a!==null;)a.childLanes|=o,_e=a.alternate,_e!==null&&(_e.childLanes|=o),_e=a,a=a.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(a,o,_e){var tt=a.updateQueue;if(tt===null)return null;if(tt=tt.shared,K$1&2){var ct=tt.pending;return ct===null?o.next=o:(o.next=ct.next,ct.next=o),tt.pending=o,Zg(a,_e)}return ct=tt.interleaved,ct===null?(o.next=o,Xg(tt)):(o.next=ct.next,ct.next=o),tt.interleaved=o,Zg(a,_e)}function eh(a,o,_e){if(o=o.updateQueue,o!==null&&(o=o.shared,(_e&4194240)!==0)){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}function fh(a,o){var _e=a.updateQueue,tt=a.alternate;if(tt!==null&&(tt=tt.updateQueue,_e===tt)){var ct=null,gt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var rt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};gt===null?ct=gt=rt:gt=gt.next=rt,_e=_e.next}while(_e!==null);gt===null?ct=gt=o:gt=gt.next=o}else ct=gt=o;_e={baseState:tt.baseState,firstBaseUpdate:ct,lastBaseUpdate:gt,shared:tt.shared,effects:tt.effects},a.updateQueue=_e;return}a=_e.lastBaseUpdate,a===null?_e.firstBaseUpdate=o:a.next=o,_e.lastBaseUpdate=o}function gh(a,o,_e,tt){var ct=a.updateQueue;$g=!1;var gt=ct.firstBaseUpdate,rt=ct.lastBaseUpdate,it=ct.shared.pending;if(it!==null){ct.shared.pending=null;var s=it,et=s.next;s.next=null,rt===null?gt=et:rt.next=et,rt=s;var nt=a.alternate;nt!==null&&(nt=nt.updateQueue,it=nt.lastBaseUpdate,it!==rt&&(it===null?nt.firstBaseUpdate=et:it.next=et,nt.lastBaseUpdate=s))}if(gt!==null){var at=ct.baseState;rt=0,nt=et=s=null,it=gt;do{var ht=it.lane,dt=it.eventTime;if((tt&ht)===ht){nt!==null&&(nt=nt.next={eventTime:dt,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var pt=a,lt=it;switch(ht=o,dt=_e,lt.tag){case 1:if(pt=lt.payload,typeof pt=="function"){at=pt.call(dt,at,ht);break e}at=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=lt.payload,ht=typeof pt=="function"?pt.call(dt,at,ht):pt,ht==null)break e;at=A$3({},at,ht);break e;case 2:$g=!0}}it.callback!==null&&it.lane!==0&&(a.flags|=64,ht=ct.effects,ht===null?ct.effects=[it]:ht.push(it))}else dt={eventTime:dt,lane:ht,tag:it.tag,payload:it.payload,callback:it.callback,next:null},nt===null?(et=nt=dt,s=at):nt=nt.next=dt,rt|=ht;if(it=it.next,it===null){if(it=ct.shared.pending,it===null)break;ht=it,it=ht.next,ht.next=null,ct.lastBaseUpdate=ht,ct.shared.pending=null}}while(1);if(nt===null&&(s=at),ct.baseState=s,ct.firstBaseUpdate=et,ct.lastBaseUpdate=nt,o=ct.shared.interleaved,o!==null){ct=o;do rt|=ct.lane,ct=ct.next;while(ct!==o)}else gt===null&&(ct.shared.lanes=0);hh|=rt,a.lanes=rt,a.memoizedState=at}}function ih(a,o,_e){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var tt=a[o],ct=tt.callback;if(ct!==null){if(tt.callback=null,tt=_e,typeof ct!="function")throw Error(p$2(191,ct));ct.call(tt)}}}var jh=new aa.Component().refs;function kh(a,o,_e,tt){o=a.memoizedState,_e=_e(tt,o),_e=_e==null?o:A$3({},o,_e),a.memoizedState=_e,a.lanes===0&&(a.updateQueue.baseState=_e)}var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),gt=ch(tt,ct);gt.payload=o,_e!=null&&(gt.callback=_e),o=dh(a,gt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueReplaceState:function(a,o,_e){a=a._reactInternals;var tt=L(),ct=lh(a),gt=ch(tt,ct);gt.tag=1,gt.payload=o,_e!=null&&(gt.callback=_e),o=dh(a,gt,ct),o!==null&&(mh(o,a,ct,tt),eh(o,a,ct))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var _e=L(),tt=lh(a),ct=ch(_e,tt);ct.tag=2,o!=null&&(ct.callback=o),o=dh(a,ct,tt),o!==null&&(mh(o,a,tt,_e),eh(o,a,tt))}};function oh(a,o,_e,tt,ct,gt,rt){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(tt,gt,rt):o.prototype&&o.prototype.isPureReactComponent?!Ie(_e,tt)||!Ie(ct,gt):!0}function ph(a,o,_e){var tt=!1,ct=Vf,gt=o.contextType;return typeof gt=="object"&&gt!==null?gt=Vg(gt):(ct=Zf(o)?Xf:H.current,tt=o.contextTypes,gt=(tt=tt!=null)?Yf(a,ct):Vf),o=new o(_e,gt),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,a.stateNode=o,o._reactInternals=a,tt&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=ct,a.__reactInternalMemoizedMaskedChildContext=gt),o}function qh(a,o,_e,tt){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(_e,tt),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(_e,tt),o.state!==a&&nh.enqueueReplaceState(o,o.state,null)}function rh(a,o,_e,tt){var ct=a.stateNode;ct.props=_e,ct.state=a.memoizedState,ct.refs=jh,ah(a);var gt=o.contextType;typeof gt=="object"&&gt!==null?ct.context=Vg(gt):(gt=Zf(o)?Xf:H.current,ct.context=Yf(a,gt)),ct.state=a.memoizedState,gt=o.getDerivedStateFromProps,typeof gt=="function"&&(kh(a,o,gt,_e),ct.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(o=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),o!==ct.state&&nh.enqueueReplaceState(ct,ct.state,null),gh(a,_e,ct,tt),ct.state=a.memoizedState),typeof ct.componentDidMount=="function"&&(a.flags|=4194308)}function sh(a,o,_e){if(a=_e.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var tt=_e.stateNode}if(!tt)throw Error(p$2(147,a));var ct=tt,gt=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===gt?o.ref:(o=function(rt){var it=ct.refs;it===jh&&(it=ct.refs={}),rt===null?delete it[gt]:it[gt]=rt},o._stringRef=gt,o)}if(typeof a!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,a))}return a}function th(a,o){throw a=Object.prototype.toString.call(o),Error(p$2(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function uh(a){var o=a._init;return o(a._payload)}function vh(a){function o(ot,ut){if(a){var ft=ot.deletions;ft===null?(ot.deletions=[ut],ot.flags|=16):ft.push(ut)}}function _e(ot,ut){if(!a)return null;for(;ut!==null;)o(ot,ut),ut=ut.sibling;return null}function tt(ot,ut){for(ot=new Map;ut!==null;)ut.key!==null?ot.set(ut.key,ut):ot.set(ut.index,ut),ut=ut.sibling;return ot}function ct(ot,ut){return ot=wh(ot,ut),ot.index=0,ot.sibling=null,ot}function gt(ot,ut,ft){return ot.index=ft,a?(ft=ot.alternate,ft!==null?(ft=ft.index,ft<ut?(ot.flags|=2,ut):ft):(ot.flags|=2,ut)):(ot.flags|=1048576,ut)}function rt(ot){return a&&ot.alternate===null&&(ot.flags|=2),ot}function it(ot,ut,ft,bt){return ut===null||ut.tag!==6?(ut=xh(ft,ot.mode,bt),ut.return=ot,ut):(ut=ct(ut,ft),ut.return=ot,ut)}function s(ot,ut,ft,bt){var vt=ft.type;return vt===ya?nt(ot,ut,ft.props.children,bt,ft.key):ut!==null&&(ut.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===ut.type)?(bt=ct(ut,ft.props),bt.ref=sh(ot,ut,ft),bt.return=ot,bt):(bt=yh(ft.type,ft.key,ft.props,null,ot.mode,bt),bt.ref=sh(ot,ut,ft),bt.return=ot,bt)}function et(ot,ut,ft,bt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==ft.containerInfo||ut.stateNode.implementation!==ft.implementation?(ut=zh(ft,ot.mode,bt),ut.return=ot,ut):(ut=ct(ut,ft.children||[]),ut.return=ot,ut)}function nt(ot,ut,ft,bt,vt){return ut===null||ut.tag!==7?(ut=Ah(ft,ot.mode,bt,vt),ut.return=ot,ut):(ut=ct(ut,ft),ut.return=ot,ut)}function at(ot,ut,ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=xh(""+ut,ot.mode,ft),ut.return=ot,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case va:return ft=yh(ut.type,ut.key,ut.props,null,ot.mode,ft),ft.ref=sh(ot,null,ut),ft.return=ot,ft;case wa:return ut=zh(ut,ot.mode,ft),ut.return=ot,ut;case Ha:var bt=ut._init;return at(ot,bt(ut._payload),ft)}if(eb(ut)||Ka(ut))return ut=Ah(ut,ot.mode,ft,null),ut.return=ot,ut;th(ot,ut)}return null}function ht(ot,ut,ft,bt){var vt=ut!==null?ut.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return vt!==null?null:it(ot,ut,""+ft,bt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===vt?s(ot,ut,ft,bt):null;case wa:return ft.key===vt?et(ot,ut,ft,bt):null;case Ha:return vt=ft._init,ht(ot,ut,vt(ft._payload),bt)}if(eb(ft)||Ka(ft))return vt!==null?null:nt(ot,ut,ft,bt,null);th(ot,ft)}return null}function dt(ot,ut,ft,bt,vt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return ot=ot.get(ft)||null,it(ut,ot,""+bt,vt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return ot=ot.get(bt.key===null?ft:bt.key)||null,s(ut,ot,bt,vt);case wa:return ot=ot.get(bt.key===null?ft:bt.key)||null,et(ut,ot,bt,vt);case Ha:var yt=bt._init;return dt(ot,ut,ft,yt(bt._payload),vt)}if(eb(bt)||Ka(bt))return ot=ot.get(ft)||null,nt(ut,ot,bt,vt,null);th(ut,bt)}return null}function pt(ot,ut,ft,bt){for(var vt=null,yt=null,At=ut,Nt=ut=0,St=null;At!==null&&Nt<ft.length;Nt++){At.index>Nt?(St=At,At=null):St=At.sibling;var wt=ht(ot,At,ft[Nt],bt);if(wt===null){At===null&&(At=St);break}a&&At&&wt.alternate===null&&o(ot,At),ut=gt(wt,ut,Nt),yt===null?vt=wt:yt.sibling=wt,yt=wt,At=St}if(Nt===ft.length)return _e(ot,At),I&&tg(ot,Nt),vt;if(At===null){for(;Nt<ft.length;Nt++)At=at(ot,ft[Nt],bt),At!==null&&(ut=gt(At,ut,Nt),yt===null?vt=At:yt.sibling=At,yt=At);return I&&tg(ot,Nt),vt}for(At=tt(ot,At);Nt<ft.length;Nt++)St=dt(At,ot,Nt,ft[Nt],bt),St!==null&&(a&&St.alternate!==null&&At.delete(St.key===null?Nt:St.key),ut=gt(St,ut,Nt),yt===null?vt=St:yt.sibling=St,yt=St);return a&&At.forEach(function(Mt){return o(ot,Mt)}),I&&tg(ot,Nt),vt}function lt(ot,ut,ft,bt){var vt=Ka(ft);if(typeof vt!="function")throw Error(p$2(150));if(ft=vt.call(ft),ft==null)throw Error(p$2(151));for(var yt=vt=null,At=ut,Nt=ut=0,St=null,wt=ft.next();At!==null&&!wt.done;Nt++,wt=ft.next()){At.index>Nt?(St=At,At=null):St=At.sibling;var Mt=ht(ot,At,wt.value,bt);if(Mt===null){At===null&&(At=St);break}a&&At&&Mt.alternate===null&&o(ot,At),ut=gt(Mt,ut,Nt),yt===null?vt=Mt:yt.sibling=Mt,yt=Mt,At=St}if(wt.done)return _e(ot,At),I&&tg(ot,Nt),vt;if(At===null){for(;!wt.done;Nt++,wt=ft.next())wt=at(ot,wt.value,bt),wt!==null&&(ut=gt(wt,ut,Nt),yt===null?vt=wt:yt.sibling=wt,yt=wt);return I&&tg(ot,Nt),vt}for(At=tt(ot,At);!wt.done;Nt++,wt=ft.next())wt=dt(At,ot,Nt,wt.value,bt),wt!==null&&(a&&wt.alternate!==null&&At.delete(wt.key===null?Nt:wt.key),ut=gt(wt,ut,Nt),yt===null?vt=wt:yt.sibling=wt,yt=wt);return a&&At.forEach(function(Ht){return o(ot,Ht)}),I&&tg(ot,Nt),vt}function mt(ot,ut,ft,bt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var vt=ft.key,yt=ut;yt!==null;){if(yt.key===vt){if(vt=ft.type,vt===ya){if(yt.tag===7){_e(ot,yt.sibling),ut=ct(yt,ft.props.children),ut.return=ot,ot=ut;break e}}else if(yt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&uh(vt)===yt.type){_e(ot,yt.sibling),ut=ct(yt,ft.props),ut.ref=sh(ot,yt,ft),ut.return=ot,ot=ut;break e}_e(ot,yt);break}else o(ot,yt);yt=yt.sibling}ft.type===ya?(ut=Ah(ft.props.children,ot.mode,bt,ft.key),ut.return=ot,ot=ut):(bt=yh(ft.type,ft.key,ft.props,null,ot.mode,bt),bt.ref=sh(ot,ut,ft),bt.return=ot,ot=bt)}return rt(ot);case wa:e:{for(yt=ft.key;ut!==null;){if(ut.key===yt)if(ut.tag===4&&ut.stateNode.containerInfo===ft.containerInfo&&ut.stateNode.implementation===ft.implementation){_e(ot,ut.sibling),ut=ct(ut,ft.children||[]),ut.return=ot,ot=ut;break e}else{_e(ot,ut);break}else o(ot,ut);ut=ut.sibling}ut=zh(ft,ot.mode,bt),ut.return=ot,ot=ut}return rt(ot);case Ha:return yt=ft._init,mt(ot,ut,yt(ft._payload),bt)}if(eb(ft))return pt(ot,ut,ft,bt);if(Ka(ft))return lt(ot,ut,ft,bt);th(ot,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,ut!==null&&ut.tag===6?(_e(ot,ut.sibling),ut=ct(ut,ft),ut.return=ot,ot=ut):(_e(ot,ut),ut=xh(ft,ot.mode,bt),ut.return=ot,ot=ut),rt(ot)):_e(ot,ut)}return mt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p$2(174));return a}function Ih(a,o){switch(G$1(Gh,o),G$1(Fh,a),G$1(Eh,Dh),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:a=a===8?o.parentNode:o,o=a.namespaceURI||null,a=a.tagName,o=lb(o,a)}E$1(Eh),G$1(Eh,o)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(a){Hh(Gh.current);var o=Hh(Eh.current),_e=lb(o,a.type);o!==_e&&(G$1(Fh,a),G$1(Eh,_e))}function Lh(a){Fh.current===a&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(a){for(var o=a;o!==null;){if(o.tag===13){var _e=o.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(a,o){if(o===null)return!1;for(var _e=0;_e<o.length&&_e<a.length;_e++)if(!He(a[_e],o[_e]))return!1;return!0}function Xh(a,o,_e,tt,ct,gt){if(Rh=gt,N$1=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=a===null||a.memoizedState===null?Yh:Zh,a=_e(tt,ct),Th){gt=0;do{if(Th=!1,Uh=0,25<=gt)throw Error(p$2(301));gt+=1,P$1=O$1=null,o.updateQueue=null,Ph.current=$h,a=_e(tt,ct)}while(Th)}if(Ph.current=ai,o=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,o)throw Error(p$2(300));return a}function bi(){var a=Uh!==0;return Uh=0,a}function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=a:P$1=P$1.next=a,P$1}function di(){if(O$1===null){var a=N$1.alternate;a=a!==null?a.memoizedState:null}else a=O$1.next;var o=P$1===null?N$1.memoizedState:P$1.next;if(o!==null)P$1=o,O$1=a;else{if(a===null)throw Error(p$2(310));O$1=a,a={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=a:P$1=P$1.next=a}return P$1}function ei(a,o){return typeof o=="function"?o(a):o}function fi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=O$1,ct=tt.baseQueue,gt=_e.pending;if(gt!==null){if(ct!==null){var rt=ct.next;ct.next=gt.next,gt.next=rt}tt.baseQueue=ct=gt,_e.pending=null}if(ct!==null){gt=ct.next,tt=tt.baseState;var it=rt=null,s=null,et=gt;do{var nt=et.lane;if((Rh&nt)===nt)s!==null&&(s=s.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),tt=et.hasEagerState?et.eagerState:a(tt,et.action);else{var at={lane:nt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};s===null?(it=s=at,rt=tt):s=s.next=at,N$1.lanes|=nt,hh|=nt}et=et.next}while(et!==null&&et!==gt);s===null?rt=tt:s.next=it,He(tt,o.memoizedState)||(Ug=!0),o.memoizedState=tt,o.baseState=rt,o.baseQueue=s,_e.lastRenderedState=tt}if(a=_e.interleaved,a!==null){ct=a;do gt=ct.lane,N$1.lanes|=gt,hh|=gt,ct=ct.next;while(ct!==a)}else ct===null&&(_e.lanes=0);return[o.memoizedState,_e.dispatch]}function gi(a){var o=di(),_e=o.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=a;var tt=_e.dispatch,ct=_e.pending,gt=o.memoizedState;if(ct!==null){_e.pending=null;var rt=ct=ct.next;do gt=a(gt,rt.action),rt=rt.next;while(rt!==ct);He(gt,o.memoizedState)||(Ug=!0),o.memoizedState=gt,o.baseQueue===null&&(o.baseState=gt),_e.lastRenderedState=gt}return[gt,tt]}function hi(){}function ii(a,o){var _e=N$1,tt=di(),ct=o(),gt=!He(tt.memoizedState,ct);if(gt&&(tt.memoizedState=ct,Ug=!0),tt=tt.queue,ji(ki.bind(null,_e,tt,a),[a]),tt.getSnapshot!==o||gt||P$1!==null&&P$1.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tt,ct,o),void 0,null),R$1===null)throw Error(p$2(349));Rh&30||ni(_e,o,ct)}return ct}function ni(a,o,_e){a.flags|=16384,a={getSnapshot:o,value:_e},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.stores=[a]):(_e=o.stores,_e===null?o.stores=[a]:_e.push(a))}function mi(a,o,_e,tt){o.value=_e,o.getSnapshot=tt,oi(o)&&pi(a)}function ki(a,o,_e){return _e(function(){oi(o)&&pi(a)})}function oi(a){var o=a.getSnapshot;a=a.value;try{var _e=o();return!He(a,_e)}catch{return!0}}function pi(a){var o=Zg(a,1);o!==null&&mh(o,a,1,-1)}function qi(a){var o=ci();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},o.queue=a,a=a.dispatch=ri.bind(null,N$1,a),[o.memoizedState,a]}function li(a,o,_e,tt){return a={tag:a,create:o,destroy:_e,deps:tt,next:null},o=N$1.updateQueue,o===null?(o={lastEffect:null,stores:null},N$1.updateQueue=o,o.lastEffect=a.next=a):(_e=o.lastEffect,_e===null?o.lastEffect=a.next=a:(tt=_e.next,_e.next=a,a.next=tt,o.lastEffect=a)),a}function si(){return di().memoizedState}function ti(a,o,_e,tt){var ct=ci();N$1.flags|=a,ct.memoizedState=li(1|o,_e,void 0,tt===void 0?null:tt)}function ui(a,o,_e,tt){var ct=di();tt=tt===void 0?null:tt;var gt=void 0;if(O$1!==null){var rt=O$1.memoizedState;if(gt=rt.destroy,tt!==null&&Wh(tt,rt.deps)){ct.memoizedState=li(o,_e,gt,tt);return}}N$1.flags|=a,ct.memoizedState=li(1|o,_e,gt,tt)}function vi(a,o){return ti(8390656,8,a,o)}function ji(a,o){return ui(2048,8,a,o)}function wi(a,o){return ui(4,2,a,o)}function xi(a,o){return ui(4,4,a,o)}function yi(a,o){if(typeof o=="function")return a=a(),o(a),function(){o(null)};if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function zi(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ui(4,4,yi.bind(null,o,a),_e)}function Ai(){}function Bi(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(_e.memoizedState=[a,o],a)}function Ci(a,o){var _e=di();o=o===void 0?null:o;var tt=_e.memoizedState;return tt!==null&&o!==null&&Wh(o,tt[1])?tt[0]:(a=a(),_e.memoizedState=[a,o],a)}function Di(a,o,_e){return Rh&21?(He(_e,o)||(_e=yc(),N$1.lanes|=_e,hh|=_e,a.baseState=!0),o):(a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=_e)}function Ei(a,o){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,a(!0);var tt=Qh.transition;Qh.transition={};try{a(!1),o()}finally{C$1=_e,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(a,o,_e){var tt=lh(a);if(_e={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(a))Ii(o,_e);else if(_e=Yg(a,o,_e,tt),_e!==null){var ct=L();mh(_e,a,tt,ct),Ji(_e,o,tt)}}function ri(a,o,_e){var tt=lh(a),ct={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(o,ct);else{var gt=a.alternate;if(a.lanes===0&&(gt===null||gt.lanes===0)&&(gt=o.lastRenderedReducer,gt!==null))try{var rt=o.lastRenderedState,it=gt(rt,_e);if(ct.hasEagerState=!0,ct.eagerState=it,He(it,rt)){var s=o.interleaved;s===null?(ct.next=ct,Xg(o)):(ct.next=s.next,s.next=ct),o.interleaved=ct;return}}catch{}finally{}_e=Yg(a,o,ct,tt),_e!==null&&(ct=L(),mh(_e,a,tt,ct),Ji(_e,o,tt))}}function Hi(a){var o=a.alternate;return a===N$1||o!==null&&o===N$1}function Ii(a,o){Th=Sh=!0;var _e=a.pending;_e===null?o.next=o:(o.next=_e.next,_e.next=o),a.pending=o}function Ji(a,o,_e){if(_e&4194240){var tt=o.lanes;tt&=a.pendingLanes,_e|=tt,o.lanes=_e,Cc(a,_e)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,o){return ci().memoizedState=[a,o===void 0?null:o],a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,o,_e){return _e=_e!=null?_e.concat([a]):null,ti(4194308,4,yi.bind(null,o,a),_e)},useLayoutEffect:function(a,o){return ti(4194308,4,a,o)},useInsertionEffect:function(a,o){return ti(4,2,a,o)},useMemo:function(a,o){var _e=ci();return o=o===void 0?null:o,a=a(),_e.memoizedState=[a,o],a},useReducer:function(a,o,_e){var tt=ci();return o=_e!==void 0?_e(o):o,tt.memoizedState=tt.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},tt.queue=a,a=a.dispatch=Gi.bind(null,N$1,a),[tt.memoizedState,a]},useRef:function(a){var o=ci();return a={current:a},o.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),o=a[0];return a=Ei.bind(null,a[1]),ci().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,_e){var tt=N$1,ct=ci();if(I){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=o(),R$1===null)throw Error(p$2(349));Rh&30||ni(tt,o,_e)}ct.memoizedState=_e;var gt={value:_e,getSnapshot:o};return ct.queue=gt,vi(ki.bind(null,tt,gt,a),[a]),tt.flags|=2048,li(9,mi.bind(null,tt,gt,_e,o),void 0,null),_e},useId:function(){var a=ci(),o=R$1.identifierPrefix;if(I){var _e=sg,tt=rg;_e=(tt&~(1<<32-oc(tt)-1)).toString(32)+_e,o=":"+o+"R"+_e,_e=Uh++,0<_e&&(o+="H"+_e.toString(32)),o+=":"}else _e=Vh++,o=":"+o+"r"+_e.toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return Di(o,O$1.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var o=di();return O$1===null?o.memoizedState=a:Di(o,O$1.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],o=di().memoizedState;return[a,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,o){try{var _e="",tt=o;do _e+=Pa(tt),tt=tt.return;while(tt);var ct=_e}catch(gt){ct=`
Error generating stack: `+gt.message+`
`+gt.stack}return{value:a,source:o,stack:ct,digest:null}}function Li(a,o,_e){return{value:a,source:null,stack:_e??null,digest:o??null}}function Mi(a,o){try{console.error(o.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(a,o,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tt=o.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(a,o)},_e}function Ri(a,o,_e){_e=ch(-1,_e),_e.tag=3;var tt=a.type.getDerivedStateFromError;if(typeof tt=="function"){var ct=o.value;_e.payload=function(){return tt(ct)},_e.callback=function(){Mi(a,o)}}var gt=a.stateNode;return gt!==null&&typeof gt.componentDidCatch=="function"&&(_e.callback=function(){Mi(a,o),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rt=o.stack;this.componentDidCatch(o.value,{componentStack:rt!==null?rt:""})}),_e}function Ti(a,o,_e){var tt=a.pingCache;if(tt===null){tt=a.pingCache=new Ni;var ct=new Set;tt.set(o,ct)}else ct=tt.get(o),ct===void 0&&(ct=new Set,tt.set(o,ct));ct.has(_e)||(ct.add(_e),a=Ui.bind(null,a,o,_e),o.then(a,a))}function Vi(a){do{var o;if((o=a.tag===13)&&(o=a.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return a;a=a.return}while(a!==null);return null}function Wi(a,o,_e,tt,ct){return a.mode&1?(a.flags|=65536,a.lanes=ct,a):(a===o?a.flags|=65536:(a.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(o=ch(-1,1),o.tag=2,dh(_e,o,1))),_e.lanes|=1),a)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(a,o,_e,tt){o.child=a===null?Ch(o,null,_e,tt):Bh(o,a.child,_e,tt)}function Zi(a,o,_e,tt,ct){_e=_e.render;var gt=o.ref;return Tg(o,ct),tt=Xh(a,o,_e,tt,gt,ct),_e=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I&&_e&&vg(o),o.flags|=1,Yi(a,o,tt,ct),o.child)}function aj(a,o,_e,tt,ct){if(a===null){var gt=_e.type;return typeof gt=="function"&&!bj(gt)&&gt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(o.tag=15,o.type=gt,cj(a,o,gt,tt,ct)):(a=yh(_e.type,null,tt,o,o.mode,ct),a.ref=o.ref,a.return=o,o.child=a)}if(gt=a.child,!(a.lanes&ct)){var rt=gt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(rt,tt)&&a.ref===o.ref)return $i(a,o,ct)}return o.flags|=1,a=wh(gt,tt),a.ref=o.ref,a.return=o,o.child=a}function cj(a,o,_e,tt,ct){if(a!==null){var gt=a.memoizedProps;if(Ie(gt,tt)&&a.ref===o.ref)if(Ug=!1,o.pendingProps=tt=gt,(a.lanes&ct)!==0)a.flags&131072&&(Ug=!0);else return o.lanes=a.lanes,$i(a,o,ct)}return dj(a,o,_e,tt,ct)}function ej(a,o,_e){var tt=o.pendingProps,ct=tt.children,gt=a!==null?a.memoizedState:null;if(tt.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return a=gt!==null?gt.baseLanes|_e:_e,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,G$1(fj,gj),gj|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=gt!==null?gt.baseLanes:_e,G$1(fj,gj),gj|=tt}else gt!==null?(tt=gt.baseLanes|_e,o.memoizedState=null):tt=_e,G$1(fj,gj),gj|=tt;return Yi(a,o,ct,_e),o.child}function hj(a,o){var _e=o.ref;(a===null&&_e!==null||a!==null&&a.ref!==_e)&&(o.flags|=512,o.flags|=2097152)}function dj(a,o,_e,tt,ct){var gt=Zf(_e)?Xf:H.current;return gt=Yf(o,gt),Tg(o,ct),_e=Xh(a,o,_e,tt,gt,ct),tt=bi(),a!==null&&!Ug?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~ct,$i(a,o,ct)):(I&&tt&&vg(o),o.flags|=1,Yi(a,o,_e,ct),o.child)}function ij(a,o,_e,tt,ct){if(Zf(_e)){var gt=!0;cg(o)}else gt=!1;if(Tg(o,ct),o.stateNode===null)jj(a,o),ph(o,_e,tt),rh(o,_e,tt,ct),tt=!0;else if(a===null){var rt=o.stateNode,it=o.memoizedProps;rt.props=it;var s=rt.context,et=_e.contextType;typeof et=="object"&&et!==null?et=Vg(et):(et=Zf(_e)?Xf:H.current,et=Yf(o,et));var nt=_e.getDerivedStateFromProps,at=typeof nt=="function"||typeof rt.getSnapshotBeforeUpdate=="function";at||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==tt||s!==et)&&qh(o,rt,tt,et),$g=!1;var ht=o.memoizedState;rt.state=ht,gh(o,tt,rt,ct),s=o.memoizedState,it!==tt||ht!==s||Wf.current||$g?(typeof nt=="function"&&(kh(o,_e,nt,tt),s=o.memoizedState),(it=$g||oh(o,_e,it,tt,ht,s,et))?(at||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&(o.flags|=4194308)):(typeof rt.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=tt,o.memoizedState=s),rt.props=tt,rt.state=s,rt.context=et,tt=it):(typeof rt.componentDidMount=="function"&&(o.flags|=4194308),tt=!1)}else{rt=o.stateNode,bh(a,o),it=o.memoizedProps,et=o.type===o.elementType?it:Lg(o.type,it),rt.props=et,at=o.pendingProps,ht=rt.context,s=_e.contextType,typeof s=="object"&&s!==null?s=Vg(s):(s=Zf(_e)?Xf:H.current,s=Yf(o,s));var dt=_e.getDerivedStateFromProps;(nt=typeof dt=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(it!==at||ht!==s)&&qh(o,rt,tt,s),$g=!1,ht=o.memoizedState,rt.state=ht,gh(o,tt,rt,ct);var pt=o.memoizedState;it!==at||ht!==pt||Wf.current||$g?(typeof dt=="function"&&(kh(o,_e,dt,tt),pt=o.memoizedState),(et=$g||oh(o,_e,et,tt,ht,pt,s)||!1)?(nt||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(tt,pt,s),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(tt,pt,s)),typeof rt.componentDidUpdate=="function"&&(o.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof rt.componentDidUpdate!="function"||it===a.memoizedProps&&ht===a.memoizedState||(o.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===a.memoizedProps&&ht===a.memoizedState||(o.flags|=1024),o.memoizedProps=tt,o.memoizedState=pt),rt.props=tt,rt.state=pt,rt.context=s,tt=et):(typeof rt.componentDidUpdate!="function"||it===a.memoizedProps&&ht===a.memoizedState||(o.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||it===a.memoizedProps&&ht===a.memoizedState||(o.flags|=1024),tt=!1)}return kj(a,o,_e,tt,gt,ct)}function kj(a,o,_e,tt,ct,gt){hj(a,o);var rt=(o.flags&128)!==0;if(!tt&&!rt)return ct&&dg(o,_e,!1),$i(a,o,gt);tt=o.stateNode,Xi.current=o;var it=rt&&typeof _e.getDerivedStateFromError!="function"?null:tt.render();return o.flags|=1,a!==null&&rt?(o.child=Bh(o,a.child,null,gt),o.child=Bh(o,null,it,gt)):Yi(a,o,it,gt),o.memoizedState=tt.state,ct&&dg(o,_e,!0),o.child}function lj(a){var o=a.stateNode;o.pendingContext?ag(a,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(a,o.context,!1),Ih(a,o.containerInfo)}function mj(a,o,_e,tt,ct){return Ig(),Jg(ct),o.flags|=256,Yi(a,o,_e,tt),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}function pj(a,o,_e){var tt=o.pendingProps,ct=M$1.current,gt=!1,rt=(o.flags&128)!==0,it;if((it=rt)||(it=a!==null&&a.memoizedState===null?!1:(ct&2)!==0),it?(gt=!0,o.flags&=-129):(a===null||a.memoizedState!==null)&&(ct|=1),G$1(M$1,ct&1),a===null)return Eg(o),a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(o.mode&1?a.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(rt=tt.children,a=tt.fallback,gt?(tt=o.mode,gt=o.child,rt={mode:"hidden",children:rt},!(tt&1)&&gt!==null?(gt.childLanes=0,gt.pendingProps=rt):gt=qj(rt,tt,0,null),a=Ah(a,tt,_e,null),gt.return=o,a.return=o,gt.sibling=a,o.child=gt,o.child.memoizedState=oj(_e),o.memoizedState=nj,a):rj(o,rt));if(ct=a.memoizedState,ct!==null&&(it=ct.dehydrated,it!==null))return sj(a,o,rt,tt,it,ct,_e);if(gt){gt=tt.fallback,rt=o.mode,ct=a.child,it=ct.sibling;var s={mode:"hidden",children:tt.children};return!(rt&1)&&o.child!==ct?(tt=o.child,tt.childLanes=0,tt.pendingProps=s,o.deletions=null):(tt=wh(ct,s),tt.subtreeFlags=ct.subtreeFlags&14680064),it!==null?gt=wh(it,gt):(gt=Ah(gt,rt,_e,null),gt.flags|=2),gt.return=o,tt.return=o,tt.sibling=gt,o.child=tt,tt=gt,gt=o.child,rt=a.child.memoizedState,rt=rt===null?oj(_e):{baseLanes:rt.baseLanes|_e,cachePool:null,transitions:rt.transitions},gt.memoizedState=rt,gt.childLanes=a.childLanes&~_e,o.memoizedState=nj,tt}return gt=a.child,a=gt.sibling,tt=wh(gt,{mode:"visible",children:tt.children}),!(o.mode&1)&&(tt.lanes=_e),tt.return=o,tt.sibling=null,a!==null&&(_e=o.deletions,_e===null?(o.deletions=[a],o.flags|=16):_e.push(a)),o.child=tt,o.memoizedState=null,tt}function rj(a,o){return o=qj({mode:"visible",children:o},a.mode,0,null),o.return=a,a.child=o}function tj(a,o,_e,tt){return tt!==null&&Jg(tt),Bh(o,a.child,null,_e),a=rj(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function sj(a,o,_e,tt,ct,gt,rt){if(_e)return o.flags&256?(o.flags&=-257,tt=Li(Error(p$2(422))),tj(a,o,rt,tt)):o.memoizedState!==null?(o.child=a.child,o.flags|=128,null):(gt=tt.fallback,ct=o.mode,tt=qj({mode:"visible",children:tt.children},ct,0,null),gt=Ah(gt,ct,rt,null),gt.flags|=2,tt.return=o,gt.return=o,tt.sibling=gt,o.child=tt,o.mode&1&&Bh(o,a.child,null,rt),o.child.memoizedState=oj(rt),o.memoizedState=nj,gt);if(!(o.mode&1))return tj(a,o,rt,null);if(ct.data==="$!"){if(tt=ct.nextSibling&&ct.nextSibling.dataset,tt)var it=tt.dgst;return tt=it,gt=Error(p$2(419)),tt=Li(gt,tt,void 0),tj(a,o,rt,tt)}if(it=(rt&a.childLanes)!==0,Ug||it){if(tt=R$1,tt!==null){switch(rt&-rt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(tt.suspendedLanes|rt)?0:ct,ct!==0&&ct!==gt.retryLane&&(gt.retryLane=ct,Zg(a,ct),mh(tt,a,ct,-1))}return uj(),tt=Li(Error(p$2(421))),tj(a,o,rt,tt)}return ct.data==="$?"?(o.flags|=128,o.child=a.child,o=vj.bind(null,a),ct._reactRetry=o,null):(a=gt.treeContext,yg=Lf(ct.nextSibling),xg=o,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=o),o=rj(o,tt.children),o.flags|=4096,o)}function wj(a,o,_e){a.lanes|=o;var tt=a.alternate;tt!==null&&(tt.lanes|=o),Sg(a.return,o,_e)}function xj(a,o,_e,tt,ct){var gt=a.memoizedState;gt===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:tt,tail:_e,tailMode:ct}:(gt.isBackwards=o,gt.rendering=null,gt.renderingStartTime=0,gt.last=tt,gt.tail=_e,gt.tailMode=ct)}function yj(a,o,_e){var tt=o.pendingProps,ct=tt.revealOrder,gt=tt.tail;if(Yi(a,o,tt.children,_e),tt=M$1.current,tt&2)tt=tt&1|2,o.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wj(a,_e,o);else if(a.tag===19)wj(a,_e,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}tt&=1}if(G$1(M$1,tt),!(o.mode&1))o.memoizedState=null;else switch(ct){case"forwards":for(_e=o.child,ct=null;_e!==null;)a=_e.alternate,a!==null&&Mh(a)===null&&(ct=_e),_e=_e.sibling;_e=ct,_e===null?(ct=o.child,o.child=null):(ct=_e.sibling,_e.sibling=null),xj(o,!1,ct,_e,gt);break;case"backwards":for(_e=null,ct=o.child,o.child=null;ct!==null;){if(a=ct.alternate,a!==null&&Mh(a)===null){o.child=ct;break}a=ct.sibling,ct.sibling=_e,_e=ct,ct=a}xj(o,!0,_e,null,gt);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(a,o){!(o.mode&1)&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function $i(a,o,_e){if(a!==null&&(o.dependencies=a.dependencies),hh|=o.lanes,!(_e&o.childLanes))return null;if(a!==null&&o.child!==a.child)throw Error(p$2(153));if(o.child!==null){for(a=o.child,_e=wh(a,a.pendingProps),o.child=_e,_e.return=o;a.sibling!==null;)a=a.sibling,_e=_e.sibling=wh(a,a.pendingProps),_e.return=o;_e.sibling=null}return o.child}function zj(a,o,_e){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var tt=o.type._context,ct=o.memoizedProps.value;G$1(Mg,tt._currentValue),tt._currentValue=ct;break;case 13:if(tt=o.memoizedState,tt!==null)return tt.dehydrated!==null?(G$1(M$1,M$1.current&1),o.flags|=128,null):_e&o.child.childLanes?pj(a,o,_e):(G$1(M$1,M$1.current&1),a=$i(a,o,_e),a!==null?a.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(tt=(_e&o.childLanes)!==0,a.flags&128){if(tt)return yj(a,o,_e);o.flags|=128}if(ct=o.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(M$1,M$1.current),tt)break;return null;case 22:case 23:return o.lanes=0,ej(a,o,_e)}return $i(a,o,_e)}var Aj,Bj,Cj,Dj;Aj=function(a,o){for(var _e=o.child;_e!==null;){if(_e.tag===5||_e.tag===6)a.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===o)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===o)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(a,o,_e,tt){var ct=a.memoizedProps;if(ct!==tt){a=o.stateNode,Hh(Eh.current);var gt=null;switch(_e){case"input":ct=Ya(a,ct),tt=Ya(a,tt),gt=[];break;case"select":ct=A$3({},ct,{value:void 0}),tt=A$3({},tt,{value:void 0}),gt=[];break;case"textarea":ct=gb(a,ct),tt=gb(a,tt),gt=[];break;default:typeof ct.onClick!="function"&&typeof tt.onClick=="function"&&(a.onclick=Bf)}ub(_e,tt);var rt;_e=null;for(et in ct)if(!tt.hasOwnProperty(et)&&ct.hasOwnProperty(et)&&ct[et]!=null)if(et==="style"){var it=ct[et];for(rt in it)it.hasOwnProperty(rt)&&(_e||(_e={}),_e[rt]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(ea.hasOwnProperty(et)?gt||(gt=[]):(gt=gt||[]).push(et,null));for(et in tt){var s=tt[et];if(it=ct!=null?ct[et]:void 0,tt.hasOwnProperty(et)&&s!==it&&(s!=null||it!=null))if(et==="style")if(it){for(rt in it)!it.hasOwnProperty(rt)||s&&s.hasOwnProperty(rt)||(_e||(_e={}),_e[rt]="");for(rt in s)s.hasOwnProperty(rt)&&it[rt]!==s[rt]&&(_e||(_e={}),_e[rt]=s[rt])}else _e||(gt||(gt=[]),gt.push(et,_e)),_e=s;else et==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,it=it?it.__html:void 0,s!=null&&it!==s&&(gt=gt||[]).push(et,s)):et==="children"?typeof s!="string"&&typeof s!="number"||(gt=gt||[]).push(et,""+s):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(ea.hasOwnProperty(et)?(s!=null&&et==="onScroll"&&D$1("scroll",a),gt||it===s||(gt=[])):(gt=gt||[]).push(et,s))}_e&&(gt=gt||[]).push("style",_e);var et=gt;(o.updateQueue=et)&&(o.flags|=4)}};Dj=function(a,o,_e,tt){_e!==tt&&(o.flags|=4)};function Ej(a,o){if(!I)switch(a.tailMode){case"hidden":o=a.tail;for(var _e=null;o!==null;)o.alternate!==null&&(_e=o),o=o.sibling;_e===null?a.tail=null:_e.sibling=null;break;case"collapsed":_e=a.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:tt.sibling=null}}function S$2(a){var o=a.alternate!==null&&a.alternate.child===a.child,_e=0,tt=0;if(o)for(var ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags&14680064,tt|=ct.flags&14680064,ct.return=a,ct=ct.sibling;else for(ct=a.child;ct!==null;)_e|=ct.lanes|ct.childLanes,tt|=ct.subtreeFlags,tt|=ct.flags,ct.return=a,ct=ct.sibling;return a.subtreeFlags|=tt,a.childLanes=_e,o}function Fj(a,o,_e){var tt=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(o),null;case 1:return Zf(o.type)&&$f(),S$2(o),null;case 3:return tt=o.stateNode,Jh(),E$1(Wf),E$1(H),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(a===null||a.child===null)&&(Gg(o)?o.flags|=4:a===null||a.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(a,o),S$2(o),null;case 5:Lh(o);var ct=Hh(Gh.current);if(_e=o.type,a!==null&&o.stateNode!=null)Cj(a,o,_e,tt,ct),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!tt){if(o.stateNode===null)throw Error(p$2(166));return S$2(o),null}if(a=Hh(Eh.current),Gg(o)){tt=o.stateNode,_e=o.type;var gt=o.memoizedProps;switch(tt[Of]=o,tt[Pf]=gt,a=(o.mode&1)!==0,_e){case"dialog":D$1("cancel",tt),D$1("close",tt);break;case"iframe":case"object":case"embed":D$1("load",tt);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],tt);break;case"source":D$1("error",tt);break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt);break;case"details":D$1("toggle",tt);break;case"input":Za(tt,gt),D$1("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!gt.multiple},D$1("invalid",tt);break;case"textarea":hb(tt,gt),D$1("invalid",tt)}ub(_e,gt),ct=null;for(var rt in gt)if(gt.hasOwnProperty(rt)){var it=gt[rt];rt==="children"?typeof it=="string"?tt.textContent!==it&&(gt.suppressHydrationWarning!==!0&&Af(tt.textContent,it,a),ct=["children",it]):typeof it=="number"&&tt.textContent!==""+it&&(gt.suppressHydrationWarning!==!0&&Af(tt.textContent,it,a),ct=["children",""+it]):ea.hasOwnProperty(rt)&&it!=null&&rt==="onScroll"&&D$1("scroll",tt)}switch(_e){case"input":Va(tt),db(tt,gt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof gt.onClick=="function"&&(tt.onclick=Bf)}tt=ct,o.updateQueue=tt,tt!==null&&(o.flags|=4)}else{rt=ct.nodeType===9?ct:ct.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(_e)),a==="http://www.w3.org/1999/xhtml"?_e==="script"?(a=rt.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof tt.is=="string"?a=rt.createElement(_e,{is:tt.is}):(a=rt.createElement(_e),_e==="select"&&(rt=a,tt.multiple?rt.multiple=!0:tt.size&&(rt.size=tt.size))):a=rt.createElementNS(a,_e),a[Of]=o,a[Pf]=tt,Aj(a,o,!1,!1),o.stateNode=a;e:{switch(rt=vb(_e,tt),_e){case"dialog":D$1("cancel",a),D$1("close",a),ct=tt;break;case"iframe":case"object":case"embed":D$1("load",a),ct=tt;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],a);ct=tt;break;case"source":D$1("error",a),ct=tt;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),ct=tt;break;case"details":D$1("toggle",a),ct=tt;break;case"input":Za(a,tt),ct=Ya(a,tt),D$1("invalid",a);break;case"option":ct=tt;break;case"select":a._wrapperState={wasMultiple:!!tt.multiple},ct=A$3({},tt,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,tt),ct=gb(a,tt),D$1("invalid",a);break;default:ct=tt}ub(_e,ct),it=ct;for(gt in it)if(it.hasOwnProperty(gt)){var s=it[gt];gt==="style"?sb(a,s):gt==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&nb(a,s)):gt==="children"?typeof s=="string"?(_e!=="textarea"||s!=="")&&ob(a,s):typeof s=="number"&&ob(a,""+s):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(ea.hasOwnProperty(gt)?s!=null&&gt==="onScroll"&&D$1("scroll",a):s!=null&&ta(a,gt,s,rt))}switch(_e){case"input":Va(a),db(a,tt,!1);break;case"textarea":Va(a),jb(a);break;case"option":tt.value!=null&&a.setAttribute("value",""+Sa(tt.value));break;case"select":a.multiple=!!tt.multiple,gt=tt.value,gt!=null?fb(a,!!tt.multiple,gt,!1):tt.defaultValue!=null&&fb(a,!!tt.multiple,tt.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(a.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S$2(o),null;case 6:if(a&&o.stateNode!=null)Dj(a,o,a.memoizedProps,tt);else{if(typeof tt!="string"&&o.stateNode===null)throw Error(p$2(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(tt=o.stateNode,_e=o.memoizedProps,tt[Of]=o,(gt=tt.nodeValue!==_e)&&(a=xg,a!==null))switch(a.tag){case 3:Af(tt.nodeValue,_e,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,_e,(a.mode&1)!==0)}gt&&(o.flags|=4)}else tt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tt),tt[Of]=o,o.stateNode=tt}return S$2(o),null;case 13:if(E$1(M$1),tt=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,gt=!1;else if(gt=Gg(o),tt!==null&&tt.dehydrated!==null){if(a===null){if(!gt)throw Error(p$2(318));if(gt=o.memoizedState,gt=gt!==null?gt.dehydrated:null,!gt)throw Error(p$2(317));gt[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S$2(o),gt=!1}else zg!==null&&(Gj(zg),zg=null),gt=!0;if(!gt)return o.flags&65536?o:null}return o.flags&128?(o.lanes=_e,o):(tt=tt!==null,tt!==(a!==null&&a.memoizedState!==null)&&tt&&(o.child.flags|=8192,o.mode&1&&(a===null||M$1.current&1?T$1===0&&(T$1=3):uj())),o.updateQueue!==null&&(o.flags|=4),S$2(o),null);case 4:return Jh(),Bj(a,o),a===null&&sf(o.stateNode.containerInfo),S$2(o),null;case 10:return Rg(o.type._context),S$2(o),null;case 17:return Zf(o.type)&&$f(),S$2(o),null;case 19:if(E$1(M$1),gt=o.memoizedState,gt===null)return S$2(o),null;if(tt=(o.flags&128)!==0,rt=gt.rendering,rt===null)if(tt)Ej(gt,!1);else{if(T$1!==0||a!==null&&a.flags&128)for(a=o.child;a!==null;){if(rt=Mh(a),rt!==null){for(o.flags|=128,Ej(gt,!1),tt=rt.updateQueue,tt!==null&&(o.updateQueue=tt,o.flags|=4),o.subtreeFlags=0,tt=_e,_e=o.child;_e!==null;)gt=_e,a=tt,gt.flags&=14680066,rt=gt.alternate,rt===null?(gt.childLanes=0,gt.lanes=a,gt.child=null,gt.subtreeFlags=0,gt.memoizedProps=null,gt.memoizedState=null,gt.updateQueue=null,gt.dependencies=null,gt.stateNode=null):(gt.childLanes=rt.childLanes,gt.lanes=rt.lanes,gt.child=rt.child,gt.subtreeFlags=0,gt.deletions=null,gt.memoizedProps=rt.memoizedProps,gt.memoizedState=rt.memoizedState,gt.updateQueue=rt.updateQueue,gt.type=rt.type,a=rt.dependencies,gt.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),_e=_e.sibling;return G$1(M$1,M$1.current&1|2),o.child}a=a.sibling}gt.tail!==null&&B$1()>Hj&&(o.flags|=128,tt=!0,Ej(gt,!1),o.lanes=4194304)}else{if(!tt)if(a=Mh(rt),a!==null){if(o.flags|=128,tt=!0,_e=a.updateQueue,_e!==null&&(o.updateQueue=_e,o.flags|=4),Ej(gt,!0),gt.tail===null&&gt.tailMode==="hidden"&&!rt.alternate&&!I)return S$2(o),null}else 2*B$1()-gt.renderingStartTime>Hj&&_e!==1073741824&&(o.flags|=128,tt=!0,Ej(gt,!1),o.lanes=4194304);gt.isBackwards?(rt.sibling=o.child,o.child=rt):(_e=gt.last,_e!==null?_e.sibling=rt:o.child=rt,gt.last=rt)}return gt.tail!==null?(o=gt.tail,gt.rendering=o,gt.tail=o.sibling,gt.renderingStartTime=B$1(),o.sibling=null,_e=M$1.current,G$1(M$1,tt?_e&1|2:_e&1),o):(S$2(o),null);case 22:case 23:return Ij(),tt=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==tt&&(o.flags|=8192),tt&&o.mode&1?gj&1073741824&&(S$2(o),o.subtreeFlags&6&&(o.flags|=8192)):S$2(o),null;case 24:return null;case 25:return null}throw Error(p$2(156,o.tag))}function Jj(a,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Jh(),E$1(Wf),E$1(H),Oh(),a=o.flags,a&65536&&!(a&128)?(o.flags=a&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E$1(M$1),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(p$2(340));Ig()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(a,o){var _e=a.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tt){W$2(a,o,tt)}else _e.current=null}function Nj(a,o,_e){try{_e()}catch(tt){W$2(a,o,tt)}}var Oj=!1;function Pj(a,o){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var _e={start:a.selectionStart,end:a.selectionEnd};else e:{_e=(_e=a.ownerDocument)&&_e.defaultView||window;var tt=_e.getSelection&&_e.getSelection();if(tt&&tt.rangeCount!==0){_e=tt.anchorNode;var ct=tt.anchorOffset,gt=tt.focusNode;tt=tt.focusOffset;try{_e.nodeType,gt.nodeType}catch{_e=null;break e}var rt=0,it=-1,s=-1,et=0,nt=0,at=a,ht=null;t:for(;;){for(var dt;at!==_e||ct!==0&&at.nodeType!==3||(it=rt+ct),at!==gt||tt!==0&&at.nodeType!==3||(s=rt+tt),at.nodeType===3&&(rt+=at.nodeValue.length),(dt=at.firstChild)!==null;)ht=at,at=dt;for(;;){if(at===a)break t;if(ht===_e&&++et===ct&&(it=rt),ht===gt&&++nt===tt&&(s=rt),(dt=at.nextSibling)!==null)break;at=ht,ht=at.parentNode}at=dt}_e=it===-1||s===-1?null:{start:it,end:s}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:a,selectionRange:_e},dd=!1,V=o;V!==null;)if(o=V,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,V=a;else for(;V!==null;){o=V;try{var pt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var lt=pt.memoizedProps,mt=pt.memoizedState,ot=o.stateNode,ut=ot.getSnapshotBeforeUpdate(o.elementType===o.type?lt:Lg(o.type,lt),mt);ot.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var ft=o.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(bt){W$2(o,o.return,bt)}if(a=o.sibling,a!==null){a.return=o.return,V=a;break}V=o.return}return pt=Oj,Oj=!1,pt}function Qj(a,o,_e){var tt=o.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var ct=tt=tt.next;do{if((ct.tag&a)===a){var gt=ct.destroy;ct.destroy=void 0,gt!==void 0&&Nj(o,_e,gt)}ct=ct.next}while(ct!==tt)}}function Rj(a,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var _e=o=o.next;do{if((_e.tag&a)===a){var tt=_e.create;_e.destroy=tt()}_e=_e.next}while(_e!==o)}}function Sj(a){var o=a.ref;if(o!==null){var _e=a.stateNode;switch(a.tag){case 5:a=_e;break;default:a=_e}typeof o=="function"?o(a):o.current=a}}function Tj(a){var o=a.alternate;o!==null&&(a.alternate=null,Tj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Uj(a){return a.tag===5||a.tag===3||a.tag===4}function Vj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Uj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.nodeType===8?_e.parentNode.insertBefore(a,o):_e.insertBefore(a,o):(_e.nodeType===8?(o=_e.parentNode,o.insertBefore(a,_e)):(o=_e,o.appendChild(a)),_e=_e._reactRootContainer,_e!=null||o.onclick!==null||(o.onclick=Bf));else if(tt!==4&&(a=a.child,a!==null))for(Wj(a,o,_e),a=a.sibling;a!==null;)Wj(a,o,_e),a=a.sibling}function Xj(a,o,_e){var tt=a.tag;if(tt===5||tt===6)a=a.stateNode,o?_e.insertBefore(a,o):_e.appendChild(a);else if(tt!==4&&(a=a.child,a!==null))for(Xj(a,o,_e),a=a.sibling;a!==null;)Xj(a,o,_e),a=a.sibling}var X$1=null,Yj=!1;function Zj(a,o,_e){for(_e=_e.child;_e!==null;)ak(a,o,_e),_e=_e.sibling}function ak(a,o,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U||Mj(_e,o);case 6:var tt=X$1,ct=Yj;X$1=null,Zj(a,o,_e),X$1=tt,Yj=ct,X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?a.parentNode.removeChild(_e):a.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(a=X$1,_e=_e.stateNode,a.nodeType===8?Kf(a.parentNode,_e):a.nodeType===1&&Kf(a,_e),bd(a)):Kf(X$1,_e.stateNode));break;case 4:tt=X$1,ct=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(a,o,_e),X$1=tt,Yj=ct;break;case 0:case 11:case 14:case 15:if(!U&&(tt=_e.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){ct=tt=tt.next;do{var gt=ct,rt=gt.destroy;gt=gt.tag,rt!==void 0&&(gt&2||gt&4)&&Nj(_e,o,rt),ct=ct.next}while(ct!==tt)}Zj(a,o,_e);break;case 1:if(!U&&(Mj(_e,o),tt=_e.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=_e.memoizedProps,tt.state=_e.memoizedState,tt.componentWillUnmount()}catch(it){W$2(_e,o,it)}Zj(a,o,_e);break;case 21:Zj(a,o,_e);break;case 22:_e.mode&1?(U=(tt=U)||_e.memoizedState!==null,Zj(a,o,_e),U=tt):Zj(a,o,_e);break;default:Zj(a,o,_e)}}function bk(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var _e=a.stateNode;_e===null&&(_e=a.stateNode=new Lj),o.forEach(function(tt){var ct=ck.bind(null,a,tt);_e.has(tt)||(_e.add(tt),tt.then(ct,ct))})}}function dk(a,o){var _e=o.deletions;if(_e!==null)for(var tt=0;tt<_e.length;tt++){var ct=_e[tt];try{var gt=a,rt=o,it=rt;e:for(;it!==null;){switch(it.tag){case 5:X$1=it.stateNode,Yj=!1;break e;case 3:X$1=it.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=it.stateNode.containerInfo,Yj=!0;break e}it=it.return}if(X$1===null)throw Error(p$2(160));ak(gt,rt,ct),X$1=null,Yj=!1;var s=ct.alternate;s!==null&&(s.return=null),ct.return=null}catch(et){W$2(ct,o,et)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,a),o=o.sibling}function ek(a,o){var _e=a.alternate,tt=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(dk(o,a),fk(a),tt&4){try{Qj(3,a,a.return),Rj(3,a)}catch(lt){W$2(a,a.return,lt)}try{Qj(5,a,a.return)}catch(lt){W$2(a,a.return,lt)}}break;case 1:dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(o,a),fk(a),tt&512&&_e!==null&&Mj(_e,_e.return),a.flags&32){var ct=a.stateNode;try{ob(ct,"")}catch(lt){W$2(a,a.return,lt)}}if(tt&4&&(ct=a.stateNode,ct!=null)){var gt=a.memoizedProps,rt=_e!==null?_e.memoizedProps:gt,it=a.type,s=a.updateQueue;if(a.updateQueue=null,s!==null)try{it==="input"&&gt.type==="radio"&&gt.name!=null&&ab(ct,gt),vb(it,rt);var et=vb(it,gt);for(rt=0;rt<s.length;rt+=2){var nt=s[rt],at=s[rt+1];nt==="style"?sb(ct,at):nt==="dangerouslySetInnerHTML"?nb(ct,at):nt==="children"?ob(ct,at):ta(ct,nt,at,et)}switch(it){case"input":bb(ct,gt);break;case"textarea":ib(ct,gt);break;case"select":var ht=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!gt.multiple;var dt=gt.value;dt!=null?fb(ct,!!gt.multiple,dt,!1):ht!==!!gt.multiple&&(gt.defaultValue!=null?fb(ct,!!gt.multiple,gt.defaultValue,!0):fb(ct,!!gt.multiple,gt.multiple?[]:"",!1))}ct[Pf]=gt}catch(lt){W$2(a,a.return,lt)}}break;case 6:if(dk(o,a),fk(a),tt&4){if(a.stateNode===null)throw Error(p$2(162));ct=a.stateNode,gt=a.memoizedProps;try{ct.nodeValue=gt}catch(lt){W$2(a,a.return,lt)}}break;case 3:if(dk(o,a),fk(a),tt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(lt){W$2(a,a.return,lt)}break;case 4:dk(o,a),fk(a);break;case 13:dk(o,a),fk(a),ct=a.child,ct.flags&8192&&(gt=ct.memoizedState!==null,ct.stateNode.isHidden=gt,!gt||ct.alternate!==null&&ct.alternate.memoizedState!==null||(gk=B$1())),tt&4&&bk(a);break;case 22:if(nt=_e!==null&&_e.memoizedState!==null,a.mode&1?(U=(et=U)||nt,dk(o,a),U=et):dk(o,a),fk(a),tt&8192){if(et=a.memoizedState!==null,(a.stateNode.isHidden=et)&&!nt&&a.mode&1)for(V=a,nt=a.child;nt!==null;){for(at=V=nt;V!==null;){switch(ht=V,dt=ht.child,ht.tag){case 0:case 11:case 14:case 15:Qj(4,ht,ht.return);break;case 1:Mj(ht,ht.return);var pt=ht.stateNode;if(typeof pt.componentWillUnmount=="function"){tt=ht,_e=ht.return;try{o=tt,pt.props=o.memoizedProps,pt.state=o.memoizedState,pt.componentWillUnmount()}catch(lt){W$2(tt,_e,lt)}}break;case 5:Mj(ht,ht.return);break;case 22:if(ht.memoizedState!==null){hk(at);continue}}dt!==null?(dt.return=ht,V=dt):hk(at)}nt=nt.sibling}e:for(nt=null,at=a;;){if(at.tag===5){if(nt===null){nt=at;try{ct=at.stateNode,et?(gt=ct.style,typeof gt.setProperty=="function"?gt.setProperty("display","none","important"):gt.display="none"):(it=at.stateNode,s=at.memoizedProps.style,rt=s!=null&&s.hasOwnProperty("display")?s.display:null,it.style.display=rb("display",rt))}catch(lt){W$2(a,a.return,lt)}}}else if(at.tag===6){if(nt===null)try{at.stateNode.nodeValue=et?"":at.memoizedProps}catch(lt){W$2(a,a.return,lt)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===a)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===a)break e;for(;at.sibling===null;){if(at.return===null||at.return===a)break e;nt===at&&(nt=null),at=at.return}nt===at&&(nt=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:dk(o,a),fk(a),tt&4&&bk(a);break;case 21:break;default:dk(o,a),fk(a)}}function fk(a){var o=a.flags;if(o&2){try{e:{for(var _e=a.return;_e!==null;){if(Uj(_e)){var tt=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(tt.tag){case 5:var ct=tt.stateNode;tt.flags&32&&(ob(ct,""),tt.flags&=-33);var gt=Vj(a);Xj(a,gt,ct);break;case 3:case 4:var rt=tt.stateNode.containerInfo,it=Vj(a);Wj(a,it,rt);break;default:throw Error(p$2(161))}}catch(s){W$2(a,a.return,s)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function ik(a,o,_e){V=a,jk(a)}function jk(a,o,_e){for(var tt=(a.mode&1)!==0;V!==null;){var ct=V,gt=ct.child;if(ct.tag===22&&tt){var rt=ct.memoizedState!==null||Kj;if(!rt){var it=ct.alternate,s=it!==null&&it.memoizedState!==null||U;it=Kj;var et=U;if(Kj=rt,(U=s)&&!et)for(V=ct;V!==null;)rt=V,s=rt.child,rt.tag===22&&rt.memoizedState!==null?kk(ct):s!==null?(s.return=rt,V=s):kk(ct);for(;gt!==null;)V=gt,jk(gt),gt=gt.sibling;V=ct,Kj=it,U=et}lk(a)}else ct.subtreeFlags&8772&&gt!==null?(gt.return=ct,V=gt):lk(a)}}function lk(a){for(;V!==null;){var o=V;if(o.flags&8772){var _e=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var tt=o.stateNode;if(o.flags&4&&!U)if(_e===null)tt.componentDidMount();else{var ct=o.elementType===o.type?_e.memoizedProps:Lg(o.type,_e.memoizedProps);tt.componentDidUpdate(ct,_e.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var gt=o.updateQueue;gt!==null&&ih(o,gt,tt);break;case 3:var rt=o.updateQueue;if(rt!==null){if(_e=null,o.child!==null)switch(o.child.tag){case 5:_e=o.child.stateNode;break;case 1:_e=o.child.stateNode}ih(o,rt,_e)}break;case 5:var it=o.stateNode;if(_e===null&&o.flags&4){_e=it;var s=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&_e.focus();break;case"img":s.src&&(_e.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var et=o.alternate;if(et!==null){var nt=et.memoizedState;if(nt!==null){var at=nt.dehydrated;at!==null&&bd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||o.flags&512&&Sj(o)}catch(ht){W$2(o,o.return,ht)}}if(o===a){V=null;break}if(_e=o.sibling,_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function hk(a){for(;V!==null;){var o=V;if(o===a){V=null;break}var _e=o.sibling;if(_e!==null){_e.return=o.return,V=_e;break}V=o.return}}function kk(a){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var _e=o.return;try{Rj(4,o)}catch(s){W$2(o,_e,s)}break;case 1:var tt=o.stateNode;if(typeof tt.componentDidMount=="function"){var ct=o.return;try{tt.componentDidMount()}catch(s){W$2(o,ct,s)}}var gt=o.return;try{Sj(o)}catch(s){W$2(o,gt,s)}break;case 5:var rt=o.return;try{Sj(o)}catch(s){W$2(o,rt,s)}}}catch(s){W$2(o,o.return,s)}if(o===a){V=null;break}var it=o.sibling;if(it!==null){it.return=o.return,V=it;break}V=o.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(a){return a.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(a=C$1,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function mh(a,o,_e,tt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(a,_e,tt),(!(K$1&2)||a!==R$1)&&(a===R$1&&(!(K$1&2)&&(rk|=_e),T$1===4&&Dk(a,Z$1)),Ek(a,tt),_e===1&&K$1===0&&!(o.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(a,o){var _e=a.callbackNode;wc(a,o);var tt=uc(a,a===R$1?Z$1:0);if(tt===0)_e!==null&&bc(_e),a.callbackNode=null,a.callbackPriority=0;else if(o=tt&-tt,a.callbackPriority!==o){if(_e!=null&&bc(_e),o===1)a.tag===0?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(tt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,a))}a.callbackPriority=o,a.callbackNode=_e}}function Hk(a,o){if(Bk=-1,Ck=0,K$1&6)throw Error(p$2(327));var _e=a.callbackNode;if(Ik()&&a.callbackNode!==_e)return null;var tt=uc(a,a===R$1?Z$1:0);if(tt===0)return null;if(tt&30||tt&a.expiredLanes||o)o=Jk(a,tt);else{o=tt;var ct=K$1;K$1|=2;var gt=Kk();(R$1!==a||Z$1!==o)&&(vk=null,Hj=B$1()+500,Lk(a,o));do try{Mk();break}catch(it){Nk(a,it)}while(1);Qg(),nk.current=gt,K$1=ct,Y$1!==null?o=0:(R$1=null,Z$1=0,o=T$1)}if(o!==0){if(o===2&&(ct=xc(a),ct!==0&&(tt=ct,o=Ok(a,ct))),o===1)throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;if(o===6)Dk(a,tt);else{if(ct=a.current.alternate,!(tt&30)&&!Pk(ct)&&(o=Jk(a,tt),o===2&&(gt=xc(a),gt!==0&&(tt=gt,o=Ok(a,gt))),o===1))throw _e=qk,Lk(a,0),Dk(a,tt),Ek(a,B$1()),_e;switch(a.finishedWork=ct,a.finishedLanes=tt,o){case 0:case 1:throw Error(p$2(345));case 2:Qk(a,uk,vk);break;case 3:if(Dk(a,tt),(tt&130023424)===tt&&(o=gk+500-B$1(),10<o)){if(uc(a,0)!==0)break;if(ct=a.suspendedLanes,(ct&tt)!==tt){L(),a.pingedLanes|=a.suspendedLanes&ct;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),o);break}Qk(a,uk,vk);break;case 4:if(Dk(a,tt),(tt&4194240)===tt)break;for(o=a.eventTimes,ct=-1;0<tt;){var rt=31-oc(tt);gt=1<<rt,rt=o[rt],rt>ct&&(ct=rt),tt&=~gt}if(tt=ct,tt=B$1()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),tt);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(a,B$1()),a.callbackNode===_e?Hk.bind(null,a):null}function Ok(a,o){var _e=tk;return a.current.memoizedState.isDehydrated&&(Lk(a,o).flags|=256),a=Jk(a,o),a!==2&&(o=uk,uk=_e,o!==null&&Gj(o)),a}function Gj(a){uk===null?uk=a:uk.push.apply(uk,a)}function Pk(a){for(var o=a;;){if(o.flags&16384){var _e=o.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tt=0;tt<_e.length;tt++){var ct=_e[tt],gt=ct.getSnapshot;ct=ct.value;try{if(!He(gt(),ct))return!1}catch{return!1}}}if(_e=o.child,o.subtreeFlags&16384&&_e!==null)_e.return=o,o=_e;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(a,o){for(o&=~sk,o&=~rk,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var _e=31-oc(o),tt=1<<_e;a[_e]=-1,o&=~tt}}function Fk(a){if(K$1&6)throw Error(p$2(327));Ik();var o=uc(a,0);if(!(o&1))return Ek(a,B$1()),null;var _e=Jk(a,o);if(a.tag!==0&&_e===2){var tt=xc(a);tt!==0&&(o=tt,_e=Ok(a,tt))}if(_e===1)throw _e=qk,Lk(a,0),Dk(a,o),Ek(a,B$1()),_e;if(_e===6)throw Error(p$2(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,Qk(a,uk,vk),Ek(a,B$1()),null}function Rk(a,o){var _e=K$1;K$1|=1;try{return a(o)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(a){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var o=K$1;K$1|=1;var _e=pk.transition,tt=C$1;try{if(pk.transition=null,C$1=1,a)return a()}finally{C$1=tt,pk.transition=_e,K$1=o,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(a,o){a.finishedWork=null,a.finishedLanes=0;var _e=a.timeoutHandle;if(_e!==-1&&(a.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tt=_e;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$1=a,Y$1=a=wh(a.current,null),Z$1=gj=o,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(_e=Wg[o],tt=_e.interleaved,tt!==null){_e.interleaved=null;var ct=tt.next,gt=_e.pending;if(gt!==null){var rt=gt.next;gt.next=ct,tt.next=rt}_e.pending=tt}Wg=null}return a}function Nk(a,o){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var ct=tt.queue;ct!==null&&(ct.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$1=1,qk=o,Y$1=null;break}e:{var gt=a,rt=_e.return,it=_e,s=o;if(o=Z$1,it.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var et=s,nt=it,at=nt.tag;if(!(nt.mode&1)&&(at===0||at===11||at===15)){var ht=nt.alternate;ht?(nt.updateQueue=ht.updateQueue,nt.memoizedState=ht.memoizedState,nt.lanes=ht.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var dt=Vi(rt);if(dt!==null){dt.flags&=-257,Wi(dt,rt,it,gt,o),dt.mode&1&&Ti(gt,et,o),o=dt,s=et;var pt=o.updateQueue;if(pt===null){var lt=new Set;lt.add(s),o.updateQueue=lt}else pt.add(s);break e}else{if(!(o&1)){Ti(gt,et,o),uj();break e}s=Error(p$2(426))}}else if(I&&it.mode&1){var mt=Vi(rt);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),Wi(mt,rt,it,gt,o),Jg(Ki(s,it));break e}}gt=s=Ki(s,it),T$1!==4&&(T$1=2),tk===null?tk=[gt]:tk.push(gt),gt=rt;do{switch(gt.tag){case 3:gt.flags|=65536,o&=-o,gt.lanes|=o;var ot=Oi(gt,s,o);fh(gt,ot);break e;case 1:it=s;var ut=gt.type,ft=gt.stateNode;if(!(gt.flags&128)&&(typeof ut.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Si===null||!Si.has(ft)))){gt.flags|=65536,o&=-o,gt.lanes|=o;var bt=Ri(gt,it,o);fh(gt,bt);break e}}gt=gt.return}while(gt!==null)}Tk(_e)}catch(vt){o=vt,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(1)}function Kk(){var a=nk.current;return nk.current=ai,a===null?ai:a}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk(a,o){var _e=K$1;K$1|=2;var tt=Kk();(R$1!==a||Z$1!==o)&&(vk=null,Lk(a,o));do try{Uk();break}catch(ct){Nk(a,ct)}while(1);if(Qg(),K$1=_e,nk.current=tt,Y$1!==null)throw Error(p$2(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(a){var o=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps,o===null?Tk(a):Y$1=o,ok.current=null}function Tk(a){var o=a;do{var _e=o.alternate;if(a=o.return,o.flags&32768){if(_e=Jj(_e,o),_e!==null){_e.flags&=32767,Y$1=_e;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T$1=6,Y$1=null;return}}else if(_e=Fj(_e,o,gj),_e!==null){Y$1=_e;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=a}while(o!==null);T$1===0&&(T$1=5)}function Qk(a,o,_e){var tt=C$1,ct=pk.transition;try{pk.transition=null,C$1=1,Xk(a,o,_e,tt)}finally{pk.transition=ct,C$1=tt}return null}function Xk(a,o,_e,tt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$2(327));_e=a.finishedWork;var ct=a.finishedLanes;if(_e===null)return null;if(a.finishedWork=null,a.finishedLanes=0,_e===a.current)throw Error(p$2(177));a.callbackNode=null,a.callbackPriority=0;var gt=_e.lanes|_e.childLanes;if(Bc(a,gt),a===R$1&&(Y$1=R$1=null,Z$1=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),gt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||gt){gt=pk.transition,pk.transition=null;var rt=C$1;C$1=1;var it=K$1;K$1|=4,ok.current=null,Pj(a,_e),ek(_e,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=_e,ik(_e),dc(),K$1=it,C$1=rt,pk.transition=gt}else a.current=_e;if(wk&&(wk=!1,xk=a,yk=ct),gt=a.pendingLanes,gt===0&&(Si=null),mc(_e.stateNode),Ek(a,B$1()),o!==null)for(tt=a.onRecoverableError,_e=0;_e<o.length;_e++)ct=o[_e],tt(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;return yk&1&&a.tag!==0&&Ik(),gt=a.pendingLanes,gt&1?a===Ak?zk++:(zk=0,Ak=a):zk=0,jg(),null}function Ik(){if(xk!==null){var a=Dc(yk),o=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>a?16:a,xk===null)var tt=!1;else{if(a=xk,xk=null,yk=0,K$1&6)throw Error(p$2(331));var ct=K$1;for(K$1|=4,V=a.current;V!==null;){var gt=V,rt=gt.child;if(V.flags&16){var it=gt.deletions;if(it!==null){for(var s=0;s<it.length;s++){var et=it[s];for(V=et;V!==null;){var nt=V;switch(nt.tag){case 0:case 11:case 15:Qj(8,nt,gt)}var at=nt.child;if(at!==null)at.return=nt,V=at;else for(;V!==null;){nt=V;var ht=nt.sibling,dt=nt.return;if(Tj(nt),nt===et){V=null;break}if(ht!==null){ht.return=dt,V=ht;break}V=dt}}}var pt=gt.alternate;if(pt!==null){var lt=pt.child;if(lt!==null){pt.child=null;do{var mt=lt.sibling;lt.sibling=null,lt=mt}while(lt!==null)}}V=gt}}if(gt.subtreeFlags&2064&&rt!==null)rt.return=gt,V=rt;else e:for(;V!==null;){if(gt=V,gt.flags&2048)switch(gt.tag){case 0:case 11:case 15:Qj(9,gt,gt.return)}var ot=gt.sibling;if(ot!==null){ot.return=gt.return,V=ot;break e}V=gt.return}}var ut=a.current;for(V=ut;V!==null;){rt=V;var ft=rt.child;if(rt.subtreeFlags&2064&&ft!==null)ft.return=rt,V=ft;else e:for(rt=ut;V!==null;){if(it=V,it.flags&2048)try{switch(it.tag){case 0:case 11:case 15:Rj(9,it)}}catch(vt){W$2(it,it.return,vt)}if(it===rt){V=null;break e}var bt=it.sibling;if(bt!==null){bt.return=it.return,V=bt;break e}V=it.return}}if(K$1=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}tt=!0}return tt}finally{C$1=_e,pk.transition=o}}return!1}function Yk(a,o,_e){o=Ki(_e,o),o=Oi(a,o,1),a=dh(a,o,1),o=L(),a!==null&&(Ac(a,1,o),Ek(a,o))}function W$2(a,o,_e){if(a.tag===3)Yk(a,a,_e);else for(;o!==null;){if(o.tag===3){Yk(o,a,_e);break}else if(o.tag===1){var tt=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){a=Ki(_e,a),a=Ri(o,a,1),o=dh(o,a,1),a=L(),o!==null&&(Ac(o,1,a),Ek(o,a));break}}o=o.return}}function Ui(a,o,_e){var tt=a.pingCache;tt!==null&&tt.delete(o),o=L(),a.pingedLanes|=a.suspendedLanes&_e,R$1===a&&(Z$1&_e)===_e&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(a,0):sk|=_e),Ek(a,o)}function Zk(a,o){o===0&&(a.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var _e=L();a=Zg(a,o),a!==null&&(Ac(a,o,_e),Ek(a,_e))}function vj(a){var o=a.memoizedState,_e=0;o!==null&&(_e=o.retryLane),Zk(a,_e)}function ck(a,o){var _e=0;switch(a.tag){case 13:var tt=a.stateNode,ct=a.memoizedState;ct!==null&&(_e=ct.retryLane);break;case 19:tt=a.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(o),Zk(a,_e)}var Wk;Wk=function(a,o,_e){if(a!==null)if(a.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(a.lanes&_e)&&!(o.flags&128))return Ug=!1,zj(a,o,_e);Ug=!!(a.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var tt=o.type;jj(a,o),a=o.pendingProps;var ct=Yf(o,H.current);Tg(o,_e),ct=Xh(null,o,tt,a,ct,_e);var gt=bi();return o.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(tt)?(gt=!0,cg(o)):gt=!1,o.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,ah(o),ct.updater=nh,o.stateNode=ct,ct._reactInternals=o,rh(o,tt,a,_e),o=kj(null,o,tt,!0,gt,_e)):(o.tag=0,I&&gt&&vg(o),Yi(null,o,ct,_e),o=o.child),o;case 16:tt=o.elementType;e:{switch(jj(a,o),a=o.pendingProps,ct=tt._init,tt=ct(tt._payload),o.type=tt,ct=o.tag=$k(tt),a=Lg(tt,a),ct){case 0:o=dj(null,o,tt,a,_e);break e;case 1:o=ij(null,o,tt,a,_e);break e;case 11:o=Zi(null,o,tt,a,_e);break e;case 14:o=aj(null,o,tt,Lg(tt.type,a),_e);break e}throw Error(p$2(306,tt,""))}return o;case 0:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),dj(a,o,tt,ct,_e);case 1:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),ij(a,o,tt,ct,_e);case 3:e:{if(lj(o),a===null)throw Error(p$2(387));tt=o.pendingProps,gt=o.memoizedState,ct=gt.element,bh(a,o),gh(o,tt,null,_e);var rt=o.memoizedState;if(tt=rt.element,gt.isDehydrated)if(gt={element:tt,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},o.updateQueue.baseState=gt,o.memoizedState=gt,o.flags&256){ct=Ki(Error(p$2(423)),o),o=mj(a,o,tt,_e,ct);break e}else if(tt!==ct){ct=Ki(Error(p$2(424)),o),o=mj(a,o,tt,_e,ct);break e}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,_e=Ch(o,null,tt,_e),o.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tt===ct){o=$i(a,o,_e);break e}Yi(a,o,tt,_e)}o=o.child}return o;case 5:return Kh(o),a===null&&Eg(o),tt=o.type,ct=o.pendingProps,gt=a!==null?a.memoizedProps:null,rt=ct.children,Ef(tt,ct)?rt=null:gt!==null&&Ef(tt,gt)&&(o.flags|=32),hj(a,o),Yi(a,o,rt,_e),o.child;case 6:return a===null&&Eg(o),null;case 13:return pj(a,o,_e);case 4:return Ih(o,o.stateNode.containerInfo),tt=o.pendingProps,a===null?o.child=Bh(o,null,tt,_e):Yi(a,o,tt,_e),o.child;case 11:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),Zi(a,o,tt,ct,_e);case 7:return Yi(a,o,o.pendingProps,_e),o.child;case 8:return Yi(a,o,o.pendingProps.children,_e),o.child;case 12:return Yi(a,o,o.pendingProps.children,_e),o.child;case 10:e:{if(tt=o.type._context,ct=o.pendingProps,gt=o.memoizedProps,rt=ct.value,G$1(Mg,tt._currentValue),tt._currentValue=rt,gt!==null)if(He(gt.value,rt)){if(gt.children===ct.children&&!Wf.current){o=$i(a,o,_e);break e}}else for(gt=o.child,gt!==null&&(gt.return=o);gt!==null;){var it=gt.dependencies;if(it!==null){rt=gt.child;for(var s=it.firstContext;s!==null;){if(s.context===tt){if(gt.tag===1){s=ch(-1,_e&-_e),s.tag=2;var et=gt.updateQueue;if(et!==null){et=et.shared;var nt=et.pending;nt===null?s.next=s:(s.next=nt.next,nt.next=s),et.pending=s}}gt.lanes|=_e,s=gt.alternate,s!==null&&(s.lanes|=_e),Sg(gt.return,_e,o),it.lanes|=_e;break}s=s.next}}else if(gt.tag===10)rt=gt.type===o.type?null:gt.child;else if(gt.tag===18){if(rt=gt.return,rt===null)throw Error(p$2(341));rt.lanes|=_e,it=rt.alternate,it!==null&&(it.lanes|=_e),Sg(rt,_e,o),rt=gt.sibling}else rt=gt.child;if(rt!==null)rt.return=gt;else for(rt=gt;rt!==null;){if(rt===o){rt=null;break}if(gt=rt.sibling,gt!==null){gt.return=rt.return,rt=gt;break}rt=rt.return}gt=rt}Yi(a,o,ct.children,_e),o=o.child}return o;case 9:return ct=o.type,tt=o.pendingProps.children,Tg(o,_e),ct=Vg(ct),tt=tt(ct),o.flags|=1,Yi(a,o,tt,_e),o.child;case 14:return tt=o.type,ct=Lg(tt,o.pendingProps),ct=Lg(tt.type,ct),aj(a,o,tt,ct,_e);case 15:return cj(a,o,o.type,o.pendingProps,_e);case 17:return tt=o.type,ct=o.pendingProps,ct=o.elementType===tt?ct:Lg(tt,ct),jj(a,o),o.tag=1,Zf(tt)?(a=!0,cg(o)):a=!1,Tg(o,_e),ph(o,tt,ct),rh(o,tt,ct,_e),kj(null,o,tt,!0,a,_e);case 19:return yj(a,o,_e);case 22:return ej(a,o,_e)}throw Error(p$2(156,o.tag))};function Gk(a,o){return ac(a,o)}function al(a,o,_e,tt){this.tag=a,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,o,_e,tt){return new al(a,o,_e,tt)}function bj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $k(a){if(typeof a=="function")return bj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function wh(a,o){var _e=a.alternate;return _e===null?(_e=Bg(a.tag,o,a.key,a.mode),_e.elementType=a.elementType,_e.type=a.type,_e.stateNode=a.stateNode,_e.alternate=a,a.alternate=_e):(_e.pendingProps=o,_e.type=a.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=a.flags&14680064,_e.childLanes=a.childLanes,_e.lanes=a.lanes,_e.child=a.child,_e.memoizedProps=a.memoizedProps,_e.memoizedState=a.memoizedState,_e.updateQueue=a.updateQueue,o=a.dependencies,_e.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},_e.sibling=a.sibling,_e.index=a.index,_e.ref=a.ref,_e}function yh(a,o,_e,tt,ct,gt){var rt=2;if(tt=a,typeof a=="function")bj(a)&&(rt=1);else if(typeof a=="string")rt=5;else e:switch(a){case ya:return Ah(_e.children,ct,gt,o);case za:rt=8,ct|=8;break;case Aa:return a=Bg(12,_e,o,ct|2),a.elementType=Aa,a.lanes=gt,a;case Ea:return a=Bg(13,_e,o,ct),a.elementType=Ea,a.lanes=gt,a;case Fa:return a=Bg(19,_e,o,ct),a.elementType=Fa,a.lanes=gt,a;case Ia:return qj(_e,ct,gt,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,tt=null;break e}throw Error(p$2(130,a==null?a:typeof a,""))}return o=Bg(rt,_e,o,ct),o.elementType=a,o.type=tt,o.lanes=gt,o}function Ah(a,o,_e,tt){return a=Bg(7,a,tt,o),a.lanes=_e,a}function qj(a,o,_e,tt){return a=Bg(22,a,tt,o),a.elementType=Ia,a.lanes=_e,a.stateNode={isHidden:!1},a}function xh(a,o,_e){return a=Bg(6,a,null,o),a.lanes=_e,a}function zh(a,o,_e){return o=Bg(4,a.children!==null?a.children:[],a.key,o),o.lanes=_e,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function bl(a,o,_e,tt,ct){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function cl(a,o,_e,tt,ct,gt,rt,it,s){return a=new bl(a,o,_e,it,s),o===1?(o=1,gt===!0&&(o|=8)):o=0,gt=Bg(3,null,null,o),a.current=gt,gt.stateNode=a,gt.memoizedState={element:tt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(gt),a}function dl(a,o,_e){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:a,containerInfo:o,implementation:_e}}function el(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p$2(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(p$2(171))}if(a.tag===1){var _e=a.type;if(Zf(_e))return bg(a,_e,o)}return o}function fl(a,o,_e,tt,ct,gt,rt,it,s){return a=cl(_e,tt,!0,a,ct,gt,rt,it,s),a.context=el(null),_e=a.current,tt=L(),ct=lh(_e),gt=ch(tt,ct),gt.callback=o??null,dh(_e,gt,ct),a.current.lanes=ct,Ac(a,ct,tt),Ek(a,tt),a}function gl(a,o,_e,tt){var ct=o.current,gt=L(),rt=lh(ct);return _e=el(_e),o.context===null?o.context=_e:o.pendingContext=_e,o=ch(gt,rt),o.payload={element:a},tt=tt===void 0?null:tt,tt!==null&&(o.callback=tt),a=dh(ct,o,rt),a!==null&&(mh(a,ct,rt,gt),eh(a,ct,rt)),rt}function hl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var _e=a.retryLane;a.retryLane=_e!==0&&_e<o?_e:o}}function jl(a,o){il(a,o),(a=a.alternate)&&il(a,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}nl.prototype.render=ml.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(p$2(409));gl(a,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Sk(function(){gl(null,a,null,null)}),o[uf]=null}};function nl(a){this._internalRoot=a}nl.prototype.unstable_scheduleHydration=function(a){if(a){var o=Hc();a={blockedOn:null,target:a,priority:o};for(var _e=0;_e<Qc.length&&o!==0&&o<Qc[_e].priority;_e++);Qc.splice(_e,0,a),_e===0&&Vc(a)}};function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(a,o,_e,tt,ct){if(ct){if(typeof tt=="function"){var gt=tt;tt=function(){var et=hl(rt);gt.call(et)}}var rt=fl(o,tt,a,0,null,!1,!1,"",ql);return a._reactRootContainer=rt,a[uf]=rt.current,sf(a.nodeType===8?a.parentNode:a),Sk(),rt}for(;ct=a.lastChild;)a.removeChild(ct);if(typeof tt=="function"){var it=tt;tt=function(){var et=hl(s);it.call(et)}}var s=cl(a,0,!1,null,null,!1,!1,"",ql);return a._reactRootContainer=s,a[uf]=s.current,sf(a.nodeType===8?a.parentNode:a),Sk(function(){gl(o,s,_e,tt)}),s}function sl(a,o,_e,tt,ct){var gt=_e._reactRootContainer;if(gt){var rt=gt;if(typeof ct=="function"){var it=ct;ct=function(){var s=hl(rt);it.call(s)}}gl(o,rt,a,ct)}else rt=rl(_e,o,a,ct,tt);return hl(rt)}Ec=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var _e=tc(o.pendingLanes);_e!==0&&(Cc(o,_e|1),Ek(o,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(a,1);if(tt!==null){var ct=L();mh(tt,a,1,ct)}}),jl(a,1)}};Fc=function(a){if(a.tag===13){var o=Zg(a,134217728);if(o!==null){var _e=L();mh(o,a,134217728,_e)}jl(a,134217728)}};Gc=function(a){if(a.tag===13){var o=lh(a),_e=Zg(a,o);if(_e!==null){var tt=L();mh(_e,a,o,tt)}jl(a,o)}};Hc=function(){return C$1};Ic=function(a,o){var _e=C$1;try{return C$1=a,o()}finally{C$1=_e}};yb=function(a,o,_e){switch(o){case"input":if(bb(a,_e),o=_e.name,_e.type==="radio"&&o!=null){for(_e=a;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<_e.length;o++){var tt=_e[o];if(tt!==a&&tt.form===a.form){var ct=Db(tt);if(!ct)throw Error(p$2(90));Wa(tt),bb(tt,ct)}}}break;case"textarea":ib(a,_e);break;case"select":o=_e.value,o!=null&&fb(a,!!_e.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(a,o){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$2(200));return dl(a,o,null,_e)};reactDom_production_min.createRoot=function(a,o){if(!ol(a))throw Error(p$2(299));var _e=!1,tt="",ct=ll;return o!=null&&(o.unstable_strictMode===!0&&(_e=!0),o.identifierPrefix!==void 0&&(tt=o.identifierPrefix),o.onRecoverableError!==void 0&&(ct=o.onRecoverableError)),o=cl(a,1,!1,null,null,_e,!1,tt,ct),a[uf]=o.current,sf(a.nodeType===8?a.parentNode:a),new ml(o)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(p$2(188)):(a=Object.keys(a).join(","),Error(p$2(268,a)));return a=Zb(o),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Sk(a)};reactDom_production_min.hydrate=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!0,_e)};reactDom_production_min.hydrateRoot=function(a,o,_e){if(!ol(a))throw Error(p$2(405));var tt=_e!=null&&_e.hydratedSources||null,ct=!1,gt="",rt=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(ct=!0),_e.identifierPrefix!==void 0&&(gt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),o=fl(o,null,a,1,_e??null,ct,!1,gt,rt),a[uf]=o.current,sf(a),tt)for(a=0;a<tt.length;a++)_e=tt[a],ct=_e._getVersion,ct=ct(_e._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[_e,ct]:o.mutableSourceEagerHydrationData.push(_e,ct);return new nl(o)};reactDom_production_min.render=function(a,o,_e){if(!pl(o))throw Error(p$2(200));return sl(null,a,o,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p$2(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,o,_e,tt){if(!pl(_e))throw Error(p$2(200));if(a==null||a._reactInternals===void 0)throw Error(p$2(38));return sl(a,o,_e,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;/**
 * @remix-run/router v1.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$3.apply(this,arguments)}var Action;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(a){a===void 0&&(a={});function o(tt,ct){let{pathname:gt,search:rt,hash:it}=tt.location;return createLocation("",{pathname:gt,search:rt,hash:it},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function _e(tt,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(o,_e,null,a)}function invariant(a,o){if(a===!1||a===null||typeof a>"u")throw new Error(o)}function warning(a,o){if(!a){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(a,o){return{usr:a.state,key:a.key,idx:o}}function createLocation(a,o,_e,tt){return _e===void 0&&(_e=null),_extends$3({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof o=="string"?parsePath(o):o,{state:_e,key:o&&o.key||tt||createKey()})}function createPath(a){let{pathname:o="/",search:_e="",hash:tt=""}=a;return _e&&_e!=="?"&&(o+=_e.charAt(0)==="?"?_e:"?"+_e),tt&&tt!=="#"&&(o+=tt.charAt(0)==="#"?tt:"#"+tt),o}function parsePath(a){let o={};if(a){let _e=a.indexOf("#");_e>=0&&(o.hash=a.substr(_e),a=a.substr(0,_e));let tt=a.indexOf("?");tt>=0&&(o.search=a.substr(tt),a=a.substr(0,tt)),a&&(o.pathname=a)}return o}function getUrlBasedHistory(a,o,_e,tt){tt===void 0&&(tt={});let{window:ct=document.defaultView,v5Compat:gt=!1}=tt,rt=ct.history,it=Action.Pop,s=null,et=nt();et==null&&(et=0,rt.replaceState(_extends$3({},rt.state,{idx:et}),""));function nt(){return(rt.state||{idx:null}).idx}function at(){it=Action.Pop;let mt=nt(),ot=mt==null?null:mt-et;et=mt,s&&s({action:it,location:lt.location,delta:ot})}function ht(mt,ot){it=Action.Push;let ut=createLocation(lt.location,mt,ot);_e&&_e(ut,mt),et=nt()+1;let ft=getHistoryState(ut,et),bt=lt.createHref(ut);try{rt.pushState(ft,"",bt)}catch(vt){if(vt instanceof DOMException&&vt.name==="DataCloneError")throw vt;ct.location.assign(bt)}gt&&s&&s({action:it,location:lt.location,delta:1})}function dt(mt,ot){it=Action.Replace;let ut=createLocation(lt.location,mt,ot);_e&&_e(ut,mt),et=nt();let ft=getHistoryState(ut,et),bt=lt.createHref(ut);rt.replaceState(ft,"",bt),gt&&s&&s({action:it,location:lt.location,delta:0})}function pt(mt){let ot=ct.location.origin!=="null"?ct.location.origin:ct.location.href,ut=typeof mt=="string"?mt:createPath(mt);return invariant(ot,"No window.location.(origin|href) available to create URL for href: "+ut),new URL(ut,ot)}let lt={get action(){return it},get location(){return a(ct,rt)},listen(mt){if(s)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,at),s=mt,()=>{ct.removeEventListener(PopStateEventType,at),s=null}},createHref(mt){return o(ct,mt)},createURL:pt,encodeLocation(mt){let ot=pt(mt);return{pathname:ot.pathname,search:ot.search,hash:ot.hash}},push:ht,replace:dt,go(mt){return rt.go(mt)}};return lt}var ResultType;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ResultType||(ResultType={}));function matchRoutes(a,o,_e){_e===void 0&&(_e="/");let tt=typeof o=="string"?parsePath(o):o,ct=stripBasename(tt.pathname||"/",_e);if(ct==null)return null;let gt=flattenRoutes(a);rankRouteBranches(gt);let rt=null;for(let it=0;rt==null&&it<gt.length;++it)rt=matchRouteBranch(gt[it],safelyDecodeURI(ct));return rt}function flattenRoutes(a,o,_e,tt){o===void 0&&(o=[]),_e===void 0&&(_e=[]),tt===void 0&&(tt="");let ct=(gt,rt,it)=>{let s={relativePath:it===void 0?gt.path||"":it,caseSensitive:gt.caseSensitive===!0,childrenIndex:rt,route:gt};s.relativePath.startsWith("/")&&(invariant(s.relativePath.startsWith(tt),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+tt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(tt.length));let et=joinPaths([tt,s.relativePath]),nt=_e.concat(s);gt.children&&gt.children.length>0&&(invariant(gt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+et+'".')),flattenRoutes(gt.children,o,nt,et)),!(gt.path==null&&!gt.index)&&o.push({path:et,score:computeScore(et,gt.index),routesMeta:nt})};return a.forEach((gt,rt)=>{var it;if(gt.path===""||!((it=gt.path)!=null&&it.includes("?")))ct(gt,rt);else for(let s of explodeOptionalSegments(gt.path))ct(gt,rt,s)}),o}function explodeOptionalSegments(a){let o=a.split("/");if(o.length===0)return[];let[_e,...tt]=o,ct=_e.endsWith("?"),gt=_e.replace(/\?$/,"");if(tt.length===0)return ct?[gt,""]:[gt];let rt=explodeOptionalSegments(tt.join("/")),it=[];return it.push(...rt.map(s=>s===""?gt:[gt,s].join("/"))),ct&&it.push(...rt),it.map(s=>a.startsWith("/")&&s===""?"/":s)}function rankRouteBranches(a){a.sort((o,_e)=>o.score!==_e.score?_e.score-o.score:compareIndexes(o.routesMeta.map(tt=>tt.childrenIndex),_e.routesMeta.map(tt=>tt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=a=>a==="*";function computeScore(a,o){let _e=a.split("/"),tt=_e.length;return _e.some(isSplat)&&(tt+=splatPenalty),o&&(tt+=indexRouteValue),_e.filter(ct=>!isSplat(ct)).reduce((ct,gt)=>ct+(paramRe.test(gt)?dynamicSegmentValue:gt===""?emptySegmentValue:staticSegmentValue),tt)}function compareIndexes(a,o){return a.length===o.length&&a.slice(0,-1).every((tt,ct)=>tt===o[ct])?a[a.length-1]-o[o.length-1]:0}function matchRouteBranch(a,o){let{routesMeta:_e}=a,tt={},ct="/",gt=[];for(let rt=0;rt<_e.length;++rt){let it=_e[rt],s=rt===_e.length-1,et=ct==="/"?o:o.slice(ct.length)||"/",nt=matchPath({path:it.relativePath,caseSensitive:it.caseSensitive,end:s},et);if(!nt)return null;Object.assign(tt,nt.params);let at=it.route;gt.push({params:tt,pathname:joinPaths([ct,nt.pathname]),pathnameBase:normalizePathname(joinPaths([ct,nt.pathnameBase])),route:at}),nt.pathnameBase!=="/"&&(ct=joinPaths([ct,nt.pathnameBase]))}return gt}function matchPath(a,o){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[_e,tt]=compilePath(a.path,a.caseSensitive,a.end),ct=o.match(_e);if(!ct)return null;let gt=ct[0],rt=gt.replace(/(.)\/+$/,"$1"),it=ct.slice(1);return{params:tt.reduce((et,nt,at)=>{if(nt==="*"){let ht=it[at]||"";rt=gt.slice(0,gt.length-ht.length).replace(/(.)\/+$/,"$1")}return et[nt]=safelyDecodeURIComponent(it[at]||"",nt),et},{}),pathname:gt,pathnameBase:rt,pattern:a}}function compilePath(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!0),warning(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let tt=[],ct="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(rt,it)=>(tt.push(it),"/([^\\/]+)"));return a.endsWith("*")?(tt.push("*"),ct+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?ct+="\\/*$":a!==""&&a!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,o?void 0:"i"),tt]}function safelyDecodeURI(a){try{return decodeURI(a)}catch(o){return warning(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),a}}function safelyDecodeURIComponent(a,o){try{return decodeURIComponent(a)}catch(_e){return warning(!1,'The value for the URL param "'+o+'" will not be decoded because'+(' the string "'+a+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_e+").")),a}}function stripBasename(a,o){if(o==="/")return a;if(!a.toLowerCase().startsWith(o.toLowerCase()))return null;let _e=o.endsWith("/")?o.length-1:o.length,tt=a.charAt(_e);return tt&&tt!=="/"?null:a.slice(_e)||"/"}function resolvePath(a,o){o===void 0&&(o="/");let{pathname:_e,search:tt="",hash:ct=""}=typeof a=="string"?parsePath(a):a;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,o):o,search:normalizeSearch(tt),hash:normalizeHash(ct)}}function resolvePathname(a,o){let _e=o.replace(/\/+$/,"").split("/");return a.split("/").forEach(ct=>{ct===".."?_e.length>1&&_e.pop():ct!=="."&&_e.push(ct)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(a,o,_e,tt){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(tt)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(a){return a.filter((o,_e)=>_e===0||o.route.path&&o.route.path.length>0)}function resolveTo(a,o,_e,tt){tt===void 0&&(tt=!1);let ct;typeof a=="string"?ct=parsePath(a):(ct=_extends$3({},a),invariant(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let gt=a===""||ct.pathname==="",rt=gt?"/":ct.pathname,it;if(tt||rt==null)it=_e;else{let at=o.length-1;if(rt.startsWith("..")){let ht=rt.split("/");for(;ht[0]==="..";)ht.shift(),at-=1;ct.pathname=ht.join("/")}it=at>=0?o[at]:"/"}let s=resolvePath(ct,it),et=rt&&rt!=="/"&&rt.endsWith("/"),nt=(gt||rt===".")&&_e.endsWith("/");return!s.pathname.endsWith("/")&&(et||nt)&&(s.pathname+="/"),s}const joinPaths=a=>a.join("/").replace(/\/\/+/g,"/"),normalizePathname=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,normalizeHash=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function isRouteErrorResponse(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(a){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(a)}function useNavigate(){let{isDataRoute:a}=reactExports.useContext(RouteContext);return a?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let a=reactExports.useContext(DataRouterContext),{basename:o,navigator:_e}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),gt=JSON.stringify(getPathContributingMatches(tt).map(s=>s.pathnameBase)),rt=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{rt.current=!0}),reactExports.useCallback(function(s,et){if(et===void 0&&(et={}),!rt.current)return;if(typeof s=="number"){_e.go(s);return}let nt=resolveTo(s,JSON.parse(gt),ct,et.relative==="path");a==null&&o!=="/"&&(nt.pathname=nt.pathname==="/"?o:joinPaths([o,nt.pathname])),(et.replace?_e.replace:_e.push)(nt,et.state,et)},[o,_e,gt,ct,a])}function useParams(){let{matches:a}=reactExports.useContext(RouteContext),o=a[a.length-1];return o?o.params:{}}function useRoutes(a,o){return useRoutesImpl(a,o)}function useRoutesImpl(a,o,_e){useInRouterContext()||invariant(!1);let{navigator:tt}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),gt=ct[ct.length-1],rt=gt?gt.params:{};gt&&gt.pathname;let it=gt?gt.pathnameBase:"/";gt&&gt.route;let s=useLocation(),et;if(o){var nt;let lt=typeof o=="string"?parsePath(o):o;it==="/"||(nt=lt.pathname)!=null&&nt.startsWith(it)||invariant(!1),et=lt}else et=s;let at=et.pathname||"/",ht=it==="/"?at:at.slice(it.length)||"/",dt=matchRoutes(a,{pathname:ht}),pt=_renderMatches(dt&&dt.map(lt=>Object.assign({},lt,{params:Object.assign({},rt,lt.params),pathname:joinPaths([it,tt.encodeLocation?tt.encodeLocation(lt.pathname).pathname:lt.pathname]),pathnameBase:lt.pathnameBase==="/"?it:joinPaths([it,tt.encodeLocation?tt.encodeLocation(lt.pathnameBase).pathname:lt.pathnameBase])})),ct,_e);return o&&pt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},et),navigationType:Action.Pop}},pt):pt}function DefaultErrorComponent(){let a=useRouteError(),o=isRouteErrorResponse(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),_e=a instanceof Error?a.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},gt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},o),_e?reactExports.createElement("pre",{style:ct},_e):null,gt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,_e){return _e.location!==o.location||_e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error||_e.error,location:_e.location,revalidation:o.revalidation||_e.revalidation}}componentDidCatch(o,_e){console.error("React Router caught the following error during render",o,_e)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(a){let{routeContext:o,match:_e,children:tt}=a,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(_e.route.errorElement||_e.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:o},tt)}function _renderMatches(a,o,_e){var tt;if(o===void 0&&(o=[]),_e===void 0&&(_e=null),a==null){var ct;if((ct=_e)!=null&&ct.errors)a=_e.matches;else return null}let gt=a,rt=(tt=_e)==null?void 0:tt.errors;if(rt!=null){let it=gt.findIndex(s=>s.route.id&&(rt==null?void 0:rt[s.route.id]));it>=0||invariant(!1),gt=gt.slice(0,Math.min(gt.length,it+1))}return gt.reduceRight((it,s,et)=>{let nt=s.route.id?rt==null?void 0:rt[s.route.id]:null,at=null;_e&&(at=s.route.errorElement||defaultErrorElement);let ht=o.concat(gt.slice(0,et+1)),dt=()=>{let pt;return nt?pt=at:s.route.Component?pt=reactExports.createElement(s.route.Component,null):s.route.element?pt=s.route.element:pt=it,reactExports.createElement(RenderedRoute,{match:s,routeContext:{outlet:it,matches:ht,isDataRoute:_e!=null},children:pt})};return _e&&(s.route.ErrorBoundary||s.route.errorElement||et===0)?reactExports.createElement(RenderErrorBoundary,{location:_e.location,revalidation:_e.revalidation,component:at,error:nt,children:dt(),routeContext:{outlet:null,matches:ht,isDataRoute:!0}}):dt()},null)}var DataRouterHook$1=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(DataRouterHook$1||{}),DataRouterStateHook$1=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(DataRouterStateHook$1||{});function useDataRouterContext(a){let o=reactExports.useContext(DataRouterContext);return o||invariant(!1),o}function useDataRouterState(a){let o=reactExports.useContext(DataRouterStateContext);return o||invariant(!1),o}function useRouteContext(a){let o=reactExports.useContext(RouteContext);return o||invariant(!1),o}function useCurrentRouteId(a){let o=useRouteContext(),_e=o.matches[o.matches.length-1];return _e.route.id||invariant(!1),_e.route.id}function useRouteError(){var a;let o=reactExports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),tt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return o||((a=_e.errors)==null?void 0:a[tt])}function useNavigateStable(){let{router:a}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),o=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{_e.current=!0}),reactExports.useCallback(function(ct,gt){gt===void 0&&(gt={}),_e.current&&(typeof ct=="number"?a.navigate(ct):a.navigate(ct,_extends$2({fromRouteId:o},gt)))},[a,o])}function Route(a){invariant(!1)}function Router(a){let{basename:o="/",children:_e=null,location:tt,navigationType:ct=Action.Pop,navigator:gt,static:rt=!1}=a;useInRouterContext()&&invariant(!1);let it=o.replace(/^\/*/,"/"),s=reactExports.useMemo(()=>({basename:it,navigator:gt,static:rt}),[it,gt,rt]);typeof tt=="string"&&(tt=parsePath(tt));let{pathname:et="/",search:nt="",hash:at="",state:ht=null,key:dt="default"}=tt,pt=reactExports.useMemo(()=>{let lt=stripBasename(et,it);return lt==null?null:{location:{pathname:lt,search:nt,hash:at,state:ht,key:dt},navigationType:ct}},[it,et,nt,at,ht,dt,ct]);return pt==null?null:reactExports.createElement(NavigationContext.Provider,{value:s},reactExports.createElement(LocationContext.Provider,{children:_e,value:pt}))}function Routes(a){let{children:o,location:_e}=a;return useRoutes(createRoutesFromChildren(o),_e)}new Promise(()=>{});function createRoutesFromChildren(a,o){o===void 0&&(o=[]);let _e=[];return reactExports.Children.forEach(a,(tt,ct)=>{if(!reactExports.isValidElement(tt))return;let gt=[...o,ct];if(tt.type===reactExports.Fragment){_e.push.apply(_e,createRoutesFromChildren(tt.props.children,gt));return}tt.type!==Route&&invariant(!1),!tt.props.index||!tt.props.children||invariant(!1);let rt={id:tt.props.id||gt.join("-"),caseSensitive:tt.props.caseSensitive,element:tt.props.element,Component:tt.props.Component,index:tt.props.index,path:tt.props.path,loader:tt.props.loader,action:tt.props.action,errorElement:tt.props.errorElement,ErrorBoundary:tt.props.ErrorBoundary,hasErrorBoundary:tt.props.ErrorBoundary!=null||tt.props.errorElement!=null,shouldRevalidate:tt.props.shouldRevalidate,handle:tt.props.handle,lazy:tt.props.lazy};tt.props.children&&(rt.children=createRoutesFromChildren(tt.props.children,gt)),_e.push(rt)}),_e}/**
 * React Router DOM v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createSearchParams(a){return a===void 0&&(a=""),new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((o,_e)=>{let tt=a[_e];return o.concat(Array.isArray(tt)?tt.map(ct=>[_e,ct]):[[_e,tt]])},[]))}function getSearchParamsForLocation(a,o){let _e=createSearchParams(a);return o&&o.forEach((tt,ct)=>{_e.has(ct)||o.getAll(ct).forEach(gt=>{_e.append(ct,gt)})}),_e}const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(a){let{basename:o,children:_e,future:tt,window:ct}=a,gt=reactExports.useRef();gt.current==null&&(gt.current=createBrowserHistory({window:ct,v5Compat:!0}));let rt=gt.current,[it,s]=reactExports.useState({action:rt.action,location:rt.location}),{v7_startTransition:et}=tt||{},nt=reactExports.useCallback(at=>{et&&startTransitionImpl?startTransitionImpl(()=>s(at)):s(at)},[s,et]);return reactExports.useLayoutEffect(()=>rt.listen(nt),[rt,nt]),reactExports.createElement(Router,{basename:o,children:_e,location:it.location,navigationType:it.action,navigator:rt})}var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useSearchParams(a){let o=reactExports.useRef(createSearchParams(a)),_e=reactExports.useRef(!1),tt=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(tt.search,_e.current?null:o.current),[tt.search]),gt=useNavigate(),rt=reactExports.useCallback((it,s)=>{const et=createSearchParams(typeof it=="function"?it(ct):it);_e.current=!0,gt("?"+et,s)},[gt,ct]);return[ct,rt]}var lib={},uaParser_min={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",gt="",rt="?",it="function",s="undefined",et="object",nt="string",at="major",ht="model",dt="name",pt="type",lt="vendor",mt="version",ot="architecture",ut="console",ft="mobile",bt="tablet",vt="smarttv",yt="wearable",At="embedded",Nt=350,St="Amazon",wt="Apple",Mt="ASUS",Ht="BlackBerry",Ot="Browser",Dt="Chrome",Gt="Edge",nn="Firefox",zt="Google",Ft="Huawei",un="LG",vn="Microsoft",yn="Motorola",cn="Opera",gn="Samsung",Cn="Sharp",fn="Sony",Tn="Xiaomi",On="Zebra",Ln="Facebook",An="Chromium OS",Rn="Mac OS",In=function(_n,$n){var bn={};for(var wn in _n)$n[wn]&&$n[wn].length%2===0?bn[wn]=$n[wn].concat(_n[wn]):bn[wn]=_n[wn];return bn},kn=function(_n){for(var $n={},bn=0;bn<_n.length;bn++)$n[_n[bn].toUpperCase()]=_n[bn];return $n},xn=function(_n,$n){return typeof _n===nt?Yn($n).indexOf(Yn(_n))!==-1:!1},Yn=function(_n){return _n.toLowerCase()},Un=function(_n){return typeof _n===nt?_n.replace(/[^\d\.]/g,gt).split(".")[0]:tt},jn=function(_n,$n){if(typeof _n===nt)return _n=_n.replace(/^\s\s*/,gt),typeof $n===s?_n:_n.substring(0,Nt)},Qn=function(_n,$n){for(var bn=0,wn,Yt,kt,st,Tt,Rt;bn<$n.length&&!Tt;){var Lt=$n[bn],Et=$n[bn+1];for(wn=Yt=0;wn<Lt.length&&!Tt&&Lt[wn];)if(Tt=Lt[wn++].exec(_n),Tt)for(kt=0;kt<Et.length;kt++)Rt=Tt[++Yt],st=Et[kt],typeof st===et&&st.length>0?st.length===2?typeof st[1]==it?this[st[0]]=st[1].call(this,Rt):this[st[0]]=st[1]:st.length===3?typeof st[1]===it&&!(st[1].exec&&st[1].test)?this[st[0]]=Rt?st[1].call(this,Rt,st[2]):tt:this[st[0]]=Rt?Rt.replace(st[1],st[2]):tt:st.length===4&&(this[st[0]]=Rt?st[3].call(this,Rt.replace(st[1],st[2])):tt):this[st]=Rt||tt;bn+=2}},on=function(_n,$n){for(var bn in $n)if(typeof $n[bn]===et&&$n[bn].length>0){for(var wn=0;wn<$n[bn].length;wn++)if(xn($n[bn][wn],_n))return bn===rt?tt:bn}else if(xn($n[bn],_n))return bn===rt?tt:bn;return _n},Hn={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Fn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Vn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[mt,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[mt,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,mt],[/opios[\/ ]+([\w\.]+)/i],[mt,[dt,cn+" Mini"]],[/\bopr\/([\w\.]+)/i],[mt,[dt,cn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,mt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[mt,[dt,"UC"+Ot]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[mt,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[mt,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[mt,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[mt,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[mt,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ot],mt],[/\bfocus\/([\w\.]+)/i],[mt,[dt,nn+" Focus"]],[/\bopt\/([\w\.]+)/i],[mt,[dt,cn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[mt,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[mt,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[mt,[dt,cn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[mt,[dt,"MIUI "+Ot]],[/fxios\/([-\w\.]+)/i],[mt,[dt,nn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ot]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ot],mt],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],mt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,mt],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,Ln],mt],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,mt],[/\bgsa\/([\w\.]+) .*safari\//i],[mt,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[mt,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[mt,[dt,Dt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Dt+" WebView"],mt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[mt,[dt,"Android "+Ot]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,mt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[mt,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[mt,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[mt,on,Hn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,mt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],mt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[mt,[dt,nn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,mt],[/(cobalt)\/([\w\.]+)/i],[dt,[mt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ot,"amd64"]],[/(ia32(?=;))/i],[[ot,Yn]],[/((?:i[346]|x)86)[;\)]/i],[[ot,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ot,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ot,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ot,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ot,/ower/,gt,Yn]],[/(sun4\w)[;\)]/i],[[ot,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ot,Yn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ht,[lt,gn],[pt,bt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ht,[lt,gn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ht,[lt,wt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ht,[lt,wt],[pt,bt]],[/(macintosh);/i],[ht,[lt,wt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ht,[lt,Cn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ht,[lt,Ft],[pt,bt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ht,[lt,Ft],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ht,/_/g," "],[lt,Tn],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ht,/_/g," "],[lt,Tn],[pt,bt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ht,[lt,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ht,[lt,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[ht,[lt,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ht,[lt,yn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ht,[lt,yn],[pt,bt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ht,[lt,un],[pt,bt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ht,[lt,un],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ht,[lt,"Lenovo"],[pt,bt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ht,/_/g," "],[lt,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[ht,[lt,zt],[pt,bt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ht,[lt,zt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ht,[lt,fn],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ht,"Xperia Tablet"],[lt,fn],[pt,bt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ht,[lt,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ht,[lt,St],[pt,bt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ht,/(.+)/g,"Fire Phone $1"],[lt,St],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[ht,lt,[pt,bt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ht,[lt,Ht],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ht,[lt,Mt],[pt,bt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ht,[lt,Mt],[pt,ft]],[/(nexus 9)/i],[ht,[lt,"HTC"],[pt,bt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[lt,[ht,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ht,[lt,"Acer"],[pt,bt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ht,[lt,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[lt,ht,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[lt,ht,[pt,bt]],[/(surface duo)/i],[ht,[lt,vn],[pt,bt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ht,[lt,"Fairphone"],[pt,ft]],[/(u304aa)/i],[ht,[lt,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[ht,[lt,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[ht,[lt,"RCA"],[pt,bt]],[/\b(venue[\d ]{2,7}) b/i],[ht,[lt,"Dell"],[pt,bt]],[/\b(q(?:mv|ta)\w+) b/i],[ht,[lt,"Verizon"],[pt,bt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[ht,[lt,"Barnes & Noble"],[pt,bt]],[/\b(tm\d{3}\w+) b/i],[ht,[lt,"NuVision"],[pt,bt]],[/\b(k88) b/i],[ht,[lt,"ZTE"],[pt,bt]],[/\b(nx\d{3}j) b/i],[ht,[lt,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[ht,[lt,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[ht,[lt,"Swiss"],[pt,bt]],[/\b((zeki)?tb.*\b) b/i],[ht,[lt,"Zeki"],[pt,bt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[lt,"Dragon Touch"],ht,[pt,bt]],[/\b(ns-?\w{0,9}) b/i],[ht,[lt,"Insignia"],[pt,bt]],[/\b((nxa|next)-?\w{0,9}) b/i],[ht,[lt,"NextBook"],[pt,bt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[lt,"Voice"],ht,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[lt,"LvTel"],ht,[pt,ft]],[/\b(ph-1) /i],[ht,[lt,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[ht,[lt,"Envizen"],[pt,bt]],[/\b(trio[-\w\. ]+) b/i],[ht,[lt,"MachSpeed"],[pt,bt]],[/\btu_(1491) b/i],[ht,[lt,"Rotor"],[pt,bt]],[/(shield[\w ]+) b/i],[ht,[lt,"Nvidia"],[pt,bt]],[/(sprint) (\w+)/i],[lt,ht,[pt,ft]],[/(kin\.[onetw]{3})/i],[[ht,/\./g," "],[lt,vn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ht,[lt,On],[pt,bt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ht,[lt,On],[pt,ft]],[/smart-tv.+(samsung)/i],[lt,[pt,vt]],[/hbbtv.+maple;(\d+)/i],[[ht,/^/,"SmartTV"],[lt,gn],[pt,vt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[lt,un],[pt,vt]],[/(apple) ?tv/i],[lt,[ht,wt+" TV"],[pt,vt]],[/crkey/i],[[ht,Dt+"cast"],[lt,zt],[pt,vt]],[/droid.+aft(\w+)( bui|\))/i],[ht,[lt,St],[pt,vt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ht,[lt,Cn],[pt,vt]],[/(bravia[\w ]+)( bui|\))/i],[ht,[lt,fn],[pt,vt]],[/(mitv-\w{5}) bui/i],[ht,[lt,Tn],[pt,vt]],[/Hbbtv.*(technisat) (.*);/i],[lt,ht,[pt,vt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[lt,jn],[ht,jn],[pt,vt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,vt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[lt,ht,[pt,ut]],[/droid.+; (shield) bui/i],[ht,[lt,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[ht,[lt,fn],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ht,[lt,vn],[pt,ut]],[/((pebble))app/i],[lt,ht,[pt,yt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ht,[lt,wt],[pt,yt]],[/droid.+; (glass) \d/i],[ht,[lt,zt],[pt,yt]],[/droid.+; (wt63?0{2,3})\)/i],[ht,[lt,On],[pt,yt]],[/(quest( 2| pro)?)/i],[ht,[lt,Ln],[pt,yt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[lt,[pt,At]],[/(aeobc)\b/i],[ht,[lt,St],[pt,At]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[ht,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ht,[pt,bt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,bt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[ht,[lt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[mt,[dt,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[mt,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,mt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[mt,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,mt],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[mt,on,Fn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[mt,on,Fn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[mt,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,Rn],[mt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[mt,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,mt],[/\(bb(10);/i],[mt,[dt,Ht]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[mt,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[mt,[dt,nn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[mt,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[mt,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[mt,[dt,Dt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,An],mt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,mt],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],mt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,mt]]},Bn=function(_n,$n){if(typeof _n===et&&($n=_n,_n=tt),!(this instanceof Bn))return new Bn(_n,$n).getResult();var bn=typeof _e!==s&&_e.navigator?_e.navigator:tt,wn=_n||(bn&&bn.userAgent?bn.userAgent:gt),Yt=bn&&bn.userAgentData?bn.userAgentData:tt,kt=$n?In(Vn,$n):Vn,st=bn&&bn.userAgent==wn;return this.getBrowser=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.browser),Tt[at]=Un(Tt[mt]),st&&bn&&bn.brave&&typeof bn.brave.isBrave==it&&(Tt[dt]="Brave"),Tt},this.getCPU=function(){var Tt={};return Tt[ot]=tt,Qn.call(Tt,wn,kt.cpu),Tt},this.getDevice=function(){var Tt={};return Tt[lt]=tt,Tt[ht]=tt,Tt[pt]=tt,Qn.call(Tt,wn,kt.device),st&&!Tt[pt]&&Yt&&Yt.mobile&&(Tt[pt]=ft),st&&Tt[ht]=="Macintosh"&&bn&&typeof bn.standalone!==s&&bn.maxTouchPoints&&bn.maxTouchPoints>2&&(Tt[ht]="iPad",Tt[pt]=bt),Tt},this.getEngine=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.engine),Tt},this.getOS=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.os),st&&!Tt[dt]&&Yt&&Yt.platform!="Unknown"&&(Tt[dt]=Yt.platform.replace(/chrome os/i,An).replace(/macos/i,Rn)),Tt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return wn},this.setUA=function(Tt){return wn=typeof Tt===nt&&Tt.length>Nt?jn(Tt,Nt):Tt,this},this.setUA(wn),this};Bn.VERSION=ct,Bn.BROWSER=kn([dt,mt,at]),Bn.CPU=kn([ot]),Bn.DEVICE=kn([ht,lt,pt,ut,ft,vt,bt,yt,At]),Bn.ENGINE=Bn.OS=kn([dt,mt]),a.exports&&(o=a.exports=Bn),o.UAParser=Bn;var qn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(qn&&!qn.ua){var Gn=new Bn;qn.ua=Gn.getResult(),qn.ua.get=function(){return Gn.getUA()},qn.ua.set=function(_n){Gn.setUA(_n);var $n=Gn.getResult();for(var bn in $n)qn.ua[bn]=$n[bn]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);var uaParser_minExports=uaParser_min.exports;Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(a){return a&&typeof a=="object"&&"default"in a?a.default:a}var React=reactExports,React__default=_interopDefault(React),UAParser$1=uaParser_minExports,ClientUAInstance=new UAParser$1,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function(o){return ClientUAInstance.setUA(o)},parseUserAgent=function(o){if(!o){console.error("No userAgent string was provided");return}var _e=new UAParser$1(o);return{UA:_e,browser:_e.getBrowser(),cpu:_e.getCPU(),device:_e.getDevice(),engine:_e.getEngine(),os:_e.getOS(),ua:_e.getUA(),setUserAgent:function(ct){return _e.setUA(ct)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(a,o){var _e=Object.keys(a);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(a);o&&(tt=tt.filter(function(ct){return Object.getOwnPropertyDescriptor(a,ct).enumerable})),_e.push.apply(_e,tt)}return _e}function _objectSpread2(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o]!=null?arguments[o]:{};o%2?ownKeys(Object(_e),!0).forEach(function(tt){_defineProperty(a,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(tt){Object.defineProperty(a,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return a}function _typeof(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(o){return typeof o}:_typeof=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(a)}function _classCallCheck(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,o){for(var _e=0;_e<o.length;_e++){var tt=o[_e];tt.enumerable=tt.enumerable||!1,tt.configurable=!0,"value"in tt&&(tt.writable=!0),Object.defineProperty(a,tt.key,tt)}}function _createClass(a,o,_e){return o&&_defineProperties(a.prototype,o),_e&&_defineProperties(a,_e),a}function _defineProperty(a,o,_e){return o in a?Object.defineProperty(a,o,{value:_e,enumerable:!0,configurable:!0,writable:!0}):a[o]=_e,a}function _extends$1(){return _extends$1=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends$1.apply(this,arguments)}function _inherits(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&_setPrototypeOf$1(a,o)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf(a)}function _setPrototypeOf$1(a,o){return _setPrototypeOf$1=Object.setPrototypeOf||function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf$1(a,o)}function _objectWithoutPropertiesLoose$1(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,gt;for(gt=0;gt<tt.length;gt++)ct=tt[gt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _objectWithoutProperties(a,o){if(a==null)return{};var _e=_objectWithoutPropertiesLoose$1(a,o),tt,ct;if(Object.getOwnPropertySymbols){var gt=Object.getOwnPropertySymbols(a);for(ct=0;ct<gt.length;ct++)tt=gt[ct],!(o.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(a,tt)&&(_e[tt]=a[tt])}return _e}function _assertThisInitialized$1(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _possibleConstructorReturn(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(a)}function _slicedToArray(a,o){return _arrayWithHoles(a)||_iterableToArrayLimit(a,o)||_unsupportedIterableToArray(a,o)||_nonIterableRest()}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _iterableToArrayLimit(a,o){var _e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(_e!=null){var tt=[],ct=!0,gt=!1,rt,it;try{for(_e=_e.call(a);!(ct=(rt=_e.next()).done)&&(tt.push(rt.value),!(o&&tt.length===o));ct=!0);}catch(s){gt=!0,it=s}finally{try{!ct&&_e.return!=null&&_e.return()}finally{if(gt)throw it}}return tt}}function _unsupportedIterableToArray(a,o){if(a){if(typeof a=="string")return _arrayLikeToArray(a,o);var _e=Object.prototype.toString.call(a).slice(8,-1);if(_e==="Object"&&a.constructor&&(_e=a.constructor.name),_e==="Map"||_e==="Set")return Array.from(a);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(a,o)}}function _arrayLikeToArray(a,o){(o==null||o>a.length)&&(o=a.length);for(var _e=0,tt=new Array(o);_e<o;_e++)tt[_e]=a[_e];return tt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function(o){switch(o){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function(o){return setUa(o)},setDefaults=function(o){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return o||_e},getNavigatorInstance=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function(o){var _e=getNavigatorInstance();return _e&&_e.platform&&(_e.platform.indexOf(o)!==-1||_e.platform==="MacIntel"&&_e.maxTouchPoints>1&&!window.MSStream)},browserPayload=function(o,_e,tt,ct,gt){return{isBrowser:o,browserMajorVersion:setDefaults(_e.major),browserFullVersion:setDefaults(_e.version),browserName:setDefaults(_e.name),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(gt)}},mobilePayload=function(o,_e,tt,ct){return _objectSpread2({},o,{vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),os:setDefaults(tt.name),osVersion:setDefaults(tt.version),ua:setDefaults(ct)})},smartTvPayload=function(o,_e,tt,ct){return{isSmartTV:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},consolePayload=function(o,_e,tt,ct){return{isConsole:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},wearablePayload=function(o,_e,tt,ct){return{isWearable:o,engineName:setDefaults(_e.name),engineVersion:setDefaults(_e.version),osName:setDefaults(tt.name),osVersion:setDefaults(tt.version),userAgent:setDefaults(ct)}},embeddedPayload=function(o,_e,tt,ct,gt){return{isEmbedded:o,vendor:setDefaults(_e.vendor),model:setDefaults(_e.model),engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(ct.name),osVersion:setDefaults(ct.version),userAgent:setDefaults(gt)}};function deviceDetect(a){var o=a?parseUserAgent(a):UAHelper,_e=o.device,tt=o.browser,ct=o.engine,gt=o.os,rt=o.ua,it=checkDeviceType(_e.type),s=it.isBrowser,et=it.isMobile,nt=it.isTablet,at=it.isSmartTV,ht=it.isConsole,dt=it.isWearable,pt=it.isEmbedded;if(s)return browserPayload(s,tt,ct,gt,rt);if(at)return smartTvPayload(at,ct,gt,rt);if(ht)return consolePayload(ht,ct,gt,rt);if(et||nt)return mobilePayload(it,_e,gt,rt);if(dt)return wearablePayload(dt,ct,gt,rt);if(pt)return embeddedPayload(pt,_e,ct,gt,rt)}var isMobileType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile},isTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Tablet},isMobileAndTabletType=function(o){var _e=o.type;return _e===DeviceTypes.Mobile||_e===DeviceTypes.Tablet},isSmartTVType=function(o){var _e=o.type;return _e===DeviceTypes.SmartTv},isBrowserType=function(o){var _e=o.type;return _e===DeviceTypes.Browser},isWearableType=function(o){var _e=o.type;return _e===DeviceTypes.Wearable},isConsoleType=function(o){var _e=o.type;return _e===DeviceTypes.Console},isEmbeddedType=function(o){var _e=o.type;return _e===DeviceTypes.Embedded},getMobileVendor=function(o){var _e=o.vendor;return setDefaults(_e)},getMobileModel=function(o){var _e=o.model;return setDefaults(_e)},getDeviceType=function(o){var _e=o.type;return setDefaults(_e,"browser")},isAndroidType=function(o){var _e=o.name;return _e===OsTypes.Android},isWindowsType=function(o){var _e=o.name;return _e===OsTypes.Windows},isMacOsType=function(o){var _e=o.name;return _e===OsTypes.MAC_OS},isWinPhoneType=function(o){var _e=o.name;return _e===OsTypes.WindowsPhone},isIOSType=function(o){var _e=o.name;return _e===OsTypes.IOS},getOsVersion=function(o){var _e=o.version;return setDefaults(_e)},getOsName=function(o){var _e=o.name;return setDefaults(_e)},isChromeType=function(o){var _e=o.name;return _e===BrowserTypes.Chrome},isFirefoxType=function(o){var _e=o.name;return _e===BrowserTypes.Firefox},isChromiumType=function(o){var _e=o.name;return _e===BrowserTypes.Chromium},isEdgeType=function(o){var _e=o.name;return _e===BrowserTypes.Edge},isYandexType=function(o){var _e=o.name;return _e===BrowserTypes.Yandex},isSafariType=function(o){var _e=o.name;return _e===BrowserTypes.Safari||_e===BrowserTypes.MobileSafari},isMobileSafariType=function(o){var _e=o.name;return _e===BrowserTypes.MobileSafari},isOperaType=function(o){var _e=o.name;return _e===BrowserTypes.Opera},isIEType=function(o){var _e=o.name;return _e===BrowserTypes.InternetExplorer||_e===BrowserTypes.Ie},isMIUIType=function(o){var _e=o.name;return _e===BrowserTypes.MIUI},isSamsungBrowserType=function(o){var _e=o.name;return _e===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function(o){var _e=o.version;return setDefaults(_e)},getBrowserVersion=function(o){var _e=o.major;return setDefaults(_e)},getBrowserName=function(o){var _e=o.name;return setDefaults(_e)},getEngineName=function(o){var _e=o.name;return setDefaults(_e)},getEngineVersion=function(o){var _e=o.version;return setDefaults(_e)},isElectronType=function(){var o=getNavigatorInstance(),_e=o&&o.userAgent&&o.userAgent.toLowerCase();return typeof _e=="string"?/electron/.test(_e):!1},isEdgeChromiumType=function(o){return typeof o=="string"&&o.indexOf("Edg/")!==-1},getIOS13=function(){var o=getNavigatorInstance();return o&&(/iPad|iPhone|iPod/.test(o.platform)||o.platform==="MacIntel"&&o.maxTouchPoints>1)&&!window.MSStream},getIPad13=function(){return isIOS13Check("iPad")},getIphone13=function(){return isIOS13Check("iPhone")},getIPod13=function(){return isIOS13Check("iPod")},getUseragent=function(o){return setDefaults(o)};function buildSelectorsObject(a){var o=a||UAHelper,_e=o.device,tt=o.browser,ct=o.os,gt=o.engine,rt=o.ua;return{isSmartTV:isSmartTVType(_e),isConsole:isConsoleType(_e),isWearable:isWearableType(_e),isEmbedded:isEmbeddedType(_e),isMobileSafari:isMobileSafariType(tt)||getIPad13(),isChromium:isChromiumType(tt),isMobile:isMobileAndTabletType(_e)||getIPad13(),isMobileOnly:isMobileType(_e),isTablet:isTabletType(_e)||getIPad13(),isBrowser:isBrowserType(_e),isDesktop:isBrowserType(_e),isAndroid:isAndroidType(ct),isWinPhone:isWinPhoneType(ct),isIOS:isIOSType(ct)||getIPad13(),isChrome:isChromeType(tt),isFirefox:isFirefoxType(tt),isSafari:isSafariType(tt),isOpera:isOperaType(tt),isIE:isIEType(tt),osVersion:getOsVersion(ct),osName:getOsName(ct),fullBrowserVersion:getBrowserFullVersion(tt),browserVersion:getBrowserVersion(tt),browserName:getBrowserName(tt),mobileVendor:getMobileVendor(_e),mobileModel:getMobileModel(_e),engineName:getEngineName(gt),engineVersion:getEngineVersion(gt),getUA:getUseragent(rt),isEdge:isEdgeType(tt)||isEdgeChromiumType(rt),isYandex:isYandexType(tt),deviceType:getDeviceType(_e),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(rt),isLegacyEdge:isEdgeType(tt)&&!isEdgeChromiumType(rt),isWindows:isWindowsType(ct),isMacOs:isMacOsType(ct),isMIUI:isMIUIType(tt),isSamsungBrowser:isSamsungBrowserType(tt)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser$1=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function(o){if(!o||typeof o!="string"){console.error("No valid user agent string was provided");return}var _e=parseUserAgent(o),tt=_e.device,ct=_e.browser,gt=_e.os,rt=_e.engine,it=_e.ua;return buildSelectorsObject({device:tt,browser:ct,os:gt,engine:rt,ua:it})},AndroidView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isAndroid?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},BrowserView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isBrowser$1?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IEView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIE?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},IOSView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isIOS?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isMobile?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},TabletView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isTablet?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WinPhoneView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWinPhone?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},MobileOnlyView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},SmartTVView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isSmartTV?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},ConsoleView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isConsole?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},WearableView=function(o){var _e=o.renderWithFragment,tt=o.children,ct=_objectWithoutProperties(o,["renderWithFragment","children"]);return isWearable?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",ct,tt):null},CustomView=function(o){var _e=o.renderWithFragment,tt=o.children;o.viewClassName,o.style;var ct=o.condition,gt=_objectWithoutProperties(o,["renderWithFragment","children","viewClassName","style","condition"]);return ct?_e?React__default.createElement(React.Fragment,null,tt):React__default.createElement("div",gt,tt):null};function withOrientationChange(a){return function(o){_inherits(_e,o);function _e(tt){var ct;return _classCallCheck(this,_e),ct=_possibleConstructorReturn(this,_getPrototypeOf(_e).call(this,tt)),ct.isEventListenerAdded=!1,ct.handleOrientationChange=ct.handleOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onOrientationChange=ct.onOrientationChange.bind(_assertThisInitialized$1(ct)),ct.onPageLoad=ct.onPageLoad.bind(_assertThisInitialized$1(ct)),ct.state={isLandscape:!1,isPortrait:!1},ct}return _createClass(_e,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var ct=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:ct===0,isLandscape:ct===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(a,_extends$1({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),_e}(React__default.Component)}function useMobileOrientation(){var a=React.useState(function(){var gt=window.innerWidth>window.innerHeight?90:0;return{isPortrait:gt===0,isLandscape:gt===90,orientation:gt===0?"portrait":"landscape"}}),o=_slicedToArray(a,2),_e=o[0],tt=o[1],ct=React.useCallback(function(){var gt=window.innerWidth>window.innerHeight?90:0,rt={isPortrait:gt===0,isLandscape:gt===90,orientation:gt===0?"portrait":"landscape"};_e.orientation!==rt.orientation&&tt(rt)},[_e.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(ct(),window.addEventListener("load",ct,!1),window.addEventListener("resize",ct,!1)),function(){window.removeEventListener("resize",ct,!1),window.removeEventListener("load",ct,!1)}},[ct]),_e}function useDeviceData(a){var o=a||window.navigator.userAgent;return parseUserAgent(o)}function useDeviceSelectors(a){var o=a||window.navigator.userAgent,_e=useDeviceData(o),tt=buildSelectorsObject(_e);return[tt,_e]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser$1;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;var isMobile_1=lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;var uaParser={exports:{}};(function(a,o){(function(_e,tt){var ct="1.0.36",gt="",rt="?",it="function",s="undefined",et="object",nt="string",at="major",ht="model",dt="name",pt="type",lt="vendor",mt="version",ot="architecture",ut="console",ft="mobile",bt="tablet",vt="smarttv",yt="wearable",At="embedded",Nt=350,St="Amazon",wt="Apple",Mt="ASUS",Ht="BlackBerry",Ot="Browser",Dt="Chrome",Gt="Edge",nn="Firefox",zt="Google",Ft="Huawei",un="LG",vn="Microsoft",yn="Motorola",cn="Opera",gn="Samsung",Cn="Sharp",fn="Sony",Tn="Xiaomi",On="Zebra",Ln="Facebook",An="Chromium OS",Rn="Mac OS",In=function(_n,$n){var bn={};for(var wn in _n)$n[wn]&&$n[wn].length%2===0?bn[wn]=$n[wn].concat(_n[wn]):bn[wn]=_n[wn];return bn},kn=function(_n){for(var $n={},bn=0;bn<_n.length;bn++)$n[_n[bn].toUpperCase()]=_n[bn];return $n},xn=function(_n,$n){return typeof _n===nt?Yn($n).indexOf(Yn(_n))!==-1:!1},Yn=function(_n){return _n.toLowerCase()},Un=function(_n){return typeof _n===nt?_n.replace(/[^\d\.]/g,gt).split(".")[0]:tt},jn=function(_n,$n){if(typeof _n===nt)return _n=_n.replace(/^\s\s*/,gt),typeof $n===s?_n:_n.substring(0,Nt)},Qn=function(_n,$n){for(var bn=0,wn,Yt,kt,st,Tt,Rt;bn<$n.length&&!Tt;){var Lt=$n[bn],Et=$n[bn+1];for(wn=Yt=0;wn<Lt.length&&!Tt&&Lt[wn];)if(Tt=Lt[wn++].exec(_n),Tt)for(kt=0;kt<Et.length;kt++)Rt=Tt[++Yt],st=Et[kt],typeof st===et&&st.length>0?st.length===2?typeof st[1]==it?this[st[0]]=st[1].call(this,Rt):this[st[0]]=st[1]:st.length===3?typeof st[1]===it&&!(st[1].exec&&st[1].test)?this[st[0]]=Rt?st[1].call(this,Rt,st[2]):tt:this[st[0]]=Rt?Rt.replace(st[1],st[2]):tt:st.length===4&&(this[st[0]]=Rt?st[3].call(this,Rt.replace(st[1],st[2])):tt):this[st]=Rt||tt;bn+=2}},on=function(_n,$n){for(var bn in $n)if(typeof $n[bn]===et&&$n[bn].length>0){for(var wn=0;wn<$n[bn].length;wn++)if(xn($n[bn][wn],_n))return bn===rt?tt:bn}else if(xn($n[bn],_n))return bn===rt?tt:bn;return _n},Hn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Fn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Vn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[mt,[dt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[mt,[dt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[dt,mt],[/opios[\/ ]+([\w\.]+)/i],[mt,[dt,cn+" Mini"]],[/\bopr\/([\w\.]+)/i],[mt,[dt,cn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[dt,mt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[mt,[dt,"UC"+Ot]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[mt,[dt,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[mt,[dt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[mt,[dt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[mt,[dt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[mt,[dt,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[dt,/(.+)/,"$1 Secure "+Ot],mt],[/\bfocus\/([\w\.]+)/i],[mt,[dt,nn+" Focus"]],[/\bopt\/([\w\.]+)/i],[mt,[dt,cn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[mt,[dt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[mt,[dt,"Dolphin"]],[/coast\/([\w\.]+)/i],[mt,[dt,cn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[mt,[dt,"MIUI "+Ot]],[/fxios\/([-\w\.]+)/i],[mt,[dt,nn]],[/\bqihu|(qi?ho?o?|360)browser/i],[[dt,"360 "+Ot]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[dt,/(.+)/,"$1 "+Ot],mt],[/(comodo_dragon)\/([\w\.]+)/i],[[dt,/_/g," "],mt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[dt,mt],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[dt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[dt,Ln],mt],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[dt,mt],[/\bgsa\/([\w\.]+) .*safari\//i],[mt,[dt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[mt,[dt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[mt,[dt,Dt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[dt,Dt+" WebView"],mt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[mt,[dt,"Android "+Ot]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[dt,mt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[mt,[dt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[mt,dt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[dt,[mt,on,Hn]],[/(webkit|khtml)\/([\w\.]+)/i],[dt,mt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[dt,"Netscape"],mt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[mt,[dt,nn+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[dt,mt],[/(cobalt)\/([\w\.]+)/i],[dt,[mt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ot,"amd64"]],[/(ia32(?=;))/i],[[ot,Yn]],[/((?:i[346]|x)86)[;\)]/i],[[ot,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ot,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ot,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ot,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ot,/ower/,gt,Yn]],[/(sun4\w)[;\)]/i],[[ot,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ot,Yn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ht,[lt,gn],[pt,bt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ht,[lt,gn],[pt,ft]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ht,[lt,wt],[pt,ft]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ht,[lt,wt],[pt,bt]],[/(macintosh);/i],[ht,[lt,wt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ht,[lt,Cn],[pt,ft]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ht,[lt,Ft],[pt,bt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ht,[lt,Ft],[pt,ft]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ht,/_/g," "],[lt,Tn],[pt,ft]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ht,/_/g," "],[lt,Tn],[pt,bt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ht,[lt,"OPPO"],[pt,ft]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ht,[lt,"Vivo"],[pt,ft]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[ht,[lt,"Realme"],[pt,ft]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ht,[lt,yn],[pt,ft]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ht,[lt,yn],[pt,bt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ht,[lt,un],[pt,bt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ht,[lt,un],[pt,ft]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ht,[lt,"Lenovo"],[pt,bt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ht,/_/g," "],[lt,"Nokia"],[pt,ft]],[/(pixel c)\b/i],[ht,[lt,zt],[pt,bt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ht,[lt,zt],[pt,ft]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ht,[lt,fn],[pt,ft]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ht,"Xperia Tablet"],[lt,fn],[pt,bt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ht,[lt,"OnePlus"],[pt,ft]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ht,[lt,St],[pt,bt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ht,/(.+)/g,"Fire Phone $1"],[lt,St],[pt,ft]],[/(playbook);[-\w\),; ]+(rim)/i],[ht,lt,[pt,bt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ht,[lt,Ht],[pt,ft]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ht,[lt,Mt],[pt,bt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ht,[lt,Mt],[pt,ft]],[/(nexus 9)/i],[ht,[lt,"HTC"],[pt,bt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[lt,[ht,/_/g," "],[pt,ft]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ht,[lt,"Acer"],[pt,bt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ht,[lt,"Meizu"],[pt,ft]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[lt,ht,[pt,ft]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[lt,ht,[pt,bt]],[/(surface duo)/i],[ht,[lt,vn],[pt,bt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ht,[lt,"Fairphone"],[pt,ft]],[/(u304aa)/i],[ht,[lt,"AT&T"],[pt,ft]],[/\bsie-(\w*)/i],[ht,[lt,"Siemens"],[pt,ft]],[/\b(rct\w+) b/i],[ht,[lt,"RCA"],[pt,bt]],[/\b(venue[\d ]{2,7}) b/i],[ht,[lt,"Dell"],[pt,bt]],[/\b(q(?:mv|ta)\w+) b/i],[ht,[lt,"Verizon"],[pt,bt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[ht,[lt,"Barnes & Noble"],[pt,bt]],[/\b(tm\d{3}\w+) b/i],[ht,[lt,"NuVision"],[pt,bt]],[/\b(k88) b/i],[ht,[lt,"ZTE"],[pt,bt]],[/\b(nx\d{3}j) b/i],[ht,[lt,"ZTE"],[pt,ft]],[/\b(gen\d{3}) b.+49h/i],[ht,[lt,"Swiss"],[pt,ft]],[/\b(zur\d{3}) b/i],[ht,[lt,"Swiss"],[pt,bt]],[/\b((zeki)?tb.*\b) b/i],[ht,[lt,"Zeki"],[pt,bt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[lt,"Dragon Touch"],ht,[pt,bt]],[/\b(ns-?\w{0,9}) b/i],[ht,[lt,"Insignia"],[pt,bt]],[/\b((nxa|next)-?\w{0,9}) b/i],[ht,[lt,"NextBook"],[pt,bt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[lt,"Voice"],ht,[pt,ft]],[/\b(lvtel\-)?(v1[12]) b/i],[[lt,"LvTel"],ht,[pt,ft]],[/\b(ph-1) /i],[ht,[lt,"Essential"],[pt,ft]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[ht,[lt,"Envizen"],[pt,bt]],[/\b(trio[-\w\. ]+) b/i],[ht,[lt,"MachSpeed"],[pt,bt]],[/\btu_(1491) b/i],[ht,[lt,"Rotor"],[pt,bt]],[/(shield[\w ]+) b/i],[ht,[lt,"Nvidia"],[pt,bt]],[/(sprint) (\w+)/i],[lt,ht,[pt,ft]],[/(kin\.[onetw]{3})/i],[[ht,/\./g," "],[lt,vn],[pt,ft]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ht,[lt,On],[pt,bt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ht,[lt,On],[pt,ft]],[/smart-tv.+(samsung)/i],[lt,[pt,vt]],[/hbbtv.+maple;(\d+)/i],[[ht,/^/,"SmartTV"],[lt,gn],[pt,vt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[lt,un],[pt,vt]],[/(apple) ?tv/i],[lt,[ht,wt+" TV"],[pt,vt]],[/crkey/i],[[ht,Dt+"cast"],[lt,zt],[pt,vt]],[/droid.+aft(\w+)( bui|\))/i],[ht,[lt,St],[pt,vt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ht,[lt,Cn],[pt,vt]],[/(bravia[\w ]+)( bui|\))/i],[ht,[lt,fn],[pt,vt]],[/(mitv-\w{5}) bui/i],[ht,[lt,Tn],[pt,vt]],[/Hbbtv.*(technisat) (.*);/i],[lt,ht,[pt,vt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[lt,jn],[ht,jn],[pt,vt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,vt]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[lt,ht,[pt,ut]],[/droid.+; (shield) bui/i],[ht,[lt,"Nvidia"],[pt,ut]],[/(playstation [345portablevi]+)/i],[ht,[lt,fn],[pt,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ht,[lt,vn],[pt,ut]],[/((pebble))app/i],[lt,ht,[pt,yt]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ht,[lt,wt],[pt,yt]],[/droid.+; (glass) \d/i],[ht,[lt,zt],[pt,yt]],[/droid.+; (wt63?0{2,3})\)/i],[ht,[lt,On],[pt,yt]],[/(quest( 2| pro)?)/i],[ht,[lt,Ln],[pt,yt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[lt,[pt,At]],[/(aeobc)\b/i],[ht,[lt,St],[pt,At]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[ht,[pt,ft]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ht,[pt,bt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,bt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[pt,ft]],[/(android[-\w\. ]{0,9});.+buil/i],[ht,[lt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[mt,[dt,Gt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[mt,[dt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[dt,mt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[mt,dt]],os:[[/microsoft (windows) (vista|xp)/i],[dt,mt],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[dt,[mt,on,Fn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[dt,"Windows"],[mt,on,Fn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[mt,/_/g,"."],[dt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[dt,Rn],[mt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[mt,dt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[dt,mt],[/\(bb(10);/i],[mt,[dt,Ht]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[mt,[dt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[mt,[dt,nn+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[mt,[dt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[mt,[dt,"watchOS"]],[/crkey\/([\d\.]+)/i],[mt,[dt,Dt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[dt,An],mt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[dt,mt],[/(sunos) ?([\w\.\d]*)/i],[[dt,"Solaris"],mt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[dt,mt]]},Bn=function(_n,$n){if(typeof _n===et&&($n=_n,_n=tt),!(this instanceof Bn))return new Bn(_n,$n).getResult();var bn=typeof _e!==s&&_e.navigator?_e.navigator:tt,wn=_n||(bn&&bn.userAgent?bn.userAgent:gt),Yt=bn&&bn.userAgentData?bn.userAgentData:tt,kt=$n?In(Vn,$n):Vn,st=bn&&bn.userAgent==wn;return this.getBrowser=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.browser),Tt[at]=Un(Tt[mt]),st&&bn&&bn.brave&&typeof bn.brave.isBrave==it&&(Tt[dt]="Brave"),Tt},this.getCPU=function(){var Tt={};return Tt[ot]=tt,Qn.call(Tt,wn,kt.cpu),Tt},this.getDevice=function(){var Tt={};return Tt[lt]=tt,Tt[ht]=tt,Tt[pt]=tt,Qn.call(Tt,wn,kt.device),st&&!Tt[pt]&&Yt&&Yt.mobile&&(Tt[pt]=ft),st&&Tt[ht]=="Macintosh"&&bn&&typeof bn.standalone!==s&&bn.maxTouchPoints&&bn.maxTouchPoints>2&&(Tt[ht]="iPad",Tt[pt]=bt),Tt},this.getEngine=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.engine),Tt},this.getOS=function(){var Tt={};return Tt[dt]=tt,Tt[mt]=tt,Qn.call(Tt,wn,kt.os),st&&!Tt[dt]&&Yt&&Yt.platform!="Unknown"&&(Tt[dt]=Yt.platform.replace(/chrome os/i,An).replace(/macos/i,Rn)),Tt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return wn},this.setUA=function(Tt){return wn=typeof Tt===nt&&Tt.length>Nt?jn(Tt,Nt):Tt,this},this.setUA(wn),this};Bn.VERSION=ct,Bn.BROWSER=kn([dt,mt,at]),Bn.CPU=kn([ot]),Bn.DEVICE=kn([ht,lt,pt,ut,ft,vt,bt,yt,At]),Bn.ENGINE=Bn.OS=kn([dt,mt]),a.exports&&(o=a.exports=Bn),o.UAParser=Bn;var qn=typeof _e!==s&&(_e.jQuery||_e.Zepto);if(qn&&!qn.ua){var Gn=new Bn;qn.ua=Gn.getResult(),qn.ua.get=function(){return Gn.getUA()},qn.ua.set=function(_n){Gn.setUA(_n);var $n=Gn.getResult();for(var bn in $n)qn.ua[bn]=$n[bn]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports,base64={exports:{}};/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */base64.exports;(function(a,o){(function(_e){var tt=o,ct=a&&a.exports==tt&&a,gt=typeof commonjsGlobal=="object"&&commonjsGlobal;(gt.global===gt||gt.window===gt)&&(_e=gt);var rt=function(pt){this.message=pt};rt.prototype=new Error,rt.prototype.name="InvalidCharacterError";var it=function(pt){throw new rt(pt)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=/[\t\n\f\r ]/g,nt=function(pt){pt=String(pt).replace(et,"");var lt=pt.length;lt%4==0&&(pt=pt.replace(/==?$/,""),lt=pt.length),(lt%4==1||/[^+a-zA-Z0-9/]/.test(pt))&&it("Invalid character: the string to be decoded is not correctly encoded.");for(var mt=0,ot,ut,ft="",bt=-1;++bt<lt;)ut=s.indexOf(pt.charAt(bt)),ot=mt%4?ot*64+ut:ut,mt++%4&&(ft+=String.fromCharCode(255&ot>>(-2*mt&6)));return ft},at=function(pt){pt=String(pt),/[^\0-\xFF]/.test(pt)&&it("The string to be encoded contains characters outside of the Latin1 range.");for(var lt=pt.length%3,mt="",ot=-1,ut,ft,bt,vt,yt=pt.length-lt;++ot<yt;)ut=pt.charCodeAt(ot)<<16,ft=pt.charCodeAt(++ot)<<8,bt=pt.charCodeAt(++ot),vt=ut+ft+bt,mt+=s.charAt(vt>>18&63)+s.charAt(vt>>12&63)+s.charAt(vt>>6&63)+s.charAt(vt&63);return lt==2?(ut=pt.charCodeAt(ot)<<8,ft=pt.charCodeAt(++ot),vt=ut+ft,mt+=s.charAt(vt>>10)+s.charAt(vt>>4&63)+s.charAt(vt<<2&63)+"="):lt==1&&(vt=pt.charCodeAt(ot),mt+=s.charAt(vt>>2)+s.charAt(vt<<4&63)+"=="),mt},ht={encode:at,decode:nt,version:"1.0.0"};if(tt&&!tt.nodeType)if(ct)ct.exports=ht;else for(var dt in ht)ht.hasOwnProperty(dt)&&(tt[dt]=ht[dt]);else _e.base64=ht})(commonjsGlobal)})(base64,base64.exports);var base64Exports=base64.exports;function _objectWithoutPropertiesLoose(a,o){if(a==null)return{};var _e={},tt=Object.keys(a),ct,gt;for(gt=0;gt<tt.length;gt++)ct=tt[gt],!(o.indexOf(ct)>=0)&&(_e[ct]=a[ct]);return _e}function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var _e=arguments[o];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(a[tt]=_e[tt])}return a},_extends.apply(this,arguments)}function r$2(a){var o,_e,tt="";if(typeof a=="string"||typeof a=="number")tt+=a;else if(typeof a=="object")if(Array.isArray(a))for(o=0;o<a.length;o++)a[o]&&(_e=r$2(a[o]))&&(tt&&(tt+=" "),tt+=_e);else for(o in a)a[o]&&(tt&&(tt+=" "),tt+=o);return tt}function clsx(){for(var a,o,_e=0,tt="";_e<arguments.length;)(a=arguments[_e++])&&(o=r$2(a))&&(tt&&(tt+=" "),tt+=o);return tt}function isPlainObject(a){return a!==null&&typeof a=="object"&&a.constructor===Object}function deepClone(a){if(!isPlainObject(a))return a;const o={};return Object.keys(a).forEach(_e=>{o[_e]=deepClone(a[_e])}),o}function deepmerge(a,o,_e={clone:!0}){const tt=_e.clone?_extends({},a):a;return isPlainObject(a)&&isPlainObject(o)&&Object.keys(o).forEach(ct=>{ct!=="__proto__"&&(isPlainObject(o[ct])&&ct in a&&isPlainObject(a[ct])?tt[ct]=deepmerge(a[ct],o[ct],_e):_e.clone?tt[ct]=isPlainObject(o[ct])?deepClone(o[ct]):o[ct]:tt[ct]=o[ct])}),tt}function formatMuiErrorMessage(a){let o="https://mui.com/production-error/?code="+a;for(let _e=1;_e<arguments.length;_e+=1)o+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified MUI error #"+a+"; visit "+o+" for the full message."}var reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$3=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case b$2:switch(a=a.type,a){case d$3:case f$1:case e$1:case m$1:case n$1:return a;default:switch(a=a&&a.$$typeof,a){case k$2:case h$1:case l$1:case q$2:case p$1:case g$2:return a;default:return o}}case c$1:return o}}}reactIs_production_min$1.ContextConsumer=h$1;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$2;reactIs_production_min$1.ForwardRef=l$1;reactIs_production_min$1.Fragment=d$3;reactIs_production_min$1.Lazy=q$2;reactIs_production_min$1.Memo=p$1;reactIs_production_min$1.Portal=c$1;reactIs_production_min$1.Profiler=f$1;reactIs_production_min$1.StrictMode=e$1;reactIs_production_min$1.Suspense=m$1;reactIs_production_min$1.SuspenseList=n$1;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(a){return v$1(a)===h$1};reactIs_production_min$1.isContextProvider=function(a){return v$1(a)===g$2};reactIs_production_min$1.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===b$2};reactIs_production_min$1.isForwardRef=function(a){return v$1(a)===l$1};reactIs_production_min$1.isFragment=function(a){return v$1(a)===d$3};reactIs_production_min$1.isLazy=function(a){return v$1(a)===q$2};reactIs_production_min$1.isMemo=function(a){return v$1(a)===p$1};reactIs_production_min$1.isPortal=function(a){return v$1(a)===c$1};reactIs_production_min$1.isProfiler=function(a){return v$1(a)===f$1};reactIs_production_min$1.isStrictMode=function(a){return v$1(a)===e$1};reactIs_production_min$1.isSuspense=function(a){return v$1(a)===m$1};reactIs_production_min$1.isSuspenseList=function(a){return v$1(a)===n$1};reactIs_production_min$1.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===d$3||a===f$1||a===e$1||a===m$1||a===n$1||a===t$1||typeof a=="object"&&a!==null&&(a.$$typeof===q$2||a.$$typeof===p$1||a.$$typeof===g$2||a.$$typeof===h$1||a.$$typeof===l$1||a.$$typeof===u$1||a.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$1;function capitalize(a){if(typeof a!="string")throw new Error(formatMuiErrorMessage(7));return a.charAt(0).toUpperCase()+a.slice(1)}function createChainedFunction(...a){return a.reduce((o,_e)=>_e==null?o:function(...ct){o.apply(this,ct),_e.apply(this,ct)},()=>{})}function debounce$1(a,o=166){let _e;function tt(...ct){const gt=()=>{a.apply(this,ct)};clearTimeout(_e),_e=setTimeout(gt,o)}return tt.clear=()=>{clearTimeout(_e)},tt}function ownerDocument(a){return a&&a.ownerDocument||document}function ownerWindow(a){return ownerDocument(a).defaultView||window}function setRef(a,o){typeof a=="function"?a(o):a&&(a.current=o)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(a){const[o,_e]=reactExports.useState(a),tt=a||o;return reactExports.useEffect(()=>{o==null&&(globalId+=1,_e(`mui-${globalId}`))},[o]),tt}const maybeReactUseId=React$2["useId".toString()];function useId(a){if(maybeReactUseId!==void 0){const o=maybeReactUseId();return a??o}return useGlobalId(a)}function useControlled({controlled:a,default:o,name:_e,state:tt="value"}){const{current:ct}=reactExports.useRef(a!==void 0),[gt,rt]=reactExports.useState(o),it=ct?a:gt,s=reactExports.useCallback(et=>{ct||rt(et)},[]);return[it,s]}function useEventCallback(a){const o=reactExports.useRef(a);return useEnhancedEffect$1(()=>{o.current=a}),reactExports.useCallback((..._e)=>(0,o.current)(..._e),[])}function useForkRef(...a){return reactExports.useMemo(()=>a.every(o=>o==null)?null:o=>{a.forEach(_e=>{setRef(_e,o)})},a)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(a){const{type:o,tagName:_e}=a;return!!(_e==="INPUT"&&inputTypesWhitelist[o]&&!a.readOnly||_e==="TEXTAREA"&&!a.readOnly||a.isContentEditable)}function handleKeyDown(a){a.metaKey||a.altKey||a.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(a){a.addEventListener("keydown",handleKeyDown,!0),a.addEventListener("mousedown",handlePointerDown,!0),a.addEventListener("pointerdown",handlePointerDown,!0),a.addEventListener("touchstart",handlePointerDown,!0),a.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(a){const{target:o}=a;try{return o.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(o)}function useIsFocusVisible(){const a=reactExports.useCallback(ct=>{ct!=null&&prepare(ct.ownerDocument)},[]),o=reactExports.useRef(!1);function _e(){return o.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),o.current=!1,!0):!1}function tt(ct){return isFocusVisible(ct)?(o.current=!0,!0):!1}return{isFocusVisibleRef:o,onFocus:tt,onBlur:_e,ref:a}}function getScrollbarSize(a){const o=a.documentElement.clientWidth;return Math.abs(window.innerWidth-o)}function resolveProps(a,o){const _e=_extends({},o);return Object.keys(a).forEach(tt=>{if(tt.toString().match(/^(components|slots)$/))_e[tt]=_extends({},a[tt],_e[tt]);else if(tt.toString().match(/^(componentsProps|slotProps)$/)){const ct=a[tt]||{},gt=o[tt];_e[tt]={},!gt||!Object.keys(gt)?_e[tt]=ct:!ct||!Object.keys(ct)?_e[tt]=gt:(_e[tt]=_extends({},gt),Object.keys(ct).forEach(rt=>{_e[tt][rt]=resolveProps(ct[rt],gt[rt])}))}else _e[tt]===void 0&&(_e[tt]=a[tt])}),_e}function composeClasses(a,o,_e=void 0){const tt={};return Object.keys(a).forEach(ct=>{tt[ct]=a[ct].reduce((gt,rt)=>{if(rt){const it=o(rt);it!==""&&gt.push(it),_e&&_e[rt]&&gt.push(_e[rt])}return gt},[]).join(" ")}),tt}const defaultGenerator=a=>a,createClassNameGenerator=()=>{let a=defaultGenerator;return{configure(o){a=o},generate(o){return a(o)},reset(){a=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(a,o,_e="Mui"){const tt=globalStateClassesMapping[o];return tt?`${_e}-${tt}`:`${ClassNameGenerator$1.generate(a)}-${o}`}function generateUtilityClasses(a,o,_e="Mui"){const tt={};return o.forEach(ct=>{tt[ct]=generateUtilityClass(a,ct,_e)}),tt}function memoize$1(a){var o=Object.create(null);return function(_e){return o[_e]===void 0&&(o[_e]=a(_e)),o[_e]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(a){return reactPropsRegex.test(a)||a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)<91});function sheetForTag(a){if(a.sheet)return a.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===a)return document.styleSheets[o]}function createStyleElement(a){var o=document.createElement("style");return o.setAttribute("data-emotion",a.key),a.nonce!==void 0&&o.setAttribute("nonce",a.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function a(_e){var tt=this;this._insertTag=function(ct){var gt;tt.tags.length===0?tt.insertionPoint?gt=tt.insertionPoint.nextSibling:tt.prepend?gt=tt.container.firstChild:gt=tt.before:gt=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(ct,gt),tt.tags.push(ct)},this.isSpeedy=_e.speedy===void 0?!0:_e.speedy,this.tags=[],this.ctr=0,this.nonce=_e.nonce,this.key=_e.key,this.container=_e.container,this.prepend=_e.prepend,this.insertionPoint=_e.insertionPoint,this.before=null}var o=a.prototype;return o.hydrate=function(tt){tt.forEach(this._insertTag)},o.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var ct=this.tags[this.tags.length-1];if(this.isSpeedy){var gt=sheetForTag(ct);try{gt.insertRule(tt,gt.cssRules.length)}catch{}}else ct.appendChild(document.createTextNode(tt));this.ctr++},o.flush=function(){this.tags.forEach(function(tt){return tt.parentNode&&tt.parentNode.removeChild(tt)}),this.tags=[],this.ctr=0},a}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(a,o){return charat(a,0)^45?(((o<<2^charat(a,0))<<2^charat(a,1))<<2^charat(a,2))<<2^charat(a,3):0}function trim(a){return a.trim()}function match(a,o){return(a=o.exec(a))?a[0]:a}function replace(a,o,_e){return a.replace(o,_e)}function indexof(a,o){return a.indexOf(o)}function charat(a,o){return a.charCodeAt(o)|0}function substr(a,o,_e){return a.slice(o,_e)}function strlen(a){return a.length}function sizeof(a){return a.length}function append(a,o){return o.push(a),a}function combine(a,o){return a.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(a,o,_e,tt,ct,gt,rt){return{value:a,root:o,parent:_e,type:tt,props:ct,children:gt,line,column,length:rt,return:""}}function copy(a,o){return assign(node("",null,null,"",null,null,0),a,{length:-a.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(a,o){return substr(characters,a,o)}function token(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(a){return line=column=1,length=strlen(characters=a),position=0,[]}function dealloc(a){return characters="",a}function delimit(a){return trim(slice(position-1,delimiter(a===91?a+2:a===40?a+1:a)))}function whitespace(a){for(;(character=peek())&&character<33;)next();return token(a)>2||token(character)>3?"":" "}function escaping(a,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(a,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(a){for(;next();)switch(character){case a:return position;case 34:case 39:a!==34&&a!==39&&delimiter(character);break;case 40:a===41&&delimiter(a);break;case 92:next();break}return position}function commenter(a,o){for(;next()&&a+character!==47+10;)if(a+character===42+42&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(a===47?a:next())}function identifier(a){for(;!token(peek());)next();return slice(a,position)}function compile(a){return dealloc(parse("",null,null,null,[""],a=alloc(a),0,[0],a))}function parse(a,o,_e,tt,ct,gt,rt,it,s){for(var et=0,nt=0,at=rt,ht=0,dt=0,pt=0,lt=1,mt=1,ot=1,ut=0,ft="",bt=ct,vt=gt,yt=tt,At=ft;mt;)switch(pt=ut,ut=next()){case 40:if(pt!=108&&charat(At,at-1)==58){indexof(At+=replace(delimit(ut),"&","&\f"),"&\f")!=-1&&(ot=-1);break}case 34:case 39:case 91:At+=delimit(ut);break;case 9:case 10:case 13:case 32:At+=whitespace(pt);break;case 92:At+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,_e),s);break;default:At+="/"}break;case 123*lt:it[et++]=strlen(At)*ot;case 125*lt:case 59:case 0:switch(ut){case 0:case 125:mt=0;case 59+nt:ot==-1&&(At=replace(At,/\f/g,"")),dt>0&&strlen(At)-at&&append(dt>32?declaration(At+";",tt,_e,at-1):declaration(replace(At," ","")+";",tt,_e,at-2),s);break;case 59:At+=";";default:if(append(yt=ruleset(At,o,_e,et,nt,ct,it,ft,bt=[],vt=[],at),gt),ut===123)if(nt===0)parse(At,o,yt,yt,bt,gt,at,it,vt);else switch(ht===99&&charat(At,3)===110?100:ht){case 100:case 108:case 109:case 115:parse(a,yt,yt,tt&&append(ruleset(a,yt,yt,0,0,ct,it,ft,ct,bt=[],at),vt),ct,vt,at,it,tt?bt:vt);break;default:parse(At,yt,yt,yt,[""],vt,0,it,vt)}}et=nt=dt=0,lt=ot=1,ft=At="",at=rt;break;case 58:at=1+strlen(At),dt=pt;default:if(lt<1){if(ut==123)--lt;else if(ut==125&&lt++==0&&prev()==125)continue}switch(At+=from(ut),ut*lt){case 38:ot=nt>0?1:(At+="\f",-1);break;case 44:it[et++]=(strlen(At)-1)*ot,ot=1;break;case 64:peek()===45&&(At+=delimit(next())),ht=peek(),nt=at=strlen(ft=At+=identifier(caret())),ut++;break;case 45:pt===45&&strlen(At)==2&&(lt=0)}}return gt}function ruleset(a,o,_e,tt,ct,gt,rt,it,s,et,nt){for(var at=ct-1,ht=ct===0?gt:[""],dt=sizeof(ht),pt=0,lt=0,mt=0;pt<tt;++pt)for(var ot=0,ut=substr(a,at+1,at=abs(lt=rt[pt])),ft=a;ot<dt;++ot)(ft=trim(lt>0?ht[ot]+" "+ut:replace(ut,/&\f/g,ht[ot])))&&(s[mt++]=ft);return node(a,o,_e,ct===0?RULESET:it,s,et,nt)}function comment(a,o,_e){return node(a,o,_e,COMMENT,from(char()),substr(a,2,-2),0)}function declaration(a,o,_e,tt){return node(a,o,_e,DECLARATION,substr(a,0,tt),substr(a,tt+1,-1),tt)}function serialize(a,o){for(var _e="",tt=sizeof(a),ct=0;ct<tt;ct++)_e+=o(a[ct],ct,a,o)||"";return _e}function stringify(a,o,_e,tt){switch(a.type){case LAYER:if(a.children.length)break;case IMPORT:case DECLARATION:return a.return=a.return||a.value;case COMMENT:return"";case KEYFRAMES:return a.return=a.value+"{"+serialize(a.children,tt)+"}";case RULESET:a.value=a.props.join(",")}return strlen(_e=serialize(a.children,tt))?a.return=a.value+"{"+_e+"}":""}function middleware(a){var o=sizeof(a);return function(_e,tt,ct,gt){for(var rt="",it=0;it<o;it++)rt+=a[it](_e,tt,ct,gt)||"";return rt}}function rulesheet(a){return function(o){o.root||(o=o.return)&&a(o)}}var identifierWithPointTracking=function(o,_e,tt){for(var ct=0,gt=0;ct=gt,gt=peek(),ct===38&&gt===12&&(_e[tt]=1),!token(gt);)next();return slice(o,position)},toRules=function(o,_e){var tt=-1,ct=44;do switch(token(ct)){case 0:ct===38&&peek()===12&&(_e[tt]=1),o[tt]+=identifierWithPointTracking(position-1,_e,tt);break;case 2:o[tt]+=delimit(ct);break;case 4:if(ct===44){o[++tt]=peek()===58?"&\f":"",_e[tt]=o[tt].length;break}default:o[tt]+=from(ct)}while(ct=next());return o},getRules=function(o,_e){return dealloc(toRules(alloc(o),_e))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var _e=o.value,tt=o.parent,ct=o.column===tt.column&&o.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(o.props.length===1&&_e.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!ct){fixedElements.set(o,!0);for(var gt=[],rt=getRules(_e,gt),it=tt.props,s=0,et=0;s<rt.length;s++)for(var nt=0;nt<it.length;nt++,et++)o.props[et]=gt[s]?rt[s].replace(/&\f/g,it[nt]):it[nt]+" "+rt[s]}}},removeLabel=function(o){if(o.type==="decl"){var _e=o.value;_e.charCodeAt(0)===108&&_e.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(a,o){switch(hash$2(a,o)){case 5103:return WEBKIT+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+a+MOZ+a+MS+a+a;case 6828:case 4268:return WEBKIT+a+MS+a+a;case 6165:return WEBKIT+a+MS+"flex-"+a+a;case 5187:return WEBKIT+a+replace(a,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+a;case 5443:return WEBKIT+a+MS+"flex-item-"+replace(a,/flex-|-self/,"")+a;case 4675:return WEBKIT+a+MS+"flex-line-pack"+replace(a,/align-content|flex-|-self/,"")+a;case 5548:return WEBKIT+a+MS+replace(a,"shrink","negative")+a;case 5292:return WEBKIT+a+MS+replace(a,"basis","preferred-size")+a;case 6060:return WEBKIT+"box-"+replace(a,"-grow","")+WEBKIT+a+MS+replace(a,"grow","positive")+a;case 4554:return WEBKIT+replace(a,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+a;case 6187:return replace(replace(replace(a,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),a,"")+a;case 5495:case 3959:return replace(a,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(a,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+a+a;case 4095:case 3583:case 4068:case 2532:return replace(a,/(.+)-inline(.+)/,WEBKIT+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(a)-1-o>6)switch(charat(a,o+1)){case 109:if(charat(a,o+4)!==45)break;case 102:return replace(a,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(a,o+3)==108?"$3":"$2-$3"))+a;case 115:return~indexof(a,"stretch")?prefix(replace(a,"stretch","fill-available"),o)+a:a}break;case 4949:if(charat(a,o+1)!==115)break;case 6444:switch(charat(a,strlen(a)-3-(~indexof(a,"!important")&&10))){case 107:return replace(a,":",":"+WEBKIT)+a;case 101:return replace(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(a,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+a}break;case 5936:switch(charat(a,o+11)){case 114:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return WEBKIT+a+MS+replace(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return WEBKIT+a+MS+a+a}return a}var prefixer=function(o,_e,tt,ct){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],ct);case RULESET:if(o.length)return combine(o.props,function(gt){switch(match(gt,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(gt,/:(read-\w+)/,":"+MOZ+"$1")]})],ct);case"::placeholder":return serialize([copy(o,{props:[replace(gt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(gt,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(gt,/:(plac\w+)/,MS+"input-$1")]})],ct)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var _e=o.key;if(_e==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(lt){var mt=lt.getAttribute("data-emotion");mt.indexOf(" ")!==-1&&(document.head.appendChild(lt),lt.setAttribute("data-s",""))})}var ct=o.stylisPlugins||defaultStylisPlugins,gt={},rt,it=[];rt=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+_e+' "]'),function(lt){for(var mt=lt.getAttribute("data-emotion").split(" "),ot=1;ot<mt.length;ot++)gt[mt[ot]]=!0;it.push(lt)});var s,et=[compat,removeLabel];{var nt,at=[stringify,rulesheet(function(lt){nt.insert(lt)})],ht=middleware(et.concat(ct,at)),dt=function(mt){return serialize(compile(mt),ht)};s=function(mt,ot,ut,ft){nt=ut,dt(mt?mt+"{"+ot.styles+"}":ot.styles),ft&&(pt.inserted[ot.name]=!0)}}var pt={key:_e,sheet:new StyleSheet({key:_e,container:rt,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:gt,registered:{},insert:s};return pt.sheet.hydrate(it),pt},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c=b$1?Symbol.for("react.element"):60103,d$2=b$1?Symbol.for("react.portal"):60106,e=b$1?Symbol.for("react.fragment"):60107,f=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l=b$1?Symbol.for("react.async_mode"):60111,m=b$1?Symbol.for("react.concurrent_mode"):60111,n=b$1?Symbol.for("react.forward_ref"):60112,p=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y=b$1?Symbol.for("react.scope"):60119;function z$1(a){if(typeof a=="object"&&a!==null){var o=a.$$typeof;switch(o){case c:switch(a=a.type,a){case l:case m:case e:case g$1:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k$1:case n:case t:case r$1:case h:return a;default:return o}}case d$2:return o}}}function A$2(a){return z$1(a)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d$2;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(a){return A$2(a)||z$1(a)===l};reactIs_production_min.isConcurrentMode=A$2;reactIs_production_min.isContextConsumer=function(a){return z$1(a)===k$1};reactIs_production_min.isContextProvider=function(a){return z$1(a)===h};reactIs_production_min.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===c};reactIs_production_min.isForwardRef=function(a){return z$1(a)===n};reactIs_production_min.isFragment=function(a){return z$1(a)===e};reactIs_production_min.isLazy=function(a){return z$1(a)===t};reactIs_production_min.isMemo=function(a){return z$1(a)===r$1};reactIs_production_min.isPortal=function(a){return z$1(a)===d$2};reactIs_production_min.isProfiler=function(a){return z$1(a)===g$1};reactIs_production_min.isStrictMode=function(a){return z$1(a)===f};reactIs_production_min.isSuspense=function(a){return z$1(a)===p};reactIs_production_min.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===e||a===m||a===g$1||a===f||a===p||a===q$1||typeof a=="object"&&a!==null&&(a.$$typeof===t||a.$$typeof===r$1||a.$$typeof===h||a.$$typeof===k$1||a.$$typeof===n||a.$$typeof===w$1||a.$$typeof===x$1||a.$$typeof===y||a.$$typeof===v)};reactIs_production_min.typeOf=z$1;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(a,o,_e){var tt="";return _e.split(" ").forEach(function(ct){a[ct]!==void 0?o.push(a[ct]+";"):tt+=ct+" "}),tt}var registerStyles=function(o,_e,tt){var ct=o.key+"-"+_e.name;(tt===!1||isBrowser===!1)&&o.registered[ct]===void 0&&(o.registered[ct]=_e.styles)},insertStyles=function(o,_e,tt){registerStyles(o,_e,tt);var ct=o.key+"-"+_e.name;if(o.inserted[_e.name]===void 0){var gt=_e;do o.insert(_e===gt?"."+ct:"",gt,o.sheet,!0),gt=gt.next;while(gt!==void 0)}};function murmur2(a){for(var o=0,_e,tt=0,ct=a.length;ct>=4;++tt,ct-=4)_e=a.charCodeAt(tt)&255|(a.charCodeAt(++tt)&255)<<8|(a.charCodeAt(++tt)&255)<<16|(a.charCodeAt(++tt)&255)<<24,_e=(_e&65535)*1540483477+((_e>>>16)*59797<<16),_e^=_e>>>24,o=(_e&65535)*1540483477+((_e>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(ct){case 3:o^=(a.charCodeAt(tt+2)&255)<<16;case 2:o^=(a.charCodeAt(tt+1)&255)<<8;case 1:o^=a.charCodeAt(tt)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(a){return isCustomProperty(a)?a:a.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,_e){switch(o){case"animation":case"animationName":if(typeof _e=="string")return _e.replace(animationRegex,function(tt,ct,gt){return cursor={name:ct,styles:gt,next:cursor},ct})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof _e=="number"&&_e!==0?_e+"px":_e},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(a,o,_e){if(_e==null)return"";if(_e.__emotion_styles!==void 0)return _e;switch(typeof _e){case"boolean":return"";case"object":{if(_e.anim===1)return cursor={name:_e.name,styles:_e.styles,next:cursor},_e.name;if(_e.styles!==void 0){var tt=_e.next;if(tt!==void 0)for(;tt!==void 0;)cursor={name:tt.name,styles:tt.styles,next:cursor},tt=tt.next;var ct=_e.styles+";";return ct}return createStringFromObject(a,o,_e)}case"function":{if(a!==void 0){var gt=cursor,rt=_e(a);return cursor=gt,handleInterpolation(a,o,rt)}break}}if(o==null)return _e;var it=o[_e];return it!==void 0?it:_e}function createStringFromObject(a,o,_e){var tt="";if(Array.isArray(_e))for(var ct=0;ct<_e.length;ct++)tt+=handleInterpolation(a,o,_e[ct])+";";else for(var gt in _e){var rt=_e[gt];if(typeof rt!="object")o!=null&&o[rt]!==void 0?tt+=gt+"{"+o[rt]+"}":isProcessableValue(rt)&&(tt+=processStyleName(gt)+":"+processStyleValue(gt,rt)+";");else if(Array.isArray(rt)&&typeof rt[0]=="string"&&(o==null||o[rt[0]]===void 0))for(var it=0;it<rt.length;it++)isProcessableValue(rt[it])&&(tt+=processStyleName(gt)+":"+processStyleValue(gt,rt[it])+";");else{var s=handleInterpolation(a,o,rt);switch(gt){case"animation":case"animationName":{tt+=processStyleName(gt)+":"+s+";";break}default:tt+=gt+"{"+s+"}"}}}return tt}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,_e,tt){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var ct=!0,gt="";cursor=void 0;var rt=o[0];rt==null||rt.raw===void 0?(ct=!1,gt+=handleInterpolation(tt,_e,rt)):gt+=rt[0];for(var it=1;it<o.length;it++)gt+=handleInterpolation(tt,_e,o[it]),ct&&(gt+=rt[it]);labelPattern.lastIndex=0;for(var s="",et;(et=labelPattern.exec(gt))!==null;)s+="-"+et[1];var nt=murmur2(gt)+s;return{name:nt,styles:gt,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$2["useInsertionEffect"]?React$2["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports.forwardRef(function(_e,tt){var ct=reactExports.useContext(EmotionCacheContext);return o(_e,ct,tt)})},ThemeContext$2=reactExports.createContext({}),Global=withEmotionCache(function(a,o){var _e=a.styles,tt=serializeStyles([_e],void 0,reactExports.useContext(ThemeContext$2)),ct=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var gt=o.key+"-global",rt=new o.sheet.constructor({key:gt,nonce:o.sheet.nonce,container:o.sheet.container,speedy:o.sheet.isSpeedy}),it=!1,s=document.querySelector('style[data-emotion="'+gt+" "+tt.name+'"]');return o.sheet.tags.length&&(rt.before=o.sheet.tags[0]),s!==null&&(it=!0,s.setAttribute("data-emotion",gt),rt.hydrate([s])),ct.current=[rt,it],function(){rt.flush()}},[o]),useInsertionEffectWithLayoutFallback(function(){var gt=ct.current,rt=gt[0],it=gt[1];if(it){gt[1]=!1;return}if(tt.next!==void 0&&insertStyles(o,tt.next,!0),rt.tags.length){var s=rt.tags[rt.tags.length-1].nextElementSibling;rt.before=s,rt.flush()}o.insert("",tt,rt,!1)},[o,tt.name]),null});function css(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return serializeStyles(o)}var keyframes=function(){var o=css.apply(void 0,arguments),_e="animation-"+o.name;return{name:_e,styles:"@keyframes "+_e+"{"+o.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,_e,tt){var ct;if(_e){var gt=_e.shouldForwardProp;ct=o.__emotion_forwardProp&&gt?function(rt){return o.__emotion_forwardProp(rt)&&gt(rt)}:gt}return typeof ct!="function"&&tt&&(ct=o.__emotion_forwardProp),ct},Insertion=function(o){var _e=o.cache,tt=o.serialized,ct=o.isStringTag;return registerStyles(_e,tt,ct),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(_e,tt,ct)}),null},createStyled$1=function a(o,_e){var tt=o.__emotion_real===o,ct=tt&&o.__emotion_base||o,gt,rt;_e!==void 0&&(gt=_e.label,rt=_e.target);var it=composeShouldForwardProps(o,_e,tt),s=it||getDefaultShouldForwardProp(ct),et=!s("as");return function(){var nt=arguments,at=tt&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(gt!==void 0&&at.push("label:"+gt+";"),nt[0]==null||nt[0].raw===void 0)at.push.apply(at,nt);else{at.push(nt[0][0]);for(var ht=nt.length,dt=1;dt<ht;dt++)at.push(nt[dt],nt[0][dt])}var pt=withEmotionCache(function(lt,mt,ot){var ut=et&&lt.as||ct,ft="",bt=[],vt=lt;if(lt.theme==null){vt={};for(var yt in lt)vt[yt]=lt[yt];vt.theme=reactExports.useContext(ThemeContext$2)}typeof lt.className=="string"?ft=getRegisteredStyles(mt.registered,bt,lt.className):lt.className!=null&&(ft=lt.className+" ");var At=serializeStyles(at.concat(bt),mt.registered,vt);ft+=mt.key+"-"+At.name,rt!==void 0&&(ft+=" "+rt);var Nt=et&&it===void 0?getDefaultShouldForwardProp(ut):s,St={};for(var wt in lt)et&&wt==="as"||Nt(wt)&&(St[wt]=lt[wt]);return St.className=ft,St.ref=ot,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:mt,serialized:At,isStringTag:typeof ut=="string"}),reactExports.createElement(ut,St))});return pt.displayName=gt!==void 0?gt:"Styled("+(typeof ct=="string"?ct:ct.displayName||ct.name||"Component")+")",pt.defaultProps=o.defaultProps,pt.__emotion_real=pt,pt.__emotion_base=ct,pt.__emotion_styles=at,pt.__emotion_forwardProp=it,Object.defineProperty(pt,"toString",{value:function(){return"."+rt}}),pt.withComponent=function(lt,mt){return a(lt,_extends({},_e,mt,{shouldForwardProp:composeShouldForwardProps(pt,mt,!0)})).apply(void 0,at)},pt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(a){newStyled[a]=newStyled(a)});function isEmpty$4(a){return a==null||Object.keys(a).length===0}function GlobalStyles$2(a){const{styles:o,defaultTheme:_e={}}=a,tt=typeof o=="function"?ct=>o(isEmpty$4(ct)?_e:ct):o;return jsxRuntimeExports.jsx(Global,{styles:tt})}/**
 * @mui/styled-engine v5.14.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$3(a,o){return newStyled(a,o)}const internal_processStyles=(a,o)=>{Array.isArray(a.__emotion_styles)&&(a.__emotion_styles=o(a.__emotion_styles))},_excluded$T=["values","unit","step"],sortBreakpointsValues=a=>{const o=Object.keys(a).map(_e=>({key:_e,val:a[_e]}))||[];return o.sort((_e,tt)=>_e.val-tt.val),o.reduce((_e,tt)=>_extends({},_e,{[tt.key]:tt.val}),{})};function createBreakpoints(a){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:_e="px",step:tt=5}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$T),gt=sortBreakpointsValues(o),rt=Object.keys(gt);function it(ht){return`@media (min-width:${typeof o[ht]=="number"?o[ht]:ht}${_e})`}function s(ht){return`@media (max-width:${(typeof o[ht]=="number"?o[ht]:ht)-tt/100}${_e})`}function et(ht,dt){const pt=rt.indexOf(dt);return`@media (min-width:${typeof o[ht]=="number"?o[ht]:ht}${_e}) and (max-width:${(pt!==-1&&typeof o[rt[pt]]=="number"?o[rt[pt]]:dt)-tt/100}${_e})`}function nt(ht){return rt.indexOf(ht)+1<rt.length?et(ht,rt[rt.indexOf(ht)+1]):it(ht)}function at(ht){const dt=rt.indexOf(ht);return dt===0?it(rt[1]):dt===rt.length-1?s(rt[dt]):et(ht,rt[rt.indexOf(ht)+1]).replace("@media","@media not all and")}return _extends({keys:rt,values:gt,up:it,down:s,between:et,only:nt,not:at,unit:_e},ct)}const shape={borderRadius:4},shape$1=shape;function merge(a,o){return o?deepmerge(a,o,{clone:!1}):a}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:a=>`@media (min-width:${values$1[a]}px)`};function handleBreakpoints(a,o,_e){const tt=a.theme||{};if(Array.isArray(o)){const gt=tt.breakpoints||defaultBreakpoints;return o.reduce((rt,it,s)=>(rt[gt.up(gt.keys[s])]=_e(o[s]),rt),{})}if(typeof o=="object"){const gt=tt.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((rt,it)=>{if(Object.keys(gt.values||values$1).indexOf(it)!==-1){const s=gt.up(it);rt[s]=_e(o[it],it)}else{const s=it;rt[s]=o[s]}return rt},{})}return _e(o)}function createEmptyBreakpointObject(a={}){var o;return((o=a.keys)==null?void 0:o.reduce((tt,ct)=>{const gt=a.up(ct);return tt[gt]={},tt},{}))||{}}function removeUnusedBreakpoints(a,o){return a.reduce((_e,tt)=>{const ct=_e[tt];return(!ct||Object.keys(ct).length===0)&&delete _e[tt],_e},o)}function mergeBreakpointsInOrder(a,...o){const _e=createEmptyBreakpointObject(a),tt=[_e,...o].reduce((ct,gt)=>deepmerge(ct,gt),{});return removeUnusedBreakpoints(Object.keys(_e),tt)}function computeBreakpointsBase(a,o){if(typeof a!="object")return{};const _e={},tt=Object.keys(o);return Array.isArray(a)?tt.forEach((ct,gt)=>{gt<a.length&&(_e[ct]=!0)}):tt.forEach(ct=>{a[ct]!=null&&(_e[ct]=!0)}),_e}function resolveBreakpointValues({values:a,breakpoints:o,base:_e}){const tt=_e||computeBreakpointsBase(a,o),ct=Object.keys(tt);if(ct.length===0)return a;let gt;return ct.reduce((rt,it,s)=>(Array.isArray(a)?(rt[it]=a[s]!=null?a[s]:a[gt],gt=s):typeof a=="object"?(rt[it]=a[it]!=null?a[it]:a[gt],gt=it):rt[it]=a,rt),{})}function getPath(a,o,_e=!0){if(!o||typeof o!="string")return null;if(a&&a.vars&&_e){const tt=`vars.${o}`.split(".").reduce((ct,gt)=>ct&&ct[gt]?ct[gt]:null,a);if(tt!=null)return tt}return o.split(".").reduce((tt,ct)=>tt&&tt[ct]!=null?tt[ct]:null,a)}function getStyleValue$1(a,o,_e,tt=_e){let ct;return typeof a=="function"?ct=a(_e):Array.isArray(a)?ct=a[_e]||tt:ct=getPath(a,_e)||tt,o&&(ct=o(ct,tt,a)),ct}function style$2(a){const{prop:o,cssProperty:_e=a.prop,themeKey:tt,transform:ct}=a,gt=rt=>{if(rt[o]==null)return null;const it=rt[o],s=rt.theme,et=getPath(s,tt)||{};return handleBreakpoints(rt,it,at=>{let ht=getStyleValue$1(et,ct,at);return at===ht&&typeof at=="string"&&(ht=getStyleValue$1(et,ct,`${o}${at==="default"?"":capitalize(at)}`,at)),_e===!1?ht:{[_e]:ht}})};return gt.propTypes={},gt.filterProps=[o],gt}function memoize(a){const o={};return _e=>(o[_e]===void 0&&(o[_e]=a(_e)),o[_e])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(a=>{if(a.length>2)if(aliases[a])a=aliases[a];else return[a];const[o,_e]=a.split(""),tt=properties[o],ct=directions[_e]||"";return Array.isArray(ct)?ct.map(gt=>tt+gt):[tt+ct]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(a,o,_e,tt){var ct;const gt=(ct=getPath(a,o,!1))!=null?ct:_e;return typeof gt=="number"?rt=>typeof rt=="string"?rt:gt*rt:Array.isArray(gt)?rt=>typeof rt=="string"?rt:gt[rt]:typeof gt=="function"?gt:()=>{}}function createUnarySpacing(a){return createUnaryUnit(a,"spacing",8)}function getValue(a,o){if(typeof o=="string"||o==null)return o;const _e=Math.abs(o),tt=a(_e);return o>=0?tt:typeof tt=="number"?-tt:`-${tt}`}function getStyleFromPropValue(a,o){return _e=>a.reduce((tt,ct)=>(tt[ct]=getValue(o,_e),tt),{})}function resolveCssProperty(a,o,_e,tt){if(o.indexOf(_e)===-1)return null;const ct=getCssProperties(_e),gt=getStyleFromPropValue(ct,tt),rt=a[_e];return handleBreakpoints(a,rt,gt)}function style$1(a,o){const _e=createUnarySpacing(a.theme);return Object.keys(a).map(tt=>resolveCssProperty(a,o,tt,_e)).reduce(merge,{})}function margin(a){return style$1(a,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(a){return style$1(a,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(a=8){if(a.mui)return a;const o=createUnarySpacing({spacing:a}),_e=(...tt)=>(tt.length===0?[1]:tt).map(gt=>{const rt=o(gt);return typeof rt=="number"?`${rt}px`:rt}).join(" ");return _e.mui=!0,_e}function compose(...a){const o=a.reduce((tt,ct)=>(ct.filterProps.forEach(gt=>{tt[gt]=ct}),tt),{}),_e=tt=>Object.keys(tt).reduce((ct,gt)=>o[gt]?merge(ct,o[gt](tt)):ct,{});return _e.propTypes={},_e.filterProps=a.reduce((tt,ct)=>tt.concat(ct.filterProps),[]),_e}function borderTransform(a){return typeof a!="number"?a:`${a}px solid`}const border=style$2({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$2({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$2({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$2({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$2({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$2({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$2({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$2({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$2({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$2({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=a=>{if(a.borderRadius!==void 0&&a.borderRadius!==null){const o=createUnaryUnit(a.theme,"shape.borderRadius",4),_e=tt=>({borderRadius:getValue(o,tt)});return handleBreakpoints(a,a.borderRadius,_e)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=a=>{if(a.gap!==void 0&&a.gap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({gap:getValue(o,tt)});return handleBreakpoints(a,a.gap,_e)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=a=>{if(a.columnGap!==void 0&&a.columnGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({columnGap:getValue(o,tt)});return handleBreakpoints(a,a.columnGap,_e)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=a=>{if(a.rowGap!==void 0&&a.rowGap!==null){const o=createUnaryUnit(a.theme,"spacing",8),_e=tt=>({rowGap:getValue(o,tt)});return handleBreakpoints(a,a.rowGap,_e)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(a,o){return o==="grey"?o:a}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(a){return a<=1&&a!==0?`${a*100}%`:a}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=a=>{if(a.maxWidth!==void 0&&a.maxWidth!==null){const o=_e=>{var tt,ct;const gt=((tt=a.theme)==null||(tt=tt.breakpoints)==null||(tt=tt.values)==null?void 0:tt[_e])||values$1[_e];return gt?((ct=a.theme)==null||(ct=ct.breakpoints)==null?void 0:ct.unit)!=="px"?{maxWidth:`${gt}${a.theme.breakpoints.unit}`}:{maxWidth:gt}:{maxWidth:sizingTransform(_e)}};return handleBreakpoints(a,a.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:a=>({"@media print":{display:a}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...a){const o=a.reduce((tt,ct)=>tt.concat(Object.keys(ct)),[]),_e=new Set(o);return a.every(tt=>_e.size===Object.keys(tt).length)}function callIfFn(a,o){return typeof a=="function"?a(o):a}function unstable_createStyleFunctionSx(){function a(_e,tt,ct,gt){const rt={[_e]:tt,theme:ct},it=gt[_e];if(!it)return{[_e]:tt};const{cssProperty:s=_e,themeKey:et,transform:nt,style:at}=it;if(tt==null)return null;if(et==="typography"&&tt==="inherit")return{[_e]:tt};const ht=getPath(ct,et)||{};return at?at(rt):handleBreakpoints(rt,tt,pt=>{let lt=getStyleValue$1(ht,nt,pt);return pt===lt&&typeof pt=="string"&&(lt=getStyleValue$1(ht,nt,`${_e}${pt==="default"?"":capitalize(pt)}`,pt)),s===!1?lt:{[s]:lt}})}function o(_e){var tt;const{sx:ct,theme:gt={}}=_e||{};if(!ct)return null;const rt=(tt=gt.unstable_sxConfig)!=null?tt:defaultSxConfig$1;function it(s){let et=s;if(typeof s=="function")et=s(gt);else if(typeof s!="object")return s;if(!et)return null;const nt=createEmptyBreakpointObject(gt.breakpoints),at=Object.keys(nt);let ht=nt;return Object.keys(et).forEach(dt=>{const pt=callIfFn(et[dt],gt);if(pt!=null)if(typeof pt=="object")if(rt[dt])ht=merge(ht,a(dt,pt,gt,rt));else{const lt=handleBreakpoints({theme:gt},pt,mt=>({[dt]:mt}));objectsHaveSameKeys(lt,pt)?ht[dt]=o({sx:pt,theme:gt}):ht=merge(ht,lt)}else ht=merge(ht,a(dt,pt,gt,rt))}),removeUnusedBreakpoints(at,ht)}return Array.isArray(ct)?ct.map(it):it(ct)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$S=["breakpoints","palette","spacing","shape"];function createTheme$1(a={},...o){const{breakpoints:_e={},palette:tt={},spacing:ct,shape:gt={}}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$S),it=createBreakpoints(_e),s=createSpacing(ct);let et=deepmerge({breakpoints:it,direction:"ltr",components:{},palette:_extends({mode:"light"},tt),spacing:s,shape:_extends({},shape$1,gt)},rt);return et=o.reduce((nt,at)=>deepmerge(nt,at),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,rt==null?void 0:rt.unstable_sxConfig),et.unstable_sx=function(at){return styleFunctionSx$1({sx:at,theme:this})},et}function isObjectEmpty(a){return Object.keys(a).length===0}function useTheme$3(a=null){const o=reactExports.useContext(ThemeContext$2);return!o||isObjectEmpty(o)?a:o}const systemDefaultTheme$1=createTheme$1();function useTheme$2(a=systemDefaultTheme$1){return useTheme$3(a)}function GlobalStyles$1({styles:a,themeId:o,defaultTheme:_e={}}){const tt=useTheme$2(_e),ct=typeof a=="function"?a(o&&tt[o]||tt):a;return jsxRuntimeExports.jsx(GlobalStyles$2,{styles:ct})}const _excluded$R=["sx"],splitProps=a=>{var o,_e;const tt={systemProps:{},otherProps:{}},ct=(o=a==null||(_e=a.theme)==null?void 0:_e.unstable_sxConfig)!=null?o:defaultSxConfig$1;return Object.keys(a).forEach(gt=>{ct[gt]?tt.systemProps[gt]=a[gt]:tt.otherProps[gt]=a[gt]}),tt};function extendSxProp(a){const{sx:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$R),{systemProps:tt,otherProps:ct}=splitProps(_e);let gt;return Array.isArray(o)?gt=[tt,...o]:typeof o=="function"?gt=(...rt)=>{const it=o(...rt);return isPlainObject(it)?_extends({},tt,it):tt}:gt=_extends({},tt,o),_extends({},ct,{sx:gt})}const _excluded$Q=["className","component"];function createBox(a={}){const{themeId:o,defaultTheme:_e,defaultClassName:tt="MuiBox-root",generateClassName:ct}=a,gt=styled$3("div",{shouldForwardProp:it=>it!=="theme"&&it!=="sx"&&it!=="as"})(styleFunctionSx$1);return reactExports.forwardRef(function(s,et){const nt=useTheme$2(_e),at=extendSxProp(s),{className:ht,component:dt="div"}=at,pt=_objectWithoutPropertiesLoose(at,_excluded$Q);return jsxRuntimeExports.jsx(gt,_extends({as:dt,ref:et,className:clsx(ht,ct?ct(tt):tt),theme:o&&nt[o]||nt},pt))})}const _excluded$P=["variant"];function isEmpty$3(a){return a.length===0}function propsToClassKey(a){const{variant:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$P);let tt=o||"";return Object.keys(_e).sort().forEach(ct=>{ct==="color"?tt+=isEmpty$3(tt)?a[ct]:capitalize(a[ct]):tt+=`${isEmpty$3(tt)?ct:capitalize(ct)}${capitalize(a[ct].toString())}`}),tt}const _excluded$O=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty$2(a){return Object.keys(a).length===0}function isStringTag(a){return typeof a=="string"&&a.charCodeAt(0)>96}const getStyleOverrides=(a,o)=>o.components&&o.components[a]&&o.components[a].styleOverrides?o.components[a].styleOverrides:null,transformVariants=a=>{const o={};return a&&a.forEach(_e=>{const tt=propsToClassKey(_e.props);o[tt]=_e.style}),o},getVariantStyles=(a,o)=>{let _e=[];return o&&o.components&&o.components[a]&&o.components[a].variants&&(_e=o.components[a].variants),transformVariants(_e)},variantsResolver=(a,o,_e)=>{const{ownerState:tt={}}=a,ct=[];return _e&&_e.forEach(gt=>{let rt=!0;Object.keys(gt.props).forEach(it=>{tt[it]!==gt.props[it]&&a[it]!==gt.props[it]&&(rt=!1)}),rt&&ct.push(o[propsToClassKey(gt.props)])}),ct},themeVariantsResolver=(a,o,_e,tt)=>{var ct;const gt=_e==null||(ct=_e.components)==null||(ct=ct[tt])==null?void 0:ct.variants;return variantsResolver(a,o,gt)};function shouldForwardProp(a){return a!=="ownerState"&&a!=="theme"&&a!=="sx"&&a!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=a=>a&&a.charAt(0).toLowerCase()+a.slice(1);function resolveTheme({defaultTheme:a,theme:o,themeId:_e}){return isEmpty$2(o)?a:o[_e]||o}function defaultOverridesResolver(a){return a?(o,_e)=>_e[a]:null}const muiStyledFunctionResolver=({styledArg:a,props:o,defaultTheme:_e,themeId:tt})=>{const ct=a(_extends({},o,{theme:resolveTheme(_extends({},o,{defaultTheme:_e,themeId:tt}))}));let gt;if(ct&&ct.variants&&(gt=ct.variants,delete ct.variants),gt){const rt=variantsResolver(o,transformVariants(gt),gt);return[ct,...rt]}return ct};function createStyled(a={}){const{themeId:o,defaultTheme:_e=systemDefaultTheme,rootShouldForwardProp:tt=shouldForwardProp,slotShouldForwardProp:ct=shouldForwardProp}=a,gt=rt=>styleFunctionSx$1(_extends({},rt,{theme:resolveTheme(_extends({},rt,{defaultTheme:_e,themeId:o}))}));return gt.__mui_systemSx=!0,(rt,it={})=>{internal_processStyles(rt,bt=>bt.filter(vt=>!(vt!=null&&vt.__mui_systemSx)));const{name:s,slot:et,skipVariantsResolver:nt,skipSx:at,overridesResolver:ht=defaultOverridesResolver(lowercaseFirstLetter(et))}=it,dt=_objectWithoutPropertiesLoose(it,_excluded$O),pt=nt!==void 0?nt:et&&et!=="Root"&&et!=="root"||!1,lt=at||!1;let mt,ot=shouldForwardProp;et==="Root"||et==="root"?ot=tt:et?ot=ct:isStringTag(rt)&&(ot=void 0);const ut=styled$3(rt,_extends({shouldForwardProp:ot,label:mt},dt)),ft=(bt,...vt)=>{const yt=vt?vt.map(wt=>{if(typeof wt=="function"&&wt.__emotion_real!==wt)return Mt=>muiStyledFunctionResolver({styledArg:wt,props:Mt,defaultTheme:_e,themeId:o});if(isPlainObject(wt)){let Mt=wt,Ht;return wt&&wt.variants&&(Ht=wt.variants,delete Mt.variants,Mt=Ot=>{let Dt=wt;return variantsResolver(Ot,transformVariants(Ht),Ht).forEach(nn=>{Dt=deepmerge(Dt,nn)}),Dt}),Mt}return wt}):[];let At=bt;if(isPlainObject(bt)){let wt;bt&&bt.variants&&(wt=bt.variants,delete At.variants,At=Mt=>{let Ht=bt;return variantsResolver(Mt,transformVariants(wt),wt).forEach(Dt=>{Ht=deepmerge(Ht,Dt)}),Ht})}else typeof bt=="function"&&bt.__emotion_real!==bt&&(At=wt=>muiStyledFunctionResolver({styledArg:bt,props:wt,defaultTheme:_e,themeId:o}));s&&ht&&yt.push(wt=>{const Mt=resolveTheme(_extends({},wt,{defaultTheme:_e,themeId:o})),Ht=getStyleOverrides(s,Mt);if(Ht){const Ot={};return Object.entries(Ht).forEach(([Dt,Gt])=>{Ot[Dt]=typeof Gt=="function"?Gt(_extends({},wt,{theme:Mt})):Gt}),ht(wt,Ot)}return null}),s&&!pt&&yt.push(wt=>{const Mt=resolveTheme(_extends({},wt,{defaultTheme:_e,themeId:o}));return themeVariantsResolver(wt,getVariantStyles(s,Mt),Mt,s)}),lt||yt.push(gt);const Nt=yt.length-vt.length;if(Array.isArray(bt)&&Nt>0){const wt=new Array(Nt).fill("");At=[...bt,...wt],At.raw=[...bt.raw,...wt]}const St=ut(At,...yt);return rt.muiName&&(St.muiName=rt.muiName),St};return ut.withConfig&&(ft.withConfig=ut.withConfig),ft}}const styled$2=createStyled(),systemStyled=styled$2;function getThemeProps(a){const{theme:o,name:_e,props:tt}=a;return!o||!o.components||!o.components[_e]||!o.components[_e].defaultProps?tt:resolveProps(o.components[_e].defaultProps,tt)}function useThemeProps$1({props:a,name:o,defaultTheme:_e,themeId:tt}){let ct=useTheme$2(_e);return tt&&(ct=ct[tt]||ct),getThemeProps({theme:ct,name:o,props:a})}function clamp(a,o=0,_e=1){return Math.min(Math.max(o,a),_e)}function hexToRgb(a){a=a.slice(1);const o=new RegExp(`.{1,${a.length>=6?2:1}}`,"g");let _e=a.match(o);return _e&&_e[0].length===1&&(_e=_e.map(tt=>tt+tt)),_e?`rgb${_e.length===4?"a":""}(${_e.map((tt,ct)=>ct<3?parseInt(tt,16):Math.round(parseInt(tt,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(a){if(a.type)return a;if(a.charAt(0)==="#")return decomposeColor(hexToRgb(a));const o=a.indexOf("("),_e=a.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(_e)===-1)throw new Error(formatMuiErrorMessage(9,a));let tt=a.substring(o+1,a.length-1),ct;if(_e==="color"){if(tt=tt.split(" "),ct=tt.shift(),tt.length===4&&tt[3].charAt(0)==="/"&&(tt[3]=tt[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(ct)===-1)throw new Error(formatMuiErrorMessage(10,ct))}else tt=tt.split(",");return tt=tt.map(gt=>parseFloat(gt)),{type:_e,values:tt,colorSpace:ct}}function recomposeColor(a){const{type:o,colorSpace:_e}=a;let{values:tt}=a;return o.indexOf("rgb")!==-1?tt=tt.map((ct,gt)=>gt<3?parseInt(ct,10):ct):o.indexOf("hsl")!==-1&&(tt[1]=`${tt[1]}%`,tt[2]=`${tt[2]}%`),o.indexOf("color")!==-1?tt=`${_e} ${tt.join(" ")}`:tt=`${tt.join(", ")}`,`${o}(${tt})`}function hslToRgb(a){a=decomposeColor(a);const{values:o}=a,_e=o[0],tt=o[1]/100,ct=o[2]/100,gt=tt*Math.min(ct,1-ct),rt=(et,nt=(et+_e/30)%12)=>ct-gt*Math.max(Math.min(nt-3,9-nt,1),-1);let it="rgb";const s=[Math.round(rt(0)*255),Math.round(rt(8)*255),Math.round(rt(4)*255)];return a.type==="hsla"&&(it+="a",s.push(o[3])),recomposeColor({type:it,values:s})}function getLuminance(a){a=decomposeColor(a);let o=a.type==="hsl"||a.type==="hsla"?decomposeColor(hslToRgb(a)).values:a.values;return o=o.map(_e=>(a.type!=="color"&&(_e/=255),_e<=.03928?_e/12.92:((_e+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(a,o){const _e=getLuminance(a),tt=getLuminance(o);return(Math.max(_e,tt)+.05)/(Math.min(_e,tt)+.05)}function alpha(a,o){return a=decomposeColor(a),o=clamp(o),(a.type==="rgb"||a.type==="hsl")&&(a.type+="a"),a.type==="color"?a.values[3]=`/${o}`:a.values[3]=o,recomposeColor(a)}function darken(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]*=1-o;else if(a.type.indexOf("rgb")!==-1||a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]*=1-o;return recomposeColor(a)}function lighten(a,o){if(a=decomposeColor(a),o=clamp(o),a.type.indexOf("hsl")!==-1)a.values[2]+=(100-a.values[2])*o;else if(a.type.indexOf("rgb")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(255-a.values[_e])*o;else if(a.type.indexOf("color")!==-1)for(let _e=0;_e<3;_e+=1)a.values[_e]+=(1-a.values[_e])*o;return recomposeColor(a)}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$1(){return reactExports.useContext(ThemeContext$1)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(a,o){return typeof o=="function"?o(a):_extends({},a,o)}function ThemeProvider$2(a){const{children:o,theme:_e}=a,tt=useTheme$1(),ct=reactExports.useMemo(()=>{const gt=tt===null?_e:mergeOuterLocalTheme(tt,_e);return gt!=null&&(gt[nested]=tt!==null),gt},[_e,tt]);return jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:ct,children:o})}const EMPTY_THEME={};function useThemeScoping(a,o,_e,tt=!1){return reactExports.useMemo(()=>{const ct=a&&o[a]||o;if(typeof _e=="function"){const gt=_e(ct),rt=a?_extends({},o,{[a]:gt}):gt;return tt?()=>rt:rt}return a?_extends({},o,{[a]:_e}):_extends({},o,_e)},[a,o,_e,tt])}function ThemeProvider$1(a){const{children:o,theme:_e,themeId:tt}=a,ct=useTheme$3(EMPTY_THEME),gt=useTheme$1()||EMPTY_THEME,rt=useThemeScoping(tt,ct,_e),it=useThemeScoping(tt,gt,_e,!0);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:it,children:jsxRuntimeExports.jsx(ThemeContext$2.Provider,{value:rt,children:o})})}const _excluded$N=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$1=systemStyled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemePropsDefault$1=a=>useThemeProps$1({props:a,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$z=(a,o)=>{const _e=s=>generateUtilityClass(o,s),{classes:tt,fixed:ct,disableGutters:gt,maxWidth:rt}=a,it={root:["root",rt&&`maxWidth${capitalize(String(rt))}`,ct&&"fixed",gt&&"disableGutters"]};return composeClasses(it,_e,tt)};function createContainer(a={}){const{createStyledComponent:o=defaultCreateStyledComponent$1,useThemeProps:_e=useThemePropsDefault$1,componentName:tt="MuiContainer"}=a,ct=o(({theme:rt,ownerState:it})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!it.disableGutters&&{paddingLeft:rt.spacing(2),paddingRight:rt.spacing(2),[rt.breakpoints.up("sm")]:{paddingLeft:rt.spacing(3),paddingRight:rt.spacing(3)}}),({theme:rt,ownerState:it})=>it.fixed&&Object.keys(rt.breakpoints.values).reduce((s,et)=>{const nt=et,at=rt.breakpoints.values[nt];return at!==0&&(s[rt.breakpoints.up(nt)]={maxWidth:`${at}${rt.breakpoints.unit}`}),s},{}),({theme:rt,ownerState:it})=>_extends({},it.maxWidth==="xs"&&{[rt.breakpoints.up("xs")]:{maxWidth:Math.max(rt.breakpoints.values.xs,444)}},it.maxWidth&&it.maxWidth!=="xs"&&{[rt.breakpoints.up(it.maxWidth)]:{maxWidth:`${rt.breakpoints.values[it.maxWidth]}${rt.breakpoints.unit}`}}));return reactExports.forwardRef(function(it,s){const et=_e(it),{className:nt,component:at="div",disableGutters:ht=!1,fixed:dt=!1,maxWidth:pt="lg"}=et,lt=_objectWithoutPropertiesLoose(et,_excluded$N),mt=_extends({},et,{component:at,disableGutters:ht,fixed:dt,maxWidth:pt}),ot=useUtilityClasses$z(mt,tt);return jsxRuntimeExports.jsx(ct,_extends({as:at,ownerState:mt,className:clsx(ot.root,nt),ref:s},lt))})}const _excluded$M=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=systemStyled("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root});function useThemePropsDefault(a){return useThemeProps$1({props:a,name:"MuiStack",defaultTheme:defaultTheme$3})}function joinChildren(a,o){const _e=reactExports.Children.toArray(a).filter(Boolean);return _e.reduce((tt,ct,gt)=>(tt.push(ct),gt<_e.length-1&&tt.push(reactExports.cloneElement(o,{key:`separator-${gt}`})),tt),[])}const getSideFromDirection=a=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[a],style=({ownerState:a,theme:o})=>{let _e=_extends({display:"flex",flexDirection:"column"},handleBreakpoints({theme:o},resolveBreakpointValues({values:a.direction,breakpoints:o.breakpoints.values}),tt=>({flexDirection:tt})));if(a.spacing){const tt=createUnarySpacing(o),ct=Object.keys(o.breakpoints.values).reduce((s,et)=>((typeof a.spacing=="object"&&a.spacing[et]!=null||typeof a.direction=="object"&&a.direction[et]!=null)&&(s[et]=!0),s),{}),gt=resolveBreakpointValues({values:a.direction,base:ct}),rt=resolveBreakpointValues({values:a.spacing,base:ct});typeof gt=="object"&&Object.keys(gt).forEach((s,et,nt)=>{if(!gt[s]){const ht=et>0?gt[nt[et-1]]:"column";gt[s]=ht}}),_e=deepmerge(_e,handleBreakpoints({theme:o},rt,(s,et)=>a.useFlexGap?{gap:getValue(tt,s)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(et?gt[et]:a.direction)}`]:getValue(tt,s)}}))}return _e=mergeBreakpointsInOrder(o.breakpoints,_e),_e};function createStack(a={}){const{createStyledComponent:o=defaultCreateStyledComponent,useThemeProps:_e=useThemePropsDefault,componentName:tt="MuiStack"}=a,ct=()=>composeClasses({root:["root"]},s=>generateUtilityClass(tt,s),{}),gt=o(style);return reactExports.forwardRef(function(s,et){const nt=_e(s),at=extendSxProp(nt),{component:ht="div",direction:dt="column",spacing:pt=0,divider:lt,children:mt,className:ot,useFlexGap:ut=!1}=at,ft=_objectWithoutPropertiesLoose(at,_excluded$M),bt={direction:dt,spacing:pt,useFlexGap:ut},vt=ct();return jsxRuntimeExports.jsx(gt,_extends({as:ht,ownerState:bt,ref:et,className:clsx(vt.root,ot)},ft,{children:lt?joinChildren(mt,lt):mt}))})}function createMixins(a,o){return _extends({toolbar:{minHeight:56,[a.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[a.up("sm")]:{minHeight:64}}},o)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$L=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(a,o,_e,tt){const ct=tt.light||tt,gt=tt.dark||tt*1.5;a[o]||(a.hasOwnProperty(_e)?a[o]=a[_e]:o==="light"?a.light=lighten(a.main,ct):o==="dark"&&(a.dark=darken(a.main,gt)))}function getDefaultPrimary(a="light"){return a==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(a="light"){return a==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(a="light"){return a==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(a="light"){return a==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(a="light"){return a==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(a="light"){return a==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(a){const{mode:o="light",contrastThreshold:_e=3,tonalOffset:tt=.2}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$L),gt=a.primary||getDefaultPrimary(o),rt=a.secondary||getDefaultSecondary(o),it=a.error||getDefaultError(o),s=a.info||getDefaultInfo(o),et=a.success||getDefaultSuccess(o),nt=a.warning||getDefaultWarning(o);function at(lt){return getContrastRatio(lt,dark.text.primary)>=_e?dark.text.primary:light.text.primary}const ht=({color:lt,name:mt,mainShade:ot=500,lightShade:ut=300,darkShade:ft=700})=>{if(lt=_extends({},lt),!lt.main&&lt[ot]&&(lt.main=lt[ot]),!lt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,mt?` (${mt})`:"",ot));if(typeof lt.main!="string")throw new Error(formatMuiErrorMessage(12,mt?` (${mt})`:"",JSON.stringify(lt.main)));return addLightOrDark(lt,"light",ut,tt),addLightOrDark(lt,"dark",ft,tt),lt.contrastText||(lt.contrastText=at(lt.main)),lt},dt={dark,light};return deepmerge(_extends({common:_extends({},common$1),mode:o,primary:ht({color:gt,name:"primary"}),secondary:ht({color:rt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:ht({color:it,name:"error"}),warning:ht({color:nt,name:"warning"}),info:ht({color:s,name:"info"}),success:ht({color:et,name:"success"}),grey:grey$1,contrastThreshold:_e,getContrastText:at,augmentColor:ht,tonalOffset:tt},dt[o]),ct)}const _excluded$K=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(a){return Math.round(a*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(a,o){const _e=typeof o=="function"?o(a):o,{fontFamily:tt=defaultFontFamily,fontSize:ct=14,fontWeightLight:gt=300,fontWeightRegular:rt=400,fontWeightMedium:it=500,fontWeightBold:s=700,htmlFontSize:et=16,allVariants:nt,pxToRem:at}=_e,ht=_objectWithoutPropertiesLoose(_e,_excluded$K),dt=ct/14,pt=at||(ot=>`${ot/et*dt}rem`),lt=(ot,ut,ft,bt,vt)=>_extends({fontFamily:tt,fontWeight:ot,fontSize:pt(ut),lineHeight:ft},tt===defaultFontFamily?{letterSpacing:`${round$2(bt/ut)}em`}:{},vt,nt),mt={h1:lt(gt,96,1.167,-1.5),h2:lt(gt,60,1.2,-.5),h3:lt(rt,48,1.167,0),h4:lt(rt,34,1.235,.25),h5:lt(rt,24,1.334,0),h6:lt(it,20,1.6,.15),subtitle1:lt(rt,16,1.75,.15),subtitle2:lt(it,14,1.57,.1),body1:lt(rt,16,1.5,.15),body2:lt(rt,14,1.43,.15),button:lt(it,14,1.75,.4,caseAllCaps),caption:lt(rt,12,1.66,.4),overline:lt(rt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends({htmlFontSize:et,pxToRem:pt,fontFamily:tt,fontSize:ct,fontWeightLight:gt,fontWeightRegular:rt,fontWeightMedium:it,fontWeightBold:s},mt),ht,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...a){return[`${a[0]}px ${a[1]}px ${a[2]}px ${a[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${a[4]}px ${a[5]}px ${a[6]}px ${a[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${a[8]}px ${a[9]}px ${a[10]}px ${a[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],shadows$1=shadows,_excluded$J=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(a){return`${Math.round(a)}ms`}function getAutoHeightDuration(a){if(!a)return 0;const o=a/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(a){const o=_extends({},easing,a.easing),_e=_extends({},duration,a.duration);return _extends({getAutoHeightDuration,create:(ct=["all"],gt={})=>{const{duration:rt=_e.standard,easing:it=o.easeInOut,delay:s=0}=gt;return _objectWithoutPropertiesLoose(gt,_excluded$J),(Array.isArray(ct)?ct:[ct]).map(et=>`${et} ${typeof rt=="string"?rt:formatMs(rt)} ${it} ${typeof s=="string"?s:formatMs(s)}`).join(",")}},a,{easing:o,duration:_e})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$I=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(a={},...o){const{mixins:_e={},palette:tt={},transitions:ct={},typography:gt={}}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$I);if(a.vars)throw new Error(formatMuiErrorMessage(18));const it=createPalette(tt),s=createTheme$1(a);let et=deepmerge(s,{mixins:createMixins(s.breakpoints,_e),palette:it,shadows:shadows$1.slice(),typography:createTypography(it,gt),transitions:createTransitions(ct),zIndex:_extends({},zIndex$1)});return et=deepmerge(et,rt),et=o.reduce((nt,at)=>deepmerge(nt,at),et),et.unstable_sxConfig=_extends({},defaultSxConfig$1,rt==null?void 0:rt.unstable_sxConfig),et.unstable_sx=function(at){return styleFunctionSx$1({sx:at,theme:this})},et}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1,THEME_ID="$$material",rootShouldForwardProp=a=>shouldForwardProp(a)&&a!=="classes",slotShouldForwardProp=shouldForwardProp,styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$2,rootShouldForwardProp}),styled$1=styled;function useThemeProps({props:a,name:o}){return useThemeProps$1({props:a,name:o,defaultTheme:defaultTheme$2,themeId:THEME_ID})}const getOverlayAlpha=a=>{let o;return a<1?o=5.11916*a**2:o=4.5*Math.log(a+1)+2,(o/100).toFixed(2)},getOverlayAlpha$1=getOverlayAlpha;function useTheme(){const a=useTheme$2(defaultTheme$2);return a[THEME_ID]||a}function getPaperUtilityClass(a){return generateUtilityClass("MuiPaper",a)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$H=["className","component","elevation","square","variant"],useUtilityClasses$y=a=>{const{square:o,elevation:_e,variant:tt,classes:ct}=a,gt={root:["root",tt,!o&&"rounded",tt==="elevation"&&`elevation${_e}`]};return composeClasses(gt,getPaperUtilityClass,ct)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],!_e.square&&o.rounded,_e.variant==="elevation"&&o[`elevation${_e.elevation}`]]}})(({theme:a,ownerState:o})=>{var _e;return _extends({backgroundColor:(a.vars||a).palette.background.paper,color:(a.vars||a).palette.text.primary,transition:a.transitions.create("box-shadow")},!o.square&&{borderRadius:a.shape.borderRadius},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.divider}`},o.variant==="elevation"&&_extends({boxShadow:(a.vars||a).shadows[o.elevation]},!a.vars&&a.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha$1(o.elevation))}, ${alpha("#fff",getOverlayAlpha$1(o.elevation))})`},a.vars&&{backgroundImage:(_e=a.vars.overlays)==null?void 0:_e[o.elevation]}))}),Paper=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiPaper"}),{className:ct,component:gt="div",elevation:rt=1,square:it=!1,variant:s="elevation"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$H),nt=_extends({},tt,{component:gt,elevation:rt,square:it,variant:s}),at=useUtilityClasses$y(nt);return jsxRuntimeExports.jsx(PaperRoot,_extends({as:gt,ownerState:nt,className:clsx(at.root,ct),ref:_e},et))}),Paper$1=Paper;function getAlertUtilityClass(a){return generateUtilityClass("MuiAlert",a)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),alertClasses$1=alertClasses;function _setPrototypeOf(a,o){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,ct){return tt.__proto__=ct,tt},_setPrototypeOf(a,o)}function _inheritsLoose(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,_setPrototypeOf(a,o)}const config={disabled:!1},TransitionGroupContext=React$1.createContext(null);var forceReflow=function(o){return o.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(o,a);function o(tt,ct){var gt;gt=a.call(this,tt,ct)||this;var rt=ct,it=rt&&!rt.isMounting?tt.enter:tt.appear,s;return gt.appearStatus=null,tt.in?it?(s=EXITED,gt.appearStatus=ENTERING):s=ENTERED:tt.unmountOnExit||tt.mountOnEnter?s=UNMOUNTED:s=EXITED,gt.state={status:s},gt.nextCallback=null,gt}o.getDerivedStateFromProps=function(ct,gt){var rt=ct.in;return rt&&gt.status===UNMOUNTED?{status:EXITED}:null};var _e=o.prototype;return _e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},_e.componentDidUpdate=function(ct){var gt=null;if(ct!==this.props){var rt=this.state.status;this.props.in?rt!==ENTERING&&rt!==ENTERED&&(gt=ENTERING):(rt===ENTERING||rt===ENTERED)&&(gt=EXITING)}this.updateStatus(!1,gt)},_e.componentWillUnmount=function(){this.cancelNextCallback()},_e.getTimeouts=function(){var ct=this.props.timeout,gt,rt,it;return gt=rt=it=ct,ct!=null&&typeof ct!="number"&&(gt=ct.exit,rt=ct.enter,it=ct.appear!==void 0?ct.appear:rt),{exit:gt,enter:rt,appear:it}},_e.updateStatus=function(ct,gt){if(ct===void 0&&(ct=!1),gt!==null)if(this.cancelNextCallback(),gt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);rt&&forceReflow(rt)}this.performEnter(ct)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},_e.performEnter=function(ct){var gt=this,rt=this.props.enter,it=this.context?this.context.isMounting:ct,s=this.props.nodeRef?[it]:[ReactDOM.findDOMNode(this),it],et=s[0],nt=s[1],at=this.getTimeouts(),ht=it?at.appear:at.enter;if(!ct&&!rt||config.disabled){this.safeSetState({status:ENTERED},function(){gt.props.onEntered(et)});return}this.props.onEnter(et,nt),this.safeSetState({status:ENTERING},function(){gt.props.onEntering(et,nt),gt.onTransitionEnd(ht,function(){gt.safeSetState({status:ENTERED},function(){gt.props.onEntered(et,nt)})})})},_e.performExit=function(){var ct=this,gt=this.props.exit,rt=this.getTimeouts(),it=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!gt||config.disabled){this.safeSetState({status:EXITED},function(){ct.props.onExited(it)});return}this.props.onExit(it),this.safeSetState({status:EXITING},function(){ct.props.onExiting(it),ct.onTransitionEnd(rt.exit,function(){ct.safeSetState({status:EXITED},function(){ct.props.onExited(it)})})})},_e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},_e.safeSetState=function(ct,gt){gt=this.setNextCallback(gt),this.setState(ct,gt)},_e.setNextCallback=function(ct){var gt=this,rt=!0;return this.nextCallback=function(it){rt&&(rt=!1,gt.nextCallback=null,ct(it))},this.nextCallback.cancel=function(){rt=!1},this.nextCallback},_e.onTransitionEnd=function(ct,gt){this.setNextCallback(gt);var rt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),it=ct==null&&!this.props.addEndListener;if(!rt||it){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[rt,this.nextCallback],et=s[0],nt=s[1];this.props.addEndListener(et,nt)}ct!=null&&setTimeout(this.nextCallback,ct)},_e.render=function(){var ct=this.state.status;if(ct===UNMOUNTED)return null;var gt=this.props,rt=gt.children;gt.in,gt.mountOnEnter,gt.unmountOnExit,gt.appear,gt.enter,gt.exit,gt.timeout,gt.addEndListener,gt.onEnter,gt.onEntering,gt.onEntered,gt.onExit,gt.onExiting,gt.onExited,gt.nodeRef;var it=_objectWithoutPropertiesLoose(gt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$1.createElement(TransitionGroupContext.Provider,{value:null},typeof rt=="function"?rt(ct,it):React$1.cloneElement(React$1.Children.only(rt),it))},o}(React$1.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function _assertThisInitialized(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function getChildMapping(a,o){var _e=function(gt){return o&&reactExports.isValidElement(gt)?o(gt):gt},tt=Object.create(null);return a&&reactExports.Children.map(a,function(ct){return ct}).forEach(function(ct){tt[ct.key]=_e(ct)}),tt}function mergeChildMappings(a,o){a=a||{},o=o||{};function _e(nt){return nt in o?o[nt]:a[nt]}var tt=Object.create(null),ct=[];for(var gt in a)gt in o?ct.length&&(tt[gt]=ct,ct=[]):ct.push(gt);var rt,it={};for(var s in o){if(tt[s])for(rt=0;rt<tt[s].length;rt++){var et=tt[s][rt];it[tt[s][rt]]=_e(et)}it[s]=_e(s)}for(rt=0;rt<ct.length;rt++)it[ct[rt]]=_e(ct[rt]);return it}function getProp(a,o,_e){return _e[o]!=null?_e[o]:a.props[o]}function getInitialChildMapping(a,o){return getChildMapping(a.children,function(_e){return reactExports.cloneElement(_e,{onExited:o.bind(null,_e),in:!0,appear:getProp(_e,"appear",a),enter:getProp(_e,"enter",a),exit:getProp(_e,"exit",a)})})}function getNextChildMapping(a,o,_e){var tt=getChildMapping(a.children),ct=mergeChildMappings(o,tt);return Object.keys(ct).forEach(function(gt){var rt=ct[gt];if(reactExports.isValidElement(rt)){var it=gt in o,s=gt in tt,et=o[gt],nt=reactExports.isValidElement(et)&&!et.props.in;s&&(!it||nt)?ct[gt]=reactExports.cloneElement(rt,{onExited:_e.bind(null,rt),in:!0,exit:getProp(rt,"exit",a),enter:getProp(rt,"enter",a)}):!s&&it&&!nt?ct[gt]=reactExports.cloneElement(rt,{in:!1}):s&&it&&reactExports.isValidElement(et)&&(ct[gt]=reactExports.cloneElement(rt,{onExited:_e.bind(null,rt),in:et.props.in,exit:getProp(rt,"exit",a),enter:getProp(rt,"enter",a)}))}}),ct}var values=Object.values||function(a){return Object.keys(a).map(function(o){return a[o]})},defaultProps={component:"div",childFactory:function(o){return o}},TransitionGroup=function(a){_inheritsLoose(o,a);function o(tt,ct){var gt;gt=a.call(this,tt,ct)||this;var rt=gt.handleExited.bind(_assertThisInitialized(gt));return gt.state={contextValue:{isMounting:!0},handleExited:rt,firstRender:!0},gt}var _e=o.prototype;return _e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},_e.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(ct,gt){var rt=gt.children,it=gt.handleExited,s=gt.firstRender;return{children:s?getInitialChildMapping(ct,it):getNextChildMapping(ct,rt,it),firstRender:!1}},_e.handleExited=function(ct,gt){var rt=getChildMapping(this.props.children);ct.key in rt||(ct.props.onExited&&ct.props.onExited(gt),this.mounted&&this.setState(function(it){var s=_extends({},it.children);return delete s[ct.key],{children:s}}))},_e.render=function(){var ct=this.props,gt=ct.component,rt=ct.childFactory,it=_objectWithoutPropertiesLoose(ct,["component","childFactory"]),s=this.state.contextValue,et=values(this.state.children).map(rt);return delete it.appear,delete it.enter,delete it.exit,gt===null?React$1.createElement(TransitionGroupContext.Provider,{value:s},et):React$1.createElement(TransitionGroupContext.Provider,{value:s},React$1.createElement(gt,it,et))},o}(React$1.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup;function Ripple(a){const{className:o,classes:_e,pulsate:tt=!1,rippleX:ct,rippleY:gt,rippleSize:rt,in:it,onExited:s,timeout:et}=a,[nt,at]=reactExports.useState(!1),ht=clsx(o,_e.ripple,_e.rippleVisible,tt&&_e.ripplePulsate),dt={width:rt,height:rt,top:-(rt/2)+gt,left:-(rt/2)+ct},pt=clsx(_e.child,nt&&_e.childLeaving,tt&&_e.childPulsate);return!it&&!nt&&at(!0),reactExports.useEffect(()=>{if(!it&&s!=null){const lt=setTimeout(s,et);return()=>{clearTimeout(lt)}}},[s,it,et]),jsxRuntimeExports.jsx("span",{className:ht,style:dt,children:jsxRuntimeExports.jsx("span",{className:pt})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),touchRippleClasses$1=touchRippleClasses,_excluded$G=["center","classes","className"];let _$3=a=>a,_t$2,_t2$2,_t3$2,_t4$2;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t$2||(_t$2=_$3`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2$2||(_t2$2=_$3`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3$2||(_t3$2=_$3`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4$2||(_t4$2=_$3`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:a})=>a.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:a})=>a.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:a})=>a.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTouchRipple"}),{center:ct=!1,classes:gt={},className:rt}=tt,it=_objectWithoutPropertiesLoose(tt,_excluded$G),[s,et]=reactExports.useState([]),nt=reactExports.useRef(0),at=reactExports.useRef(null);reactExports.useEffect(()=>{at.current&&(at.current(),at.current=null)},[s]);const ht=reactExports.useRef(!1),dt=reactExports.useRef(0),pt=reactExports.useRef(null),lt=reactExports.useRef(null);reactExports.useEffect(()=>()=>{dt.current&&clearTimeout(dt.current)},[]);const mt=reactExports.useCallback(bt=>{const{pulsate:vt,rippleX:yt,rippleY:At,rippleSize:Nt,cb:St}=bt;et(wt=>[...wt,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(gt.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(gt.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(gt.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(gt.child,touchRippleClasses$1.child),childLeaving:clsx(gt.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(gt.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:vt,rippleX:yt,rippleY:At,rippleSize:Nt},nt.current)]),nt.current+=1,at.current=St},[gt]),ot=reactExports.useCallback((bt={},vt={},yt=()=>{})=>{const{pulsate:At=!1,center:Nt=ct||vt.pulsate,fakeElement:St=!1}=vt;if((bt==null?void 0:bt.type)==="mousedown"&&ht.current){ht.current=!1;return}(bt==null?void 0:bt.type)==="touchstart"&&(ht.current=!0);const wt=St?null:lt.current,Mt=wt?wt.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Ht,Ot,Dt;if(Nt||bt===void 0||bt.clientX===0&&bt.clientY===0||!bt.clientX&&!bt.touches)Ht=Math.round(Mt.width/2),Ot=Math.round(Mt.height/2);else{const{clientX:Gt,clientY:nn}=bt.touches&&bt.touches.length>0?bt.touches[0]:bt;Ht=Math.round(Gt-Mt.left),Ot=Math.round(nn-Mt.top)}if(Nt)Dt=Math.sqrt((2*Mt.width**2+Mt.height**2)/3),Dt%2===0&&(Dt+=1);else{const Gt=Math.max(Math.abs((wt?wt.clientWidth:0)-Ht),Ht)*2+2,nn=Math.max(Math.abs((wt?wt.clientHeight:0)-Ot),Ot)*2+2;Dt=Math.sqrt(Gt**2+nn**2)}bt!=null&&bt.touches?pt.current===null&&(pt.current=()=>{mt({pulsate:At,rippleX:Ht,rippleY:Ot,rippleSize:Dt,cb:yt})},dt.current=setTimeout(()=>{pt.current&&(pt.current(),pt.current=null)},DELAY_RIPPLE)):mt({pulsate:At,rippleX:Ht,rippleY:Ot,rippleSize:Dt,cb:yt})},[ct,mt]),ut=reactExports.useCallback(()=>{ot({},{pulsate:!0})},[ot]),ft=reactExports.useCallback((bt,vt)=>{if(clearTimeout(dt.current),(bt==null?void 0:bt.type)==="touchend"&&pt.current){pt.current(),pt.current=null,dt.current=setTimeout(()=>{ft(bt,vt)});return}pt.current=null,et(yt=>yt.length>0?yt.slice(1):yt),at.current=vt},[]);return reactExports.useImperativeHandle(_e,()=>({pulsate:ut,start:ot,stop:ft}),[ut,ot,ft]),jsxRuntimeExports.jsx(TouchRippleRoot,_extends({className:clsx(touchRippleClasses$1.root,gt.root,rt),ref:lt},it,{children:jsxRuntimeExports.jsx(TransitionGroup$1,{component:null,exit:!0,children:s})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(a){return generateUtilityClass("MuiButtonBase",a)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),buttonBaseClasses$1=buttonBaseClasses,_excluded$F=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$x=a=>{const{disabled:o,focusVisible:_e,focusVisibleClassName:tt,classes:ct}=a,rt=composeClasses({root:["root",o&&"disabled",_e&&"focusVisible"]},getButtonBaseUtilityClass,ct);return _e&&tt&&(rt.root+=` ${tt}`),rt},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(a,o)=>o.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiButtonBase"}),{action:ct,centerRipple:gt=!1,children:rt,className:it,component:s="button",disabled:et=!1,disableRipple:nt=!1,disableTouchRipple:at=!1,focusRipple:ht=!1,LinkComponent:dt="a",onBlur:pt,onClick:lt,onContextMenu:mt,onDragLeave:ot,onFocus:ut,onFocusVisible:ft,onKeyDown:bt,onKeyUp:vt,onMouseDown:yt,onMouseLeave:At,onMouseUp:Nt,onTouchEnd:St,onTouchMove:wt,onTouchStart:Mt,tabIndex:Ht=0,TouchRippleProps:Ot,touchRippleRef:Dt,type:Gt}=tt,nn=_objectWithoutPropertiesLoose(tt,_excluded$F),zt=reactExports.useRef(null),Ft=reactExports.useRef(null),un=useForkRef(Ft,Dt),{isFocusVisibleRef:vn,onFocus:yn,onBlur:cn,ref:gn}=useIsFocusVisible(),[Cn,fn]=reactExports.useState(!1);et&&Cn&&fn(!1),reactExports.useImperativeHandle(ct,()=>({focusVisible:()=>{fn(!0),zt.current.focus()}}),[]);const[Tn,On]=reactExports.useState(!1);reactExports.useEffect(()=>{On(!0)},[]);const Ln=Tn&&!nt&&!et;reactExports.useEffect(()=>{Cn&&ht&&!nt&&Tn&&Ft.current.pulsate()},[nt,ht,Cn,Tn]);function An(Yt,kt,st=at){return useEventCallback(Tt=>(kt&&kt(Tt),!st&&Ft.current&&Ft.current[Yt](Tt),!0))}const Rn=An("start",yt),In=An("stop",mt),kn=An("stop",ot),xn=An("stop",Nt),Yn=An("stop",Yt=>{Cn&&Yt.preventDefault(),At&&At(Yt)}),Un=An("start",Mt),jn=An("stop",St),Qn=An("stop",wt),on=An("stop",Yt=>{cn(Yt),vn.current===!1&&fn(!1),pt&&pt(Yt)},!1),Hn=useEventCallback(Yt=>{zt.current||(zt.current=Yt.currentTarget),yn(Yt),vn.current===!0&&(fn(!0),ft&&ft(Yt)),ut&&ut(Yt)}),Fn=()=>{const Yt=zt.current;return s&&s!=="button"&&!(Yt.tagName==="A"&&Yt.href)},Vn=reactExports.useRef(!1),Bn=useEventCallback(Yt=>{ht&&!Vn.current&&Cn&&Ft.current&&Yt.key===" "&&(Vn.current=!0,Ft.current.stop(Yt,()=>{Ft.current.start(Yt)})),Yt.target===Yt.currentTarget&&Fn()&&Yt.key===" "&&Yt.preventDefault(),bt&&bt(Yt),Yt.target===Yt.currentTarget&&Fn()&&Yt.key==="Enter"&&!et&&(Yt.preventDefault(),lt&&lt(Yt))}),qn=useEventCallback(Yt=>{ht&&Yt.key===" "&&Ft.current&&Cn&&!Yt.defaultPrevented&&(Vn.current=!1,Ft.current.stop(Yt,()=>{Ft.current.pulsate(Yt)})),vt&&vt(Yt),lt&&Yt.target===Yt.currentTarget&&Fn()&&Yt.key===" "&&!Yt.defaultPrevented&&lt(Yt)});let Gn=s;Gn==="button"&&(nn.href||nn.to)&&(Gn=dt);const _n={};Gn==="button"?(_n.type=Gt===void 0?"button":Gt,_n.disabled=et):(!nn.href&&!nn.to&&(_n.role="button"),et&&(_n["aria-disabled"]=et));const $n=useForkRef(_e,gn,zt),bn=_extends({},tt,{centerRipple:gt,component:s,disabled:et,disableRipple:nt,disableTouchRipple:at,focusRipple:ht,tabIndex:Ht,focusVisible:Cn}),wn=useUtilityClasses$x(bn);return jsxRuntimeExports.jsxs(ButtonBaseRoot,_extends({as:Gn,className:clsx(wn.root,it),ownerState:bn,onBlur:on,onClick:lt,onContextMenu:In,onFocus:Hn,onKeyDown:Bn,onKeyUp:qn,onMouseDown:Rn,onMouseLeave:Yn,onMouseUp:xn,onDragLeave:kn,onTouchEnd:jn,onTouchMove:Qn,onTouchStart:Un,ref:$n,tabIndex:et?-1:Ht,type:Gt},_n,nn,{children:[rt,Ln?jsxRuntimeExports.jsx(TouchRipple$1,_extends({ref:un,center:gt},Ot)):null]}))}),ButtonBase$1=ButtonBase;function getIconButtonUtilityClass(a){return generateUtilityClass("MuiIconButton",a)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),iconButtonClasses$1=iconButtonClasses,_excluded$E=["edge","children","className","color","disabled","disableFocusRipple","size"],useUtilityClasses$w=a=>{const{classes:o,disabled:_e,color:tt,edge:ct,size:gt}=a,rt={root:["root",_e&&"disabled",tt!=="default"&&`color${capitalize(tt)}`,ct&&`edge${capitalize(ct)}`,`size${capitalize(gt)}`]};return composeClasses(rt,getIconButtonUtilityClass,o)},IconButtonRoot=styled$1(ButtonBase$1,{name:"MuiIconButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="default"&&o[`color${capitalize(_e.color)}`],_e.edge&&o[`edge${capitalize(_e.edge)}`],o[`size${capitalize(_e.size)}`]]}})(({theme:a,ownerState:o})=>_extends({textAlign:"center",flex:"0 0 auto",fontSize:a.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(a.vars||a).palette.action.active,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest})},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.activeChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.edge==="start"&&{marginLeft:o.size==="small"?-3:-12},o.edge==="end"&&{marginRight:o.size==="small"?-3:-12}),({theme:a,ownerState:o})=>{var _e;const tt=(_e=(a.vars||a).palette)==null?void 0:_e[o.color];return _extends({},o.color==="inherit"&&{color:"inherit"},o.color!=="inherit"&&o.color!=="default"&&_extends({color:tt==null?void 0:tt.main},!o.disableRipple&&{"&:hover":_extends({},tt&&{backgroundColor:a.vars?`rgba(${tt.mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(tt.main,a.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),o.size==="small"&&{padding:5,fontSize:a.typography.pxToRem(18)},o.size==="large"&&{padding:12,fontSize:a.typography.pxToRem(28)},{[`&.${iconButtonClasses$1.disabled}`]:{backgroundColor:"transparent",color:(a.vars||a).palette.action.disabled}})}),IconButton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIconButton"}),{edge:ct=!1,children:gt,className:rt,color:it="default",disabled:s=!1,disableFocusRipple:et=!1,size:nt="medium"}=tt,at=_objectWithoutPropertiesLoose(tt,_excluded$E),ht=_extends({},tt,{edge:ct,color:it,disabled:s,disableFocusRipple:et,size:nt}),dt=useUtilityClasses$w(ht);return jsxRuntimeExports.jsx(IconButtonRoot,_extends({className:clsx(dt.root,rt),centerRipple:!0,focusRipple:!et,disabled:s,ref:_e,ownerState:ht},at,{children:gt}))}),IconButton$1=IconButton;function getSvgIconUtilityClass(a){return generateUtilityClass("MuiSvgIcon",a)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$D=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$v=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getSvgIconUtilityClass,tt)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>{var _e,tt,ct,gt,rt,it,s,et,nt,at,ht,dt,pt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:o.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(_e=a.transitions)==null||(tt=_e.create)==null?void 0:tt.call(_e,"fill",{duration:(ct=a.transitions)==null||(ct=ct.duration)==null?void 0:ct.shorter}),fontSize:{inherit:"inherit",small:((gt=a.typography)==null||(rt=gt.pxToRem)==null?void 0:rt.call(gt,20))||"1.25rem",medium:((it=a.typography)==null||(s=it.pxToRem)==null?void 0:s.call(it,24))||"1.5rem",large:((et=a.typography)==null||(nt=et.pxToRem)==null?void 0:nt.call(et,35))||"2.1875rem"}[o.fontSize],color:(at=(ht=(a.vars||a).palette)==null||(ht=ht[o.color])==null?void 0:ht.main)!=null?at:{action:(dt=(a.vars||a).palette)==null||(dt=dt.action)==null?void 0:dt.active,disabled:(pt=(a.vars||a).palette)==null||(pt=pt.action)==null?void 0:pt.disabled,inherit:void 0}[o.color]}}),SvgIcon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSvgIcon"}),{children:ct,className:gt,color:rt="inherit",component:it="svg",fontSize:s="medium",htmlColor:et,inheritViewBox:nt=!1,titleAccess:at,viewBox:ht="0 0 24 24"}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$D),pt=reactExports.isValidElement(ct)&&ct.type==="svg",lt=_extends({},tt,{color:rt,component:it,fontSize:s,instanceFontSize:o.fontSize,inheritViewBox:nt,viewBox:ht,hasSvgAsChild:pt}),mt={};nt||(mt.viewBox=ht);const ot=useUtilityClasses$v(lt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends({as:it,className:clsx(ot.root,gt),focusable:"false",color:et,"aria-hidden":at?void 0:!0,role:at?"img":void 0,ref:_e},mt,dt,pt&&ct.props,{ownerState:lt,children:[pt?ct.props.children:ct,at?jsxRuntimeExports.jsx("title",{children:at}):null]}))});SvgIcon.muiName="SvgIcon";const SvgIcon$1=SvgIcon;function createSvgIcon(a,o){function _e(tt,ct){return jsxRuntimeExports.jsx(SvgIcon$1,_extends({"data-testid":`${o}Icon`,ref:ct},tt,{children:a}))}return _e.muiName=SvgIcon$1.muiName,reactExports.memo(reactExports.forwardRef(_e))}const SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_excluded$C=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],useUtilityClasses$u=a=>{const{variant:o,color:_e,severity:tt,classes:ct}=a,gt={root:["root",`${o}${capitalize(_e||tt)}`,`${o}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(gt,getAlertUtilityClass,ct)},AlertRoot=styled$1(Paper$1,{name:"MuiAlert",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color||_e.severity)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?darken:lighten,tt=a.palette.mode==="light"?lighten:darken,ct=o.color||o.severity;return _extends({},a.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},ct&&o.variant==="standard"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),backgroundColor:a.vars?a.vars.palette.Alert[`${ct}StandardBg`]:tt(a.palette[ct].light,.9),[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="outlined"&&{color:a.vars?a.vars.palette.Alert[`${ct}Color`]:_e(a.palette[ct].light,.6),border:`1px solid ${(a.vars||a).palette[ct].light}`,[`& .${alertClasses$1.icon}`]:a.vars?{color:a.vars.palette.Alert[`${ct}IconColor`]}:{color:a.palette[ct].main}},ct&&o.variant==="filled"&&_extends({fontWeight:a.typography.fontWeightMedium},a.vars?{color:a.vars.palette.Alert[`${ct}FilledColor`],backgroundColor:a.vars.palette.Alert[`${ct}FilledBg`]}:{backgroundColor:a.palette.mode==="dark"?a.palette[ct].dark:a.palette[ct].main,color:a.palette.getContrastText(a.palette[ct].main)}))}),AlertIcon=styled$1("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(a,o)=>o.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled$1("div",{name:"MuiAlert",slot:"Message",overridesResolver:(a,o)=>o.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled$1("div",{name:"MuiAlert",slot:"Action",overridesResolver:(a,o)=>o.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,it,s;const et=useThemeProps({props:o,name:"MuiAlert"}),{action:nt,children:at,className:ht,closeText:dt="Close",color:pt,components:lt={},componentsProps:mt={},icon:ot,iconMapping:ut=defaultIconMapping,onClose:ft,role:bt="alert",severity:vt="success",slotProps:yt={},slots:At={},variant:Nt="standard"}=et,St=_objectWithoutPropertiesLoose(et,_excluded$C),wt=_extends({},et,{color:pt,severity:vt,variant:Nt}),Mt=useUtilityClasses$u(wt),Ht=(tt=(ct=At.closeButton)!=null?ct:lt.CloseButton)!=null?tt:IconButton$1,Ot=(gt=(rt=At.closeIcon)!=null?rt:lt.CloseIcon)!=null?gt:ClearIcon,Dt=(it=yt.closeButton)!=null?it:mt.closeButton,Gt=(s=yt.closeIcon)!=null?s:mt.closeIcon;return jsxRuntimeExports.jsxs(AlertRoot,_extends({role:bt,elevation:0,ownerState:wt,className:clsx(Mt.root,ht),ref:_e},St,{children:[ot!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:wt,className:Mt.icon,children:ot||ut[vt]||defaultIconMapping[vt]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:wt,className:Mt.message,children:at}),nt!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:wt,className:Mt.action,children:nt}):null,nt==null&&ft?jsxRuntimeExports.jsx(AlertAction,{ownerState:wt,className:Mt.action,children:jsxRuntimeExports.jsx(Ht,_extends({size:"small","aria-label":dt,title:dt,color:"inherit",onClick:ft},Dt,{children:jsxRuntimeExports.jsx(Ot,_extends({fontSize:"small"},Gt))}))}):null]}))}),Alert$1=Alert;function getUnit(a){return String(a).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(a){return parseFloat(a)}const _excluded$B=["theme"];function ThemeProvider(a){let{theme:o}=a,_e=_objectWithoutPropertiesLoose(a,_excluded$B);const tt=o[THEME_ID];return jsxRuntimeExports.jsx(ThemeProvider$1,_extends({},_e,{themeId:tt?THEME_ID:void 0,theme:tt||o}))}const defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getCardUtilityClass(a){return generateUtilityClass("MuiCard",a)}generateUtilityClasses("MuiCard",["root"]);const _excluded$A=["className","raised"],useUtilityClasses$t=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardUtilityClass,o)},CardRoot=styled$1(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCard"}),{className:ct,raised:gt=!1}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$A),it=_extends({},tt,{raised:gt}),s=useUtilityClasses$t(it);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(s.root,ct),elevation:gt?8:void 0,ref:_e,ownerState:it},rt))}),Card$1=Card;function getCardContentUtilityClass(a){return generateUtilityClass("MuiCardContent",a)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$z=["className","component"],useUtilityClasses$s=a=>{const{classes:o}=a;return composeClasses({root:["root"]},getCardContentUtilityClass,o)},CardContentRoot=styled$1("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(a,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCardContent"}),{className:ct,component:gt="div"}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$z),it=_extends({},tt,{component:gt}),s=useUtilityClasses$s(it);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:gt,className:clsx(s.root,ct),ownerState:it,ref:_e},rt))}),CardContent$1=CardContent,Container=createContainer({createStyledComponent:styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`maxWidth${capitalize(String(_e.maxWidth))}`],_e.fixed&&o.fixed,_e.disableGutters&&o.disableGutters]}}),useThemeProps:a=>useThemeProps({props:a,name:"MuiContainer"})}),Container$1=Container,StepperContext=reactExports.createContext({}),StepperContext$1=StepperContext,StepContext=reactExports.createContext({}),StepContext$1=StepContext;function getStepUtilityClass(a){return generateUtilityClass("MuiStep",a)}generateUtilityClasses("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const _excluded$y=["active","children","className","component","completed","disabled","expanded","index","last"],useUtilityClasses$r=a=>{const{classes:o,orientation:_e,alternativeLabel:tt,completed:ct}=a;return composeClasses({root:["root",_e,tt&&"alternativeLabel",ct&&"completed"]},getStepUtilityClass,o)},StepRoot=styled$1("div",{name:"MuiStep",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.orientation],_e.alternativeLabel&&o.alternativeLabel,_e.completed&&o.completed]}})(({ownerState:a})=>_extends({},a.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},a.alternativeLabel&&{flex:1,position:"relative"})),Step=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiStep"}),{active:ct,children:gt,className:rt,component:it="div",completed:s,disabled:et,expanded:nt=!1,index:at,last:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$y),{activeStep:pt,connector:lt,alternativeLabel:mt,orientation:ot,nonLinear:ut}=reactExports.useContext(StepperContext$1);let[ft=!1,bt=!1,vt=!1]=[ct,s,et];pt===at?ft=ct!==void 0?ct:!0:!ut&&pt>at?bt=s!==void 0?s:!0:!ut&&pt<at&&(vt=et!==void 0?et:!0);const yt=reactExports.useMemo(()=>({index:at,last:ht,expanded:nt,icon:at+1,active:ft,completed:bt,disabled:vt}),[at,ht,nt,ft,bt,vt]),At=_extends({},tt,{active:ft,orientation:ot,alternativeLabel:mt,completed:bt,disabled:vt,expanded:nt,component:it}),Nt=useUtilityClasses$r(At),St=jsxRuntimeExports.jsxs(StepRoot,_extends({as:it,className:clsx(Nt.root,rt),ref:_e,ownerState:At},dt,{children:[lt&&mt&&at!==0?lt:null,gt]}));return jsxRuntimeExports.jsx(StepContext$1.Provider,{value:yt,children:lt&&!mt&&at!==0?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[lt,St]}):St})}),Step$1=Step;function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var apiRTC_min={exports:{}};(function(a,o){(function(tt){a.exports=tt()})(function(){return function(){function tt(ct,gt,rt){function it(nt,at){if(!gt[nt]){if(!ct[nt]){var ht=typeof commonjsRequire=="function"&&commonjsRequire;if(!at&&ht)return ht(nt,!0);if(s)return s(nt,!0);var dt=new Error("Cannot find module '"+nt+"'");throw dt.code="MODULE_NOT_FOUND",dt}var pt=gt[nt]={exports:{}};ct[nt][0].call(pt.exports,function(lt){return it(ct[nt][1][lt]||lt)},pt,pt.exports,tt,ct,gt,rt)}return gt[nt].exports}for(var s=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<rt.length;et++)it(rt[et]);return it}return tt}()({1:[function(tt,ct,gt){var rt=(0,tt("./adapter_factory.js").adapterFactory)({window});ct.exports=rt},{"./adapter_factory.js":2}],2:[function(tt,ct,gt){function rt(dt){if(dt&&dt.__esModule)return dt;var pt={};if(dt!=null)for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(pt[lt]=dt[lt]);return pt.default=dt,pt}Object.defineProperty(gt,"__esModule",{value:!0}),gt.adapterFactory=function(){var dt=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},lt=it.log,mt=it.detectBrowser(dt),ot={browserDetails:mt,commonShim:ht,extractVersion:it.extractVersion,disableLog:it.disableLog,disableWarnings:it.disableWarnings};switch(mt.browser){case"chrome":if(!s||!s.shimPeerConnection||!pt.shimChrome)return lt("Chrome shim is not included in this adapter release."),ot;lt("adapter.js shimming chrome."),ot.browserShim=s,s.shimGetUserMedia(dt),s.shimMediaStream(dt),s.shimPeerConnection(dt),s.shimOnTrack(dt),s.shimAddTrackRemoveTrack(dt),s.shimGetSendersWithDtmf(dt),s.shimGetStats(dt),s.shimSenderReceiverGetStats(dt),s.fixNegotiationNeeded(dt),ht.shimRTCIceCandidate(dt),ht.shimConnectionState(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt),ht.removeAllowExtmapMixed(dt);break;case"firefox":if(!nt||!nt.shimPeerConnection||!pt.shimFirefox)return lt("Firefox shim is not included in this adapter release."),ot;lt("adapter.js shimming firefox."),ot.browserShim=nt,nt.shimGetUserMedia(dt),nt.shimPeerConnection(dt),nt.shimOnTrack(dt),nt.shimRemoveStream(dt),nt.shimSenderGetStats(dt),nt.shimReceiverGetStats(dt),nt.shimRTCDataChannel(dt),ht.shimRTCIceCandidate(dt),ht.shimConnectionState(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt);break;case"edge":if(!et||!et.shimPeerConnection||!pt.shimEdge)return lt("MS edge shim is not included in this adapter release."),ot;lt("adapter.js shimming edge."),ot.browserShim=et,et.shimGetUserMedia(dt),et.shimGetDisplayMedia(dt),et.shimPeerConnection(dt),et.shimReplaceTrack(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt);break;case"safari":if(!at||!pt.shimSafari)return lt("Safari shim is not included in this adapter release."),ot;lt("adapter.js shimming safari."),ot.browserShim=at,at.shimRTCIceServerUrls(dt),at.shimCreateOfferLegacy(dt),at.shimCallbacksAPI(dt),at.shimLocalStreamsAPI(dt),at.shimRemoteStreamsAPI(dt),at.shimTrackEventTransceiver(dt),at.shimGetUserMedia(dt),ht.shimRTCIceCandidate(dt),ht.shimMaxMessageSize(dt),ht.shimSendThrowTypeError(dt),ht.removeAllowExtmapMixed(dt);break;default:lt("Unsupported browser!")}return ot};var it=rt(tt("./utils")),s=rt(tt("./chrome/chrome_shim")),et=rt(tt("./edge/edge_shim")),nt=rt(tt("./firefox/firefox_shim")),at=rt(tt("./safari/safari_shim")),ht=rt(tt("./common_shim"))},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(tt,ct,gt){function rt(at){at.RTCPeerConnection.prototype.getLocalStreams=function(){var mt=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(ot){return mt._shimmedLocalStreams[ot][0]})};var ht=at.RTCPeerConnection.prototype.addTrack;at.RTCPeerConnection.prototype.addTrack=function(mt,ot){if(!ot)return ht.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ut=ht.apply(this,arguments);return this._shimmedLocalStreams[ot.id]?this._shimmedLocalStreams[ot.id].indexOf(ut)===-1&&this._shimmedLocalStreams[ot.id].push(ut):this._shimmedLocalStreams[ot.id]=[ot,ut],ut};var dt=at.RTCPeerConnection.prototype.addStream;at.RTCPeerConnection.prototype.addStream=function(mt){var ot=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},mt.getTracks().forEach(function(bt){if(ot.getSenders().find(function(vt){return vt.track===bt}))throw new DOMException("Track already exists.","InvalidAccessError")});var ut=this.getSenders();dt.apply(this,arguments);var ft=this.getSenders().filter(function(bt){return ut.indexOf(bt)===-1});this._shimmedLocalStreams[mt.id]=[mt].concat(ft)};var pt=at.RTCPeerConnection.prototype.removeStream;at.RTCPeerConnection.prototype.removeStream=function(mt){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[mt.id],pt.apply(this,arguments)};var lt=at.RTCPeerConnection.prototype.removeTrack;at.RTCPeerConnection.prototype.removeTrack=function(mt){var ot=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},mt&&Object.keys(this._shimmedLocalStreams).forEach(function(ut){var ft=ot._shimmedLocalStreams[ut].indexOf(mt);ft!==-1&&ot._shimmedLocalStreams[ut].splice(ft,1),ot._shimmedLocalStreams[ut].length===1&&delete ot._shimmedLocalStreams[ut]}),lt.apply(this,arguments)}}Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(at){return typeof at}:function(at){return at&&typeof Symbol=="function"&&at.constructor===Symbol&&at!==Symbol.prototype?"symbol":typeof at},s=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});var et=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return et.shimGetDisplayMedia}}),gt.shimMediaStream=function(at){at.MediaStream=at.MediaStream||at.webkitMediaStream},gt.shimOnTrack=function(at){if((at===void 0?"undefined":it(at))!=="object"||!at.RTCPeerConnection||"ontrack"in at.RTCPeerConnection.prototype)nt.wrapPeerConnectionEvent(at,"track",function(dt){return dt.transceiver||Object.defineProperty(dt,"transceiver",{value:{receiver:dt.receiver}}),dt});else{Object.defineProperty(at.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(dt){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=dt)},enumerable:!0,configurable:!0});var ht=at.RTCPeerConnection.prototype.setRemoteDescription;at.RTCPeerConnection.prototype.setRemoteDescription=function(){var dt=this;return this._ontrackpoly||(this._ontrackpoly=function(pt){pt.stream.addEventListener("addtrack",function(lt){var mt=void 0;mt=at.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===lt.track.id}):{track:lt.track};var ot=new Event("track");ot.track=lt.track,ot.receiver=mt,ot.transceiver={receiver:mt},ot.streams=[pt.stream],dt.dispatchEvent(ot)}),pt.stream.getTracks().forEach(function(lt){var mt=void 0;mt=at.RTCPeerConnection.prototype.getReceivers?dt.getReceivers().find(function(ut){return ut.track&&ut.track.id===lt.id}):{track:lt};var ot=new Event("track");ot.track=lt,ot.receiver=mt,ot.transceiver={receiver:mt},ot.streams=[pt.stream],dt.dispatchEvent(ot)})},this.addEventListener("addstream",this._ontrackpoly)),ht.apply(this,arguments)}}},gt.shimGetSendersWithDtmf=function(at){if((at===void 0?"undefined":it(at))==="object"&&at.RTCPeerConnection&&!("getSenders"in at.RTCPeerConnection.prototype)&&"createDTMFSender"in at.RTCPeerConnection.prototype){var ht=function(ut,ft){return{track:ft,get dtmf(){return this._dtmf===void 0&&(ft.kind==="audio"?this._dtmf=ut.createDTMFSender(ft):this._dtmf=null),this._dtmf},_pc:ut}};if(!at.RTCPeerConnection.prototype.getSenders){at.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var dt=at.RTCPeerConnection.prototype.addTrack;at.RTCPeerConnection.prototype.addTrack=function(ut,ft){var bt=dt.apply(this,arguments);return bt||(bt=ht(this,ut),this._senders.push(bt)),bt};var pt=at.RTCPeerConnection.prototype.removeTrack;at.RTCPeerConnection.prototype.removeTrack=function(ut){pt.apply(this,arguments);var ft=this._senders.indexOf(ut);ft!==-1&&this._senders.splice(ft,1)}}var lt=at.RTCPeerConnection.prototype.addStream;at.RTCPeerConnection.prototype.addStream=function(ut){var ft=this;this._senders=this._senders||[],lt.apply(this,[ut]),ut.getTracks().forEach(function(bt){ft._senders.push(ht(ft,bt))})};var mt=at.RTCPeerConnection.prototype.removeStream;at.RTCPeerConnection.prototype.removeStream=function(ut){var ft=this;this._senders=this._senders||[],mt.apply(this,[ut]),ut.getTracks().forEach(function(bt){var vt=ft._senders.find(function(yt){return yt.track===bt});vt&&ft._senders.splice(ft._senders.indexOf(vt),1)})}}else if((at===void 0?"undefined":it(at))==="object"&&at.RTCPeerConnection&&"getSenders"in at.RTCPeerConnection.prototype&&"createDTMFSender"in at.RTCPeerConnection.prototype&&at.RTCRtpSender&&!("dtmf"in at.RTCRtpSender.prototype)){var ot=at.RTCPeerConnection.prototype.getSenders;at.RTCPeerConnection.prototype.getSenders=function(){var ut=this,ft=ot.apply(this,[]);return ft.forEach(function(bt){return bt._pc=ut}),ft},Object.defineProperty(at.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},gt.shimGetStats=function(at){if(at.RTCPeerConnection){var ht=at.RTCPeerConnection.prototype.getStats;at.RTCPeerConnection.prototype.getStats=function(dt,pt,lt){var mt=this,ot=arguments;if(arguments.length>0&&typeof dt=="function")return ht.apply(this,arguments);if(ht.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return ht.apply(this,[]);var ut=function(vt){var yt={};return vt.result().forEach(function(At){var Nt={id:At.id,timestamp:At.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[At.type]||At.type};At.names().forEach(function(St){Nt[St]=At.stat(St)}),yt[Nt.id]=Nt}),yt},ft=function(vt){return new Map(Object.keys(vt).map(function(yt){return[yt,vt[yt]]}))};if(arguments.length>=2){var bt=function(vt){ot[1](ft(ut(vt)))};return ht.apply(this,[bt,arguments[0]])}return new Promise(function(vt,yt){ht.apply(mt,[function(At){vt(ft(ut(At)))},yt])}).then(pt,lt)}}},gt.shimSenderReceiverGetStats=function(at){if((at===void 0?"undefined":it(at))==="object"&&at.RTCPeerConnection&&at.RTCRtpSender&&at.RTCRtpReceiver){if(!("getStats"in at.RTCRtpSender.prototype)){var ht=at.RTCPeerConnection.prototype.getSenders;ht&&(at.RTCPeerConnection.prototype.getSenders=function(){var mt=this,ot=ht.apply(this,[]);return ot.forEach(function(ut){return ut._pc=mt}),ot});var dt=at.RTCPeerConnection.prototype.addTrack;dt&&(at.RTCPeerConnection.prototype.addTrack=function(){var mt=dt.apply(this,arguments);return mt._pc=this,mt}),at.RTCRtpSender.prototype.getStats=function(){var mt=this;return this._pc.getStats().then(function(ot){return nt.filterStats(ot,mt.track,!0)})}}if(!("getStats"in at.RTCRtpReceiver.prototype)){var pt=at.RTCPeerConnection.prototype.getReceivers;pt&&(at.RTCPeerConnection.prototype.getReceivers=function(){var mt=this,ot=pt.apply(this,[]);return ot.forEach(function(ut){return ut._pc=mt}),ot}),nt.wrapPeerConnectionEvent(at,"track",function(mt){return mt.receiver._pc=mt.srcElement,mt}),at.RTCRtpReceiver.prototype.getStats=function(){var mt=this;return this._pc.getStats().then(function(ot){return nt.filterStats(ot,mt.track,!1)})}}if("getStats"in at.RTCRtpSender.prototype&&"getStats"in at.RTCRtpReceiver.prototype){var lt=at.RTCPeerConnection.prototype.getStats;at.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof at.MediaStreamTrack){var mt=arguments[0],ot=void 0,ut=void 0,ft=void 0;return this.getSenders().forEach(function(bt){bt.track===mt&&(ot?ft=!0:ot=bt)}),this.getReceivers().forEach(function(bt){return bt.track===mt&&(ut?ft=!0:ut=bt),bt.track===mt}),ft||ot&&ut?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):ot?ot.getStats():ut?ut.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return lt.apply(this,arguments)}}}},gt.shimAddTrackRemoveTrackWithNative=rt,gt.shimAddTrackRemoveTrack=function(at){function ht(bt,vt){var yt=vt.sdp;return Object.keys(bt._reverseStreams||[]).forEach(function(At){var Nt=bt._reverseStreams[At],St=bt._streams[Nt.id];yt=yt.replace(new RegExp(St.id,"g"),Nt.id)}),new RTCSessionDescription({type:vt.type,sdp:yt})}function dt(bt,vt){var yt=vt.sdp;return Object.keys(bt._reverseStreams||[]).forEach(function(At){var Nt=bt._reverseStreams[At],St=bt._streams[Nt.id];yt=yt.replace(new RegExp(Nt.id,"g"),St.id)}),new RTCSessionDescription({type:vt.type,sdp:yt})}if(at.RTCPeerConnection){var pt=nt.detectBrowser(at);if(at.RTCPeerConnection.prototype.addTrack&&pt.version>=65)return rt(at);var lt=at.RTCPeerConnection.prototype.getLocalStreams;at.RTCPeerConnection.prototype.getLocalStreams=function(){var bt=this,vt=lt.apply(this);return this._reverseStreams=this._reverseStreams||{},vt.map(function(yt){return bt._reverseStreams[yt.id]})};var mt=at.RTCPeerConnection.prototype.addStream;at.RTCPeerConnection.prototype.addStream=function(bt){var vt=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},bt.getTracks().forEach(function(At){if(vt.getSenders().find(function(Nt){return Nt.track===At}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[bt.id]){var yt=new at.MediaStream(bt.getTracks());this._streams[bt.id]=yt,this._reverseStreams[yt.id]=bt,bt=yt}mt.apply(this,[bt])};var ot=at.RTCPeerConnection.prototype.removeStream;at.RTCPeerConnection.prototype.removeStream=function(bt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ot.apply(this,[this._streams[bt.id]||bt]),delete this._reverseStreams[this._streams[bt.id]?this._streams[bt.id].id:bt.id],delete this._streams[bt.id]},at.RTCPeerConnection.prototype.addTrack=function(bt,vt){var yt=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var At=[].slice.call(arguments,1);if(At.length!==1||!At[0].getTracks().find(function(wt){return wt===bt}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(wt){return wt.track===bt}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var Nt=this._streams[vt.id];if(Nt)Nt.addTrack(bt),Promise.resolve().then(function(){yt.dispatchEvent(new Event("negotiationneeded"))});else{var St=new at.MediaStream([bt]);this._streams[vt.id]=St,this._reverseStreams[St.id]=vt,this.addStream(St)}return this.getSenders().find(function(wt){return wt.track===bt})},["createOffer","createAnswer"].forEach(function(bt){var vt=at.RTCPeerConnection.prototype[bt];at.RTCPeerConnection.prototype[bt]=function(){var yt=this,At=arguments;return arguments.length&&typeof arguments[0]=="function"?vt.apply(this,[function(Nt){var St=ht(yt,Nt);At[0].apply(null,[St])},function(Nt){At[1]&&At[1].apply(null,Nt)},arguments[2]]):vt.apply(this,arguments).then(function(Nt){return ht(yt,Nt)})}});var ut=at.RTCPeerConnection.prototype.setLocalDescription;at.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=dt(this,arguments[0]),ut.apply(this,arguments)):ut.apply(this,arguments)};var ft=Object.getOwnPropertyDescriptor(at.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(at.RTCPeerConnection.prototype,"localDescription",{get:function(){var bt=ft.get.apply(this);return bt.type===""?bt:ht(this,bt)}}),at.RTCPeerConnection.prototype.removeTrack=function(bt){var vt=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!bt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(bt._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var yt=void 0;Object.keys(this._streams).forEach(function(At){vt._streams[At].getTracks().find(function(Nt){return bt.track===Nt})&&(yt=vt._streams[At])}),yt&&(yt.getTracks().length===1?this.removeStream(this._reverseStreams[yt.id]):yt.removeTrack(bt.track),this.dispatchEvent(new Event("negotiationneeded")))}}},gt.shimPeerConnection=function(at){if(!at.RTCPeerConnection&&at.webkitRTCPeerConnection&&(at.RTCPeerConnection=at.webkitRTCPeerConnection),at.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(dt){var pt=at.RTCPeerConnection.prototype[dt];at.RTCPeerConnection.prototype[dt]=function(){return arguments[0]=new(dt==="addIceCandidate"?at.RTCIceCandidate:at.RTCSessionDescription)(arguments[0]),pt.apply(this,arguments)}});var ht=at.RTCPeerConnection.prototype.addIceCandidate;at.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ht.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},gt.fixNegotiationNeeded=function(at){nt.wrapPeerConnectionEvent(at,"negotiationneeded",function(ht){if(ht.target.signalingState==="stable")return ht})};var nt=function(at){if(at&&at.__esModule)return at;var ht={};if(at!=null)for(var dt in at)Object.prototype.hasOwnProperty.call(at,dt)&&(ht[dt]=at[dt]);return ht.default=at,ht}(tt("../utils.js"))},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt,it){rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||rt.navigator.mediaDevices&&(typeof it=="function"?rt.navigator.mediaDevices.getDisplayMedia=function(s){return it(s).then(function(et){var nt=s.video&&s.video.width,at=s.video&&s.video.height,ht=s.video&&s.video.frameRate;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:et,maxFrameRate:ht||3}},nt&&(s.video.mandatory.maxWidth=nt),at&&(s.video.mandatory.maxHeight=at),rt.navigator.mediaDevices.getUserMedia(s)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimGetUserMedia=function(et){var nt=et&&et.navigator;if(nt.mediaDevices){var at=it.detectBrowser(et),ht=function(mt){if((mt===void 0?"undefined":rt(mt))!=="object"||mt.mandatory||mt.optional)return mt;var ot={};return Object.keys(mt).forEach(function(ut){if(ut!=="require"&&ut!=="advanced"&&ut!=="mediaSource"){var ft=rt(mt[ut])==="object"?mt[ut]:{ideal:mt[ut]};ft.exact!==void 0&&typeof ft.exact=="number"&&(ft.min=ft.max=ft.exact);var bt=function(yt,At){return yt?yt+At.charAt(0).toUpperCase()+At.slice(1):At==="deviceId"?"sourceId":At};if(ft.ideal!==void 0){ot.optional=ot.optional||[];var vt={};typeof ft.ideal=="number"?(vt[bt("min",ut)]=ft.ideal,ot.optional.push(vt),(vt={})[bt("max",ut)]=ft.ideal,ot.optional.push(vt)):(vt[bt("",ut)]=ft.ideal,ot.optional.push(vt))}ft.exact!==void 0&&typeof ft.exact!="number"?(ot.mandatory=ot.mandatory||{},ot.mandatory[bt("",ut)]=ft.exact):["min","max"].forEach(function(yt){ft[yt]!==void 0&&(ot.mandatory=ot.mandatory||{},ot.mandatory[bt(yt,ut)]=ft[yt])})}}),mt.advanced&&(ot.optional=(ot.optional||[]).concat(mt.advanced)),ot},dt=function(mt,ot){if(at.version>=61)return ot(mt);if((mt=JSON.parse(JSON.stringify(mt)))&&rt(mt.audio)==="object"){var ut=function(yt,At,Nt){At in yt&&!(Nt in yt)&&(yt[Nt]=yt[At],delete yt[At])};ut((mt=JSON.parse(JSON.stringify(mt))).audio,"autoGainControl","googAutoGainControl"),ut(mt.audio,"noiseSuppression","googNoiseSuppression"),mt.audio=ht(mt.audio)}if(mt&&rt(mt.video)==="object"){var ft=mt.video.facingMode;ft=ft&&((ft===void 0?"undefined":rt(ft))==="object"?ft:{ideal:ft});var bt=at.version<66;if(ft&&(ft.exact==="user"||ft.exact==="environment"||ft.ideal==="user"||ft.ideal==="environment")&&(!nt.mediaDevices.getSupportedConstraints||!nt.mediaDevices.getSupportedConstraints().facingMode||bt)){delete mt.video.facingMode;var vt=void 0;if(ft.exact==="environment"||ft.ideal==="environment"?vt=["back","rear"]:ft.exact!=="user"&&ft.ideal!=="user"||(vt=["front"]),vt)return nt.mediaDevices.enumerateDevices().then(function(yt){var At=(yt=yt.filter(function(Nt){return Nt.kind==="videoinput"})).find(function(Nt){return vt.some(function(St){return Nt.label.toLowerCase().includes(St)})});return!At&&yt.length&&vt.includes("back")&&(At=yt[yt.length-1]),At&&(mt.video.deviceId=ft.exact?{exact:At.deviceId}:{ideal:At.deviceId}),mt.video=ht(mt.video),s("chrome: "+JSON.stringify(mt)),ot(mt)})}mt.video=ht(mt.video)}return s("chrome: "+JSON.stringify(mt)),ot(mt)},pt=function(mt){return at.version>=64?mt:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[mt.name]||mt.name,message:mt.message,constraint:mt.constraint||mt.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(nt.getUserMedia=(function(mt,ot,ut){dt(mt,function(ft){nt.webkitGetUserMedia(ft,ot,function(bt){ut&&ut(pt(bt))})})}).bind(nt),nt.mediaDevices.getUserMedia){var lt=nt.mediaDevices.getUserMedia.bind(nt.mediaDevices);nt.mediaDevices.getUserMedia=function(mt){return dt(mt,function(ot){return lt(ot).then(function(ut){if(ot.audio&&!ut.getAudioTracks().length||ot.video&&!ut.getVideoTracks().length)throw ut.getTracks().forEach(function(ft){ft.stop()}),new DOMException("","NotFoundError");return ut},function(ut){return Promise.reject(pt(ut))})})}}}};var it=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var at in et)Object.prototype.hasOwnProperty.call(et,at)&&(nt[at]=et[at]);return nt.default=et,nt}(tt("../utils.js")),s=it.log},{"../utils.js":15}],6:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimRTCIceCandidate=function(et){if(et.RTCIceCandidate&&!(et.RTCIceCandidate&&"foundation"in et.RTCIceCandidate.prototype)){var nt=et.RTCIceCandidate;et.RTCIceCandidate=function(at){if((at===void 0?"undefined":rt(at))==="object"&&at.candidate&&at.candidate.indexOf("a=")===0&&((at=JSON.parse(JSON.stringify(at))).candidate=at.candidate.substr(2)),at.candidate&&at.candidate.length){var ht=new nt(at),dt=it.default.parseCandidate(at.candidate),pt=Object.assign(ht,dt);return pt.toJSON=function(){return{candidate:pt.candidate,sdpMid:pt.sdpMid,sdpMLineIndex:pt.sdpMLineIndex,usernameFragment:pt.usernameFragment}},pt}return new nt(at)},et.RTCIceCandidate.prototype=nt.prototype,s.wrapPeerConnectionEvent(et,"icecandidate",function(at){return at.candidate&&Object.defineProperty(at,"candidate",{value:new et.RTCIceCandidate(at.candidate),writable:"false"}),at})}},gt.shimMaxMessageSize=function(et){if(!et.RTCSctpTransport&&et.RTCPeerConnection){var nt=s.detectBrowser(et);"sctp"in et.RTCPeerConnection.prototype||Object.defineProperty(et.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var at=function(mt){if(!mt||!mt.sdp)return!1;var ot=it.default.splitSections(mt.sdp);return ot.shift(),ot.some(function(ut){var ft=it.default.parseMLine(ut);return ft&&ft.kind==="application"&&ft.protocol.indexOf("SCTP")!==-1})},ht=function(mt){var ot=mt.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(ot===null||ot.length<2)return-1;var ut=parseInt(ot[1],10);return ut!==ut?-1:ut},dt=function(mt){var ot=65536;return nt.browser==="firefox"&&(ot=nt.version<57?mt===-1?16384:2147483637:nt.version<60?nt.version===57?65535:65536:2147483637),ot},pt=function(mt,ot){var ut=65536;nt.browser==="firefox"&&nt.version===57&&(ut=65535);var ft=it.default.matchPrefix(mt.sdp,"a=max-message-size:");return ft.length>0?ut=parseInt(ft[0].substr(19),10):nt.browser==="firefox"&&ot!==-1&&(ut=2147483637),ut},lt=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,at(arguments[0])){var mt=ht(arguments[0]),ot=dt(mt),ut=pt(arguments[0],mt),ft=void 0;ft=ot===0&&ut===0?Number.POSITIVE_INFINITY:ot===0||ut===0?Math.max(ot,ut):Math.min(ot,ut);var bt={};Object.defineProperty(bt,"maxMessageSize",{get:function(){return ft}}),this._sctp=bt}return lt.apply(this,arguments)}}},gt.shimSendThrowTypeError=function(et){function nt(ht,dt){var pt=ht.send;ht.send=function(){var lt=arguments[0],mt=lt.length||lt.size||lt.byteLength;if(ht.readyState==="open"&&dt.sctp&&mt>dt.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+dt.sctp.maxMessageSize+" bytes)");return pt.apply(ht,arguments)}}if(et.RTCPeerConnection&&"createDataChannel"in et.RTCPeerConnection.prototype){var at=et.RTCPeerConnection.prototype.createDataChannel;et.RTCPeerConnection.prototype.createDataChannel=function(){var ht=at.apply(this,arguments);return nt(ht,this),ht},s.wrapPeerConnectionEvent(et,"datachannel",function(ht){return nt(ht.channel,ht.target),ht})}},gt.shimConnectionState=function(et){if(et.RTCPeerConnection&&!("connectionState"in et.RTCPeerConnection.prototype)){var nt=et.RTCPeerConnection.prototype;Object.defineProperty(nt,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(nt,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(at){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),at&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=at)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(at){var ht=nt[at];nt[at]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(dt){var pt=dt.target;if(pt._lastConnectionState!==pt.connectionState){pt._lastConnectionState=pt.connectionState;var lt=new Event("connectionstatechange",dt);pt.dispatchEvent(lt)}return dt},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),ht.apply(this,arguments)}})}},gt.removeAllowExtmapMixed=function(et){if(et.RTCPeerConnection){var nt=s.detectBrowser(et);if(!(nt.browser==="chrome"&&nt.version>=71||nt.browser==="safari"&&nt.version>=605)){var at=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(ht){return ht&&ht.sdp&&ht.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(ht.sdp=ht.sdp.split(`
`).filter(function(dt){return dt.trim()!=="a=extmap-allow-mixed"}).join(`
`)),at.apply(this,arguments)}}}};var it=function(et){return et&&et.__esModule?et:{default:et}}(tt("sdp")),s=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var at in et)Object.prototype.hasOwnProperty.call(et,at)&&(nt[at]=et[at]);return nt.default=et,nt}(tt("./utils"))},{"./utils":15,sdp:17}],7:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var rt=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return rt.shimGetUserMedia}});var it=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return it.shimGetDisplayMedia}}),gt.shimPeerConnection=function(at){var ht=s.detectBrowser(at);if(at.RTCIceGatherer&&(at.RTCIceCandidate||(at.RTCIceCandidate=function(lt){return lt}),at.RTCSessionDescription||(at.RTCSessionDescription=function(lt){return lt}),ht.version<15025)){var dt=Object.getOwnPropertyDescriptor(at.MediaStreamTrack.prototype,"enabled");Object.defineProperty(at.MediaStreamTrack.prototype,"enabled",{set:function(lt){dt.set.call(this,lt);var mt=new Event("enabled");mt.enabled=lt,this.dispatchEvent(mt)}})}!at.RTCRtpSender||"dtmf"in at.RTCRtpSender.prototype||Object.defineProperty(at.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new at.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),at.RTCDtmfSender&&!at.RTCDTMFSender&&(at.RTCDTMFSender=at.RTCDtmfSender);var pt=(0,nt.default)(at,ht.version);at.RTCPeerConnection=function(lt){return lt&&lt.iceServers&&(lt.iceServers=(0,et.filterIceServers)(lt.iceServers,ht.version),s.log("ICE servers after filtering:",lt.iceServers)),new pt(lt)},at.RTCPeerConnection.prototype=pt.prototype},gt.shimReplaceTrack=function(at){!at.RTCRtpSender||"replaceTrack"in at.RTCRtpSender.prototype||(at.RTCRtpSender.prototype.replaceTrack=at.RTCRtpSender.prototype.setTrack)};var s=function(at){if(at&&at.__esModule)return at;var ht={};if(at!=null)for(var dt in at)Object.prototype.hasOwnProperty.call(at,dt)&&(ht[dt]=at[dt]);return ht.default=at,ht}(tt("../utils")),et=tt("./filtericeservers"),nt=function(at){return at&&at.__esModule?at:{default:at}}(tt("rtcpeerconnection-shim"))},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.filterIceServers=function(it,s){var et=!1;return(it=JSON.parse(JSON.stringify(it))).filter(function(nt){if(nt&&(nt.urls||nt.url)){var at=nt.urls||nt.url;nt.url&&!nt.urls&&rt.deprecated("RTCIceServer.url","RTCIceServer.urls");var ht=typeof at=="string";return ht&&(at=[at]),at=at.filter(function(dt){if(dt.indexOf("stun:")===0)return!1;var pt=dt.startsWith("turn")&&!dt.startsWith("turn:[")&&dt.includes("transport=udp");return pt&&!et?(et=!0,!0):pt&&!et}),delete nt.url,nt.urls=ht?at[0]:at,!!at.length}})};var rt=function(it){if(it&&it.__esModule)return it;var s={};if(it!=null)for(var et in it)Object.prototype.hasOwnProperty.call(it,et)&&(s[et]=it[et]);return s.default=it,s}(tt("../utils"))},{"../utils":15}],9:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt){"getDisplayMedia"in rt.navigator&&rt.navigator.mediaDevices&&(rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||(rt.navigator.mediaDevices.getDisplayMedia=rt.navigator.getDisplayMedia.bind(rt.navigator)))}},{}],10:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetUserMedia=function(rt){var it=rt&&rt.navigator,s=function(nt){return{name:{PermissionDeniedError:"NotAllowedError"}[nt.name]||nt.name,message:nt.message,constraint:nt.constraint,toString:function(){return this.name}}},et=it.mediaDevices.getUserMedia.bind(it.mediaDevices);it.mediaDevices.getUserMedia=function(nt){return et(nt).catch(function(at){return Promise.reject(s(at))})}}},{}],11:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=gt.shimGetUserMedia=void 0;var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},it=tt("./getusermedia");Object.defineProperty(gt,"shimGetUserMedia",{enumerable:!0,get:function(){return it.shimGetUserMedia}});var s=tt("./getdisplaymedia");Object.defineProperty(gt,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}}),gt.shimOnTrack=function(nt){(nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCTrackEvent&&"receiver"in nt.RTCTrackEvent.prototype&&!("transceiver"in nt.RTCTrackEvent.prototype)&&Object.defineProperty(nt.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},gt.shimPeerConnection=function(nt){var at=et.detectBrowser(nt);if((nt===void 0?"undefined":rt(nt))==="object"&&(nt.RTCPeerConnection||nt.mozRTCPeerConnection)){!nt.RTCPeerConnection&&nt.mozRTCPeerConnection&&(nt.RTCPeerConnection=nt.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(lt){var mt=nt.RTCPeerConnection.prototype[lt];nt.RTCPeerConnection.prototype[lt]=function(){return arguments[0]=new(lt==="addIceCandidate"?nt.RTCIceCandidate:nt.RTCSessionDescription)(arguments[0]),mt.apply(this,arguments)}});var ht=nt.RTCPeerConnection.prototype.addIceCandidate;nt.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?ht.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var dt={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},pt=nt.RTCPeerConnection.prototype.getStats;nt.RTCPeerConnection.prototype.getStats=function(lt,mt,ot){return pt.apply(this,[lt||null]).then(function(ut){if(at.version<53&&!mt)try{ut.forEach(function(ft){ft.type=dt[ft.type]||ft.type})}catch(ft){if(ft.name!=="TypeError")throw ft;ut.forEach(function(bt,vt){ut.set(vt,Object.assign({},bt,{type:dt[bt.type]||bt.type}))})}return ut}).then(mt,ot)}}},gt.shimSenderGetStats=function(nt){if((nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCPeerConnection&&nt.RTCRtpSender&&!(nt.RTCRtpSender&&"getStats"in nt.RTCRtpSender.prototype)){var at=nt.RTCPeerConnection.prototype.getSenders;at&&(nt.RTCPeerConnection.prototype.getSenders=function(){var dt=this,pt=at.apply(this,[]);return pt.forEach(function(lt){return lt._pc=dt}),pt});var ht=nt.RTCPeerConnection.prototype.addTrack;ht&&(nt.RTCPeerConnection.prototype.addTrack=function(){var dt=ht.apply(this,arguments);return dt._pc=this,dt}),nt.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},gt.shimReceiverGetStats=function(nt){if((nt===void 0?"undefined":rt(nt))==="object"&&nt.RTCPeerConnection&&nt.RTCRtpSender&&!(nt.RTCRtpSender&&"getStats"in nt.RTCRtpReceiver.prototype)){var at=nt.RTCPeerConnection.prototype.getReceivers;at&&(nt.RTCPeerConnection.prototype.getReceivers=function(){var ht=this,dt=at.apply(this,[]);return dt.forEach(function(pt){return pt._pc=ht}),dt}),et.wrapPeerConnectionEvent(nt,"track",function(ht){return ht.receiver._pc=ht.srcElement,ht}),nt.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},gt.shimRemoveStream=function(nt){!nt.RTCPeerConnection||"removeStream"in nt.RTCPeerConnection.prototype||(nt.RTCPeerConnection.prototype.removeStream=function(at){var ht=this;et.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(dt){dt.track&&at.getTracks().includes(dt.track)&&ht.removeTrack(dt)})})},gt.shimRTCDataChannel=function(nt){nt.DataChannel&&!nt.RTCDataChannel&&(nt.RTCDataChannel=nt.DataChannel)};var et=function(nt){if(nt&&nt.__esModule)return nt;var at={};if(nt!=null)for(var ht in nt)Object.prototype.hasOwnProperty.call(nt,ht)&&(at[ht]=nt[ht]);return at.default=nt,at}(tt("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0}),gt.shimGetDisplayMedia=function(rt,it){rt.navigator.mediaDevices&&"getDisplayMedia"in rt.navigator.mediaDevices||rt.navigator.mediaDevices&&(rt.navigator.mediaDevices.getDisplayMedia=function(s){if(!s||!s.video){var et=new DOMException("getDisplayMedia without video constraints is undefined");return et.name="NotFoundError",et.code=8,Promise.reject(et)}return s.video===!0?s.video={mediaSource:it}:s.video.mediaSource=it,rt.navigator.mediaDevices.getUserMedia(s)})}},{}],13:[function(tt,ct,gt){Object.defineProperty(gt,"__esModule",{value:!0});var rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};gt.shimGetUserMedia=function(s){var et=it.detectBrowser(s),nt=s&&s.navigator,at=s&&s.MediaStreamTrack;if(nt.getUserMedia=function(mt,ot,ut){it.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),nt.mediaDevices.getUserMedia(mt).then(ot,ut)},!(et.version>55&&"autoGainControl"in nt.mediaDevices.getSupportedConstraints())){var ht=function(mt,ot,ut){ot in mt&&!(ut in mt)&&(mt[ut]=mt[ot],delete mt[ot])},dt=nt.mediaDevices.getUserMedia.bind(nt.mediaDevices);if(nt.mediaDevices.getUserMedia=function(mt){return(mt===void 0?"undefined":rt(mt))==="object"&&rt(mt.audio)==="object"&&(mt=JSON.parse(JSON.stringify(mt)),ht(mt.audio,"autoGainControl","mozAutoGainControl"),ht(mt.audio,"noiseSuppression","mozNoiseSuppression")),dt(mt)},at&&at.prototype.getSettings){var pt=at.prototype.getSettings;at.prototype.getSettings=function(){var mt=pt.apply(this,arguments);return ht(mt,"mozAutoGainControl","autoGainControl"),ht(mt,"mozNoiseSuppression","noiseSuppression"),mt}}if(at&&at.prototype.applyConstraints){var lt=at.prototype.applyConstraints;at.prototype.applyConstraints=function(mt){return this.kind==="audio"&&(mt===void 0?"undefined":rt(mt))==="object"&&(mt=JSON.parse(JSON.stringify(mt)),ht(mt,"autoGainControl","mozAutoGainControl"),ht(mt,"noiseSuppression","mozNoiseSuppression")),lt.apply(this,[mt])}}}};var it=function(s){if(s&&s.__esModule)return s;var et={};if(s!=null)for(var nt in s)Object.prototype.hasOwnProperty.call(s,nt)&&(et[nt]=s[nt]);return et.default=s,et}(tt("../utils"))},{"../utils":15}],14:[function(tt,ct,gt){function rt(et){return et&&et.video!==void 0?Object.assign({},et,{video:s.compactObject(et.video)}):et}Object.defineProperty(gt,"__esModule",{value:!0});var it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et};gt.shimLocalStreamsAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection){if("getLocalStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in et.RTCPeerConnection.prototype)){var nt=et.RTCPeerConnection.prototype.addTrack;et.RTCPeerConnection.prototype.addStream=function(at){var ht=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(at)||this._localStreams.push(at),at.getTracks().forEach(function(dt){return nt.call(ht,dt,at)})},et.RTCPeerConnection.prototype.addTrack=function(at,ht){return ht&&(this._localStreams?this._localStreams.includes(ht)||this._localStreams.push(ht):this._localStreams=[ht]),nt.call(this,at,ht)}}"removeStream"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.removeStream=function(at){var ht=this;this._localStreams||(this._localStreams=[]);var dt=this._localStreams.indexOf(at);if(dt!==-1){this._localStreams.splice(dt,1);var pt=at.getTracks();this.getSenders().forEach(function(lt){pt.includes(lt.track)&&ht.removeTrack(lt)})}})}},gt.shimRemoteStreamsAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection&&("getRemoteStreams"in et.RTCPeerConnection.prototype||(et.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in et.RTCPeerConnection.prototype))){Object.defineProperty(et.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(at){var ht=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=at),this.addEventListener("track",this._onaddstreampoly=function(dt){dt.streams.forEach(function(pt){if(ht._remoteStreams||(ht._remoteStreams=[]),!ht._remoteStreams.includes(pt)){ht._remoteStreams.push(pt);var lt=new Event("addstream");lt.stream=pt,ht.dispatchEvent(lt)}})})}});var nt=et.RTCPeerConnection.prototype.setRemoteDescription;et.RTCPeerConnection.prototype.setRemoteDescription=function(){var at=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(ht){ht.streams.forEach(function(dt){if(at._remoteStreams||(at._remoteStreams=[]),!(at._remoteStreams.indexOf(dt)>=0)){at._remoteStreams.push(dt);var pt=new Event("addstream");pt.stream=dt,at.dispatchEvent(pt)}})}),nt.apply(at,arguments)}}},gt.shimCallbacksAPI=function(et){if((et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection){var nt=et.RTCPeerConnection.prototype,at=nt.createOffer,ht=nt.createAnswer,dt=nt.setLocalDescription,pt=nt.setRemoteDescription,lt=nt.addIceCandidate;nt.createOffer=function(ot,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],bt=at.apply(this,[ft]);return ut?(bt.then(ot,ut),Promise.resolve()):bt},nt.createAnswer=function(ot,ut){var ft=arguments.length>=2?arguments[2]:arguments[0],bt=ht.apply(this,[ft]);return ut?(bt.then(ot,ut),Promise.resolve()):bt};var mt=function(ot,ut,ft){var bt=dt.apply(this,[ot]);return ft?(bt.then(ut,ft),Promise.resolve()):bt};nt.setLocalDescription=mt,mt=function(ot,ut,ft){var bt=pt.apply(this,[ot]);return ft?(bt.then(ut,ft),Promise.resolve()):bt},nt.setRemoteDescription=mt,mt=function(ot,ut,ft){var bt=lt.apply(this,[ot]);return ft?(bt.then(ut,ft),Promise.resolve()):bt},nt.addIceCandidate=mt}},gt.shimGetUserMedia=function(et){var nt=et&&et.navigator;if(nt.mediaDevices&&nt.mediaDevices.getUserMedia){var at=nt.mediaDevices,ht=at.getUserMedia.bind(at);nt.mediaDevices.getUserMedia=function(dt){return ht(rt(dt))}}!nt.getUserMedia&&nt.mediaDevices&&nt.mediaDevices.getUserMedia&&(nt.getUserMedia=(function(dt,pt,lt){nt.mediaDevices.getUserMedia(dt).then(pt,lt)}).bind(nt))},gt.shimConstraints=rt,gt.shimRTCIceServerUrls=function(et){var nt=et.RTCPeerConnection;et.RTCPeerConnection=function(at,ht){if(at&&at.iceServers){for(var dt=[],pt=0;pt<at.iceServers.length;pt++){var lt=at.iceServers[pt];!lt.hasOwnProperty("urls")&&lt.hasOwnProperty("url")?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),(lt=JSON.parse(JSON.stringify(lt))).urls=lt.url,delete lt.url,dt.push(lt)):dt.push(at.iceServers[pt])}at.iceServers=dt}return new nt(at,ht)},et.RTCPeerConnection.prototype=nt.prototype,"generateCertificate"in et.RTCPeerConnection&&Object.defineProperty(et.RTCPeerConnection,"generateCertificate",{get:function(){return nt.generateCertificate}})},gt.shimTrackEventTransceiver=function(et){(et===void 0?"undefined":it(et))==="object"&&et.RTCPeerConnection&&"receiver"in et.RTCTrackEvent.prototype&&!et.RTCTransceiver&&Object.defineProperty(et.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},gt.shimCreateOfferLegacy=function(et){var nt=et.RTCPeerConnection.prototype.createOffer;et.RTCPeerConnection.prototype.createOffer=function(at){if(at){at.offerToReceiveAudio!==void 0&&(at.offerToReceiveAudio=!!at.offerToReceiveAudio);var ht=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="audio"});at.offerToReceiveAudio===!1&&ht?ht.direction==="sendrecv"?ht.setDirection?ht.setDirection("sendonly"):ht.direction="sendonly":ht.direction==="recvonly"&&(ht.setDirection?ht.setDirection("inactive"):ht.direction="inactive"):at.offerToReceiveAudio!==!0||ht||this.addTransceiver("audio"),at.offerToReceiveVideo!==void 0&&(at.offerToReceiveVideo=!!at.offerToReceiveVideo);var dt=this.getTransceivers().find(function(pt){return pt.receiver.track.kind==="video"});at.offerToReceiveVideo===!1&&dt?dt.direction==="sendrecv"?dt.setDirection?dt.setDirection("sendonly"):dt.direction="sendonly":dt.direction==="recvonly"&&(dt.setDirection?dt.setDirection("inactive"):dt.direction="inactive"):at.offerToReceiveVideo!==!0||dt||this.addTransceiver("video")}return nt.apply(this,arguments)}};var s=function(et){if(et&&et.__esModule)return et;var nt={};if(et!=null)for(var at in et)Object.prototype.hasOwnProperty.call(et,at)&&(nt[at]=et[at]);return nt.default=et,nt}(tt("../utils"))},{"../utils":15}],15:[function(tt,ct,gt){function rt(dt,pt,lt){return pt in dt?Object.defineProperty(dt,pt,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[pt]=lt,dt}function it(dt,pt,lt){var mt=dt.match(pt);return mt&&mt.length>=lt&&parseInt(mt[lt],10)}function s(dt){return(dt===void 0?"undefined":nt(dt))!=="object"?dt:Object.keys(dt).reduce(function(pt,lt){var mt=nt(dt[lt])==="object",ot=mt?s(dt[lt]):dt[lt],ut=mt&&!Object.keys(ot).length;return ot===void 0||ut?pt:Object.assign(pt,rt({},lt,ot))},{})}function et(dt,pt,lt){pt&&!lt.has(pt.id)&&(lt.set(pt.id,pt),Object.keys(pt).forEach(function(mt){mt.endsWith("Id")?et(dt,dt.get(pt[mt]),lt):mt.endsWith("Ids")&&pt[mt].forEach(function(ot){et(dt,dt.get(ot),lt)})}))}Object.defineProperty(gt,"__esModule",{value:!0});var nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dt){return typeof dt}:function(dt){return dt&&typeof Symbol=="function"&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt};gt.extractVersion=it,gt.wrapPeerConnectionEvent=function(dt,pt,lt){if(dt.RTCPeerConnection){var mt=dt.RTCPeerConnection.prototype,ot=mt.addEventListener;mt.addEventListener=function(ft,bt){if(ft!==pt)return ot.apply(this,arguments);var vt=function(yt){var At=lt(yt);At&&bt(At)};return this._eventMap=this._eventMap||{},this._eventMap[bt]=vt,ot.apply(this,[ft,vt])};var ut=mt.removeEventListener;mt.removeEventListener=function(ft,bt){if(ft!==pt||!this._eventMap||!this._eventMap[bt])return ut.apply(this,arguments);var vt=this._eventMap[bt];return delete this._eventMap[bt],ut.apply(this,[ft,vt])},Object.defineProperty(mt,"on"+pt,{get:function(){return this["_on"+pt]},set:function(ft){this["_on"+pt]&&(this.removeEventListener(pt,this["_on"+pt]),delete this["_on"+pt]),ft&&this.addEventListener(pt,this["_on"+pt]=ft)},enumerable:!0,configurable:!0})}},gt.disableLog=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":nt(dt))+". Please use a boolean."):(at=dt,dt?"adapter.js logging disabled":"adapter.js logging enabled")},gt.disableWarnings=function(dt){return typeof dt!="boolean"?new Error("Argument type: "+(dt===void 0?"undefined":nt(dt))+". Please use a boolean."):(ht=!dt,"adapter.js deprecation warnings "+(dt?"disabled":"enabled"))},gt.log=function(){if((typeof window>"u"?"undefined":nt(window))==="object"){if(at)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},gt.deprecated=function(dt,pt){ht&&console.warn(dt+" is deprecated, please use "+pt+" instead.")},gt.detectBrowser=function(dt){var pt=dt.navigator,lt={browser:null,version:null};if(dt===void 0||!dt.navigator)return lt.browser="Not a browser.",lt;if(pt.mozGetUserMedia)lt.browser="firefox",lt.version=it(pt.userAgent,/Firefox\/(\d+)\./,1);else if(pt.webkitGetUserMedia||dt.isSecureContext===!1&&dt.webkitRTCPeerConnection&&!dt.RTCIceGatherer)lt.browser="chrome",lt.version=it(pt.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(pt.mediaDevices&&pt.userAgent.match(/Edge\/(\d+).(\d+)$/))lt.browser="edge",lt.version=it(pt.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!dt.RTCPeerConnection||!pt.userAgent.match(/AppleWebKit\/(\d+)\./))return lt.browser="Not a supported browser.",lt;lt.browser="safari",lt.version=it(pt.userAgent,/AppleWebKit\/(\d+)\./,1)}return lt},gt.compactObject=s,gt.walkStats=et,gt.filterStats=function(dt,pt,lt){var mt=lt?"outbound-rtp":"inbound-rtp",ot=new Map;if(pt===null)return ot;var ut=[];return dt.forEach(function(ft){ft.type==="track"&&ft.trackIdentifier===pt.id&&ut.push(ft)}),ut.forEach(function(ft){dt.forEach(function(bt){bt.type===mt&&bt.trackId===ft.id&&et(dt,bt,ot)})}),ot};var at=!0,ht=!0},{}],16:[function(tt,ct,gt){function rt(pt){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[pt.type]||pt.type}function it(pt,lt,mt,ot,ut){var ft=dt.writeRtpDescription(pt.kind,lt);if(ft+=dt.writeIceParameters(pt.iceGatherer.getLocalParameters()),ft+=dt.writeDtlsParameters(pt.dtlsTransport.getLocalParameters(),mt==="offer"?"actpass":ut||"active"),ft+="a=mid:"+pt.mid+`\r
`,pt.rtpSender&&pt.rtpReceiver?ft+=`a=sendrecv\r
`:pt.rtpSender?ft+=`a=sendonly\r
`:pt.rtpReceiver?ft+=`a=recvonly\r
`:ft+=`a=inactive\r
`,pt.rtpSender){var bt=pt.rtpSender._initialTrackId||pt.rtpSender.track.id;pt.rtpSender._initialTrackId=bt;var vt="msid:"+(ot?ot.id:"-")+" "+bt+`\r
`;ft+="a="+vt,ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" "+vt,pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" "+vt,ft+="a=ssrc-group:FID "+pt.sendEncodingParameters[0].ssrc+" "+pt.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return ft+="a=ssrc:"+pt.sendEncodingParameters[0].ssrc+" cname:"+dt.localCName+`\r
`,pt.rtpSender&&pt.sendEncodingParameters[0].rtx&&(ft+="a=ssrc:"+pt.sendEncodingParameters[0].rtx.ssrc+" cname:"+dt.localCName+`\r
`),ft}function s(pt,lt){var mt=!1;return(pt=JSON.parse(JSON.stringify(pt))).filter(function(ot){if(ot&&(ot.urls||ot.url)){var ut=ot.urls||ot.url;ot.url&&!ot.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var ft=typeof ut=="string";return ft&&(ut=[ut]),ut=ut.filter(function(bt){return bt.indexOf("turn:")===0&&bt.indexOf("transport=udp")!==-1&&bt.indexOf("turn:[")===-1&&!mt?(mt=!0,!0):bt.indexOf("stun:")===0&&lt>=14393&&bt.indexOf("?transport=udp")===-1}),delete ot.url,ot.urls=ft?ut[0]:ut,!!ut.length}})}function et(pt,lt){var mt={codecs:[],headerExtensions:[],fecMechanisms:[]},ot=function(ft,bt){ft=parseInt(ft,10);for(var vt=0;vt<bt.length;vt++)if(bt[vt].payloadType===ft||bt[vt].preferredPayloadType===ft)return bt[vt]},ut=function(ft,bt,vt,yt){var At=ot(ft.parameters.apt,vt),Nt=ot(bt.parameters.apt,yt);return At&&Nt&&At.name.toLowerCase()===Nt.name.toLowerCase()};return pt.codecs.forEach(function(ft){for(var bt=0;bt<lt.codecs.length;bt++){var vt=lt.codecs[bt];if(ft.name.toLowerCase()===vt.name.toLowerCase()&&ft.clockRate===vt.clockRate){if(ft.name.toLowerCase()==="rtx"&&ft.parameters&&vt.parameters.apt&&!ut(ft,vt,pt.codecs,lt.codecs))continue;(vt=JSON.parse(JSON.stringify(vt))).numChannels=Math.min(ft.numChannels,vt.numChannels),mt.codecs.push(vt),vt.rtcpFeedback=vt.rtcpFeedback.filter(function(yt){for(var At=0;At<ft.rtcpFeedback.length;At++)if(ft.rtcpFeedback[At].type===yt.type&&ft.rtcpFeedback[At].parameter===yt.parameter)return!0;return!1});break}}}),pt.headerExtensions.forEach(function(ft){for(var bt=0;bt<lt.headerExtensions.length;bt++){var vt=lt.headerExtensions[bt];if(ft.uri===vt.uri){mt.headerExtensions.push(vt);break}}}),mt}function nt(pt,lt,mt){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[lt][pt].indexOf(mt)!==-1}function at(pt,lt){var mt=pt.getRemoteCandidates().find(function(ot){return lt.foundation===ot.foundation&&lt.ip===ot.ip&&lt.port===ot.port&&lt.priority===ot.priority&&lt.protocol===ot.protocol&&lt.type===ot.type});return mt||pt.addRemoteCandidate(lt),!mt}function ht(pt,lt){var mt=new Error(lt);return mt.name=pt,mt.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[pt],mt}var dt=tt("sdp");ct.exports=function(pt,lt){function mt(vt,yt){yt.addTrack(vt),yt.dispatchEvent(new pt.MediaStreamTrackEvent("addtrack",{track:vt}))}function ot(vt,yt){yt.removeTrack(vt),yt.dispatchEvent(new pt.MediaStreamTrackEvent("removetrack",{track:vt}))}function ut(vt,yt,At,Nt){var St=new Event("track");St.track=yt,St.receiver=At,St.transceiver={receiver:At},St.streams=Nt,pt.setTimeout(function(){vt._dispatchEvent("track",St)})}var ft=function(vt){var yt=this,At=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(St){yt[St]=At[St].bind(At)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",vt=JSON.parse(JSON.stringify(vt||{})),this.usingBundle=vt.bundlePolicy==="max-bundle",vt.rtcpMuxPolicy==="negotiate")throw ht("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(vt.rtcpMuxPolicy||(vt.rtcpMuxPolicy="require"),vt.iceTransportPolicy){case"all":case"relay":break;default:vt.iceTransportPolicy="all"}switch(vt.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:vt.bundlePolicy="balanced"}if(vt.iceServers=s(vt.iceServers||[],lt),this._iceGatherers=[],vt.iceCandidatePoolSize)for(var Nt=vt.iceCandidatePoolSize;Nt>0;Nt--)this._iceGatherers.push(new pt.RTCIceGatherer({iceServers:vt.iceServers,gatherPolicy:vt.iceTransportPolicy}));else vt.iceCandidatePoolSize=0;this._config=vt,this.transceivers=[],this._sdpSessionId=dt.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(ft.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(ft.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),ft.prototype.onicecandidate=null,ft.prototype.onaddstream=null,ft.prototype.ontrack=null,ft.prototype.onremovestream=null,ft.prototype.onsignalingstatechange=null,ft.prototype.oniceconnectionstatechange=null,ft.prototype.onconnectionstatechange=null,ft.prototype.onicegatheringstatechange=null,ft.prototype.onnegotiationneeded=null,ft.prototype.ondatachannel=null,ft.prototype._dispatchEvent=function(vt,yt){this._isClosed||(this.dispatchEvent(yt),typeof this["on"+vt]=="function"&&this["on"+vt](yt))},ft.prototype._emitGatheringStateChange=function(){var vt=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",vt)},ft.prototype.getConfiguration=function(){return this._config},ft.prototype.getLocalStreams=function(){return this.localStreams},ft.prototype.getRemoteStreams=function(){return this.remoteStreams},ft.prototype._createTransceiver=function(vt,yt){var At=this.transceivers.length>0,Nt={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:vt,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&At)Nt.iceTransport=this.transceivers[0].iceTransport,Nt.dtlsTransport=this.transceivers[0].dtlsTransport;else{var St=this._createIceAndDtlsTransports();Nt.iceTransport=St.iceTransport,Nt.dtlsTransport=St.dtlsTransport}return yt||this.transceivers.push(Nt),Nt},ft.prototype.addTrack=function(vt,yt){if(this._isClosed)throw ht("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(St){return St.track===vt}))throw ht("InvalidAccessError","Track already exists.");for(var At,Nt=0;Nt<this.transceivers.length;Nt++)this.transceivers[Nt].track||this.transceivers[Nt].kind!==vt.kind||(At=this.transceivers[Nt]);return At||(At=this._createTransceiver(vt.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(yt)===-1&&this.localStreams.push(yt),At.track=vt,At.stream=yt,At.rtpSender=new pt.RTCRtpSender(vt,At.dtlsTransport),At.rtpSender},ft.prototype.addStream=function(vt){var yt=this;if(lt>=15025)vt.getTracks().forEach(function(Nt){yt.addTrack(Nt,vt)});else{var At=vt.clone();vt.getTracks().forEach(function(Nt,St){var wt=At.getTracks()[St];Nt.addEventListener("enabled",function(Mt){wt.enabled=Mt.enabled})}),At.getTracks().forEach(function(Nt){yt.addTrack(Nt,At)})}},ft.prototype.removeTrack=function(vt){if(this._isClosed)throw ht("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(vt instanceof pt.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var yt=this.transceivers.find(function(Nt){return Nt.rtpSender===vt});if(!yt)throw ht("InvalidAccessError","Sender was not created by this connection.");var At=yt.stream;yt.rtpSender.stop(),yt.rtpSender=null,yt.track=null,yt.stream=null,this.transceivers.map(function(Nt){return Nt.stream}).indexOf(At)===-1&&this.localStreams.indexOf(At)>-1&&this.localStreams.splice(this.localStreams.indexOf(At),1),this._maybeFireNegotiationNeeded()},ft.prototype.removeStream=function(vt){var yt=this;vt.getTracks().forEach(function(At){var Nt=yt.getSenders().find(function(St){return St.track===At});Nt&&yt.removeTrack(Nt)})},ft.prototype.getSenders=function(){return this.transceivers.filter(function(vt){return!!vt.rtpSender}).map(function(vt){return vt.rtpSender})},ft.prototype.getReceivers=function(){return this.transceivers.filter(function(vt){return!!vt.rtpReceiver}).map(function(vt){return vt.rtpReceiver})},ft.prototype._createIceGatherer=function(vt,yt){var At=this;if(yt&&vt>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Nt=new pt.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Nt,"state",{value:"new",writable:!0}),this.transceivers[vt].bufferedCandidateEvents=[],this.transceivers[vt].bufferCandidates=function(St){var wt=!St.candidate||Object.keys(St.candidate).length===0;Nt.state=wt?"completed":"gathering",At.transceivers[vt].bufferedCandidateEvents!==null&&At.transceivers[vt].bufferedCandidateEvents.push(St)},Nt.addEventListener("localcandidate",this.transceivers[vt].bufferCandidates),Nt},ft.prototype._gather=function(vt,yt){var At=this,Nt=this.transceivers[yt].iceGatherer;if(!Nt.onlocalcandidate){var St=this.transceivers[yt].bufferedCandidateEvents;this.transceivers[yt].bufferedCandidateEvents=null,Nt.removeEventListener("localcandidate",this.transceivers[yt].bufferCandidates),Nt.onlocalcandidate=function(wt){if(!(At.usingBundle&&yt>0)){var Mt=new Event("icecandidate");Mt.candidate={sdpMid:vt,sdpMLineIndex:yt};var Ht=wt.candidate,Ot=!Ht||Object.keys(Ht).length===0;if(Ot)Nt.state!=="new"&&Nt.state!=="gathering"||(Nt.state="completed");else{Nt.state==="new"&&(Nt.state="gathering"),Ht.component=1,Ht.ufrag=Nt.getLocalParameters().usernameFragment;var Dt=dt.writeCandidate(Ht);Mt.candidate=Object.assign(Mt.candidate,dt.parseCandidate(Dt)),Mt.candidate.candidate=Dt,Mt.candidate.toJSON=function(){return{candidate:Mt.candidate.candidate,sdpMid:Mt.candidate.sdpMid,sdpMLineIndex:Mt.candidate.sdpMLineIndex,usernameFragment:Mt.candidate.usernameFragment}}}var Gt=dt.getMediaSections(At._localDescription.sdp);Gt[Mt.candidate.sdpMLineIndex]+=Ot?`a=end-of-candidates\r
`:"a="+Mt.candidate.candidate+`\r
`,At._localDescription.sdp=dt.getDescription(At._localDescription.sdp)+Gt.join("");var nn=At.transceivers.every(function(zt){return zt.iceGatherer&&zt.iceGatherer.state==="completed"});At.iceGatheringState!=="gathering"&&(At.iceGatheringState="gathering",At._emitGatheringStateChange()),Ot||At._dispatchEvent("icecandidate",Mt),nn&&(At._dispatchEvent("icecandidate",new Event("icecandidate")),At.iceGatheringState="complete",At._emitGatheringStateChange())}},pt.setTimeout(function(){St.forEach(function(wt){Nt.onlocalcandidate(wt)})},0)}},ft.prototype._createIceAndDtlsTransports=function(){var vt=this,yt=new pt.RTCIceTransport(null);yt.onicestatechange=function(){vt._updateIceConnectionState(),vt._updateConnectionState()};var At=new pt.RTCDtlsTransport(yt);return At.ondtlsstatechange=function(){vt._updateConnectionState()},At.onerror=function(){Object.defineProperty(At,"state",{value:"failed",writable:!0}),vt._updateConnectionState()},{iceTransport:yt,dtlsTransport:At}},ft.prototype._disposeIceAndDtlsTransports=function(vt){var yt=this.transceivers[vt].iceGatherer;yt&&(delete yt.onlocalcandidate,delete this.transceivers[vt].iceGatherer);var At=this.transceivers[vt].iceTransport;At&&(delete At.onicestatechange,delete this.transceivers[vt].iceTransport);var Nt=this.transceivers[vt].dtlsTransport;Nt&&(delete Nt.ondtlsstatechange,delete Nt.onerror,delete this.transceivers[vt].dtlsTransport)},ft.prototype._transceive=function(vt,yt,At){var Nt=et(vt.localCapabilities,vt.remoteCapabilities);yt&&vt.rtpSender&&(Nt.encodings=vt.sendEncodingParameters,Nt.rtcp={cname:dt.localCName,compound:vt.rtcpParameters.compound},vt.recvEncodingParameters.length&&(Nt.rtcp.ssrc=vt.recvEncodingParameters[0].ssrc),vt.rtpSender.send(Nt)),At&&vt.rtpReceiver&&Nt.codecs.length>0&&(vt.kind==="video"&&vt.recvEncodingParameters&&lt<15019&&vt.recvEncodingParameters.forEach(function(St){delete St.rtx}),vt.recvEncodingParameters.length?Nt.encodings=vt.recvEncodingParameters:Nt.encodings=[{}],Nt.rtcp={compound:vt.rtcpParameters.compound},vt.rtcpParameters.cname&&(Nt.rtcp.cname=vt.rtcpParameters.cname),vt.sendEncodingParameters.length&&(Nt.rtcp.ssrc=vt.sendEncodingParameters[0].ssrc),vt.rtpReceiver.receive(Nt))},ft.prototype.setLocalDescription=function(vt){var yt=this;if(["offer","answer"].indexOf(vt.type)===-1)return Promise.reject(ht("TypeError",'Unsupported type "'+vt.type+'"'));if(!nt("setLocalDescription",vt.type,yt.signalingState)||yt._isClosed)return Promise.reject(ht("InvalidStateError","Can not set local "+vt.type+" in state "+yt.signalingState));var At,Nt;if(vt.type==="offer")At=dt.splitSections(vt.sdp),Nt=At.shift(),At.forEach(function(wt,Mt){var Ht=dt.parseRtpParameters(wt);yt.transceivers[Mt].localCapabilities=Ht}),yt.transceivers.forEach(function(wt,Mt){yt._gather(wt.mid,Mt)});else if(vt.type==="answer"){At=dt.splitSections(yt._remoteDescription.sdp),Nt=At.shift();var St=dt.matchPrefix(Nt,"a=ice-lite").length>0;At.forEach(function(wt,Mt){var Ht=yt.transceivers[Mt],Ot=Ht.iceGatherer,Dt=Ht.iceTransport,Gt=Ht.dtlsTransport,nn=Ht.localCapabilities,zt=Ht.remoteCapabilities;if(!(dt.isRejected(wt)&&dt.matchPrefix(wt,"a=bundle-only").length===0)&&!Ht.rejected){var Ft=dt.getIceParameters(wt,Nt),un=dt.getDtlsParameters(wt,Nt);St&&(un.role="server"),yt.usingBundle&&Mt!==0||(yt._gather(Ht.mid,Mt),Dt.state==="new"&&Dt.start(Ot,Ft,St?"controlling":"controlled"),Gt.state==="new"&&Gt.start(un));var vn=et(nn,zt);yt._transceive(Ht,vn.codecs.length>0,!1)}})}return yt._localDescription={type:vt.type,sdp:vt.sdp},vt.type==="offer"?yt._updateSignalingState("have-local-offer"):yt._updateSignalingState("stable"),Promise.resolve()},ft.prototype.setRemoteDescription=function(vt){var yt=this;if(["offer","answer"].indexOf(vt.type)===-1)return Promise.reject(ht("TypeError",'Unsupported type "'+vt.type+'"'));if(!nt("setRemoteDescription",vt.type,yt.signalingState)||yt._isClosed)return Promise.reject(ht("InvalidStateError","Can not set remote "+vt.type+" in state "+yt.signalingState));var At={};yt.remoteStreams.forEach(function(Dt){At[Dt.id]=Dt});var Nt=[],St=dt.splitSections(vt.sdp),wt=St.shift(),Mt=dt.matchPrefix(wt,"a=ice-lite").length>0,Ht=dt.matchPrefix(wt,"a=group:BUNDLE ").length>0;yt.usingBundle=Ht;var Ot=dt.matchPrefix(wt,"a=ice-options:")[0];return yt.canTrickleIceCandidates=!!Ot&&Ot.substr(14).split(" ").indexOf("trickle")>=0,St.forEach(function(Dt,Gt){var nn=dt.splitLines(Dt),zt=dt.getKind(Dt),Ft=dt.isRejected(Dt)&&dt.matchPrefix(Dt,"a=bundle-only").length===0,un=nn[0].substr(2).split(" ")[2],vn=dt.getDirection(Dt,wt),yn=dt.parseMsid(Dt),cn=dt.getMid(Dt)||dt.generateIdentifier();if(Ft||zt==="application"&&(un==="DTLS/SCTP"||un==="UDP/DTLS/SCTP"))yt.transceivers[Gt]={mid:cn,kind:zt,protocol:un,rejected:!0};else{!Ft&&yt.transceivers[Gt]&&yt.transceivers[Gt].rejected&&(yt.transceivers[Gt]=yt._createTransceiver(zt,!0));var gn,Cn,fn,Tn,On,Ln,An,Rn,In,kn,xn,Yn=dt.parseRtpParameters(Dt);Ft||(kn=dt.getIceParameters(Dt,wt),(xn=dt.getDtlsParameters(Dt,wt)).role="client"),An=dt.parseRtpEncodingParameters(Dt);var Un=dt.parseRtcpParameters(Dt),jn=dt.matchPrefix(Dt,"a=end-of-candidates",wt).length>0,Qn=dt.matchPrefix(Dt,"a=candidate:").map(function(Fn){return dt.parseCandidate(Fn)}).filter(function(Fn){return Fn.component===1});if((vt.type==="offer"||vt.type==="answer")&&!Ft&&Ht&&Gt>0&&yt.transceivers[Gt]&&(yt._disposeIceAndDtlsTransports(Gt),yt.transceivers[Gt].iceGatherer=yt.transceivers[0].iceGatherer,yt.transceivers[Gt].iceTransport=yt.transceivers[0].iceTransport,yt.transceivers[Gt].dtlsTransport=yt.transceivers[0].dtlsTransport,yt.transceivers[Gt].rtpSender&&yt.transceivers[Gt].rtpSender.setTransport(yt.transceivers[0].dtlsTransport),yt.transceivers[Gt].rtpReceiver&&yt.transceivers[Gt].rtpReceiver.setTransport(yt.transceivers[0].dtlsTransport)),vt.type!=="offer"||Ft)vt.type!=="answer"||Ft||(Cn=(gn=yt.transceivers[Gt]).iceGatherer,fn=gn.iceTransport,Tn=gn.dtlsTransport,On=gn.rtpReceiver,Ln=gn.sendEncodingParameters,Rn=gn.localCapabilities,yt.transceivers[Gt].recvEncodingParameters=An,yt.transceivers[Gt].remoteCapabilities=Yn,yt.transceivers[Gt].rtcpParameters=Un,Qn.length&&fn.state==="new"&&(!Mt&&!jn||Ht&&Gt!==0?Qn.forEach(function(Fn){at(gn.iceTransport,Fn)}):fn.setRemoteCandidates(Qn)),Ht&&Gt!==0||(fn.state==="new"&&fn.start(Cn,kn,"controlling"),Tn.state==="new"&&Tn.start(xn)),!et(gn.localCapabilities,gn.remoteCapabilities).codecs.filter(function(Fn){return Fn.name.toLowerCase()==="rtx"}).length&&gn.sendEncodingParameters[0].rtx&&delete gn.sendEncodingParameters[0].rtx,yt._transceive(gn,vn==="sendrecv"||vn==="recvonly",vn==="sendrecv"||vn==="sendonly"),!On||vn!=="sendrecv"&&vn!=="sendonly"?delete gn.rtpReceiver:(In=On.track,yn?(At[yn.stream]||(At[yn.stream]=new pt.MediaStream),mt(In,At[yn.stream]),Nt.push([In,On,At[yn.stream]])):(At.default||(At.default=new pt.MediaStream),mt(In,At.default),Nt.push([In,On,At.default]))));else{(gn=yt.transceivers[Gt]||yt._createTransceiver(zt)).mid=cn,gn.iceGatherer||(gn.iceGatherer=yt._createIceGatherer(Gt,Ht)),Qn.length&&gn.iceTransport.state==="new"&&(!jn||Ht&&Gt!==0?Qn.forEach(function(Fn){at(gn.iceTransport,Fn)}):gn.iceTransport.setRemoteCandidates(Qn)),Rn=pt.RTCRtpReceiver.getCapabilities(zt),lt<15019&&(Rn.codecs=Rn.codecs.filter(function(Fn){return Fn.name!=="rtx"})),Ln=gn.sendEncodingParameters||[{ssrc:1001*(2*Gt+2)}];var on=!1;if(vn==="sendrecv"||vn==="sendonly"){if(on=!gn.rtpReceiver,On=gn.rtpReceiver||new pt.RTCRtpReceiver(gn.dtlsTransport,zt),on){var Hn;In=On.track,yn&&yn.stream==="-"||(yn?(At[yn.stream]||(At[yn.stream]=new pt.MediaStream,Object.defineProperty(At[yn.stream],"id",{get:function(){return yn.stream}})),Object.defineProperty(In,"id",{get:function(){return yn.track}}),Hn=At[yn.stream]):(At.default||(At.default=new pt.MediaStream),Hn=At.default)),Hn&&(mt(In,Hn),gn.associatedRemoteMediaStreams.push(Hn)),Nt.push([In,On,Hn])}}else gn.rtpReceiver&&gn.rtpReceiver.track&&(gn.associatedRemoteMediaStreams.forEach(function(Fn){var Vn=Fn.getTracks().find(function(Bn){return Bn.id===gn.rtpReceiver.track.id});Vn&&ot(Vn,Fn)}),gn.associatedRemoteMediaStreams=[]);gn.localCapabilities=Rn,gn.remoteCapabilities=Yn,gn.rtpReceiver=On,gn.rtcpParameters=Un,gn.sendEncodingParameters=Ln,gn.recvEncodingParameters=An,yt._transceive(yt.transceivers[Gt],!1,on)}}}),yt._dtlsRole===void 0&&(yt._dtlsRole=vt.type==="offer"?"active":"passive"),yt._remoteDescription={type:vt.type,sdp:vt.sdp},vt.type==="offer"?yt._updateSignalingState("have-remote-offer"):yt._updateSignalingState("stable"),Object.keys(At).forEach(function(Dt){var Gt=At[Dt];if(Gt.getTracks().length){if(yt.remoteStreams.indexOf(Gt)===-1){yt.remoteStreams.push(Gt);var nn=new Event("addstream");nn.stream=Gt,pt.setTimeout(function(){yt._dispatchEvent("addstream",nn)})}Nt.forEach(function(zt){var Ft=zt[0],un=zt[1];Gt.id===zt[2].id&&ut(yt,Ft,un,[Gt])})}}),Nt.forEach(function(Dt){Dt[2]||ut(yt,Dt[0],Dt[1],[])}),pt.setTimeout(function(){yt&&yt.transceivers&&yt.transceivers.forEach(function(Dt){Dt.iceTransport&&Dt.iceTransport.state==="new"&&Dt.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Dt.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},ft.prototype.close=function(){this.transceivers.forEach(function(vt){vt.iceTransport&&vt.iceTransport.stop(),vt.dtlsTransport&&vt.dtlsTransport.stop(),vt.rtpSender&&vt.rtpSender.stop(),vt.rtpReceiver&&vt.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},ft.prototype._updateSignalingState=function(vt){this.signalingState=vt;var yt=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",yt)},ft.prototype._maybeFireNegotiationNeeded=function(){var vt=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,pt.setTimeout(function(){if(vt.needNegotiation){vt.needNegotiation=!1;var yt=new Event("negotiationneeded");vt._dispatchEvent("negotiationneeded",yt)}},0))},ft.prototype._updateIceConnectionState=function(){var vt,yt={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Nt){Nt.iceTransport&&!Nt.rejected&&yt[Nt.iceTransport.state]++}),vt="new",yt.failed>0?vt="failed":yt.checking>0?vt="checking":yt.disconnected>0?vt="disconnected":yt.new>0?vt="new":yt.connected>0?vt="connected":yt.completed>0&&(vt="completed"),vt!==this.iceConnectionState){this.iceConnectionState=vt;var At=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",At)}},ft.prototype._updateConnectionState=function(){var vt,yt={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Nt){Nt.iceTransport&&Nt.dtlsTransport&&!Nt.rejected&&(yt[Nt.iceTransport.state]++,yt[Nt.dtlsTransport.state]++)}),yt.connected+=yt.completed,vt="new",yt.failed>0?vt="failed":yt.connecting>0?vt="connecting":yt.disconnected>0?vt="disconnected":yt.new>0?vt="new":yt.connected>0&&(vt="connected"),vt!==this.connectionState){this.connectionState=vt;var At=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",At)}},ft.prototype.createOffer=function(){var vt=this;if(vt._isClosed)return Promise.reject(ht("InvalidStateError","Can not call createOffer after close"));var yt=vt.transceivers.filter(function(Mt){return Mt.kind==="audio"}).length,At=vt.transceivers.filter(function(Mt){return Mt.kind==="video"}).length,Nt=arguments[0];if(Nt){if(Nt.mandatory||Nt.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Nt.offerToReceiveAudio!==void 0&&(yt=Nt.offerToReceiveAudio===!0?1:Nt.offerToReceiveAudio===!1?0:Nt.offerToReceiveAudio),Nt.offerToReceiveVideo!==void 0&&(At=Nt.offerToReceiveVideo===!0?1:Nt.offerToReceiveVideo===!1?0:Nt.offerToReceiveVideo)}for(vt.transceivers.forEach(function(Mt){Mt.kind==="audio"?--yt<0&&(Mt.wantReceive=!1):Mt.kind==="video"&&--At<0&&(Mt.wantReceive=!1)});yt>0||At>0;)yt>0&&(vt._createTransceiver("audio"),yt--),At>0&&(vt._createTransceiver("video"),At--);var St=dt.writeSessionBoilerplate(vt._sdpSessionId,vt._sdpSessionVersion++);vt.transceivers.forEach(function(Mt,Ht){var Ot=Mt.track,Dt=Mt.kind,Gt=Mt.mid||dt.generateIdentifier();Mt.mid=Gt,Mt.iceGatherer||(Mt.iceGatherer=vt._createIceGatherer(Ht,vt.usingBundle));var nn=pt.RTCRtpSender.getCapabilities(Dt);lt<15019&&(nn.codecs=nn.codecs.filter(function(Ft){return Ft.name!=="rtx"})),nn.codecs.forEach(function(Ft){Ft.name==="H264"&&Ft.parameters["level-asymmetry-allowed"]===void 0&&(Ft.parameters["level-asymmetry-allowed"]="1"),Mt.remoteCapabilities&&Mt.remoteCapabilities.codecs&&Mt.remoteCapabilities.codecs.forEach(function(un){Ft.name.toLowerCase()===un.name.toLowerCase()&&Ft.clockRate===un.clockRate&&(Ft.preferredPayloadType=un.payloadType)})}),nn.headerExtensions.forEach(function(Ft){(Mt.remoteCapabilities&&Mt.remoteCapabilities.headerExtensions||[]).forEach(function(un){Ft.uri===un.uri&&(Ft.id=un.id)})});var zt=Mt.sendEncodingParameters||[{ssrc:1001*(2*Ht+1)}];Ot&&lt>=15019&&Dt==="video"&&!zt[0].rtx&&(zt[0].rtx={ssrc:zt[0].ssrc+1}),Mt.wantReceive&&(Mt.rtpReceiver=new pt.RTCRtpReceiver(Mt.dtlsTransport,Dt)),Mt.localCapabilities=nn,Mt.sendEncodingParameters=zt}),vt._config.bundlePolicy!=="max-compat"&&(St+="a=group:BUNDLE "+vt.transceivers.map(function(Mt){return Mt.mid}).join(" ")+`\r
`),St+=`a=ice-options:trickle\r
`,vt.transceivers.forEach(function(Mt,Ht){St+=it(Mt,Mt.localCapabilities,"offer",Mt.stream,vt._dtlsRole),St+=`a=rtcp-rsize\r
`,!Mt.iceGatherer||vt.iceGatheringState==="new"||Ht!==0&&vt.usingBundle||(Mt.iceGatherer.getLocalCandidates().forEach(function(Ot){Ot.component=1,St+="a="+dt.writeCandidate(Ot)+`\r
`}),Mt.iceGatherer.state==="completed"&&(St+=`a=end-of-candidates\r
`))});var wt=new pt.RTCSessionDescription({type:"offer",sdp:St});return Promise.resolve(wt)},ft.prototype.createAnswer=function(){var vt=this;if(vt._isClosed)return Promise.reject(ht("InvalidStateError","Can not call createAnswer after close"));if(vt.signalingState!=="have-remote-offer"&&vt.signalingState!=="have-local-pranswer")return Promise.reject(ht("InvalidStateError","Can not call createAnswer in signalingState "+vt.signalingState));var yt=dt.writeSessionBoilerplate(vt._sdpSessionId,vt._sdpSessionVersion++);vt.usingBundle&&(yt+="a=group:BUNDLE "+vt.transceivers.map(function(St){return St.mid}).join(" ")+`\r
`),yt+=`a=ice-options:trickle\r
`;var At=dt.getMediaSections(vt._remoteDescription.sdp).length;vt.transceivers.forEach(function(St,wt){if(!(wt+1>At)){if(St.rejected)return St.kind==="application"?St.protocol==="DTLS/SCTP"?yt+=`m=application 0 DTLS/SCTP 5000\r
`:yt+="m=application 0 "+St.protocol+` webrtc-datachannel\r
`:St.kind==="audio"?yt+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:St.kind==="video"&&(yt+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(yt+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+St.mid+`\r
`);if(St.stream){var Mt;St.kind==="audio"?Mt=St.stream.getAudioTracks()[0]:St.kind==="video"&&(Mt=St.stream.getVideoTracks()[0]),Mt&&lt>=15019&&St.kind==="video"&&!St.sendEncodingParameters[0].rtx&&(St.sendEncodingParameters[0].rtx={ssrc:St.sendEncodingParameters[0].ssrc+1})}var Ht=et(St.localCapabilities,St.remoteCapabilities);!Ht.codecs.filter(function(Ot){return Ot.name.toLowerCase()==="rtx"}).length&&St.sendEncodingParameters[0].rtx&&delete St.sendEncodingParameters[0].rtx,yt+=it(St,Ht,"answer",St.stream,vt._dtlsRole),St.rtcpParameters&&St.rtcpParameters.reducedSize&&(yt+=`a=rtcp-rsize\r
`)}});var Nt=new pt.RTCSessionDescription({type:"answer",sdp:yt});return Promise.resolve(Nt)},ft.prototype.addIceCandidate=function(vt){var yt,At=this;return vt&&vt.sdpMLineIndex===void 0&&!vt.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(Nt,St){if(!At._remoteDescription)return St(ht("InvalidStateError","Can not add ICE candidate without a remote description"));if(vt&&vt.candidate!==""){var wt=vt.sdpMLineIndex;if(vt.sdpMid){for(var Mt=0;Mt<At.transceivers.length;Mt++)if(At.transceivers[Mt].mid===vt.sdpMid){wt=Mt;break}}var Ht=At.transceivers[wt];if(!Ht)return St(ht("OperationError","Can not add ICE candidate"));if(Ht.rejected)return Nt();var Ot=Object.keys(vt.candidate).length>0?dt.parseCandidate(vt.candidate):{};if(Ot.protocol==="tcp"&&(Ot.port===0||Ot.port===9)||Ot.component&&Ot.component!==1)return Nt();if((wt===0||wt>0&&Ht.iceTransport!==At.transceivers[0].iceTransport)&&!at(Ht.iceTransport,Ot))return St(ht("OperationError","Can not add ICE candidate"));var Dt=vt.candidate.trim();Dt.indexOf("a=")===0&&(Dt=Dt.substr(2)),(yt=dt.getMediaSections(At._remoteDescription.sdp))[wt]+="a="+(Ot.type?Dt:"end-of-candidates")+`\r
`,At._remoteDescription.sdp=dt.getDescription(At._remoteDescription.sdp)+yt.join("")}else for(var Gt=0;Gt<At.transceivers.length&&(At.transceivers[Gt].rejected||(At.transceivers[Gt].iceTransport.addRemoteCandidate({}),yt=dt.getMediaSections(At._remoteDescription.sdp),yt[Gt]+=`a=end-of-candidates\r
`,At._remoteDescription.sdp=dt.getDescription(At._remoteDescription.sdp)+yt.join(""),!At.usingBundle));Gt++);Nt()})},ft.prototype.getStats=function(vt){if(vt&&vt instanceof pt.MediaStreamTrack){var yt=null;if(this.transceivers.forEach(function(Nt){Nt.rtpSender&&Nt.rtpSender.track===vt?yt=Nt.rtpSender:Nt.rtpReceiver&&Nt.rtpReceiver.track===vt&&(yt=Nt.rtpReceiver)}),!yt)throw ht("InvalidAccessError","Invalid selector.");return yt.getStats()}var At=[];return this.transceivers.forEach(function(Nt){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(St){Nt[St]&&At.push(Nt[St].getStats())})}),Promise.all(At).then(function(Nt){var St=new Map;return Nt.forEach(function(wt){wt.forEach(function(Mt){St.set(Mt.id,Mt)})}),St})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(vt){var yt=pt[vt];if(yt&&yt.prototype&&yt.prototype.getStats){var At=yt.prototype.getStats;yt.prototype.getStats=function(){return At.apply(this).then(function(Nt){var St=new Map;return Object.keys(Nt).forEach(function(wt){Nt[wt].type=rt(Nt[wt]),St.set(wt,Nt[wt])}),St})}}});var bt=["createOffer","createAnswer"];return bt.forEach(function(vt){var yt=ft.prototype[vt];ft.prototype[vt]=function(){var At=arguments;return typeof At[0]=="function"||typeof At[1]=="function"?yt.apply(this,[arguments[2]]).then(function(Nt){typeof At[0]=="function"&&At[0].apply(null,[Nt])},function(Nt){typeof At[1]=="function"&&At[1].apply(null,[Nt])}):yt.apply(this,arguments)}}),(bt=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(vt){var yt=ft.prototype[vt];ft.prototype[vt]=function(){var At=arguments;return typeof At[1]=="function"||typeof At[2]=="function"?yt.apply(this,arguments).then(function(){typeof At[1]=="function"&&At[1].apply(null)},function(Nt){typeof At[2]=="function"&&At[2].apply(null,[Nt])}):yt.apply(this,arguments)}}),["getStats"].forEach(function(vt){var yt=ft.prototype[vt];ft.prototype[vt]=function(){var At=arguments;return typeof At[1]=="function"?yt.apply(this,arguments).then(function(){typeof At[1]=="function"&&At[1].apply(null)}):yt.apply(this,arguments)}}),ft}},{sdp:17}],17:[function(tt,ct,gt){var rt={};rt.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},rt.localCName=rt.generateIdentifier(),rt.splitLines=function(it){return it.trim().split(`
`).map(function(s){return s.trim()})},rt.splitSections=function(it){return it.split(`
m=`).map(function(s,et){return(et>0?"m="+s:s).trim()+`\r
`})},rt.getDescription=function(it){var s=rt.splitSections(it);return s&&s[0]},rt.getMediaSections=function(it){var s=rt.splitSections(it);return s.shift(),s},rt.matchPrefix=function(it,s){return rt.splitLines(it).filter(function(et){return et.indexOf(s)===0})},rt.parseCandidate=function(it){for(var s,et={foundation:(s=it.indexOf("a=candidate:")===0?it.substring(12).split(" "):it.substring(10).split(" "))[0],component:parseInt(s[1],10),protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]},nt=8;nt<s.length;nt+=2)switch(s[nt]){case"raddr":et.relatedAddress=s[nt+1];break;case"rport":et.relatedPort=parseInt(s[nt+1],10);break;case"tcptype":et.tcpType=s[nt+1];break;case"ufrag":et.ufrag=s[nt+1],et.usernameFragment=s[nt+1];break;default:et[s[nt]]=s[nt+1]}return et},rt.writeCandidate=function(it){var s=[];s.push(it.foundation),s.push(it.component),s.push(it.protocol.toUpperCase()),s.push(it.priority),s.push(it.address||it.ip),s.push(it.port);var et=it.type;return s.push("typ"),s.push(et),et!=="host"&&it.relatedAddress&&it.relatedPort&&(s.push("raddr"),s.push(it.relatedAddress),s.push("rport"),s.push(it.relatedPort)),it.tcpType&&it.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(it.tcpType)),(it.usernameFragment||it.ufrag)&&(s.push("ufrag"),s.push(it.usernameFragment||it.ufrag)),"candidate:"+s.join(" ")},rt.parseIceOptions=function(it){return it.substr(14).split(" ")},rt.parseRtpMap=function(it){var s=it.substr(9).split(" "),et={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),et.name=s[0],et.clockRate=parseInt(s[1],10),et.channels=s.length===3?parseInt(s[2],10):1,et.numChannels=et.channels,et},rt.writeRtpMap=function(it){var s=it.payloadType;it.preferredPayloadType!==void 0&&(s=it.preferredPayloadType);var et=it.channels||it.numChannels||1;return"a=rtpmap:"+s+" "+it.name+"/"+it.clockRate+(et!==1?"/"+et:"")+`\r
`},rt.parseExtmap=function(it){var s=it.substr(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1]}},rt.writeExtmap=function(it){return"a=extmap:"+(it.id||it.preferredId)+(it.direction&&it.direction!=="sendrecv"?"/"+it.direction:"")+" "+it.uri+`\r
`},rt.parseFmtp=function(it){for(var s,et={},nt=it.substr(it.indexOf(" ")+1).split(";"),at=0;at<nt.length;at++)et[(s=nt[at].trim().split("="))[0].trim()]=s[1];return et},rt.writeFmtp=function(it){var s="",et=it.payloadType;if(it.preferredPayloadType!==void 0&&(et=it.preferredPayloadType),it.parameters&&Object.keys(it.parameters).length){var nt=[];Object.keys(it.parameters).forEach(function(at){it.parameters[at]?nt.push(at+"="+it.parameters[at]):nt.push(at)}),s+="a=fmtp:"+et+" "+nt.join(";")+`\r
`}return s},rt.parseRtcpFb=function(it){var s=it.substr(it.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},rt.writeRtcpFb=function(it){var s="",et=it.payloadType;return it.preferredPayloadType!==void 0&&(et=it.preferredPayloadType),it.rtcpFeedback&&it.rtcpFeedback.length&&it.rtcpFeedback.forEach(function(nt){s+="a=rtcp-fb:"+et+" "+nt.type+(nt.parameter&&nt.parameter.length?" "+nt.parameter:"")+`\r
`}),s},rt.parseSsrcMedia=function(it){var s=it.indexOf(" "),et={ssrc:parseInt(it.substr(7,s-7),10)},nt=it.indexOf(":",s);return nt>-1?(et.attribute=it.substr(s+1,nt-s-1),et.value=it.substr(nt+1)):et.attribute=it.substr(s+1),et},rt.parseSsrcGroup=function(it){var s=it.substr(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(function(et){return parseInt(et,10)})}},rt.getMid=function(it){var s=rt.matchPrefix(it,"a=mid:")[0];if(s)return s.substr(6)},rt.parseFingerprint=function(it){var s=it.substr(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1]}},rt.getDtlsParameters=function(it,s){return{role:"auto",fingerprints:rt.matchPrefix(it+s,"a=fingerprint:").map(rt.parseFingerprint)}},rt.writeDtlsParameters=function(it,s){var et="a=setup:"+s+`\r
`;return it.fingerprints.forEach(function(nt){et+="a=fingerprint:"+nt.algorithm+" "+nt.value+`\r
`}),et},rt.getIceParameters=function(it,s){var et=rt.splitLines(it);return{usernameFragment:(et=et.concat(rt.splitLines(s))).filter(function(nt){return nt.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:et.filter(function(nt){return nt.indexOf("a=ice-pwd:")===0})[0].substr(10)}},rt.writeIceParameters=function(it){return"a=ice-ufrag:"+it.usernameFragment+`\r
a=ice-pwd:`+it.password+`\r
`},rt.parseRtpParameters=function(it){for(var s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},et=rt.splitLines(it)[0].split(" "),nt=3;nt<et.length;nt++){var at=et[nt],ht=rt.matchPrefix(it,"a=rtpmap:"+at+" ")[0];if(ht){var dt=rt.parseRtpMap(ht),pt=rt.matchPrefix(it,"a=fmtp:"+at+" ");switch(dt.parameters=pt.length?rt.parseFmtp(pt[0]):{},dt.rtcpFeedback=rt.matchPrefix(it,"a=rtcp-fb:"+at+" ").map(rt.parseRtcpFb),s.codecs.push(dt),dt.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(dt.name.toUpperCase())}}}return rt.matchPrefix(it,"a=extmap:").forEach(function(lt){s.headerExtensions.push(rt.parseExtmap(lt))}),s},rt.writeRtpDescription=function(it,s){var et="";et+="m="+it+" ",et+=s.codecs.length>0?"9":"0",et+=" UDP/TLS/RTP/SAVPF ",et+=s.codecs.map(function(at){return at.preferredPayloadType!==void 0?at.preferredPayloadType:at.payloadType}).join(" ")+`\r
`,et+=`c=IN IP4 0.0.0.0\r
`,et+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(function(at){et+=rt.writeRtpMap(at),et+=rt.writeFmtp(at),et+=rt.writeRtcpFb(at)});var nt=0;return s.codecs.forEach(function(at){at.maxptime>nt&&(nt=at.maxptime)}),nt>0&&(et+="a=maxptime:"+nt+`\r
`),et+=`a=rtcp-mux\r
`,s.headerExtensions&&s.headerExtensions.forEach(function(at){et+=rt.writeExtmap(at)}),et},rt.parseRtpEncodingParameters=function(it){var s,et=[],nt=rt.parseRtpParameters(it),at=nt.fecMechanisms.indexOf("RED")!==-1,ht=nt.fecMechanisms.indexOf("ULPFEC")!==-1,dt=rt.matchPrefix(it,"a=ssrc:").map(function(ot){return rt.parseSsrcMedia(ot)}).filter(function(ot){return ot.attribute==="cname"}),pt=dt.length>0&&dt[0].ssrc,lt=rt.matchPrefix(it,"a=ssrc-group:FID").map(function(ot){return ot.substr(17).split(" ").map(function(ut){return parseInt(ut,10)})});lt.length>0&&lt[0].length>1&&lt[0][0]===pt&&(s=lt[0][1]),nt.codecs.forEach(function(ot){if(ot.name.toUpperCase()==="RTX"&&ot.parameters.apt){var ut={ssrc:pt,codecPayloadType:parseInt(ot.parameters.apt,10)};pt&&s&&(ut.rtx={ssrc:s}),et.push(ut),at&&((ut=JSON.parse(JSON.stringify(ut))).fec={ssrc:pt,mechanism:ht?"red+ulpfec":"red"},et.push(ut))}}),et.length===0&&pt&&et.push({ssrc:pt});var mt=rt.matchPrefix(it,"b=");return mt.length&&(mt=mt[0].indexOf("b=TIAS:")===0?parseInt(mt[0].substr(7),10):mt[0].indexOf("b=AS:")===0?1e3*parseInt(mt[0].substr(5),10)*.95-16e3:void 0,et.forEach(function(ot){ot.maxBitrate=mt})),et},rt.parseRtcpParameters=function(it){var s={},et=rt.matchPrefix(it,"a=ssrc:").map(function(ht){return rt.parseSsrcMedia(ht)}).filter(function(ht){return ht.attribute==="cname"})[0];et&&(s.cname=et.value,s.ssrc=et.ssrc);var nt=rt.matchPrefix(it,"a=rtcp-rsize");s.reducedSize=nt.length>0,s.compound=nt.length===0;var at=rt.matchPrefix(it,"a=rtcp-mux");return s.mux=at.length>0,s},rt.parseMsid=function(it){var s,et=rt.matchPrefix(it,"a=msid:");if(et.length===1)return s=et[0].substr(7).split(" "),{stream:s[0],track:s[1]};var nt=rt.matchPrefix(it,"a=ssrc:").map(function(at){return rt.parseSsrcMedia(at)}).filter(function(at){return at.attribute==="msid"});return nt.length>0?(s=nt[0].value.split(" "),{stream:s[0],track:s[1]}):void 0},rt.generateSessionId=function(){return Math.random().toString().substr(2,21)},rt.writeSessionBoilerplate=function(it,s,et){var nt,at=s!==void 0?s:2;return nt=it||rt.generateSessionId(),`v=0\r
o=`+(et||"thisisadapterortc")+" "+nt+" "+at+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},rt.writeMediaSection=function(it,s,et,nt){var at=rt.writeRtpDescription(it.kind,s);if(at+=rt.writeIceParameters(it.iceGatherer.getLocalParameters()),at+=rt.writeDtlsParameters(it.dtlsTransport.getLocalParameters(),et==="offer"?"actpass":"active"),at+="a=mid:"+it.mid+`\r
`,it.direction?at+="a="+it.direction+`\r
`:it.rtpSender&&it.rtpReceiver?at+=`a=sendrecv\r
`:it.rtpSender?at+=`a=sendonly\r
`:it.rtpReceiver?at+=`a=recvonly\r
`:at+=`a=inactive\r
`,it.rtpSender){var ht="msid:"+nt.id+" "+it.rtpSender.track.id+`\r
`;at+="a="+ht,at+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" "+ht,it.sendEncodingParameters[0].rtx&&(at+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" "+ht,at+="a=ssrc-group:FID "+it.sendEncodingParameters[0].ssrc+" "+it.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return at+="a=ssrc:"+it.sendEncodingParameters[0].ssrc+" cname:"+rt.localCName+`\r
`,it.rtpSender&&it.sendEncodingParameters[0].rtx&&(at+="a=ssrc:"+it.sendEncodingParameters[0].rtx.ssrc+" cname:"+rt.localCName+`\r
`),at},rt.getDirection=function(it,s){for(var et=rt.splitLines(it),nt=0;nt<et.length;nt++)switch(et[nt]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return et[nt].substr(2)}return s?rt.getDirection(s):"sendrecv"},rt.getKind=function(it){return rt.splitLines(it)[0].split(" ")[0].substr(2)},rt.isRejected=function(it){return it.split(" ",2)[1]==="0"},rt.parseMLine=function(it){var s=rt.splitLines(it)[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},rt.parseOLine=function(it){var s=rt.matchPrefix(it,"o=")[0].substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},rt.isValidSDP=function(it){if(typeof it!="string"||it.length===0)return!1;for(var s=rt.splitLines(it),et=0;et<s.length;et++)if(s[et].length<2||s[et].charAt(1)!=="=")return!1;return!0},typeof ct=="object"&&(ct.exports=rt)},{}]},{},[1])(1)}),function(tt){function ct(wt){if(typeof wt!="string"&&(wt=String(wt)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(wt))throw new TypeError("Invalid character in header field name");return wt.toLowerCase()}function gt(wt){return typeof wt!="string"&&(wt=String(wt)),wt}function rt(wt){var Mt={next:function(){var Ht=wt.shift();return{done:Ht===void 0,value:Ht}}};return bt.iterable&&(Mt[Symbol.iterator]=function(){return Mt}),Mt}function it(wt){this.map={},wt instanceof it?wt.forEach(function(Mt,Ht){this.append(Ht,Mt)},this):Array.isArray(wt)?wt.forEach(function(Mt){this.append(Mt[0],Mt[1])},this):wt&&Object.getOwnPropertyNames(wt).forEach(function(Mt){this.append(Mt,wt[Mt])},this)}function s(wt){if(wt.bodyUsed)return Promise.reject(new TypeError("Already read"));wt.bodyUsed=!0}function et(wt){return new Promise(function(Mt,Ht){wt.onload=function(){Mt(wt.result)},wt.onerror=function(){Ht(wt.error)}})}function nt(wt){var Mt=new FileReader,Ht=et(Mt);return Mt.readAsArrayBuffer(wt),Ht}function at(wt){var Mt=new FileReader,Ht=et(Mt);return Mt.readAsText(wt),Ht}function ht(wt){for(var Mt=new Uint8Array(wt),Ht=new Array(Mt.length),Ot=0;Ot<Mt.length;Ot++)Ht[Ot]=String.fromCharCode(Mt[Ot]);return Ht.join("")}function dt(wt){if(wt.slice)return wt.slice(0);var Mt=new Uint8Array(wt.byteLength);return Mt.set(new Uint8Array(wt)),Mt.buffer}function pt(){return this.bodyUsed=!1,this._initBody=function(wt){if(this._bodyInit=wt,wt)if(typeof wt=="string")this._bodyText=wt;else if(bt.blob&&Blob.prototype.isPrototypeOf(wt))this._bodyBlob=wt;else if(bt.formData&&FormData.prototype.isPrototypeOf(wt))this._bodyFormData=wt;else if(bt.searchParams&&URLSearchParams.prototype.isPrototypeOf(wt))this._bodyText=wt.toString();else if(bt.arrayBuffer&&bt.blob&&yt(wt))this._bodyArrayBuffer=dt(wt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!bt.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(wt)&&!At(wt))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=dt(wt)}else this._bodyText="";this.headers.get("content-type")||(typeof wt=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):bt.searchParams&&URLSearchParams.prototype.isPrototypeOf(wt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},bt.blob&&(this.blob=function(){var wt=s(this);if(wt)return wt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(nt)}),this.text=function(){var wt=s(this);if(wt)return wt;if(this._bodyBlob)return at(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ht(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},bt.formData&&(this.formData=function(){return this.text().then(ot)}),this.json=function(){return this.text().then(JSON.parse)},this}function lt(wt){var Mt=wt.toUpperCase();return Nt.indexOf(Mt)>-1?Mt:wt}function mt(wt,Mt){var Ht=(Mt=Mt||{}).body;if(wt instanceof mt){if(wt.bodyUsed)throw new TypeError("Already read");this.url=wt.url,this.credentials=wt.credentials,Mt.headers||(this.headers=new it(wt.headers)),this.method=wt.method,this.mode=wt.mode,Ht||wt._bodyInit==null||(Ht=wt._bodyInit,wt.bodyUsed=!0)}else this.url=String(wt);if(this.credentials=Mt.credentials||this.credentials||"omit",!Mt.headers&&this.headers||(this.headers=new it(Mt.headers)),this.method=lt(Mt.method||this.method||"GET"),this.mode=Mt.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Ht)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Ht)}function ot(wt){var Mt=new FormData;return wt.trim().split("&").forEach(function(Ht){if(Ht){var Ot=Ht.split("="),Dt=Ot.shift().replace(/\+/g," "),Gt=Ot.join("=").replace(/\+/g," ");Mt.append(decodeURIComponent(Dt),decodeURIComponent(Gt))}}),Mt}function ut(wt){var Mt=new it;return wt.split(/\r?\n/).forEach(function(Ht){var Ot=Ht.split(":"),Dt=Ot.shift().trim();if(Dt){var Gt=Ot.join(":").trim();Mt.append(Dt,Gt)}}),Mt}function ft(wt,Mt){Mt||(Mt={}),this.type="default",this.status="status"in Mt?Mt.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Mt?Mt.statusText:"OK",this.headers=new it(Mt.headers),this.url=Mt.url||"",this._initBody(wt)}if(!tt.fetch){var bt={searchParams:"URLSearchParams"in tt,iterable:"Symbol"in tt&&"iterator"in Symbol,blob:"FileReader"in tt&&"Blob"in tt&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in tt,arrayBuffer:"ArrayBuffer"in tt};if(bt.arrayBuffer)var vt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],yt=function(wt){return wt&&DataView.prototype.isPrototypeOf(wt)},At=ArrayBuffer.isView||function(wt){return wt&&vt.indexOf(Object.prototype.toString.call(wt))>-1};it.prototype.append=function(wt,Mt){wt=ct(wt),Mt=gt(Mt);var Ht=this.map[wt];this.map[wt]=Ht?Ht+","+Mt:Mt},it.prototype.delete=function(wt){delete this.map[ct(wt)]},it.prototype.get=function(wt){return wt=ct(wt),this.has(wt)?this.map[wt]:null},it.prototype.has=function(wt){return this.map.hasOwnProperty(ct(wt))},it.prototype.set=function(wt,Mt){this.map[ct(wt)]=gt(Mt)},it.prototype.forEach=function(wt,Mt){for(var Ht in this.map)this.map.hasOwnProperty(Ht)&&wt.call(Mt,this.map[Ht],Ht,this)},it.prototype.keys=function(){var wt=[];return this.forEach(function(Mt,Ht){wt.push(Ht)}),rt(wt)},it.prototype.values=function(){var wt=[];return this.forEach(function(Mt){wt.push(Mt)}),rt(wt)},it.prototype.entries=function(){var wt=[];return this.forEach(function(Mt,Ht){wt.push([Ht,Mt])}),rt(wt)},bt.iterable&&(it.prototype[Symbol.iterator]=it.prototype.entries);var Nt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];mt.prototype.clone=function(){return new mt(this,{body:this._bodyInit})},pt.call(mt.prototype),pt.call(ft.prototype),ft.prototype.clone=function(){return new ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new it(this.headers),url:this.url})},ft.error=function(){var wt=new ft(null,{status:0,statusText:""});return wt.type="error",wt};var St=[301,302,303,307,308];ft.redirect=function(wt,Mt){if(St.indexOf(Mt)===-1)throw new RangeError("Invalid status code");return new ft(null,{status:Mt,headers:{location:wt}})},tt.Headers=it,tt.Request=mt,tt.Response=ft,tt.fetch=function(wt,Mt){return new Promise(function(Ht,Ot){var Dt=new mt(wt,Mt),Gt=new XMLHttpRequest;Gt.onload=function(){var nn={status:Gt.status,statusText:Gt.statusText,headers:ut(Gt.getAllResponseHeaders()||"")};nn.url="responseURL"in Gt?Gt.responseURL:nn.headers.get("X-Request-URL");var zt="response"in Gt?Gt.response:Gt.responseText;Ht(new ft(zt,nn))},Gt.onerror=function(){Ot(new TypeError("Network request failed"))},Gt.ontimeout=function(){Ot(new TypeError("Network request failed"))},Gt.open(Dt.method,Dt.url,!0),Dt.credentials==="include"&&(Gt.withCredentials=!0),"responseType"in Gt&&bt.blob&&(Gt.responseType="blob"),Dt.headers.forEach(function(nn,zt){Gt.setRequestHeader(zt,nn)}),Gt.send(Dt._bodyInit===void 0?null:Dt._bodyInit)})},tt.fetch.polyfill=!0}}(typeof self<"u"?self:commonjsGlobal);var _e={};_e=function(){function tt(pt,lt){var mt,ot,ut,ft=[],bt=(pt=pt.push?pt:[pt]).length,vt=bt;for(mt=function(yt,At){At.length&&ft.push(yt),--vt||lt(ft)};bt--;)ot=pt[bt],(ut=at[ot])?mt(ot,ut):(ht[ot]=ht[ot]||[]).push(mt)}function ct(pt,lt){if(pt){var mt=ht[pt];if(at[pt]=lt,mt)for(;mt.length;)mt[0](pt,lt),mt.splice(0,1)}}function gt(pt,lt){pt.call&&(pt={success:pt}),lt.length?(pt.error||et)(lt):(pt.success||et)(pt)}function rt(pt,lt,mt,ot){var ut,ft,bt=document,vt=mt.async,yt=(mt.numRetries||0)+1,At=mt.before||et,Nt=pt.replace(/^(css|img)!/,""),St=mt.reqdelay||0;ot=ot||0,/(^css!|\.css$)/.test(pt)?(ut=!0,(ft=bt.createElement("link")).rel="stylesheet",ft.href=Nt):/(^img!|\.(png|gif|jpg|svg)$)/.test(pt)?(ft=bt.createElement("img")).src=Nt:((ft=bt.createElement("script")).src=pt,ft.async=vt===void 0||vt),ft.onload=ft.onerror=ft.onbeforeload=function(wt){var Mt=wt.type[0];if(ut&&"hideFocus"in ft)try{ft.sheet.cssText.length||(Mt="e")}catch{Mt="e"}if(Mt=="e"&&(ot+=1)<yt)return dt=St*ot,setTimeout(function(){rt(pt,lt,mt,ot)},dt),void(mt.retrycb&&mt.retrycb(ot,dt));lt(pt,Mt,wt.defaultPrevented)},At(pt,ft)!==!1&&bt.head.appendChild(ft)}function it(pt,lt,mt){var ot,ut,ft=(pt=pt.push?pt:[pt]).length,bt=ft,vt=[];for(ot=function(yt,At,Nt){if(At=="e"&&vt.push(yt),At=="b"){if(!Nt)return;vt.push(yt)}--ft||lt(vt)},ut=0;ut<bt;ut++)rt(pt[ut],ot,mt)}function s(pt,lt,mt){var ot,ut;lt&&lt.trim&&(ot=lt),it(pt,function(ft){gt(ut,ft),ct(ot,ft)},ut=(ot?mt:lt)||{})}var et=function(){},nt={},at={},ht={},dt=0;return s.ready=function(pt,lt){return tt(pt,function(mt){gt(lt,mt)}),s},s.done=function(pt){ct(pt,[])},s.reset=function(){nt={},at={},ht={}},s.isDefined=function(pt){return pt in nt},s}(),function(tt,ct){var gt={};gt.load=function(rt,it,s){if(typeof _e!==void 0&&typeof apiRTC_React>"u"){var et={async:!0,numRetries:it.extJsLoadingRetryNb||100,reqdelay:it.extJsLoadingRetryDelay||200,success:function(){tt.rtcio=io,s.success()},error:function(nt){console.error("socket.io loading error"),s.error()},retrycb:function(nt,at){console.warn("socket.io loading retry :"+nt+" ,delay before retry :"+at),s.retrycb()}};it.socketioUrl!==void 0?_e([it.socketioUrl],"socketio",et):_e([rt+"://"+it.ccsServer+"/socket.io/v3/socket.io.js"],"socketio",et)}else console.log("Else loadjs io"),tt.rtcio=io,s.success()},tt.apiRTC_sioLoader=gt}(window);/*! For license information please see apiRTC-srcTmp.js.LICENSE.txt */(function(tt,ct){a.exports=ct()})(self,()=>(()=>{var tt={8364:function(rt,it,s){var et,nt=this&&this.__extends||(et=function(yt,At){return(et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(Nt,St){Nt.__proto__=St}:function(Nt,St){for(var wt in St)Object.prototype.hasOwnProperty.call(St,wt)&&(Nt[wt]=St[wt])}))(yt,At)},function(yt,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");function Nt(){this.constructor=yt}et(yt,At),yt.prototype=At===null?Object.create(At):(Nt.prototype=At.prototype,new Nt)}),at=(Object.defineProperty(it,"__esModule",{value:!0}),s(2043)),ht=s(7987),dt=at.getLogger("CloudAPI"),pt=(ht.reg(at),ht.apply(dt,{format:function(yt,At,Nt){return"".concat(Nt," - [").concat(yt,"] ").concat(At," : ")}}),dt.setDefaultLevel("error"),dt.setLevel("error"),"https://cloud.apizee.com"),lt="/api/v2/media/upload",mt="/api/v2/conversation/{convId}/media",ot="/api/v2/conferences",ut={updateWebconfTags:{fetchRetryCount:3,fetchRetryDelay:500}},ft=null,bt=function(){function yt(){if(this.cloudUrl=pt,this.JWTApzToken="",this.fetchRetries=100,this.fetchRetryDelay=200,ft!==null)return dt.debug("Cannot construct multiple CloudAPI, this is a singleton."),ft;ft=this}return yt.get=function(){return ft=ft===null?new yt:ft},yt.prototype.setLogLevel=function(At){dt.setLevel(At)},yt.prototype.getLogLevel=function(){var At="";switch(dt.getLevel()){case 0:At="trace";break;case 1:At="debug";break;case 2:At="info";break;case 3:At="warn";break;case 4:At="error";break;case 5:At="silent"}return At},yt.prototype.setCloudURL=function(At){dt.debug("setCloudURL :",At),this.cloudUrl=At},yt.prototype.setJWTApzToken=function(At){this.JWTApzToken=At},yt.prototype.setFetchRetries=function(At){dt.debug("setFetchRetries :",At),At!=null&&(this.fetchRetries=At)},yt.prototype.setFetchRetryDelay=function(At){dt.log("setFetchRetryDelay :",At),At!=null&&(this.fetchRetryDelay=At)},yt.prototype.request=function(At,Nt,St,wt,Mt,Ht){Mt===void 0&&(Mt={}),Ht===void 0&&(Ht={});var Ot=At.indexOf(this.cloudUrl)===-1?this.cloudUrl+At:At,Dt=null;return new Promise(function(Gt,nn){var zt,Ft=new XMLHttpRequest;if(Ht.hasOwnProperty("withCredentials")&&(Ft.withCredentials=Ht.withCredentials),Ft.onreadystatechange=function(Cn){if(Ft.readyState===XMLHttpRequest.DONE)if(dt.debug("request onreadystatechange status :",Ft.status),200<=Ft.status&&Ft.status<300)if(Ft.responseText){var fn=null;try{fn=JSON.parse(Ft.responseText)}catch{fn=Ft.responseText}Gt(fn)}else Gt("No_responseTest");else{if(fn={status:Ft.status,text:Ft.statusText},Ft.responseText)try{fn.response=JSON.parse(Ft.responseText)}catch{fn.responseText=Ft.responseText}nn(fn)}},Ft.onprogress=function(Cn){typeof wt=="function"&&wt(Cn)},Ft.onerror=function(Cn){nn(Cn)},St==="GET")0<Object.keys(Nt).length&&(zt=new URLSearchParams(Nt),dt.debug("johann",zt,zt.toString,Nt),Ot+="?"+zt.toString());else{Dt=new FormData;for(var un=0,vn=Object.keys(Nt);un<vn.length;un++){var yn=vn[un];Dt.append(yn,Nt[yn])}}if(Ft.open(St,Ot,!0),Mt!=null)for(var cn=0,gn=Object.keys(Mt);cn<gn.length;cn++)yn=gn[cn],Ft.setRequestHeader(yn,Mt[yn]);Ft.send(Dt)})},yt.prototype.get=function(At,Nt,St,wt){return St===void 0&&(St={}),wt===void 0&&(wt={}),dt.log("Send HTTP request : GET ".concat(At)),this.request(At,Nt,"GET",null,St,wt)},yt.prototype.post=function(At,Nt,St,wt){return dt.log("Send HTTP request : POST ".concat(At)),this.request(At,Nt,"POST",St,wt)},yt.prototype.put=function(At,Nt,St,wt){return dt.log("Send HTTP request : PUT ".concat(At)),(Nt=Nt!==null&&typeof Nt=="object"?Nt:{})._method="PUT",this.request(At,Nt,"POST",St,wt)},yt.prototype.delete=function(At,Nt,St){return dt.log("Send HTTP request : DELETE ".concat(At)),(Nt=Nt!==null&&typeof Nt=="object"?Nt:{})._method="DELETE",this.request(At,Nt,"POST",null,St)},yt.prototype.cloudRequest=function(At,Nt,St,wt){var Mt=this;return wt===void 0&&(wt={}),new Promise(function(Ht,Ot){dt.trace(St+" cloudRequest to "+ft.cloudUrl,Nt);var Dt={method:St.toUpperCase()},Gt=ft.cloudUrl+At;if(Dt.method==="GET")0<Object.keys(Nt).length&&(Gt+="?"+new URLSearchParams(Nt).toString());else{for(var nn=new FormData,zt=0,Ft=Object.keys(Nt);zt<Ft.length;zt++){var un=Ft[zt];nn.append(un,Nt[un])}Dt.body=nn}wt.hasOwnProperty("bearerToken")?Dt.headers={Authorization:"Bearer "+wt.bearerToken}:Mt.JWTApzToken!==""&&(Dt.headers={Authorization:"Bearer "+Mt.JWTApzToken}),wt.hasOwnProperty("fetchRetryCount")?Dt.retries=wt.fetchRetryCount:Dt.retries=Mt.fetchRetries,wt.hasOwnProperty("fetchRetryDelay")?Dt.retryDelay=wt.fetchRetryDelay:Dt.retryDelay=Mt.fetchRetryDelay,function(vn,yn){dt.log("fetchRetry");var cn=3,gn=1e3,Cn=[];if(yn&&yn.retries&&(cn=yn.retries),yn&&yn.retryDelay&&(gn=yn.retryDelay),yn&&yn.retryOn){if(!(yn.retryOn instanceof Array))throw{name:"ArgumentError",message:"retryOn property expects an array"};Cn=yn.retryOn}return new Promise(function(fn,Tn){function On(An){var Rn,In;dt.log("wrappedFetch n:",An),window.fetch!==void 0?fetch(vn,yn).then(function(kn){Cn.indexOf(kn.status)===-1?fn(kn):0<An?Ln(An):Tn(kn)}).catch(function(kn){0<An?Ln(An):Tn(kn)}):(dt.debug("Cannot use fetch in this browser, using XHR"),Rn=bt.get(),In={},yn.body&&yn.body.forEach(function(kn,xn){return In[xn]=kn}),Rn.request(vn,In,yn.method,null,yn.headers).then(function(kn){fn({gettype:"cloudApiNoFetch",response:kn})}).catch(function(kn){dt.error("error :",kn),Tn(kn)}))}function Ln(An){dt.error("retry n:",An);var Rn=cn-An+1;dt.error("retry number is :",Rn),setTimeout(function(){On(--An)},gn*Rn)}On(cn)})}(Gt,Dt).then(function(vn){if(vn.gettype==="cloudApiNoFetch")return Ht(vn.response);vn.json().then(function(yn){var cn;if(vn.status<200||299<vn.status)return cn="cloudRequest - response status Code: "+vn.status,dt.warn(cn),cn=new vt(cn,13,vn.status,yn),Ot(cn);Ht(yn)}).catch(function(yn){return dt.error("json err :",yn),Ot(new vt("cloudRequest - json() Error: "+yn.text,0,vn.status,{}))})}).catch(function(vn){return dt.error("Fetch Error :",vn),Ot(new vt("cloudRequest - Fetch Error: "+vn.text,13,vn.status,vn.response))})})},yt.prototype.cloudFetchMedia=function(At){var Nt=this;return new Promise(function(St,wt){var Mt={};Nt.JWTApzToken!==""&&(Mt={Authorization:"Bearer "+Nt.JWTApzToken}),fetch(At,{headers:Mt}).then(function(Ht){return Ht.blob()}).then(function(Ht){St(Ht)}).catch(function(Ht){wt(Ht)})})},yt.prototype.authentication=function(At,Nt,St){return dt.debug("authentication to "+ft.cloudUrl),At={username:At,password:Nt},St!==void 0&&St!==""&&(At.captcha_token=St),this.cloudRequest("/api/v3/authenticate",At,"POST")},yt.prototype.getConnectedUserInformation=function(At){return dt.debug("getConnectedUserInformation to "+ft.cloudUrl),this.cloudRequest("/api/v2/users/me",{},"GET",{bearerToken:At})},yt.prototype.getUserProfile=function(At,Nt,St){return dt.debug("getUserProfile to "+ft.cloudUrl),typeof At!="string"||typeof Nt!="string"?Promise.reject("wrongArguments"):(At={apiKey:At},this.cloudRequest("/api/v3/users/{userId}/profile".replace("{userId}",Nt),At,"GET",{bearerToken:St}))},yt.prototype.getSiteAgents=function(At,Nt,St){return St===void 0&&(St={}),dt.debug("getSiteAgents to "+ft.cloudUrl),typeof At!="string"||typeof Nt!="string"?Promise.reject("wrongArguments"):(At={apiKey:At},St.useAcd&&(At.useAcd=1),St.usePresence&&(At.usePresence=1),St.convId&&(At.convId=St.convId),this.cloudRequest("/api/v2/sites/{siteKey}/agents".replace("{siteKey}",Nt),At,"GET"))},yt.prototype.getEnterpriseInformation=function(At,Nt){return At===void 0&&(At={}),dt.debug("getEnterpriseInformation to "+ft.cloudUrl),this.cloudRequest("/api/v3/enterpriseInformation",At,"GET",{bearerToken:Nt})},yt.prototype.getPreferredCCS=function(At){return dt.debug("getPreferredCCS to "+ft.cloudUrl),this.cloudRequest("/api/v2/preferredCCS",{apiKey:At},"GET")},yt.prototype.checkUserToken=function(At){return dt.debug("checkUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/checkToken",{},"GET",{bearerToken:At})},yt.prototype.invalidateUserToken=function(At){return dt.debug("invalidateUserToken to "+ft.cloudUrl),this.cloudRequest("/api/v2/invalidateToken",{},"POST",{bearerToken:At})},yt.prototype.uploadFile=function(At,Nt,St){dt.debug("uploadMedia to "+ft.cloudUrl);var wt={file:At};if(St!=null)for(var Mt=0,Ht=Object.keys(St);Mt<Ht.length;Mt++){var Ot=Ht[Mt];wt[Ot]=St[Ot]}return this.cloudRequest(lt,wt,"POST",{bearerToken:Nt})},yt.prototype.uploadSnapshot=function(At,Nt,St){St===void 0&&(St={}),dt.debug("uploadSnapshot to "+ft.cloudUrl);for(var wt={dataUri:1,file:At},Mt=0,Ht=Object.keys(St);Mt<Ht.length;Mt++){var Ot=Ht[Mt];wt[Ot]=St[Ot]}return this.cloudRequest(lt,wt,"POST",{bearerToken:Nt})},yt.prototype.getEnterpriseUserList=function(At,Nt){return dt.debug("getEnterpriseUserList to "+ft.cloudUrl),this.cloudRequest("/api/v2/enterprises/{enterpriseId}/users".replace("{enterpriseId}",At),{json:!0},"GET",{bearerToken:Nt})},yt.prototype.getEnterpriseTagList=function(At,Nt,St){return St===void 0&&(St={}),dt.debug("getEnterpriseTagList to "+ft.cloudUrl),St.hasOwnProperty("webconfId")&&St.webconfId,this.cloudRequest("/api/v2/enterprises/{enterpriseId}/tags".replace("{enterpriseId}",At),{},"GET",{bearerToken:Nt})},yt.prototype.updateWebconfTags=function(At,Nt,St,wt){return dt.debug("updateWebconfTags to "+ft.cloudUrl),St={_method:"PUT",tags:St.join(",")},function(Mt,Ht){if(Mt!==null&&typeof Mt=="object"||(Mt={}),ut.hasOwnProperty(Ht))for(var Ot=ut[Ht],Dt=0,Gt=["fetchRetryCount","fetchRetryDelay"];Dt<Gt.length;Dt++){var nn=Gt[Dt];Ot.hasOwnProperty(nn)&&(Mt[nn]=Ot[nn])}}(wt={bearerToken:wt},"updateWebconfTags"),this.cloudRequest("/api/enterprises/{enterpriseId}/conferences/{conferenceId}".replace("{enterpriseId}",At).replace("{conferenceId}",Nt),St,"POST",wt)},yt.prototype.getConferenceList=function(At){return dt.debug("getConferenceList to "+ft.cloudUrl),this.cloudRequest(ot,{},"GET",{bearerToken:At})},yt.prototype.getOrCreateConversation=function(At,Nt,St){return St===void 0&&(St={}),dt.debug("getOrCreateConversation to "+ft.cloudUrl),At===null||typeof At!="object"||typeof Nt!="string"?Promise.reject("wrongArguments"):(At={name:At._getTechnicalName(),type:At.getType(),apiKey:Nt},Nt={},St.hasOwnProperty("token")&&St.token&&(Nt.bearerToken=St.token),St.hasOwnProperty("active")&&typeof St.active=="boolean"&&(At.active=1),this.cloudRequest("/api/v2/conversation",At,"POST",Nt))},yt.prototype.createConference=function(At,Nt,St){return St===void 0&&(St={}),dt.debug("createConference to "+ft.cloudUrl),Nt={name:Nt},St.hasOwnProperty("password")&&(Nt.password=St.password),this.cloudRequest(ot,Nt,"POST",{bearerToken:At})},yt.prototype.checkConferenceAccess=function(At,Nt,St){var wt;return St===void 0&&(St={}),dt.debug("checkConferenceAccess for "+At+" to "+ft.cloudUrl),typeof Nt!="string"?Promise.reject("wrongArguments"):(Nt={apiKey:Nt},St.convId&&(Nt.conv_id=St.convId),St.hasOwnProperty("password")&&(Nt.password=St.password),wt={},St.hasOwnProperty("session")&&typeof St.session.getToken=="function"&&St.session.getToken()!==null&&(wt.bearerToken=St.session.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/checkAccess".replace("{roomname}",At),Nt,"POST",wt))},yt.prototype.getWebconf=function(At,Nt){Nt===void 0&&(Nt={}),dt.debug("getWebconf for "+At+" to "+ft.cloudUrl);var St={};return Nt.hasOwnProperty("token")&&Nt.token&&(St.bearerToken=Nt.token),this.cloudRequest("/api/v2/conferences/{roomname}".replace("{roomname}",At),{},"GET",St)},yt.prototype.getWebconfConversation=function(At,Nt,St){var wt;return St===void 0&&(St={}),dt.debug("getWebconfConversation for "+At+" to "+ft.cloudUrl),typeof Nt!="string"?Promise.reject("wrongArguments"):(Nt={apiKey:Nt},wt={},St.hasOwnProperty("token")&&St.token&&(wt.bearerToken=St.token),this.cloudRequest("/api/v2/conferences/{roomname}/conversation".replace("{roomname}",At),Nt,"GET",wt))},yt.prototype.updateConferencePresence=function(At,Nt,St){dt.trace("updateConferencePresence for "+At.getName()+" to "+ft.cloudUrl),St={ccid:Nt.getId(),name:Nt.getUserAgent().getUsername(),instanceId:At.getInstanceId(),apiKey:St};var wt={};return Nt.getToken()!==null&&(wt.bearerToken=Nt.getToken()),this.cloudRequest("/api/v2/conferences/{roomname}/updatePresence".replace("{roomname}",At._getTechnicalName()),St,"POST",wt)},yt.prototype.closeConferenceInstance=function(At,Nt){dt.debug("closeConferenceInstance for "+At.getName()+" to "+ft.cloudUrl);var St={instanceId:At.getInstanceId()};return this.cloudRequest("/api/v2/conferences/{roomname}/closeInstance".replace("{roomname}",At._getTechnicalName()),St,"POST",{bearerToken:Nt.getToken()})},yt.prototype.getConversationMediaList=function(At,Nt,St){var wt;return St===void 0&&(St={}),dt.debug("getConversationMediaList for "+At+" to "+ft.cloudUrl),At&&typeof Nt=="string"?(Nt={apiKey:Nt},wt={},St.hasOwnProperty("token")&&St.token&&(wt.bearerToken=St.token),St.hasOwnProperty("offset")&&(Nt.offset=St.offset),St.hasOwnProperty("limit")&&(Nt.limit=St.limit),this.cloudRequest(mt.replace("{convId}",At.toString()),Nt,"GET",wt)):Promise.reject("wrongArguments")},yt.prototype.pushConversationMedia=function(At,Nt,St,wt){return wt===void 0&&(wt={}),dt.debug("pushConversationMedia for "+At+" to "+ft.cloudUrl),At&&Nt&&typeof St=="string"?(Nt={media:Nt,apiKey:St},St={},wt.hasOwnProperty("token")&&wt.token&&(St.bearerToken=wt.token),wt.hasOwnProperty("metadata")&&wt.metadata&&(Nt.metadata=wt.metadata),wt.hasOwnProperty("asFile")&&wt.asFile&&(Nt.asFile=wt.asFile),wt.hasOwnProperty("filename")&&wt.filename&&(Nt.filename=wt.filename),wt.overwrite===!0&&(Nt.overwrite=1),typeof wt.ttl=="number"&&0<wt.ttl&&(Nt.ttl=wt.ttl),this.cloudRequest(mt.replace("{convId}",At.toString()),Nt,"POST",St)):Promise.reject("wrongArguments")},yt.prototype.setConversationData=function(At,Nt,St,wt){return wt===void 0&&(wt={}),dt.debug("setConversationData for "+At+" to "+ft.cloudUrl),At&&typeof Nt=="string"&&typeof St=="string"?(Nt={data:Nt,apiKey:St},St={},wt.hasOwnProperty("token")&&wt.token&&(St.bearerToken=wt.token),this.cloudRequest("/api/v2/conversation/{convId}/data".replace("{convId}",At.toString()),Nt,"POST",St)):Promise.reject("wrongArguments")},yt.prototype.getSessionHistory=function(At,Nt,St){St===void 0&&(St={}),dt.debug("getSessionHistory to "+ft.cloudUrl);var wt={sessionId:At};if(St!=null)for(var Mt=0,Ht=Object.keys(St);Mt<Ht.length;Mt++){var Ot=Ht[Mt];wt[Ot]=St[Ot]}return this.cloudRequest("/api/v2/messages",wt,"GET",{bearerToken:Nt})},yt.prototype.getWebSession=function(At,Nt,St){return dt.debug("getSessionHistory to "+ft.cloudUrl),typeof St!="string"?Promise.reject("wrongArguments"):(Nt={destId:Nt.getId(),apiKey:St},St={},At.getToken()!==null?St.bearerToken=At.getToken():Nt.userId=At.getId(),this.cloudRequest("/api/v2/webSession",Nt,"GET",St))},yt.prototype.saveNewMessage=function(At,Nt,St,wt,Mt,Ht){return dt.debug("saveNewMessage to "+ft.cloudUrl),Mt={uuid:Mt,destId:St,message:wt,sessionId:At,userId:Nt.getId(),apiKey:Ht},St={},Nt.getToken()!==null&&(St.bearerToken=Nt.getToken()),this.cloudRequest("/api/v2/messages",Mt,"POST",St)},yt.prototype.saveGroupChatMessage=function(At,Nt,St,wt,Mt,Ht){return Ht===void 0&&(Ht={}),dt.debug("saveGroupChatMessage to "+ft.cloudUrl),St={apiKey:St,message:wt,ccid:Nt.getId(),name:Nt.getUserAgent().getUsername(),parent_conv_id:At.getCloudConversationId(),uuid:Mt,htmlEnable:Ht.metadata&&Ht.metadata.htmlEnable||!1},wt={},Ht.token!==void 0&&Ht.token!==null?wt.bearerToken=Ht.token:Nt.getToken()!==null?wt.bearerToken=Nt.getToken():St.userId=Nt.getId(),this.cloudRequest("/api/v2/groupChatMessages",St,"POST",wt)},yt.prototype.loadGroupChatMessages=function(At,Nt,St){St===void 0&&(St=""),dt.debug("loadGroupChatMessages to "+ft.cloudUrl),At={parent_conv_id:At.getCloudConversationId()};var wt={};return wt.bearerToken=St!==""?St:Nt.getToken(),this.cloudRequest("/api/v2/groupChatMessages",At,"GET",wt)},yt}(),vt=(it.default=bt,function(yt){function At(Nt,St,wt,Mt){return(Nt=yt.call(this,Nt)||this).name=Nt.constructor.name,Nt.code=St,Nt.httpCode=wt,Nt.cloudResponse=Mt,Nt}return nt(At,yt),At}(Error))},128:(rt,it,s)=>{s.d(it,{_:()=>at}),s(2564);var et=s(1549).Y.get("ApiCCDataClient"),nt=apiCC.myWebRTC_Event,at=function(ht){this.sendData=function(dt,pt,lt){et.info("Call sending data function .... to :"+dt+" message :",pt);var mt,ot,ut=ht.channel.getNewCSeq(),ft=null;return mt={type:"dataMessage",senderId:ht.apiCCId,dstRoomId:dt,data:pt,cSeq:ut},ot=JSON.stringify(mt),et.log("C->S: "+ot),lt!==void 0?(et.log("Ack management activated"),ft=setTimeout(function(){lt({reason:"timeoutReached",cSeq:ut}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]},ht.messageTimeOutTimer),et.log("timeOutId: "+ft),ht.messageTimeOutTable[ut]=ft,ht.channel.socket.emit("dataMessage",ot,function(bt){et.log("callback on dataMessage"),et.log("callback reason :"+bt.reason),et.log("cSeq :"+bt.cSeq),lt(bt),apiCC.session.messageTimeOutTable[ut]!==void 0?(et.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[ut]),clearTimeout(apiCC.session.messageTimeOutTable[ut]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[ut]):et.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(et.log("Ack management not activated"),ht.channel.socket.emit("dataMessage",ot)),ut},this.sendDataToGroup=function(dt,pt){et.info("[ApiCCDataClient] sendDataToGroup - "+dt);var lt,mt=ht.getConnectedUsersList(dt);for(lt=0;lt<mt.length;lt++)ht.apiCCId!=mt[lt].userId&&this.sendData(mt[lt].userId,pt)},this.receiveData=function(dt){et.info("receiveData :"+dt.data),nt.createReceiveDataEvent(dt.senderId,dt.dstRoomId,dt.data)}}},6844:(rt,it,s)=>{s.d(it,{U:()=>pt}),s(9554),s(1539),s(4747),s(2564),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948);var et=s(1549),nt=s(4708),at=s(940);function ht(lt){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},ht(lt)}var dt=et.Y.get("ApiCCIMClient"),pt=function(lt,mt){this.convTable=[],this.myWebRTC_Event=apiCC.myWebRTC_Event,this.nickname=lt.nickname,this.photoURL=null,this.userDataSetted=!1,this.myWebRTC_Stack=new at.S(lt.channel.socket),this.findIMIdWithDestID=function(ot){var ut,ft=this.convTable.length;for(dt.log("findIMIdWithDestID = "+ot),ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==ot)return this.convTable[ut].IMId;return dt.log("Conversation IMId not found"),0},this.addInConvTable=function(ot){dt.debug("addInConvTable");var ut,ft=this.convTable.length;for(ut=0;ut<ft;ut+=1)if(dt.log("this.convTable[i].dest_roomId = "+this.convTable[ut].dest_roomId),this.convTable[ut].dest_roomId==ot.dest_roomId)return void(this.convTable[ut].IMId=ot.IMId);dt.log("Conversation not found in the table, adding .."),this.convTable.push(ot)},this.sendMessage=function(ot,ut,ft,bt){dt.info("Call sending message function .... from :"+this.nickname+" message :"+ut);var vt,yt=this.findIMIdWithDestID(ot),At=null,Nt=null,St=null,wt=lt.channel.getNewCSeq();return yt===0?dt.log("Creation of a new IM conversation"):dt.log("Message is for existing conversation with ID : "+yt),dt.log("IMConvId :"+yt),At={type:"IMMessage",IMId:yt,senderId:lt.apiCCId,nickname:this.nickname,photoURL:this.photoURL,dstRoomId:ot,data:ut,cSeq:wt,convData:bt},lt.getConnectedUserIdsList().forEach(function(Mt){Mt.userId==ot&&Mt.hasOwnProperty("userData")&&Mt.userData!==null&&ht(Mt.userData.hasOwnProperty("isChatbot"))&&Mt.userData.isChatbot&&(At.pubSub="BotConnector")}),vt=JSON.stringify(At),Nt=document.createElement("message"),dt.log("C->S: "+vt),ft!==void 0?(dt.log("Ack management activated"),St=setTimeout(function(){ft({reason:"timeoutReached",cSeq:wt}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[wt]},lt.messageTimeOutTimer),dt.log("timeOutId: "+St),lt.messageTimeOutTable[wt]=St,lt.channel.socket.emit("IMMessage",vt,function(Mt){dt.log("callback on IMMessage"),dt.log("data :",Mt),dt.log("callback reason :"+Mt.reason),dt.log("callback convId :"+Mt.convId),dt.log("cSeq :"+Mt.cSeq),ft(Mt),apiCC.session.messageTimeOutTable[wt]!==void 0?(dt.log("clearing timeOutId: "+apiCC.session.messageTimeOutTable[wt]),clearTimeout(apiCC.session.messageTimeOutTable[wt]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[wt]):dt.warn("messageTimeOutTable was already deleted : timeout may have been reached before Ack")})):(dt.log("Ack management not activated"),lt.channel.socket.emit("IMMessage",vt)),this.conversation!==null&&(Nt.innerHTML="<b>me :</b> "+bt+"<br>",this.conversation.appendChild(Nt),this.conversation.scrollTop=this.conversation.scrollHeight),wt},this.newConversationCreated=function(ot){dt.debug("newConversationCreated :"+ot),dt.log("msg.dstRoomId :"+ot.dstRoomId),dt.log("msg.IMId :"+ot.IMId);var ut={dest_roomId:ot.dstRoomId,IMId:ot.IMId};this.addInConvTable(ut)},this.receiveMessage=function(ot){dt.info("Call receiveMessage message :"+ot);var ut,ft=null;ut={dest_roomId:ot.senderId,IMId:ot.IMId},this.addInConvTable(ut),this.conversation!==null&&((ft=document.createElement("message")).innerHTML="<b>"+ot.nickname+":</b> "+ot.data+"<br>",this.conversation.appendChild(ft),this.conversation.scrollTop=this.conversation.scrollHeight),this.myWebRTC_Event.createReceiveIMMessageEvent(ot.senderId,ot.nickname,ot.photoURL,ot.data,ot.UUCSeq,ot.IMId)},this.createGroupChat=function(ot,ut){var ft,bt;dt.info("createGroupChat with contacts : "+ot+","+ut),ft={type:"createGroupChat",nickname:this.nickname,photoURL:this.photoURL,contactId1:ot,contactId2:ut},bt=JSON.stringify(ft),dt.log("C->S: "+bt),lt.channel.socket.emit("createGroupChat",bt)},this.groupChatCreation=function(ot){dt.debug("groupChatCreation"),this.myWebRTC_Event.createGroupChatCreationEvent(ot.status,ot.groupChatId,ot.contactId1,ot.invitationSendedToInitialDestId,ot.contactId2,ot.invitationSendedToNewContactId)},this.joinGroupChat=function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dt.debug("joinGroupChat : "+ot);var ft=null,bt=null;ft={type:"joinGroupChat",groupChatId:ot},ut.convId&&(ft.data={},ft.data.cloudConvId=ut.convId),bt=JSON.stringify(ft),dt.log("C->S: "+bt),lt.channel.socket.emit("joinGroupChat",bt)},this.groupChatInvitation=function(ot){dt.debug("groupChatInvitation"),this.myWebRTC_Event.createGroupChatInvitationEvent(ot.groupChatId,ot.senderId,ot.senderNickname,ot.senderPhotoURL,ot.contactList)},this.answerToGroupChatInvitation=function(ot,ut){var ft,bt;dt.debug("answerToGroupChatInvitation: "+ot+" : "+ut),ut===!0||ut===!1?(ft={type:"groupChatInvitationAnswer",groupChatId:ot,senderId:lt.apiCCId,nickname:this.nickname,photoURL:this.photoURL,accept:ut},bt=JSON.stringify(ft),dt.log("C->S: "+bt),lt.channel.socket.emit("groupChatInvitationAnswer",bt)):dt.log("accept value is not correct")},this.groupChatMemberUpdate=function(ot){dt.info("groupChatMemberUpdate"),this.myWebRTC_Event.createGroupChatMemberUpdateEvent(ot.groupChatId,ot.contactList,ot.status)},this.addUserInGroupChat=function(ot,ut){var ft,bt;dt.debug("addUser : "+ut+"in Group Chat with Id :"+ot),ft={type:"addUserInGroupChat",groupChatId:ot,nickname:this.nickname,photoURL:this.photoURL,contactId:ut},bt=JSON.stringify(ft),dt.log("C->S: "+bt),lt.channel.socket.emit("addUserInGroupChat",bt)},this.addUserInGroupChatAnswer=function(ot){dt.info("addUserInGroupChatAnswer"),this.myWebRTC_Event.createAddUserInGroupChatEvent(ot.invitationSended,ot.groupChatId,ot.contactId)},this.leaveGroupChat=function(ot){var ut,ft;dt.info("Leave Group Chat with Id :"+ot),ut={type:"leaveGroupChat",groupChatId:ot,nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("leaveGroupChat",ft)},this.sendMessageToGroupChat=function(ot,ut,ft){var bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};dt.info("Call sending message to Group Chat .... from :"+this.nickname+" message :"+ut);var vt=null,yt=null,At=apiCC.session.channel.getNewCSeq();vt={type:"groupChatMessage",groupChatId:ot,senderId:lt.apiCCId,nickname:this.nickname,cSeq:At,data:ut},(0,nt.Ym)(bt,"metadata","object")&&(vt.metadata=bt.metadata),yt=JSON.stringify(vt),ft!==null&&typeof ft=="function"?(apiCC.session.messageTimeOutTable[At]=setTimeout(function(){ft({reason:"timeoutReached",cSeq:At}),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[At]},apiCC.session.messageTimeOutTimer),dt.log("C->S: "+yt),lt.channel.socket.emit("groupChatMessage",yt,function(Nt){clearTimeout(apiCC.session.messageTimeOutTable[Nt.cSeq]),apiCC.session!==null&&apiCC.session!==void 0&&delete apiCC.session.messageTimeOutTable[Nt.cSeq],ft(Nt)})):(dt.log("C->S: "+yt),lt.channel.socket.emit("groupChatMessage",yt))},this.receiveGroupChatMessage=function(ot){dt.info("receiveGroupChatMessage"),this.myWebRTC_Event.createReceiveGroupChatMessageEvent(ot.groupChatId,ot.senderId,ot.nickname,ot.data,ot.metadata)},this.getConversationHistory=function(ot){var ut,ft;dt.debug("getConversationHistory"),ut={type:"getConversationHistory",convId:ot},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("getConversationHistory",ft)},this.receiveConversationHistory=function(ot){dt.debug("receiveConversationHistory"),dt.log("msg.convId :"+ot.convId);var ut,ft=0,bt=[],vt=null;if(ot.convHistory!==null)for(dt.log("msg.convHistory.length :"+ot.convHistory.length),ft=ot.convHistory.length,bt=[],ut=0;ut<ft;ut+=1)vt=JSON.parse(ot.convHistory[ut]),bt.push(vt);this.myWebRTC_Event.createReceiveConversationHistoryEvent(ot.convId,bt,ot.status)},this.setUserData=function(ot){var ut,ft;dt.info("setUserData"),this.photoURL=ot.photoURL,lt.photoURL=ot.photoURL,dt.log("photoURL :"+this.photoURL),ut={type:"setUserData",nickname:this.nickname,photoURL:this.photoURL},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("setUserData",ft),this.userDataSetted=!0},this.getUserData=function(ot){var ut,ft;dt.info("getUserData"),ut={type:"getUserData",contactId:ot},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("getUserData",ft)},this.receiveUserDataAnswer=function(ot){dt.info("receiveUserDataAnswer"),this.myWebRTC_Event.createUserDataAnswerEvent(ot.userFound,ot.contactId,ot.nickname,ot.photoURL)},this.receiveFetchUserDataAnswer=function(ot){dt.info("receiveFetchUserDataAnswer"),this.myWebRTC_Event.createFetchUserDataAnswerEvent(ot)},this.initialize=function(ot){var ut,ft;this.conversation=document.getElementById(ot),this.conversation===null&&(dt.log("conversationElementId Div Name is not correct : INCORRECT_DIV_NAME_CONVERSATION"),dt.log("conversationElementId is null")),ut={type:"registerIM",username:this.nickname},ft=JSON.stringify(ut),dt.log("C->S: "+ft),lt.channel.socket.emit("registerIM",ft)},this.initialize(mt)}},9213:(rt,it,s)=>{s.d(it,{X:()=>ht}),s(2564),s(2526),s(1817),s(1539);var et=s(1549),nt=s(4708),at=et.Y.get("ApiCCPointerSharingClient"),ht=function dt(pt){this.roomTable={},this.getRoomIds=function(){var lt=[],mt=null;for(mt in this.roomTable)lt.push(mt);return lt},this.roomExists=function(lt){return this.roomTable.hasOwnProperty(lt)},this.roomActive=function(lt){return this.roomTable.hasOwnProperty(lt)&&this.roomTable[lt].state===dt.STATE_ACTIVE},this.joinRoom=function(lt,mt){var ot=this;at.info("ApiCCPointerSharingClient::joinRoom()"),(0,nt.Ym)(mt,"object")||(mt={}),(0,nt.ki)(mt,"success","function")||(mt.success=function(){}),(0,nt.ki)(mt,"failure","function")||(mt.failure=function(){}),this.roomTable.hasOwnProperty(lt)?mt.failure("room already joined",lt):(this.roomTable[lt]={roomId:lt,state:dt.STATE_JOINING,joinRoomCallbacks:mt},this.roomTable[lt].joinRoomTimeoutId=setTimeout(function(){delete ot.roomTable[lt],mt.failure("timeout",lt)},15e3),apiCC.session.roomMgr.joinRoom(lt,"pointerSharing"))},this.leaveRoom=function(lt){this.roomTable.hasOwnProperty(lt)&&delete this.roomTable[lt],apiCC.session.roomMgr.leaveRoom(lt,"pointerSharing")},this.inviteInRoom=function(lt,mt,ot){at.info("ApiCCPointerSharingClient::inviteInRoom()"),apiCC.session.roomMgr.inviteInRoom(lt,mt,"pointerSharing",ot)},this.sendPointerLocation=function(lt,mt,ot,ut,ft){var bt;return!(!this.roomTable.hasOwnProperty(lt)||this.roomTable[lt].state!==dt.STATE_ACTIVE||(bt={type:"pointerLocation",source:mt,x:ot,y:ut},(0,nt.Ym)(ft,"object")&&(bt.data=ft),apiCC.session.roomMgr.sendMessageToRoom(lt,"pointerSharing",bt),0))},this.processMessageRoomJoin=function(lt){this.roomTable.hasOwnProperty(lt.roomId)&&this.roomTable[lt.roomId].state===dt.STATE_JOINING&&(clearTimeout(this.roomTable[lt.roomId].joinRoomTimeoutId),delete this.roomTable[lt.roomId].joinRoomTimeoutId,this.roomTable[lt.roomId].state=dt.STATE_ACTIVE,this.roomTable[lt.roomId].joinRoomCallbacks.success(lt.roomId),delete this.roomTable[lt.roomId].joinRoomCallbacks)},this.stop=function(){for(var lt=this.getRoomIds(),mt=lt.length;--mt>=0;)this.leaveRoom(lt[mt])}};ht.STATE_IDLE=Symbol("idle"),ht.STATE_JOINING=Symbol("joining"),ht.STATE_ACTIVE=Symbol("active"),ht.STATE_ERROR=Symbol("error")},3720:(rt,it,s)=>{s.d(it,{K:()=>Nt}),s(1058),s(8309),s(3710),s(1539),s(9714),s(2564),s(9554),s(4747),s(2772),s(561),s(6699),s(2479),s(2707),s(9601),s(8674),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),s(2443),s(3680),s(3706),s(2703),s(9070),s(8011),s(489),s(8304),s(7042);var et=s(1549),nt=et.Y.get("RoomManager"),at=function(St,wt){nt.debug("RoomManager"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.createRoom=function(Mt){var Ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nt.info("RoomManager:createRoom with roomType : "+Mt);var Ot={type:"createRoom",roomType:Mt,nickname:St.nickname,photoURL:St.photoURL};Ht.convId&&(Ot.data||(Ot.data={}),Ot.data.cloudConvId=Ht.convId),Ht.webconf===!0&&(Ot.data||(Ot.data={}),Ot.data.webconf=!0);var Dt=JSON.stringify(Ot);nt.log("C->S: "+Dt),St.channel.socket.emit("createRoom",Dt)},this.roomCreation=function(Mt){nt.info("RoomManager:roomCreation"),this.myWebRTC_Event.createRoomCreationEvent(Mt.status,Mt.roomId,Mt.roomType),wt(Mt)},this.roomJoin=function(Mt){nt.info("RoomManager:roomJoin"),this.myWebRTC_Event.createRoomJoinedEvent(Mt.status,Mt.roomId,Mt.roomType),wt(Mt)},this.inviteInRoom=function(Mt,Ht,Ot,Dt){var Gt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};nt.info("RoomManager:inviteInRoom with roomType:",Ot);var nn={type:"inviteInRoom",roomId:Mt,contactId:Ht,roomType:Ot,nickname:St.nickname,photoURL:St.photoURL,context:Dt};Gt.convId&&(nn.data||(nn.data={}),nn.data.cloudConvId=Gt.convId),Gt.webconf===!0&&(nn.data||(nn.data={}),nn.data.webconf=!0);var zt=JSON.stringify(nn);nt.log("C->S: "+zt),St.channel.socket.emit("inviteInRoom",zt)},this.inviteInRoomStatus=function(Mt){nt.info("inviteInRoomStatus"),wt(Mt)},this.roomInvitation=function(Mt){nt.info("roomInvitation",Mt);var Ht={};Mt.data&&(Mt.data.cloudConvId&&(Ht.cloudConvId=Mt.data.cloudConvId),Mt.data.webconf===!0&&(Ht.webconf=!0)),this.myWebRTC_Event.createRoomInvitationEvent(Mt.roomId,Mt.senderId,Mt.senderNickname,Mt.senderPhotoURL,Mt.contactList,Mt.roomType,Ht),wt(Mt)},this.requestContactListInRoom=function(Mt){nt.info("requestContactListInRoom :"+Mt);var Ht={type:"requestContactListInRoom",roomId:Mt},Ot=JSON.stringify(Ht);St.channel.socket.emit("requestContactListInRoom",Ot)},this.onContactListInRoom=function(Mt){nt.info("onContactListInRoom :"+Mt),this.myWebRTC_Event.createContactListInRoomEvent(Mt.roomId,Mt.contactList,Mt.roomType),wt(Mt)},this.answerToRoomInvitation=function(Mt,Ht,Ot){if(nt.info("answerToRoomInvitation:",Mt,Ht),Ht===!0||Ht===!1){var Dt={type:"roomInvitationAnswer",roomId:Mt,senderId:St.apiCCId,nickname:St.nickname,photoURL:St.photoURL,accept:Ht,roomType:Ot},Gt=JSON.stringify(Dt);nt.log("C->S: "+Gt),St.channel.socket.emit("roomInvitationAnswer",Gt)}else nt.log("accept value is not correct")},this.roomMemberUpdate=function(Mt){nt.info("roomMemberUpdate"),this.myWebRTC_Event.createRoomMemberUpdateEvent(Mt.roomId,Mt.contactList,Mt.status,Mt.roomType),wt(Mt)},this.sendMessageToRoom=function(Mt,Ht,Ot){nt.info("Call sending message to Room .... from :"+St.apiCCId+" message :"+Ot);var Dt={type:"roomMessage",roomId:Mt,senderId:St.apiCCId,nickname:St.nickname,roomType:Ht,data:Ot},Gt=JSON.stringify(Dt);nt.log("C->S: "+Gt),St.channel.socket.emit("roomMessage",Gt)},this.receiveRoomMessage=function(Mt){nt.info("receiveRoomMessage"),this.myWebRTC_Event.createReceiveRoomMessageEvent(Mt.roomId,Mt.senderId,Mt.nickname,Mt.data,Mt.roomType),wt(Mt)},this.joinRoom=function(Mt,Ht){var Ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};nt.info("Join Room with Id:",Mt);var Dt={type:"joinRoom",roomId:Mt,nickname:St.nickname,photoURL:St.photoURL,roomType:Ht};Ot.convId&&(Dt.data||(Dt.data={}),Dt.data.cloudConvId=Ot.convId),Ot.webconf===!0&&(Dt.data||(Dt.data={}),Dt.data.webconf=!0);var Gt=JSON.stringify(Dt);nt.log("C->S: "+Gt),St.channel.socket.emit("joinRoom",Gt)},this.leaveRoom=function(Mt,Ht){nt.info("Leave Room with Id:",Mt);var Ot={type:"leaveRoom",roomId:Mt,nickname:St.nickname,photoURL:St.photoURL,roomType:Ht},Dt=JSON.stringify(Ot);nt.log("C->S: "+Dt),St.channel.socket.emit("leaveRoom",Dt)}},ht=(s(2023),s(1038),s(4916),s(9753),s(8765)),dt=s(5945);function pt(St,wt){(wt==null||wt>St.length)&&(wt=St.length);for(var Mt=0,Ht=new Array(wt);Mt<wt;Mt++)Ht[Mt]=St[Mt];return Ht}var lt=et.Y.get("ApiCC_Channel"),mt=function(St){lt.debug("ApiCC_Channel"),this.channelReady=!1,this.socket=null,this.channelId=St.apiCCId,this.myWebRTC_Event=new ht.K,this.channelHasBeenDisconnected=!1,this.cSeq=0,this.updatePresenceGroupIsNeeded=!1,this.oldPresenceGroup=null,this.newPresenceGroup=null,this.updateSubscribeToPresenceGroupIsNeeded=!1,this.oldSubscribeToPresenceGroup=null,this.newSubscribeToPresenceGroup=null,this.initialize=function(){lt.info("ApiCC_Channel::initialize()"),this.openChannel()},this.getNewCSeq=function(){return this.cSeq=this.cSeq+1,this.cSeq},this.openChannel=function(){var wt,Mt,Ht,Ot="",Dt=null,Gt=null,nn=null,zt=null;lt.debug("openChannel channelId :"+this.channelId),lt.debug("session.apiKey :"+St.apiKey),lt.log("session.sessionId :"+St.sessionId),St.xhrPolling=!0,lt.log("CCSserver used : "+St.ccsServer),Mt=St.appId!==void 0?"&appId="+St.appId:"",Ht=St.siteId!==void 0?"&siteId="+St.siteId:"",St.userData!==void 0&&(lt.log("Defined userData : ",St.userData),Dt=JSON.stringify(St.userData),lt.log("stringUserData.length :"+Dt.length),Dt.length<=1e3?Ot="&userData="+encodeURIComponent(Dt):lt.warn("userData length is too long :"+Dt.length+" .Need to be <= 500")),St.presenceGroup!==void 0&&(lt.log("Defined presenceGroup : "+St.presenceGroup),Gt=JSON.stringify(St.presenceGroup),lt.log("stringPresenceGroup.length :"+Gt.length),Gt.length<=750?Ot+="&presenceGroup="+encodeURIComponent(Gt):lt.warn("presenceGroup length is too long :"+Gt.length+" .Need to be <= 750")),St.subscribeToPresenceGroup!==void 0&&(lt.log("Defined subscribeToPresenceGroup : "+St.subscribeToPresenceGroup),nn=JSON.stringify(St.subscribeToPresenceGroup),lt.log("stringsubscribeToPresenceGroup.length :"+nn.length),nn.length<=750?Ot+="&subscribeToPresenceGroup="+encodeURIComponent(nn):lt.warn("subscribeToPresenceGroup length is too long :"+nn.length+" .Need to be <= 750")),St.token!==void 0&&(lt.log("Defined token : "+St.token),Ot+="&token="+St.token),St.conversationSpace!==void 0&&St.conversationSpace!==null&&(lt.log("Defined conversationSpace : "+St.conversationSpace),Ot+="&conversationSpace="+St.conversationSpace),typeof apiRTC_React>"u"&&(lt.log("ApplicationUUID : "+window.location.hostname),Ot+="&applicationUUID="+window.location.hostname),Ot+="&apiLibType=apiRTC_JS",lt.log("requestOptions on connect :"+Ot),lt.log("session.ccsServer :"+St.ccsServer),wt="?channelId="+this.channelId+"&apiKey="+St.apiKey+"&apiVersion="+apiCC.version+"&apiCCSessionId="+St.apiCCSessionId+"&sessionId="+St.sessionId+Mt+Ht+Ot,zt=typeof apiRTC_React<"u"?"https":window.location.protocol==="http:"?"http":"https",dt.ag.name!=="iOS"&&dt.ag.name!=="Android"||(lt.log(dt.ag.name+" detected forcing protocol to https"),zt="https"),lt.info("CCS Connect, socket url is : "+zt+"://"+St.ccsServer+"/"+wt),this.ccsConnectionRetryNb=St.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=St.ccsConnectionRetryDelay,this.socket=window.rtcio.connect(zt+"://"+St.ccsServer+"/"+wt,{forceNew:!0,multiplex:!1,withCredentials:!0,reconnectionAttempts:this.ccsConnectionRetryNb,reconnectionDelay:this.ccsConnectionRetryDelay}),this.socket.on("connect",this.callback(this,"onChannelOpened")).on("connect_error",this.callback(this,"onChannelConnectError")).on("message",this.callbackWithParams(this,"onChannelMessage")).on("disconnect",this.callback(this,"onChannelDisconnect")),this.socket.io.on("error",this.callback(this,"onChannelError")).on("reconnect",this.callback(this,"onChannelReconnect")).on("reconnect_attempt",this.callback(this,"onChannelReconnectAttempt")).on("reconnect_error",this.callback(this,"onChannelReconnectError")).on("reconnect_failed",this.callback(this,"onChannelReconnect_failed"))},this.onWhiteBoardDisconnection=function(){lt.info("onWhiteBoardDisconnection"),apiCC.session.closeWhiteBoardClient("NETWORK_DISCONNECTION")},this.onChannelDisconnect=function(wt){lt.info("onChannelDisconnect");var Mt=Date();lt.debug("date :"+Mt),apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length),this.myWebRTC_Event.createChannelEvent("onChannelDisconnect",wt),this.channelHasBeenDisconnected=!0,apiCC.myApiCCWhiteBoardClient!==null&&(lt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(lt.log("Disconnection with an ongoing whiteboard"),lt.error("Whiteboard disconnectionTimer is set to:",apiCC.myApiCCWhiteBoardClient.disconnectionTimer),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=setTimeout(this.callback(this,"onWhiteBoardDisconnection"),apiCC.myApiCCWhiteBoardClient.disconnectionTimer)):lt.log("Disconnection without an ongoing whiteboard")),apiCC.session.JWTApzTokentimeOutId!==-1&&clearTimeout(apiCC.session.JWTApzTokentimeOutId)},this.onChannelReconnect_failed=function(){lt.info("onChannelReconnect_failed"),this.myWebRTC_Event.createChannelEvent("onChannelReconnect_failed")},this.onChannelReconnect=function(wt){lt.error("onChannelReconnect",wt);var Mt,Ht=null,Ot=0,Dt=[],Gt=null,nn=null,zt=null,Ft=!1,un=0,vn=null,yn=null;if(St.conversationSpace!==null&&St.conversationSpace!==void 0?(lt.debug("conversationSpace is set :",St.conversationSpace),St.joinConversationSpace(St.conversationSpace)):lt.debug("no conversationSpace defined"),St.userData!==void 0&&St.userData!==null&&(lt.debug("sending userData :",St.userData),St.setUserData(St.userData,!0)),St.presenceGroup!==null?(lt.debug("presenceGroup is set :",St.presenceGroup),St.sendPresenceGroupManagementCommand("join",St.presenceGroup)):lt.debug("no presenceGroup defined"),St.subscribeToPresenceGroup!==null?(lt.debug("subscribeToPresenceGroup is set :",St.subscribeToPresenceGroup),St.sendPresenceGroupManagementCommand("subscribe",St.subscribeToPresenceGroup)):lt.debug("no subscribeToPresenceGroup defined"),apiCC.session.apiCCIMClient!==null?apiCC.session.apiCCIMClient.userDataSetted===!0?(Ht={photoURL:apiCC.session.apiCCIMClient.photoURL},apiCC.session.apiCCIMClient.setUserData(Ht)):lt.log("apiCC.session.apiCCIMClient.userDataSetted !== true"):lt.log("apiCC.session.apiCCIMClient === null"),apiCC.session.apiCCWebRTCClient!==null){if(apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length>0)for(Ft=!0,Mt=0;Mt<apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length;Mt+=1)Gt={destId:(yn=apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable[Mt]).remoteId,convId:yn.userMediaId,callType:yn.callType,roomId:yn.roomId,data:yn.data,meshPublish:!0},Dt.push(Gt);if((Ot=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length)!==0){for(lt.log("Reconnecting with calls ongoing"),Mt=0;Mt<Ot;Mt+=1)apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Mt]!==null&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Mt]!==void 0?(yn=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Mt],lt.debug("call.iceState =",yn.iceState),yn.data!==null?yn.data.type!=="publish"&&yn.data.type!=="subscribe"?(lt.log("Call is P2P, updating media"),yn.updateMediaWithRetryManagement(!0),Gt={destId:yn.remoteId,convId:yn.callId,callType:yn.callType,roomId:yn.dest_roomId,data:yn.data},Dt.push(Gt)):(lt.log("Call is in an MCU session"),Gt={destId:yn.remoteId,convId:yn.callId,callType:yn.callType,roomId:yn.dest_roomId,data:yn.data},Dt.push(Gt)):(lt.log("Call is P2P, updating media - no data"),yn.updateMediaWithRetryManagement(!0),Gt={destId:yn.remoteId,convId:yn.callId,callType:yn.callType,roomId:yn.dest_roomId,data:yn.data},Dt.push(Gt))):lt.log("call no more exist");Ft=!0}else lt.log("Reconnecting without calls ongoing");for(var cn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs,gn=0;gn<cn.length;gn+=1){lt.log("Reconnecting with an ongoing sessionMCU");var Cn=[];Cn.push(cn[gn].roomName),apiCC.session.sendPresenceGroupManagementCommand("join",Cn),apiCC.session.sendPresenceGroupManagementCommand("subscribe",Cn)}}if(apiCC.myApiCCWhiteBoardClient!==null&&(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId!==0&&(lt.debug("clearing whiteBoardDisconnectionTimeoutId"),clearTimeout(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=0),lt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null?(lt.log("Reconnection with an ongoing whiteboard"),un=apiCC.myApiCCWhiteBoardClient.roomId,Ft=!0,lt.debug("Reconnection , sending request to get most recent whiteboard data"),apiCC.myApiCCWhiteBoardClient.paperSheetId=0,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})):lt.log("Reconnecting without an ongoing whiteboard")),apiCC.session.apiCCPointerSharingClient!==null&&(vn=apiCC.session.apiCCPointerSharingClient.getRoomIds()).length>0&&(Ft=!0),Ft===!0){lt.log("Sending reconnectContext to CCS"),nn={type:"reconnectContext",callList:Dt,whiteBoardRoomId:un},vn!==null&&vn.length>0&&(nn.pointerSharingRoomIds=vn);var fn=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs;if(fn.length>0){nn.updateSession=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null),nn.updateSession.type="updateSession",nn.updateSessions=[];var Tn,On=function(Rn,In){var kn=typeof Symbol<"u"&&Rn[Symbol.iterator]||Rn["@@iterator"];if(!kn){if(Array.isArray(Rn)||(kn=function(on,Hn){if(on){if(typeof on=="string")return pt(on,Hn);var Fn=Object.prototype.toString.call(on).slice(8,-1);return Fn==="Object"&&on.constructor&&(Fn=on.constructor.name),Fn==="Map"||Fn==="Set"?Array.from(on):Fn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fn)?pt(on,Hn):void 0}}(Rn))||In&&Rn&&typeof Rn.length=="number"){kn&&(Rn=kn);var xn=0,Yn=function(){};return{s:Yn,n:function(){return xn>=Rn.length?{done:!0}:{done:!1,value:Rn[xn++]}},e:function(on){throw on},f:Yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Un,jn=!0,Qn=!1;return{s:function(){kn=kn.call(Rn)},n:function(){var on=kn.next();return jn=on.done,on},e:function(on){Qn=!0,Un=on},f:function(){try{jn||kn.return==null||kn.return()}finally{if(Qn)throw Un}}}}(fn);try{for(On.s();!(Tn=On.n()).done;){var Ln=Tn.value,An=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null,{sessionMCU:Ln});An.type="updateSession",nn.updateSessions.push(An)}}catch(Rn){On.e(Rn)}finally{On.f()}}zt=JSON.stringify(nn),lt.log("C->S: "+zt),apiCC.session.channel.socket.emit("reconnectContext",zt)}Dt.splice(0,Dt.length),this.myWebRTC_Event.createChannelEvent("onChannelReconnect",wt)},this.onChannelReconnecting=function(wt){lt.info("onChannelReconnecting",wt);var Mt=Date();lt.debug("date :"+Mt),this.myWebRTC_Event.createChannelEvent("onChannelReconnecting",wt)},this.onChannelOpened=function(){lt.info("Channel opened"),lt.log("this.channelId :"+this.channelId),this.channelReady=!0,this.channelHasBeenDisconnected===!1?St.onChannelOpened():(lt.log("onChannelOpened after a disconnection, no change on session"),this.channelHasBeenDisconnected=!1,St.ApiDBActivated!==!1&&St.ApiDBActivated!==void 0&&St.ApiDBActivated!==null&&(lt.log("apiDB initialisation"),apiDB.init(St.channel.socket))),this.updatePresenceGroupIsNeeded===!0&&(lt.log("Updating presence group"),St.leavePresenceGroup(this.oldPresenceGroup),St.joinPresenceGroup(this.newPresenceGroup)),this.updateSubscribeToPresenceGroupIsNeeded===!0&&(lt.log("Updating subscribe to presence group"),St.unsubscribePresenceGroup(this.oldSubscribeToPresenceGroup),St.subscribePresenceGroup(this.newSubscribeToPresenceGroup)),this.myWebRTC_Event.createChannelEvent("onChannelOpened")},this.onChannelMessage=function(wt,Mt){var Ht,Ot=null,Dt=null;try{Ot=JSON.parse(wt)}catch{return}(Ht=Ot.type==="checkCallStatus"||Ot.type==="apiRTCDataMessage"&&Ot.data&&["activeSpeaker","stopSpeaking"].indexOf(Ot.data.type)>=0)||lt.info("onChannelMessage S->C: "+wt),Ot.type==="IMMessage"&&(lt.log("IMMessage convId :"+Ot.IMId),Dt=Ot.IMId),Mt!==void 0&&(lt.trace("ack on message reception"),lt.trace("convId :"+Dt),Mt({reason:"ack",convId:Dt})),St.processSignalingMessage(Ot,{quiet:Ht})},this.onChannelConnectError=function(wt){lt.error("onChannelConnectError :",wt.message),this.myWebRTC_Event.createChannelEvent("onChannelConnectError",wt),this.checkIfConnectionAttemptNeedToBeStopped(wt)},this.onChannelReconnectError=function(wt){lt.log("onChannelReconnectError :",wt.message),this.myWebRTC_Event.createChannelEvent("onChannelReconnectError",wt),this.checkIfConnectionAttemptNeedToBeStopped(wt)},this.onChannelReconnectAttempt=function(wt){lt.log("onChannelReconnectAttempt :",wt),this.myWebRTC_Event.createChannelEvent("onChannelReconnectAttempt",wt),this.onChannelReconnecting(wt)},this.onChannelError=function(wt){lt.error("Channel error :",wt.message),this.checkIfConnectionAttemptNeedToBeStopped(wt),this.myWebRTC_Event.createChannelEvent("onChannelError",wt)},this.checkIfConnectionAttemptNeedToBeStopped=function(wt){lt.debug("checkIfConnectionAttemptNeedToBeStopped"),(wt.message==="not authorized"||wt.message.includes("access token failure:")||wt.message.includes("DISABLED_ENTERPRISE")||wt.message.includes("An account is needed")||wt.message.includes("ApiRTC update is needed")||wt.message.includes("applicationUUID is not authorized"))&&(lt.error("Stopping connection attempts"),this.socket.disconnect())},this.callback=function(wt,Mt){return this.closureHandler=function(Ht){return wt[Mt](Ht)},this.closureHandler},this.callbackWithParams=function(wt,Mt){return this.closureHandler=function(Ht,Ot,Dt){return wt[Mt](Ht,Ot,Dt)},this.closureHandler}},ot=s(4708),ut=s(940);function ft(St){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},ft(St)}function bt(){bt=function(){return St};var St={},wt=Object.prototype,Mt=wt.hasOwnProperty,Ht=typeof Symbol=="function"?Symbol:{},Ot=Ht.iterator||"@@iterator",Dt=Ht.asyncIterator||"@@asyncIterator",Gt=Ht.toStringTag||"@@toStringTag";function nn(Un,jn,Qn){return Object.defineProperty(Un,jn,{value:Qn,enumerable:!0,configurable:!0,writable:!0}),Un[jn]}try{nn({},"")}catch{nn=function(jn,Qn,on){return jn[Qn]=on}}function zt(Un,jn,Qn,on){var Hn=jn&&jn.prototype instanceof vn?jn:vn,Fn=Object.create(Hn.prototype),Vn=new kn(on||[]);return Fn._invoke=function(Bn,qn,Gn){var _n="suspendedStart";return function($n,bn){if(_n==="executing")throw new Error("Generator is already running");if(_n==="completed"){if($n==="throw")throw bn;return{value:void 0,done:!0}}for(Gn.method=$n,Gn.arg=bn;;){var wn=Gn.delegate;if(wn){var Yt=An(wn,Gn);if(Yt){if(Yt===un)continue;return Yt}}if(Gn.method==="next")Gn.sent=Gn._sent=Gn.arg;else if(Gn.method==="throw"){if(_n==="suspendedStart")throw _n="completed",Gn.arg;Gn.dispatchException(Gn.arg)}else Gn.method==="return"&&Gn.abrupt("return",Gn.arg);_n="executing";var kt=Ft(Bn,qn,Gn);if(kt.type==="normal"){if(_n=Gn.done?"completed":"suspendedYield",kt.arg===un)continue;return{value:kt.arg,done:Gn.done}}kt.type==="throw"&&(_n="completed",Gn.method="throw",Gn.arg=kt.arg)}}}(Un,Qn,Vn),Fn}function Ft(Un,jn,Qn){try{return{type:"normal",arg:Un.call(jn,Qn)}}catch(on){return{type:"throw",arg:on}}}St.wrap=zt;var un={};function vn(){}function yn(){}function cn(){}var gn={};nn(gn,Ot,function(){return this});var Cn=Object.getPrototypeOf,fn=Cn&&Cn(Cn(xn([])));fn&&fn!==wt&&Mt.call(fn,Ot)&&(gn=fn);var Tn=cn.prototype=vn.prototype=Object.create(gn);function On(Un){["next","throw","return"].forEach(function(jn){nn(Un,jn,function(Qn){return this._invoke(jn,Qn)})})}function Ln(Un,jn){function Qn(Hn,Fn,Vn,Bn){var qn=Ft(Un[Hn],Un,Fn);if(qn.type!=="throw"){var Gn=qn.arg,_n=Gn.value;return _n&&ft(_n)=="object"&&Mt.call(_n,"__await")?jn.resolve(_n.__await).then(function($n){Qn("next",$n,Vn,Bn)},function($n){Qn("throw",$n,Vn,Bn)}):jn.resolve(_n).then(function($n){Gn.value=$n,Vn(Gn)},function($n){return Qn("throw",$n,Vn,Bn)})}Bn(qn.arg)}var on;this._invoke=function(Hn,Fn){function Vn(){return new jn(function(Bn,qn){Qn(Hn,Fn,Bn,qn)})}return on=on?on.then(Vn,Vn):Vn()}}function An(Un,jn){var Qn=Un.iterator[jn.method];if(Qn===void 0){if(jn.delegate=null,jn.method==="throw"){if(Un.iterator.return&&(jn.method="return",jn.arg=void 0,An(Un,jn),jn.method==="throw"))return un;jn.method="throw",jn.arg=new TypeError("The iterator does not provide a 'throw' method")}return un}var on=Ft(Qn,Un.iterator,jn.arg);if(on.type==="throw")return jn.method="throw",jn.arg=on.arg,jn.delegate=null,un;var Hn=on.arg;return Hn?Hn.done?(jn[Un.resultName]=Hn.value,jn.next=Un.nextLoc,jn.method!=="return"&&(jn.method="next",jn.arg=void 0),jn.delegate=null,un):Hn:(jn.method="throw",jn.arg=new TypeError("iterator result is not an object"),jn.delegate=null,un)}function Rn(Un){var jn={tryLoc:Un[0]};1 in Un&&(jn.catchLoc=Un[1]),2 in Un&&(jn.finallyLoc=Un[2],jn.afterLoc=Un[3]),this.tryEntries.push(jn)}function In(Un){var jn=Un.completion||{};jn.type="normal",delete jn.arg,Un.completion=jn}function kn(Un){this.tryEntries=[{tryLoc:"root"}],Un.forEach(Rn,this),this.reset(!0)}function xn(Un){if(Un){var jn=Un[Ot];if(jn)return jn.call(Un);if(typeof Un.next=="function")return Un;if(!isNaN(Un.length)){var Qn=-1,on=function Hn(){for(;++Qn<Un.length;)if(Mt.call(Un,Qn))return Hn.value=Un[Qn],Hn.done=!1,Hn;return Hn.value=void 0,Hn.done=!0,Hn};return on.next=on}}return{next:Yn}}function Yn(){return{value:void 0,done:!0}}return yn.prototype=cn,nn(Tn,"constructor",cn),nn(cn,"constructor",yn),yn.displayName=nn(cn,Gt,"GeneratorFunction"),St.isGeneratorFunction=function(Un){var jn=typeof Un=="function"&&Un.constructor;return!!jn&&(jn===yn||(jn.displayName||jn.name)==="GeneratorFunction")},St.mark=function(Un){return Object.setPrototypeOf?Object.setPrototypeOf(Un,cn):(Un.__proto__=cn,nn(Un,Gt,"GeneratorFunction")),Un.prototype=Object.create(Tn),Un},St.awrap=function(Un){return{__await:Un}},On(Ln.prototype),nn(Ln.prototype,Dt,function(){return this}),St.AsyncIterator=Ln,St.async=function(Un,jn,Qn,on,Hn){Hn===void 0&&(Hn=Promise);var Fn=new Ln(zt(Un,jn,Qn,on),Hn);return St.isGeneratorFunction(jn)?Fn:Fn.next().then(function(Vn){return Vn.done?Vn.value:Fn.next()})},On(Tn),nn(Tn,Gt,"Generator"),nn(Tn,Ot,function(){return this}),nn(Tn,"toString",function(){return"[object Generator]"}),St.keys=function(Un){var jn=[];for(var Qn in Un)jn.push(Qn);return jn.reverse(),function on(){for(;jn.length;){var Hn=jn.pop();if(Hn in Un)return on.value=Hn,on.done=!1,on}return on.done=!0,on}},St.values=xn,kn.prototype={constructor:kn,reset:function(Un){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(In),!Un)for(var jn in this)jn.charAt(0)==="t"&&Mt.call(this,jn)&&!isNaN(+jn.slice(1))&&(this[jn]=void 0)},stop:function(){this.done=!0;var Un=this.tryEntries[0].completion;if(Un.type==="throw")throw Un.arg;return this.rval},dispatchException:function(Un){if(this.done)throw Un;var jn=this;function Qn(qn,Gn){return Fn.type="throw",Fn.arg=Un,jn.next=qn,Gn&&(jn.method="next",jn.arg=void 0),!!Gn}for(var on=this.tryEntries.length-1;on>=0;--on){var Hn=this.tryEntries[on],Fn=Hn.completion;if(Hn.tryLoc==="root")return Qn("end");if(Hn.tryLoc<=this.prev){var Vn=Mt.call(Hn,"catchLoc"),Bn=Mt.call(Hn,"finallyLoc");if(Vn&&Bn){if(this.prev<Hn.catchLoc)return Qn(Hn.catchLoc,!0);if(this.prev<Hn.finallyLoc)return Qn(Hn.finallyLoc)}else if(Vn){if(this.prev<Hn.catchLoc)return Qn(Hn.catchLoc,!0)}else{if(!Bn)throw new Error("try statement without catch or finally");if(this.prev<Hn.finallyLoc)return Qn(Hn.finallyLoc)}}}},abrupt:function(Un,jn){for(var Qn=this.tryEntries.length-1;Qn>=0;--Qn){var on=this.tryEntries[Qn];if(on.tryLoc<=this.prev&&Mt.call(on,"finallyLoc")&&this.prev<on.finallyLoc){var Hn=on;break}}Hn&&(Un==="break"||Un==="continue")&&Hn.tryLoc<=jn&&jn<=Hn.finallyLoc&&(Hn=null);var Fn=Hn?Hn.completion:{};return Fn.type=Un,Fn.arg=jn,Hn?(this.method="next",this.next=Hn.finallyLoc,un):this.complete(Fn)},complete:function(Un,jn){if(Un.type==="throw")throw Un.arg;return Un.type==="break"||Un.type==="continue"?this.next=Un.arg:Un.type==="return"?(this.rval=this.arg=Un.arg,this.method="return",this.next="end"):Un.type==="normal"&&jn&&(this.next=jn),un},finish:function(Un){for(var jn=this.tryEntries.length-1;jn>=0;--jn){var Qn=this.tryEntries[jn];if(Qn.finallyLoc===Un)return this.complete(Qn.completion,Qn.afterLoc),In(Qn),un}},catch:function(Un){for(var jn=this.tryEntries.length-1;jn>=0;--jn){var Qn=this.tryEntries[jn];if(Qn.tryLoc===Un){var on=Qn.completion;if(on.type==="throw"){var Hn=on.arg;In(Qn)}return Hn}}throw new Error("illegal catch attempt")},delegateYield:function(Un,jn,Qn){return this.delegate={iterator:xn(Un),resultName:jn,nextLoc:Qn},this.method==="next"&&(this.arg=void 0),un}},St}function vt(St,wt,Mt,Ht,Ot,Dt,Gt){try{var nn=St[Dt](Gt),zt=nn.value}catch(Ft){return void Mt(Ft)}nn.done?wt(zt):Promise.resolve(zt).then(Ht,Ot)}var yt=et.Y.get("ApiCCSession"),At=apiCC.myWebRTC_Event,Nt=function(St){var wt=this;this.apiCCId=null,this.apiCCSessionId=apiCC.randomString(22),this.apiKey=null,this.nickname=null,this.photoURL=null,this.apiCCWebRTCClient=null,this.apiCCIMClient=null,this.apiCCDataClient=null,this.apiCCIDSessionStorage=null,this.apiKeySessionStorage=null,this.apiCCIdPersistenceTimeout=5e3,this.channel=null,this.recordActivated=St.recordActivated,this.sessionId=null,this.apiCCPointerSharingClient=null,this.apiCCWhiteBoardClient=null,this.ccsServer=St.ccsServer,this.userData=St.userData,this.apiDBActivated=!0,St.ApiDBActivated=!0,this.webRTCPluginActivated=St.webRTCPluginActivated,this.token=St.token,this.JWTApzToken=null,this.JWTApzTokenRefreshTimer=396e5,this.JWTApzTokentimeOutId=-1,this.conversationSpace=St.conversationSpace,this.tryAudioCallAfterUserMediaError=St.tryAudioCallAfterUserMediaError,this.deactivateReloadOnCancel=St.deactivateReloadOnCancel,this.connectedUsersList=[],this.messageTimeOutTable=[],this.ccsConnectionRetryNb=St.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=St.ccsConnectionRetryDelay,this.sequentialMessagesStorage={},this.cloudIsSecured=St.cloudIsSecured,St.messageTimeOutTimer!==void 0?this.messageTimeOutTimer=St.messageTimeOutTimer:this.messageTimeOutTimer=1e4,yt.log("messageTimeOutTimer set to : "+this.messageTimeOutTimer),St.presenceGroup!==void 0?this.presenceGroup=St.presenceGroup:this.presenceGroup=["default"],St.subscribeToPresenceGroup!==void 0?this.subscribeToPresenceGroup=St.subscribeToPresenceGroup:this.subscribeToPresenceGroup=["default"],this.presenceGroupAddedByApiRTC=[],this.subscribeToPresenceGroupAddedByApiRTC=[],this.remoteAccessInvitation=null,this.isDeviceWebRTCCompliant=function(){return apiCC.isWebRTCCompliant()},this.isDeviceDTLSCompliant=function(){var Ot=dt.E2.getBrowser(),Dt=parseInt(Ot.version,10);return!(Ot.name==="Chrome"&&Dt<44&&(yt.log("isDeviceDTLSCompliant FALSE : Chrome V < 44"),1))},this.userData===void 0||this.userData===null?(this.userData={},this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):this.userData.webRtcCompliant===void 0||this.userData.webRtcCompliant===null?(this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):yt.log("userData webRtcCompliant set to :",this.userData.webRtcCompliant),this.userData.osName=dt.BF,this.userData.browser=dt.Xh,this.userData.deviceType=dt.vO,this.userData.deviceVendor=dt.Cm,this.userData.browser_version=dt.dc,this.userData.browser_major_version=dt.PR,this.userData.apiRTCVersion=apiCC.version,this.userData.cpuArchitecture=dt.Ne,this.userData.engineName=dt.AA,this.userData.engineVersion=dt.TI,apiRTC.userAgentInstance!==void 0&&(this.userData.remoteAccessUserSupport=apiRTC.userAgentInstance.getCapabilities().remoteAccessUser),dt.BF==="Android"&&typeof cordova<"u"&&(this.userData.platform="Android"),typeof apiRTC_React<"u"&&(this.userData.react=!0);var Mt=function(){var Ot,Dt=(Ot=bt().mark(function Gt(){var nn,zt;return bt().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:return Ft.next=2,(0,dt.Ak)();case 2:return nn=Ft.sent,wt.userData.deviceModel=nn,Ft.next=6,(0,dt.RX)();case 6:zt=Ft.sent,wt.userData.osVersion=zt,apiCC.osVersion=zt,wt.startApiCCSession(St);case 10:case"end":return Ft.stop()}},Gt)}),function(){var Gt=this,nn=arguments;return new Promise(function(zt,Ft){var un=Ot.apply(Gt,nn);function vn(cn){vt(un,zt,Ft,vn,yn,"next",cn)}function yn(cn){vt(un,zt,Ft,vn,yn,"throw",cn)}vn(void 0)})});return function(){return Dt.apply(this,arguments)}}();function Ht(Ot){return Ot instanceof Array?(yt.log("data instanceof Array"),!0):(yt.log("data not instanceof Array"),!1)}Mt(),this.roomManagerEventHandler=function(Ot){if(yt.debug("roomManagerEventHandler, roomId :"+Ot.roomId+", type :"+Ot.type+", roomType :"+Ot.roomType),Ot.roomType==="whiteBoard"){if(apiCC.myApiCCWhiteBoardClient===null||apiCC.myApiCCWhiteBoardClient===void 0)return void yt.log("No whiteBoard created, leaving msg processing");Ot.type==="roomCreation"&&(yt.log("whiteBoard : roomCreation"),apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId,apiCC.myApiCCWhiteBoardClient.paperSheetId++,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),Ot.type==="roomInvitation"&&(yt.log("whiteBoard : roomInvitation"),apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId),Ot.type==="roomMessage"&&apiCC.myApiCCWhiteBoardClient.messageProcessing(Ot.data),Ot.type==="roomJoin"&&(yt.log("whiteBoard : roomJoin"),apiCC.myApiCCWhiteBoardClient.roomJoined=!0,apiCC.myApiCCWhiteBoardClient.roomId=Ot.roomId)}else Ot.roomType==="pointerSharing"?apiCC.session.apiCCPointerSharingClient&&Ot.type==="roomJoin"&&apiCC.session.apiCCPointerSharingClient.processMessageRoomJoin(Ot):Ot.roomType==="coBrowsing"?Ot.type==="roomMessage"&&yt.log("coBrowsing : roomMessage :"+Ot):yt.log("roomManagerEventHandler for msg.roomType :"+Ot.roomType)},this.callback=function(Ot,Dt){return this.closureHandler=function(Gt){return Ot[Dt](Gt)},this.closureHandler},this.getSessionStorage=function(Ot){var Dt=sessionStorage.getItem(Ot);if(Dt===null)return null;try{var Gt=JSON.parse(Dt),nn=new Date(Gt.expiresAt);return new Date>=nn?(sessionStorage.removeItem(Ot),null):Gt.value}catch{yt.error("Something went wrong when parsing JSON from session storage values")}},this.generateApiCCID=function(){yt.debug("apiCCId is not defined by user, checking if apiCCId exist in sessionStorage"),typeof apiRTC_React>"u"&&(this.apiCCIDSessionStorage=this.getSessionStorage("apiCCId"),this.apiKeySessionStorage=this.getSessionStorage("apiKey")),this.apiCCIDSessionStorage!==null?(yt.log("apiCCId exist in sessionStorage : "+this.apiCCIDSessionStorage),this.apiKeySessionStorage!==null?(yt.log("apiKey exist in sessionStorage : "+this.apiKeySessionStorage),this.apiKeySessionStorage===this.apiKey?(yt.log("apiKey is the same, keeping apiCCId"),this.apiCCId=this.apiCCIDSessionStorage):(yt.log("apiKey is not the same, generating an  apiCCId"),this.apiCCId=Math.floor(1000001*Math.random()).toString(),yt.log("Creation of new ApiRTC session with Id : "+this.apiCCId))):this.apiCCId=this.apiCCIDSessionStorage):(yt.log(" No apiCCId found on sessionStorage : generating an apiCCId"),this.apiCCId=String(1e5+Math.floor(9e5*Math.random())),yt.log("Creation of new ApiRTC session with Id : "+this.apiCCId))},this.getNumericIdFromAlpha=function(Ot){yt.log("getNumericIdFromAlpha new : "+Ot);var Dt,Gt=0;if(Ot.length===0)return Gt;for(Dt=0;Dt<Ot.length;Dt++)Gt=(Gt<<5)-Gt+Ot.charCodeAt(Dt),Gt&=Gt;return yt.log("getNumericIdFromAlpha returned value: "+(Gt>>>0)),Gt>>>0},this.startApiCCSession=function(Ot){if(yt.debug("startApiCCSession"),this.roomMgr=new at(this,this.callback(this,"roomManagerEventHandler")),Ot.xhrPolling===!0?this.xhrPolling=!0:this.xhrPolling=!1,Ot.appId!==void 0&&(this.appId=Ot.appId),Ot.siteId!==void 0&&(this.siteId=Ot.siteId),Ot.apiKey===void 0)return yt.error('Error : Initialisation parameters: "apikey" for session creation is not defined'),null;if(yt.log("Session creation with apiKey : "+Ot.apiKey),yt.log("Session creation with apiCCId : "+Ot.apiCCId),this.apiKey=Ot.apiKey,Ot.onReady===void 0&&typeof apiRTC_React>"u")return yt.error('Error : Initialisation parameters: "onReady" for session creation is not defined'),null;if(apiCC.addEventListener("sessionReady",Ot.onReady),typeof apiRTC_React>"u"&&(this.sessionId=this.getSessionStorage("sessionId")),Ot.apiCCId===void 0||Ot.apiCCId===""||Ot.apiCCId===null)this.generateApiCCID();else if(yt.log("Session creation with apiCCId defined by user : "+Ot.apiCCId),yt.debug("params.idConversionActivated : "+Ot.idConversionActivated),Ot.idConversionActivated===void 0||Ot.idConversionActivated===!0)if((0,ot._C)(Ot.apiCCId))this.apiCCId=Ot.apiCCId.toString();else{yt.log("Converting this Id in a numeric one");var Dt=this.getNumericIdFromAlpha(Ot.apiCCId);Dt+="",yt.log("Numeric Id is : "+Dt),(0,ot._C)(Dt)?(yt.warn("Id has been converted to a numeric one"),this.apiCCId=Dt.toString()):(yt.warn("Error : Defined apiCCId :"+Ot.apiCCId+" is not numeric. ApiCCID is generated"),this.generateApiCCID())}else yt.log("String id convertion is deactivated"),this.apiCCId=Ot.apiCCId.toString();Ot.apiCCIdPersistenceTimeout!==null&&typeof Ot.apiCCIdPersistenceTimeout=="number"&&Ot.apiCCIdPersistenceTimeout>=0&&(this.apiCCIdPersistenceTimeout=Ot.apiCCIdPersistenceTimeout),this.channel!==null&&(yt.log("this.channel is defined"),delete this.channel),this.channel=new mt(this),this.channel.initialize(),Ot.nickname!==null&&Ot.nickname!==void 0?(yt.log("Nickname is defined :"+Ot.nickname),this.nickname=Ot.nickname):(yt.log("Nickname is not defined, setting to apiCCId value :"+this.apiCCId),this.nickname=this.apiCCId),Ot.photoURL!==null&&Ot.photoURL!==void 0?(yt.log("photoURL is defined :"+Ot.photoURL),this.photoURL=Ot.photoURL):(yt.log("photoURL is not defined"),this.photoURL=null)},this.reOpenChannel=function(Ot,Dt){yt.info("reOpenChannel"),this.apiCCId=Ot.toString(),this.apiKey=Dt,this.channel.socket!==void 0&&this.channel.socket!==null&&this.channel.socket.disconnect(),this.channel.channelReady=!1,this.channel.socket=null,this.channel.channelId=this.apiCCId,this.channel.initialize(),this.apiCCWebRTCClient!==null&&this.apiCCWebRTCClient.webRTCClient!==null&&(this.apiCCWebRTCClient.webRTCClient.socket=this.channel.socket)},this.onChannelOpened=function(){yt.debug("ApiCCSession onChannelOpened"),St.ApiDBActivated!==!1&&St.ApiDBActivated!==void 0&&St.ApiDBActivated!==null&&(yt.log("apiDB initialisation"),apiDB.init(this.channel.socket)),At.createSessionReadyEvent(apiCC.session.apiCCId)},this.createWebRTCClient=function(Ot){yt.debug("createWebRTCClient");var Dt={};this.apiCCWebRTCClient=new apiCC.ApiCCWebRTCClient(this),apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),Dt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,Dt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(Dt),setTimeout(function(){At.createWebRTCClientCreatedEvent()});var Gt=apiCC.getUserMediaStreamIds(),nn=Gt.length;for(yt.debug("listing accessToLocalMedia "+nn);--nn>=0;)if(apiCC.getUserMediaStream(Gt[nn]).accessToLocalMedia()){yt.debug("setting accessToLocalMedia to true"),this.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0;break}return this.apiCCWebRTCClient},this.createPointerSharingClient=function(){return this.apiCCPointerSharingClient===null&&(this.apiCCPointerSharingClient=new apiCC.ApiCCPointerSharingClient(this)),this.apiCCPointerSharingClient},this.closePointerSharingClient=function(){this.apiCCPointerSharingClient!==null&&this.apiCCPointerSharingClient instanceof apiCC.ApiCCPointerSharingClient&&(this.apiCCPointerSharingClient.stop(),this.apiCCPointerSharingClient=null)},this.createWhiteBoard=function(Ot,Dt,Gt,nn){return yt.info("createWhiteBoard"),this.apiCCWhiteBoardClient=apiCC.createWhiteBoard(Ot,Dt,Gt,nn),this.apiCCWhiteBoardClient},this.closeWhiteBoardClient=function(Ot){yt.info("closeWhiteBoardClient"),apiCC.closeWhiteBoardClient(Ot)},this.createIMClient=function(Ot){return yt.debug("createIMClient"),this.apiCCIMClient=new apiCC.ApiCCIMClient(this,Ot),this.apiCCIMClient},this.createDataClient=function(){return yt.info("createDataClient"),this.apiCCDataClient=new apiCC.ApiCCDataClient(this),this.apiCCDataClient},this.updatingQuery=function(Ot){yt.debug("updatingQuery");var Dt=null,Gt=null,nn=null;return Dt=(0,ot.dD)(Ot),this.userData!==void 0?(Gt=JSON.stringify(this.userData),nn=encodeURIComponent(Gt),Dt.userData=nn,(0,ot.Wc)(Dt)):Ot},this.setUserData=function(Ot,Dt){yt.debug("setUserData in session :",Ot);var Gt,nn,zt,Ft=[],un=this.userData;if(this.userData!==void 0){if(this.userData=(0,ot.S6)(this.userData,Ot),yt.debug("this.userData :",this.userData),yt.debug("actualUserData :",un),yt.debug("forceSendData :",Dt),Dt!==!0&&JSON.stringify(this.userData)===JSON.stringify(un))return void yt.debug("userData is not changed, leaving userData processing")}else this.userData=Ot;for(Gt={type:"setUserData",userData:Ot},nn=JSON.stringify(Gt),yt.log("C->S: "+nn),this.channel.socket.emit("setUserData",nn),yt.log("socket.io 1.X : socket.io.opts.query :"+this.channel.socket.io.opts.query),this.channel.socket.io.opts.query=this.updatingQuery(this.channel.socket.io.opts.query),yt.log("socket.io 1.X : after update : socket.io.opts.query :"+this.channel.socket.io.opts.query),zt=0;zt<this.connectedUsersList.length;zt+=1)this.apiCCId===this.connectedUsersList[zt].userId&&(this.connectedUsersList[zt].userData=this.userData,Ft[0]=this.apiCCId,At.createConnectedUsersListUpdateEvent(this.connectedUsersList[zt].group,Ft,"userDataUpdate","userDataUpdate"))},this.sendPresenceGroupManagementCommand=function(Ot,Dt){if(yt.debug("sendPresenceGroupManagementCommand :"+Ot+" for group : "+Dt),Ht(Dt)===!0){var Gt,nn,zt,Ft=Dt.length;if(Ot==="unsubscribe")for(zt=0;zt<Ft;zt+=1)this.removeGroupDataFromConnectedUsersList(Dt[zt]);Ft!==1||Dt[0]!=="deactivated"?(Gt={type:"presenceGroupManagement",command:Ot,group:Dt},nn=JSON.stringify(Gt),yt.log("C->S: "+nn),this.channel.socket.emit("presenceGroupManagement",nn)):yt.debug("leaving sendPresenceGroupManagementCommand for group deactivated")}else yt.error("group parameter value is not correct, need to be a JSON array")},this.sendConversationSpaceCommand=function(Ot,Dt){var Gt,nn;yt.debug("sendConversationSpaceCommand :"+Ot+" for conversationSpace : "+Dt),Gt={type:"conversationSpaceManagement",command:Ot,conversationSpace:Dt},nn=JSON.stringify(Gt),yt.log("C->S: "+nn),this.channel.socket.emit("conversationSpaceManagement",nn)},this.joinPresenceGroup=function(Ot,Dt){var Gt=this;Dt||((Dt={}).doneByApiRTC=!1),yt.debug("joinPresenceGroup :"+Ot),Ht(Ot)===!0?(this.sendPresenceGroupManagementCommand("join",Ot),Ot.forEach(function(nn){var zt=Gt.presenceGroupAddedByApiRTC.indexOf(nn);Gt.presenceGroup.indexOf(nn)===-1&&(Gt.presenceGroup.push(nn),Dt.doneByApiRTC&&zt===-1&&Gt.presenceGroupAddedByApiRTC.push(nn)),Dt.doneByApiRTC===!1&&zt!==-1&&Gt.presenceGroupAddedByApiRTC.splice(zt,1)})):yt.log("group parameter value is not correct, need to be a JSON array"),yt.debug("this.presenceGroup :"+this.presenceGroup)},this.leavePresenceGroup=function(Ot,Dt){var Gt=this;Dt||((Dt={}).doneByApiRTC=!1),yt.debug("leavePresenceGroup :"+Ot),Ht(Ot)===!0?Ot.forEach(function(nn){var zt=Gt.presenceGroupAddedByApiRTC.indexOf(nn);if(Dt.doneByApiRTC===!1||Dt.doneByApiRTC===!0&&zt!==-1){var Ft=Gt.presenceGroup.indexOf(nn);Ft!==-1&&Gt.presenceGroup.splice(Ft,1),Gt.sendPresenceGroupManagementCommand("leave",[nn])}zt!==-1&&Gt.presenceGroupAddedByApiRTC.splice(zt,1)}):yt.log("group parameter value is not correct, need to be a JSON array"),yt.debug("this.presenceGroup :"+this.presenceGroup)},this.subscribePresenceGroup=function(Ot,Dt){var Gt=this;Dt||((Dt={}).doneByApiRTC=!1),yt.debug("subscribePresenceGroup :"+Ot),Ht(Ot)===!0?(this.sendPresenceGroupManagementCommand("subscribe",Ot),Ot.forEach(function(nn){var zt=Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(nn);Gt.subscribeToPresenceGroup.indexOf(nn)===-1&&(Gt.subscribeToPresenceGroup.push(nn),Dt.doneByApiRTC&&Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(nn)===-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.push(nn)),Dt.doneByApiRTC===!1&&zt!==-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.splice(zt,1)})):yt.log("group parameter value is not correct, need to be a JSON array"),yt.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.unsubscribePresenceGroup=function(Ot,Dt){var Gt=this;Dt||((Dt={}).doneByApiRTC=!1),yt.debug("unsubscribePresenceGroup :"+Ot),Ht(Ot)===!0?Ot.forEach(function(nn){var zt=Gt.subscribeToPresenceGroupAddedByApiRTC.indexOf(nn);if(Dt.doneByApiRTC===!1||Dt.doneByApiRTC===!0&&zt!==-1){var Ft=Gt.subscribeToPresenceGroup.indexOf(nn);Ft!==-1&&Gt.subscribeToPresenceGroup.splice(Ft,1),Gt.sendPresenceGroupManagementCommand("unsubscribe",[nn])}zt!==-1&&Gt.subscribeToPresenceGroupAddedByApiRTC.splice(zt,1)}):yt.log("group parameter value is not correct, need to be a JSON array"),yt.debug("this.subscribeToPresenceGroup :"+this.subscribeToPresenceGroup)},this.joinConversationSpace=function(Ot){yt.info("joinConversationSpace :"+Ot),this.sendConversationSpaceCommand("join",Ot),this.conversationSpace=Ot},this.leaveConversationSpace=function(Ot){yt.info("leaveConversationSpace :"+Ot),Ot!=null&&this.conversationSpace===Ot?(this.sendConversationSpaceCommand("leave",Ot),this.conversationSpace=null):yt.debug("socket is not in the conversationSpace, we request to leave")},this.subscribeToCloudEvent=function(Ot,Dt){this.sendCloudEventsCommand("subscribe",Ot,Dt)},this.unsubscribeToCloudEvent=function(Ot,Dt){this.sendCloudEventsCommand("unsubscribe",Ot,Dt)},this.sendCloudEventsCommand=function(Ot,Dt,Gt){if(["subscribe","unsubscribe"].includes(Ot))if(Dt&&typeof Dt=="string"){if(Gt){if(ft(Gt)!=="object")return void yt.error("wrong headers format");for(var nn=0,zt=Object.values(Gt);nn<zt.length;nn++){var Ft=zt[nn];if(!Ft||typeof Ft!="string")return void yt.error("wrong headers format")}}var un={type:"cloudEvents",command:Ot,topic:Dt};Gt&&(un.headers=Gt);var vn=JSON.stringify(un);yt.log("C->S:",vn),this.channel.socket.emit("cloudEvents",vn)}else yt.error("wrong topic format");else yt.error("wrong command")},this.getConversationList=function(Ot){yt.info("getConversationList request");var Dt,Gt;Gt=Ot!==void 0?{type:"getConversationList",lastConversationNb:Ot}:{type:"getConversationList",lastConversationNb:50},Dt=JSON.stringify(Gt),yt.log("C->S: "+Dt),this.channel.socket.emit("getConversationList",Dt)},this.receiveConversationListAnswer=function(Ot){yt.info("receiveConversationListAnswer"),yt.log("msg.convList.length :"+Ot.convList.length);var Dt,Gt=Ot.convList.length,nn=[],zt=null;for(Dt=0;Dt<Gt;Dt+=1)yt.log("i ="+Dt),zt=JSON.parse(Ot.convList[Dt]),nn.push(zt);At.createReceiveConversationListAnswerEvent(nn)},this.getContactOccurrencesFromConversationList=function(Ot){yt.info("getContactOccurrencesFromConversationList request");var Dt,Gt;Gt=Ot!==void 0?{type:"getContactOccurrencesFromConversationList",lastConversationNb:Ot}:{type:"getContactOccurrencesFromConversationList",lastConversationNb:50},Dt=JSON.stringify(Gt),yt.log("C->S: "+Dt),this.channel.socket.emit("getContactOccurrencesFromConversationList",Dt)},this.receiveContactOccurrencesFromConversationListAnswer=function(Ot){yt.info("receiveContactOccurrencesFromConversationListAnswer"),yt.log("msg.contactOccurrencesTable.length :"+Ot.contactOccurrencesTable.length),At.createReceiveContactOccurrencesFromConversationListAnswerEvent(Ot.contactOccurrencesTable)},this.getConversationDetailReport=function(Ot){var Dt,Gt;yt.info("getConversationDetailReport for convId :"+Ot),Dt={type:"getConversationDetailReport",convId:Ot},Gt=JSON.stringify(Dt),yt.log("C->S: "+Gt),this.channel.socket.emit("getConversationDetailReport",Gt)},this.receiveConversationDetailReportAnswer=function(Ot){yt.info("receiveConversationDetailReportAnswer"),yt.log("msg.CDR :"+Ot.CDR),At.createReceiveConversationDetailReportAnswerEvent(Ot.CDR)},this.manageConnectedUsersList=function(Ot,Dt,Gt,nn){yt.debug("manageConnectedUsersList");var zt,Ft,un,vn=!1,yn=0,cn=!1,gn="unset";for(yt.trace("manageConnectedUsersList.length :"+Ot.length),yt.trace("this.connectedUsersList.length :"+this.connectedUsersList.length),yt.log("state :"+Dt),yt.log("group :"+Gt),un=0;un<Ot.length;un+=1)Ot[un].group=Gt;if(Dt==="online")for(yt.log("state : online"),zt=0;zt<Ot.length;zt+=1){if(yt.log("msgConnectedUsersListWithStatus  :"+zt),vn=!1,this.connectedUsersList.length===0){yt.log("this.connectedUsersList is empty"),this.connectedUsersList=Ot,yt.log("this.connectedUsersList[0].group :"+this.connectedUsersList[0].group),At.createConnectedUsersListUpdateEvent(Gt,nn,Dt,"newConnectionState");break}for(Ft=0;Ft<this.connectedUsersList.length;Ft+=1)if(cn=!1,Ot[zt].userId===this.connectedUsersList[Ft].userId&&Ot[zt].group===this.connectedUsersList[Ft].group){vn=!0,JSON.stringify(this.connectedUsersList[Ft].userData)!==JSON.stringify(Ot[zt].userData)&&(yt.log("userData is updated"),this.connectedUsersList[Ft].userData=Ot[zt].userData,cn=!0,gn="userDataUpdate"),this.connectedUsersList[Ft].callState!==Ot[zt].callState&&(yt.log("callState is updated"),this.connectedUsersList[Ft].callState=Ot[zt].callState,cn=!0,gn="callState"),cn===!0&&At.createConnectedUsersListUpdateEvent(Gt,nn,Dt,gn);break}if(vn===!1){yt.log("Adding user in connectedUsersList :"+Ot[zt].userId),this.connectedUsersList.push(Ot[zt]);var Cn=[];Cn[0]=Ot[zt].userId,At.createConnectedUsersListUpdateEvent(Gt,Cn,Dt,"newConnectionState")}}else for(yt.log("state : offline"),zt=0;zt<Ot.length;zt+=1)for(yt.log("msgConnectedUsersListWithStatus  :"+zt),yn=this.connectedUsersList.length,Ft=0;Ft<yn;Ft+=1)if(Ot[zt].userId===this.connectedUsersList[Ft].userId&&Ot[zt].group===this.connectedUsersList[Ft].group){yt.log("Removing user in connectedUsersList :"+Ot[zt].userId),yt.log("... in group :"+Ot[zt].group),this.connectedUsersList.splice(Ft,1),At.createConnectedUsersListUpdateEvent(Gt,nn,Dt,"newConnectionState");break}},this.removeGroupDataFromConnectedUsersList=function(Ot){yt.debug("removeGroupDataFromConnectedUsersList for group :",Ot);var Dt,Gt=this.connectedUsersList.length,nn=[],zt=0;for(yt.debug("this.connectedUsersList.length :",this.connectedUsersList.length),Dt=0;Dt<Gt;Dt+=1)yt.debug("this.connectedUsersList[j].group :",this.connectedUsersList[Dt-zt].group),yt.debug("group :",Ot),this.connectedUsersList[Dt-zt].group===Ot&&(yt.log("Removing user in connectedUsersList :"+this.connectedUsersList[Dt-zt].userId),nn[0]=this.connectedUsersList[Dt-zt].userId,this.connectedUsersList.splice(Dt-zt,1),zt+=1,At.createConnectedUsersListUpdateEvent(Ot,nn,"offline","newConnectionState"))},this.getConnectedUsersList=function(Ot){Ot!==void 0?yt.log("getConnectedUsersList for group : "+Ot):yt.log("getConnectedUsersList : complete users list");var Dt,Gt=[];if(Ot==null)return this.connectedUsersList;for(yt.log("filtering list for group : "+Ot),Dt=0;Dt<this.connectedUsersList.length;Dt+=1)this.connectedUsersList[Dt].group===Ot&&Gt.push(this.connectedUsersList[Dt]);return Gt},this.isClientWebRtcCompliant=function(Ot){var Dt,Gt,nn=null,zt=null;if(Ot!==void 0)for(Dt=this.getConnectedUsersList(),Gt=0;Gt<Dt.length;Gt++)Dt[Gt].userId===Ot&&(zt=Dt[Gt].userData)!=null&&zt.webRtcCompliant!==void 0&&(nn=zt.webRtcCompliant);return nn},this.isClientDTLSCompliant=function(Ot){var Dt,Gt,nn=!0,zt=null;if(Ot!==void 0)for(Dt=this.getConnectedUsersList(),Gt=0;Gt<Dt.length;Gt++)Dt[Gt].userId===Ot&&(zt=Dt[Gt].userData,yt.log("userData :",zt),zt!=null&&zt.dtlsCompliant!==void 0&&(nn=zt.dtlsCompliant));return nn},this.getConnectedUserIdsList=function(Ot){yt.info("getConnectedUserIdsList, group :",Ot);var Dt,Gt,nn=[],zt=!1,Ft={},un=[];if(Ot!==void 0?yt.log("getConnectedUserIdsList for group : "+Ot):yt.log("getConnectedUserIdsList : complete users list"),Ot==null)un=JSON.parse(JSON.stringify(this.connectedUsersList));else for(Dt=0;Dt<this.connectedUsersList.length;Dt+=1)this.connectedUsersList[Dt].group===Ot&&un.push(this.connectedUsersList[Dt]);for(Dt=0;Dt<un.length;Dt+=1){for(zt=!1,Gt=0;Gt<nn.length;Gt++)if(nn[Gt].userId===un[Dt].userId){zt=!0;break}zt===!1&&((Ft={}).userId=un[Dt].userId,Ft.callState=un[Dt].callState,Ft.userData=un[Dt].userData,nn.push(Ft))}return nn},this.getGroupsFromConnectedUsersList=function(Ot){yt.info("getGroupsFroConnectedUsersList");var Dt,Gt=[],nn=!1;for(Dt=0;Dt<this.connectedUsersList.length;Dt+=1)this.connectedUsersList[Dt].userId===Ot&&(yt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Dt].group)),nn=!0,Gt.push(this.connectedUsersList[Dt].group));return nn===!0?JSON.stringify(Gt):"User_Not_Found"},this.getConnectedUserInfo=function(Ot,Dt){yt.info("getConnectedUserInfo"),yt.log("getConnectedUserInfo userId :",Ot),yt.log("getConnectedUserInfo infoType :",Dt);var Gt,nn=null,zt=null;switch(Dt){case"all":for(yt.log("all"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return yt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt])),nn=this.getGroupsFromConnectedUsersList(Ot),(zt=JSON.parse(JSON.stringify(this.connectedUsersList[Gt]))).groups=nn,delete zt.group,JSON.stringify(zt);break;case"callState":for(yt.log("callState"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return yt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt].callState)),this.connectedUsersList[Gt].callState;break;case"userData":for(yt.log("userData"),Gt=0;Gt<this.connectedUsersList.length;Gt+=1)if(this.connectedUsersList[Gt].userId===Ot)return yt.log("Matching Entry found :"+JSON.stringify(this.connectedUsersList[Gt].userData)),JSON.stringify(this.connectedUsersList[Gt].userData);break;case"groups":return yt.log("groups"),this.getGroupsFromConnectedUsersList(Ot);default:yt.log("infoType not defined switch case : "+Dt)}return"User_Not_Found"},this.isConnectedUser=function(Ot){yt.info("isConnectedUser");var Dt,Gt=!1;for(Dt=0;Dt<this.connectedUsersList.length;Dt+=1)if(yt.log(JSON.stringify(this.connectedUsersList[Dt])),this.connectedUsersList[Dt].userId===Ot)return Gt=!0,yt.log("isConnected :"+Gt),Gt;return yt.log("isConnected :"+Gt),Gt},this.displayConnectedUsersList=function(){var Ot;for(yt.debug("displayConnectedUsersList"),Ot=0;Ot<this.connectedUsersList.length;Ot+=1)yt.log("User :"+this.connectedUsersList[Ot].userId+" on group :"+this.connectedUsersList[Ot].group)},this.updatePresence=function(Ot){try{yt.debug("updatePresence : ",JSON.stringify(Ot))}catch(Dt){yt.debug(Dt)}yt.log("updatePresence for group :"+Ot.group),this.manageConnectedUsersList(Ot.connectedUsersListWithStatus,Ot.state,Ot.group,Ot.connectedUsersList),At.createUpdatePresenceEvent(Ot.connectedUsersList,Ot.state,Ot.connectedUsersListWithStatus)},this.processCloudEventOccurred=function(Ot){yt.debug("processCloudEventOccurred",Ot),At.createCloudEventOccurredEvent(Ot.event.type,Ot.event.target)},this.updateUserStatus=function(Ot){yt.info("updateUserStatus"+Ot),At.createUpdateUserStatusEvent(Ot)},this.sendDebugCommand=function(Ot,Dt,Gt){yt.info("sendDebugCommand :"+Ot),new ut.S(this.channel.socket).sendDebugCommand("getClientSocketsInfo",Dt,Gt)},this.processSignalingMessage=function(Ot){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=null,nn=null,zt=!1,Ft=null,un=null,vn=!1,yn=null;if(Ot.type==="invite")this.apiCCWebRTCClient?(yt.log("this.webRTCPluginActivated =",this.webRTCPluginActivated),(dt.Xh==="IE"||dt.Xh==="Safari"&&dt.PR<11)&&this.webRTCPluginActivated===!0?(yt.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){yt.log("manageWebRTCPlugin cb on Invite"),apiCC.session.apiCCWebRTCClient.webRTCClient.processInvite(Ot)},function(){yt.log("actionOnInstallationNeeded"),yt.log("sending bye to be done"),new ut.S(apiCC.session.channel.socket).sendBye(Ot.callId,Ot.calleeId,Ot.roomId,Ot.callerId,"WebRTC_Plugin_Installation_needed",Ot.data)})):(yt.log("managing call with browser"),this.apiCCWebRTCClient.webRTCClient.processInvite(Ot))):yt.warn("WebRTCClient is not created");else if(Ot.type==="200OK")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200OK(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="candidate")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCandidate(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="bye")this.apiCCWebRTCClient?(yt.log("bye message from:"+Ot.clientId+" for callId : "+Ot.callId),this.apiCCWebRTCClient.webRTCClient.onRemoteHangup(Ot.callId,Ot.clientId,Ot.roomId,Ot.reason,Ot.confId,Ot.data)):yt.warn("WebRTCClient is not created");else if(Ot.type==="update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processUpdate(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="200update")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200Update(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="newConversationCreated")this.apiCCIMClient?this.apiCCIMClient.newConversationCreated(Ot):yt.warn("IMClient is not created");else if(Ot.type==="IMMessage")this.apiCCIMClient?this.apiCCIMClient.receiveMessage(Ot):yt.warn("IMClient is not created");else if(Ot.type==="groupChatCreation")this.apiCCIMClient?this.apiCCIMClient.groupChatCreation(Ot):yt.warn("IMClient is not created");else if(Ot.type==="groupChatInvitation")this.apiCCIMClient?this.apiCCIMClient.groupChatInvitation(Ot):yt.warn("IMClient is not created");else if(Ot.type==="groupChatMemberUpdate")this.apiCCIMClient?this.apiCCIMClient.groupChatMemberUpdate(Ot):yt.warn("IMClient is not created");else if(Ot.type==="addUserInGroupChatAnswer")this.apiCCIMClient?this.apiCCIMClient.addUserInGroupChatAnswer(Ot):yt.warn("IMClient is not created");else if(Ot.type==="groupChatMessage")this.apiCCIMClient?this.apiCCIMClient.receiveGroupChatMessage(Ot):yt.warn("IMClient is not created");else if(Ot.type==="conversationHistoryAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveConversationHistory(Ot):yt.warn("IMClient is not created");else if(Ot.type==="getUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveUserDataAnswer(Ot):yt.warn("IMClient is not created");else if(Ot.type==="fetchUserDataAnswer")this.apiCCIMClient?this.apiCCIMClient.receiveFetchUserDataAnswer(Ot):yt.warn("IMClient is not created");else if(Ot.type==="dataMessage")this.apiCCDataClient?this.apiCCDataClient.receiveData(Ot):yt.warn("DataClient is not created");else if(Ot.type==="dataAck")this.apiCCWebRTCClient.webRTCClient.processDataAck(Ot);else if(Ot.type==="dataEndAck")this.apiCCWebRTCClient.webRTCClient.processDataEndAck(Ot);else if(Ot.type==="updateVideoQuality")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processUpdateVideoQuality(Ot.callId,Ot.profile);else if(Ot.type==="apiRTCDataMessage")if(Dt.quiet||yt.debug("apiRTCDataMessage:",Ot),(0,ot.Ym)(Ot.data,"object"))if(Ot.data.type==="joinSessionAnswer")if(this.apiCCWebRTCClient){var cn={roomName:Ot.data.roomId};(0,ot.ki)(Ot.data,"convId","string")&&(cn.convId=Ot.data.convId),(0,ot.ki)(Ot.data,["data","mode"],"string")&&(cn.data={mode:Ot.data.data.mode}),(0,ot.ki)(Ot.data,["data","transition"],"string")&&Ot.data.data.transition==="mesh2janus"?this.apiCCWebRTCClient.webRTCClient.MCUClient.changeSessionMode(cn,"mesh2janus"):this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(cn,{createSession:!0})}else yt.warn("WebRTCClient is not created");else if(Ot.data.type==="slowLink"){if(this.apiCCWebRTCClient){var gn={};Ot.data.advice&&(gn.advice=Ot.data.advice),this.apiCCWebRTCClient.webRTCClient.processSlowLink(Ot.data.callId,gn)}}else if(Ot.data.type==="videoQualityChanged")At.createVideoQualityChangedEvent(Ot.data.callId,Ot.data.roomId,Ot.data.hint,Ot.data.profile);else if(Ot.data.type==="distantIceError")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantIceError(Ot.data);else if(Ot.data.type==="streamTrackChanged")this.apiCCWebRTCClient&&Ot.data.hasOwnProperty("mline")&&Ot.data.hasOwnProperty("muted")&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackMuteChanged(Ot.data.callId,Ot.data.mline,Ot.data.muted);else if(Ot.data.type==="streamTrackStatusChanged")this.apiCCWebRTCClient&&Ot.data.hasOwnProperty("mline")&&Ot.data.hasOwnProperty("change")&&Ot.data.hasOwnProperty(Ot.data.change)&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackStatusChanged(Ot.data.callId,Ot.data.mline,Ot.data[Ot.data.change]);else if(Ot.data.type==="configureEncodings")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processConfigureEncodings(Ot.data);else if(Ot.data.type==="activeSpeaker")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(Ot.data,!0);else if(Ot.data.type==="stopSpeaking")this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(Ot.data,!1);else if(Ot.data.type==="updateStream")this.apiCCWebRTCClient&&Ot.data.callId&&Ot.data.mline&&Ot.data.direction&&this.apiCCWebRTCClient.webRTCClient.processUpdateStream(Ot.data.callId,Ot.data.mline,Ot.data.direction);else if(Ot.data.type==="startRecording"){if(this.apiCCWebRTCClient)if(Ot.data.callId==="COMPOSITE")this.apiCCWebRTCClient.webRTCClient.MCUClient.startCompositeRecording(Ot.data.mediaType,Ot.data.customIdInFilename,Ot.data.convId,Ot.data.data);else{for(yn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--yn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[yn].callId===Ot.data.callId){vn=!0;break}vn?this.apiCCWebRTCClient.webRTCClient.MCUClient.startRecording(Ot.data.mediaType,Ot.data.customIdInFilename,Ot.data.convId,Ot.data.callId,Ot.data.data):yt.info("cannot start recording (call not found)")}}else if(Ot.data.type==="startStreaming"){if(this.apiCCWebRTCClient){for(yn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--yn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[yn].callId===Ot.data.callId){vn=!0;break}vn?this.apiCCWebRTCClient.webRTCClient.MCUClient.startStreaming(Ot.data.service,Ot.data.server,Ot.data.streamKey,Ot.data.callId):yt.info("cannot start streaming (call not found)")}}else if(Ot.data.type==="startCallStatsMonitoring"){if(this.apiCCWebRTCClient){for(yt.debug("startCallStatsMonitoring",Ot.data.callId),yn=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--yn>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[yn].callId===Ot.data.callId){nn=this.apiCCWebRTCClient.webRTCClient.callsTable[yn];break}nn?["chrome","firefox"].indexOf(ot.wL.type)>=0?nn.csmIntervalId?yt.debug("call stats monitoring already started"):nn.csmIntervalId=setInterval(nn.callback(nn,"csmHandler"),nn.csmIntervalMs):yt.debug("call stats are only supported on chrome and firefox"):yt.debug("no such call")}}else Ot.data.type==="callOrder"?(yt.log("callOrder received"),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=Ot.senderId,Gt=this.apiCCWebRTCClient.webRTCClient.callWithNumber(Ot.data.caller,!0,{MCUType:"MCU-Callee",confId:Ot.data.confId,convId:Ot.data.convId,remoteMediaStreamId:Ot.data.mediaStreamId},Ft),this.apiCCWebRTCClient.webRTCClient.myWebRTC_Event.createIncomingCallEvent(this.clientId,Ot.data.caller,Ot.data.caller,Gt,!1,1,!1,"video",!0,"web","media")):yt.warn("WebRTCClient is not created")):Ot.data.type==="subscribeOrder"?(yt.log("subscribeOrder received :",Ot.data),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=Ot.senderId,Ot.data.data.subscribeOrder=!0,(un=[]).push(Ot.data.stream),this.apiCCWebRTCClient.webRTCClient.MCUClient.subscribeToStreams(un,"VIDEO",Ot.data.data,Ft,{noStreamCheck:!0})):yt.warn("WebRTCClient is not created")):Ot.data.type==="distantCallEstablished"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantCallEstablished(Ot.data):Ot.data.type==="simulcastFeedChanged"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processSimulcastFeedChanged(Ot.data):yt.log("msg.data.type is not managed :"+Ot.data.type);else yt.log("msg.data === undefined");else if(Ot.type==="conversationListAnswer")this.receiveConversationListAnswer(Ot);else if(Ot.type==="contactOccurrencesFromConversationListAnswer")this.receiveContactOccurrencesFromConversationListAnswer(Ot);else if(Ot.type==="conversationDetailReport")this.receiveConversationDetailReportAnswer(Ot);else if(Ot.type==="updatePresence")yt.log("updatePresence"),this.updatePresence(Ot);else if(Ot.type==="updateUserStatus")yt.log("updateUserStatus"),this.updateUserStatus(Ot);else if(Ot.type==="receiveMCUSessionId")yt.log("receiveMCUSessionId"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionId(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="joinSessionAnswer")yt.log("joinSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionAnswer(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="updateSessionAnswer")yt.log("updateSessionAnswer"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(Ot,{updateCalls:!0}):yt.warn("WebRTCClient is not created");else if(Ot.type==="availableStreams")this.apiCCWebRTCClient?(yt.log("message availableStreams received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(Ot.msg,"regular",function(fn,Tn,On){At.createMCUAvailableStreamEvent([Tn],fn)}):yt.warn("WebRTCClient is not created")):yt.warn("WebRTCClient is not created");else if(Ot.type==="availableReplay")this.apiCCWebRTCClient?(yt.log("message availableReplay received"),this.apiCCWebRTCClient?(zt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableReplay(Ot.msg),At.createMCUAvailableReplayEvent(Ot.msg,zt)):yt.warn("WebRTCClient is not created")):yt.warn("WebRTCClient is not created");else if(Ot.type==="availableComposite")this.apiCCWebRTCClient?(yt.log("message availableComposite received"),this.apiCCWebRTCClient?(zt=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(Ot.msg,"composite"),At.createMCUAvailableCompositeEvent(Ot.msg,zt)):yt.warn("WebRTCClient is not created")):yt.warn("WebRTCClient is not created");else if(Ot.type==="onRemoveStream")this.apiCCWebRTCClient?(yt.log("message onRemoveStream received:",Ot),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.removeMCUStream(Ot.callId,Ot.msg.id,Ot.msg.reason):yt.warn("WebRTCClient is not created")):yt.warn("WebRTCClient is not created");else if(Ot.type==="availableStreamsUpdate")this.apiCCWebRTCClient?(yt.log("message availableStreamsUpdate received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateAvailableStream(Ot.msg,"regular",function(fn,Tn,On,Ln){At.createMCUAvailableStreamUpdateEvent([Tn],fn)}):yt.warn("WebRTCClient is not created")):yt.warn("WebRTCClient is not created");else if(Ot.type==="checkCallStatus")this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCheckCallStatus(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="MCUSessionInvitation")yt.log("MCUSessionInvitation"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="MCUSessionInvitationToGroupChat")yt.log("MCUSessionInvitationToGroupChat"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="participantEjected")yt.log("participantEjected"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.participantEjected(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="recordingStarted")yt.log("recordingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStarted(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="recordingStopped")yt.log("recordingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStopped(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="recordingStreamAvailable")yt.log("recordingStreamAvailable"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStreamAvailable(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="streamingStarted")yt.log("streamingStarted"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStarted(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="streamingStopped")yt.log("streamingStopped"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStopped(Ot):yt.warn("WebRTCClient is not created");else if(Ot.type==="sessionId")yt.log("sessionId :"+Ot.sessionId),this.sessionId=Ot.sessionId,Ot.JWTApzToken!==void 0&&this.handleJWTApzToken(Ot.JWTApzToken);else if(Ot.type==="JWTTokenRefreshAnswer")yt.log("JWTTokenRefreshAnswer"),Ot.JWTApzToken!==void 0&&this.handleJWTApzToken(Ot.JWTApzToken);else if(Ot.type==="roomCreation")yt.log("roomCreation"),this.roomMgr.roomCreation(Ot);else if(Ot.type==="roomJoin")yt.log("roomJoined"),this.roomMgr.roomJoin(Ot);else if(Ot.type==="inviteInRoomStatus")yt.log("inviteInRoomStatus"),this.roomMgr.inviteInRoomStatus(Ot);else if(Ot.type==="contactListInRoom")yt.log("contactListInRoom"),this.roomMgr.onContactListInRoom(Ot);else if(Ot.type==="roomInvitation")yt.log("roomInvitation"),this.roomMgr.roomInvitation(Ot);else if(Ot.type==="roomMessage")yt.log("roomMessage"),this.roomMgr.receiveRoomMessage(Ot);else if(Ot.type==="roomMemberUpdate")yt.log("roomMemberUpdate"),this.roomMgr.roomMemberUpdate(Ot);else if(Ot.type==="agentReconnect"){var Cn=this.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Ot.callId);Cn!=null&&Cn.getUserMediaOnCall()}else Ot.type==="sequence"?(yt.log("Sequential message"),this.handleSequentialMessage(Ot)):Ot.type==="Ack"?yt.log("Ack received"):Ot.type==="receipt"?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processReceipt(Ot):Ot.type==="error"?(yt.log("error received"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processError(Ot):At.createErrorEvent(Ot.errorInfo,Ot.errorCode,Ot.callId,Ot.roomId,null,null,Ot.convId)):Ot.type==="enterpriseConfig"?(yt.log("enterpriseConfig received"),this.handleEnterpriseConfigMessage(Ot)):Ot.type==="AIEMessage"?(yt.log("AIEMessage received"),this.handleAIEMessage(Ot)):Ot.type==="cloudEventOccurred"?this.processCloudEventOccurred(Ot):yt.log("Error : No type for this message")},this.handleSequentialMessage=function(Ot){if(Ot.id!==void 0&&Ot.packetNum!==void 0&&Ot.totalPacketsNum!==void 0&&Ot.data!==void 0){yt.debug("Handle sequential message packet "+Ot.packetNum+"/"+Ot.totalPacketsNum,Ot);var Dt=[];if(wt.sequentialMessagesStorage[Ot.id]!==void 0&&(Dt=wt.sequentialMessagesStorage[Ot.id]),Dt.push(Ot),wt.sequentialMessagesStorage[Ot.id]=Dt,Dt.length===Ot.totalPacketsNum){Dt.sort(function(zt,Ft){return zt.packetNum-Ft.packetNum});var Gt="";Dt.forEach(function(zt){Gt+=zt.data}),delete wt.sequentialMessagesStorage[Ot.id];var nn=null;try{nn=JSON.parse(Gt)}catch(zt){return void yt.error("Error : can't parse sequential message JSON :",zt)}if(!nn)return void yt.error("Error : can't restore sequential message, it's null");yt.debug("Restored sequential message :",Gt),wt.processSignalingMessage(nn)}}else yt.error("Error : sequential message is inconsistent :",Ot)},this.handleEnterpriseConfigMessage=function(Ot){if(yt.debug("handleEnterpriseConfigMessage :",Ot),(0,ot.ki)(Ot,"sentry","boolean")&&Ot.sentry===!0){var Dt;Dt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!=="https:"?"http":"https",apiCC.loadSentry(apiCC.initApiKey,Dt)}if((0,ot.ki)(Ot,"customJson","string")&&Ot.customJson!=="")try{yt.debug("customJson :",Ot.customJson),Ot.customJson=JSON.parse(Ot.customJson)}catch(Gt){yt.error(Gt)}if((0,ot.ki)(Ot,"iceServers","string")&&Ot.iceServers!=="")try{yt.debug("iceServers :",Ot.iceServers),Ot.iceServers=JSON.parse(Ot.iceServers),wt.apiCCWebRTCClient.setPcConfig(Ot.iceServers)}catch(Gt){yt.error(Gt)}(0,ot.ki)(Ot,"logLevel","string")&&Ot.logLevel!==""&&!isNaN(parseInt(Ot.logLevel))&&apiRTC.setLogLevel(parseInt(Ot.logLevel)),(0,ot.ki)(Ot,"ccs","object")&&(wt.ccsInfo=Object.assign({},Ot.ccs))},this.handleAIEMessage=function(Ot){switch(yt.debug("handleAIEMessage :",Ot),Ot.detail){case"modelLoaded":if(apiCC!==void 0&&Ot.userMediaStreamId!==void 0){var Dt=apiCC.getUserMediaStream(Ot.userMediaStreamId).mediaFilterManager;for(var Gt in Dt.filters)Dt.filters[Gt]!==void 0&&Dt.filters[Gt].streamAIE!==null&&Dt.filters[Gt].streamAIE.modelLoaded(Ot)}break;case"unknownModelName":yt.error("Unknown model name :",Ot.modelName);break;case"loadModelError":yt.error("Error while loading model :",Ot.info);break;default:yt.debug("Unknown detail :",Ot.detail)}},this.handleJWTApzToken=function(Ot){yt.debug("handleJWTApzToken :",Ot),wt.JWTApzToken=Ot,wt.cloudIsSecured===!0?(yt.debug("Setting JWTApzToken on cloudAPI"),apiCC.CloudApi.setJWTApzToken(wt.JWTApzToken)):yt.debug("JWTApzToken is not set on cloudAPI"),wt.JWTApzTokentimeOutId!==-1&&clearTimeout(wt.JWTApzTokentimeOutId),wt.JWTApzTokentimeOutId=setTimeout(function(){var Dt=JSON.stringify({type:"JWTTokenRefreshRequest"});yt.log("C->S: "+Dt),apiCC.session.channel.socket.emit("JWTTokenRefreshRequest",Dt)},wt.JWTApzTokenRefreshTimer)},this.fetchUserData=function(Ot){var Dt,Gt;yt.debug("fetchUserData"),Dt={type:"fetchUserData",id:Ot.id,apiKey:Ot.apiKey,timeout:Ot.timeout},Gt=JSON.stringify(Dt),yt.log("C->S: "+Gt),this.channel.socket.emit("fetchUserData",Gt)}}},7323:(rt,it,s)=>{s.d(it,{q:()=>jt}),s(4363),s(9653),s(3710),s(1539),s(9714),s(561),s(2564),s(4812),s(8309),s(9753),s(9554),s(4747),s(8674),s(7042),s(1038),s(8783),s(4916),s(2526),s(1817),s(2165),s(6992),s(3948);var et=s(1549),nt=s(5945),at=s(4708);function ht(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}s(2479),s(9070),s(8304),s(489),s(2419),s(8011);var dt=function(){function Pt(){(function(rn,Jt){if(!(rn instanceof Jt))throw new TypeError("Cannot call a class as a function")})(this,Pt)}var Vt,Zt;return Vt=Pt,(Zt=[{key:"applyFilter",value:function(rn,Jt){}},{key:"release",value:function(){}}])&&ht(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function pt(Pt,Vt){return function(Zt){if(Array.isArray(Zt))return Zt}(Pt)||function(Zt,rn){var Jt=Zt==null?null:typeof Symbol<"u"&&Zt[Symbol.iterator]||Zt["@@iterator"];if(Jt!=null){var ln,mn,an=[],hn=!0,En=!1;try{for(Jt=Jt.call(Zt);!(hn=(ln=Jt.next()).done)&&(an.push(ln.value),!rn||an.length!==rn);hn=!0);}catch(Mn){En=!0,mn=Mn}finally{try{hn||Jt.return==null||Jt.return()}finally{if(En)throw mn}}return an}}(Pt,Vt)||function(Zt,rn){if(Zt){if(typeof Zt=="string")return lt(Zt,rn);var Jt=Object.prototype.toString.call(Zt).slice(8,-1);return Jt==="Object"&&Zt.constructor&&(Jt=Zt.constructor.name),Jt==="Map"||Jt==="Set"?Array.from(Zt):Jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jt)?lt(Zt,rn):void 0}}(Pt,Vt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lt(Pt,Vt){(Vt==null||Vt>Pt.length)&&(Vt=Pt.length);for(var Zt=0,rn=new Array(Vt);Zt<Vt;Zt++)rn[Zt]=Pt[Zt];return rn}function mt(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}function ot(Pt,Vt){var Zt;return Zt=(Pt/=255)<.09804?.01894124847001224*Pt:Pt<.2?.5695370733621028*(Pt-.09804)+.001857:Pt<.298?1.292329661362709*(Pt-.2)+.05993:Pt<.4?1.5339348764221266*(Pt-.298)+.1866:Pt<.498?1.5697674418604652*(Pt-.4)+.343:Pt<.6?1.570223617104747*(Pt-.498)+.4969:Pt<.698?1.536107711138311*(Pt-.6)+.657:Pt<.8?1.2995292271479013*(Pt-.698)+.8076:Pt<.898?.5868013055895552*(Pt-.8)+.9401:.023568065908199296*(Pt-.898)+.9976,255*Math.pow(Zt,Vt)}function ut(Pt,Vt){return 255*Math.pow(Pt/255,Vt)}s(9575),s(9743),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7327);var ft=function(){function Pt(rn,Jt,ln){(function(mn,an){if(!(mn instanceof an))throw new TypeError("Cannot call a class as a function")})(this,Pt),this.image=rn,this.width=Jt,this.height=ln,this.length=this.width*this.height}var Vt,Zt;return Vt=Pt,Zt=[{key:"mean",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Jt=0,ln=0,mn=0;if(rn)for(var an=0;an<this.length;an++)Jt+=Math.pow(this.image.data[4*an+0],2)/(255*this.length),ln+=Math.pow(this.image.data[4*an+1],2)/(255*this.length),mn+=Math.pow(this.image.data[4*an+2],2)/(255*this.length);else for(var hn=0;hn<this.length;hn++)Jt+=this.image.data[4*hn+0]/this.length,ln+=this.image.data[4*hn+1]/this.length,mn+=this.image.data[4*hn+2]/this.length;return[Jt,ln,mn]}},{key:"mad",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Jt=this.mean(rn),ln=pt(Jt,3),mn=ln[0],an=ln[1],hn=ln[2],En=0,Mn=0,Pn=0;if(rn)for(var Wn=0;Wn<this.length;Wn++)En+=Math.abs(Math.pow(this.image.data[4*Wn+0],2)/255-mn)/this.length,Mn+=Math.abs(Math.pow(this.image.data[4*Wn+1],2)/255-an)/this.length,Pn+=Math.abs(Math.pow(this.image.data[4*Wn+2],2)/255-hn)/this.length;else for(var Nn=0;Nn<this.length;Nn++)En+=Math.abs(this.image.data[4*Nn+0]-mn)/this.length,Mn+=Math.abs(this.image.data[4*Nn+1]-an)/this.length,Pn+=Math.abs(this.image.data[4*Nn+2]-hn)/this.length;return[En,Mn,Pn]}},{key:"std",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Jt=this.mean(rn),ln=pt(Jt,3),mn=ln[0],an=ln[1],hn=ln[2],En=0,Mn=0,Pn=0;if(rn)for(var Wn=0;Wn<this.length;Wn++)En+=Math.pow(Math.pow(this.image.data[4*Wn+0],2)/255-mn,2)/this.length,Mn+=Math.pow(Math.pow(this.image.data[4*Wn+1],2)/255-an,2)/this.length,Pn+=Math.pow(Math.pow(this.image.data[4*Wn+2],2)/255-hn,2)/this.length;else for(var Nn=0;Nn<this.length;Nn++)En+=Math.pow(this.image.data[4*Nn+0]-mn,2)/this.length,Mn+=Math.pow(this.image.data[4*Nn+1]-an,2)/this.length,Pn+=Math.pow(this.image.data[4*Nn+2]-hn,2)/this.length;return[En=Math.sqrt(En),Mn=Math.sqrt(Mn),Pn=Math.sqrt(Pn)]}},{key:"blur",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,Jt=new OffscreenCanvas(this.width,this.height),ln=Jt.getContext("2d");Jt.width=this.width,Jt.height=this.height,ln.putImageData(this.image,0,0),ln.filter="blur("+rn+"px)",ln.drawImage(Jt,0,0);var mn=ln.getImageData(0,0,this.width,this.height);return mn}},{key:"threshold",value:function(rn,Jt,ln){var mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:255,an=arguments.length>4&&arguments[4]!==void 0&&arguments[4],hn=new ImageData(this.image.data,this.width,this.height),En=0;if(an){var Mn=En;En=mn,mn=Mn}for(var Pn=0;Pn<this.length;Pn++)this.image.data[4*Pn+0]<rn?hn.data[4*Pn+0]=En:hn.data[4*Pn+0]=mn,this.image.data[4*Pn+1]<Jt?hn.data[4*Pn+1]=En:hn.data[4*Pn+1]=mn,this.image.data[4*Pn+2]<ln?hn.data[4*Pn+2]=En:hn.data[4*Pn+2]=mn;return hn}},{key:"powerFilter",value:function(rn){var Jt=new Uint8ClampedArray(4*this.length);if(rn===1)return this.image;for(var ln=0;ln<this.length;ln++)Jt[4*ln+0]=ut(this.image.data[4*ln+0],rn),Jt[4*ln+1]=ut(this.image.data[4*ln+1],rn),Jt[4*ln+2]=ut(this.image.data[4*ln+2],rn),Jt[4*ln+3]=255;return new ImageData(Jt,this.width,this.height)}},{key:"sigmoidFilter",value:function(rn){for(var Jt=new Uint8ClampedArray(4*this.length),ln=0;ln<this.length;ln++)Jt[4*ln+0]=ot(this.image.data[4*ln+0],rn),Jt[4*ln+1]=ot(this.image.data[4*ln+1],rn),Jt[4*ln+2]=ot(this.image.data[4*ln+2],rn),Jt[4*ln+3]=255;return new ImageData(Jt,this.width,this.height)}},{key:"weightedSum",value:function(rn,Jt){for(var ln=new Uint8ClampedArray(4*this.length),mn=0;mn<this.length;mn++)ln[4*mn+0]=Jt*this.image.data[4*mn+0]+(1-Jt)*rn.data[4*mn+0],ln[4*mn+1]=Jt*this.image.data[4*mn+1]+(1-Jt)*rn.data[4*mn+1],ln[4*mn+2]=Jt*this.image.data[4*mn+2]+(1-Jt)*rn.data[4*mn+2],ln[4*mn+3]=255;return new ImageData(ln,this.width,this.height)}},{key:"weightedSumMask",value:function(rn,Jt){for(var ln=new Uint8ClampedArray(4*this.length),mn=0;mn<this.length;mn++){var an=Jt.data[4*mn]/255;ln[4*mn+0]=an*this.image.data[4*mn+0]+(1-an)*rn.data[4*mn+0],ln[4*mn+1]=an*this.image.data[4*mn+1]+(1-an)*rn.data[4*mn+1],ln[4*mn+2]=an*this.image.data[4*mn+2]+(1-an)*rn.data[4*mn+2],ln[4*mn+3]=255}return new ImageData(ln,this.width,this.height)}}],Zt&&mt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function bt(Pt,Vt){if(!(Pt instanceof Vt))throw new TypeError("Cannot call a class as a function")}function vt(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}var yt=function(){function Pt(){var rn=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Jt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;bt(this,Pt),this.blurMask=rn,this.smoothBorder=Jt,this.blurFactor=ln,this.smoothingFactor=mn,this.maskImage=null,this.net=null}var Vt,Zt;return Vt=Pt,Zt=[{key:"loadModel",value:function(){var rn=this;return new Promise(function(Jt,ln){bodyPix.load({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}).then(function(mn){rn.net=mn,Jt()})})}},{key:"computeMask",value:function(rn){var Jt=this;return new Promise(function(ln,mn){Jt.net.segmentPerson(rn).then(function(an){Jt.width=an.width,Jt.height=an.height,Jt.length=Jt.width*Jt.height;for(var hn=new Uint8ClampedArray(4*Jt.length),En=0;En<Jt.length;En++){var Mn=255*an.data[En];hn[4*En+0]=Mn,hn[4*En+1]=Mn,hn[4*En+2]=Mn,hn[4*En+3]=255}var Pn=document.createElement("canvas"),Wn=Pn.getContext("2d");Pn.width=Jt.width,Pn.height=Jt.height;var Nn=new ImageData(hn,Jt.width,Jt.height);if(Wn.putImageData(Nn,0,0),Jt.blurMask&&(Wn.filter="blur("+Jt.blurFactor+"px)"),Wn.drawImage(Pn,0,0,Jt.width,Jt.height),Jt.maskImage=Wn.getImageData(0,0,Jt.width,Jt.height),Jt.blurMask)if(Jt.smoothBorder){if(Jt.smoothingFactor!==-1){var Jn=new ft(Jt.maskImage,Jt.width,Jt.height);Jt.maskImage=Jn.sigmoidFilter(Jt.smoothingFactor)}}else{var rr=new ft(Jt.maskImage,Jt.width,Jt.height);Jt.maskImage=rr.threshold(40,40,40,255,!1)}ln(Jt.maskImage)})})}},{key:"applyTransparency",value:function(rn){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Jt===null&&(Jt=this.maskImage);for(var ln=new Uint8ClampedArray(rn.width*rn.height*4),mn=0;mn<rn.width*rn.height;mn++)ln[4*mn+0]=rn.data[4*mn+0],ln[4*mn+1]=rn.data[4*mn+1],ln[4*mn+2]=rn.data[4*mn+2],ln[4*mn+3]=Jt.data[4*mn];var an=new ImageData(ln,rn.width,rn.height);return an}},{key:"superposeImages",value:function(rn,Jt,ln){var mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;mn===null&&(mn=this.maskImage);var an=new ft(Jt,rn.width,rn.height),hn=an.weightedSumMask(ln,mn);return hn}},{key:"setBackground",value:function(rn,Jt){var ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return this.superposeImages(rn,rn,Jt,ln)}},{key:"blurBackground",value:function(rn){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,mn=new ft(rn,rn.width,rn.height),an=mn.blur(Jt);return this.setBackground(rn,an,ln)}}],Zt&&vt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function At(Pt,Vt){if(!(Pt instanceof Vt))throw new TypeError("Cannot call a class as a function")}function Nt(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}var St=et.Y.get("StreamSegmentation"),wt=apiCC.myWebRTC_Event,Mt=function(){function Pt(rn){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:480,ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:360,mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;At(this,Pt),this.mediaStream=rn,this.backgroundMode="none",this.backgroundBlurFactor=10,this.canvasWidth=Jt,this.canvasHeight=ln,this.length=this.canvasWidth*this.canvasHeight,this.userMediaStreamId=mn;for(var an=new Uint8ClampedArray(4*this.length),hn=0;hn<4*this.length;hn++)an[hn]=255;this.backgroundImage=new ImageData(an,this.canvasWidth,this.canvasHeight);var En=!0,Mn=!0,Pn=5,Wn=-1;this.backSub=new yt(En,Mn,Pn,Wn),this.modelLoaded=!1,this.maskStreamLaunched=!1,this.backgroundSubtractionActivated=!1}var Vt,Zt;return Vt=Pt,Zt=[{key:"setBackgroundMode",value:function(rn){this.backgroundMode=rn}},{key:"setBackgroundImage",value:function(rn){this.backgroundImage=rn}},{key:"setBackgroundBlurFactor",value:function(rn){this.backgroundBlurFactor=rn}},{key:"loadModel",value:function(){St.debug("Loading model");var rn=this;return new Promise(function(Jt,ln){rn.backSub.loadModel().then(function(mn){rn.modelLoaded=!0,St.debug("Model loaded"),Jt()})})}},{key:"getMaskStream",value:function(){var rn=document.createElement("video");rn.srcObject=this.mediaStream;var Jt=document.createElement("canvas"),ln=Jt.getContext("2d");Jt.width=this.canvasWidth,Jt.height=this.canvasHeight;var mn=document.createElement("canvas"),an=mn.getContext("2d");mn.width=this.canvasWidth,mn.height=this.canvasHeight;var hn=this;rn.addEventListener("loadeddata",function(){rn.play(),requestAnimationFrame(hr),hn.modelLoaded?Nn=!0:hn.loadModel().then(function(cr){Nn=!0})});for(var En=!0,Mn=new Uint8ClampedArray(4*this.length),Pn=0;Pn<4*this.length;Pn++)Mn[Pn]=255;var Wn=new ImageData(Mn,this.canvasWidth,this.canvasHeight);an.putImageData(Wn,0,0);var Nn=!1,Jn=0,rr=!0;function hr(){ln.drawImage(rn,0,0,Jt.width,Jt.height);var cr=ln.getImageData(0,0,Jt.width,Jt.height);if(hn.modelLoaded&&En&&Nn&&(rr||hn.backgroundMode!=="none")){rr&&(rr=!1);var dr=new Date;En=!1,hn.backSub.computeMask(cr).then(function(Cr){En=!0,1/((new Date-dr)/1e3)<1&&++Jn>=10&&(Nn=!1,St.error("The segmentation process cannot be handled"),wt.createBackgroundSubstractionStopComputeTimeEvent(hn.userMediaStreamId))})}hn.modelLoaded&&hn.backSub.maskImage!==null&&Nn?an.putImageData(hn.backSub.maskImage,0,0):an.putImageData(Wn,0,0),hn.continueMaskComputation?requestAnimationFrame(hr):(St.debug("Mask computation stoped"),hn.continueMaskComputation=!0)}return this.continueMaskComputation=!0,this.maskMediaStream=mn.captureStream(),this.maskStreamLaunched=!0,this.maskMediaStream}},{key:"activateBackgroundSubtraction",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(rn!==null&&this.setBackgroundMode(rn),this.backgroundSubtractionActivated)return this.processedMediaStream;this.maskStreamLaunched||this.getMaskStream();var Jt=document.createElement("video");Jt.srcObject=this.mediaStream;var ln=document.createElement("video");ln.srcObject=this.maskMediaStream;var mn=document.createElement("canvas"),an=mn.getContext("2d");mn.width=this.canvasWidth,mn.height=this.canvasHeight;var hn=document.createElement("canvas"),En=hn.getContext("2d");hn.width=this.canvasWidth,hn.height=this.canvasHeight,this.continueBackgroundSubtraction=!0;var Mn=this;function Pn(){an.drawImage(Jt,0,0,mn.width,mn.height);var Wn=an.getImageData(0,0,mn.width,mn.height);if(Mn.backgroundMode==="none")En.putImageData(Wn,0,0);else{an.drawImage(ln,0,0,mn.width,mn.height);var Nn=an.getImageData(0,0,mn.width,mn.height),Jn=null;switch(Mn.backgroundMode){case"image":Jn=Mn.backSub.setBackground(Wn,Mn.backgroundImage,Nn);break;case"blur":default:Jn=Mn.backSub.blurBackground(Wn,Mn.backgroundBlurFactor,Nn);break;case"transparent":Jn=Mn.backSub.applyTransparency(Wn,Nn)}En.putImageData(Jn,0,0)}Mn.continueBackgroundSubtraction?requestAnimationFrame(Pn):(St.debug("Mask application stoped"),Mn.continueBackgroundSubtraction=!0)}return Jt.addEventListener("loadeddata",function(){Jt.play(),ln.play(),requestAnimationFrame(Pn)}),this.processedMediaStream=hn.captureStream(30),this.backgroundSubtractionActivated=!0,this.processedMediaStream}},{key:"deactivateBackgroundSubtraction",value:function(){this.setBackgroundMode("none"),this.processedMediaStream=this.mediaStream,this.backgroundSubtractionActivated=!1,this.continueBackgroundSubtraction=!1,this.maskMediaStream=null,this.maskStreamLaunched=!1,this.continueMaskComputation=!1}}],Zt&&Nt(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function Ht(Pt){return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},Ht(Pt)}function Ot(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}function Dt(Pt,Vt){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,rn){return Zt.__proto__=rn,Zt},Dt(Pt,Vt)}function Gt(Pt,Vt){if(Vt&&(Ht(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Pt)}function nn(Pt){return nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},nn(Pt)}var zt=et.Y.get("OldMediaFilterBackgroundSubtraction"),Ft=function(Pt){(function(an,hn){if(typeof hn!="function"&&hn!==null)throw new TypeError("Super expression must either be null or a function");an.prototype=Object.create(hn&&hn.prototype,{constructor:{value:an,writable:!0,configurable:!0}}),Object.defineProperty(an,"prototype",{writable:!1}),hn&&Dt(an,hn)})(mn,Pt);var Vt,Zt,rn,Jt,ln=(rn=mn,Jt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var an,hn=nn(rn);if(Jt){var En=nn(this).constructor;an=Reflect.construct(hn,arguments,En)}else an=hn.apply(this,arguments);return Gt(this,an)});function mn(){var an;return function(hn,En){if(!(hn instanceof En))throw new TypeError("Cannot call a class as a function")}(this,mn),(an=ln.call(this)).streamSegmentation=null,an.userMediaStreamId=null,an}return Vt=mn,(Zt=[{key:"applyFilter",value:function(an,hn){var En=this;zt.debug("Apply filter with descriptor:",hn);var Mn=an.getAudioTracks();Mn.length>0&&Mn.forEach(function(Nn){an.removeTrack(Nn)});var Pn=an.getVideoTracks();if(Pn.length===0)return Promise.reject("MediaStream has no video tracks");var Wn=Pn[0].getSettings();return hn.options!==void 0&&hn.options.userMediaStreamId!==void 0&&(this.userMediaStreamId=hn.options.userMediaStreamId),this.streamSegmentation=new Mt(an,Wn.width,Wn.height,this.userMediaStreamId),this.loadTensorflow().then(function(Nn){return En.loadTensorflowModel()}).then(function(Nn){return new Promise(function(Jn,rr){zt.debug("Model loading..."),En.streamSegmentation.loadModel().then(function(hr){zt.debug("Model loaded");var cr=null;hn.options!==void 0&&hn.options.backgroundMode!==void 0&&(hn.options.backgroundMode==="image"&&hn.options.image instanceof ImageData&&En.streamSegmentation.setBackgroundImage(hn.options.image),cr=hn.options.backgroundMode);var dr=En.streamSegmentation.activateBackgroundSubtraction(cr);Mn.forEach(function(Cr){dr.addTrack(Cr)}),Jn(dr)})})}).catch(function(Nn){return Promise.reject(Nn)})}},{key:"release",value:function(){this.streamSegmentation.deactivateBackgroundSubtraction(),this.streamSegmentation=null}},{key:"loadTensorflow",value:function(){return zt.debug("Tensorflow script loading..."),new Promise(function(an,hn){var En={async:!0,numRetries:20,reqdelay:200,success:function(){zt.debug("Tensorflow script loaded"),an()},error:function(Mn){hn("Resources loading failed, depsNotFound: "+Mn)},retrycb:function(Mn,Pn){zt.warn("Tensorflow loading retry :"+Mn+" ,delay before retry :"+Pn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",En)})}},{key:"loadTensorflowModel",value:function(){return zt.debug("Tensorflow model script loading..."),new Promise(function(an,hn){var En={async:!0,numRetries:20,reqdelay:200,success:function(){zt.debug("Tensorflow model script loaded"),an()},error:function(Mn){hn("Resources loading failed, depsNotFound: "+Mn)},retrycb:function(Mn,Pn){zt.warn("Tensorflow model loading retry :"+Mn+" ,delay before retry :"+Pn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",En)})}}])&&Ot(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),mn}(dt);function un(Pt,Vt){var Zt=typeof Symbol<"u"&&Pt[Symbol.iterator]||Pt["@@iterator"];if(!Zt){if(Array.isArray(Pt)||(Zt=function(hn,En){if(hn){if(typeof hn=="string")return vn(hn,En);var Mn=Object.prototype.toString.call(hn).slice(8,-1);return Mn==="Object"&&hn.constructor&&(Mn=hn.constructor.name),Mn==="Map"||Mn==="Set"?Array.from(hn):Mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mn)?vn(hn,En):void 0}}(Pt))||Vt&&Pt&&typeof Pt.length=="number"){Zt&&(Pt=Zt);var rn=0,Jt=function(){};return{s:Jt,n:function(){return rn>=Pt.length?{done:!0}:{done:!1,value:Pt[rn++]}},e:function(hn){throw hn},f:Jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,mn=!0,an=!1;return{s:function(){Zt=Zt.call(Pt)},n:function(){var hn=Zt.next();return mn=hn.done,hn},e:function(hn){an=!0,ln=hn},f:function(){try{mn||Zt.return==null||Zt.return()}finally{if(an)throw ln}}}}function vn(Pt,Vt){(Vt==null||Vt>Pt.length)&&(Vt=Pt.length);for(var Zt=0,rn=new Array(Vt);Zt<Vt;Zt++)rn[Zt]=Pt[Zt];return rn}function yn(Pt){return(Pt[2]-Pt[0])*(Pt[3]-Pt[1])}function cn(Pt,Vt){var Zt=Pt[0],rn=Pt[1],Jt=Pt[2],ln=Pt[3],mn=Vt[0],an=Vt[1],hn=Vt[2],En=Vt[3],Mn=yn([Math.max(Zt,mn),Math.max(rn,an),Math.min(Jt,hn),Math.min(ln,En)]);return Mn/(yn(Pt)+yn(Vt)-Mn)}function gn(Pt){var Vt,Zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.2,rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Jt=Pt.yolo,ln={yolo:[]},mn=un(Jt);try{for(mn.s();!(Vt=mn.n()).done;){var an=Vt.value,hn=an.objectness;if(hn>Zt)if(rn!==null){var En,Mn=an.bounding_box,Pn=yn(Mn),Wn=0,Nn=null,Jn=0,rr=un(Jt);try{for(rr.s();!(En=rr.n()).done;){var hr=En.value,cr=hr.bounding_box,dr=cn(Mn,cr);dr!==1&&dr>Wn&&(Wn=dr,Nn=hr,Jn=yn(hr.bounding_box))}}catch(Cr){rr.e(Cr)}finally{rr.f()}(Nn===null||Wn<rn||Jn<Pn)&&ln.yolo.push(an)}else ln.yolo.push(an)}}catch(Cr){mn.e(Cr)}finally{mn.f()}return ln}function Cn(Pt,Vt){var Zt,rn=Pt.yolo,Jt={yolo:[]},ln=un(Vt.yolo);try{for(ln.s();!(Zt=ln.n()).done;){var mn,an=Zt.value,hn=an.class,En=an.bounding_box,Mn=an.objectness,Pn=Mn,Wn=un(rn);try{for(Wn.s();!(mn=Wn.n()).done;){var Nn=mn.value;if(Nn.class===hn){var Jn=cn(Nn.bounding_box,En);Jn>0&&(Pn=Mn+.75*(1-Mn)*Jn*Nn.objectness)}}}catch(hr){Wn.e(hr)}finally{Wn.f()}var rr={class:hn,objectness:Pn,bounding_box:En};Jt.yolo.push(rr)}}catch(hr){ln.e(hr)}finally{ln.f()}return Jt}function fn(Pt,Vt){return function(Zt){if(Array.isArray(Zt))return Zt}(Pt)||function(Zt,rn){var Jt=Zt==null?null:typeof Symbol<"u"&&Zt[Symbol.iterator]||Zt["@@iterator"];if(Jt!=null){var ln,mn,an=[],hn=!0,En=!1;try{for(Jt=Jt.call(Zt);!(hn=(ln=Jt.next()).done)&&(an.push(ln.value),!rn||an.length!==rn);hn=!0);}catch(Mn){En=!0,mn=Mn}finally{try{hn||Jt.return==null||Jt.return()}finally{if(En)throw mn}}return an}}(Pt,Vt)||function(Zt,rn){if(Zt){if(typeof Zt=="string")return Tn(Zt,rn);var Jt=Object.prototype.toString.call(Zt).slice(8,-1);return Jt==="Object"&&Zt.constructor&&(Jt=Zt.constructor.name),Jt==="Map"||Jt==="Set"?Array.from(Zt):Jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jt)?Tn(Zt,rn):void 0}}(Pt,Vt)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tn(Pt,Vt){(Vt==null||Vt>Pt.length)&&(Vt=Pt.length);for(var Zt=0,rn=new Array(Vt);Zt<Vt;Zt++)rn[Zt]=Pt[Zt];return rn}function On(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}s(3123),s(4723),s(2472),s(6699),s(2023),s(9720),s(9600),s(2707),s(1058);var Ln=et.Y.get("StreamAIE"),An=apiCC.myWebRTC_Event,Rn=function(){function Pt(rn,Jt){(function(mn,an){if(!(mn instanceof an))throw new TypeError("Cannot call a class as a function")})(this,Pt),this.mediaStream=rn,this.descriptorOptions=Jt,this.modelName=Jt.modelName,this.maxBoxes=Jt.maxBoxes||null,this.scoreThresh=Jt.scoreThresh||null,this.forceReload=Jt.forceReload||!1,this.classFilter=this.descriptorOptions.classFilter||"all",this.drawingConfig=this.descriptorOptions.drawingConfig||{},this.userMediaStreamId=Jt.userMediaStreamId,this.clientId=Jt.clientId;var ln=this.mediaStream.getVideoTracks();ln.length===0&&(this.mediaSettings=null),this.mediaSettings=ln[0].getSettings(),this.canvasWidth=this.mediaSettings.width||480,this.canvasHeight=this.mediaSettings.height||480,this.length=this.canvasWidth*this.canvasHeight,this.snapshot=!1,this.log=!1,this.minSnapshotPeriod=0,this.memoryTime=0,this.lastAnnotations={yolo:[]},this.lastRawAnnotations={yolo:[]},this.objectDetectionActivated=!1,this.drawAnnotationsBool=!1,this.aieUrl=null,this.token=null,this.loadedModel=null,this.promises=[],this.isReleased=!1,this.resinzingSize=416,this.callId=null}var Vt,Zt;return Vt=Pt,Zt=[{key:"activateLogs",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.memoryTime=rn,this.log=!0}},{key:"stopLogs",value:function(){this.log=!1,this.memoryTime=0}},{key:"activateSnapshots",value:function(){var rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.snapshot=!0,this.minSnapshotPeriod=rn}},{key:"stopSnapshots",value:function(){this.snapshot=!1,this.minSnapshotPeriod=0}},{key:"activateAnnotations",value:function(){this.lastAnnotations={yolo:[]},this.drawAnnotationsBool=!0,this.getAnnotations()}},{key:"stopAnnotations",value:function(){this.drawAnnotationsBool=!1}},{key:"getAnnotations",value:function(){var rn=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Jt=document.createElement("video");Jt.srcObject=this.mediaStream;var ln=document.createElement("canvas"),mn=ln.getContext("2d");ln.width=this.canvasWidth,ln.height=this.canvasHeight;var an=document.createElement("canvas"),hn=an.getContext("2d");an.width=this.canvasWidth,an.height=this.canvasHeight;var En=this;function Mn(br,Ir){for(var kr=br.split(","),Mr=kr[0].match(/:(.*?);/)[1],jr=atob(kr[1]),Wr=jr.length,Qr=new Uint8Array(Wr);Wr--;)Qr[Wr]=jr.charCodeAt(Wr);return new File([Qr],Ir,{type:Mr})}Jt.addEventListener("loadeddata",function(){Jt.play(),requestAnimationFrame(function(){_r(En.aieUrl,En.token,En.loadedModel)})});var Pn=!0,Wn={},Nn=null,Jn=new Date;function rr(br,Ir,kr){var Mr=Mn(ln.toDataURL("image/jpeg")),jr={pipelineCallId:En.getOrCreatePipeline(),file:Mr,transferType:"plugin",pluginName:"httpPost",pluginData:{url:br,headers:{Authorization:"Token "+Ir},formData:{file:"$DATA",angled:1,model:kr,size:En.resinzingSize}}};apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,jr,null,{success:function(Wr){var Qr=(new Date-Nn)/1e3,Zn=1/Qr;return Ln.debug("Computation time:",Qr,"s ,FPS:",Zn),_r(br,Ir,kr),Wr.data.error!==void 0?Ln.error("http post error :",Wr.data.error):Wr.data.result===void 0?Ln.error("An error occured when trying to annotate a snapshot"):void hr(Wr.data)},failure:function(Wr,Qr,Zn){Ln.error("## pushData:failure",Qr,Zn,Wr)}})}function hr(br){var Ir=br.result;En.isReleased||(En.lastRawAnnotations=Ir,Ir.yolo!==void 0&&dr(Ir),Ir.ocr===void 0&&Ir.codes===void 0||cr(Ir))}function cr(br){En.lastAnnotations={ocr:br.ocr,codes:br.codes};var Ir="";if(br.ocr.length>1){Ir+="Words found : ";for(var kr=0;kr<br.ocr.length;kr++)Ir=Ir+br.ocr[kr].text+", "}if(br.codes.length>1){Ir+="Codes found : ";for(var Mr=0;Mr<br.codes.length;Mr++)Ir=Ir+br.codes[Mr].code+", "}Cr(Ir),Sr()}function dr(br){br.yolo.length>0&&(rn&&(br=Cn(En.lastRawAnnotations,br)),En.scoreThresh!==null&&(br=gn(br,En.scoreThresh)));for(var Ir={yolo:[]},kr={},Mr=En.classFilter.split(", "),jr=0;jr<br.yolo.length;jr++){var Wr=br.yolo[jr];(En.classFilter==="all"||Mr.includes(Wr.class))&&(Wr.class in kr||(kr[Wr.class]=0),kr[Wr.class]+=1,Ir.yolo.push(Wr))}if(br=Ir,En.lastAnnotations=br,En.log||En.snapshot){for(var Qr=new Date,Zn=[],lr=0,er=Object.entries(kr);lr<er.length;lr++){var Tr=fn(er[lr],2),tr=Tr[0],Br=Tr[1];Zn.push(Br+" "+tr+"(s) detected."),(!(tr in Wn)||Qr-Wn[tr]>1e3*En.memoryTime)&&(Wn[tr]=Qr)}var Nr=Zn.sort().join(" ");Nr!==""&&(Cr(Nr),Sr())}}function Cr(br){En.log&&An.createAIELogEvent(En.userMediaStreamId,br)}function Sr(){if(En.snapshot){var br=new Date,Ir=mn.getImageData(0,0,ln.width,ln.height);if(br-Jn>1e3*En.minSnapshotPeriod){hn.putImageData(Ir,0,0),En.drawAnnotations(En.lastAnnotations,hn,En.drawingConfig);var kr=an.toDataURL("image/png"),Mr=new Image;Mr.src=kr,An.createAIESnapshotEvent(En.userMediaStreamId,Mr),Jn=br}}}function _r(br,Ir,kr){mn.drawImage(Jt,0,0,ln.width,ln.height),(Pn||En.drawAnnotationsBool)&&(Pn&&(Pn=!1),Nn=new Date,rr(br,Ir,kr))}}},{key:"getOrCreatePipeline",value:function(){if(this.callId!==null)return this.callId;var rn=this;return this.callId=apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,{transferType:"pipeline"},null,{failure:function(Jt){Jt==="dataChannelClosed"?(Ln.debug("dataChannelClosed : no activity on dataChannel timeout"),rn.callId=null):Ln.error("dataChannel failure",Jt)}}),this.callId}},{key:"drawAnnotations",value:function(rn,Jt){var ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},mn=ln.color||"#ED5131",an=ln.textColor||"#FFFFFF",hn=ln.colorMap||null,En=Object.prototype.hasOwnProperty.call(ln,En)?ln.lineWidth:3,Mn=ln.font||"15px Arial";if(rn.yolo!==void 0&&rn.yolo.length>0)for(var Pn=0;Pn<rn.yolo.length;Pn++){var Wn=rn.yolo[Pn],Nn=Wn.bounding_box,Jn=Nn[0],rr=Nn[1],hr=Nn[2],cr=Nn[3];this.modelName==="mask_augmented_refined"&&(hr-=Jn,cr-=rr);var dr=mn;hn!==null&&Wn.class in hn&&(dr=hn[Wn.class]),Jt.lineWidth=En,Jt.strokeStyle=dr,Jt.strokeRect(Jn,rr,hr,cr),Jt.font=Mn;var Cr=parseInt(Mn,10),Sr=Wn.class,_r=Jt.measureText(Sr).width;Jt.fillStyle=dr,Jt.fillRect(Jn-En/2,rr-Math.round(4*Cr/3),_r+Cr+En,Math.round(4*Cr/3)),Jt.fillStyle=an,Jt.fillText(Sr,Jn+Math.round(Cr/2)-En/2,rr-Math.round(Cr/2))}if(rn.ocr!==void 0&&rn.ocr.length>0){Mn=ln.font||"25px Arial";for(var br=0;br<rn.ocr.length;br++){var Ir=rn.ocr[br],kr=Ir.bounding_box,Mr=kr[0],jr=kr[1],Wr=kr[2],Qr=kr[3];this.modelName==="mask_augmented_refined"&&(Wr-=Mr,Qr-=jr),Jt.lineWidth=En,Jt.strokeStyle=mn,Jt.strokeRect(Mr,jr,Wr,Qr),Jt.font=Mn;var Zn=parseInt(Mn,10),lr=Ir.text,er=Jt.measureText(lr).width;Jt.fillStyle=mn,Jt.fillRect(Mr-En/2,jr-Math.round(4*Zn/3),er+Zn+En,Math.round(4*Zn/3)),Jt.fillStyle=an,Jt.fillText(lr,Mr+Math.round(Zn/2)-En/2,jr-Math.round(Zn/2))}}if(rn.codes!==void 0&&rn.codes.length>0){Mn=ln.font||"25px Arial";for(var Tr=0;Tr<rn.codes.length;Tr++){var tr=rn.codes[Tr],Br=tr.bounding_box,Nr=Br[0],Ar=Br[1],Xn=Br[2],mr=Br[3];this.modelName==="mask_augmented_refined"&&(Xn-=Nr,mr-=Ar),Jt.lineWidth=En,Jt.strokeStyle=mn,Jt.strokeRect(Nr,Ar,Xn,mr),Jt.font=Mn;var Lr=parseInt(Mn,10),wr=tr.code,qr=Jt.measureText(wr).width;Jt.fillStyle=mn,Jt.fillRect(Nr-En/2,Ar-Math.round(4*Lr/3),qr+Lr+En,Math.round(4*Lr/3)),Jt.fillStyle=an,Jt.fillText(wr,Nr+Math.round(Lr/2)-En/2,Ar-Math.round(Lr/2))}}}},{key:"activateObjectDetection",value:function(){if(this.objectDetectionActivated)return this.processedMediaStream;var rn=document.createElement("video");rn.srcObject=this.mediaStream;var Jt=document.createElement("canvas"),ln=Jt.getContext("2d");Jt.width=this.canvasWidth,Jt.height=this.canvasHeight;var mn=document.createElement("canvas"),an=mn.getContext("2d");mn.width=this.canvasWidth,mn.height=this.canvasHeight;var hn=this;function En(){ln.drawImage(rn,0,0,Jt.width,Jt.height);var Mn=ln.getImageData(0,0,Jt.width,Jt.height);an.putImageData(Mn,0,0),hn.drawAnnotationsBool&&hn.drawAnnotations(hn.lastAnnotations,an,hn.drawingConfig),requestAnimationFrame(En)}return rn.addEventListener("loadeddata",function(){rn.play(),requestAnimationFrame(En)}),this.processedMediaStream=mn.captureStream(),this.objectDetectionActivated=!0,this.processedMediaStream}},{key:"loadModel",value:function(){var rn=this;return new Promise(function(Jt,ln){Ln.debug("loading model");var mn={modelName:rn.modelName,maxBoxes:rn.maxBoxes,scoreThresh:rn.scoreThresh,forceReload:rn.forceReload};rn.sendMessage(mn,"AIELoadModel",Jt,ln)})}},{key:"sendMessage",value:function(rn,Jt,ln,mn){var an=setTimeout(mn,5e3);this.promises.push({timeout:an,resolve:ln}),rn.timeout=an,this.sendMessageToCCS(rn,Jt)}},{key:"sendMessageToCCS",value:function(rn,Jt){if(rn.userMediaStreamId=this.userMediaStreamId,rn.clientId=this.clientId,rn.data={pubSub:"AieConnector"},rn.type=Jt,apiCC!==void 0){var ln=apiCC.session.apiCCWebRTCClient.webRTCClient.socket;try{var mn=JSON.stringify(rn);ln.emit(Jt,mn)}catch(an){Ln.error("JSON Stringify error : ",an)}}}},{key:"modelLoaded",value:function(rn){Ln.debug("Loaded model name :",rn.modelName),this.aieUrl=rn.url,this.loadedModel=rn.modelName,this.token=rn.token;var Jt=this.activateObjectDetection();this.promises.forEach(function(ln){rn.timeout===ln.timeout&&(clearTimeout(ln.timeout),ln.resolve(Jt))})}},{key:"release",value:function(){this.isReleased=!0,this.stopLogs(),this.stopSnapshots(),this.stopAnnotations(),this.sendMessageToCCS({},"AIELogout")}}],Zt&&On(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function In(Pt){return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},In(Pt)}function kn(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}function xn(Pt,Vt){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,rn){return Zt.__proto__=rn,Zt},xn(Pt,Vt)}function Yn(Pt,Vt){if(Vt&&(In(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Pt)}function Un(Pt){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},Un(Pt)}var jn=et.Y.get("MediaFilterAIE"),Qn=function(Pt){(function(an,hn){if(typeof hn!="function"&&hn!==null)throw new TypeError("Super expression must either be null or a function");an.prototype=Object.create(hn&&hn.prototype,{constructor:{value:an,writable:!0,configurable:!0}}),Object.defineProperty(an,"prototype",{writable:!1}),hn&&xn(an,hn)})(mn,Pt);var Vt,Zt,rn,Jt,ln=(rn=mn,Jt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var an,hn=Un(rn);if(Jt){var En=Un(this).constructor;an=Reflect.construct(hn,arguments,En)}else an=hn.apply(this,arguments);return Yn(this,an)});function mn(){var an;return function(hn,En){if(!(hn instanceof En))throw new TypeError("Cannot call a class as a function")}(this,mn),(an=ln.call(this)).userMediaStreamId=null,an.streamAIE=null,an}return Vt=mn,(Zt=[{key:"applyFilter",value:function(an,hn){var En=this;return new Promise(function(Mn,Pn){if(jn.debug("Apply filter with descriptor :",hn),hn.options===void 0&&Pn("Filter options object required"),hn.options.modelName===void 0)Pn("modelName options required");else{var Wn=an.getAudioTracks();Wn.length>0&&Wn.forEach(function(Nn){an.removeTrack(Nn)}),En.streamAIE=new Rn(an,hn.options),En.streamAIE.loadModel().then(function(Nn){Wn.forEach(function(Jn){Nn.addTrack(Jn)}),Mn(Nn)}).catch(function(Nn){Pn(Nn)})}})}},{key:"release",value:function(){this.streamAIE.release()}}])&&kn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),mn}(dt);function on(Pt){return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},on(Pt)}function Hn(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}function Fn(Pt,Vt){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Zt,rn){return Zt.__proto__=rn,Zt},Fn(Pt,Vt)}function Vn(Pt,Vt){if(Vt&&(on(Vt)==="object"||typeof Vt=="function"))return Vt;if(Vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Zt){if(Zt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt}(Pt)}function Bn(Pt){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Vt){return Vt.__proto__||Object.getPrototypeOf(Vt)},Bn(Pt)}var qn=et.Y.get("MediaFilterBackgroundSubstraction"),Gn=function(Pt){(function(an,hn){if(typeof hn!="function"&&hn!==null)throw new TypeError("Super expression must either be null or a function");an.prototype=Object.create(hn&&hn.prototype,{constructor:{value:an,writable:!0,configurable:!0}}),Object.defineProperty(an,"prototype",{writable:!1}),hn&&Fn(an,hn)})(mn,Pt);var Vt,Zt,rn,Jt,ln=(rn=mn,Jt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var an,hn=Bn(rn);if(Jt){var En=Bn(this).constructor;an=Reflect.construct(hn,arguments,En)}else an=hn.apply(this,arguments);return Vn(this,an)});function mn(){var an;return function(hn,En){if(!(hn instanceof En))throw new TypeError("Cannot call a class as a function")}(this,mn),(an=ln.call(this)).mediaStream=null,an.mediaStreamSettings=null,an.processedMediaStream=null,an.net=null,an.lossRatio=null,an.processBackground=!1,an.bgImageData=null,an.videoElement=document.createElement("video"),an.canvas=document.createElement("canvas"),an.canvasContext=an.canvas.getContext("2d"),an}return Vt=mn,(Zt=[{key:"applyFilter",value:function(an,hn){var En=this;return new Promise(function(Mn,Pn){var Wn=an.getAudioTracks();Wn.length>0&&Wn.forEach(function(Nn){an.removeTrack(Nn)}),En.loadTensorflow().then(function(){En.loadTensorflowModel().then(function(){En.videoElement.srcObject=an;var Nn=En;En.videoElement.addEventListener("loadeddata",function(){Nn.videoElement.play(),Nn.mediaStream=an,Nn.descriptors=hn,Nn.processedMediaStream=Nn.canvas.captureStream(),Nn.mediaStreamSettings=Nn.mediaStream.getVideoTracks()[0].getSettings(),Nn.videoElement.height=240,Nn.lossRatio=Nn.mediaStreamSettings.height/Nn.videoElement.height,Nn.videoElement.width=Nn.videoElement.height*Nn.mediaStreamSettings.aspectRatio,Nn.videoElement.onplaying=function(){Nn.canvas.height=Nn.videoElement.videoHeight,Nn.canvas.width=Nn.videoElement.videoWidth},Nn.loadBodyPix().then(function(){Wn.forEach(function(Jn){Nn.processedMediaStream.addTrack(Jn)}),Mn(Nn.processedMediaStream)}).catch(function(Jn){qn.error(Jn)})})}).catch(function(Nn){qn.error(Nn)})}).catch(function(Nn){qn.error(Nn)})})}},{key:"loadTensorflow",value:function(){return qn.debug("Tensorflow script loading..."),new Promise(function(an,hn){var En={async:!0,numRetries:20,reqdelay:200,success:function(){qn.debug("Tensorflow script loaded"),an()},error:function(Mn){hn("Resources loading failed, depsNotFound: "+Mn)},retrycb:function(Mn,Pn){qn.warn("Tensorflow loading retry :"+Mn+" ,delay before retry :"+Pn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2"],"tensorflow",En)})}},{key:"loadTensorflowModel",value:function(){return qn.debug("Tensorflow model script loading..."),new Promise(function(an,hn){var En={async:!0,numRetries:20,reqdelay:200,success:function(){qn.debug("Tensorflow model script loaded"),an()},error:function(Mn){hn("Resources loading failed, depsNotFound: "+Mn)},retrycb:function(Mn,Pn){qn.warn("Tensorflow model loading retry :"+Mn+" ,delay before retry :"+Pn)}};apiCC.resourcesLoader.loadjs(["https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0"],"tensorflow-model",En)})}},{key:"loadBodyPix",value:function(){var an=this;return new Promise(function(hn,En){bodyPix.load({multiplier:.75,stride:32,quantBytes:4}).then(function(Mn){an.net=Mn,an.perform(),hn()}).catch(function(Mn){return En(Mn)})})}},{key:"perform",value:function(){if(this.descriptors.options!==void 0&&this.descriptors.options.backgroundMode!==void 0)switch(this.processBackground=!0,this.descriptors.options.backgroundMode){case"blur":qn.warn("This method is deprecated, please use Stream#blur method now."),this.videoElement.height=this.mediaStreamSettings.height,this.videoElement.width=this.mediaStreamSettings.width,this.canvas.height=this.videoElement.height,this.canvas.width=this.videoElement.width,this.blurBackground();break;case"transparent":this.noBackground();break;case"image":this.descriptors.options.image!==void 0?(this.resizeImageData(this.descriptors.options.image),this.imageBackground()):qn.error("image option is required when creating the filter");break;default:qn.debug("The backgroundMode : ",this.descriptors.options.backgroundMode," is not implemented. Refer to documentation for accepted values."),this.blurBackground()}else qn.error("backgroundMode option is required")}},{key:"blurBackground",value:function(){var an=this;this.net.segmentPerson(this.videoElement).then(function(hn){an.blurBackground(),bodyPix.drawBokehEffect(an.canvas,an.videoElement,hn,9,2,!1)})}},{key:"noBackground",value:function(){var an=this;this.net.segmentPerson(this.videoElement).then(function(hn){an.canvasContext.drawImage(an.videoElement,0,0,an.videoElement.width,an.videoElement.height);for(var En=an.canvasContext.getImageData(0,0,an.videoElement.width,an.videoElement.height),Mn=En.data,Pn=0;Pn<Mn.length;Pn+=4)hn.data[Pn/4]===0&&(Mn[Pn+3]=0);var Wn=an.scaleImageData(En,an.lossRatio);an.canvasContext.imageSmoothingEnabled=!0,an.canvasContext.putImageData(Wn,0,0),an.processBackground&&an.noBackground()})}},{key:"imageBackground",value:function(){var an=this;this.net.segmentPerson(this.videoElement).then(function(hn){an.canvasContext.putImageData(an.bgImageData,0,0,0,0,an.videoElement.width,an.videoElement.height);var En=an.canvasContext.getImageData(0,0,an.videoElement.width,an.videoElement.height);an.canvasContext.drawImage(an.videoElement,0,0,an.videoElement.width,an.videoElement.height);for(var Mn=an.canvasContext.getImageData(0,0,an.videoElement.width,an.videoElement.height),Pn=Mn.data,Wn=0;Wn<Pn.length;Wn+=4)hn.data[Wn/4]===0&&(Pn[Wn]=En.data[Wn],Pn[Wn+1]=En.data[Wn+1],Pn[Wn+2]=En.data[Wn+2],Pn[Wn+3]=En.data[Wn+3]);var Nn=an.scaleImageData(Mn,an.lossRatio);an.canvasContext.imageSmoothingEnabled=!0,an.canvasContext.putImageData(Nn,0,0),an.processBackground&&an.imageBackground()})}},{key:"resizeImageData",value:function(an){var hn=this.videoElement.width/an.width,En=this.videoElement.height/an.height;this.bgImageData=hn>=En?this.scaleImageData(an,hn):this.scaleImageData(an,En)}},{key:"noBackgroundWithFullResolution",value:function(){var an=this;this.net.segmentPerson(this.videoElement).then(function(hn){an.canvasContext.drawImage(an.videoElement,0,0,an.canvas.width,an.canvas.height);for(var En=an.canvasContext.getImageData(0,0,an.canvas.width,an.canvas.height),Mn=new Uint8ClampedArray(4*hn.width*hn.height),Pn=0;Pn<Mn.length;Pn+=4)hn.data[Pn/4]!==0&&(Mn[Pn+3]=255);var Wn=new ImageData(Mn,hn.width,hn.height);Wn=an.scaleImageData(Wn,an.lossRatio);for(var Nn=0;Nn<En.data.length;Nn+=4)Wn.data[Nn+3]===0&&(En.data[Nn+3]=0);an.canvasContext.imageSmoothingEnabled=!0,an.canvasContext.putImageData(En,0,0),an.processBackground&&an.noBackgroundWithFullResolution()})}},{key:"scaleImageData",value:function(an,hn){var En=document.createElement("canvas");En.width=an.width,En.height=an.height,En.getContext("2d").putImageData(an,0,0);var Mn=document.createElement("canvas");Mn.width=this.canvas.width,Mn.height=this.canvas.height;var Pn=Mn.getContext("2d");return Pn.scale(hn,hn),Pn.drawImage(En,0,0),Pn.getImageData(0,0,Mn.width,Mn.height)}},{key:"release",value:function(){this.processedMediaStream=this.mediaStream,this.processBackground=!1}}])&&Hn(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),mn}(dt);function _n(Pt,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var rn=Vt[Zt];rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(Pt,rn.key,rn)}}var $n=et.Y.get("MediaFilterManager"),bn=apiCC.myWebRTC_Event,wn={oldBackgroundSubtraction:Ft,AIEFilter:Qn,backgroundSubtraction:Gn},Yt=function(){function Pt(rn,Jt,ln){(function(mn,an){if(!(mn instanceof an))throw new TypeError("Cannot call a class as a function")})(this,Pt),this.mediaStream=rn,this.descriptors=Jt,this.userMediaStreamId=ln,this.filters={}}var Vt,Zt;return Vt=Pt,(Zt=[{key:"getOrCreateFilter",value:function(rn){if(this.filters[rn.type]!==void 0)return this.filters[rn.type];var Jt=wn[rn.type];if(Jt===void 0)return $n.error("Unknown filter type: "+rn.type),null;var ln=new Jt;return this.filters[ln]=ln,ln}},{key:"applyFilters",value:function(){var rn=this;if($n.info("Apply filters",this.descriptors),!Array.isArray(this.descriptors)||this.descriptors.length===0)return $n.error("No filter can be applied, filter descriptors have wrong format, it should be an array and contain at least one element",this.descriptors),Promise.reject(this.mediaStream);var Jt=Promise.resolve(this.mediaStream);return this.descriptors.forEach(function(ln){var mn=rn.getOrCreateFilter(ln);mn!==null?(ln.options!==void 0&&(ln.options.userMediaStreamId=rn.userMediaStreamId,ln.options.clientId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId),Jt=Jt.then(function(an){return mn.applyFilter(an,ln)})):$n.error("Filter "+ln.type+" will be skipped. No implemented filter has this type")}),$n.info("Filters attached"),document.addEventListener("visibilitychange",function(){rn.createBackgroundSubstractionStopVisibilityChangeEvent(rn.userMediaStreamId)}),Jt.catch(function(ln){return $n.error(ln)}),Jt}},{key:"createBackgroundSubstractionStopVisibilityChangeEvent",value:function(rn){document.hidden&&bn.createBackgroundSubstractionStopVisibilityChangeEvent(rn)}},{key:"release",value:function(){Object.values(this.filters).forEach(function(rn){rn.release()}),document.removeEventListener("visibilitychange",this.createBackgroundSubstractionStopVisibilityChangeEvent),this.filters=null,this.mediaStream=null}}])&&_n(Vt.prototype,Zt),Object.defineProperty(Vt,"prototype",{writable:!1}),Pt}();function kt(Pt){return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Vt){return typeof Vt}:function(Vt){return Vt&&typeof Symbol=="function"&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt},kt(Pt)}function st(Pt,Vt){var Zt=typeof Symbol<"u"&&Pt[Symbol.iterator]||Pt["@@iterator"];if(!Zt){if(Array.isArray(Pt)||(Zt=function(hn,En){if(hn){if(typeof hn=="string")return Tt(hn,En);var Mn=Object.prototype.toString.call(hn).slice(8,-1);return Mn==="Object"&&hn.constructor&&(Mn=hn.constructor.name),Mn==="Map"||Mn==="Set"?Array.from(hn):Mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mn)?Tt(hn,En):void 0}}(Pt))||Vt&&Pt&&typeof Pt.length=="number"){Zt&&(Pt=Zt);var rn=0,Jt=function(){};return{s:Jt,n:function(){return rn>=Pt.length?{done:!0}:{done:!1,value:Pt[rn++]}},e:function(hn){throw hn},f:Jt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln,mn=!0,an=!1;return{s:function(){Zt=Zt.call(Pt)},n:function(){var hn=Zt.next();return mn=hn.done,hn},e:function(hn){an=!0,ln=hn},f:function(){try{mn||Zt.return==null||Zt.return()}finally{if(an)throw ln}}}}function Tt(Pt,Vt){(Vt==null||Vt>Pt.length)&&(Vt=Pt.length);for(var Zt=0,rn=new Array(Vt);Zt<Vt;Zt++)rn[Zt]=Pt[Zt];return rn}var Rt=et.Y.get("ApiCCUserMediaStream"),Lt=apiCC.myWebRTC_Event,Et="getUserMediaAccessAllowed",jt=function(){Number.MAX_SAFE_INTEGER!==void 0?this.userMediaStreamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaStreamId=Math.floor(1000001*Math.random()).toString(),nt.Xh==="Edge"&&nt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:nt.Xh==="Chrome"&&nt.PR<49||nt.Xh==="Firefox"&&nt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}},this.inputs={},this.callbacks={},this.callType=null,this.audio=!1,this.audioDeviceLabel=null,this.audioMuted=!1,this.audioSilent=!1,this.video=!1,this.videoDeviceLabel=null,this.videoMuted=!1,this.videoSilent=!1,this.stream=null,this.streamStolen=!1,this.notifyUserMediaSuccess=!0,this.notifyUserMediaStop=!0,apiCC.session!==null&&apiCC.session!==void 0?this.tryAudioCallAfterUserMediaError=apiCC.session.tryAudioCallAfterUserMediaError:this.tryAudioCallAfterUserMediaError=!1,this.callInfoList=[],this.iOSMediaSelectionWorkAroundApplied=!1,this.getUserMediaTimeoutId=null,at.wL.type==="chrome"&&at.wL.version>=72&&at.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},this.forceExtensionOnChrome=!1,this.filters=null,this.mediaFilterManager=null,this.videoSettings=!1,this.getVideoTrack=function(){if(!this.stream||typeof this.stream.getVideoTracks!="function")return null;var Pt=this.stream.getVideoTracks();return Pt&&Pt.length===1?Pt[0]:null},this.release=function(){var Pt=0,Vt=null,Zt=null,rn=null;if(Rt.debug("[ApiCCUserMediaStream] release; userMediaStreamId: "+this.userMediaStreamId),this.mediaFilterManager!==null&&(this.mediaFilterManager.release(),this.mediaFilterManager=null),apiCC.audioProcessor.stopAudioNodeCtx(this.nodeCtx),apiRTC.userAgentInstance!==void 0&&apiRTC.userAgentInstance!==null&&apiRTC.userAgentInstance.apiRTCStreamsList!==void 0&&apiRTC.userAgentInstance.apiRTCStreamsList!==null&&apiRTC.userAgentInstance.apiRTCStreamsList.delete(Number(this.userMediaStreamId)),this.stream!==null){if(this.streamStolen!==!0)if(typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)cordova!==void 0&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0&&(Rt.debug("[ApiCCUserMediaStream] release on iosrtc cordova"),this.stream.onended=null);else if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)this.stream.onended=null,this.stream.stop();else for(this.stream.onended=null,Pt=(Vt=this.stream.getTracks()).length;--Pt>=0;)Vt[Pt].onended=null,Vt[Pt].stop();this.stream=null,this.streamStolen=!1,this.notifyUserMediaStop===!0&&((rn=this.getOwnerCallInfo())!==null&&(Zt=rn.callId),Lt.createUserMediaStopEvent(Zt,this.callType,this.userMediaStreamId)),this.callbacks.release(this)}},this.getUserMedia=function(){var Pt=this;if(Rt.debug("[ApiCCUserMediaStream] getUserMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)try{if(this.callType==="media")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config);else if(this.callType==="audio")this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config.video=!1;else{if(this.callType!=="videoOnly")return function(Vt){for(var Zt=apiCC.userMediaStreamTable.length;--Zt>=0;)if(apiCC.userMediaStreamTable[Zt].userMediaStreamId===Vt){apiCC.userMediaStreamTable.splice(Zt,1);break}}(this.userMediaStreamId),void setTimeout(this.callbacks.failure.bind(this,this,"wrong type"));this.gum_config.audio=!1,this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config)}apiCC.checkConstraintDependingOnDevice(this.gum_config),nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):(nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||this.isUserMediaAccessAllowed()===!0&&(this.getUserMediaTimeoutId=setTimeout(function(){Pt.onUserMediaError("timeout")},1e4)),apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError")))}catch(Vt){Rt.error("getUserMedia() failed. Is this a WebRTC capable browser?"),Rt.log("getUserMedia failed with exception: "+Vt.message)}},this.listenForMuteEvents=function(){var Pt,Vt=this,Zt=function(mn){var an=null,hn=null;mn.onmute=function(En){Rt.debug("mute event :",mn),mn.kind==="audio"&&an===null?an=setTimeout(function(){Vt.audioSilent=!0,an=null,Vt.notifyMLineMuted(mn.kind,!0,"muted")},2520):mn.kind==="video"&&hn===null&&(hn=setTimeout(function(){Vt.videoSilent=!0,hn=null,Vt.notifyMLineMuted(mn.kind,!0,"muted")},2520))},mn.onunmute=function(En){Rt.debug(mn.kind+" unmute event"),mn.kind==="audio"&&an!==null?(clearTimeout(an),an=null):mn.kind==="video"&&hn!==null?(clearTimeout(hn),hn=null):(mn.kind==="audio"?Vt.audioSilent=!1:mn.kind==="video"&&(Vt.videoSilent=!1),Vt.notifyMLineMuted(mn.kind,!1,"muted"))},mn.onended=function(En){Rt.debug(mn.kind+" ended event"),mn.kind==="audio"&&an!==null?(clearTimeout(an),an=null):mn.kind==="video"&&(hn!==null&&(clearTimeout(hn),hn=null),Vt.callType!=="screenSharing"&&Vt.callType!=="screenSharingWithAudio"||Vt.stopScreenSharing())}},rn=st(this.stream.getVideoTracks());try{for(rn.s();!(Pt=rn.n()).done;)Zt(Pt.value)}catch(mn){rn.e(mn)}finally{rn.f()}var Jt,ln=st(this.stream.getAudioTracks());try{for(ln.s();!(Jt=ln.n()).done;)Zt(Jt.value)}catch(mn){ln.e(mn)}finally{ln.f()}this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"||(this.stream.onended=this.callback(this,"stopScreenSharing"))},this.onUserMediaSuccess=function(Pt){var Vt=this;this.applyFiltersIfNeeded(Pt).then(function(Zt){var rn=null,Jt=null,ln=!1,mn=Vt.getOwnerCallInfo(),an=Vt.getCall(mn);Rt.info("[ApiCCUserMediaStream] onUserMediaSuccess; userMediaStreamId: "+Vt.userMediaStreamId),Vt.getUserMediaTimeoutId!==null&&(clearTimeout(Vt.getUserMediaTimeoutId),Vt.getUserMediaTimeoutId=null),an&&(Rt.debug("call exist"),Jt=an.callee?an.callerId:an.calleeId,ln=an.restarted),Vt.updateMediaProperties(Zt),Vt.stream=Zt,nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Safari"||Vt.setUserMediaAccessAllowed(!0),Vt.notifyUserMediaSuccess===!0&&(mn&&(rn=mn.callId),Lt.createUserMediaSuccessEvent(rn!==null,Vt.audio,Vt.audioDeviceLabel,Vt.video,Vt.videoDeviceLabel,Vt.callType,rn,Zt,Jt,ln,Vt.userMediaStreamId)),Vt.listenForMuteEvents(),Rt.debug("Starting a new getMediaDevices after userMediaSuccess"),apiCC.mediaDeviceMgr.getMediaDevices("updatedAfterGetUserMediaSuccess"),Vt.callbacks.success(Vt)})},this.updateMediaProperties=function(Pt){var Vt=!1,Zt="Unknown",rn="Unknown",Jt=!1,ln="Unknown";Pt.getAudioTracks().length>0&&(Vt=!0,Pt.getAudioTracks()[0].label&&(Zt=Pt.getAudioTracks()[0].label,rn=Pt.getAudioTracks()[0].id,apiCC.audioProcessor.listenToAudio(Pt,this)),Pt.getAudioTracks()[0].enabled===!1&&(this.audioMuted=!0),Pt.getAudioTracks()[0].muted===!0&&(this.audioSilent=!0)),Pt.getVideoTracks().length>0&&(Jt=!0,Pt.getVideoTracks()[0].label&&(ln=Pt.getVideoTracks()[0].label),Pt.getVideoTracks()[0].enabled===!1&&(this.videoMuted=!0),Pt.getVideoTracks()[0].muted===!0&&(this.videoSilent=!0)),this.audio=Vt,this.audioDeviceLabel=Zt,this.audioDeviceId=rn,this.video=Jt,this.videoDeviceLabel=ln},this.manageFailure=function(Pt){var Vt={};kt(Pt)==="object"?(Vt.message=Pt.message,Vt.code=Pt.code,Vt.name=Pt.name):Vt=Pt,this.callbacks.failure(this,Vt)},this.onUserMediaError=function(Pt){var Vt=function(ln){for(var mn=apiCC.userMediaStreamTable.length;--mn>=0;)if(apiCC.userMediaStreamTable[mn].userMediaStreamId===ln){apiCC.userMediaStreamTable.splice(mn,1);break}},Zt=null,rn=this.getOwnerCallInfo();if(Rt.info("[ApiCCUserMediaStream] onUserMediaError; userMediaStreamId: "+this.userMediaStreamId+", error: "+Pt),this.getUserMediaTimeoutId!==null&&(Pt!=="timeout"&&clearTimeout(this.getUserMediaTimeoutId),this.getUserMediaTimeoutId=null),nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&window.location.protocol!=="https:"&&Rt.error("HTTPS is now mandatory to use getUserMedia()"),rn!==null&&(Zt=rn.callId),this.callType==="media"&&nt.ag.name==="iOS"&&nt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1||Lt.createUserMediaErrorEvent(Zt!==null,this.callType,Pt,this.userMediaStreamId,Zt,this.tryAudioCallAfterUserMediaError,this.gum_config),Pt!=="timeout"&&this.callType==="media")if(nt.ag.name==="iOS"&&nt.Xh==="Mobile Safari"&&this.iOSMediaSelectionWorkAroundApplied===!1){Rt.warn("try mediaDevice selection workaround on iOS / Mobile Safari - after MediaError"),this.iOSMediaSelectionWorkAroundApplied=!0,this.gum_config.video={};var Jt=apiCC.getMediaDeviceLabelFromDeviceid(this.inputs.videoSourceId);Rt.log("getMediaDeviceLabelFromDeviceid :",Jt),Jt==="Caméra arrière"||Jt==="Back Camera"?(Rt.log("Setting FacingMode to environment :",Jt),this.gum_config=apiCC.setVideoFacingModeInConstraint("environment",this.gum_config)):(Rt.log("Setting FacingMode to user :",Jt),this.gum_config=apiCC.setVideoFacingModeInConstraint("user",this.gum_config)),this.inputs.videoSourceId=null,this.getUserMedia()}else this.tryAudioCallAfterUserMediaError===!0?(Rt.warn("try AudioCall after UserMediaError is activated"),this.tryAudioCallAfterUserMediaError=!1,this.gum_config.video!==!1?(Rt.debug("[ApiCCUserMediaStream] Trying to getUserMedia with audioOnly"),this.inputs.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):(Vt(this.userMediaStreamId),this.manageFailure(Pt))):(Vt(this.userMediaStreamId),this.manageFailure(Pt));else Vt(this.userMediaStreamId),this.manageFailure(Pt)},this.getDisplayMediaProcess=function(){var Pt=this;Rt.debug("using getDisplayMedia with browser :",nt.Xh),Rt.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints),kt(this.displayMediaStreamConstraints)==="object"&&Array.isArray(this.displayMediaStreamConstraints)!==!0||(Rt.warn("Defined displayMediaStreamConstraints format is not correct, reinitialization ..."),at.wL.type==="chrome"&&at.wL.version>=72&&at.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},Rt.debug("displayMediaStreamConstraints :",this.displayMediaStreamConstraints)),typeof apiRTC_React<"u"?(Rt.debug("getDisplayMedia - React version"),mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){Rt.info("getDisplayMedia React stream available"),Pt.onUserMediaSuccess(Vt)}).catch(function(Vt){Rt.debug("getDisplayMedia - React version error : ",Vt),Pt.onUserMediaError(Vt)})):navigator.getDisplayMedia?(Rt.debug("navigator.getDisplayMedia defined"),navigator.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){Rt.debug("getDisplayMedia stream available"),Pt.onUserMediaSuccess(Vt)}).catch(function(Vt){Rt.debug("getDisplayMedia error :",Vt),Pt.onUserMediaError(Vt)})):navigator.mediaDevices.getDisplayMedia?(Rt.debug("navigator.mediaDevices.getDisplayMedia defined"),navigator.mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then(function(Vt){Rt.debug("getDisplayMedia stream available"),Pt.onUserMediaSuccess(Vt)}).catch(function(Vt){Rt.debug("getDisplayMedia error :",Vt),Pt.onUserMediaError(Vt)})):(Rt.debug("getDisplayMedia not available"),Lt.createDesktopCaptureEvent("Browser_Not_Compatible"))},this.getScreenMedia=function(){if(Rt.debug("[ApiCCUserMediaStream] getScreenMedia; userMediaStreamId: "+this.userMediaStreamId),this.stream===null)if(nt.Xh==="Chrome"||nt.Xh==="Firefox"&&nt.PR>=52)if(nt.Xh==="Chrome")if(Rt.log("shareScreen on Chrome"),nt.PR>=72&&this.forceExtensionOnChrome===!1)this.getDisplayMediaProcess();else{if(Rt.debug("this.captureSourceType :",this.captureSourceType),apiCC.apiRTCExtensionInstalled===!1)return apiCC.waitingShareScreenUserMediaStreamId=this.userMediaStreamId,function(Pt){Rt.debug("[ApiCCUserMediaStream] moveUserMediaEntryInWaitingScreen: "+Pt);for(var Vt=apiCC.userMediaStreamTable.length;--Vt>=0;)if(apiCC.userMediaStreamTable[Vt].userMediaStreamId===Pt){apiCC.waitingShareScreenUserMediaStream=apiCC.userMediaStreamTable.splice(Vt,1);break}}(this.userMediaStreamId),void apiCC.manageNotInstalledExtension("getScreenMedia","getScreenMedia",this.captureSourceType);this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType=["screen","window","tab"]),Array.isArray(this.captureSourceType)===!1&&(Rt.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType=["screen","window","tab"],Rt.debug("this.captureSourceType :",this.captureSourceType)),window.postMessage({command:"getDesktopId",callNumber:this.userMediaStreamId,remoteId:"getScreenMedia",captureSourceType:this.captureSourceType,browser_major_version:nt.PR},"*")}else Rt.log("shareScreen on Firefox"),nt.PR>=67?this.getDisplayMediaProcess():(this.captureSourceType!==void 0&&this.captureSourceType!==null||(this.captureSourceType="screen"),typeof this.captureSourceType=="string"&&(Rt.warn("Defined captureSourceType format is not correct, reinitialization ..."),this.captureSourceType="screen",Rt.debug("this.captureSourceType :",this.captureSourceType)),this.registerScreenMedia(this.captureSourceType));else this.getDisplayMediaProcess()},this.registerScreenMedia=function(Pt,Vt){var Zt=null,rn=this.getOwnerCallInfo(),Jt=this.getCall(rn),ln=null;if(Rt.debug("[ApiCCUserMediaStream] registerScreenMedia; userMediaStreamId: "+this.userMediaStreamId),Vt==="mediaError")Jt!==null?(ln=Jt.callee===!0?Jt.callerId:Jt.calleeId,Jt.callType==="screenSharing"||Jt.callType==="screenSharingWithAudio"?apiCC.session.apiCCWebRTCClient.webRTCClient.removeCallFromTableWithCallIdandRemoteId(Jt.callId,ln,"Media_Error"):Rt.log("switch video / screen : call is not removed"),window.location.protocol!=="https:"&&Rt.log("Please connect to your web page using 'HTTPS'. This is mandatory for desktop capture"),Lt.createDesktopCaptureEvent("UserMediaError",Jt.callId,ln)):(Rt.log("Call not found on message EventListener"),Lt.createDesktopCaptureEvent("UserMediaError")),function(mn){for(var an=apiCC.userMediaStreamTable.length;--an>=0;)if(apiCC.userMediaStreamTable[an].userMediaStreamId===mn){apiCC.userMediaStreamTable.splice(an,1);break}}(this.userMediaStreamId),this.callbacks.failure(this,"UserMediaError");else try{if(nt.Xh==="Chrome")Rt.log("desktopId: "+Vt),Zt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Vt}}};else{if(Rt.log("captureSourceType: "+Pt),Pt!=="screen"&&Pt!=="window"&&Pt!=="application")return void Rt.error("captureSourceType value is not correct");Zt={video:{mediaSource:Pt}}}nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(Zt,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(Zt).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(mn){Rt.error("getUserMedia() failed. Is this a WebRTC capable browser?"),Rt.log("getUserMedia failed with exception: "+mn.message)}},this.stopScreenSharing=function(){Rt.debug("[ApiCCUserMediaStream] stopScreenSharing; userMediaStreamId: "+this.userMediaStreamId);var Pt=!0;if(apiRTC.session.remoteAccessInvitation!==null&&this.userMediaStreamId===apiRTC.session.remoteAccessInvitation.screenSharingStreamId&&(Rt.debug("this is a remote access screenSharing, need to stop remote access"),apiRTC.session.remoteAccessInvitation.stop(!0,{code:"SCREEN_SHARING_STOP"})),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Vt=this.callInfoList.length;--Vt>=0;)this.callInfoList[Vt].owner===!0&&(Pt=!1),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(this.callInfoList[Vt].callId);Pt===!0&&this.release()},this.getCall=function(Pt){var Vt=null;return Pt&&apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&(Pt.flavor==="call"?Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Pt.callId):Pt.flavor==="userMedia"&&(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Pt.callId))),Vt},this.getOwnerCallInfo=function(){for(var Pt=this.callInfoList.length;--Pt>=0;)if(this.callInfoList[Pt].owner===!0)return this.callInfoList[Pt];return null},this.getCallInfo=function(Pt){for(var Vt=this.callInfoList.length;--Vt>=0;)if(this.callInfoList[Vt].callId===Pt)return this.callInfoList[Vt];return null},this.containsCallInfo=function(Pt){for(var Vt=!1,Zt=this.callInfoList.length;--Zt>=0;)if(this.callInfoList[Zt].callId===Pt){Vt=!0;break}return Vt},this.addCallInfo=function(Pt,Vt,Zt){return Pt!==null&&typeof Pt=="string"&&(Vt!=="call"&&Vt!=="userMedia"&&(Vt="call"),Zt!==null&&typeof Zt=="boolean"||(Zt=!1),!this.containsCallInfo(Pt))&&(this.callInfoList.push({callId:Pt,flavor:Vt,owner:Zt}),!0)},this.removeCallInfo=function(Pt){for(var Vt=!1,Zt=this.callInfoList.length;--Zt>=0;)if(this.callInfoList[Zt].callId===Pt){this.callInfoList.splice(Zt,1),Vt=!0;break}return Vt},this.accessToLocalMedia=function(){return this.callType!=="screenSharing"&&this.callType!=="screenSharingWithAudio"&&this.callType!=="data"&&this.stream!==null},this.muteAudioOnStreams=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Rt.debug("[ApiCCUserMediaStream] muteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(Vt){Vt.enabled=!1}),Pt==="enabled"?this.audioMuted=!0:Pt==="muted"&&(this.audioSilent=!0),this.notifyMLineMuted("audio",!0,Pt),{type:"audio",muted:!0}},this.unMuteAudioOnStreams=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Rt.debug("[ApiCCUserMediaStream] unMuteAudioOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getAudioTracks().forEach(function(Vt){Vt.enabled=!0}),Pt==="enabled"?this.audioMuted=!1:Pt==="muted"&&(this.audioSilent=!1),this.notifyMLineMuted("audio",!1,Pt),{type:"audio",muted:!1}},this.muteVideoOnStreams=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Rt.debug("[ApiCCUserMediaStream] muteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(Vt){Vt.enabled=!1}),Pt==="enabled"?this.videoMuted=!0:Pt==="muted"&&(this.videoSilent=!0),this.notifyMLineMuted("video",!0,Pt),{type:"video",muted:!0}},this.unMuteVideoOnStreams=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"enabled";return Rt.debug("[ApiCCUserMediaStream] unMuteVideoOnStreams; userMediaStreamId: "+this.userMediaStreamId),this.stream.getVideoTracks().forEach(function(Vt){Vt.enabled=!0}),Pt==="enabled"?this.videoMuted=!1:Pt==="muted"&&(this.videoSilent=!1),this.notifyMLineMuted("video",!1,Pt),{type:"video",muted:!1}},this.removeVideoTrackOnStreams=function(){var Pt;return Rt.debug("[ApiCCUserMediaStream] removeVideoTrackOnStreams; userMediaStreamId: "+this.userMediaStreamId),(Pt=this.stream.getVideoTracks()).length>0&&this.stream.removeTrack(Pt[0]),this.video=!1,{type:"video",present:!1}},this.notifyMLineMuted=function(Pt,Vt,Zt){var rn,Jt,ln=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var mn=this.callInfoList.length;--mn>=0;)this.callInfoList[mn].flavor==="call"?(rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[mn].callId),this.notifyMLineMutedCall(Pt,Vt,Zt,rn,null)):this.callInfoList[mn].flavor==="userMedia"&&(Jt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[mn].callId),this.notifyMLineMutedCall(Pt,Vt,Zt,null,Jt)),this.callInfoList[mn].owner===!0&&(ln=!1);ln===!0&&this.notifyMLineMutedCall(Pt,Vt,Zt,null,null)},this.notifyMLineMutedCall=function(Pt,Vt,Zt,rn,Jt){Rt.debug("notifyMLineMutedCall; mline: "+Pt+", muted: "+Vt);var ln=[];Zt==="enabled"?ln=[Pt+"IsMuted"]:Zt==="muted"&&(ln=[Pt+"IsSilent"]);var mn={available:this.audio,deviceLabel:this.audioDeviceLabel,active:!0,muted:this.audioMuted,silent:this.audioSilent},an={available:this.video,deviceLabel:this.videoDeviceLabel,active:!0,muted:this.videoMuted,silent:this.videoSilent},hn=null;rn?(Pt==="audio"?rn.isLocalAudioMuted=Vt:Pt==="video"&&(rn.isLocalVideoMuted=Vt),rn.belongsToRoom()?(hn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:rn.callId,roomId:rn.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:Pt},rn.data.mesh&&(hn.mesh=rn.data.mesh),Zt==="muted"?(hn.change="silent",hn.silent=Vt,rn.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",hn)):Zt==="enabled"&&(hn.muted=Vt,rn.myWebRTC_Stack.sendInfo("streamTrackChanged",hn))):(hn={callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:rn.callee?rn.callerId:rn.calleeId,callId:rn.callId,mline:Pt},Zt==="muted"?(hn.type="streamTrackStatusChanged",hn.change="silent",hn.silent=Vt):Zt==="enabled"&&(hn.type="streamTrackChanged",hn.muted=Vt),rn.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,hn)),mn.active=rn.localCallProfile.audioActive,an.active=rn.localCallProfile.videoActive,Lt.createLocalStreamUpdatedEvent(ln,mn,an,!0,rn.callType,rn.callId,this.stream,this.userMediaStreamId,"userAction")):Jt?(hn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Jt.userMediaId,roomId:Jt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:Pt},Zt==="muted"?(hn.change="silent",hn.silent=Vt,Jt.myWebRTC_Stack.sendInfo("streamTrackStatusChanged",hn)):Zt==="enabled"&&(hn.muted=Vt,Jt.myWebRTC_Stack.sendInfo("streamTrackChanged",hn)),Jt.audioSdpDirection==="inactive"&&(mn.active=!1),Jt.videoSdpDirection==="inactive"&&(an.active=!1),Lt.createLocalStreamUpdatedEvent(ln,mn,an,!0,Jt.callType,Jt.userMediaId,this.stream,this.userMediaStreamId,"userAction")):Lt.createLocalStreamUpdatedEvent(ln,mn,an,!1,null,null,this.stream,this.userMediaStreamId,"userAction")},this.notifyActiveSpeaker=function(Pt){var Vt,Zt,rn=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Jt=this.callInfoList.length;--Jt>=0;)this.callInfoList[Jt].flavor==="call"?(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[Jt].callId),this.notifyActiveSpeakerCall(Pt,Vt,null)):this.callInfoList[Jt].flavor==="userMedia"&&(Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[Jt].callId),this.notifyActiveSpeakerCall(Pt,null,Zt)),this.callInfoList[Jt].owner===!0&&(rn=!1);rn===!0&&this.notifyActiveSpeakerCall(Pt,null,null)},this.notifyActiveSpeakerCall=function(Pt,Vt,Zt){var rn=null;Vt?(Vt.belongsToRoom()?(rn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Vt.callId,roomId:Vt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Vt.data.mesh&&(rn.mesh=Vt.data.mesh),Vt.myWebRTC_Stack.sendInfo("activeSpeaker",rn)):(rn={type:"activeSpeaker",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:Vt.callee?Vt.callerId:Vt.calleeId,callId:Vt.callId,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Vt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,rn)),Lt.createAudioAmplitudeEvent(Pt,!0,Vt.callId,this.userMediaStreamId)):Zt?(rn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Zt.userMediaId,roomId:Zt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Zt.myWebRTC_Stack.sendInfo("activeSpeaker",rn),Lt.createAudioAmplitudeEvent(Pt,!0,Zt.userMediaId,this.userMediaStreamId)):Lt.createAudioAmplitudeEvent(Pt,!0,null,this.userMediaStreamId)},this.notifyNotActiveSpeaker=function(Pt){var Vt,Zt,rn=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var Jt=this.callInfoList.length;--Jt>=0;)this.callInfoList[Jt].flavor==="call"?(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[Jt].callId),this.notifyNotActiveSpeakerCall(Pt,Vt,null)):this.callInfoList[Jt].flavor==="userMedia"&&(Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[Jt].callId),this.notifyNotActiveSpeakerCall(Pt,null,Zt)),this.callInfoList[Jt].owner===!0&&(rn=!1);rn===!0&&this.notifyNotActiveSpeakerCall(Pt,null,null)},this.notifyNotActiveSpeakerCall=function(Pt,Vt,Zt){var rn=null;Vt?(Vt.belongsToRoom()?(rn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Vt.callId,roomId:Vt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Vt.data.mesh&&(rn.mesh=Vt.data.mesh),Vt.myWebRTC_Stack.sendInfo("stopSpeaking",rn)):(rn={type:"stopSpeaking",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:Vt.callee?Vt.callerId:Vt.calleeId,callId:Vt.callId,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Vt.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,rn)),Lt.createAudioAmplitudeEvent(Pt,!1,Vt.callId,this.userMediaStreamId)):Zt?(rn={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Zt.userMediaId,roomId:Zt.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:Pt,streamID:this.userMediaStreamId}},Zt.myWebRTC_Stack.sendInfo("stopSpeaking",rn),Lt.createAudioAmplitudeEvent(Pt,!1,Zt.userMediaId,this.userMediaStreamId)):Lt.createAudioAmplitudeEvent(Pt,!1,null,this.userMediaStreamId)},this.callback=function(Pt,Vt){return this.closureHandler=function(Zt,rn){return Pt[Vt](Zt,rn)},this.closureHandler},this.isUserMediaAccessAllowed=function(){return localStorage!==null&&(typeof localStorage>"u"?"undefined":kt(localStorage))==="object"&&typeof localStorage.getItem=="function"?localStorage.getItem(Et)==="true":null},this.setUserMediaAccessAllowed=function(Pt){return localStorage!==null&&(typeof localStorage>"u"?"undefined":kt(localStorage))==="object"&&typeof localStorage.setItem=="function"?(localStorage.setItem(Et,Pt?"true":"false"),!!Pt):null},this.applyFiltersIfNeeded=function(Pt){return this.filters===null?Promise.resolve(Pt):(this.mediaFilterManager=new Yt(Pt,this.filters,this.userMediaStreamId),this.mediaFilterManager.applyFilters())},this.getVideoSettings=function(){if(this.videoSettings!==!1)return this.videoSettings;var Pt=this.getVideoTrack();if(!Pt||typeof Pt.getSettings!="function")return this.videoSettings=null,this.videoSettings;var Vt=Pt.getSettings();return Vt?(this.videoSettings={},Object.prototype.hasOwnProperty.call(Vt,"width")&&(this.videoSettings.width=Vt.width),Object.prototype.hasOwnProperty.call(Vt,"height")&&(this.videoSettings.height=Vt.height),Object.prototype.hasOwnProperty.call(Vt,"frameRate")&&(this.videoSettings.frameRate=Vt.frameRate),this.videoSettings):(this.videoSettings=null,this.videoSettings)},this.isSimulcastCompliant=function(){return!!this.getVideoSettings()},this.getSimulcastProfile=function(){var Pt=this.getVideoSettings();if(!Pt)return null;var Vt={substream:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}},temporal:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}}};return at.wL.type==="chrome"&&((Pt.width<1280||Pt.height<720)&&(Vt.substream.low.selectable=!1),Vt.temporal.high.active=!1,Vt.temporal.high.selectable=!1),Vt}}},1192:(rt,it,s)=>{s.d(it,{D:()=>wn}),s(3710),s(1539),s(9714),s(2772),s(8674);var et=s(1549),nt=(s(4916),s(5306),s(2564),s(4812),s(561),s(5735),s(3753),s(4603),s(6755),s(9554),s(4747),s(6992),s(8783),s(3948),s(9601),s(8309),s(8264),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(7042),s(7941),s(2526),s(1817),s(2165),s(5945)),at=s(4708),ht=s(940);function dt(Yt){return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},dt(Yt)}function pt(){this.sdp={original:null,global:[],mlines:[]},this.mlines=[]}function lt(Yt){var kt=new pt,st=Yt.split(`\r
`),Tt=0,Rt=null,Lt=null,Et=null,jt=null;for(kt.sdp.original=Yt;Tt<st.length;)if((Rt=st[Tt]).length!==0)if(Et!==null)if(Rt.match(/^m=/))Lt=null,Et=null;else if(Rt.match(/^a=/)){if(Lt.push(Rt),!(jt=Rt.match(/^a=([\w-]+):(\d+) (.+)$/))||jt[1]!=="rtpmap"&&jt[1]!=="rtcp-fb"&&jt[1]!=="fmtp"){if(jt=Rt.match(/^a=mid:(\w+)$/))Et.mid=jt[1];else if(Rt==="a=sendrecv")Et.direction="sendrecv";else if(Rt==="a=recvonly")Et.direction="recvonly";else if(Rt==="a=sendonly")Et.direction="sendonly";else if(Rt==="a=inactive")Et.direction="inactive";else if(jt=Rt.match(/^a=ssrc-group:SIM (.+)$/)){var Pt=jt[1].split(" ");Et.ssrc_groups.sim.push(Pt.slice())}else if(jt=Rt.match(/^a=ssrc-group:FID (.+)$/)){var Vt=jt[1].split(" ");Et.ssrc_groups.fid.push(Vt.slice())}else if(jt=Rt.match(/^a=ssrc:(\d+) (.+)$/)){var Zt=Et.ssrcs.find(function(En){return En.original===jt[1]});Zt||(Zt={original:jt[1],ssrc:jt[1],content:{}},Et.ssrcs.push(Zt));var rn=jt[2].match(/^(\w+):(.+)$/);if(!rn)throw new Error("cannot parse ssrc parameters (regex failure): "+jt[2]);if(rn[1]==="cname")Zt.content.cname=rn[2];else if(rn[1]==="msid")Zt.content.msid=rn[2];else if(rn[1]==="mslabel")Zt.content.mslabel=rn[2];else{if(rn[1]!=="label")throw new Error("cannot parse ssrc parameters (wrong attribute): "+rn[1]);Zt.content.label=rn[2]}}}else if(jt[1]==="rtpmap")Et.codecs[jt[2]].codec=jt[3].split("/")[0].toLowerCase(),Et.codecs[jt[2]].rtpmap=jt[3];else if(jt[1]==="rtcp-fb")Et.codecs[jt[2]]["rtcp-fb"]||(Et.codecs[jt[2]]["rtcp-fb"]=[]),Et.codecs[jt[2]]["rtcp-fb"].push(jt[3]);else if(jt[1]==="fmtp"){Et.codecs[jt[2]].fmtp=[];for(var Jt=jt[3].split(";"),ln=0;ln<Jt.length;ln+=1){var mn=Jt[ln].split("=");mn.length===2&&Et.codecs[jt[2]].fmtp.push(mn)}}Tt+=1}else if(Rt.match(/^b=/)){if(Lt.push(Rt),jt=Rt.match(/^b=AS:(\d+)$/)){Et.bandwidth=parseInt(jt[1],10),Tt+=1;continue}Tt+=1}else Lt.push(Rt),Tt+=1;else{if(jt=Rt.match(/^m=([a-z]+) (\d+) ([A-Z/]+) ([0-9 ]+)$/)){Lt=[],kt.sdp.mlines.push(Lt),Lt.push(Rt),Et={type:jt[1],port:parseInt(jt[2],10),proto:jt[3],payload_types:[],direction:"sendrecv",mid:jt[1],bandwidth:0,codecs:{},ssrc_groups:{sim:[],fid:[]},ssrcs:[]};for(var an=jt[4].split(" "),hn=0;hn<an.length;hn+=1)Et.payload_types.push(an[hn]),Et.codecs[an[hn]]={};kt.mlines.push(Et),Tt+=1;continue}kt.sdp.global.push(Rt),Tt+=1}else Tt+=1;for(kt.unifiedPlan=!0,Tt=kt.mlines.length;--Tt>=0;)kt.mlines[Tt].type!=="audio"||kt.audio?kt.mlines[Tt].type!=="video"||kt.video||(kt.video=kt.mlines[Tt]):kt.audio=kt.mlines[Tt],kt.unifiedPlan===!0&&kt.mlines[Tt].mid!==String(Tt)&&(kt.unifiedPlan=!1);return kt.isAudioActive=mt.bind(null,kt,"audio"),kt.isVideoActive=mt.bind(null,kt,"video"),kt}function mt(Yt,kt){return!(kt!=="audio"&&kt!=="video"||Yt===null||dt(Yt)!=="object"||!Object.prototype.hasOwnProperty.call(Yt,kt)||Yt[kt]===null||dt(Yt[kt])!=="object"||Yt[kt].direction!=="sendrecv"&&Yt[kt].direction!=="sendonly"&&Yt[kt].direction!=="recvonly")}s(3123),s(4765),s(4723),s(9600),s(1058),s(9826),pt.prototype.mungeForSimulcasting=function(){if(this.simulcasting!==!0){this.simulcasting=!0;for(var Yt=0;Yt<this.mlines.length;Yt+=1){var kt=this.mlines[Yt];if(kt.type==="video"){var st=kt.ssrcs[0].content.cname,Tt=kt.ssrcs[0].content.msid,Rt=kt.ssrcs[0].content.mslabel,Lt=kt.ssrcs[0].content.label,Et=[];Et.push(kt.ssrcs[0].ssrc);for(var jt=2;--jt>=0;){var Pt=Math.floor(4294967295*Math.random());kt.ssrcs.push({original:Pt,ssrc:Pt,content:{cname:st,msid:Tt,mslabel:Rt,label:Lt}});var Vt=Math.floor(4294967295*Math.random());kt.ssrcs.push({original:Vt,ssrc:Vt,content:{cname:st,msid:Tt,mslabel:Rt,label:Lt}}),kt.ssrc_groups.fid.push([Pt,Vt]),Et.push(Pt)}kt.ssrc_groups.sim.push(Et)}}}},pt.prototype.generate=function(){for(var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=[],st=0;st<this.sdp.global.length;st+=1){var Tt=this.sdp.global[st],Rt=Tt.match(/^a=group:BUNDLE([\w ]+)$/);if(Rt){kt.push("a=group:BUNDLE");for(var Lt=0;Lt<this.mlines.length;Lt+=1)this.mlines[Lt].direction==="inactive"&&Yt.stripInactiveMLines===!0||(kt.push(" "),kt.push(this.mlines[Lt].mid));kt.push(`\r
`)}else kt.push(Tt),kt.push(`\r
`)}for(var Et=0;Et<this.sdp.mlines.length;Et+=1){var jt=this.mlines[Et];if(jt.direction!=="inactive"||Yt.stripInactiveMLines!==!0)for(var Pt=!1,Vt=this.sdp.mlines[Et],Zt=0;Zt<Vt.length;Zt+=1){var rn=Vt[Zt];if(rn.match(/^m=/))kt.push("m="),kt.push(jt.type),kt.push(" "),kt.push(jt.port),kt.push(" "),kt.push(jt.proto),kt.push(" "),kt.push(jt.payload_types.join(" ")),kt.push(`\r
`);else if(rn.match(/^a=/)){var Jt=rn.match(/^a=([\w-]+):(\d+) (.+)$/);if(Jt&&(Jt[1]==="rtpmap"||Jt[1]==="rtcp-fb"||Jt[1]==="fmtp")){if(Jt[1]==="rtpmap"){var ln=Jt[2];if(jt.codecs[ln]){kt.push("a=rtpmap:"),kt.push(ln),kt.push(" "),kt.push(jt.codecs[ln].rtpmap),kt.push(`\r
`);var mn=jt.codecs[ln]["rtcp-fb"];if(mn)for(var an=0;an<mn.length;an+=1)kt.push("a=rtcp-fb:"),kt.push(ln),kt.push(" "),kt.push(mn[an]),kt.push(`\r
`);var hn=jt.codecs[ln].fmtp;if(hn){for(var En=[],Mn=0;Mn<hn.length;Mn+=1)En.push(hn[Mn].join("="));En.length>0&&(kt.push("a=fmtp:"),kt.push(ln),kt.push(" "),kt.push(En.join(";")),kt.push(`\r
`))}continue}continue}if(Jt[1]==="rtcp-fb"||Jt[1]==="fmtp")continue;throw new Error("internal error")}if(rn.match(/^a=mid:(\w+)$/))kt.push("a=mid:"),kt.push(jt.mid),kt.push(`\r
`),jt.bandwidth>0&&(kt.push("b=AS:"),kt.push(jt.bandwidth),kt.push(`\r
`),kt.push("b=TIAS:"),kt.push(jt.bandwidth),kt.push("000"),kt.push(`\r
`));else if(rn!=="a=sendrecv"&&rn!=="a=recvonly"&&rn!=="a=sendonly"&&rn!=="a=inactive"){if(!rn.match(/^a=ssrc-group:SIM (.+)$/)){if(!rn.match(/^a=ssrc-group:FID (.+)$/)){if(rn.match(/^a=ssrc:(\d+) (.+)$/)){if(Pt)continue;Pt=!0;for(var Pn=0;Pn<jt.ssrc_groups.sim.length;Pn+=1)kt.push("a=ssrc-group:SIM "),kt.push(jt.ssrc_groups.sim[Pn].join(" ")),kt.push(`\r
`);for(var Wn=0;Wn<jt.ssrc_groups.fid.length;Wn+=1)kt.push("a=ssrc-group:FID "),kt.push(jt.ssrc_groups.fid[Wn].join(" ")),kt.push(`\r
`);for(var Nn=function(rr){var hr=jt.ssrcs[rr];["cname","msid","mslabel","label"].forEach(function(cr){Object.prototype.hasOwnProperty.call(hr.content,cr)&&(kt.push("a=ssrc:"),kt.push(hr.ssrc),kt.push(" "),kt.push(cr),kt.push(":"),kt.push(hr.content[cr]),kt.push(`\r
`))})},Jn=0;Jn<jt.ssrcs.length;Jn+=1)Nn(Jn);continue}kt.push(rn),kt.push(`\r
`);continue}}}else kt.push("a="),kt.push(jt.direction),kt.push(`\r
`)}else{if(rn.match(/^b=/))continue;kt.push(rn),kt.push(`\r
`)}}}return kt.join("")};var ot=et.Y.get("SDPManager"),ut=function(){ot.debug("SDPManager"),this.getSDPLines=function(Yt){ot.debug("SDPManager::getSDPLines");var kt,st=Yt.split(`\r
`);for(kt=0;kt<st.length;kt+=1)ot.log("sdpLines[i] : "+st[kt]);return st},this.getAudioMediaDescriptionPart=function(Yt){ot.debug("SDPManager::getAudioMediaDescriptionPart");var kt=Yt.split("m=audio"),st=null;return kt[1]!==void 0&&kt[1]!==null?(st=kt[1].split("m=video"),ot.log("SDP audio part : "+st[0]),st[0]):null},this.getVideoMediaDescriptionPart=function(Yt){ot.debug("SDPManager::getVideoMediaDescriptionPart");var kt,st=Yt.split("m=video");for(kt=0;kt<st.length;kt+=1)ot.log("sdpMediaPart[i] : "+st[kt]);return st[1]},this.searchMediaDescriptionForRecvOnly=function(Yt){return ot.debug("searchMediaDescriptionForRecvOnly"),Yt.search("a=recvonly")!==-1?(ot.log("recvonly found in media description"),!0):(ot.log("recvonly not found in media description"),!1)},this.searchSDPForRecvOnly=function(Yt){return Yt!==void 0?(ot.log("sdpPart !== undefined"),this.searchMediaDescriptionForRecvOnly(Yt)):(ot.log("recvonly not found in SDP"),!1)},this.searchMediaDescriptionForSendOnly=function(Yt){return ot.debug("searchMediaDescriptionForSendOnly"),Yt.search("a=sendonly")!==-1?(ot.log("sendonly found in media description"),!0):(ot.log("sendonly not found in media description"),!1)},this.searchSDPForSendOnly=function(Yt){return Yt!==void 0?(ot.log("sdpPart !== undefined"),this.searchMediaDescriptionForSendOnly(Yt)):(ot.log("sendonly not found in SDP"),!1)},this.searchMediaDescriptionForInactive=function(Yt){return ot.debug("searchMediaDescriptionForInactive"),Yt.search("a=inactive")!==-1?(ot.log("inactive found in media description"),!0):(ot.log("inactive not found in media description"),!1)},this.searchSDPForInactive=function(Yt){return Yt!==void 0?(ot.log("sdpPart !== undefined"),this.searchMediaDescriptionForInactive(Yt)):(ot.log("inactive not found in SDP"),!1)},this.stripAudioMediaDescriptionFromSDP=function(Yt){ot.debug("SDPManager::stripAudioMediaDescriptionFromSDP");var kt=this.createGuideline(Yt);return kt.audio?(kt.audio.direction="inactive",kt.generate({stripInactiveMLines:!0})):Yt},this.stripVideoMediaDescriptionFromSDP=function(Yt){ot.debug("SDPManager::stripVideoMediaDescriptionFromSDP");var kt=this.createGuideline(Yt);return kt.video?(kt.video.direction="inactive",kt.generate({stripInactiveMLines:!0})):Yt},this.setAudioBandwidth=function(Yt,kt){return ot.info("SDPManager::setAudioBandwidth",kt),kt?Yt=Yt.replace(/a=mid:audio\r\n/g,`a=mid:audio\r
b=AS:`+kt+`\r
`):(ot.warn("No maxAudioBW !"),Yt)},this.setVideoBandwidth=function(Yt,kt){if(ot.info("SDPManager::setVideoBandwidth",kt),!kt)return ot.warn("No maxVideoBW !"),Yt;for(var st=[],Tt=Yt.split(`\r
`),Rt=0,Lt=null,Et=null;Rt<Tt.length;)if((Lt=Tt[Rt]).length!==0)if(Et!==null)Lt.match(/^m=/)?Et=null:Lt.match(/^a=mid:(\w+)$/)?(st.push(Lt),st.push(`\r
`),st.push("b=AS:"),st.push(kt),st.push(`\r
`),st.push("b=TIAS:"),st.push(kt),st.push("000"),st.push(`\r
`),Rt+=1):(Lt.match(/^b=([A-Z]+):(\w+)$/)||(st.push(Lt),st.push(`\r
`)),Rt+=1);else{var jt=Lt.match(/^m=([a-z]+)(.+)$/);if(jt&&jt[1]==="video"){Et="video",st.push(Lt),st.push(`\r
`),Rt+=1;continue}st.push(Lt),st.push(`\r
`),Rt+=1}else Rt+=1;return st.join("")},this.setDataBandwidth=function(Yt,kt){return ot.info("SDPManager::setDataBandwidth",kt),kt?Yt=Yt.replace(/a=mid:data\r\n/g,`a=mid:data\r
b=AS:`+kt+`\r
`):(ot.warn("No maxDataBW !"),Yt)},this.setSendOnlyForAudio=function(Yt){ot.debug("SDPManager::setSendOnlyForAudio");var kt=this.createGuideline(Yt);return(0,at.ki)(kt,"audio","object")&&(kt.audio.direction="sendonly"),kt.generate()},this.setSendOnlyForVideo=function(Yt){ot.debug("SDPManager::setSendOnlyForVideo");var kt=this.createGuideline(Yt);return(0,at.ki)(kt,"video","object")&&(kt.video.direction="sendonly"),kt.generate()},this.setSendOnly=function(Yt){ot.debug("SDPManager::setSendOnly : global");var kt=this.createGuideline(Yt);return(0,at.ki)(kt,"audio","object")&&(kt.audio.direction="sendonly"),(0,at.ki)(kt,"video","object")&&(kt.video.direction="sendonly"),kt.generate()},this.setRecvOnlyForAudio=function(Yt){ot.debug("SDPManager::setRecvOnlyForAudio");var kt=this.createGuideline(Yt);return kt.audio&&kt.audio.direction!=="inactive"&&(kt.audio.direction="recvonly"),kt.generate()},this.setRecvOnlyForVideo=function(Yt){ot.debug("SDPManager::setRecvOnlyForVideo");var kt=this.createGuideline(Yt);return kt.video&&kt.video.direction!=="inactive"&&(kt.video.direction="recvonly"),kt.generate()},this.setRecvOnly=function(Yt){ot.debug("SDPManager::setRecvOnly : global");var kt=this.createGuideline(Yt);return kt.audio&&kt.audio.direction!=="inactive"&&(kt.audio.direction="recvonly"),kt.video&&kt.video.direction!=="inactive"&&(kt.video.direction="recvonly"),kt.generate()},this.updateSDPcodecs=function(Yt,kt,st,Tt){var Rt,Lt,Et,jt,Pt,Vt,Zt,rn,Jt=!1,ln=new RegExp(`\r
$`),mn=!1,an=null,hn="",En="",Mn="",Pn="",Wn="",Nn="",Jn="",rr="";if(ot.log(`updateSDPcodecs():
	sdpType = `+kt+`
	mediaType = `+st+`
	availableCodecSet = `+Tt+`
`),Tt=="")return Yt;for(Et=(Et=RTCSessionDescription&&Yt instanceof RTCSessionDescription?Yt.sdp:window.SessionDescription&&Yt instanceof SessionDescription?Yt.toSdp():Yt).split(`\r
m=`),ln.test(Et[Et.length-2])===!1&&(Et[Et.length-2]=Et[Et.length-2]+`\r
`,mn=!0),Rt=0;Rt<Et.length;Rt++)if(Et[Rt].indexOf(st)===0){for(an=Et[Rt].split(`\r
`)[0].split(" "),Lt=3;Lt<an.length;Lt++)if(jt=!0,isNaN(an[Lt])===!1){switch(En="a=rtpmap:"+an[Lt]+" ",(Pt=Et[Rt].indexOf(En))!==-1&&(Vt=Et[Rt].indexOf(`\r
`,Pt)),an[Lt]){case 0:hn="PCMU/8000";break;case 8:hn="PCMA/8000";break;case 9:hn="G722/8000";break;case 13:hn="CN/8000";break;case 18:hn="G729/8000";break;default:Pt!==-1&&(hn=Et[Rt].substring(Pt+En.length,Vt))}hn!=""&&Tt.indexOf(hn)!==-1?ot.log("PT("+an[Lt]+"): "+hn+` FOUND in availableCodecSet.
`):(jt=!1,ot.log("PT("+an[Lt]+"): "+hn+` NOT FOUND in availableCodecSet.
`)),jt||(Mn=En+`.*\r
`,Pn="a=fmtp:"+an[Lt]+` .*\r
`,Jn="a=rtcp-fb:"+an[Lt]+` .*\r
`,Wn=" "+an[Lt]+" ",Nn=" "+an[Lt]+"\r",Et[Rt]=Et[Rt].replace(new RegExp(Mn,"g"),""),Et[Rt]=Et[Rt].replace(new RegExp(Pn,"g"),""),Et[Rt]=Et[Rt].replace(new RegExp(Jn,"g"),""),(rn=(Zt=Et[Rt].split(`
`))[0].split("RTP"))[1]=rn[1].replace(Wn," "),rn[1]=rn[1].replace(Nn,"\r"),Zt[0]=rn.join("RTP"),Et[Rt]=Zt.join(`
`),st==="video"&&(Jn="a=rtcp-fb:"+an[Lt]+` .*\r
`,Et[Rt]=Et[Rt].replace(new RegExp(Jn,"g"),""),hn!=""&&hn.substr(0,4)==="rtx/"&&(rr=`a=ssrc-group:FID .*\r
`,Et[Rt]=Et[Rt].replace(new RegExp(rr,"g"),""),(Zt=Et[Rt].split(`\r
a=`)).splice(Zt.length-8,4),Et[Rt]=Zt.join(`\r
a=`))),Jt=!0)}break}return mn&&(Et[Et.length-2]=Et[Et.length-2].substr(0,Et[Et.length-2].length-2)),Et=Et.join(`\r
m=`),Jt===!0?(ot.log("updateSDPcodecs(), SDP has been updated."),RTCSessionDescription&&Yt instanceof RTCSessionDescription?new RTCSessionDescription({type:kt,sdp:Et}):window.SessionDescription&&Yt instanceof SessionDescription?new SessionDescription(Et):Et):(ot.log("updateSDPcodecs(), SDP has not been updated."),Yt)},this.preferOpus=function(Yt){var kt,st=Yt.split(`\r
`),Tt=0,Rt=null;for(kt=0;kt<st.length;kt+=1)if(st[kt].search("m=audio")!==-1){Tt=kt;break}if(Tt===0)return Yt;for(kt=0;kt<st.length;kt+=1)if(st[kt].search("opus/48000")!==-1){(Rt=this.extractSdp(st[kt],/:(\d+) opus\/48000/i))&&(st[Tt]=this.setDefaultCodec(st[Tt],Rt));break}return(st=this.removeCN(st,Tt)).join(`\r
`)},this.removeCN=function(Yt,kt){var st=0,Tt=Yt[kt].split(" "),Rt=null,Lt=0;for(st=Yt.length-1;st>=0;st--)(Rt=this.extractSdp(Yt[st],/a=rtpmap:(\d+) CN\/\d+/i))&&((Lt=Tt.indexOf(Rt))!==-1&&Tt.splice(Lt,1),Yt.splice(st,1));return Yt[kt]=Tt.join(" "),Yt},this.extractSdp=function(Yt,kt){var st=Yt.match(kt);return st&&st.length==2?st[1]:null},this.setDefaultCodec=function(Yt,kt){var st=0,Tt=Yt.split(" "),Rt=Tt.slice(0,3);for(Rt.push(kt),st=3;st<Tt.length;st++)Tt[st]!==kt&&Rt.push(Tt[st]);return Rt.join(" ")},this.findLineInRange=function(Yt,kt,st,Tt,Rt){var Lt,Et=st!==-1?st:Yt.length;for(Lt=kt;Lt<Et;++Lt)if(Yt[Lt].indexOf(Tt)===0&&(!Rt||Yt[Lt].toLowerCase().indexOf(Rt.toLowerCase())!==-1))return Lt;return null},this.findLine=function(Yt,kt,st){return this.findLineInRange(Yt,0,-1,kt,st)},this.getCodecPayloadType=function(Yt,kt){var st=this.findLine(Yt,"a=rtpmap",kt);return st?this.getCodecPayloadTypeFromLine(Yt[st]):null},this.getCodecPayloadTypeFromLine=function(Yt){var kt=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),st=Yt.match(kt);return st&&st.length===2?st[1]:null},this.findFmtpLine=function(Yt,kt){var st=this.getCodecPayloadType(Yt,kt);return st?this.findLine(Yt,"a=fmtp:"+st.toString()):null},this.writeFmtpLine=function(Yt){if(!Yt.hasOwnProperty("pt")||!Yt.hasOwnProperty("params"))return null;var kt=Yt.pt,st=Yt.params,Tt=[],Rt=0,Lt=null;for(Lt in st)Tt[Rt]=Lt+"="+st[Lt],++Rt;return Rt===0?null:"a=fmtp:"+kt.toString()+" "+Tt.join("; ")},this.setCodecParam=function(Yt,kt,st,Tt){var Rt=Yt.split(`\r
`),Lt=this.findFmtpLine(Rt,kt),Et={},jt=null,Pt=null;if(Lt===null){if((Pt=this.findLine(Rt,"a=rtpmap",kt))===null)return Yt;jt=this.getCodecPayloadTypeFromLine(Rt[Pt]),Et.pt=jt.toString(),Et.params={},Et.params[st]=Tt,Rt.splice(Pt+1,0,this.writeFmtpLine(Et))}else(Et=function(Vt){var Zt,rn={},Jt=Vt.indexOf(" "),ln=Vt.substring(Jt+1).split("; "),mn=new RegExp("a=fmtp:(\\d+)"),an=Vt.match(mn),hn={},En=null;if(!an||an.length!==2)return null;for(rn.pt=an[1],Zt=0;Zt<ln.length;++Zt)(En=ln[Zt].split("=")).length===2&&(hn[En[0]]=En[1]);return rn.params=hn,rn}(Rt[Lt])).params[st]=Tt,Rt[Lt]=this.writeFmtpLine(Et);return Rt.join(`\r
`)},this.maybePreferCodec=function(Yt,kt,st){var Tt,Rt,Lt=kt+" codec",Et=null;return st?(ot.log("Prefer "+Lt+": "+st),Et=Yt.split(`\r
`),(Tt=this.findLine(Et,"m=",kt))===null?(ot.log("mLineIndex === null"),Yt):((Rt=this.getCodecPayloadType(Et,st))&&(Et[Tt]=this.setDefaultCodec(Et[Tt],Rt)),Yt=Et.join(`\r
`))):(ot.log("No preference on "+Lt+"."),Yt)},this.createGuideline=lt};function ft(Yt,kt){(kt==null||kt>Yt.length)&&(kt=Yt.length);for(var st=0,Tt=new Array(kt);st<kt;st++)Tt[st]=Yt[st];return Tt}function bt(Yt,kt){for(var st=0;st<kt.length;st++){var Tt=kt[st];Tt.enumerable=Tt.enumerable||!1,Tt.configurable=!0,"value"in Tt&&(Tt.writable=!0),Object.defineProperty(Yt,Tt.key,Tt)}}function vt(){return!0}function yt(Yt){return Yt===null}function At(Yt){return Yt!==null}s(9753),s(1038),s(4553),s(9070);var Nt=function(){function Yt(){(function(Tt,Rt){if(!(Tt instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,Yt),this._callbacks=[],this._timeout=null,this._err=null,this._data=null,this._interrupted=null,this._fulfilled=!1}var kt,st;return kt=Yt,st=[{key:"err",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._err}},{key:"data",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._data}},{key:"interrupted",get:function(){if(!this._fulfilled)throw new Error("not fulfilled yet");return this._interrupted}},{key:"fulfilled",get:function(){return this._fulfilled}},{key:"_fulfill",value:function(Tt,Rt,Lt){this._err=Tt,this._data=Rt,this._interrupted=Lt,this._fulfilled=!0;var Et=this._callbacks.slice();this.clear();var jt,Pt=function(Jt,ln){var mn=typeof Symbol<"u"&&Jt[Symbol.iterator]||Jt["@@iterator"];if(!mn){if(Array.isArray(Jt)||(mn=function(Wn,Nn){if(Wn){if(typeof Wn=="string")return ft(Wn,Nn);var Jn=Object.prototype.toString.call(Wn).slice(8,-1);return Jn==="Object"&&Wn.constructor&&(Jn=Wn.constructor.name),Jn==="Map"||Jn==="Set"?Array.from(Wn):Jn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jn)?ft(Wn,Nn):void 0}}(Jt))||ln&&Jt&&typeof Jt.length=="number"){mn&&(Jt=mn);var an=0,hn=function(){};return{s:hn,n:function(){return an>=Jt.length?{done:!0}:{done:!1,value:Jt[an++]}},e:function(Wn){throw Wn},f:hn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var En,Mn=!0,Pn=!1;return{s:function(){mn=mn.call(Jt)},n:function(){var Wn=mn.next();return Mn=Wn.done,Wn},e:function(Wn){Pn=!0,En=Wn},f:function(){try{Mn||mn.return==null||mn.return()}finally{if(Pn)throw En}}}}(Et);try{for(Pt.s();!(jt=Pt.n()).done;){var Vt=jt.value,Zt=Vt.match,rn=Vt.callback;Zt(this._err)&&rn(this._err,this._data,this._interrupted)}}catch(Jt){Pt.e(Jt)}finally{Pt.f()}}},{key:"clear",value:function(){this.clearTimeout(),this.removeCallback()}},{key:"setTimeout",value:function(Tt){function Rt(Lt,Et,jt){return Tt.apply(this,arguments)}return Rt.toString=function(){return Tt.toString()},Rt}(function(Tt,Rt,Lt){var Et=this;this.clearTimeout(),this._timeout=setTimeout(Rt===null?function(){Et._fulfill(null,Lt,!0)}:function(){Et._fulfill(typeof Rt=="string"?new Error(Rt):Rt,void 0,!0)},Tt)})},{key:"clearTimeout",value:function(Tt){function Rt(){return Tt.apply(this,arguments)}return Rt.toString=function(){return Tt.toString()},Rt}(function(){this._timeout!==null&&(clearTimeout(this._timeout),this._timeout=null)})},{key:"onFulfillment",value:function(Tt){this._callbacks.push({match:vt,callback:Tt})}},{key:"onSuccess",value:function(Tt){this._callbacks.push({match:yt,callback:Tt})}},{key:"onFailure",value:function(Tt){this._callbacks.push({match:At,callback:Tt})}},{key:"removeCallback",value:function(Tt){if(typeof Tt=="function"){var Rt=this._callbacks.findIndex(function(Lt){return Lt.callback===Tt});Rt>=0&&this._callbacks.splice(Rt,1)}else this._callbacks.splice(0,this._callbacks.length)}},{key:"fulfill",value:function(Tt,Rt){Tt===null?this._fulfill(null,Rt,!1):this._fulfill(typeof Tt=="string"?new Error(Tt):Tt,void 0,!1)}}],st&&bt(kt.prototype,st),Object.defineProperty(kt,"prototype",{writable:!1}),Yt}(),St=(s(1249),s(7327),s(3843),function(Yt,kt,st,Tt,Rt,Lt,Et,jt){this.rawStats={},this.rawStats.connectedPair=[],this.rawStats.audio_send=[],this.rawStats.audio_recv=[],this.rawStats.video_send=[],this.rawStats.video_recv=[],this.instantRTT=0,this.moyRttCP=[0,0,0,0,0,0,0,0,0,0],this.moyRttAS=[0,0,0,0,0,0,0,0,0,0],this.moyRttVS=[0,0,0,0,0,0,0,0,0,0],this.tauxPacketLossAS=[0],this.oldLostAS=this.oldSentAS=0,this.oldLostVS=this.oldLostVS=0,this.cptTaux=0,this.tauxPacketLossVS=[0],this.oldBandwidthAS=0,this.oldBandwidthVS=0,this.oldBandwidthAR=0,this.oldBandwidthVR=0,this.bandwidthAS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthAR=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVR=[0,0,0,0,0,0,0,0,0,0],this.qosIn=0,this.qosInAverage=0,this.qosInAverageCount=0,this.qosAudioIn=0,this.qosAudioInAverage=0,this.qosAudioInAverageCount=0,this.qosVideoIn=0,this.qosVideoInAverage=0,this.qosVideoInAverageCount=0,this.qosOut=0,this.qosOutAverage=0,this.qosOutAverageCount=0,this.qosAudioOut=0,this.qosAudioOutAverage=0,this.qosAudioOutAverageCount=0,this.qosVideoOut=0,this.qosVideoOutAverage=0,this.qosVideoOutAverageCount=0,this.onQosChange=kt,this.onQosAudioChange=st,this.onQosVideoChange=Tt,this.cpt=0,this.cptRes=5,this.cptDb=60,this.saveStatsFlag=!0,this.tabQosIn=[],this.tabQosAudioIn=[],this.tabQosVideoIn=[],this.tabQosOut=[],this.tabQosAudioOut=[],this.tabQosVideoOut=[],this.tabTimestamp=[],this.tabDelay=[],this.tabJitterBufferAudio=[],this.tabJitterBufferVideo=[],this.tabAudioRtt=[],this.tabVideoRtt=[],this.tabAudioBW=[],this.tabVideoBW=[],this.clientId=Et,this.callId=Rt,this.apiKey=Lt,this.socket=jt,this.interval=Yt,this.insertStats=function(Pt,Vt,Zt,rn){var Jt,ln,mn,an=null;for(this.cpt=this.cpt+this.interval,Jt=0;Jt<Pt.length;++Jt){var hn=Pt[Jt];switch(hn.type){case"googCandidatePair":for(an=hn.names(),mn=0;mn<an.length;++mn)if(an[mn]=="googActiveConnection"&&hn.stat(an[mn])=="true")for(ln=0;ln<an.length;++ln)an[ln]=="bytesSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.connectedPair.bytesSent=hn.stat(an[ln])),an[ln]=="bytesReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.connectedPair.bytesReceived=hn.stat(an[ln])),an[ln]=="googRtt"&&hn.stat(an[ln])!==void 0&&(this.rawStats.connectedPair.googRtt=hn.stat(an[ln]));break;case"ssrc":for(an=hn.names(),mn=0;mn<an.length;++mn){if(an[mn]=="audioOutputLevel")for(ln=0;ln<an.length;++ln)an[ln]=="packetsLost"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.packetsLost=hn.stat(an[ln])),an[ln]=="googDecodingPLC"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.googDecodingPLC=hn.stat(an[ln])),an[ln]=="googJitterReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.googJitterReceived=hn.stat(an[ln])),an[ln]=="googJitterBufferMs"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.googJitterBufferMs=hn.stat(an[ln])),an[ln]=="googCurrentDelayMs"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.googCurrentDelayMs=hn.stat(an[ln])),an[ln]=="bytesReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_recv.bytesReceived=hn.stat(an[ln]));if(an[mn]=="audioInputLevel")for(ln=0;ln<an.length;++ln)an[ln]=="googRtt"&&hn.stat(an[ln])!==void 0&&hn.stat(an[ln])!=-1&&(this.rawStats.audio_send.googRtt=hn.stat(an[ln])),an[ln]=="packetsLost"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_send.packetsLost=hn.stat(an[ln])),an[ln]=="packetsSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_send.packetsSent=hn.stat(an[ln])),an[ln]=="bytesSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_send.bytesSent=hn.stat(an[ln])),an[ln]=="googJitterReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.audio_send.googJitterReceived=hn.stat(an[ln]));if(an[mn]=="googFrameHeightReceived")for(ln=0;ln<an.length;++ln)an[ln]=="googFrameHeightReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.FrameHeight=hn.stat(an[ln])),an[ln]=="googFrameWidthReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.FrameWidth=hn.stat(an[ln])),an[ln]=="googCurrentDelayMs"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.delay=hn.stat(an[ln])),an[ln]=="packetsLost"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.packetsLost=hn.stat(an[ln])),an[ln]=="googNacksSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.googNacksSent=hn.stat(an[ln])),an[ln]=="googJitterBufferMs"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.googJitterBufferMs=hn.stat(an[ln])),an[ln]=="bytesReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.bytesReceived=hn.stat(an[ln])),an[ln]=="googFrameRateReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_recv.googFrameRateReceived=hn.stat(an[ln]));if(an[mn]=="googFrameHeightSent")for(ln=0;ln<an.length;++ln)an[ln]=="googFrameHeightSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.FrameHeight=hn.stat(an[ln])),an[ln]=="googFrameWidthSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.FrameWidth=hn.stat(an[ln])),an[ln]=="packetsLost"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.packetsLost=hn.stat(an[ln])),an[ln]=="googNacksReceived"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.googNacksReceived=hn.stat(an[ln])),an[ln]=="googRtt"&&hn.stat(an[ln])!==void 0&&hn.stat(an[ln])!=-1&&(this.rawStats.video_send.googRtt=hn.stat(an[ln])),an[ln]=="packetsSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.packetsSent=hn.stat(an[ln])),an[ln]=="bytesSent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.bytesSent=hn.stat(an[ln])),an[ln]=="googEncodeUsagePercent"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.googEncodeUsagePercent=hn.stat(an[ln])),an[ln]=="googCpuLimitedResolution"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.googCpuLimitedResolution=hn.stat(an[ln])),an[ln]=="googBandwidthLimitedResolution"&&hn.stat(an[ln])!==void 0&&(this.rawStats.video_send.googBandwidthLimitedResolution=hn.stat(an[ln]))}}}this.computeStats(Vt,Zt,rn),this.cpt%this.cptRes==0&&this.saveStatsLocal(),this.cpt%this.cptDb==0&&this.saveStatsToDb(!1)},this.saveStatsLocal=function(){if(this.saveStatsFlag){var Pt=Date.now();this.tabTimestamp.push(Pt),this.tabQosIn.push(this.qosIn),this.tabQosAudioIn.push(this.qosAudioIn),this.qosVideoIn!==0&&this.tabQosVideoIn.push(this.qosVideoIn),this.tabQosOut.push(this.qosOut),this.tabQosAudioOut.push(this.qosAudioOut),this.qosVideoOut!==0&&this.tabQosVideoOut.push(this.qosVideoOut),this.tabJitterBufferAudio.push(this.rawStats.audio_recv.googJitterBufferMs),this.rawStats.video_recv.googJitterBufferMs!==void 0&&this.tabJitterBufferVideo.push(this.rawStats.video_recv.googJitterBufferMs),this.rawStats.video_send.googRtt!==void 0&&this.tabVideoRtt.push(this.rawStats.video_send.googRtt),this.tabAudioRtt.push(this.rawStats.audio_send.googRtt),this.bandwidthAS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAS)/1024),this.bandwidthVS!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVS)/1024),this.bandwidthAR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthAR)/1024),this.bandwidthVR!==void 0&&this.tabVideoBW.push(8*this.Average(this.bandwidthVR)/1024)}},this.saveStatsToDb=function(Pt){},this.saveStatsToDb=function(Pt){this.saveStatsFlag=Pt},this.computeStats=function(Pt,Vt,Zt){var rn=0;this.rawStats.connectedPair.googRtt!==-1&&this.rawStats.connectedPair.googRtt!==0&&this.rawStats.connectedPair.googRtt!==void 0&&this.add(this.rawStats.connectedPair.googRtt,this.moyRttCP),this.rawStats.video_send.googRtt!==-1&&this.rawStats.video_send.googRtt!==0&&this.rawStats.video_send.googRtt!==void 0&&(this.add(this.rawStats.video_send.googRtt,this.moyRttVS),this.instantRTT=this.rawStats.video_send.googRtt),this.rawStats.audio_send.googRtt!==-1&&this.rawStats.audio_send.googRtt!==0&&this.rawStats.audio_send.googRtt!==void 0&&this.add(this.rawStats.audio_send.googRtt,this.moyRttAS),this.rawStats.audio_send.packetsLost!==-1&&this.rawStats.audio_send.packetsLost!==void 0&&this.rawStats.audio_send.packetsSent!==-1&&this.rawStats.audio_send.packetsSent!==0&&this.rawStats.audio_send.packetsSent!==void 0&&(rn=100*(this.rawStats.audio_send.packetsLost-this.oldLostAS)/(this.rawStats.audio_send.packetsSent-this.oldSentAS),this.oldLostAS=this.rawStats.audio_send.packetsLost,this.oldSentAS=this.rawStats.audio_send.packetsSent,this.add(rn,this.tauxPacketLossAS)),this.rawStats.video_send.packetsLost!==-1&&this.rawStats.video_send.packetsLost!==void 0&&this.rawStats.video_send.packetsSent!==-1&&this.rawStats.video_send.packetsSent!==0&&this.rawStats.video_send.packetsSent!==void 0&&(rn=100*(this.rawStats.video_send.packetsLost-this.oldLostVS)/(this.rawStats.video_send.packetsSent-this.oldSentVS),this.oldLostVS=this.rawStats.video_send.packetsLost,this.oldSentVS=this.rawStats.video_send.packetsSent,this.add(rn,this.tauxPacketLossVS)),this.rawStats.audio_recv.bytesReceived!==-1&&this.rawStats.audio_recv.bytesReceived!==void 0&&(this.oldBandwidthAR===void 0&&(this.oldBandwidthAR=0),this.add((this.rawStats.audio_recv.bytesReceived-this.oldBandwidthAR)/this.interval,this.bandwidthAR),this.oldBandwidthAR=this.rawStats.audio_recv.bytesReceived),this.rawStats.video_recv.bytesReceived!==-1&&this.rawStats.video_recv.bytesReceived!==void 0&&(this.oldBandwidthVR===void 0&&(this.oldBandwidthVR=0),this.add((this.rawStats.video_recv.bytesReceived-this.oldBandwidthVR)/this.interval,this.bandwidthVR),this.oldBandwidthVR=this.rawStats.video_recv.bytesReceived),this.rawStats.audio_send.bytesSent!==-1&&this.rawStats.audio_send.bytesSent!==void 0&&(this.oldBandwidthAS===void 0&&(this.oldBandwidthAS=0),this.add((this.rawStats.audio_send.bytesSent-this.oldBandwidthAS)/this.interval,this.bandwidthAS),this.oldBandwidthAS=this.rawStats.audio_send.bytesSent),this.rawStats.video_send.bytesSent!==-1&&this.rawStats.video_send.bytesSent!==void 0&&(this.oldBandwidthVS===void 0&&(this.oldBandwidthVS=0),this.add((this.rawStats.video_send.bytesSent-this.oldBandwidthVS)/this.interval,this.bandwidthVS),this.oldBandwidthVS=this.rawStats.video_send.bytesSent);var Jt=0,ln=0,mn=0,an=0,hn=0,En=0,Mn=0,Pn=0,Wn=0,Nn=0,Jn=this.getCodecs(Vt),rr=8*this.Average(this.bandwidthAS)/1024;if(rr<5?Jt=1:rr>=5&&rr<10?Jt=2:rr>=10&&(Jt=3),Jn!==null&&Jn[1]){var hr=8*this.Average(this.bandwidthVS)/1024;hr<240?an=1:hr>=240&&hr<330?an=2:hr>=330&&(an=3)}this.rawStats.audio_recv.googJitterBufferMs<60?ln=3:this.rawStats.audio_recv.googJitterBufferMs>=60&&this.rawStats.audio_recv.googJitterBufferMs<100?ln=2:this.rawStats.audio_recv.googJitterBufferMs>=100&&(ln=1),this.rawStats.audio_recv.googCurrentDelayMs<100?mn=3:this.rawStats.audio_recv.googCurrentDelayMs>=100&&this.rawStats.audio_recv.googCurrentDelayMs<200?mn=2:this.rawStats.audio_recv.googCurrentDelayMs>=200&&(mn=1),Jn!==null&&Jn[1]&&(this.rawStats.video_recv.googJitterBufferMs<100?hn=3:this.rawStats.video_recv.googJitterBufferMs>=100&&this.rawStats.video_recv.googJitterBufferMs<200?hn=2:this.rawStats.video_recv.googJitterBufferMs>=200&&(hn=1));var cr=!1,dr=!1,Cr=!1;Jn!==null&&Jn[1]?(Math.ceil((Jt+2*an+hn+ln+mn)/6)!=this.qosIn&&(cr=!0),this.qosIn=Math.ceil((Jt+2*an+hn+ln+mn)/6),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((Jt+ln+mn)/3)!=this.qosAudioIn&&(dr=!0),this.qosAudioIn=Math.ceil((Jt+ln+mn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++,Math.ceil((2*an+hn)/3)!=this.qosVideoIn&&(Cr=!0),this.qosVideoIn=Math.ceil((2*an+hn)/3),this.qosVideoInAverage=(this.qosVideoInAverage*this.qosVideoInAverageCount+this.qosVideoIn)/(this.qosVideoInAverageCount+1),this.qosVideoInAverageCount++):(Math.ceil((Jt+ln+mn)/3)!=this.qosOut&&(cr=!0),this.qosIn=Math.ceil((Jt+ln+mn)/3),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((Jt+ln+mn)/3)!=this.qosAudioIn&&(dr=!0),this.qosAudioIn=Math.ceil((Jt+ln+mn)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++),this.RttAverage(this.moyRttAS)<80?Mn=3:this.RttAverage(this.moyRttAS)>=80&&this.RttAverage(this.moyRttAS)<150?Mn=2:this.RttAverage(this.moyRttAS)>=150&&(Mn=1),this.tauxPacketLossAS<=5?En=3:this.tauxPacketLossAS>5&&this.tauxPacketLossAS<10?En=2:this.tauxPacketLossAS>=10&&(En=1),this.rawStats.audio_recv.googJitterReceived<80?Pn=3:this.rawStats.audio_recv.googJitterReceived>=80&&this.rawStats.audio_recv.googJitterReceived<150?Pn=2:this.rawStats.audio_recv.googJitterReceived>=150&&(Pn=1),Jn!==null&&Jn[1]&&(this.tauxPacketLossVS<=5?Wn=3:this.tauxPacketLossVS>5&&this.tauxPacketLossVS<10?Wn=2:this.tauxPacketLossVS>=10&&(Wn=1),this.RttAverage(this.moyRttVS)<80?Nn=3:this.RttAverage(this.moyRttVS)>=80&&this.RttAverage(this.moyRttVS)<150?Nn=2:this.RttAverage(this.moyRttVS)>=150&&(Nn=1)),Jn!==null&&Jn[1]?(Math.ceil((Mn+2*En+Pn+2*Wn+Nn)/7)!=this.qosOut&&(cr=!0),this.qosOut=Math.ceil((Mn+2*En+Pn+2*Wn+Nn)/7),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Mn+2*En+Pn)/4)!=this.qosAudioOut&&(dr=!0),this.qosAudioOut=Math.ceil((Mn+2*En+Pn)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++,Math.ceil((2*Wn+Nn)/3)!=this.qosVideoOut&&(Cr=!0),this.qosVideoOut=Math.ceil((2*Wn+Nn)/3),this.qosVideoOutAverage=(this.qosVideoOutAverage*this.qosVideoOutAverageCount+this.qosVideoOut)/(this.qosVideoOutAverageCount+1),this.qosVideoOutAverageCount++):(Math.ceil((Mn+2*En+Pn)/4)!=this.qosOut&&(cr=!0),this.qosOut=Math.ceil((Mn+2*En+Pn)/4),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((Mn+2*En+Pn)/4)!=this.qosAudioOut&&(dr=!0),this.qosAudioOut=Math.ceil((Mn+2*En+Pn)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++),cr&&this.onQosChange(this.qosIn,this.qosOut),dr&&this.onQosAudioChange(this.qosAudioIn,this.qosAudioOut),Cr&&this.onQosVideoChange(this.qosVideoIn,this.qosVideoOut)},this.getCodecs=function(Pt){var Vt=!1,Zt=!1,rn=null,Jt=null;if(Pt!=null&&Pt.sdp!==void 0){for(var ln=Pt.sdp.split(`
`),mn=0;mn<ln.length;mn++)ln[mn].indexOf("a=mid:audio")!=-1&&(Vt=!0),ln[mn].indexOf("a=mid:video")!=-1&&(Zt=!0),Vt&&ln[mn].indexOf("a=rtpmap:")!=-1&&(rn=ln[mn],Vt=!1),Zt&&ln[mn].indexOf("a=rtpmap:")!=-1&&(Jt=ln[mn],Zt=!1);return[rn,Jt]}return null},this.getQosScore=function(){return[this.qosIn,this.qosOut,this.qosAudioIn,this.qosAudioOut,this.qosVideoIn,this.qosVideoOut]},this.getStat=function(Pt){switch(Pt){case"AudioOutBandwidth":return 8*this.Average(this.bandwidthAS)/1024;case"VideoOutBandwidth":return 8*this.Average(this.bandwidthVS)/1024;case"AudioInBandwidth":return 8*this.Average(this.bandwidthAR)/1024;case"VideoInBandwidth":return 8*this.Average(this.bandwidthVR)/1024;case"AudioInJitterReceived":return this.rawStats.audio_recv.googJitterReceived;case"AudioInJitterBufferMs":return this.rawStats.audio_recv.googJitterBufferMs;case"AudioInDelay":return this.rawStats.audio_recv.googCurrentDelayMs;case"AudioOutLossRate":return this.tauxPacketLossAS;case"AudioOutRtt":return this.RttAverage(this.moyRttAS);case"AudioOutJitterReceived":return this.rawStats.audio_send.googJitterReceived;case"VideoInJitterBufferMs":return this.rawStats.video_recv.googJitterBufferMs;case"VideoOutLossRate":return this.tauxPacketLossVS;case"VideoOutRtt":return this.RttAverage(this.moyRttVS)}},this.getAllStats=function(){for(var Pt={AudioRecv:{},AudioSend:{},VideoRecv:{},VideoSend:{}},Vt={AudioRecv:"audio_recv",VideoRecv:"video_recv",AudioSend:"audio_send",VideoSend:"video_send"},Zt=Object.keys(Vt),rn=0;rn<Zt.length;rn++)for(var Jt=Object.keys(this.rawStats[Vt[Zt[rn]]]),ln=0;ln<Jt.length;ln++)Pt[Zt[rn]][Jt[ln]]=this.rawStats[Vt[Zt[rn]]][Jt[ln]];return Pt.AudioRecv.bandwidth=8*this.Average(this.bandwidthAR)/1024,Pt.VideoRecv.bandwidth=8*this.Average(this.bandwidthVR)/1024,Pt.AudioSend.bandwidth=8*this.Average(this.bandwidthAS)/1024,Pt.VideoSend.bandwidth=8*this.Average(this.bandwidthVS)/1024,Pt.AudioRecv.jitterReceived=this.rawStats.audio_recv.googJitterReceived,Pt.AudioRecv.jitterBufferMs=this.rawStats.audio_recv.googJitterBufferMs,Pt.VideoRecv.jitterBufferMs=this.rawStats.video_recv.googJitterBufferMs,Pt.AudioRecv.delay=this.rawStats.audio_recv.googCurrentDelayMs,Pt.AudioSend.rtt=this.RttAverage(this.moyRttAS),Pt.VideoSend.moyRtt=this.RttAverage(this.moyRttVS),Pt.VideoSend.rtt=this.instantRTT,Pt.VideoSend.FrameHeight=this.rawStats.video_send.FrameHeight,Pt.VideoSend.FrameWidth=this.rawStats.video_send.FrameWidth,Pt.AudioSend.packetLostRatio=this.tauxPacketLossAS[this.tauxPacketLossAS.length-1],Pt.VideoSend.packetLostRatio=this.tauxPacketLossVS[this.tauxPacketLossVS.length-1],Pt.VideoSend.googEncodeUsagePercent=this.rawStats.video_send.googEncodeUsagePercent,Pt.VideoSend.googCpuLimitedResolution=this.rawStats.video_send.googCpuLimitedResolution,Pt.VideoSend.googBandwidthLimitedResolution=this.rawStats.video_send.googBandwidthLimitedResolution,delete Pt.AudioRecv.googCurrentDelayMs,delete Pt.AudioRecv.googJitterReceived,delete Pt.AudioRecv.googJitterBufferMs,delete Pt.VideoRecv.googJitterBufferMs,delete Pt.AudioSend.googRtt,delete Pt.VideoSend.googRtt,Pt},this.displayComputedStats=function(){console.log("Audio IN JitterReceived:"+this.rawStats.audio_recv.googJitterReceived+" jitterbufferMs:"+this.rawStats.audio_recv.googJitterBufferMs+" delay:"+this.rawStats.audio_recv.googCurrentDelayMs+" bandwidth :"+8*this.Average(this.bandwidthAS)/1024+" kBits/s"),console.log("Audio OUT  lossRate:"+this.tauxPacketLossAS+" rtt:"+this.RttAverage(this.moyRttAS)+" googJitterReceived:"+this.rawStats.audio_recv.googJitterReceived),console.log("Video IN jitter buffer ms:"+this.rawStats.video_recv.googJitterBufferMs+" bandwidth:"+8*this.Average(this.bandwidthVS)/1024+" kBits/s"),console.log("Video OUT loss rate:"+this.tauxPacketLossVS+" rtt:"+this.RttAverage(this.moyRttVS))},this.RttAverage=function(Pt){for(var Vt=0,Zt=0,rn=0;rn<Pt.length;++rn)Pt[rn]!==0&&Pt[rn]!==-1&&Pt[rn]!==void 0&&(Vt+=parseInt(Pt[rn],10),Zt++);return parseInt(Vt/Zt,10)},this.Average=function(Pt){for(var Vt=0,Zt=0,rn=0;rn<Pt.length;++rn)Pt[rn]!=-1&&Pt[rn]!==void 0&&(Vt+=parseInt(Pt[rn],10),Zt++);return parseInt(Vt/Zt,10)},this.add=function(Pt,Vt){Vt.pop(),Vt.unshift(Pt)},this.displayTab=function(Pt){for(var Vt in Pt)console.log(Vt+" = "+Pt[Vt])}}),wt=et.Y.get("DataChannelFileSender"),Mt=apiCC.myWebRTC_Event,Ht=1<<17,Ot=function(Yt){this.call=Yt,this.sendChunkNb=0,this.send=function(kt,st,Tt){var Rt=12e3,Lt={},Et=null,jt={},Pt=!1,Vt={};if(wt.info("DataChannelFileSender send"),wt.log("data.name :"+kt.name),kt.file instanceof Blob?(wt.log("Blob"),this.blob=kt.file,this.contentType=kt.file.type,this.size=kt.file.size,this.originalDataType="Blob"):kt.file instanceof ArrayBuffer?(wt.log("ArrayBuffer"),this.blob=kt.file,this.contentType="application/octet-stream",this.size=kt.file.byteLength,this.originalDataType="ArrayBuffer"):kt.file instanceof String||typeof kt.file=="string"?(wt.log("string"),this.blob=kt.file,this.size=kt.file.length,this.contentType="application/octet-stream",this.originalDataType="String"):(wt.log("unknown type"),this.blob=kt.file,this.contentType="application/octet-stream",this.size=kt.file.length||kt.file.byteLength||kt.file.size,this.originalDataType="Unknown"),this.contentType||(this.contentType="application/octet-stream"),this.size===0)return wt.log("sending done"),Tt!==void 0&&(wt.log("onProgress"),this.transferDuration=new Date-this.startingDate,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,lastPacket:Pt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0})),Mt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,lastPacket:Pt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0}),void Mt.createEvent({eventType:"onFileSended",callId:Yt.callId,remoteId:Yt.remoteId,name:kt.name,uuid:kt.uuid});if(st)if(st.readyState==="open"){if(this.sendChunkNb===0&&wt.log("first packet"),this.sendChunkNb===0){kt.uuid=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-"),jt={name:kt.name,type:kt.type,size:this.size,contentType:this.contentType,uuid:kt.uuid},wt.log("first packet",jt),this.fileSize=this.size,Tt!==void 0&&(wt.log("onProgress"),this.startingDate=new Date,this.transferDuration=0,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,lastPacket:Pt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),Mt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,lastPacket:Pt,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{st.send(JSON.stringify(jt))}catch(Zt){wt.warn("error detected when sending on datachannel :",st),wt.warn("error is :",Zt)}Mt.createEvent({eventType:"onFileSending",callId:Yt.callId,remoteId:Yt.remoteId,name:kt.name,uuid:kt.uuid})}else{Rt<this.size?(wt.log("sending chunk"),Lt=this.blob.slice(0,Rt)):(wt.log("sending last chunk"),Lt=this.blob.slice(0),Pt=!0),wt.log("dataToSend.byteLength ="+Lt.byteLength),this.originalDataType==="ArrayBuffer"?Vt.message=at.cw.encode(Lt):Vt.message=Lt,Vt.messageSize=Lt.byteLength,Vt.uuid=kt.uuid,Vt.originalDataType=this.originalDataType,Tt!==void 0&&(wt.log("onProgress"),this.transferDuration=new Date-this.startingDate,Tt({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,startingDate:this.startingDate,lastPacket:Pt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),Mt.createEvent({eventType:"onFileProgress",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:Yt.callId,uuid:kt.uuid,remoteId:Yt.remoteId,startingDate:this.startingDate,lastPacket:Pt,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{st.send(JSON.stringify(Vt))}catch(Zt){wt.warn("error detected when sending on datachannel :",st),wt.warn("error is :",Zt)}}Et=this.sendChunkNb===0?this.blob:this.blob.slice(Rt),Pt===!1?this.sendChunkNb++:this.sendChunkNb=0,kt.file=Et,setTimeout((function(){this.send(kt,st,Tt)}).bind(this))}else wt.log("Trying to send on a closed channel");else wt.log("No data channel to send data")},this.terminateTransfer=function(){var kt=this;wt.debug("terminateTransfer; terminated: "+this.terminated),this.channel!==null?this.useBufferedAmount===!0&&this.channel.bufferedAmount>0&&this.canceled!==!0?setTimeout(this.terminateTransfer.bind(this)):this.terminated!==!0&&(this.terminated=!0,this.recvDataEndAckTimeoutId&&(clearTimeout(this.recvDataEndAckTimeoutId),delete this.recvDataEndAckTimeoutId),delete this.call.dcfs,wt.debug("terminateTransfer; terminating"),this.call.pipelineCallId?(this.call.pipelineCall&&(delete this.call.pipelineCall.clientCall,delete this.call.pipelineCall,this.call.sendDataChannel=null),this.channel=null):setTimeout(function(){kt.channel.close(),kt.channel=null}),setTimeout(function(){if(kt.canceled===!0)Mt.createEvent({eventType:"onFileSended",callId:kt.call.callId,remoteId:kt.call.remoteId,name:kt.call.data.filename,error:"canceled"}),kt.call.callbacks.failure("canceled");else if(kt.call.failure)Mt.createEvent({eventType:"onFileSended",callId:kt.call.callId,remoteId:kt.call.remoteId,name:kt.call.data.filename,error:kt.call.failure}),kt.call.callbacks.failure(kt.call.failure);else{var st={eventType:"onFileSended",callId:kt.call.callId,remoteId:kt.call.remoteId,name:kt.call.data.filename};kt.call.success.data&&(st.data=kt.call.success.data),Mt.createEvent(st),kt.call.callbacks.success(kt.call.success)}apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(kt.call.callId)})):wt.warn("No data channel to send data, leaving terminateTransfer")},this.recvDataEndAckTimeout=function(){wt.error("recvDataEndAckTimeout"),this.call.failure="ackNotReceived",setTimeout(this.terminateTransfer.bind(this))},this.subsequentTransfer=function(){var kt,st=!1;if(wt.debug("subsequentTransfer; remByteCount: "+this.remByteCount),this.canceled!==!0)if(this.channel!==null)if(this.useBufferedAmount===!0&&this.channel.bufferedAmount>Ht)setTimeout(this.subsequentTransfer.bind(this));else try{for(;;){if(!(this.remByteCount>=this.chunkLength)){kt=this.data.slice(this.offset,this.offset+this.remByteCount),this.channel.send(kt),this.packetsSent+=1,wt.debug("packetSent "+this.packetsSent+" "+this.remByteCount),this.offset+=this.remByteCount,this.remByteCount-=this.remByteCount,st=!0;break}if(kt=this.data.slice(this.offset,this.offset+this.chunkLength),this.channel.send(kt),this.packetsSent+=1,wt.debug("packetSent "+this.packetsSent+" "+this.chunkLength),this.offset+=this.chunkLength,this.remByteCount-=this.chunkLength,this.remByteCount<=0){st=!0;break}if(this.useBufferedAmount!==!0||this.channel.bufferedAmount>Ht)break}st===!0?(Mt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:100}),this.call.callbacks.progress({state:"complete",filename:this.call.data.filename,size:this.call.data.size,remBytes:0,progress:100}),this.call.success={state:"complete",filename:this.call.data.filename,size:this.call.data.size,mediaURL:this.call.mediaURL,mediaId:this.call.mediaId},this.recvDataEndAckTimeoutId=setTimeout(this.recvDataEndAckTimeout.bind(this),3e4)):(Mt.createEvent({eventType:"onFileProgress",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:Math.floor(100*this.offset/this.call.data.size)}),this.call.callbacks.progress({state:"incomplete",filename:this.call.data.filename,size:this.call.data.size,remBytes:this.remByteCount,progress:Math.floor(100*this.offset/this.call.data.size)}),setTimeout(this.subsequentTransfer.bind(this)))}catch(Tt){return wt.error("transfer: "+Tt),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}else wt.warn("No data channel to send data, leaving subsequentTransfer");else setTimeout(this.terminateTransfer.bind(this))},this.transfer=function(kt,st,Tt){var Rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Lt=Rt.hasOwnProperty("delay")?Rt.delay:100;if(wt.info("transfer",st,Lt),this.call.beginTimeoutId&&(clearTimeout(this.call.beginTimeoutId),delete this.call.beginTimeoutId),this.data=kt,this.channel=Tt,this.channel!==null){typeof this.channel.bufferedAmount=="number"&&this.channel.bufferedAmount>=0&&(wt.debug("browserDetails",at.wL),at.wL.type==="chrome"?at.wL.version>=37&&(this.useBufferedAmount=!0,wt.debug("useBufferedAmount enabled")):(this.useBufferedAmount=!0,wt.debug("useBufferedAmount enabled"))),this.chunkLength=8192,st>0?(this.offset=Math.floor(st/this.chunkLength)*this.chunkLength,this.remByteCount=this.data.byteLength-this.offset):(this.offset=0,this.remByteCount=this.data.byteLength),this.packetsSent=0;try{var Et={chunkLength:this.chunkLength,offset:this.offset,remBytes:this.remByteCount};this.call.pipelineCallId&&(Et.pluginName=Yt.data.pluginName,Et.pluginData=Yt.data.pluginData,Yt.data.context&&(Et.context=Yt.data.context)),this.channel.send(JSON.stringify(Et))}catch(jt){return wt.error("transfer:",jt),this.call.failure="dataChannelFailed",void setTimeout(this.terminateTransfer.bind(this))}Mt.createEvent({eventType:"onFileSending",callId:this.call.callId,remoteId:this.call.remoteId,name:this.call.data.filename}),setTimeout(this.subsequentTransfer.bind(this),Lt)}else wt.warn("No data channel to send data, leaving transfer")}},Dt=(et.Y.get("CallStatsMonitor"),function(Yt,kt,st,Tt){this.interval=Yt,this.browserType=kt,this.browserVersion=st,this.flavor=Tt,this.prevData={},this.prevDataThreshold=10/Yt,this.prevDataThreshold<2&&(this.prevDataThreshold=2),this.STANDARD_STAT_KEYS={audioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},audioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1}},this.refineStats_chrome_proprietary=function(Rt,Lt){var Et,jt;for(Et=0;Et<Lt.length;Et+=1){var Pt=Lt[Et],Vt=null,Zt=null;if(Pt.type==="ssrc"){if(Pt.id.indexOf("recv")>=0){if(Pt.stat("mediaType")==="audio")for(Rt.audioReceived={timestamp:Math.floor(Date.parse(Pt.timestamp))/1e3,type:"inbound-rtp",isRemote:!1,mediaType:"audio",packetsReceived:0,bytesReceived:0},Vt=Pt.names(),jt=0;jt<Vt.length;jt+=1)(Zt=Vt[jt])==="packetsReceived"?Rt.audioReceived.packetsReceived=parseInt(Pt.stat("packetsReceived"),10):Zt==="bytesReceived"&&(Rt.audioReceived.bytesReceived=parseInt(Pt.stat("bytesReceived"),10));else if(Pt.stat("mediaType")==="video")for(Rt.videoReceived={timestamp:Math.floor(Date.parse(Pt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesDecoded:0,packetsReceived:0,bytesReceived:0},Vt=Pt.names(),jt=0;jt<Vt.length;jt+=1)(Zt=Vt[jt])==="framesDecoded"?Rt.videoReceived.framesDecoded=parseInt(Pt.stat("framesDecoded"),10):Zt==="packetsReceived"?Rt.videoReceived.packetsReceived=parseInt(Pt.stat("packetsReceived"),10):Zt==="bytesReceived"&&(Rt.videoReceived.bytesReceived=parseInt(Pt.stat("bytesReceived"),10))}else if(Pt.id.indexOf("send")>=0){if(Pt.stat("mediaType")==="audio")for(Rt.audioSent={timestamp:Math.floor(Date.parse(Pt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"audio",packetsSent:0,bytesSent:0},Vt=Pt.names(),jt=0;jt<Vt.length;jt+=1)(Zt=Vt[jt])==="packetsSent"?Rt.audioSent.packetsSent=parseInt(Pt.stat("packetsSent"),10):Zt==="bytesSent"&&(Rt.audioSent.bytesSent=parseInt(Pt.stat("bytesSent"),10));else if(Pt.stat("mediaType")==="video")for(Rt.videoSent={timestamp:Math.floor(Date.parse(Pt.timestamp))/1e3,type:"outbound-rtp",isRemote:!1,mediaType:"video",framesEncoded:0,packetsSent:0,bytesSent:0},Vt=Pt.names(),jt=0;jt<Vt.length;jt+=1)(Zt=Vt[jt])==="framesEncoded"?Rt.videoSent.framesEncoded=parseInt(Pt.stat("framesEncoded"),10):Zt==="packetsSent"?Rt.videoSent.packetsSent=parseInt(Pt.stat("packetsSent"),10):Zt==="bytesSent"&&(Rt.videoSent.bytesSent=parseInt(Pt.stat("bytesSent"),10))}}}return!1},this.refineStats_chrome_legacy=function(Rt,Lt){var Et=!1;return Lt.forEach(function(jt){var Pt=null,Vt=null;if(jt.type==="ssrc"&&jt.id.indexOf("recv")>=0){if(jt.mediaType==="audio"){for(Vt in Rt.audioReceived={},Pt=Math.floor(Date.parse(jt.timestamp)/1e3),jt)Vt==="timestamp"?Rt.audioReceived.timestamp=Pt:Rt.audioReceived[Vt]=jt[Vt];Et=!0}else if(jt.mediaType==="video"){for(Vt in Rt.videoReceived={},Pt=Math.floor(Date.parse(jt.timestamp)/1e3),jt)Vt==="timestamp"?Rt.videoReceived.timestamp=Pt:Rt.videoReceived[Vt]=jt[Vt];Et=!0}}else if(jt.type==="ssrc"&&jt.id.indexOf("send")>=0){if(jt.mediaType==="audio"){for(Vt in Rt.audioSent={},Pt=Math.floor(Date.parse(jt.timestamp)/1e3),jt)Vt==="timestamp"?Rt.audioSent.timestamp=Pt:Rt.audioSent[Vt]=jt[Vt];Et=!0}else if(jt.mediaType==="video"){for(Vt in Rt.videoSent={},Pt=Math.floor(Date.parse(jt.timestamp)/1e3),jt)Vt==="timestamp"?Rt.videoSent.timestamp=Pt:Rt.videoSent[Vt]=jt[Vt];Et=!0}}}),Et},this.refineStats_chrome_58=function(Rt,Lt){var Et=this,jt=!1;return Lt.forEach(function(Pt){if(Pt.type!=="inbound-rtp"||Pt.isRemote){if(Pt.type==="outbound-rtp"&&!Pt.isRemote){if(Pt.mediaType==="audio"){Rt.audioSent={};var Vt=Math.floor(Pt.timestamp/1e3);for(var Zt in Pt)Et.STANDARD_STAT_KEYS.audioSent[Zt]!==!1&&(Zt==="timestamp"?Rt.audioSent.timestamp=Vt:Rt.audioSent[Zt]=Pt[Zt]);jt=!0}else if(Pt.mediaType==="video"){Rt.videoSent={};var rn=Math.floor(Pt.timestamp/1e3);for(var Jt in Pt)Et.STANDARD_STAT_KEYS.videoSent[Jt]!==!1&&(Jt==="timestamp"?Rt.videoSent.timestamp=rn:Rt.videoSent[Jt]=Pt[Jt]);jt=!0}}}else if(Pt.mediaType==="audio"||Pt.id.indexOf("Audio")>=0){Rt.audioReceived={};var ln=Math.floor(Pt.timestamp/1e3);for(var mn in Pt)Et.STANDARD_STAT_KEYS.audioReceived[mn]!==!1&&(mn==="timestamp"?Rt.audioReceived.timestamp=ln:Rt.audioReceived[mn]=Pt[mn]);jt=!0}else if(Pt.mediaType==="video"||Pt.id.indexOf("Video")>=0){Rt.videoReceived={};var an=Math.floor(Pt.timestamp/1e3);for(var hn in Pt)Et.STANDARD_STAT_KEYS.videoReceived[hn]!==!1&&(hn==="timestamp"?Rt.videoReceived.timestamp=an:Rt.videoReceived[hn]=Pt[hn]);jt=!0}}),jt},this.refineStats_firefox_legacy=function(Rt,Lt){var Et=!1,jt=this;return Lt.forEach(function(Pt){var Vt=null,Zt=null;if(Pt.type==="inbound-rtp"&&Pt.isRemote===!1){if(Pt.mediaType==="audio"){for(Vt in Rt.audioReceived={packetsReceived:0,bytesReceived:0},Zt=Math.floor(Pt.timestamp/1e3),Pt)jt.STANDARD_STAT_KEYS.audioReceived[Vt]!==!1&&(Vt==="timestamp"?Rt.audioReceived.timestamp=Zt:Rt.audioReceived[Vt]=Pt[Vt]);Et=!0}else if(Pt.mediaType==="video"){for(Vt in Rt.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0},Zt=Math.floor(Pt.timestamp/1e3),Pt)jt.STANDARD_STAT_KEYS.videoReceived[Vt]!==!1&&(Vt==="timestamp"?Rt.videoReceived.timestamp=Zt:Rt.videoReceived[Vt]=Pt[Vt]);Et=!0}}else if(Pt.type==="outbound-rtp"&&Pt.isRemote===!1){if(Pt.mediaType==="audio"){for(Vt in Rt.audioSent={packetsSent:0,bytesSent:0},Zt=Math.floor(Pt.timestamp/1e3),Pt)jt.STANDARD_STAT_KEYS.audioSent[Vt]!==!1&&(Vt==="timestamp"?Rt.audioSent.timestamp=Zt:Rt.audioSent[Vt]=Pt[Vt]);Et=!0}else if(Pt.mediaType==="video"){for(Vt in Rt.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0},Zt=Math.floor(Pt.timestamp/1e3),Pt)jt.STANDARD_STAT_KEYS.videoSent[Vt]!==!1&&(Vt==="timestamp"?Rt.videoSent.timestamp=Zt:Rt.videoSent[Vt]=Pt[Vt]);Et=!0}}}),Et},this.refineStats_firefox_63=function(Rt,Lt){var Et=!1,jt=this;return Lt.forEach(function(Pt){if(Pt.type!=="inbound-rtp"||Pt.isRemote){if(Pt.type==="outbound-rtp"&&!Pt.isRemote){if(Pt.kind==="audio"){Rt.audioSent={packetsSent:0,bytesSent:0};var Vt=Math.floor(Pt.timestamp/1e3);for(var Zt in Pt)jt.STANDARD_STAT_KEYS.audioSent[Zt]!==!1&&(Zt==="timestamp"?Rt.audioSent.timestamp=Vt:Rt.audioSent[Zt]=Pt[Zt]);Et=!0}else if(Pt.kind==="video"){Rt.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0};var rn=Math.floor(Pt.timestamp/1e3);for(var Jt in Pt)jt.STANDARD_STAT_KEYS.videoSent[Jt]!==!1&&(Jt==="timestamp"?Rt.videoSent.timestamp=rn:Rt.videoSent[Jt]=Pt[Jt]);Et=!0}}}else if(Pt.kind==="audio"){Rt.audioReceived={packetsReceived:0,bytesReceived:0};var ln=Math.floor(Pt.timestamp/1e3);for(var mn in Pt)jt.STANDARD_STAT_KEYS.audioReceived[mn]!==!1&&(mn==="timestamp"?Rt.audioReceived.timestamp=ln:Rt.audioReceived[mn]=Pt[mn]);Et=!0}else if(Pt.kind==="video"){Rt.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0};var an=Math.floor(Pt.timestamp/1e3);for(var hn in Pt)jt.STANDARD_STAT_KEYS.videoReceived[hn]!==!1&&(hn==="timestamp"?Rt.videoReceived.timestamp=an:Rt.videoReceived[hn]=Pt[hn]);Et=!0}}),Et},this.addCallStats=function(Rt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et={};if(this.refineStats!==void 0){if(this.refineStats(Et,Rt),Et.audioReceived!==void 0){if(this.prevData.audioReceived!==void 0){var jt=Et.audioReceived.timestamp-this.prevData.audioReceived[0].timestamp;jt>0?(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=Math.floor((Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)/jt)),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=Math.floor(8*(Et.audioReceived.bytesReceived-this.prevData.audioReceived[0].bytesReceived)/jt)),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=Math.floor((Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/jt)),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=100*(Et.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/(Et.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)),Et.audioReceived.samplingInterval=jt):(Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0)}else Et.audioReceived.packetsReceivedPerSecond===void 0&&(Et.audioReceived.packetsReceivedPerSecond=0),Et.audioReceived.bitsReceivedPerSecond===void 0&&(Et.audioReceived.bitsReceivedPerSecond=0),Et.audioReceived.packetsLostPerSecond===void 0&&(Et.audioReceived.packetsLostPerSecond=0),Et.audioReceived.packetLossRatio===void 0&&(Et.audioReceived.packetLossRatio=0),Et.audioReceived.samplingInterval=0,this.prevData.audioReceived=[];for(this.prevData.audioReceived.push(Et.audioReceived);this.prevData.audioReceived.length>this.prevDataThreshold;)this.prevData.audioReceived.shift()}if(Et.videoReceived!==void 0){if(this.prevData.videoReceived!==void 0){var Pt=Et.videoReceived.timestamp-this.prevData.videoReceived[0].timestamp;Pt>0?(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=Math.floor((Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)/Pt)),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=Math.floor(8*(Et.videoReceived.bytesReceived-this.prevData.videoReceived[0].bytesReceived)/Pt)),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=Math.floor((Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/Pt)),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=Math.floor((Et.videoReceived.framesDecoded-this.prevData.videoReceived[0].framesDecoded)/Pt)),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=100*(Et.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/(Et.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)),Et.videoReceived.samplingInterval=Pt):(Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0)}else Et.videoReceived.packetsReceivedPerSecond===void 0&&(Et.videoReceived.packetsReceivedPerSecond=0),Et.videoReceived.bitsReceivedPerSecond===void 0&&(Et.videoReceived.bitsReceivedPerSecond=0),Et.videoReceived.packetsLostPerSecond===void 0&&(Et.videoReceived.packetsLostPerSecond=0),Et.videoReceived.framesDecodedPerSecond===void 0&&(Et.videoReceived.framesDecodedPerSecond=0),Et.videoReceived.packetLossRatio===void 0&&(Et.videoReceived.packetLossRatio=0),Et.videoReceived.samplingInterval=0,this.prevData.videoReceived=[];for(this.prevData.videoReceived.push(Et.videoReceived);this.prevData.videoReceived.length>this.prevDataThreshold;)this.prevData.videoReceived.shift()}if(Et.audioSent!==void 0){if(this.prevData.audioSent!==void 0){var Vt=Et.audioSent.timestamp-this.prevData.audioSent[0].timestamp;Vt>0?(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=Math.floor((Et.audioSent.packetsSent-this.prevData.audioSent[0].packetsSent)/Vt)),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=Math.floor(8*(Et.audioSent.bytesSent-this.prevData.audioSent[0].bytesSent)/Vt)),Et.audioSent.samplingInterval=Vt):(Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0)}else Et.audioSent.packetsSentPerSecond===void 0&&(Et.audioSent.packetsSentPerSecond=0),Et.audioSent.bitsSentPerSecond===void 0&&(Et.audioSent.bitsSentPerSecond=0),Et.audioSent.samplingInterval=0,this.prevData.audioSent=[];for(this.prevData.audioSent.push(Et.audioSent);this.prevData.audioSent.length>this.prevDataThreshold;)this.prevData.audioSent.shift()}if(Et.videoSent!==void 0){if(this.prevData.videoSent!==void 0){var Zt=Et.videoSent.timestamp-this.prevData.videoSent[0].timestamp;Zt>0?(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=Math.floor((Et.videoSent.packetsSent-this.prevData.videoSent[0].packetsSent)/Zt)),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=Math.floor(8*(Et.videoSent.bytesSent-this.prevData.videoSent[0].bytesSent)/Zt)),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=Math.floor((Et.videoSent.framesEncoded-this.prevData.videoSent[0].framesEncoded)/Zt)),Et.videoSent.samplingInterval=Zt):(Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0)}else Et.videoSent.packetsSentPerSecond===void 0&&(Et.videoSent.packetsSentPerSecond=0),Et.videoSent.bitsSentPerSecond===void 0&&(Et.videoSent.bitsSentPerSecond=0),Et.videoSent.framesEncodedPerSecond===void 0&&(Et.videoSent.framesEncodedPerSecond=0),Et.videoSent.samplingInterval=0,this.prevData.videoSent=[];for(this.prevData.videoSent.push(Et.videoSent);this.prevData.videoSent.length>this.prevDataThreshold;)this.prevData.videoSent.shift()}}return Object.keys(Et).length>0&&typeof Lt.post=="function"&&Lt.post(Et),Et},this.browserType==="chrome"?Tt==="proprietary"?this.refineStats=this.refineStats_chrome_proprietary:this.browserVersion>=58?this.refineStats=this.refineStats_chrome_58:this.refineStats=this.refineStats_chrome_legacy:this.browserType==="firefox"?this.browserVersion>=63?this.refineStats=this.refineStats_firefox_63:this.refineStats=this.refineStats_firefox_legacy:this.browserType==="safari"&&(this.refineStats=this.refineStats_chrome_58)}),Gt=(s(658),function(){this.NarrowBandSpeechQuality=function(Yt,kt){var st,Tt,Rt=1,Lt=1+Yt/10,Et=1+Yt/150,jt=(94.769-(st=80+2.5*(65-40*Math.log10(Lt/Et)+6*Math.exp(Yt*Yt*-.3)-14)))*(94.769-st)/4+100;return(Tt=93.193-((94.769-st)/2+Math.sqrt(jt)-1)*(1-Math.exp(-Yt))-(0+kt/(kt+4.3)*95))<0&&(Rt=1),Tt<100&Tt>0&&(Rt=1+.035*Tt+Tt*(Tt-60)*(100-Tt)*7*1e-6),Tt>100&&(Rt=4.5),Rt},this.WideBandspeechQuality=function(Yt,kt){var st,Tt,Rt,Lt=0,Et=1;Yt<100&&(Lt=.08-Yt+10),Yt>=100&&(Lt=18);var jt=1+Yt/10,Pt=1+Yt/150,Vt=(129-(st=80+3*(65+Lt-40*Math.log10(jt/Pt)+6*Math.exp(Yt*Yt*-.3)-14)))*(129-st)/4+100;return(Rt=(Tt=129-((129-st)/2+Math.sqrt(Vt)-1)*(1-Math.exp(-Yt))-(0+kt/(kt+4.3)*95))/1.29)<=0&&(Et=1),Rt<100&Rt>0&&(Et=1+.035*Tt+Tt*(Tt-60)*(100-Tt)*7*1e-6),Rt>=100&&(Et=4.5),Et},this.videoQuality=function(Yt,kt,st,Tt,Rt){var Lt,Et,jt,Pt,Vt,Zt,rn,Jt,ln;return ln=kt>720?[0,2.77,.009,3.95,460,1.28,2.12,32e-5,1.28,262,1.98,22.84,7.999]:kt>576?[0,6.31,.008,3.68,262,1.28,1.97,33e-5,1.24,343,2.76,6.25,6.013]:kt>480?[0,6.96,.007,3.58,214,1.2,1.75,63e-5,1.13,171,4.25,7.98,12.001]:kt>288?[0,5.61,.01,3.38,182,1.31,2.23,75e-5,1.51,136,4.05,20.16,22.332]:[0,3.988,.013,3.625,89.25,1.125,.713,0,1.542,245.5,3.011,39.31,16.67],Zt=1+Math.pow(Tt/ln[4],ln[5]),Lt=ln[3]-ln[3]/Zt,Et=ln[1]+ln[2]*Tt,jt=ln[6]+ln[7]*Tt,rn=Math.pow(Math.log(Rt)-Math.log(Et),2),Jt=2*Math.pow(jt,2),Pt=Lt*Math.exp(-rn/Jt),Vt=ln[10]+ln[11]*Math.exp(-Rt/ln[8])+ln[12]*Math.exp(-Tt/ln[9]),1+Pt*Math.exp(-st/Vt)},this.audiovisualQuality=function(Yt,kt,st,Tt){var Rt,Lt,Et,jt,Pt;return Yt>0&&kt>0?(Rt=(Pt=[0,-.6966,-.8127,.4562,3.003,-.1638,.3626,.1291,.5457,-1251e-7,3.763,-.001065,.01465,-.001002,0])[9]*(st+Tt)+Pt[10],st>=Tt&&(Lt=Math.min(Pt[11]*(st-Tt)+Pt[12],0)),st<Tt&&(Lt=Math.min(Pt[13]*(Tt-st)+Pt[14],0)),Et=Math.max(Rt+Lt,1),Pt[1]*(jt=Pt[5]*Yt+Pt[6]*kt+Pt[7]*Yt*kt+Pt[8])+Pt[2]*Et+Pt[3]*jt*Et+Pt[4]):"NoAudiovisualStream"}});function nn(Yt,kt){var st=typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(!st){if(Array.isArray(Yt)||(st=function(Pt,Vt){if(Pt){if(typeof Pt=="string")return zt(Pt,Vt);var Zt=Object.prototype.toString.call(Pt).slice(8,-1);return Zt==="Object"&&Pt.constructor&&(Zt=Pt.constructor.name),Zt==="Map"||Zt==="Set"?Array.from(Pt):Zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zt)?zt(Pt,Vt):void 0}}(Yt))||kt&&Yt&&typeof Yt.length=="number"){st&&(Yt=st);var Tt=0,Rt=function(){};return{s:Rt,n:function(){return Tt>=Yt.length?{done:!0}:{done:!1,value:Yt[Tt++]}},e:function(Pt){throw Pt},f:Rt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt,Et=!0,jt=!1;return{s:function(){st=st.call(Yt)},n:function(){var Pt=st.next();return Et=Pt.done,Pt},e:function(Pt){jt=!0,Lt=Pt},f:function(){try{Et||st.return==null||st.return()}finally{if(jt)throw Lt}}}}function zt(Yt,kt){(kt==null||kt>Yt.length)&&(kt=Yt.length);for(var st=0,Tt=new Array(kt);st<kt;st++)Tt[st]=Yt[st];return Tt}var Ft=et.Y.get("WebRTC_Call"),un=apiCC.myWebRTC_Event,vn=function(Yt){this.dest_roomId="",this.pc=null,this.callId=0,this.callee=!1,this.callerId=0,this.calleeId=0,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.myWebRTC_Stack=new ht.S(Yt.socket),this.remoteMediaStreams=[],this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.dtmfSender=null,this.incomingcandidatesQueue=[],nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox"?nt.PR>43?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!1}},this.mediaConstraints={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}):nt.Xh==="Chrome"?nt.PR<55?(this.mediaConstraintsAudioOnly={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this.mediaConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}),nt.ag.name==="iOS"&&(Ft.log("Defining mediaConstraints for iOS "),this.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),this.trickleIce=Yt.trickleIce,this.callLocalStream=null,this.generatedLocalStream=!1,this.audioOnly=!1,this.inviteSended=!1,this.sendInviteTrickleIceFalseTimeOutId=0,this.sendInviteTrickleIceFalseTimer=5e3,this.message200OKSended=!1,this.send200OKTrickleIceFalseTimeOutId=0,this.send200OKTrickleIceFalseTimer=5e3,this.message200OKReceived=!1,this.callCancelled=!1,this.screenSharing=!1,this.desktopId=0,this.pc_config=Yt.pc_config,this.pc_constraints=Yt.pc_constraints,this.audioFileMediaElement=null,this.videoReceivedWidth=640,this.videoReceivedHeight=480,this.videoSendWidth=640,this.videoSendHeight=480,this.videoReceivedDelay=0,this.audioReceivedDelay=0,this.audioSendDelay=0,this.videoSendDelay=0,this.videoSendPacketLossRatio=0,this.audioSendPacketLossRatio=0,this.getStatsInterval=Yt.qosInterval,this.qm=null,this.statisticId=null,this.csmIntervalMs=Yt.csmIntervalMs,this.csmIntervalId=null,this.remoteId=0,this.callType="media",this.localCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.remoteCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.disconnectionTimeoutId=0,this.disconnectionTimer=4e4,this.disconnectionWarningDelay=9e3,this.disconnectionWarningInterval=0,this.disconnectionWarningTimeout=0,this.disconnectionWarningCount=0,this.checkCandidateTypesTimer=1e4,this.checkCandidateTypesTimeoutId=0,this.checkCandidateTypesTimeoutTable=[],this.data={},this.screenStream=null,this.screenIsDisplayed=!1,this.addingDataChannelOnCallOngoing=!1,this.sendDataChannel=null,this.receiveDataChannel=null,this.receiveChunkNb={},this.firstDataPacket={},this.receivedSize={},this.receiveArrayToStoreChunks={},this.destCallType="media",this.mcuRemoteStream=null,this.userMediaAccessRequired=!0,this.settingUpMode="normal",this.remoteType="web",this.mediaTypeForIncomingCall=Yt.mediaTypeForIncomingCall,this.mediaTypeForOutgoingCall=Yt.mediaTypeForOutgoingCall,this.mediaRoutingMode=Yt.mediaRoutingMode,this.stripAudioSDPActivated=!1,this.stripVideoSDPActivated=!1,this.iceState="notdefined",this.restarted=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.isLocalAudioMuted=!1,this.isLocalVideoMuted=!1,this.isRemoteAudioMuted=!1,this.isRemoteVideoMuted=!1,this.isRemoteAudioSilent=!1,this.isRemoteVideoSilent=!1,this.isAccepted=!1,this.accessToMedia=!1,this.callConfiguration=null,this.captureSourceType=null,this.preferH264Codec=!1,this.preferVP8Codec=!1,this.preferVP9Codec=!1,this.candidateNb=0,this.sessionMCU=null,this.instanceId=0,this.retryUpdateMedia=!1,this.updateMediaOngoing=!1,this.setCallTurnServer=function(kt){Ft.info("setCallTurnServer :",kt);var st=JSON.stringify(this.pc_config);st=st.replace(/mp1.apizee.com/g,kt),this.pc_config=JSON.parse(st)},this.setCallMediaRoutingMode=function(kt){Ft.info("setCallMediaRoutingMode :",kt),kt==="hostOnly"?this.mediaRoutingMode=Yt.mediaRoutingModeEnum.hostOnly:kt==="stun"?this.mediaRoutingMode=Yt.mediaRoutingModeEnum.stun:kt==="stunOnly"?this.mediaRoutingMode=Yt.mediaRoutingModeEnum.stunOnly:kt==="turn"?this.mediaRoutingMode=Yt.mediaRoutingModeEnum.turn:kt==="turnOnly"?this.mediaRoutingMode=Yt.mediaRoutingModeEnum.turnOnly:(Ft.log("parameter error when calling function : setCallMediaRoutingMode()"),this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setCallMediaRoutingMode()","PARAMETER_ERROR_SETCALLMEDIAROUTINGMODE"))},this.checkDTLSCompliancy=function(){if(Ft.debug("checkDTLSCompliancy"),apiCC.session.isDeviceDTLSCompliant()===!1)Ft.log("Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]};else{var kt=apiCC.session.isClientDTLSCompliant(this.remoteId);kt!==!1&&kt!=="false"||(Ft.log("Remote Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]})}},this.sendData=function(kt,st){Ft.info("datachannel - sendData");var Tt=null,Rt=null;if(kt.file instanceof File)return Ft.log("File"),this.contentType=kt.file.type,this.originalDataType="File",Tt=new FileReader,Rt=this,Tt.onload=function(Lt){var Et=Lt.target.result||Tt.result;Rt.sendData({file:Et,name:kt.name,type:kt.type},st)},void Tt.readAsArrayBuffer(kt.file);new Ot(this).send(kt,this.sendDataChannel,st)},Ft.log("New Call for client with Id :"+Yt.clientId),this.generateCallId=function(){this.callId=apiCC.generateCallId(),Ft.info("new call with callId :"+this.callId)},this.sendInviteTrickleIceFalse=function(){Ft.log("sendInviteTrickleIceFalse"),Ft.log("sendInvite on candidate timer reached"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Yt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0},this.send200OkTrickleIceFalse=function(){Ft.log("send200OkTrickleIceFalse"),this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Yt.nickname,this.dest_roomId,this.pc.localDescription,this.data),this.message200OKSended=!0},this.onSetLocalDescriptionSuccess=function(){Ft.info("onSetLocalDescriptionSuccess"),this.localDescriptionSetted=!0,this.asyncCallbacks&&this.asyncCallbacks.type==="subscribe"&&delete this.asyncCallbacks,this.trickleIce===!1&&(this.callee===!0?(Ft.info("starting send200OKTrickleIceFalseTimeOutId"),this.send200OKTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"send200OkTrickleIceFalse"),this.send200OKTrickleIceFalseTimer)):(Ft.info("starting sendInviteTrickleIceFalseTimeOutId"),this.sendInviteTrickleIceFalseTimeOutId=setTimeout(this.callback(this,"sendInviteTrickleIceFalse"),this.sendInviteTrickleIceFalseTimer))),Yt.rtpSenderSetParamatersCapable&&Yt.evaluateVideoCap(this)},this.onSetLocalDescriptionFailure=function(kt){Ft.warn("onSetLocalDescriptionFailure",kt);var st=null,Tt=null;this.callControl&&(st=this.callControl.roomName,Tt=this.callControl.type),un.createErrorEvent("Set local Description Failure","SET_LOCAL_DESCRIPTION_FAILURE",this.callId,st,Tt),Yt.onHangup(this.callId,"Local_Description_Failure")},this.onSetRemoteDescriptionSuccess=function(){Ft.info("onSetRemoteDescriptionSuccess");var kt=null;for(this.remoteDescriptionSetted=!0,this.restarting===!0&&delete this.restarting,this.data&&(this.data.mesh||this.data.subscribeOrder)||un.createCallEstablishedEvent(this.calleeId,this.callType,this.callId,this.destCallType);this.incomingcandidatesQueue.length;)kt=this.incomingcandidatesQueue.shift(),this.processCandidateMsg(kt);if(Yt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]!==void 0){for(Ft.debug("Restoring candidate from client, this.callId :"+this.callId+" , instanceId :"+this.instanceId);Yt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].length;)kt=Yt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId].shift(),this.processCandidateMsg(kt);delete Yt.clientIncomingCandidatesQueue[this.callId+"-"+this.instanceId]}if(this.asyncCallbacks&&(this.asyncCallbacks.type==="addingUserMedia"?(this.asyncCallbacks.resolve(this.callConfiguration.userMediaStreamId),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks):this.asyncCallbacks.type==="updateCallConfiguration"&&(this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)),this.updateMediaOngoing=!1,this.retryUpdateMedia===!0){Ft.debug("an updateMedia was waiting for sig stable state or an other updateMedia end, updating Media now ..."),this.retryUpdateMedia=!1;var st=this.updateMedia(!1);Ft.debug("Retried updateMediaResult :",st)}},this.processCandidateMsg=function(kt){Ft.info("processCandidateMsg :",kt);var st=null;this.pc!==null?(kt.completeCandidate!==void 0?(Ft.trace("new behavior of 2.13.8"),st=new apiCC.myWebRTC_Adapter.RTCIceCandidate(kt.completeCandidate)):(Ft.log("old behavior < 2.13.8"),st=new apiCC.myWebRTC_Adapter.RTCIceCandidate({sdpMLineIndex:kt.label,candidate:kt.candidate})),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("addIceCandidate"),this.pc.addIceCandidate(st,function(){Ft.trace("addIceCandidate success")},function(Tt){Ft.warn("addIceCandidate failure: "+Tt),Tt=null})):(Ft.log("addIceCandidate - Promise version"),this.pc.addIceCandidate(st).then(function(){Ft.trace("addIceCandidate success")}).catch(function(Tt){Ft.warn("addIceCandidate failure: "+Tt),Tt=null}))):Ft.error("Error, call is not null but pc is null")},this.onSetRemoteDescriptionFailure=function(kt){Ft.warn("onSetRemoteDescriptionFailure :",kt);var st=null,Tt=null;this.callControl&&(st=this.callControl.roomName,Tt=this.callControl.type),un.createErrorEvent("Set remote Description Failure","SET_REMOTE_DESCRIPTION_FAILURE",this.callId,st,Tt),Yt.onHangup(this.callId,"Remote_Description_Failure")},this.getUserMediaOnCall=function(){var kt=this,st=!1;if(Ft.info("getUserMediaOnCall, audio Only :"+this.audioOnly),Ft.info("getUserMediaOnCall, screenSharing activated :"+this.screenSharing),Ft.log("webRTCClient.gum_config :",Yt.gum_config),this.callerId===Yt.clientId){if(Ft.log("outgoing call"),this.mediaTypeForOutgoingCall==="VIDEO"||this.mediaTypeForOutgoingCall==="VIDEOONLY")if(Ft.log("mediaTypeForOutgoingCall :"+this.mediaTypeForOutgoingCall),this.mediaTypeForOutgoingCall==="VIDEOONLY"&&(st=!0),this.screenSharing!==!0){if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return Ft.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();Ft.log("video is not present :"+this.callType),this.callType==="media"&&(Ft.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else Ft.log("screenSharing, no device checking");else if(this.mediaTypeForOutgoingCall==="AUDIO")Ft.log("mediaTypeForOutgoingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForOutgoingCall==="NONE"||this.mediaTypeForOutgoingCall==="DATA")return Ft.log("mediaTypeForOutgoingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall()}else if(Ft.log("incoming call"),this.mediaTypeForIncomingCall==="VIDEO"||this.mediaTypeForIncomingCall==="VIDEOONLY"){if(Ft.log("mediaTypeForIncomingCall :"+this.mediaTypeForIncomingCall),this.mediaTypeForIncomingCall==="VIDEOONLY"&&(st=!0),apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return Ft.log("getUserMediaOnCall without any device, calling without device"),void this.onUserMediaSuccessOnCall();Ft.log("video is not present :"+this.callType),this.callType==="media"&&(Ft.log("callType is media, but no webcam present, forcing callType to audio"),this.callType="audio",this.audioOnly=!0)}}else if(this.mediaTypeForIncomingCall==="AUDIO")Ft.log("mediaTypeForIncomingCall is AUDIO, setting call to audioOnly"),this.callType="audio",this.audioOnly=!0;else if(this.mediaTypeForIncomingCall==="NONE"||this.mediaTypeForIncomingCall==="DATA")return Ft.log("mediaTypeForIncomingCall is NONE, call will be recvOnly"),void this.onUserMediaSuccessOnCall();Yt.getUserMediaOnGoing=!0;var Tt=null,Rt=null;if(Ft.log("this.screenSharing :"+this.screenSharing),Ft.log("this.audioOnly :"+this.audioOnly),this.screenSharing===!0)if(Ft.log("getScreenMedia"),nt.Xh==="Chrome")Ft.log("this.desktopId :"+this.desktopId),Tt={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this.desktopId}}};else{if(Ft.log("this.captureSourceType :"+this.captureSourceType),this.captureSourceType!=="screen"&&this.captureSourceType!=="window"&&this.captureSourceType!=="application")return void Ft.error("captureSourceType value is not correct");Tt={video:{mediaSource:this.captureSourceType}}}else this.audioOnly===!0?(Ft.log("this.audioOnly = true"),Yt.gum_config=apiCC.setAudioSourceIdInConstraint(Yt.audioSourceId,Yt.gum_config),Rt=JSON.parse(JSON.stringify(Yt.gum_config)),Yt.allowAsymetricMediaCalls===!1?Rt.video=!1:Ft.log("allow AsymetricMediaCalls is activated"),Tt=Rt):(Ft.log("audio and video call"),Tt=(0,at.ws)({},Yt.gum_config),st?Tt.audio=!1:Tt=apiCC.setAudioSourceIdInConstraint(Yt.audioSourceId,Tt),Tt=apiCC.setVideoSourceIdInConstraint(Yt.videoSourceId,Tt),Tt=apiCC.setVideoFacingModeInConstraint(Yt.facingMode,Tt),typeof apiRTC_React<"u"&&(Tt={audio:!0,video:{mandatory:{minWidth:500,minHeight:300,minFrameRate:30},facingMode:"user"}}));apiCC.createUserMediaStream({callId:this.callId,type:this.callType,gum_config:Tt,success:function(Lt){Ft.debug("[getUserMediaOnCall] success; userMediaStreamId: "+Lt.userMediaStreamId),kt.callConfiguration!==void 0&&kt.callConfiguration!==null||(kt.callConfiguration={}),kt.callConfiguration.userMediaStreamId=Lt.userMediaStreamId,kt.onUserMediaSuccessOnCall(Lt.stream)},failure:function(Lt,Et){Ft.debug("[getUserMediaOnCall] failure; userMediaStreamId: "+Lt.userMediaStreamId),kt.onUserMediaErrorOnCall(Et)}})},this.handleToneChangeEvent=function(kt){Ft.debug("handleToneChangeEvent :",kt.tone),kt.tone!==""?Ft.debug("Tone played: "+kt.tone):Ft.debug("All tones have played.")},this.sendTones=function(kt,st,Tt){Ft.debug("sendTones :"),this.dtmfSender&&(Ft.debug("sendTones : Tones, duration, gap: ",kt,st,Tt),this.dtmfSender.insertDTMF(kt,st,Tt))},this.addStream=function(kt){var st,Tt=null,Rt=null,Lt=0,Et=!1,jt=null,Pt=[];if(nt.Xh==="Firefox"&&nt.PR<51||nt.Xh==="Chrome"&&nt.PR<65||nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)Ft.info("using addStream method"),this.pc.addStream(kt),Ft.debug("end addStream method");else{if(!(nt.Xh==="Firefox"&&nt.PR<59||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||typeof apiRTC_React<"u")){for(Ft.info("using addTrack/replaceTrack method"),Tt=kt.getTracks(),st=0;st<Tt.length;st+=1){for(Et=!1,Rt=this.rtpSenders[Tt[st].kind],Lt=0;Lt<Rt.length;Lt+=1)if(Rt[Lt].track===null){Et=!0;break}if(Et===!0)Pt.push(Rt[Lt].replaceTrack(Tt[st])),Ft.debug("addStream -> replaceTrack",Rt[Lt]);else{if(this.simulcast==="RID"&&Tt[st].kind==="video"&&at.wL.type==="chrome"){var Vt=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}];this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings&&(Vt=this.callControl.callConfiguration.simulcast.sendEncodings.slice()),jt=this.pc.addTransceiver(Tt[st],{direction:"sendonly",streams:[kt],sendEncodings:Vt}).sender}else if(jt=this.pc.addTrack(Tt[st],kt),this.simulcast==="RID"&&Tt[st].kind==="video"&&at.wL.type==="firefox"){var Zt=jt.getParameters();Zt||(Zt={}),this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings?Zt.encodings=this.callControl.callConfiguration.simulcast.sendEncodings.slice():Zt.encodings=[{rid:"h",active:!0,maxBitrate:9e5},{rid:"m",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],Pt.push(jt.setParameters(Zt))}Ft.debug("addStream -> addTrack",jt),this.rtpSenders[Tt[st].kind].push(jt)}}return Ft.debug("end addTrack/replaceTrack method"),this.rtpSenders.audio.length>0&&(this.dtmfSender=this.rtpSenders.audio[0].dtmf,this.dtmfSender&&(this.dtmfSender.ontonechange=this.handleToneChangeEvent)),new Promise(function(rn,Jt){Promise.all(Pt).then(function(ln){rn()}).catch(Jt)})}for(Ft.info("using addTrack method"),Tt=kt.getTracks(),st=0;st<Tt.length;st+=1)this.pc.addTrack(Tt[st],kt);Ft.debug("end addTrack method")}return Promise.resolve()},this.removeStream=function(kt){var st,Tt=null,Rt=[];if(Ft.info("removeStream in call",kt.id),nt.Xh==="Firefox"&&nt.PR<51||nt.Xh==="Chrome"&&nt.PR<65||nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1||apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0)Ft.info("using removeStream method"),this.pc.removeStream(kt),Ft.debug("end removeStream method");else{if(!(nt.Xh==="Firefox"&&nt.PR<59||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome")){for(Ft.info("using replaceTrack method"),st=0;st<this.rtpSenders.audio.length;st+=1)Rt.push(this.rtpSenders.audio[st].replaceTrack(null));for(st=0;st<this.rtpSenders.video.length;st+=1)Rt.push(this.rtpSenders.video[st].replaceTrack(null));return Ft.debug("end replaceTrack method"),new Promise(function(Lt,Et){Promise.all(Rt).then(function(jt){Lt()}).catch(Et)})}for(Ft.info("using removeTrack method"),Tt=this.pc.getSenders(),Ft.debug("senders :",Tt),st=0;st<Tt.length;st+=1)this.pc.removeTrack(Tt[st]);Ft.debug("end removeTrack method")}return Promise.resolve()},this.stopStream=function(kt){Ft.info("stopStream in call");var st,Tt=null;if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)Ft.log("... using MediaStream.stop"),kt.stop();else{for(Ft.log("... using MediaStreamTrack.stop"),Tt=kt.getTracks(),st=0;st<Tt.length;st+=1)Tt[st].stop();Ft.log("... tracks stopped")}kt=null},this.addVideoMedia=function(){var kt=this;Ft.info("addVideoMedia");var st=Yt.gum_config;apiCC.createUserMediaStream({callId:this.callId,type:"media",gum_config:st,success:function(Tt){Ft.debug("[addVideoMedia] success; userMediaStreamId: "+Tt.userMediaStreamId);var Rt=apiCC.getUserMediaStream(kt.callConfiguration.userMediaStreamId),Lt=Promise.resolve();Rt&&(Lt=kt.removeStream(Rt.stream).then(function(){Yt.myWebRTC_Event.createLocalStreamRemovedEvent(kt.callType,kt.callId,Rt.stream,kt.remoteId,kt.destCallType),apiCC.releaseUserMediaStream(Rt.userMediaStreamId,kt.callId)})),Lt.then(function(){kt.callConfiguration.userMediaStreamId=Tt.userMediaStreamId,kt.callLocalStream=Tt.stream,kt.addStream(Tt.stream),kt.updateMediaWithRetryManagement(!1)}).catch(function(Et){Ft.error("Failed to addVideoMedia",Et);var jt=null,Pt=null;kt.callControl&&(jt=kt.callControl.roomName,Pt=kt.callControl.type),Yt.myWebRTC_Event.createErrorEvent("Failed to addVideoMedia","MEDIA_UPDATE_ERROR",kt.callId,jt,Pt)})},failure:function(Tt,Rt){Ft.debug("[addVideoMedia] failure; userMediaStreamId: "+Tt.userMediaStreamId),kt.onUserMediaErrorOnCall(Rt)}})},this.stopScreenSharing=function(){Ft.debug("stopScreenSharing detected"),Yt.removeCallFromTableWithCallIdAndSendBye(this.callId,"stop_ScreenSharing")},this.checkingMutingState=function(){var kt=this,st=null;Ft.debug("checkingMutingState");var Tt=function(){(0,at.ki)(kt,"mcuRemoteStream","object")||(kt.mcuRemoteStream={}),kt.mcuRemoteStream.videoMuted=!0},Rt=function(){(0,at.ki)(kt,"mcuRemoteStream","object")||(kt.mcuRemoteStream={}),kt.mcuRemoteStream.audioMuted=!0};(0,at.ki)(this.callConfiguration,"userMediaStreamId","string")&&(st=apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId))&&(st.videoMuted?(Tt(),this.isLocalVideoMuted=!0):this.isLocalVideoMuted=!1,st.audioMuted?(Rt(),this.isLocalAudioMuted=!0):this.isLocalAudioMuted=!1);var Lt=function(){kt.isLocalVideoMuted||(st?st.video&&!st.videoMuted&&st.muteVideoOnStreams("enabled"):kt.callLocalStream&&(Yt.muteTracks(kt.callLocalStream.getVideoTracks()),kt.isLocalVideoMuted=!0),Tt())},Et=function(){kt.isLocalAudioMuted||(st?st.audio&&!st.audioMuted&&st.muteAudioOnStreams("enabled"):kt.callLocalStream&&(Yt.muteTracks(kt.callLocalStream.getAudioTracks()),kt.isLocalAudioMuted=!0),Rt())};Yt.isVideoMuted===!0&&(Ft.log("Client is video muted, applying to call"),Lt()),Yt.isAudioMuted===!0&&(Ft.log("Client is audio muted, applying to call"),Et()),(0,at.ki)(this.callConfiguration,"muted","string")&&(Ft.log("callConfiguration muted is set :",this.callConfiguration.muted),this.callConfiguration.muted==="VIDEO"&&(Lt(),Et()),this.callConfiguration.muted==="AUDIOONLY"&&Et(),this.callConfiguration.muted==="VIDEOONLY"&&Lt(),delete this.callConfiguration.muted)},this.onUserMediaSuccessOnCall=function(kt){Ft.info("onUserMediaSuccessOnCall");var st=(0,at.Pj)(),Tt={};Yt.userMediaErrorDetected===!0&&(Yt.userMediaErrorDetected=!1,Tt.userMediaErrorDetected=Yt.userMediaErrorDetected,apiCC.session.setUserData(Tt)),Ft.log("isHTTPS()"+st),Yt.getUserMediaOnGoing=!1,Ft.log("User has granted access to local media."),Yt.accessToLocalMedia=!0,this.accessToMedia=!0,this.screenSharing===!0?(this.callType="screenSharing",kt!=null&&(kt.onended=this.callback(this,"stopScreenSharing"),kt.getVideoTracks().length>0&&(kt.getVideoTracks()[0].onended=this.callback(this,"stopScreenSharing")))):this.audioOnly===!0&&(this.callType="audio"),kt!==void 0&&(this.callLocalStream=kt),(0,at.yJ)()?(Ft.log("isHTTP true"),this.establishCall()):(Ft.log("webRTCClient.userAcceptOnIncomingCall :"+Yt.userAcceptOnIncomingCall),Ft.log("this.callee :"+this.callee),this.data!==void 0&&Ft.log("this.data.MCUType :"+this.data.MCUType),Yt.userAcceptOnIncomingCall!==!0||this.callee!==!0&&this.data.MCUType!=="MCU-Callee"||this.isAccepted!==!1?this.calleeId!=="LOCAL"?this.establishCall():Ft.log("call is not established as this is a LOCAL stream request"):Ft.log("Stand-by :: wait for establishCall"))},this.establishCall=function(){var kt=this;Ft.debug("establishCall()"),this.started!==!0||this.addingUserMedia!==!0||!this.belongsToRoom()||this.settingUpType!=="publish"||this.data&&this.data.hasOwnProperty("MCUType")||!this.sessionMCU||this.sessionMCU.hasOwnProperty("roomMode")||(this.restarting=!0,this.pc.close(),this.pc=null,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.updateUserMedia=!1,this.updateCause=null,this.incomingcandidatesQueue=[],this.message200OKReceived=!1,this.statisticId&&(clearInterval(this.statisticId),this.statisticId=null),this.csmIntervalId&&(clearInterval(this.csmIntervalId),this.csmIntervalId=null),this.instanceId=apiCC.generateInstanceId(),this.data.instanceId=this.instanceId),this.dataCall!==!0&&this.checkingMutingState(),this.maybeStart();var st=null;this.callee&&this.addingUserMedia!==!0&&this.updateUserMedia!==!0?(st=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),Ft.log("Avant setRemote pour le callee :",st),this.pc!==null?(Yt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),st.sdp=Yt.mySDPManager.maybePreferCodec(st.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("establishCall : before setRemoteDescription for callee"),this.pc.setRemoteDescription(st,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("establishCall : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(st).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure")))):Ft.log("Error : PC is null"),this.doAnswer()):this.addingUserMedia===!0?(Ft.log("Adding local stream 1."),this.pc!==null?(this.callLocalStream===null&&Yt.localStream!==null&&(this.callLocalStream=Yt.localStream),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream).then(function(){kt.updateMediaWithRetryManagement(!1)}).catch(function(Tt){Ft.error("failed to add stream",Tt)})):(Ft.log("No Stream to addStream"),this.updateMediaWithRetryManagement(!1))):Ft.error("Error : PC is null")):this.updateUserMedia===!0&&this.updateMediaWithRetryManagement(!1),Ft.log("End of establishCall()")},this.onUserMediaSuccessTestUni=function(){Yt.getUserMediaOnGoing=!1,Ft.info("onUserMediaSuccessTestUni : User has not granted access to local media.");var kt=null,st={};Yt.userMediaErrorDetected===!0&&(Yt.userMediaErrorDetected=!1,st.userMediaErrorDetected=Yt.userMediaErrorDetected,apiCC.session.setUserData(st)),Yt.accessToLocalMedia=!0,this.maybeStart(),this.callee&&(kt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),Yt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),kt.sdp=Yt.mySDPManager.maybePreferCodec(kt.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee"),this.pc.setRemoteDescription(kt,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("onUserMediaSuccessTestUni : before setRemoteDescription for callee - Promise version"),this.pc.setRemoteDescription(kt).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))),this.doAnswer())},this.onUserMediaErrorOnCall=function(kt){var st=this;Ft.log("onUserMediaErrorOnCall");var Tt={};Yt.getUserMediaOnGoing=!1,setTimeout(function(){un.createErrorEvent(kt,"USER_MEDIA_ERROR",st.callId)}),Ft.error("Failed to get access to local media. Error code was "+kt.code),Ft.error(kt),kt=null,nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&(Ft.log("browser_version > 47"),window.location.protocol!=="https:"&&Ft.error("HTTPS is now mandatory to use getUserMedia()")),this.screenSharing===!0&&(this.callType="screenSharing",window.location.protocol!=="https:"?(Ft.log("You need to be connected using HTTPS for screenSharing"),un.createDesktopCaptureEvent("UserMediaError_HTTPS_needed",this.callId,this.remoteId)):(Ft.log("screenSharing UserMediaError"),un.createDesktopCaptureEvent("UserMediaError",this.callId,this.remoteId))),this.callee===!0?(this.myWebRTC_Stack.sendBye(this.callId,this.calleeId,this.dest_roomId,this.callerId,"User_Media_Error",this.data),Yt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.callerId,"User_Media_Error")):(this.data!==void 0&&this.data!==null&&this.data.MCUType==="MCU-Callee"&&this.myWebRTC_Stack.sendBye(this.callId,this.callerId,this.dest_roomId,this.calleeId,"User_Media_Error",this.data),Yt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"User_Media_Error")),this.screenSharing===!1&&(Yt.userMediaErrorDetected=!0,Tt.userMediaErrorDetected=Yt.userMediaErrorDetected,apiCC.session.setUserData(Tt))},this.maybeStart=function(){Ft.debug("maybeStart"),!this.started&&Yt.channelReady&&(Yt.accessToLocalMedia||this.dataCall)&&(Ft.log("Creating PeerConnection."),this.createPeerConnection(),Yt.unidirectionelCallOnly||this.screenSharing===!0?this.callee===!1&&(Ft.log("Adding local stream 2."),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Yt.localStream!==null?(Ft.log("Add Stream of client.localStream"),this.addStream(Yt.localStream),this.callLocalStream=Yt.localStream):Ft.log("No Stream to add")):this.dataCall||(Ft.log("Adding local stream 3."),this.callLocalStream!==null?(Ft.log("Add Stream of callLocalStream"),this.addStream(this.callLocalStream)):Yt.localStream!==null?(Ft.log("Add Stream of client.localStream"),this.addStream(Yt.localStream),this.callLocalStream=Yt.localStream):(Ft.log("No Stream to add"),this.belongsToRoom()||at.wL.type!=="safari"||typeof this.pc.addTransceiver!="function"||(Ft.debug("add transceivers"),this.pc.addTransceiver("audio",{direction:"recvonly"}),this.pc.addTransceiver("video",{direction:"recvonly"})))),this.started=!0,this.callee===!1&&(Ft.log("Before doCall()"),this.doCall())),Ft.log("End of maybeStart")},this.createDataChannel=function(){if(Ft.info("createDataChannel"),nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome")Ft.warn("Cannot create DataChannel as it is not supported on Edge");else if(this.sendDataChannel===null)try{this.sendDataChannel=this.pc.createDataChannel("apiRTCDataChannel",{}),this.sendDataChannel.binaryType="arraybuffer",Ft.log("Created data channel"),Ft.log("Subscribing to dc events"),this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")}catch(kt){Ft.log("createDataChannel() failed with exception: "+kt.message)}else Ft.log("Datachannel already exist")},this.createPeerConnection=function(){Ft.info("createPeerConnection");try{Ft.log("createPeerConnection with pc_config:",JSON.stringify(this.pc_config)),Ft.log("and pc_constraints:",JSON.stringify(this.pc_constraints)),at.wL.type==="chrome"&&at.wL.version>=72&&at.wL.version<78?(Ft.debug("Chrome 72=+ and 78-, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):apiRTC.osName==="iOS"&&typeof cordova<"u"&&cordova.plugins!==void 0&&cordova.plugins.iosrtc!==void 0?(Ft.debug("Cordova, force sdpSemantics plan-b"),this.pc_config.sdpSemantics="plan-b"):Ft.debug("sdpSemantics unified-plan is being used"),this.pc=new apiCC.myWebRTC_Adapter.RTCPeerConnection(this.pc_config,this.pc_constraints),this.dataCall&&this.createDataChannel(),this.pc.onicecandidate=this.callback(this,"onIceCandidate")}catch(kt){return Ft.log("Failed to create PeerConnection, exception: "+kt.message),void Ft.error("Cannot create RTCPeerConnection object; WebRTC is not supported by this browser.")}(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=53||nt.Xh==="Edge"||at.wL.type==="chrome"&&at.wL.version>=64?(this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"),this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded")):nt.Xh==="Safari"&&nt.PR>=12||nt.Xh==="Mobile Safari"&&nt.PR>=12||typeof apiRTC_React<"u"?this.pc.ontrack=this.callback(this,"onRemoteTrackAdded"):this.pc.onaddstream=this.callback(this,"onRemoteStreamAdded"),this.pc.onremovestream=this.callback(this,"onRemoteStreamRemoved"),this.pc.onnegotiationneeded=this.callback(this,"onNegotiationNeeded"),this.pc.onsignalingstatechange=this.callback(this,"onSignalingStateChange"),this.pc.oniceconnectionstatechange=this.callback(this,"onIceConnectionStateChange"),this.pc.ondatachannel=this.callback(this,"onDataChannel"),this.pc.onicegatheringstatechange=this.callback(this,"onIceGatheringStateChange"),this.pc.onconnectionstatechange=this.callback(this,"onConnectionStateChange"),Yt.qosEnable&&(this.statisticId=setInterval(this.callback(this,"getStatistics"),this.getStatsInterval)),Yt.csmEnable&&(this.csmLastResults={},this.csmIntervalId=setInterval(this.callback(this,"csmHandler"),this.csmIntervalMs))},this.onIceGatheringStateChange=function(kt){Ft.log("onIceGatheringStateChange"),this.pc!==null&&(Ft.info("onIceGatheringStateChange, Ice Gathering State is now : "+this.pc.iceGatheringState),this.pc.iceGatheringState==="complete"&&this.candidateNb===0&&Ft.warn("Warning, no candidate where retrieved for this call on client"))},this.onConnectionStateChange=function(kt){Ft.log("onConnectionStateChange event :",kt)},this.onDataChannel=function(kt){Ft.info("onDataChannel event"),this.receiveDataChannel=kt.channel,this.receiveDataChannel.binaryType="arraybuffer",this.sendDataChannel===null&&(Ft.log("Setting this.sendDataChannel with receivedDataChannel"),this.sendDataChannel=kt.channel,this.sendDataChannel.onopen=this.callback(this,"onSendDataChannelOpen"),this.sendDataChannel.onclose=this.callback(this,"onSendDataChannelClose"),this.sendDataChannel.onmessage=this.callback(this,"onSendDataChannelMessage"),this.sendDataChannel.onerror=this.callback(this,"onSendDataChannelError")),Ft.log("got dataChannel",kt.channel.label),Ft.log("Subscribing to dc events"),this.receiveDataChannel.onopen=this.callback(this,"onReceiveDataChannelOpen"),this.receiveDataChannel.onclose=this.callback(this,"onReceiveDataChannelClose"),this.receiveDataChannel.onmessage=this.callback(this,"onReceiveDataChannelMessage"),this.receiveDataChannel.onerror=this.callback(this,"onReceiveDataChannelError")},this.onSendDataChannelOpen=function(kt){Ft.info("onSendDataChannelOpen"),this.callType==="data"&&this.calleeId==="dataChannelConnector"&&(this.pushDataStatus&&this.pushDataStatus.type==="pipeline"?(this.pushDataStatus.state="ready",setTimeout(function(){Yt.startNextPushData()})):this.transferStarted!==!0&&this.startTransfer()),un.createEvent({eventType:"sendDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:kt})},this.onSendDataChannelClose=function(kt){Ft.info("onSendDataChannelClose"),this.sendDataChannel=null,un!==null&&un.createEvent({eventType:"sendDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:kt})},this.processOnDataChannelMessage=function(kt){var st,Tt,Rt=null,Lt=null,Et="",jt=0;if(Ft.info("processOnDataChannelMessage"),Rt=JSON.parse(kt.data),Ft.log("data.uuid :"+Rt.uuid),Ft.log("data.messageSize :"+Rt.messageSize),Ft.log("data.originalDataType :"+Rt.originalDataType),st=Rt.uuid,Rt.originalDataType==="ArrayBuffer"&&(Ft.log("ArrayBuffer conversion"),Rt.message=at.cw.decode(Rt.message)),Ft.log("data :"+Rt),Ft.log("data.uuid :"+st),Ft.log("receiveChunkNb[uuid] :"+this.receiveChunkNb[st]),this.receiveChunkNb[st]===void 0)Ft.log("receiving first packet for uuid :"+st),Ft.log("evt.data.message :"+kt.data),this.firstDataPacket[st]=Rt,this.receiveChunkNb[st]=1,this.receivedSize[st]=0,this.startingDate=new Date,this.transferDuration=0,un.createEvent({eventType:"onFileReceiving",remoteId:this.remoteId,callId:this.callId,name:Rt.name,uuid:st}),un.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[st],fileSize:this.firstDataPacket[st].size,remainingSize:this.firstDataPacket[st].size,callId:this.callId,uuid:st,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:0,transferEnded:!1});else if(Ft.log("new packet for uuid :"+st),this.receiveChunkNb[st]+=1,Ft.log("data.messageSize :"+Rt.messageSize),Ft.log("data.message.length :"+Rt.message.length),jt=Rt.messageSize||Rt.message.length,Ft.log("receivedSize :"+jt),this.receiveArrayToStoreChunks[st]||(this.receiveArrayToStoreChunks[st]=[]),this.receiveArrayToStoreChunks[st].push(Rt.message),this.receivedSize[st]+=jt,this.transferDuration=new Date-this.startingDate,this.receivedSize[st]===this.firstDataPacket[st].size){if(Ft.log("End of data transfert"),Ft.log("this.firstDataPacket.type :"+this.firstDataPacket[st].type),this.firstDataPacket[st].type==="image/png-dataUrl"){for(Ft.log("Photo received from a takeSnapshot"),Tt=0;Tt<this.receiveArrayToStoreChunks[st].length;Tt+=1)Et+=this.receiveArrayToStoreChunks[st][Tt];Lt=Et}else Lt=new window.Blob(this.receiveArrayToStoreChunks[st]);un.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[st],fileSize:this.firstDataPacket[st].size,remainingSize:0,callId:this.callId,uuid:st,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:100,transferEnded:!0}),un.createEvent({eventType:"onFileReceived",callId:this.callId,uuid:st,remoteId:this.remoteId,callerId:this.callerId,calleeId:this.calleeId,data:{file:Lt,name:this.firstDataPacket[st].name,type:this.firstDataPacket[st].type,uuid:st},details:kt}),delete this.receiveArrayToStoreChunks[st],delete this.receivedSize[st],delete this.receiveChunkNb[st],delete this.firstDataPacket[st]}else un.createEvent({eventType:"onFileProgress",sendChunkNb:this.receiveChunkNb[st],fileSize:this.firstDataPacket[st].size,remainingSize:this.firstDataPacket[st].size-this.receivedSize[st],callId:this.callId,uuid:st,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*this.receivedSize[st]/this.firstDataPacket[st].size,10),transferEnded:!1})},this.onSendDataChannelMessage=function(kt){Ft.info("onSendDataChannelMessage :",kt),this.processOnDataChannelMessage(kt)},this.onSendDataChannelError=function(kt){Ft.info("onSendDataChannelError"),this.sendDataChannel=null,un.createEvent({eventType:"sendDataChannelError",callId:this.callId,remoteId:this.remoteId,details:kt})},this.onReceiveDataChannelOpen=function(kt){Ft.info("onReceiveChannelOpen"),un.createEvent({eventType:"receiveDataChannelOpen",callId:this.callId,remoteId:this.remoteId,details:kt})},this.onReceiveDataChannelClose=function(kt){Ft.info("onReceiveDataChannelClose"),this.receiveDataChannel=null,un!==null&&un.createEvent({eventType:"receiveDataChannelClose",callId:this.callId,remoteId:this.remoteId,details:kt})},this.onReceiveDataChannelMessage=function(kt){Ft.info("onReceiveChannelMessage"),this.processOnDataChannelMessage(kt)},this.onReceiveDataChannelError=function(kt){Ft.info("onReceiveChannelError"),un.createEvent({eventType:"receiveDataChannelError",callId:this.callId,remoteId:this.remoteId,details:kt})},this.startTransfer=function(){var kt=this,st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=st.hasOwnProperty("delay")?st.delay:100;this.transferStarted!==!0&&(Ft.info("startTransfer",Tt),this.transferStarted=!0,setTimeout(function(){kt.dcfs||(kt.dcfs=new Ot(kt),kt.data.offset>0?kt.dcfs.transfer(kt.fileContent.buffer,kt.data.offset,kt.sendDataChannel,{delay:Tt}):kt.dcfs.transfer(kt.fileContent.buffer,0,kt.sendDataChannel,{delay:Tt}))},Tt))},this.statisticsAnswer=function(kt){var st=kt.result(),Tt=null;this.qm||(this.qm=new St(this.getStatsInterval/1e3,this.callback(this,"onQosChange"),this.callback(this,"onQosAudioChange"),this.callback(this,"onQosVideoChange"),this.callId,Yt.apiKey,Yt.clientId,Yt.socket)),st&&(this.qm.insertStats(st,this.sendedSdpOfferMessage,this.receivedSdpOfferMessage,Yt.remoteVideo),Tt=this.qm.getAllStats(),Yt.qosEnable&&un.createEvent({eventType:"onQosStatsUpdate",callId:this.callId,remoteId:this.remoteId,stats:Tt}),this.videoReceivedWidth=Tt.VideoRecv.FrameWidth,this.videoReceivedHeight=Tt.VideoRecv.FrameHeight,this.videoSendWidth=Tt.VideoSend.FrameWidth,this.videoSendHeight=Tt.VideoSend.FrameHeight,this.videoReceivedDelay=Tt.VideoRecv.delay,this.audioReceivedDelay=Tt.AudioRecv.delay,this.audioSendDelay=Tt.AudioSend.rtt,this.videoSendDelay=Tt.VideoSend.rtt,this.videoSendMoyDelay=Tt.VideoSend.moyRtt,this.videoSendPacketLossRatio=Tt.VideoSend.packetLostRatio,this.audioSendPacketLossRatio=Tt.AudioSend.packetLostRatio,this.videoSendEncodeUsagePercent=Tt.VideoSend.googEncodeUsagePercent,this.videoSendCpuLimitedResolution=Tt.VideoSend.googCpuLimitedResolution,this.videoSendBandwidthLimitedResolution=Tt.VideoSend.googBandwidthLimitedResolution,this.videoSendCpuLimitedResolution!==void 0&&JSON.parse(this.videoSendCpuLimitedResolution)===!0&&un.createEvent({eventType:"cpuLimited",callId:this.callId,encodeUsagePercent:this.videoSendEncodeUsagePercent}),this.videoSendBandwidthLimitedResolution!==void 0&&JSON.parse(this.videoSendBandwidthLimitedResolution)===!0&&un.createEvent({eventType:"bandwidthLimited",callId:this.callId}))},this.csmGetStatsHandler=function(kt){var st,Tt=this,Rt=null,Lt=null,Et={};if(this.csm||(this.csm=new Dt(this.csmIntervalMs/1e3,at.wL.type,at.wL.version,"standard"),this.csm.browserInfo={browserAbout:nt.Xh+" "+nt.dc,browserType:at.wL.type,browserVersion:at.wL.version},(0,at.Ym)(this.mcuRemoteStream,"attributes","object")&&(this.mcuRemoteStream.replay===!0?(0,at.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,at.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(0,at.Ym)(this.mcuRemoteStream.attributes.recId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId,modifier:"replay",recId:this.mcuRemoteStream.attributes.recId}):(0,at.Ym)(this.mcuRemoteStream.attributes.callerId,"string")&&(0,at.Ym)(this.mcuRemoteStream.attributes.callId,"string")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId}))),Et.post=function(Pt){Tt.mos||(Tt.mos=new Gt),Pt.quality={},Pt.audioReceived?Tt.isRemoteAudioMuted?Pt.quality.mosS="Muted":Pt.audioReceived.bitsReceivedPerSecond!==0?(Pt.audioReceived.delay=parseInt(Tt.audioReceivedDelay,10),Pt.quality.mosS=Tt.mos.NarrowBandSpeechQuality(Pt.audioReceived.delay,Pt.audioReceived.packetLossRatio)):Pt.quality.mosS="NoStream":Pt.quality.mosS="NoStream",Pt.videoReceived?Tt.isRemoteVideoMuted?Pt.quality.mosV="Muted":Pt.videoReceived.bitsReceivedPerSecond!==0?(Pt.videoReceived.width=Tt.videoReceivedWidth,Pt.videoReceived.height=Tt.videoReceivedHeight,Pt.videoReceived.delay=parseInt(Tt.videoReceivedDelay,10),Pt.quality.mosV=Tt.mos.videoQuality(Pt.videoReceived.width,Pt.videoReceived.height,Pt.videoReceived.packetLossRatio,Math.floor(Pt.videoReceived.bitsReceivedPerSecond/1e3),Pt.videoReceived.framesDecodedPerSecond)):Pt.quality.mosV="NoStream":Pt.quality.mosV="NoStream",Pt.audioReceived&&Pt.videoReceived&&(Pt.quality.mosAV=Tt.mos.audiovisualQuality(Pt.quality.mosS,Pt.quality.mosV,Pt.audioReceived.delay,Pt.videoReceived.delay)),Pt.audioSent?Tt.isLocalAudioMuted?Pt.quality.mosSS="Muted":Pt.audioSent.bitsSentPerSecond!==0?(Pt.audioSent.delay=parseInt(Tt.audioSendDelay,10),Pt.audioSent.packetLossRatio=Tt.audioSendPacketLossRatio,Pt.quality.mosSS=Tt.mos.NarrowBandSpeechQuality(Pt.audioSent.delay,Pt.audioSent.packetLossRatio)):Pt.quality.mosSS="NoStream":Pt.quality.mosSS="NoStream",Pt.videoSent?Tt.isLocalVideoMuted?Pt.quality.mosSV="Muted":Pt.videoSent.bitsSentPerSecond!==0?(Pt.videoSent.width=Tt.videoSendWidth,Pt.videoSent.height=Tt.videoSendHeight,Pt.videoSent.delay=parseInt(Tt.videoSendDelay,10),Pt.videoSent.moyDelay=parseInt(Tt.videoSendMoyDelay,10),Pt.videoSent.packetLossRatio=Tt.videoSendPacketLossRatio,Pt.videoSent.encodeUsagePercent=Tt.videoSendEncodeUsagePercent,Pt.videoSent.cpuLimitedResolution=Tt.videoSendCpuLimitedResolution,Pt.videoSent.bandwidthLimitedResolution=Tt.videoSendBandwidthLimitedResolution,Pt.quality.mosSV=Tt.mos.videoQuality(Pt.videoSent.width,Pt.videoSent.height,Pt.videoSent.packetLossRatio,Math.floor(Pt.videoSent.bitsSentPerSecond/1e3),Pt.videoSent.framesEncodedPerSecond)):Pt.quality.mosSV="NoStream":Pt.quality.mosSV="NoStream",Pt.audioSent&&Pt.videoSent&&(Pt.quality.mosSAV=Tt.mos.audiovisualQuality(Pt.quality.mosSS,Pt.quality.mosSV,Pt.audioSent.delay,Pt.videoSent.delay))},st=this.csm.addCallStats(kt,Et),Object.keys(st).length!==0){!st.quality||st.quality.mosS==="Muted"&&st.quality.mosV==="Muted"&&st.quality.mosSS==="Muted"&&st.quality.mosSV==="Muted"||Yt.qualityScoreEnable&&un.createEvent({eventType:"onCallScoreUpdate",callId:this.callId,score:st.quality}),this.csmLastResults=st,this.callLocalStream&&typeof this.callLocalStream.getVideoTracks=="function"&&(Rt=this.callLocalStream.getVideoTracks())&&Rt[0]&&typeof Rt[0].getSettings=="function"&&(Lt=Rt[0].getSettings());var jt={save:!0,clientId:Yt.clientId,callId:this.callId,instanceId:this.instanceId,browserInfo:this.csm.browserInfo,stats:st};this.sessionMCU&&(jt.roomId=this.sessionMCU.roomName,jt.pubSub=Yt.MCUClient.pubConnector),this.csm.callFeed&&(jt.callFeed=this.csm.callFeed),Lt&&(jt.videoSettings=Lt),this.data.mesh&&(jt.mesh=this.data.mesh),this.myWebRTC_Stack.sendInfo("callStats",jt),Yt.csmEnable&&(this.data&&this.data.mesh&&(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Yt.compositeClientId:this.data.mesh.calleeId===Yt.clientId)?un.createEvent({eventType:"onCallStatsUpdate",callId:this.data.mesh.calleeCallId,userId:this.data.mesh.callerId,stats:st}):un.createEvent({eventType:"onCallStatsUpdate",callId:this.callId,stats:st}))}},this.onQosChange=function(kt,st){un.createEvent({eventType:"onQosChange",callId:this.callId,remoteId:this.remoteId,qosIn:kt,qosOut:st})},this.onQosAudioChange=function(kt,st){un.createEvent({eventType:"onQosAudioChange",callId:this.callId,remoteId:this.remoteId,qosAudioIn:kt,qosAudioOut:st})},this.onQosVideoChange=function(kt,st){un.createEvent({eventType:"onQosVideoChange",callId:this.callId,remoteId:this.remoteId,qosVideoIn:kt,qosVideoOut:st})},this.getStatistics=function(){this.pc&&((nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>112?Ft.debug("getStats with callback in now deprecated on Chrome, getStatistics() / QoSMonitor can no more be used"):!this.pc.getStats||nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||this.pc.getStats(this.callback(this,"statisticsAnswer")))},this.csmHandler=function(){this.statisticId||this.getStatistics(),this.pc&&typeof this.pc.getStats=="function"&&this.pc.getStats(null).then(this.callback(this,"csmGetStatsHandler")).catch(function(kt){Ft.warn("failed to get stats",kt)})},this.doCall=function(){var kt=null;Ft.log("Sending offer to peer"),this.audioOnly?(Ft.log("audioOnly call :",this.mediaConstraintsAudioOnly),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.screenSharing===!0?(Ft.log("screenSharing call : one way media :",kt),kt={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),kt)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(kt).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):this.dataCall===!0?(Ft.log("call is data only :",kt),kt=(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>43?{offerToReceiveAudio:!1,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),kt)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(kt).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure")))):(Ft.log("call is audio & video :",this.mediaConstraints),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOffer"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(Ft.log("createOffer - Promise version"),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOffer")).catch(this.callback(this,"onCreateOfferFailure"))))},this.doAnswer=function(){Ft.info("doAnswer");var kt=null;this.audioOnly?(Ft.log("audioOnly call"),kt=this.mediaConstraintsAudioOnly):kt=this.mediaConstraints,nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessage"),this.callback(this,"onCreateAnswerFailure"),kt)):(Ft.log("createAnswer - Promise version"),this.pc.createAnswer(kt).then(this.callback(this,"setLocalAndSendMessage")).catch(this.callback(this,"onCreateAnswerFailure")))},this.doUpdateAnswer=function(){Ft.info("doUpdateAnswer");var kt=null;this.audioOnly?(Ft.log("audioOnly call"),kt=this.mediaConstraintsAudioOnly):kt=this.mediaConstraints,nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createAnswer"),this.pc.createAnswer(this.callback(this,"setLocalAndSendMessageUpdate"),this.callback(this,"onCreateAnswerFailure"),kt)):(Ft.log("createAnswer - Promise version"),this.pc.createAnswer(kt).then(this.callback(this,"setLocalAndSendMessageUpdate")).catch(this.callback(this,"onCreateAnswerFailure")))},this.updateMediaWithRetryManagement=function(kt){Ft.debug("updateMediaWithRetryManagement");var st=this.updateMedia(kt);Ft.debug("updateMediaResult :",st),st.reason!=="Sig_state_not_stable"&&st.reason!=="Update_already_ongoing"||(Ft.debug("updateMedia will be retried later for reason :",st.reason),this.retryUpdateMedia=!0)},this.updateMedia=function(kt){return Ft.debug("updateMedia, callId :",this.callId),Ft.log("iceRestartActivated :",kt),this.pc===null?(Ft.log("updateMedia, pc no more exist"),{status:"Not_Done",reason:"PC_Not_Exit"}):this.updateMediaOngoing===!0?(Ft.log("updateMedia, already ongoing"),{status:"Not_Done",reason:"Update_already_ongoing"}):(this.updateMediaOngoing=!0,this.pc.signalingState!=="stable"?{status:"Not_Done",reason:"Sig_state_not_stable"}:(Ft.log("Sending Update offer to peer."),this.audioOnly?(Ft.log("audioOnly call :",this.mediaConstraintsAudioOnly),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),this.mediaConstraintsAudioOnly.mandatory!==void 0?this.mediaConstraintsAudioOnly.mandatory.IceRestart=!0:this.mediaConstraintsAudioOnly.iceRestart=!0,Ft.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraintsAudioOnly)):(Ft.log("createOffer - Promise version"),kt===!0&&(this.mediaConstraintsAudioOnly.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure")))):nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("createOffer"),kt===!0&&(this.mediaConstraints.mandatory!==void 0?this.mediaConstraints.mandatory.IceRestart=!0:this.mediaConstraints.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.callback(this,"setLocalAndSendMessageonOfferUpdate"),this.callback(this,"onCreateOfferFailure"),this.mediaConstraints)):(Ft.log("createOffer - Promise version"),kt===!0&&(this.mediaConstraints.iceRestart=!0),Ft.log("this.mediaConstraints :",this.mediaConstraints),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,"setLocalAndSendMessageonOfferUpdate")).catch(this.callback(this,"onCreateOfferFailure"))),{status:"OnGoing",reason:"OK"}))},this.manipulateSDP=function(kt,st){var Tt=null,Rt=!1;return Ft.log("manipulateSDP with type :",st),Yt.receiveMediaDeactivated===!0&&(Ft.log("setting receiveMediaDeactivated in SDP :"+Yt.receiveMediaDeactivated),kt.sdp=Yt.mySDPManager.setSendOnly(kt.sdp)),Yt.RTPMedia===!0&&(kt.sdp=kt.sdp.replace(/RTP\/SAVPF/g,"RTP/SF")),Yt.audioBandwidth!==null&&(Ft.log("setting audioBandwidth in SDP :"+Yt.audioBandwidth),kt.sdp=Yt.mySDPManager.setAudioBandwidth(kt.sdp,Yt.audioBandwidth)),Yt.videoBandwidth!==null&&(Ft.log("setting videoBandwidth in SDP :"+Yt.videoBandwidth),kt.sdp=Yt.mySDPManager.setVideoBandwidth(kt.sdp,Yt.videoBandwidth)),Yt.dataBandwidth!==null&&(Ft.log("setting dataBandwidth in SDP :"+Yt.dataBandwidth),kt.sdp=Yt.mySDPManager.setDataBandwidth(kt.sdp,Yt.dataBandwidth)),Yt.preferOpusCodec===!0&&(Ft.log("setting preferOpusCodec"),kt.sdp=Yt.mySDPManager.preferOpus(kt.sdp)),Yt.preferVP9Codec!==!0&&this.preferVP9Codec!==!0||(Ft.log("Call prefer VP9 Codec"),kt.sdp=Yt.mySDPManager.maybePreferCodec(kt.sdp,"video","VP9")),Yt.preferH264Codec!==!0&&this.preferH264Codec!==!0||(Ft.log("Call prefer H264 Codec"),kt.sdp=Yt.mySDPManager.maybePreferCodec(kt.sdp,"video","H264")),this.preferVP8Codec===!0&&(Ft.log("Call prefer VP8 Codec"),kt.sdp=Yt.mySDPManager.maybePreferCodec(kt.sdp,"video","VP8")),Yt.setStereo===!0&&(Ft.log("Set Stereo"),kt.sdp=Yt.mySDPManager.setCodecParam(kt.sdp,"opus/48000","stereo","1")),kt=Yt.mySDPManager.updateSDPcodecs(kt,kt.type,"audio",Yt.allowedAudioCodecs),kt=Yt.mySDPManager.updateSDPcodecs(kt,kt.type,"video",Yt.allowedVideoCodecs),st==="OFFER"?this.settingUpType==="publish"&&this.mediaTypeForIncomingCall==="NONE"?(Tt=Yt.mySDPManager.createGuideline(kt.sdp),this.mediaTypeForOutgoingCall==="VIDEO"?((0,at.ki)(Tt,"audio","object")&&Tt.audio.direction!=="sendonly"&&(Tt.audio.direction="sendonly",Rt=!0),(0,at.ki)(Tt,"video","object")&&Tt.video.direction!=="sendonly"&&(Tt.video.direction="sendonly",Rt=!0)):this.mediaTypeForOutgoingCall==="AUDIO"?((0,at.ki)(Tt,"audio","object")&&Tt.audio.direction!=="sendonly"&&(Tt.audio.direction="sendonly",Rt=!0),(0,at.ki)(Tt,"video","object")&&Tt.video.direction!=="inactive"&&(Tt.video.direction="inactive",Rt=!0)):this.mediaTypeForOutgoingCall==="VIDEOONLY"&&((0,at.ki)(Tt,"audio","object")&&Tt.audio.direction!=="inactive"&&(Tt.audio.direction="inactive",Rt=!0),(0,at.ki)(Tt,"video","object")&&Tt.video.direction!=="sendonly"&&(Tt.video.direction="sendonly",Rt=!0)),Rt===!0&&(kt.sdp=Tt.generate())):this.mediaTypeForOutgoingCall==="VIDEO"?Ft.log("mediaTypeForOutgoingCall is VIDEO"):this.mediaTypeForOutgoingCall==="AUDIO"||this.audioOnly===!0?(Ft.log("mediaTypeForOutgoingCall is AUDIO"),kt.sdp=Yt.mySDPManager.setRecvOnlyForVideo(kt.sdp)):this.mediaTypeForOutgoingCall==="VIDEOONLY"?(Ft.log("mediaTypeForOutgoingCall is VIDEOONLY"),kt.sdp=Yt.mySDPManager.setRecvOnlyForAudio(kt.sdp)):this.mediaTypeForOutgoingCall==="NONE"&&(Ft.log("mediaTypeForOutgoingCall is NONE"),kt.sdp=Yt.mySDPManager.setRecvOnly(kt.sdp)):st==="ANSWER"&&(this.mediaTypeForIncomingCall==="VIDEO"?Ft.log("mediaTypeForIncomingCall is VIDEO"):this.mediaTypeForIncomingCall==="AUDIO"||this.audioOnly===!0?(Ft.log("mediaTypeForIncomingCall is AUDIO"),kt.sdp=Yt.mySDPManager.setRecvOnlyForVideo(kt.sdp)):this.mediaTypeForIncomingCall==="VIDEOONLY"?(Ft.log("mediaTypeForIncomingCall is VIDEOONLY"),kt.sdp=Yt.mySDPManager.setRecvOnlyForAudio(kt.sdp)):this.mediaTypeForIncomingCall==="NONE"&&(Ft.log("mediaTypeForIncomingCall is NONE"),kt.sdp=Yt.mySDPManager.setRecvOnly(kt.sdp))),this.simulcast==="SDP"&&st==="OFFER"&&this.settingUpType==="publish"&&((Tt=Yt.mySDPManager.createGuideline(kt.sdp)).mungeForSimulcasting(),kt.sdp=Tt.generate()),kt},this.setLocalAndSendMessageonOffer=function(kt){Ft.info("setLocalAndSendMessageonOffer"),Ft.log("sessionDescription = ",kt),Ft.log("sessionDescription.sdp = ",kt.sdp);var st=null;kt.sdp=this.manipulateSDP(kt,"OFFER").sdp,Ft.log("manipulated sessionDescription.sdp = ",kt.sdp),this.stripAudioSDPActivated===!0&&(kt.sdp=Yt.mySDPManager.stripAudioMediaDescriptionFromSDP(kt.sdp)),this.stripVideoSDPActivated===!0&&(kt.sdp=Yt.mySDPManager.stripVideoMediaDescriptionFromSDP(kt.sdp)),this.setLocalCallProfile(Yt.evalCallProfileWithSdp(kt.sdp,"local","send")),this.sendedSdpOfferMessage=kt,this.dataCall===!0&&(Ft.log("setLocalAndSendMessageonOffer : data Call"),this.callType="data"),this.callCancelled===!1?Yt.NtoNConf===!1?(Ft.log("Conf N to 1"),this.screenSharing===!0&&(st=Yt.mySDPManager.getAudioMediaDescriptionPart(this.sendedSdpOfferMessage.sdp),this.callType=st!=null?"screenSharingWithAudio":"screenSharing"),this.data&&this.data.MCUType==="MCU-Caller"&&(this.data.mediaStreamId=this.callLocalStream.id),this.trickleIce===!0&&(this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Yt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:kt,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOffer : before setLocalDescription"),this.pc.setLocalDescription(this.sendedSdpOfferMessage,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOffer : before setLocalDescription - Promise version"),this.pc.setLocalDescription(this.sendedSdpOfferMessage).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(Ft.log("Conf N to N"),this.myWebRTC_Stack.sendInviteBroadcast(this.callId,this.callerId,Yt.nickname,this.dest_roomId,this.dest_roomId,kt),this.inviteSended=!0):(Ft.warn("Invite is not sent has call has been canceled"),Yt.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,"Call_Cancelled"),Yt.callsTable.length===0&&Ft.log("No more established calls for client"))},this.setLocalAndSendMessageonOfferUpdate=function(kt){var st,Tt=null;Ft.info("setLocalAndSendMessageonOfferUpdate, sessionDescription :"+kt),this.sendedSdpOfferMessage=kt,Ft.log("sessionDescription.sdp = ",kt.sdp),((0,at.Ym)(this.audioSdpDirection,"string")||(0,at.Ym)(this.videoSdpDirection,"string"))&&(Tt=Yt.mySDPManager.createGuideline(kt.sdp),(0,at.ki)(Tt,"audio","object")&&(0,at.Ym)(this.audioSdpDirection,"string")&&(Tt.audio.direction=this.audioSdpDirection),(0,at.ki)(Tt,"video","object")&&(0,at.Ym)(this.videoSdpDirection,"string")&&(Tt.video.direction=this.videoSdpDirection),kt.sdp=Tt.generate()),this.setLocalCallProfile(Yt.evalCallProfileWithSdp(kt.sdp,"local","send"),!0),st=this.callee?this.callerId:this.calleeId,this.trickleIce===!0?(this.myWebRTC_Stack.sendUpdate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt,this.callType,this.data),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(kt,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(kt).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")))):(Ft.log("Updating PC offer and answer after switch Stream"),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription"),this.pc.setLocalDescription(kt,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(kt).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),Yt.preferSendingH264Codec&&(Ft.log("Modification of SDP to set H264 as prefered sending codec"),this.pc.remoteDescription.sdp=Yt.mySDPManager.maybePreferCodec(this.pc.remoteDescription.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription"),this.pc.setRemoteDescription(this.pc.remoteDescription,this.callback(this,"onSetRemoteDescriptionSuccess"),this.callback(this,"onSetRemoteDescriptionFailure"))):(Ft.log("setLocalAndSendMessageonOfferUpdate : before setRemoteDescription - Promise version"),this.pc.setRemoteDescription(this.pc.remoteDescription).then(this.callback(this,"onSetRemoteDescriptionSuccess")).catch(this.callback(this,"onSetRemoteDescriptionFailure"))))},this.onCreateOfferFailure=function(kt){Ft.info("onCreateOfferFailure"+kt),kt=null},this.onCreateAnswerFailure=function(kt){Ft.info("onCreateAnswerFailure"+kt),kt=null},this.setLocalAndSendMessage=function(kt){var st;Ft.info("setLocalAndSendMessage"),Ft.log("sessionDescription.sdp = ",kt.sdp),this.pc!==null?(kt=this.manipulateSDP(kt,"ANSWER"),st=Yt.mySDPManager.createGuideline(kt.sdp),this.setLocalCallProfile(Yt.evalCallProfileWithSdpGuideline(st,kt.sdp,"local","send")),this.setRemoteCallProfile(Yt.evalCallProfileWithSdpGuideline(st,kt.sdp,"local","receive")),Ft.log("manipulated sessionDescription.sdp = ",kt.sdp),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessage : before setLocalDescription"),this.pc.setLocalDescription(kt,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessage : before setLocalDescription - Promise version"),this.pc.setLocalDescription(kt).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure"))),this.sendedSdpOfferMessage=kt,this.trickleIce===!0&&this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Yt.nickname,this.dest_roomId,kt,this.data)):Ft.log("setLocalAndSendMessage, pc no more exist")},this.setLocalAndSendMessageUpdate=function(kt){var st;if(this.pc!==null){at.wL.type==="safari"&&(kt.sdp=this.manipulateSDP(kt,"OFFER").sdp),st=Yt.mySDPManager.createGuideline(kt.sdp),this.mediaType==="AUDIOONLY"?st.hasOwnProperty("video")&&st.video.direction!=="inactive"&&(Ft.debug("Only audio was requested at call setup: deactivating video"),st.video.direction="inactive",kt.sdp=st.generate()):this.mediaType==="VIDEOONLY"&&st.hasOwnProperty("audio")&&st.audio.direction!=="inactive"&&(Ft.debug("Only video was requested at call setup: deactivating audio"),st.audio.direction="inactive",kt.sdp=st.generate()),this.setLocalCallProfile(Yt.evalCallProfileWithSdpGuideline(st,kt.sdp,"local","send"),!0),this.setRemoteCallProfile(Yt.evalCallProfileWithSdpGuideline(st,kt.sdp,"local","receive"),!0),this.updateOngoingTimeoutId&&(clearTimeout(this.updateOngoingTimeoutId),delete this.updateOngoingTimeoutId),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?(Ft.log("setLocalAndSendMessageUpdate : before setLocalDescription"),this.pc.setLocalDescription(kt,this.callback(this,"onSetLocalDescriptionSuccess"),this.callback(this,"onSetLocalDescriptionFailure"))):(Ft.log("setLocalAndSendMessageUpdate : before setLocalDescription - Promise version"),this.pc.setLocalDescription(kt).then(this.callback(this,"onSetLocalDescriptionSuccess")).catch(this.callback(this,"onSetLocalDescriptionFailure")));var Tt;Tt=this.callee?this.callerId:this.calleeId,this.myWebRTC_Stack.send200Update(this.callId,this.callerId,this.calleeId,this.dest_roomId,Tt,kt,this.data),this.asyncCallbacks&&this.asyncCallbacks.type==="updateMediaType"&&(Ft.debug("asyncCallbacks resolve"),this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)}else Ft.log("setLocalAndSendMessageUpdate, pc no more exist")},this.onIceCandidate=function(kt){try{Ft.debug("onIceCandidate :",JSON.stringify(kt.candidate))}catch(Lt){Ft.error(Lt)}var st,Tt=0,Rt=0;st=this.callee?this.callerId:this.calleeId,this.pc!==null&&(Ft.debug("Ice Connection State is now : "+this.pc.iceConnectionState),Ft.debug("Ice Gathering State is now : "+this.pc.iceGatheringState)),kt.candidate?(this.candidateNb+=1,this.trickleIce===!0?this.mediaRoutingMode===Yt.mediaRoutingModeEnum.hostOnly?(Tt=kt.candidate.candidate.search("host"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt.candidate.sdpMLineIndex,kt.candidate.sdpMid,kt.candidate.candidate,this.data,kt.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is hostOnly and not a HOST Candidate : ignoring message"):this.mediaRoutingMode===Yt.mediaRoutingModeEnum.stun?(Tt=kt.candidate.candidate.search("host"),Rt=kt.candidate.candidate.search("srflx"),Tt!==-1||Rt!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt.candidate.sdpMLineIndex,kt.candidate.sdpMid,kt.candidate.candidate,this.data,kt.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is stun and not a HOST or SRFLX Candidate : ignoring message")):this.mediaRoutingMode===Yt.mediaRoutingModeEnum.stunOnly?(Tt=kt.candidate.candidate.search("srflx"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt.candidate.sdpMLineIndex,kt.candidate.sdpMid,kt.candidate.candidate,this.data,kt.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is stunOnly and not a SRFLX Candidate : ignoring message"):this.mediaRoutingMode===Yt.mediaRoutingModeEnum.turn?(Ft.log("Media routing mode is turn : all candidates are considered"),this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt.candidate.sdpMLineIndex,kt.candidate.sdpMid,kt.candidate.candidate,this.data,kt.candidate,{volatile:!!this.restarted})):this.mediaRoutingMode===Yt.mediaRoutingModeEnum.turnOnly&&((Tt=kt.candidate.candidate.search("relay"))!==-1?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,st,kt.candidate.sdpMLineIndex,kt.candidate.sdpMid,kt.candidate.candidate,this.data,kt.candidate,{volatile:!!this.restarted}):Ft.log("Media routing mode is TurnOnly and not a RELAY Candidate : ignoring message")):Ft.log("trickleIce is deactivated : candidates are not sended")):(Ft.info("End of candidates."),this.trickleIce===!1&&(Ft.log("trickleIce === false"),this.callee===!0?(this.send200OKTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.send200OKTrickleIceFalseTimeOutId),this.send200OKTrickleIceFalseTimeOutId=0),this.message200OKSended===!1?this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,Yt.nickname,this.dest_roomId,this.pc.localDescription,this.data):Ft.log("200OK already sended")):this.pc!==null&&(this.sendInviteTrickleIceFalseTimeOutId!==0&&(clearTimeout(this.sendInviteTrickleIceFalseTimeOutId),this.sendInviteTrickleIceFalseTimeOutId=0),this.inviteSended===!1?(Ft.log("sendInvite on end of candidate"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,Yt.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0):Ft.log("Invite already sended"))))},this.combineRemoteStreams=function(kt,st,Tt,Rt){var Lt=kt.getTracks(),Et=Tt.getTracks();if(Lt.length===1&&Et.length===1&&(Lt[0].kind==="audio"&&Et[0].kind==="video"||Lt[0].kind==="video"&&Et[0].kind==="audio")){Ft.debug("combineRemoteStreams");var jt=new MediaStream;return jt.addTrack(Lt[0]),jt.addTrack(Et[0]),Rt==="internal"&&(Tt.removeTrack(Et[0]),this.onRemoteStreamRemoved({stream:Tt})),st==="internal"&&(kt.removeTrack(Lt[0]),this.onRemoteStreamRemoved({stream:kt})),this.onRemoteStreamAdded({stream:jt}),!0}return!1},this.checkRemoteStreamExists=function(kt,st){var Tt=!1,Rt=null,Lt=null,Et=null,jt=null,Pt=null;for(st&&Array.isArray(st)&&(jt=st.slice(0)),Rt=this.remoteMediaStreams.length;--Rt>=0;){if(this.remoteMediaStreams[Rt].id===kt){Tt=!0;break}if(jt)for(Et=(Lt=this.remoteMediaStreams[Rt].getTracks()).length;--Et>=0;)(Pt=st.indexOf(Lt[Et].id))>=0&&(jt[Pt]=!0)}if(!Tt&&jt){for(Pt=0,Et=jt.length;--Et>=0;)jt[Et]===!0&&(Pt+=1);Pt===jt.length&&(Tt=!0)}return Tt},this.onRemoteStreamAdded=function(kt){var st,Tt,Rt=this;if(Ft.info("onRemoteStreamAdded",kt),this.checkRemoteStreamExists(kt.stream.id,kt.stream.getTracks().map(function(Jt){return Jt.id})))Ft.debug("onRemoteStreamAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",kt.stream,"event")){Ft.debug("onRemoteStreamAdded adding",kt.stream.id),kt.stream.id==="janus"&&this.data.remoteMediaStreamId&&(Ft.debug("onRemoteStreamAdded adding remoteMediaStreamId on stream :",this.data.remoteMediaStreamId),kt.stream.remoteMediaStreamId=this.data.remoteMediaStreamId),this.remoteMediaStreams.push(kt.stream),Ft.log("CallId is :"+this.callId),Ft.log("ClientId is :"+Yt.clientId),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Yt.processRemoteStreamAdded(this,kt.stream),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio");var Lt,Et=function(Jt){var ln=null,mn=null;Jt.onmute=function(an){Ft.debug(Jt.kind+" mute event");var hn="";Jt.kind==="audio"&&ln===null?ln=setTimeout(function(){Rt.isRemoteAudioSilent=!0,hn="audioIsSilentLocally";var En={},Mn={},Pn=[];Pn.push(hn),En.available=Rt.remoteCallProfile.audio,En.active=Rt.remoteCallProfile.audioActive,En.muted=Rt.isRemoteAudioMuted,En.silent=Rt.isRemoteAudioSilent,Mn.available=Rt.remoteCallProfile.video,Mn.active=Rt.remoteCallProfile.videoActive,Mn.muted=Rt.isRemoteVideoMuted,Mn.silent=Rt.isRemoteVideoSilent,Rt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Pn,En,Mn,Rt.destCallType,Rt.callId,"browserAction"),ln=null},2520):Jt.kind==="video"&&mn===null&&(mn=setTimeout(function(){Rt.isRemoteVideoSilent=!0,hn="videoIsSilentLocally";var En={},Mn={},Pn=[];Pn.push(hn),En.available=Rt.remoteCallProfile.audio,En.active=Rt.remoteCallProfile.audioActive,En.muted=Rt.isRemoteAudioMuted,En.silent=Rt.isRemoteAudioSilent,Mn.available=Rt.remoteCallProfile.video,Mn.active=Rt.remoteCallProfile.videoActive,Mn.muted=Rt.isRemoteVideoMuted,Mn.silent=Rt.isRemoteVideoSilent,Rt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Pn,En,Mn,Rt.destCallType,Rt.callId,"browserAction"),mn=null},2520))},Jt.onunmute=function(an){if(Ft.debug(Jt.kind+" unmute event"),Jt.kind==="audio"&&ln!==null)clearTimeout(ln),ln=null;else if(Jt.kind==="video"&&mn!==null)clearTimeout(mn),mn=null;else{var hn="";Jt.kind==="audio"?(Rt.isRemoteAudioSilent=!1,hn="audioIsSilentLocally"):Jt.kind==="video"&&(Rt.isRemoteVideoSilent=!1,hn="videoIsSilentLocally");var En={},Mn={},Pn=[];Pn.push(hn),En.available=Rt.remoteCallProfile.audio,En.active=Rt.remoteCallProfile.audioActive,En.muted=Rt.isRemoteAudioMuted,En.silent=Rt.isRemoteAudioSilent,Mn.available=Rt.remoteCallProfile.video,Mn.active=Rt.remoteCallProfile.videoActive,Mn.muted=Rt.isRemoteVideoMuted,Mn.silent=Rt.isRemoteVideoSilent,Rt.myWebRTC_Event.createRemoteStreamUpdatedEvent(Pn,En,Mn,Rt.destCallType,Rt.callId,"browserAction")}},Jt.onended=function(an){Ft.debug(Jt.kind+" ended event"),Jt.kind==="audio"&&ln!==null?(clearTimeout(ln),ln=null):Jt.kind==="video"&&mn!==null&&(clearTimeout(mn),mn=null)}},jt=nn(kt.stream.getVideoTracks());try{for(jt.s();!(Lt=jt.n()).done;){var Pt=Lt.value;Et(Pt),this.isRemoteVideoSilent=Pt.muted}}catch(Jt){jt.e(Jt)}finally{jt.f()}var Vt,Zt=nn(kt.stream.getAudioTracks());try{for(Zt.s();!(Vt=Zt.n()).done;){var rn=Vt.value;Et(rn),this.isRemoteAudioSilent=rn.muted}}catch(Jt){Zt.e(Jt)}finally{Zt.f()}st={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Tt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.stream,this.remoteId,this.destCallType,st,Tt):this.data.type==="publish"&&this.data.mode!=="passive"?Ft.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(Ft.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,kt.stream,this.remoteId,this.destCallType,st,Tt)):Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.stream,this.remoteId,this.destCallType,st,Tt):Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.stream,this.remoteId,this.destCallType,st,Tt)}},this.onRemoteTrackAdded=function(kt){var st,Tt;if(Ft.info("onRemoteTrackAdded",kt),kt.streams[0]!==void 0&&kt.track!==void 0){if(this.checkRemoteStreamExists(kt.streams[0].id,[kt.track.id]))Ft.debug("onRemoteTrackAdded: ignoring event; stream/track already known");else if(this.remoteMediaStreams.length!==1||!this.combineRemoteStreams(this.remoteMediaStreams[0],"internal",kt.streams[0],"event")){if(this.belongsToRoom()){if(this.callType==="audio"&&kt.track.kind!=="audio"||this.callType==="videoOnly"&&kt.track.kind!=="video"||this.callType==="media"&&kt.track.kind!=="video"||this.callType==="screenSharing"&&kt.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&kt.track.kind!=="video")return void Ft.debug("onRemoteTrackAdded: ignoring event; callType: "+this.callType+", event.track.kind: "+kt.track.kind)}else if(this.destCallType==="audio"&&kt.track.kind!=="audio"||this.destCallType==="videoOnly"&&kt.track.kind!=="video"||this.destCallType==="media"&&kt.track.kind!=="video"||this.destCallType==="screenSharing"&&kt.track.kind!=="video"||this.destCallType==="screenSharingWithAudio"&&kt.track.kind!=="video")return Ft.debug("onRemoteTrackAdded: ignoring event; destCallType: "+this.destCallType+", event.track.kind: "+kt.track.kind),void(this.remoteMediaStreams.length===2&&this.combineRemoveStreams(this.remoteMediaStreams[0],"internal",this.remoteMediaStreams[1],"internal"));Ft.debug("onRemoteTrackAdded adding; stream.id: "+kt.streams[0].id),this.remoteMediaStreams.push(kt.streams[0]),Ft.log("CallId is :"+this.callId),Ft.log("ClientId is :"+Yt.clientId),Ft.log("this.callType :"+this.callType),this.screenSharing===!0?this.callType="screenSharing":this.audioOnly===!0&&(this.callType="audio"),this.sessionMCU&&this.sessionMCU.modeChangeKind==="new"&&Yt.processRemoteStreamAdded(this,kt.streams[0]),kt.streams[0].onaddtrack=function(Rt){Ft.debug("onRemoteTrackAdded ontrack.onaddtrack",Rt)},kt.streams[0].onremovetrack=(function(Rt){var Lt=null;if(Ft.debug("onRemoteTrackAdded ontrack.onremovetrack",Rt),this.updateOngoingTimeoutId)return Ft.debug("onRemoteTrackAdded onremovetrack: update ongoing"),void Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event",Rt.track.kind);if(this.callType==="audio"&&Rt.track.kind!=="audio"||this.callType==="videoOnly"&&Rt.track.kind!=="video"||this.callType==="media"&&Rt.track.kind!=="video"||this.callType==="screenSharing"&&Rt.track.kind!=="video"||this.callType==="screenSharingWithAudio"&&Rt.track.kind!=="video")Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event",Rt.track.kind);else if(Rt.target instanceof MediaStream){for(Lt=this.remoteMediaStreams.length;--Lt>=0;)if(this.remoteMediaStreams[Lt].id===Rt.target.id){Ft.debug("onRemoteTrackAdded onremovetrack removing",Rt.target.id),this.remoteMediaStreams.splice(Lt,1);break}Yt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,Rt.target,this.remoteId,this.destCallType)}else Ft.debug("onRemoteTrackAdded onremovetrack: ignoring event target not MediaStream")}).bind(this),st={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},Tt={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},this.data!==null?this.data.mesh!==void 0?(this.callType==="audio"&&kt.track.kind==="audio"||this.callType==="videoOnly"&&kt.track.kind==="video"||this.callType==="media"&&kt.track.kind==="video"||this.callType==="screenSharing"&&kt.track.kind==="video"||this.callType==="screenSharingWithAudio"&&kt.track.kind==="video")&&Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.streams[0],this.remoteId,this.destCallType,st,Tt):this.data.type==="publish"&&this.data.mode!=="passive"?Ft.warn("Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls"):this.belongsToRoom()?(this.callType==="audio"&&kt.track.kind==="audio"||this.callType==="videoOnly"&&kt.track.kind==="video"||this.callType==="media"&&kt.track.kind==="video"||this.callType==="screenSharing"&&kt.track.kind==="video"||this.callType==="screenSharingWithAudio"&&kt.track.kind==="video")&&(this.data.subscribeOrder===!0&&this.data.pubCallId!==void 0?(Ft.debug("substitute callId: "+this.callId+" -> "+this.data.pubCallId),Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,kt.streams[0],this.remoteId,this.destCallType,st,Tt)):Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.streams[0],this.remoteId,this.destCallType,st,Tt)):(this.destCallType==="audio"&&kt.track.kind==="audio"||this.destCallType==="videoOnly"&&kt.track.kind==="video"||this.destCallType==="media"&&kt.track.kind==="video"||this.destCallType==="screenSharing"&&kt.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&kt.track.kind==="video")&&Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.streams[0],this.remoteId,this.destCallType,st,Tt):this.belongsToRoom()?(this.callType==="audio"&&kt.track.kind==="audio"||this.callType==="videoOnly"&&kt.track.kind==="video"||this.callType==="media"&&kt.track.kind==="video"||this.callType==="screenSharing"&&kt.track.kind==="video"||this.callType==="screenSharingWithAudio"&&kt.track.kind==="video")&&Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.streams[0],this.remoteId,this.destCallType,st,Tt):(this.destCallType==="audio"&&kt.track.kind==="audio"||this.destCallType==="videoOnly"&&kt.track.kind==="video"||this.destCallType==="media"&&kt.track.kind==="video"||this.destCallType==="screenSharing"&&kt.track.kind==="video"||this.destCallType==="screenSharingWithAudio"&&kt.track.kind==="video")&&Yt.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,kt.streams[0],this.remoteId,this.destCallType,st,Tt)}}else Ft.debug("onRemoteTrackAdded: ignoring event; event data are not correct")},this.onRemoteStreamRemoved=function(kt){var st=null;for(Ft.info("onRemoteStreamRemoved",kt),st=this.remoteMediaStreams.length;--st>=0;)if(this.remoteMediaStreams[st].id===kt.stream.id){Ft.debug("onRemoteStreamRemoved removing",kt.stream.id),this.remoteMediaStreams.splice(st,1);break}Yt.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,kt.stream,this.remoteId,this.destCallType),kt=null},this.onNegotiationNeeded=function(kt){Ft.debug("onNegotiationNeeded",kt),kt=null,this.addingDataChannelOnCallOngoing&&(this.updateMediaWithRetryManagement(!1),this.addingDataChannelOnCallOngoing=!1)},this.onSignalingStateChange=function(kt){Ft.debug("onSignalingStateChange",kt),kt=null},this.onCallDisconnection=function(){Ft.info("onCallDisconnection; callId: "+this.callId);var kt=new Date;Ft.debug("date:",kt),this.disconnectionWarningInterval!==0&&(Ft.debug("date:",kt),Ft.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.disconnectionWarningTimeout!==0&&(Ft.debug("date:",kt),Ft.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.disconnectionWarningTimeout),this.disconnectionWarningTimeout=0),this.belongsToRoom()?Yt.onHangup(this.callId,"disconnected"):Yt.onHangup(this.callId,"Ice_disconnected")},this.sendDisconnectionWarning=function(){Ft.log("sendDisconnectionWarning()");var kt=null,st=null;if(this.callControl&&(kt=this.callControl.roomName,st=this.callControl.type),this.disconnectionWarningCount++,un.createEvent({eventType:"disconnectionWarning",callId:this.callId,remoteId:this.remoteId,tries:this.disconnectionWarningCount,roomName:kt,settingUpType:st}),(this.disconnectionWarningCount-1)*this.disconnectionWarningDelay>=this.disconnectionTimer&&this.disconnectionWarningInterval!==0){var Tt=Date();Ft.debug("date :"+Tt),Ft.debug("clearing disconnectionWarningInterval : no more warnings"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0}},this.createIceErrorDescriptor=function(kt,st){var Tt={};return kt==="disconnected"?Tt.iceState="disconnected":kt==="failed"?(Tt.iceState="failed",st===!0&&(Tt.previousIceState="disconnected")):Tt.iceState="unknown",Tt.callType=this.callType,this.belongsToRoom()?(Tt.context="conf",this.data.mesh?(Tt.mode="mesh",(this.data.mesh.callerCompositeUserId?this.data.mesh.callerCompositeUserId===Yt.compositeClientId:this.data.mesh.callerId===Yt.clientId)?(Tt.type="subscribe",Tt.clientId=this.data.mesh.callerId,Tt.remoteId=this.data.mesh.calleeId):(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===Yt.compositeClientId:this.data.mesh.calleeId===Yt.clientId)?(Tt.type="publish",Tt.clientId=this.data.mesh.calleeId,Tt.remoteId=this.data.mesh.callerId):Tt.type="unknown",Tt.mesh=this.data.mesh):(Tt.mode="sfu",this.settingUpType==="publish"||this.settingUpType==="shareScreen"?Tt.type="publish":this.settingUpType==="subscribe"?Tt.type="subscribe":Tt.type="unknown",this.callee?(Tt.clientId=this.calleeId,Tt.remoteId=this.callerId):(Tt.clientId=this.callerId,Tt.remoteId=this.calleeId)),this.mcuRemoteStream&&(Tt.stream=this.mcuRemoteStream)):(Tt.context="call",Tt.mode="p2p",this.callerId===Yt.clientId?(Tt.clientId=this.callerId,Tt.remoteId=this.calleeId):this.calleeId===Yt.clientId&&(Tt.clientId=this.calleeId,Tt.remoteId=this.callerId)),Tt},this.onIceConnectionStateChange=function(kt){Ft.debug("onIceConnectionStateChange: ",kt),kt=null;var st=0,Tt=null,Rt=null,Lt=null;this.pc!==null?(Ft.info("Ice Connection State is now : "+this.pc.iceConnectionState),this.iceState=this.pc.iceConnectionState,this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"||this.pc.iceConnectionState==="checking"?(Ft.debug("iceConnectionState === connected or completed or checking"),Ft.debug("this.disconnectionTimeoutId :"+this.disconnectionTimeoutId),this.disconnectionTimeoutId!==0&&(st=Date(),Ft.debug("date:",st),Ft.debug("clearing disconnectionTimeout"),clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0),this.disconnectionWarningInterval!==0&&(st=Date(),Ft.debug("date:",st),Ft.debug("clearing disconnectionWarningInterval"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),this.pc.iceConnectionState!=="checking"&&(this.checkCandidateTypesTimeoutId=setTimeout(this.callback(this,"checkCandidateTypes"),this.checkCandidateTypesTimer),this.checkCandidateTypesTimeoutTable.push(this.checkCandidateTypesTimeoutId))):this.pc.iceConnectionState==="disconnected"?(this.callControl&&(Tt=this.callControl.roomName,Rt=this.callControl.type),(Lt=this.createIceErrorDescriptor("disconnected")).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Yt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Yt.MCUClient.pubConnector,descriptor:Lt}),Ft.warn("disconnection detected"),un.createErrorEvent("iceDisconnection detected","ICE_CONNECTION_STATE_DISCONNECTED",this.callId,Tt,Rt,Lt),st=new Date,Ft.debug("date:",st),this.disconnectionTimeoutId=setTimeout(this.callback(this,"onCallDisconnection"),this.disconnectionTimer),this.disconnectionWarningCount=0,this.disconnectionWarningTimeout=setTimeout(this.callback(this,"sendDisconnectionWarning"),2e3),this.disconnectionWarningInterval=setInterval(this.callback(this,"sendDisconnectionWarning"),this.disconnectionWarningDelay)):this.pc.iceConnectionState==="failed"&&(this.callControl&&(Tt=this.callControl.roomName,Rt=this.callControl.type),(Lt=this.createIceErrorDescriptor("failed",this.disconnectionTimeoutId!==0)).context==="conf"&&this.myWebRTC_Stack.sendInfo("iceError",{clientId:Yt.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:Yt.MCUClient.pubConnector,descriptor:Lt}),Ft.warn("iceConnection failed detected"),un.createErrorEvent("iceConnection failed detected","ICE_CONNECTION_STATE_FAILED",this.callId,Tt,Rt,Lt),this.disconnectionTimeoutId!==0?this.belongsToRoom()&&(clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0,Yt.onHangup(this.callId,"disconnected")):this.belongsToRoom()&&(0,at.ki)(this.callControl,["autoRestart","counter"],"number")&&this.callControl.autoRestart.counter>0?Yt.onHangup(this.callId,"disconnected"):(Ft.warn("Removing call with callId: "+this.callId),Yt.removeCallFromTableWithCallIdAndSendBye(this.callId,"Ice_failed")))):Ft.log("Ice Connection State change with pc is null")},this.callback=function(kt,st){return this.closureHandler=function(Tt,Rt){return kt[st](Tt,Rt)},this.closureHandler},this.onSelectedCandidate=function(kt){if(this.selectedCandidate===void 0||this.selectedCandidate===null||this.selectedCandidate.LocalCandidateType!==kt.LocalCandidateType||this.selectedCandidate.RemoteCandidateType!==kt.RemoteCandidateType||this.selectedCandidate.LocalAddress!==kt.LocalAddress||this.selectedCandidate.RemoteAddress!==kt.RemoteAddress||this.selectedCandidate.TransportType!==kt.TransportType||this.selectedCandidate.LocalTransportType!==kt.LocalTransportType){Ft.debug("WebRTC_Call::onSelectedCandidate() :",kt),this.selectedCandidate=kt,this.callControl&&this.callControl.autoRestart&&(Ft.debug("selectedCandidate, this.callControl.autoRestart.counter:",this.callControl.autoRestart.counter),Ft.debug("selectedCandidate, this.callControl.autoRestart.callIdWhenStartingTimer:",this.callControl.autoRestart.callIdWhenStartingTimer),this.callControl.autoRestart.counter&&(Ft.debug("Reinit of autoRestart.counter"),this.callControl.autoRestart.counter=0,this.callControl.autoRestart.callIdWhenStartingTimer!==void 0&&Yt.stopMaxCallRetriesTimer(this.callControl.autoRestart.callIdWhenStartingTimer))),this.myWebRTC_Event.createSelectedICECandidateEvent(this.callId,kt.LocalCandidateType,kt.RemoteCandidateType,kt.LocalAddress,kt.RemoteAddress,kt.TransportType,kt.LocalTransportType);var st=kt;st.callId=this.callId,st.clientId=Yt.clientId,st.roomId=this.dest_roomId,this.data.pubSub!==void 0&&(st.pubSub=this.data.pubSub),this.data.confId!==void 0&&(st.confId=this.data.confId),this.data.mesh!==void 0&&(st.mesh=this.data.mesh),this.data.instanceId!==void 0&&(st.instanceId=this.data.instanceId),this.myWebRTC_Stack.sendInfo("callSelectedCandidate",st)}else Ft.debug("filtering duplicate candidate")},this.checkCandidateTypes=function(){Ft.debug("WebRTC_Call::checkCandidatesTypes()");var kt=this,st={LocalCandidateType:"unknow",RemoteCandidateType:"unknow",LocalAddress:"unknow",RemoteAddress:"unknow",TransportType:"unknow",LocalTransportType:"unknow",relayTransportType:"unknow"},Tt=["googLocalAddress","googLocalCandidateType","googRemoteAddress","googRemoteCandidateType","googTransportType"];this.pc===null?(Ft.warn("Peer connection is null : no candidates"),kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st)):typeof apiRTC_React<"u"?(Ft.debug("apiRTC_React : WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats().then(function(Rt){var Lt=null;if(Rt.forEach(function(Pt){Pt.nominated===!0&&(Lt=Pt)}),Lt!==null){var Et=Rt.get(Lt.localCandidateId),jt=Rt.get(Lt.remoteCandidateId);st.LocalCandidateType=Et.candidateType,st.RemoteCandidateType=jt.candidateType,Et.address&&Et.port&&(st.LocalAddress=Et.address+":"+Et.port),jt.address&&jt.port&&(st.RemoteAddress=jt.address+":"+jt.port),st.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(st.relayTransportType=Et.relayProtocol),kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st)}}).catch(function(Rt){Ft.error(Rt)})):at.wL.type==="chrome"&&nt.PR<=112?(Ft.debug("WebRTC_Call::checkCandidatesTypes() chrome <= 112"),this.pc.getStats(function(Rt){var Lt=Rt.result().filter(function(Et){return Et.id.indexOf("Conn-")===0&&Et.stat("googActiveConnection")==="true"})[0];Lt?(Tt.forEach(function(Et){st[Et.replace("goog","")]=Lt.stat(Et)}),kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st)):(kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st))})):at.wL.type==="chrome"||at.wL.type==="firefox"||at.wL.type==="safari"?(Ft.debug("WebRTC_Call::checkCandidatesTypes()"),this.pc.getStats(null).then(function(Rt){var Lt=null;if(Rt.forEach(function(Pt){Pt.selected===!0&&at.wL.type==="firefox"?(Lt!==null&&Ft.warn("multiple selected candidate-pairs"),Lt=Pt):Pt.nominated===!0&&(Lt=Pt)}),Lt!==null){var Et=Rt.get(Lt.localCandidateId),jt=Rt.get(Lt.remoteCandidateId);st.LocalCandidateType=Et.candidateType,st.RemoteCandidateType=jt.candidateType,Et.address&&Et.port?st.LocalAddress=Et.address+":"+Et.port:Et.ipAddress&&Et.portNumber&&(st.LocalAddress=Et.ipAddress+":"+Et.portNumber),jt.address&&jt.port?st.RemoteAddress=jt.address+":"+jt.port:jt.ipAddress&&jt.portNumber&&(st.RemoteAddress=jt.ipAddress+":"+jt.portNumber),st.TransportType=Et.protocol,Et.candidateType==="relay"&&Et.relayProtocol!==void 0&&(st.relayTransportType=Et.relayProtocol),kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st)}}).catch(function(Rt){Ft.warn("failed to get stats",Rt)})):(Ft.debug("checkCandidateTypes not Chrome or Firefox"),kt.myWebRTC_Event.createICECandidateTypeUpdateEvent(kt.callId,st.LocalCandidateType,st.RemoteCandidateType),kt.onSelectedCandidate(st))},this.belongsToRoom=function(){return!!(0,at.ki)(this.sessionMCU,"roomName","string")&&((0,at.ki)(this.data,"MCUType","string")&&(this.data.MCUType==="MCU-Caller"||this.data.MCUType==="MCU-Callee")&&(0,at.ki)(this.data,"confId","string")?this.data.confId===this.sessionMCU.roomName:this.dest_roomId===this.sessionMCU.roomName)},this.setLocalCallProfile=function(kt){var st=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Tt=[],Rt={},Lt={},Et=null,jt=null,Pt="adaptation";this.dataCall!==!0&&this.settingUpType!=="subscribe"&&(this.localCallProfile.audioActive!==kt.audioActive&&Tt.push("audioIsActive"),this.localCallProfile.videoActive!==kt.videoActive&&Tt.push("videoIsActive"),this.localCallProfile=kt,this.screenSharing===!0?this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Tt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")):this.localCallProfile.audioActive===!0&&this.localCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Tt.push("callType")):this.localCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.localCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")),st===!0&&Tt.length>0&&(Rt.available=this.localCallProfile.audio,Rt.active=this.localCallProfile.audioActive,Rt.muted=this.isLocalAudioMuted,Rt.silent=this.isRemoteAudioSilent,Lt.available=this.localCallProfile.video,Lt.active=this.localCallProfile.videoActive,Lt.muted=this.isLocalVideoMuted,Lt.silent=this.isRemoteVideoSilent,this.callConfiguration&&this.callConfiguration.userMediaStreamId&&(Et=this.callConfiguration.userMediaStreamId,(jt=apiCC.getUserMediaStream(Et))&&(Rt.deviceLabel=jt.audioDeviceLabel,Lt.deviceLabel=jt.videoDeviceLabel)),this.updateCause&&(Pt=this.updateCause),this.myWebRTC_Event.createLocalStreamUpdatedEvent(Tt,Rt,Lt,!0,this.callType,this.callId,this.callLocalStream,Et,Pt)))},this.setRemoteCallProfile=function(kt){var st=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Tt=[],Rt={},Lt={},Et="adaptation";this.dataCall!==!0&&(this.remoteCallProfile.audioActive!==kt.audioActive&&Tt.push("audioIsActive"),this.remoteCallProfile.videoActive!==kt.videoActive&&Tt.push("videoIsActive"),this.remoteCallProfile=kt,this.settingUpType==="subscribe"?(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharingWithAudio"&&(this.callType="screenSharingWithAudio",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="screenSharing"&&(this.callType="screenSharing",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")):this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.callType!=="media"&&(this.callType="media",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.callType!=="audio"&&(this.callType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.callType!=="videoOnly"&&(this.callType="videoOnly",Tt.push("callType")):this.callType!=="inactive"&&(this.callType="inactive",Tt.push("callType")),st===!0&&Tt.length>0&&(Rt.available=this.remoteCallProfile.audio,Rt.active=this.remoteCallProfile.audioActive,Rt.muted=this.isRemoteAudioMuted,Rt.silent=this.isRemoteAudioSilent,Lt.available=this.remoteCallProfile.video,Lt.active=this.remoteCallProfile.videoActive,Lt.muted=this.isRemoteVideoMuted,Lt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Tt,Rt,Lt,this.callType,this.callId,Et))):(this.screenSharing===!0?this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharingWithAudio"&&(this.destCallType="screenSharingWithAudio",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="screenSharing"&&(this.destCallType="screenSharing",Tt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Tt.push("callType")):this.settingUpType!=="publish"&&this.settingUpType!=="shareScreen"||(this.remoteCallProfile.audioActive===!0&&this.remoteCallProfile.videoActive===!0?this.destCallType!=="media"&&(this.destCallType="media",Tt.push("callType")):this.remoteCallProfile.audioActive===!0?this.destCallType!=="audio"&&(this.destCallType="audio",Tt.push("callType")):this.remoteCallProfile.videoActive===!0?this.destCallType!=="videoOnly"&&(this.destCallType="videoOnly",Tt.push("callType")):this.destCallType!=="inactive"&&(this.destCallType="inactive",Tt.push("callType"))),st===!0&&Tt.length>0&&(Rt.available=this.remoteCallProfile.audio,Rt.active=this.remoteCallProfile.audioActive,Rt.muted=this.isRemoteAudioMuted,Rt.silent=this.isRemoteAudioSilent,Lt.available=this.remoteCallProfile.video,Lt.active=this.remoteCallProfile.videoActive,Lt.muted=this.isRemoteVideoMuted,Lt.silent=this.isRemoteVideoSilent,this.updateCause&&(Et=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(Tt,Rt,Lt,this.destCallType,this.callId,Et))))},this.setMediaConstraintsToSendOnlyOffer=function(){at.wL.type==="firefox"?nt.PR>43?this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:at.wL.type==="edge"?this.mediaConstraints={offerToReceiveAudio:0,offerToReceiveVideo:0}:at.wL.type==="chrome"&&at.wL.version<55?this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1,mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},this.mediaConstraintsAudioOnly=this.mediaConstraints},this.applyOutgoingBitrate=function(kt){var st=this;Ft.debug("applyOutgoingBitrate",this.callId,kt);for(var Tt=null,Rt=0;Rt<this.rtpSenders.video.length;Rt+=1)if(this.rtpSenders.video[Rt].track){Tt=this.rtpSenders.video[Rt];break}if(Tt)if(typeof Tt.getParameters=="function"&&typeof Tt.setParameters=="function"){var Lt=Tt.getParameters();if(Object.prototype.hasOwnProperty.call(Lt,"encodings")){if(Lt.encodings.length!==1)return void Ft.debug("encodings cannot be changed",this.callId,Lt.encodings.length)}else Lt.encodings=[{}];if(kt!==null&&typeof kt=="number"){kt<50&&(kt=50);var Et=1e3*kt;if(Lt.encodings[0].maxBitrate===Et)return;Lt.encodings[0].maxBitrate=Et}else{if(!Object.prototype.hasOwnProperty.call(Lt.encodings[0],"maxBitrate"))return;delete Lt.encodings[0].maxBitrate}Tt.setParameters(Lt).catch(function(jt){Ft.error("applyOutgoingBitrate - setParameters",st.callId,jt)})}else Ft.warn("no such functions: getParameters/setParameters",this.callId);else Ft.warn("no such video rtpSender",this.callId)},this.configureSimulcastEncodings=function(kt){var st=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ft.debug("configureSimulcastEncodings",this.callId,kt,Tt.maxBitrate),this.simulcast==="RID"){for(var Rt=null,Lt=0;Lt<this.rtpSenders.video.length;Lt+=1)if(this.rtpSenders.video[Lt].track){Rt=this.rtpSenders.video[Lt];break}if(Rt)if(typeof Rt.getParameters=="function"&&typeof Rt.setParameters=="function"){var Et=Rt.getParameters();if(Object.prototype.hasOwnProperty.call(Et,"encodings"))if(Et.encodings.length===3){for(var jt=null,Pt=null,Vt=null,Zt=Et.encodings.length;--Zt>=0;){var rn=Et.encodings[Zt];jt||rn.rid!=="h"?Pt||rn.rid!=="m"?Vt||rn.rid!=="l"||(Vt=rn):Pt=rn:jt=rn}if(jt&&Object.prototype.hasOwnProperty.call(jt,"maxBitrate")&&Pt&&Object.prototype.hasOwnProperty.call(Pt,"maxBitrate")&&Vt&&Object.prototype.hasOwnProperty.call(Vt,"maxBitrate")){var Jt=!1,ln=Math.floor(Vt.maxBitrate/1e3),mn=!1,an=!1;if(jt.active&&jt.maxBitrate>1&&(ln+=Math.floor(jt.maxBitrate/1e3),mn=!0),Pt.active&&Pt.maxBitrate>1&&(ln+=Math.floor(Pt.maxBitrate/1e3),an=!0),Ft.debug("currentStatus",ln,mn,an),kt==="changeMaxBitrate"){if(!(0,at.ki)(Tt,"maxBitrate","number"))return;var hn=Tt.maxBitrate;ln<=hn?(an||ln+this.callConfiguration.simulcast.encodings.medium.maxBitrate<=hn&&(at.wL.type==="chrome"?Pt.active=!0:at.wL.type==="firefox"&&(Pt.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.medium.maxBitrate),this.callConfiguration.simulcast.encodings.medium.active=!0,an=!0,ln+=this.callConfiguration.simulcast.encodings.medium.maxBitrate,Jt=!0),mn||ln+this.callConfiguration.simulcast.encodings.high.maxBitrate<=hn&&(at.wL.type==="chrome"?jt.active=!0:at.wL.type==="firefox"&&(jt.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.high.maxBitrate),this.callConfiguration.simulcast.encodings.high.active=!0,mn=!0,ln+=this.callConfiguration.simulcast.encodings.high.maxBitrate,Jt=!0)):(mn&&(mn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,ln-=Math.floor(jt.maxBitrate/1e3),at.wL.type==="chrome"?jt.active=!1:at.wL.type==="firefox"&&(jt.maxBitrate=1),Jt=!0),ln>hn&&an&&(an=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,ln-=Math.floor(Pt.maxBitrate/1e3),at.wL.type==="chrome"?Pt.active=!1:at.wL.type==="firefox"&&(Pt.maxBitrate=1),Jt=!0))}else kt==="disableEncoding"&&(mn?(mn=!1,this.callConfiguration.simulcast.encodings.high.active=!1,ln-=Math.floor(jt.maxBitrate/1e3),at.wL.type==="chrome"?jt.active=!1:at.wL.type==="firefox"&&(jt.maxBitrate=1),Jt=!0):an&&(an=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,ln-=Math.floor(Pt.maxBitrate/1e3),at.wL.type==="chrome"?Pt.active=!1:at.wL.type==="firefox"&&(Pt.maxBitrate=1),Jt=!0));Ft.debug("applyChanges",ln,mn,an,Jt),Jt&&(Rt.setParameters(Et).catch(function(En){Ft.error("configureEncodings - setParameters",st.callId,En)}),this.myWebRTC_Stack.sendInfo("configureEncodings",{pubSub:Yt.MCUClient.pubConnector,clientId:Yt.clientId,roomId:this.sessionMCU.roomName,callId:this.callId,instanceId:this.instanceId,hint:"simulcast",encodings:this.callConfiguration.simulcast.encodings}))}else Ft.warn("cannot find h/m/l encodings",this.callId)}else Ft.warn("wrong encodings",this.callId,Et.encodings.length);else Ft.warn("no encodings configured",this.callId)}else Ft.warn("no such functions: getParameters/setParameters",this.callId);else Ft.warn("no such video rtpSender",this.callId)}}},yn=(s(4363),s(9653),function(Yt){this.disconnectionTimer=15e3,Number.MAX_SAFE_INTEGER!==void 0?this.userMediaId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaId=Math.floor(1000001*Math.random()).toString(),this.callType="media",this.audio=!1,this.video=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.callConfiguration={},this.sessionMCU=null,this.myWebRTC_Stack=new ht.S(Yt.socket),this.getUserMediaStream=function(){return this.callConfiguration&&this.callConfiguration.userMediaStreamId?apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId):null},this.releaseUserMediaStream=function(){if(this.callConfiguration&&this.callConfiguration.userMediaStreamId){var kt=this.callConfiguration.userMediaStreamId;return delete this.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(kt,this.userMediaId)}return!1},this.close=function(){(this.addAck||this.addTimeoutId)&&(delete this.addAck,clearTimeout(this.addTimeoutId),delete this.addTimeoutId)}});function cn(Yt){return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},cn(Yt)}function gn(Yt,kt){var st=typeof Symbol<"u"&&Yt[Symbol.iterator]||Yt["@@iterator"];if(!st){if(Array.isArray(Yt)||(st=function(Pt,Vt){if(Pt){if(typeof Pt=="string")return Cn(Pt,Vt);var Zt=Object.prototype.toString.call(Pt).slice(8,-1);return Zt==="Object"&&Pt.constructor&&(Zt=Pt.constructor.name),Zt==="Map"||Zt==="Set"?Array.from(Pt):Zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Zt)?Cn(Pt,Vt):void 0}}(Yt))||kt&&Yt&&typeof Yt.length=="number"){st&&(Yt=st);var Tt=0,Rt=function(){};return{s:Rt,n:function(){return Tt>=Yt.length?{done:!0}:{done:!1,value:Yt[Tt++]}},e:function(Pt){throw Pt},f:Rt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Lt,Et=!0,jt=!1;return{s:function(){st=st.call(Yt)},n:function(){var Pt=st.next();return Et=Pt.done,Pt},e:function(Pt){jt=!0,Lt=Pt},f:function(){try{Et||st.return==null||st.return()}finally{if(jt)throw Lt}}}}function Cn(Yt,kt){(kt==null||kt>Yt.length)&&(kt=Yt.length);for(var st=0,Tt=new Array(kt);st<kt;st++)Tt[st]=Yt[st];return Tt}var fn=et.Y.get("ApiCCMCUClient"),Tn=apiCC.myWebRTC_Event,On=3e4,Ln=function(Yt,kt){fn.debug("ApiCCMCUClient creation"),this.pubConnector="janusConnector",this.meshModeEnabled=!1,this.sessionMCUs=[],this.distantCalls=[],this.streamList=[],this.disputableStreamList=[],this.publishCallId=null,this.joinSessionReqs=[],this.transitionCount=0,this.browserCapabilities={updateStream:!0,mesh2janusTransition:!0,checkCallStatus:!0},this.receiveSessionId=function(st){fn.debug("receiveSessionId()"),Tn.createMCUSessionCreationEvent(st.sessionId,st.token),this.publish(st.sessionId,st.token)},this.sendSessionInvitation=function(st,Tt,Rt){var Lt,Et;fn.debug("sendSessionInvitation()"),Tt!=null?(Rt===void 0&&(Rt=0),Lt={type:"MCUSessionInvitation",srcId:kt,destId:st,sessionId:Tt,groupChatId:Rt},Et=JSON.stringify(Lt),fn.log("C->S: "+Et),apiCC.session.channel.socket.emit("MCUSessionInvitation",Et)):fn.log("Session is null or undefined, MCU Session invitation is not sended")},this.sendSessionInvitationToGroupChat=function(st,Tt){if(fn.debug("sendSessionInvitationToGroupChat()"),st!=null)if(Tt!=null){var Rt,Lt;Rt={type:"MCUSessionInvitationToGroupChat",srcId:kt,groupChatId:st,sessionId:Tt},Lt=JSON.stringify(Rt),fn.log("C->S: "+Lt),apiCC.session.channel.socket.emit("MCUSessionInvitationToGroupChat",Lt)}else fn.log("Session is null or undefined, MCU Session invitation is not sended");else fn.log("groupChatId is null or undefined, MCU Session invitation is not sended")},this.receiveSessionInvitation=function(st){fn.debug("receiveSessionInvitation()"),fn.log("msg.sessionId :"+st.sessionId),fn.log("msg.token :"+st.token),fn.log("msg.groupChatId :"+st.groupChatId),Tn.createReceiveMCUSessionInvitationEvent(st.sessionId,st.token,st.groupChatId,st.srcId)},this.acceptSessionInvitation=function(st,Tt){fn.debug("acceptSessionInvitation()"),fn.log("sessionId :"+st),fn.log("token :"+Tt),this.publish(st,Tt)},this.leaveSession=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fn.info("leaveSession()");var Rt=null,Lt=null,Et=null;if(!(Et=st?this.getSessionMCU(st):this.getSessionMCU(null,{first:!0})))return new Error("leaveSession: session not set");Tt.noHangup!==!0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.removeAllCallsFromRoom(Et.roomName,"leaveSession"),this.meshOnHangup(null,null,{roomId:Et.roomName}));var jt=[],Pt={};jt.push(Et.roomName),Pt.doneByApiRTC=!0,apiCC.session.leavePresenceGroup(jt,Pt),apiCC.session.unsubscribePresenceGroup(jt,Pt),Rt={type:"leaveSession",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},Lt=JSON.stringify(Rt),fn.log("C->S: "+Lt),apiCC.session.channel.socket.emit("leaveSession",Lt),fn.debug("leaveSession: distant call clean up");for(var Vt=this.distantCalls.length;--Vt>=0;)this.distantCalls[Vt].roomId===Et.roomName&&(fn.debug("leaveSession: remove distant call descriptor",this.distantCalls[Vt]),this.distantCalls.splice(Vt,1));apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({multi:!0,roomName:Et.roomName});for(var Zt=this.streamList.length;--Zt>=0;)this.streamList[Zt].roomId===Et.roomName&&this.streamList.splice(Zt,1);return this.removeSessionMCU(Et),"OK"},this.createJoinSessionMessage=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=null;st||(Rt=Tt.hasOwnProperty("sessionMCU")?Tt.sessionMCU:this.getSessionMCU(null,{first:!0}))&&(st=Rt.roomName);var Lt=Rt&&Rt.roomMode==="mesh"||this.meshModeEnabled===!0||Tt.meshModeEnabled===!0,Et=Rt&&Rt.meshOnly===!0||Tt.meshOnlyEnabled===!0,jt={type:"joinSession",roomId:st,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,meshModeEnabled:Lt,meshOnlyEnabled:Et,videoBandwidthSettings:apiCC.session.apiCCWebRTCClient.webRTCClient.videoBandwidthSettings,browserInfo:{browserAbout:nt.Xh+" "+nt.dc,browserType:at.wL.type,browserVersion:at.wL.version,osName:nt.BF,osVersion:apiCC.osVersion,deviceType:nt.vO}}};if(Tt.hasOwnProperty("transactionId")&&(jt.transactionId=Tt.transactionId),Tt.hasOwnProperty("convId")?jt.data.convId=Tt.convId:Rt&&Rt.hasOwnProperty("convId")&&(jt.data.convId=Rt.convId),Tt.moderationEnabled&&(jt.data.moderationEnabled=!0),Tt.moderator&&(jt.data.moderator=!0),Tt.qualityAdaptationEnabled&&(jt.data.qualityAdaptationEnabled=!0),Array.isArray(Tt.supportedVideoCodecs)){jt.data.supportedVideoCodecs=[];var Pt,Vt=gn(Tt.supportedVideoCodecs);try{for(Vt.s();!(Pt=Vt.n()).done;){var Zt=Pt.value;Zt==="h264"?jt.data.supportedVideoCodecs.push({codec:"h264",profilelevelid:"42e01f"}):typeof Zt=="string"?jt.data.supportedVideoCodecs.push({codec:Zt}):jt.data.supportedVideoCodecs.push(Zt)}}catch(rn){Vt.e(rn)}finally{Vt.f()}}else at.wL.type==="safari"&&(nt.Xh==="Safari"&&nt.dc<12.1||nt.Xh==="Mobile Safari"&&nt.dc<12.1)&&(jt.data.supportedVideoCodecs=[{codec:"h264",profilelevelid:"42e01f"}]);return jt.data.capabilities=this.browserCapabilities,jt},this.createSessionDescriptor=function(st){var Tt={roomId:st.roomName};return st.convId&&(Tt.convId=st.convId),st.roomMode&&(Tt.roomMode=st.roomMode),st.modeChangeKind&&(Tt.modeChangeKind=st.modeChangeKind),Tt},this.joinSession=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.getSessionMCU(st))return fn.warn("joinSession: session already set"),new Error("joinSession: session already set");if(this.getJoinSessionReq(st))return fn.warn("joinSession: session already requested"),new Error("joinSession: session already requested");var Rt={};Rt.roomId=st,Rt.transactionId=apiCC.randomString(12),this.joinSessionReqs.push(Rt);var Lt=Object.assign({},Tt);Lt.transactionId=Rt.transactionId,fn.info("joinSession() on ApiRTC MCU with roomId:",st);var Et=this.createJoinSessionMessage(st,Lt),jt=JSON.stringify(Et);return fn.log("C->S: "+jt),apiCC.session.channel.socket.emit("joinSession",jt),"OK"},this.joinSessionAnswer=function(st){if(fn.debug("joinSessionAnswer()"),this.getSessionMCU(st.roomName))fn.warn("joinSessionAnswer: session already set");else{var Tt=null;if(st.hasOwnProperty("transactionId")&&(Tt=this.getJoinSessionReq(null,{transactionId:st.transactionId})),Tt||(Tt=this.getJoinSessionReq(st.roomName)),Tt){this.removeJoinSessionReq(Tt);var Rt={};if(Rt.roomID=st.sessionId,Rt.roomName=st.roomName,st.hasOwnProperty("convId")&&(Rt.convId=st.convId),Rt.joinSessionAnswer={},(0,at.ki)(st,"data","object")?(st.data.failed===!0?(Rt.joinSessionAnswer.failed=!0,Rt.joinSessionAnswer.reason=st.data.reason):Rt.joinSessionAnswer.failed=!1,st.data.mode&&typeof st.data.mode=="string"&&(Rt.roomMode=st.data.mode,fn.debug("session joined with mode; roomMode: "+Rt.roomMode)),Rt.roomMode==="mesh"&&st.data.meshOnly===!0&&(Rt.meshOnly=!0,fn.debug("meshOnly"))):Rt.joinSessionAnswer.failed=!1,this.sessionMCUs.push(Rt),!Rt.joinSessionAnswer.failed){var Lt=[],Et={};Lt.push(st.roomName),Et.doneByApiRTC=!0,apiCC.session.joinPresenceGroup(Lt,Et),apiCC.session.subscribePresenceGroup(Lt,Et)}Tn.createJoinMCUSessionAnswerEvent(st.sessionId,st.token,st.groupChatId,st.initiator,Rt)}else fn.debug("joinSessionAnswer: no joinSession requested")}},this.changeSessionMode=function(st,Tt){var Rt=this.getSessionMCU(st.roomName);if(Rt)if(Rt.roomMode==="mesh"){for(var Lt=0,Et=Yt.userMediaTable.length;--Et>=0;)if(Yt.userMediaTable[Et].sessionMCU===Rt){fn.debug("changeSessionMode: userMedia",Yt.userMediaTable[Et]),Yt.userMediaTable[Et].distantCalls=[],Lt+=1;for(var jt=this.distantCalls.length;--jt>=0;)fn.debug("changeSessionMode: distantCall",this.distantCalls[jt]),this.distantCalls[jt].callMode==="mesh"&&this.distantCalls[jt].callFeed.callId===Yt.userMediaTable[Et].userMediaId&&(fn.debug("changeSessionMode: match"),Yt.userMediaTable[Et].distantCalls.push(this.distantCalls[jt]))}for(var Pt=0,Vt=Yt.callControlTable.length;--Vt>=0;)Yt.callControlTable[Vt].type==="subscribe"&&Yt.callControlTable[Vt].roomName===Rt.roomName&&(Pt+=1,Yt.callControlTable[Vt].autoRestart.force=!0);if(Tn.createMCURoomModeChangedEvent(Rt.roomName,"mesh","sfu","ongoing"),Lt===0&&Pt===0)delete Rt.roomMode,Tn.createMCURoomModeChangedEvent(Rt.roomName,"mesh","sfu","complete");else{Rt.modeChangeKind="old";var Zt={};Zt.roomID=st.roomName,Zt.roomName=st.roomName,st.hasOwnProperty("convId")&&(Zt.convId=st.convId),Zt.joinSessionAnswer={failed:!1},Zt.modeChangeKind="new",Zt.transitionTimeoutId=setTimeout((function(rn,Jt){delete Jt.transitionTimeoutId,Yt.finalizeMeshToJanusTransition(rn,Jt,{force:!0})}).bind(this,Rt,Zt),3e4),this.sessionMCUs.push(Zt),this.transitionCount+=1}}else fn.warn("changeSessionMode: session not using mesh mode");else fn.warn("changeSessionMode: no session")},this.updateSessionAnswer=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fn.debug("updateSessionAnswer");var Rt=this.getSessionMCU(st.roomName);if(!Rt){if(!Tt.createSession)return void fn.warn("updateSessionAnswer: no such session",st.roomName);fn.debug("force session creation; roomName: "+st.roomName),(Rt={}).roomID=st.roomName,Rt.roomName=st.roomName,st.hasOwnProperty("convId")&&(Rt.convId=st.convId),Rt.joinSessionAnswer={failed:!1},this.sessionMCUs.push(Rt);for(var Lt=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;--Lt>=0;){var Et=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[Lt];!Et.data||Et.data.MCUType!=="MCU-Caller"&&Et.data.MCUType!=="MCU-Callee"||Et.data.confId!==Rt.roomName||(Et.sessionMCU=Rt)}}var jt=!1;if(st.data&&st.data.mode==="mesh"?(Rt.roomMode="mesh",st.data.meshOnly===!0&&(Rt.meshOnly=!0)):(Rt.roomMode==="mesh"&&(jt=!0),delete Rt.roomMode),Rt.modeChangeKind==="new"){fn.debug("transition already ongoing");var Pt=this.getSessionMCU(null,{callback:function(hn){return hn.roomName===Rt.roomName&&hn.modeChangeKind==="old"}});Pt&&Yt.finalizeMeshToJanusTransition(Pt,Rt,{force:!0})}else if(jt){fn.debug("transition NOT ongoing but should be"),Tn.createMCURoomModeChangedEvent(Rt.roomName,"mesh","sfu","ongoing"),Rt.modeChangeKind="old";var Vt={};Vt.roomID=Rt.roomID,Vt.roomName=Rt.roomName,Rt.hasOwnProperty("convId")&&(Vt.convId=Rt.convId),Vt.joinSessionAnswer={failed:!1},Vt.modeChangeKind="new",this.sessionMCUs.push(Vt),this.transitionCount+=1,Yt.finalizeMeshToJanusTransition(Rt,Vt,{force:!0})}if(Tt.updateCalls)if(fn.debug("update stream list (prune)"),this.updateStreamList(st,{prune:!0}),Rt.roomMode==="mesh"){fn.debug("restart publish/shareScreen calls");for(var Zt=Yt.userMediaTable.slice(),rn=Zt.length;--rn>=0;){var Jt=Zt[rn];Jt.sessionMCU===Rt&&Yt.onHangup(Jt.userMediaId,"disconnected")}}else{fn.debug("roomMode is SFU, checking calls");for(var ln=Yt.callsTable.slice(),mn=ln.length;--mn>=0;){var an=ln[mn];an.sessionMCU===Rt&&(an.settingUpType!=="publish"&&an.settingUpType!=="shareScreen"||an.data&&an.data.mesh||an.pc?an.message200OKReceived===!1&&(fn.debug("restart call without 200OK received"),Yt.onHangup(an.callId,"disconnected")):(fn.debug("restart publish/shareScreen calls with no PeerConnection"),Yt.onHangup(an.callId,"disconnected")))}}},this.processCheckCallStatus=function(st){this.updateStreamList(st)},this.updateStreamList=function(st){for(var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=(0,at.ki)(st,"availableStreams","array")?st.availableStreams.slice():null,Lt=(0,at.ki)(st,"availableComposite","array")?st.availableComposite.slice():null,Et=(0,at.ki)(st,"availableReplay","array")?st.availableReplay.slice():null,jt=this.streamList.length;--jt>=0;){var Pt=this.streamList[jt];if(Pt.type==="regular"){if(!Rt)continue;for(var Vt=Rt.length;--Vt>=0&&Rt[Vt].id!==Pt.streamInfo.id;);if(Vt>=0){(0,at.ki)(Pt,"clearDisputableEntry","function")&&Pt.clearDisputableEntry(),Rt.splice(Vt,1);continue}Tt.prune===!0?((0,at.ki)(Pt,"clearDisputableEntry","function")&&Pt.clearDisputableEntry(),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:Pt.streamInfo}),Tn.createMCURemovedStreamEvent(Pt.streamInfo.id),this.streamList.splice(jt,1)):Pt.disputableTimeoutId||(Pt.disputableTimeoutId=setTimeout(An.bind(this,Pt.streamInfo.id),On),Pt.clearDisputableEntry=Rn.bind(this,Pt.streamInfo.id),this.disputableStreamList.push(Pt))}else if(Pt.type==="composite"){if(!Lt)continue;for(var Zt=Lt.length;--Zt>=0&&Lt[Zt].id!==Pt.streamInfo.id;);if(Zt>=0){Lt.splice(Zt,1);continue}apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:Pt.streamInfo}),Tn.createMCURemovedStreamEvent(Pt.streamInfo.id),this.streamList.splice(jt,1)}else if(Pt.type==="replay"){if(!Et)continue;for(var rn=Et.length;--rn>=0&&Et[rn].id!==Pt.streamInfo.id;);rn>=0&&Et.splice(rn,1)}}if(Rt)for(var Jt=0;Jt<Rt.length;Jt+=1){var ln=[];ln.push(Rt[Jt]);var mn=this.newAvailableStream(ln,"regular");Tn.createMCUAvailableStreamEvent(ln,mn)}if(Lt)for(var an=0;an<Lt.length;an+=1){var hn=[];hn.push(Lt[an]);var En=this.newAvailableStream(hn,"composite");Tn.createMCUAvailableCompositeEvent(hn,En)}if(Et)for(var Mn=0;Mn<Et.length;Mn+=1){var Pn=[];Pn.push(Et[Mn]);var Wn=this.newAvailableReplay(Pn);Tn.createMCUAvailableReplayEvent(Pn,Wn)}},this.getStreamList=function(){return fn.debug("getStreamList :",this.streamList),this.streamList},this.getStreamFromList=function(st){var Tt;for(fn.debug("getStreamFromList() with Id :",st),fn.log("this.streamList :",this.streamList),Tt=0;Tt<this.streamList.length;Tt+=1){if(this.streamList[Tt].streamInfo.id===st)return fn.log("stream found",this.streamList[Tt].streamInfo),this.streamList[Tt].streamInfo;fn.log("not the same stream",st)}return null},this.getStreamIdOfUser=function(st){var Tt;for(fn.debug("getStreamIdOfUser() with Id :",st),fn.log("this.streamList :",this.streamList),Tt=0;Tt<this.streamList.length;Tt+=1)if(this.streamList[Tt].type!=="replay"){if(this.streamList[Tt].userId===st)return fn.log("stream found",this.streamList[Tt].streamInfo),this.streamList[Tt].streamInfo.id;fn.log("not the same userId",st)}return null},this.getStreamOfUserCall=function(st,Tt){var Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Lt=this.streamList.length,Et=!1;for((0,at.ki)(Rt,"replay","boolean")&&Rt.replay===!0&&(Et=!0);--Lt>=0;){if(Et===!0){if(this.streamList[Lt].type!=="replay")continue}else if(this.streamList[Lt].type==="replay")continue;if(this.streamList[Lt].userId===st&&this.streamList[Lt].streamInfo.attributes.callId===Tt)return this.streamList[Lt].streamInfo}return null},this.newAvailableStream=function(st,Tt,Rt){fn.debug("newAvailableStream():",st);var Lt=!1,Et=!1,jt=this.getSessionMCU(st[0].room);if(jt){st[0].attributes.callerId!==kt&&(Lt=!0);for(var Pt=Yt.getCallControls(["publish","shareScreen"],{addUserMedia:!0}),Vt=0;Vt<st.length;Vt+=1){for(var Zt=this.streamList.length;--Zt>=0&&(this.streamList[Zt].type!=="regular"||st[Vt].id!==this.streamList[Zt].streamInfo.id););Zt>=0?(Et=!0,(0,at.ki)(this.streamList[Zt],"clearDisputableEntry","function")?this.streamList[Zt].clearDisputableEntry():fn.debug("clearDisputableEntry is not set")):fn.debug("streamList is empty"),Lt=!Object.prototype.hasOwnProperty.call(Pt,st[Vt].attributes.callId);var rn={type:Tt,userId:st[Vt].attributes.callerId,roomId:jt.roomName,isRemoteStream:Lt,streamInfo:st[Vt]};if(Et===!0?this.streamList[Zt]=rn:this.streamList.push(rn),fn.log("this.streamList :",this.streamList),Lt!==!0)if(jt.roomMode==="mesh"){var Jt=Yt.findUserMediaById(st[Vt].attributes.callId);Jt&&Jt.addAck===!0&&(delete Jt.addAck,clearTimeout(Jt.addTimeoutId),delete Jt.addTimeoutId,Tn.createCallEstablishedEvent(jt.roomName,Jt.callType,Jt.userMediaId,"none"))}else{var ln=Yt.findCallWithCallId(st[Vt].attributes.callId),mn=apiCC.getUserMediaStream(ln.callConfiguration.userMediaStreamId);if(ln&&mn)for(var an=0,hn=["audioMuted","videoMuted"];an<hn.length;an++){var En=hn[an],Mn=En==="audioMuted"?"audio":"video";mn[En]!==st[Vt][En]&&mn.notifyMLineMutedCall(Mn,mn[En],"enabled",ln,null)}}var Pn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:st[Vt]});if(Pn&&!Pn.autoRestart.pending){fn.info("[newAvailableStream] auto subscribing to stream");var Wn=!!Pn.autoRestart.force;delete Pn.autoRestart.force;var Nn=Pn.callId,Jn=Yt.findCallWithCallId(Nn);Jn!==null&&Jn.sessionMCU!==null&&Jn.sessionMCU.modeChangeKind==="old"&&(fn.debug("Re-init of autoRestart.counter"),delete Pn.autoRestart.counter);var rr=this.subscribeToStreams([st[Vt]],Pn.mediaType,Pn.data,Pn.callConfiguration,{noStreamCheck:!0,force:Wn});Nn&&rr[0]&&Tn.createCallRestartingEvent(Pn.callType,Pn.audioOnly,Nn,rr[0],"subscribe",apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Pn.roomName,Pn.roomName,st[Vt].id)}if(Et!==!0&&(0,at.Ym)(Rt,"function")&&Rt(Lt,st[Vt],Tt),st[Vt].context!==void 0&&st[Vt].context.remoteAccessCtx!==void 0){var hr=st[Vt].context.remoteAccessCtx.invitationId;fn.debug("remoteAccess stream for invitationId : ",hr),apiRTC.session.remoteAccessInvitation!==null&&hr===apiRTC.session.remoteAccessInvitation.id&&Lt===!0?(fn.debug("Setting screenSharingStreamId for remote"),apiRTC.session.remoteAccessInvitation.screenSharingStreamId=st[Vt].id,fn.debug("apiRTC.session.remoteAccessInvitation.screenSharingStreamId :",apiRTC.session.remoteAccessInvitation.screenSharingStreamId),apiRTC.session.remoteAccessInvitation.screenWidth=st[Vt].context.remoteAccessCtx.screenWidth,apiRTC.session.remoteAccessInvitation.screenHeight=st[Vt].context.remoteAccessCtx.screenHeight):fn.debug("Stream not linked to remoteAccessInvitation or this is localStream")}}return Lt}fn.debug("newAvailableStream() but client is not in session")},this.updateAvailableStream=function(st,Tt,Rt){fn.info("updateAvailableStream():",st);var Lt=!1;if(this.getSessionMCU(st[0].room)){st[0].attributes.callerId!==kt&&(Lt=!0);for(var Et=0;Et<st.length;Et+=1)for(var jt=this.streamList.length;--jt>=0;)if(this.streamList[jt].streamInfo.id===st[Et].id){for(var Pt=[],Vt=0,Zt=["audio","audioMuted","video","videoMuted"];Vt<Zt.length;Vt++){var rn=Zt[Vt];this.streamList[jt].streamInfo[rn]!==st[Et][rn]&&(this.streamList[jt].streamInfo[rn]=st[Et][rn],Pt.push(rn))}this.streamList[jt].streamInfo.attributes.callType!==st[Et].attributes.callType&&(this.streamList[jt].streamInfo.attributes.callType=st[Et].attributes.callType,Pt.push("callType")),this.streamList[jt].streamInfo.attributes.descriptor&&st[Et].attributes.descriptor&&this.streamList[jt].streamInfo.attributes.descriptor.priority!==st[Et].attributes.descriptor.priority&&(this.streamList[jt].streamInfo.attributes.descriptor.priority=st[Et].attributes.descriptor.priority,Pt.push("priority")),Pt.length>0&&(0,at.Ym)(Rt,"function")&&Rt(Lt,st[Et],Tt,Pt);break}return Lt}fn.log("updateAvailableStream() but client is not in session")},this.newAvailableReplay=function(st){fn.info("newAvailableReplay() :",st);var Tt=!1,Rt=this.getSessionMCU(st[0].room);if(Rt){st[0].attributes.callerId!==kt&&(Tt=!0);for(var Lt=0;Lt<st.length;Lt+=1){var Et={type:"replay",userId:st[Lt].attributes.callerId,roomId:Rt.roomName,isRemoteStream:Tt,streamInfo:st[Lt]};this.streamList.push(Et)}return Tt}fn.log("newAvailableReplay() but client is not in session")},this.subscribeToStreams=function(st,Tt,Rt,Lt){var Et=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};fn.info("subscribeToStreams():",st);var jt,Pt,Vt=[],Zt=null,rn=null,Jt=null,ln=function(an){return setTimeout(function(){fn.warn("invite + SDP offer not received -> restart call"),Yt.onHangup(an,"disconnected")},15e3)};for(Jt in st){if(jt=st[Jt],apiCC.session===null||apiCC.session===void 0)return fn.debug("no session, leaving subscribeToStreams()"),Vt;if((Zt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(jt.id,{ignoreModeChangeKindOld:!0}))!==null){if(fn.debug("call already exists"),Et.force!==!0){Vt[Jt]=Zt.callId;continue}fn.debug("Force is true")}else fn.debug("call does not exist");for(Pt=this.streamList.length;--Pt>=0&&this.streamList[Pt].streamInfo.id!==jt.id;);if(Pt>=0){if(fn.debug("stream exists"),this.streamList[Pt].disputableTimeoutId){fn.debug("stream temporarily not available"),Vt[Jt]=null,Et.autoSub===!0&&((rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:jt}))||apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:jt.room,mediaType:Tt,callConfiguration:Lt,data:Rt,stream:jt}));continue}}else if(fn.debug("stream does not exist"),Et.noStreamCheck!==!0){Vt[Jt]=null,Tn.createErrorEvent("stream not available","STREAM_NOT_AVAILABLE",null,jt.room,null,{stream:jt});continue}fn.info("stream:",jt);var mn=this.getSessionMCU(jt.room);mn&&((rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:"subscribe",stream:jt}))||(rn=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"subscribe",roomName:mn.roomName,mediaType:Tt,callConfiguration:Lt,data:Rt,stream:jt})),jt.attributes.callType!=="COMPOSITE"&&this.pubConnector==="janusConnector"?(Rt===void 0&&(Rt={}),Rt.mesh&&delete Rt.mesh,(0,at.Ym)(Lt,"qos","object")?(Rt.qos={},Lt.qos.videoForbidInactive===!1?Rt.qos.videoForbidInactive=!1:Rt.qos.videoForbidInactive=!0):(Rt.qos={},Rt.qos.videoForbidInactive=!0),(0,at.Ym)(Lt,"simulcast","object")&&(Rt.simulcast={},Lt.simulcast.streamQuality&&(Lt.simulcast.streamQuality==="high"?Rt.simulcast.substream=2:Lt.simulcast.streamQuality==="medium"?Rt.simulcast.substream=1:Lt.simulcast.streamQuality==="low"&&(Rt.simulcast.substream=0)),Lt.simulcast.streamFrameRate&&(Lt.simulcast.streamFrameRate==="high"?Rt.simulcast.temporal=2:Lt.simulcast.streamFrameRate==="medium"?Rt.simulcast.temporal=1:Lt.simulcast.streamFrameRate==="low"&&(Rt.simulcast.temporal=0))),(Zt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Zt.callControl=rn,(0,at.ki)(Zt.callControl.autoRestart,"counter","number")?(Zt.callControl.autoRestart.counter+=1,Zt.restarted=!0):Zt.callControl.autoRestart.counter=0,Zt.settingUpType="subscribe",Lt!=null&&Lt.turnServerAddress!==void 0&&Lt.turnServerAddress!==null&&Zt.setCallTurnServer(Lt.turnServerAddress),Zt.generateCallId(),rn.callId=Zt.callId,Zt.setupTimeoutId=ln(Zt.callId),Zt.callerId=mn.roomName,Zt.calleeId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Zt.callee=!0,Zt.mcuRemoteStream=jt,Zt.dest_roomId=mn.roomName,Zt.callType=jt.attributes.callType,Zt.callControl.callType=jt.attributes.callType,jt.attributes.callType!=="audio"&&Tt!=="AUDIOONLY"||(Zt.audioOnly=!0,Zt.callControl.audioOnly=!0),Zt.remoteId=jt.attributes.callerId,Zt.remoteMailAddress=jt.attributes.mailAddress,Zt.streamId=jt.id,Zt.mediaType=Tt,Zt.sessionMCU=mn,fn.log("call.streamId: "+Zt.streamId),(0,at.Ym)(Rt,"object")?Zt.data=(0,at.ws)({},Rt):Zt.data={},Zt.data.pubSub="janusConnector",Zt.data.type="subscribe",Zt.data.mode="passive",Zt.data.mediaType=Tt,Zt.data.capabilities=this.browserCapabilities,Zt.data.cloudConvId=mn.convId,Zt.data.instanceId=Zt.instanceId,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Zt),Vt[Jt]=Zt.callId,Zt.myWebRTC_Stack.sendInvite(Zt.callId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,mn.roomName,mn.roomName,jt.attributes.callType,{mode:"passive",data:Zt.data,stream:jt,volatile:!!Zt.restarted})):((Zt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),Zt.callControl=rn,(0,at.ki)(Zt.callControl.autoRestart,"counter","number")?(Zt.callControl.autoRestart.counter+=1,Zt.restarted=!0):Zt.callControl.autoRestart.counter=0,Zt.settingUpType="subscribe",Lt!=null&&Lt.turnServerAddress!==void 0&&Lt.turnServerAddress!==null&&Zt.setCallTurnServer(Lt.turnServerAddress),Rt===void 0&&(Rt={}),Zt.data=Rt,Zt.data.pubSub=this.pubConnector,Zt.data.type="subscribe",Zt.data.capabilities=this.browserCapabilities,Zt.data.cloudConvId=mn.convId,Zt.data.instanceId=Zt.instanceId,fn.log("mediaType: ",Tt),fn.log("stream.attributes.callType: ",jt.attributes.callType),Zt.callType=jt.attributes.callType,Zt.callControl.callType=jt.attributes.callType,jt.attributes.callType==="COMPOSITE"&&this.pubConnector==="janusConnector"||jt.attributes.callType==="audio"||Tt==="AUDIOONLY"?(fn.log("Setting call as audioOnly"),Zt.audioOnly=!0,Zt.callControl.audioOnly=!0,Zt.stripVideoSDPActivated=!0):Tt==="VIDEOONLY"&&(Zt.stripAudioSDPActivated=!0,Zt.callType="videoOnly",Zt.callControl.callType="videoOnly"),Zt.mcuRemoteStream=jt,Zt.dest_roomId=mn.roomName,Zt.calleeId=mn.roomName,Zt.generateCallId(),rn.callId=Zt.callId,Zt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Zt.sessionMCU=mn,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Zt),Zt.createPeerConnection(),Zt.doCall(),Zt.started=!0,Zt.callType=jt.attributes.callType,Zt.remoteId=jt.attributes.callerId,Zt.remoteMailAddress=jt.attributes.mailAddress,jt.audio===!0?jt.video===!0?Zt.destCallType="media":Zt.destCallType="audio":jt.video===!0&&(Zt.destCallType="videoOnly"),jt.id===void 0&&fn.log("stream.id is undefined :",jt),Zt.streamId=jt.id,Zt.mediaType=Tt,fn.log("stream.attributes.callType: ",jt.attributes.callType),Vt[Jt]=Zt.callId),Zt.asyncCallbacks={},Zt.asyncCallbacks.type="subscribe")}return Vt},this.unsubscribe=function(st){fn.info("unsubscribe() :",st);var Tt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(st);Tt===null?fn.log("error call not found on unsubscribe"):Tt.callId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId)},this.publish=function(st,Tt,Rt,Lt,Et,jt){fn.info("publish roomName :",st),fn.log("publish sessionId :",Tt),fn.log("publish token :",Rt),fn.log("publish callConfiguration :",Lt);var Pt=null,Vt=!1,Zt=!1,rn=null,Jt=null,ln=this.getSessionMCU(st);if(!ln)return fn.error("roomName does not match any sessionMCU"),null;if(Et!==null&&cn(Et)==="object"||(Et={}),this.pubConnector==="janusConnector"&&!Et.mesh&&jt&&jt.callControl&&jt.callControl.callId&&apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(jt.callControl.callId))return fn.debug("call already exists",jt.callControl.callId),jt.callControl.callId;if(Lt===!0||Lt==="true"?(fn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Vt=!0,Lt={}):Lt===!1||Lt==="false"?(fn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Lt={}):Lt!==null&&cn(Lt)==="object"||(Lt={}),Lt.audioOnly===!0&&Lt.videoOnly===!0)return Tn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,st),null;if(Lt.audioOnly===!0&&(Vt=!0),Lt.videoOnly===!0&&(Zt=!0),["audioOnly","videoOnly","record","private"].forEach(function(an){Lt.hasOwnProperty(an)&&((0,at.ki)(Et,"callConfiguration","object")||(Et.callConfiguration={}),Et.callConfiguration[an]=Lt[an])}),ln.convId&&(Et.cloudConvId=ln.convId),(0,at.Ym)(Lt,"qos","object")?(Et.qos={},Lt.qos.videoMinBitrate?Et.qos.videoMinBitrate=Lt.qos.videoMinBitrate:Lt.qos.videoMinQuality&&["excellent","good","medium","bad"].indexOf(Lt.qos.videoMinQuality)>=0?Et.qos.videoMinQuality=Lt.qos.videoMinQuality:Et.qos.videoMinQuality="bad",Lt.qos.videoStartBitrate?Et.qos.videoStartBitrate=Lt.qos.videoStartBitrate:Lt.qos.videoStartQuality&&["upper","excellent","good","medium","bad"].indexOf(Lt.qos.videoStartQuality)>=0&&(Et.qos.videoStartQuality=Lt.qos.videoStartQuality),Lt.qos.videoForbidInactive===!1?Et.qos.videoForbidInactive=!1:Et.qos.videoForbidInactive=!0):Et.qos={videoMinQuality:"bad",videoForbidInactive:!0},Lt.simulcast&&(Lt.userMediaStreamId&&(Jt=apiCC.getUserMediaStream(Lt.userMediaStreamId))&&Jt.isSimulcastCompliant()||delete Lt.simulcast),function(an){if(!(0,at.ki)(an,"simulcast","object")||at.wL.type==="safari"&&an.simulcast.mode!=="SDP")return delete an.simulcast,!1;delete an.simulcast.sendEncodings,(0,at.ki)(an.simulcast,"maxBitrate","number")?at.wL.type==="chrome"&&at.wL.version>=78&&an.simulcast.mode!=="SDP"?(fn.debug("configure simulcast RID chrome maxBitrate"),!xn(an.simulcast,an.simulcast.maxBitrate)&&(fn.warn("cannot configure simulcast"),delete an.simulcast)):at.wL.type==="firefox"?(fn.debug("configure simulcast RID firefox maxBitrate"),!xn(an.simulcast,an.simulcast.maxBitrate)&&(fn.warn("cannot configure simulcast"),delete an.simulcast)):delete an.simulcast.encodings:(0,at.ki)(an.simulcast,"encodings","object")?at.wL.type==="chrome"&&at.wL.version>=78&&an.simulcast.mode!=="SDP"?(fn.debug("configure simulcast RID chrome encodings"),!kn(an.simulcast)&&(fn.warn("cannot configure simulcast"),delete an.simulcast)):at.wL.type==="firefox"?(fn.debug("configure simulcast RID firefox encodings"),!kn(an.simulcast)&&(fn.warn("cannot configure simulcast"),delete an.simulcast)):delete an.simulcast.encodings:at.wL.type==="chrome"&&at.wL.version>=78&&an.simulcast.mode!=="SDP"?(fn.debug("configure simulcast RID chrome default"),an.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!kn(an.simulcast)&&delete an.simulcast):at.wL.type==="firefox"&&(fn.debug("configure simulcast RID firefox default"),an.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!kn(an.simulcast))&&delete an.simulcast}(Lt),Lt.distributedBroadcastEnabled&&!Lt.simulcast&&(Et.distributedBroadcastEnabled=!0),["audioLabels","videoLabels"].forEach(function(an){(0,at.Ym)(Lt[an],"array")&&(Et[an]=[],Lt[an].forEach(function(hn){(0,at.Ym)(hn,"string")&&Et[an].push(hn)}))}),(0,at.Ym)(Lt,"context","object"))try{JSON.stringify(Lt.context),Et.context=Lt.context}catch{}if((0,at.Ym)(Lt,"profileType","string")&&(Et.profileType=Lt.profileType),(0,at.Ym)(Lt,"priority","number")&&Lt.priority>=0&&(Et.priority=Lt.priority),(0,at.Ym)(Lt,"downgradeProfileList","array")&&(Et.downgradeProfileList=Lt.downgradeProfileList),fn.debug("callConfiguration; audioOnly: "+Vt+", videoOnly: "+Zt),jt&&jt.forceScreenSharingCallType===!0)fn.debug("publish screenSharing");else if(apiCC.mediaDeviceMgr.videoDevicePresent===!1){if(apiCC.mediaDeviceMgr.audioDevicePresent===!1)return fn.debug("publish without any device, leaving publish ..."),Et.publishWithoutMediaDeviceDetected=!0,apiCC.session.setUserData(Et),Tn.createErrorEvent("Cannot publish without audio nor video","PUBLISH_FAILURE",null,st),null;Vt!==!0&&(fn.debug("publish video, but no webcam present, forcing callType to audio"),Vt=!0)}else apiCC.mediaDeviceMgr.audioDevicePresent===!1&&Zt!==!0&&(fn.debug("publish video, but no microphone present, forcing callType to videoOnly"),Zt=!0);if(Pt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient),Et.mesh!==void 0&&Et.instanceId!==void 0?(fn.debug("keeping instanceId "),Pt.instanceId=Et.instanceId):Pt.instanceId=apiCC.generateInstanceId(),this.pubConnector!=="janusConnector"||Et.mesh?(Pt.settingUpType="publish",Pt.generateCallId()):(Pt.settingUpType="publish",jt&&jt.callControl?(Pt.callControl=jt.callControl,Pt.callControl.autoRestart.counter+=1,Pt.callId=Pt.callControl.callId,Pt.restarted=!0):(Pt.callControl=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:"publish",roomName:st,callConfiguration:Lt,data:Et}),Pt.callControl.sessionId=Tt,Pt.callControl.token=Rt,Pt.callControl.autoRestart.counter=0,Pt.generateCallId(),Pt.callControl.callId=Pt.callId)),Lt!=null&&Lt.turnServerAddress!==void 0&&Lt.turnServerAddress!==null&&Pt.setCallTurnServer(Lt.turnServerAddress),Lt.userMediaStreamId&&((Jt=apiCC.getUserMediaStream(Lt.userMediaStreamId))?(Pt.callType=Jt.callType,fn.debug("Setting callType to "+Pt.callType),Pt.callType==="screenSharing"&&(Pt.screenSharing=!0)):(fn.debug("callConfiguration.userMediaStreamId is setted but stream is not present"),delete Lt.userMediaStreamId)),Pt.data=Et,Pt.data.instanceId=Pt.instanceId,Tt==="restarted"&&(Pt.restarted=!0),Pt.mediaTypeForIncomingCall="NONE",Vt===!0?(fn.log("Setting call as audioOnly"),Pt.audioOnly=!0,Pt.callType="audio",Pt.mediaTypeForOutgoingCall="AUDIO"):Zt===!0?(fn.log("Setting call as videoOnly"),Pt.callType="videoOnly",Pt.mediaTypeForOutgoingCall="VIDEOONLY"):fn.log("Not Setting call as audioOnly nor videoOnly"),Pt.dest_roomId=ln.roomName,Pt.calleeId=ln.roomName,Pt.data.pubSub=this.pubConnector,Pt.data.type="publish",Pt.data.capabilities=this.browserCapabilities,Pt.data.cloudConvId=ln.convId,Pt.callConfiguration=Lt,Pt.sessionMCU=ln,Pt.setMediaConstraintsToSendOnlyOffer(),Pt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,(0,at.Ym)(Lt,"simulcast","object")){var mn=null;Jt&&(mn=Jt.getSimulcastProfile()),at.wL.type==="chrome"&&at.wL.version>=78&&Lt.simulcast.mode!=="SDP"?(fn.debug("simulcast chrome 78+ -> RID",Lt.simulcast),Pt.simulcast="RID",Pt.data.simulcast={enabled:!0,mode:"RID"},Pt.data.simulcast.encodings=Object.assign({},Lt.simulcast.encodings),mn&&(Pt.data.simulcast.profile=mn)):at.wL.type==="chrome"?(fn.debug("simulcast chrome -> SDP",Lt.simulcast),Pt.simulcast="SDP",Pt.data.simulcast={enabled:!0,mode:"SDP"}):at.wL.type==="firefox"?(fn.debug("simulcast firefox -> RID",Lt.simulcast),Pt.simulcast="RID",Pt.data.simulcast={enabled:!0,mode:"RID"},Pt.data.simulcast.encodings=Object.assign({},Lt.simulcast.encodings),mn&&(Pt.data.simulcast.profile=mn)):at.wL.type==="safari"&&(fn.debug("simulcast safari -> SDP",Lt.simulcast),Pt.simulcast="SDP",Pt.data.simulcast={enabled:!0,mode:"SDP"})}return fn.log("webRTCClient.accessToLocalMedia :",Yt.accessToLocalMedia),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Pt),this.publishCallId=Pt.callId,Pt.callControl&&Pt.callControl.autoRestart.stream&&fn.debug("call.callControl.autoRestart.stream.active :",Pt.callControl.autoRestart.stream.active),this.pubConnector==="janusConnector"&&Pt.callControl&&Pt.callControl.autoRestart.stream&&Pt.callControl.autoRestart.stream.active?(apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Pt.callLocalStream=Pt.callControl.autoRestart.stream,Pt.establishCall(),Pt.callId):(Et.mesh!==void 0&&(rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Et.mesh.calleeCallId))!==null&&rn.callConfiguration&&rn.callConfiguration.userMediaStreamId&&(Pt.callType=rn.callType,Lt.userMediaStreamId=rn.callConfiguration.userMediaStreamId),Lt.userMediaStreamId?((Jt=apiCC.getUserMediaStream(Lt.userMediaStreamId)).addCallInfo(Pt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&Pt.callControl&&(Pt.callControl.autoRestart.stream=Jt.stream),Pt.callConfiguration.userMediaStreamId=Jt.userMediaStreamId,Pt.callLocalStream=Jt.stream,Pt.establishCall(),Pt.callId):apiCC.userMediaStreamTable.length>0?((Jt=apiCC.userMediaStreamTable[0]).addCallInfo(Pt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,this.pubConnector==="janusConnector"&&Pt.callControl&&(Pt.callControl.autoRestart.stream=Jt.stream),Pt.callConfiguration.userMediaStreamId=Jt.userMediaStreamId,Pt.callLocalStream=Jt.stream,Pt.establishCall(),Pt.callId):(apiCC.createUserMediaStream({callId:Pt.callId,type:Pt.callType,audioSourceId:Yt.audioSourceId,videoSourceId:Yt.videoSourceId,success:function(an){fn.debug("[publish] success; userMediaStreamId: "+an.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Pt.callControl&&(Pt.callControl.autoRestart.stream=an.stream),Pt.callConfiguration.userMediaStreamId=an.userMediaStreamId,Pt.callLocalStream=an.stream,Pt.establishCall()}}),Pt.callId))},this.publishScreen=function(st,Tt,Rt,Lt){fn.info("publishScreen()");var Et=this.getSessionMCU(st);return Et?(Tt==null&&(Tt={}),Rt==null&&(Rt={}),Rt.record!==void 0&&(Tt.callConfiguration!==void 0||(Tt.callConfiguration={}),Tt.callConfiguration.record=Rt.record),Rt.private!==void 0&&(Tt.callConfiguration!==void 0||(Tt.callConfiguration={}),Tt.callConfiguration.private=Rt.private),Tt.pubSub=this.pubConnector,Tt.type="publish",apiCC.session.apiCCWebRTCClient.webRTCClient.shareScreen(Et.roomName,Tt,Lt,Rt)):(fn.error("roomId does not match any sessionMCU"),null)},this.unpublish=function(st){fn.info("unpublish call with callId :",st),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(st),this.publishCallId=null},this.removeMCUStream=function(st,Tt,Rt){var Lt,Et=!1;for(Rt!=="Broken_by_MCU"&&Rt!=="disconnected"||(Et=!0),fn.debug("streamId:",Tt),fn.debug("reason:",Rt),fn.debug("quiet:",Et),Lt=0;Lt<this.streamList.length;Lt+=1)if(fn.log("this.streamList[i].streamInfo.id :",this.streamList[Lt].streamInfo.id),this.streamList[Lt].streamInfo.id===Tt){Et===!0?(fn.debug("add stream into disputableStreamList: ",Tt),this.streamList[Lt].disputableTimeoutId=setTimeout(An.bind(this,this.streamList[Lt].streamInfo.id),On),this.streamList[Lt].clearDisputableEntry=Rn.bind(this,this.streamList[Lt].streamInfo.id),this.disputableStreamList.push(this.streamList[Lt])):(fn.debug("remove stream from streamList:",Tt),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:"subscribe",stream:this.streamList[Lt].streamInfo}),this.streamList.splice(Lt,1));break}st!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(st),Et!==!0&&Tn.createMCURemovedStreamEvent(Tt)},this.startStreaming=function(st,Tt,Rt,Lt){fn.info("startStreaming");var Et,jt,Pt=st!=null&&st.length>0,Vt=Tt!=null&&Tt.length>0,Zt={};if(!Pt&&!Vt||Rt==null||Rt.length===0)return!1;if(Lt===void 0){if(this.publishCallId===null)return fn.log("Cannot start streaming as no stream is published"),!1;Lt=this.publishCallId}var rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Lt);return rn||(rn=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Lt))?rn.sessionMCU?(Pt||(st="custom"),Zt.pubSub=this.pubConnector,Zt.service=st,Vt&&(Zt.server=Tt),Zt.streamKey=Rt,fn.log("startStreaming() on ApiRTC MCU with roomId:",rn.sessionMCU.roomName),Et={type:"startStreaming",roomId:rn.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Lt,data:Zt},jt=JSON.stringify(Et),fn.log("C->S: "+jt),apiCC.session.channel.socket.emit("startStreaming",jt),!0):(fn.error("no such sessionMCU"),!1):(fn.error("callIdToStream does not match any call"),!1)},this.stopStreaming=function(st){var Tt,Rt;if(fn.info("stopStreaming"),st===void 0){if(this.publishCallId===null)return fn.log("Cannot stop streaming as no stream is published"),!1;st=this.publishCallId}var Lt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(st);if(!Lt)return fn.error("callIdToStream does not match any call"),!1;var Et=this.getSessionMCU(Lt.dest_roomId);return Et?(fn.log("stopStreaming() on ApiRTC MCU with roomId:",Et.roomName),Tt={type:"stopStreaming",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:st,data:{pubSub:this.pubConnector}},Rt=JSON.stringify(Tt),fn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("stopStreaming",Rt),!0):(fn.error("dest_roomId does not match any sessionMCU"),!1)},this.startRecording=function(st,Tt,Rt,Lt,Et){var jt,Pt;if(fn.info("startRecording"),Lt==null){if(this.publishCallId===null)return void fn.log("Call recording can not start as stream is not published");Lt=this.publishCallId}var Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(Lt);return Vt||(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Lt))?Vt.sessionMCU?(st!=="AUDIO-ONLY"&&st!=="VIDEO-ONLY"&&(st="AUDIO-VIDEO"),Et==null&&(Et={}),Et.pubSub=this.pubConnector,fn.log("startRecording() on ApiRTC MCU with roomId :",Vt.sessionMCU.roomName),jt={type:"startRecording",roomId:Vt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:Lt,data:Et,customIdInFilename:Tt,mediaType:st,convId:Rt},Pt=JSON.stringify(jt),fn.log("C->S: "+Pt),void apiCC.session.channel.socket.emit("startRecording",Pt)):(fn.error("no such sessionMCU"),!1):(fn.error("callIdToRecord does not match any call"),!1)},this.stopRecording=function(st){var Tt,Rt;if(fn.info("stopRecording"),st===void 0){if(this.publishCallId===null)return void fn.log("Call recording can not stop as stream is not published");st=this.publishCallId}var Lt=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(st);if(!Lt)return fn.error("callIdToRecord does not match any call"),!1;var Et=this.getSessionMCU(Lt.dest_roomId);if(!Et)return fn.error("dest_roomId does not match any sessionMCU"),!1;fn.log("stopRecording() on ApiRTC MCU with roomId :",Et.roomName),Tt={type:"stopRecording",roomId:Et.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:st,data:{pubSub:this.pubConnector}},Rt=JSON.stringify(Tt),fn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("stopRecording",Rt)},this.recordingStarted=function(st){fn.info("recordingStarted:",st),Tn.createMCURecordingStartedEvent(st.roomName,st.callId,st.clientId,st.recordType,st.time,st.convId,st.mediaId,st.mediaURL,st.remoteId,st.recordedFileName,st.mediaType,st.descriptor)},this.recordingStopped=function(st){fn.info("recordingStopped:",st),Tn.createMCURecordingStoppedEvent(st.roomName,st.callId,st.clientId,st.recordType,st.time,st.convId,st.mediaId,st.mediaURL,st.remoteId,st.recordedFileName,st.mediaType,st.descriptor)},this.recordingStreamAvailable=function(st){fn.info("recordingStreamAvailable :",st),Tn.createMCURecordedStreamsAvailableEvent(st.roomName,st.callId,st.clientId,st.recordedFileName,st.convId,st.mediaId,st.mediaURL,st.recordType,st.remoteId,st.mediaType,st.descriptor),this.pubConnector==="janusConnector"&&st.hasOwnProperty("confId")&&st.hasOwnProperty("remoteId")&&Tn.createRecordedStreamsAvailableEvent(st.confId,st.clientId,st.remoteId,st.callId,st.convId,st.mediaId,st.mediaURL)},this.streamingStarted=function(st){fn.info("streamingStarted: ",st),Tn.createMCUStreamingStartedEvent(st.roomName,st.callId,st.clientId,st.time)},this.streamingStopped=function(st){fn.info("streamingStopped: ",st),Tn.createMCUStreamingStoppedEvent(st.roomName,st.callId,st.clientId,st.time)},this.startComposite=function(st){var Tt,Rt,Lt;(Lt=st?this.getSessionMCU(st):this.getSessionMCU(null,{first:!0}))?(fn.log("startComposite() on ApiRTC MCU with roomId :",Lt.roomName),Tt={type:"startComposite",roomId:Lt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},Rt=JSON.stringify(Tt),fn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("startComposite",Rt)):fn.log("startComposite() but client is not in session")},this.stopComposite=function(st){var Tt,Rt,Lt;(Lt=st?this.getSessionMCU(st):this.getSessionMCU(null,{first:!0}))?(fn.log("stopComposite() on ApiRTC MCU with roomId :",Lt.roomName),Tt={type:"stopComposite",roomId:Lt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},Rt=JSON.stringify(Tt),fn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("stopComposite",Rt)):fn.log("stopComposite() but client is not in session")},this.startCompositeRecording=function(st,Tt,Rt,Lt,Et){fn.info("startCompositeRecording with convId :",Rt);var jt,Pt,Vt;(Vt=Et?this.getSessionMCU(Et):this.getSessionMCU(null,{first:!0}))?(st!=="AUDIO-ONLY"&&st!=="VIDEO-ONLY"&&(st="AUDIO-VIDEO"),(Lt=(0,at.Ym)(Lt,"object")?(0,at.ws)({},Lt):{}).pubSub=this.pubConnector,["complete","efficient","audioOnly"].indexOf(Lt.mode)<0&&(Lt.mode="complete"),Lt.labelEnabled=Lt.labelEnabled===!0,(0,at.Ym)(Lt,"labels","array")||(Lt.labels=["microphone","camera","screenSharing","sip"]),fn.log("startRecording() on ApiRTC MCU with roomId :",Vt.roomName),jt={type:"startRecording",roomId:Vt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:Lt,customIdInFilename:Tt,mediaType:st,convId:Rt},Pt=JSON.stringify(jt),fn.log("C->S: "+Pt),apiCC.session.channel.socket.emit("startRecording",Pt)):fn.log("startCompositeRecording() but client is not in session")},this.stopCompositeRecording=function(st){fn.info("stopCompositeRecording");var Tt,Rt,Lt;(Lt=st?this.getSessionMCU(st):this.getSessionMCU(null,{first:!0}))?(fn.log("stopRecording() on ApiRTC MCU with roomId :",Lt.roomName),Tt={type:"stopRecording",roomId:Lt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:"COMPOSITE",data:{pubSub:this.pubConnector}},Rt=JSON.stringify(Tt),fn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("stopRecording",Rt)):fn.log("stopCompositeRecording() but client is not in session")},this.inviteVoIP=function(st,Tt,Rt){var Lt=this;return new Promise(function(Et,jt){if(!st||typeof st!="string")return jt(new Error("wrong roomId"));if(!Lt.getSessionMCU(st))return jt(new Error("no such session"));if(!Tt||typeof Tt!="string")return jt(new Error("wrong convId"));if(!Rt||typeof Rt!="string")return jt(new Error("wrong phoneNumber"));var Pt="inviteVoIP-"+Rt;try{if(Yt.hasReceiptHook(Pt))return jt(new Error("busy"));var Vt=new Nt;Vt.onSuccess(function(){return Et()}),Vt.onFailure(function(Jt){return jt(Jt)}),Vt.setTimeout(1e4,"timeout"),Yt.createReceiptHook(Pt,Vt)}catch(Jt){return fn.debug("inviteVoIP: createReceiptHook",Jt),jt(new Error("internal error"))}var Zt={type:"inviteVoIP",clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:st,convId:Tt,phoneNumber:Rt,receiptId:Pt,data:{pubSub:"sipConnector"}},rn=JSON.stringify(Zt);fn.debug("C->S:",rn),apiCC.session.channel.socket.emit("inviteVoIP",rn)})},this.enforceMCU=function(st){var Tt;if(Tt=st?this.getSessionMCU(st):this.getSessionMCU(null,{first:!0})){var Rt={type:"info",infoType:"enforceMCU",data:{clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:Tt.roomName,pubSub:this.pubConnector}},Lt=JSON.stringify(Rt);fn.log("C->S: "+Lt),apiCC.session.channel.socket.emit("info",Lt)}else fn.log("enforceMCU() but client is not in session")},this.meshPublish=function(st,Tt,Rt,Lt,Et,jt){var Pt=!1,Vt=null,Zt=null,rn=this.getSessionMCU(st);if(!rn)return fn.error("meshPublish() - missing sessionMCU"),null;if(Lt===!0||Lt===!1||Lt==="true"||Lt==="false"?(fn.log("DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly"),Pt=Lt,Lt={}):Lt!==null&&cn(Lt)==="object"||(Lt={}),Et!==null&&cn(Et)==="object"||(Et={}),(0,at.Ym)(Lt,"profileType","string")&&(Et.profileType=Lt.profileType),(0,at.Ym)(Lt,"priority","number")&&Lt.priority>=0&&(Et.priority=Lt.priority),(0,at.Ym)(Lt,"downgradeProfileList","array")&&(Et.downgradeProfileList=Lt.downgradeProfileList),Lt.audioOnly!==void 0&&(Pt=Lt.audioOnly,Et.callConfiguration!==void 0||(Et.callConfiguration={}),Et.callConfiguration.audioOnly=Lt.audioOnly),(0,at.Ym)(Lt,"context","object"))try{JSON.stringify(Lt.context),Et.context=Lt.context}catch{}return Vt=new yn(apiCC.session.apiCCWebRTCClient.webRTCClient),Pt!==!0&&Pt!=="true"||(fn.log("Setting call as audioOnly"),Vt.callType="audio"),Vt.roomId=st,Vt.sessionId=Tt,Vt.token=Rt,Vt.callConfiguration=Lt,Vt.data=Et,Vt.options=jt,Vt.sessionMCU=rn,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(Vt),Lt.userMediaStreamId?((Zt=apiCC.getUserMediaStream(Lt.userMediaStreamId)).addCallInfo(Vt.userMediaId,"userMedia"),Vt.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,Vt.callType=Zt.callType,Vt.audio=Zt.audio,Vt.video=Zt.video,Vt.audioMuted=Zt.audioMuted,Vt.videoMuted=Zt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Vt),apiCC.checkMutingStateForUserMedia(Lt,Zt)):apiCC.createUserMediaStream({callId:Vt.userMediaId,callFlavor:"userMedia",type:Vt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(Jt){fn.debug("[meshPublish] success; userMediaStreamId: "+Jt.userMediaStreamId),Vt.callConfiguration.userMediaStreamId=Jt.userMediaStreamId,Vt.callType=Jt.callType,Vt.audio=Jt.audio,Vt.video=Jt.video,Vt.audioMuted=Jt.audioMuted,Vt.videoMuted=Jt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Vt),apiCC.checkMutingStateForUserMedia(Lt,Jt)}}),Vt.userMediaId},this.meshOnUserMediaSuccess=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Rt=null,Lt=null;Tt===!0?((Rt={}).type="streamStatusChanged",Rt.callerId=Yt.clientId,Rt.roomId=st.roomId,Rt.streams={},Rt.streams[st.userMediaId]={eventType:"modify",callId:st.userMediaId,callType:st.callType,audio:st.audio,video:st.video,audioMuted:st.audioMuted,videoMuted:st.videoMuted},Rt.data={},Rt.data.meshPublish=!0,Rt.data.pubSub=this.pubConnector,Lt=JSON.stringify(Rt),fn.log("C->S: "+Lt),apiCC.session.channel.socket.emit("streamStatusChanged",Lt)):(this.publishCallId=st.userMediaId,st.addAck=!0,st.addTimeoutId=setTimeout(function(){Yt.onRemoteHangup(st.userMediaId,Yt.clientId,st.roomId,"Unable_to_establish",null,null)},st.disconnectionTimer),(Rt={}).type="streamStatusChanged",Rt.callerId=Yt.clientId,Rt.roomId=st.roomId,Rt.streams={},Rt.streams[st.userMediaId]={eventType:"add",callId:st.userMediaId,callType:st.callType,audio:st.audio,video:st.video,audioMuted:st.audioMuted,videoMuted:st.videoMuted},Rt.data=st.data,Rt.data.meshPublish=!0,Rt.data.pubSub=this.pubConnector,Lt=JSON.stringify(Rt),fn.log("C->S: "+Lt),apiCC.session.channel.socket.emit("streamStatusChanged",Lt))},this.meshPublishScreen=function(st,Tt,Rt,Lt,Et){var jt=null,Pt=null,Vt=this.getSessionMCU(st);return Vt?(Rt!==null&&cn(Rt)==="object"||(Rt={}),(jt=new yn(apiCC.session.apiCCWebRTCClient.webRTCClient)).roomId=st,jt.data=Tt,jt.callConfiguration=Rt,jt.captureSourceType=Lt,jt.sessionMCU=Vt,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(jt),Rt.userMediaStreamId?((Pt=apiCC.getUserMediaStream(Rt.userMediaStreamId)).addCallInfo(jt.userMediaId,"userMedia"),jt.callConfiguration.userMediaStreamId=Pt.userMediaStreamId,jt.callType=Pt.callType,jt.audio=Pt.audio,jt.video=Pt.video,jt.audioMuted=Pt.audioMuted,jt.videoMuted=Pt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(jt)):apiCC.createUserMediaStream({callId:jt.userMediaId,callFlavor:"userMedia",type:"screenSharing",captureSourceType:Lt,success:function(Zt){fn.debug("[meshPublishScreen] success; userMediaStreamId: "+Zt.userMediaStreamId),jt.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,jt.callType=Zt.callType,jt.audio=Zt.audio,jt.video=Zt.video,jt.audioMuted=Zt.audioMuted,jt.videoMuted=Zt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnScreenMediaSuccess(jt)}}),jt.userMediaId):(fn.error("meshPublishScreen() - missing sessionMCU"),null)},this.meshOnScreenMediaSuccess=function(st){var Tt,Rt=null;st.addAck=!0,st.addTimeoutId=setTimeout(function(){Yt.onRemoteHangup(st.userMediaId,Yt.clientId,st.roomId,"Unable_to_establish",null,null)},st.disconnectionTimer),(Rt={}).type="streamStatusChanged",Rt.callerId=Yt.clientId,Rt.roomId=st.roomId,Rt.streams={},Rt.streams[st.userMediaId]={eventType:"add",callId:st.userMediaId,callType:st.callType,audio:st.audio,video:st.video,audioMuted:st.audioMuted,videoMuted:st.videoMuted},Rt.data={},Rt.data.pubSub=this.pubConnector,Tt=JSON.stringify(Rt),fn.log("C->S: "+Tt),apiCC.session.channel.socket.emit("streamStatusChanged",Tt)},this.meshOnHangup=function(st,Tt){var Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Lt=0,Et=null,jt=null,Pt=null;if(Tt!==null&&cn(Tt)==="object"||(Tt={}),st){if((Et=Yt.findUserMediaById(st))!==null){for(Et.close(),Et.streamStolen!==!0&&(Yt.myWebRTC_Event.createHangupEvent("local",Yt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.releaseUserMediaStream()),(jt={}).type="streamStatusChanged",jt.callerId=Yt.clientId,jt.roomId=Et.roomId,jt.streams={},jt.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},Rt.restart&&(jt.streams[Et.userMediaId].restart=!0),jt.data={},jt.data.pubSub=this.pubConnector,Pt=JSON.stringify(jt),fn.log("C->S: "+Pt),apiCC.session.channel.socket.emit("streamStatusChanged",Pt),Lt=Yt.userMediaTable.length;--Lt>=0;)if(Yt.userMediaTable[Lt]===Et){Yt.userMediaTable.splice(Lt,1);break}}}else for(Lt=Yt.userMediaTable.length;--Lt>=0;)Et=Yt.userMediaTable[Lt],Rt.hasOwnProperty("roomId")&&Et.sessionMCU.roomName!==Rt.roomId||(Yt.myWebRTC_Event.createHangupEvent("local",Yt.clientId,0,!0,null,Et.userMediaId,Et.callType),Et.close(),Et.releaseUserMediaStream(),(jt={}).type="streamStatusChanged",jt.callerId=Yt.clientId,jt.roomId=Et.roomId,jt.streams={},jt.streams[Et.userMediaId]={eventType:"remove",callId:Et.userMediaId,callType:Et.callType},jt.data={},jt.data.pubSub=this.pubConnector,Pt=JSON.stringify(jt),fn.log("C->S: "+Pt),apiCC.session.channel.socket.emit("streamStatusChanged",Pt),Yt.userMediaTable.splice(Lt,1))},this.participantEjected=function(st){(0,at.Ym)(st.data,"clientId","string")&&Yt.myWebRTC_Event.createMCUParticipantEjectedEvent(st.roomId,st.data.clientId,st.data.info)},this.ejectParticipant=function(st,Tt,Rt){var Lt;if(Lt=Rt?this.getSessionMCU(Rt):this.getSessionMCU(null,{first:!0})){var Et={type:"ejectParticipant",roomId:Lt.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,clientId:st}};Tt&&(Et.data.info=Tt);var jt=JSON.stringify(Et);fn.log("C->S: "+jt),apiCC.session.channel.socket.emit("ejectParticipant",jt)}else fn.debug("ejectParticipant() - missing sessionMCU")},this.getJoinSessionReq=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=null;if(!st){if(Tt.hasOwnProperty("transactionId")){for(var Lt=this.joinSessionReqs.length;--Lt>=0;)if(this.joinSessionReqs[Lt].transactionId===Tt.transactionId){Rt=this.joinSessionReqs[Lt];break}return Rt}return null}for(var Et=this.joinSessionReqs.length;--Et>=0;)if(this.joinSessionReqs[Et].roomId===st){Rt=this.joinSessionReqs[Et];break}return Rt},this.removeJoinSessionReq=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!st){if(Tt.all===!0)return this.joinSessionReqs.splice(0,this.joinSessionReqs.length),!0;Tt.hasOwnProperty("roomId")&&(st=this.getJoinSessionReq(Tt.roomId))}if(!st)return!1;for(var Rt=this.joinSessionReqs.length;--Rt>=0&&this.joinSessionReqs[Rt]!==st;);return Rt>=0&&(this.joinSessionReqs.splice(Rt,1),!0)},this.getSessionMCU=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=null;if(!st){if(Tt.first===!0)return this.sessionMCUs[0];if((0,at.Ym)(Tt.callback,"function")){fn.debug("getSessionMCU callback");for(var Lt=this.sessionMCUs.length;--Lt>=0;)if(Tt.callback(this.sessionMCUs[Lt])){Rt=this.sessionMCUs[Lt];break}}return Rt}for(var Et=this.sessionMCUs.length;--Et>=0;)if(this.sessionMCUs[Et].roomName===st){Rt=this.sessionMCUs[Et];break}return Rt},this.removeSessionMCU=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!st&&Tt.all===!0)return this.sessionMCUs.splice(0,this.sessionMCUs.length),!0;if(!st)return!1;for(var Rt=this.sessionMCUs.length;--Rt>=0&&this.sessionMCUs[Rt]!==st;);return Rt>=0&&(this.sessionMCUs.splice(Rt,1),!0)},this.callback=function(st,Tt){return this.closureHandler=function(Rt){return st[Tt](Rt)},this.closureHandler}};function An(Yt){fn.debug("disputableEntryTimeout",Yt);for(var kt=apiCC.session.apiCCWebRTCClient.webRTCClient,st=this.disputableStreamList.length;--st>=0;)if(this.disputableStreamList[st].streamInfo.id===Yt){this.disputableStreamList.splice(st,1);break}for(var Tt=null,Rt=this.streamList.length;--Rt>=0;)if(this.streamList[Rt].streamInfo.id===Yt){Tt=kt.destroyCallControl({type:"subscribe",stream:this.streamList[Rt].streamInfo}),this.streamList.splice(Rt,1);break}Tt&&Tt.callId&&Tn.createHangupEvent("remote",kt.clientId,Tt.roomName,!1,"Hangup_From_Callee",Tt.callId,Tt.callType),Tn.createMCURemovedStreamEvent(Yt)}function Rn(Yt){fn.debug("clearDisputableEntry",Yt);for(var kt=this.disputableStreamList.length;--kt>=0;)if(this.disputableStreamList[kt].streamInfo.id===Yt){this.disputableStreamList.splice(kt,1);break}for(var st=this.streamList.length;--st>=0;)if(this.streamList[st].streamInfo.id===Yt){this.streamList[st].disputableTimeoutId&&(clearTimeout(this.streamList[st].disputableTimeoutId),delete this.streamList[st].disputableTimeoutId),delete this.streamList[st].clearDisputableEntry;break}}function In(Yt){var kt={};return(0,at.ki)(Yt,"maxBitrate","number")&&(kt.maxBitrate=Yt.maxBitrate),(0,at.ki)(Yt,"scaleResolutionDownBy","number")&&(kt.scaleResolutionDownBy=Yt.scaleResolutionDownBy),kt}function kn(Yt){return(0,at.Ym)(Yt.encodings,"object")?(0,at.ki)(Yt.encodings.high,"maxBitrate","number")&&(0,at.ki)(Yt.encodings.medium,"maxBitrate","number")&&(0,at.ki)(Yt.encodings.low,"maxBitrate","number")?(Yt.encodings.high=Object.assign({active:!0},In(Yt.encodings.high)),Yt.encodings.medium=Object.assign({active:!0},In(Yt.encodings.medium)),Yt.encodings.low=Object.assign({active:!0},In(Yt.encodings.low)),Yt.sendEncodings=[{rid:"h",active:!0},{rid:"m",active:!0},{rid:"l",active:!0}],Yt.sendEncodings[0].maxBitrate=1e3*Yt.encodings.high.maxBitrate,Yt.sendEncodings[1].maxBitrate=1e3*Yt.encodings.medium.maxBitrate,Yt.sendEncodings[2].maxBitrate=1e3*Yt.encodings.low.maxBitrate,(0,at.ki)(Yt.encodings.medium,"scaleResolutionDownBy","number")&&(Yt.sendEncodings[1].scaleResolutionDownBy=Yt.encodings.medium.scaleResolutionDownBy),(0,at.ki)(Yt.encodings.low,"scaleResolutionDownBy","number")&&(Yt.sendEncodings[2].scaleResolutionDownBy=Yt.encodings.low.scaleResolutionDownBy),!0):(fn.warn("no such maxBitrate"),!1):(fn.warn("no such encodings"),!1)}function xn(Yt,kt){if(kt<650)return!1;var st=Math.floor(9*kt/13),Tt=Math.floor(3*kt/13),Rt=kt-st-Tt;return Yt.encodings={high:{maxBitrate:st},medium:{maxBitrate:Tt,scaleResolutionDownBy:2},low:{maxBitrate:Rt,scaleResolutionDownBy:4}},kn(Yt)}et.Y.get("CallControl");var Yn=function(Yt){this.type=Yt.type,Yt.callId&&(this.callId=Yt.callId),Yt.callType?this.callType=Yt.callType:this.callType="media",Object.prototype.hasOwnProperty.call(Yt,"audioOnly")&&(this.audioOnly=!!Yt.audioOnly),Yt.roomName&&(this.roomName=Yt.roomName),Yt.mediaType&&(this.mediaType=Yt.mediaType),Yt.callConfiguration&&(this.callConfiguration=Yt.callConfiguration),Yt.data&&(this.data=Yt.data),Yt.stream&&(this.stream=Yt.stream),this.autoRestart={}},Un=function(){var Yt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];this.a=1,this.b=0,this.c=7,this.d=0,this.update=function(kt,st,Tt){var Rt=0;for(st==null&&(st=0),Tt==null&&(Tt=kt.length);Rt<Tt;Rt+=1)this.a=(this.a+kt[st+Rt])%65521,this.b=(this.b+this.a)%65521,this.c=(this.c+3)*(kt[st+Rt]+5)%65521,this.d=(this.d+this.c)%65521},this.digest=function(kt){return Yt[this.d>>12&15]+Yt[this.d>>8&15]+Yt[this.d>>4&15]+Yt[15&this.d]+Yt[this.c>>12&15]+Yt[this.c>>8&15]+Yt[this.c>>4&15]+Yt[15&this.c]+Yt[this.b>>12&15]+Yt[this.b>>8&15]+Yt[this.b>>4&15]+Yt[15&this.b]+Yt[this.a>>12&15]+Yt[this.a>>8&15]+Yt[this.a>>4&15]+Yt[15&this.a]}};function jn(Yt,kt){return Yt==="checksum64"?new Un:null}function Qn(Yt){return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(kt){return typeof kt}:function(kt){return kt&&typeof Symbol=="function"&&kt.constructor===Symbol&&kt!==Symbol.prototype?"symbol":typeof kt},Qn(Yt)}var on=et.Y.get("WebRTC_Client"),Hn=apiCC.myWebRTC_Event,Fn=4e4,Vn=function(Yt){function kt(st,Tt,Rt){var Lt,Et=st.width,jt=Et<<2,Pt=st.height,Vt=null,Zt=0,rn=0,Jt=0,ln=0,mn=0,an=0,hn=0,En=0,Mn=0,Pn=0,Wn=0,Nn=0,Jn=0,rr=0,hr=0,cr=0;if(Tt){for(Vt=Tt.data,Rt<0&&(Rt=0),En=1-((mn=(2.44413*(Zt=Rt>=2.5?.98711*Rt-.9633:Rt>=.5?3.97156-4.14554*Math.sqrt(1-.26891*Rt):2*Rt*(3.97156-4.14554*Math.sqrt(.865545)))+2.85619*(rn=Zt*Zt)+1.26661*(Jt=rn*Zt))/(ln=1.57825+2.44413*Zt+1.4281*rn+.422205*Jt))+(an=-(1.4281*rn+1.26661*Jt)/ln)+(hn=.422205*Jt/ln)),Lt=0;Lt<3;Lt++)for(Mn=0;Mn<Pt;Mn++){for(Wn=Mn*jt+(Et-1<<2)+Lt,hr=rr=Jn=Nn=Vt[Pn=Mn*jt+Lt],Pn=Mn*jt+Lt;Pn<=Wn;Pn+=4)Nn=En*Vt[Pn]+mn*Jn+an*rr+hn*hr,Vt[Pn]=Nn,hr=rr,rr=Jn,Jn=Nn;for(Wn=Mn*jt+Lt,hr=rr=Jn=Nn=Vt[Pn=Mn*jt+(Et-1<<2)+Lt],Pn=Mn*jt+(Et-1<<2)+Lt;Pn>=Wn;Pn-=4)Nn=En*Vt[Pn]+mn*Jn+an*rr+hn*hr,Vt[Pn]=Nn,hr=rr,rr=Jn,Jn=Nn}for(Lt=0;Lt<3;Lt++)for(cr=0;cr<Et;cr++){for(Wn=(Pt-1)*jt+(cr<<2)+Lt,hr=rr=Jn=Nn=Vt[Pn=(cr<<2)+Lt],Pn=(cr<<2)+Lt;Pn<=Wn;Pn+=jt)Nn=En*Vt[Pn]+mn*Jn+an*rr+hn*hr,Vt[Pn]=Nn,hr=rr,rr=Jn,Jn=Nn;for(Wn=(cr<<2)+Lt,hr=rr=Jn=Nn=Vt[Pn=(Pt-1)*jt+(cr<<2)+Lt],Pn=(Pt-1)*jt+(cr<<2)+Lt;Pn>=Wn;Pn-=jt)Nn=En*Vt[Pn]+mn*Jn+an*rr+hn*hr,Vt[Pn]=Nn,hr=rr,rr=Jn,Jn=Nn}return Tt}}this.localStream=null,this.remoteStream=null,this.channelReady=!1,this.socket=Yt.channel.socket,this.clientId=Yt.apiCCId,this.compositeClientId=Yt.apiCCId+"@"+Yt.apiCCSessionId,this.apiKey=Yt.apiKey,this.isVideoMuted=!1,this.isAudioMuted=!1,this.receiptHooks={},this.callControlTable=[],this.userMediaTable=[],this.callsTable=[],this.callsRetriesTable={},this.restartCallDelay=1e3,this.maxCallsRetriesDuration=15e4,this.accessToLocalMedia=!1,this.unidirectionelCallOnly=!1,this.NtoNConf=!1,this.autoAnswer=!1,this.RTPMedia=!1,this.logoAdded=!1,this.preferOpusCodec=!1,this.preferVP9Codec=!1,typeof apiRTC_React<"u"&&nt.BF==="iOS"?(on.log("React and iOS : Setting H264 as preferred codec"),this.preferH264Codec=!0):this.preferH264Codec=!1,this.preferSendingH264Codec=!1,this.setStereo=!1,this.allowedAudioCodecs="",this.allowedVideoCodecs="",this.mediaRoutingModeEnum={hostOnly:1,stun:2,stunOnly:3,turn:4,turnOnly:5},this.mediaRoutingMode=this.mediaRoutingModeEnum.turn,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.getUserMediaOnGoing=!1,this.userAcceptOnIncomingCall=!1,this.userAcceptOnIncomingCallBeforeGetUserMedia=!1,this.userAcceptOnIncomingDataCall=!1,this.userAcceptOnIncomingScreenSharingCall=!1,this.maxWidthRemoteVideo=0,this.maxHeightRemoteVideo=0,this.nickname=Yt.nickname,this.allowMultipleCalls=!1,this.mySDPManager=new ut,this.MCUClient=new Ln(this,this.clientId),this.audioSourceId=null,this.audioOutputId=null,this.videoSourceId=null,this.facingMode=null,this.apiRTCExtensionInstalled=!1,this.trickleIce=!0,this.waitingShareScreenCallId=0,this.waitingShareScreenDestNumber=0,this.waitingCaptureSourceType=null,this.qosEnable=!1,this.qosInterval=5e3,this.csmEnable=!1,this.qualityScoreEnable=!1,this.qualityScoreIntervalMs=5e3,this.csmIntervalMs=5e3,this.recordedCall=!1,this.audioBandwidth=null,this.videoBandwidth=null,this.videoRemoteBandwidth=null,this.videoBandwidthSettings={},this.dataBandwidth=null,this.pc_config="",this.clientIncomingCandidatesQueue=[],this.cleanStoredCallCandidateTimer=6e4,this.initializeGumConfig=function(){nt.Xh==="Edge"&&nt.PR>=15&&apiRTC.browserDetails.type!=="chrome"?this.gum_config={audio:!0,video:!0}:nt.Xh==="Chrome"&&nt.PR<49||nt.Xh==="Firefox"&&nt.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}}},this.initializeGumConfig(),this.setGumConfigWithDevicePresent=function(){apiCC.mediaDeviceMgr.audioDevicePresent===!1&&(this.gum_config.audio=!1),apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.gum_config.video=!1),apiCC.mediaDeviceMgr.audioDevicePresent===!1&&apiCC.mediaDeviceMgr.videoDevicePresent===!1&&(this.unidirectionelCallOnly=!0),on.log("this.gum_config:",this.gum_config)},this.userMediaErrorDetected=!1,this.lastUsedUserMediaConstraint=null,this.mediaTypeForIncomingCall="VIDEO",this.mediaTypeForOutgoingCall="VIDEO",this.allowAsymetricMediaCalls=!1,this.receiveMediaDeactivated=!1,this.configTurnServer=null,apiCC.myWebRTC_Adapter.adaptForIoSCordova(),this.pc_config={iceServers:[{urls:["turns:mp1.apizee.com:443?transport=udp","turns:mp1.apizee.com:443?transport=tcp","turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turns:mp2.apizee.com:443?transport=udp","turns:mp2.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]},nt.Xh==="Firefox"&&nt.PR<53?(on.log("createPeerConnection FIREFOX"),on.log("webrtcDetectedVersion : "+apiCC.myWebRTC_Adapter.webrtcDetectedVersion),nt.PR<38?this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}:nt.PR>=42?this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}:this.pc_config={iceServers:[{urls:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443?transport=tcp",credential:"password",username:"anonymous"}]}):nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11?(on.log("Browser is :"+nt.Xh+" - using Plugin"),this.pc_config={iceServers:[{url:"stun:mp1.apizee.com:443",credential:"password",username:"anonymous"},{url:"turn:mp1.apizee.com:443",credential:"password",username:"anonymous"}]}):nt.Xh==="Edge"&&nt.PR<45&&apiRTC.browserDetails.type!=="chrome"?(on.log("Browser is Edge < 45 - removing Turns config"),this.pc_config={iceServers:[{urls:["turn:mp1.apizee.com:443?transport=udp","turn:mp1.apizee.com:443?transport=tcp","turn:mp2.apizee.com:443?transport=udp","turn:mp2.apizee.com:443?transport=tcp"],credential:"password",username:"anonymous"}]}):on.log("default this.pc_config configuration"),this.pc_constraints={optional:[]},at.wL.type==="edge"?on.debug("not data channel capable"):at.wL.type==="safari"?at.wL.version>=11?this.dataChannelCapable=!0:on.debug("not data channel capable"):this.dataChannelCapable=!0,at.wL.type==="chrome"&&at.wL.version>=68||at.wL.type==="firefox"&&at.wL.version>=64||at.wL.type==="safari"&&at.wL.version>=12?(on.debug("RTCRtpSender#setParameters is available"),this.rtpSenderSetParamatersCapable=!0):(on.debug("RTCRtpSender#setParameters is NOT available"),this.rtpSenderSetParamatersCapable=!1),this.setClientTurnServer=function(st){on.info("setClientTurnServer :",st);var Tt=JSON.stringify(this.pc_config);Tt=Tt.replace(/mp1.apizee.com/g,st),this.pc_config=JSON.parse(Tt)},this.activateScreenSharing=function(st){apiCC.activateScreenSharing(st)},this.setGetUserMediaConfig=function(st){if(on.log("setGetUserMediaConfig :",st),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0){var Tt=navigator.mediaDevices.getSupportedConstraints();on.log("Supported Constraints :",Tt)}st.video!==void 0&&(st.video.height===void 0&&st.video.width===void 0||st.optional!==void 0&&(on.warn("contraints with both optional/mandatory and specific or advanced constraints usage : this may failed depending of browsers"),on.log("setGetUserMediaConfig : contraints modification to avoid both optional/mandatory and specific or advanced constraints usage"),st.optional.sourceId!==void 0&&(on.log("sourceId contraints modification to deviceId"),st.video.deviceId===void 0&&(st.video.deviceId={}),st.video.deviceId.ideal=st.optional.sourceId),delete st.optional)),on.log("this.gum_config :",this.gum_config),this.gum_config=st},this.getUserMedia=function(){try{this.gum_config=apiCC.setAudioSourceIdInConstraint(this.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,this.gum_config),this.lastUsedUserMediaConstraint=this.gum_config,nt.Xh==="IE"&&nt.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,"onUserMediaSuccess"),this.callback(this,"onUserMediaError")):apiCC.getUserMedia(this.gum_config).then(this.callback(this,"onUserMediaSuccess")).catch(this.callback(this,"onUserMediaError"))}catch(st){on.error("getUserMedia() failed. Is this a WebRTC capable browser?"),on.log("getUserMedia failed with exception: "+st.message)}},this.onUserMediaSuccess=function(st){on.info("onUserMediaSuccess : User has granted access to local media."),this.accessToLocalMedia=!0;var Tt=!1,Rt="Unknown",Lt=!1,Et="Unknown";this.localStream=st,st.getAudioTracks().length>0&&(Tt=!0,st.getAudioTracks()[0].label&&(Rt=st.getAudioTracks()[0].label),on.log("Using audio device: "+Rt)),st.getVideoTracks().length>0&&(Lt=!0,st.getVideoTracks()[0].label&&(Et=st.getVideoTracks()[0].label),on.log("Using video device: "+Et)),this.myWebRTC_Event.createUserMediaSuccessEvent(!1,Tt,Rt,Lt,Et,"media",null,st,null,!1)},this.onUserMediaError=function(st){on.info("onUserMediaError : Failed to get access to local media. Error : ",st),on.error(st),this.accessToLocalMedia=!1,nt.$6!=="electron"&&(nt.Xh==="Chrome"||nt.Xh==="Mobile Chrome")&&nt.PR>47&&(on.log("browser_version > 47"),window.location.protocol!=="https:"&&on.error("HTTPS is now mandatory to use getUserMedia()")),this.myWebRTC_Event.createUserMediaErrorEvent(!1,"media",st,null,null,null,this.gum_config),st=null,apiCC.session.tryAudioCallAfterUserMediaError===!0?(on.log("this.lastUsedUserMediaConstraint :",this.lastUsedUserMediaConstraint),on.log("this.lastUsedUserMediaConstraint.video :",this.lastUsedUserMediaConstraint.video),this.lastUsedUserMediaConstraint.video!==!1?(on.log("this.lastUsedUserMediaConstraint.audio :",this.lastUsedUserMediaConstraint.audio),on.log("UserMediaError, Trying to getUserMedia with audioOnly"),this.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):on.log("onUserMediaError without video")):on.log("try AudioCall after UserMediaError is not activated")},this.evalCallProfileWithSdp=function(st,Tt,Rt){return this.evalCallProfileWithSdpGuideline(this.mySDPManager.createGuideline(st),st,Tt,Rt)},this.evalCallProfileWithSdpGuideline=function(st,Tt,Rt,Lt){var Et={};return st.hasOwnProperty("audio")?(Et.audio=!0,Et.audioActive=Rt==="local"&&Lt==="send"?st.audio.direction==="sendrecv"||st.audio.direction==="sendonly":Rt==="local"&&Lt==="receive"||Rt==="remote"&&Lt==="send"?st.audio.direction==="sendrecv"||st.audio.direction==="recvonly":Rt==="remote"&&Lt==="receive"&&(st.audio.direction==="sendrecv"||st.audio.direction==="sendonly")):(Et.audio=!1,Et.audioActive=!1),st.hasOwnProperty("video")?(Et.video=!0,Et.videoActive=Rt==="local"&&Lt==="send"?st.video.direction==="sendrecv"||st.video.direction==="sendonly":Rt==="local"&&Lt==="receive"||Rt==="remote"&&Lt==="send"?st.video.direction==="sendrecv"||st.video.direction==="recvonly":Rt==="remote"&&Lt==="receive"&&(st.video.direction==="sendrecv"||st.video.direction==="sendonly")):(Et.video=!1,Et.videoActive=!1),Et},this.checkDestCallTypeWithSDP=function(st,Tt){on.debug("checkDestCallTypeWithSDP");var Rt=this.mySDPManager.createGuideline(st),Lt=!1,Et=!1;!Rt.audio||Rt.audio.direction!=="sendrecv"&&Rt.audio.direction!=="sendonly"||(Lt=!0),!Rt.video||Rt.video.direction!=="sendrecv"&&Rt.video.direction!=="sendonly"||(Et=!0),Tt.destCallType=Lt===!0?Et===!0?"media":"audio":Et===!0?"videoOnly":"inactive",on.debug("call.destCallType: "+Tt.destCallType),Tt.callee!==!0||Rt.audio&&Rt.audio.direction!=="sendonly"||Rt.video&&Rt.video.direction!=="sendonly"||(Tt.userMediaAccessRequired=!1,Tt.mediaTypeForOutgoingCall="NONE",on.debug("access to user media not required"))},this.evaluateVideoCap=function(st){delete st.videoCap,st.belongsToRoom()?st.settingUpType!=="publish"&&st.settingUpType!=="shareScreen"||st.localCallProfile&&st.localCallProfile.video&&st.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(st):(this.rtpSenderSetParamatersCapable||!st.callee)&&st.localCallProfile&&st.localCallProfile.video&&st.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(st)},this.processInvite=function(st){on.info("processInvite() - invite received from :"+st.callerId);var Tt,Rt=0,Lt=null,Et=null,jt=null,Pt=null,Vt=!1,Zt=null,rn=null,Jt=null,ln={};if(st.data!==void 0&&st.data.type==="publish"&&st.data.mesh!==void 0){if(on.info("received invite publish mesh; mesh: "+JSON.stringify(st.data.mesh)),(Lt=this.findCallWithCallIdAndInstanceId(st.data.mesh.callerCallId,st.data.instanceId))==null)return void on.error("cannot find call; callId: "+st.data.mesh.callerCallId);Lt.userMediaAccessRequired=!1,Lt.data.mesh=st.data.mesh,Lt.setupTimeoutId&&(clearTimeout(Lt.setupTimeoutId),delete Lt.setupTimeoutId),Vt=!0}else{if(st.data!==void 0&&st.data.type==="subscribe"&&st.data.mesh!==void 0){if(on.debug("received invite subscribe mesh; mesh: ",st.data.mesh),(Et=this.findUserMediaById(st.data.mesh.calleeCallId))!==null)if(this.MCUClient.distantCalls.push({early:!0,roomId:st.roomId,clientId:st.data.mesh.callerId,callId:st.data.mesh.callerCallId,callMode:"mesh",callDirection:"recvonly",callFeed:{clientId:st.data.mesh.calleeId,callId:st.data.mesh.calleeCallId}}),setTimeout((function(hn,En,Mn){on.debug("early distant call descriptor timeout");for(var Pn=this.MCUClient.distantCalls.length;--Pn>=0;)if(this.MCUClient.distantCalls[Pn].early&&this.MCUClient.distantCalls[Pn].roomId===hn&&this.MCUClient.distantCalls[Pn].clientId===En&&this.MCUClient.distantCalls[Pn].callId===Mn){on.debug("remove early distant call descriptor: timeout"),this.MCUClient.distantCalls.splice(Pn,1);break}}).bind(this,st.roomId,st.data.callerId,st.data.callerCallId),3e4),Et.callType==="screenSharing"||Et.callType==="screenSharingWithAudio")ln.type="publish",ln.mesh=st.data.mesh,ln.instanceId=st.data.instanceId,this.MCUClient.publishScreen(st.roomId,ln,null,Et.captureSourceType);else{var mn=(0,at.ws)({},Et.callConfiguration);st.data.mediaType==="AUDIOONLY"?mn.audioOnly=!0:st.data.mediaType==="VIDEOONLY"&&(mn.videoOnly=!0),(jt=apiCC.getUserMediaStream(mn.userMediaStreamId))&&(jt.audioMuted&&jt.videoMuted?mn.muted="VIDEO":jt.audioMuted?mn.muted="AUDIOONLY":jt.videoMuted?mn.muted="VIDEOONLY":delete mn.muted),delete mn.distributedBroadcastEnabled,delete mn.simulcast,ln.type="publish",ln.mesh=st.data.mesh,ln.instanceId=st.data.instanceId,this.MCUClient.publish(st.roomId,null,null,mn,ln,null)}else on.debug("media not found: sending bye : Call_not_found"),new ht.S(apiCC.session.channel.socket).sendBye(st.callId,st.calleeId,st.roomId,st.callerId,"Call_not_found",st.data);return}if(st.data!==void 0&&st.data.type==="publish"&&st.data.mode==="passive"){if((Lt=this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.callerId,st.data.instanceId))==null)return void on.debug("cannot find call; callId: "+st.callId+", callerId: "+st.callerId+", instanceId: "+st.data.instanceId);Lt.userMediaAccessRequired=!1,Lt.setupTimeoutId&&(clearTimeout(Lt.setupTimeoutId),delete Lt.setupTimeoutId),Vt=!0}else(Lt=new vn(this)).callId=st.callId,Lt.instanceId=st.data.instanceId,Lt.callerId=st.callerId,Lt.calleeId=this.clientId,Lt.callee=!0,Lt.remoteId=st.callerId}if(Lt.dest_roomId=st.roomId,Lt.data!==void 0&&Vt===!0)for(Jt in st.data)st.data.hasOwnProperty(Jt)&&(Lt.data[Jt]=st.data[Jt]);else Lt.data=st.data;if(Lt.data.instanceId=Lt.instanceId,st.data!==void 0&&st.data.pubSub==="sipConnector"&&(Lt.trickleIce=!1,Lt.remoteType="sip"),Lt.checkDTLSCompliancy(),nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"&&(Zt=apiCC.session.getConnectedUserInfo(st.callerId,"userData"),on.log("destUserInfo :",Zt),Zt!=="User_Not_Found"&&Zt!==void 0&&((rn=JSON.parse(Zt)).browser!=="Chrome"&&rn.browser!=="Mobile Chrome"||rn.osName!=="Android"||(on.log("Browser is Edge and caller is Chrome on Android, setting VP8 as prefered codec for the call"),Lt.preferVP8Codec=!0))),st.data!==void 0&&st.data.type==="publish"&&st.data.mode==="passive"&&st.stream!==void 0&&st.stream.id!==void 0&&(Lt.streamId=st.stream.id,on.log("call.streamId: "+Lt.streamId)),Rt=this.callsTable.length,on.log("processInvite() - Actual call Number is :"+Rt),st.callType==="screenSharing"||st.callType==="screenSharingWithAudio")Lt.screenSharing=!0,Lt.callType=st.callType;else if(st.callType!=="data"){if(this.allowMultipleCalls===!1){for(on.log("processInvite() - Refusing double call checking ..."),Tt=0;Tt<Rt;Tt+=1)if(this.callsTable[Tt].callType!=="screenSharing"&&this.callsTable[Tt].callType!=="screenSharingWithAudio"&&this.callsTable[Tt].callType!=="data")return on.log("processInvite() - Refusing double call"),Vt===!1?this.callsTable.push(Lt):on.log("callAlreadyExist in table"),this.myWebRTC_Event.createCallAttemptEvent(this.clientId,st.callerId,st.callerNickname,Lt.callId),void this.refuseCall(Lt.callId,"User_Busy");on.log("NOT Refusing double call")}}Vt===!1?(Rt=this.callsTable.push(Lt),on.log("processInvite() - New call Number is :"+Rt)):(on.log("callAlreadyExist in table"),on.log("processInvite() - call Number is :"+Rt)),this.checkDestCallTypeWithSDP(st.sdpoffer.sdp,Lt);var an=this.mySDPManager.createGuideline(st.sdpoffer.sdp);if(Lt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(an,st.sdpoffer.sdp,"remote","send")),Lt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(an,st.sdpoffer.sdp,"remote","receive")),this.rtpSenderSetParamatersCapable||(this.evaluateVideoCap(Lt),Lt.videoCap&&(an.video.bandwidth=Lt.videoCap,st.sdpoffer.sdp=an.generate())),Lt.receivedSdpOfferMessage=st.sdpoffer,(0,at.ki)(st,"stream","object")&&(st.stream.audioMuted===!0&&(Lt.isRemoteAudioMuted=!0),st.stream.videoMuted===!0&&(Lt.isRemoteVideoMuted=!0)),st.callType==="data"){if(on.log("Receiving DATA call"),Lt.callType="data",Lt.dataCall=!0,nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome")return on.warn("Cannot create DataChannel as it is not supported on Edge"),void this.refuseCall(Lt.callId,"DataChannel_Not_Supported");this.userAcceptOnIncomingDataCall||Lt.onUserMediaSuccessTestUni(),this.myWebRTC_Event.createIncomingCallEvent(this.clientId,st.callerId,st.callerNickname,Lt.callId,!1,Rt,!1,st.callType,!1,Lt.remoteType,Lt.destCallType)}else Lt.userMediaAccessRequired===!1||this.unidirectionelCallOnly||Lt.screenSharing===!0?(on.log("call.userMediaAccessRequired :",Lt.userMediaAccessRequired),on.log("this.unidirectionelCallOnly :",this.unidirectionelCallOnly),on.log("call.screenSharing :",Lt.screenSharing),Lt.screenSharing===!0?this.userAcceptOnIncomingScreenSharingCall===!1?Lt.onUserMediaSuccessTestUni():on.debug("userAcceptOnIncomingScreenSharingCall is activated : need user accept"):Vt===!0?(on.log("processInvite() - callAlreadyExist"),Lt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?on.log("processInvite() - Waiting for call accept or refuse from user - 1"):(on.log("processInvite() - userAcceptOnIncomingCall is not activated"),Lt.onUserMediaSuccessTestUni()),st.data!==void 0&&st.data.subscribeOrder===!0||Vt!==!1||this.myWebRTC_Event.createIncomingCallEvent(this.clientId,st.callerId,st.callerNickname,Lt.callId,!1,Rt,!1,st.callType,!1,Lt.remoteType,Lt.destCallType)):(apiCC.userMediaStreamTable.length>0&&(Pt=apiCC.userMediaStreamTable[0].userMediaStreamId),this.accessToLocalMedia!==!0&&!Pt||this.autoAnswer!==!0?(Lt.audioOnly===!0&&apiCC.mediaDeviceMgr.audioDevicePresent===!1?(on.log("processInvite() - audio and video media are not transmitted"),Lt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?on.log("Stand-by :: wait for getUserMediaOnCall && establishCall"):(on.debug("processInvite() - call.getUserMediaOnCall()"),on.log("processInvite() - this.autoAnswer :"+this.autoAnswer),Lt.getUserMediaOnCall()),Vt===!1&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,st.callerId,st.callerNickname,Lt.callId,!1,Rt,Lt.audioOnly,st.callType,!1,Lt.remoteType,Lt.destCallType)):(on.log("processInvite() :: User has already granted access to local media and AutoAnswer activated : establishing call"),this.userAcceptOnIncomingCall===!0||this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?on.log("processInvite() - Waiting for call accept or refuse from user - 2"):Pt?(on.log("using First available stream on apiRTC"),(jt=apiCC.getUserMediaStream(Pt)).addCallInfo(Lt.callId),Lt.callConfiguration!==void 0&&Lt.callConfiguration!==null||(Lt.callConfiguration={}),Lt.callConfiguration.userMediaStreamId=jt.userMediaStreamId,Lt.onUserMediaSuccessOnCall(jt.stream)):Lt.establishCall(),Vt===!1&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,st.callerId,st.callerNickname,Lt.callId,!0,Rt,Lt.audioOnly,st.callType,!1,Lt.remoteType,Lt.destCallType)))},this.setRemoteDescriptionProcess=function(st,Tt){this.preferSendingH264Codec&&(on.log("Modification of SDP to set H264 as prefered sending codec"),Tt.sdp=this.mySDPManager.maybePreferCodec(Tt.sdp,"video","H264")),nt.Xh==="Chrome"&&nt.PR<55||nt.Xh==="Firefox"&&nt.PR<50||nt.Xh==="IE"?st.pc!==null?st.pc.setRemoteDescription(Tt,st.callback(st,"onSetRemoteDescriptionSuccess"),st.callback(st,"onSetRemoteDescriptionFailure")):on.debug("setRemoteDescriptionProcess - pc is null"):(on.log("before setRemoteDescription - Promise version"),st.pc!==null?st.pc.setRemoteDescription(Tt).then(st.callback(st,"onSetRemoteDescriptionSuccess")).catch(st.callback(st,"onSetRemoteDescriptionFailure")):on.debug("setRemoteDescriptionProcess - pc is null"))},this.process200OK=function(st){var Tt,Rt=null,Lt=null;if(st.data!==void 0&&st.data.instanceId!==void 0?(on.info("200OK received from callId :"+st.calleeId+", intanceId is :"+st.data.instanceId),Rt=this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.calleeId,st.data.instanceId)):(on.info("200OK received from callId :"+st.calleeId),Rt=this.findCallWithCallIdAndRemoteId(st.callId,st.calleeId)),Rt===null)return on.warn("200OK received but callId and instanceId are not matching, no process"),void this.myWebRTC_Event.createErrorEvent("200OK received but callId is not matching, no process","NOT_MATCHING_CALLID_ON_200OK");Rt.calleeId=st.calleeId,st.sdpanswer&&st.sdpanswer.type!=="no-answer"?Rt.message200OKReceived===!1?(on.debug("first 200OK for the call"),Rt.message200OKReceived=!0,Rt.data.type!=="subscribe"&&this.checkDestCallTypeWithSDP(st.sdpanswer.sdp,Rt),Tt=this.mySDPManager.createGuideline(st.sdpanswer.sdp),Rt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Tt,st.sdpanswer.sdp,"remote","send")),Rt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Tt,st.sdpanswer.sdp,"remote","receive")),this.evaluateVideoCap(Rt),!this.rtpSenderSetParamatersCapable&&Rt.videoCap&&(Tt.video.bandwidth=Rt.videoCap,st.sdpanswer.sdp=Tt.generate()),Rt.receivedSdpOfferMessage=st.sdpanswer,on.log("process200OK : before setRemoteDescription"),Lt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(st.sdpanswer),this.videoRemoteBandwidth&&(on.log("Modification of SDP to set remote video bandwidth"),Lt.sdp=this.mySDPManager.setVideoBandwidth(Lt.sdp,this.videoRemoteBandwidth)),this.setRemoteDescriptionProcess(Rt,Lt),st.data!==null&&st.data!==void 0&&(Rt.data!==null&&Rt.data!==void 0?Rt.data=(0,at.S6)(Rt.data,st.data):Rt.data=st.data)):on.debug("200OK has already been received for this call, leaving process200OK"):Hn.createCallEstablishedEvent(Rt.calleeId,Rt.callType,Rt.callId,Rt.destCallType)},this.cleanStoredCallCandidate=function(st,Tt){on.debug("cleanStoredCallCandidate from callId :"+st+", instanceId is :"+Tt),this.clientIncomingCandidatesQueue[st+"-"+Tt]!==void 0&&this.clientIncomingCandidatesQueue[st+"-"+Tt].length!==0&&(this.clientIncomingCandidatesQueue[st+"-"+Tt].splice(0,this.clientIncomingCandidatesQueue[st+"-"+Tt].length),delete this.clientIncomingCandidatesQueue[st+"-"+Tt])},this.processCandidate=function(st){var Tt=null,Rt=st.data&&st.data.instanceId?st.data.instanceId:null;on.debug("Candidate received from callId :"+st.callId+", instanceId is :"+Rt),Tt=st.callerId===this.clientId?Rt?this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.calleeId,Rt):this.findCallWithCallIdAndRemoteId(st.callId,st.calleeId):Rt?this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.callerId,Rt):this.findCallWithCallIdAndRemoteId(st.callId,st.callerId),on.trace("msg.label :"+st.label),on.log("msg.candidate :"+st.candidate),Tt!==null?Tt.started&&Tt.remoteDescriptionSetted?Tt.processCandidateMsg(st):(on.log("Call not started or remoteDescription is not yet setted"),Tt.incomingcandidatesQueue.push(st)):Rt&&(on.debug("Call not found, Candidate message is not handled, storing candidate message in client"),this.clientIncomingCandidatesQueue[st.callId+"-"+Rt]!==null&&this.clientIncomingCandidatesQueue[st.callId+"-"+Rt]!==void 0||(this.clientIncomingCandidatesQueue[st.callId+"-"+Rt]=[],on.debug("First candidate for this call, starting a timeout before candidate storage cleaning"),setTimeout(this.cleanStoredCallCandidate.bind(this),this.cleanStoredCallCandidateTimer,st.callId,Rt)),this.clientIncomingCandidatesQueue[st.callId+"-"+Rt].push(st))},this.processUpdate=function(st){on.info("Update message on:"+st.roomId);var Tt,Rt=null;if((Rt=st.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.calleeId,st.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.callerId,st.data.instanceId))!==null)if(st.hasOwnProperty("sdpoffer")&&st.sdpoffer.hasOwnProperty("sdp"))Rt.setRemoteCallProfile(this.evalCallProfileWithSdp(st.sdpoffer.sdp,"remote","receive"),!0),Rt.updateOngoingTimeoutId=setTimeout(function(){delete Rt.updateOngoingTimeoutId},Fn),this.checkDestCallTypeWithSDP(st.sdpoffer.sdp,Rt),on.log("processUpdate : before setRemoteDescription"),Tt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(st.sdpoffer),this.setRemoteDescriptionProcess(Rt,Tt),Rt.doUpdateAnswer();else if((0,at.ki)(st.data,"mesh","object")&&(st.data.mesh.calleeCompositeUserId?st.data.mesh.calleeCompositeUserId===this.compositeClientId:st.data.mesh.calleeId===this.clientId)){on.debug("mesh update from subscriber");var Lt={};st.data.mediaType==="AUDIOONLY"?Lt.audioOnly=!0:st.data.mediaType==="VIDEOONLY"&&(Lt.videoOnly=!0),this.updateCallConfigurationOnCall(st.callId,Lt).then(function(){on.debug("updateCallConfigurationOnCall OK")}).catch(function(Et){on.error("updateCallConfigurationOnCall failed",Et)})}else on.error("update without SDP offer");else this.myWebRTC_Event.createErrorEvent("Cannot find call to process Update","CALL_NOT_FOUND_ON_UPDATE")},this.process200Update=function(st){on.info("200 Update received from :"+st.calleeId);var Tt,Rt=null,Lt=null;if((Rt=st.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.calleeId,st.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(st.callId,st.callerId,st.data.instanceId))===null)return on.info("Call not found on 200 Update"),void this.myWebRTC_Event.createErrorEvent("Cannot find call to process 200 Update","CALL_NOT_FOUND_ON_200UPDATE");Rt.calleeId=st.calleeId,Tt=this.mySDPManager.createGuideline(st.sdpanswer.sdp),Rt.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(Tt,st.sdpanswer.sdp,"remote","send"),!0),Rt.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(Tt,st.sdpanswer.sdp,"remote","receive"),!0),this.evaluateVideoCap(Rt),!this.rtpSenderSetParamatersCapable&&Rt.videoCap&&(Tt.video.bandwidth=Rt.videoCap,st.sdpanswer.sdp=Tt.generate()),on.log("process200Update : before setRemoteDescription"),Lt=new apiCC.myWebRTC_Adapter.RTCSessionDescription(st.sdpanswer),this.videoBandwidth&&(on.log("Modification of SDP to set remote video bandwidth"),Lt.sdp=this.mySDPManager.setVideoBandwidth(Lt.sdp,this.videoBandwidth)),this.setRemoteDescriptionProcess(Rt,Lt),on.log("msg.sdpanswer.sdp :",st.sdpanswer.sdp),Rt.addingUserMedia===!0&&(Rt.addingUserMedia=!1),Rt.updateUserMedia===!0&&(Rt.updateUserMedia=!1),Rt.updateCause&&(Rt.updateCause=null)},this.processSlowLink=function(st,Tt){for(var Rt=this.callsTable.length,Lt=null;--Rt>=0;)if(this.callsTable[Rt].callId===st){Lt=this.callsTable[Rt];break}if(Lt!==null){var Et=null;Tt&&Tt.advice&&(Et=Tt.advice),this.myWebRTC_Event.createSlowLinkEvent(Lt.callId,Et)}},this.processAudioAmplitude=function(st,Tt){Hn.createAudioAmplitudeEvent(st.descriptor.audioAmplitude,Tt,st.callId,st.descriptor.streamID)},this.processDistantIceError=function(st){st.descriptor.iceState==="disconnected"?this.myWebRTC_Event.createErrorEvent("distant iceDisconnection detected","DISTANT_ICE_CONNECTION_STATE_DISCONNECTED",null,st.roomId,null,st.descriptor):st.descriptor.iceState==="failed"&&Hn.createErrorEvent("distant iceConnection failed detected","DISTANT_ICE_CONNECTION_STATE_FAILED",null,st.roomId,null,st.descriptor)},this.processStreamTrackMuteChanged=function(st,Tt,Rt){for(var Lt=this.callsTable.length,Et=null,jt=[],Pt={},Vt={};--Lt>=0;)if(this.callsTable[Lt].callId===st){Et=this.callsTable[Lt];break}Et!==null&&(Tt==="audio"?(Et.isRemoteAudioMuted=Rt,jt.push("audioIsMuted"),Pt.available=Et.remoteCallProfile.audio,Pt.active=Et.remoteCallProfile.audioActive,Pt.muted=Et.isRemoteAudioMuted,Pt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent):Tt==="video"&&(Et.isRemoteVideoMuted=Rt,jt.push("videoIsMuted"),Pt.available=Et.remoteCallProfile.audio,Pt.active=Et.remoteCallProfile.audioActive,Pt.muted=Et.isRemoteAudioMuted,Pt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent),jt.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(jt,Pt,Vt,Et.destCallType,Et.callId,"userAction"))},this.processStreamTrackStatusChanged=function(st,Tt,Rt){for(var Lt=this.callsTable.length,Et=null,jt=[],Pt={},Vt={};--Lt>=0;)if(this.callsTable[Lt].callId===st){Et=this.callsTable[Lt];break}Et!==null&&(Tt==="audio"?(Et.isRemoteAudioSilent=Rt,jt.push("audioIsSilent"),Pt.available=Et.remoteCallProfile.audio,Pt.active=Et.remoteCallProfile.audioActive,Pt.muted=Et.isRemoteAudioMuted,Pt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent):Tt==="video"&&(Et.isRemoteVideoSilent=Rt,jt.push("videoIsSilent"),Pt.available=Et.remoteCallProfile.audio,Pt.active=Et.remoteCallProfile.audioActive,Pt.muted=Et.isRemoteAudioMuted,Pt.silent=Et.isRemoteAudioSilent,Vt.available=Et.remoteCallProfile.video,Vt.active=Et.remoteCallProfile.videoActive,Vt.muted=Et.isRemoteVideoMuted,Vt.silent=Et.isRemoteVideoSilent),jt.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(jt,Pt,Vt,Et.destCallType,Et.callId,"userAction"))},this.processUpdateStream=function(st,Tt,Rt){for(var Lt=this.callsTable.length,Et=null;--Lt>=0;)if((0,at.ki)(this.callsTable[Lt].data,"mesh","object")&&this.callsTable[Lt].data.mesh.calleeCallId===st||this.callsTable[Lt].callId===st){Et=this.callsTable[Lt];break}if(!Et)return!1;var jt=!1;return Tt==="audio"?Rt==="inactive"?Et.callType==="media"&&(Et.callType="videoOnly",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection="inactive",Et.establishCall(),jt=!0):Et.callType==="videoOnly"&&(Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.audioSdpDirection=null,Et.establishCall(),jt=!0):Tt==="video"&&(Rt==="inactive"?Et.callType==="media"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="audio",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection="inactive",Et.establishCall(),jt=!0):Et.callType==="audio"&&(this.evalOutgoingVideoBandwithCap(Et),Et.callType="media",Et.updateUserMedia=!0,Et.updateCause="adaptation",Et.videoSdpDirection=null,Et.establishCall(),jt=!0)),jt},this.processUpdateVideoQuality=function(st,Tt){on.debug("processUpdateVideoQuality",st,Tt);var Rt=this.findCallWithCallId(st);if(Rt)if(Rt.sessionMCU&&Rt.sessionMCU.roomMode!=="mesh"){var Lt=apiCC.getUserMediaStream(Rt.callConfiguration.userMediaStreamId);if(Lt){var Et=Lt.getVideoTrack();if(Et){var jt={};Tt.width&&Tt.height&&(jt.width=Tt.width,jt.height=Tt.height),Tt.frameRate&&(jt.frameRate=Tt.frameRate),Et.applyConstraints(jt).then(function(Pt){on.debug("processUpdateVideoQuality - applyConstraints; OK")}).catch(function(Pt){on.error("processUpdateVideoQuality - applyConstraints",Pt)})}else on.warn("processUpdateVideoQuality - no such video track; callId:",st)}else on.warn("processUpdateVideoQuality - no such userMediaStream; callId:",st)}else on.warn("processUpdateVideoQuality - wrong roomMode; callId:",st);else on.warn("processUpdateVideoQuality - no such call; callId:",st)},this.removeAllCallsFromRoom=function(st,Tt){on.info("removeAllCallsFromRoom :"+st+" with reason :"+Tt);var Rt,Lt,Et=this.callsTable.length,jt=[],Pt={};for(Rt=0;Rt<Et;Rt+=1)this.callsTable[Rt].dest_roomId==st&&(on.log("Call is attached to the room, removing ..."),Pt={callId:this.callsTable[Rt].callId},jt.push(Pt));for(Lt=0;Lt<jt.length;Lt+=1)this.removeCallFromTableWithCallIdAndSendBye(jt[Lt].callId,Tt);jt.splice(0,jt.length)},this.onHangup=function(st,Tt){var Rt=null,Lt=null,Et=null,jt=null,Pt=[],Vt=!1,Zt=!1,rn=null,Jt=null;if(st?typeof st!="string"&&(st=String(st)):st=null,Tt?typeof Tt!="string"&&(Tt=null):Tt=null,on.info("Hanging up."),st===null)on.log("Leaving all calls that are established"),this.MCUClient&&this.MCUClient.meshOnHangup(),this.removeAllCalls(),this.callControlTable.splice(0,this.callControlTable.length);else if((Lt=this.findUserMediaById(st))!==null){for(this.MCUClient.pubConnector!=="janusConnector"||Tt!=="RTC_Setup_Timeout"&&Tt!=="disconnected"||(Et=Lt.getUserMediaStream())&&Et.stream&&(Vt=!0,rn=Et.stream,Lt.streamStolen=!0,Lt.sessionMCU.roomMode==="mesh"?Zt=!0:(Jt=Et.getCallInfo(Lt.userMediaId))&&(Jt.flavor="call")),jt=this.callsTable.length;--jt>=0;)(0,at.Ym)(this.callsTable[jt].data,"object")&&(0,at.Ym)(this.callsTable[jt].data.mesh,"object")&&this.callsTable[jt].data.mesh.calleeCallId===st&&Pt.push(this.callsTable[jt].callId);for(jt=Pt.length;--jt>=0;)this.removeCallFromTableWithCallIdAndSendBye(Pt[jt],Tt);this.MCUClient.meshOnHangup(st,null,{restart:Vt})}else(Rt=this.findCallWithCallId(st))!==null&&(this.MCUClient.pubConnector!=="janusConnector"||Tt!=="RTC_Setup_Timeout"&&Tt!=="disconnected"||(Rt.settingUpType==="publish"||Rt.settingUpType==="shareScreen"?Rt.data&&Rt.data.mesh||(Vt=!0,Rt.streamStolen=!0):Rt.settingUpType==="subscribe"&&(Vt=!0)),on.log("Leaving call with callId :"+st),this.removeCallFromTableWithCallIdAndSendBye(st,Tt));Vt===!0?Rt!==null?this.restartCall(Rt):Lt&&(Zt===!0?this.restartCall(Lt,{userMedia:!0,mesh:!0}):this.restartCall(Lt,{userMedia:!0,stream:rn})):(Rt&&Rt.callControl&&this.destroyCallControl(Rt.callControl),this.stopMaxCallRetriesTimer(st),this.stopRestartCallTimer(st),delete this.callsRetriesTable[st])},this.stopStream=function(st){on.info("stopStream in client");var Tt,Rt=null;if(nt.Xh==="Chrome"&&nt.PR<45||nt.Xh==="Firefox"&&nt.PR<44||nt.Xh==="Opera"&&nt.PR<34||nt.Xh==="Chromium"&&nt.PR<44||nt.Xh==="Chrome WebView"&&nt.PR<45)st.onended=null,st.stop();else{for(st.onended=null,on.log("MediaStream.stop is now deprecated, using MediaStreamTrack.stop"),Rt=st.getTracks(),Tt=0;Tt<Rt.length;Tt+=1)Rt[Tt].onended=null,Rt[Tt].stop();on.log("... tracks stopped")}st=null},this.clearCallTimeouts=function(st){var Tt;for(on.debug("clearCallTimeouts"),st.send200OKTrickleIceFalseTimeOutId!==0&&(on.debug("clearing send200OKTrickleIceFalseTimeOutId"),clearTimeout(st.send200OKTrickleIceFalseTimeOutId),st.send200OKTrickleIceFalseTimeOutId=0),st.sendInviteTrickleIceFalseTimeOutId!==0&&(on.debug("clearing sendInviteTrickleIceFalseTimeOutId"),clearTimeout(st.sendInviteTrickleIceFalseTimeOutId),st.sendInviteTrickleIceFalseTimeOutId=0),st.disconnectionTimeoutId!==0&&(on.debug("clearing disconnectionTimeout"),clearTimeout(st.disconnectionTimeoutId),st.disconnectionTimeoutId=0),st.disconnectionWarningInterval!==0&&(on.debug("clearing disconnectionWarningInterval"),clearInterval(st.disconnectionWarningInterval),st.disconnectionWarningInterval=0),Tt=0;Tt<st.checkCandidateTypesTimeoutTable.length;Tt+=1)on.debug("clearing checkCandidateTypesTimeout :",st.checkCandidateTypesTimeoutTable[Tt]),clearTimeout(st.checkCandidateTypesTimeoutTable[Tt]);st.checkCandidateTypesTimeoutTable.splice(0,st.checkCandidateTypesTimeoutTable.length)},this.removeAllCalls=function(){on.info("removeAllCalls");var st,Tt=this.callsTable.length,Rt=0,Lt=null,Et=0,jt=null;for(on.log("callsNumber = "+Tt),st=0;st<Tt;st+=1){if(Rt=this.callsTable[st-Et].callee?this.callsTable[st-Et].callerId:this.callsTable[st-Et].calleeId,this.callsTable[st-Et].callee===!0)Lt="Hangup_From_Callee",this.callsTable[st-Et].myWebRTC_Stack.sendBye(this.callsTable[st-Et].callId,this.clientId,this.callsTable[st-Et].dest_roomId,Rt,Lt,this.callsTable[st-Et].data);else{if(Lt="Hangup_From_Caller",this.callsTable[st-Et].inviteSended!==!0){this.callsTable[st-Et].callCancelled=!0,on.warn("Leaving call iteration on removeAllCalls");continue}this.callsTable[st-Et].myWebRTC_Stack.sendBye(this.callsTable[st-Et].callId,this.clientId,this.callsTable[st-Et].dest_roomId,Rt,Lt,this.callsTable[st-Et].data)}(0,at.ki)(this.callsTable[st-Et].sessionMCU,"roomName","string")&&(0,at.ki)(this.callsTable[st-Et].data,"MCUType","string")&&(this.callsTable[st-Et].data.MCUType==="MCU-Caller"||this.callsTable[st-Et].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[st-Et].sessionMCU.roomName,{noHangup:!0}),this.callsTable[st-Et].callConfiguration&&this.callsTable[st-Et].callConfiguration.userMediaStreamId&&(jt=apiCC.getUserMediaStream(this.callsTable[st-Et].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(jt.userMediaStreamId,this.callsTable[st-Et].callId),this.callsTable[st-Et].screenStream!==null&&(on.log("stopping screenStream"),this.stopStream(this.callsTable[st-Et].screenStream),Hn.createUserMediaStopEvent(this.callsTable[st-Et].callId,"screen")),this.callsTable[st-Et].pc!==null&&(on.log("Closing PC"),this.qosEnable&&this.callsTable[st-Et].qm!==void 0&&this.callsTable[st-Et].qm!==null&&typeof this.callsTable[st-Et].qm.saveStatsToDb=="function"&&(this.callsTable[st-Et].qm.saveStatsToDb(!0),clearInterval(this.callsTable[st-Et].statisticId)),this.callsTable[st-Et].csmIntervalId&&clearInterval(this.callsTable[st-Et].csmIntervalId),this.callsTable[st-Et].pc.close(),this.callsTable[st-Et].pc=null),this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[st-Et].remoteId,!0,Lt,this.callsTable[st-Et].callId,this.callsTable[st-Et].callType),this.callsTable[st-Et].data!==void 0&&this.callsTable[st-Et].data!==null&&(this.callsTable[st-Et].data.pubSub==="janusConnector"||this.callsTable[st-Et].data.MCUType!=="MCU-Caller"&&this.callsTable[st-Et].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[st-Et].data.confId,this.callsTable[st-Et].callerId,this.callsTable[st-Et].calleeId,this.callsTable[st-Et].callId)),this.clearCallTimeouts(this.callsTable[st-Et]),this.callsTable[st-Et].incomingcandidatesQueue.length!==0&&this.callsTable[st-Et].incomingcandidatesQueue.splice(0,this.callsTable[st-Et].incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[this.callsTable[st-Et].callId+"-"+this.callsTable[st-Et].instanceId]!==void 0&&this.clientIncomingCandidatesQueue[this.callsTable[st-Et].callId+"-"+this.callsTable[st-Et].instanceId].length!==0&&this.clientIncomingCandidatesQueue[this.callsTable[st-Et].callId+"-"+this.callsTable[st-Et].instanceId].splice(0,this.clientIncomingCandidatesQueue[this.callsTable[st-Et].callId+"-"+this.callsTable[st-Et].instanceId].length),on.log("Removing call from table"),this.callsTable.splice(st-Et,1),Et+=1}},this.onRemoteHangup=function(st,Tt,Rt,Lt,Et,jt){var Pt=this;on.debug("onRemoteHangup");var Vt=null,Zt=null,rn=null,Jt=null,ln=!1,mn=!1,an=!1,hn=null,En=null;if(on.log("callId :"+st),on.log("confId :"+Et),this.MCUClient.pubConnector==="janusConnector")if(Lt==="RTC_Setup_Timeout"||Lt==="Broken_by_MCU"||Lt==="disconnected")if((Zt=jt==null?this.findCallWithCallId(st):this.findCallWithCallIdAndInstanceId(st,jt.instanceId))!=null){if(Zt.setupTimeoutId&&(clearTimeout(Zt.setupTimeoutId),delete Zt.setupTimeoutId),Zt.restarting===!0)return void on.debug("call restarting");if(Zt.settingUpType==="publish"||Zt.settingUpType==="shareScreen"?Zt.data&&Zt.data.mesh||(ln=!0,Zt.streamStolen=!0):Zt.settingUpType==="subscribe"&&(ln=!0),Zt.sessionMCU!==null&&Zt.sessionMCU.modeChangeKind==="old")return void on.debug("onRemoteHangup ignore")}else(rn=this.findUserMediaById(st))!==null?(rn.close(),(Jt=rn.getUserMediaStream())&&Jt.stream&&(rn.sessionMCU!==null&&rn.sessionMCU.modeChangeKind==="old"?(ln=!0,hn=Jt.stream,rn.streamStolen=!0,rn.distantCalls.length>0&&(an=!0),(En=Jt.getCallInfo(rn.userMediaId))&&(En.flavor="call")):rn.sessionMCU!==null&&rn.sessionMCU.roomMode==="mesh"?(ln=!0,mn=!0,hn=Jt.stream,rn.streamStolen=!0):(ln=!0,hn=Jt.stream,rn.streamStolen=!0,(En=Jt.getCallInfo(rn.userMediaId))&&(En.flavor="call")))):on.debug("No call and no userMedia found");else(Zt=jt==null?this.findCallWithCallId(st):this.findCallWithCallIdAndInstanceId(st,jt.instanceId))?(Zt.setupTimeoutId&&(clearTimeout(Zt.setupTimeoutId),delete Zt.setupTimeoutId),Zt.settingUpType==="subscribe"&&Lt!=="Ejected"&&(ln=!0)):(rn=this.findUserMediaById(st))&&rn.close();if(!an)if(rn!==null){var Mn=null,Pn=[];for(Mn=this.callsTable.length;--Mn>=0;)(0,at.ki)(this.callsTable[Mn].data,"mesh","object")&&this.callsTable[Mn].data.mesh.calleeCallId===st&&this.callsTable[Mn].settingUpType!=="subscribe"&&Pn.push(this.callsTable[Mn].callId);for(Mn=Pn.length;--Mn>=0;)this.removeCallFromTableWithCallIdAndSendBye(Pn[Mn],Lt);if(this.MCUClient.meshOnHangup(st),rn.sessionMCU.modeChangeKind==="old"){var Wn=this.MCUClient.getSessionMCU(null,{callback:function(Nn){return Nn.roomName===rn.sessionMCU.roomName&&Nn.modeChangeKind==="new"}});Wn&&this.finalizeMeshToJanusTransition(rn.sessionMCU,Wn)}}else st!==void 0?Vt=jt==null?this.removeCallFromTableWithCallIdandRemoteId(st,Tt,Lt):this.removeCallFromTableWithCallIdandInstanceId(st,jt.instanceId,Lt):Et!==void 0&&(Vt=this.removeCallFromTableWithConfIdandRemoteId(Et,Tt,Lt));on.log("Reason : "+Lt),Zt&&ln!==!0?this.callsTable.length===0&&this.userMediaTable.length===0?(on.log("No more established calls for client"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!0,Lt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!0,Lt,st,Vt),this.getUserMediaOnGoing===!0&&Yt.deactivateReloadOnCancel!==!0&&(on.log("Cancel from Remote"),typeof apiRTC_React>"u"&&location.reload(),this.getUserMediaOnGoing=!1)):(on.log("Other calls are still established"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!1,Lt),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!1,Lt,st,Vt)):Zt&&Zt.settingUpType==="subscribe"&&(this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,Tt,!1,"restarted"),this.myWebRTC_Event.createHangupEvent("remote",this.clientId,Tt,!1,"restarted",st,Vt)),jt!=null&&(this.MCUClient.pubConnector==="janusConnector"||jt.MCUType!=="MCU-Caller"&&jt.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(Et,this.clientId,Tt,st)),ln===!0?Zt!==null?this.restartCall(Zt):rn&&(mn===!0?this.restartCall(rn,{userMedia:!0,mesh:!0}):this.randomDelayOnRestart?(on.debug("onRemoteHangup - randomDelayOnRestart"),setTimeout(function(){Pt.restartCall(rn,{userMedia:!0,stream:hn})},5e3*Math.random())):this.restartCall(rn,{userMedia:!0,stream:hn})):(Zt&&Zt.callControl&&this.destroyCallControl(Zt.callControl),(Zt||rn)&&(this.stopMaxCallRetriesTimer(st),this.stopRestartCallTimer(st),delete this.callsRetriesTable[st]))},this.startMaxCallRetriesTimer=function(st){var Tt=this;on.debug("startMaxCallRetriesTimer for callIdWhenStartingTimer :",st);var Rt=setTimeout(function(){on.debug("[restartCall] MaxCallRetriesTimer reached for callIdWhenStartingTimer :",st),Tt.callsRetriesTable[st].allowedStatus=!1,delete Tt.callsRetriesTable[st].maxCallsRetriesDurationTimeOutId},this.maxCallsRetriesDuration);this.callsRetriesTable[st]={},this.callsRetriesTable[st].maxCallsRetriesDurationTimeOutId=Rt},this.stopMaxCallRetriesTimer=function(st){on.debug("stopMaxCallRetriesTimer for callId :",st),this.callsRetriesTable[st]!==void 0&&this.callsRetriesTable[st].maxCallsRetriesDurationTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[st].maxCallsRetriesDurationTimeOutId),on.debug("[restartCall] MaxCallRetriesTimer cleared for callId :",st),delete this.callsRetriesTable[st])},this.stopRestartCallTimer=function(st){on.debug("stopRestartCallTimer for callId :",st),this.callsRetriesTable[st]!==void 0&&this.callsRetriesTable[st].restartCallTimeOutId!==void 0&&(clearTimeout(this.callsRetriesTable[st].restartCallTimeOutId),on.error("[restartCall] RestartCallTimer cleared for callId :",st),delete this.callsRetriesTable[st].restartCallTimeOutId)},this.restartCall=function(st){var Tt=this,Rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};on.debug("[restartCall] restartCall for callId :",st.callId);var Lt=-1;if(Rt.userMedia!==!0)if(st.callControl&&st.callControl.autoRestart)if((Lt=st.callControl.autoRestart.counter)===0&&(st.callControl.autoRestart.callIdWhenStartingTimer=st.callId,this.startMaxCallRetriesTimer(st.callId)),this.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&this.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer].allowedStatus===void 0){on.debug("[restartCall] ... for callIdWhenStartingTimer :",st.callControl.autoRestart.callIdWhenStartingTimer),on.debug("AutoRestartCounter :",Lt),on.debug("Calling restartCallProcess in :",this.restartCallDelay*Math.pow(2,Lt));var Et=setTimeout(function(){on.debug("Timer reached for restartCall"),delete st.callControl.autoRestart.pending,Tt.restartCallProcess(st,Rt),Tt.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&Tt.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId!==void 0&&delete Tt.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId},this.restartCallDelay*Math.pow(2,Lt));st.callControl.autoRestart.pending=!0,this.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId=Et}else on.warn("CALL_ABORTED, retries not allowed (maxCallsRetriesDuration reached) for callIdWhenStartingTimer :",st.callControl.autoRestart.callIdWhenStartingTimer),this.destroyCallControl(st.callControl),Hn.createErrorEvent("call aborted after calls retries (maxCallsRetriesDuration reached)","CALL_ABORTED",st.callId,st.callControl.roomName),this.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer]!==void 0&&delete this.callsRetriesTable[st.callControl.autoRestart.callIdWhenStartingTimer];else on.debug("[restartCall] autoRestart options not defined");else this.restartCallProcess(st,Rt)},this.restartCallProcess=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};on.debug("restartCallProcess ");var Rt=!1,Lt=!1,Et=null;if(st.restarting!==!0){if(st.restarting=!0,Tt.userMedia===!0&&(Rt=!0),Tt.mesh===!0&&(Lt=!0),Rt===!0)if(Lt===!0)st.callType==="screenSharing"||st.callType==="screenSharingWithAudio"?(st.restarting=!1,this.userMediaTable.push(st),this.MCUClient.meshOnScreenMediaSuccess(st)):(st.restarting=!1,this.userMediaTable.push(st),this.MCUClient.meshOnUserMediaSuccess(st));else if(st.callType==="screenSharing"||st.callType==="screenSharingWithAudio"){delete st.data.meshPublish,st.data.type="publish";var jt=this.createCallControl({type:"shareScreen",callId:st.userMediaId,roomName:st.roomId,callConfiguration:st.callConfiguration,data:st.data});jt.captureSourceType=st.captureSourceType,jt.autoRestart.counter=0,jt.autoRestart.stream=Tt.stream,this.shareScreen(st.roomId,st.data,st.captureSourceType,st.callConfiguration,{callControl:jt}),this.myWebRTC_Event.createCallRestartingEvent(st.callType,st.audioOnly,st.userMediaId,st.userMediaId,"publish",this.clientId,st.roomId,st.roomId,null)}else{delete st.data.meshPublish;var Pt=this.createCallControl({type:"publish",callId:st.userMediaId,callType:st.callType,roomName:st.roomId,callConfiguration:st.callConfiguration,data:st.data});Pt.audioOnly=st.callType==="audio",Pt.sessionId=st.sessionId,Pt.token=st.token,Pt.autoRestart.counter=0,Pt.autoRestart.stream=Tt.stream,this.MCUClient.publish(st.roomId,st.sessionId,st.token,st.callConfiguration,st.data,{callControl:Pt}),this.myWebRTC_Event.createCallRestartingEvent(st.callType,st.callType==="audio",st.userMediaId,st.userMediaId,"publish",this.clientId,st.roomId,st.roomId,null)}else if(st.settingUpType==="publish")(0,at.Ym)(st.callControl,"object")?(on.debug("[restartCall] restarting call publish"),this.MCUClient.publish(st.callControl.roomName,st.callControl.sessionId,st.callControl.token,st.callControl.callConfiguration,st.callControl.data,{callControl:st.callControl}),this.myWebRTC_Event.createCallRestartingEvent(st.callType,st.audioOnly,st.callId,st.callId,"publish",this.clientId,st.callControl.roomName,st.callControl.roomName,null)):on.warn("[restartCall] cannot auto restart; missing info");else if(st.settingUpType==="shareScreen")(0,at.Ym)(st.callControl,"object")?(on.debug("[restartCall] restarting call shareScreen"),this.shareScreen(st.callControl.roomName,st.callControl.data,st.callControl.captureSourceType,st.callControl.callConfiguration,{callControl:st.callControl}),this.myWebRTC_Event.createCallRestartingEvent(st.callType,st.audioOnly,st.callId,st.callId,"publish",this.clientId,st.callControl.roomName,st.callControl.roomName,null)):on.warn("[restartCall] cannot auto restart; missing info");else if(st.settingUpType==="subscribe"&&(on.debug("[restartCall] restarting call subscribe"),Et=st.mcuRemoteStream.replay===!0?this.MCUClient.getStreamOfUserCall(st.mcuRemoteStream.attributes.callerId,st.mcuRemoteStream.attributes.callId,{replay:!0}):this.MCUClient.getStreamOfUserCall(st.mcuRemoteStream.attributes.callerId,st.mcuRemoteStream.attributes.callId),(0,at.Ym)(st.callControl,"object")&&Et)){on.debug("[restartCall] stream exists, subscribing to it");var Vt=!!st.callControl.autoRestart.force;delete st.callControl.autoRestart.force;var Zt=st.callControl.callId,rn=this.MCUClient.subscribeToStreams([Et],st.callControl.mediaType,st.callControl.data,st.callControl.callConfiguration,{noStreamCheck:!0,autoSub:!0,force:Vt});Zt&&rn[0]&&this.myWebRTC_Event.createCallRestartingEvent(st.callType,st.audioOnly,Zt,rn[0],"subscribe",this.clientId,st.callControl.roomName,st.callControl.roomName,Et.id)}}else on.debug("[restartCall] call already restarting")},this.closingCallProcess=function(st,Tt){on.log("Session terminated.");var Rt=null;(0,at.ki)(this.callsTable[st].sessionMCU,"roomName","string")&&(0,at.ki)(this.callsTable[st].data,"MCUType","string")&&(this.callsTable[st].data.MCUType==="MCU-Caller"||this.callsTable[st].data.MCUType==="MCU-Callee")&&this.MCUClient.leaveSession(this.callsTable[st].sessionMCU.roomName),this.callsTable[st].callConfiguration&&this.callsTable[st].callConfiguration.userMediaStreamId&&this.callsTable[st].streamStolen!==!0&&(Rt=apiCC.getUserMediaStream(this.callsTable[st].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(Rt.userMediaStreamId,this.callsTable[st].callId),this.callsTable[st].screenStream!==null&&(on.log("stopping screenStream"),this.stopStream(this.callsTable[st].screenStream),Hn.createUserMediaStopEvent(this.callsTable[st].callId,"screen")),this.callsTable[st].pc!==null&&(on.log("Closing PC"),this.qosEnable&&this.callsTable[st].qm!==void 0&&this.callsTable[st].qm!==null&&typeof this.callsTable[st].qm.saveStatsToDb=="function"&&(this.callsTable[st].qm.saveStatsToDb(!0),clearInterval(this.callsTable[st].statisticId)),this.callsTable[st].csmIntervalId&&clearInterval(this.callsTable[st].csmIntervalId),this.callsTable[st].beginTimeoutId&&(clearTimeout(this.callsTable[st].beginTimeoutId),delete this.callsTable[st].beginTimeoutId),this.callsTable[st].dcfs?Tt==="Ice_failed"?this.callsTable[st].dcfs.failure="iceFailed":this.callsTable[st].dcfs.canceled=!0:this.callsTable[st].callType==="data"&&this.callsTable[st].calleeId==="dataChannelConnector"&&(this.callsTable[st].failure||this.callsTable[st].success||setTimeout(function(Lt,Et){Hn.createEvent({eventType:"onFileSended",callId:Lt.callId,remoteId:Lt.remoteId,name:Lt.data.filename,error:Et}),Lt.callbacks&&Lt.callbacks.failure&&Lt.callbacks.failure(Et)},0,this.callsTable[st],Tt==="Ice_failed"?"iceFailed":"canceled")),this.callsTable[st].pc.close(),this.callsTable[st].pc=null)},this.removeCallProcess=function(st){var Tt=this,Rt=this.callsTable[st];this.clearCallTimeouts(Rt),Rt.incomingcandidatesQueue.length!==0&&Rt.incomingcandidatesQueue.splice(0,Rt.incomingcandidatesQueue.length),this.clientIncomingCandidatesQueue[Rt.callId+"-"+Rt.instanceId]!==void 0&&this.clientIncomingCandidatesQueue[Rt.callId+"-"+Rt.instanceId].length!==0&&this.clientIncomingCandidatesQueue[Rt.callId+"-"+Rt.instanceId].splice(0,this.clientIncomingCandidatesQueue[Rt.callId+"-"+Rt.instanceId].length),on.log("Removing call from table"),this.callsTable.splice(st,1),on.log("this.callsTable.length :",this.callsTable.length),on.log("Call is terminated"),setTimeout(function(){Tt.startNextPushData()}),this.evalOutgoingVideoBandwithCap()},this.removeCallFromTableWithCallIdAndSendBye=function(st,Tt){on.debug("removeCallFromTableWithCallIdAndSendBye()",st);var Rt,Lt=null;if((Rt=this.findCallIndexWithCallId(st))!==-1){if(this.closingCallProcess(Rt,Tt),this.callsTable[Rt].callId,this.callsTable[Rt].calleeId,this.callsTable[Rt].callee?(Lt=this.callsTable[Rt].callerId,Tt===null&&(Tt="Hangup_From_Callee")):(Lt=this.callsTable[Rt].calleeId,Tt===null&&(Tt="Hangup_From_Caller")),on.log("reason is :"+Tt),this.callsTable[Rt].calleeId!=="LOCAL"&&apiCC.session!==null){var Et=apiCC.session.getConnectedUserInfo(this.callsTable[Rt].calleeId,"userData"),jt=null;if(Et!=="User_Not_Found")try{jt=JSON.parse(Et)}catch{on.error("userInfo parse fail",Et)}jt!=null&&jt.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCancelCallRequest",{number:this.callsTable[Rt].calleeId,callId:st}):this.callsTable[Rt].myWebRTC_Stack.sendBye(this.callsTable[Rt].callId,this.clientId,this.callsTable[Rt].dest_roomId,Lt,Tt,this.callsTable[Rt].data)}Tt!=="Broken_by_MCU"&&this.myWebRTC_Event.createHangupEvent("local",this.clientId,this.callsTable[Rt].remoteId,!0,Tt,this.callsTable[Rt].callId,this.callsTable[Rt].callType),this.callsTable[Rt].data!==void 0&&this.callsTable[Rt].data!==null&&(this.callsTable[Rt].data.pubSub==="janusConnector"||this.callsTable[Rt].data.MCUType!=="MCU-Caller"&&this.callsTable[Rt].data.MCUType!=="MCU-Callee"||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[Rt].data.confId,this.callsTable[Rt].callerId,this.callsTable[Rt].calleeId,this.callsTable[Rt].callId)),this.removeCallProcess(Rt)}else on.log("No call removed");this.MCUClient.publishCallId===st&&(this.publishCallId=null)},this.removeCall=function(st){on.info("removeCall");var Tt=null;return st!==-1?(this.closingCallProcess(st,null),this.callsTable[st].disconnectionWarningTimeout!==0&&(on.debug("clearing disconnectionWarningTimeout"),clearTimeout(this.callsTable[st].disconnectionWarningTimeout),this.callsTable[st].disconnectionWarningTimeout=0),Tt=this.callsTable[st].callType,this.removeCallProcess(st)):on.debug("No call removed"),Tt},this.removeCallFromTableWithConfIdandRemoteId=function(st,Tt,Rt){var Lt;return on.debug("removeCallFromTableWithConfIdandRemoteId() with reason :"+Rt),Rt=null,Lt=this.findCallIndexWithConfIdAndRemoteId(st,Tt),this.removeCall(Lt)},this.removeCallFromTableWithCallIdandRemoteId=function(st,Tt,Rt){var Lt;return on.debug("removeCallFromTableWithCallIdandRemoteId() with reason :"+Rt),on.log("callId :"+st),on.log("remoteId :"+Tt),Rt=null,Lt=this.findCallIndexWithCallIdAndRemoteId(st,Tt),this.removeCall(Lt)},this.removeCallFromTableWithCallIdandInstanceId=function(st,Tt,Rt){var Lt;return on.debug("removeCallFromTableWithCallIdandInstanceId() with reason :"+Rt),on.log("callId :"+st),on.log("instanceId :"+Tt),Rt=null,Lt=this.findCallIndexWithCallIdAndInstanceId(st,Tt),this.removeCall(Lt)},this.toggleVideoMute=function(st){on.debug("toggleVideoMute");var Tt,Rt,Lt=this.callsTable.length,Et=null,jt=null;if(st==null){for(on.debug("no callId defined, toggleVideoMute all local video"),this.isVideoMuted?this.localStream!==null&&(on.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getVideoTracks())):this.localStream!==null&&(on.debug("localStream muteTracks"),this.muteTracks(this.localStream.getVideoTracks())),this.isVideoMuted=!this.isVideoMuted,Tt=0;Tt<Lt;Tt+=1)this.callsTable[Tt].data&&this.callsTable[Tt].data.mesh||(jt=null,this.callsTable[Tt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.callsTable[Tt].callConfiguration.userMediaStreamId)),jt?jt.videoMuted?jt.unMuteVideoOnStreams("enabled"):jt.muteVideoOnStreams("enabled"):this.callsTable[Tt].callLocalStream!==null&&(this.callsTable[Tt].isLocalVideoMuted?(on.debug("unmuting call :",this.callsTable[Tt].callId),this.unMuteTracks(this.callsTable[Tt].callLocalStream.getVideoTracks())):(on.debug("muting call :",this.callsTable[Tt].callId),this.muteTracks(this.callsTable[Tt].callLocalStream.getVideoTracks())),this.callsTable[Tt].isLocalVideoMuted=!this.callsTable[Tt].isLocalVideoMuted));for(Lt=this.userMediaTable.length,Tt=0;Tt<Lt;Tt+=1)jt=null,this.userMediaTable[Tt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.userMediaTable[Tt].callConfiguration.userMediaStreamId)),jt&&(jt.videoMuted?jt.unMuteVideoOnStreams("enabled"):jt.muteVideoOnStreams("enabled"));return{muteState:this.isVideoMuted,callId:"ALL"}}return on.debug("callId is defined :",st),(Rt=this.findCallIndexWithCallId(st))>=0?(this.callsTable[Rt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.callsTable[Rt].callConfiguration.userMediaStreamId)),jt?(jt.videoMuted?jt.unMuteVideoOnStreams("enabled"):jt.muteVideoOnStreams("enabled"),{muteState:jt.videoMuted,callId:st}):this.callsTable[Rt].callLocalStream!==null?(this.callsTable[Rt].isLocalVideoMuted?(on.debug("unmuting call :",this.callsTable[Rt].callId),this.unMuteTracks(this.callsTable[Rt].callLocalStream.getVideoTracks())):(on.debug("muting call :",this.callsTable[Rt].callId),this.muteTracks(this.callsTable[Rt].callLocalStream.getVideoTracks())),this.callsTable[Rt].isLocalVideoMuted=!this.callsTable[Rt].isLocalVideoMuted,{muteState:this.callsTable[Rt].isLocalVideoMuted,callId:st}):{muteState:"STREAM_NOT_FOUND",callId:st}):(Et=this.findUserMediaById(st))&&(Et.callConfiguration&&(jt=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),jt)?(jt.videoMuted?jt.unMuteVideoOnStreams("enabled"):jt.muteVideoOnStreams("enabled"),{muteState:jt.videoMuted,callId:st}):{muteState:"CALL_NOT_FOUND",callId:st}},this.unMuteTracks=function(st){var Tt;if(st.length!==0){for(Tt=0;Tt<st.length;Tt+=1)st[Tt].enabled=!0;on.log("tracks unMuted.")}else on.log("No tracks available.")},this.muteTracks=function(st){var Tt;if(st.length!==0){for(Tt=0;Tt<st.length;Tt+=1)st[Tt].enabled=!1;on.log("tracks muted.")}else on.log("No tracks available.")},this.toggleAudioMute=function(st){on.debug("toggleAudioMute");var Tt,Rt,Lt=this.callsTable.length,Et=null,jt=null;if(st==null){for(on.debug("no callId defined, toggleAudioMute all local audio"),this.isAudioMuted?this.localStream!==null&&(on.debug("localStream unMuteTracks"),this.unMuteTracks(this.localStream.getAudioTracks())):this.localStream!==null&&(on.debug("localStream muteTracks"),this.muteTracks(this.localStream.getAudioTracks())),this.isAudioMuted=!this.isAudioMuted,Tt=0;Tt<Lt;Tt+=1)this.callsTable[Tt].data&&this.callsTable[Tt].data.mesh||(jt=null,this.callsTable[Tt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.callsTable[Tt].callConfiguration.userMediaStreamId)),jt?jt.audioMuted?jt.unMuteAudioOnStreams("enabled"):jt.muteAudioOnStreams("enabled"):this.callsTable[Tt].callLocalStream!==null&&(this.callsTable[Tt].isLocalAudioMuted?(on.debug("unmuting call :",this.callsTable[Tt].callId),this.unMuteTracks(this.callsTable[Tt].callLocalStream.getAudioTracks())):(on.debug("muting call :",this.callsTable[Tt].callId),this.muteTracks(this.callsTable[Tt].callLocalStream.getAudioTracks())),this.callsTable[Tt].isLocalAudioMuted=!this.callsTable[Tt].isLocalAudioMuted));for(Lt=this.userMediaTable.length,Tt=0;Tt<Lt;Tt+=1)jt=null,this.userMediaTable[Tt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.userMediaTable[Tt].callConfiguration.userMediaStreamId)),jt&&(jt.audioMuted?jt.unMuteAudioOnStreams("enabled"):jt.muteAudioOnStreams("enabled"));return{muteState:this.isAudioMuted,callId:"ALL"}}return on.debug("callId is defined :",st),(Rt=this.findCallIndexWithCallId(st))>=0?(this.callsTable[Rt].callConfiguration&&(jt=apiCC.getUserMediaStream(this.callsTable[Rt].callConfiguration.userMediaStreamId)),jt?(jt.audioMuted?jt.unMuteAudioOnStreams("enabled"):jt.muteAudioOnStreams("enabled"),{muteState:jt.audioMuted,callId:st}):this.callsTable[Rt].callLocalStream!==null?(this.callsTable[Rt].isLocalAudioMuted?(on.debug("unmuting call :",this.callsTable[Rt].callId),this.unMuteTracks(this.callsTable[Rt].callLocalStream.getAudioTracks())):(on.debug("muting call :",this.callsTable[Rt].callId),this.muteTracks(this.callsTable[Rt].callLocalStream.getAudioTracks())),this.callsTable[Rt].isLocalAudioMuted=!this.callsTable[Rt].isLocalAudioMuted,{muteState:this.callsTable[Rt].isLocalAudioMuted,callId:st}):{muteState:"STREAM_NOT_FOUND",callId:st}):(Et=this.findUserMediaById(st))&&(Et.callConfiguration&&(jt=apiCC.getUserMediaStream(Et.callConfiguration.userMediaStreamId)),jt)?(jt.audioMuted?jt.unMuteAudioOnStreams("enabled"):jt.muteAudioOnStreams("enabled"),{muteState:jt.audioMuted,callId:st}):{muteState:"CALL_NOT_FOUND",callId:st}},this.sendDTMF=function(st,Tt,Rt,Lt){on.debug("sendDTMF");var Et=0;st!=null?(on.debug("callId is defined :",st),Et=this.findCallIndexWithCallId(st),on.debug("index :",Et),Et>=0&&(on.debug("index :",Et),this.callsTable[Et].sendTones(Tt,Rt,Lt))):on.debug("no callId defined, leaving sendDTMF")},this.xhr=function(st,Tt,Rt,Lt,Et){var jt=new XMLHttpRequest;jt.onreadystatechange=function(){jt.readyState===4&&jt.status===200&&Rt(jt.responseText)},Lt!==void 0&&(jt.upload.onprogress=Lt),jt.open("POST",st),Et!=null&&jt.setRequestHeader("Authorization","Bearer "+Et),jt.send(Tt)},this.takeSnapshot=function(st,Tt,Rt,Lt,Et,jt,Pt){var Vt=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{};on.info("takeSnapshot");var Zt,rn=null,Jt=null,ln=document.createElement("canvas"),mn=null,an=null,hn=new Date,En=hn.toJSON(),Mn=En.replace(new RegExp(":","g"),"-"),Pn=null,Wn=Vt.token;switch(Lt){case"Desactivated":Zt=0;break;case"Low":Zt=2;break;case"Medium":Zt=4;break;case"High":Zt=6;break;default:on.log("blurLevel not defined switch case : "+Lt),Zt=0}return Pt===void 0?(on.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot"),on.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("Deprecated - localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(on.log("takeSnapshot of defined video Id :"+Pt),(Pn=document.getElementById(Pt))===null?(on.log("Cannot find video with Id :"+Pt),on.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")):(ln.width=Pn.videoWidth,ln.height=Pn.videoHeight,Vt.hasOwnProperty("width")&&(on.debug("options.width is set :"+Vt.width),ln.width=Vt.width),Vt.hasOwnProperty("height")&&(on.debug("options.height is set :"+Vt.height),ln.height=Vt.height),on.log("snapshot.width : "+ln.width),on.log("snapshot.height :"+ln.height),(rn=ln.getContext("2d")).drawImage(Pn,0,0,ln.width,ln.height),(Jt=document.createElement("img")).src=ln.toDataURL("image/png"),Jt.style.padding=5,Jt.width=ln.width,Jt.height=ln.height,Zt!==0?(on.log("Adding Blur on Photo"),mn=rn.getImageData(0,0,ln.width,ln.height),on.log("av pixels data : "+mn.data),mn=kt(Jt,mn,Zt),on.log("ap pixels data : "+mn.data),rn.putImageData(mn,0,0),Jt.src=ln.toDataURL("image/png")):on.log("blur on photo is desactivated"),Qn(Tt)==="object"?Tt!==null?Tt.src=Jt.src:on.log("localPhotoIdOrDiv is null"):document.getElementById(Tt)!==null?document.getElementById(Tt).src=Jt.src:on.log("localPhotoId is not defined"),an=new FormData,Et!==void 0?(on.log("sessionId !== undefined :"+Et),an.append("destFileName",this.clientId+"-"+Mn+".png"),an.append("data",ln.toDataURL("image/png")),an.append("sessionId",Et)):(on.log("Upload on data1"),an.append("photo",ln.toDataURL("image/png")),an.append("clientId",this.clientId),an.append("apiKey",apiCC.session.apiKey)),void this.xhr(st,an,function(Nn){if(on.log("fileName :",Nn),Nn!==null)try{var Jn=JSON.parse(Nn);Jn.resultCode==="OK"&&(on.log("files loaded, filename :"+Jn.fileUrl),Hn.createSnapShotPhotoUploaded(Jn.fileUrl))}catch(rr){on.log("Parsing error:",rr)}Nn!=="Photo received"&&Nn!=="An error occurred."&&Nn.substring(0,6)!=="Photo-"||Hn.createSnapShotPhotoUploaded(Nn)},jt,Wn)))},this.takeSnapshotAndSendOnDataChannel=function(st,Tt,Rt,Lt){on.info("takeSnapshotAndSendOnDataChannel");var Et,jt=null,Pt=document.createElement("canvas"),Vt=null;if(Tt!==void 0){if(on.log("takeSnapshot of defined video Id :"+Tt),(Vt=document.getElementById(Tt))===null)return on.log("Cannot find video with Id :"+Tt),on.log("Leaving takeSnapshot"),void this.myWebRTC_Event.createErrorEvent("localVideo Div Name is not correct for takeSnapshot","INCORRECT_VIDEOID_FOR_SNAPSHOT")}else on.warn("ApiRTC DEPRECATED : Please add videoId for TakeSnapshot");Vt!=null&&(Pt.width=Vt.clientWidth,Pt.height=Vt.clientHeight),on.log("snapshot.width : "+Pt.width),on.log("snapshot.height :"+Pt.height),Pt.getContext("2d").drawImage(Vt,0,0,Pt.width,Pt.height),(jt=document.createElement("img")).src=Pt.toDataURL("image/png"),jt.style.padding=5,jt.width=Pt.width,jt.height=Pt.height,Qn(st)==="object"?st!==null?st.src=jt.src:on.log("localPhotoIdOrDiv is null"):document.getElementById(st)!==null?document.getElementById(st).src=jt.src:on.log("localPhotoId is not defined"),Et=Pt.toDataURL("image/png"),this.sendDataWithCallId(Rt,{file:Et,name:"nomFichier",type:"image/png-dataUrl"},Lt)},this.callWithNumber=function(st,Tt,Rt,Lt){on.info("Click on Call Button, video activated : "+Tt),on.log("callConfiguration : ",Lt);var Et=null,jt=0,Pt=null,Vt=null,Zt=null,rn=null,Jt=null;if(typeof st=="number"&&(on.log("called number type is number, converting to string"),st=st.toString()),st!==""&&st!==this.clientId){if((Et=new vn(this)).instanceId=apiCC.generateInstanceId(),on.log("Calling destination number :"+st),Lt==null||Lt.apzcallId===void 0||Lt.apzcallId===null?Et.generateCallId():Et.callId=Lt.apzcallId,apiCC.isSIPNumber(st)===!0?(on.log("Prefix 0 , + , or 'sip:' detected, calling a SIP device"),st.toString().startsWith("sip:")===!0&&(st=st.toString().replace("sip:",""),on.log("called SIP number is :",st)),Rt!=null?Rt.pubSub="sipConnector":(Rt={}).pubSub="sipConnector",Et.trickleIce=!1):on.log("Establishing Web call"),Et.callerId=this.clientId,Et.calleeId=st,Et.dest_roomId=st,Et.audioOnly=!Tt,Et.remoteId=st,Et.callConfiguration=Lt,Lt!=null?(Lt.mediaTypeForOutgoingCall==="VIDEO"||Lt.mediaTypeForOutgoingCall==="AUDIO"||Lt.mediaTypeForOutgoingCall==="VIDEOONLY"||Lt.mediaTypeForOutgoingCall==="NONE"?(on.log("Setting mediaTypeForOutgoingCall :"+Lt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=Lt.mediaTypeForOutgoingCall):(on.log("mediaTypeForOutgoingCall is not set"),Tt===!1&&(on.log("videoActivated is false, setting mediaTypeForOutgoingCall to AUDIO"),Et.mediaTypeForOutgoingCall="AUDIO")),Lt.mediaRoutingMode!==void 0&&Lt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(Lt.mediaRoutingMode),Lt.turnServerAddress!==void 0&&Lt.turnServerAddress!==null&&Et.setCallTurnServer(Lt.turnServerAddress),Lt.preferVP9Codec!==!0&&Lt.preferVP9Codec!==!1||(Et.preferVP9Codec=Lt.preferVP9Codec),Lt.hasOwnProperty("forceCallType")&&(Et.callType=Lt.forceCallType,Et.callType!=="screenSharing"&&Et.callType!=="screenSharingWithAudio"||(Et.screenSharing=!0))):on.log("callConfiguration is not set"),Rt!==void 0&&Rt.MCUType!==void 0&&(Rt.MCUType!=="MCU-Caller"&&Rt.MCUType!=="MCU-Callee"||(this.MCUClient.pubConnector==="janusConnector"&&(nt.Xh!=="Firefox"&&nt.Xh!=="Mobile Firefox"||(nt.PR>43?Et.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:Et.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}})),Rt.remoteMediaStreamId&&(Et.remoteMediaStreamId=Rt.remoteMediaStreamId),Rt.pubSub=this.MCUClient.pubConnector,Rt.videoBandwidthSettings=this.videoBandwidthSettings,Rt.pubSub==="groupKurentoConnector"&&(Rt.pubSub="kurentoConnector"))),Et.checkDTLSCompliancy(),Pt=Et.callId,Vt=apiCC.session.getConnectedUserInfo(st,"userData"),on.log("userInfo :",Vt),Vt!=="User_Not_Found"&&Vt!==void 0&&(Zt=JSON.parse(Vt))!==void 0&&Zt.react==="true"&&(on.log("userInfoJson.react :",JSON.stringify(Zt.react)),on.log("userInfoJson.osName :",JSON.stringify(Zt.osName)),Zt.osName==="iOS"&&(on.log("Callee : React and iOS detected, setting H264 as preferred codec for the call"),Et.preferH264Codec=!0)),Et.audioOnly===!0&&(Et.callType="audio"),Rt!==void 0?Et.data=Rt:Rt={},Rt.convId&&(Rt.cloudConvId||(Rt.cloudConvId=Rt.convId),delete Rt.convId),Rt.dataCall===!0&&(Et.dataCall=!0),Et.data.instanceId=Et.instanceId,jt=this.callsTable.push(Et),on.log("Call Number is :"+jt),Et.data&&Et.data.MCUType==="MCU-Caller"&&Et.mediaTypeForOutgoingCall==="NONE")return Et.inviteSended=!0,Et.myWebRTC_Stack.sendInvite(Et.callId,Et.callerId,this.nickname,Et.dest_roomId,Et.dest_roomId,"none",{offer:{type:"no-offer"},data:Et.data}),Et.callId;Et.data&&Et.data.MCUType==="MCU-Caller"&&(Et.settingUpType="publish",Et.callControl=this.createCallControl({type:"publish",callId:Et.callId,roomName:Et.data.confId,callConfiguration:Et.callConfiguration,data:Et.data}),Et.callControl.sessionId=Et.data.confId,Et.callControl.token=Et.data.confId,Et.callControl.autoRestart.counter=0,Et.setMediaConstraintsToSendOnlyOffer()),(0,at.ki)(Lt,"userMediaStreamId","string")&&(Jt=Lt.userMediaStreamId),Zt!=null&&Zt.isSimulated==="true"?apiCC.session.channel.socket.emit("simulatedAgentCallRequest",{number:st,call:Et,videoActivated:Tt,data:Rt,callConfiguration:{apzcallId:Et.callId}}):this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||Jt?Et.dataCall?(on.log("Datachannel call"),Et.establishCall()):(on.log("callWithNumber :: User has already granted access to local media and AutoAnswer activated : establishing call"),Jt?((rn=apiCC.getUserMediaStream(Jt)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=rn.userMediaStreamId,Et.onUserMediaSuccessOnCall(rn.stream)):Et.establishCall()):Rt.MCUType==="MCU-Callee"&&this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?on.log("Stand-by :: wait for AcceptCall on recorded 1to1 call"):Et.getUserMediaOnCall()}else on.log("Call Number is incorrect");return Pt},this.startTestCall=function(st,Tt){on.info("startTestCall : video activated : "+st);var Rt,Lt,Et=null,jt=null,Pt={};return(Et=new vn(this)).generateCallId(),Et.instanceId=apiCC.generateInstanceId(),Et.callerId=this.clientId,Et.calleeId=12345,Et.dest_roomId=12345,Et.audioOnly=!st,Et.remoteId=12345,Et.callConfiguration=Tt,Tt!=null?(Tt.mediaTypeForOutgoingCall==="VIDEO"||Tt.mediaTypeForOutgoingCall==="AUDIO"||Tt.mediaTypeForOutgoingCall==="VIDEOONLY"||Tt.mediaTypeForOutgoingCall==="NONE"?(on.log("Setting mediaTypeForOutgoingCall :"+Tt.mediaTypeForOutgoingCall),Et.mediaTypeForOutgoingCall=Tt.mediaTypeForOutgoingCall):on.log("mediaTypeForOutgoingCall is not set"),Tt.mediaRoutingMode!==void 0&&Tt.mediaRoutingMode!==null&&Et.setCallMediaRoutingMode(Tt.mediaRoutingMode),Tt.turnServerAddress!==void 0&&Tt.turnServerAddress!==null&&Et.setCallTurnServer(Tt.turnServerAddress),Tt.preferVP9Codec!==!0&&Tt.preferVP9Codec!==!1||(Et.preferVP9Codec=Tt.preferVP9Codec)):(on.log("callConfiguration is not set"),Tt={}),Et.checkDTLSCompliancy(),Lt=Et.callId,Pt.pubSub="testCallKurentoConnector",Et.data=Pt,Et.data.instanceId=Et.instanceId,Et.audioOnly===!0&&(Et.callType="audio"),Rt=this.callsTable.push(Et),on.log("Call Number is :"+Rt),this.accessToLocalMedia===!0&&this.autoAnswer===!0||Et.dataCall||Tt.userMediaStreamId||apiCC.userMediaStreamTable.length>0?Et.dataCall?(on.log("Datachannel call"),Et.establishCall()):(on.log("startTestCall :: User has already granted access to local media and AutoAnswer activated : establishing call"),Tt.userMediaStreamId?((jt=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=jt.userMediaStreamId,Et.callLocalStream=jt.stream,Et.establishCall()):(apiCC.userMediaStreamTable.length>0&&((jt=apiCC.userMediaStreamTable[0]).addCallInfo(Et.callId),Et.callConfiguration!==void 0&&Et.callConfiguration!==null||(Et.callConfiguration={}),Et.callConfiguration.userMediaStreamId=jt.userMediaStreamId,Et.callLocalStream=jt.stream),Et.establishCall())):Et.getUserMediaOnCall(),Lt},this.extensionInstallationSuccessCallback=function(){on.debug("extensionInstallationSuccessCallback"),apiCC.session.apiCCWebRTCClient.webRTCClient.apiRTCExtensionInstalled=!0},this.extensionInstallationFailureCallback=function(st,Tt){on.debug("extensionInstallationFailureCallback : Error :"+st+", "+Tt),st=null,Tt=null,Hn.createDesktopCaptureEvent("Extension_installation_Error",this.waitingShareScreenCallId,this.waitingShareScreenDestNumber,this.waitingCaptureSourceType)},this.manageNotInstalledExtension=function(st,Tt,Rt){on.debug("manageNotInstalledExtension"),on.warn("apiRTC extension not installed"),Hn.createDesktopCaptureEvent("Extension_not_installed",st,Tt),on.warn("Starting apiRTC extension installation"),this.waitingShareScreenDestNumber=Tt,this.waitingShareScreenCallId=st,this.waitingCaptureSourceType=Rt,chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",this.callback(this,"extensionInstallationSuccessCallback"),this.callback(this,"extensionInstallationFailureCallback"))},this.shareScreen=function(st,Tt,Rt,Lt,Et){on.info("shareScreen");var jt=null,Pt=null,Vt=null,Zt=null;if(apiCC.isScreenSharingCompliant()===!0)if(st!==""&&st!==this.clientId){if(Tt!==null&&Qn(Tt)==="object"||(Tt={}),this.MCUClient.pubConnector==="janusConnector"&&!Tt.mesh&&Et&&Et.callControl&&Et.callControl.callId&&this.findCallWithCallId(Et.callControl.callId))return on.debug("call already exists",Et.callControl.callId),Et.callControl.callId;if(Lt!==null&&Qn(Lt)==="object"||(Lt={}),Lt.qos!==null&&Qn(Lt.qos)==="object"?(Tt.qos={},Lt.qos.videoMinQuality==="excellent"?Tt.qos.videoMinQuality="excellent":Lt.qos.videoMinQuality==="good"?Tt.qos.videoMinQuality="good":Lt.qos.videoMinQuality==="medium"?Tt.qos.videoMinQuality="medium":(Lt.qos.videoMinQuality,Tt.qos.videoMinQuality="bad"),Lt.qos.videoForbidInactive===!0&&(Tt.qos.videoForbidInactive=!0)):Tt.qos={videoMinQuality:"bad"},["audioLabels","videoLabels"].forEach(function(Jt){(0,at.Ym)(Lt[Jt],"array")&&(Tt[Jt]=[],Lt[Jt].forEach(function(ln){(0,at.Ym)(ln,"string")&&Tt[Jt].push(ln)}))}),(0,at.Ym)(Lt,"context","object"))try{JSON.stringify(Lt.context),Tt.context=Lt.context}catch{}on.log("shareScreen; callConfiguration: "+JSON.stringify(Lt)),Pt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient),Tt.mesh!==void 0&&Tt.instanceId!==void 0?(on.debug("keeping instanceId "),Pt.instanceId=Tt.instanceId):Pt.instanceId=apiCC.generateInstanceId(),on.log("Calling destination number :"+st);var rn=this.MCUClient.getSessionMCU(st);if(rn&&(Pt.sessionMCU=rn),Pt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&!Tt.mesh?(Pt.settingUpType="shareScreen",Et&&Et.callControl?(Pt.callControl=Et.callControl,Pt.callControl.autoRestart.counter+=1,Pt.callId=Pt.callControl.callId,Pt.restarted=!0):(Pt.callControl=this.createCallControl({type:"shareScreen",roomName:st,callConfiguration:Lt,data:Tt}),Pt.callControl.captureSourceType=Rt,Pt.callControl.autoRestart.counter=0,Pt.generateCallId(),Pt.callControl.callId=Pt.callId)):(Pt.settingUpType="shareScreen",Pt.generateCallId()),jt=Pt.callId,Pt.callerId=this.clientId,Pt.calleeId=st,Pt.dest_roomId=st,Pt.audioOnly=!1,Pt.screenSharing=!0,Pt.remoteId=st,Pt.callType="screenSharing",Pt.captureSourceType=Rt,Pt.callConfiguration=Lt,Pt.data=Tt,Pt.data.instanceId=Pt.instanceId,rn&&rn.convId&&(Pt.data.cloudConvId=rn.convId),Lt!=null&&Lt.turnServerAddress!==void 0&&Lt.turnServerAddress!==null&&Pt.setCallTurnServer(Lt.turnServerAddress),Pt.checkDTLSCompliancy(),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(Pt),Pt.sessionMCU&&this.MCUClient.pubConnector==="janusConnector"&&Pt.callControl&&Pt.callControl.autoRestart.stream)return on.debug("shareScreen; autoRestart"),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Pt.callLocalStream=Pt.callControl.autoRestart.stream,Pt.establishCall(),Pt.callId;if(Tt!==void 0&&Tt.mesh!==void 0&&(Vt=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(Tt.mesh.calleeCallId))!==null&&Vt.callConfiguration&&Vt.callConfiguration.userMediaStreamId)return(Zt=apiCC.getUserMediaStream(Vt.callConfiguration.userMediaStreamId)).addCallInfo(Pt.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Pt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Pt.callControl&&(Pt.callControl.autoRestart.stream=Zt.stream),Pt.callConfiguration.userMediaStreamId=Zt.userMediaStreamId,Pt.callLocalStream=Zt.stream,Pt.establishCall(),Pt.callId;apiCC.createUserMediaStream({callId:Pt.callId,type:Pt.callType,captureSourceType:Rt,success:function(Jt){on.debug("[shareScreen] success; userMediaStreamId: "+Jt.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,Pt.sessionMCU&&apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector==="janusConnector"&&Pt.callControl&&(Pt.callControl.autoRestart.stream=Jt.stream),Pt.callConfiguration.userMediaStreamId=Jt.userMediaStreamId,Pt.callLocalStream=Jt.stream,Pt.establishCall()}})}else on.log("Call Number is incorrect");else on.log("shareScreen is not supported on this browser"),Hn.createDesktopCaptureEvent("Browser_Not_Compatible",jt,st);return on.info("shareScreen, callId :",jt),jt},this.startScreenSharingOnCall=function(st,Tt){on.info("getScreenMedia for callId :"+st);var Rt=null;if(nt.Xh==="Chrome")if((Rt=this.findCallWithCallId(st))!==null){if(this.apiRTCExtensionInstalled===!1)return void this.manageNotInstalledExtension(Rt.callId,Rt.remoteId,Tt);Tt==null&&(Tt=["screen","window","tab"]),window.postMessage({command:"getDesktopId",callNumber:Rt.callId,remoteId:Rt.remoteId,captureSourceType:Tt,browser_major_version:nt.PR},"*")}else on.log("call not found");else on.log("shareScreen is only available for chrome Browser"),Hn.createDesktopCaptureEvent("Browser_Not_Compatible",st,null)},this.toggleVideoScreen=function(st){on.info("toggleVideoScreen for callId :"+st);var Tt=this.findCallWithCallId(st);Tt!==null?Tt.toggleVideoScreen():on.log("call not found")},this.addVideoMedia=function(st){on.info("webRTCClient::addVideoMedia for callId :"+st);var Tt=this.findCallWithCallId(st);Tt!==null?Tt.addVideoMedia():on.log("call not found")},this.callbymail=function(st){var Tt;on.info("Click on Call per mail Button"),Tt=st,new RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i").test(Tt)?(on.log("Calling Destination mail :"+st),this.socket.emit("webrtc_invite_permail",st),Yt.channel.socket.emit("webrtc_invite_permail",st)):on.log("Mail address is not correct :"+st)},this.callperURL=function(st){on.info("Call per URL");var Tt,Rt=null;(Rt=new vn(this)).instanceId=apiCC.generateInstanceId(),on.log("Calling Destination number :"+st),Rt.generateCallId(),Rt.callerId=this.clientId,Rt.calleeId=st,Rt.dest_roomId=st,Rt.audioOnly=!1,Rt.getUserMediaOnCall(),Rt.remoteId=st,Rt.checkDTLSCompliancy(),Tt=this.callsTable.push(Rt),on.log("Call Number is :"+Tt)},this.acceptCall=function(st,Tt){on.info("acceptCall for callId :"+st),on.log("acceptCall() - callConfiguration : ",Tt);var Rt=null,Lt=null;if((Rt=this.findCallWithCallId(st))!==null){if(on.log("acceptCall() - Call found"),Rt.isAccepted=!0,Tt!=null?(Tt.mediaTypeForIncomingCall==="VIDEO"||Tt.mediaTypeForIncomingCall==="AUDIO"||Tt.mediaTypeForIncomingCall==="VIDEOONLY"||Tt.mediaTypeForIncomingCall==="NONE"||Tt.mediaTypeForIncomingCall==="DATA"?(on.log("acceptCall() - Setting mediaTypeForIncomingCall :"+Tt.mediaTypeForIncomingCall),Rt.mediaTypeForIncomingCall=Tt.mediaTypeForIncomingCall):on.log("acceptCall() - mediaTypeForIncomingCall is not set"),Tt.mediaRoutingMode!==void 0&&Tt.mediaRoutingMode!==null&&Rt.setCallMediaRoutingMode(Tt.mediaRoutingMode),Tt.turnServerAddress!==void 0&&Tt.turnServerAddress!==null&&Rt.setCallTurnServer(Tt.turnServerAddress),Tt.preferVP9Codec!==!0&&Tt.preferVP9Codec!==!1||(Rt.preferVP9Codec=Tt.preferVP9Codec)):(on.log("acceptCall() - callConfiguration is not set"),Tt={}),Rt.screenSharing===!0&&(on.log("acceptCall() for screenSharing : forcing mediaTypeForIncomingCall to NONE"),Tt.mediaTypeForIncomingCall="NONE",Rt.mediaTypeForIncomingCall="NONE"),Rt.callConfiguration=(0,at.S6)(Rt.callConfiguration,Tt),Rt.mediaTypeForIncomingCall==="VIDEO"?Rt.setLocalCallProfile({audio:!0,audioActive:!0,video:!0,videoActive:!0}):Rt.mediaTypeForIncomingCall==="AUDIO"?Rt.setLocalCallProfile({audio:!0,audioActive:!0,video:!1,videoActive:!1}):Rt.mediaTypeForIncomingCall==="VIDEOONLY"?Rt.setLocalCallProfile({audio:!1,audioActive:!1,video:!0,videoActive:!0}):Rt.mediaTypeForIncomingCall==="NONE"&&Rt.setLocalCallProfile({audio:!1,audioActive:!1,video:!1,videoActive:!1}),Rt.data&&Rt.data.MCUType==="MCU-Callee"&&Rt.mediaTypeForIncomingCall==="NONE")return void Rt.myWebRTC_Stack.sendInvite(Rt.callId,Rt.callerId,this.nickname,Rt.dest_roomId,Rt.dest_roomId,"none",{offer:{type:"no-offer"},data:Rt.data});Rt.data&&Rt.data.MCUType==="MCU-Callee"&&(Rt.mediaTypeForOutgoingCall=Rt.mediaTypeForIncomingCall,Rt.settingUpType="publish",Rt.callControl=this.createCallControl({type:"publish",callId:Rt.callId,roomName:Rt.data.confId,callConfiguration:Rt.callConfiguration,data:Rt.data}),Rt.callControl.sessionId=Rt.data.confId,Rt.callControl.token=Rt.data.confId,Rt.callControl.autoRestart.counter=0,Rt.setMediaConstraintsToSendOnlyOffer()),this.unidirectionelCallOnly?(on.log("acceptCall() - unidirectional call"),Rt.onUserMediaSuccessTestUni()):this.userAcceptOnIncomingCallBeforeGetUserMedia===!0?(on.log("acceptCall with userAcceptOnIncomingCallBeforeGetUserMedia"),Tt.userMediaStreamId?((Lt=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(Rt.callId),Rt.callConfiguration!==void 0&&Rt.callConfiguration!==null||(Rt.callConfiguration={}),Rt.callConfiguration.userMediaStreamId=Lt.userMediaStreamId,Rt.onUserMediaSuccessOnCall(Lt.stream)):Rt.getUserMediaOnCall()):Rt.accessToMedia===!0||Tt.userMediaStreamId||Rt.dataCall?(on.log("acceptCall() :: User has already granted access to local media and AutoAnswer activated : establishing call"),Rt.dataCall||Tt.userMediaStreamId&&((Lt=apiCC.getUserMediaStream(Tt.userMediaStreamId)).addCallInfo(Rt.callId),Rt.callConfiguration!==void 0&&Rt.callConfiguration!==null||(Rt.callConfiguration={}),Rt.callConfiguration.userMediaStreamId=Lt.userMediaStreamId,Rt.callLocalStream=Lt.stream),Rt.establishCall()):on.log("acceptCall() - call will be established when user accept his media")}else on.log("Call not found")},this.refuseCall=function(st,Tt){on.info("refuseCall for callId :"+st);var Rt,Lt=null;Rt=Tt!==void 0?Tt:"User_Refused_Call",(Lt=this.findCallWithCallId(st))!==null?(on.log("Call found"),Lt.data.MCUType==="MCU-Callee"?(Lt.myWebRTC_Stack.sendBye(Lt.callId,Lt.callerId,Lt.dest_roomId,Lt.calleeId,"User_Media_Error",Lt.data),this.removeCallFromTableWithCallIdandRemoteId(Lt.callId,Lt.calleeId,Rt)):(Lt.myWebRTC_Stack.sendBye(Lt.callId,Lt.calleeId,Lt.dest_roomId,Lt.callerId,Rt,Lt.data),this.removeCallFromTableWithCallIdandRemoteId(Lt.callId,Lt.callerId,Rt)),this.callsTable.length===0&&on.log("No more established calls for client")):on.log("Call not found")},this.stopMedia=function(st){var Tt=this,Rt=null,Lt=null;return new Promise(function(Et,jt){var Pt=null,Vt=null;return(Pt=Tt.findCallWithCallId(st))?Pt.callLocalStream?void Pt.removeStream(Pt.callLocalStream).then(function(){return Lt=Pt.callLocalStream.id,Pt.callLocalStream=null,(0,at.ki)(Pt.callConfiguration,"userMediaStreamId","string")&&(Rt=Pt.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(Pt.callConfiguration.userMediaStreamId,Pt.callId),delete Pt.callConfiguration.userMediaStreamId),Et({oldUserMediaStreamId:Rt,oldMediaStreamId:Lt})}).catch(jt):Et({oldUserMediaStreamId:Rt,oldMediaStreamId:Lt}):((Vt=Tt.findUserMediaById(st))&&(Rt=st,Vt.releaseUserMediaStream()),Et({oldUserMediaStreamId:Rt,oldMediaStreamId:Lt}))})},this.addMedia=function(st,Tt,Rt,Lt){var Et=this;on.info("addMedia for callId :"+st);var jt=null,Pt=null,Vt=null,Zt=function(){return Promise.resolve()},rn=function(){return Promise.resolve()};Tt===!0&&(Zt=function(){return Et.stopMedia(st)}),(0,at.Ym)(Rt,"string")&&(Vt=apiCC.getUserMediaStream(Rt),Rt=null);var Jt=function(){on.error("[addMedia] success; userMediaStreamId: "+Vt.userMediaStreamId),Pt.callConfiguration!==void 0&&Pt.callConfiguration!==null||(Pt.callConfiguration={}),Pt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,Pt.callType=Vt.callType,Pt.audio=Vt.audio,Pt.video=Vt.video,Pt.audioMuted=Vt.audioMuted,Pt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Pt,!0)},ln=function(hn){hn.callConfiguration!==void 0&&hn.callConfiguration!==null||(hn.callConfiguration={}),hn.isLocalAudioMuted&&hn.isLocalVideoMuted?hn.callConfiguration.muted="VIDEO":hn.isLocalAudioMuted?hn.callConfiguration.muted="AUDIOONLY":hn.isLocalVideoMuted&&(hn.callConfiguration.muted="VIDEOONLY")},mn=function(hn,En,Mn){En==="audio"?Mn?hn.audioSdpDirection=null:(0,at.ki)(hn.remoteCallProfile,"audio","boolean")&&hn.remoteCallProfile.audio===!0&&hn.remoteCallProfile.audioActive===!0?hn.audioSdpDirection="recvonly":hn.audioSdpDirection="inactive":En==="video"&&(Mn?hn.videoSdpDirection=null:(0,at.ki)(hn.remoteCallProfile,"video","boolean")&&hn.remoteCallProfile.video===!0&&hn.remoteCallProfile.videoActive===!0?hn.videoSdpDirection="recvonly":hn.videoSdpDirection="inactive")},an=function(hn,En,Mn,Pn){hn.callConfiguration!==void 0&&hn.callConfiguration!==null||(hn.callConfiguration={}),hn.callConfiguration.userMediaStreamId=En.userMediaStreamId,mn(hn,"audio",En.audio),mn(hn,"video",En.video),ln(hn),function(Wn,Nn,Jn){Nn&&Jn?(Wn.audioOnly=!1,Wn.mediaTypeForIncomingCall="VIDEO",Wn.mediaTypeForOutgoingCall="VIDEO"):Nn?(Wn.audioOnly=!1,Wn.mediaTypeForIncomingCall="AUDIO",Wn.mediaTypeForOutgoingCall="AUDIO"):Jn?(Wn.audioOnly=!1,Wn.mediaTypeForIncomingCall="VIDEOONLY",Wn.mediaTypeForOutgoingCall="VIDEOONLY"):(Wn.audioOnly=!1,Wn.mediaTypeForIncomingCall="NONE",Wn.mediaTypeForOutgoingCall="NONE")}(hn,En.audio,En.video),hn.callLocalStream=En.stream,hn.started?hn.addingUserMedia=!0:Et.accessToLocalMedia=!0,hn.asyncCallbacks={},hn.asyncCallbacks.type="addingUserMedia",hn.asyncCallbacks.resolve=Mn,hn.asyncCallbacks.reject=Pn,hn.asyncCallbacks.timeoutId=setTimeout(function(){hn.asyncCallbacks&&typeof hn.asyncCallbacks.reject=="function"&&(hn.asyncCallbacks.reject("addMedia timeout"),delete hn.asyncCallbacks)},Fn),hn.establishCall()};if((jt=this.findCallWithCallId(st))!==null){if(jt.asyncCallbacks)return Promise.reject("job already ongoing");rn=function(){return new Promise(function(hn,En){Vt?(Vt.addCallInfo(jt.callId),an(jt,Vt,hn,En)):Rt?apiCC.createUserMediaStream({type:"media",callId:jt.callId,stream:Rt,sync:!0,success:function(Mn){on.debug("[addMedia] success; userMediaStreamId: "+Mn.userMediaStreamId),an(jt,Mn,hn,En)},failure:function(Mn,Pn){return En(Pn)}}):(0,at.ki)(Lt,"getUserMediaStreamId","function")?Lt.getUserMediaStreamId().then(function(Mn){if(!(Vt=apiCC.getUserMediaStream(Mn)))return En("wrong userMediaStreamId");Vt.addCallInfo(jt.callId),an(jt,Vt,hn,En)}).catch(En):apiCC.userMediaStreamTable.length>0?((Vt=apiCC.userMediaStreamTable[0]).addCallInfo(jt.callId),an(jt,Vt,hn,En)):(ln(jt),jt.addingUserMedia=!0,jt.asyncCallbacks={},jt.asyncCallbacks.type="addingUserMedia",jt.asyncCallbacks.resolve=hn,jt.asyncCallbacks.reject=En,jt.asyncCallbacks.timeoutId=setTimeout(function(){jt.asyncCallbacks&&typeof jt.asyncCallbacks.reject=="function"&&(jt.asyncCallbacks.reject("addMedia timeout"),delete jt.asyncCallbacks)},Fn),jt.getUserMediaOnCall())})}}else if(Pt=this.findUserMediaById(st)){if(Pt.addingUserMedia===!0)return Promise.reject("addMedia already ongoing");rn=function(){return new Promise(function(hn,En){Pt.addingUserMedia=!0,new Promise(function(Mn,Pn){if(Vt)return Vt.addCallInfo(Pt.userMediaId,"userMedia"),Pt.callConfiguration!==void 0&&Pt.callConfiguration!==null||(Pt.callConfiguration={}),Pt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,Pt.callType=Vt.callType,Pt.audio=Vt.audio,Pt.video=Vt.video,Pt.audioMuted=Vt.audioMuted,Pt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Pt,!0),Mn(Vt.userMediaStreamId);if(Rt)apiCC.createUserMediaStream({callId:Pt.userMediaId,callFlavor:"userMedia",type:Pt.callType,stream:Rt,sync:!0,success:function(){return Jt(),Mn(Vt.userMediaStreamId)},failure:function(Wn,Nn){return Pn(Nn)}});else if((0,at.ki)(Lt,"getUserMediaStreamId","function"))Lt.getUserMediaStreamId().then(function(Wn){return(Vt=apiCC.getUserMediaStream(Wn))?(Vt.addCallInfo(Pt.userMediaId,"userMedia"),Pt.callConfiguration!==void 0&&Pt.callConfiguration!==null||(Pt.callConfiguration={}),Pt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,Pt.callType=Vt.callType,Pt.audio=Vt.audio,Pt.video=Vt.video,Pt.audioMuted=Vt.audioMuted,Pt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Pt,!0),Mn(Vt.userMediaStreamId)):Pn("wrong userMediaStreamId")}).catch(Pn);else{if(apiCC.userMediaStreamTable.length>0)return(Vt=apiCC.userMediaStreamTable[0]).addCallInfo(Pt.userMediaId,"userMedia"),Pt.callConfiguration!==void 0&&Pt.callConfiguration!==null||(Pt.callConfiguration={}),Pt.callConfiguration.userMediaStreamId=Vt.userMediaStreamId,Pt.callType=Vt.callType,Pt.audio=Vt.audio,Pt.video=Vt.video,Pt.audioMuted=Vt.audioMuted,Pt.videoMuted=Vt.videoMuted,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(Pt,!0),Mn(Vt.userMediaStreamId);apiCC.createUserMediaStream({callId:Pt.userMediaId,callFlavor:"userMedia",type:Pt.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(){return Jt(),Mn(Vt.userMediaStreamId)},failure:function(Wn,Nn){return Pn(Nn)}})}}).then(function(Mn){return function(Pn){return new Promise(function(Wn,Nn){for(var Jn=[],rr=0;rr<apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;rr+=1){var hr=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[rr];if(hr.data!==void 0&&hr.data.mesh!==void 0&&hr.data.mesh.calleeCallId===st){var cr=apiCC.session.apiCCWebRTCClient.webRTCClient.addMedia(hr.callId,!0,Pn);Jn.push(cr.userMediaStreamId)}}Promise.all(Jn).then(function(){return Wn(Pn)}).catch(Nn)})}(Mn)}).then(function(Mn){return delete Pt.addingUserMedia,hn(Mn)}).catch(function(Mn){return delete Pt.addingUserMedia,En(Mn)})})}}else rn=function(){return Promise.reject("no suitable replacement")};return new Promise(function(hn,En){var Mn=null,Pn=null;Zt().then(function(Wn){return Mn=Wn.oldUserMediaStreamId,Pn=Wn.oldMediaStreamId,rn()}).then(function(Wn){return on.info("addMedia success; userMediaStreamId: "+Wn),hn({userMediaStreamId:Wn,oldUserMediaStreamId:Mn,oldMediaStreamId:Pn})}).catch(function(Wn){on.error("addMedia failure: "+Wn);var Nn=null,Jn=null;return jt?(jt.callControl&&(Nn=jt.callControl.roomName,Jn=jt.callControl.type),Hn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",jt.callId,Nn,Jn)):Pt&&Hn.createErrorEvent("Failed to addMedia","MEDIA_UPDATE_ERROR",Pt.userMediaId,null,"publish"),En(Wn)})})},this.updateMediaDeviceOnCall=function(st,Tt){return on.info("updateMediaDeviceOnCall for callId :"+st),this.addMedia(st,!0,Tt),st},this.updateMediaTypeOnCall=function(st,Tt){var Rt=function(jt,Pt,Vt){return new Promise(function(Zt,rn){var Jt,ln={};jt.callControl.mediaType=Vt,jt.mediaType=Vt,jt.data.mediaType=Vt,jt.updateCause="userAction",ln.type="update",ln.mode="passive",ln.callId=jt.callId,ln.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,ln.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,ln.calleeId=jt.sessionMCU.roomName,ln.roomId=jt.sessionMCU.roomName,ln.callType=Pt.attributes.callType,ln.data=(0,at.S6)(jt.data),ln.data.type="subscribe",ln.stream=Pt,Jt=JSON.stringify(ln),on.log("C->S: "+Jt),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("update",Jt),jt.asyncCallbacks={},jt.asyncCallbacks.type="updateMediaType",jt.asyncCallbacks.resolve=Zt,jt.asyncCallbacks.reject=rn,jt.asyncCallbacks.timeoutId=setTimeout(function(){jt.asyncCallbacks&&typeof jt.asyncCallbacks.reject=="function"&&(jt.asyncCallbacks.reject("timeout"),delete jt.asyncCallbacks)},2e4)})},Lt=this.findCallWithCallId(st);if(!Lt)return Promise.reject("call not found");if(Lt.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(Lt.asyncCallbacks)return Promise.reject("job already ongoing");var Et=this.MCUClient.getStreamFromList(Lt.streamId);if(!Et)return Promise.reject("wrong streamId");if(Lt.callControl.mediaType==="VIDEO"){if(Tt==="AUDIOONLY"&&Et.audio||Tt==="VIDEOONLY"&&Et.video)return Rt(Lt,Et,Tt)}else if(Lt.callControl.mediaType==="AUDIOONLY"){if(Tt==="VIDEO"&&Et.video||Tt==="VIDEOONLY"&&Et.video)return Rt(Lt,Et,Tt)}else if(Lt.callControl.mediaType==="VIDEOONLY"&&(Tt==="VIDEO"&&Et.video||Tt==="AUDIOONLY"&&Et.audio))return Rt(Lt,Et,Tt);return Promise.reject("wrong mediaType")},this.updateSimulcastFeedOnCall=function(st,Tt){var Rt=this.findCallWithCallId(st);if(!Rt)return Promise.reject("call not found");if(Rt.settingUpType!=="subscribe")return Promise.reject("wrong call type");if(Rt.asyncCallbacks)return Promise.reject("job already ongoing");var Lt=this.MCUClient.getStreamFromList(Rt.streamId);if(!Lt)return Promise.reject("wrong streamId");if(!Tt)return Promise.reject("wrong simulcast");Rt.callControl.callConfiguration.simulcast||(Rt.callControl.callConfiguration.simulcast={}),Rt.data.simulcast||(Rt.data.simulcast={}),Tt.streamQuality&&(Tt.streamQuality==="high"?(Rt.callControl.callConfiguration.simulcast.substream=2,Rt.data.simulcast.substream=2):Tt.streamQuality==="medium"?(Rt.callControl.callConfiguration.simulcast.substream=1,Rt.data.simulcast.substream=1):Tt.streamQuality==="low"?(Rt.callControl.callConfiguration.simulcast.substream=0,Rt.data.simulcast.substream=0):(Rt.callControl.callConfiguration.simulcast.substream=-1,Rt.data.simulcast.substream=-1)),Tt.streamFrameRate&&(Tt.streamFrameRate==="high"?(Rt.callControl.callConfiguration.simulcast.temporal=2,Rt.data.simulcast.temporal=2):Tt.streamFrameRate==="medium"?(Rt.callControl.callConfiguration.simulcast.temporal=1,Rt.data.simulcast.temporal=1):Tt.streamFrameRate==="low"?(Rt.callControl.callConfiguration.simulcast.temporal=0,Rt.data.simulcast.temporal=0):(Rt.callControl.callConfiguration.simulcast.temporal=-1,Rt.data.simulcast.temporal=-1));var Et={type:"updateSimulcastFeed"};Et.callId=Rt.callId,Et.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,Et.calleeId=Rt.sessionMCU.roomName,Et.roomId=Rt.sessionMCU.roomName,Et.callType=Lt.attributes.callType,Et.data=(0,at.S6)(Rt.data),Et.stream=Lt;var jt=JSON.stringify(Et);return on.log("C->S: "+jt),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit("updateSimulcastFeed",jt),Promise.resolve()},this.updateCallConfigurationOnCall=function(st,Tt){var Rt=function(Et,jt,Pt){jt==="audio"?Et.audioSdpDirection=Pt?null:"inactive":jt==="video"&&(Et.videoSdpDirection=Pt?null:"inactive")},Lt=this.findCallWithCallId(st);return Lt?Lt.settingUpType!=="publish"?Promise.reject("wrong call type"):Lt.asyncCallbacks?Promise.reject("job already ongoing"):((0,at.Ym)(Tt,"object")||(Tt={}),(0,at.ki)(Tt,"audioOnly","boolean")||(Tt.audioOnly=!1),(0,at.ki)(Tt,"videoOnly","boolean")||(Tt.videoOnly=!1),function(Et,jt){return new Promise(function(Pt,Vt){Et.mediaTypeForIncomingCall="NONE",jt.audioOnly===!0?(on.log("Setting call as audioOnly"),Et.audioOnly=!0,Et.callType="audio",Et.mediaTypeForOutgoingCall="AUDIO",Rt(Et,"audio",!0),Rt(Et,"video",!1)):jt.videoOnly===!0?(on.log("Setting call as videoOnly"),Et.audioOnly=!1,Et.callType="videoOnly",Et.mediaTypeForOutgoingCall="VIDEOONLY",Rt(Et,"audio",!1),Rt(Et,"video",!0)):(on.log("Setting call as media"),Et.audioOnly=!1,Et.callType="media",Et.mediaTypeForOutgoingCall="VIDEO",Rt(Et,"audio",!0),Rt(Et,"video",!0)),Et.updateUserMedia=!0,Et.updateCause="userAction",Et.establishCall(),Et.asyncCallbacks={},Et.asyncCallbacks.type="updateCallConfiguration",Et.asyncCallbacks.resolve=Pt,Et.asyncCallbacks.reject=Vt,Et.asyncCallbacks.timeoutId=setTimeout(function(){Et.asyncCallbacks&&typeof Et.asyncCallbacks.reject=="function"&&(Et.asyncCallbacks.reject("timeout"),delete Et.asyncCallbacks)},2e4)})}(Lt,Tt)):Promise.reject("call not found")},this.findUserMediaById=function(st){for(var Tt=this.userMediaTable.length;--Tt>=0;)if(this.userMediaTable[Tt].userMediaId===st)return this.userMediaTable[Tt];return null},this.findCallIndexWithCallIdAndRemoteId=function(st,Tt){on.debug("findCallIndexWithCallIdAndRemoteId");var Rt,Lt=this.callsTable.length;for(on.trace("callsNumber : "+Lt),Rt=0;Rt<Lt;Rt+=1)if(this.callsTable[Rt].callId===st&&(on.log("callId found"),on.log("this.callsTable[i].callee :"+this.callsTable[Rt].callee),on.log("this.callsTable[i].calleeId :"+this.callsTable[Rt].calleeId),this.callsTable[Rt].callee===!0&&this.callsTable[Rt].callerId===Tt||this.callsTable[Rt].callee===!1&&this.callsTable[Rt].calleeId===Tt))return Rt;return on.log("Call not found"),-1},this.findCallIndexWithConfIdAndRemoteId=function(st,Tt){on.debug("findCallIndexWithConfIdAndRemoteId"),on.log("confId :"+st),on.log("remoteId :"+Tt);var Rt,Lt=this.callsTable.length;for(Rt=0;Rt<Lt;Rt+=1)if(on.log("this.callsTable[i].data.confId :"+this.callsTable[Rt].data.confId),this.callsTable[Rt].data.confId===st){if(this.callsTable[Rt].callee===!0&&this.callsTable[Rt].callerId===Tt||this.callsTable[Rt].callee===!1&&this.callsTable[Rt].calleeId===Tt)return Rt}else on.debug("ConfId is different");return on.debug("Call not found - findCallIndexWithConfIdAndRemoteId"),-1},this.findCallIndexWithCallId=function(st){on.debug("findCallIndexWithCallId");var Tt,Rt=this.callsTable.length;for(Tt=0;Tt<Rt;Tt+=1)if(this.callsTable[Tt].callId===st)return on.log("Call found with callId"),Tt;return on.debug("Call not found - findCallIndexWithCallId"),-1},this.findCallWithCallIdAndInstanceId=function(st,Tt){on.debug("findCallWithCallIdAndInstanceId :"+st+" ,instanceId : "+Tt),Tt===void 0&&on.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var Rt,Lt=this.callsTable.length;for(on.trace("callsNumber :"+Lt),Rt=0;Rt<Lt;Rt+=1)if(this.callsTable[Rt].callId===st&&this.callsTable[Rt].instanceId===Tt)return this.callsTable[Rt];return on.debug("Call not found, findCallWithCallIdAndInstanceId"),null},this.findCallIndexWithCallIdAndInstanceId=function(st,Tt){on.debug("findCallIndexWithCallIdAndInstanceId :"+st+" ,instanceId : "+Tt),Tt===void 0&&on.debug("instanceId is undefined : must be a mesh publish call, id must be a streamId");var Rt,Lt=this.callsTable.length;for(on.trace("callsNumber :"+Lt),Rt=0;Rt<Lt;Rt+=1)if(this.callsTable[Rt].callId===st&&this.callsTable[Rt].instanceId===Tt)return Rt;return on.debug("Call not found, findCallIndexWithCallIdAndInstanceId"),-1},this.findCallWithCallId=function(st){on.trace("findCallWithCallId :"+st);var Tt,Rt=this.callsTable.length;for(on.trace("callsNumber :"+Rt),Tt=0;Tt<Rt;Tt+=1)if(on.trace("this.callsTable[i].callId :"+this.callsTable[Tt].callId),this.callsTable[Tt].callId===st)return this.callsTable[Tt];return on.debug("Call not found"),null},this.findCallWithStreamId=function(st,Tt){on.debug("findCallWithStreamId :"+st);var Rt,Lt=!(!Tt||!Tt.ignoreModeChangeKindOld),Et=this.callsTable.length;for(on.trace("callsNumber :"+Et),Rt=0;Rt<Et;Rt+=1)if(on.log("this.callsTable[i].streamId :"+this.callsTable[Rt].streamId),!(this.callsTable[Rt].streamId!=st||Lt&&this.callsTable[Rt].sessionMCU&&this.callsTable[Rt].sessionMCU.modeChangeKind==="old"))return on.log("Call found"),this.callsTable[Rt];return on.log("Call not found"),null},this.findCallWithCallIdAndRemoteIdAndInstanceId=function(st,Tt,Rt){on.debug("findCallWithCallIdAndRemoteIdAndInstanceId callId : "+st+" ,instanceId : "+Rt);var Lt,Et=this.callsTable.length;for(on.trace("callsNumber :"+Et),Lt=0;Lt<Et;Lt+=1)if(this.callsTable[Lt].callId===st&&this.callsTable[Lt].instanceId===Rt&&(this.callsTable[Lt].callee===!0&&this.callsTable[Lt].callerId===Tt||this.callsTable[Lt].callee===!1&&this.callsTable[Lt].calleeId===Tt))return this.callsTable[Lt];return on.debug("Call not found"),null},this.findCallWithCallIdAndRemoteId=function(st,Tt){on.log("findCallWithCallIdAndRemoteId");var Rt,Lt=this.callsTable.length;for(on.trace("callsNumber :"+Lt),Rt=0;Rt<Lt;Rt+=1)if(this.callsTable[Rt].callId===st&&(this.callsTable[Rt].callee===!0&&this.callsTable[Rt].callerId===Tt||this.callsTable[Rt].callee===!1&&this.callsTable[Rt].calleeId===Tt))return this.callsTable[Rt];return on.log("Call not found"),null},this.releaseUserMedia=function(){on.info("releaseUserMedia"),this.localStream!==null&&(on.log("stopping localStream"),this.stopStream(this.localStream),Hn.createUserMediaStopEvent(null,"media"),this.accessToLocalMedia=!1,this.autoAnswer=!1,on.log("this.autoAnswer :"+this.autoAnswer)),this.screenStream!==null&&this.screenStream!==void 0&&(on.log("stopping screenStream"),this.stopStream(this.screenStream),Hn.createUserMediaStopEvent(null,"screen"))},this.startDataChannelOnCall=function(st){on.info("startDataChannelOnCall with callId :"+st);var Tt=this.findCallWithCallId(st);Tt?(on.log("Call found",Tt),Tt.addingDataChannelOnCallOngoing=!0,Tt.createDataChannel()):on.log("Call not found")},this.sendDataWithCallId=function(st,Tt,Rt){on.info("sendDataWithCallId :"+st);var Lt=this.findCallWithCallId(st);Lt?(on.log("Call found",Lt),Lt.sendData(Tt,Rt)):on.log("Call not found")},this.processDataAck=function(st){on.debug("processDataAck",st);var Tt=this.findCallWithCallId(st.callId);if(Tt)if(st.result==="ok")if((0,at.ki)(st,"capabilities","object")&&(0,at.ki)(st.capabilities,"dataEndAckEnabled","boolean")&&(Tt.dataEndAckEnabled=st.capabilities.dataEndAckEnabled,on.debug("dataEndAckEnabled",Tt.dataEndAckEnabled)),st.state==="complete")Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.success({state:"complete",filename:Tt.data.filename,size:Tt.data.size,mediaURL:st.mediaURL,mediaId:st.mediaId}),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId);else if(st.state==="incomplete"){var Rt,Lt,Et=131072,jt=[],Pt=Math.floor(Tt.data.size/Et),Vt=Tt.data.size%Et;for(Rt=0;Rt<Pt;Rt+=1)(Lt=jn("checksum64")).update(Tt.fileContent,Rt*Et,Et),jt.push(Lt.digest("hex"));if(Vt>0&&((Lt=jn("checksum64")).update(Tt.fileContent,Pt*Et,Vt),jt.push(Lt.digest("hex"))),on.debug(JSON.stringify(jt)),st.checksums.length===jt.length){for(Rt=0;Rt<jt.length&&st.checksums[Rt]===jt[Rt];Rt+=1);Tt.data.offset=Et*Rt}Tt.mediaURL=st.mediaURL,Tt.mediaId=st.mediaId,Tt.establishCall()}else st.state==="missing"?(Tt.mediaURL=st.mediaURL,Tt.mediaId=st.mediaId,Tt.establishCall()):st.state==="ready"?Tt.establishCall():(on.debug("wrong state "+st.state),Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId));else on.debug("wrong result "+st.result),Tt.beginTimeoutId&&(clearTimeout(Tt.beginTimeoutId),delete Tt.beginTimeoutId),Tt.callbacks.failure("serverError"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Tt.callId);else on.debug("no such call",st.callId)},this.processDataEndAck=function(st){on.debug("processDataEndAck",st);var Tt=this.findCallWithCallId(st.callId);if(Tt){var Rt=null;if(!Tt.dcfs){if(!Tt.data||Tt.data.transferType!=="pipeline")return void on.debug("not pipeline");on.debug("pipeline"),Rt=Tt,Tt.clientCall?(on.debug("resolve client call"),Tt=Tt.clientCall):(on.debug("no client call"),Tt=null)}Tt&&(Tt.success&&st.data&&(Tt.success.data=st.data),st.result==="ok"?(st.complete===!0||(delete Tt.success,Tt.failure="transferIncomplete"),Tt.dcfs.terminateTransfer()):st.result==="error"&&(delete Tt.success,Tt.failure=st.errorInfo,Tt.dcfs.terminateTransfer())),Rt&&st.result==="error"&&(on.debug("error on pipeline"),Rt.failure=st.errorInfo,Hn.createEvent({eventType:"onFileSended",callId:Rt.callId,remoteId:Rt.remoteId,name:Rt.filename,error:Rt.failure}),Rt.callbacks.failure(Rt.failure),this.onHangup(Rt.callId))}else on.debug("no such call",st.callId)},this.pushData=function(st,Tt,Rt,Lt){var Et=this;if(!(0,at.Ym)(Tt,"object")||((Tt=Object.assign({},Tt)).transferType||(Tt.transferType="file"),Tt.transferType==="file"&&!st)||Tt.transferType!=="file"&&Tt.transferType!=="pipeline"&&Tt.transferType!=="plugin"||!(Tt.transferType!=="plugin"||Tt.pluginName&&Tt.pluginData))return null;(0,at.Ym)(Lt,"object")||(Lt={}),typeof Lt.pending!="function"&&(Lt.pending=function(){}),typeof Lt.progress!="function"&&(Lt.progress=function(){}),typeof Lt.success!="function"&&(Lt.success=function(){}),typeof Lt.failure!="function"&&(Lt.failure=function(){});var jt=new vn(apiCC.session.apiCCWebRTCClient.webRTCClient);if(jt.generateCallId(),jt.instanceId=apiCC.generateInstanceId(),jt.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,jt.calleeId="dataChannelConnector",jt.dest_roomId="dataChannelConnector",jt.callType="data",jt.dataCall=!0,jt.remoteId="dataChannelConnector",Tt.pipelineCallId&&(jt.pipelineCallId=Tt.pipelineCallId),jt.data={},jt.data.pubSub="dataChannelConnector",jt.data.transferType=Tt.transferType,Tt.transferType==="pipeline"?(Tt.checksumEnabled=!1,jt.transferCount=0):Tt.transferType==="plugin"&&(Tt.checksumEnabled=!1,jt.data.pluginName=Tt.pluginName,jt.data.pluginData=Object.assign({},Tt.pluginData),jt.data.pluginData.headers&&(jt.data.pluginData.headers=Object.assign({},jt.data.pluginData.headers)),jt.data.pluginData.data&&(jt.data.pluginData.data=Object.assign({},jt.data.pluginData.data)),jt.data.pluginData.formData&&(jt.data.pluginData.formData=Object.assign({},jt.data.pluginData.formData))),(0,at.ki)(Tt,"context","object"))try{JSON.stringify(Tt.context),jt.data.context=Object.assign({},Tt.context)}catch{}if(Tt.overwrite===!0&&(jt.data.overwrite=!0),(0,at.Ym)(Tt,"ttl","number")&&Tt.ttl>0&&(jt.data.ttl=Tt.ttl),jt.data.instanceId=jt.instanceId,st&&(jt.data.cloudConvId=st),jt.callbacks=Lt,Rt!=null&&Rt.turnServerAddress!==void 0&&Rt.turnServerAddress!==null&&jt.setCallTurnServer(Rt.turnServerAddress),jt.data.transferType==="pipeline")jt.data.size=0,jt.pushDataStatus={type:"pipeline",state:"pending",data:Tt},this.callsTable.push(jt),setTimeout(function(){Et.startNextPushData()});else if((0,at.Ym)(Tt,"file","object")&&(Tt.file instanceof File||Tt.file.constructor===File||Tt.asFile===!0))(0,at.Ym)(Tt,"filename","string")?jt.data.filename=Tt.filename:jt.data.filename=Tt.file.name,(0,at.Ym)(Tt,"filetype","string")?jt.data.contentType=Tt.filetype:jt.data.contentType=Tt.file.type,(0,at.Ym)(Tt,"sourceType","string")&&Tt.sourceType.length>0&&(jt.data.sourceType=Tt.sourceType),jt.data.size=Tt.file.size,jt.data.metadata=Tt.metadata,jt.pushDataStatus={type:"file",state:"pending",convId:String(st),data:Tt},this.callsTable.push(jt),setTimeout(function(){Et.startNextPushData()});else{if(!(0,at.Ym)(Tt,"buffer","object")||!(Tt.buffer instanceof ArrayBuffer||Tt.buffer.constructor===ArrayBuffer||Tt.asBuffer===!0)||!(0,at.Ym)(Tt,"filename","string")||!(0,at.Ym)(Tt,"filetype","string"))return null;jt.data.filename=Tt.filename,jt.data.contentType=Tt.filetype,(0,at.Ym)(Tt,"sourceType","string")&&Tt.sourceType.length>0&&(jt.data.sourceType=Tt.sourceType),jt.data.size=Tt.buffer.byteLength,jt.data.metadata=Tt.metadata,jt.pushDataStatus={type:"buffer",state:"pending",convId:String(st),data:Tt},this.callsTable.push(jt),setTimeout(function(){Et.startNextPushData()})}return jt.callId},this.startNextPushData=function(){for(var st=this,Tt=[],Rt=0;Rt<this.callsTable.length;Rt+=1){var Lt=this.callsTable[Rt];if(Lt.callType==="data"&&Lt.dataCall&&Lt.remoteId==="dataChannelConnector"&&Lt.pushDataStatus){if(Lt.pushDataStatus.state==="ready")continue;Tt.push(Lt)}}if(Tt.length===0)return!1;var Et=null;Tt[0].pushDataStatus.state==="active"?Tt.splice(0,1):Tt[0].pushDataStatus.state==="pending"&&(Et=Tt[0],Tt.splice(0,1));for(var jt=0;jt<Tt.length;jt+=1){var Pt=Tt[jt];Pt.pushDataStatus.rank!==jt&&(Pt.pushDataStatus.rank=jt,Hn.createEvent({eventType:"onFilePending",callId:Pt.callId,remoteId:Pt.remoteId,name:Pt.data.filename,rank:jt}),Pt.callbacks.pending({state:"pending",callId:Pt.callId,rank:jt}))}if(!Et)return!1;on.debug("startNextPushData",Et.callId);var Vt=Et.pushDataStatus.data;if(delete Et.pushDataStatus.data,Et.pushDataStatus.type==="pipeline"){Et.pushDataStatus.state="active";var Zt={type:"pushData",callerId:apiCC.session.apiCCId,callId:Et.callId,data:Et.data},rn=JSON.stringify(Zt);return on.debug("C->S: "+rn),apiCC.session.channel.socket.emit("pushData",rn),!0}if(Et.pushDataStatus.type==="file"){Et.pushDataStatus.state="active";var Jt=new FileReader;Jt.onload=function(ln){apiCC.session.apiCCWebRTCClient.webRTCClient.startPushData(Et,Vt,ln.target.result)},Jt.readAsArrayBuffer(Vt.file)}else{if(Et.pushDataStatus.type!=="buffer")return on.error("startNextPushData - wrong type"),Et.callbacks.failure("start",Et.callId),this.onHangup(Et.callId),!1;Et.pushDataStatus.state="active",this.startPushData(Et,Vt,Vt.buffer)}return Et.beginTimeoutId=setTimeout(function(){delete Et.beginTimeoutId,Et.callbacks.failure("timeout",Et.callId),st.onHangup(Et.callId)},2e4),!0},this.startPushData=function(st,Tt,Rt){if(st.fileContent=new Uint8Array(Rt),st.pipelineCallId){var Lt=this.findCallWithCallId(st.pipelineCallId);if(!Lt)return on.error("no such pipeline call"),void this.onHangup(st.callId);st.pipelineCall=Lt,Lt.clientCall=st,st.sendDataChannel=Lt.sendDataChannel;var Et=Lt.transferCount===0?100:0;st.startTransfer({delay:Et}),Lt.transferCount+=1}else{if(!Object.prototype.hasOwnProperty.call(Tt,"checksumEnabled")||Tt.checksumEnabled){var jt=jn("checksum64");jt.update(st.fileContent),st.data.checksum=jt.digest("hex")}else st.data.checksumEnabled=!1;var Pt={type:"pushData",callerId:apiCC.session.apiCCId,convId:st.pushDataStatus.convId,callId:st.callId,data:st.data},Vt=JSON.stringify(Pt);on.debug("C->S: "+Vt),apiCC.session.channel.socket.emit("pushData",Vt)}},this.cancelPushData=function(st){for(var Tt=null,Rt=this.callsTable.length;--Rt>=0;){var Lt=this.callsTable[Rt];if(Lt.callId===st&&Lt.callType==="data"&&Lt.dataCall&&Lt.remoteId==="dataChannelConnector"&&Lt.pushDataStatus){Tt=Lt;break}}if(!Tt)return on.error("cancelPushData - no such call",st),"no such call";if(Tt.pushDataStatus.state==="pending")Hn.createEvent({eventType:"onFileSended",callId:Tt.callId,remoteId:Tt.remoteId,name:Tt.data.filename,error:"canceled"}),Tt.callbacks.failure("canceled"),this.onHangup(Tt.callId);else if(Tt.pushDataStatus.state==="active")this.onHangup(Tt.callId);else{if(Tt.pushDataStatus.state!=="ready")return on.error("cancelPushData - wrong state"),"wrong state";Tt.clientCall&&this.cancelPushData(Tt.clientCall.callId),Tt.success={state:"complete"},Hn.createEvent({eventType:"onFileSended",callId:Tt.callId,remoteId:Tt.remoteId}),Tt.callbacks.success(Tt.success),this.onHangup(Tt.callId)}return null},this.setVideoBandwidth=function(st,Tt,Rt){if(typeof st=="number"){var Lt=!1,Et=!1;if(Tt==="overall"?Rt==="incoming"?st>0?(this.videoBandwidthSettings.overallIncoming=st,Lt=!0):(delete this.videoBandwidthSettings.overallIncoming,Lt=!0):Rt==="outgoing"&&(st>0?(this.videoBandwidthSettings.overallOutgoing=st,Lt=!0,Et=!0):(delete this.videoBandwidthSettings.overallOutgoing,Lt=!0,Et=!0)):Tt==="perCall"?Rt==="incoming"?st>0?(this.videoBandwidthSettings.perCallIncoming=st,Lt=!0):(delete this.videoBandwidthSettings.perCallIncoming,Lt=!0):Rt==="outgoing"&&(st>0?(this.videoBandwidthSettings.perCallOutgoing=st,Lt=!0,Et=!0):(delete this.videoBandwidthSettings.perCallOutgoing,Lt=!0,Et=!0)):Tt==="remote"&&(this.videoRemoteBandwidth=st),Lt)for(var jt=this.MCUClient.sessionMCUs.length;--jt>=0;){var Pt={type:"info",infoType:"setVideoBandwidthSettings",data:{clientId:this.clientId,roomId:this.MCUClient.sessionMCUs[jt].roomName,pubSub:this.MCUClient.pubConnector,videoBandwidthSettings:this.videoBandwidthSettings}},Vt=JSON.stringify(Pt);on.log("C->S: "+Vt),apiCC.session.channel.socket.emit("info",Vt)}Et&&this.evalOutgoingVideoBandwithCap()}else on.error("Unvalid target bandwidth usage value needs to be a number :",st)},this.setAudioBandwidth=function(st){this.audioBandwidth=st},this.setDataBandwidth=function(st){this.dataBandwidth=st},this.processCheckCallStatus=function(st){this.MCUClient.processCheckCallStatus(st);var Tt={type:"updateCallStatus",clientId:this.clientId,data:{}};st.data.pubSub&&(Tt.data.pubSub=st.data.pubSub),Tt.sessions=[];for(var Rt=0;Rt<this.MCUClient.sessionMCUs.length;Rt+=1)Tt.sessions.push(this.MCUClient.createSessionDescriptor(this.MCUClient.sessionMCUs[Rt]));Tt.calls=[];for(var Lt=0;Lt<this.userMediaTable.length;Lt+=1){var Et=this.userMediaTable[Lt];Tt.calls.push({callId:Et.userMediaId,callType:Et.callType,remoteId:Et.remoteId,roomId:Et.roomId,data:Et.data,meshPublish:!0})}for(var jt=0;jt<this.callsTable.length;jt+=1){var Pt=this.callsTable[jt];Tt.calls.push({callId:Pt.callId,callType:Pt.callType,remoteId:Pt.remoteId,roomId:Pt.roomId,data:Pt.data,remoteStream:Pt.mcuRemoteStream})}var Vt=JSON.stringify(Tt);apiCC.session.channel.socket.emit("updateCallStatus",Vt)},this.processRemoteStreamAdded=function(st,Tt){if(st.sessionMCU&&st.sessionMCU.modeChangeKind==="new"){on.debug("processRemoteStreamAdded",st);var Rt=this.MCUClient.getSessionMCU(null,{callback:function(Et){return Et.roomName===st.sessionMCU.roomName&&Et.modeChangeKind==="old"}});if(!Rt)return void on.error("wrong roomId: no such old session");on.debug("oldSessionMCU",Rt);for(var Lt=this.callsTable.length;--Lt>=0;)if(this.callsTable[Lt].sessionMCU===Rt&&(0,at.ki)(this.callsTable[Lt],["mcuRemoteStream","attributes","callId"],"string")&&this.callsTable[Lt].mcuRemoteStream.attributes.callId===st.mcuRemoteStream.attributes.callId){on.debug("processRemoteStreamAdded: bye",this.callsTable[Lt]),this.removeCallFromTableWithCallIdAndSendBye(this.callsTable[Lt].callId);break}}},this.processDistantCallEstablished=function(st){if(on.debug("processDistantCallEstablished",st),(0,at.ki)(st,["descriptor","callFeed","callId"],"string"))if(st.descriptor.callFeed.clientId===this.clientId){var Tt=null;if(st.descriptor.callMode==="mesh"?Tt=this.MCUClient.getSessionMCU(null,{callback:function(Pn){return Pn.roomName===st.descriptor.roomId&&Pn.roomMode==="mesh"}}):st.descriptor.callMode==="sfu"&&(Tt=this.MCUClient.getSessionMCU(null,{callback:function(Pn){return Pn.roomName===st.descriptor.roomId&&!Pn.hasOwnProperty("roomMode")}})),Tt){on.debug("sessionMCU",Tt);var Rt=null,Lt=null;if(st.descriptor.callMode==="mesh"?(Rt=this.findUserMediaById(st.descriptor.callFeed.callId),on.debug("userMedia",Rt)):(Lt=this.findCallWithCallId(st.descriptor.callFeed.callId),on.debug("call",Lt)),st.active){if(!Rt&&!Lt)return void on.debug("wrong callId: no such call");for(var Et=this.MCUClient.distantCalls.length;--Et>=0&&(this.MCUClient.distantCalls[Et].roomId!==st.descriptor.roomId||this.MCUClient.distantCalls[Et].clientId!==st.descriptor.clientId||this.MCUClient.distantCalls[Et].callId!==st.descriptor.callId););if(Et>=0){if(!this.MCUClient.distantCalls[Et].early)return void on.debug("processDistantCallEstablished: descriptor already exists");on.debug("processDistantCallEstablished: replace early descriptor",this.MCUClient.distantCalls[Et],st.descriptor),this.MCUClient.distantCalls[Et]=st.descriptor}else on.debug("processDistantCallEstablished: add descriptor",st.descriptor),this.MCUClient.distantCalls.push(st.descriptor)}else if(Tt.modeChangeKind==="old"){for(var jt=this.MCUClient.distantCalls.length;--jt>=0;)if(this.MCUClient.distantCalls[jt].roomId===st.descriptor.roomId&&this.MCUClient.distantCalls[jt].clientId===st.descriptor.clientId&&this.MCUClient.distantCalls[jt].callId===st.descriptor.callId){on.debug("processDistantCallEstablished: set descriptor to removed",this.MCUClient.distantCalls[jt]),this.MCUClient.distantCalls[jt].removed=!0;break}}else for(var Pt=this.MCUClient.distantCalls.length;--Pt>=0;)if(this.MCUClient.distantCalls[Pt].roomId===st.descriptor.roomId&&this.MCUClient.distantCalls[Pt].clientId===st.descriptor.clientId&&this.MCUClient.distantCalls[Pt].callId===st.descriptor.callId){on.debug("processDistantCallEstablished: remove descriptor",this.MCUClient.distantCalls[Pt]),this.MCUClient.distantCalls.splice(Pt,1);break}if(Tt.modeChangeKind==="new"){var Vt=this.MCUClient.getSessionMCU(null,{callback:function(Pn){return Pn.roomName===st.descriptor.roomId&&Pn.modeChangeKind==="old"}});if(!Vt)return void on.error("wrong roomId: no such old session");on.debug("oldSessionMCU",Vt),on.debug("processDistantCallEstablished: replacement");for(var Zt=!1,rn=this.userMediaTable.length;--rn>=0;){var Jt=this.userMediaTable[rn];if(Jt.sessionMCU===Vt){var ln=!1,mn=0;on.debug("processDistantCallEstablished: userMedia",Jt);for(var an=Jt.distantCalls.length;--an>=0;)Jt.distantCalls[an].replaced?mn+=1:Jt.distantCalls[an].callFeed.callId===st.descriptor.callFeed.callId&&(on.debug("processDistantCallEstablished: distantCall",Jt.distantCalls[an]),ln=!0,Jt.distantCalls[an].replaced=!0,mn+=1);if(ln){if(mn===Jt.distantCalls.length){on.debug("processDistantCallEstablished: remove replaced distant call descriptors");for(var hn=this.MCUClient.distantCalls.length;--hn>=0;)this.MCUClient.distantCalls[hn].callMode==="mesh"&&this.MCUClient.distantCalls[hn].callFeed.callId===Jt.userMediaId&&this.MCUClient.distantCalls[hn].replaced&&(on.debug("processDistantCallEstablished: remove distantCall",this.MCUClient.distantCalls[hn]),this.MCUClient.distantCalls.splice(hn,1));on.debug("processDistantCallEstablished: close old calls");for(var En=this.callsTable.slice(),Mn=En.length;--Mn>=0;)(0,at.ki)(En[Mn].data,"mesh","object")&&En[Mn].data.mesh.calleeCallId===Jt.userMediaId&&En[Mn].settingUpType!=="subscribe"&&this.removeCallFromTableWithCallIdAndSendBye(En[Mn].callId);this.MCUClient.meshOnHangup(Jt.userMediaId),Zt=!0}break}}}Zt&&this.finalizeMeshToJanusTransition(Vt,Tt)}}else on.debug("wrong roomId: no such session")}else on.debug("wrong clientId: message not intended for self");else on.debug("wrong format: missing callFeed")},this.finalizeMeshToJanusTransition=function(st,Tt){var Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};on.debug("finalizeMeshToJanusTransition");var Lt=0,Et=0;if(Rt.force===!0){for(var jt=this.callsTable.slice(),Pt=jt.length;--Pt>=0;){var Vt=jt[Pt];Vt.sessionMCU===st&&((Vt.settingUpType==="publish"||Vt.settingUpType==="shareScreen")&&Vt.data&&Vt.data.mesh?this.onHangup(Vt.callId):this.onHangup(Vt.callId,"disconnected"))}for(var Zt=this.userMediaTable.slice(),rn=Zt.length;--rn>=0;){var Jt=Zt[rn];Jt.sessionMCU===st&&this.onHangup(Jt.userMediaId,"disconnected")}}else for(var ln=this.userMediaTable.length;--ln>=0;){var mn=this.userMediaTable[ln];if(mn.sessionMCU===st){Lt+=1;for(var an=0,hn=mn.distantCalls.length;--hn>=0;)on.debug("finalizeMeshToJanusTransition: distantCall",mn.distantCalls[hn]),mn.distantCalls[hn].replaced&&(an+=1);an===mn.distantCalls.length&&(Et+=1)}}Lt===Et&&(on.debug("finalizeMeshToJanusTransition: finalize transition"),Tt.transitionTimeoutId&&(clearTimeout(Tt.transitionTimeoutId),delete Tt.transitionTimeoutId),this.MCUClient.removeSessionMCU(st),delete Tt.modeChangeKind,this.MCUClient.transitionCount-=1,this.MCUClient.transitionCount<=0&&this.evalOutgoingVideoBandwithCap(),Hn.createMCURoomModeChangedEvent(Tt.roomName,"mesh","sfu","complete"))},this.processConfigureEncodings=function(st){var Tt=this.findCallWithCallId(st.callId);if(Tt&&Object.prototype.hasOwnProperty.call(st,"command")&&Tt.simulcast==="RID"){var Rt={};Object.prototype.hasOwnProperty.call(st,"maxBitrate")&&(Rt.maxBitrate=st.maxBitrate),Tt.configureSimulcastEncodings(st.command,Rt)}},this.processSimulcastFeedChanged=function(st){var Tt=this.findCallWithCallId(st.callId);if(Tt){var Rt={};st.substream===2?Rt.streamQuality="high":st.substream===1?Rt.streamQuality="medium":st.substream===0&&(Rt.streamQuality="low"),st.temporal===2?Rt.streamFrameRate="high":st.temporal===1?Rt.streamFrameRate="medium":st.temporal===0&&(Rt.streamFrameRate="low"),Object.keys(Rt).length>0&&Hn.createSimulcastFeedChanged(Tt.callId,Rt)}},this.hasReceiptHook=function(st){if(!st||typeof st!="string")throw new Error("wrong receiptId");return Object.prototype.hasOwnProperty.call(this.receiptHooks,st)},this.createReceiptHook=function(st,Tt){var Rt=this;if(this.hasReceiptHook(st))throw new Error("receiptHook already exists");if(!Tt||Tt.fulfilled!==!1)throw new Error("wrong future");Tt.onFulfillment(function(){delete Rt.receiptHooks[st]}),this.receiptHooks[st]=Tt},this.finalizeReceiptHookFailure=function(st,Tt){if(on.debug("finalizeReceiptHookFailure",st,Tt),!st||typeof st!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,st))throw new Error("receiptHook does not exist");this.receiptHooks[st].fulfill(Tt)},this.finalizeReceiptHookSuccess=function(st,Tt){if(on.debug("finalizeReceiptHookSuccess",st,Tt),!st||typeof st!="string")throw new Error("wrong receiptId");if(!Object.prototype.hasOwnProperty.call(this.receiptHooks,st))throw new Error("receiptHook does not exist");this.receiptHooks[st].fulfill(null,Tt)},this.processReceipt=function(st){if(st&&Qn(st)==="object"){var Tt=st.receiptId,Rt=st.result;if(Tt&&typeof Tt=="string")try{this.finalizeReceiptHookSuccess(Tt,Rt)}catch(Lt){on.debug("processReceipt: finalizeReceiptHookSuccess",Lt)}else on.warn("processReceipt: wrong receiptId")}else on.warn("processReceipt: wrong msg")},this.processError=function(st){var Tt=st.receiptId,Rt=st.errorInfo,Lt=st.errorCode,Et=st.callId,jt=st.roomId,Pt=st.convId;if(Tt&&typeof Tt=="string")try{this.finalizeReceiptHookFailure(Tt,new Error(Rt))}catch(Vt){on.debug("processError: finalizeReceiptHookFailure",Vt)}Hn.createErrorEvent(Rt,Lt,Et,jt,null,null,Pt)},this.createCallControl=function(st){var Tt=new Yn(st);return this.callControlTable.push(Tt),Tt},this.destroyCallControl=function(st){if(st.multi){if(!st.roomName)return on.warn("findCallControl: cannot destroy without roomName"),null;for(var Tt=[],Rt=this.callControlTable.length;--Rt>=0;)this.callControlTable[Rt].roomName===st.roomName&&(Tt.push(this.callControlTable[Rt]),this.callControlTable.splice(Rt,1));return Tt}var Lt=this.findCallControl(st,{accept:"index"});if(Lt!==null&&Lt>=0){var Et=this.callControlTable[Lt];return this.callControlTable.splice(Lt,1),Et}return null},this.findCallControl=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt=Tt.accept==="index";if(st.type==="publish"||st.type==="shareScreen"){if(!st.callId)return on.warn("findCallControl: cannot search without callId"),null;for(var Lt=null,Et=null,jt=this.callControlTable.length;--jt>=0;)if((this.callControlTable[jt].type==="publish"||this.callControlTable[jt].type==="shareScreen")&&this.callControlTable[jt].callId===st.callId){Lt=this.callControlTable[jt],Et=jt;break}return Lt?Rt?Et:Lt:null}if(st.type==="subscribe"){if(!(0,at.ki)(st,"stream","object")||!Object.prototype.hasOwnProperty.call(st.stream,"id")||!(0,at.ki)(st.stream,"attributes","object"))return on.warn("findCallControl: cannot search without stream"),null;for(var Pt=null,Vt=null,Zt=this.callControlTable.length;--Zt>=0;)if(this.callControlTable[Zt].type==="subscribe"&&(this.callControlTable[Zt].stream.id===st.stream.id||this.callControlTable[Zt].stream.attributes.callerId===st.stream.attributes.callerId&&this.callControlTable[Zt].stream.attributes.callId===st.stream.attributes.callId)){Pt=this.callControlTable[Zt],Vt=Zt;break}return Pt?Rt?Vt:Pt:null}return on.warn("findCallControl: wrong type",st.type),null},this.getCallControls=function(st){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Rt={};if(Tt.addUserMedia)for(var Lt=this.userMediaTable.length;--Lt>=0;){var Et=this.userMediaTable[Lt];Rt[Et.userMediaId]=Et}if(st){for(var jt=this.callControlTable.length;--jt>=0;){var Pt=this.callControlTable[jt];st.indexOf(Pt.type)>=0&&(Rt[Pt.callId]=Pt)}return Rt}for(var Vt=this.callControlTable.length;--Vt>=0;){var Zt=this.callControlTable[Vt];Rt[Zt.callId]=Zt}return Rt},this.getCallIds=function(st){for(var Tt=[],Rt=this.callControlTable.length;--Rt>=0;){var Lt=this.callControlTable[Rt];st.indexOf(Lt.type)>=0&&Tt.push(Lt.callId)}return Tt},this.evalOutgoingVideoBandwithCap=function(st){if(on.debug("evalOutgoingVideoBandwithCap"),!(this.MCUClient.transitionCount>0)){var Tt=null;this.videoBandwidthSettings.perCallOutgoing&&(Tt=this.videoBandwidthSettings.perCallOutgoing);for(var Rt=[],Lt=this.callsTable.length;--Lt>=0;)this.callsTable[Lt].belongsToRoom()&&this.callsTable[Lt].settingUpType!=="publish"&&this.callsTable[Lt].settingUpType!=="shareScreen"||this.callsTable[Lt].localCallProfile&&this.callsTable[Lt].localCallProfile.video&&this.callsTable[Lt].localCallProfile.videoActive&&Rt.push(this.callsTable[Lt]);if(Rt.length===0)return Tt;if(this.videoBandwidthSettings.overallOutgoing){var Et=Math.floor(this.videoBandwidthSettings.overallOutgoing/Rt.length);Tt=Tt?Math.min(Tt,Et):Et}for(var jt=Rt.length;--jt>=0;)st&&Rt[jt]===st?Tt&&Rt[jt].videoCap!==Tt?(Rt[jt].videoCap=Tt,this.rtpSenderSetParamatersCapable&&Rt[jt].applyOutgoingBitrate(Rt[jt].videoCap)):!Tt&&Rt[jt].videoCap&&(delete Rt[jt].videoCap,this.rtpSenderSetParamatersCapable&&Rt[jt].applyOutgoingBitrate(null)):Tt&&Rt[jt].videoCap!==Tt?(Rt[jt].videoCap=Tt,this.rtpSenderSetParamatersCapable?Rt[jt].applyOutgoingBitrate(Rt[jt].videoCap):setTimeout(function(Pt){Pt.belongsToRoom()||!Pt.callee?(Pt.updateUserMedia=!0,Pt.establishCall()):on.debug("Call is not to be updated")},0,Rt[jt])):!Tt&&Rt[jt].videoCap&&(delete Rt[jt].videoCap,this.rtpSenderSetParamatersCapable?Rt[jt].applyOutgoingBitrate(null):setTimeout(function(Pt){Pt.belongsToRoom()||!Pt.callee?(Pt.updateUserMedia=!0,Pt.establishCall()):on.debug("Call is not to be updated")},0,Rt[jt]));return Tt}on.debug("evalOutgoingVideoBandwithCap - transition ongoing")},this.callback=function(st,Tt){return this.closureHandler=function(Rt){return st[Tt](Rt)},this.closureHandler},this.callbackWithParams=function(st,Tt){return this.closureHandler=function(Rt,Lt,Et){return st[Tt](Rt,Lt,Et)},this.closureHandler},this.simulatedAgentLaunchWaitingCall=function(){this.socket.emit("simulatedAgentLaunchWaitingCall",{type:"simulatedAgentLaunchWaitingCall"})}},Bn=(s(2707),et.Y.get("PreCallTest")),qn=125e3,Gn=2e4,_n=apiCC.myWebRTC_Event,$n=function(Yt,kt,st,Tt,Rt){var Lt=this;this.webRTCClient=Yt.webRTCClient,this.notifyTerminated=Yt.notifyTerminated,this.audioSourceId=Tt,this.videoSourceId=Rt,this.testId="initial",this.stepId="initial",this.report={tests:[],resolutions:[],failurCause:""},this.maxHeight=240,this.maxWidth=320,this.resolutions=[[320,240,"QVGA"],[640,480,"VGA"],[1024,576,"SD"],[1280,720,"HD 720p"],[1920,1080,"HD 1080p"]],this.currentResolution=0,this.userMediastreamId=null,st==="simpleVideoRecordTest"&&(Bn.warn("Simple video record test is activated"),this.simpleVideoRecordTest=!0),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled===!0&&(Bn.debug("Forcing meshModeEnabled to false for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!1,this.modifyMeshModeEnabledValueBeforePreCall=!0),this.generateId=function(Et){for(var jt="",Pt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Vt=0;Vt<Et;Vt+=1)jt+=Pt.charAt(Math.floor(Math.random()*Pt.length));return jt},this.generateRoomId=function(){return"PC-"+this.generateId(4)+"-"+this.generateId(4)+"-"+this.generateId(4)},this.pushStats=function(Et,jt){return Et.data.push(jt),!0},this.evalQuartiles=function(Et,jt,Pt){var Vt=[];if(Pt===void 0?Et.forEach(function(Sr){typeof Sr[jt]=="number"&&Vt.push(Sr[jt])}):Et.forEach(function(Sr){Vt.push(Pt(Sr[jt]))}),Vt.sort(function(Sr,_r){return Sr<_r?-1:Sr===_r?0:1}),Vt.length%2==0){var Zt=Vt.length/2,rn=Math.floor((Vt[Zt-1]+Vt[Zt])/2);if(Zt%2==0){var Jt=Zt/2,ln=Math.floor((Vt[Jt-1]+Vt[Jt])/2),mn=Zt+Jt,an=Math.floor((Vt[mn-1]+Vt[mn])/2);return{min:Vt[0],firstQuartile:ln,median:rn,thirdQuartile:an,max:Vt[Vt.length-1]}}var hn=Math.floor(Zt/2),En=Vt[hn],Mn=Vt[Zt+hn];return{min:Vt[0],firstQuartile:En,median:rn,thirdQuartile:Mn,max:Vt[Vt.length-1]}}var Pn=Math.floor(Vt.length/2),Wn=Vt[Pn];if((Pn+1)%2==0){var Nn=(Pn+1)/2,Jn=Math.floor((Vt[Nn-1]+Vt[Nn])/2),rr=Pn+Nn,hr=Math.floor((Vt[rr-1]+Vt[rr])/2);return{min:Vt[0],firstQuartile:Jn,median:Wn,thirdQuartile:hr,max:Vt[Vt.length-1]}}var cr=Math.floor(Pn/2),dr=Vt[cr],Cr=Vt[Pn+cr];return{min:Vt[0],firstQuartile:dr,median:Wn,thirdQuartile:Cr,max:Vt[Vt.length-1]}},this.runBitRateTest=function(){apiCC.webRTCCompliant?(Bn.debug("Run bitrate test"),this.testId==="initial"&&(this.handlers=[{type:"joinMCUSessionAnswer",callback:this.handleJoinMCUSessionAnswer.bind(this)},{type:"MCUAvailableStream",callback:this.handleMCUAvailableStream.bind(this)},{type:"onCallStatsUpdate",callback:this.handleOnCallStatsUpdate.bind(this)},{type:"remoteStreamAdded",callback:this.handleRemoteStreamAdded.bind(this)},{type:"userMediaSuccess",callback:this.handleuserMediaSuccess.bind(this)},{type:"MCURecordedStreamsAvailable",callback:this.handleRecordingStreamAvailable.bind(this)}],this.handlers.forEach(function(Et){apiRTC.addEventListener(Et.type,Et.callback)}),this.webRTCClient.setMCUConnector("mcu4.apizee.com"),this.webRTCClient.setAllowMultipleCalls(!0),this.webRTCClient.enableCallStatsMonitoring(!0,1e3),this.webRTCClient.enableQualityEvaluating(!0,1e3),this.startNextTest())):(this.report.failurCause="Your device is not WebRTC Compliant",this.terminate())},this.startNextTest=function(){if(this.simpleVideoRecordTest===!0)this.testId==="initial"?(Bn.debug("initial simple test"),kt?this.runResolutionTest():this.startTestAudioNlVideo(2e3)):this.testId==="resolution-test"?(Bn.debug("resolution-test simple"),this.startTestAudioNlVideo(2e3)):this.testId==="audio-and-video-2000"&&(Bn.debug("Before recordThenTerminate simple"),this.recordThenTerminate());else if(this.testId==="initial")kt?this.runResolutionTest():this.startTestAudioNlVideo(st);else if(this.testId==="resolution-test")this.startTestAudioNlVideo(st);else if(this.testId==="audio-and-video-"+st)if(this.report[this.testId].status==="success"){var Et=this.report[this.testId].subscribeCallIds[0],jt=this.stats[Et].videoReceived;jt.bitsReceivedPerSecond.max!==void 0&&jt.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():jt.bitsReceivedPerSecond.max>=15e5?this.startTestAudioNlVideo(1500):jt.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):jt.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):jt.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1500")if(this.report[this.testId].status==="success"){var Pt=this.report[this.testId].subscribeCallIds[0],Vt=this.stats[Pt].videoReceived;Vt.bitsReceivedPerSecond.max!==void 0&&Vt.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():Vt.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):Vt.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):Vt.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-1000")if(this.report[this.testId].status==="success"){var Zt=this.report[this.testId].subscribeCallIds[0],rn=this.stats[Zt].videoReceived;rn.bitsReceivedPerSecond.max!==void 0&&rn.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():rn.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):rn.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-600")if(this.report[this.testId].status==="success"){var Jt=this.report[this.testId].subscribeCallIds[0],ln=this.stats[Jt].videoReceived;ln.bitsReceivedPerSecond.max!==void 0&&ln.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():ln.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(this.testId==="audio-and-video-250")if(this.report[this.testId].status==="success"){var mn=this.report[this.testId].subscribeCallIds[0],an=this.stats[mn].videoReceived;an.bitsReceivedPerSecond.max!==void 0&&an.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else this.recordThenTerminate()},this.startTestAudioNlVideo=function(Et){this.prepareEnvForNewTest(),Bn.debug("%ctestAudioNlVideo"+Et),this.testId="audio-and-video-"+Et,this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!0,this.videoBandwidth=Et,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!0,videoLimited:!0,videoBandwidth:this.videoBandwidth,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Gn)},this.startTestAudioNlOnly=function(){this.prepareEnvForNewTest(),Bn.debug("%cstartTestAudioNlOnly"),this.testId="audio-only",this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!1,this.webRTCClient.setRemoteVideoBandwidth(null),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!1,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Gn)},this.startTestVideoNlOnly=function(){this.prepareEnvForNewTest(),Bn.debug("%cstartTestVideoNlOnly"),this.testId="video-only",this.report.tests.push(this.testId),this.audioEnabled=!1,this.videoEnabled=!0,this.videoBandwidth=600,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!1,audioLimited:!1,videoEnabled:!0,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId="joining-mcu-session",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),Gn)},this.recordThenTerminate=function(){Lt.modifyMeshModeEnabledValueBeforePreCall===!0&&(Bn.debug("Restoring meshModeEnabled to true, as it was modified for precall test"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!0);var Et=null;if(Lt.videoEnabled&&Lt.audioEnabled?Et="AUDIO-VIDEO":Lt.audioEnabled?Et="AUDIO-ONLY":Lt.videoEnabled&&(Et="VIDEO-ONLY"),!Et)return Bn.error("Can't define record type"),void Lt.terminate();Bn.debug("Start recording with type:",Et),Lt.webRTCClient.startRecording(Et,"recordPreCall",null,null,{ttl:900}),setTimeout(function(){Bn.debug("Stop recording"),Lt.webRTCClient.stopRecording()},1e4)},this.terminate=function(){Bn.debug("Terminate"),this.testId="terminated",this.handlers&&this.handlers.forEach(function(Et){apiRTC.removeEventListener(Et.type,Et.callback)}),this.notifyTerminated(this.report),this.leaveSession()},this.succeed=function(){_n.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"success",stepId:this.stepId}),this.report[this.testId].status="success",this.startNextTest()},this.fail=function(){Bn.debug("fail"),_n.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId}),this.report[this.testId].status="failure",this.report[this.testId].stepId=this.stepId,this.leaveSession(),this.startNextTest()},this.prepareEnvForNewTest=function(){Lt.mcuSession!==void 0&&Lt.leaveSession()},this.abortJoinMCUSession=function(){Bn.debug("abortJoinMCUSession"),this.fail()},this.abortStreamPublishing=function(){Bn.debug("abortStreamPublishing"),this.fail()},this.abortStreamSubscribing=function(){Bn.debug("abortStreamSubscribing"),this.fail()},this.observeStreamPublished=function(){if(Bn.debug("observeStreamPublished"),apiRTC.browser==="Safari"||apiRTC.browser==="Mobile Safari")return Bn.info("Safari"),Bn.error("observeStreamPublished not supported on Safari"),clearInterval(this.intervalId),void this.fail();if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.fail();if(this.audioEnabled&&this.videoEnabled){var Et=0;if(this.stats[this.publishCallId]!==void 0&&(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4&&(Et+=1),this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=qn&&(Et+=1)),Et===2){clearInterval(this.intervalId);var jt=this.streams[0];this.subscribeToUserStream(jt.attributes.callerId,jt.id,"VIDEO"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Gn)}else Bn.debug("okCnt !== 2")}else if(this.audioEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].audioSent!==void 0&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4){clearInterval(this.intervalId);var Pt=this.streams[0];this.subscribeToUserStream(Pt.attributes.callerId,Pt.id,"AUDIOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Gn)}else Bn.debug("no stats audio 1 ");else Bn.debug("no stats audio 2");else Bn.debug("no stats audio 3");else if(this.videoEnabled)if(this.stats[this.publishCallId]!==void 0)if(this.stats[this.publishCallId].videoSent!==void 0&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond!==void 0)if(this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=qn){clearInterval(this.intervalId);var Vt=this.streams[0];this.subscribeToUserStream(Vt.attributes.callerId,Vt.id,"VIDEOONLY"),this.stepId="stream-subscribing",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),Gn)}else Bn.debug("no stats video 1 ");else Bn.debug("no stats video 2");else Bn.debug("no stats video 3");else Bn.debug("no audio or video"),clearInterval(this.intervalId),this.fail()},this.observeStreamSubscribed=function(){if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.succeed();var Et=null,jt=null,Pt=0,Vt=0;this.audioEnabled&&(Et=this.stats[this.publishCallId].audioSent),this.videoEnabled&&(jt=this.stats[this.publishCallId].videoSent);for(var Zt=0;Zt<this.subscribeCallIds.length;Zt+=1){var rn=this.subscribeCallIds[Zt];if(this.audioEnabled&&this.videoEnabled){var Jt=0;this.stats[rn]!==void 0&&(this.stats[rn].audioReceived!==void 0&&this.stats[rn].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[rn].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile-2e3&&(Jt+=1),this.stats[rn].videoReceived!==void 0&&this.stats[rn].videoReceived.bitsReceivedPerSecond!==void 0&&jt!=null&&jt.bitsSentPerSecond!==void 0&&this.stats[rn].videoReceived.bitsReceivedPerSecond.thirdQuartile>=jt.bitsSentPerSecond.firstQuartile&&(Jt+=1)),Jt===2&&(Pt+=1)}else this.audioEnabled?this.stats[rn]!==void 0&&this.stats[rn].audioReceived!==void 0&&this.stats[rn].audioReceived.bitsReceivedPerSecond!==void 0&&Et!=null&&Et.bitsSentPerSecond!==void 0&&this.stats[rn].audioReceived.bitsReceivedPerSecond.thirdQuartile>=Et.bitsSentPerSecond.firstQuartile&&(Pt+=1):Vt+=1}Vt>0?(clearInterval(this.intervalId),this.fail()):Pt===this.subscribeCallIds.length&&(clearInterval(this.intervalId),this.succeed())},this.handleJoinMCUSessionAnswer=function(Et){if(this.stepId==="joining-mcu-session"){if(_n.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),clearTimeout(this.timeoutId),this.mcuSession.sessionId=Et.detail.sessionId,this.mcuSession.token=Et.detail.token,this.audioEnabled&&this.videoEnabled){var jt=this,Pt={audio:{},video:{}};Pt=apiCC.setResolutionInConstraint(this.maxWidth,this.maxHeight,Pt),Bn.debug("constraints :",Pt),apiRTC.createUserMediaStream({type:"media",audioSourceId:this.audioSourceId,videoSourceId:this.videoSourceId,gum_config:Pt,release:function(Vt){Bn.debug("createUserMediaStream release",Vt.userMediaStreamId)},success:function(Vt){Bn.debug("createUserMediaStream success",Vt.userMediaStreamId),Bn.debug("audioSourceId",Tt),Bn.debug("videoSourceId",Rt)},failure:function(Vt,Zt){Bn.error("createUserMediaStream failure",Vt.userMediaStreamId),Bn.error("failure; userMediaStreamId: "+Vt.userMediaStreamId),Bn.error("failure; error: "+Zt),_n.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"failure",stepId:this.stepId,createUserMediaStreamError:Zt}),jt.terminate()}})}else if(this.audioEnabled)this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{audioOnly:!0});else{if(!this.videoEnabled)return void this.fail();this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{videoOnly:!0,qos:{videoStartQuality:"upper"}})}this.subscribeCallIds=[],this.report[this.testId].publishCallId=this.publishCallId,this.report[this.testId].subscribeCallIds=[],this.streams=[],this.stepId="stream-publishing",this.timeoutId=setTimeout(this.abortStreamPublishing.bind(this),Gn)}},this.handleuserMediaSuccess=function(Et){var jt={userMediaStreamId:Et.detail.userMediaStreamId,qos:{videoStartQuality:"upper"}};this.userMediastreamId=Et.detail.userMediaStreamId,this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,jt),this.report[this.testId].publishCallId=this.publishCallId},this.handleRecordingStreamAvailable=function(Et){Bn.debug("handleRecordingStreamAvailable"),this.terminate()},this.handleMCUAvailableStream=function(Et){if(this.stepId==="stream-publishing"&&Et.detail.isRemoteStream===!1)for(var jt=0;jt<Et.detail.streams.length;jt+=1){var Pt=Et.detail.streams[jt];if(Pt.room===this.mcuSession.roomId&&Pt.attributes.callId===this.publishCallId&&this.stepId==="stream-publishing"){if(clearTimeout(this.timeoutId),this.stepId="stream-published",this.streams.push(Pt),this.simpleVideoRecordTest===!0){var Vt="VIDEO";Pt.audio===!1&&(Vt="VIDEOONLY"),Pt.video===!1&&(Vt="AUDIOONLY"),this.subscribeToUserStream(Pt.attributes.callerId,Pt.id,Vt),this.stepId="stream-subscribing"}else this.intervalId=setInterval(this.observeStreamPublished.bind(this),1e3);this.intervalCounter=0}}},this.handleRemoteStreamAdded=function(Et){this.stepId==="stream-subscribing"&&this.subscribeCallIds.find(function(jt){return jt===Et.detail.callId})!==void 0&&(clearTimeout(this.timeoutId),this.stepId="stream-subscribed",this.intervalId=setInterval(this.observeStreamSubscribed.bind(this),1e3),this.intervalCounter=0)},this.handleOnCallStatsUpdate=function(Et){var jt=this;if(this.stepId!=="stream-published"&&this.stepId!=="stream-subscribing"&&this.stepId!=="stream-subscribed"||(this.stats[this.publishCallId]===void 0&&(this.stats[this.publishCallId]={}),Et.detail.stats.audioSent!==void 0&&(this.stats[this.publishCallId].audioSent===void 0&&(this.stats[this.publishCallId].audioSent={startTime:Et.detail.stats.audioSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].audioSent,Et.detail.stats.audioSent)?this.stats[this.publishCallId].audioSent.data.length>=5&&["bitsSentPerSecond","packetsSentPerSecond"].forEach(function(rn){var Jt=jt.evalQuartiles(jt.stats[jt.publishCallId].audioSent.data,rn);Jt.sampleCount=jt.stats[jt.publishCallId].audioSent.data.length,Jt.time=Et.detail.stats.audioSent.timestamp-jt.stats[jt.publishCallId].audioSent.startTime,jt.stats[jt.publishCallId].audioSent[rn]=Jt}):Bn.debug("audio stats not pushed for :",this.publishCallId)),Et.detail.stats.videoSent!==void 0&&(this.stats[this.publishCallId].videoSent===void 0&&(this.stats[this.publishCallId].videoSent={startTime:Et.detail.stats.videoSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].videoSent,Et.detail.stats.videoSent)?this.stats[this.publishCallId].videoSent.data.length>=5&&(["bitsSentPerSecond","packetsSentPerSecond","framesEncodedPerSecond"].forEach(function(rn){var Jt=jt.evalQuartiles(jt.stats[jt.publishCallId].videoSent.data,rn);Jt.sampleCount=jt.stats[jt.publishCallId].videoSent.data.length,Jt.time=Et.detail.stats.videoSent.timestamp-jt.stats[jt.publishCallId].videoSent.startTime,jt.stats[jt.publishCallId].videoSent[rn]=Jt}),this.stats[this.publishCallId].videoSent.width=Et.detail.stats.videoSent.width,this.stats[this.publishCallId].videoSent.height=Et.detail.stats.videoSent.height):Bn.debug("video stats not pushed for :",this.publishCallId))),this.stepId==="stream-subscribed")for(var Pt=function(rn){Zt=0;var Jt=jt.subscribeCallIds[rn];jt.stats[Jt]===void 0&&(jt.stats[Jt]={}),Et.detail.stats.audioReceived!==void 0&&(jt.stats[Jt].audioReceived===void 0&&(jt.stats[Jt].audioReceived={startTime:Et.detail.stats.audioReceived.timestamp,data:[]}),jt.pushStats(jt.stats[Jt].audioReceived,Et.detail.stats.audioReceived)?(Zt=jt.stats[Jt].audioReceived.data.length,jt.stats[Jt].audioReceived.data[Zt-1].mosS===void 0&&(jt.stats[Jt].audioReceived.data[Zt-1].mosS={}),jt.stats[Jt].audioReceived.data[Zt-1].mosS=Et.detail.stats.quality.mosS,jt.stats[Jt].audioReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","delay"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].audioReceived.data,ln);mn.sampleCount=jt.stats[Jt].audioReceived.data.length,mn.time=Et.detail.stats.audioReceived.timestamp-jt.stats[Jt].audioReceived.startTime,jt.stats[Jt].audioReceived[ln]=mn}),jt.stats[Jt].audioReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].audioReceived.data,ln,function(an){return Math.floor(1e3*an)});mn.sampleCount=jt.stats[Jt].audioReceived.data.length,mn.time=Et.detail.stats.audioReceived.timestamp-jt.stats[Jt].audioReceived.startTime,jt.stats[Jt].audioReceived[ln]=mn}),jt.stats[Jt].audioReceived.packetsLost={max:Et.detail.stats.audioReceived.packetsLost,sampleCount:jt.stats[Jt].audioReceived.data.length,time:Et.detail.stats.audioReceived.timestamp-jt.stats[Jt].audioReceived.startTime},["packetsLostRatio"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].audioReceived.data,ln);mn.sampleCount=jt.stats[Jt].audioReceived.data.length,mn.time=Et.detail.stats.audioReceived.timestamp-jt.stats[Jt].audioReceived.startTime,jt.stats[Jt].audioReceived[ln]=mn}),jt.stats[Jt].audioReceived.mosS===void 0&&(jt.stats[Jt].audioReceived.mosS={}),["mosS"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].audioReceived.data,ln);mn.sampleCount=jt.stats[Jt].audioReceived.data.length,jt.stats[Jt].audioReceived[ln]=mn}))):Bn.error("audio stats not pushed for callId :",Jt)),Et.detail.stats.videoReceived!==void 0&&(jt.stats[Jt].videoReceived===void 0&&(jt.stats[Jt].videoReceived={startTime:Et.detail.stats.videoReceived.timestamp,data:[]}),jt.pushStats(jt.stats[Jt].videoReceived,Et.detail.stats.videoReceived)?(Zt=jt.stats[Jt].videoReceived.data.length,jt.stats[Jt].videoReceived.data[Zt-1].mosV===void 0&&(jt.stats[Jt].videoReceived.data[Zt-1].mosV={}),jt.stats[Jt].videoReceived.data[Zt-1].mosAV===void 0&&(jt.stats[Jt].videoReceived.data[Zt-1].mosAV={}),jt.stats[Jt].videoReceived.data[Zt-1].mosV=Et.detail.stats.quality.mosV,jt.stats[Jt].videoReceived.data[Zt-1].mosAV=Et.detail.stats.quality.mosAV,jt.stats[Jt].videoReceived.data.length>=15&&(["bitsReceivedPerSecond","packetsReceivedPerSecond","framesDecodedPerSecond"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].videoReceived.data,ln);mn.sampleCount=jt.stats[Jt].videoReceived.data.length,mn.time=Et.detail.stats.videoReceived.timestamp-jt.stats[Jt].videoReceived.startTime,jt.stats[Jt].videoReceived[ln]=mn}),jt.stats[Jt].videoReceived.data[0].jitter!==void 0&&["jitter"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].videoReceived.data,ln,function(an){return Math.floor(1e3*an)});mn.sampleCount=jt.stats[Jt].videoReceived.data.length,mn.time=Et.detail.stats.videoReceived.timestamp-jt.stats[Jt].videoReceived.startTime,jt.stats[Jt].videoReceived[ln]=mn}),jt.stats[Jt].videoReceived.packetsLost={max:Et.detail.stats.videoReceived.packetsLost,sampleCount:jt.stats[Jt].videoReceived.data.length,time:Et.detail.stats.videoReceived.timestamp-jt.stats[Jt].videoReceived.startTime},["packetsLostRatio"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].videoReceived.data,ln);mn.sampleCount=jt.stats[Jt].videoReceived.data.length,mn.time=Et.detail.stats.videoReceived.timestamp-jt.stats[Jt].videoReceived.startTime,jt.stats[Jt].videoReceived[ln]=mn}),jt.stats[Jt].videoReceived.mosV===void 0&&(jt.stats[Jt].videoReceived.mosV={}),["mosV"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].videoReceived.data,ln);mn.sampleCount=jt.stats[Jt].videoReceived.data.length,jt.stats[Jt].videoReceived[ln]=mn}),jt.stats[Jt].videoReceived.mosAV===void 0&&(jt.stats[Jt].videoReceived.mosAV={}),["mosAV"].forEach(function(ln){var mn=jt.evalQuartiles(jt.stats[Jt].videoReceived.data,ln);mn.sampleCount=jt.stats[Jt].videoReceived.data.length,jt.stats[Jt].videoReceived[ln]=mn}),jt.stats[Jt].videoReceived.width=Et.detail.stats.videoReceived.width,jt.stats[Jt].videoReceived.height=Et.detail.stats.videoReceived.height)):Bn.error("video stats not pushed for callId :",Jt))},Vt=0;Vt<this.subscribeCallIds.length;Vt+=1){var Zt;Pt(Vt)}},this.subscribeToUserStream=function(Et,jt,Pt){var Vt=this,Zt=this.webRTCClient.getStreamFromList(jt);if(Zt!=null){var rn=[];rn.push(Zt),this.webRTCClient.subscribe(rn,Pt).forEach(function(Jt){Vt.subscribeCallIds.push(Jt),Vt.report[Vt.testId].subscribeCallIds.push(Jt)})}},this.leaveSession=function(){Bn.debug("leaveSession"),this.streams!==void 0&&typeof this.streams[0]=="number"&&this.webRTCClient!==null&&this.webRTCClient.unsubscribe(this.streams[0]),this.userMediastreamId!==null&&apiRTC.releaseUserMediaStream(this.userMediastreamId),delete this.streams,delete this.subscribeCallIds,typeof this.publishCallId=="string"&&this.webRTCClient.unpublish(this.publishCallId),delete this.publishCallId,this.mcuSession!==void 0&&this.mcuSession.sessionId!==void 0&&(this.webRTCClient.leaveMCUSession(),delete this.mcuSession.sessionId),delete this.mcuSession,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.length),Bn.debug("leaveSession done")},this.runResolutionTest=function(){this.testId="resolution-test",this.stepId="resolution-test",_n.createEvent({eventType:"preCallTestStatus",testId:this.testId,status:"start",stepId:this.stepId}),Bn.debug("Run resolution test"),this.startGetUserMedia(this.resolutions[this.currentResolution])},this.startGetUserMedia=function(Et){Bn.debug("startGetUserMedia :",Et);var jt={audio:!1,video:{}};jt=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,jt),jt=apiCC.setResolutionInConstraint(Et[0],Et[1],jt),Bn.debug("startGetUserMedia constraints:",jt),apiCC.getUserMedia(jt).then((function(Pt){this.resolutions.length>1?(this.report.resolutions.push(Et[2]+":   "+Et[0]+"x"+Et[1]),this.maxWidth=Et[0],this.maxHeight=Et[1],Pt.getTracks().forEach(function(Vt){Vt.stop()}),this.maybeContinueGetUserMedia()):Bn.debug("No video track in returned stream.")}).bind(this)).catch((function(Pt){Bn.debug("startGetUserMedia catch error:",Pt),this.resolutions.length>1?Bn.debug(Et[0]+"x"+Et[1]+" not supported"):Bn.error("getUserMedia failed with error: "+Pt.name),this.maybeContinueGetUserMedia()}).bind(this))},this.maybeContinueGetUserMedia=function(){this.currentResolution!==this.resolutions.length-1?(this.currentResolution++,this.startGetUserMedia(this.resolutions[this.currentResolution])):this.startNextTest()}},bn=et.Y.get("ApiCCWebRTCClient"),wn=function(Yt){bn.debug("apiCC.ApiCCWebRTCClient"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.webRTCClient=new Vn(Yt),this.webRTCClient.channelReady=!0,this.callTest=null,this.call=function(kt,st,Tt){return st==="RECORD"&&bn.warn("DEPRECATED : usage of data parameter on call() as a string with 'RECORD' value will be deprecated in a next version of apiRTC. Please consider using a JSON Data parameter instead : data = {isRecorded : true}"),this.webRTCClient.recordedCall===!0&&(bn.log("recordedCall option is activated"),st!==void 0&&st!=="RECORD"||(st={}),st.MCUType="MCU-Caller",st.confId=Math.floor(1000001*Math.random()).toString()),st!==void 0&&(st!=="RECORD"&&st.isRecorded!==!0||(bn.log("recordedCall option is activated"),st==="RECORD"&&(st={}),st.MCUType="MCU-Caller",st.confId=Math.floor(1000001*Math.random()).toString())),Tt!=null&&Tt.record===!0&&(bn.log("callConfiguration record option is activated"),st!==void 0&&st!=="RECORD"||(st={}),st.MCUType="MCU-Caller",st.confId=Math.floor(1000001*Math.random()).toString()),bn.log("session.webRTCPluginActivated =",Yt.webRTCPluginActivated),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&Yt.webRTCPluginActivated===!0?(bn.log("managing call with WebRTC Plugin"),Tt==null&&(Tt={}),Tt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){bn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.callWithNumber(kt,!0,st,Tt)},function(){bn.log("actionOnInstallationNeeded")}),Tt.apzcallId):(bn.log("managing call with browser"),this.webRTCClient.callWithNumber(kt,!0,st,Tt))},this.getStatsFromCall=function(kt,st){var Tt=this.webRTCClient.findCallWithCallId(kt);Tt===null?st(new Error("Call was not found"),null):Tt.pc===null?st(new Error("Call has no peerconnection"),null):this.webRTCClient.csmEnable===!0?st(null,this.webRTCClient.csmLastResults):st(new Error("Call stats monitoring not activated"),null)},this.testCall=function(kt){return bn.log("session.webRTCPluginActivated =",Yt.webRTCPluginActivated),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&Yt.webRTCPluginActivated===!0?(bn.log("managing call with WebRTC Plugin"),kt==null&&(kt={}),kt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){bn.log("manageWebRTCPlugin cb in call"),apiCC.session.apiCCWebRTCClient.webRTCClient.startTestCall(!0,kt)},function(){bn.log("actionOnInstallationNeeded")}),kt.apzcallId):(bn.log("managing call with browser"),this.webRTCClient.startTestCall(!0,kt))},this.setClientTurnServer=function(kt){this.webRTCClient.setClientTurnServer(kt)},this.activateScreenSharing=function(kt){this.webRTCClient.activateScreenSharing(kt)},this.shareScreen=function(kt,st,Tt){return bn.info("shareScreen"),this.webRTCClient.shareScreen(kt,st,Tt)},this.startScreenSharingOnCall=function(kt,st){bn.info("startScreenSharingOnCall"),this.webRTCClient.startScreenSharingOnCall(kt,st)},this.startDataChannel=function(kt,st){if(bn.info("startDataChannel"),!(nt.Xh==="Edge"&&nt.PR<79&&apiRTC.browserDetails.type!=="chrome"))return st!==void 0?st.dataCall=!0:(st={}).dataCall=!0,this.webRTCClient.callWithNumber(kt,!0,st,null);bn.warn("Cannot startDataChannel as it is not supported on Edge")},this.startDataChannelOnCall=function(kt){this.webRTCClient.startDataChannelOnCall(kt)},this.sendDataWithCallId=function(kt,st,Tt){this.webRTCClient.sendDataWithCallId(kt,st,Tt)},this.callAudio=function(kt,st,Tt){return bn.info("callAudio"),this.webRTCClient.callWithNumber(kt,!1,st,Tt)},this.callbymail=function(kt){this.webRTCClient.callbymail(kt)},this.addMedia=function(kt){return this.webRTCClient.addMedia(kt),kt},this.hangUp=function(kt){this.webRTCClient.onHangup(kt)},this.getMyMedia=function(kt,st){bn.info("getMyMedia : ",kt),kt==="screen"?this.webRTCClient.shareScreen("LOCAL",{},st):this.webRTCClient.getUserMedia()},this.releaseStream=function(kt){bn.info("releaseStream : ",kt),bn.info("releaseStream.callId : ",kt.callId),kt.callId!==void 0?this.webRTCClient.removeCallFromTableWithCallIdAndSendBye(kt.callId,"stop_ScreenSharing"):this.webRTCClient.stopStream(kt)},this.autoAnswerUserMediaSuccessHandler=function(kt){bn.info("autoAnswerUserMediaSuccessHandler :"+kt),kt=null,this.webRTCClient.autoAnswer=!0},this.autoAnswerUserMediaErrorHandler=function(kt){bn.info("autoAnswerUserMediaErrorHandler :"+kt),kt=null,this.webRTCClient.autoAnswer=!1},this.activateAutoAnswer=function(){apiCC.addEventListener("userMediaSuccess",this.callback(this,"autoAnswerUserMediaSuccessHandler")),apiCC.addEventListener("userMediaError",this.callback(this,"autoAnswerUserMediaErrorHandler")),this.webRTCClient.getUserMedia()},this.getAutoAnswer=function(){return this.webRTCClient.autoAnswer},this.setUnidirectionalCall=function(kt){kt===!0||kt===!1?this.webRTCClient.unidirectionelCallOnly=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUnidirectionalCall()","PARAMETER_ERROR_SETUNIDIRCALL")},this.setReceiveMediaDeactivated=function(kt){kt===!0||kt===!1?this.webRTCClient.receiveMediaDeactivated=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setReceiveMediaDeactivated()","PARAMETER_ERROR_SETRECVMEDIADEACTIVATED")},this.setPreferVP9Codec=function(kt){kt===!0||kt===!1?this.webRTCClient.preferVP9Codec=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferVP9Codec()","PARAMETER_ERROR_SETPREFERVP9CODEC")},this.setPreferH264Codec=function(kt){kt===!0||kt===!1?this.webRTCClient.preferH264Codec=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setPreferH264Codec()","PARAMETER_ERROR_SETPREFERH264CODEC")},this.getUnidirectionalCall=function(){return this.webRTCClient.unidirectionelCallOnly},this.toggleVideoMute=function(kt){return this.webRTCClient.toggleVideoMute(kt)},this.isVideoMuted=function(kt){var st;return bn.debug("isVideoMuted :",kt),kt==null?this.webRTCClient.isVideoMuted:(bn.debug("callId is defined :",kt),(st=this.webRTCClient.findCallIndexWithCallId(kt))!==-1?this.webRTCClient.callsTable[st].isLocalVideoMuted:void 0)},this.toggleAudioMute=function(kt){return this.webRTCClient.toggleAudioMute(kt)},this.sendDTMF=function(kt,st,Tt,Rt){return this.webRTCClient.sendDTMF(kt,st,Tt,Rt)},this.isAudioMuted=function(kt){var st;return bn.debug("isAudioMuted :",kt),kt==null?this.webRTCClient.isAudioMuted:(bn.debug("callId is defined :",kt),(st=this.webRTCClient.findCallIndexWithCallId(kt))!==-1?this.webRTCClient.callsTable[st].isLocalAudioMuted:void 0)},this.setNtoNConf=function(kt){kt===!0||kt===!1?this.webRTCClient.NtoNConf=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setNtoNConf()","PARAMETER_ERROR_SETNTONCONF")},this.getNtoNConf=function(){return this.webRTCClient.NtoNConf},this.setRTPMedia=function(kt){kt===!0||kt===!1?this.webRTCClient.RTPMedia=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRTPMedia()","PARAMETER_ERROR_SETRTPMEDIA")},this.getRTPMedia=function(){return this.webRTCClient.RTPMedia},this.setMediaRoutingMode=function(kt){kt==="hostOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.hostOnly:kt==="stun"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stun:kt==="stunOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stunOnly:kt==="turn"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turn:kt==="turnOnly"?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turnOnly:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setMediaRoutingMode()","PARAMETER_ERROR_SETMEDIAROUTINGMODE")},this.enableQos=function(kt,st){apiCC.browser!=="Chrome"&&apiCC.browser!=="Firefox"&&(bn.warn("enableQos() is only supported on Chrome and Firefox, support on other browsers will be added soon"),kt=!1),bn.info("this.enableQos="+kt),this.webRTCClient.qosEnable=kt,this.webRTCClient.qosInterval=st||this.webRTCClient.qosInterval},this.enableCallStatsMonitoring=function(kt,st){["chrome","firefox","safari"].indexOf(at.wL.type)<0?bn.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):(this.webRTCClient.csmEnable=kt,st&&(this.webRTCClient.csmIntervalMs=st))},this.enableQualityEvaluating=function(kt,st){["chrome","firefox"].indexOf(at.wL.type)<0?bn.warn("enableQualityEvaluating() is only supported on Chrome and Firefox, support on other browsers will be added soon"):(this.webRTCClient.qualityScoreEnable=kt,st&&(this.webRTCClient.qualityScoreIntervalMs=st))},this.getMediaRoutingMode=function(){var kt=null;return this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.hostOnly?kt="hostOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stun?kt="stun":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stunOnly?kt="stunOnly":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turn?kt="turn":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turnOnly&&(kt="turnOnly"),kt},this.setMediaTypeForIncomingCall=function(kt){bn.debug("setMediaTypeForIncomingCall :",kt),kt==="VIDEO"||kt==="AUDIO"||kt==="VIDEOONLY"||kt==="NONE"?this.webRTCClient.mediaTypeForIncomingCall=kt:bn.log("setMediaTypeForIncomingCall, value is not correct",kt)},this.setMediaTypeForOutgoingCall=function(kt){bn.debug("setMediaTypeForOutgoingCall :",kt),kt==="VIDEO"||kt==="AUDIO"||kt==="VIDEOONLY"||kt==="NONE"?this.webRTCClient.mediaTypeForOutgoingCall=kt:bn.log("setMediaTypeForOutgoingCall, value is not correct",kt)},this.setStereo=function(kt){bn.info("setStereo :",kt),kt===!0?(this.webRTCClient.setStereo=kt,this.webRTCClient.gum_config={audio:{mandatory:{echoCancellation:!1,googEchoCancellation:!1},optional:[]},video:{mandatory:{},optional:[]}}):kt===!1?this.webRTCClient.setStereo=kt:bn.log("setStereo, value is not correct",kt)},this.setMCUConnector=function(kt){bn.info("setMCUConnector :",kt),bn.log("setting value :",kt),kt==="mcu4.apizee.com"?this.webRTCClient.MCUClient.pubConnector="janusConnector":kt==="mcu3.apizee.com"?this.webRTCClient.MCUClient.pubConnector="groupKurentoConnector":bn.log("value is incorrect :",kt)},this.enableMeshRoomMode=function(kt){bn.info("enableMeshRoomMode :",kt),nt.Xh==="IE"?(bn.log("IE detected, MeshRoomMode is not supported"),this.webRTCClient.MCUClient.meshModeEnabled=!1):this.webRTCClient.MCUClient.meshModeEnabled=kt},this.setAllowAsymetricMediaCalls=function(kt){bn.info("setAllowAsymetricMediaCalls :",kt),kt===!0||kt===!1?this.webRTCClient.allowAsymetricMediaCalls=kt:bn.log("setAllowAsymetricMediaCalls, value is not correct",kt)},this.takeSnapshot=function(kt,st,Tt,Rt,Lt,Et,jt){this.webRTCClient.takeSnapshot(kt,st,Yt.apiKey,Tt,Rt,Lt,Et,jt)},this.takeSnapshotAndSendOnDataChannel=function(kt,st,Tt,Rt){this.webRTCClient.takeSnapshotAndSendOnDataChannel(kt,st,Tt,Rt)},this.setUserAcceptOnIncomingCall=function(kt){bn.info("setUserAcceptOnIncomingCall :",kt),kt===!0||kt===!1?this.webRTCClient.userAcceptOnIncomingCall=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingCallBeforeGetUserMedia=function(kt){bn.info("setUserAcceptOnIncomingCallBeforeGetUserMedia :",kt),kt===!0||kt===!1?this.webRTCClient.userAcceptOnIncomingCallBeforeGetUserMedia=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingCallBeforeGetUserMedia()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALLBEFOREGUM")},this.setUserAcceptOnIncomingDataCall=function(kt){kt===!0||kt===!1?this.webRTCClient.userAcceptOnIncomingDataCall=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingDataCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOCALL")},this.setUserAcceptOnIncomingScreenSharingCall=function(kt){kt===!0||kt===!1?this.webRTCClient.userAcceptOnIncomingScreenSharingCall=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setUserAcceptOnIncomingScreenSharingCall()","PARAMETER_ERROR_SETUSERACCEPTONINCOSCREENSHARINGCALL")},this.setAllowMultipleCalls=function(kt){kt===!0||kt===!1?this.webRTCClient.allowMultipleCalls=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setAllowMultipleCalls()","PARAMETER_ERROR_SETALLOWMULTIPLECALLS")},this.setPcConfig=function(kt){bn.info("Setting PC_config to :",kt),this.webRTCClient.pc_config=kt},this.setPcConstraints=function(kt){bn.info("Setting PC_constraints to :"+kt),this.webRTCClient.pc_constraints=kt},this.setGetUserMediaConfig=function(kt){this.webRTCClient.setGetUserMediaConfig(kt)},this.setTrickleIce=function(kt){bn.info("Setting trickleIce to :"+kt),kt===!0||kt===!1?this.webRTCClient.trickleIce=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setTrickleIce()","PARAMETER_ERROR_SETTRICKLEICE")},this.setRecordedCall=function(kt){kt===!0||kt===!1?this.webRTCClient.recordedCall=kt:this.myWebRTC_Event.createErrorEvent("parameter error when calling function : setRecordedCall()","PARAMETER_ERROR_SETRECORDEDCALL")},this.getRecordedCall=function(){return this.webRTCClient.recordedCall},this.acceptCall=function(kt,st){this.webRTCClient.acceptCall(kt,st)},this.refuseCall=function(kt){bn.info("refuseCall"),this.webRTCClient.refuseCall(kt)},this.addVideoMedia=function(kt){bn.info("addVideoMedia"),this.webRTCClient.addVideoMedia(kt)},this.updateMediaDeviceOnCall=function(kt,st){return bn.info("updateMediaDeviceOnCall"),this.webRTCClient.updateMediaDeviceOnCall(kt,st)},this.updateMediaTypeOnCall=function(kt,st){return!(0,at.Ym)(kt,"string")||st!=="VIDEO"&&st!=="AUDIOONLY"&&st!=="VIDEOONLY"?Promise.reject("wrong arguments"):this.webRTCClient.updateMediaTypeOnCall(kt,st)},this.releaseUserMedia=function(){this.webRTCClient.releaseUserMedia()},this.setAllowedAudioCodecs=function(kt){this.webRTCClient.allowedAudioCodecs=kt},this.setAllowedVideoCodecs=function(kt){this.webRTCClient.allowedVideoCodecs=kt},this.setAudioBandwidth=function(kt){this.webRTCClient.setAudioBandwidth(kt)},this.setVideoBandwidth=function(kt){},this.setRemoteVideoBandwidth=function(kt){typeof kt=="number"?this.webRTCClient.setVideoBandwidth(kt,"remote"):bn.error("Unvalid target bandwidth usage value needs to be a number :",kt)},this.setOverallIncomingVideoBandwidth=function(kt){typeof kt=="number"?this.webRTCClient.setVideoBandwidth(kt,"overall","incoming"):bn.error("Unvalid target bandwidth usage value needs to be a number :",kt)},this.setOverallOutgoingVideoBandwidth=function(kt){typeof kt=="number"?this.webRTCClient.setVideoBandwidth(kt,"overall","outgoing"):bn.error("Unvalid target bandwidth usage value needs to be a number :",kt)},this.setPerCallIncomingVideoBandwidth=function(kt){typeof kt=="number"?this.webRTCClient.setVideoBandwidth(kt,"perCall","incoming"):bn.error("Unvalid target bandwidth usage value needs to be a number :",kt)},this.setPerCallOutgoingVideoBandwidth=function(kt){typeof kt=="number"?this.webRTCClient.setVideoBandwidth(kt,"perCall","outgoing"):bn.error("Unvalid target bandwidth usage value needs to be a number :",kt)},this.setDataBandwidth=function(kt){this.webRTCClient.setDataBandwidth(kt)},this.createMCUSession=function(kt,st){bn.info("createMCUSession"),this.webRTCClient.MCUClient.initDivElements(kt,st),this.webRTCClient.MCUClient.createSession()},this.joinMCUSession=function(kt){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bn.debug("joinMCUSession"),kt?this.webRTCClient.MCUClient.joinSession(kt,st):new Error("wrong roomId")},this.getMCUStreamList=function(){return bn.debug("getMCUStreamList"),this.webRTCClient.MCUClient.getStreamList()},this.getStreamFromList=function(kt){return bn.debug("getStreamFromList"),this.webRTCClient.MCUClient.getStreamFromList(kt)},this.getStreamIdOfUser=function(kt){return bn.debug("getStreamIdOfUser"),this.webRTCClient.MCUClient.getStreamIdOfUser(kt)},this.getCallIdFromStreamId=function(kt){bn.debug("getCallIdFromStreamId");var st=this.webRTCClient.findCallWithStreamId(kt);return st===null?(bn.log("call not found in getCallIdFromStreamId"),null):st.callId},this.getCallIdFromRemoteMCUUser=function(kt){var st,Tt;return bn.debug("getCallIdFromRemoteMCUUser"),st=this.webRTCClient.MCUClient.getStreamIdOfUser(kt),(Tt=this.webRTCClient.findCallWithStreamId(st))===null?(bn.log("call not found in getCallIdFromRemoteMCUUser"),null):Tt.callId},this.ejectParticipantFromMCUSession=function(kt,st,Tt){this.webRTCClient.MCUClient.ejectParticipant(kt,st,Tt)},this.publish=function(kt,st,Tt,Rt,Lt,Et){if(nt.Xh==="IE"&&(bn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),bn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1)return bn.log("managing call with WebRTC Plugin"),Rt==null&&(Rt={}),Rt.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin(function(){apiCC.webRTCPluginInstalled=!0,bn.info("manageWebRTCPlugin cb in call");var Pt=this.webRTCClient.MCUClient.getSessionMCU(kt);return Pt&&Pt.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(kt,st,Tt,Rt,Lt,Et):(bn.debug("publish"),this.webRTCClient.MCUClient.publish(kt,st,Tt,Rt,Lt,Et))},function(){bn.log("actionOnInstallationNeeded")}),Rt.apzcallId;var jt=this.webRTCClient.MCUClient.getSessionMCU(kt);return jt&&jt.roomMode==="mesh"?this.webRTCClient.MCUClient.meshPublish(kt,st,Tt,Rt,Lt,Et):(bn.debug("publish"),this.webRTCClient.MCUClient.publish(kt,st,Tt,Rt,Lt,Et))},this.unpublish=function(kt){bn.info("unpublish"),this.webRTCClient.MCUClient.unpublish(kt)},this.publishScreen=function(kt,st,Tt,Rt){var Lt=this.webRTCClient.MCUClient.getSessionMCU(kt);return Lt&&Lt.roomMode==="mesh"?(bn.info("publishScreen"),this.webRTCClient.MCUClient.meshPublishScreen(kt,st,Tt,Rt)):(bn.info("publishScreen"),this.webRTCClient.MCUClient.publishScreen(kt,st,Tt,Rt))},this.subscribe=function(kt,st,Tt,Rt,Lt){return bn.info("subscribe :",kt),nt.Xh==="IE"&&(bn.log("apiCC.session.webRTCPluginActivated ="+apiCC.session.webRTCPluginActivated),bn.log("apiCC.webRTCPluginInstalled ="+apiCC.webRTCPluginInstalled)),(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&apiCC.session.webRTCPluginActivated===!0&&apiCC.webRTCPluginInstalled===!1?(bn.log("managing call with WebRTC Plugin"),apiCC.manageWebRTCPlugin(function(){return apiCC.webRTCPluginInstalled=!0,bn.log("manageWebRTCPlugin cb in subscribe"),typeof st=="boolean"&&(bn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),st=st===!0?"AUDIOONLY":"VIDEO"),apiCC.session.apiCCWebRTCClient.subscribe(kt,st,Tt,Rt)},function(){bn.log("actionOnInstallationNeeded")}),"WebRTC_Plugin"):(typeof st=="boolean"&&(bn.warn("DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC"),st=st===!0?"AUDIOONLY":"VIDEO"),this.webRTCClient.MCUClient.subscribeToStreams(kt,st,Tt,Rt,Lt))},this.unsubscribe=function(kt){bn.info("unsubscribe :",kt),this.webRTCClient!==null&&this.webRTCClient.MCUClient!==null&&this.webRTCClient.MCUClient.unsubscribe(kt)},this.startStreaming=function(kt,st,Tt,Rt){return bn.info("startStreaming"),this.webRTCClient.MCUClient.startStreaming(kt,st,Tt,Rt)},this.stopStreaming=function(kt){return bn.info("stopStreaming"),this.webRTCClient.MCUClient.stopStreaming(kt)},this.startRecording=function(kt,st,Tt,Rt,Lt){bn.info("startRecording"),this.webRTCClient.MCUClient.startRecording(kt,st,Tt,Rt,Lt)},this.stopRecording=function(kt){bn.info("stopRecording"),this.webRTCClient.MCUClient.stopRecording(kt)},this.changeStreamPriority=function(kt,st){var Tt=this.webRTCClient.findCallWithCallId(kt);if(!Tt&&!(Tt=this.webRTCClient.findUserMediaById(kt)))return bn.error("changeStreamPriority - no such call",kt),!1;if(!Tt.sessionMCU)return bn.error("changeStreamPriority - no such sessionMCU"),!1;if(!(0,at.Ym)(st,"number")||st<0)return bn.error("changeStreamPriority - wrong priority",st),!1;var Rt=JSON.stringify({type:"changeStreamPriority",roomId:Tt.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:kt,data:{pubSub:this.webRTCClient.MCUClient.pubConnector,priority:st}});return bn.log("C->S: "+Rt),apiCC.session.channel.socket.emit("changeStreamPriority",Rt),!0},this.startComposite=function(kt){bn.info("startComposite"),this.webRTCClient.MCUClient.startComposite(kt)},this.stopComposite=function(kt){bn.info("stopComposite"),this.webRTCClient.MCUClient.stopComposite(kt)},this.startCompositeRecording=function(kt,st,Tt,Rt,Lt){bn.info("startCompositeRecording"),this.webRTCClient.MCUClient.startCompositeRecording(kt,st,Tt,Rt,Lt)},this.stopCompositeRecording=function(kt){bn.info("stopCompositeRecording"),this.webRTCClient.MCUClient.stopCompositeRecording(kt)},this.checkCallExist=function(kt){for(var st=null,Tt=this.webRTCClient.callsTable.length;--Tt>=0;){var Rt=this.webRTCClient.callsTable[Tt];if(Rt.callId===kt&&Rt.data&&Rt.sessionMCU&&(Rt.data.MCUType==="MCU-Caller"||Rt.data.MCUType==="MCU-Callee")&&Rt.data.confId===Rt.sessionMCU.roomName){st=Rt;break}}return st||bn.error("startCallRecording: no such call"),st},this.startCallRecording=function(kt){var st;if(st=this.checkCallExist(kt)){var Tt=(0,at.ws)({},st.data);this.webRTCClient.MCUClient.startCompositeRecording("AUDIO-VIDEO",null,st.sessionMCU.convId,Tt,st.sessionMCU.roomName)}},this.stopCallRecording=function(kt){var st;(st=this.checkCallExist(kt))&&this.webRTCClient.MCUClient.stopCompositeRecording(st.sessionMCU.roomName)},this.enforceMCU=function(kt){this.webRTCClient.MCUClient.enforceMCU(kt)},this.takeSnapshotOnMCUSession=function(kt){return bn.info("takeSnapshotOnMCUSession"),this.webRTCClient.MCUClient.takeSnapshot(kt)},this.sendMCUSessionInvitation=function(kt,st,Tt){this.webRTCClient.MCUClient.sendSessionInvitation(kt,st,Tt)},this.sendMCUSessionInvitationToGroupChat=function(kt,st){this.webRTCClient.MCUClient.sendSessionInvitationToGroupChat(kt,st)},this.acceptMCUSessionInvitation=function(kt,st,Tt,Rt){this.webRTCClient.MCUClient.initDivElements(Tt,Rt),this.webRTCClient.MCUClient.acceptSessionInvitation(kt,st)},this.leaveMCUSession=function(kt){this.webRTCClient.MCUClient.leaveSession(kt)},this.recordStream=function(kt){bn.info("recordStream :",kt),MediaRecorder!==void 0?apiCC.recordMgr.record(kt).then(function(){bn.log("Recording started")}).catch(function(st){bn.error("startRecord failed :",st)}):bn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.stopRecordStream=function(kt){bn.info("stopRecordStream"),MediaRecorder!==void 0?apiCC.recordMgr.stop().then(function(st){bn.log("Recording stopped"),kt(st)}).catch(function(st){bn.error("stopRecord failed :",st)}):bn.debug("MediaRecorder is not supported on this browser, leaving recordStream process")},this.getMediaDevices=function(kt){bn.debug("getMediaDevices 2"),apiCC.getMediaDevices().then(function(st){kt(st),apiCC.mediaDeviceMgr.gotSources(st)}).catch(function(st){kt(null),apiCC.mediaDeviceMgr.gotSources(null)})},this.setAudioSourceId=function(kt){bn.info("setAudioSourceId :"+kt),this.webRTCClient.audioSourceId=kt},this.setAudioOutputId=function(kt){bn.info("setaudioOutputId :"+kt),this.webRTCClient.audioOutputId=kt},this.setVideoSourceId=function(kt){bn.info("setVideoSourceId :"+kt),this.webRTCClient.videoSourceId=kt},this.setVideoFacingMode=function(kt){bn.info("setVideoFacingMode :"+kt),kt==="user"||kt==="environment"||kt==="left"||kt==="right"||kt==="deactivated"?this.webRTCClient.facingMode=kt==="deactivated"?null:kt:bn.log("facingMode value is not correct")},this.attachMediaStream=function(kt,st){bn.debug("attachMediaStream"),apiCC.attachMediaStream(kt,st)},this.addStreamInDiv=function(kt,st,Tt,Rt,Lt,Et){bn.debug("addStreamInDiv"),apiCC.addStreamInDiv(kt,st,Tt,Rt,Lt,Et)},this.removeElementFromDiv=function(kt,st){bn.debug("removeElementFromDiv"),apiCC.removeElementFromDiv(kt,st)},this.setSelectedStream=function(kt){bn.warn("setSelectedStream() is now deprecated")},this.callback=function(kt,st){return this.closureHandler=function(Tt){return kt[st](Tt)},this.closureHandler},this.startPrecallTest=function(kt,st,Tt,Rt,Lt){var Et={webRTCClient:this,notifyTerminated:kt};this.callTest=new $n(Et,st,Tt,Rt,Lt),this.callTest.runBitRateTest()}}},6527:(rt,it,s)=>{s.d(it,{p:()=>nt}),s(3843),s(3710),s(7941),s(4916),s(2772),s(2564),s(561),s(1058),s(9653),s(3290),s(6755),s(3123),s(2222),s(4812);var et=s(1549).Y.get("ApiCCWhiteBoardClient"),nt=function(at,ht,dt,pt,lt){function mt(ot){ot.style.display="none"}et.debug("Loading apiCC.ApiCCWhiteBoardClient"),this.roomId=null,this.whiteBoardDisconnectionTimeoutId=0,this.sessionStarted=!1,this.prev={},this.lastEmit=Date.now(),this.clients={},this.listenedPeers={},this.touchScreenActivated=!1,this.touchControlPoint={},this.drawElements=[],this.ghostElements={},this.redoStack=[],this.undoIndex=0,this.userCursorColor=null,this.cursors={},this.cursorStyle="cross",this.CURSOR_STYLES=["circle","cross"],this.currentScale=1,this.dx=0,this.dy=0,this.instructionsFaded=!1,this.canvas=null,this.ctx=null,this.currentTool="pen",this.currentColor="rgba(0, 0, 0, 1)",this.currentBrushWidth=1,this.readOnly=!1,this.isDrawing=!1,this.focusOnDrawing=!1,this.paperSheetId=0,this.drawingId=0,this.offline=!1,this.roomJoined=!1,this.laserModeActivated=!1,this.AVAILABLE_TOOLS=["pen","ellipse","rectangle","erase","void","arrow"],this.GEOMETRY_TOOLS=["arrow","rectangle","ellipse"],this.disconnectionTimer=lt!==void 0?lt:3e4,et.log("Setting Whiteboard disconnectionTimer to : "+this.disconnectionTimer),this.setCanvas=function(ot){et.debug("[Whiteboard] setCanvas() :",ot),this.canvas!==null&&(et.log("Unsetting old canvas events"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)))),ot!==null&&document.getElementById(ot)!==null?(this.canvas=document.getElementById(ot),this.ctx=this.canvas.getContext("2d"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))):(ot!==null&&document.getElementById(ot)===null&&et.warn("No such element whose id is : "+ot),this.canvas=null,this.ctx=null)},this.setCanvas(ht),this.sendDataToRoom=function(ot){if(et.info("[Whiteboard] sendDataToRoom()"),this.offline===!1&&this.roomId!==null){if(apiCC.session===null||apiCC.session===void 0)return void et.info("apiCC.session does not exist, leaving process");et.debug("this.drawElements :",this.drawElements),et.debug("data.tool :",ot.tool);var ut=[];et.debug("drawElementsToSend :",ut);var ft,bt={x:0,y:0,drawing:!1,tool:this.currentTool,cursorColor:this.userCursorColor,color:this.currentColor,width:this.currentBrushWidth,paperSheetId:this.paperSheetId,drawElements:ut,id:apiCC.session.apiCCId},vt=Object.keys(ot);for(ft=0;ft<vt.length;ft++)bt[vt[ft]]=ot[vt[ft]];apiCC.session.roomMgr.sendMessageToRoom(this.roomId,"whiteBoard",bt)}},this.setCursorsDiv=function(){et.warn("[Whiteboard] setCursorsDiv() - method obsolete, please use setUserCursorColor to set a cursor pointer that will be seen by other users")},this.setUserCursorColor=function(ot){et.debug("[Whiteboard] setUserCursorColor() : "+ot),ot===null||ot==="invisible"?this.userCursorColor="invisible":/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(ot)?this.userCursorColor=ot:(et.warn("[Whiteboard] setUserCursorColor() color "+ot+" is invalid, defaulting to invisible"),this.userCursorColor="invisible")},this.setUserCursorColor(dt),this.setCursorStyle=function(ot){et.debug("[Whiteboard] setCursorStyle() : "+ot),this.CURSOR_STYLES.indexOf(ot)>-1?(this.userCursorColor="invisible",this.cursorStyle=ot):et.error("[Whiteboard] setCursorStyle() style "+ot+" is invalid")},this.setFocusOnDrawing=function(ot){et.debug("[Whiteboard] setFocusOnDrawing()"),this.focusOnDrawing=ot},this.createRoom=function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et.debug("[Whiteboard] createRoom()"),apiCC.session.roomMgr.createRoom("whiteBoard",ot)},this.requestContactListInRoom=function(ot){et.log("[Whiteboard] requestContactListInRoom :"+ot),apiCC.session.roomMgr.requestContactListInRoom(ot)},this.setDrawingTool=function(ot){et.debug("[Whiteboard] setDrawingTool()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.AVAILABLE_TOOLS.indexOf(ot)>-1&&(this.currentTool=ot,this.ghostElements[ut]=null)},this.setReadOnly=function(ot){et.debug("[Whiteboard] setReadOnly()");var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.ghostElements[ut]=null,this.readOnly=ot===!0,this.readOnly&&this.canvas!==null?(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))):this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)))},this.laserModeProcess=function(ot){var ut=this;setTimeout(function(){return ut.undo(ot)},5e3)},this.undo=function(ot){et.debug("[Whiteboard] undo()");var ut=this.drawElements.length-1,ft=null,bt=[],vt=[],yt=null,At=0;if(apiCC.session!==null&&(At=apiCC.session.apiCCId),ot===void 0)for(;ut>=0;)this.drawElements[ut].userId==At&&(ft===null&&(ft=this.drawElements[ut].undoIndex),ft===this.drawElements[ut].undoIndex&&(yt=this.drawElements.splice(ut,1)[0],bt.push(yt),vt.push(yt.drawingId))),ut--;else for(ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].userId==At&&this.drawElements[ut].drawingId===ot&&(et.debug("[Whiteboard] element found with drawingId in undo laser :",ot),yt=this.drawElements.splice(ut,1)[0],bt.push(yt),vt.push(yt.drawingId));bt.length>0&&(this.redraw(),this.sendDataToRoom({tool:"void",delete:vt,undoneElements:bt}),this.redoStack.push(bt))},this.redo=function(){et.debug("[Whiteboard] redo()");var ot,ut=[];if(this.redoStack.length>0){for(ut=this.redoStack.pop(),ot=0;ot<ut.length;ot++)this.addNewDrawing(ut[ot]);this.sendDataToRoom({tool:"void",drawObjectsArray:ut}),this.redraw()}},this.setBrushSize=function(ot){et.debug("[Whiteboard] setBrushSize()"),!isNaN(ot)&&ot>0&&(this.currentBrushWidth=ot)},this.setBrushColor=function(ot){et.debug("[Whiteboard] setBrushColor()"),this.currentColor=ot},this.setScale=function(ot){et.debug("[Whiteboard] setScale()"),ot>0?(this.currentScale=ot,this.redraw()):et.warn("Scale factor must be > 0!")},this.getScale=function(){return et.debug("[Whiteboard] getScale()"),this.currentScale},this.setOffset=function(ot,ut){et.debug("[Whiteboard] setOffset()");var ft=parseInt(ot,10),bt=parseInt(ut,10);isNaN(ft)||isNaN(bt)||(this.dx=Number(ft),this.dy=Number(bt),this.redraw())},this.getOffset=function(){return et.debug("[Whiteboard] getOffset()"),{x:this.dx,y:this.dy}},this.printSharedText=function(ot,ut,ft,bt,vt,yt){et.debug("[Whiteboard] printSharedText()"),this.setBrushStyle(this.currentColor,this.currentBrushWidth),this.undoIndex++,this.redoStack=[];var At=0;apiCC.session!==null&&(At=apiCC.session.apiCCId);var Nt={type:"text",x:ot,y:ut,text:ft,size:bt,font:vt,border:yt,userId:At,drawingId:this.drawingId,color:this.currentColor,width:this.currentBrushWidth,undoIndex:this.undoIndex,time:Date.now()};this.sendDataToRoom({x:ot,y:ut,tool:"void",drawObject:Nt}),this.drawingId++,this.addNewDrawing(Nt)},this.addPeerListener=function(ot,ut){et.debug("[Whiteboard] addPeerListener()"),this.listenedPeers.hasOwnProperty(ot)||(this.listenedPeers[ot]=[]),this.listenedPeers[ot].push(ut)},this.inviteInRoom=function(ot,ut,ft){var bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};et.debug("[Whiteboard] inviteInRoom()"),ot!==null?ut!==null?apiCC.session.roomMgr.inviteInRoom(ot,ut,"whiteBoard",ft,bt):et.debug("wrong destId"):et.debug("wrong roomId")},this.answerToRoomInvitation=function(ot,ut){et.info("[Whiteboard] answerToRoomInvitation()");var ft=ut&&!this.isInRoom();return this.isInRoom()?et.error("[Whiteboard] cannot answer room invitation : user is already in a room"):apiCC.session.roomMgr.answerToRoomInvitation(ot,ut,"whiteBoard"),ft&&(et.log("[Whiteboard] user joining room"),this.paperSheetId=0,this.drawingId=0,this.roomId=ot,this.sendDataToRoom({tool:"void",needCatchUp:"*||-1"})),ft},this.joinRoom=function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};et.info("[Whiteboard] joinRoom() roomId :",ot),ot==null?et.error("[Whiteboard] cannot join room : room is null or undefined"):this.isInRoom()&&this.roomJoined===!0?et.error("[Whiteboard] cannot join room : user is already in a room"):apiCC.session.roomMgr.joinRoom(ot,"whiteBoard",ut)},this.leaveRoom=function(){et.info("[Whiteboard] leaveRoom()"),this.isInRoom()&&(apiCC.session.roomMgr.leaveRoom(this.roomId,"whiteBoard"),this.roomId=null,this.paperSheetId=0,this.drawingId=0,this.listenedPeers={},this.roomJoined=!1)},this.isInRoom=function(){return this.roomId!==null},this.clearPaper=function(){et.debug("[Whiteboard] clearPaper()"),this.deleteHistory()},this.refreshCanvas=function(){if(this.canvas!==null&&this.ctx!==null){var ot=this.canvas.width;this.canvas.width=ot}},this.deleteHistory=function(){et.info("[Whiteboard] deleteHistory()");var ot=0;apiCC.session!==null&&(ot=apiCC.session.apiCCId),this.refreshCanvas(),this.drawElements=[],this.ghostElements[ot]=null,this.paperSheetId++,this.drawingId=0,this.sendDataToRoom({tool:"void",deleteHistory:!0})},this.setBrushStyle=function(ot,ut){this.ctx!==null&&(this.ctx.strokeStyle=ot,this.ctx.fillStyle=ot,this.ctx.lineWidth=ut)},this.redraw=function(){var ot,ut,ft;for(et.debug("[Whiteboard] redraw()"),this.refreshCanvas(),ot=0;ot<this.drawElements.length;ot++)this.drawSingleObject(this.drawElements[ot]);for(ut=Object.keys(this.ghostElements),ot=0;ot<ut.length;ot++)this.ghostElements[ut[ot]]!==null&&this.drawSingleObject(this.ghostElements[ut[ot]]);for(ut=Object.keys(this.cursors),ot=0;ot<ut.length;ot++)if(this.cursors[ut[ot]]!==null&&this.cursors[ut[ot]].color!=="invisible"&&(this.cursors[ut[ot]].x!==0||this.cursors[ut[ot]].y!==0))switch(ft={fromx:(this.cursors[ut[ot]].x-this.dx)*this.currentScale-13,fromy:(this.cursors[ut[ot]].y-this.dy)*this.currentScale-13,tox:(this.cursors[ut[ot]].x-this.dx)*this.currentScale+13,toy:(this.cursors[ut[ot]].y-this.dy)*this.currentScale+13},this.setBrushStyle(this.cursors[ut[ot]].color,4),this.cursorStyle){case"circle":this.ctx!==null&&(this.ctx.globalAlpha=.4,this.fillEllipse(ft.fromx,ft.fromy,ft.tox,ft.toy),this.drawEllipse(ft.fromx+2,ft.fromy+2,ft.tox-2,ft.toy-2),this.ctx.globalAlpha=1);break;case"cross":this.ctx!==null&&(this.ctx.globalAlpha=.7,this.ctx.beginPath(),this.ctx.moveTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.fromy),this.ctx.lineTo(ft.fromx+(ft.tox-ft.fromx)/2,ft.toy),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(ft.fromx,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineTo(ft.tox,ft.fromy+(ft.toy-ft.fromy)/2),this.ctx.lineCap="butt",this.ctx.stroke(),this.ctx.globalAlpha=1)}},this.addNewDrawing=function(ot){var ut=0;this.drawElements.push(ot),this.drawSingleObject(ot),apiCC.session!==null&&(ut=apiCC.session.apiCCId),ot.userId===ut&&this.laserModeActivated===!0&&this.laserModeProcess(ot.drawingId)},this.drawSingleObject=function(ot){if(this.ctx!==null&&this.canvas!==null){var ut={};switch(this.setBrushStyle(ot.color,ot.width),this.ctx.scale(this.currentScale,this.currentScale),ut.fromx=ot.fromx-this.dx,ut.tox=ot.tox-this.dx,ut.x=ot.x-this.dx,ut.fromy=ot.fromy-this.dy,ut.toy=ot.toy-this.dy,ut.y=ot.y-this.dy,ot.type){case"arrow":this.drawArrow(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"ellipse":this.drawEllipse(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"rectangle":this.drawRectangle(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"pen":this.drawLine(ut.fromx,ut.fromy,ut.tox,ut.toy);break;case"erase":this.eraseArea(ut.fromx,ut.fromy);break;case"text":this.drawText(ut.x,ut.y,ot.text,ot.size,ot.font,ot.border)}this.ctx.scale(1/this.currentScale,1/this.currentScale)}},this.drawLine=function(ot,ut,ft,bt){this.ctx!==null&&(this.ctx.beginPath(),this.ctx.moveTo(ot,ut),this.ctx.lineTo(ft,bt),this.ctx.lineCap="round",this.ctx.stroke())},this.drawText=function(ot,ut,ft,bt,vt,yt){if(this.ctx!==null){var At,Nt,St="Arial";vt!=null&&(St=vt),this.ctx.font=bt+"px "+St,this.ctx.fillText(ft,ot,ut),yt!=null&&(At=this.ctx.strokeStyle,Nt=this.ctx.lineWidth,this.ctx.strokeStyle=yt,this.ctx.lineWidth=1,this.ctx.strokeText(ft,ot,ut),this.ctx.strokeStyle=At,this.ctx.lineWidth=Nt)}},this.eraseArea=function(ot,ut){this.ctx!==null&&this.ctx.clearRect(ot-this.ctx.lineWidth-1,ut-this.ctx.lineWidth-1,2*this.ctx.lineWidth+2,2*this.ctx.lineWidth+2)},this.drawArrow=function(ot,ut,ft,bt){if(this.ctx!==null){var vt=Math.atan2(bt-ut,ft-ot);this.ctx.beginPath(),this.ctx.lineCap="butt",this.ctx.moveTo(ot,ut),this.ctx.lineTo(ft,bt),this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(ft,bt),this.ctx.rotate(vt+Math.PI/2),this.ctx.moveTo(0,-this.ctx.lineWidth),this.ctx.lineTo(5*this.ctx.lineWidth*.5+1,10+.25*this.ctx.lineWidth),this.ctx.lineTo(-5*this.ctx.lineWidth*.5-1,10+.25*this.ctx.lineWidth),this.ctx.closePath(),this.ctx.restore(),this.ctx.fill()}},this.drawEllipse=function(ot,ut,ft,bt){var vt=null,yt=null;this.ctx!==null&&(vt={x:Math.abs(ot-ft)/2,y:Math.abs(ut-bt)/2},yt={x:ot-(ot-ft)/2,y:ut-(ut-bt)/2},this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(yt.x,yt.y,vt.x,vt.y,0,0,2*Math.PI),this.ctx.stroke())},this.fillEllipse=function(ot,ut,ft,bt){if(this.ctx!==null){var vt={x:Math.abs(ot-ft)/2,y:Math.abs(ut-bt)/2},yt={x:ot-(ot-ft)/2,y:ut-(ut-bt)/2};this.ctx.beginPath(),apiRTC.browser!=="IE"&&this.ctx.ellipse(yt.x,yt.y,vt.x,vt.y,0,0,2*Math.PI),this.ctx.fill()}},this.drawRectangle=function(ot,ut,ft,bt){if(this.ctx!==null){this.ctx.beginPath();var vt=ot,yt=ut;ot>ft&&(vt=ft),ut>bt&&(yt=bt),this.ctx.rect(vt,yt,Math.abs(ot-ft),Math.abs(ut-bt)),this.ctx.stroke()}},this.getContext=function(){return this.ctx},this.loadPhotoInBackground=function(ot){et.debug("[Whiteboard] loadPhotoInBackground :"+ot);var ut=document.getElementsByTagName("body")[0];ut.style.backgroundImage="url("+ot+")",ut.style.backgroundPosition="50% 50%",ut.style.backgroundRepeat="no-repeat"},this.messageProcessing=function(ot){et.debug("[Whiteboard] messageProcessing");var ut,ft=null,bt=null,vt=!1,yt=null,At=null,Nt=null,St=null,wt=null;if(this.cursors[ot.id]||(et.log("[Whiteboard] messageProcessing - creating cursor for new user : "+ot.id),this.cursors[ot.id]={id:ot.id},this.clients[ot.id]={}),this.cursors[ot.id].x=ot.x,this.cursors[ot.id].y=ot.y,this.cursors[ot.id].lastUpdate=Date.now(),ot.cursorColor&&ot.cursorColor!==null?this.cursors[ot.id].color=ot.cursorColor:this.cursors[ot.id].color="invisible",apiRTC.userAgentInstance===void 0||apiRTC.userAgentInstance.capabilities.whiteboardCursor==="ON"?this.cursors[ot.id].color!=="invisible"&&(vt=!0):(et.debug("[Whiteboard] - cursor is not supported on userAgent"),this.cursors[ot.id].color="invisible"),this.ghostElements[ot.id]!==null&&(this.ghostElements[ot.id]=null,vt=!0),this.listenedPeers.hasOwnProperty(ot.id))for(yt={id:ot.id,x:ot.x,y:ot.y,tool:ot.tool,drawing:ot.drawing},ut=0;ut<this.listenedPeers[ot.id].length;ut++)typeof this.listenedPeers[ot.id][ut]=="function"?this.listenedPeers[ot.id][ut](yt):et.warn("[Whiteboard] Peer listenener is not a function!");if(ot.drawing&&this.clients[ot.id]&&(et.debug("data.drawing && this.clients[data.id]"),bt={fromx:ot.prevX!==void 0?ot.prevX:this.clients[ot.id].x,fromy:ot.prevY!==void 0?ot.prevY:this.clients[ot.id].y,tox:ot.x,toy:ot.y,type:ot.tool!==null?ot.tool:"pen",color:ot.color,width:ot.width,userId:ot.id,drawingId:ot.drawingId},this.GEOMETRY_TOOLS.indexOf(bt.type)>-1?ot.prevX&&ot.prevY&&(this.ghostElements[ot.id]=bt,vt=!0):this.addNewDrawing(bt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(ot.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(ot.y-this.dy)-ft.clientHeight/2)),ot.drawObject&&((bt=ot.drawObject).color=ot.color,bt.width=ot.width,this.ghostElements[ot.id]=null,this.addNewDrawing(bt),this.focusOnDrawing&&((ft=this.canvas.parentNode).scrollLeft=this.currentScale*(ot.x-this.dx)-ft.clientWidth/2,ft.scrollTop=this.currentScale*(ot.y-this.dy)-ft.clientHeight/2)),ot.hasOwnProperty("drawObjectsArray"))for(ut=0;ut<ot.drawObjectsArray.length;ut++)this.addNewDrawing(ot.drawObjectsArray[ut]);if(ot.hasOwnProperty("delete"))for(ut=this.drawElements.length-1,vt=!0;ut>=0;)ot.delete.indexOf(this.drawElements[ut].drawingId)>-1&&this.drawElements[ut].userId==ot.id&&this.drawElements.splice(ut,1),ut--;if(ot.hasOwnProperty("paperSheetId")){if(ot.paperSheetId<this.paperSheetId)et.debug("[Whiteboard] - data.paperSheetId < this.paperSheetId");else if(ot.paperSheetId>this.paperSheetId){if(et.debug("[Whiteboard] - messageProcessing : peer has a more recent version : "+this.paperSheetId+" vs "+ot.paperSheetId),ot.hasOwnProperty("deleteHistory")&&et.debug("User : "+ot.id+" ,has deleted the history"),ot.hasOwnProperty("drawElements")){for(et.debug("[Whiteboard] - messageProcessing : receiving update from peer"),ot.drawElements!==null?this.drawElements=ot.drawElements:this.drawElements=[],ut=0;ut<this.drawElements.length;ut++)this.drawElements[ut].hasOwnProperty("userId")&&this.drawElements[ut].hasOwnProperty("drawingId")&&(this.clients[this.drawElements[ut].userId]={x:0,y:0,drawing:!1,tool:"pen",cursorColor:null,color:null,width:1,paperSheetId:this.paperSheetId,drawingId:this.drawElements[ut].drawingId,id:this.drawElements[ut].userId});this.paperSheetId=ot.paperSheetId,this.drawingId=0,vt=!0}}else if(ot.hasOwnProperty("drawingId"))if(et.debug("[Whiteboard] - data.hasOwnProperty(drawingId): "),ot.drawingId!==0&&this.clients[ot.id]===void 0||this.clients[ot.id]!==void 0&&this.clients[ot.id].hasOwnProperty("drawingId")&&ot.drawingId-this.clients[ot.id].drawingId>1)et.log("[Whiteboard] - messageProcessing : catchup from peer required : "+ot.drawingId),St=ot.id+"||-1",this.clients[ot.id]!==void 0&&this.clients[ot.id].hasOwnProperty("drawingId")&&(St=ot.id+"||"+this.clients[ot.id].drawingId),this.sendDataToRoom({tool:"void",needCatchUp:St});else if(ot.hasOwnProperty("needCatchUp")&&(ot.needCatchUp.startsWith(apiCC.session.apiCCId+"||")||ot.needCatchUp.startsWith("*||"))){for(et.debug("[Whiteboard] - messageProcessing : letting peer catchup: "+ot.id),At=ot.needCatchUp.split("||")[1],Nt=[],ut=0;ut<this.drawElements.length;ut++)(wt=this.drawElements[ut]).hasOwnProperty("userId")&&wt.hasOwnProperty("drawingId")&&wt.userId===apiCC.session.apiCCId&&wt.drawingId>parseInt(At,10)&&Nt.push(wt);this.sendDataToRoom({tool:"void",catchUpData:Nt,catchupIndex:At})}else et.debug("[Whiteboard] - else - drawingId");else if(ot.hasOwnProperty("needCatchUp")){for(et.debug("[Whiteboard] - messageProcessing : needCatchUp"+ot.id),At=ot.needCatchUp.split("||")[1],Nt=[],ut=0;ut<this.drawElements.length;ut++)wt=this.drawElements[ut],Nt.push(wt);et.debug("[Whiteboard] - sending catchUpData : ",Nt),this.sendDataToRoom({tool:"void",catchUpData:Nt,catchupIndex:At})}else et.debug("[Whiteboard] - else - paperSheetId");if(ot.hasOwnProperty("catchUpData")){for(et.debug("[Whiteboard] - messageProcessing : catching up: "+ot.id),ot.catchUpStatus==="complete"&&(et.debug("catchUpData is complete, cleaning drawElements"),this.drawElements.splice(0,this.drawElements.length)),ut=0;ut<ot.catchUpData.length;ut++)wt=ot.catchUpData[ut],ot.userId===apiCC.session.apiCCId&&wt.hasOwnProperty("drawingId")&&this.drawingId<wt.drawingId&&(this.drawingId=wt.drawingId+1);this.drawElements=ot.catchUpData.concat(this.drawElements),this.paperSheetId=ot.paperSheetId,vt=!0}}vt&&this.redraw(),this.clients[ot.id]=ot},this.isStarted=function(){return this.sessionStarted},this.start=function(){this.isStarted()?et.warn("[Whiteboard] WhiteBoardClient is already started"):(et.info("[Whiteboard] starting WhiteBoardClient"),this.isDrawing=!1,this.prev={},this.lastEmit=Date.now(),this.currentScale=1,this.dx=0,this.dy=0,this.drawingId=0,this.clients={},this.listenedPeers={},this.cursors={},this.drawElements=[],this.touchScreenActivated=!1,this.sessionStarted=!0,this.canvas!==null&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove),this.redraw()),apiCC.session!==null&&apiCC.session.roomMgr!==void 0||(et.log("[Whiteboard] roomMgr is not defined, setting offline mode"),this.offline=!0)},this.stop=function(){this.isStarted()?(et.info("[Whiteboard] Stopping WhiteBoardClient"),this.isInRoom()&&this.leaveRoom(),this.sessionStarted=!1,this.canvas!==null&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1))),this.drawElements=[],this.ghostElements={},this.redoStack=[]):et.info("[Whiteboard] cannot stop WhiteboardClient as it is not started")},this.getTouchOffSet=function(ot){et.debug("[Whiteboard] getTouchOffSet():");var ut,ft,bt,vt,yt=null,At={offsetX:0,offsetY:0};return yt=ot.target,ut=window.getComputedStyle(yt,null),ft=parseInt(ut.borderLeftWidth,10),bt=parseInt(ut.borderTopWidth,10),vt=yt.getBoundingClientRect(),At.offsetX=ot.clientX-ft-vt.left,At.offsetY=ot.clientY-bt-vt.top,et.log("offset.offsetX :"+At.offsetX),et.log("offset.offsetY :"+At.offsetY),At},this.toggleTouchScreen=function(){this.touchScreenActivated===!0?this.deactivateTouchScreen():this.activateTouchScreen()},this.activateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!0,this.canvas.addEventListener("touchstart",this.onTouchStart,!1),this.canvas.addEventListener("touchend",this.onTouchEnd,!1),this.canvas.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.addEventListener("touchleave",this.onTouchEnd,!1),this.canvas.addEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to activateTouchScreen() while canvas is null.")},this.deactivateTouchScreen=function(){this.canvas!==null?(this.touchScreenActivated=!1,this.canvas.removeEventListener("touchstart",this.onTouchStart,!1),this.canvas.removeEventListener("touchend",this.onTouchEnd,!1),this.canvas.removeEventListener("touchcancel",this.onTouchCancel,!1),this.canvas.removeEventListener("touchleave",this.onTouchEnd,!1),this.canvas.removeEventListener("touchmove",this.onTouchMove,!1)):et.warn("Trying to deactivateTouchScreen() while canvas is null.")},this.activateLaserMode=function(){this.laserModeActivated=!0},this.deactivateLaserMode=function(){this.laserModeActivated=!1},this.sendDrawingData=function(ot,ut,ft){et.debug("[Whiteboard] sendDrawingData()");var bt={x:ot.offsetX,y:ot.offsetY,drawing:ut,prevX:this.prev.x,prevY:this.prev.y};if(ut!==!1||this.userCursorColor!=="invisible"){var vt=0;apiCC.session!==null&&(vt=apiCC.session.apiCCId),ft!==null&&(bt.drawObject=ft,bt.drawObject.drawingId=this.drawingId,bt.drawObject.userId=vt,this.drawingId++),bt.drawingId=this.drawingId,this.sendDataToRoom(bt)}else et.debug("isDrawing false and userCursorColor invisible - leaving sendDrawingData")},this.onmousedown=(function(ot){ot.preventDefault();var ut,ft,bt=ot.target||ot.srcElement,vt=bt.currentStyle||window.getComputedStyle(bt,null),yt=parseInt(vt.borderLeftWidth,10)||0,At=parseInt(vt.borderTopWidth,10)||0,Nt=bt.getBoundingClientRect(),St={offsetX:this.dx+1/this.currentScale*(ot.clientX-yt-Nt.left),offsetY:this.dy+1/this.currentScale*(ot.clientY-At-Nt.top)};if(this.prev.x=St.offsetX,this.prev.y=St.offsetY,this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(ut=document.getElementById(pt))===null||this.instructionsFaded||(mt(ut),this.instructionsFaded=!0),this.currentTool==="erase"){this.sendDrawingData(St,this.isDrawing,null);var wt=0;apiCC.session!==null&&(wt=apiCC.session.apiCCId),this.lastEmit=Date.now(),ft={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:wt,drawingId:this.drawingId,undoIndex:this.undoIndex,time:Date.now()},this.drawingId++,this.addNewDrawing(ft),this.redraw()}}).bind(this),this.onmouseup=(function(ot){var ut,ft=null,bt=null,vt=0,yt=0,At=null,Nt={offsetX:0,offsetY:0},St=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(bt=(ft=ot.target||ot.srcElement).currentStyle||window.getComputedStyle(ft,null),vt=parseInt(bt.borderLeftWidth,10)||0,yt=parseInt(bt.borderTopWidth,10)||0,At=ft.getBoundingClientRect(),Nt.offsetX=this.dx+1/this.currentScale*(ot.clientX-vt-At.left),Nt.offsetY=this.dy+1/this.currentScale*(ot.clientY-yt-At.top),apiCC.session!==null&&(St=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:Nt.offsetX,toy:Nt.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:St,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(Nt,this.isDrawing,ut),this.ghostElements[St]=null,this.redraw(),this.addNewDrawing(ut),this.prev.x=Nt.offsetX,this.prev.y=Nt.offsetY),this.isDrawing=!1,this.ghostElements[St]=null}).bind(this),this.onmouseleave=(function(){var ot=0;apiCC.session!==null&&(ot=apiCC.session.apiCCId),this.isDrawing=!1,this.sendDrawingData({offsetX:0,offsetY:0},this.isDrawing,null),this.ghostElements[ot]=null}).bind(this),this.onmousemove=(function(ot){var ut,ft,bt,vt,yt,At=null,Nt={};if(ut=(At=ot.target||ot.srcElement).currentStyle||window.getComputedStyle(At,null),ft=parseInt(ut.borderLeftWidth,10)||0,bt=parseInt(ut.borderTopWidth,10)||0,vt=At.getBoundingClientRect(),Nt.offsetX=this.dx+1/this.currentScale*(ot.clientX-ft-vt.left),Nt.offsetY=this.dy+1/this.currentScale*(ot.clientY-bt-vt.top),Date.now()-this.lastEmit>30)if(this.sendDrawingData(Nt,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing){var St=0;apiCC.session!==null&&(St=apiCC.session.apiCCId),yt={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:St,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(yt.tox=Nt.offsetX,yt.toy=Nt.offsetY),yt.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(yt),this.prev.x=Nt.offsetX,this.prev.y=Nt.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(yt.tox=Nt.offsetX,yt.toy=Nt.offsetY,this.ghostElements[St]=yt),this.currentTool!=="pen"&&this.redraw()}else this.currentTool==="erase"&&(this.redraw(),yt={type:"rectangle",fromx:Nt.offsetX-this.currentBrushWidth,fromy:Nt.offsetY-this.currentBrushWidth,tox:parseInt(Nt.offsetX,10)+parseInt(this.currentBrushWidth,10),toy:parseInt(Nt.offsetY,10)+parseInt(this.currentBrushWidth,10),color:"#444444",width:1},this.drawSingleObject(yt),yt.color="#DDDDDD",yt.fromx=yt.fromx-1,yt.fromy=yt.fromy-1,yt.tox=yt.tox+1,yt.toy=yt.toy+1,this.drawSingleObject(yt))}).bind(this),this.onTouchStart=(function(ot){et.debug("[Whiteboard] handleStart"),ot.preventDefault();var ut,ft=ot.changedTouches,bt={};this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(bt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*bt.offsetX,bt.offsetY=this.dy+1/this.currentScale*bt.offsetY,this.prev.x=bt.offsetX,this.prev.y=bt.offsetY,this.sendDrawingData(bt,!1,null),(ut=document.getElementById(pt))!==null&&mt(ut)}).bind(this),this.onTouchEnd=(function(ot){et.debug("[Whiteboard] handleEnd :"+ot);var ut,ft={},bt=ot.changedTouches,vt=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&((ft=this.getTouchOffSet(bt[0])).offsetX=this.dx+1/this.currentScale*ft.offsetX,ft.offsetY=this.dy+1/this.currentScale*ft.offsetY,apiCC.session!==null&&(vt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:ft.offsetX,toy:ft.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:vt,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(ft,this.isDrawing,ut),this.addNewDrawing(ut),this.prev.x=ft.offsetX,this.prev.y=ft.offsetY),this.isDrawing=!1,this.ghostElements[vt]=null,ot=null}).bind(this),this.onTouchCancel=(function(ot){et.debug("[Whiteboard] handleCancel :"+ot);var ut=0;apiCC.session!==null&&(ut=apiCC.session.apiCCId),this.isDrawing=!1,this.ghostElements[ut]=null,ot=null}).bind(this),this.onTouchMove=(function(ot){et.debug("[Whiteboard] handleMove :"+ot);var ut,ft=ot.changedTouches,bt={};if(Date.now()-this.lastEmit>30&&((bt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*bt.offsetX,bt.offsetY=this.dy+1/this.currentScale*bt.offsetY,this.sendDrawingData(bt,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing)){(bt=this.getTouchOffSet(ft[0])).offsetX=this.dx+1/this.currentScale*bt.offsetX,bt.offsetY=this.dy+1/this.currentScale*bt.offsetY;var vt=0;apiCC.session!==null&&(vt=apiCC.session.apiCCId),ut={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:vt,undoIndex:this.undoIndex,time:Date.now()},this.currentTool==="pen"||this.currentTool==="erase"?(this.currentTool==="pen"&&(ut.tox=bt.offsetX,ut.toy=bt.offsetY),ut.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(ut),this.prev.x=bt.offsetX,this.prev.y=bt.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(ut.tox=bt.offsetX,ut.toy=bt.offsetY,this.ghostElements[vt]=ut,this.redraw())}}).bind(this)}},8560:(rt,it,s)=>{s.r(it),s(2772),s(3710),s(9554),s(1539),s(8674),s(561),s(2564),s(8309),s(4916),s(3123),s(1058),s(6992),s(8783),s(3948),s(285),s(1637),s(4363),s(9653),s(9714),s(3843),s(7941),s(4812),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2222),s(9600),s(6755),s(4747),s(2526),s(1817),s(2165);var et=s(1549),nt=s(5945),at=s(8765),ht=s(1215),dt=s(3173),pt=et.Y.get("RecordManager"),lt=s(4708);function mt(St,wt){for(var Mt=0;Mt<wt.length;Mt++){var Ht=wt[Mt];Ht.enumerable=Ht.enumerable||!1,Ht.configurable=!0,"value"in Ht&&(Ht.writable=!0),Object.defineProperty(St,Ht.key,Ht)}}s(2707),s(7042),s(9070);var ot=et.Y.get("AudioProcessor"),ut=window.AudioContext||window.webkitAudioContext||!1,ft=function(){function St(){(function(Ht,Ot){if(!(Ht instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,St),this.audioContext=null}var wt,Mt;return wt=St,(Mt=[{key:"getOrCreateAudioContext",value:function(){return ot.debug("getOrCreateAudioContext"),apiRTC.osName==="iOS"&&typeof cordova<"u"?ot.debug("No audioContext for iOS cordova"):ut&&(this.audioContext=new ut),this.audioContext.state==="suspended"&&this.audioContext.resume().then(function(){ot.debug("AudioContext is resumed")}),this.audioContext}},{key:"listenToAudio",value:function(Ht,Ot){if(ot.debug("listenToAudio()"),Ot!=null&&apiCC.activeSpeakerDetect===!0&&Ot.childStreamType!=="noiseReduction"){ot.debug("activeSpeakerDetect()");var Dt=null,Gt=!1,nn=this.getOrCreateAudioContext();nn!=null?(Ot.nodeCtx={},Ot.nodeCtx.sourceNode=nn.createMediaStreamSource(Ht),Ot.nodeCtx.analyserNode=nn.createAnalyser(),Ot.nodeCtx.analyserNode.fftSize=2048,Ot.nodeCtx.sourceNode.connect(Ot.nodeCtx.analyserNode),Ot.nodeCtx.listenToAudioIntervalId=setInterval(function(){var zt,Ft,un=new Uint8Array(Ot.nodeCtx.analyserNode.frequencyBinCount),vn=0;for(Ot.nodeCtx.analyserNode.getByteFrequencyData(un),un.sort(function(yn,cn){return cn-yn}),un=un.slice(0,50),Ft=0;Ft<un.length;Ft++)vn+=un[Ft];(zt=vn/un.length)>255*apiCC.activeSpeakerThreshold&&(Gt||(Gt=!0,Ot.notifyActiveSpeaker(zt),ot.debug("notifyActiveSpeaker this.userMediaStreamId :",Ot.userMediaStreamId)),Dt!==null&&clearTimeout(Dt),Dt=setTimeout(function(){Ot.notifyNotActiveSpeaker(zt),ot.debug("notifyNotActiveSpeaker this.userMediaStreamId :",Ot.userMediaStreamId),Gt=!1},1e3))},100)):ot.error("listenToAudio() - Unable to create audio context")}else ot.debug("activeSpeakerDetecting is not activated or stream type is noiseReduction")}},{key:"checkstopAudioNodeCtxConditions",value:function(Ht){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Ht===void 0?"nodeCtx undefined":"OK"}},{key:"stopAudioNodeCtx",value:function(Ht){ot.debug("stopAudioNodeCtx :",Ht);var Ot=this.checkstopAudioNodeCtxConditions(Ht);if(Ot!=="OK")return Ot;Ht.sourceNode!==void 0&&Ht.sourceNode!==null&&(Ht.sourceNode.disconnect(),Ht.sourceNode=null),Ht.analyserNode!==void 0&&Ht.analyserNode!==null&&(Ht.analyserNode.disconnect(),Ht.analyserNode=null),Ht.audioDestination!==void 0&&Ht.audioDestination!==null&&(Ht.audioDestination.disconnect(),Ht.audioDestination=null),Ht.originalMediaTrack!==void 0&&Ht.originalMediaTrack!==null&&(Ht.originalMediaTrack=null),Ht.outputMediaTrack!==void 0&&Ht.outputMediaTrack!==null&&(Ht.outputMediaTrack=null),Ht.listenToAudioIntervalId!==void 0&&Ht.listenToAudioIntervalId!==null&&(clearInterval(Ht.listenToAudioIntervalId),Ht.listenToAudioIntervalId=null),Ht.noiseSuppressorNode!==void 0&&Ht.noiseSuppressorNode!==null&&(Ht.noiseSuppressorNode.port.onmessage=null,Ht.noiseSuppressorNode.port.close(),Ht.noiseSuppressorNode=null)}},{key:"checkChildTypeConditions",value:function(Ht){return apiCC.userAgentInstance!==void 0&&apiCC.userAgentInstance.getCapabilities().noiseReduction==="OFF"?"Navigator not compatible with this function":Ht.childType!==void 0&&Ht.childType==="noiseReduction"?"This stream has already a noiseReduction effect applied : "+Ht.childType:Ht.childrenTypeExists("noiseReduction")?"This stream has already has a noiseReduction sub instance running":"OK"}},{key:"startNoiseReduction",value:function(Ht){var Ot=this,Dt=null,Gt=!1;return new Promise(function(nn,zt){ot.debug("startNoiseReduction");var Ft=Ot.checkChildTypeConditions(Ht);if(Ft!=="OK")return zt(Ft);Ht.nodeCtx={},Ht.nodeCtx.originalMediaTrack=Ht.data.getAudioTracks()[0];var un=apiCC.audioProcessor.getOrCreateAudioContext();Ht.nodeCtx.sourceNode=un.createMediaStreamSource(Ht.data);var vn={channelCount:Ht.data.getAudioTracks()[0].getSettings().channelCount,channelCountMode:"explicit"};Ht.nodeCtx.audioDestination=new MediaStreamAudioDestinationNode(un,vn),Ht.nodeCtx.outputMediaTrack=Ht.nodeCtx.audioDestination.stream.getAudioTracks()[0],un.audioWorklet.addModule("https://cdn.apizee.com/apiRTC/lib/noiseReduction/ApiRTC_NR_Worklet_1.0.1.js").then(function(){Ht.nodeCtx.noiseSuppressorNode=new AudioWorkletNode(un,"NoiseSuppressorWorklet",{parameterData:{activeSpeakerDetect:apiCC.activeSpeakerDetect}}),Ht.nodeCtx.sourceNode.connect(Ht.nodeCtx.noiseSuppressorNode).connect(Ht.nodeCtx.audioDestination);var yn={audioFilterIsApplied:Ht.audioFilterIsApplied,audioAppliedFilter:Ht.audioAppliedFilter,videoFilterIsApplied:Ht.videoFilterIsApplied,videoAppliedFilter:Ht.videoAppliedFilter,childType:Ht.childType},cn=Ht.nodeCtx.audioDestination.stream;Ht.data.getVideoTracks().forEach(function(gn){cn.addTrack(gn.clone())}),Ht.createChildStreamFromStream(cn,"noiseReduction",yn).then(function(gn){Ht.addChildren(gn,"noiseReduction"),gn.applyMuteStatusFromParent();var Cn=apiCC.getUserMediaStream(Ht.userMediaStreamId);apiCC.audioProcessor.stopAudioNodeCtx(Cn.nodeCtx);var fn=apiCC.getUserMediaStream(gn.userMediaStreamId);return Ht.nodeCtx.noiseSuppressorNode.port.onmessage=function(Tn){Tn.data.vadScore>apiCC.activeSpeakerThreshold&&(Gt||(Gt=!0,fn.notifyActiveSpeaker(Tn.data.vadScore),ot.debug("notifyActiveSpeaker this.userMediaStreamId :",fn.userMediaStreamId)),Dt!==null&&clearTimeout(Dt),Dt=setTimeout(function(){fn.notifyNotActiveSpeaker(Tn.data.vadScore),ot.debug("notifyNotActiveSpeaker this.userMediaStreamId :",fn.userMediaStreamId),Gt=!1},1e3))},nn(gn)}).catch(zt)}).catch(function(yn){console.error("Error while adding audio worklet module: ",yn)})})}}])&&mt(wt.prototype,Mt),Object.defineProperty(wt,"prototype",{writable:!1}),St}();function bt(St){return bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt},bt(St)}var vt=et.Y.get("ApiCC_Methods"),yt=s(6075).F;apiCC.myWebRTC_Adapter=new yt,apiCC.myWebRTC_Event=new at.K;var At=apiCC.myWebRTC_Event;apiCC.myEventTable=[],apiCC.ApiCCSession=s(3720).K,apiCC.ApiCCWebRTCClient=s(1192).D,apiCC.ApiCCUserMediaStream=s(7323).q,apiCC.ApiCCPointerSharingClient=s(9213).X,apiCC.ApiCCWhiteBoardClient=s(6527).p,apiCC.ApiCCDataClient=s(128)._,apiCC.ApiCCIMClient=s(6844).U,apiCC.recordMgr=new function(){pt.debug("RecordManager creation"),this.mediaRecorder=null,this.recordedBlobs=[],this.mimeType=null,this.record=function(St,wt){var Mt=this;return pt.info("record"),pt.log("stream :"+St),pt.log("stream :",St),new Promise(function(Ht,Ot){var Dt=null;if(MediaRecorder===void 0)return pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt));if(St===null)return pt.debug("Stream has no data, cannot record"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"Stream has no data, cannot record",pt));if(Mt.mediaRecorder!==null&&(pt.log("this.mediaRecorder.state :"+Mt.mediaRecorder.state),Mt.mediaRecorder.state==="recording"||Mt.mediaRecorder.state==="paused"))return pt.log("mediaRecorder is already ongoing, use stopRecordStream before trying another record"),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already ongoing, use stopRecordStream before trying another record",pt));if(pt.debug("checking MediaRecorderOptions mimeType support"),wt!=null?(pt.debug("options is defined :",wt),wt.mimeType!==null&&wt.mimeType!==void 0&&(pt.debug("contentType is defined :",wt.mimeType),MediaRecorder.isTypeSupported(wt.mimeType)&&(Dt=wt.mimeType))):wt={},Dt===null){var Gt="video/webm;codecs=vp8,opus";MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt="video/webm;codecs=vp9,opus",MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt="video/webm",MediaRecorder.isTypeSupported(Gt)||(pt.debug(Gt+" is not Supported"),Gt=""))),wt.mimeType=Gt}Mt.mimeType=wt.mimeType,pt.debug("Start record with MediaRecorderOptions :",wt);try{Mt.recordedBlobs=[],Mt.mediaRecorder=new MediaRecorder(St,wt)}catch(nn){return pt.error("Exception while creating MediaRecorder: "+nn+". mimeType: "+wt.mimeType),void Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"Exception while creating MediaRecorder: "+nn+". mimeType: "+wt.mimeType,pt))}Mt.mediaRecorder.onstart=function(nn){pt.log("onstart :"+nn),this.onerror=null,Ht()},Mt.mediaRecorder.ondataavailable=function(nn){nn.data&&nn.data.size>0&&apiCC.recordMgr.recordedBlobs.push(nn.data)},Mt.mediaRecorder.onerror=function(nn){pt.log("onerror :"+nn),Ot(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+nn,pt)),this.onerror=null},Mt.mediaRecorder.start(10),pt.log("MediaRecorder started",Mt.mediaRecorder)})},this.stop=function(){var St=this;return pt.info("stop"),new Promise(function(wt,Mt){return St.mediaRecorder.onstop=function(Ht){pt.log("mediaRecorder onstop :"+Ht),this.onstart=null,this.onstop=null,this.onerror=null,this.onpause=null,this.onresume=null,this.ondataavailable=null;var Ot=new Blob(apiCC.recordMgr.recordedBlobs,{type:this.mimeType});wt(Ot)},MediaRecorder===void 0?(pt.debug("MediaRecorder is not supported on this browser, leaving recordStream process"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"MediaRecorder is not supported on this browser, leaving recordStream process",pt))):St.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to stop"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to stop",pt))):(pt.log("this.mediaRecorder.state :"+St.mediaRecorder.state),St.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is already inactive"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already inactive",pt))):void St.mediaRecorder.stop())})},this.pause=function(){var St=this;return pt.info("pause"),new Promise(function(wt,Mt){return St.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to pause"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to pause",pt))):(pt.log("this.mediaRecorder.state :"+St.mediaRecorder.state),St.mediaRecorder.state==="paused"?(pt.log("mediaRecorder is already paused"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already paused",pt))):St.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(St.mediaRecorder.onerror=function(Ht){pt.log("onerror :"+Ht),Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Ht,pt)),this.onerror=null},St.mediaRecorder.onpause=function(Ht){pt.log("onpause :"+Ht),this.onerror=null,wt()},void St.mediaRecorder.pause()))})},this.resume=function(){var St=this;return pt.info("resume"),new Promise(function(wt,Mt){return St.mediaRecorder===null?(pt.log("mediaRecorder is not running, use startRecordStream before trying to resume"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is not running, use startRecordStream before trying to resume",pt))):(pt.log("this.mediaRecorder.state :"+St.mediaRecorder.state),St.mediaRecorder.state==="recording"?(pt.log("mediaRecorder is already recording"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is already recording",pt))):St.mediaRecorder.state==="inactive"?(pt.log("mediaRecorder is inactive"),void Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder is inactive",pt))):(St.mediaRecorder.onerror=function(Ht){pt.log("onerror :"+Ht),Mt(ht.g.createError(dt.g.ERROR_STREAM_RECORD,"mediaRecorder error :"+Ht,pt)),this.onerror=null},St.mediaRecorder.onresume=function(Ht){pt.log("onresume :"+Ht),this.onerror=null,wt()},void St.mediaRecorder.resume()))})}},apiCC.audioProcessor=new ft,apiCC.pendingPromises=[],apiCC.pendingPromisesId=0,nt.$6!=="electron"?s(2746):vt.debug("Electron detected, not loading onbeforeunload"),apiCC.addEventListener=function(St,wt,Mt){var Ht={},Ot=null;["sessionReady","incomingCall","callEstablished","remoteHangup","userMediaSuccess","userMediaError","userMediaStop","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCUAvailableReplay","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","localStreamRemoved","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onCallScoreUpdate","activeSpeaker","stopSpeaking","audioAmplitude","preCallTestStatus","onQosVideoChange","onCallStatsUpdate","cpuLimited","bandwidthLimited","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","callRestarting","selectedICECandidate","MCUParticipantEjected","MCURoomModeChanged","MCUStreamingStarted","MCUStreamingStopped","mediaDeviceChanged","externalJsLoadingStatus","slowLink","localStreamUpdated","remoteStreamUpdated","simulcastFeedChanged","videoQualityChanged","bandwidthResourceManagement","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","cloudEventOccurred"].indexOf(St)>-1?(St==="remoteHangup"&&vt.warn("DEPRECATED : ApiRTC : remoteHangup event is now deprecated, please use hangup event instead"),vt.log("Adding listener on type :"+St),typeof apiRTC_React<"u"?eventManager.addEventListener(St,wt):document.addEventListener?document.addEventListener(St,wt,!1):typeof $jqApz<"u"?(vt.log("using $jqApz"),$jqApz(document).on(St,wt)):typeof jQuery<"u"?(vt.log("using jQuery"),jQuery(document).on(St,wt)):vt.warn("Custom Events not supported on this browser : addEventListener()"),Ht={type:St,listener:wt,setBy:Mt},Ot=apiCC.myEventTable.push(Ht),vt.trace("number of myEventTable:"+Ot)):(At.createErrorEvent("ERROR: Trying to add a listener on an unknow event","UNKNOWN_EVENT_ON_ADDLISTENER"),vt.log("ERROR: Trying to add a listener on an unknow event :"+St))},apiCC.removeEventListener=function(St,wt){vt.debug("Removing listener on type :"+St),document.removeEventListener?document.removeEventListener(St,wt,!1):typeof jQuery<"u"?jQuery(document).off(St,wt):vt.log("Custom Events not supported on this browser")},apiCC.setSessionStorage=function(St,wt,Mt){vt.debug("setSessionStorage"),Mt=Mt||36e5;var Ht=new Date,Ot=new Date;Ot.setTime(Ht.getTime()+Mt);try{var Dt=JSON.stringify({value:wt,expiresAt:Ot});sessionStorage.setItem(St,Dt)}catch{vt.error("Sotheming went wrong during json strigify to set session storage values")}},apiCC.isWebRTCCompliant=function(){vt.debug("isWebRTCCompliant");var St=!1,wt=!1;return["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(Mt){St||Mt in window&&(St=!0)}),St===!1?(vt.debug("isWebRTCCompliant::isWebRTCSupported false"),!1):(["getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia"].forEach(function(Mt){wt||Mt in navigator&&(wt=!0)}),wt===!1?(vt.debug("isWebRTCCompliant::isWebRTCGUMSupported false or you are connected with HTTP"),!1):nt.Xh==="MIUI Browser"?(vt.debug("isWebRTCCompliant::MIUI Browser detected false"),!1):nt.Xh==="UCBrowser"?(vt.debug("isWebRTCCompliant::UCBrowser detected false"),!1):nt.Xh==="QQ"||nt.Xh==="QQBrowser"||nt.Xh==="QQBrowserLite"?(vt.debug("isWebRTCCompliant::QQ or QQBrowser or QQBrowserLite detected false"),!1):nt.Xh==="Baidu"||nt.Xh==="baidu"?(vt.debug("isWebRTCCompliant::Baidu or baidu detected false"),!1):(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&this.webRTCPluginActivated!==!0?(vt.debug("isWebRTCCompliant FALSE : IE or Safari"),!1):(vt.debug("isWebRTCCompliant:: WebRTC is supported"),!0))},apiCC.isQoSStatCompliant=function(){var St=!1;return["chrome","firefox","safari"].indexOf(apiCC.browserDetails.type)<0?(vt.debug("QoS Statistics is only supported on Chrome, Firefox and Safari"),St):St=!0},apiCC.isScreenSharingCompliant=function(){var St=!1;return typeof apiRTC_React<"u"?St=!0:(nt.Xh==="IE"||nt.BF==="Android"||apiRTC.osName==="iOS"&&typeof cordova<"u"||(nt.Xh==="Chrome"||nt.Xh==="Firefox"&&nt.PR>=52||navigator.getDisplayMedia||navigator.mediaDevices.getDisplayMedia?St=!0:vt.debug("ScreenSharing is not supported")),St)},apiCC.getMediaDevices=function(){return vt.debug("getMediaDevices"),new Promise(function(St,wt){if(typeof apiRTC_React<"u")vt.log("enumerateDevices() is supported - React Native"),mediaDevices.enumerateDevices().then(function(Mt){vt.log("enumerateDevices(), sources :",Mt),apiCC.mediaDeviceMgr.mediaSourceInfos=Mt,St(Mt)}).catch(function(Mt){vt.log("enumerateDevices(), error :",Mt),wt(Mt)});else if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)vt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(function(Mt){vt.log("enumerateDevices(), sources :",Mt),apiCC.mediaDeviceMgr.mediaSourceInfos=Mt,St(Mt)}).catch(function(Mt){vt.log("enumerateDevices(), error :",Mt),wt(Mt)});else if(vt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")vt.warn("This browser does not support MediaStreamTrack"),wt(new Error("getMediaDevices() - MediaStreamTrack undefined"));else try{MediaStreamTrack.getSources(St)}catch(Mt){vt.debug("catch MediaStreamTrack.getSources :"+Mt),wt(new Error("getMediaDevices() - Error on MediaStreamTrack.getSources :"+Mt))}})},apiCC.getMediaDevicesWithCB=function(St){if(vt.debug("getMediaDevicesWithCB"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)vt.log("enumerateDevices() is supported."),navigator.mediaDevices.enumerateDevices().then(St).catch(function(wt){vt.log("navigator.mediaDevices.enumerateDevices error: ",wt),wt=null});else if(vt.log("enumerateDevices() not supported."),typeof MediaStreamTrack>"u")St(null),vt.warn("This browser does not support MediaStreamTrack");else try{MediaStreamTrack.getSources(St)}catch(wt){vt.debug("catch MediaStreamTrack.getSources :"+wt),St(null)}},apiCC.getUserMedia=function(St){return vt.info("getUserMedia"),vt.debug("with constraints :",St),new Promise(function(wt,Mt){navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(vt.debug("webRTC getUserMedia with promises"),navigator.mediaDevices.getUserMedia(St).then(wt).catch(Mt)):typeof apiRTC_React<"u"?(vt.debug("webRTC getUserMedia with promises on React Native"),mediaDevices.getUserMedia(St).then(wt).catch(Mt)):(vt.debug("webRTC getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(St,wt,Mt))})},apiCC.getUserMediaWithCB=function(St,wt,Mt){vt.info("getUserMediaWithCB"),vt.debug("with constraints :"+JSON.stringify(St)),navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?(vt.log("getUserMedia with promises"),navigator.mediaDevices.getUserMedia(St).then(wt).catch(Mt)):(vt.log("getUserMedia without promises"),apiCC.myWebRTC_Adapter.getUserMedia(St,wt,Mt))},apiCC.userMediaStreamTable=[],apiCC.getUserMediaStreamIds=function(){for(var St=[],wt=apiCC.userMediaStreamTable.length;--wt>=0;)St.push(apiCC.userMediaStreamTable[wt].userMediaStreamId);return St},apiCC.getUserMediaStream=function(St,wt){var Mt=null,Ht=apiCC.userMediaStreamTable.length;if(St==null){if(wt&&typeof wt.accept=="function"){for(;--Ht>=0;)if(wt.accept(apiCC.userMediaStreamTable[Ht])===!0){Mt=apiCC.userMediaStreamTable[Ht];break}}}else for(;--Ht>=0;)if(apiCC.userMediaStreamTable[Ht].userMediaStreamId===St){Mt=apiCC.userMediaStreamTable[Ht];break}return Mt},apiCC.getFirstUserMediaStream=function(){return apiCC.userMediaStreamTable.length>0?apiCC.userMediaStreamTable[0]:null},apiCC.createUserMediaStream=function(St){var wt=function(Ot){for(var Dt=apiCC.userMediaStreamTable.length;--Dt>=0;)if(apiCC.userMediaStreamTable[Dt].userMediaStreamId===Ot){apiCC.userMediaStreamTable.splice(Dt,1);break}},Mt=new apiCC.ApiCCUserMediaStream,Ht="call";return vt.debug("[createUserMediaStream] userMediaStreamId: "+Mt.userMediaStreamId),St==null&&(St={}),St.type&&(Mt.callType=St.type),St.stream?(Mt.stream=St.stream,Mt.streamStolen=!0,Mt.notifyUserMediaStop=!1,Mt.listenForMuteEvents()):St.gum_config&&(Mt.gum_config=(0,lt.S6)(St.gum_config)),St.audioSourceId&&(Mt.inputs.audioSourceId=St.audioSourceId),St.videoSourceId&&(Mt.inputs.videoSourceId=St.videoSourceId),St.facingMode&&(Mt.inputs.facingMode=St.facingMode),St.captureSourceType&&(Mt.captureSourceType=St.captureSourceType),St.notifyUserMediaSuccess&&(Mt.notifyUserMediaSuccess=St.notifyUserMediaSuccess),St.notifyUserMediaError&&(Mt.notifyUserMediaError=St.notifyUserMediaError),St.tryAudioCallAfterUserMediaError&&(Mt.tryAudioCallAfterUserMediaError=St.tryAudioCallAfterUserMediaError),St.displayMediaStreamConstraints&&(Mt.displayMediaStreamConstraints=St.displayMediaStreamConstraints),St.forceExtensionOnChrome&&(Mt.forceExtensionOnChrome=St.forceExtensionOnChrome),St.filters&&(Mt.filters=St.filters),St.callId&&(St.callFlavor!=="call"&&St.callFlavor!=="userMedia"||(Ht=St.callFlavor),Mt.stream===null?Mt.addCallInfo(St.callId,Ht,!0):Mt.addCallInfo(St.callId,Ht,!1)),St.childStreamType&&(Mt.childStreamType=St.childStreamType),Mt.callbacks.release=typeof St.release=="function"?St.release:function(){},Mt.callbacks.success=typeof St.success=="function"?St.success:function(){},Mt.callbacks.failure=typeof St.failure=="function"?St.failure:function(){},apiCC.userMediaStreamTable.push(Mt),Mt.stream===null?Mt.callType==="screenSharing"||Mt.callType==="screenSharingWithAudio"?Mt.getScreenMedia():Mt.callType!=="data"?Mt.getUserMedia():St.sync===!0?(wt(Mt.userMediaStreamId),Mt.callbacks.failure(Mt,"wrong type")):setTimeout(function(){wt(Mt.userMediaStreamId),Mt.callbacks.failure(Mt,"wrong type")},0):(Mt.updateMediaProperties(Mt.stream),St.sync===!0?Mt.callbacks.success(Mt):setTimeout(function(){Mt.callbacks.success(Mt)},0)),Mt},apiCC.releaseUserMediaStream=function(St,wt,Mt){var Ht=!1,Ot=apiCC.userMediaStreamTable.length,Dt=null;if(wt!==null&&typeof wt!="string"&&(wt=null),St==null){if(Mt&&typeof Mt.accept=="function"){for(;--Ot>=0;)if(Mt.accept(apiCC.userMediaStreamTable[Ot])===!0){if(wt){if((Dt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())===null||Dt.callId!==wt){apiCC.userMediaStreamTable[Ot].removeCallInfo(wt);break}}else if((Dt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())!==null)break;vt.debug("[releaseUserMediaStream] match; userMediaStreamId: "+apiCC.userMediaStreamTable[Ot].userMediaStreamId),apiCC.userMediaStreamTable[Ot].release(),wt&&apiCC.userMediaStreamTable[Ot].removeCallInfo(wt),apiCC.userMediaStreamTable.splice(Ot,1),Ht=!0;break}}}else for(;--Ot>=0;)if(apiCC.userMediaStreamTable[Ot].userMediaStreamId===St){if(wt){if((Dt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())===null||Dt.callId!==wt){apiCC.userMediaStreamTable[Ot].removeCallInfo(wt);break}}else if((Dt=apiCC.userMediaStreamTable[Ot].getOwnerCallInfo())!==null)break;vt.debug("[releaseUserMediaStream] id; userMediaStreamId: "+apiCC.userMediaStreamTable[Ot].userMediaStreamId),apiCC.userMediaStreamTable[Ot].release(),wt&&apiCC.userMediaStreamTable[Ot].removeCallInfo(wt),apiCC.userMediaStreamTable.splice(Ot,1),Ht=!0;break}return Ht},apiCC.activeSpeakerDetect=!1,apiCC.activeSpeakerThreshold=.4,apiCC.enableActiveSpeakerDetecting=function(St,wt){apiCC.activeSpeakerDetect=St,wt&&(apiCC.activeSpeakerThreshold=wt)},apiCC.apiRTCExtensionInstalled=!1,apiCC.extensionInstallationSuccessCallback=function(){vt.debug("extensionInstallationSuccessCallback"),apiCC.apiRTCExtensionInstalled=!0},apiCC.extensionInstallationFailureCallback=function(St,wt){vt.debug("extensionInstallationFailureCallback : Error :"+St+", "+wt),St=null,wt=null,At.createDesktopCaptureEvent("Extension_installation_Error",apiRTC.waitingShareScreenCallId,apiRTC.waitingShareScreenDestNumber,apiRTC.waitingCaptureSourceType)},apiCC.manageNotInstalledExtension=function(St,wt,Mt){vt.debug("manageNotInstalledExtension"),vt.warn("apiRTC extension not installed"),At.createDesktopCaptureEvent("Extension_not_installed",St,wt),vt.warn("Starting apiRTC extension installation"),apiRTC.waitingShareScreenDestNumber=wt,apiRTC.waitingShareScreenCallId=St,apiRTC.waitingCaptureSourceType=Mt,nt.PR>=71?(vt.debug("Chrome >= 71, opening Chrome web Store"),apiRTC.extensionInstallationFailureCallback("Chrome71 : chrome.webstore.install() no more supported","Chrome71-screenShare"),window.open("https://chrome.google.com/webstore/detail/apizee-desktop-capture/mjjnofoemoepfididplbfimokpnpcoeg")):chrome.webstore.install("https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg",apiRTC.extensionInstallationSuccessCallback,apiRTC.extensionInstallationFailureCallback)},apiCC.activateScreenSharing=function(St){vt.debug("activateScreenSharing");var wt=null;St!==void 0?vt.log("extensionId is defined :"+St):(vt.log("using apirtc extension's Id"),St="mjjnofoemoepfididplbfimokpnpcoeg"),nt.Xh==="Chrome"?document.getElementById(St)!==null?(vt.log("extensionLink is present, screenSharing is already activated"),window.postMessage("apiRTC-extension","*")):(vt.log("screenSharing is not yet activated"),(wt=document.createElement("link")).href="https://chrome.google.com/webstore/detail/"+St,wt.rel="chrome-webstore-item",wt.id=St,document.getElementsByTagName("head")[0].appendChild(wt),window.addEventListener("message",function(Mt){var Ht=null;if(vt.log("message: event: "+JSON.stringify(Mt.data)),Mt.origin==window.location.origin){if(Mt.data!=="apiRTC-DeskstopCapture-loaded")return Mt.data==="extensionInstalledAndLoaded"?(apiCC.apiRTCExtensionInstalled=!0,apiCC.waitingShareScreenUserMediaStream!==null&&apiCC.waitingShareScreenUserMediaStream!==void 0&&(apiCC.userMediaStreamTable.push(apiCC.waitingShareScreenUserMediaStream[0]),delete apiCC.waitingShareScreenUserMediaStream),void(apiCC.waitingShareScreenUserMediaStreamId&&(Ht=apiCC.getUserMediaStream(apiCC.waitingShareScreenUserMediaStreamId),delete apiCC.waitingShareScreenUserMediaStreamId,Ht&&Ht.getScreenMedia()))):void(bt(Mt.data)==="object"&&Mt.data.desktopId!==void 0&&(Mt.data.remoteId!=="getScreenMedia"||(Ht=apiCC.getUserMediaStream(Mt.data.callNumber))===null||Ht.registerScreenMedia(Mt.data.captureSourceType,Mt.data.desktopId)));apiCC.apiRTCExtensionInstalled=!0}}),window.postMessage("apiRTC-extension","*")):(vt.log("activateScreenSharing is only available for chrome Browser"),At.createDesktopCaptureEvent("Browser_Not_Compatible",null,null))},apiCC.checkIfAudioSourceIdExistOnDevice=function(St){vt.log("checkIfAudioSourceIdExistOnDevice :",St);var wt,Mt=!1,Ht=null;if(apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(wt=0;wt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++wt)(Ht=apiCC.mediaDeviceMgr.mediaSourceInfos[wt]).kind!=="audio"&&Ht.kind!=="audioinput"||(Ht.deviceId===St?(vt.log("Audio device present :",St),Mt=!0):vt.log("not this deviceId"));return Mt},apiCC.setAudioSourceIdInConstraint=function(St,wt){return vt.log("setAudioSourceIdInConstraint:",wt),St==null?vt.log("audioSourceId not defined"):wt.audio===!1?vt.log("constraints.audio === false, no audio device present"):apiCC.checkIfAudioSourceIdExistOnDevice(St)===!1?(vt.log("audioSourceId not found on device"),wt.audio={}):(wt.audio!==!0&&wt.audio!==void 0||(wt.audio={}),vt.log("audioSourceId is defined :",St),nt.ag.name==="iOS"?nt.Xh==="Mobile Safari"||(wt.audio.deviceId=St):(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?wt.audio.deviceId=St:nt.Xh==="Chrome"&&nt.PR<48||nt.Xh==="Safari"&&nt.PR<11?wt.audio.optional=[{sourceId:St}]:wt.audio.deviceId=St?{ideal:St}:void 0),vt.debug("constraints =",wt),wt},apiCC.checkIfVideoSourceIdExistOnDevice=function(St){vt.log("checkIfVideoSourceIdExistOnDevice :",St);var wt,Mt=!1,Ht=null;if(vt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(wt=0;wt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++wt)(Ht=apiCC.mediaDeviceMgr.mediaSourceInfos[wt]).kind!=="video"&&Ht.kind!=="videoinput"||(Ht.deviceId===St?(vt.log("Video device present :",St),Mt=!0):vt.log("not this deviceId"));return Mt},apiCC.getMediaDeviceLabelFromDeviceid=function(St){vt.log("getMediaDeviceLabelFromDeviceid :",St);var wt,Mt="Not_Found",Ht=null;if(vt.debug("apiCC.mediaDeviceMgr.mediaSourceInfos :",apiCC.mediaDeviceMgr.mediaSourceInfos),apiCC.mediaDeviceMgr.mediaSourceInfos!==null)for(wt=0;wt<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++wt)(Ht=apiCC.mediaDeviceMgr.mediaSourceInfos[wt]).deviceId===St?(vt.log("Video device present :",St),Mt=Ht.label):vt.log("not this deviceId");return Mt},apiCC.setVideoSourceIdInConstraint=function(St,wt){if(vt.log("setVideoSourceIdInConstraint : ",wt),St==null)vt.log("videoSourceId not defined");else if(wt.video===!1)vt.log("constraints.video === false, no video device present");else if(apiCC.checkIfVideoSourceIdExistOnDevice(St)===!1)vt.log("videoSourceId not found on device"),wt.video={};else if(vt.log("videoSourceId is defined :",St),wt.video!==!0&&wt.video!==void 0||(wt.video={}),nt.ag.name==="iOS")if(nt.Xh==="Mobile Safari"){if(St){var Mt=!1,Ht=nt.ag.version.split(".");Ht.length>0&&parseInt(Ht[0])<13&&(Mt=!0),wt.video.deviceId=Mt?{exact:St}:{ideal:St}}}else wt.video.deviceId=St;else(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=77?(vt.debug("FX > 77 using exact to set deviceId"),wt.video.deviceId={exact:St}):wt.video.deviceId=St:nt.Xh==="Chrome"&&nt.PR<48||nt.Xh==="Safari"&&nt.PR<11?wt.video.optional=[{sourceId:St}]:wt.video.deviceId=St?{ideal:St}:void 0;return vt.log("constraints =",wt),wt},apiCC.setVideoFacingModeInConstraint=function(St,wt){vt.log("setVideoFacingModeInConstraint");var Mt={};return wt.video===!1?(vt.log("facingMode value is not setted, constraints.video is false"),wt):St==null?(vt.log("facingMode value is not setted"),wt):St!=="user"&&St!=="environment"&&St!=="left"&&St!=="right"?(vt.log("facingMode value is not correct"),wt):(navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&navigator.mediaDevices.getSupportedConstraints!==null&&navigator.mediaDevices.getSupportedConstraints!==void 0&&(Mt=navigator.mediaDevices.getSupportedConstraints()),Mt.hasOwnProperty("facingMode")?(vt.log("Setting FacingMode in constraint"),wt.video===!0&&(wt.video={}),wt.video.facingMode={ideal:St}):vt.log("FacingMode not supported by device"),vt.debug("constraints =",wt),wt)},apiCC.setResolutionInConstraint=function(St,wt,Mt){return vt.log("setResolutionInConstraint"),St<=0||wt<=0?(vt.log("Resolution value must be positif non null"),Mt):(Mt.video===!0||Mt.video!==void 0?nt.ag.name==="iOS"?nt.Xh==="Mobile Safari"?(Mt.video.width=St?{exact:St}:void 0,Mt.video.height=wt?{exact:wt}:void 0):(Mt.video.width=St,Mt.video.height=wt):(nt.Xh==="Firefox"||nt.Xh==="Mobile Firefox")&&nt.PR>=50?(Mt.video.width=St,Mt.video.height=wt):nt.Xh==="Safari"&&nt.PR>=11||nt.Xh==="Mobile Safari"||nt.Xh==="Edge"&&apiRTC.browserDetails.type!=="chrome"||nt.Xh==="Chrome"&&nt.PR>=49||nt.Xh==="Firefox"&&nt.PR>=50||nt.Xh==="Mobile Chrome"||nt.Xh==="Mobile Firefox"?(Mt.video.width=St?{exact:St}:void 0,Mt.video.height=wt?{exact:wt}:void 0):Mt.video.mandatory=[{width:St,height:wt}]:vt.error("setResolutionInConstraint : contraint.video must be true or defined"),vt.debug("constraints =",Mt),Mt)},apiCC.checkConstraintDependingOnDevice=function(St){vt.debug("checkConstraintDependingOnDevice :",St),nt.Xh==="Mobile Safari"&&nt.PR>=13&&St.video!==void 0&&St.video.height!==void 0&&St.video.width!==void 0&&St.video.height.ideal===1080&&St.video.width.ideal===1920&&(vt.debug("Downgrading selected height and width resolution on iOS, to avoid stream issue"),St.video.height.ideal=720,St.video.width.ideal=1280)},apiCC.attachMediaStream=function(St,wt){vt.debug("attachMediaStream"),St!==null?(St.srcObject!==void 0?St.srcObject=wt:St.mozSrcObject!==void 0?St.mozSrcObject=wt:St.src!==void 0?nt.Xh==="Chrome"&&nt.PR<46?(vt.log("Attaching media stream for Chrome < 46"),St.src=webkitURL.createObjectURL(wt)):St.src=URL.createObjectURL(wt):vt.error("Error attaching stream to element."),nt.ag.name==="iOS"&&(vt.log("iOS detected"),St.setAttribute("playsinline",!0))):vt.log("videoElt is null")},apiCC.addStreamInDiv=function(St,wt,Mt,Ht,Ot,Dt,Gt){vt.debug("addStreamInDiv");var nn,zt=null,Ft=null,un=!1,vn=null;(0,lt.Ym)(Gt,"object")&&Gt.type!=null&&(wt=Gt.type),(0,lt.Ym)(Gt,"object")&&Gt.forceAudioAndVideoMediaElementSeparation!==void 0&&(vt.debug("forceAudioAndVideoMediaElementSeparation is set"),un=!0),wt==="audio"?zt=document.createElement("audio"):(nt.BF==="iOS"&&nt.Xh==="Mobile Safari"&&(vt.debug("iOS && Mobile Safari"),un=!0),zt=document.createElement("video")),zt.id=Ht,zt.autoplay=!0,un===!0&&Dt===!1?(vt.debug("before adding separated MediaEltAudio"),(vn=document.createElement("audio")).id=Ht+"_sepAudio",vn.muted=Dt,vn.autoplay=!0,zt.muted=!0):zt.muted=Dt,zt.style.width=Ot.width,zt.style.height=Ot.height,Ot.controls===!0&&(zt.controls=!0),nn=function(yn){var cn=null,gn=yn.play();cn=function(){var Cn=yn.play();vt.log("funcFixIoS"),Cn!==void 0&&Cn.then(function(){vt.log("Autoplay started"),document.removeEventListener("touchstart",cn)}).catch(function(fn){vt.error("Autoplay was prevented")})},gn!==void 0&&gn.then(function(){vt.log("Autoplay started")}).catch(function(Cn){nt.ag.name==="iOS"?(vt.warn("iOS : Autoplay was prevented, activating touch event to start media play"),apiCC.myWebRTC_Event.createErrorEvent("ERROR: iOS : Autoplay was prevented","IOS_AUTOPLAY_PREVENTED"),document.addEventListener("touchstart",cn)):vt.warn("Autoplay was prevented")})},nt.Xh!=="Chrome"&&nt.Xh!=="Mobile Chrome"||nt.PR!=="61"||nt.BF!=="Android"||(zt.style.borderRadius="1px",vt.log("Patch for video display on Chrome 61 Android")),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==void 0&&apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId!==null?(vt.log("audioOutputId set to: "+apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId),zt.setSinkId(apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId).then(function(){vt.log("Success, audio output device attached")})):vt.log("No audioOutputId set"),nt.BF!=="iOS"&&(Ft=document.getElementById(Mt)).appendChild(zt),St!==void 0&&(apiCC.attachMediaStream(zt,St),un===!0&&Dt===!1&&apiCC.attachMediaStream(vn,St)),nt.BF==="iOS"&&(Ft=document.getElementById(Mt)).appendChild(zt),un===!0&&Dt===!1&&Ft!==null&&Ft.appendChild(vn),nn(zt),un===!0&&Dt===!1&&nn(vn)},apiCC.removeElementFromDiv=function(St,wt){vt.debug("removeElementFromDiv");var Mt,Ht,Ot=null;Mt=document.getElementById(wt),Ot=document.getElementById(St),Mt!==null&&(vt.log("Removing video element with Id : "+wt),Ot!==null&&Ot.removeChild(Mt)),(Ht=document.getElementById(wt+"_sepAudio"))!==null&&(vt.log("iOS : Removing audio element with Id : "+wt+"_sepAudio"),Ot!==null&&Ot.removeChild(Ht))},apiCC.randomString=function(St,wt){for(var Mt=typeof wt=="string"&&wt.length>0?wt:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Ht="";--St>=0;)Ht+=Mt.charAt(Math.floor(Math.random()*Mt.length));return Ht},apiCC.generateCallId=function(){var St;return St=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),vt.debug("new callId :"+St),St},apiCC.generateInstanceId=function(){var St;return St=Number.MAX_SAFE_INTEGER!==void 0?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),vt.debug("new instanceId :"+St),St},apiCC.myApiCCWhiteBoardClient=null,apiCC.createWhiteBoard=function(St,wt,Mt,Ht){return vt.debug("createWhiteBoard"),apiCC.myApiCCWhiteBoardClient=new apiCC.ApiCCWhiteBoardClient(apiCC.session,St,wt,Mt,Ht),apiCC.myApiCCWhiteBoardClient},apiCC.closeWhiteBoardClient=function(St){vt.info("closeWhiteBoardClient"),At.createClosingWhiteBoardEvent(apiCC.myApiCCWhiteBoardClient.roomId,St),apiCC.myApiCCWhiteBoardClient.isInRoom()&&apiCC.myApiCCWhiteBoardClient.leaveRoom(),apiCC.myApiCCWhiteBoardClient.stop()},apiCC.registerIOsDevice=function(St){vt.debug("call registerIOsDevice 1");var wt={type:"registerIOsDevice",senderId:apiCC.session.apiCCId,token:St},Mt=JSON.stringify(wt);vt.debug("call registerIOsDevice "+Mt),apiCC.session.channel.socket.emit("registerIOsDevice",Mt),vt.debug("call registerIOsDevice  done")},apiCC.registerAndroidDevice=function(St){vt.debug("registerAndroidDevice");var wt={type:"registerAndroidDevice",senderId:apiCC.session.apiCCId,token:St},Mt=JSON.stringify(wt);apiCC.session.channel.socket.emit("registerAndroidDevice",Mt)},apiCC.unRegisterIOsDevice=function(St){vt.debug("unRegisterIOsDevice");var wt={type:"unRegisterIOsDevice",senderId:apiCC.session.apiCCId,token:St},Mt=JSON.stringify(wt);apiCC.session.channel.socket.emit("unRegisterIOsDevice",Mt)},apiCC.unRegisterAndroidDevice=function(St){vt.debug("unRegisterAndroidDevice");var wt={type:"unRegisterAndroidDevice",senderId:apiCC.session.apiCCId,token:St},Mt=JSON.stringify(wt);apiCC.session.channel.socket.emit("unRegisterAndroidDevice",Mt)},apiCC.storeSessionInfoInSessionStorage=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(vt.info("storeSessionInfoInSessionStorage",St),apiCC.session){var wt=5e3;(0,lt.ki)(apiCC.session,"apiCCIdPersistenceTimeout","number")&&apiCC.session.apiCCIdPersistenceTimeout>=0&&(wt=apiCC.session.apiCCIdPersistenceTimeout),(0,lt.Ym)(St.apiCCIdPersistenceTimeout,"number")&&St.apiCCIdPersistenceTimeout>=0&&(wt=St.apiCCIdPersistenceTimeout),apiCC.setSessionStorage("apiCCId",apiCC.session.apiCCId,wt),apiCC.setSessionStorage("apiKey",apiCC.session.apiKey,wt),apiCC.session.sessionId!==null&&apiCC.setSessionStorage("sessionId",apiCC.session.sessionId,wt)}},apiCC.disconnect=function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vt.info("disconnect",St),apiCC!==null&&apiCC.cleanAllEventListener(St),apiCC.session!==null&&apiCC.session!==void 0&&(typeof apiRTC_React>"u"&&St.invalidateApiCCId!==!0&&apiCC.storeSessionInfoInSessionStorage(St),apiCC.myApiCCWhiteBoardClient!==null&&(vt.log("apiCC.myApiCCWhiteBoardClient.roomId :"+apiCC.myApiCCWhiteBoardClient.roomId),apiCC.myApiCCWhiteBoardClient.roomId!==null&&apiCC.closeWhiteBoardClient("USER_DISCONNECTION")),vt.log("Disconnecting from Server"),apiCC.session.channel.socket!==void 0&&apiCC.session.channel.socket!==null&&apiCC.session.channel.socket.disconnect(),apiCC.session.channel.channelHasBeenDisconnected=!1,apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length)),apiCC&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiCC.reconnect=function(){vt.log("Reconnect"),vt.log("apiCC.session.channel.socket:",apiCC.session.channel.socket),apiCC.session.channel.socket.socket.connect()},apiCC.cleanApiRTCContext=function(){apiCC.session!==null&&apiCC.session!==void 0&&(apiCC.session.apiCCWebRTCClient!==null&&apiCC.session.apiCCWebRTCClient!==void 0&&(apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length!==0&&vt.warn("Call is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length>0&&vt.log("MCU session is still established and will be disconnected"),apiCC.session.apiCCWebRTCClient.hangUp(),apiCC.session.apiCCWebRTCClient.webRTCClient.localStream!==null&&(apiCC.session.apiCCWebRTCClient.webRTCClient.stopStream(apiCC.session.apiCCWebRTCClient.webRTCClient.localStream),At.createUserMediaStopEvent(null,"media")),apiCC.session.apiCCWebRTCClient=null),apiCC.session.apiCCIMClient!==null&&apiCC.session.apiCCIMClient!==void 0&&(apiCC.session.apiCCIMClient=null),apiCC.session.apiCCDataClient!==null&&apiCC.session.apiCCDataClient!==void 0&&(apiCC.session.apiCCDataClient=null),apiCC.myApiCCWhiteBoardClient!==null&&apiCC.myApiCCWhiteBoardClient!==void 0&&(apiCC.myApiCCWhiteBoardClient=null))},apiCC.cleanAllEventListener=function(){var St,wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Mt=0;if(apiCC!==null&&apiCC.myEventTable!==null&&(Mt=apiCC.myEventTable.length),Mt!==0){for(vt.trace("number of myEventTable:"+Mt),St=0;St<Mt;St+=1)wt.unregister===!0&&apiCC.myEventTable[St].setBy==="UserAgent"?vt.debug("Keeping event for UserAgent process"):apiCC.removeEventListener(apiCC.myEventTable[St].type,apiCC.myEventTable[St].listener);apiCC.myEventTable.splice(0,Mt),Mt=apiCC.myEventTable.length,vt.trace("number of myEventTable after splice:"+Mt)}},apiCC.testUserPing=function(St){vt.debug("testUserPing()");var wt,Mt,Ht,Ot,Dt=apiCC.bandwidthTestServer+"/upload-test",Gt=new XMLHttpRequest,nn=new FormData,zt=Math.round(5*Math.random()),Ft=!1;"withCredentials"in Gt?Gt.open("POST",Dt,!0):typeof XDomainRequest<"u"?(Gt=new XDomainRequest).open("POST",Dt):Gt=null,wt=new Blob([zt],{type:"text/xml"}),nn.append("file",wt),Gt?(Gt.onload=function(){Gt.status===200&&(Ot=Date.now()-Mt,Ft||(clearTimeout(Ht),St(null,Ot)))},Gt.onerror=function(un){vt.log("testUserUpload onerror status :",un.target.status),St({err:"An error occured during XMLHttpRequest",msg:un.target.status},null)},Ht=setTimeout(function(){Ft=!0,St("Ping timeout",-1)},5e3),Gt.send(nn),Mt=Date.now()):St({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserDownload=function(St,wt){vt.debug("testUserDownload()");var Mt,Ht,Ot,Dt,Gt,nn,zt=apiCC.bandwidthTestServer+"/files/noise_"+St+"ko.jpg",Ft=0,un=new Image,vn=0;zt+="?nnn="+Date.now();var yn=[[256,257529],[500,525944],[768,787234],[1e3,1055741],[1500,1541044],[2e3,1992034],[2500,2596028],[3e3,2904977],[3500,3648299],[4e3,4151187],[4500,4741712],[5e3,5264577],[5500,5776081],[6e3,6318553],[6500,6779868],[7e3,7334256],[7500,7874040],[8e3,8081460],[8500,8651795],[9e3,9081899],[9500,9503574],[1e4,10082008],[10500,10543425],[11e3,11200424],[11500,11200424],[12e3,12110671],[12500,12715962],[13e3,13222120],[13500,13605073],[14e3,13954769],[14500,14777594],[15e3,15178928],[15500,15602106],[16e3,16054618],[16500,16578623],[17e3,17048069],[17500,17456403],[18e3,17910332],[18500,18725846],[19e3,19284746],[19500,19771902],[2e4,20121527],[21e3,20975042],[22e3,22189200],[23e3,23027928],[24e3,24027870],[25e3,24878845],[26e3,26237503],[27e3,27112004],[28e3,27953446],[29e3,29313013],[3e4,30474095]];for(Gt=0;Gt<yn.length;Gt++)St===yn[Gt][0]&&(Ft=yn[Gt][1]);apiCC.testUserPing(function(cn,gn){un.onload=function(){for((Ht=Date.now()-Mt)-gn>10&&(Ht-=gn),Ot=Ft/(Ht/1e3),Dt=Math.round(Ot/1e3),nn={type:"download",kBPerSec:Dt},Gt=0;Gt<apiCC.bandwidthRatingThresholds.length;Gt++)8*nn.kBPerSec>=apiCC.bandwidthRatingThresholds[Gt]&&vn++;nn.rating=vn+"/"+apiCC.bandwidthRatingThresholds.length,wt(null,nn)},un.onerror=function(Cn,fn){wt({label:"Error when downloading",err:Cn,msg:fn},null)},Mt=new Date().getTime(),un.src=zt})},apiCC.testUserUpload=function(St,wt){vt.debug("testUserUpload()");var Mt,Ht,Ot,Dt,Gt,nn,zt,Ft=apiCC.bandwidthTestServer+"/upload-test",un=new XMLHttpRequest,vn=new FormData,yn="",cn=0;for(("withCredentials"in un)?un.open("POST",Ft,!0):typeof XDomainRequest<"u"?(un=new XDomainRequest).open("POST",Ft):un=null,Ht=0;Ht<St;Ht++)yn+=Math.round(5*Math.random());Mt=new Blob([yn],{type:"text/xml"}),vn.append("file",Mt),un?(un.onload=function(){if(un.status===200){for(Gt=Date.now()-Dt,nn=St/(Gt/1e3),zt=Math.round(nn/1e3),Ot={type:"upload",kBPerSec:zt},Ht=0;Ht<apiCC.bandwidthRatingThresholds.length;Ht++)8*Ot.kBPerSec>=apiCC.bandwidthRatingThresholds[Ht]&&cn++;Ot.rating=cn+"/"+apiCC.bandwidthRatingThresholds.length,wt(null,Ot)}else wt({err:"An error occured during XMLHttpRequest",msg:un.status},null)},un.onerror=function(gn){vt.log("testUserUpload onerror status :",gn.target.status),wt({err:"An error occured during XMLHttpRequest",msg:gn.target.status},null)},un.send(vn),Dt=Date.now()):wt({err:"XMLHttpRequest is not defined",msg:"XMLHttpRequest is not defined"},null)},apiCC.testUserUploadLoop=function(St,wt,Mt){var Ht={type:"upload",kBPerSec:wt.kbps/8,kbps:wt.kbps,rating:wt.rating},Ot=0;wt.kbps>1e3?apiCC.testUserUpload(St,function(Dt,Gt){Dt!==null?Mt({err:"An error occured during XMLHttpRequest"},null):(Ht.kBPerSec=Gt.kBPerSec,Ht.kbps=8*Gt.kBPerSec,Ht.rating=Gt.rating,Ot=Ht.kbps-wt.kbps,vt.debug("upload "+St+" "+JSON.stringify(Ht)+"; diff "+Ot),Ot>=2e4&&St<12e6?apiCC.testUserUploadLoop(St+8e6,Ht,Mt):Ot>=1e4&&St<14e6?apiCC.testUserUploadLoop(St+6e6,Ht,Mt):Ot>=5e3&&St<16e6?apiCC.testUserUploadLoop(St+4e6,Ht,Mt):Ot>=1e3&&St<18e6?apiCC.testUserUploadLoop(St+2e6,Ht,Mt):Ot>=200&&St<19e6?apiCC.testUserUploadLoop(St+1e6,Ht,Mt):Mt(null,Ht))}):Mt(null,Ht)},apiCC.testUserDownloadLoop=function(St,wt,Mt){var Ht={type:"download",kBPerSec:wt.kbps/8,kbps:wt.kbps,rating:wt.rating},Ot=0;wt.kbps>=3500?apiCC.testUserDownload(St,function(Dt,Gt){Dt!==null?Mt({err:"Error when downloading"},null):(Ht.kBPerSec=Gt.kBPerSec,Ht.kbps=8*Gt.kBPerSec,Ht.rating=Gt.rating,Ot=Ht.kbps-wt.kbps,vt.debug("download "+St+" "+JSON.stringify(Ht)+"; diff "+Ot),Ot>=2e4?apiCC.testUserDownloadLoop(3e4,Ht,Mt):Ot>=1e4&&St<=2e4?apiCC.testUserDownloadLoop(St+1e4,Ht,Mt):Ot>=5e3&&St<=25e3?apiCC.testUserDownloadLoop(St+5e3,Ht,Mt):Ot>=1e3&&St<=27e3?apiCC.testUserDownloadLoop(St+3e3,Ht,Mt):Ot>=200&&St<=29e3?apiCC.testUserDownloadLoop(St+1e3,Ht,Mt):Mt(null,Ht))}):Mt(null,Ht)},apiCC.listenedAudioSources={};var Nt=window.AudioContext||window.webkitAudioContext||!1;apiCC.audioContext=null,apiCC.getAudioContext=function(){return apiRTC.osName==="iOS"&&typeof cordova<"u"?vt.debug("No audioContext for iOS cordova"):Nt&&apiCC.audioContext===null&&(apiCC.audioContext=new Nt),apiCC.audioContext},apiCC.listenToAudioSources=function(St){vt.debug("listenToAudioSources()");var wt,Mt=apiCC.getAudioContext();Mt!=null?(Object.keys(apiCC.listenedAudioSources).length>0&&apiCC.stopAudioSourceListening(),apiCC.getMediaDevices().then(function(Ht){for(vt.log(Ht),wt=0;wt<Ht.length;wt++)Ht[wt].kind==="audioinput"&&(apiCC.listenedAudioSources[Ht[wt].deviceId]={deviceId:Ht[wt].deviceId,callback:St,label:Ht[wt].label},navigator.getUserMedia({audio:{optional:[{sourceId:Ht[wt].deviceId}]},video:!1},(function(Ot){vt.log("new stream processing function for : "+this.device.deviceId),this.device.audioListener=this;var Dt=this,Gt=Mt.createScriptProcessor(2048,1,1),nn=Mt.createMediaStreamSource(Ot);Gt.connect(Mt.destination),Gt.onaudioprocess=function(){var zt,Ft,un,vn=new Uint8Array(this.analyser.frequencyBinCount),yn=0;for(this.analyser.getByteFrequencyData(vn),Ft=0;Ft<vn.length;Ft++)yn+=vn[Ft];zt=yn/vn.length,un={deviceId:Dt.device.deviceId,label:Dt.device.label,amplitude:zt,active:Ot.active},Dt.device.callback(un)},Gt.analyser=Mt.createAnalyser(),Gt.analyser.smoothingTimeConstant=.3,Gt.analyser.fftSize=1024,nn.connect(Gt.analyser),Gt.analyser.connect(Gt),this.destroy=function(){vt.log("destroy()");var zt,Ft=Ot.getTracks();for(zt=0;zt<Ft.length;zt+=1)Ft[zt].stop();nn.disconnect(),Gt.analyser.disconnect(),Gt.disconnect()}}).bind({device:apiCC.listenedAudioSources[Ht[wt].deviceId]}),function(Ot){vt.error("Error getting microphone",Ot)}))},function(Ht){vt.debug("listenToAudioSources() - getMediaDevices error :",Ht)})):vt.debug("listenToAudioSources() - Unable to create audio context")},apiCC.stopAudioSourceListening=function(){var St;for(vt.debug("stopAudioSourceListening()"),St=0;St<Object.keys(apiCC.listenedAudioSources).length;St++)apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[St]]!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[St]].audioListener!==void 0?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[St]].audioListener.destroy():vt.warn("error on stopAudioSourceListening, audioListener"):vt.warn("error on stopAudioSourceListening, listenedAudioSources element");apiCC.listenedAudioSources={}},apiCC.webRTCPluginInstalled=!1,apiCC.iePluginInstallationPreventUnload=!1,apiCC.setlogStorageActivated=function(St,wt){vt.debug("setlogStorageActivated :",St),this.logStorageActivated=(St===!0||St===!1)&&St,wt!==void 0&&(this.logStorageLevel=wt)},apiCC.sendLogToCloud=function(St,wt,Mt,Ht){vt.info("sendLogToCloud");var Ot,Dt,Gt=[],nn=null,zt=[],Ft=null,un=null;for(Gt.push(JSON.stringify({title:"ApiRTC logs",description:"Logs of apiRTC client"})),Gt.push(JSON.stringify({ts:Date.now(),name:"system-info",args:{browserName:apiCC.browser,browserVersion:apiCC.browser_version,platform:apiCC.osName}})),Ot=0;Ot<St.length;Ot++)nn=St[Ot][0]==="error"?{name:"test-run",args:{error:St[Ot][1]}}:{name:"test-run",args:{info:St[Ot][1]}},Gt.push(JSON.stringify(nn));zt=Gt.concat(apiCC.logStorage),Ft=new FormData,Dt="["+zt.join(`,
`)+"]",vt.debug("fileContent :",Dt),Ht!==!0&&(Ft.append("data",Dt),Ft.append("apiKey",apiCC.initApiKey),wt!==void 0&&Ft.append("id",wt),(un=new XMLHttpRequest).open("POST",Mt+"/test/api/",!0),un.onreadystatechange=function(){un.readyState===4&&un.status===200&&console.info("[apiRTC_Logs] POST'd successfully"),console.trace(un.responseText)},un.send(Ft))},apiCC.manageWebRTCPlugin=function(St,wt){vt.debug("manageWebRTCPlugin");var Mt;Mt=window.location.protocol!=="https:"?"http":"https",_e([Mt+"://cdn.temasys.io/adapterjs/0.15.x/adapter.debug.js"],"temAdapter",{async:!0,numRetries:apiCC.extJsLoadingRetryNb||100,reqdelay:apiCC.extJsLoadingRetryDelay||200,success:function(){vt.log("End of .js loading for plugin"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","loaded"),AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,function(){apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,AdapterJS.webRTCReady(function(Ht){return vt.log("webRTCReady, plugin already installed"),St()})},function(){return apiCC.iePluginInstallationPreventUnload=!0,wt(),AdapterJS.webRTCReady(function(Ht){return vt.log("webRTCReady after plugin install"),apiCC.iePluginInstallationPreventUnload=!1,apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,St()}),apiCC.session.apiCCWebRTCClient.myWebRTC_Event.createEvent({eventType:"webRTCPluginInstallation"}),null})},error:function(Ht){vt.error("temAdapter loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","error")},retrycb:function(Ht,Ot){vt.warn("temAdapter loading retry :"+Ht+" ,delay before retry :"+Ot),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("temAdapter","retry")}})},apiCC.checkMutingStateForUserMedia=function(St,wt){vt.debug("checkMutingStateForUserMedia"),(0,lt.ki)(St,"muted","string")&&(vt.log("callConfiguration muted is set :",St.muted),St.muted==="VIDEO"&&(wt.muteVideoOnStreams("enabled"),wt.muteAudioOnStreams("enabled")),St.muted==="AUDIOONLY"&&wt.muteAudioOnStreams("enabled"),St.muted==="VIDEOONLY"&&wt.muteVideoOnStreams("enabled"))},apiCC.isSIPNumber=function(St){var wt,Mt=null,Ht=!1;return wt=St.toString().startsWith("sip:"),St.toString().length<=20&&(Mt=!0),(St.toString().indexOf("0")!==0&&St.toString().indexOf("+")!==0||Mt!==!0)&&wt!==!0||(Ht=!0),Ht},apiCC.loadSentry=function(St,wt){vt.debug("Remote logging activation"),_e([wt+"://browser.sentry-cdn.com/5.24.2/bundle.tracing.min.js"],"Sentry",{async:!0,numRetries:10,reqdelay:500,success:function(){Sentry.init({dsn:"https://c24c226714f841dbbc3d1518b6cc7fe8@o333237.ingest.sentry.io/5448622",release:apiCC.version,tracesSampleRate:1}),Sentry.configureScope(function(Mt){Mt.setTag("apiKey",St)})},error:function(Mt){console.error("Remote logging - loading error")},retrycb:function(Mt,Ht){console.warn("Remote logging - loading retry :"+Mt+" ,delay before retry :"+Ht)}})},apiCC.sendSentryEvent=function(St){if(vt.debug("sendSentryEvent",St),typeof Sentry<"u"){var wt="",Mt={};St.eventType==="muteUnmuteEvent"?(wt="Mute event on callId:"+St.callId,Mt.muteType=St.muteType,Mt.source=St.source,Mt.mLine=St.mLine,Mt.state=St.state,Mt.callId=St.callId,Mt.username=St.username):vt.error("sendSentryEvent error : type ",St.eventType," is not supported");var Ht=Object.keys(Mt);wt!==""&&Ht.length>0&&Sentry.withScope(function(Ot){Ht.forEach(function(Dt){Ot.setTag(Dt,Mt[Dt])}),Sentry.captureMessage(wt)})}else vt.debug("Sentry not activated")},apiCC.addPendingPromise=function(St,wt,Mt){var Ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;vt.debug("addPendingPromise"),apiCC.pendingPromisesId++;var Ot=function(Gt){apiCC.cleanPendingPromiseTable(Gt),Mt("Timeout problem during ".concat(St," process on a remote stream"))},Dt=setTimeout(function(){Ot(apiCC.pendingPromisesId)},Ht);return apiCC.pendingPromises.push({timeout:Dt,resolve:wt,reject:Mt,pendingPromisesId:apiCC.pendingPromisesId}),Dt},apiCC.resolvePendingPromise=function(St,wt){vt.debug("resolvePendingPromise"),apiCC.pendingPromises.forEach(function(Mt){St===Mt.timeout&&(clearTimeout(St),Mt.resolve(wt),apiCC.cleanPendingPromiseTable(Mt.pendingPromisesId))})},apiCC.rejectPendingPromise=function(St,wt){vt.debug("rejectPendingPromise"),apiCC.pendingPromises.forEach(function(Mt){St===Mt.timeout&&(clearTimeout(St),Mt.reject(wt),apiCC.cleanPendingPromiseTable(Mt.pendingPromisesId))})},apiCC.cleanPendingPromiseTable=function(St){apiCC.pendingPromises.forEach(function(wt,Mt){St===wt.pendingPromisesId&&apiCC.pendingPromises.splice(Mt,1)})}},5945:(rt,it,s)=>{function et(Dt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Gt){return typeof Gt}:function(Gt){return Gt&&typeof Symbol=="function"&&Gt.constructor===Symbol&&Gt!==Symbol.prototype?"symbol":typeof Gt},et(Dt)}function nt(){nt=function(){return Dt};var Dt={},Gt=Object.prototype,nn=Gt.hasOwnProperty,zt=typeof Symbol=="function"?Symbol:{},Ft=zt.iterator||"@@iterator",un=zt.asyncIterator||"@@asyncIterator",vn=zt.toStringTag||"@@toStringTag";function yn(Fn,Vn,Bn){return Object.defineProperty(Fn,Vn,{value:Bn,enumerable:!0,configurable:!0,writable:!0}),Fn[Vn]}try{yn({},"")}catch{yn=function(Vn,Bn,qn){return Vn[Bn]=qn}}function cn(Fn,Vn,Bn,qn){var Gn=Vn&&Vn.prototype instanceof fn?Vn:fn,_n=Object.create(Gn.prototype),$n=new Qn(qn||[]);return _n._invoke=function(bn,wn,Yt){var kt="suspendedStart";return function(st,Tt){if(kt==="executing")throw new Error("Generator is already running");if(kt==="completed"){if(st==="throw")throw Tt;return{value:void 0,done:!0}}for(Yt.method=st,Yt.arg=Tt;;){var Rt=Yt.delegate;if(Rt){var Lt=Yn(Rt,Yt);if(Lt){if(Lt===Cn)continue;return Lt}}if(Yt.method==="next")Yt.sent=Yt._sent=Yt.arg;else if(Yt.method==="throw"){if(kt==="suspendedStart")throw kt="completed",Yt.arg;Yt.dispatchException(Yt.arg)}else Yt.method==="return"&&Yt.abrupt("return",Yt.arg);kt="executing";var Et=gn(bn,wn,Yt);if(Et.type==="normal"){if(kt=Yt.done?"completed":"suspendedYield",Et.arg===Cn)continue;return{value:Et.arg,done:Yt.done}}Et.type==="throw"&&(kt="completed",Yt.method="throw",Yt.arg=Et.arg)}}}(Fn,Bn,$n),_n}function gn(Fn,Vn,Bn){try{return{type:"normal",arg:Fn.call(Vn,Bn)}}catch(qn){return{type:"throw",arg:qn}}}Dt.wrap=cn;var Cn={};function fn(){}function Tn(){}function On(){}var Ln={};yn(Ln,Ft,function(){return this});var An=Object.getPrototypeOf,Rn=An&&An(An(on([])));Rn&&Rn!==Gt&&nn.call(Rn,Ft)&&(Ln=Rn);var In=On.prototype=fn.prototype=Object.create(Ln);function kn(Fn){["next","throw","return"].forEach(function(Vn){yn(Fn,Vn,function(Bn){return this._invoke(Vn,Bn)})})}function xn(Fn,Vn){function Bn(Gn,_n,$n,bn){var wn=gn(Fn[Gn],Fn,_n);if(wn.type!=="throw"){var Yt=wn.arg,kt=Yt.value;return kt&&et(kt)=="object"&&nn.call(kt,"__await")?Vn.resolve(kt.__await).then(function(st){Bn("next",st,$n,bn)},function(st){Bn("throw",st,$n,bn)}):Vn.resolve(kt).then(function(st){Yt.value=st,$n(Yt)},function(st){return Bn("throw",st,$n,bn)})}bn(wn.arg)}var qn;this._invoke=function(Gn,_n){function $n(){return new Vn(function(bn,wn){Bn(Gn,_n,bn,wn)})}return qn=qn?qn.then($n,$n):$n()}}function Yn(Fn,Vn){var Bn=Fn.iterator[Vn.method];if(Bn===void 0){if(Vn.delegate=null,Vn.method==="throw"){if(Fn.iterator.return&&(Vn.method="return",Vn.arg=void 0,Yn(Fn,Vn),Vn.method==="throw"))return Cn;Vn.method="throw",Vn.arg=new TypeError("The iterator does not provide a 'throw' method")}return Cn}var qn=gn(Bn,Fn.iterator,Vn.arg);if(qn.type==="throw")return Vn.method="throw",Vn.arg=qn.arg,Vn.delegate=null,Cn;var Gn=qn.arg;return Gn?Gn.done?(Vn[Fn.resultName]=Gn.value,Vn.next=Fn.nextLoc,Vn.method!=="return"&&(Vn.method="next",Vn.arg=void 0),Vn.delegate=null,Cn):Gn:(Vn.method="throw",Vn.arg=new TypeError("iterator result is not an object"),Vn.delegate=null,Cn)}function Un(Fn){var Vn={tryLoc:Fn[0]};1 in Fn&&(Vn.catchLoc=Fn[1]),2 in Fn&&(Vn.finallyLoc=Fn[2],Vn.afterLoc=Fn[3]),this.tryEntries.push(Vn)}function jn(Fn){var Vn=Fn.completion||{};Vn.type="normal",delete Vn.arg,Fn.completion=Vn}function Qn(Fn){this.tryEntries=[{tryLoc:"root"}],Fn.forEach(Un,this),this.reset(!0)}function on(Fn){if(Fn){var Vn=Fn[Ft];if(Vn)return Vn.call(Fn);if(typeof Fn.next=="function")return Fn;if(!isNaN(Fn.length)){var Bn=-1,qn=function Gn(){for(;++Bn<Fn.length;)if(nn.call(Fn,Bn))return Gn.value=Fn[Bn],Gn.done=!1,Gn;return Gn.value=void 0,Gn.done=!0,Gn};return qn.next=qn}}return{next:Hn}}function Hn(){return{value:void 0,done:!0}}return Tn.prototype=On,yn(In,"constructor",On),yn(On,"constructor",Tn),Tn.displayName=yn(On,vn,"GeneratorFunction"),Dt.isGeneratorFunction=function(Fn){var Vn=typeof Fn=="function"&&Fn.constructor;return!!Vn&&(Vn===Tn||(Vn.displayName||Vn.name)==="GeneratorFunction")},Dt.mark=function(Fn){return Object.setPrototypeOf?Object.setPrototypeOf(Fn,On):(Fn.__proto__=On,yn(Fn,vn,"GeneratorFunction")),Fn.prototype=Object.create(In),Fn},Dt.awrap=function(Fn){return{__await:Fn}},kn(xn.prototype),yn(xn.prototype,un,function(){return this}),Dt.AsyncIterator=xn,Dt.async=function(Fn,Vn,Bn,qn,Gn){Gn===void 0&&(Gn=Promise);var _n=new xn(cn(Fn,Vn,Bn,qn),Gn);return Dt.isGeneratorFunction(Vn)?_n:_n.next().then(function($n){return $n.done?$n.value:_n.next()})},kn(In),yn(In,vn,"Generator"),yn(In,Ft,function(){return this}),yn(In,"toString",function(){return"[object Generator]"}),Dt.keys=function(Fn){var Vn=[];for(var Bn in Fn)Vn.push(Bn);return Vn.reverse(),function qn(){for(;Vn.length;){var Gn=Vn.pop();if(Gn in Fn)return qn.value=Gn,qn.done=!1,qn}return qn.done=!0,qn}},Dt.values=on,Qn.prototype={constructor:Qn,reset:function(Fn){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(jn),!Fn)for(var Vn in this)Vn.charAt(0)==="t"&&nn.call(this,Vn)&&!isNaN(+Vn.slice(1))&&(this[Vn]=void 0)},stop:function(){this.done=!0;var Fn=this.tryEntries[0].completion;if(Fn.type==="throw")throw Fn.arg;return this.rval},dispatchException:function(Fn){if(this.done)throw Fn;var Vn=this;function Bn(wn,Yt){return _n.type="throw",_n.arg=Fn,Vn.next=wn,Yt&&(Vn.method="next",Vn.arg=void 0),!!Yt}for(var qn=this.tryEntries.length-1;qn>=0;--qn){var Gn=this.tryEntries[qn],_n=Gn.completion;if(Gn.tryLoc==="root")return Bn("end");if(Gn.tryLoc<=this.prev){var $n=nn.call(Gn,"catchLoc"),bn=nn.call(Gn,"finallyLoc");if($n&&bn){if(this.prev<Gn.catchLoc)return Bn(Gn.catchLoc,!0);if(this.prev<Gn.finallyLoc)return Bn(Gn.finallyLoc)}else if($n){if(this.prev<Gn.catchLoc)return Bn(Gn.catchLoc,!0)}else{if(!bn)throw new Error("try statement without catch or finally");if(this.prev<Gn.finallyLoc)return Bn(Gn.finallyLoc)}}}},abrupt:function(Fn,Vn){for(var Bn=this.tryEntries.length-1;Bn>=0;--Bn){var qn=this.tryEntries[Bn];if(qn.tryLoc<=this.prev&&nn.call(qn,"finallyLoc")&&this.prev<qn.finallyLoc){var Gn=qn;break}}Gn&&(Fn==="break"||Fn==="continue")&&Gn.tryLoc<=Vn&&Vn<=Gn.finallyLoc&&(Gn=null);var _n=Gn?Gn.completion:{};return _n.type=Fn,_n.arg=Vn,Gn?(this.method="next",this.next=Gn.finallyLoc,Cn):this.complete(_n)},complete:function(Fn,Vn){if(Fn.type==="throw")throw Fn.arg;return Fn.type==="break"||Fn.type==="continue"?this.next=Fn.arg:Fn.type==="return"?(this.rval=this.arg=Fn.arg,this.method="return",this.next="end"):Fn.type==="normal"&&Vn&&(this.next=Vn),Cn},finish:function(Fn){for(var Vn=this.tryEntries.length-1;Vn>=0;--Vn){var Bn=this.tryEntries[Vn];if(Bn.finallyLoc===Fn)return this.complete(Bn.completion,Bn.afterLoc),jn(Bn),Cn}},catch:function(Fn){for(var Vn=this.tryEntries.length-1;Vn>=0;--Vn){var Bn=this.tryEntries[Vn];if(Bn.tryLoc===Fn){var qn=Bn.completion;if(qn.type==="throw"){var Gn=qn.arg;jn(Bn)}return Gn}}throw new Error("illegal catch attempt")},delegateYield:function(Fn,Vn,Bn){return this.delegate={iterator:on(Fn),resultName:Vn,nextLoc:Bn},this.method==="next"&&(this.arg=void 0),Cn}},Dt}function at(Dt,Gt,nn,zt,Ft,un,vn){try{var yn=Dt[un](vn),cn=yn.value}catch(gn){return void nn(gn)}yn.done?Gt(cn):Promise.resolve(cn).then(zt,Ft)}function ht(Dt){return function(){var Gt=this,nn=arguments;return new Promise(function(zt,Ft){var un=Dt.apply(Gt,nn);function vn(cn){at(un,zt,Ft,vn,yn,"next",cn)}function yn(cn){at(un,zt,Ft,vn,yn,"throw",cn)}vn(void 0)})}}s.d(it,{$6:()=>St,AA:()=>Ht,Ak:()=>Nt,BF:()=>ft,Cm:()=>At,E2:()=>pt,MM:()=>bt,Ne:()=>Mt,PR:()=>ot,RX:()=>vt,TI:()=>Ot,Xh:()=>lt,ag:()=>ut,cf:()=>wt,dc:()=>mt,vO:()=>yt}),s(8309),s(2772),s(1539),s(8674),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),s(2443),s(3680),s(3706),s(2703),s(9070),s(8011),s(489),s(9554),s(4747),s(8304),s(7042),s(9064);var dt,pt=null,lt=null,mt=null,ot=null,ut=null,ft=null,bt=null,vt=null,yt=null,At=null,Nt=null,St=null,wt=null,Mt=null,Ht=null,Ot=null;dt=(pt=new UAParser).getBrowser(),ut=pt.getOS(),wt=pt.getBrowser(),typeof apiRTC_React<"u"?(mt=DeviceInfo.getSystemVersion(),ft=DeviceInfo.getSystemName(),lt=DeviceInfo.getUserAgent(),yt=DeviceInfo.getModel()):(mt=dt.version||"Unknown",ft=pt.getOS().name||"Unknown",bt=pt.getOS().version||"Unknown",vt=function(){var Dt=ht(nt().mark(function Gt(){var nn;return nt().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.next=2,pt.getOS().withClientHints();case 2:return nn=zt.sent,zt.abrupt("return",nn.version);case 4:case"end":return zt.stop()}},Gt)}));return function(){return Dt.apply(this,arguments)}}(),lt=dt.name||"Unknown",Mt=pt.getCPU().architecture||"Unknown",yt=pt.getDevice().type||"Unknown",At=pt.getDevice().vendor||"Unknown",Nt=function(){var Dt=ht(nt().mark(function Gt(){var nn;return nt().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.next=2,pt.getDevice().withClientHints();case 2:return nn=zt.sent,zt.abrupt("return",nn.model);case 4:case"end":return zt.stop()}},Gt)}));return function(){return Dt.apply(this,arguments)}}(),Ht=pt.getEngine().name||"Unknown",Ot=pt.getEngine().version||"Unknown"),ot=mt!==void 0?dt.major:99,window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase().indexOf(" electron/")>=0&&(St="electron")},4708:(rt,it,s)=>{function et(Nt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},et(Nt)}s.d(it,{Pj:()=>ht,S6:()=>mt,Wc:()=>lt,Ym:()=>vt,_C:()=>at,cw:()=>bt,dD:()=>pt,fS:()=>At,ki:()=>yt,wL:()=>ut,ws:()=>ot,yJ:()=>dt}),s(4603),s(4916),s(9714),s(3123),s(9600),s(1249),s(7941),s(4723),s(1058),s(6992),s(9575),s(1539),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(9753),s(7042),s(2526),s(1817),s(2165),s(8783),s(3948);var nt=s(1549).Y.get("Utils");function at(Nt){return new RegExp("^[0-9-.]*$","g").test(Nt)}function ht(){return typeof apiRTC_React<"u"||window.location.protocol==="https:"}function dt(){return typeof apiRTC_React>"u"&&window.location.protocol==="http:"}function pt(Nt){var St,wt,Mt,Ht,Ot={};for(Mt=0,Ht=(St=Nt.split("&")).length;Mt<Ht;Mt++)Ot[(wt=St[Mt].split("="))[0]]=wt[1];return Ot}function lt(Nt){return Object.keys(Nt).map(function(St){return St+"="+Nt[St]}).join("&")}function mt(Nt,St){nt.debug("mergeJSON");var wt={},Mt=null;if(Nt)for(Mt in Nt)Nt.hasOwnProperty(Mt)&&(wt[Mt]=Nt[Mt]);if(St)for(Mt in St)St.hasOwnProperty(Mt)&&(wt[Mt]=St[Mt]);return nt.log(wt),wt}var ot=function(Nt,St){var wt,Mt,Ht;for(Nt==null&&(Nt={}),wt=1;wt<arguments.length;wt+=1)for(Mt in Ht=arguments[wt])Ht.hasOwnProperty(Mt)&&(Nt[Mt]=Ht[Mt]);return Nt},ut=function(){var Nt=function(wt,Mt,Ht){var Ot=wt.match(Mt);return Ot&&Ot.length>=Ht&&parseInt(Ot[Ht],10)},St={};if(typeof apiRTC_React<"u")return St.type="react-native",St;if(window!==void 0&&window.navigator!==void 0)if(window.navigator.mozGetUserMedia)St.type="firefox",St.version=Nt(window.navigator.userAgent,/Firefox\/(\d+)\./,1);else if(window.navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)St.type="chrome",St.version=Nt(window.navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!window.navigator.userAgent.match(/Version\/(\d+).(\d+)/))return St;St.type="safari",St.version=Nt(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(window.navigator.mediaDevices&&window.navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))St.type="edge",St.version=Nt(window.navigator.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!window.navigator.mediaDevices||!window.navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return St;St.type="safari",St.version=Nt(window.navigator.userAgent,/AppleWebKit\/(\d+)\./,1)}return St}(),ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/=",bt={decode:function(Nt){var St,wt=ft.indexOf(Nt.charAt(Nt.length-1)),Mt=ft.indexOf(Nt.charAt(Nt.length-2)),Ht=Nt.length/4*3,Ot=null,Dt=null,Gt=null,nn=null,zt=null,Ft=null,un=0,vn=null;for(wt===64&&Ht--,Mt===64&&Ht--,vn=new Uint8Array(Ht),St=0;St<Ht;St+=3)Ot=ft.indexOf(Nt.charAt(un++))<<2|(nn=ft.indexOf(Nt.charAt(un++)))>>4,Dt=(15&nn)<<4|(zt=ft.indexOf(Nt.charAt(un++)))>>2,Gt=(3&zt)<<6|(Ft=ft.indexOf(Nt.charAt(un++))),vn[St]=Ot,zt!==64&&(vn[St+1]=Dt),Ft!==64&&(vn[St+2]=Gt);return vn},encode:function(Nt){var St,wt="",Mt=new Uint8Array(Nt),Ht=Mt.byteLength,Ot=Ht%3,Dt=Ht-Ot,Gt=null;for(St=0;St<Dt;St+=3)Gt=Mt[St]<<16|Mt[St+1]<<8|Mt[St+2],wt+=ft[(16515072&Gt)>>18]+ft[(258048&Gt)>>12]+ft[(4032&Gt)>>6]+ft[63&Gt];return Ot===1?(Gt=Mt[Dt],wt+=ft[(252&Gt)>>2]+ft[(3&Gt)<<4]+"=="):Ot===2&&(Gt=Mt[Dt]<<8|Mt[Dt+1],wt+=ft[(64512&Gt)>>10]+ft[(1008&Gt)>>4]+ft[(15&Gt)<<2]+"="),wt}};function vt(Nt,St){return arguments.length===3?yt(arguments[0],arguments[1],arguments[2]):St==="null"?Nt===null:St==="array"?Nt!==null&&et(Nt)==="object"&&Array.isArray(Nt):Nt!==null&&et(Nt)===St}function yt(Nt,St,wt){if(St!==null&&et(St)==="object"&&Array.isArray(St)&&St.length>=1){var Mt=St[0];if(St.length>1)return vt(Nt,"object")&&vt(Mt,"string")&&Nt.hasOwnProperty(Mt)&&vt(Nt[Mt],"object")&&yt(Nt[Mt],St.slice(1),wt);St=Mt}return wt==="undefined"?vt(Nt,"object")&&vt(St,"string")&&!Nt.hasOwnProperty(St)&&vt(Nt[St],wt):vt(Nt,"object")&&vt(St,"string")&&Nt.hasOwnProperty(St)&&vt(Nt[St],wt)}function At(Nt,St){if(Nt===St)return!0;if(!(Nt instanceof Object&&St instanceof Object)||Nt.constructor!==St.constructor)return!1;for(var wt in Nt)if(Nt.hasOwnProperty(wt)){if(!St.hasOwnProperty(wt))return!1;if(Nt[wt]===St[wt])continue;if(et(Nt[wt])!=="object"||!At(Nt[wt],St[wt]))return!1}for(wt in St)if(St.hasOwnProperty(wt)&&!Nt.hasOwnProperty(wt))return!1;return!0}},6075:(rt,it,s)=>{s.d(it,{F:()=>nt});var et=s(1549).Y.get("WebRTC_Stack"),nt=function(){this.adaptForIoSCordova=function(){if(apiRTC.osName==="iOS"&&typeof cordova<"u"){if(et.log("Modification for iOS cordova"),cordova.plugins===void 0)return void et.log("cordova.plugins not defined");if(cordova.plugins.iosrtc===void 0)return void et.log("cordova.plugins.iosrtc not defined");this.RTCPeerConnection=cordova.plugins.iosrtc.RTCPeerConnection,this.RTCSessionDescription=cordova.plugins.iosrtc.RTCSessionDescription,this.RTCIceCandidate=cordova.plugins.iosrtc.RTCIceCandidate}},typeof RTCSessionDescription<"u"?this.RTCSessionDescription=RTCSessionDescription:et.log("RTCSessionDescription is undefined"),typeof RTCIceCandidate<"u"?this.RTCIceCandidate=RTCIceCandidate:et.log("RTCIceCandidate is undefined"),typeof RTCPeerConnection<"u"?this.RTCPeerConnection=RTCPeerConnection:et.log("RTCPeerConnection is undefined"),navigator.getUserMedia!==void 0?this.getUserMedia=navigator.getUserMedia:typeof getUserMedia<"u"?this.getUserMedia=getUserMedia:et.log("getUserMedia is undefined")}},8765:(rt,it,s)=>{s.d(it,{K:()=>pt}),s(6755),s(2772),s(3710),s(8309),s(9601),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(1549),nt=s(5945),at=s(4708);function ht(lt){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mt){return typeof mt}:function(mt){return mt&&typeof Symbol=="function"&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt},ht(lt)}var dt=et.Y.get("WebRTC_Event"),pt=function(){if(dt.debug("WebRTC_Event"),this.customEventIsDefined="notTested",this.customEventIsDefined==="notTested")try{new CustomEvent("test",{detail:"test",bubbles:!0,cancelable:!0}),this.customEventIsDefined=!0}catch(lt){this.customEventIsDefined=!1,dt.log("customEvent error :"+lt)}(nt.Xh==="IE"&&nt.dc>8||nt.Xh==="Netscape")&&(dt.log("polyfill the CustomEvent()"),function(){function lt(mt,ot){ot=ot||{bubbles:!1,cancelable:!1,detail:void 0};var ut=document.createEvent("CustomEvent");return ut.initCustomEvent(mt,ot.bubbles,ot.cancelable,ot.detail),ut}lt.prototype=window.CustomEvent.prototype,window.CustomEvent=lt}(),this.customEventIsDefined=!0),nt.Xh==="IE"&&nt.dc>8&&(dt.log("polyfill startsWith()"),String.prototype.startsWith||(String.prototype.startsWith=function(lt,mt){return mt=mt||0,this.indexOf(lt,mt)===mt})),this.eventDispatchMgr=function(lt,mt){if(typeof apiRTC_React<"u"){var ot={type:lt,detail:mt};eventManager.dispatchEvent(ot)}else if(this.customEventIsDefined===!1)typeof $jqApz<"u"?(dt.log("CustomEvent not supported by Browser, using $jqApz "),$jqApz.event.trigger({type:lt,detail:mt})):typeof jQuery<"u"?(dt.log("CustomEvent not supported by Browser, using jQuery "),jQuery.event.trigger({type:lt,detail:mt})):dt.warn("Custom Events not supported on this browser : eventDispatchMgr()");else{var ut=new CustomEvent(lt,{detail:mt,bubbles:!0,cancelable:!0});document.dispatchEvent(ut)}},this.createIncomingCallEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At,Nt,St){var wt={eventType:"incomingCall",time:new Date,clientId:lt,callerId:mt,callId:ut,autoAnswerActivated:ft,callNumber:bt,callerNickname:ot,audioOnly:vt,callType:yt,destCallType:St,recordedCall:At,remoteType:Nt};this.eventDispatchMgr("incomingCall",wt)},this.createCallAttemptEvent=function(lt,mt,ot,ut){var ft={eventType:"callAttempt",time:new Date,clientId:lt,callerId:mt,callId:ut,callerNickname:ot};this.eventDispatchMgr("callAttempt",ft)},this.createCallEstablishedEvent=function(lt,mt,ot,ut){dt.debug("createCallEstablishedEvent with callType : "+mt),dt.debug("destCallType : "+ut);var ft={eventType:"callEstablished",time:new Date,calleeId:lt,callType:mt,callId:ot,destCallType:ut};this.eventDispatchMgr("callEstablished",ft)},this.createHangupEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"hangup",time:new Date,hangupType:lt,clientId:mt,remoteId:ot,lastEstablishedCall:ut,reason:ft,callId:bt,callType:vt};this.eventDispatchMgr("hangup",yt)},this.createRemoteHangupEvent=function(lt,mt,ot,ut){var ft={eventType:"remoteHangup",time:new Date,clientId:lt,remoteId:mt,lastEstablishedCall:ot,reason:ut};this.eventDispatchMgr("remoteHangup",ft)},this.createCallRestartingEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At){var Nt={eventType:"callRestarting",time:new Date,callType:lt,audioOnly:mt,oldCallId:ot,newCallId:ut,dataType:ft,clientId:bt,remoteId:vt,destRoom:yt,streamId:At};this.eventDispatchMgr("callRestarting",Nt)},this.createUserMediaSuccessEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At,Nt,St){var wt={eventType:"userMediaSuccess",time:new Date,onCallEstablishment:lt,audioIsAvailable:mt,audioDeviceLabel:ot,videoIsAvailable:ut,videoDeviceLabel:ft,callType:bt,callId:vt,stream:yt,remoteId:At,restarted:Nt,userMediaStreamId:St};this.eventDispatchMgr("userMediaSuccess",wt)},this.createUserMediaErrorEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"userMediaError",time:new Date,onCallEstablishment:lt,callType:mt,userMediaStreamId:ut,callId:ft,tryAudioCallActivated:bt,gumConfig:vt};ht(ot)==="object"?(yt.error={},yt.error.message=ot.message,yt.error.code=ot.code,yt.error.name=ot.name):yt.error=ot,this.eventDispatchMgr("userMediaError",yt)},this.createUserMediaStopEvent=function(lt,mt,ot){var ut={eventType:"userMediaStop",time:new Date,callId:lt,mediaType:mt,userMediaStreamId:ot};this.eventDispatchMgr("userMediaStop",ut)},this.createICECandidateTypeUpdateEvent=function(lt,mt,ot){var ut={eventType:"ICECandidateTypeUpdate",time:new Date,callId:lt,localCandidate:mt,remoteCandidate:ot};this.eventDispatchMgr("ICECandidateTypeUpdate",ut)},this.createSelectedICECandidateEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"selectedICECandidate",time:new Date,callId:lt,localCandidateType:mt,remoteCandidateType:ot,localAddress:ut,remoteAdress:ft,transportType:bt,localTransportType:vt};this.eventDispatchMgr("selectedICECandidate",yt)},this.createErrorEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"error",time:new Date,errorInfo:lt,errorCode:mt,callId:ot,roomName:ut,roomCallType:ft};(0,at.Ym)(bt,"object")&&(yt.data=bt),(0,at.Ym)(vt,"string")&&(yt.convId=vt),this.eventDispatchMgr("error",yt)},this.createReceiveIMMessageEvent=function(lt,mt,ot,ut,ft,bt){var vt={eventType:"receiveIMMessage",time:new Date,senderId:lt,senderNickname:mt,senderPhotoURL:ot,message:ut,UUCSeq:ft,convId:bt};this.eventDispatchMgr("receiveIMMessage",vt)},this.createChannelEvent=function(lt,mt){var ot={eventType:"channelEvent",time:new Date,channelEvent:lt,event:mt};this.eventDispatchMgr("channelEvent",ot)},this.createSessionReadyEvent=function(lt){dt.debug("createSessionReadyEvent");var mt={eventType:"sessionReady",time:new Date,apiCCId:lt};this.eventDispatchMgr("sessionReady",mt)},this.createWebRTCClientCreatedEvent=function(){var lt={eventType:"webRTCClientCreated",time:new Date};this.eventDispatchMgr("webRTCClientCreated",lt)},this.createUpdatePresenceEvent=function(lt,mt,ot){var ut={eventType:"updatePresence",time:new Date,connectedUsersList:lt,connectedUsersListWithStatus:ot,state:mt};this.eventDispatchMgr("updatePresence",ut)},this.createCloudEventOccurredEvent=function(lt,mt){var ot={eventType:"cloudEventOccurred",time:new Date,topic:lt,target:mt};this.eventDispatchMgr("cloudEventOccurred",ot)},this.createUpdateUserStatusEvent=function(lt){var mt={eventType:"updateUserStatus",time:new Date,message:lt};this.eventDispatchMgr("updateUserStatus",mt)},this.createGroupChatCreationEvent=function(lt,mt,ot,ut,ft,bt){var vt={eventType:"groupChatCreation",time:new Date,status:lt,groupChatId:mt,initialDestId:ot,invitationSendedToInitialDestId:ut,newContactId:ft,invitationSendedToNewContactId:bt};this.eventDispatchMgr("groupChatCreation",vt)},this.createGroupChatInvitationEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"groupChatInvitation",time:new Date,groupChatId:lt,contactList:ft,senderId:mt,senderNickname:ot,senderPhotoURL:ut};this.eventDispatchMgr("groupChatInvitation",bt)},this.createGroupChatMemberUpdateEvent=function(lt,mt,ot){var ut={eventType:"groupChatMemberUpdate",time:new Date,groupChatId:lt,contactList:mt,status:ot};this.eventDispatchMgr("groupChatMemberUpdate",ut)},this.createAddUserInGroupChatEvent=function(lt,mt,ot){var ut={eventType:"addUserInGroupChatAnswer",time:new Date,invitationSended:lt,groupChatId:mt,contactId:ot};this.eventDispatchMgr("addUserInGroupChatAnswer",ut)},this.createReceiveGroupChatMessageEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"receiveGroupChatMessage",time:new Date,groupChatId:lt,senderId:mt,senderNickname:ot,message:ut};(0,at.Ym)(ft,"object")&&(bt.metadata=ft),this.eventDispatchMgr("receiveGroupChatMessage",bt)},this.createReceiveConversationListAnswerEvent=function(lt){var mt={eventType:"receiveConversationList",time:new Date,convList:lt};this.eventDispatchMgr("receiveConversationList",mt)},this.createReceiveContactOccurrencesFromConversationListAnswerEvent=function(lt){var mt={eventType:"receiveContactOccurrencesFromConversationList",time:new Date,occurrencesList:lt};this.eventDispatchMgr("receiveContactOccurrencesFromConversationList",mt)},this.createReceiveConversationDetailReportAnswerEvent=function(lt){var mt={eventType:"receiveConversationDetailReport",time:new Date,CDR:lt};this.eventDispatchMgr("receiveConversationDetailReport",mt)},this.createReceiveConversationHistoryEvent=function(lt,mt,ot){var ut={eventType:"receiveConversationHistory",time:new Date,convId:lt,convHistory:mt,status:ot};this.eventDispatchMgr("receiveConversationHistory",ut)},this.createUserDataAnswerEvent=function(lt,mt,ot,ut){var ft={eventType:"userDataAnswer",time:new Date,userFound:lt,contactId:mt,nickname:ot,photoURL:ut};this.eventDispatchMgr("userDataAnswer",ft)},this.createFetchUserDataAnswerEvent=function(lt){var mt="fetchUserDataAnswer",ot={eventType:mt,timeout:lt.timeout,userData:lt.userData,id:lt.id};this.eventDispatchMgr(mt,ot)},this.createReceiveDataEvent=function(lt,mt,ot){var ut={eventType:"receiveData",time:new Date,senderId:lt,dstRoomId:mt,data:ot};this.eventDispatchMgr("receiveData",ut)},this.createMCUSessionCreationEvent=function(lt,mt){var ot={eventType:"MCUSessionCreation",time:new Date,sessionId:lt,token:mt};this.eventDispatchMgr("MCUSessionCreation",ot)},this.createJoinMCUSessionAnswerEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"joinMCUSessionAnswer",time:new Date,sessionId:lt,token:mt,groupChatId:ot,initiator:ut,roomId:ft.roomName};ft.roomMode&&(bt.mode=ft.roomMode),ft.meshOnly===!0&&(bt.meshOnly=!0),ft.joinSessionAnswer&&(bt.result=Object.assign({},ft.joinSessionAnswer)),this.eventDispatchMgr("joinMCUSessionAnswer",bt)},this.createMCUAvailableStreamEvent=function(lt,mt){var ot={eventType:"MCUAvailableStream",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableStream",ot)},this.createMCUAvailableReplayEvent=function(lt,mt){var ot={eventType:"MCUAvailableReplay",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableReplay",ot)},this.createMCUAvailableCompositeEvent=function(lt,mt){var ot={eventType:"MCUAvailableComposite",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableComposite",ot)},this.createMCURemovedStreamEvent=function(lt){var mt={eventType:"MCURemoveStream",time:new Date,streamId:lt};this.eventDispatchMgr("MCURemoveStream",mt)},this.createMCUAvailableStreamUpdateEvent=function(lt,mt){var ot={eventType:"MCUAvailableStreamUpdate",time:new Date,streams:lt,isRemoteStream:mt};this.eventDispatchMgr("MCUAvailableStreamUpdate",ot)},this.createMCUParticipantEjectedEvent=function(lt,mt,ot){var ut={eventType:"MCUParticipantEjected",time:new Date,roomId:lt,clientId:mt};ot&&(ut.data=ot),this.eventDispatchMgr("MCUParticipantEjected",ut)},this.createReceiveMCUSessionInvitationEvent=function(lt,mt,ot,ut){ot===void 0&&(ot=0);var ft={eventType:"receiveMCUSessionInvitation",time:new Date,sessionId:lt,token:mt,groupChatId:ot,initiatorId:ut};this.eventDispatchMgr("receiveMCUSessionInvitation",ft)},this.createRemoteStreamAddedEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"remoteStreamAdded",time:new Date,callId:mt,callType:lt,stream:ot,remoteId:ut,destCallType:ft,audioIsAvailable:bt.available,audioIsActive:bt.active,audioIsMuted:bt.muted,videoIsAvailable:vt.available,videoIsActive:vt.active,videoIsMuted:vt.muted};this.eventDispatchMgr("remoteStreamAdded",yt)},this.createRemoteStreamRemovedEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"remoteStreamRemoved",time:new Date,callId:mt,callType:lt,stream:ot,remoteId:ut,destCallType:ft};this.eventDispatchMgr("remoteStreamRemoved",bt)},this.createSimulcastFeedChanged=function(lt,mt){var ot={eventType:"simulcastFeedChanged",time:new Date,callId:lt,simulcast:mt};this.eventDispatchMgr("simulcastFeedChanged",ot)},this.createLocalStreamRemovedEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"localStreamRemoved",time:new Date,callId:mt,callType:lt,stream:ot,remoteId:ut,destCallType:ft};this.eventDispatchMgr("localStreamRemoved",bt)},this.createSlowLinkEvent=function(lt,mt){var ot={eventType:"slowLink",time:new Date,callId:lt};mt&&(ot.advice=mt),this.eventDispatchMgr("slowLink",ot)},this.createVideoQualityChangedEvent=function(lt,mt,ot,ut){var ft={eventType:"videoQualityChanged",time:new Date,roomname:mt,callId:lt,hint:ot,profileType:ut.name};ut.bitrate&&(ft.bitrate=ut.bitrate),ut.width&&ut.height&&(ft.width=ut.width,ft.height=ut.height),ut.frameRate&&(ft.frameRate=ut.frameRate),this.eventDispatchMgr("videoQualityChanged",ft)},this.createAudioAmplitudeEvent=function(lt,mt,ot,ut){var ft={eventType:"audioAmplitude",time:new Date,callId:ot,userMediaStreamId:ut,descriptor:{amplitude:lt,isSpeaking:mt}};this.eventDispatchMgr("audioAmplitude",ft)},this.createLocalStreamUpdatedEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At){var Nt={eventType:"localStreamUpdated",time:new Date,changeList:lt,audioIsAvailable:mt.available,audioDeviceLabel:mt.deviceLabel,audioIsActive:mt.active,audioIsMuted:mt.muted,audioIsSilent:mt.silent,videoIsAvailable:ot.available,videoDeviceLabel:ot.deviceLabel,videoIsActive:ot.active,videoIsMuted:ot.muted,videoIsSilent:ot.silent,onCall:ut,callType:ft,callId:bt,stream:vt,userMediaStreamId:yt,cause:At};this.eventDispatchMgr("localStreamUpdated",Nt)},this.createRemoteStreamUpdatedEvent=function(lt,mt,ot,ut,ft,bt){var vt={eventType:"remoteStreamUpdated",time:new Date,changeList:lt,audioIsAvailable:mt.available,audioIsActive:mt.active,audioIsMuted:mt.muted,audioIsSilent:mt.silent,videoIsAvailable:ot.available,videoIsActive:ot.active,videoIsMuted:ot.muted,videoIsSilent:ot.silent,callType:ut,callId:ft,cause:bt};this.eventDispatchMgr("remoteStreamUpdated",vt)},this.createCanPlayRemoteVideoEvent=function(lt,mt,ot){var ut={eventType:"canPlayRemoteVideo",time:new Date,videoDivId:lt,callType:mt,remoteId:ot};this.eventDispatchMgr("canPlayRemoteVideo",ut)},this.createRecordedFileAvailableEvent=function(lt){var mt={eventType:"recordedFileAvailable",time:new Date,fileName:lt};this.eventDispatchMgr("recordedFileAvailable",mt)},this.createRecordedStreamsAvailableEvent=function(lt,mt,ot,ut,ft,bt,vt){var yt={eventType:"recordedStreamsAvailable",time:new Date,confId:lt,userId1:mt,userId2:ot,callId:ut,apiKey:apiCC.session.apiKey};ft&&(yt.convId=ft),bt&&(yt.mediaId=bt),vt&&(yt.mediaURL=vt),this.eventDispatchMgr("recordedStreamsAvailable",yt)},this.createMCURecordedStreamsAvailableEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At,Nt,St){var wt={eventType:"MCURecordedStreamsAvailable",time:new Date,roomName:lt,callId:mt,clientId:ot,convId:ft,mediaId:bt,mediaURL:vt,recordType:yt};At&&(wt.remoteId=At),ut&&(wt.recordedFileName=ut),Nt&&(wt.mediaType=Nt),(0,at.Ym)(St,"object")?(wt.descriptor={},(0,at.Ym)(St,"mode","string")&&(wt.descriptor.mode=St.mode),(0,at.Ym)(St,"labelEnabled","boolean")&&(wt.descriptor.labelEnabled=St.labelEnabled),wt.descriptor.labelEnabled===!0&&(0,at.Ym)(St,"labels","array")&&(wt.descriptor.labels=St.labels)):wt.descriptor={mode:"complete",labelEnabled:!1},this.eventDispatchMgr("MCURecordedStreamsAvailable",wt)},this.createMCURecordingStartedEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At,Nt,St,wt){var Mt={eventType:"MCURecordingStarted",time:new Date,roomName:lt,callId:mt,clientId:ot,recordType:ut,recordStartTime:ft};bt&&(Mt.convId=bt),vt&&(Mt.mediaId=vt),yt&&(Mt.mediaURL=yt),At&&(Mt.remoteId=At),Nt&&(Mt.recordedFileName=Nt),St&&(Mt.mediaType=St),(0,at.Ym)(wt,"object")&&(Mt.descriptor={},(0,at.Ym)(wt,"mode","string")&&(Mt.descriptor.mode=wt.mode),(0,at.Ym)(wt,"labelEnabled","boolean")&&(Mt.descriptor.labelEnabled=wt.labelEnabled),Mt.descriptor.labelEnabled===!0&&(0,at.Ym)(wt,"labels","array")&&(Mt.descriptor.labels=wt.labels)),this.eventDispatchMgr("MCURecordingStarted",Mt)},this.createMCURecordingStoppedEvent=function(lt,mt,ot,ut,ft,bt,vt,yt,At,Nt,St,wt){var Mt={eventType:"MCURecordingStopped",time:new Date,roomName:lt,callId:mt,clientId:ot,recordType:ut,recordStartTime:ft};bt&&(Mt.convId=bt),vt&&(Mt.mediaId=vt),yt&&(Mt.mediaURL=yt),At&&(Mt.remoteId=At),Nt&&(Mt.recordedFileName=Nt),St&&(Mt.mediaType=St),(0,at.Ym)(wt,"object")&&(Mt.descriptor={},(0,at.Ym)(wt,"mode","string")&&(Mt.descriptor.mode=wt.mode),(0,at.Ym)(wt,"labelEnabled","boolean")&&(Mt.descriptor.labelEnabled=wt.labelEnabled),Mt.descriptor.labelEnabled===!0&&(0,at.Ym)(wt,"labels","array")&&(Mt.descriptor.labels=wt.labels)),this.eventDispatchMgr("MCURecordingStopped",Mt)},this.createStopRecordEvent=function(){var lt={eventType:"stopRecord",time:new Date};this.eventDispatchMgr("stopRecord",lt)},this.createMCUStreamingStartedEvent=function(lt,mt,ot,ut){var ft={eventType:"MCUStreamingStarted",time:new Date,roomName:lt,callId:mt,clientId:ot,streamingStartTime:ut};this.eventDispatchMgr("MCUStreamingStarted",ft)},this.createMCUStreamingStoppedEvent=function(lt,mt,ot,ut){var ft={eventType:"MCUStreamingStopped",time:new Date,roomName:lt,callId:mt,clientId:ot,streamingEndTime:ut};this.eventDispatchMgr("MCUStreamingStopped",ft)},this.createMCURoomModeChangedEvent=function(lt,mt,ot,ut){var ft={eventType:"MCURoomModeChanged",time:new Date,roomId:lt,oldMode:mt,newMode:ot,state:ut};this.eventDispatchMgr("MCURoomModeChanged",ft)},this.createSnapShotPhotoUploaded=function(lt){var mt={eventType:"snapShotPhotoUploaded",time:new Date,fileName:lt};this.eventDispatchMgr("snapShotPhotoUploaded",mt)},this.createRoomCreationEvent=function(lt,mt,ot){var ut={eventType:"roomCreation",time:new Date,status:lt,roomId:mt,roomType:ot};this.eventDispatchMgr("roomCreation",ut)},this.createRoomJoinedEvent=function(lt,mt,ot){var ut={eventType:"roomJoined",time:new Date,status:lt,roomId:mt,roomType:ot};this.eventDispatchMgr("roomJoined",ut)},this.createRoomInvitationEvent=function(lt,mt,ot,ut,ft,bt){var vt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},yt="roomInvitation",At={eventType:"roomInvitation",time:new Date,roomId:lt,contactList:ft,senderId:mt,senderNickname:ot,senderPhotoURL:ut,roomType:bt};vt.cloudConvId&&(At.cloudConvId=vt.cloudConvId),vt.webconf===!0&&(At.webconf=!0),this.eventDispatchMgr(yt,At)},this.createRoomMemberUpdateEvent=function(lt,mt,ot,ut){var ft={eventType:"roomMemberUpdate",time:new Date,roomId:lt,contactList:mt,status:ot,roomType:ut};this.eventDispatchMgr("roomMemberUpdate",ft)},this.createContactListInRoomEvent=function(lt,mt,ot){var ut={eventType:"contactListInRoom",time:new Date,roomId:lt,contactList:mt,roomType:ot};this.eventDispatchMgr("contactListInRoom",ut)},this.createReceiveRoomMessageEvent=function(lt,mt,ot,ut,ft){var bt={eventType:"receiveRoomMessage",time:new Date,roomId:lt,senderId:mt,senderNickname:ot,message:ut,roomType:ft};this.eventDispatchMgr("receiveRoomMessage",bt)},this.createDesktopCaptureEvent=function(lt,mt,ot){var ut={eventType:"desktopCapture",time:new Date,event:lt,callId:mt,remoteId:ot};this.eventDispatchMgr("desktopCapture",ut)},this.createMediaDeviceChangedEvent=function(lt,mt,ot){var ut="NotDefined";mt!=null&&(ut=mt);var ft={eventType:"mediaDeviceChanged",time:new Date,diff:lt,updateReason:ut,firstMediaDeviceListInitialization:ot};this.eventDispatchMgr("mediaDeviceChanged",ft)},this.createSwitchStreamEvent=function(lt,mt){var ot={eventType:"switchStream",time:new Date,callId:lt,stream:mt};this.eventDispatchMgr("switchStream",ot)},this.createConnectedUsersListUpdateEvent=function(lt,mt,ot,ut){var ft={eventType:"ConnectedUsersListUpdate",time:new Date,group:lt,usersList:mt,status:ot,updateReason:ut};this.eventDispatchMgr("connectedUsersListUpdate",ft)},this.createClosingWhiteBoardEvent=function(lt,mt){var ot={eventType:"closingWhiteBoard",time:new Date,roomId:lt,reason:mt};this.eventDispatchMgr("closingWhiteBoard",ot)},this.createExternalJsLoadingStatusEvent=function(lt,mt){var ot={eventType:"externalJsLoadingStatus",extjs:lt,status:mt,time:new Date};this.eventDispatchMgr("externalJsLoadingStatus",ot)},this.createBackgroundSubstractionStopVisibilityChangeEvent=function(lt){var mt={userMediaStreamId:lt};this.eventDispatchMgr("backgroundSubstractionStopVisibilityChange",mt)},this.createBackgroundSubstractionStopComputeTimeEvent=function(lt){var mt={userMediaStreamId:lt};this.eventDispatchMgr("backgroundSubstractionStopComputeTime",mt)},this.createAIESnapshotEvent=function(lt,mt){var ot={userMediaStreamId:lt,image:mt};this.eventDispatchMgr("AIESnapshot",ot)},this.createAIELogEvent=function(lt,mt){var ot={userMediaStreamId:lt,log:mt};this.eventDispatchMgr("AIELog",ot)},this.createEvent=function(lt){if(!lt.eventType)throw new Error("The event json must have an eventType"+lt);lt.time=new Date,this.eventDispatchMgr(lt.eventType,lt)}}},940:(rt,it,s)=>{s.d(it,{S:()=>ht}),s(2772);var et=s(1549),nt=s(5945),at=et.Y.get("WebRTC_Stack"),ht=function(dt){this.sendInvite=function(pt,lt,mt,ot,ut,ft){var bt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{};at.debug("WebRTC_Stack::sendInvite()"),ft||(ft="media");var vt={type:"invite",callId:pt,callerId:lt,callerNickname:mt,calleeId:ot,roomId:ut,callType:ft};bt.mode&&(vt.mode=bt.mode);var yt=bt.offer;if(yt){if(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11){var At=yt.type,Nt=yt.sdp;at.log("JSON.stringify(type):",JSON.stringify(At)),at.log("JSON.stringify(sdp):",JSON.stringify(Nt)),yt={type:At,sdp:Nt}}vt.sdpoffer=yt}bt.data&&(vt.data=bt.data),bt.stream&&(vt.stream=bt.stream);var St=JSON.stringify(vt);at.info("C->S:",St),dt.emit("invite",St)},this.sendInviteBroadcast=function(pt,lt,mt,ot,ut,ft){var bt,vt;at.debug("WebRTC_Stack::sendInviteBroadcast()"),bt={type:"invite",callId:pt,callerId:lt,callerNickname:mt,calleeId:ot,roomId:ut,sdpoffer:ft},vt=JSON.stringify(bt),at.debug("C->S: "+vt),dt.emit("invite_broadcast",vt)},this.send200OK=function(pt,lt,mt,ot,ut,ft,bt){at.debug("WebRTC_Stack::send200OK()");var vt,yt,At=null;(nt.Xh==="IE"||nt.Xh==="Safari"&&nt.PR<11)&&(at.log("JSON.stringify(offer.sdp) :"+JSON.stringify(ft.sdp)),at.log("JSON.stringify(offer.type) :"+JSON.stringify(ft.type)),(At={}).sdp=ft.sdp,At.type=ft.type,ft=At),vt={type:"200OK",callId:pt,callerId:lt,calleeId:mt,calleeNickname:ot,roomId:ut,sdpanswer:ft,data:bt},yt=JSON.stringify(vt),at.info("C->S: "+yt),dt.emit("200OK",yt)},this.sendCandidate=function(pt,lt,mt,ot,ut,ft,bt,vt,yt,At){at.debug("WebRTC_Stack::sendCandidate()");var Nt=null,St={};at.debug("completeCandidate :",At),nt.Xh==="IE"?(at.log("Browser is IE, adapting completeCandidate"),St.sdpMLineIndex=At.sdpMLineIndex,St.candidate=At.candidate,St.sdpMid=At.sdpMid):St=At,yt!==null?(at.log("call data is defined :",yt),Nt={type:"candidate",callId:pt,callerId:lt,calleeId:mt,roomId:ot,dst:ut,label:ft,id:bt,candidate:vt,data:yt,completeCandidate:St}):(at.log("call data is undefined"),Nt={type:"candidate",callId:pt,callerId:lt,calleeId:mt,roomId:ot,dst:ut,label:ft,id:bt,candidate:vt,completeCandidate:St});var wt=JSON.stringify(Nt);at.info("C->S:",wt),dt.emit("candidate",wt)},this.sendBye=function(pt,lt,mt,ot,ut,ft){at.debug("WebRTC_Stack::sendBye()");var bt,vt=null;ft!==null?(at.log("call data is defined :"+ft),vt={type:"bye",callId:pt,clientId:lt,roomId:mt,dst:ot,reason:ut,data:ft}):(at.log("call data is undefined"),vt={type:"bye",callId:pt,clientId:lt,roomId:mt,dst:ot,reason:ut}),bt=JSON.stringify(vt),at.info("C->S: "+bt),dt.emit("bye",bt)},this.sendUpdate=function(pt,lt,mt,ot,ut,ft,bt,vt){at.debug("WebRTC_Stack::sendUpdate()");var yt,At=null;At={type:"update",callId:pt,callerId:lt,calleeId:mt,roomId:ot,dst:ut,sdpoffer:ft,callType:bt},vt!=null&&(at.log("call data is defined: "+vt),At.data=vt),yt=JSON.stringify(At),at.info("C->S: "+yt),dt.emit("update",yt)},this.send200Update=function(pt,lt,mt,ot,ut,ft,bt){at.debug("WebRTC_Stack::send200Update()");var vt,yt=null;bt!==null?(at.log("call data is defined :"+bt),yt={type:"200update",callId:pt,callerId:lt,calleeId:mt,roomId:ot,dst:ut,sdpanswer:ft,data:bt}):(at.log("call data is undefined"),yt={type:"200update",callId:pt,callerId:lt,calleeId:mt,roomId:ot,dst:ut,sdpanswer:ft}),vt=JSON.stringify(yt),at.info("C->S: "+vt),dt.emit("200update",vt)},this.sendDebugCommand=function(pt,lt,mt){var ot,ut;at.debug("WebRTC_Stack::sendDebugCommand :"+pt),ot={type:"debugCommand",command:pt,apiKey:lt,clientId:mt},ut=JSON.stringify(ot),at.info("C->S: "+ut),dt.emit("debugCommand",ut)},this.sendAck=function(pt,lt,mt){var ot,ut;at.debug("WebRTC_Stack::sendAck()"),ot={type:"Ack",AckMessageType:pt,cSeq:lt,dst:mt},ut=JSON.stringify(ot),at.info("C->S: "+ut),dt.emit("Ack",ut)},this.sendInfo=function(pt,lt){var mt,ot,ut=["activeSpeaker","callStats","stopSpeaking"];ut.indexOf(pt)<0&&at.debug("WebRTC_Stack::sendInfo()"),mt={type:"info",infoType:pt,data:lt},ot=JSON.stringify(mt),ut.indexOf(pt)<0&&at.info("C->S: "+ot),dt.emit("info",ot)},this.sendDataMessage=function(pt,lt){at.debug("WebRTC_Stack::sendDataMessage()");var mt={type:"apiRTCDataMessage",senderId:pt,data:lt},ot=JSON.stringify(mt);at.info("C->S: "+ot),dt.emit("apiRTCDataMessage",ot)}}},4170:(rt,it,s)=>{s.r(it),s(4916),s(4723),s(3710),s(1539),s(9714),s(561),function(et){var nt,at,ht=null,dt=null,pt=[];function lt(){return Math.random().toString(36).substr(2)}nt=function(){if(typeof apiRTC_React<"u")return"react-native";var mt,ot=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(mt=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=mt[1]),(ft=ft?[ft[1],ft[2]]:[ot,navigator.appVersion,"-?"])[0]}(),at=function(){if(typeof apiRTC_React<"u")return 1;var mt,ot=navigator.appName,ut=navigator.userAgent,ft=ut.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return ft&&(mt=ut.match(/version\/([\.\d]+)/i))!==null&&(ft[2]=mt[1]),(ft=ft?[ft[1],ft[2]]:[ot,navigator.appVersion,"-?"])[1]}(),dt=new function(){(nt==="MSIE"&&at>8||nt==="Netscape")&&function(){function mt(ot,ut){ut=ut||{bubbles:!1,cancelable:!1,detail:void 0};var ft=document.createEvent("CustomEvent");return ft.initCustomEvent(ot,ut.bubbles,ut.cancelable,ut.detail),ft}mt.prototype=et.CustomEvent.prototype,et.CustomEvent=mt}(),this.eventDispatchMgr=function(mt,ot){if(typeof apiRTC_React<"u"){var ut={type:mt,detail:ot};eventManager.dispatchEvent(ut)}else if(nt==="MSIE"&&at<=8)typeof $jqApz<"u"?$jqApz.event.trigger({type:mt,detail:ot}):typeof jQuery<"u"&&jQuery.event.trigger({type:mt,detail:ot});else{var ft=new CustomEvent(mt,{detail:ot,bubbles:!0,cancelable:!0});document.dispatchEvent(ft)}},this.createGetUserFromIdAnswerEvent=function(mt){var ot={eventType:"getUserFromIdAnswer",time:new Date,message:mt};this.eventDispatchMgr("getUserFromIdAnswer",ot)},this.createGetAllUsersAnswerEvent=function(mt){var ot={eventType:"getAllUsersAnswer",time:new Date,message:mt};this.eventDispatchMgr("getAllUsersAnswer",ot)},this.createErrorEvent=function(mt){var ot={eventType:"error :",time:new Date,errorInfo:mt};this.eventDispatchMgr("error",ot)},this.createSearchUserAnswerEvent=function(mt,ot,ut){var ft={eventType:"searchUserAnswer :",time:new Date,searchStr:mt,searchAnswerList:ot,group:ut};this.eventDispatchMgr("searchUserAnswer",ft)}},(ht={version:"1.0.4",description:"ApiRTC DataBase Library"}).init=function(mt){this.socket=mt,this.socket.on("getUserFromIdAnswer",this.callback(this,"onGetUserFromIdAnswer")).on("getAllUsersAnswer",this.callback(this,"onGetAllUsersAnswer")).on("searchUserAnswer",this.callback(this,"onSearchUserAnswer"))},ht.createUser=function(mt){if(mt!==null&&mt.mail!==null&&mt.id!==null){var ot=JSON.stringify(mt);this.socket.emit("createUser",ot)}},ht.searchUserInGroup=function(mt,ot,ut,ft){var bt=null,vt=null,yt=lt();(ot===void 0||ot!=="all"&&ot!=="connected"&&ot!=="disconnected")&&(ot="all"),mt!==null&&(bt={searchStr:mt,presenceState:ot,group:ut},ft!==void 0&&(bt.callbackId=yt,pt[yt]=ft),vt=JSON.stringify(bt),this.socket.emit("searchUser",vt))},ht.searchUser=function(mt,ot,ut,ft){var bt=null;typeof ut=="function"?(bt=ut,ht.searchUserInGroup(mt,ot,void 0,bt)):ht.searchUserInGroup(mt,ot,ut,ft)},ht.onSearchUserAnswer=function(mt){var ot=JSON.parse(mt);ot.callbackId!==void 0&&ot.callbackId in pt?(pt[ot.callbackId](ot.searchStr,ot.searchAnswerList),pt.splice(ot.callbackId,1)):dt.createSearchUserAnswerEvent(ot.searchStr,ot.searchAnswerList,ot.group)},ht.getUserFromId=function(mt,ot){var ut=null,ft=null,bt=lt();mt!==null&&(ut={id:mt},ot!==void 0&&(ut.callbackId=bt,pt[bt]=ot),ft=JSON.stringify(ut),this.socket.emit("getUserFromId",ft))},ht.onGetUserFromIdAnswer=function(mt){mt!==null&&mt.callbackId!==void 0&&mt.callbackId in pt?(pt[mt.callbackId](mt),pt.splice(mt.callbackId,1)):dt.createGetUserFromIdAnswerEvent(mt)},ht.getAllUsers=function(){var mt,ot;mt={},ot=JSON.stringify(mt),this.socket.emit("getAllUsers",ot)},ht.onGetAllUsersAnswer=function(mt){dt.createGetAllUsersAnswerEvent(mt)},ht.setPresenceStatus=function(mt,ot,ut){var ft,bt;ft={id:mt,presenceStatus:ot,commentStatus:ut},bt=JSON.stringify(ft),this.socket.emit("setPresenceStatus",bt)},ht.setUserStatus=function(mt,ot){var ut;ot.id=mt,ut=JSON.stringify(ot),this.socket.emit("setUserStatus",ut)},ht.setUserInfos=function(mt){var ot,ut;ot=mt,ut=JSON.stringify(ot),this.socket.emit("setUserInfos",ut)},ht.addEventListener=function(mt,ot){typeof apiRTC_React<"u"?eventManager.addEventListener(mt,ot):mt!=="getUserFromIdAnswer"||mt!=="error"||mt!=="getAllUsersAnswer"||mt!=="searchUserAnswer"?document.addEventListener(mt,ot,!1):dt.createErrorEvent("ERROR: Trying to add a listener on an unknow event")},ht.callback=function(mt,ot){return this.closureHandler=function(ut){return mt[ot](ut)},this.closureHandler},et.apiDB=ht}(window)},2746:(rt,it,s)=>{s.r(it);var et=s(1549).Y.get("onbeforeunload");apiCC.beforeUnloadFct=function(nt){et.debug("User has refreshed or left the page, eventType :",nt);try{if(typeof mailClicked<"u"&&mailClicked!==null&&(et.log("mailClicked variable is defined"),mailClicked===!0))return et.log("mailClicked is true : leaving onbeforeunload"),void(mailClicked=!1)}catch(ht){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in chrome when mailto :"+ht)}try{if(apiCC.iePluginInstallationPreventUnload!==void 0&&apiCC.iePluginInstallationPreventUnload!==null&&apiCC.iePluginInstallationPreventUnload===!0)return void et.log("iePluginInstallationPreventUnload is true : leaving onbeforeunload")}catch(ht){et.log("Catch error on PATCH/WORKAROUND to avoid reload of page in IE when installing webRTC plugin :"+ht)}if(apiCC!=null){if(apiRTC.session!==null&&apiRTC.session.remoteAccessInvitation!==null){var at;at=apiRTC.session.remoteAccessInvitation.invitationType==="sent"?{code:"AGENT_LEFT"}:{code:"USER_LEFT"},et.debug("Stopping remote access on refresh"),apiRTC.session.remoteAccessInvitation.stop(!0,at)}apiCC.storeSessionInfoInSessionStorage(),apiCC.cleanApiRTCContext(),apiCC.disconnect({invalidateApiCCId:!0}),apiCC.cleanAllEventListener(),apiCC.myEventTable=[]}apiCC!=null&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiRTC.browser==="Mobile Safari"?window.addEventListener("pagehide",function(){apiCC.beforeUnloadFct("unload_MobileSafari")}):window.onbeforeunload=function(){apiCC.beforeUnloadFct("unload")}},9064:(rt,it,s)=>{function et(nt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(at){return typeof at}:function(at){return at&&typeof Symbol=="function"&&at.constructor===Symbol&&at!==Symbol.prototype?"symbol":typeof at},et(nt)}s(2222),s(2772),s(4916),s(3123),s(5306),s(1539),s(3710),s(9714),s(1058),s(2526),s(1817),s(2165),s(6992),s(8783),s(3948),rt=s.hmd(rt),function(nt){var at,ht="",dt="function",pt="undefined",lt="object",mt="string",ot="major",ut="model",ft="name",bt="type",vt="vendor",yt="version",At="architecture",Nt="console",St="mobile",wt="tablet",Mt="smarttv",Ht="wearable",Ot="embedded",Dt="user-agent",Gt="brands",nn="formFactor",zt="fullVersionList",Ft="platform",un="platformVersion",vn="bitness",yn=[Gt,zt,St,ut,Ft,un,At,nn,vn],cn="browser",gn="cpu",Cn="device",fn="engine",Tn="os",On="result",Ln="Amazon",An="Apple",Rn="ASUS",In="BlackBerry",kn="Google",xn="Huawei",Yn="LG",Un="Microsoft",jn="Motorola",Qn="Samsung",on="Sharp",Hn="Sony",Fn="Xiaomi",Vn="Zebra",Bn="Facebook",qn="Windows",Gn=et(nt)!==pt,_n=Gn&&nt.navigator?nt.navigator:void 0,$n=_n&&_n.userAgentData?_n.userAgentData:void 0,bn=function(Nn){for(var Jn={},rr=0;rr<Nn.length;rr++)Jn[Nn[rr].toUpperCase()]=Nn[rr];return Jn},wn=function(Nn,Jn){if(et(Nn)===lt&&Nn.length>0){for(var rr in Nn)if(Tt(Nn[rr])==Tt(Jn))return!0;return!1}return!!kt(Nn)&&Tt(Jn).indexOf(Tt(Nn))!==-1},Yt=function(Nn){for(var Jn in Nn)return/^(browser|cpu|device|engine|os)$/.test(Jn)},kt=function(Nn){return et(Nn)===mt},st=function(Nn){if(Nn){for(var Jn=[],rr=Et(/\\?\"/g,Nn).split(","),hr=0;hr<rr.length;hr++)if(rr[hr].indexOf(";")>-1){var cr=Pt(rr[hr]).split(";v=");Jn[hr]={brand:cr[0],version:cr[1]}}else Jn[hr]=rr[hr];return Jn}},Tt=function(Nn){return kt(Nn)?Nn.toLowerCase():Nn},Rt=function(Nn){return kt(Nn)?Et(/[^\d\.]/g,Nn).split(".")[0]:void 0},Lt=function(Nn){for(var Jn in Nn){var rr=Nn[Jn];et(rr)==lt&&rr.length==2?this[rr[0]]=rr[1]:this[rr]=void 0}return this},Et=function(Nn,Jn){return kt(Jn)?Jn.replace(Nn,ht):Jn},jt=function(Nn){return Et(/\\?\"/g,Nn)},Pt=function(Nn,Jn){if(kt(Nn))return Nn=Et(/^\s\s*/,Nn),et(Jn)===pt?Nn:Nn.substring(0,500)},Vt=function(Nn,Jn){if(Nn&&Jn)for(var rr,hr,cr,dr,Cr,Sr,_r=0;_r<Jn.length&&!Cr;){var br=Jn[_r],Ir=Jn[_r+1];for(rr=hr=0;rr<br.length&&!Cr&&br[rr];)if(Cr=br[rr++].exec(Nn))for(cr=0;cr<Ir.length;cr++)Sr=Cr[++hr],et(dr=Ir[cr])===lt&&dr.length>0?dr.length===2?et(dr[1])==dt?this[dr[0]]=dr[1].call(this,Sr):this[dr[0]]=dr[1]:dr.length===3?et(dr[1])!==dt||dr[1].exec&&dr[1].test?this[dr[0]]=Sr?Sr.replace(dr[1],dr[2]):void 0:this[dr[0]]=Sr?dr[1].call(this,Sr,dr[2]):void 0:dr.length===4&&(this[dr[0]]=Sr?dr[3].call(this,Sr.replace(dr[1],dr[2])):void 0):this[dr]=Sr||void 0;_r+=2}},Zt=function(Nn,Jn){for(var rr in Jn)if(et(Jn[rr])===lt&&Jn[rr].length>0){for(var hr=0;hr<Jn[rr].length;hr++)if(wn(Jn[rr][hr],Nn))return rr==="?"?void 0:rr}else if(wn(Jn[rr],Nn))return rr==="?"?void 0:rr;return Jn.hasOwnProperty("*")?Jn["*"]:Nn},rn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Jt={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:["VR","XR","Watch"],"?":["Desktop","Unknown"],"*":void 0},ln={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[yt,[ft,"Mobile Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[yt,[ft,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ft,yt],[/opios[\/ ]+([\w\.]+)/i],[yt,[ft,"Opera Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[yt,[ft,"Opera GX"]],[/\bopr\/([\w\.]+)/i],[yt,[ft,"Opera"]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[yt,[ft,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[ft,yt],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[yt,[ft,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[yt,[ft,"WeChat"]],[/konqueror\/([\w\.]+)/i],[yt,[ft,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[yt,[ft,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[yt,[ft,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[yt,[ft,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[ft,/(.+)/,"$1 Secure Browser"],yt],[/\bfocus\/([\w\.]+)/i],[yt,[ft,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[yt,[ft,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[yt,[ft,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[yt,[ft,"Dolphin"]],[/coast\/([\w\.]+)/i],[yt,[ft,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[yt,[ft,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[yt,[ft,"Mobile Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ft,"360 Browser"]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[ft,/(.+)/,"$1 Browser"],yt],[/samsungbrowser\/([\w\.]+)/i],[yt,[ft,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[ft,/_/g," "],yt],[/metasr[\/ ]?([\d\.]+)/i],[yt,[ft,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[ft,"Sogou Mobile"],yt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[ft,yt],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[ft],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ft,Bn],yt],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[ft,yt],[/\bgsa\/([\w\.]+) .*safari\//i],[yt,[ft,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[yt,[ft,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[yt,[ft,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ft,"Chrome WebView"],yt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[yt,[ft,"Android Browser"]],[/chrome\/([\w\.]+) mobile/i],[yt,[ft,"Mobile Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ft,yt],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[yt,[ft,"Mobile Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[ft,"Mobile Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[yt,ft],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ft,[yt,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[ft,yt],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[ft,"Mobile Firefox"],yt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ft,"Netscape"],yt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[yt,[ft,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[ft,yt],[/(cobalt)\/([\w\.]+)/i],[ft,[yt,/[^\d\.]+./,ht]]],cpu:[[/\b(?:(amd|x|x86[-_]?|wow|win)64)\b/i],[[At,"amd64"]],[/(ia32(?=;))/i,/((?:i[346]|x)86)[;\)]/i],[[At,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[At,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[At,"armhf"]],[/windows (ce|mobile); ppc;/i],[[At,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[At,/ower/,ht,Tt]],[/(sun4\w)[;\)]/i],[[At,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[At,Tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[ut,[vt,Qn],[bt,wt]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[ut,[vt,Qn],[bt,St]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[ut,[vt,An],[bt,St]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[ut,[vt,An],[bt,wt]],[/(macintosh);/i],[ut,[vt,An]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[ut,[vt,on],[bt,St]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[ut,[vt,xn],[bt,wt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[ut,[vt,xn],[bt,St]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[ut,/_/g," "],[vt,Fn],[bt,St]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[ut,/_/g," "],[vt,Fn],[bt,wt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[ut,[vt,"OPPO"],[bt,St]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[ut,[vt,"Vivo"],[bt,St]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[ut,[vt,"Realme"],[bt,St]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[ut,[vt,jn],[bt,St]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[ut,[vt,jn],[bt,wt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[ut,[vt,Yn],[bt,wt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[ut,[vt,Yn],[bt,St]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[ut,[vt,"Lenovo"],[bt,wt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[ut,/_/g," "],[vt,"Nokia"],[bt,St]],[/(pixel c)\b/i],[ut,[vt,kn],[bt,wt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[ut,[vt,kn],[bt,St]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[ut,[vt,Hn],[bt,St]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[ut,"Xperia Tablet"],[vt,Hn],[bt,wt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[ut,[vt,"OnePlus"],[bt,St]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[ut,[vt,Ln],[bt,wt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[ut,/(.+)/g,"Fire Phone $1"],[vt,Ln],[bt,St]],[/(playbook);[-\w\),; ]+(rim)/i],[ut,vt,[bt,wt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[ut,[vt,In],[bt,St]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[ut,[vt,Rn],[bt,wt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[ut,[vt,Rn],[bt,St]],[/(nexus 9)/i],[ut,[vt,"HTC"],[bt,wt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[vt,[ut,/_/g," "],[bt,St]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[ut,[vt,"Acer"],[bt,wt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[ut,[vt,"Meizu"],[bt,St]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[ut,[vt,"Ulefone"],[bt,St]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[vt,ut,[bt,St]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[vt,ut,[bt,wt]],[/(surface duo)/i],[ut,[vt,Un],[bt,wt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[ut,[vt,"Fairphone"],[bt,St]],[/(shield[\w ]+) b/i],[ut,[vt,"Nvidia"],[bt,wt]],[/(sprint) (\w+)/i],[vt,ut,[bt,St]],[/(kin\.[onetw]{3})/i],[[ut,/\./g," "],[vt,Un],[bt,St]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[ut,[vt,Vn],[bt,wt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[ut,[vt,Vn],[bt,St]],[/smart-tv.+(samsung)/i],[vt,[bt,Mt]],[/hbbtv.+maple;(\d+)/i],[[ut,/^/,"SmartTV"],[vt,Qn],[bt,Mt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[vt,Yn],[bt,Mt]],[/(apple) ?tv/i],[vt,[ut,"Apple TV"],[bt,Mt]],[/crkey/i],[[ut,"Chromecast"],[vt,kn],[bt,Mt]],[/droid.+aft(\w+)( bui|\))/i],[ut,[vt,Ln],[bt,Mt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[ut,[vt,on],[bt,Mt]],[/(bravia[\w ]+)( bui|\))/i],[ut,[vt,Hn],[bt,Mt]],[/(mitv-\w{5}) bui/i],[ut,[vt,Fn],[bt,Mt]],[/Hbbtv.*(technisat) (.*);/i],[vt,ut,[bt,Mt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[vt,Pt],[ut,Pt],[bt,Mt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[bt,Mt]],[/(ouya)/i,/(nintendo) (\w+)/i],[vt,ut,[bt,Nt]],[/droid.+; (shield) bui/i],[ut,[vt,"Nvidia"],[bt,Nt]],[/(playstation \w+)/i],[ut,[vt,Hn],[bt,Nt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[ut,[vt,Un],[bt,Nt]],[/((pebble))app/i],[vt,ut,[bt,Ht]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[ut,[vt,An],[bt,Ht]],[/droid.+; (glass) \d/i],[ut,[vt,kn],[bt,Ht]],[/droid.+; (wt63?0{2,3})\)/i],[ut,[vt,Vn],[bt,Ht]],[/(quest( 2| pro)?)/i],[ut,[vt,Bn],[bt,Ht]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[vt,[bt,Ot]],[/(aeobc)\b/i],[ut,[vt,Ln],[bt,Ot]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[ut,[bt,St]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[ut,[bt,wt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[bt,wt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[bt,St]],[/(android[-\w\. ]{0,9});.+buil/i],[ut,[vt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[yt,[ft,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[yt,[ft,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[ft,yt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[yt,ft]],os:[[/microsoft (windows) (vista|xp)/i],[ft,yt],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[ft,[yt,Zt,rn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[yt,Zt,rn],[ft,qn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[yt,/_/g,"."],[ft,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ft,"macOS"],[yt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[yt,ft],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ft,yt],[/\(bb(10);/i],[yt,[ft,In]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[yt,[ft,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[yt,[ft,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[yt,[ft,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[yt,[ft,"watchOS"]],[/crkey\/([\d\.]+)/i],[yt,[ft,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[ft,"Chrome OS"],yt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ft,yt],[/(sunos) ?([\w\.\d]*)/i],[[ft,"Solaris"],yt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[ft,yt]]},mn=(Lt.call((at={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[cn,[ft,yt,ot]],[gn,[At]],[Cn,[bt,ut,vt]],[fn,[ft,yt]],[Tn,[ft,yt]]]),Lt.call(at.isIgnore,[[cn,[yt,ot]],[fn,[yt]],[Tn,[yt]]]),Lt.call(at.isIgnoreRgx,[[cn,/ ?browser$/i],[Tn,/ ?os$/i]]),Lt.call(at.toString,[[cn,[ft,yt]],[gn,[At]],[Cn,[vt,ut]],[fn,[ft,yt]],[Tn,[ft,yt]]]),at),an=function(Nn,Jn){var rr=mn.init[Jn],hr=mn.isIgnore[Jn]||0,cr=mn.isIgnoreRgx[Jn]||0,dr=mn.toString[Jn]||0;function Cr(){Lt.call(this,rr)}return Cr.prototype.getItem=function(){return Nn},Cr.prototype.withClientHints=function(){return $n?$n.getHighEntropyValues(yn).then(function(Sr){return Nn.setCH(new hn(Sr,!1)).parseCH().get()}):Nn.parseCH().get()},Cr.prototype.withFeatureCheck=function(){return Nn.detectFeature().get()},Jn!=On&&(Cr.prototype.is=function(Sr){var _r=!1;for(var br in this)if(this.hasOwnProperty(br)&&!wn(hr,br)&&Tt(cr?Et(cr,this[br]):this[br])==Tt(cr?Et(cr,Sr):Sr)){if(_r=!0,Sr!=pt)break}else if(Sr==pt&&_r){_r=!_r;break}return _r},Cr.prototype.toString=function(){var Sr=ht;for(var _r in dr)et(this[dr[_r]])!==pt&&(Sr+=(Sr?" ":ht)+this[dr[_r]]);return Sr||pt}),$n||(Cr.prototype.then=function(Sr){var _r=this,br=function(){for(var kr in _r)_r.hasOwnProperty(kr)&&(this[kr]=_r[kr])};br.prototype={is:Cr.prototype.is,toString:Cr.prototype.toString};var Ir=new br;return Sr(Ir),Ir}),new Cr};function hn(Nn,Jn){if(Nn=Nn||{},Lt.call(this,yn),Jn)Lt.call(this,[[Gt,st(Nn["sec-ch-ua"])],[zt,st(Nn["sec-ch-ua-full-version-list"])],[St,/\?1/.test(Nn["sec-ch-ua-mobile"])],[ut,jt(Nn["sec-ch-ua-model"])],[Ft,jt(Nn["sec-ch-ua-platform"])],[un,jt(Nn["sec-ch-ua-platform-version"])],[At,jt(Nn["sec-ch-ua-arch"])],[nn,st(Nn["sec-ch-ua-form-factor"])],[vn,jt(Nn["sec-ch-ua-bitness"])]]);else for(var rr in Nn)this.hasOwnProperty(rr)&&et(Nn[rr])!==pt&&(this[rr]=Nn[rr])}function En(Nn,Jn,rr,hr){return this.get=function(cr){return cr?this.data.hasOwnProperty(cr)?this.data[cr]:void 0:this.data},this.set=function(cr,dr){return this.data[cr]=dr,this},this.setCH=function(cr){return this.uaCH=cr,this},this.detectFeature=function(){if(_n&&_n.userAgent==this.ua)switch(this.itemType){case cn:_n.brave&&et(_n.brave.isBrave)==dt&&this.set(ft,"Brave");break;case Cn:!this.get(bt)&&$n&&$n.mobile&&this.set(bt,St),this.get(ut)=="Macintosh"&&_n&&et(_n.standalone)!==pt&&_n.maxTouchPoints&&_n.maxTouchPoints>2&&this.set(ut,"iPad").set(bt,wt);break;case Tn:!this.get(ft)&&$n&&$n.platform&&this.set(ft,$n.platform);break;case On:var cr=this.data,dr=function(Cr){return cr[Cr].getItem().detectFeature().get()};this.set(cn,dr(cn)).set(gn,dr(gn)).set(Cn,dr(Cn)).set(fn,dr(fn)).set(Tn,dr(Tn))}return this},this.parseUA=function(){return this.itemType!=On&&Vt.call(this.data,this.ua,this.rgxMap),this.itemType==cn&&this.set(ot,Rt(this.get(yt))),this},this.parseCH=function(){var cr=this.uaCH,dr=this.rgxMap;switch(this.itemType){case cn:var Cr=cr[zt]||cr.brands;if(Cr)for(var Sr in Cr){var _r=Cr[Sr].brand||Cr[Sr],br=Cr[Sr].version;!/not.a.brand/i.test(_r)&&(Sr<1||/chromi/i.test(this.get(ft)))&&this.set(ft,Et("Google ",_r)).set(yt,br).set(ot,Rt(br))}break;case gn:var Ir=cr.architecture;Ir&&(Ir&&cr.bitness=="64"&&(Ir+="64"),Vt.call(this.data,Ir+";",dr));break;case Cn:if(cr.mobile&&this.set(bt,St),cr.model&&this.set(ut,cr.model),cr.formFactor){var kr;if(typeof cr.formFactor!="string")for(var Mr=0;!kr&&Mr<cr.formFactor.length;)kr=Zt(cr.formFactor[Mr++],Jt);else kr=Zt(cr.formFactor,Jt);this.set(bt,kr)}break;case Tn:var jr=cr.platform;if(jr){var Wr=cr[un];jr==qn&&(Wr=parseInt(Rt(Wr),10)>=13?"11":"10"),this.set(ft,jr).set(yt,Wr)}break;case On:var Qr=this.data,Zn=function(lr){return Qr[lr].getItem().setCH(cr).parseCH().get()};this.set(cn,Zn(cn)).set(gn,Zn(gn)).set(Cn,Zn(Cn)).set(fn,Zn(fn)).set(Tn,Zn(Tn))}return this},Lt.call(this,[["itemType",Nn],["ua",Jn],["uaCH",hr],["rgxMap",rr],["data",an(this,Nn)]]),this}function Mn(Nn,Jn,rr){if(et(Nn)===lt?(Yt(Nn)?(et(Jn)===lt&&(rr=Jn),Jn=Nn):(rr=Nn,Jn=void 0),Nn=void 0):et(Nn)!==mt||Yt(Jn)||(rr=Jn,Jn=void 0),!(this instanceof Mn))return new Mn(Nn,Jn,rr).getResult();var hr=et(Nn)===mt?Nn:_n&&_n.userAgent?_n.userAgent:rr&&rr[Dt]?rr[Dt]:ht,cr=new hn(rr,!0),dr=Jn?function(Sr,_r){var br={};for(var Ir in Sr)br[Ir]=_r[Ir]&&_r[Ir].length%2==0?_r[Ir].concat(Sr[Ir]):Sr[Ir];return br}(ln,Jn):ln,Cr=function(Sr){return Sr==On?function(){return new En(Sr,hr,dr,cr).set("ua",hr).set(cn,this.getBrowser()).set(gn,this.getCPU()).set(Cn,this.getDevice()).set(fn,this.getEngine()).set(Tn,this.getOS()).get()}:function(){return new En(Sr,hr,dr[Sr],cr).parseUA().get()}};return Lt.call(this,[["getBrowser",Cr(cn)],["getCPU",Cr(gn)],["getDevice",Cr(Cn)],["getEngine",Cr(fn)],["getOS",Cr(Tn)],["getResult",Cr(On)],["getUA",function(){return hr}],["setUA",function(Sr){return kt(Sr)&&(hr=Sr.length>500?Pt(Sr,500):Sr),this}]]).setUA(hr),this}Mn.VERSION="2.0.0-beta.1",Mn.BROWSER=bn([ft,yt,ot]),Mn.CPU=bn([At]),Mn.DEVICE=bn([ut,vt,bt,Nt,St,Mt,wt,Ht,Ot]),Mn.ENGINE=Mn.OS=bn([ft,yt]),et(o)!==pt?(et(rt)!==pt&&rt.exports&&(o=rt.exports=Mn),o.UAParser=Mn,nt.UAParser=Mn):Gn&&(nt.UAParser=Mn);var Pn=Gn&&(nt.jQuery||nt.Zepto);if(Pn&&!Pn.ua){var Wn=new Mn;Pn.ua=Wn.getResult(),Pn.ua.get=function(){return Wn.getUA()},Pn.ua.set=function(Nn){Wn.setUA(Nn);var Jn=Wn.getResult();for(var rr in Jn)Pn.ua[rr]=Jn[rr]}}}((typeof window>"u"?"undefined":et(window))==="object"?window:void 0)},1256:(rt,it,s)=>{s.r(it),s.d(it,{Call:()=>Sr,CloudApi:()=>cp,Conference:()=>Fs,Contact:()=>No,Conversation:()=>$o,ConversationCall:()=>Gl,DataChannel:()=>ys,Enterprise:()=>Xs,EventCenter:()=>wt,EventEmitter:()=>dt,MediaDevice:()=>Ot,Observable:()=>un,PointerSharingRoom:()=>ru,ReceivedCallInvitation:()=>Ar,ReceivedConversationInvitation:()=>Vt,ReceivedConversationJoinRequest:()=>zo,ReceivedDataChannelInvitation:()=>Ho,ReceivedFileTransferInvitation:()=>eo,ReceivedInvitation:()=>wn,ReceivedPointerSharingInvitation:()=>Ml,ReceivedWhiteboardInvitation:()=>vs,SentInvitation:()=>Do,Session:()=>zr,Stream:()=>so,UserAgent:()=>sp,UserData:()=>Io,default:()=>Em}),s(7941),s(2526),s(1817),s(1539),s(2165),s(6992),s(8783),s(3948);var et=s(3173);function nt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function at(Wt){return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},at(Wt)}function ht(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}s(4603),s(4916),s(9714),s(7042),s(561),s(9070),s(8309),s(1038),s(9753);var dt=function(){function Wt(){(function(xt,Bt){if(!(xt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt)}var $t,Qt;return $t=Wt,Qt=[{key:"getListeners",value:function(xt){var Bt,dn,pn=this._getEvents();if(xt instanceof RegExp)for(dn in Bt={},pn)pn.hasOwnProperty(dn)&&xt.test(dn)&&(Bt[dn]=pn[dn]);else Bt=pn[xt]||(pn[xt]=[]);return Bt}},{key:"flattenListeners",value:function(xt){var Bt,dn=[];for(Bt=0;Bt<xt.length;Bt+=1)dn.push(xt[Bt].listener);return dn}},{key:"getListenersAsObject",value:function(xt){var Bt,dn=this.getListeners(xt);return dn instanceof Array&&((Bt={})[xt]=dn),Bt||dn}},{key:"emit",value:function(xt){var Bt=Array.prototype.slice.call(arguments,1);return this.emitEvent(xt,Bt)}},{key:"addListener",value:function(xt,Bt){if(!ot(Bt))throw new TypeError("listener must be a function");var dn,pn=this.getListenersAsObject(xt),Xt=at(Bt)==="object";for(dn in pn)pn.hasOwnProperty(dn)&&lt(pn[dn],Bt)===-1&&pn[dn].push(Xt?Bt:{listener:Bt,once:!1});if(xt==="contactListUpdate"){apiRTC.userAgentInstance.currentSession.contactListUpdateListenerSetted=!0;var Ct,It=function(qt,en){var tn=typeof Symbol<"u"&&qt[Symbol.iterator]||qt["@@iterator"];if(!tn){if(Array.isArray(qt)||(tn=function(fr,vr){if(fr){if(typeof fr=="string")return nt(fr,vr);var Pr=Object.prototype.toString.call(fr).slice(8,-1);return Pr==="Object"&&fr.constructor&&(Pr=fr.constructor.name),Pr==="Map"||Pr==="Set"?Array.from(fr):Pr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pr)?nt(fr,vr):void 0}}(qt))||en&&qt&&typeof qt.length=="number"){tn&&(qt=tn);var sn=0,Sn=function(){};return{s:Sn,n:function(){return sn>=qt.length?{done:!0}:{done:!1,value:qt[sn++]}},e:function(fr){throw fr},f:Sn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Dn,nr=!0,ar=!1;return{s:function(){tn=tn.call(qt)},n:function(){var fr=tn.next();return nr=fr.done,fr},e:function(fr){ar=!0,Dn=fr},f:function(){try{nr||tn.return==null||tn.return()}finally{if(ar)throw Dn}}}}(apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent);try{for(It.s();!(Ct=It.n()).done;){var Ut=Ct.value;this.emit("contactListUpdate",Ut)}}catch(qt){It.e(qt)}finally{It.f()}apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent=[]}else if(xt==="mediaDeviceChanged"&&apiRTC.mediaDeviceMgr.mediaDeviceChangedDetected===!0){var Kt=apiRTC.mediaDeviceMgr.getMediaDeviceListsDiff(apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);apiRTC.myWebRTC_Event.createMediaDeviceChangedEvent(Kt,"updatedOnDeviceChange",apiRTC.mediaDeviceMgr.realMediaDevicesListInitializationWasAlreadyDone)}return this}},{key:"addOnceListener",value:function(xt,Bt){return this.addListener(xt,{listener:Bt,once:!0})}},{key:"defineEvent",value:function(xt){return this.getListeners(xt),this}},{key:"defineEvents",value:function(xt){for(var Bt=0;Bt<xt.length;Bt+=1)this.defineEvent(xt[Bt]);return this}},{key:"removeListener",value:function(xt,Bt){var dn,pn,Xt=this.getListenersAsObject(xt);for(pn in Xt)Xt.hasOwnProperty(pn)&&(dn=lt(Xt[pn],Bt))!==-1&&Xt[pn].splice(dn,1);return this}},{key:"addListeners",value:function(xt,Bt){return this.manipulateListeners(!1,xt,Bt)}},{key:"removeListeners",value:function(xt,Bt){return this.manipulateListeners(!0,xt,Bt)}},{key:"manipulateListeners",value:function(xt,Bt,dn){var pn,Xt,Ct=xt?this.removeListener:this.addListener,It=xt?this.removeListeners:this.addListeners;if(at(Bt)!=="object"||Bt instanceof RegExp)for(pn=dn.length;pn--;)Ct.call(this,Bt,dn[pn]);else for(pn in Bt)Bt.hasOwnProperty(pn)&&(Xt=Bt[pn])&&(typeof Xt=="function"?Ct.call(this,pn,Xt):It.call(this,pn,Xt));return this}},{key:"removeEvent",value:function(xt){var Bt,dn=at(xt),pn=this._getEvents();if(dn==="string")delete pn[xt];else if(xt instanceof RegExp)for(Bt in pn)pn.hasOwnProperty(Bt)&&xt.test(Bt)&&delete pn[Bt];else delete this._events;return this}},{key:"emitEvent",value:function(xt,Bt){var dn,pn,Xt,Ct,It=this.getListenersAsObject(xt);for(Ct in It)if(It.hasOwnProperty(Ct))for(dn=It[Ct].slice(0),Xt=0;Xt<dn.length;Xt++)(pn=dn[Xt]).once===!0&&this.removeListener(xt,pn.listener),pn.listener.apply(this,Bt||[])===this._getOnceReturnValue()&&this.removeListener(xt,pn.listener);return this}},{key:"setOnceReturnValue",value:function(xt){return this._onceReturnValue=xt,this}},{key:"_getOnceReturnValue",value:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue}},{key:"_getEvents",value:function(){return this._events||(this._events={})}}],Qt&&ht($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),pt=dt.prototype,lt=function(Wt,$t){for(var Qt=Wt.length;Qt--;)if(Wt[Qt].listener===$t)return Qt;return-1},mt=function(Wt){return function(){return this[Wt].apply(this,arguments)}},ot=function Wt($t){return typeof $t=="function"||$t instanceof RegExp||!(!$t||at($t)!=="object")&&Wt($t.listener)};pt.on=mt("addListener"),pt.once=mt("addOnceListener"),pt.off=mt("removeListener"),pt.removeAllListeners=mt("removeEvent"),pt.trigger=mt("emitEvent"),s(1249);var ut=s(5945),ft=s(1549),bt=s(4708);ft.Y.get("ApiCC");var vt={description:"ApiRTC Cloud Communication Library",session:null,jsLoaded:!1,initApiKey:null,initApiCCId:null,extJsLoadingRetryNb:null,extJsLoadingRetryDelay:null,bandwidthTestServer:"https://cloud.apizee.com",bandwidthRatingThresholds:[300,500,1e3,1500,2e3],LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,browser:ut.Xh,browser_major_version:ut.PR,browser_version:ut.dc,osName:ut.BF,osVersion:ut.MM,osUAParser:ut.ag,browserInfo:ut.cf,browserDetails:bt.wL,parser:ut.E2,logStorageActivated:!1,logStorageLevel:3,logStorage:[],eventCenter:null,sioEmbedded:!1,apizee_version:"5.0"};function yt(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var At=ft.Y.get("EventCenter"),Nt="eventCenterData",St="[REMOTE-EVENTCENTER]",wt=function(){function Wt(){var xt=this;(function(Bt,dn){if(!(Bt instanceof dn))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.consoleOutputEnabled=!1,this.storageDisabled=!1,typeof apiRTC_React>"u"&&(document.addEventListener("error",function(Bt){xt.handleErrorEvent(Bt)}),document.addEventListener("userMediaError",function(Bt){xt.handleErrorEvent(Bt)}))}var $t,Qt;return $t=Wt,Qt=[{key:"handleErrorEvent",value:function(xt){var Bt=xt.detail;if(this.storageDisabled!==!0)if(Bt!==void 0){var dn={},pn={},Xt="UNKNOWN";dn.type=xt.type;for(var Ct=0,It=Object.keys(Bt);Ct<It.length;Ct++){var Ut=It[Ct];Ut!=="eventType"&&(dn[Ut]=Bt[Ut])}dn.systemInfo={apiRTC:vt.version,app:ut.$6,device:ut.vO,osName:ut.BF,osVersion:vt.osVersion,browser:ut.Xh,browser_version:ut.dc},vt.session!==null&&vt.session!==void 0?Xt=vt.session.apiCCId:vt.initApiCCId!==null&&vt.initApiCCId!==void 0&&(Xt=vt.initApiCCId),dn.userInfo={apiCCId:Xt,apiKey:apiRTC.initApiKey};var Kt=localStorage.getItem(Nt);(Kt=Kt?JSON.parse(Kt):[]).unshift(dn),Kt.length>100&&Kt.splice(100,Kt.length-100),localStorage.setItem(Nt,JSON.stringify(Kt)),this.consoleOutputEnabled&&At.error("[EVENTCENTER]",dn),typeof Sentry<"u"&&(xt.detail.errorCode!=="USER_MEDIA_ERROR"?(pn.type=xt.type,xt.detail.error&&(pn.error=xt.detail.error),xt.detail.errorInfo&&(pn.errorInfo=xt.detail.errorInfo),xt.detail.errorCode&&(pn.errorCode=xt.detail.errorCode),xt.detail.callId&&(pn.callId=xt.detail.callId),xt.detail.convId&&(pn.convId=xt.detail.convId),xt.detail.gumConfig&&(xt.detail.gumConfig.video===!1?pn.gumConfigVideo=!1:pn.gumConfigVideo=!0),Sentry.withScope(function(qt){qt.setTag("event-center",!0),qt.setTag("userId",vt.session.apiCCId),Sentry.captureException(new Error(JSON.stringify(pn)))})):At.debug("Filtering error event for USER_MEDIA_ERROR for Sentry"))}else At.error("Can't handle error event: data is undefined");else At.debug("Event Center is disabled")}},{key:"handleDataAnswer",value:function(xt){xt?xt.map(function(Bt){At.debug(St+": ",Bt)}):At.debug(St+": "+this.getUsername()+" has no event records")}},{key:"getStoredData",value:function(){var xt=localStorage.getItem(Nt);return xt===void 0?(At.warn("No data was stored by event center"),null):JSON.parse(xt)}},{key:"clearStoredData",value:function(){localStorage.removeItem(Nt)}},{key:"enableConsoleOutput",value:function(xt){this.consoleOutputEnabled=xt}},{key:"disableStorage",value:function(xt){this.storageDisabled=xt}}],Qt&&yt($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Mt(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}s(3710);var Ht=ft.Y.get("MediaDevice"),Ot=function(){function Wt(xt,Bt,dn,pn){(function(Xt,Ct){if(!(Xt instanceof Ct))throw new TypeError("Cannot call a class as a function")})(this,Wt),Ht.trace("Create "+Bt+" MediaDevice"),this.id=xt,this.type=Bt,this.label=dn,this.capabilities=pn}var $t,Qt;return $t=Wt,(Qt=[{key:"getId",value:function(){return this.id.toString()}},{key:"getType",value:function(){return this.type}},{key:"getLabel",value:function(){return this.label}},{key:"isCamera",value:function(){return this.type==="videoinput"}},{key:"isMicrophone",value:function(){return this.type==="audioinput"}},{key:"isAudioOutput",value:function(){return this.type==="audiooutput"}},{key:"getCapabilities",value:function(){return this.capabilities}}])&&Mt($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),Dt=(s(1532),s(4129),s(9653),s(4363),s(2772),s(9554),s(4747),s(8674),s(9575),s(2472),s(2990),s(8927),s(3105),s(5035),s(4345),s(7174),s(2846),s(4731),s(7209),s(6319),s(8867),s(7789),s(3739),s(9368),s(4483),s(2056),s(3462),s(678),s(7462),s(3824),s(5021),s(2974),s(5016),s(2707),s(2564),s(7327),s(9600),s(285),s(1637),s(2479),s(4812),s(2222),s(1058),s(6755),s(4986),s(8304),s(489),s(2419),s(8011),s(2443),s(3680),s(3706),s(2703),s(4819),s(5003),s(1215));function Gt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function nn(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var zt=new WeakMap,Ft=new WeakMap,un=function(){function Wt(Bt){(function(dn,pn){if(!(dn instanceof pn))throw new TypeError("Cannot call a class as a function")})(this,Wt),Ft.set(this,Bt),zt.set(this,new dt)}var $t,Qt,xt;return $t=Wt,xt=[{key:"getAvailableEvents",value:function(){return[]}}],(Qt=[{key:"on",value:function(Bt,dn){return this.constructor.getAvailableEvents().indexOf(Bt)>-1?zt.get(this).on(Bt,dn):Ft.get(this).error("No such event "+Bt),this}},{key:"removeListener",value:function(Bt,dn){if(this.constructor.getAvailableEvents().indexOf(Bt)>-1){var pn,Xt=!1,Ct=function(It,Ut){var Kt=typeof Symbol<"u"&&It[Symbol.iterator]||It["@@iterator"];if(!Kt){if(Array.isArray(It)||(Kt=function(Dn,nr){if(Dn){if(typeof Dn=="string")return Gt(Dn,nr);var ar=Object.prototype.toString.call(Dn).slice(8,-1);return ar==="Object"&&Dn.constructor&&(ar=Dn.constructor.name),ar==="Map"||ar==="Set"?Array.from(Dn):ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ar)?Gt(Dn,nr):void 0}}(It))||Ut&&It&&typeof It.length=="number"){Kt&&(It=Kt);var qt=0,en=function(){};return{s:en,n:function(){return qt>=It.length?{done:!0}:{done:!1,value:It[qt++]}},e:function(Dn){throw Dn},f:en}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tn,sn=!0,Sn=!1;return{s:function(){Kt=Kt.call(It)},n:function(){var Dn=Kt.next();return sn=Dn.done,Dn},e:function(Dn){Sn=!0,tn=Dn},f:function(){try{sn||Kt.return==null||Kt.return()}finally{if(Sn)throw tn}}}}(zt.get(this).getListeners(Bt));try{for(Ct.s();!(pn=Ct.n()).done;)if(pn.value.listener===dn){Xt=!0;break}}catch(It){Ct.e(It)}finally{Ct.f()}Xt?zt.get(this).off(Bt,dn):Ft.get(this).trace("removeListener() - No such listener for event "+Bt)}else Ft.get(this).error("No such event "+Bt);return this}}])&&nn($t.prototype,Qt),xt&&nn($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function vn(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return yn(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?yn(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function yn(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function cn(Wt){return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},cn(Wt)}function gn(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}s(6699),s(2023),s(3843);var Cn=ft.Y.get("ApiRTCManager"),fn=["sessionReady","incomingCall","callEstablished","userMediaSuccess","userMediaStop","userMediaError","callRestarting","error","receiveIMMessage","updatePresence","webRTCClientCreated","updateUserStatus","channelEvent","groupChatCreation","groupChatInvitation","groupChatMemberUpdate","addUserInGroupChatAnswer","receiveGroupChatMessage","userDataAnswer","fetchUserDataAnswer","receiveConversationList","receiveConversationHistory","receiveConversationDetailReport","receiveContactOccurrencesFromConversationList","receiveMCUSessionInvitation","MCUSessionCreation","MCUAvailableStream","MCUAvailableStreamUpdate","MCURemoveStream","canPlayRemoteVideo","recordedFileAvailable","receiveData","roomCreation","roomJoined","roomInvitation","roomMemberUpdate","receiveRoomMessage","contactListInRoom","snapShotPhotoUploaded","stopRecord","callAttempt","joinMCUSessionAnswer","hangup","desktopCapture","remoteStreamAdded","remoteStreamRemoved","switchStream","sendDataChannelOpen","sendDataChannelClose","sendDataChannelError","receiveDataChannelOpen","receiveDataChannelClose","receiveDataChannelError","connectedUsersListUpdate","onFileSended","onFileSending","onFileReceiving","onFileReceived","onFileProgress","onFilePending","recordedStreamsAvailable","closingWhiteBoard","webRTCPluginInstallation","onQosStatsUpdate","onQosChange","onQosAudioChange","onQosVideoChange","MCURecordedStreamsAvailable","MCURecordingStarted","MCURecordingStopped","ICECandidateTypeUpdate","disconnectionWarning","MCUAvailableComposite","MCUParticipantEjected","MCUStreamingStarted","MCUStreamingStopped","MCUAvailableReplay","MCURoomModeChanged","onCallStatsUpdate","slowLink","localStreamUpdated","remoteStreamUpdated","audioAmplitude","videoQualityChanged","cpuLimited","bandwidthLimited","simulcastFeedChanged","cloudEventOccurred","groupUnsubscribed","transferBegun","transferProgress","transferEnded"],Tn=null,On=!1,Ln=!1,An=function(Wt){if(Tn!==null&&Tn.isInitialized()){if(Wt==="groupUnsubscribed"||Wt==="transferBegun"||Wt==="transferProgress"||Wt==="transferEnded")return;apiRTC.addEventListener(Wt,function($t){Cn.trace("Emiting "+Wt,$t),Tn.eventEmitter.emit(Wt,$t)})}},Rn=function(Wt){Tn!==null&&Tn.isInitialized()&&apiRTC.removeEventListener(Wt,function($t){Cn.trace("Emiting "+Wt,$t),Tn.eventEmitter.emit(Wt,$t)})},In=function(){function Wt(){if(function(Bt,dn){if(!(Bt instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Wt),Tn!==null)throw"Cannot construct singleton ApiRTCManager";this.eventEmitter=new dt,this.apiRTCSession=null,this.whiteBoardClient=null,this.pointerSharingClient=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,this.contactDisconnectionDelay=et.g.CONTACT_DISCONNECTION_DELAY,Tn=this}var $t,Qt,xt;return $t=Wt,Qt=[{key:"onEvent",value:function(Bt,dn){return fn.indexOf(Bt)>-1?this.eventEmitter.on(Bt,dn):Cn.error("No such apiRTC event "+Bt),this}},{key:"onceEvent",value:function(Bt,dn){fn.indexOf(Bt)>-1?this.eventEmitter.once(Bt,dn):Cn.error("No such apiRTC event "+Bt)}},{key:"sendData",value:function(Bt,dn){var pn=this;return new Promise(function(Xt,Ct){pn.dataClient===null?Ct(et.g.ERROR_APIRTC_INITIALISATION_FAILED):pn.dataClient.sendData(Bt,dn,function(It){var Ut=et.g.ERROR_OTHER;It!=null?It.reason!=="timeoutReached"&&It.reason!=="destNotFound"?Xt():(It.reason==="timerReached"?Ut=et.g.ERROR_TIMED_OUT:It.reason==="destNotFound"&&(Ut=et.g.ERROR_NOT_FOUND),Ct(Ut)):Ct(Ut)})})}},{key:"sendMessage",value:function(Bt,dn){var pn=this,Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,It){pn.IMClient===null?It(et.g.ERROR_APIRTC_INITIALISATION_FAILED):pn.IMClient.sendMessage(Bt,dn,function(Ut){var Kt=et.g.ERROR_OTHER;Ut!=null?Ut.reason!=="timeoutReached"&&Ut.reason!=="destNotFound"?Ct(Ut.UUCSeq):(Ut.reason==="timerReached"?Kt=et.g.ERROR_TIMED_OUT:Ut.reason==="destNotFound"&&(Kt=et.g.ERROR_NOT_FOUND),It(Kt)):It(Kt)},Xt)})}},{key:"joinGroupChat",value:function(Bt){var dn=this;return new Promise(function(pn,Xt){if(dn.IMClient===null)return Xt(Dt.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat"));dn.IMClient.joinGroupChat(Bt),pn()})}},{key:"leaveGroupChat",value:function(Bt){var dn=this;return new Promise(function(pn,Xt){if(dn.IMClient===null)return Xt(Dt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - cannot leave group chat"));dn.IMClient.leaveGroupChat(Bt),pn()})}},{key:"sendMessageToGroupChat",value:function(Bt,dn){var pn=this,Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Ct,It){if(pn.IMClient===null)It(et.g.ERROR_APIRTC_INITIALISATION_FAILED);else{var Ut={};Dt.g.isTypeof(Xt,"metadata","object")&&(Ut.metadata=Xt.metadata),pn.IMClient.sendMessageToGroupChat(Bt,dn,function(Kt){return Kt!==null&&cn(Kt)==="object"?Kt.reason==="ack"?Ct(Kt.UUCSeq):Kt.reason==="timeoutReached"?It(et.g.ERROR_TIMED_OUT):Kt.reason==="destNotFound"?It(et.g.ERROR_NOT_FOUND):It(et.g.ERROR_OTHER):It(et.g.ERROR_OTHER)},Ut)}})}},{key:"removeEventListener",value:function(Bt,dn){dn!=null&&(fn.indexOf(Bt)>-1?this.eventEmitter.off(Bt,dn):Cn.error("No such apiRTC event "+Bt))}},{key:"isInitialized",value:function(){return On}},{key:"unsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.unsubscribePresenceGroup([Bt]),Tn.eventEmitter.emit("groupUnsubscribed",Bt)):Cn.error("apiRTC session is not initialized")}},{key:"joinAndSubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.joinPresenceGroup([Bt]),this.apiRTCSession.subscribePresenceGroup([Bt])):Cn.error("apiRTC session is not initialized")}},{key:"leaveAndUnsubscribeToPresenceGroup",value:function(Bt){this.apiRTCSession!==null?(this.apiRTCSession.leavePresenceGroup([Bt]),this.unsubscribeToPresenceGroup(Bt)):Cn.error("apiRTC session is not initialized")}},{key:"subscribeToCloudEvent",value:function(Bt,dn){this.apiRTCSession?this.apiRTCSession.subscribeToCloudEvent(Bt,dn):Cn.error("apiRTC session is not initialized")}},{key:"unsubscribeToCloudEvent",value:function(Bt,dn){this.apiRTCSession?this.apiRTCSession.unsubscribeToCloudEvent(Bt,dn):Cn.error("apiRTC session is not initialized")}},{key:"disconnect",value:function(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(apiRTC.disconnect(Bt),On=!1,this.apiRTCSession=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,Ln){var dn,pn=vn(fn);try{for(pn.s();!(dn=pn.n()).done;){var Xt=dn.value;Rn(Xt)}}catch(Ct){pn.e(Ct)}finally{pn.f()}Ln=!1}}},{key:"initializeApiRTC",value:function(Bt){return Cn.info("initializeApiRTC()"),new Promise(function(dn,pn){if(Bt===void 0||Bt.apiKey===void 0)pn("Invalid apiRTC initialization params");else{var Xt=function(Ct){switch(Cn.debug("onChannelEventDuringInit()",Ct.detail),Ct.detail.channelEvent){case"onChannelError":pn("Channel Error : "+Ct.detail.event);break;case"onChannelConnectError":pn("Channel Connect Error : "+Ct.detail.event);break;case"onChannelOpened":Cn.debug("onChannelOpened");break;default:Cn.debug("Unhandle case in onChannelEventDuringInit :",Ct.detail.channelEvent)}};apiRTC.addEventListener("channelEvent",Xt),Bt.onReady=function(){if(On=!0,Tn.webRTCClient=apiRTC.session.createWebRTCClient({}),Tn.webRTCClient.setMCUConnector(Bt.hasOwnProperty("mcu")?Bt.mcu:et.g.DEFAULT_MCU),Dt.g.isPropertyTypeof(Bt,"turnServerAddress","string")&&Tn.webRTCClient.setClientTurnServer(Bt.turnServerAddress),Tn.webRTCClient.setUserAcceptOnIncomingCallBeforeGetUserMedia(!0),Dt.g.isPropertyTypeof(Bt,"userAcceptOnIncomingDataCall","boolean")?Tn.webRTCClient.setUserAcceptOnIncomingDataCall(Bt.userAcceptOnIncomingDataCall):Tn.webRTCClient.setUserAcceptOnIncomingDataCall(!0),Dt.g.isPropertyTypeof(Bt,"userAcceptOnIncomingScreenSharingCall","boolean")?Tn.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(Bt.userAcceptOnIncomingScreenSharingCall):Tn.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(!1),Tn.dataClient=apiRTC.session.createDataClient(),Tn.IMClient=apiRTC.session.createIMClient(),Tn.pointerSharingClient=apiRTC.session.createPointerSharingClient(),Tn.webRTCClient.setAllowMultipleCalls(!0),Tn.apiRTCSession=apiRTC.session,!Ln){var Ct,It=vn(fn);try{for(It.s();!(Ct=It.n()).done;){var Ut=Ct.value;An(Ut)}}catch(Kt){It.e(Kt)}finally{It.f()}Ln=!0}apiRTC.removeEventListener("channelEvent",Xt),dn(apiRTC.session.apiCCId)},On=!1,Tn.apiRTCSession=null,Tn.webRTCClient=null,Tn.dataClient=null,Tn.IMClient=null,apiRTC.init(Bt)}})}},{key:"createWhiteBoard",value:function(){Cn.debug("createWhiteBoard()"),Tn.whiteBoardClient=apiRTC.createWhiteBoard(null,"invisible",null,6e4)}},{key:"getMediaDevices",value:function(){return Cn.debug("ApiRTCManager::getMediaDevices()"),new Promise(function(Bt,dn){apiRTC.getMediaDevices().then(function(pn){Cn.debug("ApiRTCManager::getMediaDevices(), sources :",pn),Bt(pn)}).catch(function(pn){var Xt="getMediaDevices() - error";Cn.error(Xt,pn),dn(new Error(Xt))})})}},{key:"getUserMedia",value:function(Bt){return new Promise(function(dn,pn){apiRTC.getUserMedia(Bt).then(function(Xt){Cn.debug("ApiRTCManager::getUserMedia() success"),dn(Xt)}).catch(function(Xt){Cn.error("ApiRTCManager::getUserMedia() - Could not get user media :",Xt),pn(new Error("ApiRTCManager::getUserMedia() - Could not get user media :"+Xt))})})}},{key:"setAudioSourceIdInConstraint",value:function(Bt,dn){return apiRTC.setAudioSourceIdInConstraint(Bt,dn)}},{key:"setVideoSourceIdInConstraint",value:function(Bt,dn){return apiRTC.setVideoSourceIdInConstraint(Bt,dn)}},{key:"attachMediaStream",value:function(Bt,dn){apiRTC.attachMediaStream(Bt,dn)}},{key:"addStreamInDiv",value:function(Bt,dn,pn,Xt,Ct,It,Ut){apiRTC.addStreamInDiv(Bt,dn,pn,Xt,Ct,It,Ut)}},{key:"removeElementFromDiv",value:function(Bt,dn){Cn.debug("removeElementFromDiv"),apiRTC.removeElementFromDiv(Bt,dn)}},{key:"getClientId",value:function(){return this.apiRTCSession!==null&&this.apiRTCSession.apiCCWebRTCClient!==null?this.apiRTCSession.apiCCWebRTCClient.webRTCClient.clientId:null}},{key:"getActiveApiKey",value:function(){return apiRTC.session!==void 0&&apiRTC.session!==null?apiRTC.session.apiKey:null}}],xt=[{key:"get",value:function(){return Tn===null&&(Tn=new Wt),Tn}}],Qt&&gn($t.prototype,Qt),xt&&gn($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function kn(Wt){return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},kn(Wt)}function xn(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Yn(Wt,$t){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Yn(Wt,$t)}function Un(Wt,$t){if($t&&(kn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jn(Wt)}function jn(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Qn(Wt){return Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Qn(Wt)}var on=ft.Y.get("Invitation"),Hn=new WeakMap,Fn=["statusChange"],Vn=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Yn(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Qn(Bt);if(dn){var Ut=Qn(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Un(this,Ct)});function Xt(){var Ct;return function(It,Ut){if(!(It instanceof Ut))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ct=pn.call(this,on)).id=null,Hn.set(jn(Ct),et.g.INVITATION_STATUS_STANDBY),Ct.apiRTCManager=In.get(),Ct.type="not_defined",Ct}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return Fn}}],(Qt=[{key:"setStatus",value:function(Ct){Hn.set(this,Ct),zt.get(this).emit("statusChange",{status:Ct,id:this.id})}},{key:"getStatus",value:function(){return Hn.get(this)}}])&&xn($t.prototype,Qt),xt&&xn($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un);function Bn(Wt){return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Bn(Wt)}function qn(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Gn(Wt,$t){return Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Gn(Wt,$t)}function _n(Wt,$t){if($t&&(Bn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function $n(Wt){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},$n(Wt)}ft.Y.get("ReceivedInvitation");var bn=["statusChange","messageDelivered","messageNotDelivered"],wn=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Gn(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=$n(Bt);if(dn){var Ut=$n(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return _n(this,Ct)});function Xt(Ct,It){var Ut;return function(Kt,qt){if(!(Kt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Xt),(Ut=pn.call(this)).invitationType="received",Ut.id=It,Ut.sender=Ct,Ut.receiveTime=Date.now(),Ut}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return bn}}],(Qt=[{key:"accept",value:function(){return new Promise}},{key:"decline",value:function(Ct){}},{key:"getSender",value:function(){return this.sender}},{key:"getReceiveTime",value:function(){return this.receiveTime}},{key:"getId",value:function(){return this.id}}])&&qn($t.prototype,Qt),xt&&qn($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(Vn);function Yt(Wt){return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Yt(Wt)}function kt(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function st(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Tt(Wt,$t){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Tt(Wt,$t)}function Rt(Wt,$t){if($t&&(Yt($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lt(Wt)}function Lt(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Et(Wt){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Et(Wt)}var jt=ft.Y.get("ReceivedInvitation"),Pt=new WeakMap,Vt=function(Wt){(function(Xt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Object.defineProperty(Xt,"prototype",{writable:!1}),Ct&&Tt(Xt,Ct)})(pn,Wt);var $t,Qt,xt,Bt,dn=(xt=pn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Xt,Ct=Et(xt);if(Bt){var It=Et(this).constructor;Xt=Reflect.construct(Ct,arguments,It)}else Xt=Ct.apply(this,arguments);return Rt(this,Xt)});function pn(Xt,Ct,It){var Ut,Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return kt(this,pn),Ut=dn.call(this,Xt,Ct.invitationId),jt.info("Create ReceivedConversationInvitation"),Ut.conversation=It,Ut.type="conversation",Ut.invitationData=Ct,Pt.set(Lt(Ut),Kt),Ut}return $t=pn,Qt=[{key:"accept",value:function(Xt){var Ct=this,It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=function(){return new Promise(function(qt,en){var tn=Pt.get(Ct);It.hasOwnProperty("password")&&(tn.password=It.password),It.hasOwnProperty("session")&&(tn.session=It.session),Ct.conversation.join(tn).then(function(){Xt!=null&&Ct.conversation.publish(Xt),qt(Ct.conversation)}).catch(function(sn){en(Dt.g.createError(et.g.ERROR_OTHER,"accept() - cannot join webconf",jt,{fromError:sn}))})})},Kt=function(){return new Promise(function(qt,en){Ct.conversation.joinGroupChat().then(function(){qt(Ct.conversation)}).catch(function(tn){en(Dt.g.createError(et.g.ERROR_OTHER,"accept() - cannot join groupChat",jt,{fromError:tn}))})})};return new Promise(function(qt,en){return Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY?en(Dt.g.createError(et.g.ERROR_WRONG_STATE,"accept() - cannot accept invitation",jt)):(Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"}),Ct.invitationData&&Ct.invitationData.conversationTypes?Ct.invitationData.conversationTypes.indexOf("WEBCONF")>=0?Ut().then(qt).catch(en):Ct.invitationData.conversationTypes.indexOf("GROUP_CHAT")>=0?Kt().then(qt).catch(en):void 0:Ut().then(qt).catch(en))})}},{key:"decline",value:function(Xt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Xt,answer:"decline"}))}},{key:"getConversation",value:function(){return this.conversation}}],Qt&&st($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),pn}(wn);function Zt(Wt){return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Zt(Wt)}function rn(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Jt(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Jt(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Jt(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function ln(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function mn(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function an(Wt,$t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},an(Wt,$t)}function hn(Wt,$t){if($t&&(Zt($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return En(Wt)}function En(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Mn(Wt){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Mn(Wt)}s(189);var Pn=ft.Y.get("Call"),Wn=In.get(),Nn=["streamAdded","streamRemoved","response","accepted","declined","hangup","localStreamAvailable","recordAvailable","statsUpdate","error","disconnectionWarning","userMediaError","desktopCapture","remoteStreamUpdated","recordingStarted","recordingStopped","recordingAvailable","remoteStreamIdUpdated"],Jn=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),rr=new WeakMap,hr=new WeakMap,cr=new WeakMap,dr=new WeakMap,Cr=new WeakMap,Sr=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&an(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Mn(Bt);if(dn){var Ut=Mn(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return hn(this,Ct)});function Xt(Ct,It){var Ut,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(ln(this,Xt),Ut=pn.call(this,Pn),Pn.debug("Create Call with id "+Ct),rr.set(En(Ut),Ct),hr.set(En(Ut),It),Ut.publishedStreams=new Map,Ut.receivedStreams=new Map,Ut.stats={},cr.set(En(Ut),Kt.hasOwnProperty("started")&&Kt.started?et.g.CALL_STATUS_ONGOING:et.g.CALL_STATUS_WAITING_FOR_CALLEE),dr.set(En(Ut),!!Kt.hasOwnProperty("isRecorded")&&Kt.isRecorded),Kt.isRecorded){Ut.confId=null,Ut.recordingStatus=null;for(var qt=Wn.webRTCClient.webRTCClient.callsTable.length;--qt>=0;){var en=Wn.webRTCClient.webRTCClient.callsTable[qt];if(en.callId===Ct&&en.data){Ut.confId=en.data.confId;break}}dr.set(En(Ut),!0)}else dr.set(En(Ut),!1);var tn={hangup:function(Sn){Ut.getId()===Sn.detail.callId&&Ut.destroy()},receiveData:function(Sn){if(Sn.detail.data.info!==void 0)Sn.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&Sn.detail.data.invitationId.toString()===Ut.getId()&&Ut.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&(Pn.info("Call answer from "+Ut.getContact().getUsername()+" for "+Ut.getId()),Sn.detail.data.answer==="accept"?(cr.set(En(Ut),et.g.CALL_STATUS_ONGOING),zt.get(En(Ut)).emit("accepted"),zt.get(En(Ut)).emit("response","accepted")):(cr.set(En(Ut),et.g.CALL_STATUS_ENDED),zt.get(En(Ut)).emit("declined",{reason:"User_Refused_Call"}),zt.get(En(Ut)).emit("response","declined")));else if(Ut.getId()===Sn.detail.data.callId&&Sn.detail.data.event===et.g.CONTACT_STREAM_UPDATED_INFO){var Dn={callId:Sn.detail.data.callId,newStreamId:Sn.detail.data.newStreamId,oldStreamId:Sn.detail.data.oldStreamId};zt.get(En(Ut)).emit("remoteStreamIdUpdated",Dn)}},remoteStreamUpdated:function(Sn){if(Ut.getId()===Sn.detail.callId){var Dn={callId:Sn.detail.callId,audio:Sn.detail.audioIsAvailable&&Sn.detail.audioIsActive,audioMuted:Sn.detail.audioIsMuted,audioSilent:Sn.detail.audioIsSilent,video:Sn.detail.videoIsAvailable&&Sn.detail.videoIsActive,videoMuted:Sn.detail.videoIsMuted,videoSilent:Sn.detail.videoIsSilent};zt.get(En(Ut)).emit("remoteStreamUpdated",Dn)}},MCURecordingStarted:function(Sn){if(dr.get(En(Ut))&&Sn.detail.roomName===Ut.confId){var Dn=Dt.g.parseRecordingEvent("MCURecordingStarted",Sn.detail);Dn.callId==="COMPOSITE"&&(Ut.recordingStatus=Dn,zt.get(En(Ut)).emit("recordingStarted",Dn))}},MCURecordingStopped:function(Sn){if(dr.get(En(Ut))&&Sn.detail.roomName===Ut.confId){var Dn=Dt.g.parseRecordingEvent("MCURecordingStopped",Sn.detail);Dn.callId==="COMPOSITE"&&(delete Ut.recordingStatus,zt.get(En(Ut)).emit("recordingStopped",Dn))}},MCURecordedStreamsAvailable:function(Sn){if(dr.get(En(Ut))&&Sn.detail.roomName===Ut.confId){var Dn=Dt.g.parseRecordingEvent("MCURecordedStreamsAvailable",Sn.detail);zt.get(En(Ut)).emit("recordingAvailable",Dn)}}};for(var sn in tn)Wn.onEvent(sn,tn[sn]);return Cr.set(En(Ut),tn),Ut}return $t=Xt,Qt=[{key:"destroy",value:function(){var Ct=Cr.get(this);if(Ct){for(var It in Ct)Wn.removeEventListener(It,Ct[It]);Cr.delete(this)}}},{key:"getId",value:function(){return rr.get(this).toString()}},{key:"isRecorded",value:function(){return dr.get(this)}},{key:"getContact",value:function(){return hr.get(this)}},{key:"getStatus",value:function(){return cr.get(this)}},{key:"setStatus",value:function(Ct){cr.set(this,Ct)}},{key:"getPublishedStreams",value:function(){var Ct,It=[],Ut=rn(this.publishedStreams.values());try{for(Ut.s();!(Ct=Ut.n()).done;){var Kt=Ct.value;It.push(Kt)}}catch(qt){Ut.e(qt)}finally{Ut.f()}return It}},{key:"getReceivedStreams",value:function(){var Ct,It=[],Ut=rn(this.receivedStreams.values());try{for(Ut.s();!(Ct=Ut.n()).done;){var Kt=Ct.value;It.push(Kt)}}catch(qt){Ut.e(qt)}finally{Ut.f()}return It}},{key:"hangUp",value:function(){this.getStatus()===et.g.CALL_STATUS_ENDED?Pn.error("hangUp() - Call has already ended"):Wn.webRTCClient.hangUp(this.getId())}},{key:"getStats",value:function(){return Dt.g.assignObject({},this.stats)}},{key:"stopPublishedStreams",value:function(){return Wn.webRTCClient.webRTCClient.stopMedia(this.getId())}},{key:"replacePublishedStreams",value:function(Ct,It){var Ut=this,Kt=function(qt){if(yo.has(qt))return yo.get(qt);var en=apiCC.getUserMediaStream(qt);if(en){var tn="audio";return en.video===!0&&(tn="video"),new so(en.stream,{type:tn,constructor:!0,userMediaStreamId:en.userMediaStreamId})}return null};return new Promise(function(qt,en){if(Ut.getStatus()!==et.g.CALL_STATUS_ONGOING)return en(new Error("replacePublishedStreams() - Cannot replace stream as call is not ongoing"));if(Ct===null)if(Dt.g.isPropertyTypeof(It,"getStream","function")){var tn={getUserMediaStreamId:function(){return It.getStream().then(function(sn){return sn.userMediaStreamId}).catch(en)}};Wn.webRTCClient.webRTCClient.addMedia(Ut.getId(),!0,null,tn).then(function(sn){var Sn=Kt(sn.userMediaStreamId);return Sn!==null&&Ut.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Ut.getId(),newStreamId:Sn.data.id,oldStreamId:sn.oldMediaStreamId}),qt(Sn)}).catch(function(sn){return en(new Error("replacePublishedStreams() - "+sn))})}else Wn.webRTCClient.webRTCClient.addMedia(Ut.getId(),!0,null,null).then(function(sn){var Sn=Kt(sn.userMediaStreamId);return Sn!==null&&Ut.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Ut.getId(),newStreamId:Sn.data.id,oldStreamId:sn.oldMediaStreamId}),qt(Sn)}).catch(function(sn){return en(new Error("replacePublishedStreams() - "+sn))});else Wn.webRTCClient.webRTCClient.addMedia(Ut.getId(),!0,Ct.userMediaStreamId).then(function(sn){return Ut.getContact().sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:Ut.getId(),newStreamId:Ct.data.id,oldStreamId:sn.oldMediaStreamId}),qt(Ct)}).catch(function(sn){return en(new Error("replacePublishedStreams() - "+sn))})})}},{key:"getRecordingInfo",value:function(){return dr.get(this)?this.recordingStatus:null}},{key:"startRecording",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.asyncCallbacks)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",Pn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",Pn))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(Kt){if(Ct.confId===Kt.detail.roomName&&Kt.detail.callId==="COMPOSITE"&&Kt.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - "+Kt.detail.errorInfo,Pn))},Ct.asyncCallbacks.recordingStarted=function(Kt){if(Ct.confId===Kt.detail.roomName&&Kt.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Dt.g.parseRecordingEvent("MCURecordingStarted",Kt.detail);return It(qt)}},Wn.onEvent("error",Ct.asyncCallbacks.error),Wn.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),Wn.webRTCClient.startCallRecording(rr.get(Ct))})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.asyncCallbacks)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",Pn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopRecording() - timeout",Pn))},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Kt){if(Ct.confId===Kt.detail.roomName&&Kt.detail.callId==="COMPOSITE"&&Kt.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Kt.detail.errorInfo,Pn))},Ct.asyncCallbacks.recordingStopped=function(Kt){if(Ct.confId===Kt.detail.roomName&&Kt.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(Wn.removeEventListener("error",Ct.asyncCallbacks.error),Wn.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Dt.g.parseRecordingEvent("MCURecordingStopped",Kt.detail);return It(qt)}},Wn.onEvent("error",Ct.asyncCallbacks.error),Wn.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),Wn.webRTCClient.stopCallRecording(rr.get(Ct))})}},{key:"manageCallEstablishedEvent",value:function(Ct){Pn.debug("callEstablished",Ct.detail,this.getId());var It=Ct.detail.callId.toString();this.getId()===It&&(Pn.info("callEstablished from "+this.getContact().getUsername(),Ct),this.getStatus()!==et.g.CALL_STATUS_ONGOING&&this.getStatus()!==et.g.CALL_STATUS_ENDED&&(zt.get(this).emit("accepted"),zt.get(this).emit("response","accepted"),cr.set(this,et.g.CALL_STATUS_ONGOING)))}},{key:"manageRemoteStreamAddedEvent",value:function(Ct){Pn.debug("remoteStreamAdded",Ct.detail,this.getId());var It=Ct.detail.callId.toString();if(this.getId()===It){var Ut=Ct.detail.destCallType==="audio"?"audio":"video",Kt=Ct.detail.callType==="screenSharing",qt=new so(Ct.detail.stream,{screensharing:Kt,type:Ut,contact:this.getContact(),streamId:Ct.detail.stream.id,callId:Ct.detail.callId,callAudioAvailable:Ct.detail.audioIsAvailable,callAudioActive:Ct.detail.audioIsActive,callAudioMuted:Ct.detail.audioIsMuted,callVideoAvailable:Ct.detail.videoIsAvailable,callVideoActive:Ct.detail.videoIsActive,callVideoMuted:Ct.detail.videoIsMuted,constructor:!0});this.receivedStreams.set(Ct.detail.stream.id,qt),zt.get(this).emit("streamAdded",qt)}}},{key:"manageRemoteStreamRemovedEvent",value:function(Ct){Pn.debug("remoteStreamRemoved",Ct.detail,this.getId());var It=Ct.detail.callId.toString();if(this.getId()===It){var Ut=this.receivedStreams.get(Ct.detail.stream.id);this.receivedStreams.delete(Ct.detail.stream.id),zt.get(this).emit("streamRemoved",Ut)}}},{key:"manageUserMediaSuccessEvent",value:function(Ct){Pn.debug("UserMediaSuccess",Ct.detail,this.getId());var It,Ut=null;if(It=Ct.detail.videoIsAvailable===!0?"video":"audio",Ct.detail.callId!==null&&(Ut=Ct.detail.callId.toString()),this.getId()===Ut){Pn.info("localStreamAvailable",Ct.detail);var Kt=yo.get(Ct.detail.userMediaStreamId);Kt||(Kt=new so(Ct.detail.stream,{type:It,constructor:!0,userMediaStreamId:Ct.detail.userMediaStreamId,callId:this.getId()})),this.publishedStreams.set(Dt.g.guid(),Kt),zt.get(this).emit("localStreamAvailable",Kt)}}},{key:"manageCallStatsUpdateEvent",value:function(Ct){if(this.getId()===Ct.detail.callId){for(var It=0,Ut=Object.keys(Ct.detail.stats);It<Ut.length;It++){var Kt=Ut[It];Jn.has(Kt)&&(this.stats[Kt]=Ct.detail.stats[Kt])}zt.get(this).emit("statsUpdate",Dt.g.assignObject({},{stats:this.stats}))}}},{key:"manageErrorEvent",value:function(Ct){if(Pn.debug("Error",Ct.detail,this.getId()),this.getId()===Ct.detail.callId){var It={errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo};Ct.detail.data&&(It.descriptor=Ct.detail.data),zt.get(this).emit("error",It)}}},{key:"manageDisconnectionWarningEvent",value:function(Ct){Pn.debug("DisconnectionWarning",Ct.detail,this.getId()),this.getId()===Ct.detail.callId&&zt.get(this).emit("disconnectionWarning",{tries:Ct.detail.tries})}},{key:"manageHangupEvent",value:function(Ct){Pn.debug("hangup",Ct.detail,this.getId());var It=Ct.detail.callId.toString(),Ut=this.getStatus()===et.g.CALL_STATUS_WAITING_FOR_CALLEE&&Ct.detail.hangupType==="remote";if(this.getId()===It&&this.getStatus()!==et.g.CALL_STATUS_ENDED){cr.set(this,et.g.CALL_STATUS_ENDED),Pn.info("Hangup from "+this.getContact().getUsername(),Ct);var Kt,qt=rn(this.receivedStreams.keys());try{for(qt.s();!(Kt=qt.n()).done;){var en=Kt.value,tn=this.receivedStreams.get(en);this.receivedStreams.delete(en),zt.get(this).emit("streamRemoved",tn)}}catch(sn){qt.e(sn)}finally{qt.f()}zt.get(this).emit("hangup",{from:Ct.detail.hangupType,reason:Ct.detail.reason}),Ut&&(zt.get(this).emit("declined",{reason:Ct.detail.reason}),zt.get(this).emit("response","declined"))}}},{key:"manageRecordAvailableEvent",value:function(Ct){Pn.warn("recordedStreamsAvailable",Ct.detail,this.getId()),zt.get(this).emit("recordAvailable",{mediaURL:Ct.detail.mediaURL})}},{key:"manageUserMediaErrorEvent",value:function(Ct){Pn.warn("userMediaError",Ct.detail,this.getId()),zt.get(this).emit("userMediaError",{callType:Ct.detail.callType,error:Ct.detail.error,onCallEstablishment:Ct.detail.onCallEstablishment,userMediaStreamId:Ct.detail.userMediaStreamId,tryAudioCallActivated:Ct.detail.tryAudioCallActivated})}},{key:"manageDesktopCaptureEvent",value:function(Ct){Pn.warn("desktopCapture",Ct.detail,this.getId()),zt.get(this).emit("desktopCapture",{event:Ct.detail.event})}}],xt=[{key:"getAvailableEvents",value:function(){return Nn}}],Qt&&mn($t.prototype,Qt),xt&&mn($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un);function _r(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function br(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var Ir=ft.Y.get("ConversationCatalog"),kr=null,Mr=function(){function Wt(){if(function(Bt,dn){if(!(Bt instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Wt),kr!==null)throw"Cannot construct singleton CallCatalog";this.callList=new Map,kr=this}var $t,Qt,xt;return $t=Wt,xt=[{key:"get",value:function(){return kr===null&&(kr=new Wt),kr}}],(Qt=[{key:"getOrCreateCall",value:function(Bt,dn,pn){var Xt=null;return Bt!=null&&(this.callList.has(Bt.toString())?Xt=this.callList.get(Bt.toString()):(Xt=new Sr(Bt.toString(),dn,pn),this.callList.set(Bt.toString(),Xt))),Xt}},{key:"getCall",value:function(Bt,dn){var pn=null;if(Bt!=null){if(!this.callList.has(Bt.toString()))return null;pn=this.callList.get(Bt.toString())}else if(dn){var Xt,Ct=function(Kt,qt){var en=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(!en){if(Array.isArray(Kt)||(en=function(ar,fr){if(ar){if(typeof ar=="string")return _r(ar,fr);var vr=Object.prototype.toString.call(ar).slice(8,-1);return vr==="Object"&&ar.constructor&&(vr=ar.constructor.name),vr==="Map"||vr==="Set"?Array.from(ar):vr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vr)?_r(ar,fr):void 0}}(Kt))||qt&&Kt&&typeof Kt.length=="number"){en&&(Kt=en);var tn=0,sn=function(){};return{s:sn,n:function(){return tn>=Kt.length?{done:!0}:{done:!1,value:Kt[tn++]}},e:function(ar){throw ar},f:sn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Sn,Dn=!0,nr=!1;return{s:function(){en=en.call(Kt)},n:function(){var ar=en.next();return Dn=ar.done,ar},e:function(ar){nr=!0,Sn=ar},f:function(){try{Dn||en.return==null||en.return()}finally{if(nr)throw Sn}}}}(this.callList.values());try{for(Ct.s();!(Xt=Ct.n()).done;){var It=Xt.value,Ut=It.getContact();if(Ut&&Ut.getId()===dn.getId()){pn=It;break}}}catch(Kt){Ct.e(Kt)}finally{Ct.f()}}return pn}},{key:"removeCallFromList",value:function(Bt){Ir.log("removeCallFromList : av instance.callList :",kr.callList),kr.callList.has(Bt)&&kr.callList.delete(Bt),Ir.log("removeCallFromList : ap instance.callList :",kr.callList)}},{key:"getCalls",value:function(){return this.callList}}])&&br($t.prototype,Qt),xt&&br($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function jr(Wt){return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},jr(Wt)}function Wr(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Qr(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Zn(Wt,$t){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Zn(Wt,$t)}function lr(Wt,$t){if($t&&(jr($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return er(Wt)}function er(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Tr(Wt){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Tr(Wt)}var tr=ft.Y.get("ReceivedInvitation"),Br=Mr.get(),Nr=["expired","statusChange"],Ar=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Zn(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Tr(Bt);if(dn){var Ut=Tr(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return lr(this,Ct)});function Xt(Ct,It,Ut){var Kt,qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Wr(this,Xt),Kt=pn.call(this,Ct,It),tr.info("Create ReceivedCallInvitation with call type "+Ut),Kt.type="call",Kt.callType=Ut,Kt.isRecordedCall=!!qt.hasOwnProperty("isRecorded")&&qt.isRecorded,Kt.call=Br.getOrCreateCall(Kt.id,Kt.sender,{isRecorded:Kt.isRecorded()}),Kt.apiRTCManager.onEvent("hangup",function(en){var tn=en.detail.callId.toString();Kt.id.toString()===tn&&Kt.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(Kt.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(er(Kt)).emit("expired"))}),Kt}return $t=Xt,Qt=[{key:"getCallType",value:function(){return this.callType}},{key:"isRecorded",value:function(){return this.isRecordedCall}},{key:"accept",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){var en=It.getCallType()==="audio",tn=!0,sn=Ut;Ut.hasOwnProperty("audioOnly")&&(en=Ut.audioOnly,delete Ut.audioOnly,sn.mediaTypeForIncomingCall!==void 0&&sn.mediaTypeForIncomingCall!==null||Ut.audioOnly===!0&&(sn.mediaTypeForIncomingCall="AUDIO")),Ut.hasOwnProperty("noStream")&&(sn.mediaTypeForIncomingCall="NONE",tn=!1),sn.mediaTypeForIncomingCall==="NONE"&&(tn=!1),It.getStatus()===et.g.INVITATION_STATUS_STANDBY?(It.setStatus(et.g.INVITATION_STATUS_ACCEPTED),It.apiRTCManager.sendData(It.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:It.id,answer:"accept"}),It.call.setStatus(et.g.CALL_STATUS_ONGOING),tn&&Ct!==null&&Ct instanceof so&&(tr.debug("accept() - A stream was preselected; audio only : ",en),sn.userMediaStreamId=Ct.userMediaStreamId),It.apiRTCManager.webRTCClient.acceptCall(It.id,sn),Kt(It.call)):qt(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this call, invitation state invalid",tr))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}},{key:"getCall",value:function(){return this.call}}],xt=[{key:"getAvailableEvents",value:function(){return Nr}}],Qt&&Qr($t.prototype,Qt),xt&&Qr($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(wn);function Xn(Wt){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Xn(Wt)}function mr(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Lr(Wt,$t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Lr(Wt,$t)}function wr(Wt,$t){if($t&&(Xn($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function qr(Wt){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},qr(Wt)}var Fr=ft.Y.get("ReceivedInvitation"),Co=["error","progress","statusChange"],eo=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Lr(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=qr(Bt);if(dn){var Ut=qr(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return wr(this,Ct)});function Xt(Ct,It,Ut){var Kt;return function(qt,en){if(!(qt instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Xt),Kt=pn.call(this,Ct,It),Fr.debug("Create ReceivedFileTransferInvitation"),Kt.type="sendFile",Kt.fileInfo=Ut,Kt.apiRTCManager.onEvent("hangup",function(qt){Fr.debug("hangup");var en=qt.detail.callId.toString();Kt.getId()===en&&(Fr.debug("hangup for ReceivedFileTransferInvitation"),Kt.getStatus()===et.g.INVITATION_STATUS_ENDED?Fr.debug("invitation ended"):(Fr.debug("invitation is cancelled"),Kt.setStatus(et.g.INVITATION_STATUS_CANCELLED)),apiRTC.userAgentInstance.currentSession.invitationsMap.has(qt.detail.remoteId+"-sendfile-"+en)&&apiRTC.userAgentInstance.currentSession.invitationsMap.delete(qt.detail.remoteId+"-sendfile-"+en))}),Kt}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return Co}}],(Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.getStatus()!==et.g.INVITATION_STATUS_STANDBY)Ut(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this file transfer session, invitation state invalid",Fr));else{Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Kt=Ct;Ct.apiRTCManager.onEvent("onFileReceived",function qt(en){if(en.detail.callId.toString()===Kt.id.toString()){if(Fr.debug("typeof(e.detail.data.file) :",Xn(en.detail.data.file)),typeof en.detail.data.file=="string")It({file:en.detail.data.file,name:en.detail.data.name,type:en.detail.data.type});else{var tn=new FileReader;tn.addEventListener("loadend",function(){Ct.setStatus(et.g.INVITATION_STATUS_ENDED),Ct.apiRTCManager.webRTCClient.hangUp(Kt.id.toString());try{Fr.info("accept() - file received from "+Kt.sender.getUsername()+" !"),It({file:en.detail.data.file,name:en.detail.data.name,type:en.detail.data.type})}catch(sn){Fr.error("File Error",sn),Ut(Dt.g.createError(et.g.ERROR_OTHER,"accept() - Could not read file received",Fr))}}),tn.readAsArrayBuffer(en.detail.data.file)}Ct.apiRTCManager.removeEventListener("onFileReceived",qt)}}),Ct.apiRTCManager.onEvent("onFileProgress",function(qt){qt.detail.callId.toString()===Kt.id.toString()&&(Fr.trace("file transfering",qt.detail),zt.get(Kt).emit("progress",{uuid:qt.detail.uuid,fileSize:qt.detail.fileSize,remainingSize:qt.detail.remainingSize,percentage:qt.detail.percentage,sendChunkNb:qt.detail.sendChunkNb,transferDuration:qt.detail.transferDuration,lastPacket:qt.detail.lastPacket}))}),Ct.apiRTCManager.onEvent("receiveDataChannelError",function(qt){qt.detail.callId.toString()===Kt.id.toString()&&(Fr.warn("receiveDataChannelError",qt.detail),zt.get(Kt).emit("error","receiveDataChannelError"))}),Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"})}})}},{key:"getFileInfo",value:function(){return this.fileInfo}},{key:"decline",value:function(Ct){Fr.log("decline"),this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&mr($t.prototype,Qt),xt&&mr($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(wn);function ga(Wt){return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},ga(Wt)}function gs(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Qo(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Zs(Wt,$t){return Zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Zs(Wt,$t)}function fp(Wt,$t){if($t&&(ga($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function ms(Wt){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},ms(Wt)}var mu=ft.Y.get("ReceivedInvitation"),vs=function(Wt){(function(Xt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Object.defineProperty(Xt,"prototype",{writable:!1}),Ct&&Zs(Xt,Ct)})(pn,Wt);var $t,Qt,xt,Bt,dn=(xt=pn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Xt,Ct=ms(xt);if(Bt){var It=ms(this).constructor;Xt=Reflect.construct(Ct,arguments,It)}else Xt=Ct.apply(this,arguments);return fp(this,Xt)});function pn(Xt,Ct){var It,Ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return gs(this,pn),It=dn.call(this,Xt,Ct),mu.info("Create ReceivedWhiteboardInvitation"),It.type="whiteboard",Ut.cloudConvId&&(It.cloudConvId=Ut.cloudConvId),Ut.webconf===!0&&(It.webconf=!0),It}return $t=pn,(Qt=[{key:"accept",value:function(){var Xt=this;return new Promise(function(Ct,It){if(Xt.getStatus()===et.g.INVITATION_STATUS_STANDBY){Xt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Xt.apiRTCManager.sendData(Xt.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+Xt.id,answer:"accept"}),Xt.apiRTCManager.whiteBoardClient.leaveRoom(),Xt.apiRTCManager.whiteBoardClient.start();var Ut={};Xt.cloudConvId&&(Ut.convId=Xt.cloudConvId),Xt.webconf===!0&&(Ut.webconf=!0),Xt.apiRTCManager.whiteBoardClient.joinRoom(Xt.id,Ut),Ct(Xt.id)}else It(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this whiteboard session, invitation state invalid",mu))})}},{key:"decline",value:function(Xt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:"wb-"+this.id,reason:Xt,answer:"decline"}))}}])&&Qo($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),pn}(wn);function Cl(Wt){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Cl(Wt)}function hp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function vu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function yl(Wt,$t){return yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},yl(Wt,$t)}function gp(Wt,$t){if($t&&(Cl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xr(Wt)}function Xr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Cs(Wt){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Cs(Wt)}var To=ft.Y.get("DataChannel"),Sl=In.get(),mp=["response","accepted","declined","error","opened","closed","error","transferProgress","transferComplete","dataReceived","ended"],Cu=new WeakMap,bu=new WeakMap,Zo=new WeakMap,bs=new WeakMap,ys=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&yl(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Cs(Bt);if(dn){var Ut=Cs(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return gp(this,Ct)});function Xt(Ct,It){var Ut,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return hp(this,Xt),Ut=pn.call(this,To),To.debug("Create DataChannel with id "+Ct),Cu.set(Xr(Ut),Ct),bu.set(Xr(Ut),It),bs.set(Xr(Ut),et.g.DATACHANNEL_TYPE_RECEIVE),Kt.hasOwnProperty("type")&&(Kt.type===et.g.DATACHANNEL_TYPE_RECEIVE?bs.set(Xr(Ut),et.g.DATACHANNEL_TYPE_RECEIVE):Kt.type===et.g.DATACHANNEL_TYPE_SEND&&bs.set(Xr(Ut),et.g.DATACHANNEL_TYPE_SEND)),Zo.set(Xr(Ut),et.g.DATACHANNEL_STATUS_WAITING),Sl.onEvent("receiveData",function(qt){qt.detail.data.info!==void 0&&qt.detail.data.info===et.g.INVITATION_ANSWER_IDENTIFIER&&qt.detail.data.invitationId.toString()===Ut.getId()&&Ut.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&(To.info("DataChannel answer from "+Ut.getContact().getUsername()+" for "+Ut.getId()),qt.detail.data.answer==="accept"?zt.get(Xr(Ut)).emit("accepted"):(Zo.set(Xr(Ut),et.g.DATACHANNEL_STATUS_ENDED),zt.get(Xr(Ut)).emit("declined")),zt.get(Xr(Ut)).emit("response"))}).onEvent("callEstablished",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&(To.info("callEstablished from "+Ut.getContact().getUsername(),qt),Ut.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING&&Ut.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&zt.get(Xr(Ut)).emit("accepted"))}).onEvent("hangup",function(qt){var en=qt.detail.callId.toString(),tn=Ut.getStatus()===et.g.DATACHANNEL_STATUS_WAITING&&qt.detail.hangupType==="remote";Ut.getId()===en&&Ut.getStatus()!==et.g.DATACHANNEL_STATUS_ENDED&&(Zo.set(Xr(Ut),et.g.DATACHANNEL_STATUS_ENDED),To.info("Hangup from "+Ut.getContact().getUsername(),qt),zt.get(Xr(Ut)).emit("ended",{from:qt.detail.hangupType}),tn&&zt.get(Xr(Ut)).emit("declined"))}).onEvent("onFileReceived",function(qt){if(qt.detail.callId.toString()===Ut.getId()){var en=qt.detail.data,tn=new FileReader;tn.addEventListener("loadend",function(){try{var sn=Dt.g.arrayBuffertoString(tn.result);To.info("dataReceived !"),zt.get(Xr(Ut)).emit("dataReceived",{uuid:en.uuid,data:sn})}catch(Sn){To.error("dataReceived Error",Sn)}}),tn.readAsArrayBuffer(en.file)}}).onEvent("onFileProgress",function(qt){if(qt.detail.callId.toString()===Ut.getId()){var en=qt.detail;To.trace("file transfering",en);var tn={uuid:en.uuid,fileSize:en.fileSize,remainingSize:en.remainingSize,percentage:en.percentage,sendChunkNb:en.sendChunkNb,transferDuration:en.transferDuration,lastPacket:en.lastPacket};zt.get(Xr(Ut)).emit("transferProgress",tn),en.transferEnded&&zt.get(Xr(Ut)).emit("transferComplete",tn)}}).onEvent("receiveDataChannelError",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&zt.get(Xr(Ut)).emit("error","receiveDataChannelError")}).onEvent("sendDataChannelError",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&zt.get(Xr(Ut)).emit("error","sendDataChannelError")}).onEvent("receiveDataChannelClose",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&zt.get(Xr(Ut)).emit("closed")}).onEvent("sendDataChannelClose",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&zt.get(Xr(Ut)).emit("closed")}).onEvent("receiveDataChannelOpen",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&(Zo.set(Xr(Ut),et.g.DATACHANNEL_STATUS_ONGOING),zt.get(Xr(Ut)).emit("opened"))}).onEvent("sendDataChannelOpen",function(qt){var en=qt.detail.callId.toString();Ut.getId()===en&&zt.get(Xr(Ut)).emit("opened")}),Ut}return $t=Xt,Qt=[{key:"getId",value:function(){return Cu.get(this).toString()}},{key:"getContact",value:function(){return bu.get(this)}},{key:"getType",value:function(){return bs.get(this)}},{key:"getStatus",value:function(){return Zo.get(this)}},{key:"sendData",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){var en=!1;It.getStatus()!==et.g.DATACHANNEL_STATUS_ONGOING?qt(Dt.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is not ongoing",To)):It.getType()!==et.g.DATACHANNEL_TYPE_SEND?qt(Dt.g.createError(et.g.ERROR_OTHER,"Cannot send data as datachannel session is receiving only",To)):Sl.webRTCClient.sendDataWithCallId(It.getId(),{file:Ct,name:Ut.name,type:Ut.type},function(tn){en||(en=!0,Kt(tn.uuid)),To.trace("sendData() - progress : ",tn);var sn={uuid:tn.uuid,fileSize:tn.fileSize,remainingSize:tn.remainingSize,percentage:tn.percentage,sendChunkNb:tn.sendChunkNb,transferDuration:tn.transferDuration,lastPacket:tn.lastPacket};zt.get(It).emit("transferProgress",sn),tn.transferEnded&&zt.get(It).emit("transferComplete",sn)})})}},{key:"close",value:function(){this.getStatus()===et.g.DATACHANNEL_STATUS_ENDED?To.error("close() - DataChannel session has already ended"):Sl.webRTCClient.hangUp(this.getId())}}],xt=[{key:"getAvailableEvents",value:function(){return mp}}],Qt&&vu($t.prototype,Qt),xt&&vu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un);function Tl(Wt){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Tl(Wt)}function yu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Il(Wt,$t){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Il(Wt,$t)}function vp(Wt,$t){if($t&&(Tl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Su(Wt)}function Su(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ss(Wt){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ss(Wt)}var Tu=ft.Y.get("ReceivedInvitation"),Cp=["expired","statusChange"],Ho=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Il(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ss(Bt);if(dn){var Ut=Ss(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return vp(this,Ct)});function Xt(Ct,It){var Ut;return function(Kt,qt){if(!(Kt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Xt),Ut=pn.call(this,Ct,It),Tu.info("Create ReceivedDataChannelInvitation "),Ut.type="dataChannel",Ut.apiRTCManager.onEvent("hangup",function(Kt){var qt=Kt.detail.callId.toString();Ut.id.toString()===qt&&Ut.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(Ut.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(Su(Ut)).emit("expired"))}),Ut}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return Cp}}],(Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Ct.apiRTCManager.sendData(Ct.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,answer:"accept"});var Kt=new ys(Ct.id,Ct.sender,{started:!0,type:et.g.DATACHANNEL_TYPE_SEND});Ct.apiRTCManager.webRTCClient.acceptCall(Ct.id,{mediaTypeForIncomingCall:"DATA"}),It(Kt)}else Ut(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot join this datachannel session, invitation state invalid",Tu))})}},{key:"decline",value:function(Ct){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(this.setStatus(et.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:Ct,answer:"decline"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&yu($t.prototype,Qt),xt&&yu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(wn);function Rl(Wt){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Rl(Wt)}function bp(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function El(Wt,$t){return El=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},El(Wt,$t)}function yp(Wt,$t){if($t&&(Rl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Ts(Wt){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ts(Wt)}var Ol=ft.Y.get("ReceivedInvitation"),zo=function(Wt){(function(Xt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Object.defineProperty(Xt,"prototype",{writable:!1}),Ct&&El(Xt,Ct)})(pn,Wt);var $t,Qt,xt,Bt,dn=(xt=pn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Xt,Ct=Ts(xt);if(Bt){var It=Ts(this).constructor;Xt=Reflect.construct(Ct,arguments,It)}else Xt=Ct.apply(this,arguments);return yp(this,Xt)});function pn(Xt,Ct,It){var Ut;return function(Kt,qt){if(!(Kt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,pn),Ut=dn.call(this,Xt,It),Ol.info("Create ReceivedConversationJoinRequest"),Ut.type="conversationJoinRequest",Ut.conversation=Ct||null,Ut}return $t=pn,(Qt=[{key:"getConversation",value:function(){return this.conversation}},{key:"accept",value:function(){var Xt=this;return new Promise(function(Ct,It){Xt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Xt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Xt.conversation?Xt.conversation.allowEntry(Xt.sender,{invitationId:Xt.id,answer:"accept",ackEnabled:!0}).then(Ct).catch(It):(Xt.apiRTCManager.sendData(Xt.sender.getId(),{roomname:Xt.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Xt.id,answer:"accept",command:"access",value:{access:!0}}),Ct())):It(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept request, invitation state invalid",Ol))})}},{key:"decline",value:function(Xt){var Ct=this;return new Promise(function(It,Ut){Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Ct.setStatus(et.g.INVITATION_STATUS_DECLINED),Ct.conversation?Ct.conversation.denyEntry(Ct.sender,{invitationId:Ct.id,answer:"decline",reason:Xt}).then(It).catch(Ut):(Ct.apiRTCManager.sendData(Ct.sender.getId(),{roomname:Ct.id,event:et.g.INVITATION_ANSWER_IDENTIFIER,invitationId:Ct.id,reason:Xt,answer:"decline",command:"access",value:{access:!1}}),It())):Ut(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"decline() - Cannot decline request, invitation state invalid",Ol))})}}])&&bp($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),pn}(wn);function _l(Wt){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_l(Wt)}function Sp(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Al(Wt,$t){return Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Al(Wt,$t)}function Tp(Wt,$t){if($t&&(_l($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Is(Wt){return Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Is(Wt)}var Iu=ft.Y.get("ReceivedInvitation"),Ml=function(Wt){(function(Xt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Object.defineProperty(Xt,"prototype",{writable:!1}),Ct&&Al(Xt,Ct)})(pn,Wt);var $t,Qt,xt,Bt,dn=(xt=pn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Xt,Ct=Is(xt);if(Bt){var It=Is(this).constructor;Xt=Reflect.construct(Ct,arguments,It)}else Xt=Ct.apply(this,arguments);return Tp(this,Xt)});function pn(Xt,Ct,It){var Ut;return function(Kt,qt){if(!(Kt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,pn),(Ut=dn.call(this,Xt,Ct)).session=It,Ut.type="pointerSharing",Ut}return $t=pn,(Qt=[{key:"accept",value:function(){var Xt=this;return new Promise(function(Ct,It){Xt.getStatus()===et.g.INVITATION_STATUS_STANDBY?(Xt.setStatus(et.g.INVITATION_STATUS_ACCEPTED),Xt.session.joinPointerSharingRoom(Xt.id).then(Ct).catch(function(Ut){It(Dt.g.createError(et.g.ERROR_OTHER,"accept() - cannot accept invitation",Iu))})):It(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - cannot accept invitation",Iu))})}},{key:"decline",value:function(Xt){this.getStatus()===et.g.INVITATION_STATUS_STANDBY&&this.setStatus(et.g.INVITATION_STATUS_DECLINED)}}])&&Sp($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),pn}(wn);function Ip(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}s(4723);var $r=ft.Y.get("AicConsoleManager"),Ru=function(){function Wt(){var xt=this;(function(Bt,dn){if(!(Bt instanceof dn))throw new TypeError("Cannot call a class as a function")})(this,Wt),$r.info("Create AicConsoleManager"),this.ws=null,this.connectedToapplication=!1,this.domStream=null,this.keyboard_mode=0,this.ports=[4545,5858,37371,41793,42803],this.port_index=0,this.aic_agent_running=0,this.ip="127.0.0.1",this.aic_agent_handshake_done=0,this.controlActivated=!1,this.handshakeTimeoutId=0,this.kd=function(Bt){xt.key_down(Bt)},this.ku=function(Bt){xt.key_up(Bt)},this.wfl=function(Bt){xt.window_focus_lost(Bt)},this.mm=function(Bt){xt.mouse_move(Bt)},this.dc=function(Bt){xt.mouse_doubleclick(Bt)},this.md=function(Bt){xt.mouse_down(Bt)},this.mu=function(Bt){xt.mouse_up(Bt)},this.mw=function(Bt){xt.mouse_wheel(Bt)}}var $t,Qt;return $t=Wt,Qt=[{key:"aic_control_onmessage",value:function(xt){if($r.debug("Message to send to remote app :",xt),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),message:xt};apiRTC.session.remoteAccessInvitation.send(Bt).then(function(){}).catch(function(dn){$r.warn("Contact#send CONTACT_REMOTEACCESS_APP_MESSAGE message error:",dn)})}else $r.error("Error on aic_control_onmessage, remoteAccessInvitation is not initialized")}},{key:"aic_keyboard_keydown",value:function(xt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+xt+'","KEY_DOWN,'+Bt+'")')}},{key:"aic_keyboard_keyup",value:function(xt,Bt){this.aic_control_onmessage('aic_keyboard_keypress("'+xt+'","KEY_UP,'+Bt+'")')}},{key:"key_down",value:function(xt){if($r.debug("key_down"),xt.target===document.body)if(xt.preventDefault(),xt.isComposing||xt.keyCode===229)$r.debug("Ignoring event "+xt);else if(this.keyboard_mode===0){var Bt=(xt.altKey?"MOD_ALT,":"")+(xt.ctrlKey?"MOD_CONTROL,":"")+(xt.metaKey?"MOD_META,":"")+(xt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keydown(xt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keydown("+xt.keyCode+")");else $r.debug("this is not document body, ignoring this event")}},{key:"key_up",value:function(xt){if($r.debug("key_up"),xt.target===document.body)if(xt.preventDefault(),xt.isComposing||xt.keyCode===229)console.log("Ignoring event "+xt);else if(this.keyboard_mode===0){var Bt=(xt.altKey?"MOD_ALT,":"")+(xt.ctrlKey?"MOD_CONTROL,":"")+(xt.metaKey?"MOD_META,":"")+(xt.shiftKey?"MOD_SHIFT,":"");this.aic_keyboard_keyup(xt.key,Bt)}else this.keyboard_mode===1&&this.aic_control_onmessage("aic_keyboard_keyup("+xt.keyCode+")");else $r.debug("this is not document body, ignoring this event")}},{key:"window_focus_lost",value:function(xt){$r.debug("window_focus_lost"),this.aic_keyboard_keyup("Shift","MOD_ALT,MOD_CONTROL,MOD_META,MOD_SHIFT")}},{key:"mouse_doubleclick",value:function(xt){this.mouse_move(xt),this.aic_control_onmessage("aic_mouse_doubleclick("+xt.which+")")}},{key:"mouse_down",value:function(xt){this.mouse_move(xt),this.aic_control_onmessage("aic_mouse_down("+xt.which+")")}},{key:"mouse_up",value:function(xt){this.mouse_move(xt),this.aic_control_onmessage("aic_mouse_up("+xt.which+")")}},{key:"mouse_wheel",value:function(xt){xt.preventDefault(),this.aic_control_onmessage("aic_mouse_scroll("+xt.deltaX+","+-1*xt.deltaY+")")}},{key:"mouse_move",value:function(xt){var Bt=window.screen.width,dn=window.screen.height;apiRTC.session.remoteAccessInvitation!==null&&(Bt=apiRTC.session.remoteAccessInvitation.screenWidth,dn=apiRTC.session.remoteAccessInvitation.screenHeight);var pn=getComputedStyle(xt.target),Xt=parseInt(pn.getPropertyValue("width"),10),Ct=parseInt(pn.getPropertyValue("height"),10),It=0,Ut=0,Kt=!1;Xt/parseInt(xt.target.videoWidth,10)<=Ct/parseInt(xt.target.videoHeight,10)&&(Kt=!0),Kt===!0?($r.debug("Keeping width"),Ut=Xt*xt.target.videoHeight/xt.target.videoWidth,It=Xt):($r.debug("Keeping height"),It=Ct*xt.target.videoWidth/xt.target.videoHeight,Ut=Ct);var qt=xt.target.getBoundingClientRect(),en=xt.clientX-qt.left-(Xt-It)/2,tn=xt.clientY-qt.top-(Ct-Ut)/2,sn=Math.floor(en/It*Bt),Sn=Math.floor(tn/Ut*dn);this.aic_control_onmessage("aic_mouse_move("+sn+","+Sn+")")}},{key:"searchDOMElement",value:function(xt){var Bt=this;return new Promise(function(dn,pn){if(Bt.domStream=document.getElementById(xt),Bt.domStream)dn();else{var Xt="Dom element not found in searchDOMElement";$r.debug(Xt),pn(new Error(Xt))}})}},{key:"aic_control_start",value:function(){var xt=this;return new Promise(function(Bt,dn){$r.debug("aic_control_start"),window.oncontextmenu=function(){return!1};var pn=apiRTC.session.remoteAccessInvitation.screenSharingStreamDOMElementId;$r.debug("domSearchFilter :",pn),xt.searchDOMElement(pn).then(function(){if(xt.domStream)$r.debug("Adding mouse and keyboard events listeners"),document.addEventListener("keydown",xt.kd,{passive:!1}),document.addEventListener("keyup",xt.ku,{passive:!1}),document.addEventListener("blur",xt.wfl,{passive:!1}),xt.domStream.addEventListener("mousemove",xt.mm,!0),xt.domStream.addEventListener("mousedown",xt.md,!0),xt.domStream.addEventListener("mouseup",xt.mu,!0),xt.domStream.addEventListener("wheel",xt.mw,{passive:!1}),xt.controlActivated=!0,Bt();else{var Xt="Dom element not found";$r.debug(Xt),dn(new Error(Xt))}}).catch(function(Xt){dn(Xt)})})}},{key:"aic_control_stop",value:function(){var xt=this;return $r.debug("aic_control_stop"),new Promise(function(Bt,dn){if(window.oncontextmenu=function(){return!0},xt.domStream)$r.debug("Removing mouse and keyboard events listeners"),document.removeEventListener("keydown",xt.kd,{passive:!1}),document.removeEventListener("keyup",xt.ku,{passive:!1}),document.removeEventListener("blur",xt.wfl,{passive:!1}),xt.domStream.removeEventListener("mousemove",xt.mm,!0),xt.domStream.removeEventListener("dblclick",xt.dc,!0),xt.domStream.removeEventListener("mousedown",xt.md,!0),xt.domStream.removeEventListener("mouseup",xt.mu,!0),xt.domStream.removeEventListener("wheel",xt.mw,{passive:!1}),xt.controlActivated=!1,Bt();else{var pn="Dom element not found";$r.debug(pn),dn(new Error(pn))}})}},{key:"aic_agent_send_message",value:function(xt){this.ws!==void 0?this.ws.readyState===1?this.ws.send(xt):$r.info("aic_agent_send_message : ws in not in readyState"):$r.info("aic_agent_send_message : ws in not defined")}},{key:"ws_onopen",value:function(){var xt=this;$r.debug("ws_onopen : Connected"),this.aic_agent_handshake_done=0,this.aic_agent_send_message("aic_agent_start()"),this.handshakeTimeoutId=setTimeout(function(){$r.error("Timeout reached on handshake"),xt.ws.close(1e3,"HANDSHAKE_NOK")},1e3)}},{key:"ws_onmessage",value:function(xt){var Bt=xt.data;$r.debug("received_msg :",Bt);var dn=Bt.match(/^aic_notify\(\"([^\"]*)\",\"([^\"]*)\"\)$/);dn&&dn[1]==="aic_agent_version"&&($r.debug("aic_agent_version is :",dn[2]),clearTimeout(this.handshakeTimeoutId),this.aic_agent_handshake_done=1,this.connectedToapplication=!0,this.send_application_status("APP_CONNECTION_OK"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ok"))}},{key:"ws_onclose",value:function(xt){var Bt=this;$r.debug("ws_onclose : Closed - event :",xt),this.connectedToapplication===!0?(apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.stop(!0),this.connectedToapplication=!1):this.ws_reconnect()===2&&setTimeout(function(){Bt.ws_reconnect()},3e3)}},{key:"ws_onerror",value:function(xt){$r.debug("ws_onerror : "+xt)}},{key:"ws_connect",value:function(xt){var Bt=this;$r.debug("ws_connect : Connecting ");var dn="ws://"+this.ip+":"+xt+"/ws";$r.debug("... on url :",dn),this.ws=new WebSocket(dn,"ws-server-aic"),this.ws.addEventListener("open",function(pn){Bt.ws_onopen(pn)}),this.ws.addEventListener("message",function(pn){Bt.ws_onmessage(pn)}),this.ws.addEventListener("close",function(pn){Bt.ws_onclose(pn)}),this.ws.addEventListener("error",function(pn){Bt.ws_onerror(pn)})}},{key:"ws_reconnect",value:function(){return this.aic_agent_running===0?0:this.port_index>=this.ports.length?(this.port_index=0,2):(this.ws_connect(this.ports[this.port_index]),this.port_index++,0)}},{key:"send_application_status",value:function(xt){if($r.debug("send_application_status"),apiRTC.session.remoteAccessInvitation!==null){var Bt={event:et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,invitationId:apiRTC.session.remoteAccessInvitation.id,roomname:apiRTC.session.remoteAccessInvitation.conversation._getTechnicalName(),status:xt};apiRTC.session.remoteAccessInvitation.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE,Bt).then(function(){}).catch(function(dn){$r.warn("Contact#send send_application_status message error:",dn)})}else $r.warn("send_application_status but not linked to a remoteAccessInvitation")}},{key:"aic_agent_start",value:function(){$r.debug("aic_agent_start"),"WebSocket"in window?(this.aic_agent_running=1,this.send_application_status("APP_CONNECTION_ONGOING"),apiRTC.session.remoteAccessInvitation!=null&&apiRTC.session.remoteAccessInvitation.fireEvent("application_connection_ongoing"),this.ws_reconnect(this.ip)):$r.error("WebSocket NOT supported by your Browser!")}},{key:"aic_agent_stop",value:function(){$r.debug("aic_agent_stop"),this.aic_agent_running=0,this.ws.close()}},{key:"aic_agent_exit",value:function(){this.aic_agent_send_message("aic_agent_exit()")}}],Qt&&Ip($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function xl(Wt){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},xl(Wt)}function Rp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Eu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Pl(Wt,$t){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Pl(Wt,$t)}function Ep(Wt,$t){if($t&&(xl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Rs(Wt){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Rs(Wt)}var _a=ft.Y.get("ReceivedInvitation"),wp=["stop","messageDelivered","messageNotDelivered","application_connection_ongoing","application_connection_ok"],kp=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Pl(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Rs(Bt);if(dn){var Ut=Rs(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Ep(this,Ct)});function Xt(Ct,It,Ut){var Kt,qt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Rp(this,Xt),_a.debug("Create ReceivedRemoteAccessInvitation"),(Kt=pn.call(this,Ct,It.invitationId)).type="remoteAccess",Kt.conversation=Ut,qt.cloudConvId&&(Kt.cloudConvId=qt.cloudConvId),qt.webconf===!0&&(Kt.webconf=!0),Kt.aicConsoleManager=null,Kt.screenSharingStreamId=null,Kt.screenSharingStream=null,Kt.apiRTCManager.onEvent("receiveData",function(en){_a.debug("ReceivedRemoteAccessInvitation receiveData "),en.detail.data.event!==void 0&&en.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&en.detail.data.invitationId.toString()===Kt.id.toString()?(_a.debug("Received stop for "+Kt.id,en.detail.data),Kt.stop(!1,en.detail.data.reason)):en.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_MESSAGE&&en.detail.data.invitationId.toString()===Kt.id.toString()&&(_a.debug("Received CONTACT_REMOTEACCESS_APP_MESSAGE for "+Kt.id,en.detail.data),Kt.aicConsoleManager!==null?Kt.aicConsoleManager.aic_agent_send_message(en.detail.data.message):_a.debug("aicConsoleManager is not initialized"))}),Kt.conversation.on("contactLeft",function(en){en.id===Kt.sender.id&&(_a.debug("Remote user has left, stopping remoteAccess"),Kt.stop(!1,{code:"AGENT_LEFT"}))}),Kt}return $t=Xt,Qt=[{key:"accept",value:function(){var Ct=this;return new Promise(function(It,Ut){if(_a.debug("ReceivedRemoteAccessInvitation accept"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_ACCEPTED);var Kt={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"accept"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Kt).then(function(){It(Ct.id)}).catch(function(qt){Ut(qt)})}else Ut(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot accept remote access, invitation state invalid",_a))})}},{key:"decline",value:function(){var Ct=this;return new Promise(function(It,Ut){if(_a.debug("ReceivedRemoteAccessInvitation decline"),Ct.getStatus()===et.g.INVITATION_STATUS_STANDBY){Ct.setStatus(et.g.INVITATION_STATUS_DECLINED);var Kt={event:et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,invitationId:Ct.id,roomname:Ct.conversation._getTechnicalName(),answer:"decline"};Ct.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER,Kt).then(function(){It(Ct.id)}).catch(function(qt){Ut(qt)}),Ct.stop(!0,{code:"USER_DECLINE"})}else Ut(Dt.g.createError(et.g.ERROR_INVITATION_STATE_INVALID,"accept() - Cannot decline remote access, invitation state invalid",_a))})}},{key:"sendMessageToSender",value:function(Ct,It){var Ut=this;return _a.debug("sendMessageToSender :",It),new Promise(function(Kt,qt){Ut.apiRTCManager.sendData(Ut.sender.getId(),It).then(function(){zt.get(Ut).emit("messageDelivered",{event:Ct,contact:Ut.sender,messageData:It}),Kt()}).catch(function(en){var tn=Dt.g.createError(en,"Invitation not delivered",_a);zt.get(Ut).emit("messageNotDelivered",{error:tn,contact:Ut.sender,event:Ct,messageData:It}),qt(tn)})})}},{key:"fireEvent",value:function(Ct,It){zt.get(this).emit(Ct,It)}},{key:"startScreenSharingAndPublish",value:function(){var Ct=this;return _a.debug("startScreenSharingAndPublish"),new Promise(function(It,Ut){apiRTC.Stream.createDisplayMediaStream({video:{cursor:"always",displaySurface:"monitor"},surfaceSwitching:"exclude",selfBrowserSurface:"exclude",systemAudio:"exclude"}).then(function(Kt){Kt.screensharingRemoteAccessStream=!0;var qt={},en={};en.invitationId=Ct.id,en.screenWidth=window.screen.width,en.screenHeight=window.screen.height,qt.context={remoteAccessCtx:en},Ct.screenSharingStreamId=Kt.getId(),Ct.screenSharingStream=Kt,_a.debug("setting screenSharingStreamId :",Ct.screenSharingStreamId),Ct.conversation.publish(Kt,qt).then(function(tn){Ct.aicConsoleManager=new Ru,Ct.aicConsoleManager.aic_agent_start(),It(tn)}).catch(function(tn){var sn={code:"DISPLAY_MEDIA_PUBLISH_ERROR",error:tn};Ct.stop(!0,sn),Ut(tn)})}).catch(function(Kt){_a.error("error on createDisplayMediaStream :",Kt);var qt={code:"CREATE_DISPLAY_MEDIA_ERROR",error:Kt};Ct.stop(!0,qt),Ut(Kt)})})}},{key:"downloadApplication",value:function(){return _a.debug("downloadApplication"),new Promise(function(Ct,It){fetch("https://dev.cdn.apizee.com/apiRTC/app/remoteAccess.exe").then(function(Ut){return Ut.blob()}).then(function(Ut){var Kt=window.URL.createObjectURL(Ut),qt=document.createElement("a");qt.href=Kt,qt.download="remoteAccess.exe",document.body.appendChild(qt),qt.click(),qt.remove(),Ct()}).catch(function(Ut){_a.error("Something went wrong during remote access application loading.. toString :",Ut.toString()),It(new Error("error on application fetch :"+Ut.toString()))})})}},{key:"stop",value:function(){var Ct=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_a.debug("stop with sendMessage :",Ct),It==null&&(It={code:"USER_STOP"});var Ut=this.conversation.conversationPublishedStreams.get(this.screenSharingStreamId);if(Ut!=null&&(_a.debug("streamInfo :",Ut),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(Ut.callId)),this.screenSharingStream!==null&&(this.screenSharingStream.release(),this.screenSharingStream=null),this.aicConsoleManager!==null&&(this.aicConsoleManager.aic_agent_exit(),this.aicConsoleManager.aic_agent_stop(),this.aicConsoleManager=null),apiRTC.session.remoteAccessInvitation=null,Ct){var Kt={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:It};this.sendMessageToSender(et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,Kt).then(function(){}).catch(function(qt){_a.warn("Contact#send stop message error:",qt)})}zt.get(this).emit("stop",It)}}],xt=[{key:"getAvailableEvents",value:function(){return wp}}],Qt&&Eu($t.prototype,Qt),xt&&Eu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(wn),Op=s(8364),Go=s.n(Op);function Es(Wt){return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Es(Wt)}function _p(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function wu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}s(9601),s(5306);var Ap=ft.Y.get("UserData"),Mp=In.get(),Io=function(){function Wt(){var Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var dn in _p(this,Wt),Bt)Bt.hasOwnProperty(dn)&&(this[dn]=Bt[dn])}var $t,Qt,xt;return $t=Wt,xt=[{key:"equals",value:function(Bt,dn){if(!(Bt instanceof Object&&dn instanceof Object))return!1;for(var pn in Bt)if(dn[pn]===void 0||Es(dn[pn])==="object"&&!this.equals(dn[pn],Bt[pn])||dn[pn]!==Bt[pn])return!1;for(var Xt in dn)if(Bt[Xt]===void 0||Es(Bt[Xt])==="object"&&!this.equals(Bt[Xt],dn[Xt])||Bt[Xt]!==dn[Xt])return!1;return!0}}],(Qt=[{key:"get",value:function(Bt){return this.hasOwnProperty(Bt)&&this[Bt]!==void 0&&this[Bt]!=="null"&&this[Bt]!==null?this[Bt]:null}},{key:"setToSession",value:function(){try{var Bt={};for(var dn in this)this.hasOwnProperty(dn)&&typeof this[dn]!="function"&&(Bt[dn]=this[dn]);Mp.apiRTCSession.setUserData(Bt)}catch{Ap.error("setUserData() - could not set userData")}}},{key:"setProp",value:function(Bt,dn){return this[Bt]=dn,this}},{key:"setProps",value:function(Bt){for(var dn in Bt)Bt.hasOwnProperty(dn)&&(this[dn]=Bt[dn]);return this}}])&&wu($t.prototype,Qt),xt&&wu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Dl(Wt){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Dl(Wt)}function xp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function ku(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Nl(Wt,$t){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Nl(Wt,$t)}function Pp(Wt,$t){if($t&&(Dl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ws(Wt)}function ws(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ks(Wt){return ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},ks(Wt)}var _o=ft.Y.get("SentInvitation"),Dp=["response","receive","statusChange"],Do=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Nl(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=ks(Bt);if(dn){var Ut=ks(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Pp(this,Ct)});function Xt(Ct,It){var Ut,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return xp(this,Xt),(Ut=pn.call(this)).conversation=It,_o.info("Create SentInvitation"),Ut.invitationType="sent",Ut.contact=Ct,Ut.id=Dt.g.guid(),Ut.sendTime=Date.now(),Ut.expirationTime=null,Ut.expirationTimeout=null,Kt.hasOwnProperty("expirationTime")&&(Ut.expirationTime=Kt.expirationTime,Ut.expirationTimeout=setTimeout(function(){Ut.getStatus()===et.g.INVITATION_STATUS_STANDBY&&(_o.info("Conversation invitation expired"),Ut.setStatus(et.g.INVITATION_STATUS_EXPIRED),zt.get(ws(Ut)).emit("response",Ut.getStatus()))},Kt.expirationTime)),Kt.hasOwnProperty("receiveNotifier")&&Kt.receiveNotifier.on("receive",function(){zt.get(ws(Ut)).emit("receive")}),Ut.apiRTCManager.onEvent("receiveData",function(qt){_o.debug("SentInvitation receiveData "),qt.detail.data.event!==void 0&&(qt.detail.data.event!==et.g.INVITATION_ANSWER_IDENTIFIER&&qt.detail.data.event!==et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER||qt.detail.data.invitationId.toString()!==Ut.id.toString()||Ut.getStatus()!==et.g.INVITATION_STATUS_STANDBY||(_o.debug("Received invitation answer for "+Ut.id,qt.detail.data),Ut.expirationTimeout!==null&&clearTimeout(Ut.expirationTimeout),qt.detail.data.answer==="accept"?Ut.setStatus(et.g.INVITATION_STATUS_ACCEPTED):Ut.setStatus(et.g.INVITATION_STATUS_DECLINED),zt.get(ws(Ut)).emit("response",Ut.getStatus())))}),Ut.apiRTCManager.onEvent("hangup",function(qt){_o.debug("hangup");var en=qt.detail.callId.toString();Ut.getId()===en&&(_o.debug("hangup for sentInvitation"),Ut.setStatus(et.g.INVITATION_STATUS_ENDED))}),Ut}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return Dp}}],(Qt=[{key:"getId",value:function(){return this.id}},{key:"onResponse",value:function(Ct){this.on("response",Ct)}},{key:"cancel",value:function(){_o.info("cancel"),this.type==="sendFile"?(_o.info("cancel sendfile"),this.apiRTCManager.webRTCClient.hangUp(this.id)):_o.warn("cancel is not managed for invitation with type :",this.type)}},{key:"send",value:function(Ct){var It=this;return _o.debug("SentInvitation#send"),new Promise(function(Ut,Kt){It.apiRTCManager.sendData(It.contact.getId(),Ct).then(function(){return Ut()}).catch(function(qt){var en=Dt.g.createError(qt,"Invitation not delivered",_o);return Kt(en)})})}}])&&ku($t.prototype,Qt),xt&&ku($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(Vn);function Ll(Wt){return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Ll(Wt)}function Np(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Ou(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Ul(Wt,$t){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Ul(Wt,$t)}function Lp(Wt,$t){if($t&&(Ll($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Os(Wt)}function Os(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function _s(Wt){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},_s(Wt)}var go=ft.Y.get("SentRemoteAccessInvitation"),Up=["response","receive","remoteAccessStreamAdded","stop","application_connection_ongoing","application_connection_ok"],jp=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Ul(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=_s(Bt);if(dn){var Ut=_s(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Lp(this,Ct)});function Xt(Ct,It){var Ut,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Np(this,Xt),Ut=pn.call(this,Ct,It,Kt),go.debug("Create sentRemoteAccessInvitation"),Ut.type="remoteAccess",Ut.screenSharingStreamId=null,Ut.screenSharingStream=null,Ut.aicConsoleManager=null,Ut.screenSharingStreamDOMElementId=null,Ut.apiRTCManager.onEvent("receiveData",function(qt){go.debug("SentRemoteAccessInvitation receiveData "),qt.detail.data.event!==void 0&&(qt.detail.data.event===et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER&&qt.detail.data.invitationId.toString()===Ut.id.toString()?(go.debug("SentRemoteAccessInvitation Received stop for "+Ut.id,qt.detail.data),Ut.stop(!1,qt.detail.data.reason)):qt.detail.data.event===et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE&&qt.detail.data.invitationId.toString()===Ut.id.toString()&&(go.debug("CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE : "+Ut.id,qt.detail.data.status),qt.detail.data.status==="APP_CONNECTION_ONGOING"?(zt.get(Os(Ut)).emit("application_connection_ongoing"),Ut.aicConsoleManager=new Ru,Ut.aicConsoleManager.controlActivated===!0&&Ut.aicConsoleManager.aic_control_stop().then(function(){zt.get(Os(Ut)).emit("controlStop")}).catch(function(en){go.debug("aic_control_stop error:",en)})):qt.detail.data.status==="APP_CONNECTION_OK"&&zt.get(Os(Ut)).emit("application_connection_ok")))}),Ut.conversation.on("contactLeft",function(qt){qt.id===Ut.contact.id&&(go.debug("Remote user has left, stopping remoteAccess"),Ut.stop(!1,{code:"USER_LEFT"}))}),Ut}return $t=Xt,Qt=[{key:"setRemoteAccessStream",value:function(Ct){go.debug("setRemoteAccessStream"),this.screenSharingStream=Ct,zt.get(this).emit("remoteAccessStreamAdded",this.screenSharingStream)}},{key:"setScreenSharingStreamDOMElementId",value:function(Ct){var It=this;this.screenSharingStreamDOMElementId=Ct,this.aicConsoleManager!==null?this.aicConsoleManager.aic_control_start().then(function(){zt.get(It).emit("controlStart")}).catch(function(Ut){go.warn("aic_control_start error:",Ut)}):go.debug("aicConsoleManager is not activated")}},{key:"toggleMouseAndKeyboardAccess",value:function(){var Ct=this;return go.debug("toggleMouseAndKeyboardAccess"),new Promise(function(It,Ut){if(Ct.aicConsoleManager!==null)Ct.aicConsoleManager.controlActivated===!0?Ct.aicConsoleManager.aic_control_stop().then(function(){zt.get(Ct).emit("controlStop"),It()}).catch(function(qt){Ut(qt)}):Ct.aicConsoleManager.aic_control_start().then(function(){zt.get(Ct).emit("controlStart"),It()}).catch(function(qt){Ut(qt)});else{var Kt="aicConsoleManager is not activated";go.debug(Kt),Ut(new Error(Kt))}})}},{key:"getMouseAndKeyboardAccessStatus",value:function(){return this.aicConsoleManager.controlActivated}},{key:"stop",value:function(){var Ct=this,It=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(go.debug("stop"),Ut==null&&(Ut={code:"AGENT_STOP"}),this.aicConsoleManager!==null&&(this.aicConsoleManager.controlActivated===!0&&this.aicConsoleManager.aic_control_stop().then(function(){zt.get(Ct).emit("controlStop")}).catch(function(qt){go.warn("aic_control_stop error:",qt)}),this.aicConsoleManager=null),It){var Kt={event:et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER,invitationId:this.id,roomname:this.conversation._getTechnicalName(),reason:Ut};this.send(Kt).then(function(){}).catch(function(qt){go.warn("Contact#send stop message error:",qt)})}apiRTC.session.remoteAccessInvitation!==null&&(zt.get(this).emit("stop",Ut),apiRTC.session.remoteAccessInvitation=null)}}],xt=[{key:"getAvailableEvents",value:function(){return Up}}],Qt&&Ou($t.prototype,Qt),xt&&Ou($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(Do);function $l(Wt){return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},$l(Wt)}function _u(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Au(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Au(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Au(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function $p(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Mu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Fl(Wt,$t){return Fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Fl(Wt,$t)}function Fp(Wt,$t){if($t&&($l($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(Wt)}function Jr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function As(Wt){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},As(Wt)}var or=ft.Y.get("Contact"),Gr=In.get(),es=new(Go()),Wl=Mr.get(),Wp=["message","conversationInvitation","data","joinGroup","leaveGroup","whiteboardInvitation","fileSentSuccessfully","fileTransferInvitation","fileTransferProgress","dataChannelInvitation","incomingCall","newMediaAvailable","customEvent","fileTransferError","incomingScreenSharingCall","incomingScreenSharingCallInvitation"],Bl=new WeakMap,xu=new WeakMap,Vl=new Map,No=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Fl(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=As(Bt);if(dn){var Ut=As(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Fp(this,Ct)});function Xt(Ct){var It,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $p(this,Xt),It=pn.call(this,or),or.debug("Create Contact with id "+Ct),or.debug("Create Contact with userData :",Ut),xu.set(Jr(It),Ct.toString()),It.groups=[],It.previousMessages=[],It.userData=new Io(Ut),It.enterprise=null,It.streams=new Map,It.profile=null,It.fileTransfers=[],It.promises=[],Bl.set(Jr(It),[]),Gr.onEvent("roomInvitation",function(Kt){if(Kt.detail.senderId!==null&&Kt.detail.senderId!==void 0&&Kt.detail.roomType==="whiteBoard"&&Kt.detail.senderId.toString()===It.getId()){or.info("Received whiteboard invitation from "+It.getUsername());var qt={};Kt.detail.cloudConvId&&(qt.cloudConvId=Kt.detail.cloudConvId),Kt.detail.webconf===!0&&(qt.webconf=!0),zt.get(Jr(It)).emit("whiteboardInvitation",new vs(Jr(It),Kt.detail.roomId,qt))}}).onEvent("receiveIMMessage",function(Kt){Kt.detail.senderId.toString()===It.getId()&&(zt.get(Jr(It)).emit("message",{content:Kt.detail.message,uuid:Kt.detail.UUCSeq,time:Kt.detail.time}),It.addMessageToHistory(Kt.detail.message,Math.round(Kt.detail.time.getTime()/1e3),Kt.detail.UUCSeq,!0))}).onEvent("receiveData",function(Kt){if(Kt.detail.senderId.toString()===It.getId()){or.debug("Received data e.detail.data : ",Kt.detail.data);var qt=Kt.detail.data,en=null,tn=po.get();if(qt.roomname!==void 0&&(en=tn.isConference(qt.roomname)?tn.getOrCreateConference(tn.getNameFromTechnicalName(qt.roomname)):tn.getOrCreateConversation(tn.getNameFromTechnicalName(qt.roomname))),qt.apiRTCRequest===!0&&It.manageApiRTCRequest(Kt.detail,en),qt.event!==void 0)switch(qt.event){case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:case et.g.INVITATION_ANSWER_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:or.trace("Received data from "+It.getUsername(),qt.content),zt.get(Jr(It)).emit("data",qt.content);break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(en!==null){or.debug("Received conversation invitation from "+It.getId());var sn={};qt.hasOwnProperty("password")&&(sn.password=qt.password),zt.get(Jr(It)).emit("conversationInvitation",new Vt(Jr(It),qt,en,sn))}break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:or.debug("Received file info from "+It.getUsername(),qt.fileInfo);var Sn=qt.callId.toString();if(Dt.g._private.dataCallsFileInfo.set(Sn,qt.fileInfo),Dt.g._private.dataCallsOnHold.has(Sn)){var Dn=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(It.getId()+"-sendfile-"+Sn)?(Dn=apiRTC.userAgentInstance.currentSession.invitationsMap.get(It.getId()+"-sendfile-"+Sn),or.debug("invitation already exist :",Dn)):(Dn=new eo(Jr(It),Sn,qt.fileInfo),apiRTC.userAgentInstance.currentSession.invitationsMap.set(It.getId()+"-sendfile-"+Sn,Dn)),zt.get(Jr(It)).emit("fileTransferInvitation",Dn)}break;case et.g.CONTACT_DATACHANNEL_INVITATION:or.debug("Received datachannel invitation from "+It.getUsername()),Dt.g._private.dataChannelInvitations.set(qt.callId.toString(),!0),Dt.g._private.dataCallsOnHold.has(qt.callId.toString())&&zt.get(Jr(It)).emit("dataChannelInvitation",new Ho(Jr(It),qt.callId.toString()));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:or.debug("New media available from "+It.getUsername(),qt.fileinfo),zt.get(Jr(It)).emit("newMediaAvailable",{media:qt.media});break;case et.g.CONTACT_EVENTCENTER_DATA_REQUEST:or.debug("New request for event center data from "+It.getUsername());var nr=apiRTC.eventCenter.getStoredData();if(nr===void 0)return void or.error("Can't send event center stored data, it's undefined");or.debug("Sending requested event center data"),It.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_ANSWER,{data:nr});break;case et.g.CONTACT_EVENTCENTER_DATA_ANSWER:if(or.debug("New event center data from "+It.getUsername()),qt.data===void 0)return void or.error("Can't handle remote event center data, it's undefined");apiRTC.eventCenter.handleDataAnswer(qt.data);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER:or.debug("New getAudioFlowStatus from "+qt.requesterId+" on stream "+qt.streamId);var ar=It.getContact(qt.requesterId),fr=It.getLocalStreamPublished();if(fr===null)return It.sendToContactRemoteStreamError("No stream found on remote",ar,qt);ar.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,audioFlowStatus:fr.getAudioFlowStatus()});break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER:or.debug("New getVideoFlowStatus from "+qt.requesterId+" on stream "+qt.streamId);var vr=It.getContact(qt.requesterId),Pr=It.getLocalStreamPublished();if(Pr===null)return It.sendToContactRemoteStreamError("No stream found on remote",vr,qt);vr.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,videoFlowStatus:Pr.getVideoFlowStatus()});break;case et.g.CONTACT_GET_SETTINGS_IDENTIFIER:or.debug("CONTACT_GET_SETTINGS_IDENTIFIER");var Zr,na=It.getContact(qt.requesterId);if((Zr=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId))===null)return It.sendToContactRemoteStreamError("No stream found on remote",na,qt);Zr.getSettings().then(function(lo){na.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,settings:lo})}).catch(function(lo){It.sendToContactRemoteStreamError(lo.message,na,qt)});break;case et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER:or.debug("CONTACT_GET_CAPABILITIES_IDENTIFIER");var Vo,ur=It.getContact(qt.requesterId);if((Vo=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId))===null)return It.sendToContactRemoteStreamError("No stream found on remote",ur,qt);Vo.getCapabilities().then(function(lo){ur.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,capabilities:lo})}).catch(function(lo){It.sendToContactRemoteStreamError(lo.message,ur,qt)});break;case et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER:or.debug("New getConstraints from "+qt.requesterId);var sr=It.getContact(qt.requesterId),Or=It.getLocalStreamPublished();if(Or===null)return It.sendToContactRemoteStreamError("No stream found on remote",sr,qt);Or.getConstraints().then(function(lo){sr.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout,constraints:lo})}).catch(function(lo){It.sendToContactRemoteStreamError(lo.message,sr,qt)});break;case et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER:var xr;or.debug("CONTACT_APPLY_CONSTRAINTS_IDENTIFIER"),xr=qt.mediaStreamId!==void 0?It.getLocalStreamWithMediaStreamId(qt.mediaStreamId):It.getLocalStreamWithCallId(qt.streamId);var Er=It.getContact(qt.requesterId);if(xr===null)return It.sendToContactRemoteStreamError("No stream found on remote",Er,qt);xr.applyConstraints(qt.constraints).then(function(){Er.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER,{callId:qt.callId,streamId:qt.streamId,timeout:qt.timeout}),xr.emitConstraintsChanged(qt.constraints)}).catch(function(lo){It.sendToContactRemoteStreamError(lo.message,Er,qt)});break;case et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER:var $a;or.debug("CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER from :"+qt.requesterId),($a=apiRTC.userAgentInstance.getStreamWithMediaStreamId(qt.mediaStreamId))!=="NOT_FOUND"&&$a.emitConstraintsChanged(qt.constraints);break;case et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER:or.debug("getRemoteAudioFlowStatus result :",qt);var to=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);to===null?or.error("Can't find the local stream to resolve the request.."):to.resolvePendingPromise(qt.timeout,qt.audioFlowStatus);break;case et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER:or.debug("getRemoteVideoFlowStatus result :",qt);var vo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);vo===null?or.error("Can't find the local stream to resolve the request.."):vo.resolvePendingPromise(qt.timeout,qt.videoFlowStatus);break;case et.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER:or.debug("remote getSettings result :",qt);var Oo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);Oo===null?or.error("Can't find the local stream to resolve the request.."):Oo.resolvePendingPromise(qt.timeout,qt.settings);break;case et.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER:or.debug("remote getCapabilities result :",qt);var Hr=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);Hr===null?or.error("Can't find the local stream to resolve the request.."):Hr.resolvePendingPromise(qt.timeout,qt.capabilities);break;case et.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER:or.debug("remote getConstraints result :",qt);var fo=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);fo===null?or.error("Can't find the local stream to resolve the request.."):fo.resolvePendingPromise(qt.timeout,qt.constraints);break;case et.g.CONTACT_GET_REMOTE_ERROR:or.debug("remote stream request error:",qt);var So=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);So===null?or.error("Can't find the local stream to reject the request.."):So.rejectPendingPromise(qt.timeout,qt.message);break;case et.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER:or.debug("remote applyConstraints result :",qt);var ps=It.getRemoteStreamSubscribed(qt.callId,qt.streamId);ps===null?or.error("Can't find the local stream to resolve the request.."):ps.resolvePendingPromise(qt.timeout,qt.constraints);break;default:var fs={event:qt.event,content:qt};en!==null&&(fs.conversation=en),zt.get(Jr(It)).emit("customEvent",fs)}}}).onEvent("incomingCall",function(Kt){if(Kt.detail.callerId.toString()===It.getId()){var qt=Kt.detail.callId.toString();if(Kt.detail.callType==="data")if(or.debug("Received file transfer invitation from "+It.getUsername()),Dt.g._private.dataCallsFileInfo.has(qt)){var en=Dt.g._private.dataCallsFileInfo.get(qt),tn=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(It.getId()+"-sendfile-"+qt)?(tn=apiRTC.userAgentInstance.currentSession.invitationsMap.get(It.getId()+"-sendfile-"+qt),or.debug("invitation already exist :",tn)):(tn=new eo(Jr(It),qt,en),apiRTC.userAgentInstance.currentSession.invitationsMap.set(It.getId()+"-sendfile-"+qt,tn)),zt.get(Jr(It)).emit("fileTransferInvitation",tn)}else Dt.g._private.dataChannelInvitations.has(qt)?zt.get(Jr(It)).emit("dataChannelInvitation",new Ho(Jr(It),qt)):(or.info("File information has not been received yet, putting invitation on hold"),Dt.g._private.dataCallsOnHold.set(qt));else if(Kt.detail.callType==="screenSharing"||Kt.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){or.debug("Received screenSharingCallInvitation from "+It.getUsername());var sn=new Ar(Jr(It),qt,Kt.detail.callType,{isRecorded:!!Kt.detail.hasOwnProperty("recordedCall")&&Kt.detail.recordedCall});zt.get(Jr(It)).emit("incomingScreenSharingCallInvitation",sn)}else{or.debug("Received screenSharingCall from "+It.getUsername());var Sn=Wl.getOrCreateCall(qt,Jr(It),{started:!0,isRecorded:!!Kt.detail.hasOwnProperty("recordedCall")&&Kt.detail.recordedCall});zt.get(Jr(It)).emit("incomingScreenSharingCall",Sn)}else or.info("Received call invitation from "+It.getUsername()),zt.get(Jr(It)).emit("incomingCall",new Ar(Jr(It),qt,Kt.detail.callType,{isRecorded:!!Kt.detail.hasOwnProperty("recordedCall")&&Kt.detail.recordedCall}))}}).onEvent("hangup",function(Kt){var qt=Kt.detail.callId.toString();It.getId()===Kt.detail.remoteId.toString()&&(or.debug("hangup event :",Kt.detail),It.fileTransfers.includes(qt)&&(or.info("File transfer finished from "+It.getUsername()),It.fileTransfers.splice(It.fileTransfers.indexOf(qt),1)))}).onEvent("sendDataChannelError",function(Kt){var qt=Kt.detail.callId.toString();It.getId()===Kt.detail.remoteId.toString()&&It.fileTransfers.includes(qt)&&(or.info("File transfer error from "+It.getUsername()),zt.get(Jr(It)).emit("fileTransferError",{error:"sendDataChannelError",invitationId:qt}))}).onEvent("fetchUserDataAnswer",function(Kt){It.getId()===Kt.detail.id.toString()&&(It.userData=new Io(Kt.detail.userData),It.promises.forEach(function(qt){Kt.detail.timeout===qt.timeout&&(clearTimeout(qt.timeout),qt.resolve(Kt.detail.userData))}))}),It}return $t=Xt,Qt=[{key:"getId",value:function(){return xu.get(this)}},{key:"id",get:function(){return or.warn("contact.id is deprecated, please use contact.getId() instead"),this.getId()}},{key:"fetchProfileInformation",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Kt,qt){It.profile===null||Ut?es.getUserProfile(Gr.getActiveApiKey(),It.getId(),Ct).then(function(en){It.profile=en,Kt(en)}).catch(qt):Kt(It.profile)})}},{key:"getActiveStreams",value:function(){return this.streams.values()}},{key:"getLocalStreamWithCallId",value:function(Ct){for(var It=null,Ut=so.getLocalStreams(),Kt=Ut.next();!Kt.done;){for(var qt=Kt.value,en=qt.publishedInConversations.values(),tn=en.next();!tn.done;)tn.value===Ct&&(or.debug("Finding Stream in a conversation"),It=qt),tn=en.next();qt.callId===Ct&&(or.debug("Finding Stream in a call"),It=qt),Kt=Ut.next()}return It}},{key:"getLocalStreamPublished",value:function(){var Ct=so.getLocalStreams().next();return Ct.value===void 0?null:Ct.value}},{key:"getLocalStreamWithMediaStreamId",value:function(Ct){for(var It=null,Ut=so.getLocalStreams(),Kt=Ut.next();!Kt.done;){var qt=Kt.value;if(qt.data.id===Ct)return qt;Kt=Ut.next()}return It}},{key:"getRemoteStreamSubscribed",value:function(Ct,It){var Ut=zr.getActiveSession().getCall(Ct);if(Ut){or.debug("remote stream is associated to a call");var Kt,qt=_u(Ut.getReceivedStreams());try{for(qt.s();!(Kt=qt.n()).done;){var en=Kt.value;if(en.getId()===It)return en}}catch(fr){qt.e(fr)}finally{qt.f()}}else{var tn=zr.getActiveSession().getActiveConversations(),sn=zr.getActiveSession().getActiveConferences();for(var Sn in tn){var Dn=tn[Sn].getSubscribedStream(It);if(Dn!==void 0)return or.debug("remote stream is associated to a conversation"),Dn}for(var nr in sn){var ar=sn[nr].getSubscribedStream(It);if(ar!==void 0)return or.debug("remote stream is associated to a conference"),ar}}return null}},{key:"addMessageToHistory",value:function(Ct,It,Ut,Kt){Bl.get(this).indexOf(Ut.toString())===-1&&(this.previousMessages.push({content:Ct,timestamp:It,uuid:Ut,fromContact:Kt}),Bl.get(this).push(Ut.toString()))}},{key:"getPreviousMessages",value:function(){return this.previousMessages.sort(function(Ct,It){return new Date(It.timestamp)-new Date(Ct.timestamp)}),this.previousMessages}},{key:"getUserData",value:function(){return this.userData}},{key:"getRemoteAccessSupport",value:function(){var Ct=!1;return this.userData.remoteAccessUserSupport==="ON"&&(Ct=!0),Ct}},{key:"fetchUserData",value:function(){var Ct=this;return new Promise(function(It,Ut){var Kt=setTimeout(function(){Ut("Timeout error during fetchUserData() process")},5e3);Ct.promises.push({timeout:Kt,resolve:It}),apiRTC.session.fetchUserData({apiKey:Gr.getActiveApiKey(),id:Ct.getId(),timeout:Kt})})}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.getId()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"fetchWebSessionInformation",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){Ct instanceof zr?Vl.has(It.getId()+":"+Ct.getId())?Ut(Vl.get(It.getId()+":"+Ct.getId())):es.getWebSession(Ct,It,Gr.getActiveApiKey()).then(function(qt){Vl.set(It.getId()+":"+Ct.getId(),qt),Ut(qt)}).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_OTHER,"fetchWebSessionInformation() - could not fetch web session information",or))}):Kt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"fetchWebSessionInformation() - parameter is not an instance of apiRTC.Session",or))})}},{key:"loadMessageHistory",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){It.fetchWebSessionInformation(Ct).then(function(en){return es.getSessionHistory(en.webSessionId,Ct.getToken(),Ut)}).then(function(en){or.debug("loadMessageHistory() - got messages",en.messages);var tn,sn=_u(en.messages);try{for(sn.s();!(tn=sn.n()).done;){var Sn=tn.value;It.addMessageToHistory(Sn.value,Sn.timestamp,Sn.uuid,Sn.destId.toString()!==It.getId())}}catch(Dn){sn.e(Dn)}finally{sn.f()}Kt()}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"loadMessageHistory() - could not load session history",or))})})}},{key:"addToGroup",value:function(Ct){this.inGroup(Ct)||(this.groups.push(Ct),zt.get(this).emit("joinGroup",Ct))}},{key:"removeFromGroup",value:function(Ct){this.inGroup(Ct)&&(this.groups.splice(this.groups.indexOf(Ct),1),zt.get(this).emit("leaveGroup",Ct))}},{key:"inGroup",value:function(Ct){return this.groups.includes(Ct)}},{key:"isOnline",value:function(){return this.groups.length!==0}},{key:"sendData",value:function(Ct){var It=this;return this.isOnline()||or.warn("sendData() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Ut,Kt){Gr.sendData(It.getId(),{event:et.g.CONTACT_SEND_DATA_IDENTIFIER,content:Ct}).then(Ut).catch(function(qt){switch(qt){case et.g.ERROR_TIMED_OUT:Kt(Dt.g.createError(et.g.ERROR_TIMED_OUT,"sendData() - Data transmission timed out ",or));break;case et.g.ERROR_NOT_FOUND:Kt(Dt.g.createError(et.g.ERROR_NOT_FOUND,"sendData() - Contact was not found ",or));break;default:Kt(Dt.g.createError(et.g.ERROR_OTHER,"sendData() - Data default error ",or))}})})}},{key:"sendCustomEvent",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||or.warn("sendCustomEvent() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Kt,qt){var en=Ut;en.event=Ct,Gr.sendData(It.getId(),en).then(Kt).catch(function(tn){switch(tn){case et.g.ERROR_TIMED_OUT:qt(Dt.g.createError(et.g.ERROR_TIMED_OUT,"sendCustomEvent() - Data transmission timed out ",or));break;case et.g.ERROR_NOT_FOUND:qt(Dt.g.createError(et.g.ERROR_NOT_FOUND,"sendCustomEvent() - Contact was not found ",or));break;default:qt(Dt.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - Data transmission timed out ",or))}})})}},{key:"sendRequest",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||or.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Kt,qt){var en=(Math.random()*new Date().getTime()).toString(36).replace(/\./g,"-");Gr.onceEvent("receiveData",function(sn){or.debug("Received data e.detail.data : ",sn.detail.data),sn.detail.data.apiRTCAnswer===!0&&(sn.detail.data.requestUUID===en?Kt():or.error("uuid is not correct"))});var tn=Ut;tn.apiRTCRequest=!0,tn.requestType=Ct,tn.uuid=en,Gr.sendData(It.getId(),tn).then(function(){or.debug("sendData ok")}).catch(function(sn){or.error("Error on sendData",sn),qt()})})}},{key:"sendAnswer",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isOnline()||or.warn("sendRequest() - contact "+this.getUsername()+" does not seem to be connected."),new Promise(function(Kt,qt){var en=Ut;en.apiRTCAnswer=!0,en.answerType=Ct,Gr.sendData(It.getId(),en).then(function(){Kt()}).catch(function(tn){or.error("Error on sendData",tn),qt()})})}},{key:"sendDataAnswer",value:function(Ct,It,Ut){this.getContact(Ct.senderId).sendAnswer(It,Ut).then(function(){or.debug("sendAnswer OK")}).catch(function(Kt){or.error("Error on sendAnswer",Kt)})}},{key:"manageApiRTCStreamRequest",value:function(Ct,It){var Ut=this;or.debug("manageApiRTCStreamRequest : ",Ct);var Kt=Ct.data.requestType,qt={};qt.requestUUID=Ct.data.uuid,qt.result="NOK";var en=null;if((en=apiRTC.userAgentInstance.getStreamWithRoomNameAndCallId(It.getName(),Ct.data.streamId))==="NOT_FOUND")qt.reason="STREAM_NOT_FOUND",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt);else if(Kt!==void 0)switch(Kt){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:en.disableAudio().then(function(){qt.result="OK",Ut.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_DISABLE_AUDIO",Ut.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_AUDIO_ANSWER,qt)});break;case et.g.CONTACT_ENABLE_AUDIO_REQUEST:en.enableAudio().then(function(){qt.result="OK",Ut.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_ENABLE_AUDIO",Ut.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_AUDIO_ANSWER,qt)});break;case et.g.CONTACT_DISABLE_VIDEO_REQUEST:en.disableVideo().then(function(){qt.result="OK",Ut.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_DISABLE_VIDEO",Ut.sendDataAnswer(Ct,et.g.CONTACT_DISABLE_VIDEO_ANSWER,qt)});break;case et.g.CONTACT_ENABLE_VIDEO_REQUEST:en.enableVideo().then(function(){qt.result="OK",Ut.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)}).catch(function(){qt.reason="ERROR_ON_ENABLE_VIDEO",Ut.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)});break;default:or.error("not a defined apiRTC request :",Kt),qt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)}else or.error("requestType is undefined :",Kt),qt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,qt)}},{key:"manageApiRTCRequest",value:function(Ct,It){or.debug("manageApiRTCRequest : ",Ct);var Ut=Ct.data.requestType,Kt={};if(Kt.requestUUID=Ct.data.uuid,Kt.result="NOK",Ut!==void 0)switch(Ut){case et.g.CONTACT_DISABLE_AUDIO_REQUEST:case et.g.CONTACT_ENABLE_AUDIO_REQUEST:case et.g.CONTACT_DISABLE_VIDEO_REQUEST:case et.g.CONTACT_ENABLE_VIDEO_REQUEST:this.manageApiRTCStreamRequest(Ct,It);break;default:or.error("not a defined apiRTC request :",Ut),Kt.reason="ERROR_ON_REQUESTTYPE",this.sendDataAnswer(Ct,et.g.CONTACT_ENABLE_VIDEO_ANSWER,Kt)}}},{key:"sendMessage",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isOnline()||or.warn("sendMessage() - contact "+this.getUsername()+" does not seem to be connected.");var Kt=null,qt=function(){return new Promise(function(en,tn){Ut.hasOwnProperty("session")?It.fetchWebSessionInformation(Ut.session).then(function(sn){en({save:!0,cloudSessionId:sn.webSessionId,apiRTCId:Ut.session.getId()})}).catch(tn):en({})})};return new Promise(function(en,tn){return typeof Ct!="string"?tn(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is not instance of string",or)):Ct===""?tn(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",or)):void qt().then(function(sn){Kt=sn,or.info("sendMessage() - with options :",Kt),Gr.sendMessage(It.getId(),Ct,Kt).then(function(Sn){It.addMessageToHistory(Ct,Math.floor(Date.now()/1e3),Sn,!1),en(Sn)}).catch(function(Sn){switch(Sn){case et.g.ERROR_TIMED_OUT:tn(Dt.g.createError(et.g.ERROR_TIMED_OUT,"sendMessage() - Data transmission timed out ",or));break;case et.g.ERROR_NOT_FOUND:tn(Dt.g.createError(et.g.ERROR_NOT_FOUND,"sendMessage() - Contact was not found ",or));break;default:tn(Dt.g.createError(et.g.ERROR_OTHER,"sendMessage() - Data transmission timed out ",or))}})},function(sn){tn(Dt.g.createError(et.g.ERROR_OTHER,"sendMessage() - Error occured when fetching options for sending message",or))})})}},{key:"inviteTo",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.sendConversationInvitation(Ct,It)}},{key:"sendConversationInvitation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ct instanceof $o?Ct.sendInvitation(this,It):(or.error("sendConversationInvitation() - Parameter is not a conversation"),null)}},{key:"sendWhiteboardInvitation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gr.whiteBoardClient.roomId!==Ct&&(Gr.whiteBoardClient.leaveRoom(),Gr.whiteBoardClient.start(),Gr.whiteBoardClient.joinRoom(Ct));var Ut=It.context?It.context:null,Kt={};It.cloudConversationId&&(Kt.convId=It.cloudConversationId),Gr.whiteBoardClient.inviteInRoom(Ct,this.getId(),Ut,Kt);var qt=new Do(this,null);return qt.id="wb-"+Ct,qt.type="whiteboard",qt}},{key:"call",value:function(Ct){var It,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{mediaTypeForOutgoingCall:"VIDEO",record:!1};or.debug("call()"),this.isOnline()||or.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var Kt={},qt=Dt.g.assignObject({},Ut),en=!!Ut.hasOwnProperty("audioOnly")&&Ut.audioOnly;Ut.hasOwnProperty("record")&&(qt.record!==void 0&&qt.record!==null||(qt.record=Ut.record)),Ct!==null&&Ct instanceof so&&(qt.userMediaStreamId=Ct.userMediaStreamId,Ct.isScreensharing()&&(qt.forceCallType="screenSharing")),qt.cloudConversationId&&(Kt.cloudConvId=qt.cloudConversationId,delete qt.cloudConversationId),It=en?Gr.webRTCClient.callAudio(this.getId(),Kt,qt):Gr.webRTCClient.call(this.getId(),Kt,qt);var tn=Wl.getOrCreateCall(It,this,{isRecorded:qt.record});return tn}},{key:"shareScreen",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.isOnline()||or.warn("call() - contact "+this.getUsername()+" does not seem to be connected.");var It={},Ut=null,Kt=Ct,qt=Ct.captureSourceType;or.warn("call() - contact "+this.getUsername()+" does not seem to be connected."),Ut=Gr.webRTCClient.shareScreen(this.getId(),It,qt);var en=Wl.getOrCreateCall(Ut,this,{isRecorded:Kt.record});return en}},{key:"startDataChannel",value:function(){if(this.isOnline()||or.warn("startDataChannel() - contact "+this.getUsername()+" does not seem to be connected."),!(ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")){var Ct=Gr.webRTCClient.startDataChannel(this.getId());return Gr.sendData(this.getId(),{callId:Ct,event:et.g.CONTACT_DATACHANNEL_INVITATION}),new ys(Ct,this,{type:et.g.DATACHANNEL_TYPE_SEND})}or.warn("Cannot startDataChannel as it is not supported on Edge")}},{key:"sendFile",value:function(Ct,It){if(this.isOnline()||or.warn("sendFile() - contact "+this.getUsername()+" does not seem to be connected."),ut.Xh==="Edge"&&ut.PR<79&&apiRTC.browserDetails.type!=="chrome")return or.warn("Cannot sendFile as Datachannel is not supported on Edge"),null;var Ut=Gr.webRTCClient.startDataChannel(this.getId()),Kt=this;if(Ut===void 0)return or.warn("Error on startDataChannel"),null;Gr.sendData(this.getId(),{fileInfo:Ct,callId:Ut,event:et.g.CONTACT_SEND_FILEINFO_IDENTIFIER}),Gr.onEvent("sendDataChannelOpen",function en(tn){or.debug("sendFile() - DataChannel open",tn.detail),tn.detail.callId.toString()===Ut.toString()&&(Gr.webRTCClient.sendDataWithCallId(Ut,{file:It,name:Ct.name,type:Ct.type},function(sn){or.trace("sendFile() - progress : ",sn);var Sn={uuid:sn.uuid,fileSize:sn.fileSize,remainingSize:sn.remainingSize,percentage:sn.percentage,sendChunkNb:sn.sendChunkNb,transferDuration:sn.transferDuration,lastPacket:sn.lastPacket};zt.get(Kt).emit("fileTransferProgress",{fileInfo:Ct,transferInformation:Sn}),sn.transferEnded&&zt.get(Kt).emit("fileSentSuccessfully",{fileInfo:Ct,transferInformation:Sn})}),Gr.removeEventListener("sendDataChannelOpen",en))}),this.fileTransfers.push(Ut.toString());var qt=new Do(this,null);return qt.id=Ut.toString(),qt.type="sendFile",qt.on("response",function(){qt.getStatus()!==et.g.INVITATION_STATUS_ACCEPTED&&or.log("sendFile() - invitation has not been accepted, cleaning listeners")}),qt}},{key:"pushMedia",value:function(Ct,It){var Ut=this,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(qt,en){Ut.fetchWebSessionInformation(It).then(function(tn){return Kt.token=It.token,es.pushConversationMedia(tn.conversationId,Ct,Gr.getActiveApiKey(),Kt)}).then(function(tn){Gr.sendData(Ut.getId(),{event:et.g.CONTACT_NEW_MEDIA_IDENTIFIER,media:{url:tn.url,id:tn.id}}),qt({url:tn.url,id:tn.id})}).catch(function(tn){en(Dt.g.createError(et.g.ERROR_OTHER,"pushMedia() - failed to push media",or))})})}},{key:"fetchMediaList",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return or.debug("fetchMediaList()"),new Promise(function(Kt,qt){It.fetchWebSessionInformation(Ct).then(function(en){return Ut.token=Ct.getToken(),es.getConversationMediaList(en.conversationId,Gr.getActiveApiKey(),Ut)}).then(Kt).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"getMediaList() - failed to get media list",or))})})}},{key:"sendEventCenterDataRequest",value:function(){return this.sendCustomEvent(et.g.CONTACT_EVENTCENTER_DATA_REQUEST)}},{key:"getContact",value:function(Ct){return zr.getActiveSession().getOrCreateContact(Ct)}},{key:"sendToContactRemoteStreamError",value:function(Ct,It,Ut){or.debug("sendToContactRemoteStreamError",Ct,It,Ut),It.sendCustomEvent(et.g.CONTACT_GET_REMOTE_ERROR,{callId:Ut.callId,streamId:Ut.streamId,timeout:Ut.timeout,message:Ct})}},{key:"sendRemoteAccessInvitation",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){if(It.isOnline()||or.warn("sendRemoteAccessInvitation() - contact "+It.getUsername()+" does not seem to be connected."),apiRTC.session.remoteAccessInvitation!==null)return or.warn("sendRemoteAccessInvitation() already ongoing"),qt(new Error("sendRemoteAccessInvitation() already ongoing"));var en=new jp(It,Ct,Ut);apiRTC.session.remoteAccessInvitation=en,en.type=et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER;var tn={event:et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER,invitationId:en.id,roomname:en.conversation._getTechnicalName(),sendTime:en.sendTime};en.send(tn).then(function(){Kt(en)}).catch(function(sn){return or.error("Contact#sendRemoteAccessInvitation send error:",sn),qt(new Error(sn))})})}}],xt=[{key:"getAvailableEvents",value:function(){return Wp}}],Qt&&Mu($t.prototype,Qt),xt&&Mu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un);function Hl(Wt){return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Hl(Wt)}function Bp(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function zl(Wt,$t){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},zl(Wt,$t)}function Vp(Wt,$t){if($t&&(Hl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Ms(Wt){return Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ms(Wt)}var co=ft.Y.get("ConversationCall"),Vr=In.get(),Gl=function(Wt){(function(Xt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");Xt.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:Xt,writable:!0,configurable:!0}}),Object.defineProperty(Xt,"prototype",{writable:!1}),Ct&&zl(Xt,Ct)})(pn,Wt);var $t,Qt,xt,Bt,dn=(xt=pn,Bt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Xt,Ct=Ms(xt);if(Bt){var It=Ms(this).constructor;Xt=Reflect.construct(Ct,arguments,It)}else Xt=Ct.apply(this,arguments);return Vp(this,Xt)});function pn(Xt,Ct,It){var Ut;return function(Kt,qt){if(!(Kt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,pn),(Ut=dn.call(this,co)).conversation=Xt,Ut.callId=Ct,Ut.stream=It,Ut}return $t=pn,Qt=[{key:"getConversation",value:function(){return this.conversation}},{key:"getCallId",value:function(){return this.callId}},{key:"getStream",value:function(){return this.stream}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"isStreamed",value:function(){return!!this.streamingStatus}},{key:"getStreamingInfo",value:function(){return this.isStreamed()?this.streamingStatus:null}},{key:"startRecordingPublishedStream",value:function(Xt){var Ct=this;return Xt||(Xt={}),new Promise(function(It,Ut){if(Ct.asyncCallbacks)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - busy",co));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(Vr.removeEventListener("error",Ct.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - timeout",co))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),Ct.asyncCallbacks.error=function(tn){if(String(tn.detail.convId)===Ct.conversation.getCloudConversationId()&&tn.detail.callId===Ct.callId&&tn.detail.errorCode.indexOf("START_RECORD")>=0)return Ct.asyncCallbacks&&(Vr.removeEventListener("error",Ct.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"startRecordingPublishedStream() - "+tn.detail.errorInfo,co))},Ct.asyncCallbacks.recordingStarted=function(tn){if(String(tn.detail.convId)===Ct.conversation.getCloudConversationId()&&tn.detail.callId===Ct.callId){Ct.asyncCallbacks&&(Vr.removeEventListener("error",Ct.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var sn=Dt.g.parseRecordingEvent("MCURecordingStarted",tn.detail);return It(sn)}},Vr.onEvent("error",Ct.asyncCallbacks.error),Vr.onEvent("MCURecordingStarted",Ct.asyncCallbacks.recordingStarted);var Kt="AUDIO-VIDEO";Xt.audioOnly===!0?Kt="AUDIO-ONLY":Xt.videoOnly===!0&&(Kt="VIDEO-ONLY");var qt="userStream";Dt.g.isPropertyTypeof(Xt,"customIdInFilename","string")&&(qt=Xt.customIdInFilename);var en={};Dt.g.isPropertyTypeof(Xt,"data","object")&&(en=Object.assign({},Xt.data)),Dt.g.isPropertyTypeof(Xt,"ttl","number")&&Xt.ttl>0&&(en.ttl=Xt.ttl),Vr.webRTCClient.startRecording(Kt,qt,Ct.conversation.getCloudConversationId(),Ct.callId,en)})}},{key:"stopRecordingPublishedStream",value:function(){var Xt=this;return new Promise(function(Ct,It){if(Xt.asyncCallbacks)return It(Dt.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - busy",co));Xt.asyncCallbacks={},Xt.asyncCallbacks.timeoutId=setTimeout(function(){return Xt.asyncCallbacks&&(Vr.removeEventListener("error",Xt.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStopped",Xt.asyncCallbacks.recordingStopped),delete Xt.asyncCallbacks),Ct(Xt.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Xt.asyncCallbacks.error=function(Ut){if(String(Ut.detail.convId)===Xt.conversation.getCloudConversationId()&&Ut.detail.callId===Xt.callId&&Ut.detail.errorCode.indexOf("STOP_RECORD")>=0)return Xt.asyncCallbacks&&(Vr.removeEventListener("error",Xt.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStopped",Xt.asyncCallbacks.recordingStopped),clearTimeout(Xt.asyncCallbacks.timeoutId),delete Xt.asyncCallbacks),It(Dt.g.createError(et.g.ERROR_OTHER,"stopRecordingPublishedStream() - "+Ut.detail.errorInfo,co))},Xt.asyncCallbacks.recordingStopped=function(Ut){if(String(Ut.detail.convId)===Xt.conversation.getCloudConversationId()&&Ut.detail.callId===Xt.callId){Xt.asyncCallbacks&&(Vr.removeEventListener("error",Xt.asyncCallbacks.error),Vr.removeEventListener("MCURecordingStopped",Xt.asyncCallbacks.recordingStopped),clearTimeout(Xt.asyncCallbacks.timeoutId),delete Xt.asyncCallbacks);var Kt=Dt.g.parseRecordingEvent("MCURecordingStopped",Ut.detail);return Ct(Kt)}},Vr.onEvent("error",Xt.asyncCallbacks.error),Vr.onEvent("MCURecordingStopped",Xt.asyncCallbacks.recordingStopped),Vr.webRTCClient.stopRecording(Xt.callId)})}},{key:"replacePublishedStream",value:function(Xt,Ct){var It=this;return co.debug("replacePublishedStream"),new Promise(function(Ut,Kt){if(Xt===null){if(!Dt.g.isPropertyTypeof(Ct,"getStream","function"))return Kt(new Error("replacePublishedStream() - Cannot replace stream, wrong arguments"));It.stream.publishedInConversations.delete(It.conversation.getName()),It.conversation.conversationPublishedStreams.delete(It.stream.userMediaStreamId);var qt={getUserMediaStreamId:function(){return Ct.getStream().then(function(tn){It.stream=tn,tn.publishedInConversations.set(It.conversation.getName(),It.callId),It.conversation.callIdToStreamId.set(It.callId,tn.userMediaStreamId);var sn={contact:null,isRemote:!1,hasAudio:tn.hasAudio(),hasVideo:tn.hasVideo(),isScreensharing:tn.isScreensharing(),streamId:tn.userMediaStreamId,callId:It.callId};return It.conversation.conversationPublishedStreams.set(tn.userMediaStreamId,sn),tn.userMediaStreamId}).catch(Kt)}};Vr.webRTCClient.webRTCClient.addMedia(It.callId,!0,null,qt).then(function(tn){var sn=function(Sn){if(yo.has(Sn))return yo.get(Sn);var Dn=apiCC.getUserMediaStream(Sn);if(Dn){var nr="audio";return Dn.video===!0&&(nr="video"),new so(Dn.stream,{type:nr,constructor:!0,userMediaStreamId:Dn.userMediaStreamId})}return null}(tn.userMediaStreamId);return sn!==null&&It.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:It.getCallId(),newStreamId:sn.data.id,oldStreamId:tn.oldMediaStreamId}),Ut(sn)}).catch(function(tn){return Kt(new Error("replacePublishedStream() - "+tn))})}else{It.stream.publishedInConversations.delete(It.conversation.getName()),It.conversation.conversationPublishedStreams.delete(It.stream.userMediaStreamId),Vr.webRTCClient.webRTCClient.addMedia(It.callId,!0,Xt.userMediaStreamId).then(function(tn){return It.conversation.sendCustomEvent(et.g.CONTACT_STREAM_UPDATED_INFO,{callId:It.getCallId(),newStreamId:Xt.data.id,oldStreamId:tn.oldMediaStreamId}),Ut(Xt)}).catch(function(tn){return Kt(new Error("replacePublishedStream() - "+tn))}),It.stream=Xt,Xt.publishedInConversations.set(It.conversation.getName(),It.callId),It.conversation.callIdToStreamId.set(It.callId,Xt.userMediaStreamId);var en={contact:null,isRemote:!1,hasAudio:Xt.hasAudio(),hasVideo:Xt.hasVideo(),isScreensharing:Xt.isScreensharing(),streamId:Xt.userMediaStreamId,callId:It.callId};It.conversation.conversationPublishedStreams.set(Xt.userMediaStreamId,en)}})}},{key:"startStreaming",value:function(){var Xt=this,Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(It,Ut){return Xt.asyncCallbacks?Ut(Dt.g.createError(et.g.ERROR_OTHER,"startStreaming() - busy",co)):Vr.webRTCClient.startStreaming(Ct.service,Ct.server,Ct.streamKey,Xt.callId)?(Xt.asyncCallbacks={},Xt.asyncCallbacks.timeoutId=setTimeout(function(){return Xt.asyncCallbacks&&(Vr.removeEventListener("MCUStreamingStarted",Xt.asyncCallbacks.streamingStarted),delete Xt.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"startStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STARTED_DELAY),Xt.asyncCallbacks.streamingStarted=function(Kt){if(Kt.detail.roomName===Xt.conversation._getTechnicalName()&&Kt.detail.callId===Xt.callId){Xt.asyncCallbacks&&(Vr.removeEventListener("MCUStreamingStarted",Xt.asyncCallbacks.streamingStarted),clearTimeout(Xt.asyncCallbacks.timeoutId),delete Xt.asyncCallbacks);var qt=$s("MCUStreamingStarted",Kt.detail);return It(qt)}},void Vr.onEvent("MCUStreamingStarted",Xt.asyncCallbacks.streamingStarted)):Ut(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"startStreaming() - cannot start streaming",co))})}},{key:"stopStreaming",value:function(){var Xt=this;return new Promise(function(Ct,It){return Xt.asyncCallbacks?It(Dt.g.createError(et.g.ERROR_OTHER,"stopStreaming() - busy",co)):Vr.webRTCClient.stopStreaming(Xt.callId)?(Xt.asyncCallbacks={},Xt.asyncCallbacks.timeoutId=setTimeout(function(){return Xt.asyncCallbacks&&(Vr.removeEventListener("MCUStreamingStopped",Xt.asyncCallbacks.streamingStopped),delete Xt.asyncCallbacks),It(Dt.g.createError(et.g.ERROR_OTHER,"stopStreaming() - timeout",co))},et.g.CONVERSATION_STREAMING_STOPPED_DELAY),Xt.asyncCallbacks.streamingStopped=function(Ut){if(Ut.detail.roomName===Xt.conversation._getTechnicalName()&&Ut.detail.callId===Xt.callId){Xt.asyncCallbacks&&(Vr.removeEventListener("MCUStreamingStopped",Xt.asyncCallbacks.streamingStopped),clearTimeout(Xt.asyncCallbacks.timeoutId),delete Xt.asyncCallbacks);var Kt=$s("MCUStreamingStopped",Ut.detail);return Ct(Kt)}},void Vr.onEvent("MCUStreamingStopped",Xt.asyncCallbacks.streamingStopped)):It(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"stopStreaming() - cannot stop streaming",co))})}},{key:"changeStreamPriority",value:function(Xt){var Ct=this;return new Promise(function(It,Ut){return Vr.webRTCClient.changeStreamPriority(Ct.callId,Xt)?(Ct.conversation.changeStreamPriority(Ct.stream.userMediaStreamId,!1,Xt),It()):Ut(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"changeStreamPriority() - cannot change stream priority",co))})}},{key:"updatePublishedStream",value:function(Xt,Ct){var It=this;return new Promise(function(Ut,Kt){if(Xt!=="audio"&&Xt!=="video")return Kt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"updatePublishedStream() - wrong type",co));var qt=Ct?"sendonly":"inactive";return Vr.webRTCClient.webRTCClient.processUpdateStream(It.callId,Xt,qt)?Ut():Kt(Dt.g.createError(et.g.ERROR_OTHER,"updatePublishedStream() - cannot update",co))})}}],Qt&&Bp($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),pn}(un);function Lo(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Pu(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Pu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Pu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function Du(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var no=ft.Y.get("ContactCatalog"),mo=null,Mo={},bo={leftGroup:{},joinedGroup:{},userDataChanged:[]},Ro=function(){function Wt(){if(function(dn,pn){if(!(dn instanceof pn))throw new TypeError("Cannot call a class as a function")}(this,Wt),mo!==null)throw"Cannot construct singleton ContactCatalog";this.contactList=new Map,this.eventEmitter=new dt,mo=this;var Bt=In.get();Bt.onEvent("connectedUsersListUpdate",function(dn){var pn=apiRTC.session.apiCCId.toString(),Xt={};switch(dn.detail.updateReason){case"newConnectionState":if(dn.detail.status==="online"){no.debug("new connection");var Ct,It=Lo(dn.detail.usersList);try{for(It.s();!(Ct=It.n()).done;)(Xt={userId:Ct.value,group:dn.detail.group}).userId.toString()!==pn&&zp(Xt)}catch(Sn){It.e(Sn)}finally{It.f()}}else{no.debug("new disconnection");var Ut,Kt=Lo(dn.detail.usersList);try{for(Kt.s();!(Ut=Kt.n()).done;)Xt={userId:Ut.value,group:dn.detail.group},Mo[Xt.group]===void 0&&(Mo[Xt.group]={}),Xt.userId.toString()!==pn&&(Mo[Xt.group][Xt.userId.toString()]=setTimeout(Hp(Xt),Bt.contactDisconnectionDelay))}catch(Sn){Kt.e(Sn)}finally{Kt.f()}}break;case"userDataUpdate":no.debug("userDataUpdate");var qt,en=Lo(dn.detail.usersList);try{for(en.s();!(qt=en.n()).done;)(Xt={userId:qt.value,group:dn.detail.group}).userId.toString()!==pn&&Nu(Xt)}catch(Sn){en.e(Sn)}finally{en.f()}break;case"callState":no.debug("callState change for user");var tn,sn=Lo(dn.detail.usersList);try{for(sn.s();!(tn=sn.n()).done;)(Xt={userId:tn.value,group:dn.detail.group}).userId.toString()!==pn&&Nu(Xt)}catch(Sn){sn.e(Sn)}finally{sn.f()}break;default:no.warn("default case for updateReason value")}}).onEvent("groupUnsubscribed",function(dn){var pn,Xt=mo.getContacts(dn),Ct=Lo(Xt.keys());try{for(Ct.s();!(pn=Ct.n()).done;){var It=pn.value;Xt.get(It).removeFromGroup(dn)}}catch(Ut){Ct.e(Ut)}finally{Ct.f()}})}var $t,Qt,xt;return $t=Wt,Qt=[{key:"onUpdate",value:function(Bt){this.eventEmitter.on("update",Bt)}},{key:"removeUpdateListener",value:function(Bt){this.eventEmitter.off("update",Bt)}},{key:"getContact",value:function(Bt){return Bt!=null&&this.contactList.has(Bt.toString())?this.contactList.get(Bt.toString()):null}},{key:"getOrCreateContact",value:function(Bt){var dn=null;if(Bt!=null)if(this.contactList.has(Bt.toString()))dn=this.contactList.get(Bt.toString());else try{dn=new No(Bt.toString(),{}),this.contactList.set(Bt.toString(),dn)}catch(pn){no.debug("Contact not added : "+pn)}return dn}},{key:"getContacts",value:function(Bt){if(Bt==null)return this.contactList;var dn,pn=new Map,Xt=Lo(this.contactList.keys());try{for(Xt.s();!(dn=Xt.n()).done;){var Ct=dn.value;this.contactList.get(Ct).inGroup(Bt)&&pn.set(Ct,this.contactList.get(Ct))}}catch(It){Xt.e(It)}finally{Xt.f()}return pn}},{key:"getOnlineContacts",value:function(Bt){var dn=new Map;if(Bt==null){var pn,Xt=Lo(this.contactList.keys());try{for(Xt.s();!(pn=Xt.n()).done;){var Ct=pn.value;this.contactList.get(Ct).isOnline()&&dn.set(Ct,this.contactList.get(Ct))}}catch(qt){Xt.e(qt)}finally{Xt.f()}}else{var It,Ut=Lo(this.contactList.keys());try{for(Ut.s();!(It=Ut.n()).done;){var Kt=It.value;this.contactList.get(Kt).inGroup(Bt)&&this.contactList.get(Kt).isOnline()&&dn.set(Kt,this.contactList.get(Kt))}}catch(qt){Ut.e(qt)}finally{Ut.f()}}return dn}}],xt=[{key:"get",value:function(){return mo===null&&(mo=new Wt),mo}}],Qt&&Du($t.prototype,Qt),xt&&Du($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Hp(Wt){return function(){var $t=Wt.userId.toString();if(no.info("Contact disconnected "+$t+" from "+Wt.group),mo.contactList.has($t)){var Qt=mo.contactList.get($t);if(Qt===void 0)return void no.debug("Contact not exist with userId :",$t);Qt.removeFromGroup(Wt.group),function(xt,Bt){no.debug("updateContactListOnUserDisconnect()"),bo.leftGroup[xt]===void 0&&(bo.leftGroup[xt]=[]),bo.leftGroup[xt].push(Bt),Kl()}(Wt.group,Qt),Mo[Wt.group]!==void 0&&Mo[Wt.group][$t]!==void 0&&delete Mo[Wt.group][$t]}}}function Kl(){Object.keys(bo.leftGroup).length===0&&Object.keys(bo.joinedGroup).length===0&&bo.userDataChanged.length===0||(mo.eventEmitter.emit("update",bo),bo={leftGroup:{},joinedGroup:{},userDataChanged:[]})}function zp(Wt){no.debug("updateContactListOnUserConnection()");var $t=Wt.userId.toString(),Qt=null,xt=apiRTC.session.getConnectedUserInfo($t,"userData");no.debug("userData :",xt);try{Wt.userData=JSON.parse(xt)}catch(Bt){no.warn("userData parse error : "+Bt)}if(mo.contactList.has($t))Qt=mo.contactList.get(Wt.userId),Io.equals(Qt.userData,Wt.userData)||(Qt.userData=new Io(Wt.userData),bo.userDataChanged.push(Qt));else{try{Qt=new No($t,Wt.userData),mo.contactList.set($t,Qt)}catch(Bt){no.debug("Contact not added : "+Bt)}Qt=mo.contactList.get($t)}Qt!==void 0?(Mo[Wt.group]!==void 0&&Mo[Wt.group][$t]!==void 0&&(clearTimeout(Mo[Wt.group][$t]),delete Mo[Wt.group][$t]),Qt.inGroup(Wt.group)||(Qt.addToGroup(Wt.group),bo.joinedGroup[Wt.group]===void 0&&(bo.joinedGroup[Wt.group]=[]),bo.joinedGroup[Wt.group].push(Qt)),Kl()):no.debug("Contact not exist with userId :",$t)}function Nu(Wt){no.debug("updateContactListOnUserDataUpdate()");var $t=Wt.userId.toString(),Qt=mo.contactList.get(Wt.userId);if(Qt!==void 0){var xt=apiRTC.session.getConnectedUserInfo($t,"userData");no.debug("userData :",xt);try{Wt.userData=JSON.parse(xt)}catch(Bt){no.warn("userData parse error : "+Bt)}Io.equals(Qt.userData,Wt.userData)||(Qt.userData=new Io(Wt.userData),bo.userDataChanged.push(Qt)),Kl()}else no.debug("Contact not exist with userId :",$t)}function xs(Wt){return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},xs(Wt)}function uo(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Lu(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Lu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Lu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function Gp(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Uu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Yl(Wt,$t){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},Yl(Wt,$t)}function Kp(Wt,$t){if($t&&(xs($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gr(Wt)}function gr(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ps(Wt){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ps(Wt)}var zn=ft.Y.get("Conversation"),ir=In.get(),Eo=new(Go()),ro=Ro.get(),Yp=["adaptationTriggered","audioAmplitude","availableStreamsUpdated","bandwidthLimited","callStatsUpdate","compositeListChanged","contactJoined","contactJoinedWaitingRoom","contactLeft","contactLeftWaitingRoom","cpuLimited","customEvent","data","disconnectionWarning","entryAllowed","entryDenied","error","hangup","joined","left","localStreamUpdated","message","messageNotDelivered","moderatorConnected","newMediaAvailable","newWhiteboardSession","participantEjected","persistentDataUpdated","pointerLocationChanged","pointerSharingEnabled","recordingAvailable","recordingStarted","recordingStopped","remoteStreamUpdated","replayListChanged","roomModeChanged","simulcastFeedChanged","slowLink","streamAdded","streamListChanged","streamRemoved","streamingStarted","streamingStopped","transferPending","transferBegun","transferEnded","transferProgress","whiteboardRoomMemberUpdate","videoQualityChanged","waitingForModeratorAcceptance","remoteStreamIdUpdated"],ju=new Set(["CHAT","CALL","GROUP_CHAT","WEBCONF","REPORT","REPORT_PART","TICKET","EVENT","OTHER","BOT"]),qp=new Set(["audioSent","videoSent","audioReceived","videoReceived","quality"]),Jp=new Set(["CALL_ABORTED","SET_LOCAL_DESCRIPTION_FAILURE","SET_REMOTE_DESCRIPTION_FAILURE"]),ts=new WeakMap,ns=new WeakMap,Ko=new WeakMap,Po=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Ao=new WeakMap,wo=new WeakMap,Jl=new WeakMap,Xl=new WeakMap,Ls=new WeakMap,Us=new WeakMap,js=new WeakMap,$o=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&Yl(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ps(Bt);if(dn){var Ut=Ps(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return Kp(this,Ct)});function Xt(Ct){var It,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gp(this,Xt),It=pn.call(this,zn),zn.debug("Create Conversation"),Ct==null?ts.set(gr(It),Dt.g.guid().toString()):ts.set(gr(It),Ct.toString()),ns.set(gr(It),"OTHER"),It.active=!Object.prototype.hasOwnProperty.call(Ut,"active")||typeof Ut.active!="boolean"||Ut.active,It.meshModeEnabled=Ut.meshModeEnabled===!0,It.meshOnlyEnabled=Ut.meshOnlyEnabled===!0,It.moderationEnabled=Ut.moderationEnabled===!0,It.moderator=Ut.moderator===!0,It.conversationCalls=new Map,It.callIdToStreamId=new Map,It.token=null,It.sessionId=null,It.webconfId=null,It.conversationStreams=new Map,It.conversationPublishedStreams=new Map,It.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,It.status=et.g.CONVERSATION_STATUS_NOT_JOINED,It.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,It.pointerSharingState=et.g.STATE_IDLE,It.pointerSharingAutoInvite=!1,It.pgroupWaitingRoomSubscribedTo=!1,Ds.set(gr(It),null),Ns.set(gr(It),null),Ao.set(gr(It),new Map),Po.set(gr(It),null),wo.set(gr(It),null),Ko.set(gr(It),{}),Ls.set(gr(It),new Map),js.set(gr(It),null),Us.set(gr(It),null),It.transferCallIds=[],It.uploadCap=null,It.downloadCap=null,It.reservedStreams=[];var Kt={contactCatalog:{}};for(var qt in Kt.contactCatalog.onUpdate=function(tn){zn.debug("onUpdate: contactList",tn);var sn=It._getTechnicalName();if(tn.joinedGroup[sn]!==void 0){var Sn,Dn=uo(tn.joinedGroup[sn]);try{for(Dn.s();!(Sn=Dn.n()).done;){var nr=Sn.value;zn.debug(nr.getUsername()+" joined conversation "+It.getName()),zt.get(gr(It)).emit("contactJoined",nr),It.pointerSharingState===et.g.STATE_ACTIVE&&It.pointerSharingAutoInvite===!0&&ir.pointerSharingClient.inviteInRoom(sn,nr.getId())}}catch(sr){Dn.e(sr)}finally{Dn.f()}}else zn.debug("not an event joinedGroup for conversation");if(tn.leftGroup[sn]!==void 0){var ar,fr=uo(tn.leftGroup[sn]);try{for(fr.s();!(ar=fr.n()).done;){var vr=ar.value;zn.debug(vr.getUsername()+" left conversation "+It.getName()),zt.get(gr(It)).emit("contactLeft",vr)}}catch(sr){fr.e(sr)}finally{fr.f()}}else zn.debug("not an event leftGroup for conversation");if(It.getRole()===et.g.CONVERSATION_ROLE_MODERATOR){var Pr,Zr=ro.getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+sn),na=uo(Ls.get(gr(It)).keys());try{for(na.s();!(Pr=na.n()).done;){var Vo=Pr.value;if(!Zr.has(Vo)){var ur=ro.getContact(Vo);ur!==null&&(zn.debug(ur.getUsername()+" left waiting room "+It.getName()),zt.get(gr(It)).emit("contactLeftWaitingRoom",ur))}}}catch(sr){na.e(sr)}finally{na.f()}Zr.forEach(function(sr,Or){Ls.get(gr(It)).has(Or)||sr===null||(zn.debug(sr.getUsername()+" joined waiting room "+It.getName()),zt.get(gr(It)).emit("contactJoinedWaitingRoom",sr),ir.sendData(Or,{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:sn}).catch(function(xr){var Er=Dt.g.createError(xr,"Notification not delivered",zn);zt.get(gr(It)).emit("messageNotDelivered",{error:Er,contact:sr,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})}))}),Ls.set(gr(It),Zr)}},ro.onUpdate(Kt.contactCatalog.onUpdate),zt.get(gr(It)).on("contactJoined",function(tn){It.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&ir.sendData(tn.getId(),{event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected",roomname:It._getTechnicalName()}).catch(function(sn){var Sn=Dt.g.createError(sn,"Notification not delivered",zn);zt.get(gr(It)).emit("messageNotDelivered",{error:Sn,contact:tn,event:et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:"conversationModeratorConnected"})})}),Kt.apiRTCManager={},Kt.apiRTCManager.receiveData=function(tn){var sn=tn.detail.data;if(sn!==void 0){if(sn.roomname===It._getTechnicalName()){var Sn=ro.getOrCreateContact(tn.detail.senderId);if(sn.event)switch(sn.event){case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;zt.get(gr(It)).emit("data",{sender:Sn,content:sn.content});break;case et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;zn.info("New media available in conversation",sn.media),zt.get(gr(It)).emit("newMediaAvailable",{sender:Sn,media:sn.media});break;case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:if(It.status!==et.g.CONVERSATION_STATUS_JOINED)break;It.updateData();break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:zt.get(gr(It)).emit("moderatorConnected",Sn);break;case et.g.CONVERSATION_CLOSED_IDENTIFIER:sn.instanceId===It.getInstanceId()&&(zn.info("Conference "+It.getName()+" has been closed..."),zt.get(gr(It)).emit("closed"),It.leave());break;case et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER:if(sn.access===void 0||sn.access===null){zn.error("Conversation join answer has no access data");break}zt.get(gr(It)).emit(sn.access?"entryAllowed":"entryDenied");break;case et.g.CONTACT_STREAM_UPDATED_INFO:zn.debug("CONTACT_STREAM_UPDATED_INFO :",tn.detail.data);var Dn={callId:tn.detail.data.callId,newStreamId:tn.detail.data.newStreamId,oldStreamId:tn.detail.data.oldStreamId};zt.get(gr(It)).emit("remoteStreamIdUpdated",Dn);break;default:zt.get(gr(It)).emit("customEvent",{event:sn.event,content:sn,sender:Sn})}else if(sn.command==="new_snapshot"){if(It.status!==et.g.CONVERSATION_STATUS_JOINED)return;zn.info("New media available in conversation",sn.value.snapshot),zt.get(gr(It)).emit("newMediaAvailable",{sender:Sn,media:sn.value.snapshot})}else zn.debug("Unprocessed conversation message",sn)}}else zn.debug("Received data undefined, leaving process")},Kt.apiRTCManager.receiveGroupChatMessage=function(tn){if((It.status===et.g.CONVERSATION_STATUS_JOINED||It.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED)&&tn.detail.groupChatId.toString()===It._getTechnicalName()){var sn={sender:ro.getOrCreateContact(tn.detail.senderId),sender_id:tn.detail.senderId,content:tn.detail.message,time:new Date};Dt.g.isTypeof(tn.detail,"metadata","object")&&(sn.metadata=tn.detail.metadata),zt.get(gr(It)).emit("message",sn)}},Kt.apiRTCManager.receiveRoomMessage=function(tn){if(tn.detail.roomType==="pointerSharing"&&It.pointerSharingState===et.g.STATE_ACTIVE&&tn.detail.message.type==="pointerLocation"&&tn.detail.roomId===It._getTechnicalName()){var sn={sender:ro.getOrCreateContact(tn.detail.senderId),source:tn.detail.message.source,x:tn.detail.message.x,y:tn.detail.message.y};Dt.g.isPropertyTypeof(tn.detail.message,"data","object")&&(sn.data=tn.detail.message.data),zt.get(gr(It)).emit("pointerLocationChanged",sn)}},Kt.apiRTCManager.roomInvitation=function(tn){if(zn.info("roomInvitation event handler ",tn),tn.detail.roomId.toString()===It._getTechnicalName())if(zn.info("roomInvitation for actual conversation",tn),tn.detail.roomType==="whiteBoard"){if(It.status===et.g.CONVERSATION_STATUS_JOINED){var sn=ro.getOrCreateContact(tn.detail.senderId);zt.get(gr(It)).emit("newWhiteboardSession",{sender:sn})}}else tn.detail.roomType==="pointerSharing"&&Ql(gr(It),!1,!0).then(function(){}).catch(function(Sn){})},Kt.apiRTCManager.onFilePending=function(tn){if(It.transferCallIds.includes(tn.detail.callId)){var sn={id:tn.detail.callId,name:tn.detail.name,rank:tn.detail.rank};zt.get(gr(It)).emit("transferPending",sn)}},Kt.apiRTCManager.onFileSending=function(tn){if(It.transferCallIds.includes(tn.detail.callId)){var sn={id:tn.detail.callId,name:tn.detail.name};zt.get(gr(It)).emit("transferBegun",sn)}},Kt.apiRTCManager.onFileProgress=function(tn){if(It.transferCallIds.includes(tn.detail.callId)){var sn={id:tn.detail.callId,name:tn.detail.name,size:tn.detail.fileSize,remBytes:tn.detail.remainingSize,percentage:tn.detail.percentage};zt.get(gr(It)).emit("transferProgress",sn)}},Kt.apiRTCManager.onFileSended=function(tn){var sn=It.transferCallIds.indexOf(tn.detail.callId);if(sn>=0){var Sn={id:tn.detail.callId,name:tn.detail.name};tn.detail.error&&(Sn.error=tn.detail.error),zt.get(gr(It)).emit("transferEnded",Sn),It.transferCallIds.splice(sn,1)}},Kt.apiRTCManager)ir.onEvent(qt,Kt.apiRTCManager[qt]);Jl.set(gr(It),Kt);var en={MCUAvailableStream:function(tn){var sn,Sn=uo(tn.detail.streams);try{for(Sn.s();!(sn=Sn.n()).done;){var Dn=sn.value;if(Dn.room===It._getTechnicalName()){var nr={contact:ro.getOrCreateContact(Dn.attributes.callerId),isRemote:tn.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,isSimulcast:Dn.simulcast===!0,streamId:Dn.id,type:"regular",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(nr.streamId,nr);var ar={listEventType:"added"};Dt.g.assignObject(ar,nr),zt.get(gr(It)).emit("streamListChanged",ar)}}}catch(na){Sn.e(na)}finally{Sn.f()}zn.debug("Nb stream into conversation :"+It.conversationStreams.size);var fr,vr={},Pr=uo(It.conversationStreams.keys());try{for(Pr.s();!(fr=Pr.n()).done;){var Zr=fr.value;vr[Zr]=It.conversationStreams.get(Zr)}}catch(na){Pr.e(na)}finally{Pr.f()}zt.get(gr(It)).emit("availableStreamsUpdated",vr)},MCUAvailableStreamUpdate:function(tn){var sn,Sn=uo(tn.detail.streams);try{for(Sn.s();!(sn=Sn.n()).done;){var Dn=sn.value;if(Dn.room===It._getTechnicalName()){var nr=It.conversationStreams.get(Dn.id);if(nr&&nr.type==="regular"){nr.hasAudio=Dn.audio,nr.hasVideo=Dn.video,nr.isAudioMuted=Dn.audioMuted,nr.isVideoMuted=Dn.videoMuted,nr.descriptor=Dn.attributes.descriptor;var ar={listEventType:"updated"};Dt.g.assignObject(ar,nr),zt.get(gr(It)).emit("streamListChanged",ar),nr.descriptor&&Object.prototype.hasOwnProperty.call(nr.descriptor,"priority")&&It.changeStreamPriority(nr.streamId,!0,nr.descriptor.priority)}}}}catch(na){Sn.e(na)}finally{Sn.f()}zn.debug("Nb stream into conversation :"+It.conversationStreams.size);var fr,vr={},Pr=uo(It.conversationStreams.keys());try{for(Pr.s();!(fr=Pr.n()).done;){var Zr=fr.value;vr[Zr]=It.conversationStreams.get(Zr)}}catch(na){Pr.e(na)}finally{Pr.f()}zt.get(gr(It)).emit("availableStreamsUpdated",vr)},MCUAvailableComposite:function(tn){var sn,Sn=uo(tn.detail.streams);try{for(Sn.s();!(sn=Sn.n()).done;){var Dn=sn.value;if(Dn.room===It._getTechnicalName()){var nr={isRemote:tn.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,streamId:Dn.id,type:"composite",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(nr.streamId,nr);var ar={listEventType:"added"};Dt.g.assignObject(ar,nr),zt.get(gr(It)).emit("compositeListChanged",ar)}}}catch(fr){Sn.e(fr)}finally{Sn.f()}},MCUAvailableReplay:function(tn){var sn,Sn=uo(tn.detail.streams);try{for(Sn.s();!(sn=Sn.n()).done;){var Dn=sn.value;if(Dn.room===It._getTechnicalName()){var nr={contact:ro.getOrCreateContact(Dn.attributes.callerId),isRemote:tn.detail.isRemoteStream,hasAudio:Dn.audio,hasVideo:Dn.video,isAudioMuted:Dn.audioMuted,isVideoMuted:Dn.videoMuted,isScreensharing:Dn.attributes.callType==="screenSharing"||Dn.attributes.callType==="screenSharingWithAudio",isSIP:Dn.sip===!0,streamId:Dn.id,type:"replay",callId:Dn.attributes.callId,descriptor:Dn.attributes.descriptor,context:Dn.context};It.conversationStreams.set(nr.streamId,nr);var ar={listEventType:"added"};Dt.g.assignObject(ar,nr),zt.get(gr(It)).emit("replayListChanged",ar)}}}catch(fr){Sn.e(fr)}finally{Sn.f()}},MCURemoveStream:function(tn){if(It.conversationStreams.has(tn.detail.streamId)){var sn={listEventType:"removed"};Dt.g.assignObject(sn,It.conversationStreams.get(tn.detail.streamId)),sn.type==="regular"?zt.get(gr(It)).emit("streamListChanged",sn):sn.type==="composite"&&zt.get(gr(It)).emit("compositeListChanged",sn),It.conversationStreams.delete(tn.detail.streamId),zn.debug("Nb stream into conversation :"+It.conversationStreams.size);var Sn,Dn={},nr=uo(It.conversationStreams.keys());try{for(nr.s();!(Sn=nr.n()).done;){var ar=Sn.value;Dn[ar]=It.conversationStreams.get(ar)}}catch(fr){nr.e(fr)}finally{nr.f()}zt.get(gr(It)).emit("availableStreamsUpdated",Dn)}else zn.debug("Not a conversation's stream")},remoteStreamAdded:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){zn.info("remoteStreamAdded",tn.detail);var sn=ro.getOrCreateContact(tn.detail.remoteId),Sn=It.callIdToStreamId.get(tn.detail.callId),Dn=Ao.get(gr(It));Dn.has(Sn)&&zt.get(gr(It)).emit("streamRemoved",Dn.get(Sn));var nr=tn.detail.callType==="audio"?"audio":"video",ar=tn.detail.callType==="screenSharing",fr=new so(tn.detail.stream,{type:nr,contact:sn,streamId:Sn,callId:tn.detail.callId,callAudioAvailable:tn.detail.audioIsAvailable,callAudioActive:tn.detail.audioIsActive,callAudioMuted:tn.detail.audioIsMuted,callVideoAvailable:tn.detail.videoIsAvailable,callVideoActive:tn.detail.videoIsActive,callVideoMuted:tn.detail.videoIsMuted,screensharing:ar,constructor:!0});fr.publishedInConversations.set(It.getName(),tn.detail.callId),Ao.get(gr(It)).set(Sn,fr),apiRTC.session.remoteAccessInvitation!==null&&apiRTC.session.remoteAccessInvitation.screenSharingStreamId===Sn?(zn.debug("This is screensharing stream for remoteAccess"),fr.screensharingRemoteAccessStream=!0,apiRTC.session.remoteAccessInvitation.setRemoteAccessStream(fr)):zt.get(gr(It)).emit("streamAdded",fr)}},remoteStreamRemoved:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn=Ao.get(gr(It));Sn.has(sn)&&(zt.get(gr(It)).emit("streamRemoved",Sn.get(sn)),Sn.delete(sn))}},roomMemberUpdate:function(tn){zn.info("roomMemberUpdate event handler ",tn);var sn,Sn=[],Dn=uo(tn.detail.contactList);try{for(Dn.s();!(sn=Dn.n()).done;){var nr=sn.value;Sn.push(ro.getOrCreateContact(nr.contactId))}}catch(ar){Dn.e(ar)}finally{Dn.f()}tn.detail.roomType==="whiteBoard"&&(zn.info("Received whiteboard room member update"),zt.get(gr(It)).emit("whiteboardRoomMemberUpdate",{contacts:Sn,roomId:tn.detail.roomId,status:tn.detail.status}))},slowLink:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn};tn.detail.advice&&(Sn.advice=tn.detail.advice),zt.get(gr(It)).emit("slowLink",Sn)}},videoQualityChanged:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,hint:tn.detail.hint,profileType:tn.detail.profileType};tn.detail.bitrate&&(Sn.bitrate=tn.detail.bitrate),tn.detail.width&&tn.detail.height&&(Sn.width=tn.detail.width,Sn.height=tn.detail.height),tn.detail.frameRate&&(Sn.frameRate=tn.detail.frameRate),zt.get(gr(It)).emit("videoQualityChanged",Sn)}},simulcastFeedChanged:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,simulcast:tn.detail.simulcast};zt.get(gr(It)).emit("simulcastFeedChanged",Sn)}},localStreamUpdated:function(tn){if(tn.detail.onCall&&It.callIdToStreamId.has(tn.detail.callId)){var sn={callId:tn.detail.callId,streamId:tn.detail.userMediaStreamId,audio:tn.detail.audioIsAvailable&&tn.detail.audioIsActive,audioMuted:tn.detail.audioIsMuted,audioSilent:tn.detail.audioIsSilent,video:tn.detail.videoIsAvailable&&tn.detail.videoIsActive,videoMuted:tn.detail.videoIsMuted,videoSilent:tn.detail.videoIsSilent,cause:tn.detail.cause};zt.get(gr(It)).emit("localStreamUpdated",sn)}},remoteStreamUpdated:function(tn){var sn=tn.detail,Sn=sn.callId,Dn=sn.cause;if(It.callIdToStreamId.has(Sn)&&(Dn==="adaptation"||Dn==="userAction")){var nr={callId:Sn,streamId:It.callIdToStreamId.get(Sn),audio:tn.detail.audioIsAvailable&&tn.detail.audioIsActive,audioMuted:tn.detail.audioIsMuted,audioSilent:tn.detail.audioIsSilent,video:tn.detail.videoIsAvailable&&tn.detail.videoIsActive,videoMuted:tn.detail.videoIsMuted,videoSilent:tn.detail.videoIsSilent,cause:Dn};setTimeout(function(){zt.get(gr(It)).emit("remoteStreamUpdated",nr)})}},MCURecordingStarted:function(tn){if(tn.detail.roomName===It._getTechnicalName()){var sn=Dt.g.parseRecordingEvent("MCURecordingStarted",tn.detail);if(sn.callId==="COMPOSITE")It.recordingStatus=sn;else{var Sn=It.conversationCalls.get(sn.callId);Sn&&(Sn.recordingStatus=sn)}zt.get(gr(It)).emit("recordingStarted",sn)}},MCURecordingStopped:function(tn){if(tn.detail.roomName===It._getTechnicalName()){var sn=Dt.g.parseRecordingEvent("MCURecordingStopped",tn.detail);if(sn.callId==="COMPOSITE")delete It.recordingStatus;else{var Sn=It.conversationCalls.get(sn.callId);Sn&&delete Sn.recordingStatus}zt.get(gr(It)).emit("recordingStopped",sn)}},MCURecordedStreamsAvailable:function(tn){if(tn.detail.roomName===It._getTechnicalName()){var sn=Dt.g.parseRecordingEvent("MCURecordedStreamsAvailable",tn.detail);zt.get(gr(It)).emit("recordingAvailable",sn)}},MCUStreamingStarted:function(tn){if(tn.detail.roomName===It._getTechnicalName()){var sn=$s("MCUStreamingStarted",tn.detail),Sn=It.conversationCalls.get(sn.callId);Sn&&(Sn.streamingStatus=sn),zt.get(gr(It)).emit("streamingStarted",sn)}},MCUStreamingStopped:function(tn){if(tn.detail.roomName===It._getTechnicalName()){var sn=$s("MCUStreamingStopped",tn.detail),Sn=It.conversationCalls.get(sn.callId);Sn&&delete Sn.streamingStatus,zt.get(gr(It)).emit("streamingStopped",sn)}},onCallStatsUpdate:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,stats:{}};tn.detail.userId&&(Sn.mesh=!0,Sn.userId=tn.detail.userId,Sn.contact=ro.getOrCreateContact(tn.detail.userId));for(var Dn=0,nr=Object.keys(tn.detail.stats);Dn<nr.length;Dn++){var ar=nr[Dn];qp.has(ar)&&(Sn.stats[ar]=tn.detail.stats[ar])}zt.get(gr(It)).emit("callStatsUpdate",Sn)}},cpuLimited:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,encodeUsagePercent:tn.detail.encodeUsagePercent};zt.get(gr(It)).emit("cpuLimited",Sn)}},bandwidthLimited:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,resolutionChanged:!0};zt.get(gr(It)).emit("bandwidthLimited",Sn)}},audioAmplitude:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn={callId:tn.detail.callId,streamId:sn,amplitude:tn.detail.descriptor.amplitude,isSpeaking:tn.detail.descriptor.isSpeaking,descriptor:{amplitude:tn.detail.descriptor.amplitude,isSpeaking:tn.detail.descriptor.isSpeaking}};zt.get(gr(It)).emit("audioAmplitude",Sn)}},hangup:function(tn){if(It.callIdToStreamId.has(tn.detail.callId)){var sn=It.callIdToStreamId.get(tn.detail.callId),Sn=Ao.get(gr(It));Sn.has(sn)&&(zt.get(gr(It)).emit("streamRemoved",Sn.get(sn)),Sn.delete(sn)),tn.detail.reason!=="restarted"&&tn.detail.reason!=="disconnected"&&tn.detail.reason!=="Broken_by_MCU"&&tn.detail.reason!=="RTC_Setup_Timeout"&&(It.conversationCalls.has(tn.detail.callId)?Bu(gr(It),tn.detail.callId):(It.callIdToStreamId.delete(tn.detail.callId),It.releaseResources(sn,{isRemote:!0,triggerAdaptation:!0})),zt.get(gr(It)).emit("hangup",{from:tn.detail.hangupType,reason:tn.detail.reason,streamId:sn}))}},callRestarting:function(tn){if(It.callIdToStreamId.has(tn.detail.oldCallId)){var sn=It.callIdToStreamId.get(tn.detail.oldCallId);It.callIdToStreamId.delete(tn.detail.oldCallId),It.callIdToStreamId.set(tn.detail.newCallId,sn)}},MCUParticipantEjected:function(tn){if(It._getTechnicalName()===tn.detail.roomId){var sn=wo.get(gr(It));if(tn.detail.clientId===sn.getId())It.leave().catch(function(Dn){zn.error("leave",Dn)}).then(function(){zt.get(gr(It)).emit("participantEjected",{self:!0})});else{var Sn=ro.getOrCreateContact(tn.detail.clientId);zt.get(gr(It)).emit("participantEjected",{self:!1,contact:Sn})}}},MCURoomModeChanged:function(tn){It._getTechnicalName()===tn.detail.roomId&&zt.get(gr(It)).emit("roomModeChanged",{oldMode:tn.detail.oldMode,newMode:tn.detail.newMode,state:tn.detail.state})}};return Xl.set(gr(It),en),zt.get(gr(It)).on("left",function(){It.pgroupWaitingRoomSubscribedTo&&(ir.apiRTCSession.unsubscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+It._getTechnicalName()]),It.pgroupWaitingRoomSubscribedTo=!1),Ds.set(gr(It),null),Ns.set(gr(It),null),wo.set(gr(It),null),js.set(gr(It),null)}),It}return $t=Xt,Qt=[{key:"destroy",value:function(){po.get().deleteConversation(this.getName());var Ct=Jl.get(this);if(Ct){if(Ct.apiRTCManager)for(var It in Ct.apiRTCManager)ir.removeEventListener(It,Ct.apiRTCManager[It]);Ct.contactCatalog&&ro.removeUpdateListener(Ct.contactCatalog.onUpdate),Jl.delete(this)}}},{key:"getStatus",value:function(){return this.status}},{key:"getName",value:function(){return ts.get(this).toString()}},{key:"_getTechnicalName",value:function(){return ts.get(this).toString()}},{key:"getRole",value:function(){return Ds.get(this)}},{key:"getInstanceId",value:function(){return js.get(this)}},{key:"getFriendlyName",value:function(){return null}},{key:"getModerator",value:function(){return Ns.get(this)}},{key:"getType",value:function(){return ns.get(this)}},{key:"setType",value:function(Ct){return!this.isBound()&&!!ju.has(Ct)&&(ns.set(this,Ct),!0)}},{key:"getCloudConversationId",value:function(){var Ct=Po.get(this);return Ct?Ct.toString():null}},{key:"getMedia",value:function(Ct){return new Promise(function(It,Ut){apiRTC.CloudApi.cloudFetchMedia(Ct).then(function(Kt){It(Kt)}).catch(function(Kt){Ut(Kt)})})}},{key:"bind",value:function(Ct){var It=this;Ct||(Ct={});var Ut=Po.get(this);return Ut!==null?Promise.resolve(String(Ut)):new Promise(function(Kt,qt){Fu(It,Ct).then(function(en){Kt(String(en.id))}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_HTTP,"bind() - cannot bind conversation",zn,{fromError:en}))})})}},{key:"isBound",value:function(){return Po.get(this)!==null}},{key:"isGroupChatJoined",value:function(){return this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED}},{key:"joinGroupChat",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED)return Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"joinGroupChat() - cannot join group chat",zn));Ct.bind().then(function(){return new Promise(function(Kt,qt){if(Ct.asyncCallbacks)return qt(Dt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - busy",zn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return ir.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),delete Ct.asyncCallbacks,qt(Dt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - timeout",zn))},et.g.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY),Ct.asyncCallbacks.groupChatMemberUpdate=function(en){if(en.detail.groupChatId===Ct._getTechnicalName()&&en.detail.status==="online"&&function(tn,sn){for(var Sn=tn.length;--Sn>=0;)if(tn[Sn].contactId===sn)return!0;return!1}(en.detail.contactList,ir.getClientId()))return Ct.asyncCallbacks&&(ir.removeEventListener("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Kt()},ir.onEvent("groupChatMemberUpdate",Ct.asyncCallbacks.groupChatMemberUpdate),ir.joinGroupChat(Ct._getTechnicalName())})}).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_JOINED,ir.joinAndSubscribeToPresenceGroup(Ct._getTechnicalName()),It()}).catch(function(Kt){Ut(Dt.g.createError(et.g.ERROR_OTHER,"joinGroupChat() - cannot join group chat",zn,{fromError:Kt}))})})}},{key:"leaveGroupChat",value:function(){var Ct=this;return new Promise(function(It,Ut){return Ct.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED?Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - group chat not joined",zn)):Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED?Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"leaveGroupChat() - webconf active",zn)):void ir.leaveGroupChat(Ct._getTechnicalName()).then(function(){Ct.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED,ir.leaveAndUnsubscribeToPresenceGroup(Ct._getTechnicalName()),It()}).catch(function(Kt){Ut(Dt.g.createError(et.g.ERROR_OTHER,"leaveGroupChat() - cannot leave group chat",zn,{fromError:Kt}))})})}},{key:"isJoined",value:function(){return this.status===et.g.CONVERSATION_STATUS_JOINED}},{key:"isPublishedStream",value:function(Ct){return Ct.publishedInConversations.has(this.getName())}},{key:"publish",value:function(Ct,It){var Ut=this;return It||(It={}),new Promise(function(Kt,qt){if(Ut.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - conversation not joined",zn));if(!(Ct instanceof so))return qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - No stream specified",zn));if(Ut.isPublishedStream(Ct))return qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - Stream is already published in this conversation!",zn));var en={};en.userMediaStreamId=Ct.userMediaStreamId,It!==null&&xs(It)==="object"&&(en.audioOnly=It.audioOnly,en.videoOnly=It.videoOnly,en.private=It.private,en.record=It.record,en.turnServerAddress=It.turnServerAddress,en.profileType=It.profileType,en.priority=It.priority,en.downgradeProfileList=It.downgradeProfileList,en.distributedBroadcastEnabled=It.distributedBroadcastEnabled),Dt.g.isPropertyTypeof(It,"mediaType","string")&&(en.mediaType=It.mediaType,en.audioOnly&&(en.mediaType="AUDIOONLY"),en.videoOnly&&(en.mediaType="VIDEOONLY")),Dt.g.isPropertyTypeof(It,"qos","object")&&(en.qos={},Dt.g.isPropertyTypeof(It.qos,"videoMinBitrate","number")&&(en.qos.videoMinBitrate=It.qos.videoMinBitrate),Dt.g.isPropertyTypeof(It.qos,"videoMinQuality","string")&&(en.qos.videoMinQuality=It.qos.videoMinQuality),Dt.g.isPropertyTypeof(It.qos,"videoStartBitrate","number")&&(en.qos.videoStartBitrate=It.qos.videoStartBitrate),Dt.g.isPropertyTypeof(It.qos,"videoStartQuality","string")&&(en.qos.videoStartQuality=It.qos.videoStartQuality),Dt.g.isPropertyTypeof(It.qos,"videoForbidInactive","boolean")&&(en.qos.videoForbidInactive=It.qos.videoForbidInactive)),Dt.g.isPropertyTypeof(It,"simulcast","object")&&!en.audioOnly&&(en.simulcast={},Dt.g.isPropertyTypeof(It.simulcast,"mode","string")&&["RID","SDP"].indexOf(It.simulcast.mode)>=0&&(en.simulcast.mode=It.simulcast.mode),Dt.g.isPropertyTypeof(It.simulcast,"maxBitrate","number")?en.simulcast.maxBitrate=It.simulcast.maxBitrate:Dt.g.isPropertyTypeof(It.simulcast,"encodings","object")&&(en.simulcast.encodings=Object.assign({},It.simulcast.encodings))),["audioLabels","videoLabels"].forEach(function(fr){Dt.g.isTypeof(It,fr,"array")&&(en[fr]=[],It[fr].forEach(function(vr){Dt.g.isTypeof(vr,"string")&&en[fr].push(vr)}))}),Dt.g.isPropertyTypeof(It,"context","object")&&(en.context=It.context);var tn=null;if(Ct.hasVideo()&&Ut.getNetworkCap({capacity:!0})&&It.profileType&&It.downgradeProfileList){for(var sn=It.downgradeProfileList.length;--sn>=0;)if(It.downgradeProfileList[sn].name===It.profileType){It.downgradeProfileList[sn].bitrate&&(tn=It.downgradeProfileList[sn].bitrate);break}}if(tn){if(!Ut.reserveResources(It.profileType,tn,Ct.userMediaStreamId,!1,It.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:en.audioOnly,control:!0})&&!Ut.disableLowerPriorityVideo(!1,tn,It.priority)){if(!Ct.hasAudio())return qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - not enough bandwidth",zn));en.audioOnly=!0}Ut.reserveResources(It.profileType,tn,Ct.userMediaStreamId,!1,It.priority,{isVideoOnly:!Ct.hasAudio(),isVideoMuted:en.audioOnly})}zn.info("callConfiguration:",en);var Sn=Ct.isScreensharing(),Dn=ir.webRTCClient.publish(Ut.sessionId,Ut.sessionId,Ut.token,en,{},{forceScreenSharingCallType:Sn});if(!Dn)return Ut.releaseResources(Ct.userMediaStreamId),qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - failed to establish call",zn));Ut.conversationCalls.set(Dn,new Gl(Ut,Dn,Ct)),Ct.publishedInConversations.set(Ut.getName(),Dn),Ut.callIdToStreamId.set(Dn,Ct.userMediaStreamId);var nr={contact:null,isRemote:!1,hasAudio:Ct.hasAudio(),hasVideo:Ct.hasVideo(),isScreensharing:Ct.isScreensharing(),streamId:Ct.userMediaStreamId,callId:Dn};Ut.conversationPublishedStreams.set(Ct.userMediaStreamId,nr);var ar={callEstablishedHandler:function(fr){fr.detail.callId.toString()===Dn.toString()&&(ir.removeEventListener("callEstablished",ar.callEstablishedHandler),Ut.removeListener("error",ar.errorHandler),Kt(Ct))}};ir.onEvent("callEstablished",ar.callEstablishedHandler),ar.errorHandler=function(fr){fr.callId===Dn&&(ir.removeEventListener("callEstablished",ar.callEstablishedHandler),Ut.removeListener("error",ar.errorHandler),Ut.releaseResources(Ct.userMediaStreamId),qt(Dt.g.createError(et.g.ERROR_OTHER,"publish() - "+fr.errorInfo,zn)))},Ut.on("error",ar.errorHandler)})}},{key:"unpublish",value:function(Ct,It){if(It||(It={}),Ct instanceof so)if(this.isPublishedStream(Ct)){var Ut=Ct.publishedInConversations.get(this.getName()),Kt=!It.noTriggerAdaptation;Bu(this,Ut,{stream:Ct,triggerAdaptation:Kt}),ir.webRTCClient&&ir.webRTCClient.unpublish(Ut)}else zn.error("unpublish() - Stream is not published to conversation");else zn.error("unpublish() - No stream specified",Ct)}},{key:"getConversationCall",value:function(Ct){if(!Ct)return null;var It=Ct.publishedInConversations.get(this.getName());return It?this.conversationCalls.get(It):null}},{key:"replacePublishedStream",value:function(Ct,It,Ut){var Kt=this;return zn.info("replacePublishedStream"),new Promise(function(qt,en){var tn=Kt.getConversationCall(Ct);if(tn===null)return en(new Error("CALL_NOT_FOUND"));tn.replacePublishedStream(It,Ut).then(function(sn){console.error("replacePublishedStream OK"),qt(sn)}).catch(function(sn){console.error("replacePublishedStream NOK"),en(sn)})})}},{key:"getCallId",value:function(Ct){return Ct.publishedInConversations.get(this.getName())}},{key:"checkAccess",value:function(Ct){var It=this;return Ct||(Ct={}),new Promise(function(Ut,Kt){if(Ct.force!==!0&&It.accessStatus)return Ut(It.accessStatus);Ct.hasOwnProperty("session")||zr.getActiveSession()===null||(Ct.session=zr.getActiveSession()),It.bind(Ct).then(function(qt){return Ct.convId=qt,Eo.checkConferenceAccess(It._getTechnicalName(),ir.getActiveApiKey(),Ct)}).then(function(qt){return qt.access!==et.g.CONVERSATION_ACCESS_GRANTED&&qt.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION&&zn.warn("checkAccess() - unknown access response:",qt.access),qt.role!==et.g.CONVERSATION_ROLE_MODERATOR&&qt.role!==et.g.CONVERSATION_ROLE_CONTRIBUTOR&&qt.role!==et.g.CONVERSATION_ROLE_GUEST&&zn.warn("checkAccess() - unknown role response:",qt.role),qt.hasOwnProperty("webconfId")&&(It.webconfId=qt.webconfId,delete qt.webconfId),It.accessStatus=Dt.g.assignObject({},qt),Ut(It.accessStatus)}).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"checkAccess() - cannot check access",zn,{fromError:qt}))})})}},{key:"join",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return zn.debug("Joining "+this.getName()),new Promise(function(Ut,Kt){if(Ct.status!==et.g.CONVERSATION_STATUS_NOT_JOINED)return Kt(Dt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",zn));It=Object.assign({},It);var qt=!1;It.qualityAdaptationEnabled&&(qt=!0,delete It.qualityAdaptationEnabled);var en=null;It.supportedVideoCodecs&&(en=It.supportedVideoCodecs,delete It.supportedVideoCodecs),Ct.checkAccess(It).then(function(tn){if(!Ct.conference){if(tn.type!=="public")return Promise.reject(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - wrong conference type",zn));if(tn.access!==et.g.CONVERSATION_ACCESS_GRANTED)return Promise.reject(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - access to conference not granted",zn))}return Qp(Ct,tn)}).then(function(tn){if(Ds.set(Ct,tn.role),Ct.status=et.g.CONVERSATION_STATUS_JOINING,Ct.conference)return It.hasOwnProperty("password")&&Us.set(Ct,It.password),Ct.friendlyName=tn.hasOwnProperty("friendlyName")?tn.friendlyName:Ct.friendlyName,js.set(Ct,tn.instanceId),Zp(Ct,wo.get(Ct),ir.getActiveApiKey())}).then(function(){var tn=Ct,sn=function nr(ar){if(zn.debug("joinMCUSessionAnswer",tn._getTechnicalName(),ar.detail),ar.detail.roomId.toString()===tn._getTechnicalName()){if(ar.detail.result&&ar.detail.result.failed){zn.error("Conversation "+tn.getName()+" join failed",ar.detail),this.status=et.g.CONVERSATION_STATUS_NOT_JOINED;var fr=ar.detail.result.reason?ar.detail.result.reason:"join failed";return Kt(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"join() - "+fr,zn))}zn.info("Conversation "+tn.getName()+" joined",ar.detail),ir.removeEventListener("joinMCUSessionAnswer",nr),tn.status=et.g.CONVERSATION_STATUS_JOINED,tn.token=ar.detail.token,tn.sessionId=ar.detail.sessionId,tn.mode=ar.detail.mode,tn.conversationStreams=new Map;var vr=Xl.get(tn);ir.onEvent("MCUAvailableStream",vr.MCUAvailableStream).onEvent("MCUAvailableStreamUpdate",vr.MCUAvailableStreamUpdate).onEvent("MCURemoveStream",vr.MCURemoveStream).onEvent("MCUAvailableComposite",vr.MCUAvailableComposite).onEvent("MCUAvailableReplay",vr.MCUAvailableReplay).onEvent("MCUParticipantEjected",vr.MCUParticipantEjected).onEvent("remoteStreamAdded",vr.remoteStreamAdded).onEvent("remoteStreamRemoved",vr.remoteStreamRemoved).onEvent("roomMemberUpdate",vr.roomMemberUpdate).onEvent("slowLink",vr.slowLink).onEvent("localStreamUpdated",vr.localStreamUpdated).onEvent("remoteStreamUpdated",vr.remoteStreamUpdated).onEvent("simulcastFeedChanged",vr.simulcastFeedChanged).onEvent("MCURecordingStarted",vr.MCURecordingStarted).onEvent("MCURecordingStopped",vr.MCURecordingStopped).onEvent("MCURecordedStreamsAvailable",vr.MCURecordedStreamsAvailable).onEvent("MCUStreamingStarted",vr.MCUStreamingStarted).onEvent("MCUStreamingStopped",vr.MCUStreamingStopped).onEvent("MCURoomModeChanged",vr.MCURoomModeChanged).onEvent("onCallStatsUpdate",vr.onCallStatsUpdate).onEvent("hangup",vr.hangup).onEvent("callRestarting",vr.callRestarting).onEvent("audioAmplitude",vr.audioAmplitude).onEvent("videoQualityChanged",vr.videoQualityChanged).onEvent("cpuLimited",vr.cpuLimited).onEvent("bandwidthLimited",vr.bandwidthLimited),tn.conference&&tn.updateData(),tn.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(ir.apiRTCSession.subscribePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+tn._getTechnicalName()]),tn.pgroupWaitingRoomSubscribedTo=!0),tn.groupChatStatus!==et.g.CONVERSATION_STATUS_NOT_JOINED&&(tn.groupChatStatus=et.g.CONVERSATION_STATUS_NOT_JOINED),zt.get(tn).emit("joined");var Pr={};ar.detail.mode==="mesh"&&(Pr.mode="mesh",ar.detail.meshOnly===!0&&(Pr.meshOnly=!0)),Ut(Pr)}};ir.onEvent("joinMCUSessionAnswer",sn);var Sn={};Sn.convId=Ct.getCloudConversationId(),Ct.meshModeEnabled&&(Sn.meshModeEnabled=Ct.meshModeEnabled),Ct.meshOnlyEnabled&&(Sn.meshOnlyEnabled=Ct.meshOnlyEnabled),Ct.conference||(Ct.moderationEnabled&&(Sn.moderationEnabled=!0),Ct.getRole()===et.g.CONVERSATION_ROLE_MODERATOR&&(Sn.moderator=!0)),qt&&(Sn.qualityAdaptationEnabled=!0),en&&(Sn.supportedVideoCodecs=en);var Dn=ir.webRTCClient.joinMCUSession(Ct._getTechnicalName(),Sn);if(Dn instanceof Error)return ir.removeEventListener("joinMCUSessionAnswer",sn),tn.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Kt(Dt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation :"+Dn.message,zn))}).catch(function(tn){return Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Kt(Dt.g.createError(et.g.ERROR_OTHER,"join() - cannot join conversation",zn,{fromError:tn}))})})}},{key:"cancelJoin",value:function(){return this.cancelJoin0!==null&&typeof this.cancelJoin0=="function"&&this.cancelJoin0()}},{key:"eject",value:function(Ct,It){var Ut=this;return new Promise(function(Kt,qt){if(Ut.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Dt.g.createError(et.g.ERROR_OTHER,"eject() - conference not joined",zn));if(Ut.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"eject() - only moderator can eject a contact",zn));var en={};en.timeoutId=setTimeout(function(){return en&&(ir.removeEventListener("MCUParticipantEjected",en.ejected),en=!1),qt(Dt.g.createError(et.g.ERROR_OTHER,"eject() - timeout",zn))},et.g.CONVERSATION_PARTICIPANT_EJECTION_DELAY),en.ejected=function(tn){if(tn.detail.roomId===Ut._getTechnicalName()&&tn.detail.clientId===Ct.getId())return en&&(clearTimeout(en.timeoutId),ir.removeEventListener("MCUParticipantEjected",en.ejected),en=!1),Kt()},ir.onEvent("MCUParticipantEjected",en.ejected),ir.webRTCClient.ejectParticipantFromMCUSession(Ct.getId(),It)})}},{key:"allowEntry",value:function(Ct,It){var Ut=this;return It||(It={}),new Promise(function(Kt,qt){if(Ut.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Dt.g.createError(et.g.ERROR_OTHER,"allowEntry() - conference not joined",zn));if(!(Ct instanceof No))return qt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"allowEntry() - parameter is not an instance of apiRTC.Contact",zn));if(Ut.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"allowEntry() - only moderator can allow entry to a contact",zn));var en={roomname:Ut._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!0,command:"access",value:{access:!0}};if(It.hasOwnProperty("invitationId")&&(en.invitationId=It.invitationId),It.hasOwnProperty("answer")&&(en.answer=It.answer),ir.sendData(Ct.getId(),en).catch(function(sn){var Sn=Dt.g.createError(sn,"Notification not delivered",zn);zt.get(Ut).emit("messageNotDelivered",{error:Sn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),It.ackEnabled===!0){var tn=setInterval(function(){en.command="access-new",ir.sendData(Ct.getId(),en).catch(function(sn){var Sn=Dt.g.createError(sn,"Notification not delivered",zn);zt.get(Ut).emit("messageNotDelivered",{error:Sn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL);ir.onEvent("receiveData",function sn(Sn){var Dn=ro.getOrCreateContact(Sn.detail.senderId);Sn.detail.hasOwnProperty("data")&&Sn.detail.data.command==="access-ack"&&Sn.detail.data.roomname===Ut._getTechnicalName()&&Dn.getId()===Ct.getId()&&(clearInterval(tn),ir.removeEventListener("receiveData",sn))})}return Kt()})}},{key:"denyEntry",value:function(Ct,It){var Ut=this;return It||(It={}),new Promise(function(Kt,qt){if(Ut.status!==et.g.CONVERSATION_STATUS_JOINED)return qt(Dt.g.createError(et.g.ERROR_OTHER,"denyEntry() - conference not joined",zn));if(!(Ct instanceof No))return qt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"denyEntry() - parameter is not an instance of apiRTC.Contact",zn));if(Ut.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)return qt(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"denyEntry() - only moderator can deny entry to a contact",zn));var en={roomname:Ut._getTechnicalName(),event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!1,command:"access",value:{access:!1}};return It.hasOwnProperty("invitationId")&&(en.invitationId=It.invitationId),It.hasOwnProperty("answer")&&(en.answer=It.answer),It.hasOwnProperty("reason")&&(en.reason=It.reason),ir.sendData(Ct.getId(),en).catch(function(tn){var sn=Dt.g.createError(tn,"Notification not delivered",zn);zt.get(Ut).emit("messageNotDelivered",{error:sn,contact:Ct,event:et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:"access"})}),Kt()})}},{key:"sendJoinRequest",value:function(){var Ct=this;if(this.status===et.g.CONVERSATION_STATUS_WAITING){if(!this.joinRequestIntervalId){var It=Xp(this);It&&(ir.sendData(It,{roomname:this._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:this._getTechnicalName(),sendTime:Date.now(),command:"userWaiting",value:{username:$u()}}).catch(function(Ut){var Kt=Dt.g.createError(Ut,"Notification not delivered",zn);zt.get(Ct).emit("messageNotDelivered",{error:Kt,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting"})}),this.joinRequestIntervalId=setInterval(function(){ir.sendData(It,{roomname:Ct._getTechnicalName(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:Ct._getTechnicalName(),sendTime:Date.now(),command:"userWaiting-new",value:{username:$u()}}).catch(function(Ut){var Kt=Dt.g.createError(Ut,"Notification not delivered",zn);zt.get(Ct).emit("messageNotDelivered",{error:Kt,contact:Ct.getModerator(),event:et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:"userWaiting-new"})})},et.g.CONVERSATION_JOIN_REQUEST_INTERVAL))}}else zn.error("sendJoinRequest() - Not in conversation's waiting room, cannot send join request")}},{key:"leave",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"leave() - webconf not joined",zn));for(var Kt=Xl.get(Ct),qt=0,en=Object.keys(Kt);qt<en.length;qt++){var tn=en[qt];zn.info("Session, removing apiRTCManager event :",tn);var sn=Kt[tn];ir.removeEventListener(tn,sn)}var Sn,Dn=uo(Ct.conversationStreams.keys());try{for(Dn.s();!(Sn=Dn.n()).done;){var nr=Sn.value;zn.trace("Leave() - unsubscribe to "+nr),ir.webRTCClient!==null&&ir.webRTCClient.unsubscribe(nr)}}catch(ar){Dn.e(ar)}finally{Dn.f()}Ql(Ct,!1,!1).then(function(){}).catch(function(ar){}),ir.webRTCClient!==null&&ir.IMClient.leaveGroupChat(Ct._getTechnicalName()),Ct.whiteboardStarted===et.g.CONVERSATION_WHITEBOARD_STARTED&&ir.whiteBoardClient.roomId===Ct._getTechnicalName()&&(ir.whiteBoardClient.leaveRoom(),ir.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED),ir.webRTCClient!==null&&ir.webRTCClient.leaveMCUSession(),Ct.conversationStreams=new Map,Ct.status=et.g.CONVERSATION_STATUS_NOT_JOINED,zt.get(Ct).emit("left"),It()})}},{key:"subscribeToStream",value:function(Ct,It){var Ut=this;if(It||(It={}),zn.debug("subscribeToMedia",Ct),!this.isJoined())return Promise.reject(Dt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - conversation not joined",zn));var Kt={};It.turnServerAddress!==null&&It.turnServerAddress!==void 0&&(Kt.turnServerAddress=It.turnServerAddress),Dt.g.isPropertyTypeof(It,"qos","object")&&(Kt.qos={},Dt.g.isPropertyTypeof(It.qos,"videoForbidInactive","boolean")&&(Kt.qos.videoForbidInactive=It.qos.videoForbidInactive));var qt=Number(Ct),en=ir.webRTCClient.getStreamFromList(qt),tn=this.conversationStreams.get(qt);if(!en||!tn)return Promise.reject(Dt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - no such stream",zn));if(Dt.g.isPropertyTypeof(It,"simulcast","object")){var sn=["high","medium","low"];Kt.simulcast={},It.simulcast.streamQuality&&(sn.indexOf(It.simulcast.streamQuality)>=0?Kt.simulcast.streamQuality=It.simulcast.streamQuality:Kt.simulcast.streamQuality="default"),It.simulcast.streamFrameRate&&(sn.indexOf(It.simulcast.streamFrameRate)>=0?Kt.simulcast.streamFrameRate=It.simulcast.streamFrameRate:Kt.simulcast.streamFrameRate="default")}return new Promise(function(Sn,Dn){var nr="VIDEO";if(tn.hasVideo&&Ut.getNetworkCap({capacity:!0})&&Dt.g.isPropertyTypeof(tn,"descriptor","object")){var ar=tn.descriptor;if(!Ut.reserveResources(ar.profileType,ar.bitrate,qt,!0,ar.priority,{isVideoOnly:!tn.hasAudio,isVideoMuted:It.audioOnly,control:!0})&&!Ut.disableLowerPriorityVideo(!0,ar.bitrate,ar.priority)){if(!tn.hasAudio)return Dn(Dt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - not enough bandwidth",zn));It.audioOnly=!0}Ut.reserveResources(ar.profileType,ar.bitrate,qt,!0,ar.priority,{isVideoOnly:!tn.hasAudio,isVideoMuted:It.audioOnly})}It.audioOnly===!0?nr="AUDIOONLY":It.videoOnly===!0&&(nr="VIDEOONLY");var fr=ir.webRTCClient.subscribe([en],nr,{},Kt,It)[0];if(!fr)return Ut.releaseResources(qt),Dn(Dt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - stream not available",zn));Ut.callIdToStreamId.set(fr,qt),zn.debug("Subscribed to stream "+Ct+" through call "+fr);var vr={streamAddedHandler:function(Pr){Pr.streamId===qt&&(Ut.removeListener("streamAdded",vr.streamAddedHandler),Ut.removeListener("error",vr.errorHandler),Sn(Pr))}};Ut.on("streamAdded",vr.streamAddedHandler),vr.errorHandler=function(Pr){Pr.callId===fr&&(Ut.removeListener("streamAdded",vr.streamAddedHandler),Ut.removeListener("error",vr.errorHandler),Ut.releaseResources(qt),Dn(Dt.g.createError(et.g.ERROR_OTHER,"subscribeToMedia() - "+Pr.errorInfo,zn)))},Ut.on("error",vr.errorHandler)})}},{key:"updateSubscribedStream",value:function(Ct,It){It||(It={});var Ut=Number(Ct);if(!Ao.get(this).has(Ut))return zn.error("updateSubscribedStream() - Conversation stream "+Ct+" does not exist or was not subscribed to"),Promise.reject("wrong streamId");var Kt=Ao.get(this).get(Ut);if(Dt.g.isTypeof(It.simulcast,"object"))return ir.webRTCClient.webRTCClient.updateSimulcastFeedOnCall(Kt.callId,It.simulcast);var qt="VIDEO";return It.audioOnly===!0?qt="AUDIOONLY":It.videoOnly===!0&&(qt="VIDEOONLY"),ir.webRTCClient.webRTCClient.updateMediaTypeOnCall(Kt.callId,qt)}},{key:"unsubscribeToStream",value:function(Ct,It){It||(It={});var Ut=Number(Ct);ir.webRTCClient!==null&&ir.webRTCClient.unsubscribe(Ut);var Kt=!It.noTriggerAdaptation;this.releaseResources(Ct,{isRemote:!0,triggerAdaptation:Kt})}},{key:"subscribeToMedia",value:function(Ct,It){return this.subscribeToStream(Ct,It)}},{key:"unsubscribeToMedia",value:function(Ct){this.unsubscribeToStream(Ct)}},{key:"startRecording",value:function(Ct){var It=this;return Ct||(Ct={}),new Promise(function(Ut,Kt){if(It.status!==et.g.CONVERSATION_STATUS_JOINED)return Kt(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - conversation not joined",zn));if(It.asyncCallbacks)return Kt(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - busy",zn));It.asyncCallbacks={},It.asyncCallbacks.timeoutId=setTimeout(function(){return It.asyncCallbacks&&(ir.removeEventListener("error",It.asyncCallbacks.error),ir.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),delete It.asyncCallbacks),Kt(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - timeout",zn))},et.g.CONVERSATION_RECORDING_STARTED_DELAY),It.asyncCallbacks.error=function(sn){if(String(sn.detail.convId)===It.getCloudConversationId()&&sn.detail.callId==="COMPOSITE"&&sn.detail.errorCode.indexOf("START_RECORD")>=0)return It.asyncCallbacks&&(ir.removeEventListener("error",It.asyncCallbacks.error),ir.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),clearTimeout(It.asyncCallbacks.timeoutId),delete It.asyncCallbacks),Kt(Dt.g.createError(et.g.ERROR_OTHER,"startRecording() - "+sn.detail.errorInfo,zn))},It.asyncCallbacks.recordingStarted=function(sn){if(String(sn.detail.convId)===It.getCloudConversationId()&&sn.detail.callId==="COMPOSITE"){It.asyncCallbacks&&(ir.removeEventListener("error",It.asyncCallbacks.error),ir.removeEventListener("MCURecordingStarted",It.asyncCallbacks.recordingStarted),clearTimeout(It.asyncCallbacks.timeoutId),delete It.asyncCallbacks);var Sn=Dt.g.parseRecordingEvent("MCURecordingStarted",sn.detail);return Ut(Sn)}},ir.onEvent("error",It.asyncCallbacks.error),ir.onEvent("MCURecordingStarted",It.asyncCallbacks.recordingStarted);var qt="AUDIO-VIDEO";Ct.audioOnly===!0?qt="AUDIO-ONLY":Ct.videoOnly===!0&&(qt="VIDEO-ONLY");var en="composite";Dt.g.isPropertyTypeof(Ct,"customIdInFilename","string")&&(en=Ct.customIdInFilename);var tn={};Dt.g.isPropertyTypeof(Ct,"data","object")&&(tn=Dt.g.assignObject({},Ct.data)),["complete","efficient","audioOnly"].indexOf(Ct.mode)>=0?tn.mode=Ct.mode:tn.mode="complete",tn.labelEnabled=Ct.labelEnabled===!0,tn.labelEnabled===!0&&(tn.labels=[],Dt.g.isTypeof(Ct.labels,"array")&&Ct.labels.forEach(function(sn){Dt.g.isTypeof(sn,"string")&&tn.labels.push(sn)})),Dt.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(tn.ttl=Ct.ttl),ir.webRTCClient.startCompositeRecording(qt,en,It.getCloudConversationId(),tn)})}},{key:"stopRecording",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.asyncCallbacks)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopRecording() - busy",zn));Ct.asyncCallbacks={},Ct.asyncCallbacks.timeoutId=setTimeout(function(){return Ct.asyncCallbacks&&(ir.removeEventListener("error",Ct.asyncCallbacks.error),ir.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),delete Ct.asyncCallbacks),It(Ct.recordingStatus)},et.g.CONVERSATION_RECORDING_STOPPED_DELAY),Ct.asyncCallbacks.error=function(Kt){if(String(Kt.detail.convId)===Ct.getCloudConversationId()&&Kt.detail.callId==="COMPOSITE"&&Kt.detail.errorCode.indexOf("STOP_RECORD")>=0)return Ct.asyncCallbacks&&(ir.removeEventListener("error",Ct.asyncCallbacks.error),ir.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks),Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopRecording() - "+Kt.detail.errorInfo,zn))},Ct.asyncCallbacks.recordingStopped=function(Kt){if(String(Kt.detail.convId)===Ct.getCloudConversationId()&&Kt.detail.callId==="COMPOSITE"){Ct.asyncCallbacks&&(ir.removeEventListener("error",Ct.asyncCallbacks.error),ir.removeEventListener("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),clearTimeout(Ct.asyncCallbacks.timeoutId),delete Ct.asyncCallbacks);var qt=Dt.g.parseRecordingEvent("MCURecordingStopped",Kt.detail);return It(qt)}},ir.onEvent("error",Ct.asyncCallbacks.error),ir.onEvent("MCURecordingStopped",Ct.asyncCallbacks.recordingStopped),ir.webRTCClient.stopCompositeRecording()})}},{key:"getContacts",value:function(){zn.debug("getContacts()");var Ct={};if(this.isBound()){var It,Ut=Ro.get().getContacts(this._getTechnicalName()),Kt=uo(Ut.keys());try{for(Kt.s();!(It=Kt.n()).done;){var qt=It.value;Ct[qt]=Ut.get(qt)}}catch(en){Kt.e(en)}finally{Kt.f()}}else zn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsArray",value:function(){zn.debug("getContactsArray()");var Ct=[];if(this.isBound()){var It,Ut=Ro.get().getContacts(this._getTechnicalName()),Kt=uo(Ut.keys());try{for(Kt.s();!(It=Kt.n()).done;){var qt=It.value;Ct.push(Ut.get(qt))}}catch(en){Kt.e(en)}finally{Kt.f()}}else zn.warn("getContacts() - Cannot get contacts as conversation is not joined");return Ct}},{key:"getContactsNumber",value:function(){zn.debug("getContactsNumber()");var Ct=0;return this.isBound()?Ct=Ro.get().getContacts(this._getTechnicalName()).size:zn.warn("getContactsNumber() - Cannot get contacts as conversation is not joined"),Ct}},{key:"getData",value:function(){return zn.debug("getData()"),this.isBound()||zn.warn("getData() - Cannot get most recent data as conversation is not joined, you may want to call Conversation.updateData() instead"),Ko.get(this)}},{key:"setData",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){It.bind().then(function(){return Eo.setConversationData(Po.get(It),JSON.stringify(Ct),ir.getActiveApiKey(),{token:wo.get(It).token})}).then(function(){Ko.set(It,Ct),ir.dataClient.sendDataToGroup(It._getTechnicalName(),{event:et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER,roomname:It._getTechnicalName()}),Ut()}).catch(function(){Kt(Dt.g.createError(et.g.ERROR_OTHER,"setData() - cannot set conversation data",zn))})})}},{key:"updateData",value:function(){var Ct=this;return new Promise(function(It,Ut){(Ct.isBound()?Fu(Ct):Ct.bind()).then(function(){It(),zt.get(Ct).emit("persistentDataUpdated",Ko.get(Ct))}).catch(function(Kt){Ut(Dt.g.createError(et.g.ERROR_OTHER,"updateData() - cannot update conversation data",zn,{fromError:Kt}))})})}},{key:"getAvailableMediaList",value:function(){return zn.warn("Function deprecated, please use Conversation.getAvailableStreamList() instead"),this.getAvailableStreamList()}},{key:"getAvailableStreamList",value:function(){var Ct,It=[],Ut=uo(this.conversationStreams.keys());try{for(Ut.s();!(Ct=Ut.n()).done;){var Kt=Ct.value;It.push(this.conversationStreams.get(Kt))}}catch(qt){Ut.e(qt)}finally{Ut.f()}return It}},{key:"getStreamInfo",value:function(Ct){return this.conversationStreams.get(Ct)}},{key:"getSubscribedStream",value:function(Ct){return Ao.get(this).get(Number(Ct))}},{key:"linkWhiteboardClientToConversation",value:function(){zn.warn("DEPRECATED : linkWhiteboardClientToConversation : no more needed")}},{key:"startNewWhiteboardSession",value:function(Ct,It){var Ut=this;return zn.debug("startNewWhiteboardSession()"),new Promise(function(Kt,qt){Ut.bind().then(function(){if(Ut.asyncCallbacks)return qt(Dt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - busy",zn));if(Ut.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_NOT_STARTED)return Kt();ir.whiteBoardClient.start(),Ut.asyncCallbacks={},Ut.asyncCallbacks.ackHandler=function(tn){var sn=tn.detail;sn.roomId===Ut._getTechnicalName()&&sn.roomType==="whiteBoard"&&(sn.eventType==="roomCreation"&&sn.status==="roomCreated"||sn.eventType==="roomJoined"&&sn.status==="roomJoined")&&(Ut.asyncCallbacks&&(ir.removeEventListener("roomCreation",Ut.asyncCallbacks.ackHandler),ir.removeEventListener("roomJoined",Ut.asyncCallbacks.ackHandler),clearTimeout(Ut.asyncCallbacks.timeoutId),delete Ut.asyncCallbacks),ir.whiteBoardClient.setCanvas(Ct),It!=null&&ir.whiteBoardClient.setUserCursorColor(It),ir.whiteBoardClient.deleteHistory(),Ut.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_STARTED,Kt())},ir.onEvent("roomCreation",Ut.asyncCallbacks.ackHandler),ir.onEvent("roomJoined",Ut.asyncCallbacks.ackHandler),Ut.asyncCallbacks.timeoutId=setTimeout(function(){return Ut.asyncCallbacks&&(ir.removeEventListener("roomCreation",Ut.asyncCallbacks.ackHandler),ir.removeEventListener("roomJoined",Ut.asyncCallbacks.ackHandler),delete Ut.asyncCallbacks),qt(Dt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - timeout",zn))},et.g.CONVERSATION_WHITEBOARD_START_DELAY);var en=Ut.getCloudConversationId();ir.whiteBoardClient.joinRoom(Ut._getTechnicalName(),{convId:en,webconf:!0})}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"startNewWhiteboardSession() - cannot start whiteboard session",zn,{fromError:en}))})})}},{key:"stopNewWhiteboardSession",value:function(){var Ct=this;return zn.debug("stopNewWhiteboardSession()"),new Promise(function(It,Ut){Ct.bind().then(function(){return Ct.whiteboardStarted!==et.g.CONVERSATION_WHITEBOARD_STARTED?(zn.error("Conversation is not joined!"),Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - Conversation not joined",zn))):ir.whiteBoardClient.roomId!==Ct._getTechnicalName()?(zn.error("Whiteboard session is not joined for this conversation!"),Ut(Dt.g.createError(et.g.ERROR_WRONG_STATE,"stopWhiteBoard() - whiteboard not joined",zn))):(ir.whiteBoardClient.leaveRoom(),ir.whiteBoardClient.stop(),Ct.whiteboardStarted=et.g.CONVERSATION_WHITEBOARD_NOT_STARTED,void It())}).catch(function(Kt){Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopNewWhiteboardSession() - cannot stop whiteboard session",zn,{fromError:Kt}))})})}},{key:"enablePointerSharing",value:function(Ct){return Ql(this,!0,Ct)}},{key:"sendPointerLocation",value:function(Ct,It,Ut,Kt){ir.pointerSharingClient.sendPointerLocation(this._getTechnicalName(),Ct,It,Ut,Kt)}},{key:"sendData",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){It.bind().then(function(){ir.dataClient.sendDataToGroup(It._getTechnicalName(),{event:et.g.CONVERSATION_SEND_DATA_IDENTIFIER,content:Ct,roomname:It._getTechnicalName()}),Ut()}).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_OTHER,"sendData() - cannot send data",zn))})})}},{key:"sendRawData",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){It.bind().then(function(){ir.dataClient.sendDataToGroup(It._getTechnicalName(),Ct),Ut()}).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_OTHER,"sendRawData() - cannot send data",zn))})})}},{key:"sendCustomEvent",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){It.bind().then(function(){var en=Ut;en.event=Ct,en.roomname=It._getTechnicalName(),ir.dataClient.sendDataToGroup(It._getTechnicalName(),en),Kt()}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"sendCustomEvent() - cannot send data",zn))})})}},{key:"sendMessage",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Kt=function(qt){return new Promise(function(en,tn){var sn=wo.get(It);sn!==null?Eo.saveGroupChatMessage(It,sn,ir.getActiveApiKey(),Ct,qt,Ut).then(function(){en(qt)}).catch(tn):en(qt)})};return new Promise(function(qt,en){if(It.groupChatStatus!==et.g.CONVERSATION_STATUS_JOINED&&It.status!==et.g.CONVERSATION_STATUS_JOINED)return en(Dt.g.createError(et.g.ERROR_WRONG_STATE,"sendMessage() - group chat not joined",zn));if(Ct===null||typeof Ct!="string")return en(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - wrong type of message",zn));if(Ct==="")return en(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"sendMessage() - message parameter is empty",zn));var tn={};Dt.g.isTypeof(Ut,"metadata","object")&&(tn.metadata=Ut.metadata),ir.sendMessageToGroupChat(It._getTechnicalName(),Ct,tn).then(function(sn){Kt(sn).then(function(){qt(sn)}).catch(function(Sn){en(Dt.g.createError(et.g.ERROR_OTHER,"sendMessage() - error on save",zn,{fromError:Sn}))})}).catch(function(sn){en(Dt.g.createError(et.g.ERROR_OTHER,"sendMessage() - cannot send message",zn,{fromError:sn}))})})}},{key:"pushMedia",value:function(Ct,It){var Ut=this;return It||(It={}),new Promise(function(Kt,qt){Ut.bind().then(function(){return It.hasOwnProperty("token")||(It.token=wo.get(Ut).token),Eo.pushConversationMedia(Po.get(Ut),Ct,ir.getActiveApiKey(),It)}).then(function(en){ir.dataClient.sendDataToGroup(Ut._getTechnicalName(),{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:Ut._getTechnicalName(),media:{url:en.url,id:en.id},command:"new_snapshot",value:{snapshot:en.url}}),Kt({url:en.url,id:en.id})}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"pushMedia() - cannot push media",zn,{fromError:en}))})})}},{key:"pushData",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ut=Dt.g.assignObject({},Ut),new Promise(function(Kt,qt){if(ir.webRTCClient.webRTCClient.dataChannelCapable!==!0||Ut.forceHTTP===!0){if(!Ct.file)return qt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"pushData() - missing file",zn));var en={};if(Dt.g.isTypeof(Ct,"metadata","object"))try{en.metadata=JSON.stringify(Ct.metadata)}catch(tn){zn.error("JSON.stringify",tn)}en.asFile=!0,Dt.g.isTypeof(Ct,"filename","string")?en.filename=Ct.filename:en.filename=Ct.file.name,Ct.overwrite===!0&&(en.overwrite=!0),Dt.g.isTypeof(Ct,"ttl","number")&&Ct.ttl>0&&(en.ttl=Ct.ttl),It.pushMedia(Ct.file,en).then(Kt).catch(qt)}else It.bind().then(function(){var tn=It._getTechnicalName(),sn={};Ut.hasOwnProperty("turnServerAddress")&&(sn.turnServerAddress=Ut.turnServerAddress,delete Ut.turnServerAddress);var Sn=ir.webRTCClient.webRTCClient.pushData(It.getCloudConversationId(),Ct,sn,{success:function(Dn){if(Dn.state!=="complete")return qt(Dt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",zn));ir.dataClient.sendDataToGroup(tn,{event:et.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:tn,media:{url:Dn.mediaURL,id:Dn.mediaId},command:"new_snapshot",value:{snapshot:Dn.mediaURL}}),Kt({url:Dn.mediaURL,id:Dn.mediaId})},failure:function(Dn,nr){if(Dn==="iceFailed"){var ar=Dt.g.assignObject({},Ut);return ar.forceHTTP=!0,void It.pushData(Ct,ar).then(Kt).catch(qt)}if(Dn==="timeout"){if(nr){var fr=It.transferCallIds.indexOf(nr);fr>=0&&It.transferCallIds.splice(fr,1)}return qt(Dt.g.createError(et.g.ERROR_TIMED_OUT,"pushData() - push data timed out",zn))}return qt(Dn==="canceled"?Dt.g.createError(et.g.ERROR_OPERATION_CANCELED,"pushData() - push data canceled",zn):Dt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",zn,{fromError:Dn}))}});if(!Sn)return qt(Dt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",zn));It.transferCallIds.push(Sn)}).catch(function(tn){return qt(Dt.g.createError(et.g.ERROR_OTHER,"pushData() - cannot push data",zn,{fromError:tn}))})})}},{key:"cancelPushData",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){if(!It.transferCallIds.includes(Ct))return Kt(Dt.g.createError(et.g.ERROR_OTHER,"cancelPushData() - no such push data",zn));var qt=ir.webRTCClient.webRTCClient.cancelPushData(Ct);if(qt)return Kt(Dt.g.createError(et.g.ERROR_OTHER,"cancelPushData() - "+qt,zn));Ut()})}},{key:"fetchMediaList",value:function(Ct,It){var Ut=this;return It||(It={}),new Promise(function(Kt,qt){Ut.bind().then(function(){return Object.prototype.hasOwnProperty.call(It,"token")||(Dt.g.isTypeof(Ct,"object")&&Ct instanceof zr?It.token=Ct.getToken():It.token=wo.get(Ut).token),Eo.getConversationMediaList(Po.get(Ut),ir.getActiveApiKey(),It)}).then(Kt).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"fetchMediaList() - cannot fetch media list",zn,{fromError:en}))})})}},{key:"getWaitingRoomContacts",value:function(){zn.debug("getWaitingRoomContacts()");var Ct={};if(this.status!==et.g.CONVERSATION_STATUS_JOINED)zn.error("getWaitingRoomContacts() - Conversation is not joined, cannot get waiting room contacts");else if(this.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR)zn.error("getWaitingRoomContacts() - Role is not moderator, cannot get waiting room contacts");else{var It,Ut=Ro.get().getContacts(et.g.CONVERSATION_WAITING_ROOM_PREFIX+this._getTechnicalName()),Kt=uo(Ut.keys());try{for(Kt.s();!(It=Kt.n()).done;){var qt=It.value;Ct[qt]=Ut.get(qt)}}catch(en){Kt.e(en)}finally{Kt.f()}}return Ct}},{key:"fetchMessageHistory",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Kt,qt){It.bind().then(function(){return Object.prototype.hasOwnProperty.call(Ut,"token")?Eo.loadGroupChatMessages(It,null,Ut.token):(Dt.g.isTypeof(Ct,"object")&&Ct instanceof zr||(Ct=wo.get(It)),Eo.loadGroupChatMessages(It,Ct))}).then(function(en){var tn=en.map(function(sn){var Sn={content:sn.content,timestamp:1e3*sn.created_at,date:new Date(1e3*sn.created_at),sender_id:sn.user_id,display_name:sn.display_name};return sn.user_id.toString()!==Ct.getId()&&(Sn.sender=Ct.getOrCreateContact(sn.user_id)),Sn});Kt(tn)}).catch(function(en){qt(Dt.g.createError(et.g.ERROR_OTHER,"fetchMessageHistory() - cannot fetch message history",zn))})})}},{key:"sendInvitation",value:function(Ct,It){var Ut=this;if(It||(It={}),Ct instanceof No){zn.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||zn.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Kt={receiveNotifier:new dt};It.hasOwnProperty("expirationTime")&&(Kt.expirationTime=It.expirationTime);var qt=new Do(Ct,this,Kt);qt.type="conversation";var en={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:qt.id,roomname:this._getTechnicalName(),sendTime:qt.sendTime,conversationTypes:[]};return this.status===et.g.CONVERSATION_STATUS_JOINED?en.conversationTypes.push("WEBCONF"):this.groupChatStatus===et.g.CONVERSATION_STATUS_JOINED&&en.conversationTypes.push("GROUP_CHAT"),ir.sendData(Ct.getId(),en).then(function(){Kt.receiveNotifier.emit("receive")}).catch(function(tn){var sn=Dt.g.createError(tn,"Invitation not delivered",zn);zt.get(Ut).emit("messageNotDelivered",{error:sn,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),qt}return zn.error("Parameter is not a contact"),null}},{key:"isRecorded",value:function(){return!!this.recordingStatus}},{key:"getRecordingInfo",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:"setNetworkCap",value:function(Ct,It){return typeof Ct!="number"||typeof It!="number"?(zn.error("setNetworkCap - wrong cap",Ct,It),!1):Ct<=0||It<=0?(this.uploadCap=null,this.downloadCap=null,!0):(this.uploadCap=Ct,this.downloadCap=It,!0)}},{key:"getNetworkCap",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.uploadCap||!this.downloadCap)return null;if(Ct.capacity)return[this.uploadCap,this.downloadCap];for(var It=this.uploadCap,Ut=this.downloadCap,Kt=this.reservedStreams.length;--Kt>=0;)this.reservedStreams[Kt].isVideoMuted||(this.reservedStreams[Kt].isRemote?Ut-=this.reservedStreams[Kt].resource:It-=this.reservedStreams[Kt].resource);return[It,Ut]}},{key:"getStreamResourceReservation",value:function(Ct){for(var It=this.reservedStreams.length;--It>=0;)if(this.reservedStreams[It].streamId===Ct)return this.reservedStreams[It];return null}},{key:"reserveResources",value:function(Ct,It,Ut,Kt,qt){var en=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(zn.debug("reserveResources",Ut),this.getStreamResourceReservation(Ut))throw new Error("reserveResources - already reserved stream");var tn=!1,sn={streamId:Ut,profileType:Ct,priority:qt,resource:It,isRemote:Kt};if(sn.isVideoOnly=!!en.isVideoOnly,en.isVideoMuted)sn.isVideoMuted=!0,tn=!0;else{sn.isVideoMuted=!1;var Sn=this.getNetworkCap();tn=Kt?Sn[1]>=sn.resource:Sn[0]>=sn.resource}if(en.control)return tn;if(!tn)throw new Error("reserveResources - no such bandwidth availability");return this.reservedStreams.push(sn),this.reservedStreams.sort(function(Dn,nr){return Dn.priority>nr.priority?-1:Dn.priority===nr.priority?0:1}),zn.debug("reservedStreams",this.reservedStreams),!0}},{key:"releaseResources",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.getNetworkCap({capacity:!0}))return!1;zn.debug("releaseResources",Ct);for(var Ut=!1,Kt=this.reservedStreams.length;--Kt>=0;)if(this.reservedStreams[Kt].streamId===Ct){this.reservedStreams.splice(Kt,1),Ut=!0;break}return zn.debug("reservedStreams",this.reservedStreams),Ut&&It.triggerAdaptation&&this.enableHigherPriorityVideo(!!It.isRemote),Ut}},{key:"changeStreamPriority",value:function(Ct,It,Ut){zn.debug("changeStreamPriority",Ct,It,Ut);for(var Kt=null,qt=this.reservedStreams.length;--qt>=0;)if(this.reservedStreams[qt].isRemote===It&&this.reservedStreams[qt].streamId===Ct){Kt=this.reservedStreams[qt];break}return!(!Kt||Kt.priority===Ut||(Kt.priority=Ut,this.reservedStreams.sort(function(en,tn){return en.priority>tn.priority?-1:en.priority===tn.priority?0:1}),zn.debug("reservedStreams",this.reservedStreams),Kt.isVideoMuted?this.disableLowerPriorityVideo(Kt.isRemote,Kt.resource,Kt.priority)&&Hu(this,Kt):this.enableHigherPriorityVideo(Kt.isRemote,{resource:Kt.resource,priority:Kt.priority,control:!0})&&(Vu(this,Kt),this.enableHigherPriorityVideo(Kt.isRemote)),0))}},{key:"disableLowerPriorityVideo",value:function(Ct,It,Ut){zn.debug("disableLowerPriorityVideo",Ct,It,Ut);for(var Kt=[],qt=0,en=this.reservedStreams.length;--en>=0&&(this.reservedStreams[en].isRemote!==Ct||this.reservedStreams[en].isVideoMuted||this.reservedStreams[en].priority>=Ut||(Kt.push(this.reservedStreams[en]),!((qt+=this.reservedStreams[en].resource)>=It))););if(Kt.length===0||qt<It)return!1;for(var tn=Kt.length;--tn>=0;)Vu(this,Kt[tn]);return!0}},{key:"enableHigherPriorityVideo",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};zn.debug("enableHigherPriorityVideo",Ct);var Ut=this.getNetworkCap(),Kt=Ct?Ut[1]:Ut[0];It.resource&&It.resource>0&&(Kt+=It.resource);for(var qt=[],en=0;en<this.reservedStreams.length;en+=1)this.reservedStreams[en].isRemote===Ct&&this.reservedStreams[en].isVideoMuted&&(Object.prototype.hasOwnProperty.call(It,"priority")&&this.reservedStreams[en].priority<=It.priority||this.reservedStreams[en].resource<=Kt&&(Kt-=this.reservedStreams[en].resource,qt.push(this.reservedStreams[en])));if(qt.length===0)return!1;if(It.control)return!0;for(var tn=qt.length;--tn>=0;)Hu(this,qt[tn]);return!0}},{key:"startComposite",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"startComposite() - conversation not joined",zn));ir.webRTCClient.startComposite(Ct._getTechnicalName()),It()})}},{key:"stopComposite",value:function(){var Ct=this;return new Promise(function(It,Ut){if(Ct.status!==et.g.CONVERSATION_STATUS_JOINED)return Ut(Dt.g.createError(et.g.ERROR_OTHER,"stopComposite() - conversation not joined",zn));ir.webRTCClient.stopComposite(Ct._getTechnicalName()),It()})}},{key:"callVoIP",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){return Ct&&typeof Ct=="string"?It.status!==et.g.CONVERSATION_STATUS_JOINED?Kt(Dt.g.createError(et.g.ERROR_OTHER,"callVoIP() - conversation not joined",zn)):void ir.webRTCClient.webRTCClient.MCUClient.inviteVoIP(It._getTechnicalName(),It.getCloudConversationId(),Ct).then(Ut).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_OTHER,"callVoIP() - "+qt.message,zn))}):Kt(Dt.g.createError(et.g.ERROR_OTHER,"callVoIP() - wrong phoneNumber",zn))})}},{key:"manageDisconnectionWarningEvent",value:function(Ct){zn.debug("manageDisconnectionWarningEvent",Ct.detail);var It={};if(this.callIdToStreamId.has(Ct.detail.callId)){zn.debug("call is linked with conversation");var Ut=this.callIdToStreamId.get(Ct.detail.callId);It=Ct.detail.settingUpType==="publish"||Ct.detail.settingUpType==="shareScreen"?this.conversationPublishedStreams.get(Ut):this.conversationStreams.get(Ut),zt.get(this).emit("disconnectionWarning",{streamInfo:It})}else zn.debug("call is not linked with conversation")}},{key:"manageErrorEvent",value:function(Ct){if(zn.debug("manageErrorEvent",Ct.detail),Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_DISCONNECTED"||Ct.detail.errorCode==="DISTANT_ICE_CONNECTION_STATE_FAILED")zt.get(this).emit("error",{errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,descriptor:Ct.detail.data});else if(this.callIdToStreamId.has(Ct.detail.callId)){zn.debug("call is linked with conversation");var It=this.callIdToStreamId.get(Ct.detail.callId),Ut={streamInfo:Ct.detail.settingUpType==="publish"?this.conversationPublishedStreams.get(It):this.conversationStreams.get(It),errorCode:Ct.detail.errorCode,errorInfo:Ct.detail.errorInfo,callId:Ct.detail.callId,streamId:It};if(Ct.detail.data&&(Ut.descriptor=Ct.detail.data),zt.get(this).emit("error",Ut),Jp.has(Ct.detail.errorCode)){var Kt=this.conversationCalls.get(Ct.detail.callId);Kt?this.unpublish(Kt.stream):(this.unsubscribeToStream(It),Ct.detail.errorCode==="CALL_ABORTED"&&this.callIdToStreamId.delete(Ct.detail.callId))}}else zn.debug("call is not linked with conversation")}}],xt=[{key:"getAvailableEvents",value:function(){return Yp}}],Qt&&Uu($t.prototype,Qt),xt&&Uu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un),$u=function(){var Wt="guest";if(apiRTC.userAgentInstance){var $t=apiRTC.userAgentInstance.getUsername();$t&&(Wt=$t)}return Wt},Fu=function(Wt){var $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Qt,xt){var Bt=null;if(Dt.g.isPropertyTypeof($t,"session","object")&&$t.session instanceof zr)Bt=$t.session;else{if(zr.getActiveSession()===null)return xt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"getOrCreateConversation() - missing session",zn));Bt=zr.getActiveSession()}var dn={};dn.token=Bt.getToken(),dn.active=Wt.active,Eo.getOrCreateConversation(Wt,ir.getActiveApiKey(),dn).then(function(pn){Dt.g.isTypeof(pn,"public_id","string")&&(pn.id=pn.public_id,delete pn.public_id),Po.set(Wt,pn.id),Ko.set(Wt,pn.data),Dt.g.isTypeof(pn.typeString,"string")&&ju.has(pn.typeString)&&ns.set(Wt,pn.typeString),wo.set(Wt,Bt),Qt(pn)}).catch(function(pn){Po.set(Wt,null),Ko.set(Wt,null),ns.set(Wt,null),xt(Dt.g.createError(et.g.ERROR_HTTP,"getOrCreateConversation() - cannot get/create conversation",zn,{fromError:pn}))})})},Xp=function(Wt){var $t=Wt.getModerator();return $t?$t.getId():!Wt.conference&&Wt.moderationEnabled?"#":null},Qp=function(Wt,$t){return new Promise(function(Qt,xt){if(Wt.conference){if($t.access===et.g.CONVERSATION_ACCESS_GRANTED)return Qt($t);if($t.access!==et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION)return xt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"You were not allowed to join the conference"));var Bt=ro.getOrCreateContact($t.moderator);Ns.set(Wt,Bt),Wu(Wt).then(function(){Qt($t)}).catch(xt)}else{if(!Wt.moderationEnabled)return Qt(Object.assign($t,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_GUEST}));if(Wt.moderator)return Qt(Object.assign($t,{access:et.g.CONVERSATION_ACCESS_GRANTED,role:et.g.CONVERSATION_ROLE_MODERATOR}));Wu(Wt).then(function(){Qt(Object.assign($t,{access:et.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION,role:et.g.CONVERSATION_ROLE_GUEST}))}).catch(xt)}})},Wu=function(Wt){return new Promise(function($t,Qt){var xt=Wt.getModerator();Wt.status=et.g.CONVERSATION_STATUS_WAITING;var Bt=!1,dn=setTimeout(function(){ir.apiRTCSession.joinPresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}),Bt=!0},et.g.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT);xt&&zt.get(Wt).emit("waitingForModeratorAcceptance",xt);var pn=new Do(xt,Wt);pn.id=Wt._getTechnicalName(),pn.type=Wt.conference?"conference":"conversation",Wt.sendJoinRequest();var Xt=function Ct(It){zn.debug("dataMessage (waitingRoom)",It.detail);var Ut=It.detail.data;if(Ut.roomname===Wt._getTechnicalName()){var Kt=It.detail.senderId.toString();Ut.command==="access"||Ut.command==="access-new"||Ut.event===et.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER?(delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),ir.removeEventListener("receiveData",Ct),Bt===!0?ir.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):dn&&clearTimeout(dn),Ut.value.hasOwnProperty("access")&&Ut.value.access||Ut.access?(ir.sendData(Kt,{roomname:Wt._getTechnicalName(),command:"access-ack"}).catch(function(qt){var en=Dt.g.createError(qt,"Notification not delivered",zn);zt.get(Wt).emit("messageNotDelivered",{error:en,contact:xt,command:"access-ack"})}),$t()):(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",zn)))):Ut.event===et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER&&Ut.roomname===Wt._getTechnicalName()&&zt.get(Wt).emit("moderatorConnected",ro.getOrCreateContact(Kt))}};ir.onEvent("receiveData",Xt),pn.onResponse(function(Ct){ir.removeEventListener("receiveData",Xt),Bt===!0?ir.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()]):dn&&clearTimeout(dn),Ct===et.g.INVITATION_STATUS_ACCEPTED?$t():(Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"You were not allowed to join the conversation",zn)))}),Wt.cancelJoin0=function(){return delete Wt.cancelJoin0,Wt.joinRequestIntervalId&&(clearInterval(Wt.joinRequestIntervalId),delete Wt.joinRequestIntervalId),ir.removeEventListener("receiveData",Xt),Bt===!0?ir.apiRTCSession.leavePresenceGroup([et.g.CONVERSATION_WAITING_ROOM_PREFIX+Wt._getTechnicalName()],{doneByApiRTC:!0}):dn&&clearTimeout(dn),Wt.status=et.g.CONVERSATION_STATUS_NOT_JOINED,Qt(Dt.g.createError(et.g.ERROR_OPERATION_CANCELED,"Operation canceled",zn)),!0}})},Zp=function(Wt,$t,Qt){return new Promise(function(xt){Eo.updateConferencePresence(Wt,$t,Qt).then(xt,function(Bt){zn.warn("updateConferencePresence",Bt),xt()})})},Bu=function(Wt,$t){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xt=Qt.stream;if(!xt){var Bt=Wt.conversationCalls.get($t);if(!Bt)return!1;xt=Bt.stream}return Qt.noTriggerAdaptation?Wt.releaseResources(xt.userMediaStreamId):Wt.releaseResources(xt.userMediaStreamId,{triggerAdaptation:!0}),xt.publishedInConversations.delete(Wt.getName()),Wt.conversationPublishedStreams.delete(xt.userMediaStreamId),Wt.callIdToStreamId.delete($t),Wt.conversationCalls.delete($t),!0},Vu=function(Wt,$t){var Qt={streamId:$t.streamId,isRemote:$t.isRemote};if($t.isRemote)if($t.isVideoOnly){Qt.action="hangup";var xt=Ao.get(Wt).get($t.streamId);xt&&(Qt.callId=xt.callId),zn.debug("disableVideoTrack - hangup",$t.streamId),Wt.unsubscribeToStream($t.streamId,{noTriggerAdaptation:!0})}else{Qt.action="disableTrack",Qt.trackType="video";var Bt=Ao.get(Wt).get($t.streamId);Bt&&(Qt.callId=Bt.callId),zn.debug("disableVideoTrack - disable video track",$t.streamId),Wt.updateSubscribedStream($t.streamId,{audioOnly:!0}).catch(function(Ct){zn.error("disableVideoTrack - updateSubscribedStream",Ct)}),$t.isVideoMuted=!0}else if($t.isVideoOnly){Qt.action="hangup";var dn=yo.get($t.streamId),pn=Wt.getConversationCall(dn);pn&&(Qt.callId=pn.callId),zn.debug("disableVideoTrack - hangup",$t.streamId),Wt.unpublish(dn,{noTriggerAdaptation:!0})}else{var Xt=Wt.getConversationCall(yo.get($t.streamId));Xt?(Qt.action="disableTrack",Qt.trackType="video",Qt.callId=Xt.callId,zn.debug("disableVideoTrack - disable video track",$t.streamId),Xt.updatePublishedStream("video",!1).catch(function(Ct){zn.error("disableVideoTrack - updatePublishedStream",Ct)}),$t.isVideoMuted=!0):Qt=null}Qt&&zt.get(Wt).emit("adaptationTriggered",Qt)},Hu=function(Wt,$t){var Qt={streamId:$t.streamId,isRemote:$t.isRemote,action:"enableTrack",trackType:"video"};if($t.isRemote){var xt=Ao.get(Wt).get($t.streamId);xt&&(Qt.callId=xt.callId),zn.debug("enableVideoTrack - enable video track",$t.streamId),Wt.updateSubscribedStream($t.streamId,{audioOnly:!1}).catch(function(dn){zn.error("enableVideoTrack - updateSubscribedStream",dn)}),$t.isVideoMuted=!1}else{var Bt=Wt.getConversationCall(yo.get($t.streamId));Bt?(Qt.callId=Bt.callId,zn.debug("enableVideoTrack - enable video track",$t.streamId),Bt.updatePublishedStream("video",!0).catch(function(dn){zn.error("enableVideoTrack - updatePublishedStream",dn)}),$t.isVideoMuted=!1):Qt=null}Qt&&zt.get(Wt).emit("adaptationTriggered",Qt)},Ql=function(Wt,$t,Qt){return Qt===!0?Wt.pointerSharingState===et.g.STATE_IDLE?(Wt.pointerSharingState=et.g.STATE_JOINING,new Promise(function(xt,Bt){ir.pointerSharingClient.joinRoom(Wt._getTechnicalName(),{success:function(dn){Wt.pointerSharingState=et.g.STATE_ACTIVE,$t===!0&&(Wt.pointerSharingAutoInvite=!0);var pn={enabled:!0,roomId:dn};zt.get(Wt).emit("pointerSharingEnabled",pn),xt(),Wt.pointerSharingAutoInvite===!0&&ro.getContacts(Wt._getTechnicalName()).forEach(function(Xt){ir.pointerSharingClient.inviteInRoom(Wt._getTechnicalName(),Xt.getId())})},failure:function(dn,pn){Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1,Bt(dn)}})})):Promise.reject(Dt.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot enable pointer sharing")):Qt===!1?Wt.pointerSharingState===et.g.STATE_ACTIVE?(Wt.pointerSharingState=et.g.STATE_LEAVING,new Promise(function(xt,Bt){ir.pointerSharingClient.leaveRoom(Wt._getTechnicalName()),Wt.pointerSharingState=et.g.STATE_IDLE,Wt.pointerSharingAutoInvite=!1;var dn={enabled:!1,roomId:Wt._getTechnicalName()};zt.get(Wt).emit("pointerSharingEnabled",dn),xt()})):Promise.reject(Dt.g.createError(et.g.ERROR_WRONG_STATE,"enablePointerSharing() - cannot disable pointer sharing")):Promise.reject(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"enablePointerSharing() - cannot enable/disable pointer sharing"))},$s=function(Wt,$t){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return["roomName","callId","clientId"].forEach(function(xt){$t.hasOwnProperty(xt)&&(Qt[xt]=String($t[xt]))}),Qt};function Zl(Wt){return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Zl(Wt)}function _f(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function zu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function _c(){return _c=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,$t,Qt){var xt=_h(Wt,$t);if(xt){var Bt=Object.getOwnPropertyDescriptor(xt,$t);return Bt.get?Bt.get.call(arguments.length<3?Wt:Qt):Bt.value}},_c.apply(this,arguments)}function _h(Wt,$t){for(;!Object.prototype.hasOwnProperty.call(Wt,$t)&&(Wt=Yo(Wt))!==null;);return Wt}function _d(Wt,$t){return _d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},_d(Wt,$t)}function _g(Wt,$t){if($t&&(Zl($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}(Wt)}function Yo(Wt){return Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Yo(Wt)}var ba=ft.Y.get("Conference"),em=$o.getAvailableEvents().concat(["closed"]),Fs=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&_d(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Yo(Bt);if(dn){var Ut=Yo(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return _g(this,Ct)});function Xt(Ct){var It,Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _f(this,Xt),It=pn.call(this,Ct,Ut),ba.info("Create conference"),It.conference=!0,It.friendlyName=Ut.hasOwnProperty("friendlyName")?Ut.friendlyName:Ct,It}return $t=Xt,xt=[{key:"getAvailableEvents",value:function(){return em}}],(Qt=[{key:"destroy",value:function(){po.get().deleteConference(this.getName()),_c(Yo(Xt.prototype),"destroy",this).call(this)}},{key:"_getTechnicalName",value:function(){return tm()+ts.get(this)}},{key:"getFriendlyName",value:function(){return this.friendlyName}},{key:"getInfo",value:function(){var Ct=this;return new Promise(function(It,Ut){var Kt={},qt=wo.get(Ct);qt&&(Kt.token=qt.getToken()),Eo.getWebconf(Ct._getTechnicalName(),Kt).then(function(en){return It({dtmfCode:en.dtmfCode,endTime:en.end,hasPassword:en.hasPassword,sipNumber:en.sipNumber,startTime:en.start,state:en.state,type:en.type})}).catch(function(en){return Ut(Dt.g.createError(et.g.ERROR_OTHER,"getInfo() - Cannot get conference info",ba))})})}},{key:"close",value:function(){var Ct=this;return ba.debug("Closing "+this.getName()),new Promise(function(It,Ut){Ct.status!==et.g.CONVERSATION_STATUS_JOINED?Ut(Dt.g.createError(et.g.ERROR_OTHER,"close() - Conversation has to be joined to be closed",ba)):Ct.getRole()!==et.g.CONVERSATION_ROLE_MODERATOR?Ut(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"close() - Role has to be moderator to close the conversation",ba)):Eo.closeConferenceInstance(Ct,wo.get(Ct)).then(function(){ba.debug("Conversation closed successfully"),ir.dataClient.sendDataToGroup(Ct._getTechnicalName(),{event:et.g.CONVERSATION_CLOSED_IDENTIFIER,instanceId:Ct.getInstanceId(),roomname:Ct._getTechnicalName()}),zt.get(Ct).emit("closed"),Ct.leave(),It()}).catch(function(Kt){var qt="close() - An error occured when closing conversation",en={error:new Error(qt),code:et.g.ERROR_OTHER};ba.error(qt,Kt),Kt.hasOwnProperty("code")?en.code=Kt.code:Kt.hasOwnProperty("http_code")&&(en.code=Kt.http_code.toString().startsWith("4")?et.g.ERROR_UNAUTHORIZED:et.g.ERROR_SERVER_UNAVAILABLE),Ut(en)})})}},{key:"sendInvitation",value:function(Ct,It){var Ut=this;if(It||(It={}),Ct instanceof No){ba.info("Invite "+Ct.getId()+" to "+this._getTechnicalName()),Ct.isOnline()||ba.warn("sendInvitation() - contact "+Ct.getUsername()+" does not seem to be connected.");var Kt={receiveNotifier:new dt};It.hasOwnProperty("expirationTime")&&(Kt.expirationTime=It.expirationTime);var qt=new Do(Ct,this,Kt),en={event:et.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:qt.id,roomname:this._getTechnicalName(),friendlyName:this.getFriendlyName(),sendTime:qt.sendTime};return qt.type="conference",Us.get(this)!==null&&(en.password=Us.get(this)),ir.sendData(Ct.getId(),en).then(function(){Kt.receiveNotifier.emit("receive")}).catch(function(tn){var sn=Dt.g.createError(tn,"Invitation not delivered",ba);zt.get(Ut).emit("messageNotDelivered",{error:sn,contact:Ct,event:et.g.CONVERSATION_INVITATION_IDENTIFIER})}),qt}return ba.error("Parameter is not a contact"),null}},{key:"getTags",value:function(){var Ct=this;return new Promise(function(It,Ut){var Kt=zr.getActiveSession();if(!Kt)return Ut(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no session found",ba));var qt=Kt.getUserAgent().getEnterprise();if(!qt)return Ut(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - no enterprise found",ba));qt.getTags(Ct).then(function(en){for(var tn=[],sn=0;sn<en.length;sn+=1)en[sn].selected===!0&&tn.push(en[sn]);return It(tn)}).catch(function(en){return Ut(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"getTags() - cannot get tags",ba,{fromError:en}))})})}},{key:"setTags",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){if(!Array.isArray(Ct))return Kt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ba));if(!It.webconfId)return Kt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no webconf found",ba));var qt=zr.getActiveSession();if(!qt)return Kt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no session found",ba));var en=qt.getUserAgent().getEnterprise();if(!en)return Kt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no enterprise found",ba));var tn=qt.getToken();if(!tn)return Kt(Dt.g.createError(et.g.ERROR_NOT_ALLOWED,"setTags() - no token found",ba));for(var sn=[],Sn=0;Sn<Ct.length;Sn+=1){if(!Ct[Sn].hasOwnProperty("id"))return Kt(Dt.g.createError(et.g.ERROR_BAD_PARAMETER,"setTags() - wrong tags",ba));sn.push(Ct[Sn].id)}Eo.updateWebconfTags(en.getId(),It.webconfId,sn,tn).then(function(){return Ut()}).catch(function(Dn){return Kt(Dt.g.createError(et.g.ERROR_OTHER,"setTags() - cannot set tags",ba,{fromError:Dn}))})})}}])&&zu($t.prototype,Qt),xt&&zu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}($o),tm=function(){return ir.getActiveApiKey()+":"};function Gu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}ft.Y.get("ConversationCatalog");var rs=null,po=function(){function Wt(){if(function(Bt,dn){if(!(Bt instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Wt),rs!==null)throw"Cannot construct singleton ConversationCatalog";this.conversationList=new Map,this.conferenceList=new Map,rs=this}var $t,Qt,xt;return $t=Wt,Qt=[{key:"deleteConversation",value:function(Bt){return!!(Dt.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conversationList.delete(Bt)}},{key:"deleteConference",value:function(Bt){return!!(Dt.g.isTypeof(Bt,"string")&&Bt.length>0)&&this.conferenceList.delete(Bt)}},{key:"getOrCreateConversation",value:function(Bt){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn=null;return Bt!=null&&Bt!==""?this.conversationList.has(Bt.toString())?pn=this.conversationList.get(Bt.toString()):(pn=new $o(Bt.toString(),dn),this.conversationList.set(Bt.toString(),pn)):(pn=new $o(null,dn),this.conversationList.set(pn.getName(),pn)),pn}},{key:"getOrCreateConference",value:function(Bt){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn=null;return Bt!=null&&Bt!==""?this.conferenceList.has(Bt.toString())?pn=this.conferenceList.get(Bt.toString()):(pn=new Fs(Bt.toString(),dn),this.conferenceList.set(Bt.toString(),pn)):(pn=new Fs(null,dn),this.conferenceList.set(pn.getName(),pn)),pn}},{key:"getConversations",value:function(){return this.conversationList}},{key:"getConferences",value:function(){return this.conferenceList}},{key:"isConference",value:function(Bt){return Ku(Bt).hasOwnProperty("apiKey")}},{key:"getNameFromTechnicalName",value:function(Bt){return Ku(Bt).name}}],xt=[{key:"get",value:function(){return rs===null&&(rs=new Wt),rs}}],Qt&&Gu($t.prototype,Qt),xt&&Gu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function Ku(Wt){var $t=Wt.match(/^([^:]+)[:]([^:]+)$/);return $t===null||$t.length<3?{name:Wt}:{apiKey:$t[1],name:$t[2]}}function eu(Wt){return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},eu(Wt)}function qo(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Yu(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Yu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Yu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function qu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function tu(Wt,$t){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},tu(Wt,$t)}function nm(Wt,$t){if($t&&(eu($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ur(Wt)}function Ur(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Ws(Wt){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Ws(Wt)}var pr=ft.Y.get("Session"),Kr=In.get(),Bs=new(Go()),ao=Mr.get(),rm=["rawData","whiteboardInvitation","fileTransferInvitation","conversationMessage","conversationData","dataChannelInvitation","contactMessage","contactData","customEvent","conversationInvitation","incomingCall","disconnect","error","contactListUpdate","reconnecting","reconnection","conversationJoinRequest","newMediaAvailableFromContact","whiteboardRoomMemberUpdate","incomingScreenSharingCall","pointerSharingInvitation","pointerLocationChanged","incomingScreenSharingCallInvitation","cloudEventOccurred","remoteAccessInvitation"],Ju=new WeakMap,is=new WeakMap,Vs=null,nu=new WeakMap,as=new WeakMap,zr=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&tu(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Ws(Bt);if(dn){var Ut=Ws(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return nm(this,Ct)});function Xt(Ct){var It;(function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")})(this,Xt),It=pn.call(this,pr),pr.debug("Create Session"),It.id=null,It.token=null,It.ccsToken=null,Ju.set(Ur(It),Ct),is.set(Ur(It),null),as.set(Ur(It),{}),It.isRecording=!1,It.userData=new Io,It.contactListUpdateListenerSetted=!1,It.waitingContactListUpdateEvent=[];var Ut=Ro.get(),Kt=po.get(),qt={};return It.invitationsMap=new Map,qt.channelEvent=function(en){switch(en.detail.channelEvent){case"onChannelReconnecting":zt.get(Ur(It)).emit("reconnecting",en);break;case"onChannelReconnect":zt.get(Ur(It)).emit("reconnection",en);break;case"onChannelError":zt.get(Ur(It)).emit("error",en);break;case"onChannelDisconnect":pr.error("Session :: onChannelDisconnect"),zt.get(Ur(It)).emit("disconnect",en)}},qt.incomingCall=function(en){var tn=Ut.getOrCreateContact(en.detail.callerId),sn=en.detail.callId.toString();if(en.detail.callType==="data")if(pr.info("Received file transfer invitation from "+tn.getUsername()),Dt.g._private.dataCallsFileInfo.has(sn)){var Sn=Dt.g._private.dataCallsFileInfo.get(sn),Dn=null;It.invitationsMap.has(en.detail.callerId+"-sendfile-"+sn)?(Dn=It.invitationsMap.get(en.detail.callerId+"-sendfile-"+sn),pr.debug("invitation already exist :",Dn)):(Dn=new eo(tn,sn,Sn),It.invitationsMap.set(en.detail.callerId+"-sendfile-"+sn,Dn)),zt.get(Ur(It)).emit("fileTransferInvitation",Dn)}else Dt.g._private.dataChannelInvitations.has(sn)?zt.get(Ur(It)).emit("dataChannelInvitation",new Ho(tn,sn)):(pr.debug("File information has not been received yet, putting invitation on hold"),Dt.g._private.dataCallsOnHold.set(sn));else if(en.detail.callType==="screenSharing"||en.detail.callType==="screenSharingWithAudio")if(apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall===!0){pr.debug("Received screenSharingCallInvitation from "+tn.getUsername());var nr=new Ar(tn,sn,en.detail.callType,{isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});zt.get(Ur(It)).emit("incomingScreenSharingCallInvitation",nr)}else{pr.debug("Received screenSharingCall from "+tn.getUsername());var ar=ao.getOrCreateCall(sn,tn,{started:!0,isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});zt.get(Ur(It)).emit("incomingScreenSharingCall",ar)}else{pr.info("Received call invitation from "+tn.getUsername());var fr=new Ar(tn,sn,en.detail.callType,{isRecorded:!!en.detail.hasOwnProperty("recordedCall")&&en.detail.recordedCall});zt.get(Ur(It)).emit("incomingCall",fr)}},qt.roomInvitation=function(en){var tn=Ut.getOrCreateContact(en.detail.senderId);if(en.detail.roomType==="whiteBoard"){if(tn!==null){pr.info("Received whiteboard invitation from "+tn.getUsername());var sn={};en.detail.cloudConvId&&(sn.cloudConvId=en.detail.cloudConvId),en.detail.webconf===!0&&(sn.webconf=!0),zt.get(Ur(It)).emit("whiteboardInvitation",new vs(tn,en.detail.roomId,sn))}}else en.detail.roomType==="pointerSharing"&&(tn===null||Kt.getConversations().has(en.detail.roomId)||Kt.getConferences().has(en.detail.roomId)||(pr.info("Received pointer sharing invitation from "+tn.getUsername()),zt.get(Ur(It)).emit("pointerSharingInvitation",new Ml(tn,en.detail.roomId,Ur(It)))))},qt.roomMemberUpdate=function(en){var tn,sn=[],Sn=qo(en.detail.contactList);try{for(Sn.s();!(tn=Sn.n()).done;){var Dn=tn.value;sn.push(Ut.getOrCreateContact(Dn.contactId))}}catch(nr){Sn.e(nr)}finally{Sn.f()}en.detail.roomType==="whiteBoard"&&(pr.info("Received whiteboard room member update"),zt.get(Ur(It)).emit("whiteboardRoomMemberUpdate",{contacts:sn,roomId:en.detail.roomId,status:en.detail.status}))},qt.receiveRoomMessage=function(en){if(pr.debug("receiveRoomMessage",en),en.detail.roomType==="pointerSharing"&&en.detail.message.type==="pointerLocation"&&as.get(Ur(It)).hasOwnProperty(en.detail.roomId)){var tn={sender:Ut.getOrCreateContact(en.detail.senderId),source:en.detail.message.source,x:en.detail.message.x,y:en.detail.message.y};Dt.g.isPropertyTypeof(en.detail.message,"data","object")&&(tn.data=en.detail.message.data),zt.get(Ur(It)).emit("pointerLocationChanged",tn)}},qt.receiveIMMessage=function(en){var tn=Ut.getOrCreateContact(en.detail.senderId);pr.debug("Received IM from "+tn.getUsername()+" : ",en.detail.message),zt.get(Ur(It)).emit("contactMessage",{sender:tn,content:en.detail.message,uuid:en.detail.UUCSeq,time:en.detail.time})},qt.receiveData=function(en){var tn=Ut.getOrCreateContact(en.detail.senderId),sn=en.detail.data;if(sn!==void 0){var Sn=null;if(sn.roomname!==void 0&&(Sn=Kt.isConference(sn.roomname)?Kt.getOrCreateConference(Kt.getNameFromTechnicalName(sn.roomname)):Kt.getOrCreateConversation(Kt.getNameFromTechnicalName(sn.roomname))),pr.trace("Received data from "+tn.getId(),en.detail),zt.get(Ur(It)).emit("rawData",{sender:tn,content:sn}),sn.event!==void 0)switch(sn.event){case et.g.INVITATION_ANSWER_IDENTIFIER:case et.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:break;case et.g.CONTACT_SEND_DATA_IDENTIFIER:pr.debug("Received contact data from "+tn.getUsername(),sn.content),zt.get(Ur(It)).emit("contactData",{sender:tn,content:sn.content});break;case et.g.CONVERSATION_SEND_DATA_IDENTIFIER:sn.roomname!==void 0&&(pr.debug("Received conversation data from "+tn.getUsername(),sn.content),zt.get(Ur(It)).emit("conversationData",{sender:tn,conversation:Sn,content:sn.content}));break;case et.g.CONTACT_NEW_MEDIA_IDENTIFIER:zt.get(Ur(It)).emit("newMediaAvailableFromContact",{sender:tn,media:sn.media});break;case et.g.CONTACT_DATACHANNEL_INVITATION:pr.debug("Received datachannel invitation from "+tn.getUsername()),Dt.g._private.dataChannelInvitations.set(sn.callId.toString(),!0),Dt.g._private.dataCallsOnHold.has(sn.callId.toString())&&zt.get(Ur(It)).emit("dataChannelInvitation",new Ho(tn,sn.callId.toString()));break;case et.g.CONTACT_SEND_FILEINFO_IDENTIFIER:pr.debug("Received file info from "+tn.getUsername(),sn.fileInfo);var Dn=sn.callId.toString();if(Dt.g._private.dataCallsFileInfo.set(Dn,sn.fileInfo),Dt.g._private.dataCallsOnHold.has(Dn)){var nr=null;It.invitationsMap.has(tn.getId()+"-sendfile-"+Dn)?(nr=It.invitationsMap.get(tn.getId()+"-sendfile-"+Dn),pr.debug("invitation already exist :",nr)):(nr=new eo(tn,Dn,sn.fileInfo),It.invitationsMap.set(en.detail.callerId+"-sendfile-"+Dn,nr)),zt.get(Ur(It)).emit("fileTransferInvitation",nr)}else pr.debug("no dataCallsOnHold");break;case et.g.CONVERSATION_INVITATION_IDENTIFIER:if(sn.roomname!==void 0){pr.info("Received conversation invitation from "+tn.getUsername());var ar={session:Ur(It)};sn.hasOwnProperty("password")&&(ar.password=sn.password),Sn?(sn.hasOwnProperty("friendlyName")&&Sn.name===Sn.friendlyName&&(Sn.friendlyName=sn.friendlyName),zt.get(Ur(It)).emit("conversationInvitation",new Vt(tn,sn,Sn,ar))):zt.get(Ur(It)).emit("conversationInvitation",new Vt(tn,sn,null,ar))}break;case et.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER:pr.info("Received conversation join request from "+tn.getUsername()),Sn?zt.get(Ur(It)).emit("conversationJoinRequest",new zo(tn,Sn,sn.invitationId)):zt.get(Ur(It)).emit("conversationJoinRequest",new zo(tn,null,null));break;case et.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:case et.g.CONVERSATION_CLOSED_IDENTIFIER:break;case et.g.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER:if(pr.debug("Received remote access invitation"),apiRTC.session.remoteAccessInvitation===null){var fr=new kp(tn,sn,Sn,{});apiRTC.session.remoteAccessInvitation=fr,zt.get(Ur(It)).emit("remoteAccessInvitation",fr)}else pr.error("remoteAccess session is already ongoing");break;case et.g.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_STOP_IDENTIFIER:case et.g.CONTACT_REMOTEACCESS_APP_MESSAGE:case et.g.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE:break;default:var vr={event:sn.event,content:sn,sender:tn};Sn!==null&&(vr.conversation=Sn),zt.get(Ur(It)).emit("customEvent",vr)}else if(sn.command!==void 0)switch(sn.command){case"userWaiting":case"userWaiting-new":pr.info("Received conversation join request from "+tn.getUsername()),Sn?zt.get(Ur(It)).emit("conversationJoinRequest",new zo(tn,Sn,null)):zt.get(Ur(It)).emit("conversationJoinRequest",new zo(tn,null,null))}}else pr.debug("Received data undefined, leaving process")},qt.receiveGroupChatMessage=function(en){var tn=Ut.getOrCreateContact(en.detail.senderId),sn=null,Sn=en.detail.groupChatId.toString();if(Sn!==void 0&&(sn=Kt.isConference(Sn)?Kt.getOrCreateConference(Kt.getNameFromTechnicalName(Sn)):Kt.getOrCreateConversation(Kt.getNameFromTechnicalName(Sn))),sn!==null){pr.debug("Received conversation message from "+tn.getUsername(),en.detail.message);var Dn={sender:tn,conversation:sn,content:en.detail.message};Dt.g.isTypeof(en.detail,"metadata","object")&&(Dn.metadata=en.detail.metadata),zt.get(Ur(It)).emit("conversationMessage",Dn)}},qt.cloudEventOccurred=function(en){var tn={topic:en.detail.topic,target:en.detail.target};zt.get(Ur(It)).emit("cloudEventOccurred",tn)},qt.callEstablished=function(en){if(en.detail.callId!==void 0){var tn=en.detail.callId.toString();pr.debug("callEstablished",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&sn.manageCallEstablishedEvent(en)}else pr.debug("callEstablished",en.detail)},qt.remoteStreamAdded=function(en){if(en.detail.callId!==void 0){var tn=en.detail.callId.toString();pr.debug("remoteStreamAdded",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&sn.manageRemoteStreamAddedEvent(en)}else pr.debug("remoteStreamAdded",en.detail)},qt.remoteStreamRemoved=function(en){if(en.detail.callId!==void 0){var tn=en.detail.callId.toString();pr.debug("remoteStreamRemoved",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&sn.manageRemoteStreamRemovedEvent(en)}else pr.debug("remoteStreamRemoved",en.detail)},qt.userMediaSuccess=function(en){var tn=null;if(en.detail.callId!==void 0&&en.detail.callId!==null){tn=en.detail.callId.toString(),pr.debug("userMediaSuccess",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&sn.manageUserMediaSuccessEvent(en)}else pr.debug("userMediaSuccess",en.detail)},qt.onCallStatsUpdate=function(en){if(en.detail.callId!==void 0){var tn=en.detail.callId.toString(),sn=ao.getCall(tn,null,{});sn!==null&&sn.manageCallStatsUpdateEvent(en)}else pr.debug("onCallStatsUpdate",en.detail)},qt.error=function(en){if(pr.debug("error",en.detail),en.detail.roomName!==null&&en.detail.roomName!==void 0){pr.debug("error on conversation :",en.detail,en.detail.roomName,en.detail.callId);var tn=null;en.detail.roomName!==void 0&&(tn=Kt.isConference(en.detail.roomName)?Kt.getOrCreateConference(Kt.getNameFromTechnicalName(en.detail.roomName)):Kt.getOrCreateConversation(Kt.getNameFromTechnicalName(en.detail.roomName)))!==null&&tn.manageErrorEvent(en)}else if(en.detail.callId!==void 0){var sn=en.detail.callId.toString();pr.debug("error",en.detail,sn);var Sn=ao.getCall(sn,null,{});Sn!==null&&(Sn.manageErrorEvent(en),en.detail.errorCode==="RECORDING_FAILED"&&ao.removeCallFromList(Sn.getId()))}else pr.debug("error",en.detail),zt.get(Ur(It)).emit("error",en.detail)},qt.disconnectionWarning=function(en){if(en.detail.roomName!==null){pr.debug("disconnectionWarning on conversation :",en.detail,en.detail.roomName,en.detail.callId);var tn=null;en.detail.roomName!==void 0&&(tn=Kt.isConference(en.detail.roomName)?Kt.getOrCreateConference(Kt.getNameFromTechnicalName(en.detail.roomName)):Kt.getOrCreateConversation(Kt.getNameFromTechnicalName(en.detail.roomName)))!==null&&tn.manageDisconnectionWarningEvent(en)}else if(en.detail.callId){var sn=en.detail.callId.toString();pr.debug("disconnectionWarning",en.detail,sn);var Sn=ao.getCall(sn,null,{});Sn!==null&&Sn.manageDisconnectionWarningEvent(en)}else pr.debug("disconnectionWarning",en.detail)},qt.hangup=function(en){if(en.detail.callId){var tn=en.detail.callId.toString();pr.debug("hangup",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&(sn.manageHangupEvent(en),sn.isRecorded()===!1&&ao.removeCallFromList(sn.getId()))}else pr.debug("hangup",en.detail)},qt.recordedStreamsAvailable=function(en){if(en.detail.userId2){var tn=Ut.getOrCreateContact(en.detail.userId2),sn=ao.getCall(null,tn);sn&&(sn.manageRecordAvailableEvent(en),ao.removeCallFromList(sn.getId()))}else pr.debug("recordedStreamsAvailable",en.detail)},qt.desktopCapture=function(en){if(en.detail.callId){var tn=en.detail.callId.toString();pr.warn("desktopCapture",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&(sn.manageDesktopCaptureEvent(en),ao.removeCallFromList(sn.getId()))}else pr.debug("desktopCapture",en.detail)},qt.userMediaError=function(en){if(en.detail.callId){var tn=en.detail.callId.toString();pr.warn("userMediaError",en.detail,tn);var sn=ao.getCall(tn,null,{});sn!==null&&(sn.manageUserMediaErrorEvent(en),en.detail.tryAudioCallActivated===!1&&ao.removeCallFromList(sn.getId()))}else pr.debug("userMediaError",en.detail)},pr.debug("av apiRTCManager onEvent ..."),Kr.onEvent("disconnectionWarning",qt.disconnectionWarning).onEvent("incomingCall",qt.incomingCall).onEvent("roomInvitation",qt.roomInvitation).onEvent("roomMemberUpdate",qt.roomMemberUpdate).onEvent("receiveRoomMessage",qt.receiveRoomMessage).onEvent("receiveIMMessage",qt.receiveIMMessage).onEvent("receiveData",qt.receiveData).onEvent("receiveGroupChatMessage",qt.receiveGroupChatMessage).onEvent("cloudEventOccurred",qt.cloudEventOccurred).onEvent("callEstablished",qt.callEstablished).onEvent("remoteStreamAdded",qt.remoteStreamAdded).onEvent("remoteStreamRemoved",qt.remoteStreamRemoved).onEvent("userMediaSuccess",qt.userMediaSuccess).onEvent("onCallStatsUpdate",qt.onCallStatsUpdate).onEvent("error",qt.error).onEvent("hangup",qt.hangup).onEvent("recordedStreamsAvailable",qt.recordedStreamsAvailable).onEvent("desktopCapture",qt.desktopCapture).onEvent("userMediaError",qt.userMediaError),apiRTC.addEventListener("channelEvent",qt.channelEvent),Ut.onUpdate(function(en){It.contactListUpdateListenerSetted===!1&&(pr.debug("No listener for contactListUpdate, storing event ..."),It.waitingContactListUpdateEvent.push(en)),zt.get(Ur(It)).emit("contactListUpdate",en)}),nu.set(Ur(It),qt),It}return $t=Xt,Qt=[{key:"getToken",value:function(){return this.token}},{key:"getApzToken",value:function(){var Ct=null;return apiRTC.session!==void 0&&apiRTC.session!==null&&(Ct=apiRTC.session.JWTApzToken),Ct}},{key:"getId",value:function(){return this.id}},{key:"getUserAgent",value:function(){return Ju.get(this)}},{key:"getContact",value:function(Ct){return pr.warn("getContact() - Method deprecated, use Session.getOrCreateContact() instead"),Ro.get().getOrCreateContact(Ct)}},{key:"getOrCreateContact",value:function(Ct){return Ro.get().getOrCreateContact(Ct)}},{key:"createConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pr.warn("createConversation() - Method deprecated, use Session.getConversation() instead"),this.getConversation(Ct,It)}},{key:"getConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pr.trace("Getting conversation "+Ct,It),po.get().getOrCreateConversation(Ct)}},{key:"getConference",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pr.trace("Getting conference "+Ct,It),po.get().getOrCreateConference(Ct)}},{key:"getOrCreateConversation",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=po.get().getNameFromTechnicalName(Ct);return po.get().isConference(Ct)?po.get().getOrCreateConference(Ut,It):po.get().getOrCreateConversation(Ut,It)}},{key:"getOrCreateConference",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.getOrCreateConversation(Ct,It)}},{key:"getActiveConversations",value:function(){var Ct,It={},Ut=po.get().getConversations(),Kt=qo(Ut.keys());try{for(Kt.s();!(Ct=Kt.n()).done;){var qt=Ct.value,en=Ut.get(qt);en.isJoined()&&(It[qt]=en)}}catch(tn){Kt.e(tn)}finally{Kt.f()}return It}},{key:"getActiveConferences",value:function(){var Ct,It={},Ut=po.get().getConferences(),Kt=qo(Ut.keys());try{for(Kt.s();!(Ct=Kt.n()).done;){var qt=Ct.value,en=Ut.get(qt);en.isJoined()&&(It[qt]=en)}}catch(tn){Kt.e(tn)}finally{Kt.f()}return It}},{key:"getWhiteboardClient",value:function(){return pr.trace("getWhiteboardClient()"),Kr.whiteBoardClient}},{key:"setUserData",value:function(Ct){this.userData.setProps(Ct).setToSession()}},{key:"setUsername",value:function(Ct){this.userData.setProp("username",Ct).setToSession()}},{key:"setPhotoUrl",value:function(Ct){this.userData.setProp("photo_url",Ct).setToSession()}},{key:"getUserData",value:function(){return this.userData}},{key:"getUsername",value:function(){return this.userData.get("username")!==null?this.userData.get("username"):this.userData.get("nickname")!==null?this.userData.get("nickname"):this.id.toString()}},{key:"getPhotoUrl",value:function(){return this.userData.get("photo_url")!==null?this.userData.get("photo_url"):this.userData.get("photoUrl")!==null?this.userData.get("photoUrl"):null}},{key:"subscribeToGroup",value:function(Ct){if(this.getSubscribedPresenceGroup().includes(Ct)){pr.debug("Already subscribed to this group");var It=apiCC.session.subscribeToPresenceGroupAddedByApiRTC.indexOf(Ct);It!==-1&&apiCC.session.subscribeToPresenceGroupAddedByApiRTC.splice(It,1)}else Kr.apiRTCSession.subscribePresenceGroup([Ct])}},{key:"unsubscribeToGroup",value:function(Ct){this.getSubscribedPresenceGroup().includes(Ct)?Kr.unsubscribeToPresenceGroup(Ct):pr.debug("Not subscribed to this group")}},{key:"joinGroup",value:function(Ct){if(this.getPresenceGroup().includes(Ct)){pr.debug("Already joined this group");var It=apiCC.session.presenceGroupAddedByApiRTC.indexOf(Ct);It!==-1&&apiCC.session.presenceGroupAddedByApiRTC.splice(It,1)}else Kr.joinAndSubscribeToPresenceGroup(Ct)}},{key:"leaveGroup",value:function(Ct){this.getPresenceGroup().includes(Ct)?Kr.leaveAndUnsubscribeToPresenceGroup(Ct):pr.debug("Group was not joined")}},{key:"subscribeToCloudEvent",value:function(Ct,It){Kr.subscribeToCloudEvent(Ct,It)}},{key:"unsubscribeToCloudEvent",value:function(Ct,It){Kr.unsubscribeToCloudEvent(Ct,It)}},{key:"joinConversationSpace",value:function(Ct){Kr.apiRTCSession.joinConversationSpace(Ct)}},{key:"leaveConversationSpace",value:function(Ct){Kr.apiRTCSession.leaveConversationSpace(Ct)}},{key:"getContacts",value:function(Ct){pr.trace("getContacts()");var It,Ut={},Kt=Ro.get().getContacts(Ct),qt=qo(Kt.keys());try{for(qt.s();!(It=qt.n()).done;){var en=It.value;Ut[en]=Kt.get(en)}}catch(tn){qt.e(tn)}finally{qt.f()}return Ut}},{key:"getContactsArray",value:function(Ct){pr.log("getContactsArray");var It=Ro.get().getContacts(Ct);return Array.from(It.values())}},{key:"getOnlineContactsArray",value:function(Ct){pr.log("getOnlineContactsArray");var It=Ro.get().getOnlineContacts(Ct);return Array.from(It.values())}},{key:"getCall",value:function(Ct){return pr.trace("getCall()"),Mr.get().getCall(Ct)}},{key:"getCalls",value:function(){pr.trace("getCalls()");var Ct,It={},Ut=Mr.get().getCalls(),Kt=qo(Ut.keys());try{for(Kt.s();!(Ct=Kt.n()).done;){var qt=Ct.value;It[qt]=Ut.get(qt)}}catch(en){Kt.e(en)}finally{Kt.f()}return It}},{key:"disconnect",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0};return new Promise(function(Ut,Kt){if(pr.info("disconnect()"),Ct.token===null&&Ct.id===null)pr.error("disconnect() - Session is already disconnected"),Kt("disconnect() - Session is already disconnected");else{var qt,en=qo(po.get().getConversations().keys());try{for(en.s();!(qt=en.n()).done;){var tn=qt.value;tn.status===et.g.CONVERSATION_STATUS_JOINED&&tn.leave()}}catch(fr){en.e(fr)}finally{en.f()}if(clearInterval(is.get(Ct)),is.set(Ct,null),Ct.token!==null&&It.hasOwnProperty("invalidateUserToken")&&It.invalidateUserToken)Bs.invalidateUserToken(Ct.token).then(function(){Vs=null,It.invalidateApiCCId=!0,Kr.disconnect(It),Ct.id=null,Ct.token=null;for(var fr=nu.get(Ct),vr=0,Pr=Object.keys(fr);vr<Pr.length;vr++){var Zr=Pr[vr];pr.info("Session, removing apiRTCManager event :",Zr);var na=fr[Zr];Kr.removeEventListener(Zr,na)}Ut()}).catch(function(fr){pr.error("disconnect() - An error occured during disconnection",fr),Kt(new Error("disconnect() - An error occured during disconnection"))});else{Vs=null,Kr.disconnect(It),Ct.id=null;for(var sn=nu.get(Ct),Sn=0,Dn=Object.keys(sn);Sn<Dn.length;Sn++){var nr=Dn[Sn];pr.info("Session, removing apiRTCManager event :",nr);var ar=sn[nr];Kr.removeEventListener(nr,ar)}Ut()}}})}},{key:"cloudRequest",value:function(Ct,It,Ut){return Bs.cloudRequest(Ct,It,Ut)}},{key:"sendRawData",value:function(Ct,It){return new Promise(function(Ut,Kt){Ct!=null?Kr.sendData(Ct.getId(),It).then(Ut).catch(function(qt){switch(qt){case et.g.ERROR_TIMED_OUT:Kt(Dt.g.createError(et.g.ERROR_TIMED_OUT,"sendRawData() - Data transmission timed out ",pr));break;case et.g.ERROR_NOT_FOUND:Kt(Dt.g.createError(et.g.ERROR_NOT_FOUND,"sendRawData() - Contact was not found ",pr));break;default:Kt(Dt.g.createError(et.g.ERROR_OTHER,"sendRawData() - Data transmission timed out ",pr))}}):Kt(Dt.g.createError(et.g.ERROR_OTHER,"sendRawData() - Contact undefined",pr))})}},{key:"startRecordingOutgoingStream",value:function(Ct,It){this.isRecording?pr.error("startRecordingOutgoingStream() - already recording"):(Kr.webRTCClient.startRecording(Ct,It),this.isRecording=!0)}},{key:"stopRecordingOutgoingStream",value:function(){var Ct=this;return new Promise(function(It,Ut){Ct.isRecording?(Ct.isRecording=!1,Kr.onceEvent("MCURecordedStreamsAvailable",function(Kt){It({filename:Kt.detail.recordedFileName,url:et.g.RECORD_PLAY_URL+Kt.detail.recordedFileName})}),Kr.webRTCClient.stopRecording()):(pr.error("stopRecordingOutgoingStream() - not recording"),Ut(new Error("stopRecordingOutgoingStream() - not recording")))})}},{key:"init",value:function(Ct){var It=this;this.id=Ct,Vs=this,is.get(this)===null&&is.set(this,setInterval(function(){im(It)},3e4))}},{key:"setMCUServer",value:function(Ct){Kr.webRTCClient.setMCUConnector(Ct)}},{key:"allowMultipleCalls",value:function(Ct){Kr.webRTCClient.setAllowMultipleCalls(Ct)}},{key:"setCallStatsMonitoringEnabled",value:function(Ct,It){Kr.webRTCClient.enableCallStatsMonitoring(Ct,It)}},{key:"setQualityEvaluatingEnabled",value:function(Ct,It){Kr.webRTCClient.enableQualityEvaluating(Ct,It)}},{key:"getContactFromWebSession",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){Bs.getSessionHistory(Ct,It.getToken()).then(function(qt){qt.exist.toString()!=="1"?Kt(Dt.g.createError(et.g.ERROR_NOT_FOUND,"No such web session",pr)):qt.user1.toString()===It.getId()?Ut(It.getContact(qt.user2)):qt.user2.toString()===It.getId()?Ut(It.getContact(qt.user1)):Kt(Dt.g.createError(et.g.ERROR_UNAUTHORIZED,"User has no access to this web session",pr))}).catch(function(qt){qt.hasOwnProperty("code")?Kt({code:qt.code,error:qt.error}):qt.hasOwnProperty("http_code")?qt.http_code.toString().startsWith("4")?Kt(Dt.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",pr)):Kt(Dt.g.createError(et.g.ERROR_SERVER_UNAVAILABLE,"Error while getting contact from websession",pr)):Kt(Dt.g.createError(et.g.ERROR_OTHER,"Error while getting contact from websession",pr))})})}},{key:"joinPointerSharingRoom",value:function(Ct){var It=this;return new Promise(function(Ut,Kt){if(as.get(It).hasOwnProperty(Ct))return Kt(Dt.g.createError(et.g.ERROR_WRONG_STATE,"joinPointerSharingRoom() - cannot join pointer sharing room again",pr));Kr.pointerSharingClient.joinRoom(Ct,{success:function(qt){var en=new ru(It,qt);as.get(It)[qt]=en,Ut(en)},failure:function(qt,en){Kt(qt==="timeout"?Dt.g.createError(et.g.ERROR_TIMED_OUT,"joinPointerSharingRoom() - cannot join pointer sharing room",pr):Dt.g.createError(et.g.ERROR_OTHER,"joinPointerSharingRoom() - cannot join pointer sharing room",pr))}})})}},{key:"getSubscribedPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.subscribeToPresenceGroup:[]}},{key:"getPresenceGroup",value:function(){return apiCC!==void 0&&apiCC.session!==null&&apiCC.session!==void 0?apiCC.session.presenceGroup:[]}}],xt=[{key:"getAvailableEvents",value:function(){return rm}},{key:"getActiveSession",value:function(){return Vs}}],Qt&&qu($t.prototype,Qt),xt&&qu($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un),ru=function(Wt,$t){this.session=Wt,this.roomId=$t,this.getRoomId=function(){return this.roomId},this.isActive=function(){return this.session!==null&&this.roomId!==null&&Kr.pointerSharingClient.roomActive(this.roomId)},this.leaveRoom=function(){var Qt=this;return new Promise(function(xt,Bt){if(Qt.session===null||Qt.roomId===null)return Bt(Dt.g.createError(et.g.ERROR_WRONG_STATE,"leaveRoom() - cannot leave room again",pr));Kr.pointerSharingClient.leaveRoom(Qt.roomId),delete as.get(Qt.session)[Qt.roomId],Qt.session=null,Qt.roomId=null,xt()})},this.invite=function(Qt,xt){var Bt=this;return new Promise(function(dn,pn){if(Bt.session===null||Bt.roomId===null)return pn(Dt.g.createError(et.g.ERROR_WRONG_STATE,"invite() - cannot invite",pr));Kr.pointerSharingClient.inviteInRoom(Bt.roomId,Qt.getId(),xt),dn()})},this.sendPointerLocation=function(Qt,xt,Bt,dn){var pn=this;return new Promise(function(Xt,Ct){return pn.session===null||pn.roomId===null?Ct(Dt.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",pr)):Kr.pointerSharingClient.sendPointerLocation(pn.roomId,Qt,xt,Bt,dn)?void Xt():Ct(Dt.g.createError(et.g.ERROR_WRONG_STATE,"sendPointerLocation() - cannot send pointer location",pr))})}},im=function(Wt){for(var $t=Wt.getActiveConferences(),Qt=0,xt=Object.keys($t);Qt<xt.length;Qt++){var Bt=$t[xt[Qt]];Bs.updateConferencePresence(Bt,Wt,Kr.getActiveApiKey())}},iu=s(7618);function Hs(Wt){var $t=typeof Map=="function"?new Map:void 0;return Hs=function(Qt){if(Qt===null||(xt=Qt,Function.toString.call(xt).indexOf("[native code]")===-1))return Qt;var xt;if(typeof Qt!="function")throw new TypeError("Super expression must either be null or a function");if($t!==void 0){if($t.has(Qt))return $t.get(Qt);$t.set(Qt,Bt)}function Bt(){return au(Qt,arguments,Fo(this).constructor)}return Bt.prototype=Object.create(Qt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),ls(Bt,Qt)},Hs(Wt)}function au(Wt,$t,Qt){return au=ep()?Reflect.construct.bind():function(xt,Bt,dn){var pn=[null];pn.push.apply(pn,Bt);var Xt=new(Function.bind.apply(xt,pn));return dn&&ls(Xt,dn.prototype),Xt},au.apply(null,arguments)}function ou(){return ou=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(Wt,$t,Qt){var xt=am(Wt,$t);if(xt){var Bt=Object.getOwnPropertyDescriptor(xt,$t);return Bt.get?Bt.get.call(arguments.length<3?Wt:Qt):Bt.value}},ou.apply(this,arguments)}function am(Wt,$t){for(;!Object.prototype.hasOwnProperty.call(Wt,$t)&&(Wt=Fo(Wt))!==null;);return Wt}function ss(Wt){return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},ss(Wt)}function oo(){oo=function(){return Wt};var Wt={},$t=Object.prototype,Qt=$t.hasOwnProperty,xt=typeof Symbol=="function"?Symbol:{},Bt=xt.iterator||"@@iterator",dn=xt.asyncIterator||"@@asyncIterator",pn=xt.toStringTag||"@@toStringTag";function Xt(ur,sr,Or){return Object.defineProperty(ur,sr,{value:Or,enumerable:!0,configurable:!0,writable:!0}),ur[sr]}try{Xt({},"")}catch{Xt=function(sr,Or,xr){return sr[Or]=xr}}function Ct(ur,sr,Or,xr){var Er=sr&&sr.prototype instanceof Kt?sr:Kt,$a=Object.create(Er.prototype),to=new Zr(xr||[]);return $a._invoke=function(vo,Oo,Hr){var fo="suspendedStart";return function(So,ps){if(fo==="executing")throw new Error("Generator is already running");if(fo==="completed"){if(So==="throw")throw ps;return{value:void 0,done:!0}}for(Hr.method=So,Hr.arg=ps;;){var fs=Hr.delegate;if(fs){var lo=fr(fs,Hr);if(lo){if(lo===Ut)continue;return lo}}if(Hr.method==="next")Hr.sent=Hr._sent=Hr.arg;else if(Hr.method==="throw"){if(fo==="suspendedStart")throw fo="completed",Hr.arg;Hr.dispatchException(Hr.arg)}else Hr.method==="return"&&Hr.abrupt("return",Hr.arg);fo="executing";var hs=It(vo,Oo,Hr);if(hs.type==="normal"){if(fo=Hr.done?"completed":"suspendedYield",hs.arg===Ut)continue;return{value:hs.arg,done:Hr.done}}hs.type==="throw"&&(fo="completed",Hr.method="throw",Hr.arg=hs.arg)}}}(ur,Or,to),$a}function It(ur,sr,Or){try{return{type:"normal",arg:ur.call(sr,Or)}}catch(xr){return{type:"throw",arg:xr}}}Wt.wrap=Ct;var Ut={};function Kt(){}function qt(){}function en(){}var tn={};Xt(tn,Bt,function(){return this});var sn=Object.getPrototypeOf,Sn=sn&&sn(sn(na([])));Sn&&Sn!==$t&&Qt.call(Sn,Bt)&&(tn=Sn);var Dn=en.prototype=Kt.prototype=Object.create(tn);function nr(ur){["next","throw","return"].forEach(function(sr){Xt(ur,sr,function(Or){return this._invoke(sr,Or)})})}function ar(ur,sr){function Or(Er,$a,to,vo){var Oo=It(ur[Er],ur,$a);if(Oo.type!=="throw"){var Hr=Oo.arg,fo=Hr.value;return fo&&ss(fo)=="object"&&Qt.call(fo,"__await")?sr.resolve(fo.__await).then(function(So){Or("next",So,to,vo)},function(So){Or("throw",So,to,vo)}):sr.resolve(fo).then(function(So){Hr.value=So,to(Hr)},function(So){return Or("throw",So,to,vo)})}vo(Oo.arg)}var xr;this._invoke=function(Er,$a){function to(){return new sr(function(vo,Oo){Or(Er,$a,vo,Oo)})}return xr=xr?xr.then(to,to):to()}}function fr(ur,sr){var Or=ur.iterator[sr.method];if(Or===void 0){if(sr.delegate=null,sr.method==="throw"){if(ur.iterator.return&&(sr.method="return",sr.arg=void 0,fr(ur,sr),sr.method==="throw"))return Ut;sr.method="throw",sr.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ut}var xr=It(Or,ur.iterator,sr.arg);if(xr.type==="throw")return sr.method="throw",sr.arg=xr.arg,sr.delegate=null,Ut;var Er=xr.arg;return Er?Er.done?(sr[ur.resultName]=Er.value,sr.next=ur.nextLoc,sr.method!=="return"&&(sr.method="next",sr.arg=void 0),sr.delegate=null,Ut):Er:(sr.method="throw",sr.arg=new TypeError("iterator result is not an object"),sr.delegate=null,Ut)}function vr(ur){var sr={tryLoc:ur[0]};1 in ur&&(sr.catchLoc=ur[1]),2 in ur&&(sr.finallyLoc=ur[2],sr.afterLoc=ur[3]),this.tryEntries.push(sr)}function Pr(ur){var sr=ur.completion||{};sr.type="normal",delete sr.arg,ur.completion=sr}function Zr(ur){this.tryEntries=[{tryLoc:"root"}],ur.forEach(vr,this),this.reset(!0)}function na(ur){if(ur){var sr=ur[Bt];if(sr)return sr.call(ur);if(typeof ur.next=="function")return ur;if(!isNaN(ur.length)){var Or=-1,xr=function Er(){for(;++Or<ur.length;)if(Qt.call(ur,Or))return Er.value=ur[Or],Er.done=!1,Er;return Er.value=void 0,Er.done=!0,Er};return xr.next=xr}}return{next:Vo}}function Vo(){return{value:void 0,done:!0}}return qt.prototype=en,Xt(Dn,"constructor",en),Xt(en,"constructor",qt),qt.displayName=Xt(en,pn,"GeneratorFunction"),Wt.isGeneratorFunction=function(ur){var sr=typeof ur=="function"&&ur.constructor;return!!sr&&(sr===qt||(sr.displayName||sr.name)==="GeneratorFunction")},Wt.mark=function(ur){return Object.setPrototypeOf?Object.setPrototypeOf(ur,en):(ur.__proto__=en,Xt(ur,pn,"GeneratorFunction")),ur.prototype=Object.create(Dn),ur},Wt.awrap=function(ur){return{__await:ur}},nr(ar.prototype),Xt(ar.prototype,dn,function(){return this}),Wt.AsyncIterator=ar,Wt.async=function(ur,sr,Or,xr,Er){Er===void 0&&(Er=Promise);var $a=new ar(Ct(ur,sr,Or,xr),Er);return Wt.isGeneratorFunction(sr)?$a:$a.next().then(function(to){return to.done?to.value:$a.next()})},nr(Dn),Xt(Dn,pn,"Generator"),Xt(Dn,Bt,function(){return this}),Xt(Dn,"toString",function(){return"[object Generator]"}),Wt.keys=function(ur){var sr=[];for(var Or in ur)sr.push(Or);return sr.reverse(),function xr(){for(;sr.length;){var Er=sr.pop();if(Er in ur)return xr.value=Er,xr.done=!1,xr}return xr.done=!0,xr}},Wt.values=na,Zr.prototype={constructor:Zr,reset:function(ur){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Pr),!ur)for(var sr in this)sr.charAt(0)==="t"&&Qt.call(this,sr)&&!isNaN(+sr.slice(1))&&(this[sr]=void 0)},stop:function(){this.done=!0;var ur=this.tryEntries[0].completion;if(ur.type==="throw")throw ur.arg;return this.rval},dispatchException:function(ur){if(this.done)throw ur;var sr=this;function Or(Oo,Hr){return $a.type="throw",$a.arg=ur,sr.next=Oo,Hr&&(sr.method="next",sr.arg=void 0),!!Hr}for(var xr=this.tryEntries.length-1;xr>=0;--xr){var Er=this.tryEntries[xr],$a=Er.completion;if(Er.tryLoc==="root")return Or("end");if(Er.tryLoc<=this.prev){var to=Qt.call(Er,"catchLoc"),vo=Qt.call(Er,"finallyLoc");if(to&&vo){if(this.prev<Er.catchLoc)return Or(Er.catchLoc,!0);if(this.prev<Er.finallyLoc)return Or(Er.finallyLoc)}else if(to){if(this.prev<Er.catchLoc)return Or(Er.catchLoc,!0)}else{if(!vo)throw new Error("try statement without catch or finally");if(this.prev<Er.finallyLoc)return Or(Er.finallyLoc)}}}},abrupt:function(ur,sr){for(var Or=this.tryEntries.length-1;Or>=0;--Or){var xr=this.tryEntries[Or];if(xr.tryLoc<=this.prev&&Qt.call(xr,"finallyLoc")&&this.prev<xr.finallyLoc){var Er=xr;break}}Er&&(ur==="break"||ur==="continue")&&Er.tryLoc<=sr&&sr<=Er.finallyLoc&&(Er=null);var $a=Er?Er.completion:{};return $a.type=ur,$a.arg=sr,Er?(this.method="next",this.next=Er.finallyLoc,Ut):this.complete($a)},complete:function(ur,sr){if(ur.type==="throw")throw ur.arg;return ur.type==="break"||ur.type==="continue"?this.next=ur.arg:ur.type==="return"?(this.rval=this.arg=ur.arg,this.method="return",this.next="end"):ur.type==="normal"&&sr&&(this.next=sr),Ut},finish:function(ur){for(var sr=this.tryEntries.length-1;sr>=0;--sr){var Or=this.tryEntries[sr];if(Or.finallyLoc===ur)return this.complete(Or.completion,Or.afterLoc),Pr(Or),Ut}},catch:function(ur){for(var sr=this.tryEntries.length-1;sr>=0;--sr){var Or=this.tryEntries[sr];if(Or.tryLoc===ur){var xr=Or.completion;if(xr.type==="throw"){var Er=xr.arg;Pr(Or)}return Er}}throw new Error("illegal catch attempt")},delegateYield:function(ur,sr,Or){return this.delegate={iterator:na(ur),resultName:sr,nextLoc:Or},this.method==="next"&&(this.arg=void 0),Ut}},Wt}function Xu(Wt,$t,Qt,xt,Bt,dn,pn){try{var Xt=Wt[dn](pn),Ct=Xt.value}catch(It){return void Qt(It)}Xt.done?$t(Ct):Promise.resolve(Ct).then(xt,Bt)}function Uo(Wt){return function(){var $t=this,Qt=arguments;return new Promise(function(xt,Bt){var dn=Wt.apply($t,Qt);function pn(Ct){Xu(dn,xt,Bt,pn,Xt,"next",Ct)}function Xt(Ct){Xu(dn,xt,Bt,pn,Xt,"throw",Ct)}pn(void 0)})}}function jo(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return Qu(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?Qu(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function Qu(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function zs(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function Zu(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function Gs(Wt,$t,Qt){return $t&&Zu(Wt.prototype,$t),Qt&&Zu(Wt,Qt),Object.defineProperty(Wt,"prototype",{writable:!1}),Wt}function Ks(Wt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function");Wt.prototype=Object.create($t&&$t.prototype,{constructor:{value:Wt,writable:!0,configurable:!0}}),Object.defineProperty(Wt,"prototype",{writable:!1}),$t&&ls(Wt,$t)}function ls(Wt,$t){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},ls(Wt,$t)}function Ys(Wt){var $t=ep();return function(){var Qt,xt=Fo(Wt);if($t){var Bt=Fo(this).constructor;Qt=Reflect.construct(xt,arguments,Bt)}else Qt=xt.apply(this,arguments);return om(this,Qt)}}function om(Wt,$t){if($t&&(ss($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _i(Wt)}function _i(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function ep(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fo(Wt){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Fo(Wt)}var Kn=ft.Y.get("Stream"),su=In.get(),sm=po.get(),lm=["stopped","trackStopped","audioAmplitude","audioAmplitudeInfo","muteStateChange","activeStateChange","backgroundSubstractionStopVisibilityChange","backgroundSubstractionStopComputeTime","AIESnapshot","AIELog","flowStatusChanged","audioFlowStatusChanged","videoFlowStatusChanged","remoteAudioFlowStatusChanged","remoteVideoFlowStatusChanged","release","constraintsChanged"],yo=new Map,qs=new WeakMap,cs=new WeakMap,ds=new WeakMap,lu=new WeakMap,Jo={},so=function(Wt){Ks(Qt,Wt);var $t=Ys(Qt);function Qt(xt){var Bt,dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zs(this,Qt),Bt=$t.call(this,Kn),dn.constructor!==!0)throw new Error("Stream constructor should not be used directly, please use a static method of class Stream such as : createStreamFromUserMedia, createStreamFromMediaStream, createScreensharingStream");if(delete dn.constructor,!dn.hasOwnProperty("type"))throw new Error("Cannot create Stream with no type");if(Kn.debug("Create Stream with options",dn),Bt.data=xt,Bt.audioInput=dn.hasOwnProperty("audioInput")?dn.audioInput:null,Bt.videoInput=dn.hasOwnProperty("videoInput")?dn.videoInput:null,Bt.audioFilterIsApplied=!1,Bt.videoFilterIsApplied=!1,Bt.audioAppliedFilter="none",Bt.videoAppliedFilter="none",Bt.originalMediaTrack=null,dn.hasOwnProperty("userMediaStreamId")?(Bt.userMediaStreamId=dn.userMediaStreamId,Bt.isRemote=!1,yo.set(Bt.userMediaStreamId,_i(Bt))):(Bt.userMediaStreamId=null,Bt.isRemote=!0),Dt.g.isPropertyTypeof(dn,"streamId","number")?Bt.streamId=dn.streamId:Bt.userMediaStreamId!==null?Bt.streamId=Number(Bt.userMediaStreamId):Number.MAX_SAFE_INTEGER!==void 0?Bt.streamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER):Bt.streamId=Math.floor(1024*Math.random()*1024*1024),Bt.contact=dn.hasOwnProperty("contact")?dn.contact:null,dn.hasOwnProperty("callId")?(Bt.callId=dn.callId,Bt.callAudioAvailable=dn.callAudioAvailable,Bt.callAudioActive=dn.callAudioActive,Bt.callAudioMuted=dn.callAudioMuted,Bt.callAudioSilent=dn.callAudioSilent,Bt.callVideoAvailable=dn.callVideoAvailable,Bt.callVideoActive=dn.callVideoActive,Bt.callVideoMuted=dn.callVideoMuted,Bt.callVideoSilent=dn.callVideoSilent):Bt.callId=null,Bt.publishedInConversations=new Map,Bt.mediaRecorder=null,Bt.recordedBlobs=[],qs.set(_i(Bt),!!dn.hasOwnProperty("screensharing")&&dn.screensharing),cs.set(_i(Bt),null),ds.set(_i(Bt),null),Bt.screensharingRemoteAccessStream=!1,apiRTC.userAgentInstance.apiRTCStreamsList.set(Bt.streamId,_i(Bt)),Bt.type=dn.type,Bt.visibilityChangeHandlerWhenTorchOn=function(sn){if(Kn.debug("visibilityChangeHandlerWhenTorchOn :",document.visibilityState),document.visibilityState==="hidden"&&(Kn.debug("visibilitychange is now hidden"),apiRTC.osName==="Android")){var Sn={video:{advanced:[{torch:!1}]}};Bt.informContactsOfChangedConstraints(Sn),Bt.emitConstraintsChanged(Sn),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)}},apiRTC.browser!=="IE"&&Bt.data!==null){var pn,Xt=function(sn){sn.addEventListener("ended",function(Sn){Jo.hasOwnProperty(sn.id)||(zt.get(_i(Bt)).emit("trackStopped",{type:sn.kind,id:sn.id,reason:"ended"}),Jo[sn.id]=!0)})},Ct=jo(Bt.data.getVideoTracks());try{for(Ct.s();!(pn=Ct.n()).done;){var It=pn.value;Xt(It)}}catch(sn){Ct.e(sn)}finally{Ct.f()}var Ut,Kt=jo(Bt.data.getAudioTracks());try{for(Kt.s();!(Ut=Kt.n()).done;){var qt=Ut.value;Xt(qt)}}catch(sn){Kt.e(sn)}finally{Kt.f()}}var en={};if(Dt.g.isTypeof(Bt.userMediaStreamId,"string")?(en.userMediaStop=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId){var Sn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("stopped",Sn);var Dn=lu.get(_i(Bt));if(Dn)for(var nr in Dn)apiRTC.removeEventListener(nr,Dn[nr])}},en.localStreamUpdated=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId&&sn.detail.callId===null){if(sn.detail.changeList.indexOf("audioIsMuted")>=0){var Sn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"audio",muted:sn.detail.audioIsMuted};zt.get(_i(Bt)).emit("muteStateChange",Sn),Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")}if(sn.detail.changeList.indexOf("videoIsMuted")>=0){var Dn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId,type:"video",muted:sn.detail.videoIsMuted};zt.get(_i(Bt)).emit("muteStateChange",Dn),Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video")}sn.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),sn.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}},en.backgroundSubstractionStopVisibilityChange=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId){var Sn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("backgroundSubstractionStopVisibilityChange",Sn)}},en.backgroundSubstractionStopComputeTime=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId){var Sn={streamId:Bt.streamId,userMediaStreamId:Bt.userMediaStreamId};zt.get(_i(Bt)).emit("backgroundSubstractionStopComputeTime",Sn)}},en.AIESnapshot=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId){var Sn=sn.detail.image;zt.get(_i(Bt)).emit("AIESnapshot",Sn)}},en.AIELog=function(sn){if(sn.detail.userMediaStreamId===Bt.userMediaStreamId){var Sn=sn.detail.log;zt.get(_i(Bt)).emit("AIELog",Sn)}}):Dt.g.isTypeof(Bt.callId,"string")&&(en.hangup=function(sn){if(sn.detail.hangupType==="remote"&&sn.detail.callId===Bt.callId){var Sn={streamId:Bt.streamId,callId:Bt.callId};zt.get(_i(Bt)).emit("stopped",Sn);var Dn=lu.get(_i(Bt));for(var nr in Dn)apiRTC.removeEventListener(nr,Dn[nr])}},en.remoteStreamUpdated=function(sn){if(sn.detail.callId===Bt.callId){if(sn.detail.changeList.indexOf("audioIsActive")>=0){Bt.callAudioActive=sn.detail.audioIsActive;var Sn={streamId:Bt.streamId,callId:Bt.callId,type:"audio",active:sn.detail.audioIsActive};zt.get(_i(Bt)).emit("activeStateChange",Sn)}if(sn.detail.changeList.indexOf("audioIsMuted")>=0){Bt.callAudioMuted=sn.detail.audioIsMuted;var Dn={streamId:Bt.streamId,callId:Bt.callId,type:"audio",muted:sn.detail.audioIsMuted};zt.get(_i(Bt)).emit("muteStateChange",Dn),Bt.sendRemoteAudioFlowStatusChanged({enabled:!sn.detail.audioIsMuted,muted:sn.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!sn.detail.audioIsMuted,muted:sn.detail.audioIsSilent})}if(sn.detail.changeList.indexOf("videoIsActive")>=0){Bt.callVideoActive=sn.detail.videoIsActive;var nr={streamId:Bt.streamId,callId:Bt.callId,type:"video",active:sn.detail.videoIsActive};zt.get(_i(Bt)).emit("activeStateChange",nr)}if(sn.detail.changeList.indexOf("videoIsMuted")>=0){Bt.callVideoMuted=sn.detail.videoIsMuted;var ar={streamId:Bt.streamId,callId:Bt.callId,type:"video",muted:sn.detail.videoIsMuted};zt.get(_i(Bt)).emit("muteStateChange",ar),Bt.sendRemoteVideoFlowStatusChanged({enabled:!sn.detail.videoIsMuted,muted:sn.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!sn.detail.videoIsMuted,muted:sn.detail.videoIsSilent})}sn.detail.changeList.indexOf("audioIsSilent")>=0&&(Bt.callAudioSilent=sn.detail.audioIsSilent,Bt.sendRemoteAudioFlowStatusChanged({enabled:!sn.detail.audioIsMuted,muted:sn.detail.audioIsSilent}),Bt.sendFlowStatusChangedForRemote("audio",{enabled:!sn.detail.audioIsMuted,muted:sn.detail.audioIsSilent})),sn.detail.changeList.indexOf("videoIsSilent")>=0&&(Bt.callVideoSilent=sn.detail.videoIsSilent,Bt.sendRemoteVideoFlowStatusChanged({enabled:!sn.detail.videoIsMuted,muted:sn.detail.videoIsSilent}),Bt.sendFlowStatusChangedForRemote("video",{enabled:!sn.detail.videoIsMuted,muted:sn.detail.videoIsSilent})),sn.detail.changeList.indexOf("audioIsSilentLocally")>=0&&(Bt.sendAudioFlowStatusChanged(),Bt.sendFlowStatusChanged("audio")),sn.detail.changeList.indexOf("videoIsSilentLocally")>=0&&(Bt.sendVideoFlowStatusChanged(),Bt.sendFlowStatusChanged("video"))}}),Object.keys(en).length>0)for(var tn in lu.set(_i(Bt),en),en)apiRTC.addEventListener(tn,en[tn]);return Bt}return Gs(Qt,[{key:"getContact",value:function(){return this.contact}},{key:"getData",value:function(){return this.data}},{key:"getConversations",value:function(){var xt,Bt=[],dn=jo(this.publishedInConversations.keys());try{for(dn.s();!(xt=dn.n()).done;){var pn=xt.value;Bt.push(sm.getConversations(pn))}}catch(Xt){dn.e(Xt)}finally{dn.f()}return Bt}},{key:"isScreensharing",value:function(){return qs.get(this)}},{key:"isScreensharingRemoteAccess",value:function(){return this.screensharingRemoteAccessStream}},{key:"hasData",value:function(){return this.data!==null}},{key:"hasVideo",value:function(){return this.callId?this.callVideoAvailable&&this.callVideoActive:!!this.hasData()&&this.data.getVideoTracks().length>0}},{key:"hasAudio",value:function(){return this.callId?this.callAudioAvailable&&this.callAudioActive:!!this.hasData()&&this.data.getAudioTracks().length>0}},{key:"isVideoMuted",value:function(){if(this.callId)return this.callVideoSilent;if(this.hasData()){var xt=this.data.getVideoTracks();if(xt&&xt.length>0)return xt[0].muted}return!0}},{key:"isVideoEnabled",value:function(){if(this.callId)return!this.callVideoMuted;if(this.hasData()){var xt=this.data.getVideoTracks();return xt&&xt.length>0&&xt[0].enabled}return!1}},{key:"isAudioMuted",value:function(){if(this.callId)return this.callAudioSilent;if(this.hasData()){var xt=this.data.getAudioTracks();if(xt&&xt.length>0)return xt[0].muted}return!0}},{key:"isAudioEnabled",value:function(){if(this.callId)return!this.callAudioMuted;if(this.hasData()){var xt=this.data.getAudioTracks();return xt&&xt.length>0&&xt[0].enabled}return!1}},{key:"getType",value:function(){return this.type}},{key:"release",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.childType==="noiseReduction"&&this.parent!==void 0){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx);var Bt=apiCC.getUserMediaStream(this.parent.userMediaStreamId);apiCC.audioProcessor.listenToAudio(this.parent.data,Bt)}this.hasData()&&(this.releaseAudio(),this.releaseVideo(),this.data=null,this.userMediaStreamId&&(apiCC.releaseUserMediaStream(this.userMediaStreamId),yo.delete(this.userMediaStreamId))),zt.get(this).emit("release",{streamId:this.streamId,userMediaStreamId:this.userMediaStreamId}),xt.releaseChildrenStream!==!1&&this.releaseAllChildren(),xt.releaseParentStream!==!1&&this.parent!==void 0&&(Kn.debug("release parent is also requested"),this.parent.release(xt)),Kn.debug("Removing in apiRTCStreamsList :",this.streamId),apiRTC.userAgentInstance.apiRTCStreamsList.delete(this.streamId)}},{key:"releaseAudio",value:function(){var xt=this;this.hasData()&&(this.disableAudioAnalysis(),this.data.getAudioTracks().forEach(function(Bt){Bt.stop(),Jo.hasOwnProperty(Bt.id)||(zt.get(xt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseAudio"}),Jo[Bt.id]=!0)}))}},{key:"releaseVideo",value:function(){var xt=this;this.hasData()&&this.data.getVideoTracks().forEach(function(Bt){Bt.stop(),Jo.hasOwnProperty(Bt.id)||(zt.get(xt).emit("trackStopped",{type:Bt.kind,id:Bt.id,reason:"releaseVideo"}),Jo[Bt.id]=!0)})}},{key:"muteAudio",value:function(){Kn.warn("This method is deprecated now, please use Stream.disableAudio() instead"),this.disableAudio()}},{key:"muteVideo",value:function(){Kn.warn("This method is deprecated now, please use Stream.disableVideo() instead"),this.disableVideo()}},{key:"unmuteAudio",value:function(){Kn.warn("This method is deprecated now, please use Stream.enableAudio() instead"),this.enableAudio()}},{key:"unmuteVideo",value:function(){Kn.warn("This method is deprecated now, please use Stream.enableVideo() instead"),this.enableVideo()}},{key:"sendStreamRequest",value:function(xt,Bt,dn){var pn={};pn.streamId=this.streamId;var Xt=this.publishedInConversations.keys();pn.roomname=Xt.next().value,this.contact.sendRequest(xt,pn).then(function(){return Bt()}).catch(function(Ct){return Kn.error("Error on sendRequest :",Ct),dn()})}},{key:"enableAudio",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var dn=Uo(oo().mark(function pn(Xt,Ct){var It;return oo().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(xt.isAudioEnabled()!==!0||xt.isRemote!==!1){Ut.next=3;break}return Kn.debug("audio already enabled"),Ut.abrupt("return",Xt());case 3:if(!xt.userMediaStreamId){Ut.next=16;break}if(It=apiCC.getUserMediaStream(xt.userMediaStreamId)){Ut.next=7;break}return Ut.abrupt("return",Ct());case 7:if(It.unMuteAudioOnStreams("enabled"),xt.parent===void 0){Ut.next=12;break}return Kn.debug("this is a child stream, need to unmute parent if necessary"),Ut.next=12,xt.parent.enableAudio();case 12:return xt.childrens!==void 0&&xt.childrens.forEach(function(){var Kt=Uo(oo().mark(function qt(en,tn){return oo().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return sn.next=2,en.enableAudio();case 2:case"end":return sn.stop()}},qt)}));return function(qt,en){return Kt.apply(this,arguments)}}()),Ut.abrupt("return",Xt());case 16:if(!xt.callId){Ut.next=29;break}if(Bt!==!0){Ut.next=23;break}Kn.debug("enableAudio remote with applyRemotely"),Kn.debug("this.contact :",xt.contact),xt.sendStreamRequest(et.g.CONTACT_ENABLE_AUDIO_REQUEST,Xt,Ct),Ut.next=28;break;case 23:if(xt.hasData()){Ut.next=25;break}return Ut.abrupt("return",Ct());case 25:xt.data.getAudioTracks().forEach(function(Kt){Kt.enabled=!0}),xt.sendAudioFlowStatusChanged(),xt.sendFlowStatusChanged("audio");case 28:return Ut.abrupt("return",Xt());case 29:return Ut.abrupt("return",Ct());case 30:case"end":return Ut.stop()}},pn)}));return function(pn,Xt){return dn.apply(this,arguments)}}())}},{key:"disableAudio",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var dn=Uo(oo().mark(function pn(Xt,Ct){var It;return oo().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(xt.isAudioEnabled()!==!1||xt.isRemote!==!1){Ut.next=3;break}return Kn.debug("audio already disabled"),Ut.abrupt("return",Xt());case 3:if(!xt.userMediaStreamId){Ut.next=16;break}if(It=apiCC.getUserMediaStream(xt.userMediaStreamId)){Ut.next=7;break}return Ut.abrupt("return",Ct());case 7:if(It.muteAudioOnStreams("enabled"),xt.parent===void 0){Ut.next=12;break}return Kn.debug("this is a child stream, need to mute parent if necessary"),Ut.next=12,xt.parent.disableAudio();case 12:return xt.childrens!==void 0&&xt.childrens.forEach(function(){var Kt=Uo(oo().mark(function qt(en,tn){return oo().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return sn.next=2,en.disableAudio();case 2:case"end":return sn.stop()}},qt)}));return function(qt,en){return Kt.apply(this,arguments)}}()),Ut.abrupt("return",Xt());case 16:if(!xt.callId){Ut.next=29;break}if(Bt!==!0){Ut.next=23;break}Kn.debug("disableAudio remote with applyRemotely"),Kn.debug("this.contact :",xt.contact),xt.sendStreamRequest(et.g.CONTACT_DISABLE_AUDIO_REQUEST,Xt,Ct),Ut.next=28;break;case 23:if(xt.hasData()){Ut.next=25;break}return Ut.abrupt("return",Ct());case 25:xt.data.getAudioTracks().forEach(function(Kt){Kt.enabled=!1}),xt.sendAudioFlowStatusChanged(),xt.sendFlowStatusChanged("audio");case 28:return Ut.abrupt("return",Xt());case 29:return Ut.abrupt("return",Ct());case 30:case"end":return Ut.stop()}},pn)}));return function(pn,Xt){return dn.apply(this,arguments)}}())}},{key:"enableVideo",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var dn=Uo(oo().mark(function pn(Xt,Ct){var It;return oo().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(xt.isVideoEnabled()!==!0||xt.isRemote!==!1){Ut.next=3;break}return Kn.debug("video already enabled"),Ut.abrupt("return",Xt());case 3:if(!xt.userMediaStreamId){Ut.next=16;break}if(It=apiCC.getUserMediaStream(xt.userMediaStreamId)){Ut.next=7;break}return Ut.abrupt("return",Ct());case 7:if(It.unMuteVideoOnStreams("enabled"),xt.parent===void 0){Ut.next=12;break}return Kn.debug("this is a child stream, need to unmute parent if necessary"),Ut.next=12,xt.parent.enableVideo();case 12:return xt.childrens!==void 0&&xt.childrens.forEach(function(){var Kt=Uo(oo().mark(function qt(en,tn){return oo().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return sn.next=2,en.enableVideo();case 2:case"end":return sn.stop()}},qt)}));return function(qt,en){return Kt.apply(this,arguments)}}()),Ut.abrupt("return",Xt());case 16:if(!xt.callId){Ut.next=29;break}if(Bt!==!0){Ut.next=23;break}Kn.debug("enableVideo remote with applyRemotely"),Kn.debug("this.contact :",xt.contact),xt.sendStreamRequest(et.g.CONTACT_ENABLE_VIDEO_REQUEST,Xt,Ct),Ut.next=28;break;case 23:if(xt.hasData()){Ut.next=25;break}return Ut.abrupt("return",Ct());case 25:xt.data.getVideoTracks().forEach(function(Kt){Kt.enabled=!0}),xt.sendVideoFlowStatusChanged(),xt.sendFlowStatusChanged("video");case 28:return Ut.abrupt("return",Xt());case 29:return Ut.abrupt("return",Ct());case 30:case"end":return Ut.stop()}},pn)}));return function(pn,Xt){return dn.apply(this,arguments)}}())}},{key:"disableVideo",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return new Promise(function(){var dn=Uo(oo().mark(function pn(Xt,Ct){var It;return oo().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(xt.isVideoEnabled()!==!1||xt.isRemote!==!1){Ut.next=3;break}return Kn.debug("video already disabled"),Ut.abrupt("return",Xt());case 3:if(!xt.userMediaStreamId){Ut.next=16;break}if(It=apiCC.getUserMediaStream(xt.userMediaStreamId)){Ut.next=7;break}return Ut.abrupt("return",Ct());case 7:if(It.muteVideoOnStreams("enabled"),xt.parent===void 0){Ut.next=12;break}return Kn.debug("this is a child stream, need to mute parent if necessary"),Ut.next=12,xt.parent.disableVideo();case 12:return xt.childrens!==void 0&&xt.childrens.forEach(function(){var Kt=Uo(oo().mark(function qt(en,tn){return oo().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return sn.next=2,en.disableVideo();case 2:case"end":return sn.stop()}},qt)}));return function(qt,en){return Kt.apply(this,arguments)}}()),Ut.abrupt("return",Xt());case 16:if(!xt.callId){Ut.next=29;break}if(Bt!==!0){Ut.next=23;break}Kn.debug("disableVideo remote with applyRemotely"),Kn.debug("this.contact :",xt.contact),xt.sendStreamRequest(et.g.CONTACT_DISABLE_VIDEO_REQUEST,Xt,Ct),Ut.next=28;break;case 23:if(xt.hasData()){Ut.next=25;break}return Ut.abrupt("return",Ct());case 25:xt.data.getVideoTracks().forEach(function(Kt){Kt.enabled=!1}),xt.sendVideoFlowStatusChanged(),xt.sendFlowStatusChanged("video");case 28:return Ut.abrupt("return",Xt());case 29:return Ut.abrupt("return",Ct());case 30:case"end":return Ut.stop()}},pn)}));return function(pn,Xt){return dn.apply(this,arguments)}}())}},{key:"getAudioFlowStatus",value:function(){var xt={};return this.data.getAudioTracks().forEach(function(Bt){xt.enabled=Bt.enabled,xt.muted=Bt.muted}),xt}},{key:"getVideoFlowStatus",value:function(){var xt={};return this.data.getVideoTracks().forEach(function(Bt){xt.enabled=Bt.enabled,xt.muted=Bt.muted}),xt}},{key:"getRemoteAudioFlowStatus",value:function(){var xt=this;return new Promise(function(Bt,dn){if(!xt.isRemote)return dn("Please use this function on a remote Stream");if(Kn.debug("getRemoteAudioFlowStatus()"),xt.contact===null)return dn("No contact associated");var pn=xt.addPendingPromise("getRemoteAudioFlowStatus",Bt,dn);xt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:xt.callId,streamId:xt.getId(),timeout:pn})})}},{key:"getRemoteVideoFlowStatus",value:function(){var xt=this;return new Promise(function(Bt,dn){if(!xt.isRemote)return dn("Please use this function on a remote Stream");if(Kn.debug("getRemoteVideoFlowStatus()"),xt.contact===null)return dn("No contact associated");var pn=xt.addPendingPromise("getRemoteVideoFlowStatus",Bt,dn);xt.contact.sendCustomEvent(et.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:xt.callId,streamId:xt.getId(),timeout:pn})})}},{key:"attachToElement",value:function(xt){Kn.debug("attachToElement"),su.attachMediaStream(xt,this.data)}},{key:"addInDiv",value:function(xt,Bt,dn,pn,Xt){Kn.debug("addInDiv"),su.addStreamInDiv(this.data,this.type,xt,Bt,dn,pn,Xt)}},{key:"removeFromDiv",value:function(xt,Bt){Kn.debug("removeFromDiv"),su.removeElementFromDiv(xt,Bt)}},{key:"startRecord",value:function(xt){return Kn.info("startRecord :",xt),apiCC.recordMgr.record(this.data,xt)}},{key:"stopRecord",value:function(){return Kn.info("stopRecord() - Stopping record"),apiCC.recordMgr.stop()}},{key:"pauseRecord",value:function(){return Kn.info("pauseRecord() - Pausing record"),apiCC.recordMgr.pause()}},{key:"resumeRecord",value:function(){return Kn.info("resumeRecord() - Resuming record"),apiCC.recordMgr.resume()}},{key:"enableAudioAnalysis",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kn.info("enableAudioAnalysis()");var dn=Dt.g.getAudioContext(),pn=null,Xt=!1,Ct=ds.get(this),It=cs.get(this);dn?this.hasData()?Ct!==null||It!==null?Kn.error("enableAudioAnalysis() - Audio analysis already enabled"):(Ct=dn.createMediaStreamSource(this.data),(It=dn.createScriptProcessor(2048,1,1)).connect(dn.destination),It.onaudioprocess=function(){var Ut,Kt=new Uint8Array(It.analyser.frequencyBinCount),qt=0;It.analyser.getByteFrequencyData(Kt);var en,tn=jo(Kt);try{for(tn.s();!(en=tn.n()).done;)qt+=en.value}catch(nr){tn.e(nr)}finally{tn.f()}Ut=qt/Kt.length,zt.get(xt).emit("audioAmplitude",Ut);var sn=0;Kt.sort(function(nr,ar){return ar-nr}),Kt=Kt.slice(0,50);for(var Sn=0;Sn<Kt.length;Sn++)sn+=Kt[Sn];Ut=sn/Kt.length;var Dn=typeof Bt.threshold=="number"?Bt.threshold:et.g.STREAM_AUDIO_ANALYSIS_THRESHOLD;Ut>Dn&&(Xt||(Xt=!0,zt.get(xt).emit("audioAmplitudeInfo",{amplitude:Ut,isSpeaking:!0})),pn!==null&&clearTimeout(pn),pn=setTimeout(function(){zt.get(xt).emit("audioAmplitudeInfo",{amplitude:Ut,isSpeaking:!1}),Xt=!1},1e3))},It.analyser=dn.createAnalyser(),It.analyser.smoothingTimeConstant=.5,It.analyser.fftSize=1024,Ct.connect(It.analyser),It.analyser.connect(It),cs.set(this,It),ds.set(this,Ct)):Kn.error("enableAudioAnalysis() - Stream has no data, unable to enable audio analysis"):Kn.error("enableAudioAnalysis() - AudioContext is not available, unable to enable audio analysis")}},{key:"disableAudioAnalysis",value:function(){Kn.info("disableAudioAnalysis()");var xt=ds.get(this),Bt=cs.get(this);xt!==null&&xt.disconnect(),Bt!==null&&(Bt.analyser.disconnect(),Bt.disconnect()),cs.set(this,null),ds.set(this,null)}},{key:"takeSnapshot",value:function(){var xt=this,Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kn.info("takeSnapshot()");var dn=null,pn=null;return new Promise(function(Xt,Ct){if(xt.hasData()){xt.hasVideo()||Kn.warn("takeSnapshot() - This stream does not have a video track"),dn=document.createElement("video"),pn=function(qt){if(It.width=dn.videoWidth,It.height=dn.videoHeight,Bt.hasOwnProperty("width")&&(It.width=Bt.width),Bt.hasOwnProperty("height")&&(It.height=Bt.height),Bt.hasOwnProperty("filters")){for(var en=[],tn=0,sn=Object.keys(Bt.filters);tn<sn.length;tn++){var Sn=sn[tn];en.push(Sn+"("+Bt.filters[Sn]+")")}Ut.filter=en.join(" ")}Ut.drawImage(dn,0,0,It.width,It.height),qt===!0&&dn.remove(),Bt.hasOwnProperty("output")&&Bt.output==="blob"?Bt.outputMimeType!==void 0?(Kn.debug("options.outputMimeType is defined :",Bt.outputMimeType),It.toBlob(function(Dn){Xt(Dn)},Bt.outputMimeType,Bt.outputQualityArgument)):It.toBlob(function(Dn){Xt(Dn)},"image/png"):Bt.outputMimeType!==void 0?(Kn.debug("options.outputMimeType is defined :",Bt.outputMimeType),Xt(It.toDataURL(Bt.outputMimeType,Bt.outputQualityArgument))):Xt(It.toDataURL("image/png"))};var It=document.createElement("canvas"),Ut=It.getContext("2d");Bt.divId===void 0||Bt.divId===null?setTimeout(function(){xt.attachToElement(dn),dn.addEventListener("canplay",function(){pn(!0)}),dn.muted=!0,dn.play()},1e3):(dn=document.getElementById(Bt.divId))===null?Kn.error("divId not found for snapshot"):pn(!1)}else{var Kt="takeSnapshot() - Stream has no data, cannot get snapshot";Kn.error(Kt),Ct(new Error(Kt))}})}},{key:"getId",value:function(){return String(this.streamId)}},{key:"getOwner",value:function(){return this.contact?this.contact:zr.getActiveSession().getUserAgent()}},{key:"getLabels",value:function(){var xt={};return this.hasData()&&this.data.getAudioTracks().length>0&&(xt.audioSourceLabel="",this.data.getAudioTracks()[0].label&&(xt.audioSourceLabel=this.data.getAudioTracks()[0].label)),this.hasData()&&this.data.getVideoTracks().length>0&&(xt.videoSourceLabel="",this.data.getVideoTracks()[0].label&&(xt.videoSourceLabel=this.data.getVideoTracks()[0].label)),Kn.debug("getLabels:",xt),xt}},{key:"checkImageCaptureCompatibility",value:function(){return typeof ImageCapture>"u"}},{key:"getLocalMediaStreamTrack",value:function(){var xt=null;return this.data.getVideoTracks().length===1&&(xt=this.data.getVideoTracks()[0]),xt}},{key:"getLocalMediaStreamAudioTrack",value:function(){var xt=null;return this.data.getAudioTracks().length===1&&(xt=this.data.getAudioTracks()[0]),xt}},{key:"informContactsOfChangedConstraints",value:function(xt){var Bt,dn=po.get().getConversations(),pn=jo(dn.keys());try{for(pn.s();!(Bt=pn.n()).done;){var Xt=Bt.value,Ct=dn.get(Xt).getContactsArray(),It=void 0;for(It=0;It<Ct.length;It++)Ct[It].sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:xt,mediaStreamId:this.data.id})}}catch(Kt){pn.e(Kt)}finally{pn.f()}if(this.callId!==null){Kn.debug("This stream is used in a call, send CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER to remote");var Ut=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callId);Ut!==null&&zr.getActiveSession().getOrCreateContact(Ut.remoteId).sendCustomEvent(et.g.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:this.callId,streamId:this.getId(),constraints:xt,mediaStreamId:this.data.id})}}},{key:"applyConstraints",value:function(xt){var Bt=this;return new Promise(function(dn,pn){if(Bt.isRemote){if(Kn.debug("applyConstraints() on a remote stream"),Bt.contact===null)return pn("No contact associated");var Xt=Bt.addPendingPromise("applyConstraints",dn,pn);Bt.contact.sendCustomEvent(et.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:Bt.callId,streamId:Bt.getId(),timeout:Xt,constraints:xt})}else{if(Kn.debug("applyConstraints() local"),!MediaStreamTrack.prototype.hasOwnProperty("applyConstraints"))return pn("Navigator not compatible with this function");var Ct=null,It=null;if(xt===void 0)return pn("Missing argument");if(xt.audio!==void 0){var Ut=Bt.getLocalMediaStreamAudioTrack();Ut!==null&&(Ct=Ut.applyConstraints(xt.audio))}if(xt.video!==void 0){var Kt=Bt.getLocalMediaStreamTrack();Kt!==null&&(It=Kt.applyConstraints(xt.video))}Promise.all([Ct,It]).then(function(qt){return Kn.debug("Constraints applied :",xt),xt&&xt.video&&xt.video.advanced&&xt.video.advanced[0].torch===!0?(Kn.debug("Torch to true:",xt),document.addEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)):xt&&xt.video&&xt.video.advanced&&xt.video.advanced[0].torch===!1&&(Kn.debug("Torch to false:",xt),document.removeEventListener("visibilitychange",Bt.visibilityChangeHandlerWhenTorchOn,!1)),Bt.informContactsOfChangedConstraints(xt),dn()}).catch(function(qt){return Kn.error("reject Promise all :",qt),pn(qt)})}})}},{key:"applyConstraint",value:function(xt,Bt){Kn.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"setCapability",value:function(xt,Bt){Kn.error("Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead")}},{key:"getSettings",value:function(){var xt=this;return new Promise(function(Bt,dn){if(!xt.isRemote)return Kn.debug("getSettings()"),MediaStreamTrack.prototype.hasOwnProperty("getSettings")?Bt({audio:xt.getStreamTrackSettings(xt.getLocalMediaStreamAudioTrack()),video:xt.getStreamTrackSettings(xt.getLocalMediaStreamTrack())}):dn("Navigator not compatible with this function");if(Kn.debug("getSettings() on a remote stream"),xt.contact===null)return dn("No contact associated");var pn=xt.addPendingPromise("getSettings",Bt,dn);xt.contact.sendCustomEvent(et.g.CONTACT_GET_SETTINGS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:xt.callId,streamId:xt.getId(),timeout:pn})})}},{key:"getStreamTrackSettings",value:function(xt){if(xt!==null)return xt.getSettings()}},{key:"getCapabilities",value:function(){var xt=this;return new Promise(function(Bt,dn){if(!xt.isRemote)return Kn.debug("getCapabilities()"),MediaStreamTrack.prototype.hasOwnProperty("getCapabilities")?Bt({audio:xt.getStreamTrackCapabilities(xt.getLocalMediaStreamAudioTrack()),video:xt.getStreamTrackCapabilities(xt.getLocalMediaStreamTrack())}):dn("Navigator not compatible with this function");if(Kn.debug("getCapabilities() on a remote stream"),xt.contact===null)return dn("No contact associated");var pn=xt.addPendingPromise("getCapabilities",Bt,dn);xt.contact.sendCustomEvent(et.g.CONTACT_GET_CAPABILITIES_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:xt.callId,streamId:xt.getId(),timeout:pn})})}},{key:"getStreamTrackCapabilities",value:function(xt){return xt!==null?xt.getCapabilities():{}}},{key:"getConstraints",value:function(){var xt=this;return new Promise(function(Bt,dn){if(!xt.isRemote)return Kn.debug("getConstraints()"),MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?Bt({audio:xt.getStreamTrackConstraints(xt.getLocalMediaStreamAudioTrack()),video:xt.getStreamTrackConstraints(xt.getLocalMediaStreamTrack())}):dn("Navigator not compatible with this function");if(Kn.debug("getConstraints() on a remote stream"),xt.contact===null)return dn("No contact associated");var pn=xt.addPendingPromise("getConstraints",Bt,dn);xt.contact.sendCustomEvent(et.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER,{requesterId:zr.getActiveSession().getUserAgent().userId,callId:xt.callId,streamId:xt.getId(),timeout:pn})})}},{key:"getStreamTrackConstraints",value:function(xt){return xt!==null?xt.getConstraints():{}}},{key:"takePhoto",value:function(){var xt=this;return new Promise(function(Bt,dn){if(Kn.debug("takePhoto()"),xt.checkImageCaptureCompatibility())dn("Your navigator is not compatible with takePhoto()");else{var pn=xt.getLocalMediaStreamTrack();pn!==null?new ImageCapture(pn).takePhoto().then(function(Xt){var Ct=new Image;Ct.src=URL.createObjectURL(Xt),Bt(Ct)}).catch(function(Xt){dn("takePhoto() error: ",Xt)}):dn("No local mediaStreamTrack found")}})}},{key:"activateAIAnnotations",value:function(){var xt=this.getStreamAIE();xt!==null&&xt.activateAnnotations()}},{key:"stopAIAnnotations",value:function(){var xt=this.getStreamAIE();xt!==null&&xt.stopAnnotations()}},{key:"activateAILogs",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof xt!="number")return Kn.error("minLogPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateLogs(xt)}},{key:"stopAILogs",value:function(){var xt=this.getStreamAIE();xt!==null&&xt.stopLogs()}},{key:"activateAISnapshots",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(typeof xt!="number")return Kn.error("minSnapshotPeriod parameter must be an integer");var Bt=this.getStreamAIE();Bt!==null&&Bt.activateSnapshots(xt)}},{key:"stopAISnapshots",value:function(){var xt=this.getStreamAIE();xt!==null&&xt.stopSnapshots()}},{key:"getStreamAIE",value:function(){var xt=null;if(apiCC!==void 0){var Bt=apiCC.getUserMediaStream(this.userMediaStreamId);if(Bt.mediaFilterManager!==null){var dn=Bt.mediaFilterManager.filters;Object.values(dn).forEach(function(pn){pn.streamAIE!==null&&(xt=pn.streamAIE)}),xt===null&&Kn.error("Applied filter is not an AI filter")}else Kn.error("No filter applied on stream")}return xt}},{key:"addChildren",value:function(xt,Bt){this.childrenTypeExists(Bt)?Kn.error("This stream already has a sub instance running for this"):(this.childrens===void 0&&(this.childrens=[]),this.childrens.push(xt))}},{key:"releaseChildren",value:function(xt){this.childrens!==void 0&&this.childrens.forEach(function(Bt,dn){Bt.childType===xt&&Bt.release({releaseParentStream:!1})})}},{key:"releaseAllChildren",value:function(){Kn.debug("releaseAllChildren"),this.childrens!==void 0&&this.childrens.forEach(function(xt,Bt){xt.release({releaseParentStream:!1})})}},{key:"removeChildren",value:function(xt){var Bt=this;this.childrens!==void 0&&this.childrens.forEach(function(dn,pn){if(dn.childType===xt)return Bt.childrens.splice(pn,1)})}},{key:"childrenTypeExists",value:function(xt){var Bt=!1;return this.childrens!==void 0&&this.childrens.forEach(function(dn){dn.childType===xt&&(Bt=!0)}),Bt}},{key:"createChildStreamFromStream",value:function(xt,Bt){var dn=this,pn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(Xt,Ct){Kn.debug("createChildStreamFromStream");var It={};It.type=et.g.STREAM_TYPE_NO_INPUT,xt.getAudioTracks().length>0&&(It.type=et.g.STREAM_TYPE_AUDIO),xt.getVideoTracks().length>0&&(It.type=et.g.STREAM_TYPE_VIDEO);var Ut=dn;apiRTC.createUserMediaStream({type:"media",stream:xt,success:function(Kt){Kn.debug("[createChildStreamFromStream] success; userMediaStreamId: "+Kt.userMediaStreamId),It.constructor=!0,It.userMediaStreamId=Kt.userMediaStreamId;var qt=new cm(Kt.stream,It,Ut,Bt);qt.parentStreamCtx=pn,pn.audioFilterIsApplied===!0&&(qt.audioFilterIsApplied=pn.audioFilterIsApplied,qt.audioAppliedFilter=pn.audioAppliedFilter),pn.videoFilterIsApplied===!0&&(qt.videoFilterIsApplied=pn.videoFilterIsApplied,qt.videoAppliedFilter=pn.videoAppliedFilter),Xt(qt)},failure:function(Kt,qt){Kn.debug("[createChildStreamFromStream] failure :",qt),Ct()},childStreamType:Bt})})}},{key:"applyMuteStatusFromParent",value:function(){var xt=this,Bt=0;this.data.getAudioTracks().forEach(function(pn){pn.enabled=xt.parent.data.getAudioTracks()[Bt].enabled,Bt++});var dn=0;this.data.getVideoTracks().forEach(function(pn){pn.enabled=xt.parent.data.getVideoTracks()[dn].enabled,dn++})}},{key:"loadTFLiteModule",value:function(){return new Promise(function(xt,Bt){var dn;if(dn=iu.feature.simd?"https://cdn.apizee.com/apiRTC/lib/tflite/tflite-simd.js":"https://cdn.apizee.com/apiRTC/lib/tflite/tflite.js",apiRTC.userAgentInstance.tFLiteModuleLoaded===!1){Kn.debug("loading tflite");var pn={async:!0,numRetries:20,reqdelay:200,success:function(){Kn.debug("loaded successfully",iu.feature.simd),iu.feature.simd?createTFLiteSIMDModule().then(function(Xt){apiRTC.userAgentInstance.tFLiteSIMDModule=Xt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,xt(Xt)}):createTFLiteModule().then(function(Xt){apiRTC.userAgentInstance.tFLiteSIMDModule=Xt,apiRTC.userAgentInstance.tFLiteModuleLoaded=!0,xt(Xt)})},error:function(Xt){Bt("Resources loading failed, depsNotFound: "+Xt)},retrycb:function(Xt,Ct){Kn.warn("Blur API module loading retry :"+Xt+" ,delay before retry :"+Ct)}};apiCC.resourcesLoader.loadjs([dn],"blur-api",pn)}else Kn.debug("tflite already loaded and TFLiteSIMDModule already created"),xt(apiRTC.userAgentInstance.tFLiteSIMDModule)})}},{key:"setupTFLiteModule",value:function(xt){return new Promise(function(Bt,dn){Kn.debug("setupTFLiteModule"),apiRTC.userAgentInstance.modelLoadedInModule===!1?(Kn.debug("loading model landscape"),fetch("https://cdn.apizee.com/apiRTC/lib/tflite/models/selfie_segmentation_landscape.tflite").then(function(pn){if(!pn.ok)throw new Error("Failed to download tflite model!");Kn.debug("loaded successfully");var Xt=xt._getModelBufferMemoryOffset();pn.arrayBuffer().then(function(Ct){xt.HEAPU8.set(new Uint8Array(Ct),Xt),xt._loadModel(Ct.byteLength),Kn.debug("module setup complete"),apiRTC.userAgentInstance.modelLoadedInModule=!0,apiRTC.userAgentInstance.tFLiteSIMDModule=xt,Bt(xt)})}).catch(function(pn){Kn.error("Something went wrong during tflite model loading..",pn)})):(Kn.debug("model landscape already loaded in module"),Bt(apiRTC.userAgentInstance.tFLiteSIMDModule))})}},{key:"onMaskFrameTimer",value:function(xt){xt.data.id===this.blurVariables.TIMEOUT_TICK&&this.renderMask()}},{key:"renderMask",value:function(){this.resizeSource(),this.runInference(),this.runPostProcessing(),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.SET_TIMEOUT,timeMs:1e3/30})}},{key:"resizeSource",value:function(){this.blurVariables.segmentationMaskCtx.drawImage(this.blurVariables.inputVideoElement,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height,0,0,this.blurVariables.width,this.blurVariables.height);for(var xt=this.blurVariables.segmentationMaskCtx.getImageData(0,0,this.blurVariables.width,this.blurVariables.height),Bt=this.blurVariables.tfliteModel._getInputMemoryOffset()/4,dn=0;dn<this.blurVariables.segmentationPixelCount;dn++)this.blurVariables.tfliteModel.HEAPF32[Bt+3*dn]=xt.data[4*dn]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*dn+1]=xt.data[4*dn+1]/255,this.blurVariables.tfliteModel.HEAPF32[Bt+3*dn+2]=xt.data[4*dn+2]/255}},{key:"runInference",value:function(){this.blurVariables.tfliteModel._runInference();for(var xt=this.blurVariables.tfliteModel._getOutputMemoryOffset()/4,Bt=0;Bt<this.blurVariables.segmentationPixelCount;Bt++){var dn=this.blurVariables.tfliteModel.HEAPF32[xt+Bt];this.blurVariables.segmentationMask.data[4*Bt+3]=255*dn}this.blurVariables.segmentationMaskCtx.putImageData(this.blurVariables.segmentationMask,0,0)}},{key:"runPostProcessing",value:function(){var xt=this.blurVariables.firstVideoTrack.getSettings?this.blurVariables.firstVideoTrack.getSettings():this.blurVariables.firstVideoTrack.getConstraints(),Bt=xt.height,dn=xt.width;if(this.blurVariables.outputCanvasElement.height=Bt,this.blurVariables.outputCanvasElement.width=dn,this.blurVariables.outputCanvasCtx.globalCompositeOperation="copy",this.blurVariables.outputCanvasCtx.filter=this.blurVariables.virtualBackground==="image"?"blur(4px)":"blur(8px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.segmentationMaskCanvas,0,0,this.blurVariables.width,this.blurVariables.height,0,0,this.blurVariables.inputVideoElement.width,this.blurVariables.inputVideoElement.height),this.blurVariables.outputCanvasCtx.globalCompositeOperation="source-in",this.blurVariables.outputCanvasCtx.filter="none",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0),this.blurVariables.outputCanvasCtx.globalCompositeOperation="destination-over",this.blurVariables.virtualBackground==="image")if(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height===this.blurVariables.imageRatio)this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,0,this.blurVariables.virtualImage.width,this.blurVariables.virtualImage.height,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height);else if(this.blurVariables.imageRatio>1){var pn=this.blurVariables.virtualImage.height*(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Xt=this.blurVariables.virtualImage.height,Ct=Math.abs(this.blurVariables.virtualImage.width-pn)/2;pn>this.blurVariables.virtualImage.width&&(pn=this.blurVariables.virtualImage.width,Ct=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,Ct,0,pn,Xt,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else{var It=this.blurVariables.virtualImage.width,Ut=this.blurVariables.virtualImage.width/(this.blurVariables.outputCanvasElement.width/this.blurVariables.outputCanvasElement.height),Kt=Math.abs(this.blurVariables.virtualImage.height-Ut)/2;Ut>this.blurVariables.virtualImage.height&&(Ut=this.blurVariables.virtualImage.height,Kt=0),this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.virtualImage,0,Kt,It,Ut,0,0,this.blurVariables.outputCanvasElement.width,this.blurVariables.outputCanvasElement.height)}else this.blurVariables.outputCanvasCtx.filter="blur(15px)",this.blurVariables.outputCanvasCtx.drawImage(this.blurVariables.inputVideoElement,0,0)}},{key:"startSelfieSegmentation",value:function(){var xt=this;return new Promise(function(Bt,dn){Kn.debug("startSelfieSegmentation"),xt.loadTFLiteModule().then(function(pn){xt.setupTFLiteModule(pn).then(function(Xt){if(xt.blurVariables.tfliteModel=Xt,xt.blurVariables.firstVideoTrack=xt.data.getVideoTracks()[0],xt.blurVariables.firstVideoTrack!==null&&xt.blurVariables.firstVideoTrack!==void 0){var Ct=xt.blurVariables.firstVideoTrack.getSettings?xt.blurVariables.firstVideoTrack.getSettings():xt.blurVariables.firstVideoTrack.getConstraints(),It=Ct.height,Ut=Ct.frameRate,Kt=Ct.width;xt.blurVariables.height=144,xt.blurVariables.width=256,xt.blurVariables.frameRate=Ut,xt.blurVariables.segmentationPixelCount=xt.blurVariables.width*xt.blurVariables.height,xt.onMaskFrameTimer=xt.onMaskFrameTimer.bind(xt),xt.blurVariables.outputCanvasElement=document.createElement("canvas"),xt.blurVariables.outputCanvasElement.getContext("2d"),xt.blurVariables.inputVideoElement=document.createElement("video"),xt.blurVariables.SET_TIMEOUT=1,xt.blurVariables.CLEAR_TIMEOUT=2,xt.blurVariables.TIMEOUT_TICK=3,xt.blurVariables.maskFrameTimerWorker=new Worker(URL.createObjectURL(new Blob([`
                                        var timer;
                                        onmessage = function(request) {
                                            switch (request.data.id) {
                                            case `.concat(xt.blurVariables.SET_TIMEOUT,`: {
                                                timer = setTimeout(() => {
                                                    postMessage({ id: `).concat(xt.blurVariables.TIMEOUT_TICK,` });
                                                }, request.data.timeMs);
                                                break;
                                            }
                                            case `).concat(xt.blurVariables.CLEAR_TIMEOUT,`: {
                                                if (timer) {
                                                    clearTimeout(timer);
                                                }
                                                break;
                                            }
                                            }
                                        };
                                    `)],{type:"application/javascript"})),{name:"Blur effect worker"}),xt.blurVariables.maskFrameTimerWorker.onmessage=xt.onMaskFrameTimer,xt.blurVariables.segmentationMask=new ImageData(xt.blurVariables.width,xt.blurVariables.height),xt.blurVariables.segmentationMaskCanvas=document.createElement("canvas"),xt.blurVariables.segmentationMaskCanvas.width=xt.blurVariables.width,xt.blurVariables.segmentationMaskCanvas.height=xt.blurVariables.height,xt.blurVariables.segmentationMaskCtx=xt.blurVariables.segmentationMaskCanvas.getContext("2d"),xt.blurVariables.outputCanvasElement.width=parseInt(Kt,10),xt.blurVariables.outputCanvasElement.height=parseInt(It,10),xt.blurVariables.outputCanvasCtx=xt.blurVariables.outputCanvasElement.getContext("2d"),xt.blurVariables.inputVideoElement.width=parseInt(Kt,10),xt.blurVariables.inputVideoElement.height=parseInt(It,10),xt.blurVariables.inputVideoElement.autoplay=!0,xt.blurVariables.inputVideoElement.srcObject=xt.data,xt.blurVariables.inputVideoElement.onloadeddata=function(){xt.blurVariables.inputVideoElement.muted=!0,xt.blurVariables.maskFrameTimerWorker.postMessage({id:xt.blurVariables.SET_TIMEOUT,timeMs:1e3/30})},Bt(xt.blurVariables.outputCanvasElement.captureStream(parseInt(xt.blurVariables.frameRate,10)))}else dn("No video track on stream")}).catch(function(){return Kn.error("Catch on setupTFLiteModule"),dn("Catch on setupTFLiteModule")})}).catch(function(){return Kn.error("Catch on loadTFLiteModule"),dn("Catch on loadTFLiteModule")})})}},{key:"stopSelfieSegmentation",value:function(){Kn.debug("stopSelfieSegmentation"),this.blurVariables.maskFrameTimerWorker.postMessage({id:this.blurVariables.CLEAR_TIMEOUT}),this.blurVariables.maskFrameTimerWorker.terminate()}},{key:"checkChildTypeConditions",value:function(){return this.childType!==void 0&&this.videoFilterIsApplied?"This stream is already a childStream : need to remove previous applied effect : "+this.childType:this.childrenTypeExists("blur")?"This stream already has a blur sub instance running : need to unblur()":this.childrenTypeExists("backgroundImage")?"This stream already has a backgroundImage sub instance running : need to unBackgroundImage()":MediaStreamTrack.prototype.hasOwnProperty("getSettings")&&MediaStreamTrack.prototype.hasOwnProperty("getConstraints")?"OK":"Navigator not compatible with this function"}},{key:"blur",value:function(){var xt=this;return new Promise(function(Bt,dn){var pn=xt.checkChildTypeConditions();if(pn!=="OK")return dn(pn);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return dn("Navigator not compatible with this function");var Xt=xt;xt.blurVariables={},xt.blurVariables.virtualBackground="blur",xt.startSelfieSegmentation().then(function(Ct){var It,Ut=jo(Xt.data.getAudioTracks());try{for(Ut.s();!(It=Ut.n()).done;){var Kt=It.value;Ct.addTrack(Kt.clone())}}catch(en){Ut.e(en)}finally{Ut.f()}var qt={audioFilterIsApplied:xt.audioFilterIsApplied,audioAppliedFilter:xt.audioAppliedFilter,videoFilterIsApplied:xt.videoFilterIsApplied,videoAppliedFilter:xt.videoAppliedFilter,childType:xt.childType};Xt.createChildStreamFromStream(Ct,"blur",qt).then(function(en){return xt.addChildren(en,"blur"),en.applyMuteStatusFromParent(),Bt(en)}).catch(function(){return Kn.error("Catch on createChildStreamFromStream blur"),dn("error on createChildStreamFromStream")})}).catch(function(Ct){return Kn.error("Catch on startSelfieSegmentation blur : ",Ct),dn(Ct)})})}},{key:"unblur",value:function(){var xt=this;return new Promise(function(Bt,dn){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return dn("Navigator not compatible with this function");if(xt.childType==="blur"){Kn.debug("This is the blurred stream : applying process with parent stream");var pn=xt.parent;return pn.stopSelfieSegmentation(),pn.releaseChildren("blur"),pn.removeChildren("blur"),Bt(pn)}return xt.childrenTypeExists("blur")?(Kn.debug("This is the parent stream : applying process with this stream"),xt.stopSelfieSegmentation(),xt.releaseChildren("blur"),xt.removeChildren("blur"),Bt(xt)):(Kn.debug("No blurred instance found for this stream"),dn("No blurred instance found for this stream"))})}},{key:"backgroundImage",value:function(xt){var Bt=this;return Kn.debug("backgroundImage",xt),new Promise(function(dn,pn){var Xt=Bt.checkChildTypeConditions();if(Xt!=="OK")return pn(Xt);if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return pn("Navigator not compatible with this function");var Ct=Bt;Bt.blurVariables={},Bt.blurVariables.virtualBackground="image",Bt.blurVariables.virtualImage=new Image,Bt.blurVariables.virtualImage.crossOrigin="anonymous",Bt.blurVariables.virtualImage.src=xt,Bt.blurVariables.virtualImage.onload=function(){Bt.blurVariables.imageRatio=Bt.blurVariables.virtualImage.width/Bt.blurVariables.virtualImage.height,Bt.startSelfieSegmentation().then(function(It){var Ut,Kt=jo(Ct.data.getAudioTracks());try{for(Kt.s();!(Ut=Kt.n()).done;){var qt=Ut.value;It.addTrack(qt.clone())}}catch(tn){Kt.e(tn)}finally{Kt.f()}var en={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Ct.createChildStreamFromStream(It,"backgroundImage",en).then(function(tn){return Bt.addChildren(tn,"backgroundImage"),tn.applyMuteStatusFromParent(),dn(tn)}).catch(function(){return Kn.error("Catch on createChildStreamFromStream bck"),pn("error on createChildStreamFromStream")})}).catch(function(It){return Kn.error("Catch on startSelfieSegmentation bck : ",It),pn(It)})},Bt.blurVariables.virtualImage.onerror=function(){return Kn.debug("Error on image loading"),pn("Error on image loading")}})}},{key:"unBackgroundImage",value:function(){var xt=this;return Kn.debug("unBackgroundImage"),new Promise(function(Bt,dn){if(apiCC.userAgentInstance.getCapabilities().backgroundRemoval==="OFF")return dn("Navigator not compatible with this function");if(xt.childType==="backgroundImage"){Kn.debug("This is the backgroundImage stream : applying process with parent stream");var pn=xt.parent;return pn.stopSelfieSegmentation(),pn.releaseChildren("backgroundImage"),pn.removeChildren("backgroundImage"),Bt(pn)}return xt.childrenTypeExists("backgroundImage")?(Kn.debug("This is the parent stream : applying process with this stream"),xt.stopSelfieSegmentation(),xt.releaseChildren("backgroundImage"),xt.removeChildren("backgroundImage"),Bt(xt)):(Kn.debug("No background image instance found for this stream"),dn("No background image instance found for this stream"))})}},{key:"applyVideoProcessor",value:function(xt,Bt){var dn=this;return new Promise(function(pn,Xt){if(xt!=="none"&&xt!=="blur"&&xt!=="backgroundImage")return Xt(new Yr("Requested videoProcessorType is not correct","none",dn));var Ct=dn,It="none",Ut=null,Kt=dn,qt=!1;if(dn.childType==="noiseReduction"&&dn.videoFilterIsApplied===!0&&(Kn.debug("This is a noised reduced stream ... applying filter on parent"),Kt=dn.parent,dn.release({releaseParentStream:!1}),qt=!0),Kt.childType!==void 0&&Kt.videoFilterIsApplied===!0&&(Kt.childType==="blur"?It="blur":Kt.childType==="backgroundImage"&&(It="backgroundImage"),Ct=Kt.parent,Ut=Kt),Kt.childrenTypeExists("blur")&&(It="blur",Kt.childrens.forEach(function(sn){Ut=sn})),Kt.childrenTypeExists("backgroundImage")&&(It="backgroundImage",Kt.childrens.forEach(function(sn){Ut=sn})),Kn.debug("actual applied effect =",It),xt==="none"&&It==="none")return Xt(new Yr("Requested videoProcessorType none and no effect applied","none",Ct));if(xt==="none"&&It==="blur")Kn.debug("need to unblur"),Ct.unblur().then(function(sn){if(qt!==!0)return pn(sn);sn.startNoiseReduction().then(function(Sn){return pn(Sn)}).catch(function(Sn){return Kn.error("Catch on startNoiseReduction :",Sn),Xt(new Wo(Sn,sn.audioAppliedFilter,Ct))})}).catch(function(sn){return Kn.error("Catch on unblur: ",sn),Xt(new Yr(sn,"none",Ct))});else if(xt==="none"&&It==="backgroundImage")Kn.debug("need to unBackgroundImage"),Ct.unBackgroundImage().then(function(sn){if(qt!==!0)return pn(sn);sn.startNoiseReduction().then(function(Sn){return pn(Sn)}).catch(function(Sn){return Kn.error("Catch on startNoiseReduction :",Sn),Xt(new Wo(Sn,sn.audioAppliedFilter,Ct))})}).catch(function(sn){return Kn.error("Catch on unBackgroundImage :",sn),Xt(new Yr(sn,"none",Ct))});else if(xt==="blur"&&It==="none")Kn.debug("need to blur"),Ct.blur().then(function(sn){if(qt!==!0)return pn(sn);sn.startNoiseReduction().then(function(Sn){return pn(Sn)}).catch(function(Sn){return Kn.error("Catch on startNoiseReduction :",Sn),Xt(new Wo(Sn,sn.audioAppliedFilter,Ct))})}).catch(function(sn){return Kn.error("Catch on blur :",sn),Xt(new Yr(sn,"none",Ct))});else{if(xt==="blur"&&It==="blur")return Xt(new Yr("Requested videoProcessorType blur and blur already applied","blur",Ut));if(xt==="blur"&&It==="backgroundImage"){Kn.debug("need to unBackgroundImage then blur");var en=Ct.blurVariables.virtualImage.src;Ct.unBackgroundImage().then(function(sn){sn.blur().then(function(Sn){if(qt!==!0)return pn(Sn);Sn.startNoiseReduction().then(function(Dn){return pn(Dn)}).catch(function(Dn){return Kn.error("Catch on startNoiseReduction :",Dn),Xt(new Wo(Dn,Sn.audioAppliedFilter,Ct))})}).catch(function(Sn){Kn.warn("Catch on blur - unBackgroundImage to blur :",Sn),Kn.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(en).then(function(Dn){if(Kn.warn("Could not apply blur effect, background restored"),qt!==!0)return Xt(new Yr("Could not apply blur effect, background restored","backgroundImage",Dn));Dn.startNoiseReduction().then(function(nr){return Xt(new Yr("Could not apply blur effect, background restored","backgroundImage",nr))}).catch(function(nr){return Kn.error("Catch on startNoiseReduction :",nr),Xt(new Yr("Could not apply blur effect, background restored","backgroundImage",Dn))})}).catch(function(Dn){return Kn.error("Could not apply blur effect and error in restoring background :",Dn),Xt(new Yr("Could not apply blur effect and error in restoring background","none",Ct))})})}).catch(function(sn){return Kn.error("Catch on unBackgroundImage :",sn),Xt(new Yr(sn,"none",Ct))})}else if(xt==="backgroundImage"&&It==="none"){if(Kn.debug("need to backgroundImage"),Bt===void 0||Bt.backgroundImageUrl===void 0)return Xt(new Yr("Error options.backgroundImageUrl is not defined","none",Ct));Ct.backgroundImage(Bt.backgroundImageUrl).then(function(sn){if(qt!==!0)return pn(sn);sn.startNoiseReduction().then(function(Sn){return pn(Sn)}).catch(function(Sn){return Kn.error("Catch on startNoiseReduction :",Sn),Xt(new Yr("Could not apply blur effect, background restored","backgroundImage",sn))})}).catch(function(sn){return Kn.error("Catch on backgroundImage :",sn),Xt(new Yr(sn,"none",Ct))})}else if(xt==="backgroundImage"&&It==="blur")Kn.debug("need to unblur then backgroundImage"),Ct.unblur().then(function(sn){sn.backgroundImage(Bt.backgroundImageUrl).then(function(Sn){if(qt!==!0)return pn(Sn);Sn.startNoiseReduction().then(function(Dn){return pn(Dn)}).catch(function(Dn){return Kn.error("Catch on startNoiseReduction :",Dn),Xt(new Yr("Could not apply blur effect, background restored","backgroundImage",Sn))})}).catch(function(Sn){Kn.warn("Catch on backgroundImage - unBackgroundImage to blur :",Sn),Kn.debug("Reactivating previous effect : blur"),Ct.blur().then(function(Dn){if(qt!==!0)return Kn.warn("Could not apply background effect, blur restored"),Xt(new Yr("Could not apply background effect, blur restored","blur",Dn));Dn.startNoiseReduction().then(function(nr){return Xt(new Yr("Could not apply background effect, blur restored","blur",nr))}).catch(function(nr){return Kn.error("Catch on startNoiseReduction :",nr),Xt(new Yr("Could not apply background effect, blur restored","blur",Dn))})}).catch(function(Dn){return Kn.error("Could not apply background effect and error in restoring blur :",Dn),Xt(new Yr("Could not apply background effect and error in restoring blur","none",Ct))})})}).catch(function(sn){return Kn.error("Catch on unblur :",sn),Xt(new Yr(sn,"none",Ct))});else if(xt==="backgroundImage"&&It==="backgroundImage"){var tn=Ct.blurVariables.virtualImage.src;if(Bt.backgroundImageUrl.startsWith("data:image")===!1&&tn.substring(tn.lastIndexOf("/")+1)===Bt.backgroundImageUrl.substring(Bt.backgroundImageUrl.lastIndexOf("/")+1))return Kn.debug("Same background image is already applied"),Xt(new Yr("Requested videoProcessorType backgroundImage and backgroundImage with the same image already applied","backgroundImage",Ut));Kn.debug("New background image is to be applied"),Ct.unBackgroundImage().then(function(sn){sn.backgroundImage(Bt.backgroundImageUrl).then(function(Sn){if(qt!==!0)return pn(Sn);Sn.startNoiseReduction().then(function(Dn){return pn(Dn)}).catch(function(Dn){return Kn.error("Catch on startNoiseReduction :",Dn),Xt(new Yr("Could not apply background effect, blur restored","blur",Sn))})}).catch(function(Sn){Kn.warn("Catch on backgroundImage - change background image :",Sn),Kn.debug("Reactivating previous effect : backgroundImage"),Ct.backgroundImage(tn).then(function(Dn){if(qt!==!0)return Xt(new Yr("Could not apply new image on background, former background restored","backgroundImage",Dn));Dn.startNoiseReduction().then(function(nr){return Kn.warn("Could not apply new image on background, former background restored"),Xt(new Yr("Could not apply new image on background, former background restored","backgroundImage",nr))}).catch(function(nr){return Kn.error("Catch on startNoiseReduction :",nr),Xt(new Yr("Could not apply background effect, blur restored","blur",Dn))})}).catch(function(Dn){return Kn.error("Could not apply new image on background and error in restoring former background :",Dn),Xt(new Yr("Could not apply new image on background and error in restoring former background","none",Ct))})})}).catch(function(sn){return Kn.error("Catch on unBackgroundImage :",sn),Xt(new Yr(sn,"none",Ct))})}}})}},{key:"checkAudioProcessorType",value:function(xt){return xt!=="none"&&xt!=="noiseReduction"?"Requested audioProcessorType is not correct":xt==="none"&&this.audioAppliedFilter!=="noiseReduction"?"Not a noised reduction stream":"OK"}},{key:"applyAudioProcessor",value:function(xt){var Bt=this;return new Promise(function(dn,pn){var Xt=Bt,Ct="none",It="none",Ut=Bt.checkAudioProcessorType(xt);if(Ut!=="OK")return pn(new Wo(Ut,Bt.audioAppliedFilter,Bt));if(xt==="none"){if(Bt.childType!=="noiseReduction"&&Bt.parent.childType==="noiseReduction"?(Kn.debug("applying process on parent stream as this one must be a video effect stream"),Xt=Bt.parent,Ct=Bt.childType,Bt.parent.blurVariables!==void 0&&Bt.parent.blurVariables.virtualImage!==void 0&&(It=Bt.parent.blurVariables.virtualImage.src),Bt.release({releaseParentStream:!1})):Kn.debug("no noiseReduction applied"),Xt.stopNoiseReduction(),Ct==="none"){Kn.debug("Release noiseReduction stream");var Kt=Bt.parent;return Xt.release({releaseParentStream:!1}),dn(Kt)}var qt={backgroundImageUrl:It};Xt.parent.applyVideoProcessor(Ct,qt).then(function(en){return Kn.debug("Release noiseReduction stream"),Xt.release({releaseParentStream:!1}),dn(en)}).catch(function(en){return Kn.error("Catch on applyVideoProcessor() - reapply effect : ",en),pn(new Wo("Error on restoring applied video filter",this.audioAppliedFilter,this))})}else xt==="noiseReduction"&&Xt.startNoiseReduction().then(function(en){return dn(en)}).catch(function(en){return Kn.error("Catch on startNoiseReduction :",en),pn(new Wo(en,Xt.audioAppliedFilter,Xt))})})}},{key:"startNoiseReduction",value:function(){return apiCC.audioProcessor.startNoiseReduction(this)}},{key:"stopNoiseReduction",value:function(){apiCC.audioProcessor.stopAudioNodeCtx(this.parent.nodeCtx)}},{key:"createMediaStreamTrackProcessor",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Kn.debug("mediaStreamTrackProcessor kind: ".concat(xt?"audio":"video"," created")),xt){var Bt=this.data.getAudioTracks();if(Bt.length)return new MediaStreamTrackProcessor({track:Bt[0]});throw new Error("No audio tracks found")}var dn=this.data.getVideoTracks();if(dn.length)return new MediaStreamTrackProcessor({track:dn[0]});throw new Error("No video tracks found")}},{key:"createMediaStreamTrackGenerator",value:function(){var xt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return Kn.debug("mediaStreamTrackGenerator kind: ".concat(xt?"audio":"video"," created")),xt?new MediaStreamTrackGenerator({kind:"audio"}):new MediaStreamTrackGenerator({kind:"video"})}},{key:"loadSegmentationAPI",value:function(){return new Promise(function(xt,Bt){var dn={async:!0,numRetries:20,reqdelay:200,success:function(){Kn.debug("Segmentation API loaded"),mergeReality.then(xt)},error:function(pn){Bt("Resources loading failed, depsNotFound: "+pn)},retrycb:function(pn,Xt){Kn.warn("Blur API model loading retry :"+pn+" ,delay before retry :"+Xt)}};apiCC.resourcesLoader.loadjs(["https://cdn.apizee.com/apiRTC/lib/mergereality/v1.0/merge_reality.js"],"merge-reality",dn)})}},{key:"startMergeReality",value:function(xt){var Bt=this;this.mergeRealityData={},this.mergeRealityLib=xt,this.mergeRealityData.stop=!1,this.mergeRealityData.WIDTH=this.getSettings().width,this.mergeRealityData.HEIGHT=this.getSettings().height,this.mergeRealityData.WEBCAM_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WEBCAM_CTX=this.mergeRealityData.WEBCAM_CANVAS.getContext("2d",{alpha:!1}),this.mergeRealityData.MASK_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MASK_CTX=this.mergeRealityData.MASK_CANVAS.getContext("2d",{alpha:!0}),this.mergeRealityData.SCREEN_VIDEO=document.createElement("video"),this.mergeRealityData.BG_SUB=new this.mergeRealityLib.BackgroundSubtractor,this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MSTP=this.createMediaStreamTrackProcessor().readable,this.mergeRealityData.MSTG=this.createMediaStreamTrackGenerator(),this.mergeRealityData.SINK=this.mergeRealityData.MSTG.writable,this.mergeRealityData.MASK_TRANSFORMER=new TransformStream({transform:function(dn,pn){Bt.mergeRealityData.stop||(Bt.mergeRealityData.MASK_CTX.save(),Bt.mergeRealityData.MASK_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.clearRect(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.WEBCAM_CTX.drawImage(dn,0,0),Bt.mergeRealityData.MASK_DATA=Bt.mergeRealityData.BG_SUB.computeMask(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.background),Bt.mergeRealityData.RES=Bt.mergeRealityData.BG_SUB.applyTransparency(Bt.mergeRealityData.WEBCAM_CTX.getImageData(0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_DATA),Bt.mergeRealityData.MASK_CTX.putImageData(Bt.mergeRealityData.RES,0,0),Bt.mergeRealityData.MASK_CTX.globalCompositeOperation="destination-atop",Bt.mergeRealityData.MASK_CTX.drawImage(Bt.mergeRealityData.SCREEN_VIDEO,0,0,Bt.mergeRealityData.WIDTH,Bt.mergeRealityData.HEIGHT),Bt.mergeRealityData.MASK_CTX.restore(),pn.enqueue(new VideoFrame(Bt.mergeRealityData.MASK_CANVAS))),dn.close()}}),this.mergeRealityData.RES_MS=new MediaStream}},{key:"stopMergeReality",value:function(){this.mergeRealityData.stop=!0}},{key:"calibrateBackground",value:function(){this.childrenTypeExists("merge")?this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT):Kn.error("No merged instance found for this stream")}},{key:"mergeReality",value:function(xt){var Bt=this;return new Promise(function(dn,pn){return window.MediaStreamTrackGenerator===void 0||window.MediaStreamTrackProcessor===void 0||window.TransformStream===void 0?pn("Your browser does not support InsertableStreams"):Bt.childrenTypeExists("merge")?pn("This stream already has a sub instance running for this"):void Bt.loadSegmentationAPI().then(function(Xt){Bt.startMergeReality(Xt),xt.attachToElement(Bt.mergeRealityData.SCREEN_VIDEO),Bt.mergeRealityData.SCREEN_VIDEO.autoplay=!0,Bt.mergeRealityData.MSTP.pipeThrough(Bt.mergeRealityData.MASK_TRANSFORMER).pipeTo(Bt.mergeRealityData.SINK),Bt.mergeRealityData.RES_MS.addTrack(Bt.mergeRealityData.MSTG);var Ct,It=jo(Bt.data.getAudioTracks());try{for(It.s();!(Ct=It.n()).done;){var Ut=Ct.value;Bt.mergeRealityData.RES_MS.addTrack(Ut)}}catch(en){It.e(en)}finally{It.f()}var Kt=Bt,qt={audioFilterIsApplied:Bt.audioFilterIsApplied,audioAppliedFilter:Bt.audioAppliedFilter,videoFilterIsApplied:Bt.videoFilterIsApplied,videoAppliedFilter:Bt.videoAppliedFilter,childType:Bt.childType};Bt.createChildStreamFromStream(Bt.mergeRealityData.RES_MS,"merge",qt).then(function(en){Kt.addChildren(en,"merge"),en.applyMuteStatusFromParent(),dn(en)}).catch(function(){Kn.error("Catch on createChildStreamFromStream mergeReality")})})})}},{key:"unmergeReality",value:function(){this.childrenTypeExists("merge")?(this.stopMergeReality(),this.releaseChildren("merge"),this.removeChildren("merge")):Kn.error("No merged instance found for this stream")}},{key:"addPendingPromise",value:function(xt,Bt,dn){var pn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;return apiCC.addPendingPromise(xt,Bt,dn,pn)}},{key:"resolvePendingPromise",value:function(xt,Bt){apiCC.resolvePendingPromise(xt,Bt)}},{key:"rejectPendingPromise",value:function(xt,Bt){apiCC.rejectPendingPromise(xt,Bt)}},{key:"sendAudioFlowStatusChanged",value:function(){var xt=this.getAudioFlowStatus();zt.get(this).emit("audioFlowStatusChanged",xt)}},{key:"sendVideoFlowStatusChanged",value:function(){var xt=this.getVideoFlowStatus();zt.get(this).emit("videoFlowStatusChanged",xt)}},{key:"sendFlowStatusChanged",value:function(xt){var Bt;xt==="audio"?Bt=this.getAudioFlowStatus():xt==="video"&&(Bt=this.getVideoFlowStatus()),Bt.type=xt,zt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendFlowStatusChangedForRemote",value:function(xt,Bt){Bt.type=xt,zt.get(this).emit("flowStatusChanged",Bt)}},{key:"sendRemoteAudioFlowStatusChanged",value:function(xt){zt.get(this).emit("remoteAudioFlowStatusChanged",xt)}},{key:"sendRemoteVideoFlowStatusChanged",value:function(xt){zt.get(this).emit("remoteVideoFlowStatusChanged",xt)}},{key:"emitConstraintsChanged",value:function(xt){zt.get(this).emit("constraintsChanged",xt)}}],[{key:"getAvailableEvents",value:function(){return lm}},{key:"createStreamFromUserMedia",value:function(xt,Bt,dn){var pn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Kn.debug("createStreamFromUserMedia"),Kn.debug("audioInput :",xt),Kn.debug("videoInput :",Bt),Kn.debug("constraints :",dn),Kn.debug("options :",pn),new Promise(function(Xt,Ct){var It=xt!==!1&&(xt!==null||dn===void 0||dn!==void 0&&dn.hasOwnProperty("audio")),Ut=Bt!==!1&&(Bt!==null||dn===void 0||dn!==void 0&&dn.hasOwnProperty("video")),Kt={type:et.g.STREAM_TYPE_NO_INPUT,audioInput:xt,videoInput:Bt},qt="media";Ut?Kt.type=et.g.STREAM_TYPE_VIDEO:It&&(Kt.type=et.g.STREAM_TYPE_AUDIO),It&&!Ut?qt="audio":!It&&Ut&&(qt="videoOnly"),It&&pn.enhancedAudioActivated===!0&&(Kn.debug("Enhanced Audio is activated"),apiRTC.browser!=="Chrome"?Kn.debug("enhancedAudioActivated option is only available for Chrome"):(dn===void 0&&(dn={}),dn.audio&&ss(dn.audio)==="object"||(dn.audio={}),dn.video===void 0&&(dn.video={}),dn.audio.echoCancellation=!1,dn.audio.autoGainControl=!1,dn.audio.noiseSuppression=!1)),apiRTC.createUserMediaStream({audioSourceId:xt,videoSourceId:Bt,facingMode:pn.facingMode,gum_config:dn,filters:pn.filters,type:qt,success:function(en){Kn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+en.userMediaStreamId),Kt.constructor=!0,Kt.userMediaStreamId=en.userMediaStreamId,Xt(new Qt(en.stream,Kt))},failure:function(en,tn){Kn.debug("[createStreamFromUserMedia] failure :",tn),Ct(tn)}})})}},{key:"createStreamFromMediaStream",value:function(xt){return Kn.debug("createStreamFromMediaStream"),new Promise(function(Bt,dn){var pn={};pn.type=et.g.STREAM_TYPE_NO_INPUT,xt.getAudioTracks().length>0&&(pn.type=et.g.STREAM_TYPE_AUDIO),xt.getVideoTracks().length>0&&(pn.type=et.g.STREAM_TYPE_VIDEO),apiRTC.createUserMediaStream({type:"media",stream:xt,success:function(Xt){Kn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Xt.userMediaStreamId),pn.constructor=!0,pn.userMediaStreamId=Xt.userMediaStreamId,Bt(new Qt(Xt.stream,pn))},failure:function(Xt,Ct){Kn.debug("[createStreamFromUserMedia] failure :",Ct),dn()}})})}},{key:"createScreensharingStream",value:function(xt){return new Promise(function(Bt,dn){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:xt,success:function(pn){Kn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+pn.userMediaStreamId);var Xt=new Qt(pn.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:pn.userMediaStreamId});qs.set(Xt,!0),Bt(Xt)},failure:function(pn,Xt){Kn.debug("[createStreamFromUserMedia] failure :",Xt),dn(Xt)}})})}},{key:"createDisplayMediaStream",value:function(xt,Bt){return new Promise(function(dn,pn){apiRTC.createUserMediaStream({type:"screenSharing",captureSourceType:xt,displayMediaStreamConstraints:xt,forceExtensionOnChrome:Bt,success:function(Xt){Kn.debug("[createStreamFromUserMedia] success; userMediaStreamId: "+Xt.userMediaStreamId);var Ct=new Qt(Xt.stream,{constructor:!0,type:et.g.STREAM_TYPE_VIDEO,userMediaStreamId:Xt.userMediaStreamId});qs.set(Ct,!0),dn(Ct)},failure:function(Xt,Ct){Kn.debug("[createStreamFromUserMedia] failure :",Ct),pn(Ct)}})})}},{key:"getLocalStreams",value:function(){return yo.values()}},{key:"getStream",value:function(xt){return xt!=null&&yo.has(xt.toString())?yo.get(xt.toString()):null}}]),Qt}(un),cm=function(Wt){Ks(Qt,Wt);var $t=Ys(Qt);function Qt(xt,Bt,dn,pn){var Xt;return zs(this,Qt),(Xt=$t.call(this,xt,Bt)).parent=dn,Xt.childType=pn,pn==="noiseReduction"&&(Xt.audioFilterIsApplied=!0,Xt.audioAppliedFilter=pn),pn!=="blur"&&pn!=="backgroundImage"||(Xt.videoFilterIsApplied=!0,Xt.videoAppliedFilter=pn),Xt}return Gs(Qt,[{key:"release",value:function(xt){this.childType!=="blur"&&this.childType!=="backgroundImage"||this.parent.stopSelfieSegmentation(),this.parent.removeChildren(this.childType),this.clonedStream!==void 0&&(Kn.debug("to be released ..."),this.clonedStream.getAudioTracks().forEach(function(Bt){Bt.stop()}),this.clonedStream.getVideoTracks().forEach(function(Bt){Bt.stop()})),ou(Fo(Qt.prototype),"release",this).call(this,xt)}}]),Qt}(so),Yr=function(Wt){Ks(Qt,Wt);var $t=Ys(Qt);function Qt(xt,Bt,dn){var pn;return zs(this,Qt),(pn=$t.call(this,xt)).name=pn.constructor.name,pn.appliedVideoProcessorType=Bt,pn.stream=dn,pn}return Gs(Qt)}(Hs(Error)),Wo=function(Wt){Ks(Qt,Wt);var $t=Ys(Qt);function Qt(xt,Bt,dn){var pn;return zs(this,Qt),(pn=$t.call(this,xt)).name=pn.constructor.name,pn.appliedAudioProcessorType=Bt,pn.stream=dn,pn}return Gs(Qt)}(Hs(Error));function Js(Wt,$t){var Qt=typeof Symbol<"u"&&Wt[Symbol.iterator]||Wt["@@iterator"];if(!Qt){if(Array.isArray(Wt)||(Qt=function(Ct,It){if(Ct){if(typeof Ct=="string")return tp(Ct,It);var Ut=Object.prototype.toString.call(Ct).slice(8,-1);return Ut==="Object"&&Ct.constructor&&(Ut=Ct.constructor.name),Ut==="Map"||Ut==="Set"?Array.from(Ct):Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut)?tp(Ct,It):void 0}}(Wt))||$t&&Wt&&typeof Wt.length=="number"){Qt&&(Wt=Qt);var xt=0,Bt=function(){};return{s:Bt,n:function(){return xt>=Wt.length?{done:!0}:{done:!1,value:Wt[xt++]}},e:function(Ct){throw Ct},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dn,pn=!0,Xt=!1;return{s:function(){Qt=Qt.call(Wt)},n:function(){var Ct=Qt.next();return pn=Ct.done,Ct},e:function(Ct){Xt=!0,dn=Ct},f:function(){try{pn||Qt.return==null||Qt.return()}finally{if(Xt)throw dn}}}}function tp(Wt,$t){($t==null||$t>Wt.length)&&($t=Wt.length);for(var Qt=0,xt=new Array($t);Qt<$t;Qt++)xt[Qt]=Wt[Qt];return xt}function np(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var ho=ft.Y.get("Session"),dm=In.get(),xo=new(Go()),cu=Ro.get(),du=po.get(),um=Symbol("ENTERPRISE_NOT_LOADED"),uu=Symbol("ENTERPRISE_LOADED"),rp=new WeakMap,ip=new WeakMap,ap=new WeakMap,Xs=function(){function Wt(Bt,dn,pn){if(function(Xt,Ct){if(!(Xt instanceof Ct))throw new TypeError("Cannot call a class as a function")}(this,Wt),ho.info("Create Enterprise"),!(pn instanceof zr))throw"Cannot create Enterprise without a session";rp.set(this,pn),ap.set(this,dn),ip.set(this,Bt),this.status=um}var $t,Qt,xt;return $t=Wt,Qt=[{key:"getSession",value:function(){return rp.get(this)}},{key:"getId",value:function(){return ip.get(this).toString()}},{key:"getApiKey",value:function(){return ap.get(this).toString()}},{key:"load",value:function(){var Bt=this;return new Promise(function(dn,pn){xo.getEnterpriseUserList(Bt.getId(),Bt.getSession().getToken()).then(function(Xt){ho.info("Enterprise loaded!",Xt);var Ct,It=Js(Xt.users);try{for(It.s();!(Ct=It.n()).done;){var Ut=Ct.value;if(Bt.getSession().user.userId.toString()!==Ut.id.toString()){var Kt=cu.getOrCreateContact(Ut.id);Kt.profile=Ut,Kt.enterprise=Bt,Kt.userData.get("username")===null&&Kt.userData.setProp("username",Ut.username),Kt.userData.get("photo_url")===null&&Kt.userData.setProp("photo_url",Ut.photo_url)}}}catch(qt){It.e(qt)}finally{It.f()}Bt.status=uu,dn()}).catch(function(Xt){var Ct="load() - Enterprise load error",It={error:new Error(Ct),code:et.g.ERROR_OTHER};Xt.hasOwnProperty("code")?It.code=Xt.code:Xt.hasOwnProperty("http_code")&&(Xt.http_code.toString().startsWith("4")?It.code=et.g.ERROR_INVALID_CREDENTIALS:It.code=et.g.ERROR_SERVER_UNAVAILABLE),ho.error(Ct,Xt),pn(It)})})}},{key:"getContacts",value:function(){var Bt={};if(this.status!==uu)ho.error("Enterprise is not loaded, unable to getContacts");else{var dn,pn=cu.getContacts(),Xt=Js(pn.keys());try{for(Xt.s();!(dn=Xt.n()).done;){var Ct=dn.value,It=pn.get(Ct);It.enterprise!==null&&It.enterprise.id.toString()===this.getId()&&(Bt[It.getId()]=It)}}catch(Ut){Xt.e(Ut)}finally{Xt.f()}}return Bt}},{key:"getConfiguration",value:function(){return null}},{key:"uploadFile",value:function(Bt){var dn=this,pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Xt,Ct){ho.info("uploadFile()"),dn.status===uu?xo.uploadFile(Bt,dn.getSession().getToken(),pn).then(function(It){Xt(It.url)}).catch(function(It){ho.error(It),Ct(It)}):(ho.error("Enterprise is not loaded, cannot upload file"),Ct(new Error("Enterprise is not loaded, cannot upload file")))})}},{key:"getAvailableConferences",value:function(){var Bt=this;return ho.info("getAvailableConferences()"),new Promise(function(dn,pn){var Xt={};xo.getConferenceList(Bt.getSession().getToken()).then(function(Ct){var It,Ut=Js(Ct);try{for(Ut.s();!(It=Ut.n()).done;){var Kt=It.value;Xt[Kt.hash]=du.getOrCreateConference(Kt.hash),Xt[Kt.hash].friendlyName=Kt.friendlyName}}catch(qt){Ut.e(qt)}finally{Ut.f()}dn(Xt)}).catch(function(Ct){ho.error(Ct),pn(Ct)})})}},{key:"getConference",value:function(Bt){var dn=this;return new Promise(function(pn,Xt){var Ct={};Ct.token=dn.getSession().getToken(),xo.getWebconf(Bt,Ct).then(function(It){return pn(du.getOrCreateConference(It.hash))}).catch(function(It){return ho.error("getConference",It),Xt(It)})})}},{key:"createPrivateConference",value:function(){var Bt=this,dn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ho.info("createPrivateConference()"),new Promise(function(pn,Xt){var Ct=dn.hasOwnProperty("friendlyName")?dn.friendlyName:Dt.g.guid(),It=null,Ut=Bt.getSession().getToken();xo.createConference(Ut,Ct,dn).then(function(Kt){(It=du.getOrCreateConference(Kt.hash)).friendlyName=Ct;var qt=dn.hasOwnProperty("password")?dn.password:"";return It.join({password:qt,session:Bt.getSession()})}).then(function(){pn(It)}).catch(function(Kt){var qt="createPrivateConference() - Could not create conference";ho.error(qt,Kt),Xt(new Error(qt))})})}},{key:"getTags",value:function(Bt){var dn=this;return new Promise(function(pn,Xt){var Ct={};Bt&&Bt.hasOwnProperty("webconfId")&&(Ct.webconfId=Bt.webconfId),xo.getEnterpriseTagList(dn.getId(),dn.getSession().getToken(),Ct).then(function(It){return It.hasOwnProperty("tags")&&Array.isArray(It.tags)?pn(It.tags):Xt(Dt.g.createError(et.g.ERROR_OTHER,"getTags() - unexpected response",ho))}).catch(function(It){return Xt(Dt.g.createError(et.g.ERROR_OTHER,"getTags() - cannot get tags",ho,{fromError:It}))})})}}],xt=[{key:"fetchEnterpriseInformation",value:function(Bt){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return dn.hasOwnProperty("cloudUrl")&&xo.setCloudURL(dn.cloudUrl),xo.getEnterpriseInformation(dn,Bt)}},{key:"fetchSiteAgents",value:function(Bt){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(pn,Xt){dn.hasOwnProperty("cloudUrl")&&xo.setCloudURL(dn.cloudUrl);var Ct=[];xo.getSiteAgents(dm.getActiveApiKey(),Bt,dn).then(function(It){var Ut,Kt=Js(It);try{for(Kt.s();!(Ut=Kt.n()).done;){var qt=Ut.value;Ct.push({contact:cu.getOrCreateContact(qt.id),title:qt.title,nickname:qt.nickname,isPrefered:qt.isPrefered})}}catch(en){Kt.e(en)}finally{Kt.f()}pn(Ct)}).catch(function(It){Xt(Dt.g.createError(et.g.ERROR_OTHER,"fetchSiteAgents() - could not fetch site agents",ho))})})}}],Qt&&np($t.prototype,Qt),xt&&np($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}();function pu(Wt){return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},pu(Wt)}function pm(Wt,$t){if(!(Wt instanceof $t))throw new TypeError("Cannot call a class as a function")}function op(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}function fu(Wt,$t){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qt,xt){return Qt.__proto__=xt,Qt},fu(Wt,$t)}function fm(Wt,$t){if($t&&(pu($t)==="object"||typeof $t=="function"))return $t;if($t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bo(Wt)}function Bo(Wt){if(Wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Wt}function Qs(Wt){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($t){return $t.__proto__||Object.getPrototypeOf($t)},Qs(Wt)}s(3123);var yr=ft.Y.get("UserAgent"),Rr=In.get(),ko=new(Go()),hm="apizee:",gm="apirtc:",mm="token:",vm="apzkey:",Cm="apiKey:",us=new WeakMap,bm=["mediaDeviceChanged","externalJsLoadingStatus","ccsConnectionStatus","userMediaError"],sp=function(Wt){(function(Ct,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(It&&It.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),It&&fu(Ct,It)})(Xt,Wt);var $t,Qt,xt,Bt,dn,pn=(Bt=Xt,dn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ct,It=Qs(Bt);if(dn){var Ut=Qs(this).constructor;Ct=Reflect.construct(It,arguments,Ut)}else Ct=It.apply(this,arguments);return fm(this,Ct)});function Xt(){var Ct,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pm(this,Xt),Ct=pn.call(this,yr),yr.debug("Create UserAgent"),Ct.uri=It.hasOwnProperty("uri")?It.uri:null,Ct.userId=null,Ct.username=null,Ct.profile=null,Ct.preRegisterUserData=new Io,Ct.callStatsMonitoringEnabled=null,Ct.callStatsMonitoringInterval=null,Ct.meshModeEnabled=null,Ct.apiRTCMediaDeviceDetectionEnabled=!!It.hasOwnProperty("apiRTCMediaDeviceDetectionEnabled")&&It.apiRTCMediaDeviceDetectionEnabled,Ct.apiRTCMediaDeviceDetectionDelay=It.hasOwnProperty("apiRTCMediaDeviceDetectionDelay")?It.apiRTCMediaDeviceDetectionDelay:et.g.APIRTC_MEDIA_DEVICE_DETECTION_DELAY,Ct.targetBandwidthUsage=0,Ct.videoBandwidthSettings={overallIncoming:3e3,overallOutgoing:3e3},Ct.currentSession=null,Ct.enterprise=null,Ct.capabilities={whiteboardCursor:"ON",mediaDeviceChanged:"ON",webRTCCompliant:"ON",screenSharingCompliant:"ON",qoSStatCompliant:"ON",backgroundRemoval:"ON",streamCapabilities:"ON",noiseReduction:"ON",remoteAccessUser:"ON"},Ct.browser=apiRTC.browser,Ct.browser_major_version=apiRTC.browser_major_version,Ct.browser_version=apiRTC.browser_version,Ct.osName=apiRTC.osName,Ct.osVersion=apiRTC.osVersion,Ct.browserInfo=apiRTC.browserInfo,Ct.browserDetails=apiRTC.browserDetails,Ct.tFLiteModuleLoaded=!1,Ct.tFLiteSIMDModule=null,Ct.modelLoadedInModule=!1,Ct.apiRTCStreamsList=new Map,us.set(Bo(Ct),null),Rr.createWhiteBoard(),apiCC.activateScreenSharing();var Ut=function(tn){zt.get(Bo(Ct)).emit("mediaDeviceChanged",{added:tn.detail.diff.added,removed:tn.detail.diff.removed,updated:tn.detail.diff.updated,updateReason:tn.detail.updateReason,firstMediaDeviceListInitialization:tn.detail.firstMediaDeviceListInitialization})};apiRTC.addEventListener("mediaDeviceChanged",Ut,"UserAgent");var Kt=function(tn){zt.get(Bo(Ct)).emit("externalJsLoadingStatus",{extjs:tn.detail.extjs,status:tn.detail.status})};apiRTC.addEventListener("externalJsLoadingStatus",Kt,"UserAgent");var qt=function(tn){var sn=null;tn.detail.channelEvent==="onChannelOpened"?sn="connected":tn.detail.channelEvent==="onChannelDisconnect"?sn="disconnected":tn.detail.channelEvent==="onChannelReconnecting"?sn="retry":(tn.detail.channelEvent==="onChannelConnectError"||tn.detail.channelEvent==="onChannelError")&&(sn="error"),sn!==null&&zt.get(Bo(Ct)).emit("ccsConnectionStatus",{status:sn})};apiRTC.addEventListener("channelEvent",qt,"UserAgent");var en=function(tn){var sn={error:tn.detail.error};tn.detail.callType==="media"?(sn.audio=!0,sn.video=!0,sn.screenSharing=!1):tn.detail.callType==="audio"?(sn.audio=!0,sn.video=!1,sn.screenSharing=!1):tn.detail.callType==="videoOnly"?(sn.audio=!1,sn.video=!0,sn.screenSharing=!1):tn.detail.callType==="screenSharing"?(sn.audio=!1,sn.video=!0,sn.screenSharing=!0):tn.detail.callType==="screenSharingWithAudio"&&(sn.audio=!0,sn.video=!0,sn.screenSharing=!0),zt.get(Bo(Ct)).emit("userMediaError",sn)};return apiRTC.addEventListener("userMediaError",en,"UserAgent"),Ct.checkUACapabilities(),Ct.capabilities.mediaDeviceChanged==="OFF"&&(yr.debug("mediaDeviceChanged is not supported"),Ct.apiRTCMediaDeviceDetectionEnabled===!0&&(yr.debug("apiRTCMediaDeviceDetectionEnabled is activated, starting process"),setInterval(function(){apiCC.mediaDeviceMgr.getMediaDevices()},Ct.apiRTCMediaDeviceDetectionDelay))),apiRTC.userAgentInstance=Bo(Ct),Ct}return $t=Xt,Qt=[{key:"fetchUserMediaDevices",value:function(){return yr.warn("DEPRECATION WARNING : fetchUserMediaDevices() is now deprecated, use getUserMediaDevices() instead"),new Promise(function(Ct,It){apiCC.browser==="IE"&&apiCC.browser_version>8?(apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)):apiCC.getMediaDevices().then(function(Ut){apiCC.mediaDeviceMgr.gotSources(Ut),Ct(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)}).catch(function(){yr.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null),It(Dt.g.createError(et.g.ERROR_OTHER,"fetchUserMediaDevices() - Could not get media devices",yr))})})}},{key:"getUserMediaDevices",value:function(){return apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray}},{key:"createStream",value:function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return yr.info("createStream() with option :",Ct),so.createStreamFromUserMedia(Ct.audioInputId,Ct.videoInputId,Ct.constraints,Ct)}},{key:"createStreamFromMediaStream",value:function(Ct){return yr.info("createStreamFromMediaStream()"),so.createStreamFromMediaStream(Ct)}},{key:"fetchNetworkInformation_v2",value:function(Ct,It){yr.debug("fetchNetworkInformation Version 2 :",Ct);var Ut=ko.cloudUrl;Ct!=null&&(Ut=Ct);var Kt={testServer:Ut,httpPing:{},upload:{},download:{}};return It!=null&&Array.isArray(It)?(apiRTC.bandwidthRatingThresholds=It,yr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):yr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=Ut,yr.info("Start Network test"),new Promise(function(qt,en){apiRTC.testUserPing(function(tn,sn){tn!==null?en(tn):(Kt.httpPing=sn,apiRTC.testUserUpload(25e4,function(Sn,Dn){Sn!==null?en(Sn):(Kt.upload.kbps=8*Dn.kBPerSec,Kt.upload.rating=Dn.rating,apiRTC.testUserUploadLoop(5e5,Kt.upload,function(nr,ar){nr!==null?en(nr):(Kt.upload.kbps=8*ar.kBPerSec,Kt.upload.rating=ar.rating,apiRTC.testUserDownload(256,function(fr,vr){fr!==null?en(fr):(Kt.download.kbps=8*vr.kBPerSec,Kt.download.rating=vr.rating,apiRTC.testUserDownloadLoop(1e3,Kt.download,function(Pr,Zr){Pr!==null?en(Pr):(Kt.download.kbps=8*Zr.kBPerSec,Kt.download.rating=Zr.rating,qt(Kt))}))}))}))}))})})}},{key:"fetchNetworkInformation_v1",value:function(Ct,It){yr.debug("fetchNetworkInformation Version 1 :",Ct);var Ut=ko.cloudUrl;Ct!=null&&(Ut=Ct);var Kt={testServer:Ut,httpPing:{},upload:{},download:{}};return It!=null&&Array.isArray(It)?(apiRTC.bandwidthRatingThresholds=It,yr.debug("New bandwidthRatingThresholds is defined :",apiRTC.bandwidthRatingThresholds)):yr.debug("Using default bandwidthRatingThresholds :",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=Ut,yr.info("Start Network test"),new Promise(function(qt,en){apiRTC.testUserPing(function(tn,sn){tn!==null?en(tn):(Kt.httpPing=sn,apiRTC.testUserUpload(25e4,function(Sn,Dn){Sn!==null?en(Sn):(Kt.upload.kbps=8*Dn.kBPerSec,Kt.upload.rating=Dn.rating,Kt.upload.kbps>=1e3&&apiRTC.testUserUpload(5e5,function(nr,ar){nr!==null?en(nr):(Kt.upload.kbps=8*ar.kBPerSec,Kt.upload.rating=ar.rating)}),apiRTC.testUserDownload(256,function(nr,ar){nr!==null?en(nr):(Kt.download.kbps=8*ar.kBPerSec,Kt.download.rating=ar.rating,Kt.download.kbps>=500&&Kt.download.kbps<1500?apiRTC.testUserDownload(500,function(fr,vr){fr!==null?en(fr):(Kt.download.kbps=8*vr.kBPerSec,Kt.download.rating=vr.rating,qt(Kt))}):Kt.download.kbps>=1500?apiRTC.testUserDownload(768,function(fr,vr){fr!==null?en(fr):(Kt.download.kbps=8*vr.kBPerSec,Kt.download.rating=vr.rating,qt(Kt))}):qt(Kt))}))}))})})}},{key:"fetchNetworkInformation",value:function(Ct,It){return this.fetchNetworkInformation_v1(Ct,It)}},{key:"fetchGeolocationInformation",value:function(Ct){return Ct==null&&(Ct={enableHighAccuracy:!1,timeout:1/0,maximumAge:0}),new Promise(function(It,Ut){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(Kt){It(Kt)},function(Kt){Ut(Kt)},Ct)})}},{key:"setUserData",value:function(Ct){this.currentSession&&this.currentSession.setUserData(Ct)}},{key:"setUsername",value:function(Ct){this.currentSession?this.currentSession.setUsername(Ct):this.preRegisterUserData.setProp("username",Ct)}},{key:"setPhotoUrl",value:function(Ct){this.currentSession?this.currentSession.setPhotoUrl(Ct):this.preRegisterUserData.setProp("photo_url",Ct)}},{key:"getUserData",value:function(){return this.currentSession?this.currentSession.getUserData():this.preRegisterUserData}},{key:"getUsername",value:function(){return this.currentSession?this.currentSession.getUsername():this.preRegisterUserData.get("username")!==null?this.preRegisterUserData.get("username"):this.preRegisterUserData.get("nickname")!==null?this.preRegisterUserData.get("nickname"):this.username}},{key:"getPhotoUrl",value:function(){return this.currentSession?this.currentSession.getPhotoUrl():this.preRegisterUserData.get("photo_url")!==null?this.preRegisterUserData.get("photo_url"):this.preRegisterUserData.get("photoUrl")!==null?this.preRegisterUserData.get("photoUrl"):null}},{key:"fetchProfileInformation",value:function(Ct){var It=this,Ut=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Kt,qt){var en=null;It.profile===null||Ut?It.userId&&(en=Rr.getActiveApiKey())!==null?ko.getUserProfile(en,It.userId,Ct).then(function(tn){It.profile=tn,Kt(tn)}).catch(qt):qt("fetchProfileInformation() - missing registration"):Kt(It.profile)})}},{key:"getEnterprise",value:function(){return us.get(this)}},{key:"getCurrentSession",value:function(){return this.currentSession}},{key:"getEventCenter",value:function(){return apiRTC.eventCenter}},{key:"startWhiteboard",value:function(Ct,It){yr.trace("startWhiteboard()"),Rr.whiteBoardClient.start(),Rr.whiteBoardClient.setCanvas(Ct),It!=null&&Rr.whiteBoardClient.setUserCursorColor(It)}},{key:"stopWhiteboard",value:function(){yr.trace("stopWhiteboard()"),Rr.whiteBoardClient.stop()}},{key:"getWhiteboardClient",value:function(){return yr.trace("getWhiteboardClient()"),Rr.whiteBoardClient}},{key:"register",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(Ut,Kt){if(yr.info("Register "+Ct.uri),It.hasOwnProperty("uri")&&(Ct.uri=It.uri),It.hasOwnProperty("cloudUrl")&&ko.setCloudURL(It.cloudUrl),It.hasOwnProperty("cloudFetchRetries")&&ko.setFetchRetries(It.cloudFetchRetries),It.hasOwnProperty("cloudFetchRetryDelay")&&ko.setFetchRetryDelay(It.cloudFetchRetryDelay),Ct.uri!==null)if(Ct.currentSession)Kt(Dt.g.createError(et.g.ERROR_APIRTC_SESSION_ALREADY_ON,"register() - Session already ON",yr));else if(Ct.uri.startsWith(mm))Sm(Ct,It,Ut,Kt);else if(Ct.uri.startsWith(hm)||Ct.uri.startsWith(gm))ym(Ct,It,Ut,Kt);else if(Ct.uri.startsWith(vm)||Ct.uri.startsWith(Cm))Tm(Ct,It,Ut,Kt);else{var qt=Ct.uri.split(":")[0];Kt(Dt.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - prefix invalid used for uri :"+qt,yr))}else Kt(Dt.g.createError(et.g.ERROR_REGISTRATION_URI_INVALID,"register() - Cannot register UserAgent, no uri was specified",yr))})}},{key:"unregister",value:function(){var Ct=this,It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{invalidateUserToken:!0,unregister:!0};return new Promise(function(Ut,Kt){Ct.currentSession!==null?Ct.currentSession.disconnect(It).then(function(){Ct.currentSession=null,us.set(Ct,null),Ut()}).catch(function(qt){Kt(Dt.g.createError(et.g.ERROR_OTHER,"unregister() - unregistration error",yr))}):Kt(Dt.g.createError(et.g.ERROR_OTHER,"unregister() - no current session",yr))})}},{key:"isRegistered",value:function(){return this.currentSession!==null}},{key:"getDefaultDevices",value:function(){return{audioInput:apiCC.mediaDeviceMgr.defaultAudioInput,audioOutput:apiCC.mediaDeviceMgr.defaultAudioOuput,videoInput:apiCC.mediaDeviceMgr.defaultVideoInput}}},{key:"enableCallStatsMonitoring",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};["chrome","firefox","safari"].indexOf(apiCC.browserDetails.type)<0?yr.warn("enableCallStatsMonitoring() is only supported on Chrome, Firefox and Safari, support on other browsers will be added soon"):Ct===!0?(this.callStatsMonitoringEnabled=!0,Dt.g.isPropertyTypeof(It,"interval","number")&&It.interval>=1e3&&(this.callStatsMonitoringInterval=It.interval),this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.enableCallStatsMonitoring(!0,this.callStatsMonitoringInterval)):(this.callStatsMonitoringEnabled=!1,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.enableCallStatsMonitoring(!1))}},{key:"enableActiveSpeakerDetecting",value:function(Ct){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ct===!0?Dt.g.isPropertyTypeof(It,"threshold","number")&&It.threshold>0?apiRTC.enableActiveSpeakerDetecting(!0,It.threshold):apiRTC.enableActiveSpeakerDetecting(!0):apiRTC.enableActiveSpeakerDetecting(!1)}},{key:"enableMeshRoomMode",value:function(Ct){Ct===!1||Ct===!0?(this.meshModeEnabled=Ct,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.enableMeshRoomMode(Ct)):yr.error("Wrong value",Ct)}},{key:"setTargetBandwidthUsage",value:function(Ct){typeof Ct!="number"&&!isNaN(Ct)&&Ct>0?(this.targetBandwidthUsage=Ct,this.isRegistered&&Rr.webRTCClient.setVideoBandwidth(Ct)):yr.error("Unvalid target bandwidth usage value",Ct)}},{key:"setOverallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallIncoming=Ct,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setOverallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallIncoming,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setOverallIncomingVideoBandwidth(0))}},{key:"setOverallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.overallOutgoing=Ct,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setOverallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.overallOutgoing,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setOverallOutgoingVideoBandwidth(0))}},{key:"setPerCallIncomingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallIncoming=Ct,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setPerCallIncomingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallIncoming,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setPerCallIncomingVideoBandwidth(0))}},{key:"setPerCallOutgoingVideoBandwidth",value:function(Ct){Ct>0?(this.videoBandwidthSettings.perCallOutgoing=Ct,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setPerCallOutgoingVideoBandwidth(Ct)):(delete this.videoBandwidthSettings.perCallOutgoing,this.isRegistered&&Rr.webRTCClient&&Rr.webRTCClient.setPerCallOutgoingVideoBandwidth(0))}},{key:"updateMediaOnCall",value:function(Ct,It){Rr.webRTCClient.updateMediaDeviceOnCall(Ct,It)}},{key:"getCapabilities",value:function(){return this.capabilities}},{key:"getBrowser",value:function(){return this.browser}},{key:"getBrowserMajorVersion",value:function(){return this.browser_major_version}},{key:"getBrowserVersion",value:function(){return this.browser_version}},{key:"getOsName",value:function(){return this.osName}},{key:"getOsVersion",value:function(){return this.osVersion}},{key:"getBrowserInfo",value:function(){return this.browserInfo}},{key:"getBrowserDetails",value:function(){return this.browserDetails}},{key:"getCPUArchitecture",value:function(){return this.getUserData().cpuArchitecture}},{key:"getDeviceVendor",value:function(){return this.getUserData().deviceVendor}},{key:"getDeviceModel",value:function(){return this.getUserData().deviceModel}},{key:"getEngineName",value:function(){return this.getUserData().engineName}},{key:"getEngineVersion",value:function(){return this.getUserData().engineVersion}},{key:"checkUACapabilities",value:function(){yr.debug("checkUACapabilities"),apiRTC.osName==="iOS"&&(yr.debug("Deactivating whiteboardCursor for iOS"),this.capabilities.whiteboardCursor="OFF"),apiRTC.osName==="Android"&&apiRTC.browser==="Chrome"&&(yr.debug("mediaDeviceChanged not supported on Chrome/Android"),this.capabilities.mediaDeviceChanged="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(yr.debug("mediaDeviceChanged not supported on Safari"),this.capabilities.mediaDeviceChanged="OFF"),apiRTC.webRTCCompliant===!1&&(yr.debug("WebRTC not compliant"),this.capabilities.webRTCCompliant="OFF"),apiRTC.screenSharingCompliant===!1&&(yr.debug("screenSharing not compliant"),this.capabilities.screenSharingCompliant="OFF"),apiRTC.qoSStatCompliant===!1&&(yr.debug("qoS Stat not compliant"),this.capabilities.qoSStatCompliant="OFF"),ut.Xh!=="Safari"&&ut.Xh!=="Mobile Safari"||(yr.debug("background removal not compliant"),this.capabilities.backgroundRemoval="ON",yr.debug("noiseReduction not compliant"),this.capabilities.noiseReduction="OFF"),"getCapabilities"in MediaStreamTrack.prototype||(yr.debug("Stream capabilities not compliant"),this.capabilities.streamCapabilities="OFF"),(apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="10"||apiRTC.osName!=="Windows"&&apiRTC.osVersion!=="11")&&(yr.debug("remoteAccessUser not compliant"),this.capabilities.remoteAccessUser="OFF")}},{key:"startPrecallTest",value:function(Ct,It,Ut,Kt,qt){Rr.webRTCClient.startPrecallTest(Ct,It,Ut,Kt,qt)}},{key:"sendLogToCloud",value:function(Ct,It,Ut,Kt){apiCC.sendLogToCloud(Ct,It,Ut,Kt)}},{key:"getStreamWithRoomNameAndCallId",value:function(Ct,It){yr.debug("getStreamWithRoomNameAndCallId");var Ut="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(Kt){var qt=0;if((qt=Kt.publishedInConversations.get(Ct))!==void 0&&qt.toString()===It.toString())return yr.debug(" Stream is found"),Ut=Kt;yr.debug(" This is not the stream")}),Ut}},{key:"getStreamWithMediaStreamId",value:function(Ct){yr.debug("getStreamWithMediaStreamId");var It="NOT_FOUND";return apiRTC.userAgentInstance.apiRTCStreamsList.forEach(function(Ut){if(Ut.data.id===Ct.toString())return yr.debug(" Stream is found"),It=Ut;yr.debug(" This is not the stream")}),It}}],xt=[{key:"getAvailableEvents",value:function(){return bm}}],Qt&&op($t.prototype,Qt),xt&&op($t,xt),Object.defineProperty($t,"prototype",{writable:!1}),Xt}(un),ym=function(Wt,$t,Qt,xt){var Bt=Wt.uri.split(":");yr.debug("register() - Registration using prefix :"+Bt[0]);var dn=Bt[1];$t.password!==null&&typeof $t.password=="string"?ko.authentication(dn,$t.password,$t.captcha_token).then(function(pn){return lp(Wt,pn.token,$t)}).then(function(pn){Qt(pn)}).catch(function(pn){yr.error("registerPrefixApizee err : ",pn.message);var Xt="register() - An error occured during cloud credentials registration :"+JSON.stringify(pn),Ct=pn;Ct.message=Xt,pn.hasOwnProperty("code")?Ct.code=pn.code:pn.hasOwnProperty("http_code")&&(pn.http_code.toString().startsWith("4")?Ct.code=et.g.ERROR_INVALID_CREDENTIALS:Ct.code=et.g.ERROR_SERVER_UNAVAILABLE),xt(Ct)}):xt(Dt.g.createError(et.g.ERROR_INVALID_CREDENTIALS,"register() - No password was specified for apizee: UserAgent registration",yr))},Sm=function(Wt,$t,Qt,xt){yr.debug("register() - Registration using prefix :token:");var Bt=Wt.uri.split(":")[1];ko.checkUserToken(Bt).then(function(dn){return lp(Wt,Bt,$t)}).then(Qt).catch(function(dn){xt(Dt.g.createError(et.g.ERROR_OTHER,"register() - An error occured during cloud token registration",yr))})},Tm=function(Wt,$t,Qt,xt){var Bt=Wt.uri.split(":");yr.debug("register() - Registration using prefix :"+Bt[0]);var dn=Bt[1];if(!dn||typeof dn!="string")return xt(Dt.g.createError(et.g.ERROR_OTHER,"register() - Wrong apiKey",yr));new Promise(function(pn,Xt){ko.getPreferredCCS(dn).then(function(Ct){$t.ccs&&$t.ccs!==Ct.ccs&&(yr.debug("Overloading CCS address with init option"),Ct.ccs=$t.ccs),pn(Ct)}).catch(function(){Xt(Dt.g.createError(et.g.ERROR_OTHER,"register() - Could not get preferred CCS",yr))})}).then(function(pn){Wt.currentSession=new zr(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=null,Dt.g.isPropertyTypeof($t,"nickname","string")?Wt.username=$t.nickname:Wt.username="guest-"+Dt.g.guid().substr(0,13),Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),$t.userData&&Wt.preRegisterUserData.setProps($t.userData);var Xt={apiKey:dn,MCUActivated:!0,mcu:$t.hasOwnProperty("mcu")?$t.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,ccsServer:pn.ccs,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,userData:Wt.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,extJsLoadingRetryNb:$t.extJsLoadingRetryNb,extJsLoadingRetryDelay:$t.extJsLoadingRetryDelay,ccsConnectionRetryNb:$t.ccsConnectionRetryNb,ccsConnectionRetryDelay:$t.ccsConnectionRetryDelay,turnServerAddress:$t.turnServerAddress,userAcceptOnIncomingDataCall:$t.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:$t.userAcceptOnIncomingScreenSharingCall,cloudIsSecured:pn.secure};return $t.hasOwnProperty("id")&&(Xt.apiCCId=$t.id),Dt.g.isPropertyTypeof($t,"idPersistenceTimeout","number")&&$t.idPersistenceTimeout>=0&&(Xt.apiCCIdPersistenceTimeout=$t.idPersistenceTimeout),$t.hasOwnProperty("groups")&&(Xt.presenceGroup=$t.groups),$t.hasOwnProperty("subscribeTo")&&(Xt.subscribeToPresenceGroup=$t.subscribeTo),$t.hasOwnProperty("contactDisconnectionDelay")&&(yr.debug("Setting contactDisconnectionDelay :",$t.contactDisconnectionDelay),Rr.contactDisconnectionDelay=$t.contactDisconnectionDelay),Xt.idConversionActivated=!1,$t.hasOwnProperty("idConversionActivated")&&(Xt.idConversionActivated=$t.idConversionActivated),$t.hasOwnProperty("conversationSpace")&&(Xt.conversationSpace=$t.conversationSpace),$t.hasOwnProperty("token")&&(Xt.token=$t.token,Wt.currentSession.ccsToken=$t.token),Rr.initializeApiRTC(Xt)}).then(function(pn){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Rr.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Rr.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Rr.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Rr.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Rr.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Rr.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Rr.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.userId=pn,Wt.currentSession.init(pn),yr.log("register() - APIRTC init OK",pn),Rr.apiRTCSession.userData!==void 0&&Rr.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Rr.apiRTCSession.userData)),Qt(Wt.currentSession)}).catch(function(pn){xt(Dt.g.createError(et.g.ERROR_APIRTC_INITIALISATION_FAILED,"register() - ApiRTC Initialization error : "+pn,yr)),delete Wt.currentSession,Wt.currentSession=null})},lp=function(Wt,$t){var Qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xt=null,Bt=null;return yr.debug("initializeCloudUASession :",Qt),new Promise(function(dn,pn){ko.getConnectedUserInformation($t).then(function(Xt){if(Bt=Xt,yr.debug("Connected user information : ",Xt),Wt.currentSession=new zr(Wt),Wt.currentSession.user=Wt,Wt.currentSession.token=Xt.token,Qt.hasOwnProperty("idPersistenceTimeout")&&(Wt.currentSession.idPersistenceTimeout=Qt.idPersistenceTimeout),Wt.username=Xt.nickname,Wt.preRegisterUserData.setProp("username",Wt.username),Wt.preRegisterUserData.setProp("nickname",Wt.username),Wt.preRegisterUserData.setProp("photo_url",Xt.photo_url),Xt.mail&&Wt.preRegisterUserData.setProp("mail",Xt.mail),Wt.preRegisterUserData.setProp("userConfId",Wt.username+Date.now()),Qt.userData&&Wt.preRegisterUserData.setProps(Qt.userData),!Qt.hasOwnProperty("overLoadedApiRTCKey")||Qt.overLoadedApiRTCKey===null||Qt.overLoadedApiRTCKey===void 0||Xt.apiKey===Qt.overLoadedApiRTCKey)return Wt.userId=Xt.userId,xt=new Xs(Xt.enterpriseId,Xt.apiKey,Wt.currentSession),us.set(Wt,xt),xt.load();yr.debug("overLoadedApiRTCKey is defined :",Qt.overLoadedApiRTCKey),xt=new Xs(Xt.enterpriseId,Qt.overLoadedApiRTCKey,Wt.currentSession),delete Qt.id,Wt.userId=null,us.set(Wt,xt),yr.debug("... no enterprise users data loading")}).then(function(){var Xt={apiKey:xt.getApiKey(),ccsServer:Qt.ccs||Bt.ccs,MCUActivated:!0,mcu:Qt.hasOwnProperty("mcu")?Qt.mcu:et.g.DEFAULT_MCU,nickname:Wt.username,bandwidthTestServer:ko.cloudUrl,webRTCPluginActivated:!0,apiCCId:Qt.hasOwnProperty("id")?Qt.id:Wt.userId,userData:Wt.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,presenceGroup:["agent"],subscribeToPresenceGroup:["agent","visitor"],extJsLoadingRetryNb:Qt.extJsLoadingRetryNb,extJsLoadingRetryDelay:Qt.extJsLoadingRetryDelay,ccsConnectionRetryNb:Qt.ccsConnectionRetryNb,ccsConnectionRetryDelay:Qt.ccsConnectionRetryDelay,turnServerAddress:Qt.turnServerAddress,userAcceptOnIncomingDataCall:Qt.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:Qt.userAcceptOnIncomingScreenSharingCall};return Dt.g.isPropertyTypeof(Qt,"idPersistenceTimeout","number")&&Qt.idPersistenceTimeout>=0&&(Xt.apiCCIdPersistenceTimeout=Qt.idPersistenceTimeout),Qt.hasOwnProperty("groups")&&(Xt.presenceGroup=Qt.groups),Qt.hasOwnProperty("subscribeTo")&&(Xt.subscribeToPresenceGroup=Qt.subscribeTo),Qt.hasOwnProperty("contactDisconnectionDelay")&&(yr.debug("Setting contactDisconnectionDelay :",Qt.contactDisconnectionDelay),Rr.contactDisconnectionDelay=Qt.contactDisconnectionDelay),Xt.idConversionActivated=!1,Qt.hasOwnProperty("idConversionActivated")&&(Xt.idConversionActivated=Qt.idConversionActivated),Qt.hasOwnProperty("conversationSpace")&&(Xt.conversationSpace=Qt.conversationSpace),Rr.initializeApiRTC(Xt)}).then(function(Xt){Wt.callStatsMonitoringEnabled!==!1&&Wt.callStatsMonitoringEnabled!==!0||Rr.webRTCClient.enableCallStatsMonitoring(Wt.callStatsMonitoringEnabled,Wt.callStatsMonitoringInterval),Wt.meshModeEnabled!==!1&&Wt.meshModeEnabled!==!0||Rr.webRTCClient.enableMeshRoomMode(Wt.meshModeEnabled),Wt.targetBandwidthUsage>0&&Rr.webRTCClient.setVideoBandwidth(Wt.targetBandwidthUsage),Wt.videoBandwidthSettings.overallIncoming>0&&Rr.webRTCClient.setOverallIncomingVideoBandwidth(Wt.videoBandwidthSettings.overallIncoming),Wt.videoBandwidthSettings.overallOutgoing>0&&Rr.webRTCClient.setOverallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.overallOutgoing),Wt.videoBandwidthSettings.perCallIncoming>0&&Rr.webRTCClient.setPerCallIncomingVideoBandwidth(Wt.videoBandwidthSettings.perCallIncoming),Wt.videoBandwidthSettings.perCallOutgoing>0&&Rr.webRTCClient.setPerCallOutgoingVideoBandwidth(Wt.videoBandwidthSettings.perCallOutgoing),Wt.currentSession.init(Xt),yr.info("APIRTC init OK",Xt),Rr.apiRTCSession.userData!==void 0&&Rr.apiRTCSession.userData!==null&&(Wt.currentSession.userData=new Io(Rr.apiRTCSession.userData)),dn(Wt.currentSession)}).catch(function(Xt){yr.error(Xt),pn(Xt)})})};function Im(Wt,$t){for(var Qt=0;Qt<$t.length;Qt++){var xt=$t[Qt];xt.enumerable=xt.enumerable||!1,xt.configurable=!0,"value"in xt&&(xt.writable=!0),Object.defineProperty(Wt,xt.key,xt)}}var Xo=ft.Y.get("ResourcesLoader"),Rm=function(){function Wt(){(function(xt,Bt){if(!(xt instanceof Bt))throw new TypeError("Cannot call a class as a function")})(this,Wt),this.loadedJsLinks=[]}var $t,Qt;return $t=Wt,Qt=[{key:"loadjs",value:function(xt){function Bt(dn,pn,Xt){return xt.apply(this,arguments)}return Bt.toString=function(){return xt.toString()},Bt}(function(xt,Bt,dn){var pn=this;Xo.info("Load js resources",xt),Xo.debug("Already loaded js",this.loadedJsLinks);var Xt=dn.success;if((xt=xt.filter(function(Ct){return!pn.loadedJsLinks.includes(Ct)})).length===0)return Xo.debug("Skip resources loading, all resources previously loaded"),void(Xt instanceof Function&&Xt());Xo.debug("Filtered resources to load",xt),dn.success=function(){pn.loadedJsLinks.push.apply(pn.loadedJsLinks,xt),Xt instanceof Function&&Xt()},_e(xt,Bt,dn)})},{key:"unloadjs",value:function(xt){var Bt=this;Xo.info("Unload js",xt),xt.forEach(function(dn){var pn=document.querySelector('script[src="'+dn+'"]');pn!==void 0&&(pn.remove(),Bt.loadedJsLinks=Bt.loadedJsLinks.filter(function(Xt){return Xt!==dn}))}),Xo.debug("Scripts unloaded, currently loaded js",this.loadedJsLinks)}},{key:"reset",value:function(){unloadjs(this.loadedJsLinks),this.loadedJsLinks=[]}}],Qt&&Im($t.prototype,Qt),Object.defineProperty($t,"prototype",{writable:!1}),Wt}(),Dr=ft.Y.get("Init"),xa=ft.Y.get("MediaDeviceManager");function hu(Wt){return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($t){return typeof $t}:function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},hu(Wt)}rt=s.hmd(rt),console!=null&&(typeof apiRTC_React<"u"?console.info&&console.info("Loading APIRTC_REACT_NATIVE_MODULE"):console.info&&console.info("Loading APIRTC_MODULE")),window.Prototype&&delete Array.prototype.toJSON;var cp=new(Go());vt.version="5.0.19",vt.utils={},vt.eventCenter=new wt,vt.resourcesLoader=new Rm;for(var gu=0,dp=Object.keys(et.g);gu<dp.length;gu++){var up=dp[gu];vt[up]=et.g[up]}vt.utils.EventEmitter=dt,vt.utils.EventCenter=wt,vt.MediaDevice=Ot,vt.Stream=so,vt.Call=Sr,vt.Conversation=$o,vt.ConversationCall=Gl,vt.Conference=Fs,vt.Contact=No,vt.Enterprise=Xs,vt.SentInvitation=Do,vt.ReceivedInvitation=wn,vt.ReceivedCallInvitation=Ar,vt.ReceivedConversationJoinRequest=zo,vt.ReceivedConversationInvitation=Vt,vt.ReceivedFileTransferInvitation=eo,vt.ReceivedWhiteboardInvitation=vs,vt.ReceivedDataChannelInvitation=Ho,vt.ReceivedPointerSharingInvitation=Ml,vt.PointerSharingRoom=ru,vt.Session=zr,vt.UserAgent=sp,vt.UserData=Io,vt.CloudApi=cp,vt.DataChannel=ys,vt.Observable=un,vt.setLogLevel=function(Wt){ft.Y.setLogLevel(Wt)};var pp=!1;window.apiRTC===void 0?(hu(rt)==="object"&&rt.exports&&(rt.exports=vt),window.apiRTC2=window.apiRTC=window.apiCC=window.CC=vt,pp=!0):console.info("APIRTC_MODULE already loaded with version :",apiRTC.version),s(4170),pp===!0&&(vt.init=function(Wt){var $t,Qt;if(Dr.info("apiRTC initialization, version is :"+apiCC.version),Dr.info("osName :"+apiCC.osName),Dr.info("osVersion :"+apiCC.osVersion),Dr.info("browser :"+apiCC.browser),Dr.info("browser_version :"+apiCC.browser_version),$t=Wt.apiKey,Qt=!0,Dr.info("apiKey :",$t),$t.indexOf("[")!==-1&&(Qt=!1),Qt===!0)if(Wt.hasOwnProperty("apiCCId")&&Wt.apiCCId!==null&&Wt.apiCCId!==""&&function(pn){if(pn!==null){var Xt=pn;if(typeof Xt=="number"&&(Xt=String(Xt)),typeof Xt=="string")return Xt.length<=128}return!1}(Wt.apiCCId)!==!0)Dr.error("apiCCId format is not correct, leaving connection process");else{var xt="";if(xt=window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0&&window.location.protocol!="https:"?"http":"https",ut.ag.name!=="iOS"&&ut.ag.name!=="Android"||(Dr.log(ut.ag.name+" detected forcing protocol to https"),xt="https"),Wt.ccsServer===void 0?(Dr.debug("Setting ccsServer"),window!==void 0&&window.location!==void 0&&window.location.protocol!==void 0?window.location.protocol=="https:"||ut.ag.name==="iOS"||ut.ag.name==="Android"?Wt.ccsServer="ccs5.apizee.com:443":Wt.ccsServer="ccs5.apizee.com:80":Wt.ccsServer="ccs5.apizee.com:443"):Dr.log("ccsServer is defined on init()"),Wt.bandwidthTestServer!==null&&Wt.bandwidthTestServer!==void 0?(Dr.log("bandwidthTestServer is defined :",Wt.bandwidthTestServer),apiCC.bandwidthTestServer=Wt.bandwidthTestServer):Dr.log("bandwidthTestServer is not defined"),Wt.userData!==void 0&&Dr.log("userData :",Wt.userData),apiCC.extJsLoadingRetryNb=Wt.extJsLoadingRetryNb,apiCC.extJsLoadingRetryDelay=Wt.extJsLoadingRetryDelay,apiCC.jsLoaded===!1){apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId;var Bt=function(){Dr.log("sio loaded"),apiCC.jsLoaded=!0,apiCC.session=new apiCC.ApiCCSession(Wt),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","loaded")},dn={success:Bt,error:function(){Dr.error("sio loading error"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","error")},retrycb:function(){Dr.warn("sio retry"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent("sio","retry")}};apiCC.sioEmbedded?(window.rtcio=io,Bt()):apiRTC_sioLoader.load(xt,Wt,dn)}else Dr.log("apiRTC JS Librairies already loaded"),Dr.log("initParameters have changed, need to reload session connection"),apiCC.addEventListener("sessionReady",Wt.onReady),Dr.log("initParameters.userData :",Wt.userData),Wt.apiCCId!==void 0&&Wt.apiCCId!==""&&Wt.apiCCId!==null||(Dr.log("keeping apiCCId defined by apiRTC :"+Wt.apiCCId),Wt.apiCCId=apiCC.session.apiCCId),Dr.log("initParameters.apiCCId :"+Wt.apiCCId),Wt.userData!==null&&Wt.userData!==void 0?(Dr.log("userData is defined :",Wt.userData),apiCC.session.userData=Wt.userData):Dr.log("userData is not defined"),Dr.log("apiCC.session.userData :",apiCC.session.userData),Wt.token!==null&&Wt.token!==void 0?(Dr.log("token is defined :"+Wt.token),apiCC.session.token=Wt.token):(Dr.log("token is not defined"),apiCC.session.token=null),Wt.conversationSpace!==null&&Wt.conversationSpace!==void 0?(Dr.log("conversationSpace is defined :"+Wt.conversationSpace),apiCC.session.conversationSpace=Wt.conversationSpace):(Dr.log("conversationSpace is not defined"),apiCC.session.conversationSpace=null),apiCC.session.reOpenChannel(Wt.apiCCId,Wt.apiKey),Wt.nickname!==null&&Wt.nickname!==void 0?(Dr.log("Nickname is defined :"+Wt.nickname),apiCC.session.nickname=Wt.nickname):(Dr.log("Nickname is not defined, setting to apiCCId value :"+apiCC.session.apiCCId),apiCC.session.nickname=apiCC.session.apiCCId),Wt.photoURL!==null&&Wt.photoURL!==void 0?(Dr.log("photoURL is defined :"+Wt.photoURL),apiCC.session.photoURL=Wt.photoURL):(Dr.log("photoURL is not defined"),apiCC.session.photoURL=null),Wt.presenceGroup!==null&&Wt.presenceGroup!==void 0?(Dr.log("presenceGroup is defined :"+Wt.presenceGroup),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(Wt.presenceGroup)&&(Dr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=Wt.presenceGroup,apiCC.session.presenceGroup=Wt.presenceGroup)):(Dr.log('presenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(["default"])&&(Dr.log("presenceGroup updated on initParameters"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,apiCC.session.channel.oldPresenceGroup===null&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=["default"],apiCC.session.presenceGroup=["default"])),Wt.subscribeToPresenceGroup!==null&&Wt.subscribeToPresenceGroup!==void 0?(Dr.log("subscribeToPresenceGroup is defined :"+Wt.subscribeToPresenceGroup),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(Wt.subscribeToPresenceGroup)&&(Dr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=Wt.subscribeToPresenceGroup,apiCC.session.subscribeToPresenceGroup=Wt.subscribeToPresenceGroup)):(Dr.log('subscribeToPresenceGroup is not defined, setting to ["default"]'),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(["default"])&&(Dr.log("subscribeToPresenceGroup updated on initParameters"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,apiCC.session.channel.oldSubscribeToPresenceGroup===null&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=["default"],apiCC.session.subscribeToPresenceGroup=["default"])),apiCC.initApiKey=Wt.apiKey,apiCC.initApiCCId=Wt.apiCCId}else Dr.error("Apikey format is not correct, leaving connection process")},s(8560),vt.mediaDeviceMgr=new function(){this.audioDevicePresent=!0,this.videoDevicePresent=!0,this.audioOutputPresent=!0,this.mediaSourceInfos=null,this.mediaDeviceChangedDetected=!1,this.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},this.mediaDeviceSourceInfosArrayBeforeGotSources=null,this.defaultVideoInput=null,this.defaultAudioInput=null,this.defaultAudioOuput=null,this.realMediaDevicesListInitialization=!1,this.realMediaDevicesListInitializationWasAlreadyDone=!1,xa.debug("MediaDeviceManager"),navigator.mediaDevices!==null&&navigator.mediaDevices!==void 0&&(navigator.mediaDevices.ondevicechange=function(Wt){xa.debug("Media device have changed"),apiCC.mediaDeviceMgr.getMediaDevices("updatedOnDeviceChange")}),this.gotSources=function(Wt,$t){xa.debug("gotSources : sourceInfos :",Wt),apiCC.mediaDeviceMgr.audioDevicePresent=!1,apiCC.mediaDeviceMgr.videoDevicePresent=!1,apiCC.mediaDeviceMgr.audioOutputPresent=!1;var Qt=!1;apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources=apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray;var xt={},Bt=!1;(0,bt.fS)(apiCC.mediaDeviceMgr.mediaSourceInfos,Wt)||(xa.debug("MediaDevices change detected"),Qt=!0);var dn,pn=null,Xt=0,Ct=0,It=0,Ut=null;if(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},apiCC.mediaDeviceMgr.mediaSourceInfos=Wt,Wt!==null)for(dn=0;dn!==Wt.length;++dn)(pn=Wt[dn]).deviceId!==null&&pn.deviceId!==""?(Ut=new Ot(pn.deviceId,pn.kind),pn.label!==null&&pn.label!==void 0&&(this.realMediaDevicesListInitialization=!0)):(xa.debug("MediaDevices change but deviceId is not correct, using fakedeviceId :",dn),Ut=new Ot(dn,pn.kind)),pn.kind==="audio"||pn.kind==="audioinput"?(apiCC.mediaDeviceMgr.audioDevicePresent||(apiCC.mediaDeviceMgr.audioDevicePresent=!0),Ut.label=pn.label||"microphone "+ ++Xt,apiCC.mediaDeviceMgr.defaultAudioInput===null&&(apiCC.mediaDeviceMgr.defaultAudioInput=Ut),pn.getCapabilities!==null&&pn.getCapabilities!==void 0?Ut.capabilities=pn.getCapabilities():xa.debug("getCapabilities not defined")):pn.kind==="video"||pn.kind==="videoinput"?(apiCC.mediaDeviceMgr.videoDevicePresent||(apiCC.mediaDeviceMgr.videoDevicePresent=!0),Ut.label=pn.label||"camera "+ ++Ct,apiCC.mediaDeviceMgr.defaultVideoInput===null&&(apiCC.mediaDeviceMgr.defaultVideoInput=Ut),pn.getCapabilities!==null&&pn.getCapabilities!==void 0?Ut.capabilities=pn.getCapabilities():xa.debug("getCapabilities not defined")):pn.kind==="audiooutput"?(apiCC.mediaDeviceMgr.audioOutputPresent||(apiCC.mediaDeviceMgr.audioOutputPresent=!0),Ut.label=pn.label||"audio output "+ ++It,apiCC.mediaDeviceMgr.defaultAudioOuput===null&&(apiCC.mediaDeviceMgr.defaultAudioOuput=Ut)):(Ut.label=pn.label||"other source "+pn.deviceId,xa.trace("Detected some other kind of source : "+pn.kind)),xa.trace("Local device : "+Ut.label+" - "+Ut.id),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Ut.type]===void 0&&(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Ut.type]={}),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[Ut.type][Ut.id]=Ut;else xa.warn("Media detection is not supported by browser, considering micro and camera present"),apiCC.mediaDeviceMgr.audioDevicePresent=!0,apiCC.mediaDeviceMgr.videoDevicePresent=!0,apiCC.mediaDeviceMgr.audioOutputPresent=!0;if(xa.log("Audio device detected :"+apiCC.mediaDeviceMgr.audioDevicePresent),xa.log("Video device detected :"+apiCC.mediaDeviceMgr.videoDevicePresent),xa.log("audio Output device detected :"+apiCC.mediaDeviceMgr.audioOutputPresent),xa.debug("mediaDeviceSourceInfosArray :",apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray),apiCC.mediaDeviceMgr.audioDevicePresent===!1?apiCC.mediaDeviceMgr.videoDevicePresent===!1?apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_AUDIO_NO_VIDEO_DEVICE"):apiCC.myWebRTC_Event.createErrorEvent("Audio device is not present","NO_AUDIO_DEVICE"):apiCC.mediaDeviceMgr.videoDevicePresent===!1&&apiCC.myWebRTC_Event.createErrorEvent("Video device is not present","NO_VIDEO_DEVICE"),(0,bt.fS)(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources)||(xa.debug("mediaDeviceSourceInfosArray change detected"),Qt=!0),Qt===!0){xa.debug("fireMediaChangedEvent :",Qt);var Kt=this.getMediaDeviceListsDiff(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);this.realMediaDevicesListInitialization===!0&&this.realMediaDevicesListInitializationWasAlreadyDone===!1&&(xa.debug("This is the first real initialization of media device list"),Bt=!0),this.realMediaDevicesListInitialization===!0&&(this.realMediaDevicesListInitializationWasAlreadyDone=!0),this.mediaDeviceChangedDetected=!0,apiCC.myWebRTC_Event!==null&&apiCC.myWebRTC_Event.createMediaDeviceChangedEvent(Kt,$t,Bt),xa.debug("fireMediaChangedEvent :",apiCC.mediaDeviceMgr.mediaSourceInfos)}apiCC.session&&apiCC.session.apiCCWebRTCClient&&(apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),xt.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,xt.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(xt))},this.getMediaDevices=function(Wt){xa.debug("MediaDeviceManager::getMediaDevices : updateReason :",Wt),apiCC.browser==="IE"&&apiCC.browser_version>8?apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources):apiCC.getMediaDevices().then(function($t){apiCC.mediaDeviceMgr.gotSources($t,Wt)}).catch(function(){xa.log("Error on MediaDeviceManager::getMediaDevices"),apiCC.mediaDeviceMgr.gotSources(null,Wt)})},this.getMediaDeviceListsDiff=function(Wt,$t){$t!==void 0&&$t||($t={}),Wt!==void 0&&Wt||(Wt={});for(var Qt=[],xt=[],Bt=[],dn=0,pn=Object.keys($t);dn<pn.length;dn++){var Xt=pn[dn];if(Wt[Xt]===void 0)xt[Xt]=$t[Xt];else for(var Ct=0,It=Object.keys($t[Xt]);Ct<It.length;Ct++){var Ut=It[Ct];Wt[Xt][Ut]===void 0&&(xt[Xt]===void 0&&(xt[Xt]={}),xt[Xt][Ut]=$t[Xt][Ut])}}for(var Kt=0,qt=Object.keys(Wt);Kt<qt.length;Kt++)for(var en=qt[Kt],tn=0,sn=Object.keys(Wt[en]);tn<sn.length;tn++){var Sn=sn[tn];$t[en]!==void 0&&$t[en][Sn]!==void 0||(Qt[en]===void 0&&(Qt[en]={}),Qt[en][Sn]=Wt[en][Sn]),$t[en]!==void 0&&$t[en][Sn]!==void 0&&Wt[en][Sn].label!==$t[en][Sn].label&&(Bt[en]===void 0&&(Bt[en]={}),Bt[en][Sn]=Wt[en][Sn])}return{added:Object.keys(Qt).length>0?Qt:null,removed:Object.keys(xt).length>0?xt:null,updated:Object.keys(Bt).length>0?Bt:null}}},vt.mediaDeviceMgr.getMediaDevices(),vt.webRTCCompliant=vt.isWebRTCCompliant(),vt.qoSStatCompliant=vt.isQoSStatCompliant(),vt.screenSharingCompliant=vt.isScreenSharingCompliant());const Em=apiRTC},1549:(rt,it,s)=>{s.d(it,{Y:()=>mt}),s(6992),s(1532),s(1539),s(8783),s(3948),s(2772),s(4916),s(5306),s(2222),s(8733),s(3710),s(3161),s(9653),s(9070),s(9753),s(2526),s(1817),s(2165),s(1038),s(7042),s(8309);var et=s(3173);function nt(ot){return function(ut){if(Array.isArray(ut))return at(ut)}(ot)||function(ut){if(typeof Symbol<"u"&&ut[Symbol.iterator]!=null||ut["@@iterator"]!=null)return Array.from(ut)}(ot)||function(ut,ft){if(ut){if(typeof ut=="string")return at(ut,ft);var bt=Object.prototype.toString.call(ut).slice(8,-1);return bt==="Object"&&ut.constructor&&(bt=ut.constructor.name),bt==="Map"||bt==="Set"?Array.from(ut):bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt)?at(ut,ft):void 0}}(ot)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function at(ot,ut){(ut==null||ut>ot.length)&&(ut=ot.length);for(var ft=0,bt=new Array(ut);ft<ut;ft++)bt[ft]=ot[ft];return bt}function ht(ot,ut){for(var ft=0;ft<ut.length;ft++){var bt=ut[ft];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(ot,bt.key,bt)}}var dt=new Map,pt=et.g.LOG_LEVEL_WARN,lt=function(ot){var ut,ft=null,bt=null;for(ut=0;ut<ot.length;ut++)typeof ot[ut]=="string"&&(ot[ut].indexOf('"type":"invite"')!==-1?ot[ut].indexOf("candidate")===-1?ot[ut].indexOf("S->C:")===-1?ot[ut]="invite C->S: without candidate":ot[ut]="invite S->C: without candidate":ot[ut].indexOf("S->C:")===-1?ot[ut]="invite C->S: with candidate":ot[ut]="invite S->C: with candidate":ot[ut].indexOf('"type":"200OK"')!==-1?ot[ut].indexOf("candidate")===-1?ot[ut].indexOf("S->C:")===-1?ot[ut]="200OK C->S: without candidate":ot[ut]="200OK S->C: without candidate":ot[ut].indexOf("S->C:")===-1?ot[ut]="200OK C->S: with candidate":ot[ut]="200OK S->C: with candidate":ot[ut].indexOf('"type":"candidate"')!==-1&&(ot[ut].indexOf("S->C:")===-1?(ft=ot[ut].replace(/C->S: /g,""),bt=JSON.parse(ft),ot[ut]="candidate C->S:"+bt.candidate):(ft=ot[ut].replace(/onChannelMessage S->C: /g,""),bt=JSON.parse(ft),ot[ut]="candidate S->C:"+bt.candidate)));return ot},mt=function(){function ot(vt){if(function(yt,At){if(!(yt instanceof At))throw new TypeError("Cannot call a class as a function")}(this,ot),dt.has(vt))throw new Error("Cannot construct singleton Logger");this.category=vt,dt.set(vt,this)}var ut,ft,bt;return ut=ot,ft=[{key:"trace",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_TRACE].concat(yt))}},{key:"log",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(yt))}},{key:"debug",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_DEBUG].concat(yt))}},{key:"info",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_INFO].concat(yt))}},{key:"warn",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_WARN].concat(yt))}},{key:"error",value:function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];this.logMessage.apply(this,[et.g.LOG_LEVEL_ERROR].concat(yt))}},{key:"logMessage",value:function(vt){for(var yt=arguments.length,At=new Array(yt>1?yt-1:0),Nt=1;Nt<yt;Nt++)At[Nt-1]=arguments[Nt];if(console!=null){if(vt<=pt){var St="[".concat(new Date().toISOString(),"]");switch(vt in et.g.LOG_LEVEL_LABELS&&(St+="[".concat(et.g.LOG_LEVEL_LABELS[vt],"]")),St+=et.g.LOG_PREFIX+"(".concat(this.category,")"),vt){case et.g.LOG_LEVEL_ERROR:var wt;console.error&&(wt=console).error.apply(wt,[St].concat(nt(At)));break;case et.g.LOG_LEVEL_WARN:var Mt;console.warn&&(Mt=console).warn.apply(Mt,[St].concat(nt(At)));break;case et.g.LOG_LEVEL_INFO:var Ht;console.info&&(Ht=console).info.apply(Ht,[St].concat(nt(At)));break;default:var Ot;console.log&&(Ot=console).log.apply(Ot,[St].concat(nt(At)))}}typeof apiCC<"u"&&apiCC.logStorageActivated&&vt<=apiCC.logStorageLevel&&(At=lt(At),apiCC.logStorage.push(JSON.stringify({name:"log",args:{0:"(".concat(this.category,")")+":"+At}})))}}}],bt=[{key:"get",value:function(vt){return dt.has(vt)?dt.get(vt):new ot(vt)}},{key:"setLogLevel",value:function(vt){if(!Number.isInteger(vt)||vt<0)throw"Log level invalid";pt=vt}},{key:"getLogLevel",value:function(){return pt}}],ft&&ht(ut.prototype,ft),bt&&ht(ut,bt),Object.defineProperty(ut,"prototype",{writable:!1}),ot}()},3173:(rt,it,s)=>{s.d(it,{g:()=>et}),s(2526),s(1817),s(1539);var et={LOG_PREFIX:"apiRTC",LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,LOG_LEVEL_LABELS:{}};et.LOG_LEVEL_LABELS[et.LOG_LEVEL_ERROR]="ERROR",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_WARN]="WARN",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_INFO]="INFO",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_DEBUG]="DEBUG",et.LOG_LEVEL_LABELS[et.LOG_LEVEL_TRACE]="TRACE",et.ERROR_OTHER=0,et.ERROR_INVALID_CREDENTIALS=1,et.ERROR_NETWORK_UNAVAILABLE=2,et.ERROR_SERVER_UNAVAILABLE=3,et.ERROR_UNAUTHORIZED=4,et.ERROR_APIRTC_INITIALISATION_FAILED=5,et.ERROR_APIRTC_SESSION_ALREADY_ON=6,et.ERROR_REGISTRATION_URI_INVALID=7,et.ERROR_NOT_FOUND=8,et.ERROR_BAD_PARAMETER=9,et.ERROR_INVITATION_STATE_INVALID=10,et.ERROR_TIMED_OUT=11,et.ERROR_STREAM_RECORD=12,et.ERROR_HTTP=13,et.ERROR_NOT_ALLOWED=14,et.ERROR_OPERATION_CANCELED=15,et.ERROR_WRONG_STATE=16,et.MEDIA_TYPE_PHOTO=0,et.MEDIA_TYPE_VIDEO=1,et.MEDIA_TYPE_AUDIO=2,et.MEDIA_TYPE_DOC=3,et.CONTACT_SEND_DATA_IDENTIFIER="contact_data",et.CONTACT_NEW_MEDIA_IDENTIFIER="contact_new_media",et.CONTACT_SEND_FILEINFO_IDENTIFIER="contact_file_info",et.CONTACT_DATACHANNEL_INVITATION="contact_datachannel_invitation",et.CONTACT_EVENTCENTER_DATA_REQUEST="contact_event_center_data_request",et.CONTACT_EVENTCENTER_DATA_ANSWER="contact_event_center_data_answer",et.CONTACT_GET_CAPABILITIES_IDENTIFIER="contact_get_capabilities",et.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER="contact_get_capabilities_result",et.CONTACT_GET_SETTINGS_IDENTIFIER="contact_get_settings",et.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER="contact_get_settings_result",et.CONTACT_GET_CONSTRAINTS_IDENTIFIER="contact_get_constraints",et.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER="contact_get_constraints_result",et.CONTACT_CHANGED_CONSTRAINTS_IDENTIFIER="contact_changed_constraints",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER="contact_get_remote_audio_flow_status",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER="contact_get_remote_video_flow_status",et.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_audio_flow_status_result",et.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER="contact_get_remote_video_flow_status_result",et.CONTACT_GET_REMOTE_ERROR="contact_get_remote_error",et.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER="contact_apply_constraints_identifier",et.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER="contact_apply_constraints_result_identifier",et.CONTACT_DISABLE_AUDIO_REQUEST="contact_disable_audio_request",et.CONTACT_DISABLE_AUDIO_ANSWER="contact_disable_audio_answer",et.CONTACT_ENABLE_AUDIO_REQUEST="contact_enable_audio_request",et.CONTACT_ENABLE_AUDIO_ANSWER="contact_enable_audio_answer",et.CONTACT_DISABLE_VIDEO_REQUEST="contact_disable_video_request",et.CONTACT_DISABLE_VIDEO_ANSWER="contact_disable_video_answer",et.CONTACT_ENABLE_VIDEO_REQUEST="contact_enable_video_request",et.CONTACT_ENABLE_VIDEO_ANSWER="contact_enable_video_answer",et.CONTACT_STREAM_UPDATED_INFO="contact_stream_updated_info",et.CONTACT_REMOTEACCESS_INVITATION_IDENTIFIER="contact_remote_access_invite",et.CONTACT_REMOTEACCESS_ANSWER_IDENTIFIER="contact_remote_access_answer",et.CONTACT_REMOTEACCESS_STOP_IDENTIFIER="contact_remote_access_stop",et.CONTACT_REMOTEACCESS_APP_STATUS_MESSAGE="contact_remote_access_app_status_message",et.CONTACT_REMOTEACCESS_APP_MESSAGE="contact_remote_access_app_message",et.CONVERSATION_ACCESS_GRANTED="GRANTED",et.CONVERSATION_NEED_MODERATOR_ACCEPTATION="NEED_MODERATOR_ACCEPTATION",et.CONVERSATION_ROLE_MODERATOR="moderator",et.CONVERSATION_ROLE_CONTRIBUTOR="contributor",et.CONVERSATION_ROLE_GUEST="guest",et.CONVERSATION_WAITING_ROOM_PREFIX="waiting-room-",et.CONVERSATION_SEND_DATA_IDENTIFIER="conv_data",et.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER="conv_persistent_data_update",et.CONVERSATION_JOIN_REQUEST_IDENTIFIER="conv_join_req",et.CONVERSATION_JOIN_ANSWER_IDENTIFIER="conv_join_ans",et.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER="conv_moderator_connected",et.CONVERSATION_NEW_MEDIA_IDENTIFIER="conv_new_media",et.CONVERSATION_CLOSED_IDENTIFIER="conv_closed",et.CONVERSATION_INVITATION_IDENTIFIER="conv_invite",et.INVITATION_ANSWER_IDENTIFIER="invite_ans",et.RECORD_BASE_URL="https://data2.apizee.com:10000/videoManager",et.RECORD_PLAY_URL=et.RECORD_BASE_URL+"?action=play&recordedFileName=",et.DEFAULT_MCU="mcu4.apizee.com",et.DEFAULT_TURNADDRESS="mp1.apizee.com",et.CALL_STATUS_WAITING_FOR_CALLEE=Symbol("CALL_STATUS_WAITING_FOR_CALLEE"),et.CALL_STATUS_ONGOING=Symbol("CALL_STATUS_ONGOING"),et.CALL_STATUS_ENDED=Symbol("CALL_STATUS_ENDED"),et.DATACHANNEL_STATUS_WAITING=Symbol("DATACHANNEL_STATUS_WAITING"),et.DATACHANNEL_STATUS_ONGOING=Symbol("DATACHANNEL_STATUS_ONGOING"),et.DATACHANNEL_STATUS_ENDED=Symbol("DATACHANNEL_STATUS_ENDED"),et.DATACHANNEL_TYPE_RECEIVE=Symbol("DATACHANNEL_TYPE_RECEIVE"),et.DATACHANNEL_TYPE_SEND=Symbol("DATACHANNEL_TYPE_SEND"),et.CONVERSATION_STATUS_JOINED=Symbol("CONVERSATION_STATUS_JOINED"),et.CONVERSATION_STATUS_NOT_JOINED=Symbol("CONVERSATION_STATUS_NOT_JOINED"),et.CONVERSATION_STATUS_WAITING=Symbol("CONVERSATION_STATUS_WAITING"),et.CONVERSATION_STATUS_JOINING=Symbol("CONVERSATION_STATUS_JOINING"),et.CONVERSATION_WHITEBOARD_STARTED=Symbol("CONVERSATION_WHITEBOARD_STARTED"),et.CONVERSATION_WHITEBOARD_NOT_STARTED=Symbol("CONVERSATION_WHITEBOARD_NOT_STARTED"),et.STATE_IDLE=Symbol("STATE_IDLE"),et.STATE_JOINING=Symbol("STATE_JOINING"),et.STATE_ACTIVE=Symbol("STATE_ACTIVE"),et.STATE_LEAVING=Symbol("STATE_LEAVING"),et.INVITATION_STATUS_ACCEPTED=Symbol("INVITATION_STATUS_ACCEPTED"),et.INVITATION_STATUS_DECLINED=Symbol("INVITATION_STATUS_DECLINED"),et.INVITATION_STATUS_STANDBY=Symbol("INVITATION_STATUS_STANDBY"),et.INVITATION_STATUS_EXPIRED=Symbol("INVITATION_STATUS_EXPIRED"),et.INVITATION_STATUS_CANCELLED=Symbol("INVITATION_STATUS_CANCELLED"),et.INVITATION_STATUS_ENDED=Symbol("INVITATION_STATUS_ENDED"),et.STREAM_TYPE_NO_INPUT="no_input",et.STREAM_TYPE_AUDIO="audio",et.STREAM_TYPE_VIDEO="video",et.STREAM_AUDIO_ANALYSIS_THRESHOLD=100,et.STREAM_AUDIO_NOISE_REDUCTION_VAI={soft:.7,medium:.8,hard:.9},et.CONTACT_DISCONNECTION_DELAY=1e4,et.CONVERSATION_JOIN_REQUEST_INTERVAL=5e3,et.APIRTC_MEDIA_DEVICE_DETECTION_DELAY=1e4,et.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY=5e3,et.CONVERSATION_WHITEBOARD_START_DELAY=5e3,et.CONVERSATION_RECORDING_STARTED_DELAY=1e4,et.CONVERSATION_RECORDING_STOPPED_DELAY=5e3,et.CONVERSATION_STREAMING_STARTED_DELAY=1e4,et.CONVERSATION_STREAMING_STOPPED_DELAY=1e4,et.CONVERSATION_PARTICIPANT_EJECTION_DELAY=5e3,et.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT=3e3},1215:(rt,it,s)=>{function et(dt){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pt){return typeof pt}:function(pt){return pt&&typeof Symbol=="function"&&pt.constructor===Symbol&&pt!==Symbol.prototype?"symbol":typeof pt},et(dt)}function nt(dt,pt){return arguments.length===3?at(arguments[0],arguments[1],arguments[2]):pt==="null"?dt===null:pt==="array"?dt!==null&&et(dt)==="object"&&Array.isArray(dt):dt!==null&&et(dt)===pt}function at(dt,pt,lt){if(pt!==null&&et(pt)==="object"&&Array.isArray(pt)&&pt.length>=1){var mt=pt[0];if(pt.length>1)return nt(dt,"object")&&nt(mt,"string")&&dt.hasOwnProperty(mt)&&nt(dt[mt],"object")&&at(dt[mt],pt.slice(1),lt);pt=mt}return lt==="undefined"?nt(dt,"object")&&nt(pt,"string")&&!dt.hasOwnProperty(pt)&&nt(dt[pt],lt):nt(dt,"object")&&nt(pt,"string")&&dt.hasOwnProperty(pt)&&nt(dt[pt],lt)}s.d(it,{g:()=>ht}),s(4916),s(5306),s(3710),s(1539),s(9714),s(7941),s(9575),s(6716),s(9554),s(9601),s(6992),s(1532),s(8783),s(3948),s(9753),s(7042),s(3843),s(2564),s(2526),s(1817),s(2165);var ht={assignObject:function(dt,pt){var lt,mt,ot;for(dt==null&&(dt={}),lt=1;lt<arguments.length;lt+=1)for(mt in ot=arguments[lt])ot.hasOwnProperty(mt)&&(dt[mt]=ot[mt]);return dt},throttle:function(dt,pt){var lt,mt,ot,ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=null,bt=0,vt=function(){bt=ut.leading===!1?0:Date.now(),ft=null,ot=dt.apply(lt,mt),ft||(lt=mt=null)};return function(){var yt=Date.now();bt||ut.leading!==!1||(bt=yt);var At=pt-(yt-bt);return lt=this,mt=arguments,At<=0||At>pt?(ft&&(clearTimeout(ft),ft=null),bt=yt,ot=dt.apply(lt,mt),ft||(lt=mt=null)):ft||ut.trailing===!1||(ft=setTimeout(vt,At)),ot}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(dt){var pt=16*Math.random()|0;return(dt==="x"?pt:3&pt|8).toString(16)})},hashString:function(dt){for(var pt=0,lt=0,mt=dt.length;lt<mt;)pt=(pt<<5)-pt+dt.charCodeAt(lt++)<<0;return Math.abs(pt)},arrayBuffertoString:function(dt){var pt=new DataView(dt);return new TextDecoder("utf-8").decode(pt)},getAudioContext:function(){return apiRTC.audioProcessor.getOrCreateAudioContext()},parseRecordingEvent:function(dt,pt){var lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(["roomName","callId","recordType","convId","mediaId","mediaURL","recordedFileName"].forEach(function(ot){pt.hasOwnProperty(ot)&&(lt[ot]=String(pt[ot]))}),pt.mediaType==="AUDIO-ONLY"?(lt.audioOnly=!0,lt.videoOnly=!1):pt.mediaType==="VIDEO-ONLY"?(lt.audioOnly=!1,lt.videoOnly=!0):(lt.audioOnly=!1,lt.videoOnly=!1),lt.recordType==="composite"&&pt.hasOwnProperty("descriptor")){var mt={};Object.assign(mt,pt.descriptor),mt.hasOwnProperty("mode")?lt.mode=mt.mode:lt.mode="complete",mt.hasOwnProperty("labelEnabled")?(lt.labelEnabled=mt.labelEnabled===!0,lt.labelEnabled===!0&&mt.hasOwnProperty("labels")&&(lt.labels=mt.labels)):lt.labelEnabled=!1}return lt},paramsToQueryString:function(dt){for(var pt="",lt=0,mt=Object.keys(dt);lt<mt.length;lt++){var ot=mt[lt];pt+=pt===""?"?":"&",dt[ot]===null||dt[ot]===void 0?console.warn("apiRTC Utils - paramsToQueryString : "+ot+" is undefined!"):pt+=ot+"="+dt[ot].toString()}return pt},createError:function(dt,pt,lt){var mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};lt&&lt.error(pt);var ot={code:dt};return pt instanceof String?ot.error=new Error(pt):pt instanceof Error?ot.error=pt:ot.error=new Error(String(pt)),nt(mt,"object")&&(mt.hasOwnProperty("fromError")&&(ot.fromError=mt.fromError),mt.hasOwnProperty("httpCode")&&(ot.httpCode=mt.httpCode)),ot},isSet:function(dt){return dt!=null},isTypeof:nt,isPropertyTypeof:at,_private:{dataCallsOnHold:new Map,dataChannelInvitations:new Map,dataCallsFileInfo:new Map}}},9662:(rt,it,s)=>{var et=s(614),nt=s(6330),at=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw at(nt(ht)+" is not a function")}},9483:(rt,it,s)=>{var et=s(4411),nt=s(6330),at=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw at(nt(ht)+" is not a constructor")}},6077:(rt,it,s)=>{var et=s(614),nt=String,at=TypeError;rt.exports=function(ht){if(typeof ht=="object"||et(ht))return ht;throw at("Can't set "+nt(ht)+" as a prototype")}},1223:(rt,it,s)=>{var et=s(5112),nt=s(30),at=s(3070).f,ht=et("unscopables"),dt=Array.prototype;dt[ht]==null&&at(dt,ht,{configurable:!0,value:nt(null)}),rt.exports=function(pt){dt[ht][pt]=!0}},1530:(rt,it,s)=>{var et=s(8710).charAt;rt.exports=function(nt,at,ht){return at+(ht?et(nt,at).length:1)}},5787:(rt,it,s)=>{var et=s(7976),nt=TypeError;rt.exports=function(at,ht){if(et(ht,at))return at;throw nt("Incorrect invocation")}},9670:(rt,it,s)=>{var et=s(111),nt=String,at=TypeError;rt.exports=function(ht){if(et(ht))return ht;throw at(nt(ht)+" is not an object")}},4019:rt=>{rt.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7556:(rt,it,s)=>{var et=s(7293);rt.exports=et(function(){if(typeof ArrayBuffer=="function"){var nt=new ArrayBuffer(8);Object.isExtensible(nt)&&Object.defineProperty(nt,"a",{value:8})}})},260:(rt,it,s)=>{var et,nt,at,ht=s(4019),dt=s(9781),pt=s(7854),lt=s(614),mt=s(111),ot=s(2597),ut=s(648),ft=s(6330),bt=s(8880),vt=s(8052),yt=s(3070).f,At=s(7976),Nt=s(9518),St=s(7674),wt=s(5112),Mt=s(9711),Ht=s(9909),Ot=Ht.enforce,Dt=Ht.get,Gt=pt.Int8Array,nn=Gt&&Gt.prototype,zt=pt.Uint8ClampedArray,Ft=zt&&zt.prototype,un=Gt&&Nt(Gt),vn=nn&&Nt(nn),yn=Object.prototype,cn=pt.TypeError,gn=wt("toStringTag"),Cn=Mt("TYPED_ARRAY_TAG"),fn=ht&&!!St&&ut(pt.opera)!=="Opera",Tn=!1,On={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ln={BigInt64Array:8,BigUint64Array:8},An=function(In){var kn=Nt(In);if(mt(kn)){var xn=Dt(kn);return xn&&ot(xn,"TypedArrayConstructor")?xn.TypedArrayConstructor:An(kn)}},Rn=function(In){if(!mt(In))return!1;var kn=ut(In);return ot(On,kn)||ot(Ln,kn)};for(et in On)(at=(nt=pt[et])&&nt.prototype)?Ot(at).TypedArrayConstructor=nt:fn=!1;for(et in Ln)(at=(nt=pt[et])&&nt.prototype)&&(Ot(at).TypedArrayConstructor=nt);if((!fn||!lt(un)||un===Function.prototype)&&(un=function(){throw cn("Incorrect invocation")},fn))for(et in On)pt[et]&&St(pt[et],un);if((!fn||!vn||vn===yn)&&(vn=un.prototype,fn))for(et in On)pt[et]&&St(pt[et].prototype,vn);if(fn&&Nt(Ft)!==vn&&St(Ft,vn),dt&&!ot(vn,gn))for(et in Tn=!0,yt(vn,gn,{get:function(){return mt(this)?this[Cn]:void 0}}),On)pt[et]&&bt(pt[et],Cn,et);rt.exports={NATIVE_ARRAY_BUFFER_VIEWS:fn,TYPED_ARRAY_TAG:Tn&&Cn,aTypedArray:function(In){if(Rn(In))return In;throw cn("Target is not a typed array")},aTypedArrayConstructor:function(In){if(lt(In)&&(!St||At(un,In)))return In;throw cn(ft(In)+" is not a typed array constructor")},exportTypedArrayMethod:function(In,kn,xn,Yn){if(dt){if(xn)for(var Un in On){var jn=pt[Un];if(jn&&ot(jn.prototype,In))try{delete jn.prototype[In]}catch{try{jn.prototype[In]=kn}catch{}}}vn[In]&&!xn||vt(vn,In,xn?kn:fn&&nn[In]||kn,Yn)}},exportTypedArrayStaticMethod:function(In,kn,xn){var Yn,Un;if(dt){if(St){if(xn){for(Yn in On)if((Un=pt[Yn])&&ot(Un,In))try{delete Un[In]}catch{}}if(un[In]&&!xn)return;try{return vt(un,In,xn?kn:fn&&un[In]||kn)}catch{}}for(Yn in On)!(Un=pt[Yn])||Un[In]&&!xn||vt(Un,In,kn)}},getTypedArrayConstructor:An,isView:function(In){if(!mt(In))return!1;var kn=ut(In);return kn==="DataView"||ot(On,kn)||ot(Ln,kn)},isTypedArray:Rn,TypedArray:un,TypedArrayPrototype:vn}},3331:(rt,it,s)=>{var et=s(7854),nt=s(1702),at=s(9781),ht=s(4019),dt=s(6530),pt=s(8880),lt=s(9190),mt=s(7293),ot=s(5787),ut=s(9303),ft=s(7466),bt=s(7067),vt=s(1179),yt=s(9518),At=s(7674),Nt=s(8006).f,St=s(3070).f,wt=s(1285),Mt=s(1589),Ht=s(8003),Ot=s(9909),Dt=dt.PROPER,Gt=dt.CONFIGURABLE,nn=Ot.get,zt=Ot.set,Ft="ArrayBuffer",un="Wrong index",vn=et.ArrayBuffer,yn=vn,cn=yn&&yn.prototype,gn=et.DataView,Cn=gn&&gn.prototype,fn=Object.prototype,Tn=et.Array,On=et.RangeError,Ln=nt(wt),An=nt([].reverse),Rn=vt.pack,In=vt.unpack,kn=function(bn){return[255&bn]},xn=function(bn){return[255&bn,bn>>8&255]},Yn=function(bn){return[255&bn,bn>>8&255,bn>>16&255,bn>>24&255]},Un=function(bn){return bn[3]<<24|bn[2]<<16|bn[1]<<8|bn[0]},jn=function(bn){return Rn(bn,23,4)},Qn=function(bn){return Rn(bn,52,8)},on=function(bn,wn){St(bn.prototype,wn,{get:function(){return nn(this)[wn]}})},Hn=function(bn,wn,Yt,kt){var st=bt(Yt),Tt=nn(bn);if(st+wn>Tt.byteLength)throw On(un);var Rt=nn(Tt.buffer).bytes,Lt=st+Tt.byteOffset,Et=Mt(Rt,Lt,Lt+wn);return kt?Et:An(Et)},Fn=function(bn,wn,Yt,kt,st,Tt){var Rt=bt(Yt),Lt=nn(bn);if(Rt+wn>Lt.byteLength)throw On(un);for(var Et=nn(Lt.buffer).bytes,jt=Rt+Lt.byteOffset,Pt=kt(+st),Vt=0;Vt<wn;Vt++)Et[jt+Vt]=Pt[Tt?Vt:wn-Vt-1]};if(ht){var Vn=Dt&&vn.name!==Ft;if(mt(function(){vn(1)})&&mt(function(){new vn(-1)})&&!mt(function(){return new vn,new vn(1.5),new vn(NaN),Vn&&!Gt}))Vn&&Gt&&pt(vn,"name",Ft);else{(yn=function(bn){return ot(this,cn),new vn(bt(bn))}).prototype=cn;for(var Bn,qn=Nt(vn),Gn=0;qn.length>Gn;)(Bn=qn[Gn++])in yn||pt(yn,Bn,vn[Bn]);cn.constructor=yn}At&&yt(Cn)!==fn&&At(Cn,fn);var _n=new gn(new yn(2)),$n=nt(Cn.setInt8);_n.setInt8(0,2147483648),_n.setInt8(1,2147483649),!_n.getInt8(0)&&_n.getInt8(1)||lt(Cn,{setInt8:function(bn,wn){$n(this,bn,wn<<24>>24)},setUint8:function(bn,wn){$n(this,bn,wn<<24>>24)}},{unsafe:!0})}else cn=(yn=function(bn){ot(this,cn);var wn=bt(bn);zt(this,{bytes:Ln(Tn(wn),0),byteLength:wn}),at||(this.byteLength=wn)}).prototype,Cn=(gn=function(bn,wn,Yt){ot(this,Cn),ot(bn,cn);var kt=nn(bn).byteLength,st=ut(wn);if(st<0||st>kt)throw On("Wrong offset");if(st+(Yt=Yt===void 0?kt-st:ft(Yt))>kt)throw On("Wrong length");zt(this,{buffer:bn,byteLength:Yt,byteOffset:st}),at||(this.buffer=bn,this.byteLength=Yt,this.byteOffset=st)}).prototype,at&&(on(yn,"byteLength"),on(gn,"buffer"),on(gn,"byteLength"),on(gn,"byteOffset")),lt(Cn,{getInt8:function(bn){return Hn(this,1,bn)[0]<<24>>24},getUint8:function(bn){return Hn(this,1,bn)[0]},getInt16:function(bn){var wn=Hn(this,2,bn,arguments.length>1?arguments[1]:void 0);return(wn[1]<<8|wn[0])<<16>>16},getUint16:function(bn){var wn=Hn(this,2,bn,arguments.length>1?arguments[1]:void 0);return wn[1]<<8|wn[0]},getInt32:function(bn){return Un(Hn(this,4,bn,arguments.length>1?arguments[1]:void 0))},getUint32:function(bn){return Un(Hn(this,4,bn,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(bn){return In(Hn(this,4,bn,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(bn){return In(Hn(this,8,bn,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(bn,wn){Fn(this,1,bn,kn,wn)},setUint8:function(bn,wn){Fn(this,1,bn,kn,wn)},setInt16:function(bn,wn){Fn(this,2,bn,xn,wn,arguments.length>2?arguments[2]:void 0)},setUint16:function(bn,wn){Fn(this,2,bn,xn,wn,arguments.length>2?arguments[2]:void 0)},setInt32:function(bn,wn){Fn(this,4,bn,Yn,wn,arguments.length>2?arguments[2]:void 0)},setUint32:function(bn,wn){Fn(this,4,bn,Yn,wn,arguments.length>2?arguments[2]:void 0)},setFloat32:function(bn,wn){Fn(this,4,bn,jn,wn,arguments.length>2?arguments[2]:void 0)},setFloat64:function(bn,wn){Fn(this,8,bn,Qn,wn,arguments.length>2?arguments[2]:void 0)}});Ht(yn,Ft),Ht(gn,"DataView"),rt.exports={ArrayBuffer:yn,DataView:gn}},1048:(rt,it,s)=>{var et=s(7908),nt=s(1400),at=s(6244),ht=s(5117),dt=Math.min;rt.exports=[].copyWithin||function(pt,lt){var mt=et(this),ot=at(mt),ut=nt(pt,ot),ft=nt(lt,ot),bt=arguments.length>2?arguments[2]:void 0,vt=dt((bt===void 0?ot:nt(bt,ot))-ft,ot-ut),yt=1;for(ft<ut&&ut<ft+vt&&(yt=-1,ft+=vt-1,ut+=vt-1);vt-- >0;)ft in mt?mt[ut]=mt[ft]:ht(mt,ut),ut+=yt,ft+=yt;return mt}},1285:(rt,it,s)=>{var et=s(7908),nt=s(1400),at=s(6244);rt.exports=function(ht){for(var dt=et(this),pt=at(dt),lt=arguments.length,mt=nt(lt>1?arguments[1]:void 0,pt),ot=lt>2?arguments[2]:void 0,ut=ot===void 0?pt:nt(ot,pt);ut>mt;)dt[mt++]=ht;return dt}},8533:(rt,it,s)=>{var et=s(2092).forEach,nt=s(9341)("forEach");rt.exports=nt?[].forEach:function(at){return et(this,at,arguments.length>1?arguments[1]:void 0)}},7745:(rt,it,s)=>{var et=s(6244);rt.exports=function(nt,at){for(var ht=0,dt=et(at),pt=new nt(dt);dt>ht;)pt[ht]=at[ht++];return pt}},8457:(rt,it,s)=>{var et=s(9974),nt=s(6916),at=s(7908),ht=s(3411),dt=s(7659),pt=s(4411),lt=s(6244),mt=s(6135),ot=s(8554),ut=s(1246),ft=Array;rt.exports=function(bt){var vt=at(bt),yt=pt(this),At=arguments.length,Nt=At>1?arguments[1]:void 0,St=Nt!==void 0;St&&(Nt=et(Nt,At>2?arguments[2]:void 0));var wt,Mt,Ht,Ot,Dt,Gt,nn=ut(vt),zt=0;if(!nn||this===ft&&dt(nn))for(wt=lt(vt),Mt=yt?new this(wt):ft(wt);wt>zt;zt++)Gt=St?Nt(vt[zt],zt):vt[zt],mt(Mt,zt,Gt);else for(Dt=(Ot=ot(vt,nn)).next,Mt=yt?new this:[];!(Ht=nt(Dt,Ot)).done;zt++)Gt=St?ht(Ot,Nt,[Ht.value,zt],!0):Ht.value,mt(Mt,zt,Gt);return Mt.length=zt,Mt}},1318:(rt,it,s)=>{var et=s(5656),nt=s(1400),at=s(6244),ht=function(dt){return function(pt,lt,mt){var ot,ut=et(pt),ft=at(ut),bt=nt(mt,ft);if(dt&&lt!=lt){for(;ft>bt;)if((ot=ut[bt++])!=ot)return!0}else for(;ft>bt;bt++)if((dt||bt in ut)&&ut[bt]===lt)return dt||bt||0;return!dt&&-1}};rt.exports={includes:ht(!0),indexOf:ht(!1)}},2092:(rt,it,s)=>{var et=s(9974),nt=s(1702),at=s(8361),ht=s(7908),dt=s(6244),pt=s(5417),lt=nt([].push),mt=function(ot){var ut=ot==1,ft=ot==2,bt=ot==3,vt=ot==4,yt=ot==6,At=ot==7,Nt=ot==5||yt;return function(St,wt,Mt,Ht){for(var Ot,Dt,Gt=ht(St),nn=at(Gt),zt=et(wt,Mt),Ft=dt(nn),un=0,vn=Ht||pt,yn=ut?vn(St,Ft):ft||At?vn(St,0):void 0;Ft>un;un++)if((Nt||un in nn)&&(Dt=zt(Ot=nn[un],un,Gt),ot))if(ut)yn[un]=Dt;else if(Dt)switch(ot){case 3:return!0;case 5:return Ot;case 6:return un;case 2:lt(yn,Ot)}else switch(ot){case 4:return!1;case 7:lt(yn,Ot)}return yt?-1:bt||vt?vt:yn}};rt.exports={forEach:mt(0),map:mt(1),filter:mt(2),some:mt(3),every:mt(4),find:mt(5),findIndex:mt(6),filterReject:mt(7)}},6583:(rt,it,s)=>{var et=s(2104),nt=s(5656),at=s(9303),ht=s(6244),dt=s(9341),pt=Math.min,lt=[].lastIndexOf,mt=!!lt&&1/[1].lastIndexOf(1,-0)<0,ot=dt("lastIndexOf"),ut=mt||!ot;rt.exports=ut?function(ft){if(mt)return et(lt,this,arguments)||0;var bt=nt(this),vt=ht(bt),yt=vt-1;for(arguments.length>1&&(yt=pt(yt,at(arguments[1]))),yt<0&&(yt=vt+yt);yt>=0;yt--)if(yt in bt&&bt[yt]===ft)return yt||0;return-1}:lt},1194:(rt,it,s)=>{var et=s(7293),nt=s(5112),at=s(7392),ht=nt("species");rt.exports=function(dt){return at>=51||!et(function(){var pt=[];return(pt.constructor={})[ht]=function(){return{foo:1}},pt[dt](Boolean).foo!==1})}},9341:(rt,it,s)=>{var et=s(7293);rt.exports=function(nt,at){var ht=[][nt];return!!ht&&et(function(){ht.call(null,at||function(){return 1},1)})}},3671:(rt,it,s)=>{var et=s(9662),nt=s(7908),at=s(8361),ht=s(6244),dt=TypeError,pt=function(lt){return function(mt,ot,ut,ft){et(ot);var bt=nt(mt),vt=at(bt),yt=ht(bt),At=lt?yt-1:0,Nt=lt?-1:1;if(ut<2)for(;;){if(At in vt){ft=vt[At],At+=Nt;break}if(At+=Nt,lt?At<0:yt<=At)throw dt("Reduce of empty array with no initial value")}for(;lt?At>=0:yt>At;At+=Nt)At in vt&&(ft=ot(ft,vt[At],At,bt));return ft}};rt.exports={left:pt(!1),right:pt(!0)}},1589:(rt,it,s)=>{var et=s(1400),nt=s(6244),at=s(6135),ht=Array,dt=Math.max;rt.exports=function(pt,lt,mt){for(var ot=nt(pt),ut=et(lt,ot),ft=et(mt===void 0?ot:mt,ot),bt=ht(dt(ft-ut,0)),vt=0;ut<ft;ut++,vt++)at(bt,vt,pt[ut]);return bt.length=vt,bt}},206:(rt,it,s)=>{var et=s(1702);rt.exports=et([].slice)},4362:(rt,it,s)=>{var et=s(1589),nt=Math.floor,at=function(pt,lt){var mt=pt.length,ot=nt(mt/2);return mt<8?ht(pt,lt):dt(pt,at(et(pt,0,ot),lt),at(et(pt,ot),lt),lt)},ht=function(pt,lt){for(var mt,ot,ut=pt.length,ft=1;ft<ut;){for(ot=ft,mt=pt[ft];ot&&lt(pt[ot-1],mt)>0;)pt[ot]=pt[--ot];ot!==ft++&&(pt[ot]=mt)}return pt},dt=function(pt,lt,mt,ot){for(var ut=lt.length,ft=mt.length,bt=0,vt=0;bt<ut||vt<ft;)pt[bt+vt]=bt<ut&&vt<ft?ot(lt[bt],mt[vt])<=0?lt[bt++]:mt[vt++]:bt<ut?lt[bt++]:mt[vt++];return pt};rt.exports=at},7475:(rt,it,s)=>{var et=s(3157),nt=s(4411),at=s(111),ht=s(5112)("species"),dt=Array;rt.exports=function(pt){var lt;return et(pt)&&(lt=pt.constructor,(nt(lt)&&(lt===dt||et(lt.prototype))||at(lt)&&(lt=lt[ht])===null)&&(lt=void 0)),lt===void 0?dt:lt}},5417:(rt,it,s)=>{var et=s(7475);rt.exports=function(nt,at){return new(et(nt))(at===0?0:at)}},3411:(rt,it,s)=>{var et=s(9670),nt=s(9212);rt.exports=function(at,ht,dt,pt){try{return pt?ht(et(dt)[0],dt[1]):ht(dt)}catch(lt){nt(at,"throw",lt)}}},7072:(rt,it,s)=>{var et=s(5112)("iterator"),nt=!1;try{var at=0,ht={next:function(){return{done:!!at++}},return:function(){nt=!0}};ht[et]=function(){return this},Array.from(ht,function(){throw 2})}catch{}rt.exports=function(dt,pt){if(!pt&&!nt)return!1;var lt=!1;try{var mt={};mt[et]=function(){return{next:function(){return{done:lt=!0}}}},dt(mt)}catch{}return lt}},4326:(rt,it,s)=>{var et=s(1702),nt=et({}.toString),at=et("".slice);rt.exports=function(ht){return at(nt(ht),8,-1)}},648:(rt,it,s)=>{var et=s(1694),nt=s(614),at=s(4326),ht=s(5112)("toStringTag"),dt=Object,pt=at(function(){return arguments}())=="Arguments";rt.exports=et?at:function(lt){var mt,ot,ut;return lt===void 0?"Undefined":lt===null?"Null":typeof(ot=function(ft,bt){try{return ft[bt]}catch{}}(mt=dt(lt),ht))=="string"?ot:pt?at(mt):(ut=at(mt))=="Object"&&nt(mt.callee)?"Arguments":ut}},5631:(rt,it,s)=>{var et=s(3070).f,nt=s(30),at=s(9190),ht=s(9974),dt=s(5787),pt=s(408),lt=s(654),mt=s(6340),ot=s(9781),ut=s(2423).fastKey,ft=s(9909),bt=ft.set,vt=ft.getterFor;rt.exports={getConstructor:function(yt,At,Nt,St){var wt=yt(function(Gt,nn){dt(Gt,Mt),bt(Gt,{type:At,index:nt(null),first:void 0,last:void 0,size:0}),ot||(Gt.size=0),nn!=null&&pt(nn,Gt[St],{that:Gt,AS_ENTRIES:Nt})}),Mt=wt.prototype,Ht=vt(At),Ot=function(Gt,nn,zt){var Ft,un,vn=Ht(Gt),yn=Dt(Gt,nn);return yn?yn.value=zt:(vn.last=yn={index:un=ut(nn,!0),key:nn,value:zt,previous:Ft=vn.last,next:void 0,removed:!1},vn.first||(vn.first=yn),Ft&&(Ft.next=yn),ot?vn.size++:Gt.size++,un!=="F"&&(vn.index[un]=yn)),Gt},Dt=function(Gt,nn){var zt,Ft=Ht(Gt),un=ut(nn);if(un!=="F")return Ft.index[un];for(zt=Ft.first;zt;zt=zt.next)if(zt.key==nn)return zt};return at(Mt,{clear:function(){for(var Gt=Ht(this),nn=Gt.index,zt=Gt.first;zt;)zt.removed=!0,zt.previous&&(zt.previous=zt.previous.next=void 0),delete nn[zt.index],zt=zt.next;Gt.first=Gt.last=void 0,ot?Gt.size=0:this.size=0},delete:function(Gt){var nn=this,zt=Ht(nn),Ft=Dt(nn,Gt);if(Ft){var un=Ft.next,vn=Ft.previous;delete zt.index[Ft.index],Ft.removed=!0,vn&&(vn.next=un),un&&(un.previous=vn),zt.first==Ft&&(zt.first=un),zt.last==Ft&&(zt.last=vn),ot?zt.size--:nn.size--}return!!Ft},forEach:function(Gt){for(var nn,zt=Ht(this),Ft=ht(Gt,arguments.length>1?arguments[1]:void 0);nn=nn?nn.next:zt.first;)for(Ft(nn.value,nn.key,this);nn&&nn.removed;)nn=nn.previous},has:function(Gt){return!!Dt(this,Gt)}}),at(Mt,Nt?{get:function(Gt){var nn=Dt(this,Gt);return nn&&nn.value},set:function(Gt,nn){return Ot(this,Gt===0?0:Gt,nn)}}:{add:function(Gt){return Ot(this,Gt=Gt===0?0:Gt,Gt)}}),ot&&et(Mt,"size",{get:function(){return Ht(this).size}}),wt},setStrong:function(yt,At,Nt){var St=At+" Iterator",wt=vt(At),Mt=vt(St);lt(yt,At,function(Ht,Ot){bt(this,{type:St,target:Ht,state:wt(Ht),kind:Ot,last:void 0})},function(){for(var Ht=Mt(this),Ot=Ht.kind,Dt=Ht.last;Dt&&Dt.removed;)Dt=Dt.previous;return Ht.target&&(Ht.last=Dt=Dt?Dt.next:Ht.state.first)?Ot=="keys"?{value:Dt.key,done:!1}:Ot=="values"?{value:Dt.value,done:!1}:{value:[Dt.key,Dt.value],done:!1}:(Ht.target=void 0,{value:void 0,done:!0})},Nt?"entries":"values",!Nt,!0),mt(At)}}},9320:(rt,it,s)=>{var et=s(1702),nt=s(9190),at=s(2423).getWeakData,ht=s(9670),dt=s(111),pt=s(5787),lt=s(408),mt=s(2092),ot=s(2597),ut=s(9909),ft=ut.set,bt=ut.getterFor,vt=mt.find,yt=mt.findIndex,At=et([].splice),Nt=0,St=function(Ht){return Ht.frozen||(Ht.frozen=new wt)},wt=function(){this.entries=[]},Mt=function(Ht,Ot){return vt(Ht.entries,function(Dt){return Dt[0]===Ot})};wt.prototype={get:function(Ht){var Ot=Mt(this,Ht);if(Ot)return Ot[1]},has:function(Ht){return!!Mt(this,Ht)},set:function(Ht,Ot){var Dt=Mt(this,Ht);Dt?Dt[1]=Ot:this.entries.push([Ht,Ot])},delete:function(Ht){var Ot=yt(this.entries,function(Dt){return Dt[0]===Ht});return~Ot&&At(this.entries,Ot,1),!!~Ot}},rt.exports={getConstructor:function(Ht,Ot,Dt,Gt){var nn=Ht(function(vn,yn){pt(vn,zt),ft(vn,{type:Ot,id:Nt++,frozen:void 0}),yn!=null&&lt(yn,vn[Gt],{that:vn,AS_ENTRIES:Dt})}),zt=nn.prototype,Ft=bt(Ot),un=function(vn,yn,cn){var gn=Ft(vn),Cn=at(ht(yn),!0);return Cn===!0?St(gn).set(yn,cn):Cn[gn.id]=cn,vn};return nt(zt,{delete:function(vn){var yn=Ft(this);if(!dt(vn))return!1;var cn=at(vn);return cn===!0?St(yn).delete(vn):cn&&ot(cn,yn.id)&&delete cn[yn.id]},has:function(vn){var yn=Ft(this);if(!dt(vn))return!1;var cn=at(vn);return cn===!0?St(yn).has(vn):cn&&ot(cn,yn.id)}}),nt(zt,Dt?{get:function(vn){var yn=Ft(this);if(dt(vn)){var cn=at(vn);return cn===!0?St(yn).get(vn):cn?cn[yn.id]:void 0}},set:function(vn,yn){return un(this,vn,yn)}}:{add:function(vn){return un(this,vn,!0)}}),nn}}},7710:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(1702),ht=s(4705),dt=s(8052),pt=s(2423),lt=s(408),mt=s(5787),ot=s(614),ut=s(111),ft=s(7293),bt=s(7072),vt=s(8003),yt=s(9587);rt.exports=function(At,Nt,St){var wt=At.indexOf("Map")!==-1,Mt=At.indexOf("Weak")!==-1,Ht=wt?"set":"add",Ot=nt[At],Dt=Ot&&Ot.prototype,Gt=Ot,nn={},zt=function(gn){var Cn=at(Dt[gn]);dt(Dt,gn,gn=="add"?function(fn){return Cn(this,fn===0?0:fn),this}:gn=="delete"?function(fn){return!(Mt&&!ut(fn))&&Cn(this,fn===0?0:fn)}:gn=="get"?function(fn){return Mt&&!ut(fn)?void 0:Cn(this,fn===0?0:fn)}:gn=="has"?function(fn){return!(Mt&&!ut(fn))&&Cn(this,fn===0?0:fn)}:function(fn,Tn){return Cn(this,fn===0?0:fn,Tn),this})};if(ht(At,!ot(Ot)||!(Mt||Dt.forEach&&!ft(function(){new Ot().entries().next()}))))Gt=St.getConstructor(Nt,At,wt,Ht),pt.enable();else if(ht(At,!0)){var Ft=new Gt,un=Ft[Ht](Mt?{}:-0,1)!=Ft,vn=ft(function(){Ft.has(1)}),yn=bt(function(gn){new Ot(gn)}),cn=!Mt&&ft(function(){for(var gn=new Ot,Cn=5;Cn--;)gn[Ht](Cn,Cn);return!gn.has(-0)});yn||((Gt=Nt(function(gn,Cn){mt(gn,Dt);var fn=yt(new Ot,gn,Gt);return Cn!=null&&lt(Cn,fn[Ht],{that:fn,AS_ENTRIES:wt}),fn})).prototype=Dt,Dt.constructor=Gt),(vn||cn)&&(zt("delete"),zt("has"),wt&&zt("get")),(cn||un)&&zt(Ht),Mt&&Dt.clear&&delete Dt.clear}return nn[At]=Gt,et({global:!0,constructor:!0,forced:Gt!=Ot},nn),vt(Gt,At),Mt||St.setStrong(Gt,At,wt),Gt}},9920:(rt,it,s)=>{var et=s(2597),nt=s(3887),at=s(1236),ht=s(3070);rt.exports=function(dt,pt,lt){for(var mt=nt(pt),ot=ht.f,ut=at.f,ft=0;ft<mt.length;ft++){var bt=mt[ft];et(dt,bt)||lt&&et(lt,bt)||ot(dt,bt,ut(pt,bt))}}},4964:(rt,it,s)=>{var et=s(5112)("match");rt.exports=function(nt){var at=/./;try{"/./"[nt](at)}catch{try{return at[et]=!1,"/./"[nt](at)}catch{}}return!1}},8544:(rt,it,s)=>{var et=s(7293);rt.exports=!et(function(){function nt(){}return nt.prototype.constructor=null,Object.getPrototypeOf(new nt)!==nt.prototype})},4994:(rt,it,s)=>{var et=s(3383).IteratorPrototype,nt=s(30),at=s(9114),ht=s(8003),dt=s(7497),pt=function(){return this};rt.exports=function(lt,mt,ot,ut){var ft=mt+" Iterator";return lt.prototype=nt(et,{next:at(+!ut,ot)}),ht(lt,ft,!1,!0),dt[ft]=pt,lt}},8880:(rt,it,s)=>{var et=s(9781),nt=s(3070),at=s(9114);rt.exports=et?function(ht,dt,pt){return nt.f(ht,dt,at(1,pt))}:function(ht,dt,pt){return ht[dt]=pt,ht}},9114:rt=>{rt.exports=function(it,s){return{enumerable:!(1&it),configurable:!(2&it),writable:!(4&it),value:s}}},6135:(rt,it,s)=>{var et=s(4948),nt=s(3070),at=s(9114);rt.exports=function(ht,dt,pt){var lt=et(dt);lt in ht?nt.f(ht,lt,at(0,pt)):ht[lt]=pt}},5573:(rt,it,s)=>{var et=s(1702),nt=s(7293),at=s(6650).start,ht=RangeError,dt=Math.abs,pt=Date.prototype,lt=pt.toISOString,mt=et(pt.getTime),ot=et(pt.getUTCDate),ut=et(pt.getUTCFullYear),ft=et(pt.getUTCHours),bt=et(pt.getUTCMilliseconds),vt=et(pt.getUTCMinutes),yt=et(pt.getUTCMonth),At=et(pt.getUTCSeconds);rt.exports=nt(function(){return lt.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!nt(function(){lt.call(new Date(NaN))})?function(){if(!isFinite(mt(this)))throw ht("Invalid time value");var Nt=this,St=ut(Nt),wt=bt(Nt),Mt=St<0?"-":St>9999?"+":"";return Mt+at(dt(St),Mt?6:4,0)+"-"+at(yt(Nt)+1,2,0)+"-"+at(ot(Nt),2,0)+"T"+at(ft(Nt),2,0)+":"+at(vt(Nt),2,0)+":"+at(At(Nt),2,0)+"."+at(wt,3,0)+"Z"}:lt},7045:(rt,it,s)=>{var et=s(6339),nt=s(3070);rt.exports=function(at,ht,dt){return dt.get&&et(dt.get,ht,{getter:!0}),dt.set&&et(dt.set,ht,{setter:!0}),nt.f(at,ht,dt)}},8052:(rt,it,s)=>{var et=s(614),nt=s(3070),at=s(6339),ht=s(3072);rt.exports=function(dt,pt,lt,mt){mt||(mt={});var ot=mt.enumerable,ut=mt.name!==void 0?mt.name:pt;if(et(lt)&&at(lt,ut,mt),mt.global)ot?dt[pt]=lt:ht(pt,lt);else{try{mt.unsafe?dt[pt]&&(ot=!0):delete dt[pt]}catch{}ot?dt[pt]=lt:nt.f(dt,pt,{value:lt,enumerable:!1,configurable:!mt.nonConfigurable,writable:!mt.nonWritable})}return dt}},9190:(rt,it,s)=>{var et=s(8052);rt.exports=function(nt,at,ht){for(var dt in at)et(nt,dt,at[dt],ht);return nt}},3072:(rt,it,s)=>{var et=s(7854),nt=Object.defineProperty;rt.exports=function(at,ht){try{nt(et,at,{value:ht,configurable:!0,writable:!0})}catch{et[at]=ht}return ht}},654:(rt,it,s)=>{var et=s(2109),nt=s(6916),at=s(1913),ht=s(6530),dt=s(614),pt=s(4994),lt=s(9518),mt=s(7674),ot=s(8003),ut=s(8880),ft=s(8052),bt=s(5112),vt=s(7497),yt=s(3383),At=ht.PROPER,Nt=ht.CONFIGURABLE,St=yt.IteratorPrototype,wt=yt.BUGGY_SAFARI_ITERATORS,Mt=bt("iterator"),Ht="keys",Ot="values",Dt="entries",Gt=function(){return this};rt.exports=function(nn,zt,Ft,un,vn,yn,cn){pt(Ft,zt,un);var gn,Cn,fn,Tn=function(xn){if(xn===vn&&In)return In;if(!wt&&xn in An)return An[xn];switch(xn){case Ht:case Ot:case Dt:return function(){return new Ft(this,xn)}}return function(){return new Ft(this)}},On=zt+" Iterator",Ln=!1,An=nn.prototype,Rn=An[Mt]||An["@@iterator"]||vn&&An[vn],In=!wt&&Rn||Tn(vn),kn=zt=="Array"&&An.entries||Rn;if(kn&&(gn=lt(kn.call(new nn)))!==Object.prototype&&gn.next&&(at||lt(gn)===St||(mt?mt(gn,St):dt(gn[Mt])||ft(gn,Mt,Gt)),ot(gn,On,!0,!0),at&&(vt[On]=Gt)),At&&vn==Ot&&Rn&&Rn.name!==Ot&&(!at&&Nt?ut(An,"name",Ot):(Ln=!0,In=function(){return nt(Rn,this)})),vn)if(Cn={values:Tn(Ot),keys:yn?In:Tn(Ht),entries:Tn(Dt)},cn)for(fn in Cn)(wt||Ln||!(fn in An))&&ft(An,fn,Cn[fn]);else et({target:zt,proto:!0,forced:wt||Ln},Cn);return at&&!cn||An[Mt]===In||ft(An,Mt,In,{name:vn}),vt[zt]=In,Cn}},7235:(rt,it,s)=>{var et=s(857),nt=s(2597),at=s(6061),ht=s(3070).f;rt.exports=function(dt){var pt=et.Symbol||(et.Symbol={});nt(pt,dt)||ht(pt,dt,{value:at.f(dt)})}},5117:(rt,it,s)=>{var et=s(6330),nt=TypeError;rt.exports=function(at,ht){if(!delete at[ht])throw nt("Cannot delete property "+et(ht)+" of "+et(at))}},9781:(rt,it,s)=>{var et=s(7293);rt.exports=!et(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(rt,it,s)=>{var et=s(7854),nt=s(111),at=et.document,ht=nt(at)&&nt(at.createElement);rt.exports=function(dt){return ht?at.createElement(dt):{}}},7207:rt=>{var it=TypeError;rt.exports=function(s){if(s>9007199254740991)throw it("Maximum allowed index exceeded");return s}},8324:rt=>{rt.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(rt,it,s)=>{var et=s(317)("span").classList,nt=et&&et.constructor&&et.constructor.prototype;rt.exports=nt===Object.prototype?void 0:nt},8886:(rt,it,s)=>{var et=s(8113).match(/firefox\/(\d+)/i);rt.exports=!!et&&+et[1]},7871:rt=>{rt.exports=typeof window=="object"&&typeof Deno!="object"},256:(rt,it,s)=>{var et=s(8113);rt.exports=/MSIE|Trident/.test(et)},1528:(rt,it,s)=>{var et=s(8113),nt=s(7854);rt.exports=/ipad|iphone|ipod/i.test(et)&&nt.Pebble!==void 0},6833:(rt,it,s)=>{var et=s(8113);rt.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(et)},5268:(rt,it,s)=>{var et=s(4326),nt=s(7854);rt.exports=et(nt.process)=="process"},1036:(rt,it,s)=>{var et=s(8113);rt.exports=/web0s(?!.*chrome)/i.test(et)},8113:(rt,it,s)=>{var et=s(5005);rt.exports=et("navigator","userAgent")||""},7392:(rt,it,s)=>{var et,nt,at=s(7854),ht=s(8113),dt=at.process,pt=at.Deno,lt=dt&&dt.versions||pt&&pt.version,mt=lt&&lt.v8;mt&&(nt=(et=mt.split("."))[0]>0&&et[0]<4?1:+(et[0]+et[1])),!nt&&ht&&(!(et=ht.match(/Edge\/(\d+)/))||et[1]>=74)&&(et=ht.match(/Chrome\/(\d+)/))&&(nt=+et[1]),rt.exports=nt},8008:(rt,it,s)=>{var et=s(8113).match(/AppleWebKit\/(\d+)\./);rt.exports=!!et&&+et[1]},748:rt=>{rt.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(rt,it,s)=>{var et=s(7854),nt=s(1236).f,at=s(8880),ht=s(8052),dt=s(3072),pt=s(9920),lt=s(4705);rt.exports=function(mt,ot){var ut,ft,bt,vt,yt,At=mt.target,Nt=mt.global,St=mt.stat;if(ut=Nt?et:St?et[At]||dt(At,{}):(et[At]||{}).prototype)for(ft in ot){if(vt=ot[ft],bt=mt.dontCallGetSet?(yt=nt(ut,ft))&&yt.value:ut[ft],!lt(Nt?ft:At+(St?".":"#")+ft,mt.forced)&&bt!==void 0){if(typeof vt==typeof bt)continue;pt(vt,bt)}(mt.sham||bt&&bt.sham)&&at(vt,"sham",!0),ht(ut,ft,vt,mt)}}},7293:rt=>{rt.exports=function(it){try{return!!it()}catch{return!0}}},7007:(rt,it,s)=>{s(4916);var et=s(1702),nt=s(8052),at=s(2261),ht=s(7293),dt=s(5112),pt=s(8880),lt=dt("species"),mt=RegExp.prototype;rt.exports=function(ot,ut,ft,bt){var vt=dt(ot),yt=!ht(function(){var wt={};return wt[vt]=function(){return 7},""[ot](wt)!=7}),At=yt&&!ht(function(){var wt=!1,Mt=/a/;return ot==="split"&&((Mt={}).constructor={},Mt.constructor[lt]=function(){return Mt},Mt.flags="",Mt[vt]=/./[vt]),Mt.exec=function(){return wt=!0,null},Mt[vt](""),!wt});if(!yt||!At||ft){var Nt=et(/./[vt]),St=ut(vt,""[ot],function(wt,Mt,Ht,Ot,Dt){var Gt=et(wt),nn=Mt.exec;return nn===at||nn===mt.exec?yt&&!Dt?{done:!0,value:Nt(Mt,Ht,Ot)}:{done:!0,value:Gt(Ht,Mt,Ot)}:{done:!1}});nt(String.prototype,ot,St[0]),nt(mt,vt,St[1])}bt&&pt(mt[vt],"sham",!0)}},6677:(rt,it,s)=>{var et=s(7293);rt.exports=!et(function(){return Object.isExtensible(Object.preventExtensions({}))})},2104:(rt,it,s)=>{var et=s(4374),nt=Function.prototype,at=nt.apply,ht=nt.call;rt.exports=typeof Reflect=="object"&&Reflect.apply||(et?ht.bind(at):function(){return ht.apply(at,arguments)})},9974:(rt,it,s)=>{var et=s(1702),nt=s(9662),at=s(4374),ht=et(et.bind);rt.exports=function(dt,pt){return nt(dt),pt===void 0?dt:at?ht(dt,pt):function(){return dt.apply(pt,arguments)}}},4374:(rt,it,s)=>{var et=s(7293);rt.exports=!et(function(){var nt=(function(){}).bind();return typeof nt!="function"||nt.hasOwnProperty("prototype")})},7065:(rt,it,s)=>{var et=s(1702),nt=s(9662),at=s(111),ht=s(2597),dt=s(206),pt=s(4374),lt=Function,mt=et([].concat),ot=et([].join),ut={},ft=function(bt,vt,yt){if(!ht(ut,vt)){for(var At=[],Nt=0;Nt<vt;Nt++)At[Nt]="a["+Nt+"]";ut[vt]=lt("C,a","return new C("+ot(At,",")+")")}return ut[vt](bt,yt)};rt.exports=pt?lt.bind:function(bt){var vt=nt(this),yt=vt.prototype,At=dt(arguments,1),Nt=function(){var St=mt(At,dt(arguments));return this instanceof Nt?ft(vt,St.length,St):vt.apply(bt,St)};return at(yt)&&(Nt.prototype=yt),Nt}},6916:(rt,it,s)=>{var et=s(4374),nt=Function.prototype.call;rt.exports=et?nt.bind(nt):function(){return nt.apply(nt,arguments)}},6530:(rt,it,s)=>{var et=s(9781),nt=s(2597),at=Function.prototype,ht=et&&Object.getOwnPropertyDescriptor,dt=nt(at,"name"),pt=dt&&(function(){}).name==="something",lt=dt&&(!et||et&&ht(at,"name").configurable);rt.exports={EXISTS:dt,PROPER:pt,CONFIGURABLE:lt}},1702:(rt,it,s)=>{var et=s(4374),nt=Function.prototype,at=nt.bind,ht=nt.call,dt=et&&at.bind(ht,ht);rt.exports=et?function(pt){return pt&&dt(pt)}:function(pt){return pt&&function(){return ht.apply(pt,arguments)}}},5005:(rt,it,s)=>{var et=s(7854),nt=s(614),at=function(ht){return nt(ht)?ht:void 0};rt.exports=function(ht,dt){return arguments.length<2?at(et[ht]):et[ht]&&et[ht][dt]}},1246:(rt,it,s)=>{var et=s(648),nt=s(8173),at=s(7497),ht=s(5112)("iterator");rt.exports=function(dt){if(dt!=null)return nt(dt,ht)||nt(dt,"@@iterator")||at[et(dt)]}},8554:(rt,it,s)=>{var et=s(6916),nt=s(9662),at=s(9670),ht=s(6330),dt=s(1246),pt=TypeError;rt.exports=function(lt,mt){var ot=arguments.length<2?dt(lt):mt;if(nt(ot))return at(et(ot,lt));throw pt(ht(lt)+" is not iterable")}},8173:(rt,it,s)=>{var et=s(9662);rt.exports=function(nt,at){var ht=nt[at];return ht==null?void 0:et(ht)}},647:(rt,it,s)=>{var et=s(1702),nt=s(7908),at=Math.floor,ht=et("".charAt),dt=et("".replace),pt=et("".slice),lt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,mt=/\$([$&'`]|\d{1,2})/g;rt.exports=function(ot,ut,ft,bt,vt,yt){var At=ft+ot.length,Nt=bt.length,St=mt;return vt!==void 0&&(vt=nt(vt),St=lt),dt(yt,St,function(wt,Mt){var Ht;switch(ht(Mt,0)){case"$":return"$";case"&":return ot;case"`":return pt(ut,0,ft);case"'":return pt(ut,At);case"<":Ht=vt[pt(Mt,1,-1)];break;default:var Ot=+Mt;if(Ot===0)return wt;if(Ot>Nt){var Dt=at(Ot/10);return Dt===0?wt:Dt<=Nt?bt[Dt-1]===void 0?ht(Mt,1):bt[Dt-1]+ht(Mt,1):wt}Ht=bt[Ot-1]}return Ht===void 0?"":Ht})}},7854:(rt,it,s)=>{var et=function(nt){return nt&&nt.Math==Math&&nt};rt.exports=et(typeof globalThis=="object"&&globalThis)||et(typeof window=="object"&&window)||et(typeof self=="object"&&self)||et(typeof s.g=="object"&&s.g)||function(){return this}()||Function("return this")()},2597:(rt,it,s)=>{var et=s(1702),nt=s(7908),at=et({}.hasOwnProperty);rt.exports=Object.hasOwn||function(ht,dt){return at(nt(ht),dt)}},3501:rt=>{rt.exports={}},842:(rt,it,s)=>{var et=s(7854);rt.exports=function(nt,at){var ht=et.console;ht&&ht.error&&(arguments.length==1?ht.error(nt):ht.error(nt,at))}},490:(rt,it,s)=>{var et=s(5005);rt.exports=et("document","documentElement")},4664:(rt,it,s)=>{var et=s(9781),nt=s(7293),at=s(317);rt.exports=!et&&!nt(function(){return Object.defineProperty(at("div"),"a",{get:function(){return 7}}).a!=7})},1179:rt=>{var it=Array,s=Math.abs,et=Math.pow,nt=Math.floor,at=Math.log,ht=Math.LN2;rt.exports={pack:function(dt,pt,lt){var mt,ot,ut,ft=it(lt),bt=8*lt-pt-1,vt=(1<<bt)-1,yt=vt>>1,At=pt===23?et(2,-24)-et(2,-77):0,Nt=dt<0||dt===0&&1/dt<0?1:0,St=0;for((dt=s(dt))!=dt||dt===1/0?(ot=dt!=dt?1:0,mt=vt):(mt=nt(at(dt)/ht),dt*(ut=et(2,-mt))<1&&(mt--,ut*=2),(dt+=mt+yt>=1?At/ut:At*et(2,1-yt))*ut>=2&&(mt++,ut/=2),mt+yt>=vt?(ot=0,mt=vt):mt+yt>=1?(ot=(dt*ut-1)*et(2,pt),mt+=yt):(ot=dt*et(2,yt-1)*et(2,pt),mt=0));pt>=8;)ft[St++]=255&ot,ot/=256,pt-=8;for(mt=mt<<pt|ot,bt+=pt;bt>0;)ft[St++]=255&mt,mt/=256,bt-=8;return ft[--St]|=128*Nt,ft},unpack:function(dt,pt){var lt,mt=dt.length,ot=8*mt-pt-1,ut=(1<<ot)-1,ft=ut>>1,bt=ot-7,vt=mt-1,yt=dt[vt--],At=127&yt;for(yt>>=7;bt>0;)At=256*At+dt[vt--],bt-=8;for(lt=At&(1<<-bt)-1,At>>=-bt,bt+=pt;bt>0;)lt=256*lt+dt[vt--],bt-=8;if(At===0)At=1-ft;else{if(At===ut)return lt?NaN:yt?-1/0:1/0;lt+=et(2,pt),At-=ft}return(yt?-1:1)*lt*et(2,At-pt)}}},8361:(rt,it,s)=>{var et=s(1702),nt=s(7293),at=s(4326),ht=Object,dt=et("".split);rt.exports=nt(function(){return!ht("z").propertyIsEnumerable(0)})?function(pt){return at(pt)=="String"?dt(pt,""):ht(pt)}:ht},9587:(rt,it,s)=>{var et=s(614),nt=s(111),at=s(7674);rt.exports=function(ht,dt,pt){var lt,mt;return at&&et(lt=dt.constructor)&&lt!==pt&&nt(mt=lt.prototype)&&mt!==pt.prototype&&at(ht,mt),ht}},2788:(rt,it,s)=>{var et=s(1702),nt=s(614),at=s(5465),ht=et(Function.toString);nt(at.inspectSource)||(at.inspectSource=function(dt){return ht(dt)}),rt.exports=at.inspectSource},2423:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(3501),ht=s(111),dt=s(2597),pt=s(3070).f,lt=s(8006),mt=s(1156),ot=s(2050),ut=s(9711),ft=s(6677),bt=!1,vt=ut("meta"),yt=0,At=function(St){pt(St,vt,{value:{objectID:"O"+yt++,weakData:{}}})},Nt=rt.exports={enable:function(){Nt.enable=function(){},bt=!0;var St=lt.f,wt=nt([].splice),Mt={};Mt[vt]=1,St(Mt).length&&(lt.f=function(Ht){for(var Ot=St(Ht),Dt=0,Gt=Ot.length;Dt<Gt;Dt++)if(Ot[Dt]===vt){wt(Ot,Dt,1);break}return Ot},et({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:mt.f}))},fastKey:function(St,wt){if(!ht(St))return typeof St=="symbol"?St:(typeof St=="string"?"S":"P")+St;if(!dt(St,vt)){if(!ot(St))return"F";if(!wt)return"E";At(St)}return St[vt].objectID},getWeakData:function(St,wt){if(!dt(St,vt)){if(!ot(St))return!0;if(!wt)return!1;At(St)}return St[vt].weakData},onFreeze:function(St){return ft&&bt&&ot(St)&&!dt(St,vt)&&At(St),St}};at[vt]=!0},9909:(rt,it,s)=>{var et,nt,at,ht=s(8536),dt=s(7854),pt=s(1702),lt=s(111),mt=s(8880),ot=s(2597),ut=s(5465),ft=s(6200),bt=s(3501),vt="Object already initialized",yt=dt.TypeError,At=dt.WeakMap;if(ht||ut.state){var Nt=ut.state||(ut.state=new At),St=pt(Nt.get),wt=pt(Nt.has),Mt=pt(Nt.set);et=function(Ot,Dt){if(wt(Nt,Ot))throw new yt(vt);return Dt.facade=Ot,Mt(Nt,Ot,Dt),Dt},nt=function(Ot){return St(Nt,Ot)||{}},at=function(Ot){return wt(Nt,Ot)}}else{var Ht=ft("state");bt[Ht]=!0,et=function(Ot,Dt){if(ot(Ot,Ht))throw new yt(vt);return Dt.facade=Ot,mt(Ot,Ht,Dt),Dt},nt=function(Ot){return ot(Ot,Ht)?Ot[Ht]:{}},at=function(Ot){return ot(Ot,Ht)}}rt.exports={set:et,get:nt,has:at,enforce:function(Ot){return at(Ot)?nt(Ot):et(Ot,{})},getterFor:function(Ot){return function(Dt){var Gt;if(!lt(Dt)||(Gt=nt(Dt)).type!==Ot)throw yt("Incompatible receiver, "+Ot+" required");return Gt}}}},7659:(rt,it,s)=>{var et=s(5112),nt=s(7497),at=et("iterator"),ht=Array.prototype;rt.exports=function(dt){return dt!==void 0&&(nt.Array===dt||ht[at]===dt)}},3157:(rt,it,s)=>{var et=s(4326);rt.exports=Array.isArray||function(nt){return et(nt)=="Array"}},614:rt=>{rt.exports=function(it){return typeof it=="function"}},4411:(rt,it,s)=>{var et=s(1702),nt=s(7293),at=s(614),ht=s(648),dt=s(5005),pt=s(2788),lt=function(){},mt=[],ot=dt("Reflect","construct"),ut=/^\s*(?:class|function)\b/,ft=et(ut.exec),bt=!ut.exec(lt),vt=function(At){if(!at(At))return!1;try{return ot(lt,mt,At),!0}catch{return!1}},yt=function(At){if(!at(At))return!1;switch(ht(At)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bt||!!ft(ut,pt(At))}catch{return!0}};yt.sham=!0,rt.exports=!ot||nt(function(){var At;return vt(vt.call)||!vt(Object)||!vt(function(){At=!0})||At})?yt:vt},5032:(rt,it,s)=>{var et=s(2597);rt.exports=function(nt){return nt!==void 0&&(et(nt,"value")||et(nt,"writable"))}},4705:(rt,it,s)=>{var et=s(7293),nt=s(614),at=/#|\.prototype\./,ht=function(ot,ut){var ft=pt[dt(ot)];return ft==mt||ft!=lt&&(nt(ut)?et(ut):!!ut)},dt=ht.normalize=function(ot){return String(ot).replace(at,".").toLowerCase()},pt=ht.data={},lt=ht.NATIVE="N",mt=ht.POLYFILL="P";rt.exports=ht},5988:(rt,it,s)=>{var et=s(111),nt=Math.floor;rt.exports=Number.isInteger||function(at){return!et(at)&&isFinite(at)&&nt(at)===at}},111:(rt,it,s)=>{var et=s(614);rt.exports=function(nt){return typeof nt=="object"?nt!==null:et(nt)}},1913:rt=>{rt.exports=!1},7850:(rt,it,s)=>{var et=s(111),nt=s(4326),at=s(5112)("match");rt.exports=function(ht){var dt;return et(ht)&&((dt=ht[at])!==void 0?!!dt:nt(ht)=="RegExp")}},2190:(rt,it,s)=>{var et=s(5005),nt=s(614),at=s(7976),ht=s(3307),dt=Object;rt.exports=ht?function(pt){return typeof pt=="symbol"}:function(pt){var lt=et("Symbol");return nt(lt)&&at(lt.prototype,dt(pt))}},408:(rt,it,s)=>{var et=s(9974),nt=s(6916),at=s(9670),ht=s(6330),dt=s(7659),pt=s(6244),lt=s(7976),mt=s(8554),ot=s(1246),ut=s(9212),ft=TypeError,bt=function(yt,At){this.stopped=yt,this.result=At},vt=bt.prototype;rt.exports=function(yt,At,Nt){var St,wt,Mt,Ht,Ot,Dt,Gt,nn=Nt&&Nt.that,zt=!(!Nt||!Nt.AS_ENTRIES),Ft=!(!Nt||!Nt.IS_RECORD),un=!(!Nt||!Nt.IS_ITERATOR),vn=!(!Nt||!Nt.INTERRUPTED),yn=et(At,nn),cn=function(Cn){return St&&ut(St,"normal",Cn),new bt(!0,Cn)},gn=function(Cn){return zt?(at(Cn),vn?yn(Cn[0],Cn[1],cn):yn(Cn[0],Cn[1])):vn?yn(Cn,cn):yn(Cn)};if(Ft)St=yt.iterator;else if(un)St=yt;else{if(!(wt=ot(yt)))throw ft(ht(yt)+" is not iterable");if(dt(wt)){for(Mt=0,Ht=pt(yt);Ht>Mt;Mt++)if((Ot=gn(yt[Mt]))&&lt(vt,Ot))return Ot;return new bt(!1)}St=mt(yt,wt)}for(Dt=Ft?yt.next:St.next;!(Gt=nt(Dt,St)).done;){try{Ot=gn(Gt.value)}catch(Cn){ut(St,"throw",Cn)}if(typeof Ot=="object"&&Ot&&lt(vt,Ot))return Ot}return new bt(!1)}},9212:(rt,it,s)=>{var et=s(6916),nt=s(9670),at=s(8173);rt.exports=function(ht,dt,pt){var lt,mt;nt(ht);try{if(!(lt=at(ht,"return"))){if(dt==="throw")throw pt;return pt}lt=et(lt,ht)}catch(ot){mt=!0,lt=ot}if(dt==="throw")throw pt;if(mt)throw lt;return nt(lt),pt}},3383:(rt,it,s)=>{var et,nt,at,ht=s(7293),dt=s(614),pt=s(30),lt=s(9518),mt=s(8052),ot=s(5112),ut=s(1913),ft=ot("iterator"),bt=!1;[].keys&&("next"in(at=[].keys())?(nt=lt(lt(at)))!==Object.prototype&&(et=nt):bt=!0),et==null||ht(function(){var vt={};return et[ft].call(vt)!==vt})?et={}:ut&&(et=pt(et)),dt(et[ft])||mt(et,ft,function(){return this}),rt.exports={IteratorPrototype:et,BUGGY_SAFARI_ITERATORS:bt}},7497:rt=>{rt.exports={}},6244:(rt,it,s)=>{var et=s(7466);rt.exports=function(nt){return et(nt.length)}},6339:(rt,it,s)=>{var et=s(7293),nt=s(614),at=s(2597),ht=s(9781),dt=s(6530).CONFIGURABLE,pt=s(2788),lt=s(9909),mt=lt.enforce,ot=lt.get,ut=Object.defineProperty,ft=ht&&!et(function(){return ut(function(){},"length",{value:8}).length!==8}),bt=String(String).split("String"),vt=rt.exports=function(yt,At,Nt){String(At).slice(0,7)==="Symbol("&&(At="["+String(At).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),Nt&&Nt.getter&&(At="get "+At),Nt&&Nt.setter&&(At="set "+At),(!at(yt,"name")||dt&&yt.name!==At)&&(ht?ut(yt,"name",{value:At,configurable:!0}):yt.name=At),ft&&Nt&&at(Nt,"arity")&&yt.length!==Nt.arity&&ut(yt,"length",{value:Nt.arity});try{Nt&&at(Nt,"constructor")&&Nt.constructor?ht&&ut(yt,"prototype",{writable:!1}):yt.prototype&&(yt.prototype=void 0)}catch{}var St=mt(yt);return at(St,"source")||(St.source=bt.join(typeof At=="string"?At:"")),yt};Function.prototype.toString=vt(function(){return nt(this)&&ot(this).source||pt(this)},"toString")},403:rt=>{var it=Math.log,s=Math.LOG10E;rt.exports=Math.log10||function(et){return it(et)*s}},4758:rt=>{var it=Math.ceil,s=Math.floor;rt.exports=Math.trunc||function(et){var nt=+et;return(nt>0?s:it)(nt)}},5948:(rt,it,s)=>{var et,nt,at,ht,dt,pt,lt,mt,ot=s(7854),ut=s(9974),ft=s(1236).f,bt=s(261).set,vt=s(6833),yt=s(1528),At=s(1036),Nt=s(5268),St=ot.MutationObserver||ot.WebKitMutationObserver,wt=ot.document,Mt=ot.process,Ht=ot.Promise,Ot=ft(ot,"queueMicrotask"),Dt=Ot&&Ot.value;Dt||(et=function(){var Gt,nn;for(Nt&&(Gt=Mt.domain)&&Gt.exit();nt;){nn=nt.fn,nt=nt.next;try{nn()}catch(zt){throw nt?ht():at=void 0,zt}}at=void 0,Gt&&Gt.enter()},vt||Nt||At||!St||!wt?!yt&&Ht&&Ht.resolve?((lt=Ht.resolve(void 0)).constructor=Ht,mt=ut(lt.then,lt),ht=function(){mt(et)}):Nt?ht=function(){Mt.nextTick(et)}:(bt=ut(bt,ot),ht=function(){bt(et)}):(dt=!0,pt=wt.createTextNode(""),new St(et).observe(pt,{characterData:!0}),ht=function(){pt.data=dt=!dt})),rt.exports=Dt||function(Gt){var nn={fn:Gt,next:void 0};at&&(at.next=nn),nt||(nt=nn,ht()),at=nn}},735:(rt,it,s)=>{var et=s(133);rt.exports=et&&!!Symbol.for&&!!Symbol.keyFor},133:(rt,it,s)=>{var et=s(7392),nt=s(7293);rt.exports=!!Object.getOwnPropertySymbols&&!nt(function(){var at=Symbol();return!String(at)||!(Object(at)instanceof Symbol)||!Symbol.sham&&et&&et<41})},590:(rt,it,s)=>{var et=s(7293),nt=s(5112),at=s(1913),ht=nt("iterator");rt.exports=!et(function(){var dt=new URL("b?a=1&b=2&c=3","http://a"),pt=dt.searchParams,lt="";return dt.pathname="c%20d",pt.forEach(function(mt,ot){pt.delete("b"),lt+=ot+mt}),at&&!dt.toJSON||!pt.sort||dt.href!=="http://a/c%20d?a=1&c=3"||pt.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!pt[ht]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||lt!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8536:(rt,it,s)=>{var et=s(7854),nt=s(614),at=s(2788),ht=et.WeakMap;rt.exports=nt(ht)&&/native code/.test(at(ht))},8523:(rt,it,s)=>{var et=s(9662),nt=function(at){var ht,dt;this.promise=new at(function(pt,lt){if(ht!==void 0||dt!==void 0)throw TypeError("Bad Promise constructor");ht=pt,dt=lt}),this.resolve=et(ht),this.reject=et(dt)};rt.exports.f=function(at){return new nt(at)}},3929:(rt,it,s)=>{var et=s(7850),nt=TypeError;rt.exports=function(at){if(et(at))throw nt("The method doesn't accept regular expressions");return at}},3009:(rt,it,s)=>{var et=s(7854),nt=s(7293),at=s(1702),ht=s(1340),dt=s(3111).trim,pt=s(1361),lt=et.parseInt,mt=et.Symbol,ot=mt&&mt.iterator,ut=/^[+-]?0x/i,ft=at(ut.exec),bt=lt(pt+"08")!==8||lt(pt+"0x16")!==22||ot&&!nt(function(){lt(Object(ot))});rt.exports=bt?function(vt,yt){var At=dt(ht(vt));return lt(At,yt>>>0||(ft(ut,At)?16:10))}:lt},1574:(rt,it,s)=>{var et=s(9781),nt=s(1702),at=s(6916),ht=s(7293),dt=s(1956),pt=s(5181),lt=s(5296),mt=s(7908),ot=s(8361),ut=Object.assign,ft=Object.defineProperty,bt=nt([].concat);rt.exports=!ut||ht(function(){if(et&&ut({b:1},ut(ft({},"a",{enumerable:!0,get:function(){ft(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var vt={},yt={},At=Symbol(),Nt="abcdefghijklmnopqrst";return vt[At]=7,Nt.split("").forEach(function(St){yt[St]=St}),ut({},vt)[At]!=7||dt(ut({},yt)).join("")!=Nt})?function(vt,yt){for(var At=mt(vt),Nt=arguments.length,St=1,wt=pt.f,Mt=lt.f;Nt>St;)for(var Ht,Ot=ot(arguments[St++]),Dt=wt?bt(dt(Ot),wt(Ot)):dt(Ot),Gt=Dt.length,nn=0;Gt>nn;)Ht=Dt[nn++],et&&!at(Mt,Ot,Ht)||(At[Ht]=Ot[Ht]);return At}:ut},30:(rt,it,s)=>{var et,nt=s(9670),at=s(6048),ht=s(748),dt=s(3501),pt=s(490),lt=s(317),mt=s(6200)("IE_PROTO"),ot=function(){},ut=function(vt){return"<script>"+vt+"<\/script>"},ft=function(vt){vt.write(ut("")),vt.close();var yt=vt.parentWindow.Object;return vt=null,yt},bt=function(){try{et=new ActiveXObject("htmlfile")}catch{}var vt,yt;bt=typeof document<"u"?document.domain&&et?ft(et):((yt=lt("iframe")).style.display="none",pt.appendChild(yt),yt.src="javascript:",(vt=yt.contentWindow.document).open(),vt.write(ut("document.F=Object")),vt.close(),vt.F):ft(et);for(var At=ht.length;At--;)delete bt.prototype[ht[At]];return bt()};dt[mt]=!0,rt.exports=Object.create||function(vt,yt){var At;return vt!==null?(ot.prototype=nt(vt),At=new ot,ot.prototype=null,At[mt]=vt):At=bt(),yt===void 0?At:at.f(At,yt)}},6048:(rt,it,s)=>{var et=s(9781),nt=s(3353),at=s(3070),ht=s(9670),dt=s(5656),pt=s(1956);it.f=et&&!nt?Object.defineProperties:function(lt,mt){ht(lt);for(var ot,ut=dt(mt),ft=pt(mt),bt=ft.length,vt=0;bt>vt;)at.f(lt,ot=ft[vt++],ut[ot]);return lt}},3070:(rt,it,s)=>{var et=s(9781),nt=s(4664),at=s(3353),ht=s(9670),dt=s(4948),pt=TypeError,lt=Object.defineProperty,mt=Object.getOwnPropertyDescriptor;it.f=et?at?function(ot,ut,ft){if(ht(ot),ut=dt(ut),ht(ft),typeof ot=="function"&&ut==="prototype"&&"value"in ft&&"writable"in ft&&!ft.writable){var bt=mt(ot,ut);bt&&bt.writable&&(ot[ut]=ft.value,ft={configurable:"configurable"in ft?ft.configurable:bt.configurable,enumerable:"enumerable"in ft?ft.enumerable:bt.enumerable,writable:!1})}return lt(ot,ut,ft)}:lt:function(ot,ut,ft){if(ht(ot),ut=dt(ut),ht(ft),nt)try{return lt(ot,ut,ft)}catch{}if("get"in ft||"set"in ft)throw pt("Accessors not supported");return"value"in ft&&(ot[ut]=ft.value),ot}},1236:(rt,it,s)=>{var et=s(9781),nt=s(6916),at=s(5296),ht=s(9114),dt=s(5656),pt=s(4948),lt=s(2597),mt=s(4664),ot=Object.getOwnPropertyDescriptor;it.f=et?ot:function(ut,ft){if(ut=dt(ut),ft=pt(ft),mt)try{return ot(ut,ft)}catch{}if(lt(ut,ft))return ht(!nt(at.f,ut,ft),ut[ft])}},1156:(rt,it,s)=>{var et=s(4326),nt=s(5656),at=s(8006).f,ht=s(1589),dt=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];rt.exports.f=function(pt){return dt&&et(pt)=="Window"?function(lt){try{return at(lt)}catch{return ht(dt)}}(pt):at(nt(pt))}},8006:(rt,it,s)=>{var et=s(6324),nt=s(748).concat("length","prototype");it.f=Object.getOwnPropertyNames||function(at){return et(at,nt)}},5181:(rt,it)=>{it.f=Object.getOwnPropertySymbols},9518:(rt,it,s)=>{var et=s(2597),nt=s(614),at=s(7908),ht=s(6200),dt=s(8544),pt=ht("IE_PROTO"),lt=Object,mt=lt.prototype;rt.exports=dt?lt.getPrototypeOf:function(ot){var ut=at(ot);if(et(ut,pt))return ut[pt];var ft=ut.constructor;return nt(ft)&&ut instanceof ft?ft.prototype:ut instanceof lt?mt:null}},2050:(rt,it,s)=>{var et=s(7293),nt=s(111),at=s(4326),ht=s(7556),dt=Object.isExtensible,pt=et(function(){});rt.exports=pt||ht?function(lt){return!!nt(lt)&&(!ht||at(lt)!="ArrayBuffer")&&(!dt||dt(lt))}:dt},7976:(rt,it,s)=>{var et=s(1702);rt.exports=et({}.isPrototypeOf)},6324:(rt,it,s)=>{var et=s(1702),nt=s(2597),at=s(5656),ht=s(1318).indexOf,dt=s(3501),pt=et([].push);rt.exports=function(lt,mt){var ot,ut=at(lt),ft=0,bt=[];for(ot in ut)!nt(dt,ot)&&nt(ut,ot)&&pt(bt,ot);for(;mt.length>ft;)nt(ut,ot=mt[ft++])&&(~ht(bt,ot)||pt(bt,ot));return bt}},1956:(rt,it,s)=>{var et=s(6324),nt=s(748);rt.exports=Object.keys||function(at){return et(at,nt)}},5296:(rt,it)=>{var s={}.propertyIsEnumerable,et=Object.getOwnPropertyDescriptor,nt=et&&!s.call({1:2},1);it.f=nt?function(at){var ht=et(this,at);return!!ht&&ht.enumerable}:s},7674:(rt,it,s)=>{var et=s(1702),nt=s(9670),at=s(6077);rt.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var ht,dt=!1,pt={};try{(ht=et(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(pt,[]),dt=pt instanceof Array}catch{}return function(lt,mt){return nt(lt),at(mt),dt?ht(lt,mt):lt.__proto__=mt,lt}}():void 0)},4699:(rt,it,s)=>{var et=s(9781),nt=s(1702),at=s(1956),ht=s(5656),dt=nt(s(5296).f),pt=nt([].push),lt=function(mt){return function(ot){for(var ut,ft=ht(ot),bt=at(ft),vt=bt.length,yt=0,At=[];vt>yt;)ut=bt[yt++],et&&!dt(ft,ut)||pt(At,mt?[ut,ft[ut]]:ft[ut]);return At}};rt.exports={entries:lt(!0),values:lt(!1)}},288:(rt,it,s)=>{var et=s(1694),nt=s(648);rt.exports=et?{}.toString:function(){return"[object "+nt(this)+"]"}},2140:(rt,it,s)=>{var et=s(6916),nt=s(614),at=s(111),ht=TypeError;rt.exports=function(dt,pt){var lt,mt;if(pt==="string"&&nt(lt=dt.toString)&&!at(mt=et(lt,dt))||nt(lt=dt.valueOf)&&!at(mt=et(lt,dt))||pt!=="string"&&nt(lt=dt.toString)&&!at(mt=et(lt,dt)))return mt;throw ht("Can't convert object to primitive value")}},3887:(rt,it,s)=>{var et=s(5005),nt=s(1702),at=s(8006),ht=s(5181),dt=s(9670),pt=nt([].concat);rt.exports=et("Reflect","ownKeys")||function(lt){var mt=at.f(dt(lt)),ot=ht.f;return ot?pt(mt,ot(lt)):mt}},857:(rt,it,s)=>{var et=s(7854);rt.exports=et},2534:rt=>{rt.exports=function(it){try{return{error:!1,value:it()}}catch(s){return{error:!0,value:s}}}},3702:(rt,it,s)=>{var et=s(7854),nt=s(2492),at=s(614),ht=s(4705),dt=s(2788),pt=s(5112),lt=s(7871),mt=s(1913),ot=s(7392),ut=nt&&nt.prototype,ft=pt("species"),bt=!1,vt=at(et.PromiseRejectionEvent),yt=ht("Promise",function(){var At=dt(nt),Nt=At!==String(nt);if(!Nt&&ot===66||mt&&(!ut.catch||!ut.finally))return!0;if(ot>=51&&/native code/.test(At))return!1;var St=new nt(function(Mt){Mt(1)}),wt=function(Mt){Mt(function(){},function(){})};return(St.constructor={})[ft]=wt,!(bt=St.then(function(){})instanceof wt)||!Nt&&lt&&!vt});rt.exports={CONSTRUCTOR:yt,REJECTION_EVENT:vt,SUBCLASSING:bt}},2492:(rt,it,s)=>{var et=s(7854);rt.exports=et.Promise},9478:(rt,it,s)=>{var et=s(9670),nt=s(111),at=s(8523);rt.exports=function(ht,dt){if(et(ht),nt(dt)&&dt.constructor===ht)return dt;var pt=at.f(ht);return(0,pt.resolve)(dt),pt.promise}},612:(rt,it,s)=>{var et=s(2492),nt=s(7072),at=s(3702).CONSTRUCTOR;rt.exports=at||!nt(function(ht){et.all(ht).then(void 0,function(){})})},2626:(rt,it,s)=>{var et=s(3070).f;rt.exports=function(nt,at,ht){ht in nt||et(nt,ht,{configurable:!0,get:function(){return at[ht]},set:function(dt){at[ht]=dt}})}},8572:rt=>{var it=function(){this.head=null,this.tail=null};it.prototype={add:function(s){var et={item:s,next:null};this.head?this.tail.next=et:this.head=et,this.tail=et},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}},rt.exports=it},7651:(rt,it,s)=>{var et=s(6916),nt=s(9670),at=s(614),ht=s(4326),dt=s(2261),pt=TypeError;rt.exports=function(lt,mt){var ot=lt.exec;if(at(ot)){var ut=et(ot,lt,mt);return ut!==null&&nt(ut),ut}if(ht(lt)==="RegExp")return et(dt,lt,mt);throw pt("RegExp#exec called on incompatible receiver")}},2261:(rt,it,s)=>{var et,nt,at=s(6916),ht=s(1702),dt=s(1340),pt=s(7066),lt=s(2999),mt=s(2309),ot=s(30),ut=s(9909).get,ft=s(9441),bt=s(7168),vt=mt("native-string-replace",String.prototype.replace),yt=RegExp.prototype.exec,At=yt,Nt=ht("".charAt),St=ht("".indexOf),wt=ht("".replace),Mt=ht("".slice),Ht=(nt=/b*/g,at(yt,et=/a/,"a"),at(yt,nt,"a"),et.lastIndex!==0||nt.lastIndex!==0),Ot=lt.BROKEN_CARET,Dt=/()??/.exec("")[1]!==void 0;(Ht||Dt||Ot||ft||bt)&&(At=function(Gt){var nn,zt,Ft,un,vn,yn,cn,gn=this,Cn=ut(gn),fn=dt(Gt),Tn=Cn.raw;if(Tn)return Tn.lastIndex=gn.lastIndex,nn=at(At,Tn,fn),gn.lastIndex=Tn.lastIndex,nn;var On=Cn.groups,Ln=Ot&&gn.sticky,An=at(pt,gn),Rn=gn.source,In=0,kn=fn;if(Ln&&(An=wt(An,"y",""),St(An,"g")===-1&&(An+="g"),kn=Mt(fn,gn.lastIndex),gn.lastIndex>0&&(!gn.multiline||gn.multiline&&Nt(fn,gn.lastIndex-1)!==`
`)&&(Rn="(?: "+Rn+")",kn=" "+kn,In++),zt=new RegExp("^(?:"+Rn+")",An)),Dt&&(zt=new RegExp("^"+Rn+"$(?!\\s)",An)),Ht&&(Ft=gn.lastIndex),un=at(yt,Ln?zt:gn,kn),Ln?un?(un.input=Mt(un.input,In),un[0]=Mt(un[0],In),un.index=gn.lastIndex,gn.lastIndex+=un[0].length):gn.lastIndex=0:Ht&&un&&(gn.lastIndex=gn.global?un.index+un[0].length:Ft),Dt&&un&&un.length>1&&at(vt,un[0],zt,function(){for(vn=1;vn<arguments.length-2;vn++)arguments[vn]===void 0&&(un[vn]=void 0)}),un&&On)for(un.groups=yn=ot(null),vn=0;vn<On.length;vn++)yn[(cn=On[vn])[0]]=un[cn[1]];return un}),rt.exports=At},7066:(rt,it,s)=>{var et=s(9670);rt.exports=function(){var nt=et(this),at="";return nt.hasIndices&&(at+="d"),nt.global&&(at+="g"),nt.ignoreCase&&(at+="i"),nt.multiline&&(at+="m"),nt.dotAll&&(at+="s"),nt.unicode&&(at+="u"),nt.unicodeSets&&(at+="v"),nt.sticky&&(at+="y"),at}},4706:(rt,it,s)=>{var et=s(6916),nt=s(2597),at=s(7976),ht=s(7066),dt=RegExp.prototype;rt.exports=function(pt){var lt=pt.flags;return lt!==void 0||"flags"in dt||nt(pt,"flags")||!at(dt,pt)?lt:et(ht,pt)}},2999:(rt,it,s)=>{var et=s(7293),nt=s(7854).RegExp,at=et(function(){var pt=nt("a","y");return pt.lastIndex=2,pt.exec("abcd")!=null}),ht=at||et(function(){return!nt("a","y").sticky}),dt=at||et(function(){var pt=nt("^r","gy");return pt.lastIndex=2,pt.exec("str")!=null});rt.exports={BROKEN_CARET:dt,MISSED_STICKY:ht,UNSUPPORTED_Y:at}},9441:(rt,it,s)=>{var et=s(7293),nt=s(7854).RegExp;rt.exports=et(function(){var at=nt(".","s");return!(at.dotAll&&at.exec(`
`)&&at.flags==="s")})},7168:(rt,it,s)=>{var et=s(7293),nt=s(7854).RegExp;rt.exports=et(function(){var at=nt("(?<a>b)","g");return at.exec("b").groups.a!=="b"||"b".replace(at,"$<a>c")!=="bc"})},4488:rt=>{var it=TypeError;rt.exports=function(s){if(s==null)throw it("Can't call method on "+s);return s}},1150:rt=>{rt.exports=Object.is||function(it,s){return it===s?it!==0||1/it==1/s:it!=it&&s!=s}},7152:(rt,it,s)=>{var et=s(7854),nt=s(2104),at=s(614),ht=s(8113),dt=s(206),pt=s(8053),lt=/MSIE .\./.test(ht),mt=et.Function,ot=function(ut){return lt?function(ft,bt){var vt=pt(arguments.length,1)>2,yt=at(ft)?ft:mt(ft),At=vt?dt(arguments,2):void 0;return ut(vt?function(){nt(yt,this,At)}:yt,bt)}:ut};rt.exports={setTimeout:ot(et.setTimeout),setInterval:ot(et.setInterval)}},6340:(rt,it,s)=>{var et=s(5005),nt=s(3070),at=s(5112),ht=s(9781),dt=at("species");rt.exports=function(pt){var lt=et(pt),mt=nt.f;ht&&lt&&!lt[dt]&&mt(lt,dt,{configurable:!0,get:function(){return this}})}},8003:(rt,it,s)=>{var et=s(3070).f,nt=s(2597),at=s(5112)("toStringTag");rt.exports=function(ht,dt,pt){ht&&!pt&&(ht=ht.prototype),ht&&!nt(ht,at)&&et(ht,at,{configurable:!0,value:dt})}},6200:(rt,it,s)=>{var et=s(2309),nt=s(9711),at=et("keys");rt.exports=function(ht){return at[ht]||(at[ht]=nt(ht))}},5465:(rt,it,s)=>{var et=s(7854),nt=s(3072),at="__core-js_shared__",ht=et[at]||nt(at,{});rt.exports=ht},2309:(rt,it,s)=>{var et=s(1913),nt=s(5465);(rt.exports=function(at,ht){return nt[at]||(nt[at]=ht!==void 0?ht:{})})("versions",[]).push({version:"3.23.4",mode:et?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(rt,it,s)=>{var et=s(9670),nt=s(9483),at=s(5112)("species");rt.exports=function(ht,dt){var pt,lt=et(ht).constructor;return lt===void 0||(pt=et(lt)[at])==null?dt:nt(pt)}},8710:(rt,it,s)=>{var et=s(1702),nt=s(9303),at=s(1340),ht=s(4488),dt=et("".charAt),pt=et("".charCodeAt),lt=et("".slice),mt=function(ot){return function(ut,ft){var bt,vt,yt=at(ht(ut)),At=nt(ft),Nt=yt.length;return At<0||At>=Nt?ot?"":void 0:(bt=pt(yt,At))<55296||bt>56319||At+1===Nt||(vt=pt(yt,At+1))<56320||vt>57343?ot?dt(yt,At):bt:ot?lt(yt,At,At+2):vt-56320+(bt-55296<<10)+65536}};rt.exports={codeAt:mt(!1),charAt:mt(!0)}},6650:(rt,it,s)=>{var et=s(1702),nt=s(7466),at=s(1340),ht=s(8415),dt=s(4488),pt=et(ht),lt=et("".slice),mt=Math.ceil,ot=function(ut){return function(ft,bt,vt){var yt,At,Nt=at(dt(ft)),St=nt(bt),wt=Nt.length,Mt=vt===void 0?" ":at(vt);return St<=wt||Mt==""?Nt:((At=pt(Mt,mt((yt=St-wt)/Mt.length))).length>yt&&(At=lt(At,0,yt)),ut?Nt+At:At+Nt)}};rt.exports={start:ot(!1),end:ot(!0)}},3197:(rt,it,s)=>{var et=s(1702),nt=2147483647,at=/[^\0-\u007E]/,ht=/[.\u3002\uFF0E\uFF61]/g,dt="Overflow: input needs wider integers to process",pt=RangeError,lt=et(ht.exec),mt=Math.floor,ot=String.fromCharCode,ut=et("".charCodeAt),ft=et([].join),bt=et([].push),vt=et("".replace),yt=et("".split),At=et("".toLowerCase),Nt=function(Mt){return Mt+22+75*(Mt<26)},St=function(Mt,Ht,Ot){var Dt=0;for(Mt=Ot?mt(Mt/700):Mt>>1,Mt+=mt(Mt/Ht);Mt>455;)Mt=mt(Mt/35),Dt+=36;return mt(Dt+36*Mt/(Mt+38))},wt=function(Mt){var Ht=[];Mt=function(Ln){for(var An=[],Rn=0,In=Ln.length;Rn<In;){var kn=ut(Ln,Rn++);if(kn>=55296&&kn<=56319&&Rn<In){var xn=ut(Ln,Rn++);(64512&xn)==56320?bt(An,((1023&kn)<<10)+(1023&xn)+65536):(bt(An,kn),Rn--)}else bt(An,kn)}return An}(Mt);var Ot,Dt,Gt=Mt.length,nn=128,zt=0,Ft=72;for(Ot=0;Ot<Mt.length;Ot++)(Dt=Mt[Ot])<128&&bt(Ht,ot(Dt));var un=Ht.length,vn=un;for(un&&bt(Ht,"-");vn<Gt;){var yn=nt;for(Ot=0;Ot<Mt.length;Ot++)(Dt=Mt[Ot])>=nn&&Dt<yn&&(yn=Dt);var cn=vn+1;if(yn-nn>mt((nt-zt)/cn))throw pt(dt);for(zt+=(yn-nn)*cn,nn=yn,Ot=0;Ot<Mt.length;Ot++){if((Dt=Mt[Ot])<nn&&++zt>nt)throw pt(dt);if(Dt==nn){for(var gn=zt,Cn=36;;){var fn=Cn<=Ft?1:Cn>=Ft+26?26:Cn-Ft;if(gn<fn)break;var Tn=gn-fn,On=36-fn;bt(Ht,ot(Nt(fn+Tn%On))),gn=mt(Tn/On),Cn+=36}bt(Ht,ot(Nt(gn))),Ft=St(zt,cn,vn==un),zt=0,vn++}}zt++,nn++}return ft(Ht,"")};rt.exports=function(Mt){var Ht,Ot,Dt=[],Gt=yt(vt(At(Mt),ht,"."),".");for(Ht=0;Ht<Gt.length;Ht++)Ot=Gt[Ht],bt(Dt,lt(at,Ot)?"xn--"+wt(Ot):Ot);return ft(Dt,".")}},8415:(rt,it,s)=>{var et=s(9303),nt=s(1340),at=s(4488),ht=RangeError;rt.exports=function(dt){var pt=nt(at(this)),lt="",mt=et(dt);if(mt<0||mt==1/0)throw ht("Wrong number of repetitions");for(;mt>0;(mt>>>=1)&&(pt+=pt))1&mt&&(lt+=pt);return lt}},3111:(rt,it,s)=>{var et=s(1702),nt=s(4488),at=s(1340),ht=s(1361),dt=et("".replace),pt="["+ht+"]",lt=RegExp("^"+pt+pt+"*"),mt=RegExp(pt+pt+"*$"),ot=function(ut){return function(ft){var bt=at(nt(ft));return 1&ut&&(bt=dt(bt,lt,"")),2&ut&&(bt=dt(bt,mt,"")),bt}};rt.exports={start:ot(1),end:ot(2),trim:ot(3)}},6532:(rt,it,s)=>{var et=s(6916),nt=s(5005),at=s(5112),ht=s(8052);rt.exports=function(){var dt=nt("Symbol"),pt=dt&&dt.prototype,lt=pt&&pt.valueOf,mt=at("toPrimitive");pt&&!pt[mt]&&ht(pt,mt,function(ot){return et(lt,this)},{arity:1})}},261:(rt,it,s)=>{var et,nt,at,ht,dt=s(7854),pt=s(2104),lt=s(9974),mt=s(614),ot=s(2597),ut=s(7293),ft=s(490),bt=s(206),vt=s(317),yt=s(8053),At=s(6833),Nt=s(5268),St=dt.setImmediate,wt=dt.clearImmediate,Mt=dt.process,Ht=dt.Dispatch,Ot=dt.Function,Dt=dt.MessageChannel,Gt=dt.String,nn=0,zt={};try{et=dt.location}catch{}var Ft=function(cn){if(ot(zt,cn)){var gn=zt[cn];delete zt[cn],gn()}},un=function(cn){return function(){Ft(cn)}},vn=function(cn){Ft(cn.data)},yn=function(cn){dt.postMessage(Gt(cn),et.protocol+"//"+et.host)};St&&wt||(St=function(cn){yt(arguments.length,1);var gn=mt(cn)?cn:Ot(cn),Cn=bt(arguments,1);return zt[++nn]=function(){pt(gn,void 0,Cn)},nt(nn),nn},wt=function(cn){delete zt[cn]},Nt?nt=function(cn){Mt.nextTick(un(cn))}:Ht&&Ht.now?nt=function(cn){Ht.now(un(cn))}:Dt&&!At?(ht=(at=new Dt).port2,at.port1.onmessage=vn,nt=lt(ht.postMessage,ht)):dt.addEventListener&&mt(dt.postMessage)&&!dt.importScripts&&et&&et.protocol!=="file:"&&!ut(yn)?(nt=yn,dt.addEventListener("message",vn,!1)):nt="onreadystatechange"in vt("script")?function(cn){ft.appendChild(vt("script")).onreadystatechange=function(){ft.removeChild(this),Ft(cn)}}:function(cn){setTimeout(un(cn),0)}),rt.exports={set:St,clear:wt}},863:(rt,it,s)=>{var et=s(1702);rt.exports=et(1 .valueOf)},1400:(rt,it,s)=>{var et=s(9303),nt=Math.max,at=Math.min;rt.exports=function(ht,dt){var pt=et(ht);return pt<0?nt(pt+dt,0):at(pt,dt)}},4599:(rt,it,s)=>{var et=s(7593),nt=TypeError;rt.exports=function(at){var ht=et(at,"number");if(typeof ht=="number")throw nt("Can't convert number to bigint");return BigInt(ht)}},7067:(rt,it,s)=>{var et=s(9303),nt=s(7466),at=RangeError;rt.exports=function(ht){if(ht===void 0)return 0;var dt=et(ht),pt=nt(dt);if(dt!==pt)throw at("Wrong length or index");return pt}},5656:(rt,it,s)=>{var et=s(8361),nt=s(4488);rt.exports=function(at){return et(nt(at))}},9303:(rt,it,s)=>{var et=s(4758);rt.exports=function(nt){var at=+nt;return at!=at||at===0?0:et(at)}},7466:(rt,it,s)=>{var et=s(9303),nt=Math.min;rt.exports=function(at){return at>0?nt(et(at),9007199254740991):0}},7908:(rt,it,s)=>{var et=s(4488),nt=Object;rt.exports=function(at){return nt(et(at))}},4590:(rt,it,s)=>{var et=s(3002),nt=RangeError;rt.exports=function(at,ht){var dt=et(at);if(dt%ht)throw nt("Wrong offset");return dt}},3002:(rt,it,s)=>{var et=s(9303),nt=RangeError;rt.exports=function(at){var ht=et(at);if(ht<0)throw nt("The argument can't be less than 0");return ht}},7593:(rt,it,s)=>{var et=s(6916),nt=s(111),at=s(2190),ht=s(8173),dt=s(2140),pt=s(5112),lt=TypeError,mt=pt("toPrimitive");rt.exports=function(ot,ut){if(!nt(ot)||at(ot))return ot;var ft,bt=ht(ot,mt);if(bt){if(ut===void 0&&(ut="default"),ft=et(bt,ot,ut),!nt(ft)||at(ft))return ft;throw lt("Can't convert object to primitive value")}return ut===void 0&&(ut="number"),dt(ot,ut)}},4948:(rt,it,s)=>{var et=s(7593),nt=s(2190);rt.exports=function(at){var ht=et(at,"string");return nt(ht)?ht:ht+""}},1694:(rt,it,s)=>{var et={};et[s(5112)("toStringTag")]="z",rt.exports=String(et)==="[object z]"},1340:(rt,it,s)=>{var et=s(648),nt=String;rt.exports=function(at){if(et(at)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return nt(at)}},6330:rt=>{var it=String;rt.exports=function(s){try{return it(s)}catch{return"Object"}}},9843:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(6916),ht=s(9781),dt=s(3832),pt=s(260),lt=s(3331),mt=s(5787),ot=s(9114),ut=s(8880),ft=s(5988),bt=s(7466),vt=s(7067),yt=s(4590),At=s(4948),Nt=s(2597),St=s(648),wt=s(111),Mt=s(2190),Ht=s(30),Ot=s(7976),Dt=s(7674),Gt=s(8006).f,nn=s(7321),zt=s(2092).forEach,Ft=s(6340),un=s(3070),vn=s(1236),yn=s(9909),cn=s(9587),gn=yn.get,Cn=yn.set,fn=yn.enforce,Tn=un.f,On=vn.f,Ln=Math.round,An=nt.RangeError,Rn=lt.ArrayBuffer,In=Rn.prototype,kn=lt.DataView,xn=pt.NATIVE_ARRAY_BUFFER_VIEWS,Yn=pt.TYPED_ARRAY_TAG,Un=pt.TypedArray,jn=pt.TypedArrayPrototype,Qn=pt.aTypedArrayConstructor,on=pt.isTypedArray,Hn="BYTES_PER_ELEMENT",Fn="Wrong length",Vn=function(bn,wn){Qn(bn);for(var Yt=0,kt=wn.length,st=new bn(kt);kt>Yt;)st[Yt]=wn[Yt++];return st},Bn=function(bn,wn){Tn(bn,wn,{get:function(){return gn(this)[wn]}})},qn=function(bn){var wn;return Ot(In,bn)||(wn=St(bn))=="ArrayBuffer"||wn=="SharedArrayBuffer"},Gn=function(bn,wn){return on(bn)&&!Mt(wn)&&wn in bn&&ft(+wn)&&wn>=0},_n=function(bn,wn){return wn=At(wn),Gn(bn,wn)?ot(2,bn[wn]):On(bn,wn)},$n=function(bn,wn,Yt){return wn=At(wn),!(Gn(bn,wn)&&wt(Yt)&&Nt(Yt,"value"))||Nt(Yt,"get")||Nt(Yt,"set")||Yt.configurable||Nt(Yt,"writable")&&!Yt.writable||Nt(Yt,"enumerable")&&!Yt.enumerable?Tn(bn,wn,Yt):(bn[wn]=Yt.value,bn)};ht?(xn||(vn.f=_n,un.f=$n,Bn(jn,"buffer"),Bn(jn,"byteOffset"),Bn(jn,"byteLength"),Bn(jn,"length")),et({target:"Object",stat:!0,forced:!xn},{getOwnPropertyDescriptor:_n,defineProperty:$n}),rt.exports=function(bn,wn,Yt){var kt=bn.match(/\d+$/)[0]/8,st=bn+(Yt?"Clamped":"")+"Array",Tt="get"+bn,Rt="set"+bn,Lt=nt[st],Et=Lt,jt=Et&&Et.prototype,Pt={},Vt=function(rn,Jt){Tn(rn,Jt,{get:function(){return function(ln,mn){var an=gn(ln);return an.view[Tt](mn*kt+an.byteOffset,!0)}(this,Jt)},set:function(ln){return function(mn,an,hn){var En=gn(mn);Yt&&(hn=(hn=Ln(hn))<0?0:hn>255?255:255&hn),En.view[Rt](an*kt+En.byteOffset,hn,!0)}(this,Jt,ln)},enumerable:!0})};xn?dt&&(Et=wn(function(rn,Jt,ln,mn){return mt(rn,jt),cn(wt(Jt)?qn(Jt)?mn!==void 0?new Lt(Jt,yt(ln,kt),mn):ln!==void 0?new Lt(Jt,yt(ln,kt)):new Lt(Jt):on(Jt)?Vn(Et,Jt):at(nn,Et,Jt):new Lt(vt(Jt)),rn,Et)}),Dt&&Dt(Et,Un),zt(Gt(Lt),function(rn){rn in Et||ut(Et,rn,Lt[rn])}),Et.prototype=jt):(Et=wn(function(rn,Jt,ln,mn){mt(rn,jt);var an,hn,En,Mn=0,Pn=0;if(wt(Jt)){if(!qn(Jt))return on(Jt)?Vn(Et,Jt):at(nn,Et,Jt);an=Jt,Pn=yt(ln,kt);var Wn=Jt.byteLength;if(mn===void 0){if(Wn%kt||(hn=Wn-Pn)<0)throw An(Fn)}else if((hn=bt(mn)*kt)+Pn>Wn)throw An(Fn);En=hn/kt}else En=vt(Jt),an=new Rn(hn=En*kt);for(Cn(rn,{buffer:an,byteOffset:Pn,byteLength:hn,length:En,view:new kn(an)});Mn<En;)Vt(rn,Mn++)}),Dt&&Dt(Et,Un),jt=Et.prototype=Ht(jn)),jt.constructor!==Et&&ut(jt,"constructor",Et),fn(jt).TypedArrayConstructor=Et,Yn&&ut(jt,Yn,st);var Zt=Et!=Lt;Pt[st]=Et,et({global:!0,constructor:!0,forced:Zt,sham:!xn},Pt),Hn in Et||ut(Et,Hn,kt),Hn in jt||ut(jt,Hn,kt),Ft(st)}):rt.exports=function(){}},3832:(rt,it,s)=>{var et=s(7854),nt=s(7293),at=s(7072),ht=s(260).NATIVE_ARRAY_BUFFER_VIEWS,dt=et.ArrayBuffer,pt=et.Int8Array;rt.exports=!ht||!nt(function(){pt(1)})||!nt(function(){new pt(-1)})||!at(function(lt){new pt,new pt(null),new pt(1.5),new pt(lt)},!0)||nt(function(){return new pt(new dt(2),1,void 0).length!==1})},3074:(rt,it,s)=>{var et=s(7745),nt=s(6304);rt.exports=function(at,ht){return et(nt(at),ht)}},7321:(rt,it,s)=>{var et=s(9974),nt=s(6916),at=s(9483),ht=s(7908),dt=s(6244),pt=s(8554),lt=s(1246),mt=s(7659),ot=s(260).aTypedArrayConstructor;rt.exports=function(ut){var ft,bt,vt,yt,At,Nt,St=at(this),wt=ht(ut),Mt=arguments.length,Ht=Mt>1?arguments[1]:void 0,Ot=Ht!==void 0,Dt=lt(wt);if(Dt&&!mt(Dt))for(Nt=(At=pt(wt,Dt)).next,wt=[];!(yt=nt(Nt,At)).done;)wt.push(yt.value);for(Ot&&Mt>2&&(Ht=et(Ht,arguments[2])),bt=dt(wt),vt=new(ot(St))(bt),ft=0;bt>ft;ft++)vt[ft]=Ot?Ht(wt[ft],ft):wt[ft];return vt}},6304:(rt,it,s)=>{var et=s(260),nt=s(6707),at=et.aTypedArrayConstructor,ht=et.getTypedArrayConstructor;rt.exports=function(dt){return at(nt(dt,ht(dt)))}},9711:(rt,it,s)=>{var et=s(1702),nt=0,at=Math.random(),ht=et(1 .toString);rt.exports=function(dt){return"Symbol("+(dt===void 0?"":dt)+")_"+ht(++nt+at,36)}},3307:(rt,it,s)=>{var et=s(133);rt.exports=et&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(rt,it,s)=>{var et=s(9781),nt=s(7293);rt.exports=et&&nt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:rt=>{var it=TypeError;rt.exports=function(s,et){if(s<et)throw it("Not enough arguments");return s}},6061:(rt,it,s)=>{var et=s(5112);it.f=et},5112:(rt,it,s)=>{var et=s(7854),nt=s(2309),at=s(2597),ht=s(9711),dt=s(133),pt=s(3307),lt=nt("wks"),mt=et.Symbol,ot=mt&&mt.for,ut=pt?mt:mt&&mt.withoutSetter||ht;rt.exports=function(ft){if(!at(lt,ft)||!dt&&typeof lt[ft]!="string"){var bt="Symbol."+ft;dt&&at(mt,ft)?lt[ft]=mt[ft]:lt[ft]=pt&&ot?ot(bt):ut(bt)}return lt[ft]}},1361:rt=>{rt.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},8264:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(3331),ht=s(6340),dt=at.ArrayBuffer;et({global:!0,constructor:!0,forced:nt.ArrayBuffer!==dt},{ArrayBuffer:dt}),ht("ArrayBuffer")},9575:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(7293),ht=s(3331),dt=s(9670),pt=s(1400),lt=s(7466),mt=s(6707),ot=ht.ArrayBuffer,ut=ht.DataView,ft=ut.prototype,bt=nt(ot.prototype.slice),vt=nt(ft.getUint8),yt=nt(ft.setUint8);et({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:at(function(){return!new ot(2).slice(1,void 0).byteLength})},{slice:function(At,Nt){if(bt&&Nt===void 0)return bt(dt(this),At);for(var St=dt(this).byteLength,wt=pt(At,St),Mt=pt(Nt===void 0?St:Nt,St),Ht=new(mt(this,ot))(lt(Mt-wt)),Ot=new ut(this),Dt=new ut(Ht),Gt=0;wt<Mt;)yt(Dt,Gt++,vt(Ot,wt++));return Ht}})},2222:(rt,it,s)=>{var et=s(2109),nt=s(7293),at=s(3157),ht=s(111),dt=s(7908),pt=s(6244),lt=s(7207),mt=s(6135),ot=s(5417),ut=s(1194),ft=s(5112),bt=s(7392),vt=ft("isConcatSpreadable"),yt=bt>=51||!nt(function(){var St=[];return St[vt]=!1,St.concat()[0]!==St}),At=ut("concat"),Nt=function(St){if(!ht(St))return!1;var wt=St[vt];return wt!==void 0?!!wt:at(St)};et({target:"Array",proto:!0,arity:1,forced:!yt||!At},{concat:function(St){var wt,Mt,Ht,Ot,Dt,Gt=dt(this),nn=ot(Gt,0),zt=0;for(wt=-1,Ht=arguments.length;wt<Ht;wt++)if(Nt(Dt=wt===-1?Gt:arguments[wt]))for(Ot=pt(Dt),lt(zt+Ot),Mt=0;Mt<Ot;Mt++,zt++)Mt in Dt&&mt(nn,zt,Dt[Mt]);else lt(zt+1),mt(nn,zt++,Dt);return nn.length=zt,nn}})},3290:(rt,it,s)=>{var et=s(2109),nt=s(1285),at=s(1223);et({target:"Array",proto:!0},{fill:nt}),at("fill")},7327:(rt,it,s)=>{var et=s(2109),nt=s(2092).filter;et({target:"Array",proto:!0,forced:!s(1194)("filter")},{filter:function(at){return nt(this,at,arguments.length>1?arguments[1]:void 0)}})},4553:(rt,it,s)=>{var et=s(2109),nt=s(2092).findIndex,at=s(1223),ht="findIndex",dt=!0;ht in[]&&Array(1).findIndex(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{findIndex:function(pt){return nt(this,pt,arguments.length>1?arguments[1]:void 0)}}),at(ht)},9826:(rt,it,s)=>{var et=s(2109),nt=s(2092).find,at=s(1223),ht="find",dt=!0;ht in[]&&Array(1).find(function(){dt=!1}),et({target:"Array",proto:!0,forced:dt},{find:function(pt){return nt(this,pt,arguments.length>1?arguments[1]:void 0)}}),at(ht)},9554:(rt,it,s)=>{var et=s(2109),nt=s(8533);et({target:"Array",proto:!0,forced:[].forEach!=nt},{forEach:nt})},1038:(rt,it,s)=>{var et=s(2109),nt=s(8457);et({target:"Array",stat:!0,forced:!s(7072)(function(at){Array.from(at)})},{from:nt})},6699:(rt,it,s)=>{var et=s(2109),nt=s(1318).includes,at=s(7293),ht=s(1223);et({target:"Array",proto:!0,forced:at(function(){return!Array(1).includes()})},{includes:function(dt){return nt(this,dt,arguments.length>1?arguments[1]:void 0)}}),ht("includes")},2772:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(1318).indexOf,ht=s(9341),dt=nt([].indexOf),pt=!!dt&&1/dt([1],1,-0)<0,lt=ht("indexOf");et({target:"Array",proto:!0,forced:pt||!lt},{indexOf:function(mt){var ot=arguments.length>1?arguments[1]:void 0;return pt?dt(this,mt,ot)||0:at(this,mt,ot)}})},9753:(rt,it,s)=>{s(2109)({target:"Array",stat:!0},{isArray:s(3157)})},6992:(rt,it,s)=>{var et=s(5656),nt=s(1223),at=s(7497),ht=s(9909),dt=s(3070).f,pt=s(654),lt=s(1913),mt=s(9781),ot="Array Iterator",ut=ht.set,ft=ht.getterFor(ot);rt.exports=pt(Array,"Array",function(vt,yt){ut(this,{type:ot,target:et(vt),index:0,kind:yt})},function(){var vt=ft(this),yt=vt.target,At=vt.kind,Nt=vt.index++;return!yt||Nt>=yt.length?(vt.target=void 0,{value:void 0,done:!0}):At=="keys"?{value:Nt,done:!1}:At=="values"?{value:yt[Nt],done:!1}:{value:[Nt,yt[Nt]],done:!1}},"values");var bt=at.Arguments=at.Array;if(nt("keys"),nt("values"),nt("entries"),!lt&&mt&&bt.name!=="values")try{dt(bt,"name",{value:"values"})}catch{}},9600:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(8361),ht=s(5656),dt=s(9341),pt=nt([].join),lt=at!=Object,mt=dt("join",",");et({target:"Array",proto:!0,forced:lt||!mt},{join:function(ot){return pt(ht(this),ot===void 0?",":ot)}})},4986:(rt,it,s)=>{var et=s(2109),nt=s(6583);et({target:"Array",proto:!0,forced:nt!==[].lastIndexOf},{lastIndexOf:nt})},1249:(rt,it,s)=>{var et=s(2109),nt=s(2092).map;et({target:"Array",proto:!0,forced:!s(1194)("map")},{map:function(at){return nt(this,at,arguments.length>1?arguments[1]:void 0)}})},7042:(rt,it,s)=>{var et=s(2109),nt=s(3157),at=s(4411),ht=s(111),dt=s(1400),pt=s(6244),lt=s(5656),mt=s(6135),ot=s(5112),ut=s(1194),ft=s(206),bt=ut("slice"),vt=ot("species"),yt=Array,At=Math.max;et({target:"Array",proto:!0,forced:!bt},{slice:function(Nt,St){var wt,Mt,Ht,Ot=lt(this),Dt=pt(Ot),Gt=dt(Nt,Dt),nn=dt(St===void 0?Dt:St,Dt);if(nt(Ot)&&(wt=Ot.constructor,(at(wt)&&(wt===yt||nt(wt.prototype))||ht(wt)&&(wt=wt[vt])===null)&&(wt=void 0),wt===yt||wt===void 0))return ft(Ot,Gt,nn);for(Mt=new(wt===void 0?yt:wt)(At(nn-Gt,0)),Ht=0;Gt<nn;Gt++,Ht++)Gt in Ot&&mt(Mt,Ht,Ot[Gt]);return Mt.length=Ht,Mt}})},2707:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(9662),ht=s(7908),dt=s(6244),pt=s(5117),lt=s(1340),mt=s(7293),ot=s(4362),ut=s(9341),ft=s(8886),bt=s(256),vt=s(7392),yt=s(8008),At=[],Nt=nt(At.sort),St=nt(At.push),wt=mt(function(){At.sort(void 0)}),Mt=mt(function(){At.sort(null)}),Ht=ut("sort"),Ot=!mt(function(){if(vt)return vt<70;if(!(ft&&ft>3)){if(bt)return!0;if(yt)return yt<603;var Dt,Gt,nn,zt,Ft="";for(Dt=65;Dt<76;Dt++){switch(Gt=String.fromCharCode(Dt),Dt){case 66:case 69:case 70:case 72:nn=3;break;case 68:case 71:nn=4;break;default:nn=2}for(zt=0;zt<47;zt++)At.push({k:Gt+zt,v:nn})}for(At.sort(function(un,vn){return vn.v-un.v}),zt=0;zt<At.length;zt++)Gt=At[zt].k.charAt(0),Ft.charAt(Ft.length-1)!==Gt&&(Ft+=Gt);return Ft!=="DGBEFHACIJK"}});et({target:"Array",proto:!0,forced:wt||!Mt||!Ht||!Ot},{sort:function(Dt){Dt!==void 0&&at(Dt);var Gt=ht(this);if(Ot)return Dt===void 0?Nt(Gt):Nt(Gt,Dt);var nn,zt,Ft=[],un=dt(Gt);for(zt=0;zt<un;zt++)zt in Gt&&St(Ft,Gt[zt]);for(ot(Ft,function(vn){return function(yn,cn){return cn===void 0?-1:yn===void 0?1:vn!==void 0?+vn(yn,cn)||0:lt(yn)>lt(cn)?1:-1}}(Dt)),nn=Ft.length,zt=0;zt<nn;)Gt[zt]=Ft[zt++];for(;zt<un;)pt(Gt,zt++);return Gt}})},561:(rt,it,s)=>{var et=s(2109),nt=s(7908),at=s(1400),ht=s(9303),dt=s(6244),pt=s(7207),lt=s(5417),mt=s(6135),ot=s(5117),ut=s(1194)("splice"),ft=Math.max,bt=Math.min;et({target:"Array",proto:!0,forced:!ut},{splice:function(vt,yt){var At,Nt,St,wt,Mt,Ht,Ot=nt(this),Dt=dt(Ot),Gt=at(vt,Dt),nn=arguments.length;for(nn===0?At=Nt=0:nn===1?(At=0,Nt=Dt-Gt):(At=nn-2,Nt=bt(ft(ht(yt),0),Dt-Gt)),pt(Dt+At-Nt),St=lt(Ot,Nt),wt=0;wt<Nt;wt++)(Mt=Gt+wt)in Ot&&mt(St,wt,Ot[Mt]);if(St.length=Nt,At<Nt){for(wt=Gt;wt<Dt-Nt;wt++)Ht=wt+At,(Mt=wt+Nt)in Ot?Ot[Ht]=Ot[Mt]:ot(Ot,Ht);for(wt=Dt;wt>Dt-Nt+At;wt--)ot(Ot,wt-1)}else if(At>Nt)for(wt=Dt-Nt;wt>Gt;wt--)Ht=wt+At-1,(Mt=wt+Nt-1)in Ot?Ot[Ht]=Ot[Mt]:ot(Ot,Ht);for(wt=0;wt<At;wt++)Ot[wt+Gt]=arguments[wt+2];return Ot.length=Dt-Nt+At,St}})},3690:(rt,it,s)=>{var et=s(2109),nt=s(3331);et({global:!0,constructor:!0,forced:!s(4019)},{DataView:nt.DataView})},6716:(rt,it,s)=>{s(3690)},3843:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=Date,ht=nt(at.prototype.getTime);et({target:"Date",stat:!0},{now:function(){return ht(new at)}})},8733:(rt,it,s)=>{var et=s(2109),nt=s(5573);et({target:"Date",proto:!0,forced:Date.prototype.toISOString!==nt},{toISOString:nt})},5735:(rt,it,s)=>{var et=s(2109),nt=s(7293),at=s(7908),ht=s(7593);et({target:"Date",proto:!0,arity:1,forced:nt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1})},{toJSON:function(dt){var pt=at(this),lt=ht(pt,"number");return typeof lt!="number"||isFinite(lt)?pt.toISOString():null}})},3710:(rt,it,s)=>{var et=s(1702),nt=s(8052),at=Date.prototype,ht="Invalid Date",dt=et(at.toString),pt=et(at.getTime);String(new Date(NaN))!=ht&&nt(at,"toString",function(){var lt=pt(this);return lt==lt?dt(this):ht})},4812:(rt,it,s)=>{var et=s(2109),nt=s(7065);et({target:"Function",proto:!0,forced:Function.bind!==nt},{bind:nt})},8309:(rt,it,s)=>{var et=s(9781),nt=s(6530).EXISTS,at=s(1702),ht=s(3070).f,dt=Function.prototype,pt=at(dt.toString),lt=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,mt=at(lt.exec);et&&!nt&&ht(dt,"name",{configurable:!0,get:function(){try{return mt(lt,pt(this))[1]}catch{return""}}})},8862:(rt,it,s)=>{var et=s(2109),nt=s(5005),at=s(2104),ht=s(6916),dt=s(1702),pt=s(7293),lt=s(3157),mt=s(614),ot=s(111),ut=s(2190),ft=s(206),bt=s(133),vt=nt("JSON","stringify"),yt=dt(/./.exec),At=dt("".charAt),Nt=dt("".charCodeAt),St=dt("".replace),wt=dt(1 .toString),Mt=/[\uD800-\uDFFF]/g,Ht=/^[\uD800-\uDBFF]$/,Ot=/^[\uDC00-\uDFFF]$/,Dt=!bt||pt(function(){var Ft=nt("Symbol")();return vt([Ft])!="[null]"||vt({a:Ft})!="{}"||vt(Object(Ft))!="{}"}),Gt=pt(function(){return vt("\uDF06\uD834")!=='"\\udf06\\ud834"'||vt("\uDEAD")!=='"\\udead"'}),nn=function(Ft,un){var vn=ft(arguments),yn=un;if((ot(un)||Ft!==void 0)&&!ut(Ft))return lt(un)||(un=function(cn,gn){if(mt(yn)&&(gn=ht(yn,this,cn,gn)),!ut(gn))return gn}),vn[1]=un,at(vt,null,vn)},zt=function(Ft,un,vn){var yn=At(vn,un-1),cn=At(vn,un+1);return yt(Ht,Ft)&&!yt(Ot,cn)||yt(Ot,Ft)&&!yt(Ht,yn)?"\\u"+wt(Nt(Ft,0),16):Ft};vt&&et({target:"JSON",stat:!0,arity:3,forced:Dt||Gt},{stringify:function(Ft,un,vn){var yn=ft(arguments),cn=at(Dt?nn:vt,null,yn);return Gt&&typeof cn=="string"?St(cn,Mt,zt):cn}})},3706:(rt,it,s)=>{var et=s(7854);s(8003)(et.JSON,"JSON",!0)},9098:(rt,it,s)=>{s(7710)("Map",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},1532:(rt,it,s)=>{s(9098)},658:(rt,it,s)=>{s(2109)({target:"Math",stat:!0},{log10:s(403)})},2703:(rt,it,s)=>{s(8003)(Math,"Math",!0)},9653:(rt,it,s)=>{var et=s(9781),nt=s(7854),at=s(1702),ht=s(4705),dt=s(8052),pt=s(2597),lt=s(9587),mt=s(7976),ot=s(2190),ut=s(7593),ft=s(7293),bt=s(8006).f,vt=s(1236).f,yt=s(3070).f,At=s(863),Nt=s(3111).trim,St="Number",wt=nt.Number,Mt=wt.prototype,Ht=nt.TypeError,Ot=at("".slice),Dt=at("".charCodeAt),Gt=function(yn){var cn=ut(yn,"number");return typeof cn=="bigint"?cn:nn(cn)},nn=function(yn){var cn,gn,Cn,fn,Tn,On,Ln,An,Rn=ut(yn,"number");if(ot(Rn))throw Ht("Cannot convert a Symbol value to a number");if(typeof Rn=="string"&&Rn.length>2){if(Rn=Nt(Rn),(cn=Dt(Rn,0))===43||cn===45){if((gn=Dt(Rn,2))===88||gn===120)return NaN}else if(cn===48){switch(Dt(Rn,1)){case 66:case 98:Cn=2,fn=49;break;case 79:case 111:Cn=8,fn=55;break;default:return+Rn}for(On=(Tn=Ot(Rn,2)).length,Ln=0;Ln<On;Ln++)if((An=Dt(Tn,Ln))<48||An>fn)return NaN;return parseInt(Tn,Cn)}}return+Rn};if(ht(St,!wt(" 0o1")||!wt("0b1")||wt("+0x1"))){for(var zt,Ft=function(yn){var cn=arguments.length<1?0:wt(Gt(yn)),gn=this;return mt(Mt,gn)&&ft(function(){At(gn)})?lt(Object(cn),gn,Ft):cn},un=et?bt(wt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),vn=0;un.length>vn;vn++)pt(wt,zt=un[vn])&&!pt(Ft,zt)&&yt(Ft,zt,vt(wt,zt));Ft.prototype=Mt,Mt.constructor=Ft,dt(nt,St,Ft,{constructor:!0})}},3161:(rt,it,s)=>{s(2109)({target:"Number",stat:!0},{isInteger:s(5988)})},4363:(rt,it,s)=>{s(2109)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},9601:(rt,it,s)=>{var et=s(2109),nt=s(1574);et({target:"Object",stat:!0,arity:2,forced:Object.assign!==nt},{assign:nt})},8011:(rt,it,s)=>{s(2109)({target:"Object",stat:!0,sham:!s(9781)},{create:s(30)})},9070:(rt,it,s)=>{var et=s(2109),nt=s(9781),at=s(3070).f;et({target:"Object",stat:!0,forced:Object.defineProperty!==at,sham:!nt},{defineProperty:at})},9720:(rt,it,s)=>{var et=s(2109),nt=s(4699).entries;et({target:"Object",stat:!0},{entries:function(at){return nt(at)}})},5003:(rt,it,s)=>{var et=s(2109),nt=s(7293),at=s(5656),ht=s(1236).f,dt=s(9781),pt=nt(function(){ht(1)});et({target:"Object",stat:!0,forced:!dt||pt,sham:!dt},{getOwnPropertyDescriptor:function(lt,mt){return ht(at(lt),mt)}})},9660:(rt,it,s)=>{var et=s(2109),nt=s(133),at=s(7293),ht=s(5181),dt=s(7908);et({target:"Object",stat:!0,forced:!nt||at(function(){ht.f(1)})},{getOwnPropertySymbols:function(pt){var lt=ht.f;return lt?lt(dt(pt)):[]}})},489:(rt,it,s)=>{var et=s(2109),nt=s(7293),at=s(7908),ht=s(9518),dt=s(8544);et({target:"Object",stat:!0,forced:nt(function(){ht(1)}),sham:!dt},{getPrototypeOf:function(pt){return ht(at(pt))}})},7941:(rt,it,s)=>{var et=s(2109),nt=s(7908),at=s(1956);et({target:"Object",stat:!0,forced:s(7293)(function(){at(1)})},{keys:function(ht){return at(nt(ht))}})},8304:(rt,it,s)=>{s(2109)({target:"Object",stat:!0},{setPrototypeOf:s(7674)})},1539:(rt,it,s)=>{var et=s(1694),nt=s(8052),at=s(288);et||nt(Object.prototype,"toString",at,{unsafe:!0})},2479:(rt,it,s)=>{var et=s(2109),nt=s(4699).values;et({target:"Object",stat:!0},{values:function(at){return nt(at)}})},1058:(rt,it,s)=>{var et=s(2109),nt=s(3009);et({global:!0,forced:parseInt!=nt},{parseInt:nt})},821:(rt,it,s)=>{var et=s(2109),nt=s(6916),at=s(9662),ht=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{all:function(lt){var mt=this,ot=ht.f(mt),ut=ot.resolve,ft=ot.reject,bt=dt(function(){var vt=at(mt.resolve),yt=[],At=0,Nt=1;pt(lt,function(St){var wt=At++,Mt=!1;Nt++,nt(vt,mt,St).then(function(Ht){Mt||(Mt=!0,yt[wt]=Ht,--Nt||ut(yt))},ft)}),--Nt||ut(yt)});return bt.error&&ft(bt.value),ot.promise}})},4164:(rt,it,s)=>{var et=s(2109),nt=s(1913),at=s(3702).CONSTRUCTOR,ht=s(2492),dt=s(5005),pt=s(614),lt=s(8052),mt=ht&&ht.prototype;if(et({target:"Promise",proto:!0,forced:at,real:!0},{catch:function(ut){return this.then(void 0,ut)}}),!nt&&pt(ht)){var ot=dt("Promise").prototype.catch;mt.catch!==ot&&lt(mt,"catch",ot,{unsafe:!0})}},3401:(rt,it,s)=>{var et,nt,at,ht=s(2109),dt=s(1913),pt=s(5268),lt=s(7854),mt=s(6916),ot=s(8052),ut=s(7674),ft=s(8003),bt=s(6340),vt=s(9662),yt=s(614),At=s(111),Nt=s(5787),St=s(6707),wt=s(261).set,Mt=s(5948),Ht=s(842),Ot=s(2534),Dt=s(8572),Gt=s(9909),nn=s(2492),zt=s(3702),Ft=s(8523),un="Promise",vn=zt.CONSTRUCTOR,yn=zt.REJECTION_EVENT,cn=zt.SUBCLASSING,gn=Gt.getterFor(un),Cn=Gt.set,fn=nn&&nn.prototype,Tn=nn,On=fn,Ln=lt.TypeError,An=lt.document,Rn=lt.process,In=Ft.f,kn=In,xn=!!(An&&An.createEvent&&lt.dispatchEvent),Yn="unhandledrejection",Un=function(_n){var $n;return!(!At(_n)||!yt($n=_n.then))&&$n},jn=function(_n,$n){var bn,wn,Yt,kt=$n.value,st=$n.state==1,Tt=st?_n.ok:_n.fail,Rt=_n.resolve,Lt=_n.reject,Et=_n.domain;try{Tt?(st||($n.rejection===2&&Vn($n),$n.rejection=1),Tt===!0?bn=kt:(Et&&Et.enter(),bn=Tt(kt),Et&&(Et.exit(),Yt=!0)),bn===_n.promise?Lt(Ln("Promise-chain cycle")):(wn=Un(bn))?mt(wn,bn,Rt,Lt):Rt(bn)):Lt(kt)}catch(jt){Et&&!Yt&&Et.exit(),Lt(jt)}},Qn=function(_n,$n){_n.notified||(_n.notified=!0,Mt(function(){for(var bn,wn=_n.reactions;bn=wn.get();)jn(bn,_n);_n.notified=!1,$n&&!_n.rejection&&Hn(_n)}))},on=function(_n,$n,bn){var wn,Yt;xn?((wn=An.createEvent("Event")).promise=$n,wn.reason=bn,wn.initEvent(_n,!1,!0),lt.dispatchEvent(wn)):wn={promise:$n,reason:bn},!yn&&(Yt=lt["on"+_n])?Yt(wn):_n===Yn&&Ht("Unhandled promise rejection",bn)},Hn=function(_n){mt(wt,lt,function(){var $n,bn=_n.facade,wn=_n.value;if(Fn(_n)&&($n=Ot(function(){pt?Rn.emit("unhandledRejection",wn,bn):on(Yn,bn,wn)}),_n.rejection=pt||Fn(_n)?2:1,$n.error))throw $n.value})},Fn=function(_n){return _n.rejection!==1&&!_n.parent},Vn=function(_n){mt(wt,lt,function(){var $n=_n.facade;pt?Rn.emit("rejectionHandled",$n):on("rejectionhandled",$n,_n.value)})},Bn=function(_n,$n,bn){return function(wn){_n($n,wn,bn)}},qn=function(_n,$n,bn){_n.done||(_n.done=!0,bn&&(_n=bn),_n.value=$n,_n.state=2,Qn(_n,!0))},Gn=function(_n,$n,bn){if(!_n.done){_n.done=!0,bn&&(_n=bn);try{if(_n.facade===$n)throw Ln("Promise can't be resolved itself");var wn=Un($n);wn?Mt(function(){var Yt={done:!1};try{mt(wn,$n,Bn(Gn,Yt,_n),Bn(qn,Yt,_n))}catch(kt){qn(Yt,kt,_n)}}):(_n.value=$n,_n.state=1,Qn(_n,!1))}catch(Yt){qn({done:!1},Yt,_n)}}};if(vn&&(On=(Tn=function(_n){Nt(this,On),vt(_n),mt(et,this);var $n=gn(this);try{_n(Bn(Gn,$n),Bn(qn,$n))}catch(bn){qn($n,bn)}}).prototype,(et=function(_n){Cn(this,{type:un,done:!1,notified:!1,parent:!1,reactions:new Dt,rejection:!1,state:0,value:void 0})}).prototype=ot(On,"then",function(_n,$n){var bn=gn(this),wn=In(St(this,Tn));return bn.parent=!0,wn.ok=!yt(_n)||_n,wn.fail=yt($n)&&$n,wn.domain=pt?Rn.domain:void 0,bn.state==0?bn.reactions.add(wn):Mt(function(){jn(wn,bn)}),wn.promise}),nt=function(){var _n=new et,$n=gn(_n);this.promise=_n,this.resolve=Bn(Gn,$n),this.reject=Bn(qn,$n)},Ft.f=In=function(_n){return _n===Tn||_n===void 0?new nt(_n):kn(_n)},!dt&&yt(nn)&&fn!==Object.prototype)){at=fn.then,cn||ot(fn,"then",function(_n,$n){var bn=this;return new Tn(function(wn,Yt){mt(at,bn,wn,Yt)}).then(_n,$n)},{unsafe:!0});try{delete fn.constructor}catch{}ut&&ut(fn,On)}ht({global:!0,constructor:!0,wrap:!0,forced:vn},{Promise:Tn}),ft(Tn,un,!1,!0),bt(un)},8674:(rt,it,s)=>{s(3401),s(821),s(4164),s(6027),s(683),s(6294)},6027:(rt,it,s)=>{var et=s(2109),nt=s(6916),at=s(9662),ht=s(8523),dt=s(2534),pt=s(408);et({target:"Promise",stat:!0,forced:s(612)},{race:function(lt){var mt=this,ot=ht.f(mt),ut=ot.reject,ft=dt(function(){var bt=at(mt.resolve);pt(lt,function(vt){nt(bt,mt,vt).then(ot.resolve,ut)})});return ft.error&&ut(ft.value),ot.promise}})},683:(rt,it,s)=>{var et=s(2109),nt=s(6916),at=s(8523);et({target:"Promise",stat:!0,forced:s(3702).CONSTRUCTOR},{reject:function(ht){var dt=at.f(this);return nt(dt.reject,void 0,ht),dt.promise}})},6294:(rt,it,s)=>{var et=s(2109),nt=s(5005),at=s(1913),ht=s(2492),dt=s(3702).CONSTRUCTOR,pt=s(9478),lt=nt("Promise"),mt=at&&!dt;et({target:"Promise",stat:!0,forced:at||dt},{resolve:function(ot){return pt(mt&&this===lt?ht:this,ot)}})},2419:(rt,it,s)=>{var et=s(2109),nt=s(5005),at=s(2104),ht=s(7065),dt=s(9483),pt=s(9670),lt=s(111),mt=s(30),ot=s(7293),ut=nt("Reflect","construct"),ft=Object.prototype,bt=[].push,vt=ot(function(){function Nt(){}return!(ut(function(){},[],Nt)instanceof Nt)}),yt=!ot(function(){ut(function(){})}),At=vt||yt;et({target:"Reflect",stat:!0,forced:At,sham:At},{construct:function(Nt,St){dt(Nt),pt(St);var wt=arguments.length<3?Nt:dt(arguments[2]);if(yt&&!vt)return ut(Nt,St,wt);if(Nt==wt){switch(St.length){case 0:return new Nt;case 1:return new Nt(St[0]);case 2:return new Nt(St[0],St[1]);case 3:return new Nt(St[0],St[1],St[2]);case 4:return new Nt(St[0],St[1],St[2],St[3])}var Mt=[null];return at(bt,Mt,St),new(at(ht,Nt,Mt))}var Ht=wt.prototype,Ot=mt(lt(Ht)?Ht:ft),Dt=at(Nt,Ot,St);return lt(Dt)?Dt:Ot}})},4819:(rt,it,s)=>{var et=s(2109),nt=s(6916),at=s(111),ht=s(9670),dt=s(5032),pt=s(1236),lt=s(9518);et({target:"Reflect",stat:!0},{get:function mt(ot,ut){var ft,bt,vt=arguments.length<3?ot:arguments[2];return ht(ot)===vt?ot[ut]:(ft=pt.f(ot,ut))?dt(ft)?ft.value:ft.get===void 0?void 0:nt(ft.get,vt):at(bt=lt(ot))?mt(bt,ut,vt):void 0}})},4603:(rt,it,s)=>{var et=s(9781),nt=s(7854),at=s(1702),ht=s(4705),dt=s(9587),pt=s(8880),lt=s(8006).f,mt=s(7976),ot=s(7850),ut=s(1340),ft=s(4706),bt=s(2999),vt=s(2626),yt=s(8052),At=s(7293),Nt=s(2597),St=s(9909).enforce,wt=s(6340),Mt=s(5112),Ht=s(9441),Ot=s(7168),Dt=Mt("match"),Gt=nt.RegExp,nn=Gt.prototype,zt=nt.SyntaxError,Ft=at(nn.exec),un=at("".charAt),vn=at("".replace),yn=at("".indexOf),cn=at("".slice),gn=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Cn=/a/g,fn=/a/g,Tn=new Gt(Cn)!==Cn,On=bt.MISSED_STICKY,Ln=bt.UNSUPPORTED_Y;if(ht("RegExp",et&&(!Tn||On||Ht||Ot||At(function(){return fn[Dt]=!1,Gt(Cn)!=Cn||Gt(fn)==fn||Gt(Cn,"i")!="/a/i"})))){for(var An=function(kn,xn){var Yn,Un,jn,Qn,on,Hn,Fn=mt(nn,this),Vn=ot(kn),Bn=xn===void 0,qn=[],Gn=kn;if(!Fn&&Vn&&Bn&&kn.constructor===An)return kn;if((Vn||mt(nn,kn))&&(kn=kn.source,Bn&&(xn=ft(Gn))),kn=kn===void 0?"":ut(kn),xn=xn===void 0?"":ut(xn),Gn=kn,Ht&&"dotAll"in Cn&&(Un=!!xn&&yn(xn,"s")>-1)&&(xn=vn(xn,/s/g,"")),Yn=xn,On&&"sticky"in Cn&&(jn=!!xn&&yn(xn,"y")>-1)&&Ln&&(xn=vn(xn,/y/g,"")),Ot&&(Qn=function(_n){for(var $n,bn=_n.length,wn=0,Yt="",kt=[],st={},Tt=!1,Rt=!1,Lt=0,Et="";wn<=bn;wn++){if(($n=un(_n,wn))==="\\")$n+=un(_n,++wn);else if($n==="]")Tt=!1;else if(!Tt)switch(!0){case $n==="[":Tt=!0;break;case $n==="(":Ft(gn,cn(_n,wn+1))&&(wn+=2,Rt=!0),Yt+=$n,Lt++;continue;case($n===">"&&Rt):if(Et===""||Nt(st,Et))throw new zt("Invalid capture group name");st[Et]=!0,kt[kt.length]=[Et,Lt],Rt=!1,Et="";continue}Rt?Et+=$n:Yt+=$n}return[Yt,kt]}(kn),kn=Qn[0],qn=Qn[1]),on=dt(Gt(kn,xn),Fn?this:nn,An),(Un||jn||qn.length)&&(Hn=St(on),Un&&(Hn.dotAll=!0,Hn.raw=An(function(_n){for(var $n,bn=_n.length,wn=0,Yt="",kt=!1;wn<=bn;wn++)($n=un(_n,wn))!=="\\"?kt||$n!=="."?($n==="["?kt=!0:$n==="]"&&(kt=!1),Yt+=$n):Yt+="[\\s\\S]":Yt+=$n+un(_n,++wn);return Yt}(kn),Yn)),jn&&(Hn.sticky=!0),qn.length&&(Hn.groups=qn)),kn!==Gn)try{pt(on,"source",Gn===""?"(?:)":Gn)}catch{}return on},Rn=lt(Gt),In=0;Rn.length>In;)vt(An,Gt,Rn[In++]);nn.constructor=An,An.prototype=nn,yt(nt,"RegExp",An,{constructor:!0})}wt("RegExp")},4916:(rt,it,s)=>{var et=s(2109),nt=s(2261);et({target:"RegExp",proto:!0,forced:/./.exec!==nt},{exec:nt})},9714:(rt,it,s)=>{var et=s(6530).PROPER,nt=s(8052),at=s(9670),ht=s(1340),dt=s(7293),pt=s(4706),lt="toString",mt=RegExp.prototype.toString,ot=dt(function(){return mt.call({source:"a",flags:"b"})!="/a/b"}),ut=et&&mt.name!=lt;(ot||ut)&&nt(RegExp.prototype,lt,function(){var ft=at(this);return"/"+ht(ft.source)+"/"+ht(pt(ft))},{unsafe:!0})},7227:(rt,it,s)=>{s(7710)("Set",function(et){return function(){return et(this,arguments.length?arguments[0]:void 0)}},s(5631))},189:(rt,it,s)=>{s(7227)},2023:(rt,it,s)=>{var et=s(2109),nt=s(1702),at=s(3929),ht=s(4488),dt=s(1340),pt=s(4964),lt=nt("".indexOf);et({target:"String",proto:!0,forced:!pt("includes")},{includes:function(mt){return!!~lt(dt(ht(this)),dt(at(mt)),arguments.length>1?arguments[1]:void 0)}})},8783:(rt,it,s)=>{var et=s(8710).charAt,nt=s(1340),at=s(9909),ht=s(654),dt="String Iterator",pt=at.set,lt=at.getterFor(dt);ht(String,"String",function(mt){pt(this,{type:dt,string:nt(mt),index:0})},function(){var mt,ot=lt(this),ut=ot.string,ft=ot.index;return ft>=ut.length?{value:void 0,done:!0}:(mt=et(ut,ft),ot.index+=mt.length,{value:mt,done:!1})})},4723:(rt,it,s)=>{var et=s(6916),nt=s(7007),at=s(9670),ht=s(7466),dt=s(1340),pt=s(4488),lt=s(8173),mt=s(1530),ot=s(7651);nt("match",function(ut,ft,bt){return[function(vt){var yt=pt(this),At=vt==null?void 0:lt(vt,ut);return At?et(At,vt,yt):new RegExp(vt)[ut](dt(yt))},function(vt){var yt=at(this),At=dt(vt),Nt=bt(ft,yt,At);if(Nt.done)return Nt.value;if(!yt.global)return ot(yt,At);var St=yt.unicode;yt.lastIndex=0;for(var wt,Mt=[],Ht=0;(wt=ot(yt,At))!==null;){var Ot=dt(wt[0]);Mt[Ht]=Ot,Ot===""&&(yt.lastIndex=mt(At,ht(yt.lastIndex),St)),Ht++}return Ht===0?null:Mt}]})},5306:(rt,it,s)=>{var et=s(2104),nt=s(6916),at=s(1702),ht=s(7007),dt=s(7293),pt=s(9670),lt=s(614),mt=s(9303),ot=s(7466),ut=s(1340),ft=s(4488),bt=s(1530),vt=s(8173),yt=s(647),At=s(7651),Nt=s(5112)("replace"),St=Math.max,wt=Math.min,Mt=at([].concat),Ht=at([].push),Ot=at("".indexOf),Dt=at("".slice),Gt="a".replace(/./,"$0")==="$0",nn=!!/./[Nt]&&/./[Nt]("a","$0")==="";ht("replace",function(zt,Ft,un){var vn=nn?"$":"$0";return[function(yn,cn){var gn=ft(this),Cn=yn==null?void 0:vt(yn,Nt);return Cn?nt(Cn,yn,gn,cn):nt(Ft,ut(gn),yn,cn)},function(yn,cn){var gn=pt(this),Cn=ut(yn);if(typeof cn=="string"&&Ot(cn,vn)===-1&&Ot(cn,"$<")===-1){var fn=un(Ft,gn,Cn,cn);if(fn.done)return fn.value}var Tn=lt(cn);Tn||(cn=ut(cn));var On=gn.global;if(On){var Ln=gn.unicode;gn.lastIndex=0}for(var An=[];;){var Rn=At(gn,Cn);if(Rn===null||(Ht(An,Rn),!On))break;ut(Rn[0])===""&&(gn.lastIndex=bt(Cn,ot(gn.lastIndex),Ln))}for(var In,kn="",xn=0,Yn=0;Yn<An.length;Yn++){for(var Un=ut((Rn=An[Yn])[0]),jn=St(wt(mt(Rn.index),Cn.length),0),Qn=[],on=1;on<Rn.length;on++)Ht(Qn,(In=Rn[on])===void 0?In:String(In));var Hn=Rn.groups;if(Tn){var Fn=Mt([Un],Qn,jn,Cn);Hn!==void 0&&Ht(Fn,Hn);var Vn=ut(et(cn,void 0,Fn))}else Vn=yt(Un,Cn,jn,Qn,Hn,cn);jn>=xn&&(kn+=Dt(Cn,xn,jn)+Vn,xn=jn+Un.length)}return kn+Dt(Cn,xn)}]},!!dt(function(){var zt=/./;return zt.exec=function(){var Ft=[];return Ft.groups={a:"7"},Ft},"".replace(zt,"$<a>")!=="7"})||!Gt||nn)},4765:(rt,it,s)=>{var et=s(6916),nt=s(7007),at=s(9670),ht=s(4488),dt=s(1150),pt=s(1340),lt=s(8173),mt=s(7651);nt("search",function(ot,ut,ft){return[function(bt){var vt=ht(this),yt=bt==null?void 0:lt(bt,ot);return yt?et(yt,bt,vt):new RegExp(bt)[ot](pt(vt))},function(bt){var vt=at(this),yt=pt(bt),At=ft(ut,vt,yt);if(At.done)return At.value;var Nt=vt.lastIndex;dt(Nt,0)||(vt.lastIndex=0);var St=mt(vt,yt);return dt(vt.lastIndex,Nt)||(vt.lastIndex=Nt),St===null?-1:St.index}]})},3123:(rt,it,s)=>{var et=s(2104),nt=s(6916),at=s(1702),ht=s(7007),dt=s(7850),pt=s(9670),lt=s(4488),mt=s(6707),ot=s(1530),ut=s(7466),ft=s(1340),bt=s(8173),vt=s(1589),yt=s(7651),At=s(2261),Nt=s(2999),St=s(7293),wt=Nt.UNSUPPORTED_Y,Mt=4294967295,Ht=Math.min,Ot=[].push,Dt=at(/./.exec),Gt=at(Ot),nn=at("".slice);ht("split",function(zt,Ft,un){var vn;return vn="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(yn,cn){var gn=ft(lt(this)),Cn=cn===void 0?Mt:cn>>>0;if(Cn===0)return[];if(yn===void 0)return[gn];if(!dt(yn))return nt(Ft,gn,yn,Cn);for(var fn,Tn,On,Ln=[],An=(yn.ignoreCase?"i":"")+(yn.multiline?"m":"")+(yn.unicode?"u":"")+(yn.sticky?"y":""),Rn=0,In=new RegExp(yn.source,An+"g");(fn=nt(At,In,gn))&&!((Tn=In.lastIndex)>Rn&&(Gt(Ln,nn(gn,Rn,fn.index)),fn.length>1&&fn.index<gn.length&&et(Ot,Ln,vt(fn,1)),On=fn[0].length,Rn=Tn,Ln.length>=Cn));)In.lastIndex===fn.index&&In.lastIndex++;return Rn===gn.length?!On&&Dt(In,"")||Gt(Ln,""):Gt(Ln,nn(gn,Rn)),Ln.length>Cn?vt(Ln,0,Cn):Ln}:"0".split(void 0,0).length?function(yn,cn){return yn===void 0&&cn===0?[]:nt(Ft,this,yn,cn)}:Ft,[function(yn,cn){var gn=lt(this),Cn=yn==null?void 0:bt(yn,zt);return Cn?nt(Cn,yn,gn,cn):nt(vn,ft(gn),yn,cn)},function(yn,cn){var gn=pt(this),Cn=ft(yn),fn=un(vn,gn,Cn,cn,vn!==Ft);if(fn.done)return fn.value;var Tn=mt(gn,RegExp),On=gn.unicode,Ln=(gn.ignoreCase?"i":"")+(gn.multiline?"m":"")+(gn.unicode?"u":"")+(wt?"g":"y"),An=new Tn(wt?"^(?:"+gn.source+")":gn,Ln),Rn=cn===void 0?Mt:cn>>>0;if(Rn===0)return[];if(Cn.length===0)return yt(An,Cn)===null?[Cn]:[];for(var In=0,kn=0,xn=[];kn<Cn.length;){An.lastIndex=wt?0:kn;var Yn,Un=yt(An,wt?nn(Cn,kn):Cn);if(Un===null||(Yn=Ht(ut(An.lastIndex+(wt?kn:0)),Cn.length))===In)kn=ot(Cn,kn,On);else{if(Gt(xn,nn(Cn,In,kn)),xn.length===Rn)return xn;for(var jn=1;jn<=Un.length-1;jn++)if(Gt(xn,Un[jn]),xn.length===Rn)return xn;kn=In=Yn}}return Gt(xn,nn(Cn,In)),xn}]},!!St(function(){var zt=/(?:)/,Ft=zt.exec;zt.exec=function(){return Ft.apply(this,arguments)};var un="ab".split(zt);return un.length!==2||un[0]!=="a"||un[1]!=="b"}),wt)},6755:(rt,it,s)=>{var et,nt=s(2109),at=s(1702),ht=s(1236).f,dt=s(7466),pt=s(1340),lt=s(3929),mt=s(4488),ot=s(4964),ut=s(1913),ft=at("".startsWith),bt=at("".slice),vt=Math.min,yt=ot("startsWith");nt({target:"String",proto:!0,forced:!(!ut&&!yt&&(et=ht(String.prototype,"startsWith"),et&&!et.writable)||yt)},{startsWith:function(At){var Nt=pt(mt(this));lt(At);var St=dt(vt(arguments.length>1?arguments[1]:void 0,Nt.length)),wt=pt(At);return ft?ft(Nt,wt,St):bt(Nt,St,St+wt.length)===wt}})},2443:(rt,it,s)=>{s(7235)("asyncIterator")},4032:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(6916),ht=s(1702),dt=s(1913),pt=s(9781),lt=s(133),mt=s(7293),ot=s(2597),ut=s(7976),ft=s(9670),bt=s(5656),vt=s(4948),yt=s(1340),At=s(9114),Nt=s(30),St=s(1956),wt=s(8006),Mt=s(1156),Ht=s(5181),Ot=s(1236),Dt=s(3070),Gt=s(6048),nn=s(5296),zt=s(8052),Ft=s(2309),un=s(6200),vn=s(3501),yn=s(9711),cn=s(5112),gn=s(6061),Cn=s(7235),fn=s(6532),Tn=s(8003),On=s(9909),Ln=s(2092).forEach,An=un("hidden"),Rn="Symbol",In=On.set,kn=On.getterFor(Rn),xn=Object.prototype,Yn=nt.Symbol,Un=Yn&&Yn.prototype,jn=nt.TypeError,Qn=nt.QObject,on=Ot.f,Hn=Dt.f,Fn=Mt.f,Vn=nn.f,Bn=ht([].push),qn=Ft("symbols"),Gn=Ft("op-symbols"),_n=Ft("wks"),$n=!Qn||!Qn.prototype||!Qn.prototype.findChild,bn=pt&&mt(function(){return Nt(Hn({},"a",{get:function(){return Hn(this,"a",{value:7}).a}})).a!=7})?function(Et,jt,Pt){var Vt=on(xn,jt);Vt&&delete xn[jt],Hn(Et,jt,Pt),Vt&&Et!==xn&&Hn(xn,jt,Vt)}:Hn,wn=function(Et,jt){var Pt=qn[Et]=Nt(Un);return In(Pt,{type:Rn,tag:Et,description:jt}),pt||(Pt.description=jt),Pt},Yt=function(Et,jt,Pt){Et===xn&&Yt(Gn,jt,Pt),ft(Et);var Vt=vt(jt);return ft(Pt),ot(qn,Vt)?(Pt.enumerable?(ot(Et,An)&&Et[An][Vt]&&(Et[An][Vt]=!1),Pt=Nt(Pt,{enumerable:At(0,!1)})):(ot(Et,An)||Hn(Et,An,At(1,{})),Et[An][Vt]=!0),bn(Et,Vt,Pt)):Hn(Et,Vt,Pt)},kt=function(Et,jt){ft(Et);var Pt=bt(jt),Vt=St(Pt).concat(Lt(Pt));return Ln(Vt,function(Zt){pt&&!at(st,Pt,Zt)||Yt(Et,Zt,Pt[Zt])}),Et},st=function(Et){var jt=vt(Et),Pt=at(Vn,this,jt);return!(this===xn&&ot(qn,jt)&&!ot(Gn,jt))&&(!(Pt||!ot(this,jt)||!ot(qn,jt)||ot(this,An)&&this[An][jt])||Pt)},Tt=function(Et,jt){var Pt=bt(Et),Vt=vt(jt);if(Pt!==xn||!ot(qn,Vt)||ot(Gn,Vt)){var Zt=on(Pt,Vt);return!Zt||!ot(qn,Vt)||ot(Pt,An)&&Pt[An][Vt]||(Zt.enumerable=!0),Zt}},Rt=function(Et){var jt=Fn(bt(Et)),Pt=[];return Ln(jt,function(Vt){ot(qn,Vt)||ot(vn,Vt)||Bn(Pt,Vt)}),Pt},Lt=function(Et){var jt=Et===xn,Pt=Fn(jt?Gn:bt(Et)),Vt=[];return Ln(Pt,function(Zt){!ot(qn,Zt)||jt&&!ot(xn,Zt)||Bn(Vt,qn[Zt])}),Vt};lt||(zt(Un=(Yn=function(){if(ut(Un,this))throw jn("Symbol is not a constructor");var Et=arguments.length&&arguments[0]!==void 0?yt(arguments[0]):void 0,jt=yn(Et),Pt=function(Vt){this===xn&&at(Pt,Gn,Vt),ot(this,An)&&ot(this[An],jt)&&(this[An][jt]=!1),bn(this,jt,At(1,Vt))};return pt&&$n&&bn(xn,jt,{configurable:!0,set:Pt}),wn(jt,Et)}).prototype,"toString",function(){return kn(this).tag}),zt(Yn,"withoutSetter",function(Et){return wn(yn(Et),Et)}),nn.f=st,Dt.f=Yt,Gt.f=kt,Ot.f=Tt,wt.f=Mt.f=Rt,Ht.f=Lt,gn.f=function(Et){return wn(cn(Et),Et)},pt&&(Hn(Un,"description",{configurable:!0,get:function(){return kn(this).description}}),dt||zt(xn,"propertyIsEnumerable",st,{unsafe:!0}))),et({global:!0,constructor:!0,wrap:!0,forced:!lt,sham:!lt},{Symbol:Yn}),Ln(St(_n),function(Et){Cn(Et)}),et({target:Rn,stat:!0,forced:!lt},{useSetter:function(){$n=!0},useSimple:function(){$n=!1}}),et({target:"Object",stat:!0,forced:!lt,sham:!pt},{create:function(Et,jt){return jt===void 0?Nt(Et):kt(Nt(Et),jt)},defineProperty:Yt,defineProperties:kt,getOwnPropertyDescriptor:Tt}),et({target:"Object",stat:!0,forced:!lt},{getOwnPropertyNames:Rt}),fn(),Tn(Yn,Rn),vn[An]=!0},1817:(rt,it,s)=>{var et=s(2109),nt=s(9781),at=s(7854),ht=s(1702),dt=s(2597),pt=s(614),lt=s(7976),mt=s(1340),ot=s(3070).f,ut=s(9920),ft=at.Symbol,bt=ft&&ft.prototype;if(nt&&pt(ft)&&(!("description"in bt)||ft().description!==void 0)){var vt={},yt=function(){var Ot=arguments.length<1||arguments[0]===void 0?void 0:mt(arguments[0]),Dt=lt(bt,this)?new ft(Ot):Ot===void 0?ft():ft(Ot);return Ot===""&&(vt[Dt]=!0),Dt};ut(yt,ft),yt.prototype=bt,bt.constructor=yt;var At=String(ft("test"))=="Symbol(test)",Nt=ht(bt.toString),St=ht(bt.valueOf),wt=/^Symbol\((.*)\)[^)]+$/,Mt=ht("".replace),Ht=ht("".slice);ot(bt,"description",{configurable:!0,get:function(){var Ot=St(this),Dt=Nt(Ot);if(dt(vt,Ot))return"";var Gt=At?Ht(Dt,7,-1):Mt(Dt,wt,"$1");return Gt===""?void 0:Gt}}),et({global:!0,constructor:!0,forced:!0},{Symbol:yt})}},763:(rt,it,s)=>{var et=s(2109),nt=s(5005),at=s(2597),ht=s(1340),dt=s(2309),pt=s(735),lt=dt("string-to-symbol-registry"),mt=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{for:function(ot){var ut=ht(ot);if(at(lt,ut))return lt[ut];var ft=nt("Symbol")(ut);return lt[ut]=ft,mt[ft]=ut,ft}})},2165:(rt,it,s)=>{s(7235)("iterator")},2526:(rt,it,s)=>{s(4032),s(763),s(6620),s(8862),s(9660)},6620:(rt,it,s)=>{var et=s(2109),nt=s(2597),at=s(2190),ht=s(6330),dt=s(2309),pt=s(735),lt=dt("symbol-to-string-registry");et({target:"Symbol",stat:!0,forced:!pt},{keyFor:function(mt){if(!at(mt))throw TypeError(ht(mt)+" is not a symbol");if(nt(lt,mt))return lt[mt]}})},3680:(rt,it,s)=>{var et=s(5005),nt=s(7235),at=s(8003);nt("toStringTag"),at(et("Symbol"),"Symbol")},2990:(rt,it,s)=>{var et=s(1702),nt=s(260),at=et(s(1048)),ht=nt.aTypedArray;(0,nt.exportTypedArrayMethod)("copyWithin",function(dt,pt){return at(ht(this),dt,pt,arguments.length>2?arguments[2]:void 0)})},8927:(rt,it,s)=>{var et=s(260),nt=s(2092).every,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("every",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},3105:(rt,it,s)=>{var et=s(260),nt=s(1285),at=s(4599),ht=s(648),dt=s(6916),pt=s(1702),lt=s(7293),mt=et.aTypedArray,ot=et.exportTypedArrayMethod,ut=pt("".slice);ot("fill",function(ft){var bt=arguments.length;mt(this);var vt=ut(ht(this),0,3)==="Big"?at(ft):+ft;return dt(nt,this,vt,bt>1?arguments[1]:void 0,bt>2?arguments[2]:void 0)},lt(function(){var ft=0;return new Int8Array(2).fill({valueOf:function(){return ft++}}),ft!==1}))},5035:(rt,it,s)=>{var et=s(260),nt=s(2092).filter,at=s(3074),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("filter",function(dt){var pt=nt(ht(this),dt,arguments.length>1?arguments[1]:void 0);return at(this,pt)})},7174:(rt,it,s)=>{var et=s(260),nt=s(2092).findIndex,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("findIndex",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},4345:(rt,it,s)=>{var et=s(260),nt=s(2092).find,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("find",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},2846:(rt,it,s)=>{var et=s(260),nt=s(2092).forEach,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("forEach",function(ht){nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},4731:(rt,it,s)=>{var et=s(260),nt=s(1318).includes,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("includes",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},7209:(rt,it,s)=>{var et=s(260),nt=s(1318).indexOf,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("indexOf",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},6319:(rt,it,s)=>{var et=s(7854),nt=s(7293),at=s(1702),ht=s(260),dt=s(6992),pt=s(5112)("iterator"),lt=et.Uint8Array,mt=at(dt.values),ot=at(dt.keys),ut=at(dt.entries),ft=ht.aTypedArray,bt=ht.exportTypedArrayMethod,vt=lt&&lt.prototype,yt=!nt(function(){vt[pt].call([1])}),At=!!vt&&vt.values&&vt[pt]===vt.values&&vt.values.name==="values",Nt=function(){return mt(ft(this))};bt("entries",function(){return ut(ft(this))},yt),bt("keys",function(){return ot(ft(this))},yt),bt("values",Nt,yt||!At,{name:"values"}),bt(pt,Nt,yt||!At,{name:"values"})},8867:(rt,it,s)=>{var et=s(260),nt=s(1702),at=et.aTypedArray,ht=et.exportTypedArrayMethod,dt=nt([].join);ht("join",function(pt){return dt(at(this),pt)})},7789:(rt,it,s)=>{var et=s(260),nt=s(2104),at=s(6583),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("lastIndexOf",function(dt){var pt=arguments.length;return nt(at,ht(this),pt>1?[dt,arguments[1]]:[dt])})},3739:(rt,it,s)=>{var et=s(260),nt=s(2092).map,at=s(6304),ht=et.aTypedArray;(0,et.exportTypedArrayMethod)("map",function(dt){return nt(ht(this),dt,arguments.length>1?arguments[1]:void 0,function(pt,lt){return new(at(pt))(lt)})})},4483:(rt,it,s)=>{var et=s(260),nt=s(3671).right,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduceRight",function(ht){var dt=arguments.length;return nt(at(this),ht,dt,dt>1?arguments[1]:void 0)})},9368:(rt,it,s)=>{var et=s(260),nt=s(3671).left,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("reduce",function(ht){var dt=arguments.length;return nt(at(this),ht,dt,dt>1?arguments[1]:void 0)})},2056:(rt,it,s)=>{var et=s(260),nt=et.aTypedArray,at=et.exportTypedArrayMethod,ht=Math.floor;at("reverse",function(){for(var dt,pt=this,lt=nt(pt).length,mt=ht(lt/2),ot=0;ot<mt;)dt=pt[ot],pt[ot++]=pt[--lt],pt[lt]=dt;return pt})},3462:(rt,it,s)=>{var et=s(7854),nt=s(6916),at=s(260),ht=s(6244),dt=s(4590),pt=s(7908),lt=s(7293),mt=et.RangeError,ot=et.Int8Array,ut=ot&&ot.prototype,ft=ut&&ut.set,bt=at.aTypedArray,vt=at.exportTypedArrayMethod,yt=!lt(function(){var Nt=new Uint8ClampedArray(2);return nt(ft,Nt,{length:1,0:3},1),Nt[1]!==3}),At=yt&&at.NATIVE_ARRAY_BUFFER_VIEWS&&lt(function(){var Nt=new ot(2);return Nt.set(1),Nt.set("2",1),Nt[0]!==0||Nt[1]!==2});vt("set",function(Nt){bt(this);var St=dt(arguments.length>1?arguments[1]:void 0,1),wt=pt(Nt);if(yt)return nt(ft,this,wt,St);var Mt=this.length,Ht=ht(wt),Ot=0;if(Ht+St>Mt)throw mt("Wrong length");for(;Ot<Ht;)this[St+Ot]=wt[Ot++]},!yt||At)},678:(rt,it,s)=>{var et=s(260),nt=s(6304),at=s(7293),ht=s(206),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("slice",function(pt,lt){for(var mt=ht(dt(this),pt,lt),ot=nt(this),ut=0,ft=mt.length,bt=new ot(ft);ft>ut;)bt[ut]=mt[ut++];return bt},at(function(){new Int8Array(1).slice()}))},7462:(rt,it,s)=>{var et=s(260),nt=s(2092).some,at=et.aTypedArray;(0,et.exportTypedArrayMethod)("some",function(ht){return nt(at(this),ht,arguments.length>1?arguments[1]:void 0)})},3824:(rt,it,s)=>{var et=s(7854),nt=s(1702),at=s(7293),ht=s(9662),dt=s(4362),pt=s(260),lt=s(8886),mt=s(256),ot=s(7392),ut=s(8008),ft=pt.aTypedArray,bt=pt.exportTypedArrayMethod,vt=et.Uint16Array,yt=vt&&nt(vt.prototype.sort),At=!(!yt||at(function(){yt(new vt(2),null)})&&at(function(){yt(new vt(2),{})})),Nt=!!yt&&!at(function(){if(ot)return ot<74;if(lt)return lt<67;if(mt)return!0;if(ut)return ut<602;var St,wt,Mt=new vt(516),Ht=Array(516);for(St=0;St<516;St++)wt=St%4,Mt[St]=515-St,Ht[St]=St-2*wt+3;for(yt(Mt,function(Ot,Dt){return(Ot/4|0)-(Dt/4|0)}),St=0;St<516;St++)if(Mt[St]!==Ht[St])return!0});bt("sort",function(St){return St!==void 0&&ht(St),Nt?yt(this,St):dt(ft(this),function(wt){return function(Mt,Ht){return wt!==void 0?+wt(Mt,Ht)||0:Ht!=Ht?-1:Mt!=Mt?1:Mt===0&&Ht===0?1/Mt>0&&1/Ht<0?1:-1:Mt>Ht}}(St))},!Nt||At)},5021:(rt,it,s)=>{var et=s(260),nt=s(7466),at=s(1400),ht=s(6304),dt=et.aTypedArray;(0,et.exportTypedArrayMethod)("subarray",function(pt,lt){var mt=dt(this),ot=mt.length,ut=at(pt,ot);return new(ht(mt))(mt.buffer,mt.byteOffset+ut*mt.BYTES_PER_ELEMENT,nt((lt===void 0?ot:at(lt,ot))-ut))})},2974:(rt,it,s)=>{var et=s(7854),nt=s(2104),at=s(260),ht=s(7293),dt=s(206),pt=et.Int8Array,lt=at.aTypedArray,mt=at.exportTypedArrayMethod,ot=[].toLocaleString,ut=!!pt&&ht(function(){ot.call(new pt(1))});mt("toLocaleString",function(){return nt(ot,ut?dt(lt(this)):lt(this),dt(arguments))},ht(function(){return[1,2].toLocaleString()!=new pt([1,2]).toLocaleString()})||!ht(function(){pt.prototype.toLocaleString.call([1,2])}))},5016:(rt,it,s)=>{var et=s(260).exportTypedArrayMethod,nt=s(7293),at=s(7854),ht=s(1702),dt=at.Uint8Array,pt=dt&&dt.prototype||{},lt=[].toString,mt=ht([].join);nt(function(){lt.call({})})&&(lt=function(){return mt(this)});var ot=pt.toString!=lt;et("toString",lt,ot)},2472:(rt,it,s)=>{s(9843)("Uint8",function(et){return function(nt,at,ht){return et(this,nt,at,ht)}})},9743:(rt,it,s)=>{s(9843)("Uint8",function(et){return function(nt,at,ht){return et(this,nt,at,ht)}},!0)},1202:(rt,it,s)=>{var et,nt=s(7854),at=s(1702),ht=s(9190),dt=s(2423),pt=s(7710),lt=s(9320),mt=s(111),ot=s(2050),ut=s(9909).enforce,ft=s(8536),bt=!nt.ActiveXObject&&"ActiveXObject"in nt,vt=function(Ht){return function(){return Ht(this,arguments.length?arguments[0]:void 0)}},yt=pt("WeakMap",vt,lt);if(ft&&bt){et=lt.getConstructor(vt,"WeakMap",!0),dt.enable();var At=yt.prototype,Nt=at(At.delete),St=at(At.has),wt=at(At.get),Mt=at(At.set);ht(At,{delete:function(Ht){if(mt(Ht)&&!ot(Ht)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),Nt(this,Ht)||Ot.frozen.delete(Ht)}return Nt(this,Ht)},has:function(Ht){if(mt(Ht)&&!ot(Ht)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),St(this,Ht)||Ot.frozen.has(Ht)}return St(this,Ht)},get:function(Ht){if(mt(Ht)&&!ot(Ht)){var Ot=ut(this);return Ot.frozen||(Ot.frozen=new et),St(this,Ht)?wt(this,Ht):Ot.frozen.get(Ht)}return wt(this,Ht)},set:function(Ht,Ot){if(mt(Ht)&&!ot(Ht)){var Dt=ut(this);Dt.frozen||(Dt.frozen=new et),St(this,Ht)?Mt(this,Ht,Ot):Dt.frozen.set(Ht,Ot)}else Mt(this,Ht,Ot);return this}})}},4129:(rt,it,s)=>{s(1202)},4747:(rt,it,s)=>{var et=s(7854),nt=s(8324),at=s(8509),ht=s(8533),dt=s(8880),pt=function(mt){if(mt&&mt.forEach!==ht)try{dt(mt,"forEach",ht)}catch{mt.forEach=ht}};for(var lt in nt)nt[lt]&&pt(et[lt]&&et[lt].prototype);pt(at)},3948:(rt,it,s)=>{var et=s(7854),nt=s(8324),at=s(8509),ht=s(6992),dt=s(8880),pt=s(5112),lt=pt("iterator"),mt=pt("toStringTag"),ot=ht.values,ut=function(bt,vt){if(bt){if(bt[lt]!==ot)try{dt(bt,lt,ot)}catch{bt[lt]=ot}if(bt[mt]||dt(bt,mt,vt),nt[vt]){for(var yt in ht)if(bt[yt]!==ht[yt])try{dt(bt,yt,ht[yt])}catch{bt[yt]=ht[yt]}}}};for(var ft in nt)ut(et[ft]&&et[ft].prototype,ft);ut(at,"DOMTokenList")},6815:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(7152).setInterval;et({global:!0,bind:!0,forced:nt.setInterval!==at},{setInterval:at})},8417:(rt,it,s)=>{var et=s(2109),nt=s(7854),at=s(7152).setTimeout;et({global:!0,bind:!0,forced:nt.setTimeout!==at},{setTimeout:at})},2564:(rt,it,s)=>{s(6815),s(8417)},5556:(rt,it,s)=>{s(6992);var et=s(2109),nt=s(7854),at=s(6916),ht=s(1702),dt=s(9781),pt=s(590),lt=s(8052),mt=s(9190),ot=s(8003),ut=s(4994),ft=s(9909),bt=s(5787),vt=s(614),yt=s(2597),At=s(9974),Nt=s(648),St=s(9670),wt=s(111),Mt=s(1340),Ht=s(30),Ot=s(9114),Dt=s(8554),Gt=s(1246),nn=s(8053),zt=s(5112),Ft=s(4362),un=zt("iterator"),vn="URLSearchParams",yn="URLSearchParamsIterator",cn=ft.set,gn=ft.getterFor(vn),Cn=ft.getterFor(yn),fn=Object.getOwnPropertyDescriptor,Tn=function(Jt){if(!dt)return nt[Jt];var ln=fn(nt,Jt);return ln&&ln.value},On=Tn("fetch"),Ln=Tn("Request"),An=Tn("Headers"),Rn=Ln&&Ln.prototype,In=An&&An.prototype,kn=nt.RegExp,xn=nt.TypeError,Yn=nt.decodeURIComponent,Un=nt.encodeURIComponent,jn=ht("".charAt),Qn=ht([].join),on=ht([].push),Hn=ht("".replace),Fn=ht([].shift),Vn=ht([].splice),Bn=ht("".split),qn=ht("".slice),Gn=/\+/g,_n=Array(4),$n=function(Jt){return _n[Jt-1]||(_n[Jt-1]=kn("((?:%[\\da-f]{2}){"+Jt+"})","gi"))},bn=function(Jt){try{return Yn(Jt)}catch{return Jt}},wn=function(Jt){var ln=Hn(Jt,Gn," "),mn=4;try{return Yn(ln)}catch{for(;mn;)ln=Hn(ln,$n(mn--),bn);return ln}},Yt=/[!'()~]|%20/g,kt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},st=function(Jt){return kt[Jt]},Tt=function(Jt){return Hn(Un(Jt),Yt,st)},Rt=ut(function(Jt,ln){cn(this,{type:yn,iterator:Dt(gn(Jt).entries),kind:ln})},"Iterator",function(){var Jt=Cn(this),ln=Jt.kind,mn=Jt.iterator.next(),an=mn.value;return mn.done||(mn.value=ln==="keys"?an.key:ln==="values"?an.value:[an.key,an.value]),mn},!0),Lt=function(Jt){this.entries=[],this.url=null,Jt!==void 0&&(wt(Jt)?this.parseObject(Jt):this.parseQuery(typeof Jt=="string"?jn(Jt,0)==="?"?qn(Jt,1):Jt:Mt(Jt)))};Lt.prototype={type:vn,bindURL:function(Jt){this.url=Jt,this.update()},parseObject:function(Jt){var ln,mn,an,hn,En,Mn,Pn,Wn=Gt(Jt);if(Wn)for(mn=(ln=Dt(Jt,Wn)).next;!(an=at(mn,ln)).done;){if(En=(hn=Dt(St(an.value))).next,(Mn=at(En,hn)).done||(Pn=at(En,hn)).done||!at(En,hn).done)throw xn("Expected sequence with length 2");on(this.entries,{key:Mt(Mn.value),value:Mt(Pn.value)})}else for(var Nn in Jt)yt(Jt,Nn)&&on(this.entries,{key:Nn,value:Mt(Jt[Nn])})},parseQuery:function(Jt){if(Jt)for(var ln,mn,an=Bn(Jt,"&"),hn=0;hn<an.length;)(ln=an[hn++]).length&&(mn=Bn(ln,"="),on(this.entries,{key:wn(Fn(mn)),value:wn(Qn(mn,"="))}))},serialize:function(){for(var Jt,ln=this.entries,mn=[],an=0;an<ln.length;)Jt=ln[an++],on(mn,Tt(Jt.key)+"="+Tt(Jt.value));return Qn(mn,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Et=function(){bt(this,jt);var Jt=arguments.length>0?arguments[0]:void 0;cn(this,new Lt(Jt))},jt=Et.prototype;if(mt(jt,{append:function(Jt,ln){nn(arguments.length,2);var mn=gn(this);on(mn.entries,{key:Mt(Jt),value:Mt(ln)}),mn.updateURL()},delete:function(Jt){nn(arguments.length,1);for(var ln=gn(this),mn=ln.entries,an=Mt(Jt),hn=0;hn<mn.length;)mn[hn].key===an?Vn(mn,hn,1):hn++;ln.updateURL()},get:function(Jt){nn(arguments.length,1);for(var ln=gn(this).entries,mn=Mt(Jt),an=0;an<ln.length;an++)if(ln[an].key===mn)return ln[an].value;return null},getAll:function(Jt){nn(arguments.length,1);for(var ln=gn(this).entries,mn=Mt(Jt),an=[],hn=0;hn<ln.length;hn++)ln[hn].key===mn&&on(an,ln[hn].value);return an},has:function(Jt){nn(arguments.length,1);for(var ln=gn(this).entries,mn=Mt(Jt),an=0;an<ln.length;)if(ln[an++].key===mn)return!0;return!1},set:function(Jt,ln){nn(arguments.length,1);for(var mn,an=gn(this),hn=an.entries,En=!1,Mn=Mt(Jt),Pn=Mt(ln),Wn=0;Wn<hn.length;Wn++)(mn=hn[Wn]).key===Mn&&(En?Vn(hn,Wn--,1):(En=!0,mn.value=Pn));En||on(hn,{key:Mn,value:Pn}),an.updateURL()},sort:function(){var Jt=gn(this);Ft(Jt.entries,function(ln,mn){return ln.key>mn.key?1:-1}),Jt.updateURL()},forEach:function(Jt){for(var ln,mn=gn(this).entries,an=At(Jt,arguments.length>1?arguments[1]:void 0),hn=0;hn<mn.length;)an((ln=mn[hn++]).value,ln.key,this)},keys:function(){return new Rt(this,"keys")},values:function(){return new Rt(this,"values")},entries:function(){return new Rt(this,"entries")}},{enumerable:!0}),lt(jt,un,jt.entries,{name:"entries"}),lt(jt,"toString",function(){return gn(this).serialize()},{enumerable:!0}),ot(Et,vn),et({global:!0,constructor:!0,forced:!pt},{URLSearchParams:Et}),!pt&&vt(An)){var Pt=ht(In.has),Vt=ht(In.set),Zt=function(Jt){if(wt(Jt)){var ln,mn=Jt.body;if(Nt(mn)===vn)return ln=Jt.headers?new An(Jt.headers):new An,Pt(ln,"content-type")||Vt(ln,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Ht(Jt,{body:Ot(0,Mt(mn)),headers:Ot(0,ln)})}return Jt};if(vt(On)&&et({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(Jt){return On(Jt,arguments.length>1?Zt(arguments[1]):{})}}),vt(Ln)){var rn=function(Jt){return bt(this,Rn),new Ln(Jt,arguments.length>1?Zt(arguments[1]):{})};Rn.constructor=rn,rn.prototype=Rn,et({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:rn})}}rt.exports={URLSearchParams:Et,getState:gn}},1637:(rt,it,s)=>{s(5556)},8789:(rt,it,s)=>{s(8783);var et,nt=s(2109),at=s(9781),ht=s(590),dt=s(7854),pt=s(9974),lt=s(1702),mt=s(8052),ot=s(7045),ut=s(5787),ft=s(2597),bt=s(1574),vt=s(8457),yt=s(1589),At=s(8710).codeAt,Nt=s(3197),St=s(1340),wt=s(8003),Mt=s(8053),Ht=s(5556),Ot=s(9909),Dt=Ot.set,Gt=Ot.getterFor("URL"),nn=Ht.URLSearchParams,zt=Ht.getState,Ft=dt.URL,un=dt.TypeError,vn=dt.parseInt,yn=Math.floor,cn=Math.pow,gn=lt("".charAt),Cn=lt(/./.exec),fn=lt([].join),Tn=lt(1 .toString),On=lt([].pop),Ln=lt([].push),An=lt("".replace),Rn=lt([].shift),In=lt("".split),kn=lt("".slice),xn=lt("".toLowerCase),Yn=lt([].unshift),Un="Invalid scheme",jn="Invalid host",Qn="Invalid port",on=/[a-z]/i,Hn=/[\d+-.a-z]/i,Fn=/\d/,Vn=/^0x/i,Bn=/^[0-7]+$/,qn=/^\d+$/,Gn=/^[\da-f]+$/i,_n=/[\0\t\n\r #%/:<>?@[\\\]^|]/,$n=/[\0\t\n\r #/:<>?@[\\\]^|]/,bn=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,wn=/[\t\n\r]/g,Yt=function(Zn){var lr,er,Tr,tr;if(typeof Zn=="number"){for(lr=[],er=0;er<4;er++)Yn(lr,Zn%256),Zn=yn(Zn/256);return fn(lr,".")}if(typeof Zn=="object"){for(lr="",Tr=function(Br){for(var Nr=null,Ar=1,Xn=null,mr=0,Lr=0;Lr<8;Lr++)Br[Lr]!==0?(mr>Ar&&(Nr=Xn,Ar=mr),Xn=null,mr=0):(Xn===null&&(Xn=Lr),++mr);return mr>Ar&&(Nr=Xn,Ar=mr),Nr}(Zn),er=0;er<8;er++)tr&&Zn[er]===0||(tr&&(tr=!1),Tr===er?(lr+=er?":":"::",tr=!0):(lr+=Tn(Zn[er],16),er<7&&(lr+=":")));return"["+lr+"]"}return Zn},kt={},st=bt({},kt,{" ":1,'"':1,"<":1,">":1,"`":1}),Tt=bt({},st,{"#":1,"?":1,"{":1,"}":1}),Rt=bt({},Tt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Lt=function(Zn,lr){var er=At(Zn,0);return er>32&&er<127&&!ft(lr,Zn)?Zn:encodeURIComponent(Zn)},Et={ftp:21,file:null,http:80,https:443,ws:80,wss:443},jt=function(Zn,lr){var er;return Zn.length==2&&Cn(on,gn(Zn,0))&&((er=gn(Zn,1))==":"||!lr&&er=="|")},Pt=function(Zn){var lr;return Zn.length>1&&jt(kn(Zn,0,2))&&(Zn.length==2||(lr=gn(Zn,2))==="/"||lr==="\\"||lr==="?"||lr==="#")},Vt=function(Zn){return Zn==="."||xn(Zn)==="%2e"},Zt={},rn={},Jt={},ln={},mn={},an={},hn={},En={},Mn={},Pn={},Wn={},Nn={},Jn={},rr={},hr={},cr={},dr={},Cr={},Sr={},_r={},br={},Ir=function(Zn,lr,er){var Tr,tr,Br,Nr=St(Zn);if(lr){if(tr=this.parse(Nr))throw un(tr);this.searchParams=null}else{if(er!==void 0&&(Tr=new Ir(er,!0)),tr=this.parse(Nr,null,Tr))throw un(tr);(Br=zt(new nn)).bindURL(this),this.searchParams=Br}};Ir.prototype={type:"URL",parse:function(Zn,lr,er){var Tr,tr,Br,Nr,Ar,Xn=this,mr=lr||Zt,Lr=0,wr="",qr=!1,Fr=!1,Co=!1;for(Zn=St(Zn),lr||(Xn.scheme="",Xn.username="",Xn.password="",Xn.host=null,Xn.port=null,Xn.path=[],Xn.query=null,Xn.fragment=null,Xn.cannotBeABaseURL=!1,Zn=An(Zn,bn,"")),Zn=An(Zn,wn,""),Tr=vt(Zn);Lr<=Tr.length;){switch(tr=Tr[Lr],mr){case Zt:if(!tr||!Cn(on,tr)){if(lr)return Un;mr=Jt;continue}wr+=xn(tr),mr=rn;break;case rn:if(tr&&(Cn(Hn,tr)||tr=="+"||tr=="-"||tr=="."))wr+=xn(tr);else{if(tr!=":"){if(lr)return Un;wr="",mr=Jt,Lr=0;continue}if(lr&&(Xn.isSpecial()!=ft(Et,wr)||wr=="file"&&(Xn.includesCredentials()||Xn.port!==null)||Xn.scheme=="file"&&!Xn.host))return;if(Xn.scheme=wr,lr)return void(Xn.isSpecial()&&Et[Xn.scheme]==Xn.port&&(Xn.port=null));wr="",Xn.scheme=="file"?mr=rr:Xn.isSpecial()&&er&&er.scheme==Xn.scheme?mr=ln:Xn.isSpecial()?mr=En:Tr[Lr+1]=="/"?(mr=mn,Lr++):(Xn.cannotBeABaseURL=!0,Ln(Xn.path,""),mr=Sr)}break;case Jt:if(!er||er.cannotBeABaseURL&&tr!="#")return Un;if(er.cannotBeABaseURL&&tr=="#"){Xn.scheme=er.scheme,Xn.path=yt(er.path),Xn.query=er.query,Xn.fragment="",Xn.cannotBeABaseURL=!0,mr=br;break}mr=er.scheme=="file"?rr:an;continue;case ln:if(tr!="/"||Tr[Lr+1]!="/"){mr=an;continue}mr=Mn,Lr++;break;case mn:if(tr=="/"){mr=Pn;break}mr=Cr;continue;case an:if(Xn.scheme=er.scheme,tr==et)Xn.username=er.username,Xn.password=er.password,Xn.host=er.host,Xn.port=er.port,Xn.path=yt(er.path),Xn.query=er.query;else if(tr=="/"||tr=="\\"&&Xn.isSpecial())mr=hn;else if(tr=="?")Xn.username=er.username,Xn.password=er.password,Xn.host=er.host,Xn.port=er.port,Xn.path=yt(er.path),Xn.query="",mr=_r;else{if(tr!="#"){Xn.username=er.username,Xn.password=er.password,Xn.host=er.host,Xn.port=er.port,Xn.path=yt(er.path),Xn.path.length--,mr=Cr;continue}Xn.username=er.username,Xn.password=er.password,Xn.host=er.host,Xn.port=er.port,Xn.path=yt(er.path),Xn.query=er.query,Xn.fragment="",mr=br}break;case hn:if(!Xn.isSpecial()||tr!="/"&&tr!="\\"){if(tr!="/"){Xn.username=er.username,Xn.password=er.password,Xn.host=er.host,Xn.port=er.port,mr=Cr;continue}mr=Pn}else mr=Mn;break;case En:if(mr=Mn,tr!="/"||gn(wr,Lr+1)!="/")continue;Lr++;break;case Mn:if(tr!="/"&&tr!="\\"){mr=Pn;continue}break;case Pn:if(tr=="@"){qr&&(wr="%40"+wr),qr=!0,Br=vt(wr);for(var eo=0;eo<Br.length;eo++){var ga=Br[eo];if(ga!=":"||Co){var gs=Lt(ga,Rt);Co?Xn.password+=gs:Xn.username+=gs}else Co=!0}wr=""}else if(tr==et||tr=="/"||tr=="?"||tr=="#"||tr=="\\"&&Xn.isSpecial()){if(qr&&wr=="")return"Invalid authority";Lr-=vt(wr).length+1,wr="",mr=Wn}else wr+=tr;break;case Wn:case Nn:if(lr&&Xn.scheme=="file"){mr=cr;continue}if(tr!=":"||Fr){if(tr==et||tr=="/"||tr=="?"||tr=="#"||tr=="\\"&&Xn.isSpecial()){if(Xn.isSpecial()&&wr=="")return jn;if(lr&&wr==""&&(Xn.includesCredentials()||Xn.port!==null))return;if(Nr=Xn.parseHost(wr))return Nr;if(wr="",mr=dr,lr)return;continue}tr=="["?Fr=!0:tr=="]"&&(Fr=!1),wr+=tr}else{if(wr=="")return jn;if(Nr=Xn.parseHost(wr))return Nr;if(wr="",mr=Jn,lr==Nn)return}break;case Jn:if(!Cn(Fn,tr)){if(tr==et||tr=="/"||tr=="?"||tr=="#"||tr=="\\"&&Xn.isSpecial()||lr){if(wr!=""){var Qo=vn(wr,10);if(Qo>65535)return Qn;Xn.port=Xn.isSpecial()&&Qo===Et[Xn.scheme]?null:Qo,wr=""}if(lr)return;mr=dr;continue}return Qn}wr+=tr;break;case rr:if(Xn.scheme="file",tr=="/"||tr=="\\")mr=hr;else{if(!er||er.scheme!="file"){mr=Cr;continue}if(tr==et)Xn.host=er.host,Xn.path=yt(er.path),Xn.query=er.query;else if(tr=="?")Xn.host=er.host,Xn.path=yt(er.path),Xn.query="",mr=_r;else{if(tr!="#"){Pt(fn(yt(Tr,Lr),""))||(Xn.host=er.host,Xn.path=yt(er.path),Xn.shortenPath()),mr=Cr;continue}Xn.host=er.host,Xn.path=yt(er.path),Xn.query=er.query,Xn.fragment="",mr=br}}break;case hr:if(tr=="/"||tr=="\\"){mr=cr;break}er&&er.scheme=="file"&&!Pt(fn(yt(Tr,Lr),""))&&(jt(er.path[0],!0)?Ln(Xn.path,er.path[0]):Xn.host=er.host),mr=Cr;continue;case cr:if(tr==et||tr=="/"||tr=="\\"||tr=="?"||tr=="#"){if(!lr&&jt(wr))mr=Cr;else if(wr==""){if(Xn.host="",lr)return;mr=dr}else{if(Nr=Xn.parseHost(wr))return Nr;if(Xn.host=="localhost"&&(Xn.host=""),lr)return;wr="",mr=dr}continue}wr+=tr;break;case dr:if(Xn.isSpecial()){if(mr=Cr,tr!="/"&&tr!="\\")continue}else if(lr||tr!="?")if(lr||tr!="#"){if(tr!=et&&(mr=Cr,tr!="/"))continue}else Xn.fragment="",mr=br;else Xn.query="",mr=_r;break;case Cr:if(tr==et||tr=="/"||tr=="\\"&&Xn.isSpecial()||!lr&&(tr=="?"||tr=="#")){if((Ar=xn(Ar=wr))===".."||Ar==="%2e."||Ar===".%2e"||Ar==="%2e%2e"?(Xn.shortenPath(),tr=="/"||tr=="\\"&&Xn.isSpecial()||Ln(Xn.path,"")):Vt(wr)?tr=="/"||tr=="\\"&&Xn.isSpecial()||Ln(Xn.path,""):(Xn.scheme=="file"&&!Xn.path.length&&jt(wr)&&(Xn.host&&(Xn.host=""),wr=gn(wr,0)+":"),Ln(Xn.path,wr)),wr="",Xn.scheme=="file"&&(tr==et||tr=="?"||tr=="#"))for(;Xn.path.length>1&&Xn.path[0]==="";)Rn(Xn.path);tr=="?"?(Xn.query="",mr=_r):tr=="#"&&(Xn.fragment="",mr=br)}else wr+=Lt(tr,Tt);break;case Sr:tr=="?"?(Xn.query="",mr=_r):tr=="#"?(Xn.fragment="",mr=br):tr!=et&&(Xn.path[0]+=Lt(tr,kt));break;case _r:lr||tr!="#"?tr!=et&&(tr=="'"&&Xn.isSpecial()?Xn.query+="%27":Xn.query+=tr=="#"?"%23":Lt(tr,kt)):(Xn.fragment="",mr=br);break;case br:tr!=et&&(Xn.fragment+=Lt(tr,st))}Lr++}},parseHost:function(Zn){var lr,er,Tr;if(gn(Zn,0)=="["){if(gn(Zn,Zn.length-1)!="]"||(lr=function(tr){var Br,Nr,Ar,Xn,mr,Lr,wr,qr=[0,0,0,0,0,0,0,0],Fr=0,Co=null,eo=0,ga=function(){return gn(tr,eo)};if(ga()==":"){if(gn(tr,1)!=":")return;eo+=2,Co=++Fr}for(;ga();){if(Fr==8)return;if(ga()!=":"){for(Br=Nr=0;Nr<4&&Cn(Gn,ga());)Br=16*Br+vn(ga(),16),eo++,Nr++;if(ga()=="."){if(Nr==0||(eo-=Nr,Fr>6))return;for(Ar=0;ga();){if(Xn=null,Ar>0){if(!(ga()=="."&&Ar<4))return;eo++}if(!Cn(Fn,ga()))return;for(;Cn(Fn,ga());){if(mr=vn(ga(),10),Xn===null)Xn=mr;else{if(Xn==0)return;Xn=10*Xn+mr}if(Xn>255)return;eo++}qr[Fr]=256*qr[Fr]+Xn,++Ar!=2&&Ar!=4||Fr++}if(Ar!=4)return;break}if(ga()==":"){if(eo++,!ga())return}else if(ga())return;qr[Fr++]=Br}else{if(Co!==null)return;eo++,Co=++Fr}}if(Co!==null)for(Lr=Fr-Co,Fr=7;Fr!=0&&Lr>0;)wr=qr[Fr],qr[Fr--]=qr[Co+Lr-1],qr[Co+--Lr]=wr;else if(Fr!=8)return;return qr}(kn(Zn,1,-1)),!lr))return jn;this.host=lr}else if(this.isSpecial()){if(Zn=Nt(Zn),Cn(_n,Zn)||(lr=function(tr){var Br,Nr,Ar,Xn,mr,Lr,wr,qr=In(tr,".");if(qr.length&&qr[qr.length-1]==""&&qr.length--,(Br=qr.length)>4)return tr;for(Nr=[],Ar=0;Ar<Br;Ar++){if((Xn=qr[Ar])=="")return tr;if(mr=10,Xn.length>1&&gn(Xn,0)=="0"&&(mr=Cn(Vn,Xn)?16:8,Xn=kn(Xn,mr==8?1:2)),Xn==="")Lr=0;else{if(!Cn(mr==10?qn:mr==8?Bn:Gn,Xn))return tr;Lr=vn(Xn,mr)}Ln(Nr,Lr)}for(Ar=0;Ar<Br;Ar++)if(Lr=Nr[Ar],Ar==Br-1){if(Lr>=cn(256,5-Br))return null}else if(Lr>255)return null;for(wr=On(Nr),Ar=0;Ar<Nr.length;Ar++)wr+=Nr[Ar]*cn(256,3-Ar);return wr}(Zn),lr===null))return jn;this.host=lr}else{if(Cn($n,Zn))return jn;for(lr="",er=vt(Zn),Tr=0;Tr<er.length;Tr++)lr+=Lt(er[Tr],kt);this.host=lr}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return ft(Et,this.scheme)},shortenPath:function(){var Zn=this.path,lr=Zn.length;!lr||this.scheme=="file"&&lr==1&&jt(Zn[0],!0)||Zn.length--},serialize:function(){var Zn=this,lr=Zn.scheme,er=Zn.username,Tr=Zn.password,tr=Zn.host,Br=Zn.port,Nr=Zn.path,Ar=Zn.query,Xn=Zn.fragment,mr=lr+":";return tr!==null?(mr+="//",Zn.includesCredentials()&&(mr+=er+(Tr?":"+Tr:"")+"@"),mr+=Yt(tr),Br!==null&&(mr+=":"+Br)):lr=="file"&&(mr+="//"),mr+=Zn.cannotBeABaseURL?Nr[0]:Nr.length?"/"+fn(Nr,"/"):"",Ar!==null&&(mr+="?"+Ar),Xn!==null&&(mr+="#"+Xn),mr},setHref:function(Zn){var lr=this.parse(Zn);if(lr)throw un(lr);this.searchParams.update()},getOrigin:function(){var Zn=this.scheme,lr=this.port;if(Zn=="blob")try{return new kr(Zn.path[0]).origin}catch{return"null"}return Zn!="file"&&this.isSpecial()?Zn+"://"+Yt(this.host)+(lr!==null?":"+lr:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(Zn){this.parse(St(Zn)+":",Zt)},getUsername:function(){return this.username},setUsername:function(Zn){var lr=vt(St(Zn));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var er=0;er<lr.length;er++)this.username+=Lt(lr[er],Rt)}},getPassword:function(){return this.password},setPassword:function(Zn){var lr=vt(St(Zn));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var er=0;er<lr.length;er++)this.password+=Lt(lr[er],Rt)}},getHost:function(){var Zn=this.host,lr=this.port;return Zn===null?"":lr===null?Yt(Zn):Yt(Zn)+":"+lr},setHost:function(Zn){this.cannotBeABaseURL||this.parse(Zn,Wn)},getHostname:function(){var Zn=this.host;return Zn===null?"":Yt(Zn)},setHostname:function(Zn){this.cannotBeABaseURL||this.parse(Zn,Nn)},getPort:function(){var Zn=this.port;return Zn===null?"":St(Zn)},setPort:function(Zn){this.cannotHaveUsernamePasswordPort()||((Zn=St(Zn))==""?this.port=null:this.parse(Zn,Jn))},getPathname:function(){var Zn=this.path;return this.cannotBeABaseURL?Zn[0]:Zn.length?"/"+fn(Zn,"/"):""},setPathname:function(Zn){this.cannotBeABaseURL||(this.path=[],this.parse(Zn,dr))},getSearch:function(){var Zn=this.query;return Zn?"?"+Zn:""},setSearch:function(Zn){(Zn=St(Zn))==""?this.query=null:(gn(Zn,0)=="?"&&(Zn=kn(Zn,1)),this.query="",this.parse(Zn,_r)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var Zn=this.fragment;return Zn?"#"+Zn:""},setHash:function(Zn){(Zn=St(Zn))!=""?(gn(Zn,0)=="#"&&(Zn=kn(Zn,1)),this.fragment="",this.parse(Zn,br)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var kr=function(Zn){var lr=ut(this,Mr),er=Mt(arguments.length,1)>1?arguments[1]:void 0,Tr=Dt(lr,new Ir(Zn,!1,er));at||(lr.href=Tr.serialize(),lr.origin=Tr.getOrigin(),lr.protocol=Tr.getProtocol(),lr.username=Tr.getUsername(),lr.password=Tr.getPassword(),lr.host=Tr.getHost(),lr.hostname=Tr.getHostname(),lr.port=Tr.getPort(),lr.pathname=Tr.getPathname(),lr.search=Tr.getSearch(),lr.searchParams=Tr.getSearchParams(),lr.hash=Tr.getHash())},Mr=kr.prototype,jr=function(Zn,lr){return{get:function(){return Gt(this)[Zn]()},set:lr&&function(er){return Gt(this)[lr](er)},configurable:!0,enumerable:!0}};if(at&&(ot(Mr,"href",jr("serialize","setHref")),ot(Mr,"origin",jr("getOrigin")),ot(Mr,"protocol",jr("getProtocol","setProtocol")),ot(Mr,"username",jr("getUsername","setUsername")),ot(Mr,"password",jr("getPassword","setPassword")),ot(Mr,"host",jr("getHost","setHost")),ot(Mr,"hostname",jr("getHostname","setHostname")),ot(Mr,"port",jr("getPort","setPort")),ot(Mr,"pathname",jr("getPathname","setPathname")),ot(Mr,"search",jr("getSearch","setSearch")),ot(Mr,"searchParams",jr("getSearchParams")),ot(Mr,"hash",jr("getHash","setHash"))),mt(Mr,"toJSON",function(){return Gt(this).serialize()},{enumerable:!0}),mt(Mr,"toString",function(){return Gt(this).serialize()},{enumerable:!0}),Ft){var Wr=Ft.createObjectURL,Qr=Ft.revokeObjectURL;Wr&&mt(kr,"createObjectURL",pt(Wr,Ft)),Qr&&mt(kr,"revokeObjectURL",pt(Qr,Ft))}wt(kr,"URL"),nt({global:!0,constructor:!0,forced:!ht,sham:!at},{URL:kr})},285:(rt,it,s)=>{s(8789)},3753:(rt,it,s)=>{var et=s(2109),nt=s(6916);et({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return nt(URL.prototype.toString,this)}})},7987:function(rt,it,s){var et,nt;et=function(at){var ht,dt,pt={template:"[%t] %l:",levelFormatter:function(ot){return ot.toUpperCase()},nameFormatter:function(ot){return ot||"root"},timestampFormatter:function(ot){return ot.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},lt={},mt={reg:function(ot){if(!ot||!ot.getLogger)throw new TypeError("Argument is not a root logger");ht=ot},apply:function(ot,ut){if(!ot||!ot.setLevel)throw new TypeError("Argument is not a logger");var ft=ot.methodFactory,bt=ot.name||"",vt=lt[bt]||lt[""]||pt;return lt[bt]||(ot.methodFactory=function(yt,At,Nt){var St=ft(yt,At,Nt),wt=lt[Nt]||lt[""],Mt=wt.template.indexOf("%t")!==-1,Ht=wt.template.indexOf("%l")!==-1,Ot=wt.template.indexOf("%n")!==-1;return function(){for(var Dt="",Gt=arguments.length,nn=Array(Gt),zt=0;zt<Gt;zt++)nn[zt]=arguments[zt];if(bt||!lt[Nt]){var Ft=wt.timestampFormatter(new Date),un=wt.levelFormatter(yt),vn=wt.nameFormatter(Nt);wt.format?Dt+=wt.format(un,vn,Ft):(Dt+=wt.template,Mt&&(Dt=Dt.replace(/%t/,Ft)),Ht&&(Dt=Dt.replace(/%l/,un)),Ot&&(Dt=Dt.replace(/%n/,vn))),nn.length&&typeof nn[0]=="string"?nn[0]=Dt+" "+nn[0]:nn.unshift(Dt)}St.apply(void 0,nn)}}),(ut=ut||{}).template&&(ut.format=void 0),lt[bt]=function(yt){for(var At,Nt=1,St=arguments.length;Nt<St;Nt++)for(At in arguments[Nt])Object.prototype.hasOwnProperty.call(arguments[Nt],At)&&(yt[At]=arguments[Nt][At]);return yt}({},vt,ut),ot.setLevel(ot.getLevel()),ht||ot.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),ot}};return at&&(dt=at.prefix,mt.noConflict=function(){return at.prefix===mt&&(at.prefix=dt),mt}),mt},(nt=et.call(it,s,it,rt))===void 0||(rt.exports=nt)},2043:function(rt,it,s){var et,nt;(function(at,ht){et=function(){var dt=function(){},pt="undefined",lt=typeof window!==pt&&typeof window.navigator!==pt&&/Trident\/|MSIE /.test(window.navigator.userAgent),mt=["trace","debug","info","warn","error"];function ot(Mt,Ht){var Ot=Mt[Ht];if(typeof Ot.bind=="function")return Ot.bind(Mt);try{return Function.prototype.bind.call(Ot,Mt)}catch{return function(){return Function.prototype.apply.apply(Ot,[Mt,arguments])}}}function ut(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function ft(Mt){return Mt==="debug"&&(Mt="log"),typeof console!==pt&&(Mt==="trace"&&lt?ut:console[Mt]!==void 0?ot(console,Mt):console.log!==void 0?ot(console,"log"):dt)}function bt(Mt,Ht){for(var Ot=0;Ot<mt.length;Ot++){var Dt=mt[Ot];this[Dt]=Ot<Mt?dt:this.methodFactory(Dt,Mt,Ht)}this.log=this.debug}function vt(Mt,Ht,Ot){return function(){typeof console!==pt&&(bt.call(this,Ht,Ot),this[Mt].apply(this,arguments))}}function yt(Mt,Ht,Ot){return ft(Mt)||vt.apply(this,arguments)}function At(Mt,Ht,Ot){var Dt,Gt=this;Ht=Ht??"WARN";var nn="loglevel";function zt(){var un;if(typeof window!==pt&&nn){try{un=window.localStorage[nn]}catch{}if(typeof un===pt)try{var vn=window.document.cookie,yn=vn.indexOf(encodeURIComponent(nn)+"=");yn!==-1&&(un=/^([^;]+)/.exec(vn.slice(yn))[1])}catch{}return Gt.levels[un]===void 0&&(un=void 0),un}}typeof Mt=="string"?nn+=":"+Mt:typeof Mt=="symbol"&&(nn=void 0),Gt.name=Mt,Gt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Gt.methodFactory=Ot||yt,Gt.getLevel=function(){return Dt},Gt.setLevel=function(un,vn){if(typeof un=="string"&&Gt.levels[un.toUpperCase()]!==void 0&&(un=Gt.levels[un.toUpperCase()]),!(typeof un=="number"&&un>=0&&un<=Gt.levels.SILENT))throw"log.setLevel() called with invalid level: "+un;if(Dt=un,vn!==!1&&function(yn){var cn=(mt[yn]||"silent").toUpperCase();if(typeof window!==pt&&nn){try{return void(window.localStorage[nn]=cn)}catch{}try{window.document.cookie=encodeURIComponent(nn)+"="+cn+";"}catch{}}}(un),bt.call(Gt,un,Mt),typeof console===pt&&un<Gt.levels.SILENT)return"No console available for logging"},Gt.setDefaultLevel=function(un){Ht=un,zt()||Gt.setLevel(un,!1)},Gt.resetLevel=function(){Gt.setLevel(Ht,!1),function(){if(typeof window!==pt&&nn){try{return void window.localStorage.removeItem(nn)}catch{}try{window.document.cookie=encodeURIComponent(nn)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}()},Gt.enableAll=function(un){Gt.setLevel(Gt.levels.TRACE,un)},Gt.disableAll=function(un){Gt.setLevel(Gt.levels.SILENT,un)};var Ft=zt();Ft==null&&(Ft=Ht),Gt.setLevel(Ft,!1)}var Nt=new At,St={};Nt.getLogger=function(Mt){if(typeof Mt!="symbol"&&typeof Mt!="string"||Mt==="")throw new TypeError("You must supply a name when creating a logger.");var Ht=St[Mt];return Ht||(Ht=St[Mt]=new At(Mt,Nt.getLevel(),Nt.methodFactory)),Ht};var wt=typeof window!==pt?window.log:void 0;return Nt.noConflict=function(){return typeof window!==pt&&window.log===Nt&&(window.log=wt),Nt},Nt.getLoggers=function(){return St},Nt.default=Nt,Nt},(nt=et.call(it,s,it,rt))===void 0||(rt.exports=nt)})()},7618:rt=>{function it(Dt,Gt){if(!et)return!1;const nn=Dt.buffer;let zt=ot.get(nn);if(zt==null){if((zt=s.validate(nn))&&Gt)try{new s.Instance(new s.Module(nn)).exports[0]()}catch{zt=!1}ot.set(nn,zt)}return zt}const s=globalThis.WebAssembly,et=typeof s=="object",nt=Dt=>Dt!==void 0,at=(...Dt)=>Uint8Array.of(0,97,115,109,1,0,0,0,...Dt),ht=(...Dt)=>Uint32Array.of(1836278016,1,...Dt),dt=(...Dt)=>ht(1610679297,33751040,...Dt,40239360,259),pt=(...Dt)=>at(1,4,1,96,0,0,3,2,1,0,...Dt,11,0,10,4,110,97,109,101,2,3,1,0,0),lt=(...Dt)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...Dt),mt=(...Dt)=>lt(...Dt,2842,4096,28164,28001,357,260,256,560,259,0),ot=new WeakMap,ut=ht(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),ft=at(5,3,1,4,1,0,8,4,110,97,109,101,2,1,0),bt=lt(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),vt=ht(1610679297,33751040,134873089,100664833,185276736),yt=at(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),At=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),Nt=mt(3082,2561,17152,0,0,252),St=mt(2058,1537,16640,49152),wt=dt(101318657,301990913,268438272,1835101700,17039717),Mt=pt(5,4,1,3,1,1,10,7,1,5,0,254,3,0),Ht=dt(84344833,6357249,17369600,4259847,186257917,1845758464),Ot=pt(10,7,1,5,0,208,112,26);rt.exports={support:(Dt=1)=>et&&it(Uint32Array.of(1836278016,Dt)),get supportStreaming(){return et&&nt(s.instantiateStreaming)},feature:{get bigInt(){return it(ut,!0)},get bulk(){return it(bt)},get exceptions(){return it(vt)},get memory64(){return it(ft)},get mutableGlobal(){return it(yt)},get multiValue(){return it(At)},get saturateConversions(){return it(Nt)},get signExtensions(){return it(St)},get tailCall(){return it(wt)},get threads(){return it(Mt)},get simd(){return it(Ht)},get references(){return it(Ot)},get typeReflection(){return et&&nt(s.Memory.type)},get funcReferences(){return et&&nt(s.Function)}}}}},ct={};function gt(rt){var it=ct[rt];if(it!==void 0)return it.exports;var s=ct[rt]={id:rt,loaded:!1,exports:{}};return tt[rt].call(s.exports,s,s.exports,gt),s.loaded=!0,s.exports}return gt.amdO={},gt.n=rt=>{var it=rt&&rt.__esModule?()=>rt.default:()=>rt;return gt.d(it,{a:it}),it},gt.d=(rt,it)=>{for(var s in it)gt.o(it,s)&&!gt.o(rt,s)&&Object.defineProperty(rt,s,{enumerable:!0,get:it[s]})},gt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),gt.hmd=rt=>((rt=Object.create(rt)).children||(rt.children=[]),Object.defineProperty(rt,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+rt.id)}}),rt),gt.o=(rt,it)=>Object.prototype.hasOwnProperty.call(rt,it),gt.r=rt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(rt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(rt,"__esModule",{value:!0})},gt(1256)})())})(apiRTC_min,apiRTC_min.exports);var apiRTC_minExports=apiRTC_min.exports;const GridContext=reactExports.createContext(),GridContext$1=GridContext;function getGridUtilityClass(a){return generateUtilityClass("MuiGrid",a)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(a=>`spacing-xs-${a}`),...DIRECTIONS.map(a=>`direction-xs-${a}`),...WRAPS.map(a=>`wrap-xs-${a}`),...GRID_SIZES.map(a=>`grid-xs-${a}`),...GRID_SIZES.map(a=>`grid-sm-${a}`),...GRID_SIZES.map(a=>`grid-md-${a}`),...GRID_SIZES.map(a=>`grid-lg-${a}`),...GRID_SIZES.map(a=>`grid-xl-${a}`)]),gridClasses$1=gridClasses,_excluded$x=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(a){const o=parseFloat(a);return`${o}${String(a).replace(String(o),"")||"px"}`}function generateGrid({theme:a,ownerState:o}){let _e;return a.breakpoints.keys.reduce((tt,ct)=>{let gt={};if(o[ct]&&(_e=o[ct]),!_e)return tt;if(_e===!0)gt={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(_e==="auto")gt={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const rt=resolveBreakpointValues({values:o.columns,breakpoints:a.breakpoints.values}),it=typeof rt=="object"?rt[ct]:rt;if(it==null)return tt;const s=`${Math.round(_e/it*1e8)/1e6}%`;let et={};if(o.container&&o.item&&o.columnSpacing!==0){const nt=a.spacing(o.columnSpacing);if(nt!=="0px"){const at=`calc(${s} + ${getOffset(nt)})`;et={flexBasis:at,maxWidth:at}}}gt=_extends({flexBasis:s,flexGrow:0,maxWidth:s},et)}return a.breakpoints.values[ct]===0?Object.assign(tt,gt):tt[a.breakpoints.up(ct)]=gt,tt},{})}function generateDirection({theme:a,ownerState:o}){const _e=resolveBreakpointValues({values:o.direction,breakpoints:a.breakpoints.values});return handleBreakpoints({theme:a},_e,tt=>{const ct={flexDirection:tt};return tt.indexOf("column")===0&&(ct[`& > .${gridClasses$1.item}`]={maxWidth:"none"}),ct})}function extractZeroValueBreakpointKeys({breakpoints:a,values:o}){let _e="";Object.keys(o).forEach(ct=>{_e===""&&o[ct]!==0&&(_e=ct)});const tt=Object.keys(a).sort((ct,gt)=>a[ct]-a[gt]);return tt.slice(0,tt.indexOf(_e))}function generateRowGap({theme:a,ownerState:o}){const{container:_e,rowSpacing:tt}=o;let ct={};if(_e&&tt!==0){const gt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let rt;typeof gt=="object"&&(rt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:gt})),ct=handleBreakpoints({theme:a},gt,(it,s)=>{var et;const nt=a.spacing(it);return nt!=="0px"?{marginTop:`-${getOffset(nt)}`,[`& > .${gridClasses$1.item}`]:{paddingTop:getOffset(nt)}}:(et=rt)!=null&&et.includes(s)?{}:{marginTop:0,[`& > .${gridClasses$1.item}`]:{paddingTop:0}}})}return ct}function generateColumnGap({theme:a,ownerState:o}){const{container:_e,columnSpacing:tt}=o;let ct={};if(_e&&tt!==0){const gt=resolveBreakpointValues({values:tt,breakpoints:a.breakpoints.values});let rt;typeof gt=="object"&&(rt=extractZeroValueBreakpointKeys({breakpoints:a.breakpoints.values,values:gt})),ct=handleBreakpoints({theme:a},gt,(it,s)=>{var et;const nt=a.spacing(it);return nt!=="0px"?{width:`calc(100% + ${getOffset(nt)})`,marginLeft:`-${getOffset(nt)}`,[`& > .${gridClasses$1.item}`]:{paddingLeft:getOffset(nt)}}:(et=rt)!=null&&et.includes(s)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses$1.item}`]:{paddingLeft:0}}})}return ct}function resolveSpacingStyles(a,o,_e={}){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[_e[`spacing-xs-${String(a)}`]];const tt=[];return o.forEach(ct=>{const gt=a[ct];Number(gt)>0&&tt.push(_e[`spacing-${ct}-${String(gt)}`])}),tt}const GridRoot=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{container:tt,direction:ct,item:gt,spacing:rt,wrap:it,zeroMinWidth:s,breakpoints:et}=_e;let nt=[];tt&&(nt=resolveSpacingStyles(rt,et,o));const at=[];return et.forEach(ht=>{const dt=_e[ht];dt&&at.push(o[`grid-${ht}-${String(dt)}`])}),[o.root,tt&&o.container,gt&&o.item,s&&o.zeroMinWidth,...nt,ct!=="row"&&o[`direction-xs-${String(ct)}`],it!=="wrap"&&o[`wrap-xs-${String(it)}`],...at]}})(({ownerState:a})=>_extends({boxSizing:"border-box"},a.container&&{display:"flex",flexWrap:"wrap",width:"100%"},a.item&&{margin:0},a.zeroMinWidth&&{minWidth:0},a.wrap!=="wrap"&&{flexWrap:a.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(a,o){if(!a||a<=0)return[];if(typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number")return[`spacing-xs-${String(a)}`];const _e=[];return o.forEach(tt=>{const ct=a[tt];if(Number(ct)>0){const gt=`spacing-${tt}-${String(ct)}`;_e.push(gt)}}),_e}const useUtilityClasses$q=a=>{const{classes:o,container:_e,direction:tt,item:ct,spacing:gt,wrap:rt,zeroMinWidth:it,breakpoints:s}=a;let et=[];_e&&(et=resolveSpacingClasses(gt,s));const nt=[];s.forEach(ht=>{const dt=a[ht];dt&&nt.push(`grid-${ht}-${String(dt)}`)});const at={root:["root",_e&&"container",ct&&"item",it&&"zeroMinWidth",...et,tt!=="row"&&`direction-xs-${String(tt)}`,rt!=="wrap"&&`wrap-xs-${String(rt)}`,...nt]};return composeClasses(at,getGridUtilityClass,o)},Grid=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiGrid"}),{breakpoints:ct}=useTheme(),gt=extendSxProp(tt),{className:rt,columns:it,columnSpacing:s,component:et="div",container:nt=!1,direction:at="row",item:ht=!1,rowSpacing:dt,spacing:pt=0,wrap:lt="wrap",zeroMinWidth:mt=!1}=gt,ot=_objectWithoutPropertiesLoose(gt,_excluded$x),ut=dt||pt,ft=s||pt,bt=reactExports.useContext(GridContext$1),vt=nt?it||12:bt,yt={},At=_extends({},ot);ct.keys.forEach(wt=>{ot[wt]!=null&&(yt[wt]=ot[wt],delete At[wt])});const Nt=_extends({},gt,{columns:vt,container:nt,direction:at,item:ht,rowSpacing:ut,columnSpacing:ft,wrap:lt,zeroMinWidth:mt,spacing:pt},yt,{breakpoints:ct.keys}),St=useUtilityClasses$q(Nt);return jsxRuntimeExports.jsx(GridContext$1.Provider,{value:vt,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:Nt,className:clsx(St.root,rt),as:et,ref:_e},At))})}),d$1=Grid,ListContext=reactExports.createContext({}),ListContext$1=ListContext,dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),dividerClasses$1=dividerClasses,listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),listItemIconClasses$1=listItemIconClasses;function getTypographyUtilityClass(a){return generateUtilityClass("MuiTypography",a)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$w=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$p=a=>{const{align:o,gutterBottom:_e,noWrap:tt,paragraph:ct,variant:gt,classes:rt}=a,it={root:["root",gt,a.align!=="inherit"&&`align${capitalize(o)}`,_e&&"gutterBottom",tt&&"noWrap",ct&&"paragraph"]};return composeClasses(it,getTypographyUtilityClass,rt)},TypographyRoot=styled$1("span",{name:"MuiTypography",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.variant&&o[_e.variant],_e.align!=="inherit"&&o[`align${capitalize(_e.align)}`],_e.noWrap&&o.noWrap,_e.gutterBottom&&o.gutterBottom,_e.paragraph&&o.paragraph]}})(({theme:a,ownerState:o})=>_extends({margin:0},o.variant==="inherit"&&{font:"inherit"},o.variant!=="inherit"&&a.typography[o.variant],o.align!=="inherit"&&{textAlign:o.align},o.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o.gutterBottom&&{marginBottom:"0.35em"},o.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations$1={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors$1=a=>colorTransformations$1[a]||a,Typography=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiTypography"}),ct=transformDeprecatedColors$1(tt.color),gt=extendSxProp(_extends({},tt,{color:ct})),{align:rt="inherit",className:it,component:s,gutterBottom:et=!1,noWrap:nt=!1,paragraph:at=!1,variant:ht="body1",variantMapping:dt=defaultVariantMapping}=gt,pt=_objectWithoutPropertiesLoose(gt,_excluded$w),lt=_extends({},gt,{align:rt,color:ct,className:it,component:s,gutterBottom:et,noWrap:nt,paragraph:at,variant:ht,variantMapping:dt}),mt=s||(at?"p":dt[ht]||defaultVariantMapping[ht])||"span",ot=useUtilityClasses$p(lt);return jsxRuntimeExports.jsx(TypographyRoot,_extends({as:mt,ref:_e,ownerState:lt,className:clsx(ot.root,it)},pt))}),Typography$1=Typography,listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),listItemTextClasses$1=listItemTextClasses;function getMenuItemUtilityClass(a){return generateUtilityClass("MuiMenuItem",a)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),menuItemClasses$1=menuItemClasses,_excluded$v=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],overridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.dense&&o.dense,_e.divider&&o.divider,!_e.disableGutters&&o.gutters]},useUtilityClasses$o=a=>{const{disabled:o,dense:_e,divider:tt,disableGutters:ct,selected:gt,classes:rt}=a,s=composeClasses({root:["root",_e&&"dense",o&&"disabled",!ct&&"gutters",tt&&"divider",gt&&"selected"]},getMenuItemUtilityClass,rt);return _extends({},rt,s)},MenuItemRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!o.disableGutters&&{paddingLeft:16,paddingRight:16},o.divider&&{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses$1.selected}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity),[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},[`&.${menuItemClasses$1.selected}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:alpha(a.palette.primary.main,a.palette.action.selectedOpacity)}},[`&.${menuItemClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${menuItemClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`& + .${dividerClasses$1.root}`]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},[`& + .${dividerClasses$1.inset}`]:{marginLeft:52},[`& .${listItemTextClasses$1.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses$1.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses$1.root}`]:{minWidth:36}},!o.dense&&{[a.breakpoints.up("sm")]:{minHeight:"auto"}},o.dense&&_extends({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,{[`& .${listItemIconClasses$1.root} svg`]:{fontSize:"1.25rem"}}))),MenuItem=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiMenuItem"}),{autoFocus:ct=!1,component:gt="li",dense:rt=!1,divider:it=!1,disableGutters:s=!1,focusVisibleClassName:et,role:nt="menuitem",tabIndex:at,className:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$v),pt=reactExports.useContext(ListContext$1),lt=reactExports.useMemo(()=>({dense:rt||pt.dense||!1,disableGutters:s}),[pt.dense,rt,s]),mt=reactExports.useRef(null);useEnhancedEffect$1(()=>{ct&&mt.current&&mt.current.focus()},[ct]);const ot=_extends({},tt,{dense:lt.dense,divider:it,disableGutters:s}),ut=useUtilityClasses$o(tt),ft=useForkRef(mt,_e);let bt;return tt.disabled||(bt=at!==void 0?at:-1),jsxRuntimeExports.jsx(ListContext$1.Provider,{value:lt,children:jsxRuntimeExports.jsx(MenuItemRoot,_extends({ref:ft,role:nt,tabIndex:bt,component:gt,focusVisibleClassName:clsx(ut.focusVisible,et),className:clsx(ut.root,ht)},dt,{ownerState:ot,classes:ut}))})}),MenuItem$1=MenuItem;function isHostComponent(a){return typeof a=="string"}function appendOwnerState(a,o,_e){return a===void 0||isHostComponent(a)?o:_extends({},o,{ownerState:_extends({},o.ownerState,_e)})}const defaultContextValue={disableDefaultClasses:!1},ClassNameConfiguratorContext=reactExports.createContext(defaultContextValue);function useClassNamesOverride(a){const{disableDefaultClasses:o}=reactExports.useContext(ClassNameConfiguratorContext);return _e=>o?"":a(_e)}function extractEventHandlers(a,o=[]){if(a===void 0)return{};const _e={};return Object.keys(a).filter(tt=>tt.match(/^on[A-Z]/)&&typeof a[tt]=="function"&&!o.includes(tt)).forEach(tt=>{_e[tt]=a[tt]}),_e}function resolveComponentProps(a,o,_e){return typeof a=="function"?a(o,_e):a}function omitEventHandlers(a){if(a===void 0)return{};const o={};return Object.keys(a).filter(_e=>!(_e.match(/^on[A-Z]/)&&typeof a[_e]=="function")).forEach(_e=>{o[_e]=a[_e]}),o}function mergeSlotProps(a){const{getSlotProps:o,additionalProps:_e,externalSlotProps:tt,externalForwardedProps:ct,className:gt}=a;if(!o){const dt=clsx(ct==null?void 0:ct.className,tt==null?void 0:tt.className,gt,_e==null?void 0:_e.className),pt=_extends({},_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),lt=_extends({},_e,ct,tt);return dt.length>0&&(lt.className=dt),Object.keys(pt).length>0&&(lt.style=pt),{props:lt,internalRef:void 0}}const rt=extractEventHandlers(_extends({},ct,tt)),it=omitEventHandlers(tt),s=omitEventHandlers(ct),et=o(rt),nt=clsx(et==null?void 0:et.className,_e==null?void 0:_e.className,gt,ct==null?void 0:ct.className,tt==null?void 0:tt.className),at=_extends({},et==null?void 0:et.style,_e==null?void 0:_e.style,ct==null?void 0:ct.style,tt==null?void 0:tt.style),ht=_extends({},et,_e,s,it);return nt.length>0&&(ht.className=nt),Object.keys(at).length>0&&(ht.style=at),{props:ht,internalRef:et.ref}}const _excluded$u=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function useSlotProps(a){var o;const{elementType:_e,externalSlotProps:tt,ownerState:ct,skipResolvingSlotProps:gt=!1}=a,rt=_objectWithoutPropertiesLoose(a,_excluded$u),it=gt?{}:resolveComponentProps(tt,ct),{props:s,internalRef:et}=mergeSlotProps(_extends({},rt,{externalSlotProps:it})),nt=useForkRef(et,it==null?void 0:it.ref,(o=a.additionalProps)==null?void 0:o.ref);return appendOwnerState(_e,_extends({},s,{ref:nt}),ct)}function getListUtilityClass(a){return generateUtilityClass("MuiList",a)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const _excluded$t=["children","className","component","dense","disablePadding","subheader"],useUtilityClasses$n=a=>{const{classes:o,disablePadding:_e,dense:tt,subheader:ct}=a;return composeClasses({root:["root",!_e&&"padding",tt&&"dense",ct&&"subheader"]},getListUtilityClass,o)},ListRoot=styled$1("ul",{name:"MuiList",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.disablePadding&&o.padding,_e.dense&&o.dense,_e.subheader&&o.subheader]}})(({ownerState:a})=>_extends({listStyle:"none",margin:0,padding:0,position:"relative"},!a.disablePadding&&{paddingTop:8,paddingBottom:8},a.subheader&&{paddingTop:0})),List=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiList"}),{children:ct,className:gt,component:rt="ul",dense:it=!1,disablePadding:s=!1,subheader:et}=tt,nt=_objectWithoutPropertiesLoose(tt,_excluded$t),at=reactExports.useMemo(()=>({dense:it}),[it]),ht=_extends({},tt,{component:rt,dense:it,disablePadding:s}),dt=useUtilityClasses$n(ht);return jsxRuntimeExports.jsx(ListContext$1.Provider,{value:at,children:jsxRuntimeExports.jsxs(ListRoot,_extends({as:rt,className:clsx(dt.root,gt),ref:_e,ownerState:ht},nt,{children:[et,ct]}))})}),List$1=List,_excluded$s=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function nextItem(a,o,_e){return a===o?a.firstChild:o&&o.nextElementSibling?o.nextElementSibling:_e?null:a.firstChild}function previousItem(a,o,_e){return a===o?_e?a.firstChild:a.lastChild:o&&o.previousElementSibling?o.previousElementSibling:_e?null:a.lastChild}function textCriteriaMatches(a,o){if(o===void 0)return!0;let _e=a.innerText;return _e===void 0&&(_e=a.textContent),_e=_e.trim().toLowerCase(),_e.length===0?!1:o.repeating?_e[0]===o.keys[0]:_e.indexOf(o.keys.join(""))===0}function moveFocus(a,o,_e,tt,ct,gt){let rt=!1,it=ct(a,o,o?_e:!1);for(;it;){if(it===a.firstChild){if(rt)return!1;rt=!0}const s=tt?!1:it.disabled||it.getAttribute("aria-disabled")==="true";if(!it.hasAttribute("tabindex")||!textCriteriaMatches(it,gt)||s)it=ct(a,it,_e);else return it.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(o,_e){const{actions:tt,autoFocus:ct=!1,autoFocusItem:gt=!1,children:rt,className:it,disabledItemsFocusable:s=!1,disableListWrap:et=!1,onKeyDown:nt,variant:at="selectedMenu"}=o,ht=_objectWithoutPropertiesLoose(o,_excluded$s),dt=reactExports.useRef(null),pt=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect$1(()=>{ct&&dt.current.focus()},[ct]),reactExports.useImperativeHandle(tt,()=>({adjustStyleForScrollbar:(ft,bt)=>{const vt=!dt.current.style.width;if(ft.clientHeight<dt.current.clientHeight&&vt){const yt=`${getScrollbarSize(ownerDocument(ft))}px`;dt.current.style[bt.direction==="rtl"?"paddingLeft":"paddingRight"]=yt,dt.current.style.width=`calc(100% + ${yt})`}return dt.current}}),[]);const lt=ft=>{const bt=dt.current,vt=ft.key,yt=ownerDocument(bt).activeElement;if(vt==="ArrowDown")ft.preventDefault(),moveFocus(bt,yt,et,s,nextItem);else if(vt==="ArrowUp")ft.preventDefault(),moveFocus(bt,yt,et,s,previousItem);else if(vt==="Home")ft.preventDefault(),moveFocus(bt,null,et,s,nextItem);else if(vt==="End")ft.preventDefault(),moveFocus(bt,null,et,s,previousItem);else if(vt.length===1){const At=pt.current,Nt=vt.toLowerCase(),St=performance.now();At.keys.length>0&&(St-At.lastTime>500?(At.keys=[],At.repeating=!0,At.previousKeyMatched=!0):At.repeating&&Nt!==At.keys[0]&&(At.repeating=!1)),At.lastTime=St,At.keys.push(Nt);const wt=yt&&!At.repeating&&textCriteriaMatches(yt,At);At.previousKeyMatched&&(wt||moveFocus(bt,yt,!1,s,nextItem,At))?ft.preventDefault():At.previousKeyMatched=!1}nt&&nt(ft)},mt=useForkRef(dt,_e);let ot=-1;reactExports.Children.forEach(rt,(ft,bt)=>{if(!reactExports.isValidElement(ft)){ot===bt&&(ot+=1,ot>=rt.length&&(ot=-1));return}ft.props.disabled||(at==="selectedMenu"&&ft.props.selected||ot===-1)&&(ot=bt),ot===bt&&(ft.props.disabled||ft.props.muiSkipListHighlight||ft.type.muiSkipListHighlight)&&(ot+=1,ot>=rt.length&&(ot=-1))});const ut=reactExports.Children.map(rt,(ft,bt)=>{if(bt===ot){const vt={};return gt&&(vt.autoFocus=!0),ft.props.tabIndex===void 0&&at==="selectedMenu"&&(vt.tabIndex=0),reactExports.cloneElement(ft,vt)}return ft});return jsxRuntimeExports.jsx(List$1,_extends({role:"menu",ref:mt,className:it,onKeyDown:lt,tabIndex:ct?0:-1},ht,{children:ut}))}),MenuList$1=MenuList,candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(a){const o=parseInt(a.getAttribute("tabindex")||"",10);return Number.isNaN(o)?a.contentEditable==="true"||(a.nodeName==="AUDIO"||a.nodeName==="VIDEO"||a.nodeName==="DETAILS")&&a.getAttribute("tabindex")===null?0:a.tabIndex:o}function isNonTabbableRadio(a){if(a.tagName!=="INPUT"||a.type!=="radio"||!a.name)return!1;const o=tt=>a.ownerDocument.querySelector(`input[type="radio"]${tt}`);let _e=o(`[name="${a.name}"]:checked`);return _e||(_e=o(`[name="${a.name}"]`)),_e!==a}function isNodeMatchingSelectorFocusable(a){return!(a.disabled||a.tagName==="INPUT"&&a.type==="hidden"||isNonTabbableRadio(a))}function defaultGetTabbable(a){const o=[],_e=[];return Array.from(a.querySelectorAll(candidatesSelector)).forEach((tt,ct)=>{const gt=getTabIndex(tt);gt===-1||!isNodeMatchingSelectorFocusable(tt)||(gt===0?o.push(tt):_e.push({documentOrder:ct,tabIndex:gt,node:tt}))}),_e.sort((tt,ct)=>tt.tabIndex===ct.tabIndex?tt.documentOrder-ct.documentOrder:tt.tabIndex-ct.tabIndex).map(tt=>tt.node).concat(o)}function defaultIsEnabled(){return!0}function FocusTrap(a){const{children:o,disableAutoFocus:_e=!1,disableEnforceFocus:tt=!1,disableRestoreFocus:ct=!1,getTabbable:gt=defaultGetTabbable,isEnabled:rt=defaultIsEnabled,open:it}=a,s=reactExports.useRef(!1),et=reactExports.useRef(null),nt=reactExports.useRef(null),at=reactExports.useRef(null),ht=reactExports.useRef(null),dt=reactExports.useRef(!1),pt=reactExports.useRef(null),lt=useForkRef(o.ref,pt),mt=reactExports.useRef(null);reactExports.useEffect(()=>{!it||!pt.current||(dt.current=!_e)},[_e,it]),reactExports.useEffect(()=>{if(!it||!pt.current)return;const ft=ownerDocument(pt.current);return pt.current.contains(ft.activeElement)||(pt.current.hasAttribute("tabIndex")||pt.current.setAttribute("tabIndex","-1"),dt.current&&pt.current.focus()),()=>{ct||(at.current&&at.current.focus&&(s.current=!0,at.current.focus()),at.current=null)}},[it]),reactExports.useEffect(()=>{if(!it||!pt.current)return;const ft=ownerDocument(pt.current),bt=At=>{mt.current=At,!(tt||!rt()||At.key!=="Tab")&&ft.activeElement===pt.current&&At.shiftKey&&(s.current=!0,nt.current&&nt.current.focus())},vt=()=>{const At=pt.current;if(At===null)return;if(!ft.hasFocus()||!rt()||s.current){s.current=!1;return}if(At.contains(ft.activeElement)||tt&&ft.activeElement!==et.current&&ft.activeElement!==nt.current)return;if(ft.activeElement!==ht.current)ht.current=null;else if(ht.current!==null)return;if(!dt.current)return;let Nt=[];if((ft.activeElement===et.current||ft.activeElement===nt.current)&&(Nt=gt(pt.current)),Nt.length>0){var St,wt;const Mt=!!((St=mt.current)!=null&&St.shiftKey&&((wt=mt.current)==null?void 0:wt.key)==="Tab"),Ht=Nt[0],Ot=Nt[Nt.length-1];typeof Ht!="string"&&typeof Ot!="string"&&(Mt?Ot.focus():Ht.focus())}else At.focus()};ft.addEventListener("focusin",vt),ft.addEventListener("keydown",bt,!0);const yt=setInterval(()=>{ft.activeElement&&ft.activeElement.tagName==="BODY"&&vt()},50);return()=>{clearInterval(yt),ft.removeEventListener("focusin",vt),ft.removeEventListener("keydown",bt,!0)}},[_e,tt,ct,rt,it,gt]);const ot=ft=>{at.current===null&&(at.current=ft.relatedTarget),dt.current=!0,ht.current=ft.target;const bt=o.props.onFocus;bt&&bt(ft)},ut=ft=>{at.current===null&&(at.current=ft.relatedTarget),dt.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:it?0:-1,onFocus:ut,ref:et,"data-testid":"sentinelStart"}),reactExports.cloneElement(o,{ref:lt,onFocus:ot}),jsxRuntimeExports.jsx("div",{tabIndex:it?0:-1,onFocus:ut,ref:nt,"data-testid":"sentinelEnd"})]})}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(a,o){return a.concat([o+"-"+start,o+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(a,o){return a.concat([o,o+"-"+start,o+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(a){return a?(a.nodeName||"").toLowerCase():null}function getWindow(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var o=a.ownerDocument;return o&&o.defaultView||window}return a}function isElement(a){var o=getWindow(a).Element;return a instanceof o||a instanceof Element}function isHTMLElement$1(a){var o=getWindow(a).HTMLElement;return a instanceof o||a instanceof HTMLElement}function isShadowRoot(a){if(typeof ShadowRoot>"u")return!1;var o=getWindow(a).ShadowRoot;return a instanceof o||a instanceof ShadowRoot}function applyStyles(a){var o=a.state;Object.keys(o.elements).forEach(function(_e){var tt=o.styles[_e]||{},ct=o.attributes[_e]||{},gt=o.elements[_e];!isHTMLElement$1(gt)||!getNodeName(gt)||(Object.assign(gt.style,tt),Object.keys(ct).forEach(function(rt){var it=ct[rt];it===!1?gt.removeAttribute(rt):gt.setAttribute(rt,it===!0?"":it)}))})}function effect$2(a){var o=a.state,_e={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(o.elements.popper.style,_e.popper),o.styles=_e,o.elements.arrow&&Object.assign(o.elements.arrow.style,_e.arrow),function(){Object.keys(o.elements).forEach(function(tt){var ct=o.elements[tt],gt=o.attributes[tt]||{},rt=Object.keys(o.styles.hasOwnProperty(tt)?o.styles[tt]:_e[tt]),it=rt.reduce(function(s,et){return s[et]="",s},{});!isHTMLElement$1(ct)||!getNodeName(ct)||(Object.assign(ct.style,it),Object.keys(gt).forEach(function(s){ct.removeAttribute(s)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(a){return a.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var a=navigator.userAgentData;return a!=null&&a.brands&&Array.isArray(a.brands)?a.brands.map(function(o){return o.brand+"/"+o.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(a,o,_e){o===void 0&&(o=!1),_e===void 0&&(_e=!1);var tt=a.getBoundingClientRect(),ct=1,gt=1;o&&isHTMLElement$1(a)&&(ct=a.offsetWidth>0&&round$1(tt.width)/a.offsetWidth||1,gt=a.offsetHeight>0&&round$1(tt.height)/a.offsetHeight||1);var rt=isElement(a)?getWindow(a):window,it=rt.visualViewport,s=!isLayoutViewport()&&_e,et=(tt.left+(s&&it?it.offsetLeft:0))/ct,nt=(tt.top+(s&&it?it.offsetTop:0))/gt,at=tt.width/ct,ht=tt.height/gt;return{width:at,height:ht,top:nt,right:et+at,bottom:nt+ht,left:et,x:et,y:nt}}function getLayoutRect(a){var o=getBoundingClientRect(a),_e=a.offsetWidth,tt=a.offsetHeight;return Math.abs(o.width-_e)<=1&&(_e=o.width),Math.abs(o.height-tt)<=1&&(tt=o.height),{x:a.offsetLeft,y:a.offsetTop,width:_e,height:tt}}function contains(a,o){var _e=o.getRootNode&&o.getRootNode();if(a.contains(o))return!0;if(_e&&isShadowRoot(_e)){var tt=o;do{if(tt&&a.isSameNode(tt))return!0;tt=tt.parentNode||tt.host}while(tt)}return!1}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function isTableElement(a){return["table","td","th"].indexOf(getNodeName(a))>=0}function getDocumentElement(a){return((isElement(a)?a.ownerDocument:a.document)||window.document).documentElement}function getParentNode(a){return getNodeName(a)==="html"?a:a.assignedSlot||a.parentNode||(isShadowRoot(a)?a.host:null)||getDocumentElement(a)}function getTrueOffsetParent(a){return!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed"?null:a.offsetParent}function getContainingBlock(a){var o=/firefox/i.test(getUAString()),_e=/Trident/i.test(getUAString());if(_e&&isHTMLElement$1(a)){var tt=getComputedStyle$1(a);if(tt.position==="fixed")return null}var ct=getParentNode(a);for(isShadowRoot(ct)&&(ct=ct.host);isHTMLElement$1(ct)&&["html","body"].indexOf(getNodeName(ct))<0;){var gt=getComputedStyle$1(ct);if(gt.transform!=="none"||gt.perspective!=="none"||gt.contain==="paint"||["transform","perspective"].indexOf(gt.willChange)!==-1||o&&gt.willChange==="filter"||o&&gt.filter&&gt.filter!=="none")return ct;ct=ct.parentNode}return null}function getOffsetParent(a){for(var o=getWindow(a),_e=getTrueOffsetParent(a);_e&&isTableElement(_e)&&getComputedStyle$1(_e).position==="static";)_e=getTrueOffsetParent(_e);return _e&&(getNodeName(_e)==="html"||getNodeName(_e)==="body"&&getComputedStyle$1(_e).position==="static")?o:_e||getContainingBlock(a)||o}function getMainAxisFromPlacement(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function within(a,o,_e){return max(a,min(o,_e))}function withinMaxClamp(a,o,_e){var tt=within(a,o,_e);return tt>_e?_e:tt}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(a){return Object.assign({},getFreshSideObject(),a)}function expandToHashMap(a,o){return o.reduce(function(_e,tt){return _e[tt]=a,_e},{})}var toPaddingObject=function(o,_e){return o=typeof o=="function"?o(Object.assign({},_e.rects,{placement:_e.placement})):o,mergePaddingObject(typeof o!="number"?o:expandToHashMap(o,basePlacements))};function arrow(a){var o,_e=a.state,tt=a.name,ct=a.options,gt=_e.elements.arrow,rt=_e.modifiersData.popperOffsets,it=getBasePlacement(_e.placement),s=getMainAxisFromPlacement(it),et=[left,right].indexOf(it)>=0,nt=et?"height":"width";if(!(!gt||!rt)){var at=toPaddingObject(ct.padding,_e),ht=getLayoutRect(gt),dt=s==="y"?top:left,pt=s==="y"?bottom:right,lt=_e.rects.reference[nt]+_e.rects.reference[s]-rt[s]-_e.rects.popper[nt],mt=rt[s]-_e.rects.reference[s],ot=getOffsetParent(gt),ut=ot?s==="y"?ot.clientHeight||0:ot.clientWidth||0:0,ft=lt/2-mt/2,bt=at[dt],vt=ut-ht[nt]-at[pt],yt=ut/2-ht[nt]/2+ft,At=within(bt,yt,vt),Nt=s;_e.modifiersData[tt]=(o={},o[Nt]=At,o.centerOffset=At-yt,o)}}function effect$1(a){var o=a.state,_e=a.options,tt=_e.element,ct=tt===void 0?"[data-popper-arrow]":tt;ct!=null&&(typeof ct=="string"&&(ct=o.elements.popper.querySelector(ct),!ct)||contains(o.elements.popper,ct)&&(o.elements.arrow=ct))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(a){return a.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(a,o){var _e=a.x,tt=a.y,ct=o.devicePixelRatio||1;return{x:round$1(_e*ct)/ct||0,y:round$1(tt*ct)/ct||0}}function mapToStyles(a){var o,_e=a.popper,tt=a.popperRect,ct=a.placement,gt=a.variation,rt=a.offsets,it=a.position,s=a.gpuAcceleration,et=a.adaptive,nt=a.roundOffsets,at=a.isFixed,ht=rt.x,dt=ht===void 0?0:ht,pt=rt.y,lt=pt===void 0?0:pt,mt=typeof nt=="function"?nt({x:dt,y:lt}):{x:dt,y:lt};dt=mt.x,lt=mt.y;var ot=rt.hasOwnProperty("x"),ut=rt.hasOwnProperty("y"),ft=left,bt=top,vt=window;if(et){var yt=getOffsetParent(_e),At="clientHeight",Nt="clientWidth";if(yt===getWindow(_e)&&(yt=getDocumentElement(_e),getComputedStyle$1(yt).position!=="static"&&it==="absolute"&&(At="scrollHeight",Nt="scrollWidth")),yt=yt,ct===top||(ct===left||ct===right)&&gt===end){bt=bottom;var St=at&&yt===vt&&vt.visualViewport?vt.visualViewport.height:yt[At];lt-=St-tt.height,lt*=s?1:-1}if(ct===left||(ct===top||ct===bottom)&&gt===end){ft=right;var wt=at&&yt===vt&&vt.visualViewport?vt.visualViewport.width:yt[Nt];dt-=wt-tt.width,dt*=s?1:-1}}var Mt=Object.assign({position:it},et&&unsetSides),Ht=nt===!0?roundOffsetsByDPR({x:dt,y:lt},getWindow(_e)):{x:dt,y:lt};if(dt=Ht.x,lt=Ht.y,s){var Ot;return Object.assign({},Mt,(Ot={},Ot[bt]=ut?"0":"",Ot[ft]=ot?"0":"",Ot.transform=(vt.devicePixelRatio||1)<=1?"translate("+dt+"px, "+lt+"px)":"translate3d("+dt+"px, "+lt+"px, 0)",Ot))}return Object.assign({},Mt,(o={},o[bt]=ut?lt+"px":"",o[ft]=ot?dt+"px":"",o.transform="",o))}function computeStyles(a){var o=a.state,_e=a.options,tt=_e.gpuAcceleration,ct=tt===void 0?!0:tt,gt=_e.adaptive,rt=gt===void 0?!0:gt,it=_e.roundOffsets,s=it===void 0?!0:it,et={placement:getBasePlacement(o.placement),variation:getVariation(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:ct,isFixed:o.options.strategy==="fixed"};o.modifiersData.popperOffsets!=null&&(o.styles.popper=Object.assign({},o.styles.popper,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:rt,roundOffsets:s})))),o.modifiersData.arrow!=null&&(o.styles.arrow=Object.assign({},o.styles.arrow,mapToStyles(Object.assign({},et,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(a){var o=a.state,_e=a.instance,tt=a.options,ct=tt.scroll,gt=ct===void 0?!0:ct,rt=tt.resize,it=rt===void 0?!0:rt,s=getWindow(o.elements.popper),et=[].concat(o.scrollParents.reference,o.scrollParents.popper);return gt&&et.forEach(function(nt){nt.addEventListener("scroll",_e.update,passive)}),it&&s.addEventListener("resize",_e.update,passive),function(){gt&&et.forEach(function(nt){nt.removeEventListener("scroll",_e.update,passive)}),it&&s.removeEventListener("resize",_e.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,function(o){return hash$1[o]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(a){return a.replace(/start|end/g,function(o){return hash[o]})}function getWindowScroll(a){var o=getWindow(a),_e=o.pageXOffset,tt=o.pageYOffset;return{scrollLeft:_e,scrollTop:tt}}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getWindowScroll(a).scrollLeft}function getViewportRect(a,o){var _e=getWindow(a),tt=getDocumentElement(a),ct=_e.visualViewport,gt=tt.clientWidth,rt=tt.clientHeight,it=0,s=0;if(ct){gt=ct.width,rt=ct.height;var et=isLayoutViewport();(et||!et&&o==="fixed")&&(it=ct.offsetLeft,s=ct.offsetTop)}return{width:gt,height:rt,x:it+getWindowScrollBarX(a),y:s}}function getDocumentRect(a){var o,_e=getDocumentElement(a),tt=getWindowScroll(a),ct=(o=a.ownerDocument)==null?void 0:o.body,gt=max(_e.scrollWidth,_e.clientWidth,ct?ct.scrollWidth:0,ct?ct.clientWidth:0),rt=max(_e.scrollHeight,_e.clientHeight,ct?ct.scrollHeight:0,ct?ct.clientHeight:0),it=-tt.scrollLeft+getWindowScrollBarX(a),s=-tt.scrollTop;return getComputedStyle$1(ct||_e).direction==="rtl"&&(it+=max(_e.clientWidth,ct?ct.clientWidth:0)-gt),{width:gt,height:rt,x:it,y:s}}function isScrollParent(a){var o=getComputedStyle$1(a),_e=o.overflow,tt=o.overflowX,ct=o.overflowY;return/auto|scroll|overlay|hidden/.test(_e+ct+tt)}function getScrollParent(a){return["html","body","#document"].indexOf(getNodeName(a))>=0?a.ownerDocument.body:isHTMLElement$1(a)&&isScrollParent(a)?a:getScrollParent(getParentNode(a))}function listScrollParents(a,o){var _e;o===void 0&&(o=[]);var tt=getScrollParent(a),ct=tt===((_e=a.ownerDocument)==null?void 0:_e.body),gt=getWindow(tt),rt=ct?[gt].concat(gt.visualViewport||[],isScrollParent(tt)?tt:[]):tt,it=o.concat(rt);return ct?it:it.concat(listScrollParents(getParentNode(rt)))}function rectToClientRect(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function getInnerBoundingClientRect(a,o){var _e=getBoundingClientRect(a,!1,o==="fixed");return _e.top=_e.top+a.clientTop,_e.left=_e.left+a.clientLeft,_e.bottom=_e.top+a.clientHeight,_e.right=_e.left+a.clientWidth,_e.width=a.clientWidth,_e.height=a.clientHeight,_e.x=_e.left,_e.y=_e.top,_e}function getClientRectFromMixedType(a,o,_e){return o===viewport?rectToClientRect(getViewportRect(a,_e)):isElement(o)?getInnerBoundingClientRect(o,_e):rectToClientRect(getDocumentRect(getDocumentElement(a)))}function getClippingParents(a){var o=listScrollParents(getParentNode(a)),_e=["absolute","fixed"].indexOf(getComputedStyle$1(a).position)>=0,tt=_e&&isHTMLElement$1(a)?getOffsetParent(a):a;return isElement(tt)?o.filter(function(ct){return isElement(ct)&&contains(ct,tt)&&getNodeName(ct)!=="body"}):[]}function getClippingRect(a,o,_e,tt){var ct=o==="clippingParents"?getClippingParents(a):[].concat(o),gt=[].concat(ct,[_e]),rt=gt[0],it=gt.reduce(function(s,et){var nt=getClientRectFromMixedType(a,et,tt);return s.top=max(nt.top,s.top),s.right=min(nt.right,s.right),s.bottom=min(nt.bottom,s.bottom),s.left=max(nt.left,s.left),s},getClientRectFromMixedType(a,rt,tt));return it.width=it.right-it.left,it.height=it.bottom-it.top,it.x=it.left,it.y=it.top,it}function computeOffsets(a){var o=a.reference,_e=a.element,tt=a.placement,ct=tt?getBasePlacement(tt):null,gt=tt?getVariation(tt):null,rt=o.x+o.width/2-_e.width/2,it=o.y+o.height/2-_e.height/2,s;switch(ct){case top:s={x:rt,y:o.y-_e.height};break;case bottom:s={x:rt,y:o.y+o.height};break;case right:s={x:o.x+o.width,y:it};break;case left:s={x:o.x-_e.width,y:it};break;default:s={x:o.x,y:o.y}}var et=ct?getMainAxisFromPlacement(ct):null;if(et!=null){var nt=et==="y"?"height":"width";switch(gt){case start:s[et]=s[et]-(o[nt]/2-_e[nt]/2);break;case end:s[et]=s[et]+(o[nt]/2-_e[nt]/2);break}}return s}function detectOverflow(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=tt===void 0?a.placement:tt,gt=_e.strategy,rt=gt===void 0?a.strategy:gt,it=_e.boundary,s=it===void 0?clippingParents:it,et=_e.rootBoundary,nt=et===void 0?viewport:et,at=_e.elementContext,ht=at===void 0?popper:at,dt=_e.altBoundary,pt=dt===void 0?!1:dt,lt=_e.padding,mt=lt===void 0?0:lt,ot=mergePaddingObject(typeof mt!="number"?mt:expandToHashMap(mt,basePlacements)),ut=ht===popper?reference:popper,ft=a.rects.popper,bt=a.elements[pt?ut:ht],vt=getClippingRect(isElement(bt)?bt:bt.contextElement||getDocumentElement(a.elements.popper),s,nt,rt),yt=getBoundingClientRect(a.elements.reference),At=computeOffsets({reference:yt,element:ft,strategy:"absolute",placement:ct}),Nt=rectToClientRect(Object.assign({},ft,At)),St=ht===popper?Nt:yt,wt={top:vt.top-St.top+ot.top,bottom:St.bottom-vt.bottom+ot.bottom,left:vt.left-St.left+ot.left,right:St.right-vt.right+ot.right},Mt=a.modifiersData.offset;if(ht===popper&&Mt){var Ht=Mt[ct];Object.keys(wt).forEach(function(Ot){var Dt=[right,bottom].indexOf(Ot)>=0?1:-1,Gt=[top,bottom].indexOf(Ot)>=0?"y":"x";wt[Ot]+=Ht[Gt]*Dt})}return wt}function computeAutoPlacement(a,o){o===void 0&&(o={});var _e=o,tt=_e.placement,ct=_e.boundary,gt=_e.rootBoundary,rt=_e.padding,it=_e.flipVariations,s=_e.allowedAutoPlacements,et=s===void 0?placements:s,nt=getVariation(tt),at=nt?it?variationPlacements:variationPlacements.filter(function(pt){return getVariation(pt)===nt}):basePlacements,ht=at.filter(function(pt){return et.indexOf(pt)>=0});ht.length===0&&(ht=at);var dt=ht.reduce(function(pt,lt){return pt[lt]=detectOverflow(a,{placement:lt,boundary:ct,rootBoundary:gt,padding:rt})[getBasePlacement(lt)],pt},{});return Object.keys(dt).sort(function(pt,lt){return dt[pt]-dt[lt]})}function getExpandedFallbackPlacements(a){if(getBasePlacement(a)===auto)return[];var o=getOppositePlacement(a);return[getOppositeVariationPlacement(a),o,getOppositeVariationPlacement(o)]}function flip(a){var o=a.state,_e=a.options,tt=a.name;if(!o.modifiersData[tt]._skip){for(var ct=_e.mainAxis,gt=ct===void 0?!0:ct,rt=_e.altAxis,it=rt===void 0?!0:rt,s=_e.fallbackPlacements,et=_e.padding,nt=_e.boundary,at=_e.rootBoundary,ht=_e.altBoundary,dt=_e.flipVariations,pt=dt===void 0?!0:dt,lt=_e.allowedAutoPlacements,mt=o.options.placement,ot=getBasePlacement(mt),ut=ot===mt,ft=s||(ut||!pt?[getOppositePlacement(mt)]:getExpandedFallbackPlacements(mt)),bt=[mt].concat(ft).reduce(function(Cn,fn){return Cn.concat(getBasePlacement(fn)===auto?computeAutoPlacement(o,{placement:fn,boundary:nt,rootBoundary:at,padding:et,flipVariations:pt,allowedAutoPlacements:lt}):fn)},[]),vt=o.rects.reference,yt=o.rects.popper,At=new Map,Nt=!0,St=bt[0],wt=0;wt<bt.length;wt++){var Mt=bt[wt],Ht=getBasePlacement(Mt),Ot=getVariation(Mt)===start,Dt=[top,bottom].indexOf(Ht)>=0,Gt=Dt?"width":"height",nn=detectOverflow(o,{placement:Mt,boundary:nt,rootBoundary:at,altBoundary:ht,padding:et}),zt=Dt?Ot?right:left:Ot?bottom:top;vt[Gt]>yt[Gt]&&(zt=getOppositePlacement(zt));var Ft=getOppositePlacement(zt),un=[];if(gt&&un.push(nn[Ht]<=0),it&&un.push(nn[zt]<=0,nn[Ft]<=0),un.every(function(Cn){return Cn})){St=Mt,Nt=!1;break}At.set(Mt,un)}if(Nt)for(var vn=pt?3:1,yn=function(fn){var Tn=bt.find(function(On){var Ln=At.get(On);if(Ln)return Ln.slice(0,fn).every(function(An){return An})});if(Tn)return St=Tn,"break"},cn=vn;cn>0;cn--){var gn=yn(cn);if(gn==="break")break}o.placement!==St&&(o.modifiersData[tt]._skip=!0,o.placement=St,o.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(a,o,_e){return _e===void 0&&(_e={x:0,y:0}),{top:a.top-o.height-_e.y,right:a.right-o.width+_e.x,bottom:a.bottom-o.height+_e.y,left:a.left-o.width-_e.x}}function isAnySideFullyClipped(a){return[top,right,bottom,left].some(function(o){return a[o]>=0})}function hide(a){var o=a.state,_e=a.name,tt=o.rects.reference,ct=o.rects.popper,gt=o.modifiersData.preventOverflow,rt=detectOverflow(o,{elementContext:"reference"}),it=detectOverflow(o,{altBoundary:!0}),s=getSideOffsets(rt,tt),et=getSideOffsets(it,ct,gt),nt=isAnySideFullyClipped(s),at=isAnySideFullyClipped(et);o.modifiersData[_e]={referenceClippingOffsets:s,popperEscapeOffsets:et,isReferenceHidden:nt,hasPopperEscaped:at},o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-reference-hidden":nt,"data-popper-escaped":at})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(a,o,_e){var tt=getBasePlacement(a),ct=[left,top].indexOf(tt)>=0?-1:1,gt=typeof _e=="function"?_e(Object.assign({},o,{placement:a})):_e,rt=gt[0],it=gt[1];return rt=rt||0,it=(it||0)*ct,[left,right].indexOf(tt)>=0?{x:it,y:rt}:{x:rt,y:it}}function offset(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.offset,gt=ct===void 0?[0,0]:ct,rt=placements.reduce(function(nt,at){return nt[at]=distanceAndSkiddingToXY(at,o.rects,gt),nt},{}),it=rt[o.placement],s=it.x,et=it.y;o.modifiersData.popperOffsets!=null&&(o.modifiersData.popperOffsets.x+=s,o.modifiersData.popperOffsets.y+=et),o.modifiersData[tt]=rt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(a){var o=a.state,_e=a.name;o.modifiersData[_e]=computeOffsets({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(a){return a==="x"?"y":"x"}function preventOverflow(a){var o=a.state,_e=a.options,tt=a.name,ct=_e.mainAxis,gt=ct===void 0?!0:ct,rt=_e.altAxis,it=rt===void 0?!1:rt,s=_e.boundary,et=_e.rootBoundary,nt=_e.altBoundary,at=_e.padding,ht=_e.tether,dt=ht===void 0?!0:ht,pt=_e.tetherOffset,lt=pt===void 0?0:pt,mt=detectOverflow(o,{boundary:s,rootBoundary:et,padding:at,altBoundary:nt}),ot=getBasePlacement(o.placement),ut=getVariation(o.placement),ft=!ut,bt=getMainAxisFromPlacement(ot),vt=getAltAxis(bt),yt=o.modifiersData.popperOffsets,At=o.rects.reference,Nt=o.rects.popper,St=typeof lt=="function"?lt(Object.assign({},o.rects,{placement:o.placement})):lt,wt=typeof St=="number"?{mainAxis:St,altAxis:St}:Object.assign({mainAxis:0,altAxis:0},St),Mt=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null,Ht={x:0,y:0};if(yt){if(gt){var Ot,Dt=bt==="y"?top:left,Gt=bt==="y"?bottom:right,nn=bt==="y"?"height":"width",zt=yt[bt],Ft=zt+mt[Dt],un=zt-mt[Gt],vn=dt?-Nt[nn]/2:0,yn=ut===start?At[nn]:Nt[nn],cn=ut===start?-Nt[nn]:-At[nn],gn=o.elements.arrow,Cn=dt&&gn?getLayoutRect(gn):{width:0,height:0},fn=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Tn=fn[Dt],On=fn[Gt],Ln=within(0,At[nn],Cn[nn]),An=ft?At[nn]/2-vn-Ln-Tn-wt.mainAxis:yn-Ln-Tn-wt.mainAxis,Rn=ft?-At[nn]/2+vn+Ln+On+wt.mainAxis:cn+Ln+On+wt.mainAxis,In=o.elements.arrow&&getOffsetParent(o.elements.arrow),kn=In?bt==="y"?In.clientTop||0:In.clientLeft||0:0,xn=(Ot=Mt==null?void 0:Mt[bt])!=null?Ot:0,Yn=zt+An-xn-kn,Un=zt+Rn-xn,jn=within(dt?min(Ft,Yn):Ft,zt,dt?max(un,Un):un);yt[bt]=jn,Ht[bt]=jn-zt}if(it){var Qn,on=bt==="x"?top:left,Hn=bt==="x"?bottom:right,Fn=yt[vt],Vn=vt==="y"?"height":"width",Bn=Fn+mt[on],qn=Fn-mt[Hn],Gn=[top,left].indexOf(ot)!==-1,_n=(Qn=Mt==null?void 0:Mt[vt])!=null?Qn:0,$n=Gn?Bn:Fn-At[Vn]-Nt[Vn]-_n+wt.altAxis,bn=Gn?Fn+At[Vn]+Nt[Vn]-_n-wt.altAxis:qn,wn=dt&&Gn?withinMaxClamp($n,Fn,bn):within(dt?$n:Bn,Fn,dt?bn:qn);yt[vt]=wn,Ht[vt]=wn-Fn}o.modifiersData[tt]=Ht}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function getNodeScroll(a){return a===getWindow(a)||!isHTMLElement$1(a)?getWindowScroll(a):getHTMLElementScroll(a)}function isElementScaled(a){var o=a.getBoundingClientRect(),_e=round$1(o.width)/a.offsetWidth||1,tt=round$1(o.height)/a.offsetHeight||1;return _e!==1||tt!==1}function getCompositeRect(a,o,_e){_e===void 0&&(_e=!1);var tt=isHTMLElement$1(o),ct=isHTMLElement$1(o)&&isElementScaled(o),gt=getDocumentElement(o),rt=getBoundingClientRect(a,ct,_e),it={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(tt||!tt&&!_e)&&((getNodeName(o)!=="body"||isScrollParent(gt))&&(it=getNodeScroll(o)),isHTMLElement$1(o)?(s=getBoundingClientRect(o,!0),s.x+=o.clientLeft,s.y+=o.clientTop):gt&&(s.x=getWindowScrollBarX(gt))),{x:rt.left+it.scrollLeft-s.x,y:rt.top+it.scrollTop-s.y,width:rt.width,height:rt.height}}function order(a){var o=new Map,_e=new Set,tt=[];a.forEach(function(gt){o.set(gt.name,gt)});function ct(gt){_e.add(gt.name);var rt=[].concat(gt.requires||[],gt.requiresIfExists||[]);rt.forEach(function(it){if(!_e.has(it)){var s=o.get(it);s&&ct(s)}}),tt.push(gt)}return a.forEach(function(gt){_e.has(gt.name)||ct(gt)}),tt}function orderModifiers(a){var o=order(a);return modifierPhases.reduce(function(_e,tt){return _e.concat(o.filter(function(ct){return ct.phase===tt}))},[])}function debounce(a){var o;return function(){return o||(o=new Promise(function(_e){Promise.resolve().then(function(){o=void 0,_e(a())})})),o}}function mergeByName(a){var o=a.reduce(function(_e,tt){var ct=_e[tt.name];return _e[tt.name]=ct?Object.assign({},ct,tt,{options:Object.assign({},ct.options,tt.options),data:Object.assign({},ct.data,tt.data)}):tt,_e},{});return Object.keys(o).map(function(_e){return o[_e]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var a=arguments.length,o=new Array(a),_e=0;_e<a;_e++)o[_e]=arguments[_e];return!o.some(function(tt){return!(tt&&typeof tt.getBoundingClientRect=="function")})}function popperGenerator(a){a===void 0&&(a={});var o=a,_e=o.defaultModifiers,tt=_e===void 0?[]:_e,ct=o.defaultOptions,gt=ct===void 0?DEFAULT_OPTIONS:ct;return function(it,s,et){et===void 0&&(et=gt);var nt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,gt),modifiersData:{},elements:{reference:it,popper:s},attributes:{},styles:{}},at=[],ht=!1,dt={state:nt,setOptions:function(ot){var ut=typeof ot=="function"?ot(nt.options):ot;lt(),nt.options=Object.assign({},gt,nt.options,ut),nt.scrollParents={reference:isElement(it)?listScrollParents(it):it.contextElement?listScrollParents(it.contextElement):[],popper:listScrollParents(s)};var ft=orderModifiers(mergeByName([].concat(tt,nt.options.modifiers)));return nt.orderedModifiers=ft.filter(function(bt){return bt.enabled}),pt(),dt.update()},forceUpdate:function(){if(!ht){var ot=nt.elements,ut=ot.reference,ft=ot.popper;if(areValidElements(ut,ft)){nt.rects={reference:getCompositeRect(ut,getOffsetParent(ft),nt.options.strategy==="fixed"),popper:getLayoutRect(ft)},nt.reset=!1,nt.placement=nt.options.placement,nt.orderedModifiers.forEach(function(wt){return nt.modifiersData[wt.name]=Object.assign({},wt.data)});for(var bt=0;bt<nt.orderedModifiers.length;bt++){if(nt.reset===!0){nt.reset=!1,bt=-1;continue}var vt=nt.orderedModifiers[bt],yt=vt.fn,At=vt.options,Nt=At===void 0?{}:At,St=vt.name;typeof yt=="function"&&(nt=yt({state:nt,options:Nt,name:St,instance:dt})||nt)}}}},update:debounce(function(){return new Promise(function(mt){dt.forceUpdate(),mt(nt)})}),destroy:function(){lt(),ht=!0}};if(!areValidElements(it,s))return dt;dt.setOptions(et).then(function(mt){!ht&&et.onFirstUpdate&&et.onFirstUpdate(mt)});function pt(){nt.orderedModifiers.forEach(function(mt){var ot=mt.name,ut=mt.options,ft=ut===void 0?{}:ut,bt=mt.effect;if(typeof bt=="function"){var vt=bt({state:nt,name:ot,instance:dt,options:ft}),yt=function(){};at.push(vt||yt)}})}function lt(){at.forEach(function(mt){return mt()}),at=[]}return dt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(a){return typeof a=="function"?a():a}const Portal=reactExports.forwardRef(function(o,_e){const{children:tt,container:ct,disablePortal:gt=!1}=o,[rt,it]=reactExports.useState(null),s=useForkRef(reactExports.isValidElement(tt)?tt.ref:null,_e);if(useEnhancedEffect$1(()=>{gt||it(getContainer$1(ct)||document.body)},[ct,gt]),useEnhancedEffect$1(()=>{if(rt&&!gt)return setRef(_e,rt),()=>{setRef(_e,null)}},[_e,rt,gt]),gt){if(reactExports.isValidElement(tt)){const et={ref:s};return reactExports.cloneElement(tt,et)}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:tt})}return jsxRuntimeExports.jsx(reactExports.Fragment,{children:rt&&reactDomExports.createPortal(tt,rt)})});function getPopperUtilityClass(a){return generateUtilityClass("MuiPopper",a)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$r=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$3=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(a,o){if(o==="ltr")return a;switch(a){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return a}}function resolveAnchorEl$1(a){return typeof a=="function"?a():a}function isHTMLElement(a){return a.nodeType!==void 0}const useUtilityClasses$m=()=>composeClasses({root:["root"]},useClassNamesOverride(getPopperUtilityClass)),defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(o,_e){var tt;const{anchorEl:ct,children:gt,direction:rt,disablePortal:it,modifiers:s,open:et,placement:nt,popperOptions:at,popperRef:ht,slotProps:dt={},slots:pt={},TransitionProps:lt}=o,mt=_objectWithoutPropertiesLoose(o,_excluded$r),ot=reactExports.useRef(null),ut=useForkRef(ot,_e),ft=reactExports.useRef(null),bt=useForkRef(ft,ht),vt=reactExports.useRef(bt);useEnhancedEffect$1(()=>{vt.current=bt},[bt]),reactExports.useImperativeHandle(ht,()=>ft.current,[]);const yt=flipPlacement(nt,rt),[At,Nt]=reactExports.useState(yt),[St,wt]=reactExports.useState(resolveAnchorEl$1(ct));reactExports.useEffect(()=>{ft.current&&ft.current.forceUpdate()}),reactExports.useEffect(()=>{ct&&wt(resolveAnchorEl$1(ct))},[ct]),useEnhancedEffect$1(()=>{if(!St||!et)return;const Gt=Ft=>{Nt(Ft.placement)};let nn=[{name:"preventOverflow",options:{altBoundary:it}},{name:"flip",options:{altBoundary:it}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ft})=>{Gt(Ft)}}];s!=null&&(nn=nn.concat(s)),at&&at.modifiers!=null&&(nn=nn.concat(at.modifiers));const zt=createPopper(St,ot.current,_extends({placement:yt},at,{modifiers:nn}));return vt.current(zt),()=>{zt.destroy(),vt.current(null)}},[St,it,s,et,at,yt]);const Mt={placement:At};lt!==null&&(Mt.TransitionProps=lt);const Ht=useUtilityClasses$m(),Ot=(tt=pt.root)!=null?tt:"div",Dt=useSlotProps({elementType:Ot,externalSlotProps:dt.root,externalForwardedProps:mt,additionalProps:{role:"tooltip",ref:ut},ownerState:o,className:Ht.root});return jsxRuntimeExports.jsx(Ot,_extends({},Dt,{children:typeof gt=="function"?gt(Mt):gt}))}),Popper$2=reactExports.forwardRef(function(o,_e){const{anchorEl:tt,children:ct,container:gt,direction:rt="ltr",disablePortal:it=!1,keepMounted:s=!1,modifiers:et,open:nt,placement:at="bottom",popperOptions:ht=defaultPopperOptions,popperRef:dt,style:pt,transition:lt=!1,slotProps:mt={},slots:ot={}}=o,ut=_objectWithoutPropertiesLoose(o,_excluded2$3),[ft,bt]=reactExports.useState(!0),vt=()=>{bt(!1)},yt=()=>{bt(!0)};if(!s&&!nt&&(!lt||ft))return null;let At;if(gt)At=gt;else if(tt){const wt=resolveAnchorEl$1(tt);At=wt&&isHTMLElement(wt)?ownerDocument(wt).body:ownerDocument(null).body}const Nt=!nt&&s&&(!lt||ft)?"none":void 0,St=lt?{in:nt,onEnter:vt,onExited:yt}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:it,container:At,children:jsxRuntimeExports.jsx(PopperTooltip,_extends({anchorEl:tt,direction:rt,disablePortal:it,modifiers:et,ref:_e,open:lt?!ft:nt,placement:at,popperOptions:ht,popperRef:dt,slotProps:mt,slots:ot},ut,{style:_extends({position:"fixed",top:0,left:0,display:Nt},pt),TransitionProps:St,children:ct}))})});function isOverflowing(a){const o=ownerDocument(a);return o.body===a?ownerWindow(a).innerWidth>o.documentElement.clientWidth:a.scrollHeight>a.clientHeight}function ariaHidden(a,o){o?a.setAttribute("aria-hidden","true"):a.removeAttribute("aria-hidden")}function getPaddingRight(a){return parseInt(ownerWindow(a).getComputedStyle(a).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(a){const _e=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(a.tagName)!==-1,tt=a.tagName==="INPUT"&&a.getAttribute("type")==="hidden";return _e||tt}function ariaHiddenSiblings(a,o,_e,tt,ct){const gt=[o,_e,...tt];[].forEach.call(a.children,rt=>{const it=gt.indexOf(rt)===-1,s=!isAriaHiddenForbiddenOnElement(rt);it&&s&&ariaHidden(rt,ct)})}function findIndexOf(a,o){let _e=-1;return a.some((tt,ct)=>o(tt)?(_e=ct,!0):!1),_e}function handleContainer(a,o){const _e=[],tt=a.container;if(!o.disableScrollLock){if(isOverflowing(tt)){const rt=getScrollbarSize(ownerDocument(tt));_e.push({value:tt.style.paddingRight,property:"padding-right",el:tt}),tt.style.paddingRight=`${getPaddingRight(tt)+rt}px`;const it=ownerDocument(tt).querySelectorAll(".mui-fixed");[].forEach.call(it,s=>{_e.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${getPaddingRight(s)+rt}px`})}let gt;if(tt.parentNode instanceof DocumentFragment)gt=ownerDocument(tt).body;else{const rt=tt.parentElement,it=ownerWindow(tt);gt=(rt==null?void 0:rt.nodeName)==="HTML"&&it.getComputedStyle(rt).overflowY==="scroll"?rt:tt}_e.push({value:gt.style.overflow,property:"overflow",el:gt},{value:gt.style.overflowX,property:"overflow-x",el:gt},{value:gt.style.overflowY,property:"overflow-y",el:gt}),gt.style.overflow="hidden"}return()=>{_e.forEach(({value:gt,el:rt,property:it})=>{gt?rt.style.setProperty(it,gt):rt.style.removeProperty(it)})}}function getHiddenSiblings(a){const o=[];return[].forEach.call(a.children,_e=>{_e.getAttribute("aria-hidden")==="true"&&o.push(_e)}),o}class ModalManager{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(o,_e){let tt=this.modals.indexOf(o);if(tt!==-1)return tt;tt=this.modals.length,this.modals.push(o),o.modalRef&&ariaHidden(o.modalRef,!1);const ct=getHiddenSiblings(_e);ariaHiddenSiblings(_e,o.mount,o.modalRef,ct,!0);const gt=findIndexOf(this.containers,rt=>rt.container===_e);return gt!==-1?(this.containers[gt].modals.push(o),tt):(this.containers.push({modals:[o],container:_e,restore:null,hiddenSiblings:ct}),tt)}mount(o,_e){const tt=findIndexOf(this.containers,gt=>gt.modals.indexOf(o)!==-1),ct=this.containers[tt];ct.restore||(ct.restore=handleContainer(ct,_e))}remove(o,_e=!0){const tt=this.modals.indexOf(o);if(tt===-1)return tt;const ct=findIndexOf(this.containers,rt=>rt.modals.indexOf(o)!==-1),gt=this.containers[ct];if(gt.modals.splice(gt.modals.indexOf(o),1),this.modals.splice(tt,1),gt.modals.length===0)gt.restore&&gt.restore(),o.modalRef&&ariaHidden(o.modalRef,_e),ariaHiddenSiblings(gt.container,o.mount,o.modalRef,gt.hiddenSiblings,!1),this.containers.splice(ct,1);else{const rt=gt.modals[gt.modals.length-1];rt.modalRef&&ariaHidden(rt.modalRef,!1)}return tt}isTopModal(o){return this.modals.length>0&&this.modals[this.modals.length-1]===o}}function getContainer(a){return typeof a=="function"?a():a}function getHasTransition(a){return a?a.props.hasOwnProperty("in"):!1}const defaultManager=new ModalManager;function useModal(a){const{container:o,disableEscapeKeyDown:_e=!1,disableScrollLock:tt=!1,manager:ct=defaultManager,closeAfterTransition:gt=!1,onTransitionEnter:rt,onTransitionExited:it,children:s,onClose:et,open:nt,rootRef:at}=a,ht=reactExports.useRef({}),dt=reactExports.useRef(null),pt=reactExports.useRef(null),lt=useForkRef(pt,at),[mt,ot]=reactExports.useState(!nt),ut=getHasTransition(s);let ft=!0;(a["aria-hidden"]==="false"||a["aria-hidden"]===!1)&&(ft=!1);const bt=()=>ownerDocument(dt.current),vt=()=>(ht.current.modalRef=pt.current,ht.current.mount=dt.current,ht.current),yt=()=>{ct.mount(vt(),{disableScrollLock:tt}),pt.current&&(pt.current.scrollTop=0)},At=useEventCallback(()=>{const nn=getContainer(o)||bt().body;ct.add(vt(),nn),pt.current&&yt()}),Nt=reactExports.useCallback(()=>ct.isTopModal(vt()),[ct]),St=useEventCallback(nn=>{dt.current=nn,nn&&(nt&&Nt()?yt():pt.current&&ariaHidden(pt.current,ft))}),wt=reactExports.useCallback(()=>{ct.remove(vt(),ft)},[ft,ct]);reactExports.useEffect(()=>()=>{wt()},[wt]),reactExports.useEffect(()=>{nt?At():(!ut||!gt)&&wt()},[nt,wt,ut,gt,At]);const Mt=nn=>zt=>{var Ft;(Ft=nn.onKeyDown)==null||Ft.call(nn,zt),!(zt.key!=="Escape"||!Nt())&&(_e||(zt.stopPropagation(),et&&et(zt,"escapeKeyDown")))},Ht=nn=>zt=>{var Ft;(Ft=nn.onClick)==null||Ft.call(nn,zt),zt.target===zt.currentTarget&&et&&et(zt,"backdropClick")};return{getRootProps:(nn={})=>{const zt=extractEventHandlers(a);delete zt.onTransitionEnter,delete zt.onTransitionExited;const Ft=_extends({},zt,nn);return _extends({role:"presentation"},Ft,{onKeyDown:Mt(Ft),ref:lt})},getBackdropProps:(nn={})=>{const zt=nn;return _extends({"aria-hidden":!0},zt,{onClick:Ht(zt),open:nt})},getTransitionProps:()=>{const nn=()=>{ot(!1),rt&&rt()},zt=()=>{ot(!0),it&&it(),gt&&wt()};return{onEnter:createChainedFunction(nn,s==null?void 0:s.props.onEnter),onExited:createChainedFunction(zt,s==null?void 0:s.props.onExited)}},rootRef:lt,portalRef:St,isTopModal:Nt,exited:mt,hasTransition:ut}}const _excluded$q=["onChange","maxRows","minRows","style","value"];function getStyleValue(a){return parseInt(a,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$1(a){return a==null||Object.keys(a).length===0||a.outerHeightStyle===0&&!a.overflow}const TextareaAutosize=reactExports.forwardRef(function(o,_e){const{onChange:tt,maxRows:ct,minRows:gt=1,style:rt,value:it}=o,s=_objectWithoutPropertiesLoose(o,_excluded$q),{current:et}=reactExports.useRef(it!=null),nt=reactExports.useRef(null),at=useForkRef(_e,nt),ht=reactExports.useRef(null),dt=reactExports.useRef(0),[pt,lt]=reactExports.useState({outerHeightStyle:0}),mt=reactExports.useCallback(()=>{const bt=nt.current,yt=ownerWindow(bt).getComputedStyle(bt);if(yt.width==="0px")return{outerHeightStyle:0};const At=ht.current;At.style.width=yt.width,At.value=bt.value||o.placeholder||"x",At.value.slice(-1)===`
`&&(At.value+=" ");const Nt=yt.boxSizing,St=getStyleValue(yt.paddingBottom)+getStyleValue(yt.paddingTop),wt=getStyleValue(yt.borderBottomWidth)+getStyleValue(yt.borderTopWidth),Mt=At.scrollHeight;At.value="x";const Ht=At.scrollHeight;let Ot=Mt;gt&&(Ot=Math.max(Number(gt)*Ht,Ot)),ct&&(Ot=Math.min(Number(ct)*Ht,Ot)),Ot=Math.max(Ot,Ht);const Dt=Ot+(Nt==="border-box"?St+wt:0),Gt=Math.abs(Ot-Mt)<=1;return{outerHeightStyle:Dt,overflow:Gt}},[ct,gt,o.placeholder]),ot=(bt,vt)=>{const{outerHeightStyle:yt,overflow:At}=vt;return dt.current<20&&(yt>0&&Math.abs((bt.outerHeightStyle||0)-yt)>1||bt.overflow!==At)?(dt.current+=1,{overflow:At,outerHeightStyle:yt}):bt},ut=reactExports.useCallback(()=>{const bt=mt();isEmpty$1(bt)||lt(vt=>ot(vt,bt))},[mt]);useEnhancedEffect$1(()=>{const bt=()=>{const Mt=mt();isEmpty$1(Mt)||reactDomExports.flushSync(()=>{lt(Ht=>ot(Ht,Mt))})},vt=()=>{dt.current=0,bt()};let yt;const At=debounce$1(vt),Nt=nt.current,St=ownerWindow(Nt);St.addEventListener("resize",At);let wt;return typeof ResizeObserver<"u"&&(wt=new ResizeObserver(vt),wt.observe(Nt)),()=>{At.clear(),cancelAnimationFrame(yt),St.removeEventListener("resize",At),wt&&wt.disconnect()}},[mt]),useEnhancedEffect$1(()=>{ut()}),reactExports.useEffect(()=>{dt.current=0},[it]);const ft=bt=>{dt.current=0,et||ut(),tt&&tt(bt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",_extends({value:it,onChange:ft,ref:at,rows:gt,style:_extends({height:pt.outerHeightStyle,overflow:pt.overflow?"hidden":void 0},rt)},s)),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:o.className,readOnly:!0,ref:ht,tabIndex:-1,style:_extends({},styles$2.shadow,rt,{paddingTop:0,paddingBottom:0})})]})}),reflow=a=>a.scrollTop;function getTransitionProps(a,o){var _e,tt;const{timeout:ct,easing:gt,style:rt={}}=a;return{duration:(_e=rt.transitionDuration)!=null?_e:typeof ct=="number"?ct:ct[o.mode]||0,easing:(tt=rt.transitionTimingFunction)!=null?tt:typeof gt=="object"?gt[o.mode]:gt,delay:rt.transitionDelay}}const _excluded$p=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function getScale(a){return`scale(${a}, ${a**2})`}const styles$1={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(o,_e){const{addEndListener:tt,appear:ct=!0,children:gt,easing:rt,in:it,onEnter:s,onEntered:et,onEntering:nt,onExit:at,onExited:ht,onExiting:dt,style:pt,timeout:lt="auto",TransitionComponent:mt=Transition$1}=o,ot=_objectWithoutPropertiesLoose(o,_excluded$p),ut=reactExports.useRef(),ft=reactExports.useRef(),bt=useTheme(),vt=reactExports.useRef(null),yt=useForkRef(vt,gt.ref,_e),At=Gt=>nn=>{if(Gt){const zt=vt.current;nn===void 0?Gt(zt):Gt(zt,nn)}},Nt=At(nt),St=At((Gt,nn)=>{reflow(Gt);const{duration:zt,delay:Ft,easing:un}=getTransitionProps({style:pt,timeout:lt,easing:rt},{mode:"enter"});let vn;lt==="auto"?(vn=bt.transitions.getAutoHeightDuration(Gt.clientHeight),ft.current=vn):vn=zt,Gt.style.transition=[bt.transitions.create("opacity",{duration:vn,delay:Ft}),bt.transitions.create("transform",{duration:isWebKit154?vn:vn*.666,delay:Ft,easing:un})].join(","),s&&s(Gt,nn)}),wt=At(et),Mt=At(dt),Ht=At(Gt=>{const{duration:nn,delay:zt,easing:Ft}=getTransitionProps({style:pt,timeout:lt,easing:rt},{mode:"exit"});let un;lt==="auto"?(un=bt.transitions.getAutoHeightDuration(Gt.clientHeight),ft.current=un):un=nn,Gt.style.transition=[bt.transitions.create("opacity",{duration:un,delay:zt}),bt.transitions.create("transform",{duration:isWebKit154?un:un*.666,delay:isWebKit154?zt:zt||un*.333,easing:Ft})].join(","),Gt.style.opacity=0,Gt.style.transform=getScale(.75),at&&at(Gt)}),Ot=At(ht),Dt=Gt=>{lt==="auto"&&(ut.current=setTimeout(Gt,ft.current||0)),tt&&tt(vt.current,Gt)};return reactExports.useEffect(()=>()=>{clearTimeout(ut.current)},[]),jsxRuntimeExports.jsx(mt,_extends({appear:ct,in:it,nodeRef:vt,onEnter:St,onEntered:wt,onEntering:Nt,onExit:Ht,onExited:Ot,onExiting:Mt,addEndListener:Dt,timeout:lt==="auto"?null:lt},ot,{children:(Gt,nn)=>reactExports.cloneElement(gt,_extends({style:_extends({opacity:0,transform:getScale(.75),visibility:Gt==="exited"&&!it?"hidden":void 0},styles$1[Gt],pt,gt.props.style),ref:yt},nn))}))});Grow.muiSupportAuto=!0;const Grow$1=Grow,_excluded$o=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],styles={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(o,_e){const tt=useTheme(),ct={enter:tt.transitions.duration.enteringScreen,exit:tt.transitions.duration.leavingScreen},{addEndListener:gt,appear:rt=!0,children:it,easing:s,in:et,onEnter:nt,onEntered:at,onEntering:ht,onExit:dt,onExited:pt,onExiting:lt,style:mt,timeout:ot=ct,TransitionComponent:ut=Transition$1}=o,ft=_objectWithoutPropertiesLoose(o,_excluded$o),bt=reactExports.useRef(null),vt=useForkRef(bt,it.ref,_e),yt=Dt=>Gt=>{if(Dt){const nn=bt.current;Gt===void 0?Dt(nn):Dt(nn,Gt)}},At=yt(ht),Nt=yt((Dt,Gt)=>{reflow(Dt);const nn=getTransitionProps({style:mt,timeout:ot,easing:s},{mode:"enter"});Dt.style.webkitTransition=tt.transitions.create("opacity",nn),Dt.style.transition=tt.transitions.create("opacity",nn),nt&&nt(Dt,Gt)}),St=yt(at),wt=yt(lt),Mt=yt(Dt=>{const Gt=getTransitionProps({style:mt,timeout:ot,easing:s},{mode:"exit"});Dt.style.webkitTransition=tt.transitions.create("opacity",Gt),Dt.style.transition=tt.transitions.create("opacity",Gt),dt&&dt(Dt)}),Ht=yt(pt),Ot=Dt=>{gt&&gt(bt.current,Dt)};return jsxRuntimeExports.jsx(ut,_extends({appear:rt,in:et,nodeRef:bt,onEnter:Nt,onEntered:St,onEntering:At,onExit:Mt,onExited:Ht,onExiting:wt,addEndListener:Ot,timeout:ot},ft,{children:(Dt,Gt)=>reactExports.cloneElement(it,_extends({style:_extends({opacity:0,visibility:Dt==="exited"&&!et?"hidden":void 0},styles[Dt],mt,it.props.style),ref:vt},Gt))}))}),Fade$1=Fade;function getBackdropUtilityClass(a){return generateUtilityClass("MuiBackdrop",a)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const _excluded$n=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],useUtilityClasses$l=a=>{const{classes:o,invisible:_e}=a;return composeClasses({root:["root",_e&&"invisible"]},getBackdropUtilityClass,o)},BackdropRoot=styled$1("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.invisible&&o.invisible]}})(({ownerState:a})=>_extends({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},a.invisible&&{backgroundColor:"transparent"})),Backdrop=reactExports.forwardRef(function(o,_e){var tt,ct,gt;const rt=useThemeProps({props:o,name:"MuiBackdrop"}),{children:it,className:s,component:et="div",components:nt={},componentsProps:at={},invisible:ht=!1,open:dt,slotProps:pt={},slots:lt={},TransitionComponent:mt=Fade$1,transitionDuration:ot}=rt,ut=_objectWithoutPropertiesLoose(rt,_excluded$n),ft=_extends({},rt,{component:et,invisible:ht}),bt=useUtilityClasses$l(ft),vt=(tt=pt.root)!=null?tt:at.root;return jsxRuntimeExports.jsx(mt,_extends({in:dt,timeout:ot},ut,{children:jsxRuntimeExports.jsx(BackdropRoot,_extends({"aria-hidden":!0},vt,{as:(ct=(gt=lt.root)!=null?gt:nt.Root)!=null?ct:et,className:clsx(bt.root,s,vt==null?void 0:vt.className),ownerState:_extends({},ft,vt==null?void 0:vt.ownerState),classes:bt,ref:_e,children:it}))}))}),Backdrop$1=Backdrop;function getModalUtilityClass(a){return generateUtilityClass("MuiModal",a)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const _excluded$m=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],useUtilityClasses$k=a=>{const{open:o,exited:_e,classes:tt}=a;return composeClasses({root:["root",!o&&_e&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,tt)},ModalRoot=styled$1("div",{name:"MuiModal",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,!_e.open&&_e.exited&&o.hidden]}})(({theme:a,ownerState:o})=>_extends({position:"fixed",zIndex:(a.vars||a).zIndex.modal,right:0,bottom:0,top:0,left:0},!o.open&&o.exited&&{visibility:"hidden"})),ModalBackdrop=styled$1(Backdrop$1,{name:"MuiModal",slot:"Backdrop",overridesResolver:(a,o)=>o.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,it,s;const et=useThemeProps({name:"MuiModal",props:o}),{BackdropComponent:nt=ModalBackdrop,BackdropProps:at,className:ht,closeAfterTransition:dt=!1,children:pt,container:lt,component:mt,components:ot={},componentsProps:ut={},disableAutoFocus:ft=!1,disableEnforceFocus:bt=!1,disableEscapeKeyDown:vt=!1,disablePortal:yt=!1,disableRestoreFocus:At=!1,disableScrollLock:Nt=!1,hideBackdrop:St=!1,keepMounted:wt=!1,onBackdropClick:Mt,open:Ht,slotProps:Ot,slots:Dt}=et,Gt=_objectWithoutPropertiesLoose(et,_excluded$m),nn=_extends({},et,{closeAfterTransition:dt,disableAutoFocus:ft,disableEnforceFocus:bt,disableEscapeKeyDown:vt,disablePortal:yt,disableRestoreFocus:At,disableScrollLock:Nt,hideBackdrop:St,keepMounted:wt}),{getRootProps:zt,getBackdropProps:Ft,getTransitionProps:un,portalRef:vn,isTopModal:yn,exited:cn,hasTransition:gn}=useModal(_extends({},nn,{rootRef:_e})),Cn=_extends({},nn,{exited:cn}),fn=useUtilityClasses$k(Cn),Tn={};if(pt.props.tabIndex===void 0&&(Tn.tabIndex="-1"),gn){const{onEnter:xn,onExited:Yn}=un();Tn.onEnter=xn,Tn.onExited=Yn}const On=(tt=(ct=Dt==null?void 0:Dt.root)!=null?ct:ot.Root)!=null?tt:ModalRoot,Ln=(gt=(rt=Dt==null?void 0:Dt.backdrop)!=null?rt:ot.Backdrop)!=null?gt:nt,An=(it=Ot==null?void 0:Ot.root)!=null?it:ut.root,Rn=(s=Ot==null?void 0:Ot.backdrop)!=null?s:ut.backdrop,In=useSlotProps({elementType:On,externalSlotProps:An,externalForwardedProps:Gt,getSlotProps:zt,additionalProps:{ref:_e,as:mt},ownerState:Cn,className:clsx(ht,An==null?void 0:An.className,fn==null?void 0:fn.root,!Cn.open&&Cn.exited&&(fn==null?void 0:fn.hidden))}),kn=useSlotProps({elementType:Ln,externalSlotProps:Rn,additionalProps:at,getSlotProps:xn=>Ft(_extends({},xn,{onClick:Yn=>{Mt&&Mt(Yn),xn!=null&&xn.onClick&&xn.onClick(Yn)}})),className:clsx(Rn==null?void 0:Rn.className,at==null?void 0:at.className,fn==null?void 0:fn.backdrop),ownerState:Cn});return!wt&&!Ht&&(!gn||cn)?null:jsxRuntimeExports.jsx(Portal,{ref:vn,container:lt,disablePortal:yt,children:jsxRuntimeExports.jsxs(On,_extends({},In,{children:[!St&&nt?jsxRuntimeExports.jsx(Ln,_extends({},kn)):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:bt,disableAutoFocus:ft,disableRestoreFocus:At,isEnabled:yn,open:Ht,children:reactExports.cloneElement(pt,Tn)})]}))})}),Modal$1=Modal;function getPopoverUtilityClass(a){return generateUtilityClass("MuiPopover",a)}generateUtilityClasses("MuiPopover",["root","paper"]);const _excluded$l=["onEntering"],_excluded2$2=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],_excluded3=["slotProps"];function getOffsetTop(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.height/2:o==="bottom"&&(_e=a.height),_e}function getOffsetLeft(a,o){let _e=0;return typeof o=="number"?_e=o:o==="center"?_e=a.width/2:o==="right"&&(_e=a.width),_e}function getTransformOriginValue(a){return[a.horizontal,a.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function resolveAnchorEl(a){return typeof a=="function"?a():a}const useUtilityClasses$j=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,o)},PopoverRoot=styled$1(Modal$1,{name:"MuiPopover",slot:"Root",overridesResolver:(a,o)=>o.root})({}),PopoverPaper=styled$1(Paper$1,{name:"MuiPopover",slot:"Paper",overridesResolver:(a,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(o,_e){var tt,ct,gt;const rt=useThemeProps({props:o,name:"MuiPopover"}),{action:it,anchorEl:s,anchorOrigin:et={vertical:"top",horizontal:"left"},anchorPosition:nt,anchorReference:at="anchorEl",children:ht,className:dt,container:pt,elevation:lt=8,marginThreshold:mt=16,open:ot,PaperProps:ut={},slots:ft,slotProps:bt,transformOrigin:vt={vertical:"top",horizontal:"left"},TransitionComponent:yt=Grow$1,transitionDuration:At="auto",TransitionProps:{onEntering:Nt}={},disableScrollLock:St=!1}=rt,wt=_objectWithoutPropertiesLoose(rt.TransitionProps,_excluded$l),Mt=_objectWithoutPropertiesLoose(rt,_excluded2$2),Ht=(tt=bt==null?void 0:bt.paper)!=null?tt:ut,Ot=reactExports.useRef(),Dt=useForkRef(Ot,Ht.ref),Gt=_extends({},rt,{anchorOrigin:et,anchorReference:at,elevation:lt,marginThreshold:mt,externalPaperSlotProps:Ht,transformOrigin:vt,TransitionComponent:yt,transitionDuration:At,TransitionProps:wt}),nn=useUtilityClasses$j(Gt),zt=reactExports.useCallback(()=>{if(at==="anchorPosition")return nt;const xn=resolveAnchorEl(s),Un=(xn&&xn.nodeType===1?xn:ownerDocument(Ot.current).body).getBoundingClientRect();return{top:Un.top+getOffsetTop(Un,et.vertical),left:Un.left+getOffsetLeft(Un,et.horizontal)}},[s,et.horizontal,et.vertical,nt,at]),Ft=reactExports.useCallback(xn=>({vertical:getOffsetTop(xn,vt.vertical),horizontal:getOffsetLeft(xn,vt.horizontal)}),[vt.horizontal,vt.vertical]),un=reactExports.useCallback(xn=>{const Yn={width:xn.offsetWidth,height:xn.offsetHeight},Un=Ft(Yn);if(at==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Un)};const jn=zt();let Qn=jn.top-Un.vertical,on=jn.left-Un.horizontal;const Hn=Qn+Yn.height,Fn=on+Yn.width,Vn=ownerWindow(resolveAnchorEl(s)),Bn=Vn.innerHeight-mt,qn=Vn.innerWidth-mt;if(mt!==null&&Qn<mt){const Gn=Qn-mt;Qn-=Gn,Un.vertical+=Gn}else if(mt!==null&&Hn>Bn){const Gn=Hn-Bn;Qn-=Gn,Un.vertical+=Gn}if(mt!==null&&on<mt){const Gn=on-mt;on-=Gn,Un.horizontal+=Gn}else if(Fn>qn){const Gn=Fn-qn;on-=Gn,Un.horizontal+=Gn}return{top:`${Math.round(Qn)}px`,left:`${Math.round(on)}px`,transformOrigin:getTransformOriginValue(Un)}},[s,at,zt,Ft,mt]),[vn,yn]=reactExports.useState(ot),cn=reactExports.useCallback(()=>{const xn=Ot.current;if(!xn)return;const Yn=un(xn);Yn.top!==null&&(xn.style.top=Yn.top),Yn.left!==null&&(xn.style.left=Yn.left),xn.style.transformOrigin=Yn.transformOrigin,yn(!0)},[un]);reactExports.useEffect(()=>(St&&window.addEventListener("scroll",cn),()=>window.removeEventListener("scroll",cn)),[s,St,cn]);const gn=(xn,Yn)=>{Nt&&Nt(xn,Yn),cn()},Cn=()=>{yn(!1)};reactExports.useEffect(()=>{ot&&cn()}),reactExports.useImperativeHandle(it,()=>ot?{updatePosition:()=>{cn()}}:null,[ot,cn]),reactExports.useEffect(()=>{if(!ot)return;const xn=debounce$1(()=>{cn()}),Yn=ownerWindow(s);return Yn.addEventListener("resize",xn),()=>{xn.clear(),Yn.removeEventListener("resize",xn)}},[s,ot,cn]);let fn=At;At==="auto"&&!yt.muiSupportAuto&&(fn=void 0);const Tn=pt||(s?ownerDocument(resolveAnchorEl(s)).body:void 0),On=(ct=ft==null?void 0:ft.root)!=null?ct:PopoverRoot,Ln=(gt=ft==null?void 0:ft.paper)!=null?gt:PopoverPaper,An=useSlotProps({elementType:Ln,externalSlotProps:_extends({},Ht,{style:vn?Ht.style:_extends({},Ht.style,{opacity:0})}),additionalProps:{elevation:lt,ref:Dt},ownerState:Gt,className:clsx(nn.paper,Ht==null?void 0:Ht.className)}),Rn=useSlotProps({elementType:On,externalSlotProps:(bt==null?void 0:bt.root)||{},externalForwardedProps:Mt,additionalProps:{ref:_e,slotProps:{backdrop:{invisible:!0}},container:Tn,open:ot},ownerState:Gt,className:clsx(nn.root,dt)}),{slotProps:In}=Rn,kn=_objectWithoutPropertiesLoose(Rn,_excluded3);return jsxRuntimeExports.jsx(On,_extends({},kn,!isHostComponent(On)&&{slotProps:In,disableScrollLock:St},{children:jsxRuntimeExports.jsx(yt,_extends({appear:!0,in:ot,onEntering:gn,onExited:Cn,timeout:fn},wt,{children:jsxRuntimeExports.jsx(Ln,_extends({},An,{children:ht}))}))}))}),Popover$1=Popover;function getMenuUtilityClass(a){return generateUtilityClass("MuiMenu",a)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const _excluded$k=["onEntering"],_excluded2$1=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$i=a=>{const{classes:o}=a;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,o)},MenuRoot=styled$1(Popover$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(a,o)=>o.root})({}),MenuPaper=styled$1(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(a,o)=>o.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled$1(MenuList$1,{name:"MuiMenu",slot:"List",overridesResolver:(a,o)=>o.list})({outline:0}),Menu=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiMenu"}),{autoFocus:rt=!0,children:it,className:s,disableAutoFocusItem:et=!1,MenuListProps:nt={},onClose:at,open:ht,PaperProps:dt={},PopoverClasses:pt,transitionDuration:lt="auto",TransitionProps:{onEntering:mt}={},variant:ot="selectedMenu",slots:ut={},slotProps:ft={}}=gt,bt=_objectWithoutPropertiesLoose(gt.TransitionProps,_excluded$k),vt=_objectWithoutPropertiesLoose(gt,_excluded2$1),yt=useTheme(),At=yt.direction==="rtl",Nt=_extends({},gt,{autoFocus:rt,disableAutoFocusItem:et,MenuListProps:nt,onEntering:mt,PaperProps:dt,transitionDuration:lt,TransitionProps:bt,variant:ot}),St=useUtilityClasses$i(Nt),wt=rt&&!et&&ht,Mt=reactExports.useRef(null),Ht=(un,vn)=>{Mt.current&&Mt.current.adjustStyleForScrollbar(un,yt),mt&&mt(un,vn)},Ot=un=>{un.key==="Tab"&&(un.preventDefault(),at&&at(un,"tabKeyDown"))};let Dt=-1;reactExports.Children.map(it,(un,vn)=>{reactExports.isValidElement(un)&&(un.props.disabled||(ot==="selectedMenu"&&un.props.selected||Dt===-1)&&(Dt=vn))});const Gt=(tt=ut.paper)!=null?tt:MenuPaper,nn=(ct=ft.paper)!=null?ct:dt,zt=useSlotProps({elementType:ut.root,externalSlotProps:ft.root,ownerState:Nt,className:[St.root,s]}),Ft=useSlotProps({elementType:Gt,externalSlotProps:nn,ownerState:Nt,className:St.paper});return jsxRuntimeExports.jsx(MenuRoot,_extends({onClose:at,anchorOrigin:{vertical:"bottom",horizontal:At?"right":"left"},transformOrigin:At?RTL_ORIGIN:LTR_ORIGIN,slots:{paper:Gt,root:ut.root},slotProps:{root:zt,paper:Ft},open:ht,ref:_e,transitionDuration:lt,TransitionProps:_extends({onEntering:Ht},bt),ownerState:Nt},vt,{classes:pt,children:jsxRuntimeExports.jsx(MenuMenuList,_extends({onKeyDown:Ot,actions:Mt,autoFocus:rt&&(Dt===-1||et),autoFocusItem:wt,variant:ot},nt,{className:clsx(St.list,nt.className),children:it}))}))}),Menu$1=Menu;function getNativeSelectUtilityClasses(a){return generateUtilityClass("MuiNativeSelect",a)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nativeSelectClasses$1=nativeSelectClasses,_excluded$j=["className","disabled","error","IconComponent","inputRef","variant"],useUtilityClasses$h=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:gt,error:rt}=a,it={select:["select",_e,tt&&"disabled",ct&&"multiple",rt&&"error"],icon:["icon",`icon${capitalize(_e)}`,gt&&"iconOpen",tt&&"disabled"]};return composeClasses(it,getNativeSelectUtilityClasses,o)},nativeSelectSelectStyles=({ownerState:a,theme:o})=>_extends({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":_extends({},o.vars?{backgroundColor:`rgba(${o.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:o.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${nativeSelectClasses$1.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(o.vars||o).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},a.variant==="filled"&&{"&&&":{paddingRight:32}},a.variant==="outlined"&&{borderRadius:(o.vars||o).shape.borderRadius,"&:focus":{borderRadius:(o.vars||o).shape.borderRadius},"&&&":{paddingRight:32}}),NativeSelectSelect=styled$1("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.select,o[_e.variant],_e.error&&o.error,{[`&.${nativeSelectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles),nativeSelectIconStyles=({ownerState:a,theme:o})=>_extends({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(o.vars||o).palette.action.active,[`&.${nativeSelectClasses$1.disabled}`]:{color:(o.vars||o).palette.action.disabled}},a.open&&{transform:"rotate(180deg)"},a.variant==="filled"&&{right:7},a.variant==="outlined"&&{right:7}),NativeSelectIcon=styled$1("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),NativeSelectInput=reactExports.forwardRef(function(o,_e){const{className:tt,disabled:ct,error:gt,IconComponent:rt,inputRef:it,variant:s="standard"}=o,et=_objectWithoutPropertiesLoose(o,_excluded$j),nt=_extends({},o,{disabled:ct,variant:s,error:gt}),at=useUtilityClasses$h(nt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,_extends({ownerState:nt,className:clsx(at.select,tt),disabled:ct,ref:it||_e},et)),o.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:rt,ownerState:nt,className:at.icon})]})}),NativeSelectInput$1=NativeSelectInput;function hasValue(a){return a!=null&&!(Array.isArray(a)&&a.length===0)}function isFilled(a,o=!1){return a&&(hasValue(a.value)&&a.value!==""||o&&hasValue(a.defaultValue)&&a.defaultValue!=="")}function getSelectUtilityClasses(a){return generateUtilityClass("MuiSelect",a)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),selectClasses$1=selectClasses;var _span$1;const _excluded$i=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SelectSelect=styled$1("div",{name:"MuiSelect",slot:"Select",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`&.${selectClasses$1.select}`]:o.select},{[`&.${selectClasses$1.select}`]:o[_e.variant]},{[`&.${selectClasses$1.error}`]:o.error},{[`&.${selectClasses$1.multiple}`]:o.multiple}]}})(nativeSelectSelectStyles,{[`&.${selectClasses$1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled$1("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.icon,_e.variant&&o[`icon${capitalize(_e.variant)}`],_e.open&&o.iconOpen]}})(nativeSelectIconStyles),SelectNativeInput=styled$1("input",{shouldForwardProp:a=>slotShouldForwardProp(a)&&a!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(a,o)=>o.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(a,o){return typeof o=="object"&&o!==null?a===o:String(a)===String(o)}function isEmpty(a){return a==null||typeof a=="string"&&!a.trim()}const useUtilityClasses$g=a=>{const{classes:o,variant:_e,disabled:tt,multiple:ct,open:gt,error:rt}=a,it={select:["select",_e,tt&&"disabled",ct&&"multiple",rt&&"error"],icon:["icon",`icon${capitalize(_e)}`,gt&&"iconOpen",tt&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(it,getSelectUtilityClasses,o)},SelectInput=reactExports.forwardRef(function(o,_e){var tt;const{"aria-describedby":ct,"aria-label":gt,autoFocus:rt,autoWidth:it,children:s,className:et,defaultOpen:nt,defaultValue:at,disabled:ht,displayEmpty:dt,error:pt=!1,IconComponent:lt,inputRef:mt,labelId:ot,MenuProps:ut={},multiple:ft,name:bt,onBlur:vt,onChange:yt,onClose:At,onFocus:Nt,onOpen:St,open:wt,readOnly:Mt,renderValue:Ht,SelectDisplayProps:Ot={},tabIndex:Dt,value:Gt,variant:nn="standard"}=o,zt=_objectWithoutPropertiesLoose(o,_excluded$i),[Ft,un]=useControlled({controlled:Gt,default:at,name:"Select"}),[vn,yn]=useControlled({controlled:wt,default:nt,name:"Select"}),cn=reactExports.useRef(null),gn=reactExports.useRef(null),[Cn,fn]=reactExports.useState(null),{current:Tn}=reactExports.useRef(wt!=null),[On,Ln]=reactExports.useState(),An=useForkRef(_e,mt),Rn=reactExports.useCallback(Rt=>{gn.current=Rt,Rt&&fn(Rt)},[]),In=Cn==null?void 0:Cn.parentNode;reactExports.useImperativeHandle(An,()=>({focus:()=>{gn.current.focus()},node:cn.current,value:Ft}),[Ft]),reactExports.useEffect(()=>{nt&&vn&&Cn&&!Tn&&(Ln(it?null:In.clientWidth),gn.current.focus())},[Cn,it]),reactExports.useEffect(()=>{rt&&gn.current.focus()},[rt]),reactExports.useEffect(()=>{if(!ot)return;const Rt=ownerDocument(gn.current).getElementById(ot);if(Rt){const Lt=()=>{getSelection().isCollapsed&&gn.current.focus()};return Rt.addEventListener("click",Lt),()=>{Rt.removeEventListener("click",Lt)}}},[ot]);const kn=(Rt,Lt)=>{Rt?St&&St(Lt):At&&At(Lt),Tn||(Ln(it?null:In.clientWidth),yn(Rt))},xn=Rt=>{Rt.button===0&&(Rt.preventDefault(),gn.current.focus(),kn(!0,Rt))},Yn=Rt=>{kn(!1,Rt)},Un=reactExports.Children.toArray(s),jn=Rt=>{const Lt=Un.find(Et=>Et.props.value===Rt.target.value);Lt!==void 0&&(un(Lt.props.value),yt&&yt(Rt,Lt))},Qn=Rt=>Lt=>{let Et;if(Lt.currentTarget.hasAttribute("tabindex")){if(ft){Et=Array.isArray(Ft)?Ft.slice():[];const jt=Ft.indexOf(Rt.props.value);jt===-1?Et.push(Rt.props.value):Et.splice(jt,1)}else Et=Rt.props.value;if(Rt.props.onClick&&Rt.props.onClick(Lt),Ft!==Et&&(un(Et),yt)){const jt=Lt.nativeEvent||Lt,Pt=new jt.constructor(jt.type,jt);Object.defineProperty(Pt,"target",{writable:!0,value:{value:Et,name:bt}}),yt(Pt,Rt)}ft||kn(!1,Lt)}},on=Rt=>{Mt||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Rt.key)!==-1&&(Rt.preventDefault(),kn(!0,Rt))},Hn=Cn!==null&&vn,Fn=Rt=>{!Hn&&vt&&(Object.defineProperty(Rt,"target",{writable:!0,value:{value:Ft,name:bt}}),vt(Rt))};delete zt["aria-invalid"];let Vn,Bn;const qn=[];let Gn=!1;(isFilled({value:Ft})||dt)&&(Ht?Vn=Ht(Ft):Gn=!0);const _n=Un.map(Rt=>{if(!reactExports.isValidElement(Rt))return null;let Lt;if(ft){if(!Array.isArray(Ft))throw new Error(formatMuiErrorMessage(2));Lt=Ft.some(Et=>areEqualValues(Et,Rt.props.value)),Lt&&Gn&&qn.push(Rt.props.children)}else Lt=areEqualValues(Ft,Rt.props.value),Lt&&Gn&&(Bn=Rt.props.children);return reactExports.cloneElement(Rt,{"aria-selected":Lt?"true":"false",onClick:Qn(Rt),onKeyUp:Et=>{Et.key===" "&&Et.preventDefault(),Rt.props.onKeyUp&&Rt.props.onKeyUp(Et)},role:"option",selected:Lt,value:void 0,"data-value":Rt.props.value})});Gn&&(ft?qn.length===0?Vn=null:Vn=qn.reduce((Rt,Lt,Et)=>(Rt.push(Lt),Et<qn.length-1&&Rt.push(", "),Rt),[]):Vn=Bn);let $n=On;!it&&Tn&&Cn&&($n=In.clientWidth);let bn;typeof Dt<"u"?bn=Dt:bn=ht?null:0;const wn=Ot.id||(bt?`mui-component-select-${bt}`:void 0),Yt=_extends({},o,{variant:nn,value:Ft,open:Hn,error:pt}),kt=useUtilityClasses$g(Yt),st=_extends({},ut.PaperProps,(tt=ut.slotProps)==null?void 0:tt.paper),Tt=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,_extends({ref:Rn,tabIndex:bn,role:"combobox","aria-controls":Tt,"aria-disabled":ht?"true":void 0,"aria-expanded":Hn?"true":"false","aria-haspopup":"listbox","aria-label":gt,"aria-labelledby":[ot,wn].filter(Boolean).join(" ")||void 0,"aria-describedby":ct,onKeyDown:on,onMouseDown:ht||Mt?null:xn,onBlur:Fn,onFocus:Nt},Ot,{ownerState:Yt,className:clsx(Ot.className,kt.select,et),id:wn,children:isEmpty(Vn)?_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"})):Vn})),jsxRuntimeExports.jsx(SelectNativeInput,_extends({"aria-invalid":pt,value:Array.isArray(Ft)?Ft.join(","):Ft,name:bt,ref:cn,"aria-hidden":!0,onChange:jn,tabIndex:-1,disabled:ht,className:kt.nativeInput,autoFocus:rt,ownerState:Yt},zt)),jsxRuntimeExports.jsx(SelectIcon,{as:lt,className:kt.icon,ownerState:Yt}),jsxRuntimeExports.jsx(Menu$1,_extends({id:`menu-${bt||""}`,anchorEl:In,open:Hn,onClose:Yn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},ut,{MenuListProps:_extends({"aria-labelledby":ot,role:"listbox","aria-multiselectable":ft?"true":void 0,disableListWrap:!0,id:Tt},ut.MenuListProps),slotProps:_extends({},ut.slotProps,{paper:_extends({},st,{style:_extends({minWidth:$n},st!=null?st.style:null)})}),children:_n}))]})}),SelectInput$1=SelectInput;function formControlState({props:a,states:o,muiFormControl:_e}){return o.reduce((tt,ct)=>(tt[ct]=a[ct],_e&&typeof a[ct]>"u"&&(tt[ct]=_e[ct]),tt),{})}const FormControlContext=reactExports.createContext(void 0),FormControlContext$1=FormControlContext;function useFormControl(){return reactExports.useContext(FormControlContext$1)}const ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function GlobalStyles(a){return jsxRuntimeExports.jsx(GlobalStyles$1,_extends({},a,{defaultTheme:defaultTheme$2,themeId:THEME_ID}))}function getInputBaseUtilityClass(a){return generateUtilityClass("MuiInputBase",a)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),inputBaseClasses$1=inputBaseClasses,_excluded$h=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],rootOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.formControl&&o.formControl,_e.startAdornment&&o.adornedStart,_e.endAdornment&&o.adornedEnd,_e.error&&o.error,_e.size==="small"&&o.sizeSmall,_e.multiline&&o.multiline,_e.color&&o[`color${capitalize(_e.color)}`],_e.fullWidth&&o.fullWidth,_e.hiddenLabel&&o.hiddenLabel]},inputOverridesResolver=(a,o)=>{const{ownerState:_e}=a;return[o.input,_e.size==="small"&&o.inputSizeSmall,_e.multiline&&o.inputMultiline,_e.type==="search"&&o.inputTypeSearch,_e.startAdornment&&o.inputAdornedStart,_e.endAdornment&&o.inputAdornedEnd,_e.hiddenLabel&&o.inputHiddenLabel]},useUtilityClasses$f=a=>{const{classes:o,color:_e,disabled:tt,error:ct,endAdornment:gt,focused:rt,formControl:it,fullWidth:s,hiddenLabel:et,multiline:nt,readOnly:at,size:ht,startAdornment:dt,type:pt}=a,lt={root:["root",`color${capitalize(_e)}`,tt&&"disabled",ct&&"error",s&&"fullWidth",rt&&"focused",it&&"formControl",ht&&ht!=="medium"&&`size${capitalize(ht)}`,nt&&"multiline",dt&&"adornedStart",gt&&"adornedEnd",et&&"hiddenLabel",at&&"readOnly"],input:["input",tt&&"disabled",pt==="search"&&"inputTypeSearch",nt&&"inputMultiline",ht==="small"&&"inputSizeSmall",et&&"inputHiddenLabel",dt&&"inputAdornedStart",gt&&"inputAdornedEnd",at&&"readOnly"]};return composeClasses(lt,getInputBaseUtilityClass,o)},InputBaseRoot=styled$1("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>_extends({},a.typography.body1,{color:(a.vars||a).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled,cursor:"default"}},o.multiline&&_extends({padding:"4px 0 5px"},o.size==="small"&&{paddingTop:1}),o.fullWidth&&{width:"100%"})),InputBaseComponent=styled$1("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light",tt=_extends({color:"currentColor"},a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5},{transition:a.transitions.create("opacity",{duration:a.transitions.duration.shorter})}),ct={opacity:"0 !important"},gt=a.vars?{opacity:a.vars.opacity.inputPlaceholder}:{opacity:_e?.42:.5};return _extends({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":tt,"&::-moz-placeholder":tt,"&:-ms-input-placeholder":tt,"&::-ms-input-placeholder":tt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses$1.formControl} &`]:{"&::-webkit-input-placeholder":ct,"&::-moz-placeholder":ct,"&:-ms-input-placeholder":ct,"&::-ms-input-placeholder":ct,"&:focus::-webkit-input-placeholder":gt,"&:focus::-moz-placeholder":gt,"&:focus:-ms-input-placeholder":gt,"&:focus::-ms-input-placeholder":gt},[`&.${inputBaseClasses$1.disabled}`]:{opacity:1,WebkitTextFillColor:(a.vars||a).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},o.size==="small"&&{paddingTop:1},o.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},o.type==="search"&&{MozAppearance:"textfield"})}),inputGlobalStyles=jsxRuntimeExports.jsx(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),InputBase=reactExports.forwardRef(function(o,_e){var tt;const ct=useThemeProps({props:o,name:"MuiInputBase"}),{"aria-describedby":gt,autoComplete:rt,autoFocus:it,className:s,components:et={},componentsProps:nt={},defaultValue:at,disabled:ht,disableInjectingGlobalStyles:dt,endAdornment:pt,fullWidth:lt=!1,id:mt,inputComponent:ot="input",inputProps:ut={},inputRef:ft,maxRows:bt,minRows:vt,multiline:yt=!1,name:At,onBlur:Nt,onChange:St,onClick:wt,onFocus:Mt,onKeyDown:Ht,onKeyUp:Ot,placeholder:Dt,readOnly:Gt,renderSuffix:nn,rows:zt,slotProps:Ft={},slots:un={},startAdornment:vn,type:yn="text",value:cn}=ct,gn=_objectWithoutPropertiesLoose(ct,_excluded$h),Cn=ut.value!=null?ut.value:cn,{current:fn}=reactExports.useRef(Cn!=null),Tn=reactExports.useRef(),On=reactExports.useCallback(wn=>{},[]),Ln=useForkRef(Tn,ft,ut.ref,On),[An,Rn]=reactExports.useState(!1),In=useFormControl(),kn=formControlState({props:ct,muiFormControl:In,states:["color","disabled","error","hiddenLabel","size","required","filled"]});kn.focused=In?In.focused:An,reactExports.useEffect(()=>{!In&&ht&&An&&(Rn(!1),Nt&&Nt())},[In,ht,An,Nt]);const xn=In&&In.onFilled,Yn=In&&In.onEmpty,Un=reactExports.useCallback(wn=>{isFilled(wn)?xn&&xn():Yn&&Yn()},[xn,Yn]);useEnhancedEffect$1(()=>{fn&&Un({value:Cn})},[Cn,Un,fn]);const jn=wn=>{if(kn.disabled){wn.stopPropagation();return}Mt&&Mt(wn),ut.onFocus&&ut.onFocus(wn),In&&In.onFocus?In.onFocus(wn):Rn(!0)},Qn=wn=>{Nt&&Nt(wn),ut.onBlur&&ut.onBlur(wn),In&&In.onBlur?In.onBlur(wn):Rn(!1)},on=(wn,...Yt)=>{if(!fn){const kt=wn.target||Tn.current;if(kt==null)throw new Error(formatMuiErrorMessage(1));Un({value:kt.value})}ut.onChange&&ut.onChange(wn,...Yt),St&&St(wn,...Yt)};reactExports.useEffect(()=>{Un(Tn.current)},[]);const Hn=wn=>{Tn.current&&wn.currentTarget===wn.target&&Tn.current.focus(),wt&&wt(wn)};let Fn=ot,Vn=ut;yt&&Fn==="input"&&(zt?Vn=_extends({type:void 0,minRows:zt,maxRows:zt},Vn):Vn=_extends({type:void 0,maxRows:bt,minRows:vt},Vn),Fn=TextareaAutosize);const Bn=wn=>{Un(wn.animationName==="mui-auto-fill-cancel"?Tn.current:{value:"x"})};reactExports.useEffect(()=>{In&&In.setAdornedStart(!!vn)},[In,vn]);const qn=_extends({},ct,{color:kn.color||"primary",disabled:kn.disabled,endAdornment:pt,error:kn.error,focused:kn.focused,formControl:In,fullWidth:lt,hiddenLabel:kn.hiddenLabel,multiline:yt,size:kn.size,startAdornment:vn,type:yn}),Gn=useUtilityClasses$f(qn),_n=un.root||et.Root||InputBaseRoot,$n=Ft.root||nt.root||{},bn=un.input||et.Input||InputBaseComponent;return Vn=_extends({},Vn,(tt=Ft.input)!=null?tt:nt.input),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!dt&&inputGlobalStyles,jsxRuntimeExports.jsxs(_n,_extends({},$n,!isHostComponent(_n)&&{ownerState:_extends({},qn,$n.ownerState)},{ref:_e,onClick:Hn},gn,{className:clsx(Gn.root,$n.className,s,Gt&&"MuiInputBase-readOnly"),children:[vn,jsxRuntimeExports.jsx(FormControlContext$1.Provider,{value:null,children:jsxRuntimeExports.jsx(bn,_extends({ownerState:qn,"aria-invalid":kn.error,"aria-describedby":gt,autoComplete:rt,autoFocus:it,defaultValue:at,disabled:kn.disabled,id:mt,onAnimationStart:Bn,name:At,placeholder:Dt,readOnly:Gt,required:kn.required,rows:zt,value:Cn,onKeyDown:Ht,onKeyUp:Ot,type:yn},Vn,!isHostComponent(bn)&&{as:Fn,ownerState:_extends({},qn,Vn.ownerState)},{ref:Ln,className:clsx(Gn.input,Vn.className,Gt&&"MuiInputBase-readOnly"),onBlur:Qn,onChange:on,onFocus:jn}))}),pt,nn?nn(_extends({},kn,{startAdornment:vn})):null]}))]})}),InputBase$1=InputBase;function getInputUtilityClass(a){return generateUtilityClass("MuiInput",a)}const inputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiInput",["root","underline","input"])),inputClasses$1=inputClasses,_excluded$g=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$e=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getInputUtilityClass,o);return _extends({},o,ct)},InputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{let tt=a.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return a.vars&&(tt=`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`),_extends({position:"relative"},o.formControl&&{"label + &":{marginTop:16}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(a.vars||a).palette[o.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${tt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses$1.disabled}, .${inputClasses$1.error}):before`]:{borderBottom:`2px solid ${(a.vars||a).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${tt}`}},[`&.${inputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}})}),InputInput=styled$1(InputBaseComponent,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt;const it=useThemeProps({props:o,name:"MuiInput"}),{disableUnderline:s,components:et={},componentsProps:nt,fullWidth:at=!1,inputComponent:ht="input",multiline:dt=!1,slotProps:pt,slots:lt={},type:mt="text"}=it,ot=_objectWithoutPropertiesLoose(it,_excluded$g),ut=useUtilityClasses$e(it),bt={root:{ownerState:{disableUnderline:s}}},vt=pt??nt?deepmerge(pt??nt,bt):bt,yt=(tt=(ct=lt.root)!=null?ct:et.Root)!=null?tt:InputRoot,At=(gt=(rt=lt.input)!=null?rt:et.Input)!=null?gt:InputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:yt,input:At},slotProps:vt,fullWidth:at,inputComponent:ht,multiline:dt,ref:_e,type:mt},ot,{classes:ut}))});Input.muiName="Input";const Input$1=Input;function getFilledInputUtilityClass(a){return generateUtilityClass("MuiFilledInput",a)}const filledInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiFilledInput",["root","underline","input"])),filledInputClasses$1=filledInputClasses,_excluded$f=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],useUtilityClasses$d=a=>{const{classes:o,disableUnderline:_e}=a,ct=composeClasses({root:["root",!_e&&"underline"],input:["input"]},getFilledInputUtilityClass,o);return _extends({},o,ct)},FilledInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[...rootOverridesResolver(a,o),!_e.disableUnderline&&o.underline]}})(({theme:a,ownerState:o})=>{var _e;const tt=a.palette.mode==="light",ct=tt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",gt=tt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",rt=tt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",it=tt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return _extends({position:"relative",backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt,borderTopLeftRadius:(a.vars||a).shape.borderRadius,borderTopRightRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),"&:hover":{backgroundColor:a.vars?a.vars.palette.FilledInput.hoverBg:rt,"@media (hover: none)":{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt}},[`&.${filledInputClasses$1.focused}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.bg:gt},[`&.${filledInputClasses$1.disabled}`]:{backgroundColor:a.vars?a.vars.palette.FilledInput.disabledBg:it}},!o.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(_e=(a.vars||a).palette[o.color||"primary"])==null?void 0:_e.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:a.transitions.create("transform",{duration:a.transitions.duration.shorter,easing:a.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses$1.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses$1.error}`]:{"&:before, &:after":{borderBottomColor:(a.vars||a).palette.error.main}},"&:before":{borderBottom:`1px solid ${a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / ${a.vars.opacity.inputUnderline})`:ct}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:a.transitions.create("border-bottom-color",{duration:a.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses$1.disabled}, .${filledInputClasses$1.error}):before`]:{borderBottom:`1px solid ${(a.vars||a).palette.text.primary}`},[`&.${filledInputClasses$1.disabled}:before`]:{borderBottomStyle:"dotted"}},o.startAdornment&&{paddingLeft:12},o.endAdornment&&{paddingRight:12},o.multiline&&_extends({padding:"25px 12px 8px"},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),FilledInputInput=styled$1(InputBaseComponent,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{paddingTop:21,paddingBottom:4},o.hiddenLabel&&{paddingTop:16,paddingBottom:17},o.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0},o.hiddenLabel&&o.size==="small"&&{paddingTop:8,paddingBottom:9})),FilledInput=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt;const it=useThemeProps({props:o,name:"MuiFilledInput"}),{components:s={},componentsProps:et,fullWidth:nt=!1,inputComponent:at="input",multiline:ht=!1,slotProps:dt,slots:pt={},type:lt="text"}=it,mt=_objectWithoutPropertiesLoose(it,_excluded$f),ot=_extends({},it,{fullWidth:nt,inputComponent:at,multiline:ht,type:lt}),ut=useUtilityClasses$d(it),ft={root:{ownerState:ot},input:{ownerState:ot}},bt=dt??et?deepmerge(dt??et,ft):ft,vt=(tt=(ct=pt.root)!=null?ct:s.Root)!=null?tt:FilledInputRoot,yt=(gt=(rt=pt.input)!=null?rt:s.Input)!=null?gt:FilledInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:vt,input:yt},componentsProps:bt,fullWidth:nt,inputComponent:at,multiline:ht,ref:_e,type:lt},mt,{classes:ut}))});FilledInput.muiName="Input";const FilledInput$1=FilledInput;var _span;const _excluded$e=["children","classes","className","label","notched"],NotchedOutlineRoot$1=styled$1("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled$1("legend")(({ownerState:a,theme:o})=>_extends({float:"unset",width:"auto",overflow:"hidden"},!a.withLabel&&{padding:0,lineHeight:"11px",transition:o.transitions.create("width",{duration:150,easing:o.transitions.easing.easeOut})},a.withLabel&&_extends({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:o.transitions.create("max-width",{duration:50,easing:o.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},a.notched&&{maxWidth:"100%",transition:o.transitions.create("max-width",{duration:100,easing:o.transitions.easing.easeOut,delay:50})})));function NotchedOutline(a){const{className:o,label:_e,notched:tt}=a,ct=_objectWithoutPropertiesLoose(a,_excluded$e),gt=_e!=null&&_e!=="",rt=_extends({},a,{notched:tt,withLabel:gt});return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,_extends({"aria-hidden":!0,className:o,ownerState:rt},ct,{children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:rt,children:gt?jsxRuntimeExports.jsx("span",{children:_e}):_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate",children:"​"}))})}))}function getOutlinedInputUtilityClass(a){return generateUtilityClass("MuiOutlinedInput",a)}const outlinedInputClasses=_extends({},inputBaseClasses$1,generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])),outlinedInputClasses$1=outlinedInputClasses,_excluded$d=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],useUtilityClasses$c=a=>{const{classes:o}=a,tt=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,o);return _extends({},o,tt)},OutlinedInputRoot=styled$1(InputBaseRoot,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return _extends({position:"relative",borderRadius:(a.vars||a).shape.borderRadius,[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:_e}},[`&.${outlinedInputClasses$1.focused} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette[o.color].main,borderWidth:2},[`&.${outlinedInputClasses$1.error} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.error.main},[`&.${outlinedInputClasses$1.disabled} .${outlinedInputClasses$1.notchedOutline}`]:{borderColor:(a.vars||a).palette.action.disabled}},o.startAdornment&&{paddingLeft:14},o.endAdornment&&{paddingRight:14},o.multiline&&_extends({padding:"16.5px 14px"},o.size==="small"&&{padding:"8.5px 14px"}))}),NotchedOutlineRoot=styled$1(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(a,o)=>o.notchedOutline})(({theme:a})=>{const o=a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:a.vars?`rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:o}}),OutlinedInputInput=styled$1(InputBaseComponent,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(({theme:a,ownerState:o})=>_extends({padding:"16.5px 14px"},!a.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:a.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:a.palette.mode==="light"?null:"#fff",caretColor:a.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},a.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[a.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},o.size==="small"&&{padding:"8.5px 14px"},o.multiline&&{padding:0},o.startAdornment&&{paddingLeft:0},o.endAdornment&&{paddingRight:0})),OutlinedInput=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,it;const s=useThemeProps({props:o,name:"MuiOutlinedInput"}),{components:et={},fullWidth:nt=!1,inputComponent:at="input",label:ht,multiline:dt=!1,notched:pt,slots:lt={},type:mt="text"}=s,ot=_objectWithoutPropertiesLoose(s,_excluded$d),ut=useUtilityClasses$c(s),ft=useFormControl(),bt=formControlState({props:s,muiFormControl:ft,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),vt=_extends({},s,{color:bt.color||"primary",disabled:bt.disabled,error:bt.error,focused:bt.focused,formControl:ft,fullWidth:nt,hiddenLabel:bt.hiddenLabel,multiline:dt,size:bt.size,type:mt}),yt=(tt=(ct=lt.root)!=null?ct:et.Root)!=null?tt:OutlinedInputRoot,At=(gt=(rt=lt.input)!=null?rt:et.Input)!=null?gt:OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase$1,_extends({slots:{root:yt,input:At},renderSuffix:Nt=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:vt,className:ut.notchedOutline,label:ht!=null&&ht!==""&&bt.required?it||(it=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[ht," ","*"]})):ht,notched:typeof pt<"u"?pt:!!(Nt.startAdornment||Nt.filled||Nt.focused)}),fullWidth:nt,inputComponent:at,multiline:dt,ref:_e,type:mt},ot,{classes:_extends({},ut,{notchedOutline:null})}))});OutlinedInput.muiName="Input";const OutlinedInput$1=OutlinedInput,_excluded$c=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],_excluded2=["root"],useUtilityClasses$b=a=>{const{classes:o}=a;return o},styledRootConfig={name:"MuiSelect",overridesResolver:(a,o)=>o.root,shouldForwardProp:a=>rootShouldForwardProp(a)&&a!=="variant",slot:"Root"},StyledInput=styled$1(Input$1,styledRootConfig)(""),StyledOutlinedInput=styled$1(OutlinedInput$1,styledRootConfig)(""),StyledFilledInput=styled$1(FilledInput$1,styledRootConfig)(""),Select=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({name:"MuiSelect",props:o}),{autoWidth:ct=!1,children:gt,classes:rt={},className:it,defaultOpen:s=!1,displayEmpty:et=!1,IconComponent:nt=ArrowDropDownIcon,id:at,input:ht,inputProps:dt,label:pt,labelId:lt,MenuProps:mt,multiple:ot=!1,native:ut=!1,onClose:ft,onOpen:bt,open:vt,renderValue:yt,SelectDisplayProps:At,variant:Nt="outlined"}=tt,St=_objectWithoutPropertiesLoose(tt,_excluded$c),wt=ut?NativeSelectInput$1:SelectInput$1,Mt=useFormControl(),Ht=formControlState({props:tt,muiFormControl:Mt,states:["variant","error"]}),Ot=Ht.variant||Nt,Dt=_extends({},tt,{variant:Ot,classes:rt}),Gt=useUtilityClasses$b(Dt),nn=_objectWithoutPropertiesLoose(Gt,_excluded2),zt=ht||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:Dt}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:pt,ownerState:Dt}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:Dt})}[Ot],Ft=useForkRef(_e,zt.ref);return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(zt,_extends({inputComponent:wt,inputProps:_extends({children:gt,error:Ht.error,IconComponent:nt,variant:Ot,type:void 0,multiple:ot},ut?{id:at}:{autoWidth:ct,defaultOpen:s,displayEmpty:et,labelId:lt,MenuProps:mt,onClose:ft,onOpen:bt,open:vt,renderValue:yt,SelectDisplayProps:_extends({id:at},At)},dt,{classes:dt?deepmerge(nn,dt.classes):nn},ht?ht.props.inputProps:{})},ot&&ut&&Ot==="outlined"?{notched:!0}:{},{ref:Ft,className:clsx(zt.props.className,it,Gt.root)},!ht&&{variant:Ot},St))})});Select.muiName="Select";const Select$1=Select,Stack=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(a,o)=>o.root}),useThemeProps:a=>useThemeProps({props:a,name:"MuiStack"})}),Stack$1=Stack;function getFormControlLabelUtilityClasses(a){return generateUtilityClass("MuiFormControlLabel",a)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),formControlLabelClasses$1=formControlLabelClasses,_excluded$b=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],useUtilityClasses$a=a=>{const{classes:o,disabled:_e,labelPlacement:tt,error:ct,required:gt}=a,rt={root:["root",_e&&"disabled",`labelPlacement${capitalize(tt)}`,ct&&"error",gt&&"required"],label:["label",_e&&"disabled"],asterisk:["asterisk",ct&&"error"]};return composeClasses(rt,getFormControlLabelUtilityClasses,o)},FormControlLabelRoot=styled$1("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[{[`& .${formControlLabelClasses$1.label}`]:o.label},o.root,o[`labelPlacement${capitalize(_e.labelPlacement)}`]]}})(({theme:a,ownerState:o})=>_extends({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses$1.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses$1.label}`]:{[`&.${formControlLabelClasses$1.disabled}`]:{color:(a.vars||a).palette.text.disabled}}})),AsteriskComponent=styled$1("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(a,o)=>o.asterisk})(({theme:a})=>({[`&.${formControlLabelClasses$1.error}`]:{color:(a.vars||a).palette.error.main}})),FormControlLabel=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiFormControlLabel"}),{className:rt,componentsProps:it={},control:s,disabled:et,disableTypography:nt,label:at,labelPlacement:ht="end",required:dt,slotProps:pt={}}=gt,lt=_objectWithoutPropertiesLoose(gt,_excluded$b),mt=useFormControl(),ot=(tt=et??s.props.disabled)!=null?tt:mt==null?void 0:mt.disabled,ut=dt??s.props.required,ft={disabled:ot,required:ut};["checked","name","onChange","value","inputRef"].forEach(St=>{typeof s.props[St]>"u"&&typeof gt[St]<"u"&&(ft[St]=gt[St])});const bt=formControlState({props:gt,muiFormControl:mt,states:["error"]}),vt=_extends({},gt,{disabled:ot,labelPlacement:ht,required:ut,error:bt.error}),yt=useUtilityClasses$a(vt),At=(ct=pt.typography)!=null?ct:it.typography;let Nt=at;return Nt!=null&&Nt.type!==Typography$1&&!nt&&(Nt=jsxRuntimeExports.jsx(Typography$1,_extends({component:"span"},At,{className:clsx(yt.label,At==null?void 0:At.className),children:Nt}))),jsxRuntimeExports.jsxs(FormControlLabelRoot,_extends({className:clsx(yt.root,rt),ownerState:vt,ref:_e},lt,{children:[reactExports.cloneElement(s,ft),ut?jsxRuntimeExports.jsxs(Stack$1,{direction:"row",alignItems:"center",children:[Nt,jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:vt,"aria-hidden":!0,className:yt.asterisk,children:[" ","*"]})]}):Nt]}))}),FormControlLabel$1=FormControlLabel;function getSwitchBaseUtilityClass(a){return generateUtilityClass("PrivateSwitchBase",a)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$a=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$9=a=>{const{classes:o,checked:_e,disabled:tt,edge:ct}=a,gt={root:["root",_e&&"checked",tt&&"disabled",ct&&`edge${capitalize(ct)}`],input:["input"]};return composeClasses(gt,getSwitchBaseUtilityClass,o)},SwitchBaseRoot=styled$1(ButtonBase$1)(({ownerState:a})=>_extends({padding:9,borderRadius:"50%"},a.edge==="start"&&{marginLeft:a.size==="small"?-3:-12},a.edge==="end"&&{marginRight:a.size==="small"?-3:-12})),SwitchBaseInput=styled$1("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(o,_e){const{autoFocus:tt,checked:ct,checkedIcon:gt,className:rt,defaultChecked:it,disabled:s,disableFocusRipple:et=!1,edge:nt=!1,icon:at,id:ht,inputProps:dt,inputRef:pt,name:lt,onBlur:mt,onChange:ot,onFocus:ut,readOnly:ft,required:bt=!1,tabIndex:vt,type:yt,value:At}=o,Nt=_objectWithoutPropertiesLoose(o,_excluded$a),[St,wt]=useControlled({controlled:ct,default:!!it,name:"SwitchBase",state:"checked"}),Mt=useFormControl(),Ht=un=>{ut&&ut(un),Mt&&Mt.onFocus&&Mt.onFocus(un)},Ot=un=>{mt&&mt(un),Mt&&Mt.onBlur&&Mt.onBlur(un)},Dt=un=>{if(un.nativeEvent.defaultPrevented)return;const vn=un.target.checked;wt(vn),ot&&ot(un,vn)};let Gt=s;Mt&&typeof Gt>"u"&&(Gt=Mt.disabled);const nn=yt==="checkbox"||yt==="radio",zt=_extends({},o,{checked:St,disabled:Gt,disableFocusRipple:et,edge:nt}),Ft=useUtilityClasses$9(zt);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends({component:"span",className:clsx(Ft.root,rt),centerRipple:!0,focusRipple:!et,disabled:Gt,tabIndex:null,role:void 0,onFocus:Ht,onBlur:Ot,ownerState:zt,ref:_e},Nt,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends({autoFocus:tt,checked:ct,defaultChecked:it,className:Ft.input,disabled:Gt,id:nn?ht:void 0,name:lt,onChange:Dt,readOnly:ft,ref:pt,required:bt,ownerState:zt,tabIndex:vt,type:yt},yt==="checkbox"&&At===void 0?{}:{value:At},dt)),St?gt:at]}))}),SwitchBase$1=SwitchBase;function getFormGroupUtilityClass(a){return generateUtilityClass("MuiFormGroup",a)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const _excluded$9=["className","row"],useUtilityClasses$8=a=>{const{classes:o,row:_e,error:tt}=a;return composeClasses({root:["root",_e&&"row",tt&&"error"]},getFormGroupUtilityClass,o)},FormGroupRoot=styled$1("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.row&&o.row]}})(({ownerState:a})=>_extends({display:"flex",flexDirection:"column",flexWrap:"wrap"},a.row&&{flexDirection:"row"})),FormGroup=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiFormGroup"}),{className:ct,row:gt=!1}=tt,rt=_objectWithoutPropertiesLoose(tt,_excluded$9),it=useFormControl(),s=formControlState({props:tt,muiFormControl:it,states:["error"]}),et=_extends({},tt,{row:gt,error:s.error}),nt=useUtilityClasses$8(et);return jsxRuntimeExports.jsx(FormGroupRoot,_extends({className:clsx(nt.root,ct),ownerState:et,ref:_e},rt))}),FormGroup$1=FormGroup;function getIconUtilityClass(a){return generateUtilityClass("MuiIcon",a)}generateUtilityClasses("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$8=["baseClassName","className","color","component","fontSize"],useUtilityClasses$7=a=>{const{color:o,fontSize:_e,classes:tt}=a,ct={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(_e)}`]};return composeClasses(ct,getIconUtilityClass,tt)},IconRoot=styled$1("span",{name:"MuiIcon",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.color!=="inherit"&&o[`color${capitalize(_e.color)}`],o[`fontSize${capitalize(_e.fontSize)}`]]}})(({theme:a,ownerState:o})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:a.typography.pxToRem(20),medium:a.typography.pxToRem(24),large:a.typography.pxToRem(36)}[o.fontSize],color:{primary:(a.vars||a).palette.primary.main,secondary:(a.vars||a).palette.secondary.main,info:(a.vars||a).palette.info.main,success:(a.vars||a).palette.success.main,warning:(a.vars||a).palette.warning.main,action:(a.vars||a).palette.action.active,error:(a.vars||a).palette.error.main,disabled:(a.vars||a).palette.action.disabled,inherit:void 0}[o.color]})),Icon=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiIcon"}),{baseClassName:ct="material-icons",className:gt,color:rt="inherit",component:it="span",fontSize:s="medium"}=tt,et=_objectWithoutPropertiesLoose(tt,_excluded$8),nt=_extends({},tt,{baseClassName:ct,color:rt,component:it,fontSize:s}),at=useUtilityClasses$7(nt);return jsxRuntimeExports.jsx(IconRoot,_extends({as:it,className:clsx(ct,"notranslate",at.root,gt),ownerState:nt,"aria-hidden":!0,ref:_e},et))});Icon.muiName="Icon";const Icon$1=Icon,_excluded$7=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled$1(Popper$2,{name:"MuiPopper",slot:"Root",overridesResolver:(a,o)=>o.root})({}),Popper=reactExports.forwardRef(function(o,_e){var tt;const ct=useTheme$3(),gt=useThemeProps({props:o,name:"MuiPopper"}),{anchorEl:rt,component:it,components:s,componentsProps:et,container:nt,disablePortal:at,keepMounted:ht,modifiers:dt,open:pt,placement:lt,popperOptions:mt,popperRef:ot,transition:ut,slots:ft,slotProps:bt}=gt,vt=_objectWithoutPropertiesLoose(gt,_excluded$7),yt=(tt=ft==null?void 0:ft.root)!=null?tt:s==null?void 0:s.Root,At=_extends({anchorEl:rt,container:nt,disablePortal:at,keepMounted:ht,modifiers:dt,open:pt,placement:lt,popperOptions:mt,popperRef:ot,transition:ut},vt);return jsxRuntimeExports.jsx(PopperRoot,_extends({as:it,direction:ct==null?void 0:ct.direction,slots:{root:yt},slotProps:bt??et},At,{ref:_e}))}),Popper$1=Popper;function getTooltipUtilityClass(a){return generateUtilityClass("MuiTooltip",a)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),tooltipClasses$1=tooltipClasses,_excluded$6=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round(a){return Math.round(a*1e5)/1e5}const useUtilityClasses$6=a=>{const{classes:o,disableInteractive:_e,arrow:tt,touch:ct,placement:gt}=a,rt={popper:["popper",!_e&&"popperInteractive",tt&&"popperArrow"],tooltip:["tooltip",tt&&"tooltipArrow",ct&&"touch",`tooltipPlacement${capitalize(gt.split("-")[0])}`],arrow:["arrow"]};return composeClasses(rt,getTooltipUtilityClass,o)},TooltipPopper=styled$1(Popper$1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.popper,!_e.disableInteractive&&o.popperInteractive,_e.arrow&&o.popperArrow,!_e.open&&o.popperClose]}})(({theme:a,ownerState:o,open:_e})=>_extends({zIndex:(a.vars||a).zIndex.tooltip,pointerEvents:"none"},!o.disableInteractive&&{pointerEvents:"auto"},!_e&&{pointerEvents:"none"},o.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses$1.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses$1.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses$1.arrow}`]:_extends({},o.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled$1("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.tooltip,_e.touch&&o.touch,_e.arrow&&o.tooltipArrow,o[`tooltipPlacement${capitalize(_e.placement.split("-")[0])}`]]}})(({theme:a,ownerState:o})=>_extends({backgroundColor:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.92),borderRadius:(a.vars||a).shape.borderRadius,color:(a.vars||a).palette.common.white,fontFamily:a.typography.fontFamily,padding:"4px 8px",fontSize:a.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:a.typography.fontWeightMedium},o.arrow&&{position:"relative",margin:0},o.touch&&{padding:"8px 16px",fontSize:a.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:a.typography.fontWeightRegular},{[`.${tooltipClasses$1.popper}[data-popper-placement*="left"] &`]:_extends({transformOrigin:"right center"},o.isRtl?_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"}):_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="right"] &`]:_extends({transformOrigin:"left center"},o.isRtl?_extends({marginRight:"14px"},o.touch&&{marginRight:"24px"}):_extends({marginLeft:"14px"},o.touch&&{marginLeft:"24px"})),[`.${tooltipClasses$1.popper}[data-popper-placement*="top"] &`]:_extends({transformOrigin:"center bottom",marginBottom:"14px"},o.touch&&{marginBottom:"24px"}),[`.${tooltipClasses$1.popper}[data-popper-placement*="bottom"] &`]:_extends({transformOrigin:"center top",marginTop:"14px"},o.touch&&{marginTop:"24px"})})),TooltipArrow=styled$1("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(a,o)=>o.arrow})(({theme:a})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:a.vars?a.vars.palette.Tooltip.bg:alpha(a.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1,hystersisTimer=null,cursorPosition={x:0,y:0};function composeEventHandler(a,o){return _e=>{o&&o(_e),a(_e)}}const Tooltip=reactExports.forwardRef(function(o,_e){var tt,ct,gt,rt,it,s,et,nt,at,ht,dt,pt,lt,mt,ot,ut,ft,bt,vt;const yt=useThemeProps({props:o,name:"MuiTooltip"}),{arrow:At=!1,children:Nt,components:St={},componentsProps:wt={},describeChild:Mt=!1,disableFocusListener:Ht=!1,disableHoverListener:Ot=!1,disableInteractive:Dt=!1,disableTouchListener:Gt=!1,enterDelay:nn=100,enterNextDelay:zt=0,enterTouchDelay:Ft=700,followCursor:un=!1,id:vn,leaveDelay:yn=0,leaveTouchDelay:cn=1500,onClose:gn,onOpen:Cn,open:fn,placement:Tn="bottom",PopperComponent:On,PopperProps:Ln={},slotProps:An={},slots:Rn={},title:In,TransitionComponent:kn=Grow$1,TransitionProps:xn}=yt,Yn=_objectWithoutPropertiesLoose(yt,_excluded$6),Un=reactExports.isValidElement(Nt)?Nt:jsxRuntimeExports.jsx("span",{children:Nt}),jn=useTheme(),Qn=jn.direction==="rtl",[on,Hn]=reactExports.useState(),[Fn,Vn]=reactExports.useState(null),Bn=reactExports.useRef(!1),qn=Dt||un,Gn=reactExports.useRef(),_n=reactExports.useRef(),$n=reactExports.useRef(),bn=reactExports.useRef(),[wn,Yt]=useControlled({controlled:fn,default:!1,name:"Tooltip",state:"open"});let kt=wn;const st=useId(vn),Tt=reactExports.useRef(),Rt=reactExports.useCallback(()=>{Tt.current!==void 0&&(document.body.style.WebkitUserSelect=Tt.current,Tt.current=void 0),clearTimeout(bn.current)},[]);reactExports.useEffect(()=>()=>{clearTimeout(Gn.current),clearTimeout(_n.current),clearTimeout($n.current),Rt()},[Rt]);const Lt=er=>{clearTimeout(hystersisTimer),hystersisOpen=!0,Yt(!0),Cn&&!kt&&Cn(er)},Et=useEventCallback(er=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+yn),Yt(!1),gn&&kt&&gn(er),clearTimeout(Gn.current),Gn.current=setTimeout(()=>{Bn.current=!1},jn.transitions.duration.shortest)}),jt=er=>{Bn.current&&er.type!=="touchstart"||(on&&on.removeAttribute("title"),clearTimeout(_n.current),clearTimeout($n.current),nn||hystersisOpen&&zt?_n.current=setTimeout(()=>{Lt(er)},hystersisOpen?zt:nn):Lt(er))},Pt=er=>{clearTimeout(_n.current),clearTimeout($n.current),$n.current=setTimeout(()=>{Et(er)},yn)},{isFocusVisibleRef:Vt,onBlur:Zt,onFocus:rn,ref:Jt}=useIsFocusVisible(),[,ln]=reactExports.useState(!1),mn=er=>{Zt(er),Vt.current===!1&&(ln(!1),Pt(er))},an=er=>{on||Hn(er.currentTarget),rn(er),Vt.current===!0&&(ln(!0),jt(er))},hn=er=>{Bn.current=!0;const Tr=Un.props;Tr.onTouchStart&&Tr.onTouchStart(er)},En=jt,Mn=Pt,Pn=er=>{hn(er),clearTimeout($n.current),clearTimeout(Gn.current),Rt(),Tt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",bn.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Tt.current,jt(er)},Ft)},Wn=er=>{Un.props.onTouchEnd&&Un.props.onTouchEnd(er),Rt(),clearTimeout($n.current),$n.current=setTimeout(()=>{Et(er)},cn)};reactExports.useEffect(()=>{if(!kt)return;function er(Tr){(Tr.key==="Escape"||Tr.key==="Esc")&&Et(Tr)}return document.addEventListener("keydown",er),()=>{document.removeEventListener("keydown",er)}},[Et,kt]);const Nn=useForkRef(Un.ref,Jt,Hn,_e);!In&&In!==0&&(kt=!1);const Jn=reactExports.useRef(),rr=er=>{const Tr=Un.props;Tr.onMouseMove&&Tr.onMouseMove(er),cursorPosition={x:er.clientX,y:er.clientY},Jn.current&&Jn.current.update()},hr={},cr=typeof In=="string";Mt?(hr.title=!kt&&cr&&!Ot?In:null,hr["aria-describedby"]=kt?st:null):(hr["aria-label"]=cr?In:null,hr["aria-labelledby"]=kt&&!cr?st:null);const dr=_extends({},hr,Yn,Un.props,{className:clsx(Yn.className,Un.props.className),onTouchStart:hn,ref:Nn},un?{onMouseMove:rr}:{}),Cr={};Gt||(dr.onTouchStart=Pn,dr.onTouchEnd=Wn),Ot||(dr.onMouseOver=composeEventHandler(En,dr.onMouseOver),dr.onMouseLeave=composeEventHandler(Mn,dr.onMouseLeave),qn||(Cr.onMouseOver=En,Cr.onMouseLeave=Mn)),Ht||(dr.onFocus=composeEventHandler(an,dr.onFocus),dr.onBlur=composeEventHandler(mn,dr.onBlur),qn||(Cr.onFocus=an,Cr.onBlur=mn));const Sr=reactExports.useMemo(()=>{var er;let Tr=[{name:"arrow",enabled:!!Fn,options:{element:Fn,padding:4}}];return(er=Ln.popperOptions)!=null&&er.modifiers&&(Tr=Tr.concat(Ln.popperOptions.modifiers)),_extends({},Ln.popperOptions,{modifiers:Tr})},[Fn,Ln]),_r=_extends({},yt,{isRtl:Qn,arrow:At,disableInteractive:qn,placement:Tn,PopperComponentProp:On,touch:Bn.current}),br=useUtilityClasses$6(_r),Ir=(tt=(ct=Rn.popper)!=null?ct:St.Popper)!=null?tt:TooltipPopper,kr=(gt=(rt=(it=Rn.transition)!=null?it:St.Transition)!=null?rt:kn)!=null?gt:Grow$1,Mr=(s=(et=Rn.tooltip)!=null?et:St.Tooltip)!=null?s:TooltipTooltip,jr=(nt=(at=Rn.arrow)!=null?at:St.Arrow)!=null?nt:TooltipArrow,Wr=appendOwnerState(Ir,_extends({},Ln,(ht=An.popper)!=null?ht:wt.popper,{className:clsx(br.popper,Ln==null?void 0:Ln.className,(dt=(pt=An.popper)!=null?pt:wt.popper)==null?void 0:dt.className)}),_r),Qr=appendOwnerState(kr,_extends({},xn,(lt=An.transition)!=null?lt:wt.transition),_r),Zn=appendOwnerState(Mr,_extends({},(mt=An.tooltip)!=null?mt:wt.tooltip,{className:clsx(br.tooltip,(ot=(ut=An.tooltip)!=null?ut:wt.tooltip)==null?void 0:ot.className)}),_r),lr=appendOwnerState(jr,_extends({},(ft=An.arrow)!=null?ft:wt.arrow,{className:clsx(br.arrow,(bt=(vt=An.arrow)!=null?vt:wt.arrow)==null?void 0:bt.className)}),_r);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Un,dr),jsxRuntimeExports.jsx(Ir,_extends({as:On??Popper$1,placement:Tn,anchorEl:un?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:on,popperRef:Jn,open:on?kt:!1,id:st,transition:!0},Cr,Wr,{popperOptions:Sr,children:({TransitionProps:er})=>jsxRuntimeExports.jsx(kr,_extends({timeout:jn.transitions.duration.shorter},er,Qr,{children:jsxRuntimeExports.jsxs(Mr,_extends({},Zn,{children:[In,At?jsxRuntimeExports.jsx(jr,_extends({},lr,{ref:Vn})):null]}))}))}))]})}),Tooltip$1=Tooltip;function getCircularProgressUtilityClass(a){return generateUtilityClass("MuiCircularProgress",a)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const _excluded$5=["className","color","disableShrink","size","style","thickness","value","variant"];let _$2=a=>a,_t$1,_t2$1,_t3$1,_t4$1;const SIZE=44,circularRotateKeyframe=keyframes(_t$1||(_t$1=_$2`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),circularDashKeyframe=keyframes(_t2$1||(_t2$1=_$2`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),useUtilityClasses$5=a=>{const{classes:o,variant:_e,color:tt,disableShrink:ct}=a,gt={root:["root",_e,`color${capitalize(tt)}`],svg:["svg"],circle:["circle",`circle${capitalize(_e)}`,ct&&"circleDisableShrink"]};return composeClasses(gt,getCircularProgressUtilityClass,o)},CircularProgressRoot=styled$1("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`color${capitalize(_e.color)}`]]}})(({ownerState:a,theme:o})=>_extends({display:"inline-block"},a.variant==="determinate"&&{transition:o.transitions.create("transform")},a.color!=="inherit"&&{color:(o.vars||o).palette[a.color].main}),({ownerState:a})=>a.variant==="indeterminate"&&css(_t3$1||(_t3$1=_$2`
      animation: ${0} 1.4s linear infinite;
    `),circularRotateKeyframe)),CircularProgressSVG=styled$1("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(a,o)=>o.svg})({display:"block"}),CircularProgressCircle=styled$1("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.circle,o[`circle${capitalize(_e.variant)}`],_e.disableShrink&&o.circleDisableShrink]}})(({ownerState:a,theme:o})=>_extends({stroke:"currentColor"},a.variant==="determinate"&&{transition:o.transitions.create("stroke-dashoffset")},a.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:a})=>a.variant==="indeterminate"&&!a.disableShrink&&css(_t4$1||(_t4$1=_$2`
      animation: ${0} 1.4s ease-in-out infinite;
    `),circularDashKeyframe)),CircularProgress=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiCircularProgress"}),{className:ct,color:gt="primary",disableShrink:rt=!1,size:it=40,style:s,thickness:et=3.6,value:nt=0,variant:at="indeterminate"}=tt,ht=_objectWithoutPropertiesLoose(tt,_excluded$5),dt=_extends({},tt,{color:gt,disableShrink:rt,size:it,thickness:et,value:nt,variant:at}),pt=useUtilityClasses$5(dt),lt={},mt={},ot={};if(at==="determinate"){const ut=2*Math.PI*((SIZE-et)/2);lt.strokeDasharray=ut.toFixed(3),ot["aria-valuenow"]=Math.round(nt),lt.strokeDashoffset=`${((100-nt)/100*ut).toFixed(3)}px`,mt.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,_extends({className:clsx(pt.root,ct),style:_extends({width:it,height:it},mt,s),ownerState:dt,ref:_e,role:"progressbar"},ot,ht,{children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:pt.svg,ownerState:dt,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:pt.circle,style:lt,ownerState:dt,cx:SIZE,cy:SIZE,r:(SIZE-et)/2,fill:"none",strokeWidth:et})})}))}),M=CircularProgress,CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(a){return generateUtilityClass("MuiChip",a)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),chipClasses$1=chipClasses,_excluded$4=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$4=a=>{const{classes:o,disabled:_e,size:tt,color:ct,iconColor:gt,onDelete:rt,clickable:it,variant:s}=a,et={root:["root",s,_e&&"disabled",`size${capitalize(tt)}`,`color${capitalize(ct)}`,it&&"clickable",it&&`clickableColor${capitalize(ct)}`,rt&&"deletable",rt&&`deletableColor${capitalize(ct)}`,`${s}${capitalize(ct)}`],label:["label",`label${capitalize(tt)}`],avatar:["avatar",`avatar${capitalize(tt)}`,`avatarColor${capitalize(ct)}`],icon:["icon",`icon${capitalize(tt)}`,`iconColor${capitalize(gt)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize(tt)}`,`deleteIconColor${capitalize(ct)}`,`deleteIcon${capitalize(s)}Color${capitalize(ct)}`]};return composeClasses(et,getChipUtilityClass,o)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{color:tt,iconColor:ct,clickable:gt,onDelete:rt,size:it,variant:s}=_e;return[{[`& .${chipClasses$1.avatar}`]:o.avatar},{[`& .${chipClasses$1.avatar}`]:o[`avatar${capitalize(it)}`]},{[`& .${chipClasses$1.avatar}`]:o[`avatarColor${capitalize(tt)}`]},{[`& .${chipClasses$1.icon}`]:o.icon},{[`& .${chipClasses$1.icon}`]:o[`icon${capitalize(it)}`]},{[`& .${chipClasses$1.icon}`]:o[`iconColor${capitalize(ct)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o.deleteIcon},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(it)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIconColor${capitalize(tt)}`]},{[`& .${chipClasses$1.deleteIcon}`]:o[`deleteIcon${capitalize(s)}Color${capitalize(tt)}`]},o.root,o[`size${capitalize(it)}`],o[`color${capitalize(tt)}`],gt&&o.clickable,gt&&tt!=="default"&&o[`clickableColor${capitalize(tt)})`],rt&&o.deletable,rt&&tt!=="default"&&o[`deletableColor${capitalize(tt)}`],o[s],o[`${s}${capitalize(tt)}`]]}})(({theme:a,ownerState:o})=>{const _e=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return _extends({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses$1.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses$1.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:_e,fontSize:a.typography.pxToRem(12)},[`& .${chipClasses$1.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${chipClasses$1.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${chipClasses$1.icon}`]:_extends({marginLeft:5,marginRight:-6},o.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},o.iconColor===o.color&&_extends({color:a.vars?a.vars.palette.Chip.defaultIconColor:_e},o.color!=="default"&&{color:"inherit"})),[`& .${chipClasses$1.deleteIcon}`]:_extends({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:alpha(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:alpha(a.palette.text.primary,.4)}},o.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},o.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[o.color].contrastTextChannel} / 0.7)`:alpha(a.palette[o.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].contrastText}})},o.size==="small"&&{height:24},o.color!=="default"&&{backgroundColor:(a.vars||a).palette[o.color].main,color:(a.vars||a).palette[o.color].contrastText},o.onDelete&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},o.onDelete&&o.color!=="default"&&{[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}})},({theme:a,ownerState:o})=>_extends({},o.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},o.clickable&&o.color!=="default"&&{[`&:hover, &.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}}),({theme:a,ownerState:o})=>_extends({},o.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${chipClasses$1.avatar}`]:{marginLeft:4},[`& .${chipClasses$1.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses$1.icon}`]:{marginLeft:4},[`& .${chipClasses$1.iconSmall}`]:{marginLeft:2},[`& .${chipClasses$1.deleteIcon}`]:{marginRight:5},[`& .${chipClasses$1.deleteIconSmall}`]:{marginRight:3}},o.variant==="outlined"&&o.color!=="default"&&{color:(a.vars||a).palette[o.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7)}`,[`&.${chipClasses$1.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity)},[`&.${chipClasses$1.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:alpha(a.palette[o.color].main,a.palette.action.focusOpacity)},[`& .${chipClasses$1.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:alpha(a.palette[o.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,o)=>{const{ownerState:_e}=a,{size:tt}=_e;return[o.label,o[`label${capitalize(tt)}`]]}})(({ownerState:a})=>_extends({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.variant==="outlined"&&{paddingLeft:11,paddingRight:11},a.size==="small"&&{paddingLeft:8,paddingRight:8},a.size==="small"&&a.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(a){return a.key==="Backspace"||a.key==="Delete"}const Chip=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiChip"}),{avatar:ct,className:gt,clickable:rt,color:it="default",component:s,deleteIcon:et,disabled:nt=!1,icon:at,label:ht,onClick:dt,onDelete:pt,onKeyDown:lt,onKeyUp:mt,size:ot="medium",variant:ut="filled",tabIndex:ft,skipFocusWhenDisabled:bt=!1}=tt,vt=_objectWithoutPropertiesLoose(tt,_excluded$4),yt=reactExports.useRef(null),At=useForkRef(yt,_e),Nt=un=>{un.stopPropagation(),pt&&pt(un)},St=un=>{un.currentTarget===un.target&&isDeleteKeyboardEvent(un)&&un.preventDefault(),lt&&lt(un)},wt=un=>{un.currentTarget===un.target&&(pt&&isDeleteKeyboardEvent(un)?pt(un):un.key==="Escape"&&yt.current&&yt.current.blur()),mt&&mt(un)},Mt=rt!==!1&&dt?!0:rt,Ht=Mt||pt?ButtonBase$1:s||"div",Ot=_extends({},tt,{component:Ht,disabled:nt,size:ot,color:it,iconColor:reactExports.isValidElement(at)&&at.props.color||it,onDelete:!!pt,clickable:Mt,variant:ut}),Dt=useUtilityClasses$4(Ot),Gt=Ht===ButtonBase$1?_extends({component:s||"div",focusVisibleClassName:Dt.focusVisible},pt&&{disableRipple:!0}):{};let nn=null;pt&&(nn=et&&reactExports.isValidElement(et)?reactExports.cloneElement(et,{className:clsx(et.props.className,Dt.deleteIcon),onClick:Nt}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Dt.deleteIcon),onClick:Nt}));let zt=null;ct&&reactExports.isValidElement(ct)&&(zt=reactExports.cloneElement(ct,{className:clsx(Dt.avatar,ct.props.className)}));let Ft=null;return at&&reactExports.isValidElement(at)&&(Ft=reactExports.cloneElement(at,{className:clsx(Dt.icon,at.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends({as:Ht,className:clsx(Dt.root,gt),disabled:Mt&&nt?!0:void 0,onClick:dt,onKeyDown:St,onKeyUp:wt,ref:At,tabIndex:bt&&nt?-1:ft,ownerState:Ot},Gt,vt,{children:[zt||Ft,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Dt.label),ownerState:Ot,children:ht}),nn]}))}),Chip$1=Chip;var A$1=function(){return A$1=Object.assign||function(a){for(var o,_e=1,tt=arguments.length;_e<tt;_e++)for(var ct in o=arguments[_e])Object.prototype.hasOwnProperty.call(o,ct)&&(a[ct]=o[ct]);return a},A$1.apply(this,arguments)};function x(a,o){var _e={};for(var tt in a)Object.prototype.hasOwnProperty.call(a,tt)&&o.indexOf(tt)<0&&(_e[tt]=a[tt]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var ct=0;for(tt=Object.getOwnPropertySymbols(a);ct<tt.length;ct++)o.indexOf(tt[ct])<0&&Object.prototype.propertyIsEnumerable.call(a,tt[ct])&&(_e[tt[ct]]=a[tt[ct]])}return _e}var S$1=function(a){var o=a.children,_e=x(a,["children"]),tt=reactExports.useMemo(function(){var rt,it=React$1.Children.toArray(o);return it.length<=1?rt={xs:12,sx:{height:{xs:"100%"}}}:it.length<=2?rt={xs:12,md:6,sx:{height:{xs:100/it.length+"%",md:100/Math.ceil(it.length/2)+"%"}}}:it.length<=4?rt={xs:12,sm:6,sx:{height:{xs:100/it.length+"%",sm:100/Math.ceil(it.length/2)+"%"}}}:it.length<=6?rt={xs:6,md:4,sx:{height:{xs:100/Math.ceil(it.length/2)+"%",md:100/Math.ceil(it.length/3)+"%"}}}:it.length<=9?rt={xs:6,sm:4,sx:{height:{xs:100/Math.ceil(it.length/2)+"%",sm:100/Math.ceil(it.length/3)+"%"}}}:it.length<=12?rt={xs:4,md:3,sx:{height:{xs:100/Math.ceil(it.length/3)+"%",md:100/Math.ceil(it.length/4)+"%"}}}:it.length<=24?rt={xs:4,sm:2,sx:{height:{xs:100/Math.ceil(it.length/3)+"%",sm:100/Math.ceil(it.length/6)+"%"}}}:it.length<=42?rt={xs:3,sm:2,sx:{height:{xs:100/Math.ceil(it.length/4)+"%",sm:100/Math.ceil(it.length/6)+"%"}}}:rt={xs:2,lg:1,sx:{height:{xs:100/Math.ceil(it.length/6)+"%",lg:100/Math.ceil(it.length/12)+"%"}}},{arrayChildren:it,responsive:rt}},[o]),ct=tt.arrayChildren,gt=tt.responsive;return React$1.createElement(d$1,A$1({container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"},_e),React$1.Children.map(ct,function(rt,it){return React$1.createElement(d$1,A$1({item:!0,key:it,display:"flex",justifyContent:"center",alignItems:"center"},gt),rt)}))},w="default";function C(a){var o=a.id,_e=o===void 0?"media-device-selector":o,tt=a.devices,ct=a.selectedDevice,gt=a.setSelectedDevice,rt=x(a,["id","devices","selectedDevice","setSelectedDevice"]),it=reactExports.useMemo(function(){return tt[w]},[tt]),s=Object.values(tt).map(function(et){return React$1.createElement(MenuItem$1,{key:et.getId(),value:et.getId()},et.getLabel())});return React$1.createElement(Select$1,A$1({id:_e,value:ct?ct.getId():w,onChange:function(et){et.preventDefault(),globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat("MediaDeviceSelect","|onSelectDevice"),et.target.value),gt(tt[et.target.value])}},rt),!it&&React$1.createElement(MenuItem$1,{key:w,value:w},"Default"),s)}var k=reactExports.createContext({stream:void 0,muted:!1,toggleMuted:function(){}}),z="Audio";function F(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|Rendering"));var _e=a.id,tt=_e===void 0?(o=a.stream)===null||o===void 0?void 0:o.getId():_e,ct=a.autoPlay,gt=ct===void 0||ct,rt=a.muted,it=a.stream;a.sinkId;var s=x(a,["id","autoPlay","muted","stream","sinkId"]),et=reactExports.useContext(k),nt=et.stream,at=et.muted,ht=at!==void 0&&at,dt=reactExports.useMemo(function(){return it??nt},[nt,it]),pt=reactExports.useMemo(function(){return rt??ht},[ht,rt]),lt=reactExports.useRef(null);return reactExports.useEffect(function(){var mt=lt==null?void 0:lt.current;if(dt&&mt)return globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|useEffect stream"),mt,dt),dt.attachToElement(mt),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(z,"|useEffect stream destroy")),mt.src=""}},[dt]),reactExports.useEffect(function(){var mt=lt==null?void 0:lt.current;mt&&a.sinkId&&mt.setSinkId&&mt.setSinkId(a.sinkId)},[a.sinkId]),React$1.createElement(Box$1,A$1({display:"flex",alignItems:"center",justifyContent:"center"},s),dt&&React$1.createElement(Icon$1,{fontSize:"large"},dt.isRemote?"headset_mic":"mic"),React$1.createElement("audio",{id:tt,ref:lt,autoPlay:gt,muted:pt}))}var W$1="AudioEnableButton";function j$1(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(W$1)}),tt=_e.id,ct=tt===void 0?"audio-enable-btn":tt,gt=_e.enabledTooltip,rt=gt===void 0?"Audio enabled, click to disable":gt,it=_e.disabledTooltip,s=it===void 0?"Audio disabled, click to enable":it,et=_e.noAudioTooltip,nt=et===void 0?"No Audio":et,at=_e.tooltipProps,ht=at===void 0?{placement:"left",arrow:!0}:at,dt=_e.enabledIcon,pt=dt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"mic"):dt,lt=_e.disabledIcon,mt=lt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"mic_off"):lt,ot=x(_e,["id","enabledTooltip","disabledTooltip","noAudioTooltip","tooltipProps","enabledIcon","disabledIcon"]),ut=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable audio",ft=reactExports.useReducer(function(At){return At+1},0)[1],bt=reactExports.useContext(k).stream;reactExports.useEffect(function(){if(bt){var At=function(Nt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(W$1,"|onAudioFlowStatusChanged"),bt,Nt,bt.isAudioEnabled()),ft()};return bt.on("audioFlowStatusChanged",At),bt.on("remoteAudioFlowStatusChanged",At),function(){bt.removeListener("audioFlowStatusChanged",At),bt.removeListener("remoteAudioFlowStatusChanged",At)}}},[bt]);var vt=function(){bt&&(bt.isAudioEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(W$1,"|stream.disableAudio"),bt.isAudioEnabled()),bt.disableAudio(!0).catch(function(At){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(W$1,"|stream.disableAudio failed"),At)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(W$1,"|stream.enableAudio"),bt.isAudioEnabled()),bt.enableAudio(!0).catch(function(At){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(W$1,"|stream.enableAudio failed"),At)})),ft())},yt=bt&&bt.hasAudio()?bt.isAudioEnabled()?rt:s:nt;return React$1.createElement(Tooltip$1,A$1({title:yt},ht),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":ut},ot,{disabled:_e.disabled||bt&&!bt.hasAudio(),onClick:function(At){At.preventDefault(),At.stopPropagation(),vt()},onKeyDown:function(At){At.preventDefault(),At.key!==" "||bt!=null&&bt.isAudioEnabled()||vt()},onKeyUp:function(At){At.preventDefault(),At.key===" "&&(bt!=null&&bt.isAudioEnabled())&&vt()}}),bt&&bt.hasAudio()&&bt.isAudioEnabled()?pt:mt)))}var B="MuteButton";function _$1(a){var o;globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(B,"|Rendering"));var _e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(B)}),tt=_e.id,ct=tt===void 0?"mute-btn":tt,gt=_e.mutedTooltip,rt=gt===void 0?"Muted":gt,it=_e.unmutedTooltip,s=it===void 0?"On":it,et=_e.noAudioTooltip,nt=et===void 0?"No Audio":et,at=_e.tooltipProps,ht=at===void 0?{placement:"left",arrow:!0}:at,dt=x(_e,["id","mutedTooltip","unmutedTooltip","noAudioTooltip","tooltipProps"]),pt=(o=_e["aria-label"])!==null&&o!==void 0?o:"mute",lt=reactExports.useContext(k),mt=lt.stream,ot=lt.muted,ut=lt.toggleMuted,ft=mt&&mt.hasAudio()?ot?rt:s:nt,bt=mt&&mt.hasAudio()?ot?React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_up"):React$1.createElement(Icon$1,{fontSize:_e.size},"volume_off");return React$1.createElement(Tooltip$1,A$1({title:ft},ht),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":pt},dt,{disabled:a.disabled||mt&&!mt.hasAudio(),onClick:function(vt){vt.preventDefault(),vt.stopPropagation(),ut()}}),bt)))}var q=function(a){var o=reactExports.useState(a),_e=o[0],tt=o[1],ct=reactExports.useCallback(function(){tt(function(gt){return!gt})},[]);return reactExports.useEffect(function(){tt(a)},[a]),reactExports.useMemo(function(){return{value:_e,setValue:tt,toggle:ct}},[_e,ct])},N={border:1,borderColor:"primary.main"},G="Stream";function K(a){var o=a.id,_e=a.children,tt=a.controls,ct=a.detectSpeaking,gt=ct!==void 0&&ct,rt=a.muted,it=rt!==void 0&&rt,s=a.name,et=a.nameColor,nt=et===void 0?void 0:et,at=a.stream,ht=a.sx,dt=x(a,["id","children","controls","detectSpeaking","muted","name","nameColor","stream","sx"]),pt=q(it),lt=pt.value,mt=pt.toggle,ot=reactExports.useState(!1),ut=ot[0],ft=ot[1],bt=reactExports.useRef(null),vt=reactExports.useRef(null),yt=reactExports.useState({height:0,width:0}),At=yt[0],Nt=yt[1],St=reactExports.useState({height:0,width:0}),wt=St[0],Mt=St[1];reactExports.useEffect(function(){if(at&&gt){var Ot=at,Dt=function(Gt){ft(Gt.isSpeaking)};return Ot.on("audioAmplitude",Dt),function(){Ot.removeListener("audioAmplitude",Dt)}}},[at,gt]),reactExports.useEffect(function(){var Ot=bt.current;if(Ot){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(G,"|setSize"),Ot.clientHeight,Ot.clientWidth),Nt({height:Ot.clientHeight,width:Ot.clientWidth});var Dt=new ResizeObserver(function(){Nt({height:Ot.clientHeight,width:Ot.clientWidth})});return Dt.observe(Ot),function(){Dt.disconnect()}}},[bt]),reactExports.useEffect(function(){var Ot=vt.current;if(Ot){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(G,"|setControlsSize"),Ot.clientHeight,Ot.clientWidth),Mt({height:Ot.clientHeight,width:Ot.clientWidth});var Dt=new ResizeObserver(function(){Mt({height:Ot.clientHeight,width:Ot.clientWidth})});return Dt.observe(Ot),function(){Dt.disconnect()}}},[vt]);var Ht=reactExports.useMemo(function(){return Math.max(Math.ceil(.01*At.width),4)},[At]);return React$1.createElement(k.Provider,{value:{stream:at,muted:lt,toggleMuted:mt}},React$1.createElement(Box$1,A$1({id:o,ref:bt,sx:A$1(A$1(A$1({minHeight:wt.height+2*Ht+(s?36:0),minWidth:tt?Math.max(2*wt.width,40)+Ht:0},ht),{position:"relative"}),ut&&N),display:"flex",justifyContent:"center",alignItems:"center"},dt),_e,s&&React$1.createElement(Chip$1,{sx:{position:"absolute",top:Ht,left:"50%",transform:"translate(-50%)",opacity:.9},label:s,color:nt}),React$1.createElement(Stack$1,{ref:vt,sx:{position:"absolute",float:"right",bottom:Ht,right:Ht,opacity:.9}},tt)))}var Q="Video";function X(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(Q)}),tt=_e.id,ct=tt===void 0?(o=_e.stream)===null||o===void 0?void 0:o.getId():tt,gt=_e.sx,rt=_e.style,it=_e.autoPlay,s=it===void 0||it,et=_e.muted,nt=_e.pointer,at=_e.pointerColor,ht=_e.progressColor,dt=_e.stream,pt=_e.sinkId,lt=_e.videoMutedTooltip,mt=lt===void 0?"Video muted":lt,ot=x(_e,["id","sx","style","autoPlay","muted","pointer","pointerColor","progressColor","stream","sinkId","videoMutedTooltip"]),ut=reactExports.useContext(k),ft=ut.stream,bt=ut.muted,vt=bt!==void 0&&bt,yt=reactExports.useMemo(function(){return dt??ft},[ft,dt]),At=reactExports.useMemo(function(){return et??vt},[vt,et]),Nt=reactExports.useRef(null),St=reactExports.useReducer(function(wt){return wt+1},0)[1];return reactExports.useEffect(function(){var wt=Nt==null?void 0:Nt.current;if(yt&&wt){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Q,"|useEffect stream"),wt,yt),yt.attachToElement(wt);var Mt=function(Ht){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Q,"|onVideoFlowStatusChanged"),yt,Ht),St()};return yt.on("videoFlowStatusChanged",Mt),yt.on("remoteVideoFlowStatusChanged",Mt),function(){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Q,"|useEffect stream destroy")),wt.src="",yt.removeListener("audioFlowStatusChanged",Mt),yt.removeListener("remoteAudioFlowStatusChanged",Mt)}}},[yt]),reactExports.useEffect(function(){var wt=Nt==null?void 0:Nt.current;wt&&pt&&wt.setSinkId&&wt.setSinkId(pt)},[pt]),React$1.createElement(Box$1,A$1({sx:A$1(A$1({},gt),{position:"relative"})},ot),React$1.createElement("video",{id:ct,ref:Nt,style:rt,autoPlay:s,muted:At}),nt&&React$1.createElement(Icon$1,{sx:{position:"absolute",top:nt.top,left:nt.left,transform:"translate(-50%,-50%)",opacity:.9},color:at},"adjust"),(yt==null?void 0:yt.isVideoMuted())&&React$1.createElement(Tooltip$1,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",opacity:.9},title:mt},React$1.createElement(M,{color:ht})))}var Y="VideoEnableButton";function Z(a){var o,_e=useThemeProps({props:a,name:"ApiRtcMuiReactLib".concat(Y)}),tt=_e.id,ct=tt===void 0?"video-enable-btn":tt,gt=_e.enabledTooltip,rt=gt===void 0?"Video enabled, click to disable":gt,it=_e.disabledTooltip,s=it===void 0?"Video disabled, click to enable":it,et=_e.noVideoTooltip,nt=et===void 0?"No Video":et,at=_e.tooltipProps,ht=at===void 0?{placement:"left",arrow:!0}:at,dt=_e.enabledIcon,pt=dt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"videocam"):dt,lt=_e.disabledIcon,mt=lt===void 0?React$1.createElement(Icon$1,{fontSize:_e.size},"videocam_off"):lt,ot=x(_e,["id","enabledTooltip","disabledTooltip","noVideoTooltip","tooltipProps","enabledIcon","disabledIcon"]),ut=(o=_e["aria-label"])!==null&&o!==void 0?o:"enable or disable video",ft=reactExports.useReducer(function(yt){return yt+1},0)[1],bt=reactExports.useContext(k).stream;reactExports.useEffect(function(){if(bt){var yt=function(At){globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Y,"|onVideoFlowStatusChanged"),bt,At,bt.isVideoEnabled()),ft()};return bt.on("videoFlowStatusChanged",yt),bt.on("remoteVideoFlowStatusChanged",yt),function(){bt.removeListener("videoFlowStatusChanged",yt),bt.removeListener("remoteVideoFlowStatusChanged",yt)}}},[bt]);var vt=bt&&bt.hasVideo()?bt.isVideoEnabled()?rt:s:nt;return React$1.createElement(Tooltip$1,A$1({title:vt},ht),React$1.createElement("span",null,React$1.createElement(IconButton$1,A$1({id:ct,"aria-label":ut},ot,{disabled:_e.disabled||bt&&!bt.hasVideo(),onClick:function(yt){yt.preventDefault(),yt.stopPropagation(),bt&&(bt.isVideoEnabled()?(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Y,"|stream.disableVideo"),bt.isVideoEnabled()),bt.disableVideo(!0).catch(function(At){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(Y,"|stream.disableVideo failed"),At)})):(globalThis.apirtcMuiReactLibLogLevel.isDebugEnabled&&console.debug("".concat(Y,"|stream.enableVideo"),bt.isVideoEnabled()),bt.enableVideo(!0).catch(function(At){globalThis.apirtcMuiReactLibLogLevel.isWarnEnabled&&console.warn("".concat(Y,"|stream.enableVideo failed"),At)})),ft())}}),bt&&bt.hasVideo()&&bt.isVideoEnabled()?pt:mt)))}var $$1={components:{ApiRtcMuiReactLibAudioEnableButton:{defaultProps:{"aria-label":"activer ou désactiver l'audio",enabledTooltip:"Audio activé, cliquer pour désactiver",disabledTooltip:"Audio désactivé, cliquer pour activer",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibMuteButton:{defaultProps:{"aria-label":"activer ou désactiver le son",mutedTooltip:"Son désactivé, cliquer pour activer",unmutedTooltip:"Son activé, cliquer pour désactiver",noAudioTooltip:"Pas d'audio"}},ApiRtcMuiReactLibPublishOptions:{defaultProps:{labelText:"Options de publication",audioAndVideoText:"Audio et Vidéo",audioOnlyText:"Audio seul",videoOnlyText:"Vidéo seule"}},ApiRtcMuiReactLibSnapshotButton:{defaultProps:{"aria-label":"photo",snapshotTooltip:"Prendre une photo"}},ApiRtcMuiReactLibTorchButton:{defaultProps:{"aria-label":"torche",torchOffTooltip:"Eteindre la torche",torchOnTooltip:"Allumer la torche"}},ApiRtcMuiReactLibVideo:{defaultProps:{videoMutedTooltip:"Vidéo coupée"}},ApiRtcMuiReactLibVideoEnableButton:{defaultProps:{"aria-label":"activer ou désactiver la vidéo",enabledTooltip:"Vidéo activée, cliquer pour désactiver",disabledTooltip:"Vidéo désactivée, cliquer pour activer",noVideoTooltip:"Pas de Vidéo"}}}},ee={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function te(a){switch(a){case"debug":globalThis.apirtcMuiReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcMuiReactLibLogLevel=ee;break;case"warn":globalThis.apirtcMuiReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcMuiReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcMuiReactLibLogLevel}globalThis.apirtcMuiReactLibLogLevel=ee,globalThis.setApirtcMuiReactLibLogLevel=te;const r={},b="useCameraStream";function d(a,o=r,_e){const[tt,ct]=reactExports.useState(),[gt,rt]=reactExports.useState(!1),[it,s]=reactExports.useState();return reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${b}|useEffect`,a,o),a){const et=a.getUserAgent();rt(!0),et.createStream(o).then(nt=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${b}|createStream`,o,nt),ct(nt),s(void 0)}).catch(nt=>{console.error(`${b}|createStream error`,o,nt),ct(void 0),_e&&_e(nt),s(nt)}).finally(()=>{rt(!1)})}else ct(void 0),s(void 0)},[a,o,_e]),reactExports.useEffect(()=>{const et=tt;if(et)return()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${b}|release stream`,et),et.release()}},[tt]),{stream:tt,grabbing:gt,error:it}}const g="useConversation";function u(a,o,_e,tt=!0,ct){const[gt,rt]=reactExports.useState(),[it,s]=reactExports.useState(!1),[et,nt]=reactExports.useState(!1),at=reactExports.useCallback((dt={})=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|join`,gt,dt),new Promise((pt,lt)=>{gt?gt.isJoined()?lt(`${g}|join|conversation already joined`):(nt(!0),gt.join(dt).then(()=>{s(!0),pt()}).catch(mt=>{lt(mt)}).finally(()=>{nt(!1)})):lt(`${g}|join|conversation not defined`)})),[gt]),ht=reactExports.useCallback(()=>(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|leave`,gt),new Promise((dt,pt)=>{gt?gt.isJoined()?gt.leave().then(()=>{s(!1),dt()}).catch(lt=>{pt(lt)}):pt(`${g}|leave|conversation is not joined`):pt(`${g}|leave|conversation not defined`)})),[gt]);return reactExports.useEffect(()=>{if(a&&o){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|getOrCreateConversation`,o,_e);const dt=a.getOrCreateConversation(o,_e);return rt(dt),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,o,_e),dt.isJoined()?dt.leave().then(()=>{}).catch(pt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave()`,pt)}).finally(()=>{dt.destroy()}):dt.destroy(),rt(void 0),s(!1)}}},[a,o,_e]),reactExports.useEffect(()=>{if(gt&&tt){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect`,gt,tt,ct);const dt=gt,pt=tt;return pt&&(nt(!0),dt.join(ct).then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${g}|joined`,dt),s(!0)}).catch(lt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.join() error`,dt,ct,lt)}).finally(()=>{nt(!1)})),()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${g}|useEffect cleanup`,dt,pt),dt.isJoined()&&dt.leave().then(()=>{s(!1)}).catch(lt=>{globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${g}|useEffect conversation.leave() error`,dt,lt)})}}},[gt,_e,tt,ct]),{conversation:gt,joining:et,joined:it,join:at,leave:ht}}function E(a){return a!=null}const $=[],T="useConversationStreams";function R(a,o=$,_e){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|hook render|${a==null?void 0:a.getName()}`,o.map(lt=>lt==null?void 0:lt.options));const tt=reactExports.useRef([]),[ct,gt]=reactExports.useState(new Array),[rt,it]=reactExports.useState(new Array),s=reactExports.useCallback((lt,mt)=>new Promise((ot,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|publish|${a.getName()}`,lt,mt),a.publish(lt,mt).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|published|${a.getName()}`,ft),gt(bt=>[...bt,ft]),ot(ft)}).catch(ft=>{ut(ft)}))}),[a]),et=reactExports.useCallback((lt,mt)=>new Promise((ot,ut)=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|replacePublishedStream|${a.getName()}|${lt.getId()} -> ${mt.getId()}`),a.replacePublishedStream(lt,mt).then(ft=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|stream replaced|${a.getName()}`,lt,ft),gt(bt=>{const vt=bt.indexOf(lt);return vt>=0&&bt.splice(vt,1,ft),Array.from(bt)}),ot(ft)}).catch(ft=>{ut(ft)}))}),[a]),nt=reactExports.useCallback(lt=>{a&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unpublish|${a.getName()}`,lt.getId(),lt),a.unpublish(lt),gt(mt=>mt.filter(ot=>ot!==lt)))},[a]),at=reactExports.useCallback(()=>{const lt=Math.max(tt.current.length,o.length);globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|doHandlePublication`,o,JSON.stringify(tt.current.map(bt=>bt==null?void 0:bt.stream.getId())),JSON.stringify(o.map(bt=>bt==null?void 0:bt.stream.getId())),lt);const mt=[...tt.current],ot=o.map(bt=>bt&&bt.options?{stream:bt.stream,options:Object.assign({},bt.options)}:bt);tt.current.length=0,tt.current.push(...ot);const ut=new Set(o.filter(E).map(bt=>bt.stream)),ft=(bt,vt)=>{s(vt.stream,vt.options).catch(yt=>{tt.current.splice(bt,1,null),_e?_e(yt):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${T}|publish|error`,yt)})};for(let bt=0;bt<lt;bt++){const vt=mt[bt],yt=o[bt];if(vt&&yt){const At=()=>{nt(vt.stream),ft(bt,yt)};vt.stream===yt.stream?JSON.stringify(vt.options)!==JSON.stringify(yt.options)&&At():ut.has(vt.stream)?a&&!a.isPublishedStream(yt.stream)&&ft(bt,yt):a&&!a.isPublishedStream(yt.stream)?JSON.stringify(vt.options)===JSON.stringify(yt.options)?et(vt.stream,yt.stream).catch(Nt=>{tt.current.splice(bt,1,null),_e?_e(Nt):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${T}|replacePublishedStream|error`,Nt)}):At():nt(vt.stream)}else vt&&!yt?ut.has(vt.stream)||nt(vt.stream):!vt&&yt&&a&&!a.isPublishedStream(yt.stream)&&ft(bt,yt)}},[a,o,s,nt,et,_e]),ht=reactExports.useCallback(()=>{a&&gt(lt=>(lt.forEach(mt=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unpublish|${a.getName()}`,mt),a.unpublish(mt)}),[])),tt.current.length=0},[a]),dt=reactExports.useCallback(()=>{a&&it(lt=>(lt.forEach(mt=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|unsubscribeToStream|${a.getName()}`,mt),a.unsubscribeToStream(mt.getId())}),[]))},[a]),pt=reactExports.useCallback(()=>{ht(),dt()},[ht,dt]);return reactExports.useEffect(()=>{if(a){tt.current.length=0;const lt=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_streamAdded|${a.getName()}`,ut),it(ft=>[...ft,ut])},mt=ut=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_streamRemoved|${a.getName()}`,ut),it(ft=>ft.filter(bt=>bt!==ut))},ot=ut=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|on_streamListChanged|${a.getName()}`,ut);const ft=String(ut.streamId);ut.isRemote===!0&&(ut.listEventType==="added"?a.subscribeToStream(ft):ut.listEventType==="removed"&&a.unsubscribeToStream(ft))};return a.on("streamAdded",lt),a.on("streamRemoved",mt),a.on("streamListChanged",ot),()=>{a.removeListener("streamListChanged",ot),a.removeListener("streamRemoved",mt),a.removeListener("streamAdded",lt),pt()}}},[a,pt]),reactExports.useEffect(()=>{if(a){globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${T}|useEffect doHandlePublication|${a.getName()}`,o);const lt=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_joined|${a.getName()}`),at()},mt=()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${T}|on_left|${a.getName()}`),pt()};return a.on("joined",lt),a.on("left",mt),a.isJoined()&&at(),()=>{a.removeListener("joined",lt),a.removeListener("left",mt)}}},[a,o,at,pt]),{publishedStreams:ct,subscribedStreams:rt,publish:s,unpublish:nt,replacePublishedStream:et,unsubscribeAll:dt}}const S="useSession";function D(a,o,_e){const[tt,ct]=reactExports.useState(),[gt,rt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect credentials, options`,a,o),a)return it(a,o).catch(s=>{console.error(`${S}|connection failed`,s),ct(void 0),_e?_e(s):globalThis.apirtcReactLibLogLevel.isWarnEnabled&&console.warn(`${S}|connect|error`,s)}),()=>{ct(void 0),rt(!1)}},[a,o,_e]),reactExports.useEffect(()=>{if(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect session`,tt),tt){const s=tt;return()=>{globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${S}|useEffect session cleanup`,s),s.disconnect().then(()=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${S}|disconnected`,s)}).catch(et=>{console.error(`${S}|disconnect`,et)})}}},[tt]);const it=(s,et)=>new Promise((nt,at)=>{const ht=et||{cloudUrl:"https://cloud.apirtc.com"};let dt;if(typeof(pt=s)=="object"&&"username"in pt)ht.password=s.password,dt=new apiRTC_minExports.UserAgent({uri:`apirtc:${s.username}`});else if(function(lt){return typeof lt=="object"&&"apiKey"in lt}(s))dt=new apiRTC_minExports.UserAgent({uri:`apiKey:${s.apiKey}`});else{if(!function(lt){return typeof lt=="object"&&"token"in lt}(s))return void at("credentials not recognized");dt=new apiRTC_minExports.UserAgent({uri:`token:${s.token}`})}var pt;rt(!0),dt.register(ht).then(lt=>{globalThis.apirtcReactLibLogLevel.isInfoEnabled&&console.info(`${S}|connected`,lt),ct(lt),nt()}).catch(lt=>{at(lt)}).finally(()=>{rt(!1)})});return{session:tt,connecting:gt,connect:it,disconnect:()=>{ct(void 0)}}}const j="useUserMediaDevices",A=a=>{try{const o=localStorage.getItem(a),_e=o?JSON.parse(o):null;return _e?new apiRTC_minExports.MediaDevice(_e.id,_e.type,_e.label):void 0}catch(o){return void console.warn(`${j}|getMediaDeviceFromLocalStorage`,o)}},J=(a,o)=>{try{localStorage.setItem(a,o)}catch{}};function O(a,o){const _e=reactExports.useMemo(()=>o?`${o}.audioIn`:void 0,[o]),tt=reactExports.useMemo(()=>o?`${o}.audioOut`:void 0,[o]),ct=reactExports.useMemo(()=>o?`${o}.videoIn`:void 0,[o]),[gt,rt]=reactExports.useState(()=>_e?A(_e):void 0),[it,s]=reactExports.useState(()=>tt?A(tt):void 0),[et,nt]=reactExports.useState(()=>ct?A(ct):void 0),[at,ht]=reactExports.useState({audioinput:gt?{[gt.getId()]:gt}:{},audiooutput:it?{[it.getId()]:it}:{},videoinput:et?{[et.getId()]:et}:{}});return reactExports.useEffect(()=>{if(a){const dt=a.getUserAgent(),pt=()=>{const lt=dt.getUserMediaDevices();globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${j}|mediaDeviceChanged`,lt),ht(lt),rt(mt=>mt?lt.audioinput[mt.getId()]:void 0),s(mt=>mt?lt.audiooutput[mt.getId()]:void 0),nt(mt=>mt?lt.videoinput[mt.getId()]:void 0)};return dt.on("mediaDeviceChanged",pt),()=>{dt.removeListener("mediaDeviceChanged",pt)}}},[a]),reactExports.useEffect(()=>{gt&&_e&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${j}|Storing audioIn`,gt),J(_e,JSON.stringify({id:gt.getId(),type:gt.getType(),label:gt.getLabel()})))},[_e,gt]),reactExports.useEffect(()=>{it&&tt&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${j}|Storing audioOut`,it),J(tt,JSON.stringify({id:it.getId(),type:it.getType(),label:it.getLabel()})))},[tt,it]),reactExports.useEffect(()=>{et&&ct&&(globalThis.apirtcReactLibLogLevel.isDebugEnabled&&console.debug(`${j}|Storing videoIn`,et),J(ct,JSON.stringify({id:et.getId(),type:et.getType(),label:et.getLabel()})))},[ct,et]),{userMediaDevices:at,selectedAudioIn:gt,selectedAudioInId:gt==null?void 0:gt.getId(),setSelectedAudioIn:rt,selectedAudioOut:it,selectedAudioOutId:it==null?void 0:it.getId(),setSelectedAudioOut:s,selectedVideoIn:et,selectedVideoInId:et==null?void 0:et.getId(),setSelectedVideoIn:nt}}const P={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0};function W(a){switch(a){case"debug":globalThis.apirtcReactLibLogLevel={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0};break;case"info":default:globalThis.apirtcReactLibLogLevel=P;break;case"warn":globalThis.apirtcReactLibLogLevel={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0};break;case"error":globalThis.apirtcReactLibLogLevel={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1}}return globalThis.apirtcReactLibLogLevel}globalThis.apirtcReactLibLogLevel=P,globalThis.setApirtcReactLibLogLevel=W;var build_umd={exports:{}};(function(a,o){(function(tt,ct){a.exports=ct()})(commonjsGlobal,function(){return function(){var _e={"./packages/@logrocket/arson/src/index.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.encode=At,it.decode=wt;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),at=-1,ht=-2,dt=-3,pt=-4,lt=-5,mt=Object.create(null),ot=function(Ot,Dt){function Gt(nn){if(typeof Dt[nn]!="function")throw new Error("second argument to ARSON.registerType("+JSON.stringify(Ot)+", ...) must be an object with a "+nn+" method")}Gt("deconstruct"),Gt("reconstruct"),mt[Ot]=Dt},ut=Object.prototype.toString,ft="[object Date]",bt="[object RegExp]",vt="[object Set]",yt="[object Map]";typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&ot("Buffer",{deconstruct:function(Ot){return Buffer.isBuffer(Ot)&&[Ot.toString("base64"),"base64"]},reconstruct:function(Ot){return Ot&&Buffer.from(Ot[0],Ot[1])}}),ot("Date",{deconstruct:function(Ot){return ut.call(Ot)===ft&&[Ot.toJSON()]},reconstruct:function(Ot){return Ot&&new Date(Ot[0])}}),ot("RegExp",{deconstruct:function(Ot){if(ut.call(Ot)===bt){var Dt=[Ot.source],Gt="";return Ot.ignoreCase&&(Gt+="i"),Ot.multiline&&(Gt+="m"),Ot.global&&(Gt+="g"),Gt&&Dt.push(Gt),Dt}},reconstruct:function(Ot){return Ot&&new RegExp(Ot[0],Ot[1])}}),typeof Set=="function"&&typeof Array.from=="function"&&ot("Set",{deconstruct:function(Ot){if(ut.call(Ot)===vt)return Array.from(Ot)},reconstruct:function(Ot){if(Ot)Ot.forEach(this.add,this);else return new Set}}),typeof Map=="function"&&typeof Array.from=="function"&&ot("Map",{deconstruct:function(Ot){if(ut.call(Ot)===yt)return Array.from(Ot)},reconstruct:function(Ot){if(Ot)Ot.forEach(function(Dt){this.set(Dt[0],Dt[1])},this);else return new Map}});function At(Ht){return JSON.stringify(Nt(Ht))}function Nt(Ht){var Ot=[],Dt=typeof Map=="function"&&new Map;function Gt(vn){switch((0,nt.default)(vn)){case"undefined":return at;case"number":if(isNaN(vn))return dt;if(!isFinite(vn))return vn<0?lt:pt}var yn;return Dt?(yn=Dt.get(vn),typeof yn>"u"&&(yn=Ot.push(vn)-1,Dt.set(vn,yn))):(yn=Ot.indexOf(vn),yn<0&&(yn=Ot.push(vn)-1)),yn}function nn(vn){var yn=vn;if(vn&&(0,nt.default)(vn)==="object"){var cn=Object.keys(vn);if(St(vn))yn={};else if(Array.isArray(vn)){yn=Array(vn.length);var gn=vn.length;if(gn>cn.length)for(var Cn=0;Cn<gn;++Cn)yn[Cn]=ht}else{for(var fn in mt){var Tn=mt[fn].deconstruct(vn);if(Tn){for(var Cn=0;Cn<Tn.length;++Cn)Tn[Cn]=Gt(Tn[Cn]);return Tn.unshift(fn),Tn}}return{}.toString.call(vn)}cn.forEach(function(On){yn[On]=Gt(vn[On])})}return yn}var zt=Gt(Ht);if(zt<0)return zt;for(var Ft=[],un=0;un<Ot.length;++un)Ft[un]=nn(Ot[un]);return Ft}function St(Ht){var Ot=Ht&&(0,nt.default)(Ht)==="object";if(Ot){var Dt=Object.getPrototypeOf?Object.getPrototypeOf(Ht):Ht.__proto__;return Dt===Object.prototype}return!1}function wt(Ht){return Mt(JSON.parse(Ht))}function Mt(Ht){if(typeof Ht=="number"&&Ht<0)return Gt(Ht);var Ot=new Array(Ht.length);function Dt(Ft){return Ft in Ot?Ot[Ft]:Ot[Ft]=Gt(Ft)}function Gt(Ft){if(Ft<0){if(Ft===at||Ft===ht)return;if(Ft===dt)return NaN;if(Ft===pt)return 1/0;if(Ft===lt)return-1/0;throw new Error("invalid ARSON index: "+Ft)}var un=Ht[Ft];if(un&&(0,nt.default)(un)==="object"){if(Array.isArray(un)){var vn=un[0];if(typeof vn=="string"&&vn in mt){var yn=mt[vn].reconstruct,cn=yn();return cn&&nn.push({reconstruct:yn,empty:cn,argIndexes:un.slice(1)}),Ht[Ft]=cn||yn(un.slice(1).map(Dt))}}zt.push(un)}return un}var nn=[],zt=[];return Ht.forEach(function(Ft,un){Dt(un)}),nn.forEach(function(Ft){Ft.args=Ft.argIndexes.map(Dt)}),zt.forEach(function(Ft){Object.keys(Ft).forEach(function(un){var vn=Ft[un];if(typeof vn=="number")if(vn<0){if(vn===ht){delete Ft[un];return}Ft[un]=Dt(vn)}else Ft[un]=Ht[vn]})}),nn.forEach(function(Ft){Ft.reconstruct.call(Ft.empty,Ft.args)}),Ht[0]}},"./packages/@logrocket/console/src/index.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var nt=et(s("./packages/@logrocket/console/src/registerConsole.js")),at=nt.default;it.default=at},"./packages/@logrocket/console/src/registerConsole.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),at=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),ht=s("./packages/@logrocket/exceptions/src/index.js");function dt(pt){var lt=[],mt=["log","warn","info","error","debug"];return mt.forEach(function(ot){lt.push((0,at.default)(console,ot,function(){for(var ut=arguments.length,ft=new Array(ut),bt=0;bt<ut;bt++)ft[bt]=arguments[bt];pt.addEvent("lr.core.LogEvent",function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yt=vt.isEnabled;return(0,nt.default)(yt)==="object"&&yt[ot]===!1||yt===!1?null:(ot==="error"&&vt.shouldAggregateConsoleErrors&&ht.Capture.captureMessage(pt,ft[0],ft,{},!0),{logLevel:ot.toUpperCase(),args:ft})})}))}),function(){lt.forEach(function(ot){return ot()})}}},"./packages/@logrocket/exceptions/src/Capture.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.captureMessage=dt,it.captureException=pt;var nt=s("./packages/@logrocket/utils/src/index.ts"),at=et(s("./packages/@logrocket/utils/src/TraceKit.js")),ht=et(s("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function dt(lt,mt,ot){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ft=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,bt={exceptionType:ft?"CONSOLE":"MESSAGE",message:mt,messageArgs:ot,browserHref:window.location?window.location.href:""};(0,nt.scrubException)(bt,ut),lt.addEvent("lr.core.Exception",function(){return bt})}function pt(lt,mt){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,ft=ut||at.default.computeStackTrace(mt),bt={exceptionType:"WINDOW",errorType:ft.name,message:ft.message,browserHref:window.location?window.location.href:""};(0,nt.scrubException)(bt,ot);var vt={_stackTrace:(0,ht.default)(ft)};lt.addEvent("lr.core.Exception",function(){return bt},vt)}},"./packages/@logrocket/exceptions/src/index.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),Object.defineProperty(it,"registerExceptions",{enumerable:!0,get:function(){return at.default}}),it.Capture=void 0;var at=et(s("./packages/@logrocket/exceptions/src/registerExceptions.js")),ht=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));it.Capture=ht;function dt(lt){if(typeof WeakMap!="function")return null;var mt=new WeakMap,ot=new WeakMap;return(dt=function(ft){return ft?ot:mt})(lt)}function pt(lt,mt){if(!mt&&lt&&lt.__esModule)return lt;if(lt===null||nt(lt)!=="object"&&typeof lt!="function")return{default:lt};var ot=dt(mt);if(ot&&ot.has(lt))return ot.get(lt);var ut={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var bt in lt)if(bt!=="default"&&Object.prototype.hasOwnProperty.call(lt,bt)){var vt=ft?Object.getOwnPropertyDescriptor(lt,bt):null;vt&&(vt.get||vt.set)?Object.defineProperty(ut,bt,vt):ut[bt]=lt[bt]}return ut.default=lt,ot&&ot.set(lt,ut),ut}},"./packages/@logrocket/exceptions/src/raven/raven.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),at=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),ht=et(s("./packages/@logrocket/utils/src/TraceKit.js")),dt=Object.prototype;function pt(bt){return bt===void 0}function lt(bt){return typeof bt=="function"}function mt(bt,vt){return dt.hasOwnProperty.call(bt,vt)}function ot(bt,vt,yt,At){var Nt=bt[vt];bt[vt]=yt(Nt),At&&At.push([bt,vt,Nt])}var ut=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{};ut.document;var ft=function(){function bt(vt){var yt=vt.captureException;(0,nt.default)(this,bt),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=yt,ht.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,at.default)(bt,[{key:"uninstall",value:function(){ht.default.report.unsubscribe(this._errorHandler);for(var yt;this._wrappedBuiltIns.length;){yt=this._wrappedBuiltIns.shift();var At=yt[0],Nt=yt[1],St=yt[2];At[Nt]=St}}},{key:"_errorHandler",value:function(yt){this._ignoreOnError||this.captureException(yt)}},{key:"_ignoreNextOnError",value:function(){var yt=this;this._ignoreOnError+=1,setTimeout(function(){yt._ignoreOnError-=1})}},{key:"context",value:function(yt,At,Nt){return lt(yt)&&(Nt=At||[],At=yt,yt=void 0),this.wrap(yt,At).apply(this,Nt)}},{key:"wrap",value:function(yt,At,Nt){var St=this;if(pt(At)&&!lt(yt))return yt;if(lt(yt)&&(At=yt,yt=void 0),!lt(At))return At;try{if(At.__lr__)return At;if(At.__lr_wrapper__)return At.__lr_wrapper__;if(!Object.isExtensible(At))return At}catch{return At}function wt(){var Ht=[],Ot=arguments.length,Dt=!yt||yt&&yt.deep!==!1;for(Nt&&lt(Nt)&&Nt.apply(this,arguments);Ot--;)Ht[Ot]=Dt?St.wrap(yt,arguments[Ot]):arguments[Ot];try{return At.apply(this,Ht)}catch(Gt){throw St._ignoreNextOnError(),St.captureException(ht.default.computeStackTrace(Gt),yt),Gt}}for(var Mt in At)mt(At,Mt)&&(wt[Mt]=At[Mt]);return wt.prototype=At.prototype,At.__lr_wrapper__=wt,wt.__lr__=!0,wt.__inner__=At,wt}},{key:"_instrumentTryCatch",value:function(){var yt=this,At=yt._wrappedBuiltIns;function Nt(Ot){return function(Dt,Gt){for(var nn=new Array(arguments.length),zt=0;zt<nn.length;++zt)nn[zt]=arguments[zt];var Ft=nn[0];return lt(Ft)&&(nn[0]=yt.wrap(Ft)),Ot.apply?Ot.apply(this,nn):Ot(nn[0],nn[1])}}function St(Ot){var Dt=ut[Ot]&&ut[Ot].prototype;Dt&&Dt.hasOwnProperty&&Dt.hasOwnProperty("addEventListener")&&(ot(Dt,"addEventListener",function(Gt){return function(nn,zt,Ft,un){try{zt&&zt.handleEvent&&(zt.handleEvent=yt.wrap(zt.handleEvent))}catch{}var vn;return Gt.call(this,nn,yt.wrap(zt,void 0,vn),Ft,un)}},At),ot(Dt,"removeEventListener",function(Gt){return function(nn,zt,Ft,un){try{zt=zt&&(zt.__lr_wrapper__?zt.__lr_wrapper__:zt)}catch{}return Gt.call(this,nn,zt,Ft,un)}},At))}ot(ut,"setTimeout",Nt,At),ot(ut,"setInterval",Nt,At),ut.requestAnimationFrame&&ot(ut,"requestAnimationFrame",function(Ot){return function(Dt){return Ot(yt.wrap(Dt))}},At);for(var wt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Mt=0;Mt<wt.length;Mt++)St(wt[Mt]);var Ht=ut.jQuery||ut.$;Ht&&Ht.fn&&Ht.fn.ready&&ot(Ht.fn,"ready",function(Ot){return function(Dt){return Ot.call(this,yt.wrap(Dt))}},At)}}]),bt}();it.default=ft},"./packages/@logrocket/exceptions/src/registerExceptions.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=lt;var at=et(s("./packages/@logrocket/exceptions/src/raven/raven.js")),ht=pt(s("./packages/@logrocket/exceptions/src/Capture.js"));function dt(mt){if(typeof WeakMap!="function")return null;var ot=new WeakMap,ut=new WeakMap;return(dt=function(bt){return bt?ut:ot})(mt)}function pt(mt,ot){if(!ot&&mt&&mt.__esModule)return mt;if(mt===null||nt(mt)!=="object"&&typeof mt!="function")return{default:mt};var ut=dt(ot);if(ut&&ut.has(mt))return ut.get(mt);var ft={},bt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var vt in mt)if(vt!=="default"&&Object.prototype.hasOwnProperty.call(mt,vt)){var yt=bt?Object.getOwnPropertyDescriptor(mt,vt):null;yt&&(yt.get||yt.set)?Object.defineProperty(ft,vt,yt):ft[vt]=mt[vt]}return ft.default=mt,ut&&ut.set(mt,ft),ft}function lt(mt){var ot=new at.default({captureException:function(bt){ht.captureException(mt,null,null,bt)}}),ut=function(bt){mt.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:bt.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",ut),function(){window.removeEventListener("unhandledrejection",ut),ot.uninstall()}}},"./packages/@logrocket/exceptions/src/stackTraceFromError.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){function nt(at){return at===null?void 0:at}return et.stack?et.stack.map(function(at){return{lineNumber:nt(at.line),columnNumber:nt(at.column),fileName:nt(at.url),functionName:nt(at.func)}}):void 0}},"./packages/@logrocket/network/src/fetchIntercept.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),at=s("./packages/@logrocket/network/src/registerXHR.js"),ht=[];function dt(ot,ut){for(var ft=ht.reduce(function(Nt,St){return[St].concat(Nt)},[]),bt=arguments.length,vt=new Array(bt>2?bt-2:0),yt=2;yt<bt;yt++)vt[yt-2]=arguments[yt];var At=Promise.resolve(vt);return ft.forEach(function(Nt){var St=Nt.request,wt=Nt.requestError;(St||wt)&&(At=At.then(function(Mt){return St.apply(void 0,[ut].concat((0,nt.default)(Mt)))},function(Mt){return wt.apply(void 0,[ut].concat((0,nt.default)(Mt)))}))}),At=At.then(function(Nt){(0,at.setActive)(!1);var St,wt;try{St=ot.apply(void 0,(0,nt.default)(Nt))}catch(Mt){wt=Mt}if((0,at.setActive)(!0),wt)throw wt;return St}),ft.forEach(function(Nt){var St=Nt.response,wt=Nt.responseError;(St||wt)&&(At=At.then(function(Mt){return St(ut,Mt)},function(Mt){return wt&&wt(ut,Mt)}))}),At}function pt(ot){if(!(!ot.fetch||!ot.Promise)){var ut=ot.fetch.polyfill;ot.fetch=function(ft){var bt=0;return function(){for(var vt=arguments.length,yt=new Array(vt),At=0;At<vt;At++)yt[At]=arguments[At];return dt.apply(void 0,[ft,bt++].concat(yt))}}(ot.fetch),ut&&(ot.fetch.polyfill=ut)}}var lt=!1,mt={register:function(ut){return lt||(lt=!0,pt(window)),ht.push(ut),function(){var ft=ht.indexOf(ut);ft>=0&&ht.splice(ft,1)}},clear:function(){ht=[]}};it.default=mt},"./packages/@logrocket/network/src/index.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ft;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./packages/@logrocket/network/src/registerFetch.js")),dt=s("./packages/@logrocket/network/src/registerIonic.ts"),pt=et(s("./packages/@logrocket/network/src/registerNetworkInformation.js")),lt=et(s("./packages/@logrocket/network/src/registerXHR.js")),mt=et(s("./packages/@logrocket/utils/src/mapValues.js"));function ot(bt,vt){var yt=Object.keys(bt);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(bt);vt&&(At=At.filter(function(Nt){return Object.getOwnPropertyDescriptor(bt,Nt).enumerable})),yt.push.apply(yt,At)}return yt}function ut(bt){for(var vt=1;vt<arguments.length;vt++){var yt=arguments[vt]!=null?arguments[vt]:{};vt%2?ot(Object(yt),!0).forEach(function(At){(0,nt.default)(bt,At,yt[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bt,Object.getOwnPropertyDescriptors(yt)):ot(Object(yt)).forEach(function(At){Object.defineProperty(bt,At,Object.getOwnPropertyDescriptor(yt,At))})}return bt}function ft(bt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1},yt=vt.isReactNative,At=vt.shouldAugmentNPS,Nt=vt.shouldParseXHRBlob,St={},wt=function(un){var vn=4096e3,yn=un;if((0,at.default)(un)==="object"&&un!=null){var cn=Object.getPrototypeOf(un);(cn===Object.prototype||cn===null)&&(yn=JSON.stringify(un))}if(yn&&yn.length&&yn.length>vn&&typeof yn=="string"){var gn=yn.substring(0,1e3);return"".concat(gn,` ... LogRocket truncating to first 1000 characters.
      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network`)}return un},Mt=function(un,vn){var yn=vn.method;bt.addEvent("lr.network.RequestEvent",function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gn=cn.isEnabled,Cn=gn===void 0?!0:gn,fn=cn.requestSanitizer,Tn=fn===void 0?function(Rn){return Rn}:fn;if(!Cn)return null;var On=null;try{On=Tn(ut(ut({},vn),{},{reqId:un}))}catch(Rn){console.error(Rn)}if(On){var Ln=On.url;if(typeof document<"u"&&typeof document.createElement=="function"){var An=document.createElement("a");An.href=On.url,Ln=An.href}return{reqId:un,url:Ln,headers:(0,mt.default)(On.headers,function(Rn){return"".concat(Rn)}),body:wt(On.body),method:yn,referrer:On.referrer||void 0,mode:On.mode||void 0,credentials:On.credentials||void 0}}return St[un]=!0,null})},Ht=function(un,vn){var yn=vn.method,cn=vn.status;bt.addEvent("lr.network.ResponseEvent",function(){var gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cn=gn.isEnabled,fn=Cn===void 0?!0:Cn,Tn=gn.responseSanitizer,On=Tn===void 0?function(An){return An}:Tn;if(fn){if(St[un])return delete St[un],null}else return null;var Ln=null;try{Ln=On(ut(ut({},vn),{},{reqId:un}))}catch(An){console.error(An)}return Ln?{reqId:un,status:Ln.status,headers:(0,mt.default)(Ln.headers,function(An){return"".concat(An)}),body:wt(Ln.body),method:yn}:{reqId:un,status:cn,headers:{},body:null,method:yn}})},Ot=function(un){return bt.isDisabled||St[un]===!0},Dt=(0,ht.default)({addRequest:Mt,addResponse:Ht,isIgnored:Ot}),Gt=(0,lt.default)({addRequest:Mt,addResponse:Ht,isIgnored:Ot,logger:bt,shouldAugmentNPS:At,shouldParseXHRBlob:Nt}),nn=(0,dt.registerIonic)({addRequest:Mt,addResponse:Ht,isIgnored:Ot}),zt=yt?function(){}:(0,pt.default)(bt);return function(){zt(),Dt(),Gt(),nn()}}},"./packages/@logrocket/network/src/registerFetch.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ut;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=et(s("./packages/@logrocket/utils/src/mapValues.js")),ht=et(s("./packages/@logrocket/network/src/fetchIntercept.js"));function dt(ft,bt){var vt=Object.keys(ft);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(ft);bt&&(yt=yt.filter(function(At){return Object.getOwnPropertyDescriptor(ft,At).enumerable})),vt.push.apply(vt,yt)}return vt}function pt(ft){for(var bt=1;bt<arguments.length;bt++){var vt=arguments[bt]!=null?arguments[bt]:{};bt%2?dt(Object(vt),!0).forEach(function(yt){(0,nt.default)(ft,yt,vt[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(vt)):dt(Object(vt)).forEach(function(yt){Object.defineProperty(ft,yt,Object.getOwnPropertyDescriptor(vt,yt))})}return ft}function lt(ft){if(ft==null||typeof ft.forEach!="function")return ft;var bt={};return ft.forEach(function(vt,yt){bt[yt]?bt[yt]="".concat(bt[yt],",").concat(vt):bt[yt]="".concat(vt)}),bt}var mt=function(bt){return(0,at.default)(lt(bt),function(vt){return"".concat(vt)})};function ot(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:ft.url,headers:mt(ft.headers),method:ft.method&&ft.method.toUpperCase(),referrer:ft.referrer||void 0,mode:ft.mode||void 0,credentials:ft.credentials||void 0}}function ut(ft){var bt=ft.addRequest,vt=ft.addResponse,yt=ft.isIgnored,At="fetch-",Nt={},St=ht.default.register({request:function(Mt){for(var Ht=arguments.length,Ot=new Array(Ht>1?Ht-1:0),Dt=1;Dt<Ht;Dt++)Ot[Dt-1]=arguments[Dt];var Gt;if(typeof Request<"u"&&Ot[0]instanceof Request){var nn;try{nn=Ot[0].clone().text()}catch(zt){nn=Promise.resolve("LogRocket fetch error: ".concat(zt.message))}Gt=nn.then(function(zt){return pt(pt({},ot(Ot[0])),{},{body:zt})},function(zt){return pt(pt({},ot(Ot[0])),{},{body:"LogRocket fetch error: ".concat(zt.message)})})}else Gt=Promise.resolve(pt(pt({},ot(Ot[1])),{},{url:"".concat(Ot[0]),body:(Ot[1]||{}).body}));return Gt.then(function(zt){return Nt[Mt]=zt.method,bt("".concat(At).concat(Mt),zt),Ot})},requestError:function(Mt,Ht){return Promise.reject(Ht)},response:function(Mt,Ht){var Ot,Dt;if(yt("".concat(At).concat(Mt)))return Ht;try{Ot=Ht.clone()}catch(un){var Gt={url:Ht.url,status:Ht.status,headers:mt(Ht.headers),body:"LogRocket fetch error: ".concat(un.message),method:Nt[Mt]};return delete Nt[Mt],vt("".concat(At).concat(Mt),Gt),Ht}try{if(window.TextDecoder&&Ot.body){var nn=Ot.body.getReader(),zt=new window.TextDecoder("utf-8"),Ft="";Dt=nn.read().then(function un(vn){var yn=vn.done,cn=vn.value;if(yn)return Ft;var gn=cn?zt.decode(cn,{stream:!0}):"";return Ft+=gn,nn.read().then(un)})}else Dt=Ot.text()}catch(un){Dt=Promise.resolve("LogRocket error reading body: ".concat(un.message))}return Dt.catch(function(un){if(!(un.name==="AbortError"&&un instanceof DOMException))return"LogRocket error reading body: ".concat(un.message)}).then(function(un){var vn={url:Ht.url,status:Ht.status,headers:mt(Ht.headers),body:un,method:Nt[Mt]};delete Nt[Mt],vt("".concat(At).concat(Mt),vn)}),Ht},responseError:function(Mt,Ht){var Ot={url:void 0,status:0,headers:{},body:"".concat(Ht)};return vt("".concat(At).concat(Mt),Ot),Promise.reject(Ht)}});return St}},"./packages/@logrocket/network/src/registerIonic.ts":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.mergeHeaders=nn,it.serializeQueryParams=cn,it.appendQueryParamsString=gn,it.processData=Tn,it.registerIonic=An;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),dt=et(s("./packages/@logrocket/utils/src/protectFunc.js"));function pt(Rn,In){var kn=typeof Symbol<"u"&&Rn[Symbol.iterator]||Rn["@@iterator"];if(!kn){if(Array.isArray(Rn)||(kn=lt(Rn))||In&&Rn&&typeof Rn.length=="number"){kn&&(Rn=kn);var xn=0,Yn=function(){};return{s:Yn,n:function(){return xn>=Rn.length?{done:!0}:{done:!1,value:Rn[xn++]}},e:function(Hn){throw Hn},f:Yn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Un=!0,jn=!1,Qn;return{s:function(){kn=kn.call(Rn)},n:function(){var Hn=kn.next();return Un=Hn.done,Hn},e:function(Hn){jn=!0,Qn=Hn},f:function(){try{!Un&&kn.return!=null&&kn.return()}finally{if(jn)throw Qn}}}}function lt(Rn,In){if(Rn){if(typeof Rn=="string")return mt(Rn,In);var kn=Object.prototype.toString.call(Rn).slice(8,-1);if(kn==="Object"&&Rn.constructor&&(kn=Rn.constructor.name),kn==="Map"||kn==="Set")return Array.from(Rn);if(kn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(kn))return mt(Rn,In)}}function mt(Rn,In){(In==null||In>Rn.length)&&(In=Rn.length);for(var kn=0,xn=new Array(In);kn<In;kn++)xn[kn]=Rn[kn];return xn}function ot(Rn,In){var kn=Object.keys(Rn);if(Object.getOwnPropertySymbols){var xn=Object.getOwnPropertySymbols(Rn);In&&(xn=xn.filter(function(Yn){return Object.getOwnPropertyDescriptor(Rn,Yn).enumerable})),kn.push.apply(kn,xn)}return kn}function ut(Rn){for(var In=1;In<arguments.length;In++){var kn=arguments[In]!=null?arguments[In]:{};In%2?ot(Object(kn),!0).forEach(function(xn){(0,nt.default)(Rn,xn,kn[xn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Rn,Object.getOwnPropertyDescriptors(kn)):ot(Object(kn)).forEach(function(xn){Object.defineProperty(Rn,xn,Object.getOwnPropertyDescriptor(kn,xn))})}return Rn}var ft=new Set(["get","put","post","patch","head","delete","options","upload","download"]),bt=new Set(["urlencoded","json","utf8"]),vt=new Set(["raw","multipart"]),yt="ionic-",At=new Set(["desktop","mobileweb","pwa"]),Nt=new Set(["FormData"]),St=new Set,wt=new Set(["string"]),Mt=new Set(["string","array"]),Ht={utf8:wt,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:St};function Ot(Rn,In,kn){if(typeof In!="string")throw new Error("".concat(kn," must be one of: ").concat((0,ht.default)(Rn).join(", ")));if(In=In.trim().toLowerCase(),!Rn.has(In))throw new Error("".concat(kn," must be one of: ").concat((0,ht.default)(Rn).join(", ")));return In}function Dt(Rn,In,kn){if((0,at.default)(Rn)!=="object")throw new Error(kn);for(var xn=0,Yn=Object.keys(Rn);xn<Yn.length;xn++){var Un=Yn[xn];if(!In.has((0,at.default)(Rn[Un])))throw new Error(kn)}return Rn}function Gt(Rn,In){var kn=new URL(Rn),xn=kn.host;return In.getHeaders(xn)||null}function nn(Rn,In){return ut(ut({},Rn),In)}function zt(Rn,In,kn){var xn=kn.getHeaders("*")||{},Yn=Gt(Rn,kn)||{};return nn(nn(xn,Yn),In)}function Ft(Rn,In){return In?encodeURIComponent(Rn):Rn}function un(Rn,In,kn){return Rn.length?kn?"".concat(encodeURIComponent(Rn),"[").concat(encodeURIComponent(In),"]"):"".concat(Rn,"[").concat(In,"]"):kn?encodeURIComponent(In):In}function vn(Rn,In,kn){var xn=[],Yn=pt(In),Un;try{for(Yn.s();!(Un=Yn.n()).done;){var jn=Un.value;if(Array.isArray(jn)){xn.push(vn("".concat(Rn,"[]"),jn,kn));continue}else if((0,at.default)(jn)==="object"){xn.push(yn("".concat(Rn,"[]").concat(jn),kn,void 0));continue}xn.push("".concat(un(Rn,"",kn),"=").concat(Ft(jn,kn)))}}catch(Qn){Yn.e(Qn)}finally{Yn.f()}return xn.join("&")}function yn(Rn,In,kn){var xn=[];for(var Yn in In)if(In.hasOwnProperty(Yn)){var Un=Rn.length?"".concat(Rn,"[").concat(Yn,"]"):Yn;if(Array.isArray(In[Yn])){xn.push(vn(Un,In[Yn],kn));continue}else if((0,at.default)(In[Yn])==="object"&&In[Yn]!==null){xn.push(yn(Un,In[Yn],kn));continue}xn.push("".concat(un(Rn,Yn,kn),"=").concat(Ft(In[Yn],kn)))}return xn.join("&")}function cn(Rn,In){return yn("",Rn,In)}function gn(Rn,In){if(!Rn.length||!In.length)return Rn;var kn=new URL(Rn),xn=kn.host,Yn=kn.pathname,Un=kn.search,jn=kn.hash,Qn=kn.protocol;return"".concat(Qn,"//").concat(xn).concat(Yn).concat(Un.length?"".concat(Un,"&").concat(In):"?".concat(In)).concat(jn)}function Cn(Rn){return Ht[Rn]||Ht.default}function fn(Rn){return Rn==="multipart"?Nt:St}function Tn(Rn,In){var kn=(0,at.default)(Rn),xn=Cn(In),Yn=fn(In);if(Yn.size>0){var Un=!1;if(Yn.forEach(function(jn){s.g[jn]&&Rn instanceof s.g[jn]&&(Un=!0)}),!Un)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,ht.default)(Yn).join(", ")))}if(Yn.size===0&&!xn.has(kn))throw new Error("TYPE_MISMATCH_DATA ".concat((0,ht.default)(xn).join(", ")));switch(In){case"utf8":return Rn;default:return JSON.stringify(Rn,void 0,2)}}function On(Rn,In){Rn=Rn||{};var kn,xn=Rn.data;try{kn=Ot(bt,Rn.serializer||In.getDataSerializer(),"serializer / data payload type")}catch{kn=Ot(vt,Rn.serializer||In.getDataSerializer(),"serializer / data payload type"),xn={}}return{data:xn,filePath:Rn.filePath,followRedirect:Rn.followRedirect,headers:Dt(Rn.headers||{},wt,"Invalid header type, must be string"),method:Ot(ft,Rn.method||ft[0],"method"),name:Rn.name,params:Dt(Rn.params||{},Mt,"Invalid param, must be of type string or array"),responseType:Rn.responseType,serializer:kn,connectTimeout:Rn.connectTimeout,readTimeout:Rn.readTimeout,timeout:Rn.timeout}}var Ln=0;function An(Rn){var In,kn,xn,Yn=Rn.addRequest,Un=Rn.addResponse,jn=Rn.isIgnored,Qn=(In=window.cordova)===null||In===void 0||(kn=In.plugin)===null||kn===void 0?void 0:kn.http,on={},Hn=!1;if(typeof Qn>"u")return function(){};var Fn=(xn=window.ionic)===null||xn===void 0?void 0:xn.platforms;if(typeof Fn<"u"&&typeof Fn.some=="function"&&Fn.some(function(qn){return At.has(qn)}))return function(){};var Vn=Qn.sendRequest,Bn=(0,dt.default)(function(qn,Gn,_n){if(!jn("".concat(yt).concat(_n)))try{var $n={url:qn.url||"",status:qn.status<600&&qn.status>=100?qn.status:0,headers:qn.headers||{},body:Gn?qn.data:qn.error,method:on[_n].toUpperCase()};Un("".concat(yt).concat(_n),$n)}catch(wn){var bn={url:qn.url||"",status:qn.status<600&&qn.status>=100?qn.status:0,headers:qn.headers||{},body:"LogRocket fetch error: ".concat(wn.message),method:on[_n].toUpperCase()};Un("".concat(yt).concat(_n),bn)}});return Qn.sendRequest=function(qn,Gn,_n,$n){var bn=++Ln,wn=function(Pt){Hn||(Bn(Pt,!0,bn),delete on[bn]),_n(Pt)},Yt=function(Pt){Hn||(Bn(Pt,!1,bn),delete on[bn]),$n(Pt)};if(!Hn)try{var kt=On(Gn,Qn),st=gn(qn,yn("",kt.params,!0)),Tt=zt(qn,kt.headers,Qn),Rt=kt.method||"get";on[bn]=Rt;var Lt={url:st,method:Rt.toUpperCase(),headers:Tt||{},body:Tn(kt.data||{},kt.serializer)};Yn("".concat(yt).concat(bn),Lt)}catch(jt){var Et={url:qn,method:(Gn.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(jt.message)};Yn("".concat(yt).concat(bn),Et)}return Vn(qn,Gn,wn,Yt)},function(){Hn=!0,Qn.sendRequest=Vn,on={}}}},"./packages/@logrocket/network/src/registerNetworkInformation.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function et(nt){var at=void 0;function ht(){var dt={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(dt.effectiveType=s[window.navigator.connection.effectiveType]||"UNKNOWN"):dt.effectiveType="NONE",!(at&&dt.online===at.online&&dt.effectiveType===at.effectiveType)&&(at=dt,nt.addEvent("lr.network.NetworkStatusEvent",function(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=pt.isEnabled,mt=lt===void 0?!0:lt;return mt?dt:null}))}return setTimeout(ht),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",ht),window.addEventListener("online",ht),window.addEventListener("offline",ht),function(){window.removeEventListener("offline",ht),window.removeEventListener("online",ht),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",ht)}}},"./packages/@logrocket/network/src/registerXHR.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.setActive=lt,it.default=ot;var nt=et(s("./packages/@logrocket/utils/src/mapValues.js")),at=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),ht=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt=s("./packages/@logrocket/utils/src/constants/nps.js"),pt=!0;function lt(ut){pt=ut}var mt=0;function ot(ut){var ft=ut.addRequest,bt=ut.addResponse,vt=ut.isIgnored,yt=ut.logger,At=ut.shouldAugmentNPS,Nt=At===void 0?!0:At,St=ut.shouldParseXHRBlob,wt=St===void 0?!1:St,Mt=XMLHttpRequest,Ht=new WeakMap,Ot=!1,Dt="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(nn,zt){var Ft=new Mt(nn,zt);if(!pt)return Ft;Ht.set(Ft,{xhrId:++mt,headers:{}});var un=Ft.open;function vn(){for(var Cn=arguments.length,fn=new Array(Cn),Tn=0;Tn<Cn;Tn++)fn[Tn]=arguments[Tn];try{var On=fn[1];if(window.URL&&typeof window.URL=="function"&&On.search(dt.WOOTRIC_RESPONSES_REGEX)===0){var Ln=new window.URL(yt.recordingURL);Ln.searchParams.set("nps","wootric");var An=new window.URL(On),Rn=An.searchParams.get("response[text]"),In=Rn?"".concat(Rn,`

`):"";An.searchParams.set("response[text]","".concat(In,"<").concat(Ln.href,"|View LogRocket session>")),fn[1]=An.href}}catch{}return un.apply(this,fn)}var yn=Ft.send;function cn(){for(var Cn=arguments.length,fn=new Array(Cn),Tn=0;Tn<Cn;Tn++)fn[Tn]=arguments[Tn];try{var On=Ht.get(Ft);if(window.URL&&typeof window.URL=="function"&&On&&On.url&&On.url.search(dt.DELIGHTED_RESPONSES_REGEX)===0&&fn.length&&fn[0].indexOf(dt.DELIGHTED_FEEDBACK_PREFIX)!==-1){var Ln=new window.URL(yt.recordingURL);Ln.searchParams.set("nps","delighted");var An=encodeURIComponent(Ln.href),Rn=fn[0].split("&").map(function(In){if((0,ht.default)(In,dt.DELIGHTED_FEEDBACK_PREFIX)){var kn=In===dt.DELIGHTED_FEEDBACK_PREFIX;return"".concat(In).concat(kn?"":`

`,"<").concat(An,"|View LogRocket session>")}return In}).join("&");fn[0]=Rn}}catch{}return yn.apply(this,fn)}Nt&&(Ft.open=vn,Ft.send=cn),(0,at.default)(Ft,"open",function(Cn,fn){if(!Ot){var Tn=Ht.get(Ft);Tn.method=Cn,Tn.url=fn}}),(0,at.default)(Ft,"send",function(Cn){if(!Ot){var fn=Ht.get(Ft);if(fn){var Tn={url:fn.url,method:fn.method&&fn.method.toUpperCase(),headers:(0,nt.default)(fn.headers||{},function(On){return On.join(", ")}),body:Cn};ft("".concat(Dt).concat(fn.xhrId),Tn)}}}),(0,at.default)(Ft,"setRequestHeader",function(Cn,fn){if(!Ot){var Tn=Ht.get(Ft);Tn&&(Tn.headers=Tn.headers||{},Tn.headers[Cn]=Tn.headers[Cn]||[],Tn.headers[Cn].push(fn))}});var gn={readystatechange:function(){if(!Ot&&Ft.readyState===4){var fn=Ht.get(Ft);if(!fn||vt("".concat(Dt).concat(fn.xhrId)))return;var Tn=Ft.getAllResponseHeaders()||"",On=Tn.split(/[\r\n]+/).reduce(function(In,kn){var xn=In,Yn=kn.split(": ");if(Yn.length>0){var Un=Yn.shift(),jn=Yn.join(": ");In[Un]?xn[Un]+=", ".concat(jn):xn[Un]=jn}return xn},{}),Ln;try{switch(Ft.responseType){case"json":Ln=yt._shouldCloneResponse?JSON.parse(JSON.stringify(Ft.response)):Ft.response;break;case"arraybuffer":case"blob":{Ln=Ft.response;break}case"document":{Ln=Ft.responseXML;break}case"text":case"":{Ln=Ft.responseText;break}default:Ln=""}}catch{Ln="LogRocket: Error accessing response."}var An={url:fn.url,status:Ft.status,headers:On,body:Ln,method:(fn.method||"").toUpperCase()};if(wt&&An.body instanceof Blob){var Rn=new FileReader;Rn.readAsText(An.body),Rn.onload=function(){try{An.body=JSON.parse(Rn.result)}catch{}bt("".concat(Dt).concat(fn.xhrId),An)}}else bt("".concat(Dt).concat(fn.xhrId),An)}}};return Object.keys(gn).forEach(function(Cn){Ft.addEventListener(Cn,gn[Cn])}),Ft},XMLHttpRequest.prototype=Mt.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(Gt){XMLHttpRequest[Gt]=Mt[Gt]}),function(){Ot=!0,XMLHttpRequest=Mt}}},"./packages/@logrocket/now/src/index.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var s=Date.now.bind(Date),et=s(),nt=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return s()-et};it.default=nt},"./packages/@logrocket/redux/src/createEnhancer.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=lt;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=et(s("./packages/@logrocket/now/src/index.js"));function ht(mt,ot){var ut=Object.keys(mt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(mt);ot&&(ft=ft.filter(function(bt){return Object.getOwnPropertyDescriptor(mt,bt).enumerable})),ut.push.apply(ut,ft)}return ut}function dt(mt){for(var ot=1;ot<arguments.length;ot++){var ut=arguments[ot]!=null?arguments[ot]:{};ot%2?ht(Object(ut),!0).forEach(function(ft){(0,nt.default)(mt,ft,ut[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(mt,Object.getOwnPropertyDescriptors(ut)):ht(Object(ut)).forEach(function(ft){Object.defineProperty(mt,ft,Object.getOwnPropertyDescriptor(ut,ft))})}return mt}var pt=0;function lt(mt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=ot.stateSanitizer,ft=ut===void 0?function(yt){return yt}:ut,bt=ot.actionSanitizer,vt=bt===void 0?function(yt){return yt}:bt;return function(yt){return function(At,Nt,St){var wt=yt(At,Nt,St),Mt=wt.dispatch,Ht=pt++;mt.addEvent("lr.redux.InitialState",function(){var Dt;try{Dt=ft(wt.getState())}catch(Gt){console.error(Gt.toString())}return{state:Dt,storeId:Ht}});var Ot=function(Gt){var nn=(0,at.default)(),zt,Ft;try{Ft=Mt(Gt)}catch(vn){zt=vn}finally{var un=(0,at.default)()-nn;mt.addEvent("lr.redux.ReduxAction",function(){var vn=null,yn=null;try{vn=ft(wt.getState()),yn=vt(Gt)}catch(cn){console.error(cn.toString())}return vn&&yn?{storeId:Ht,action:yn,duration:un,stateDelta:vn}:null})}if(zt)throw zt;return Ft};return dt(dt({},wt),{},{dispatch:Ot})}}}},"./packages/@logrocket/redux/src/createMiddleware.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ht;var nt=et(s("./packages/@logrocket/now/src/index.js")),at=0;function ht(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=pt.stateSanitizer,mt=lt===void 0?function(ft){return ft}:lt,ot=pt.actionSanitizer,ut=ot===void 0?function(ft){return ft}:ot;return function(ft){var bt=at++;return dt.addEvent("lr.redux.InitialState",function(){var vt;try{vt=mt(ft.getState())}catch(yt){console.error(yt.toString())}return{state:vt,storeId:bt}}),function(vt){return function(yt){var At=(0,nt.default)(),Nt,St;try{St=vt(yt)}catch(Mt){Nt=Mt}finally{var wt=(0,nt.default)()-At;dt.addEvent("lr.redux.ReduxAction",function(){var Mt=null,Ht=null;try{Mt=mt(ft.getState()),Ht=ut(yt)}catch(Ot){console.error(Ot.toString())}return Mt&&Ht?{storeId:bt,action:Ht,duration:wt,stateDelta:Mt}:null})}if(Nt)throw Nt;return St}}}}},"./packages/@logrocket/redux/src/index.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),Object.defineProperty(it,"createEnhancer",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(it,"createMiddleware",{enumerable:!0,get:function(){return at.default}});var nt=et(s("./packages/@logrocket/redux/src/createEnhancer.js")),at=et(s("./packages/@logrocket/redux/src/createMiddleware.js"))},"./packages/@logrocket/utils/src/TraceKit.js":function(rt,it,s){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var et={collectWindowErrors:!0,debug:!1},nt=typeof window<"u"?window:typeof s.g<"u"?s.g:typeof self<"u"?self:{},at=[].slice,ht="?",dt=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function pt(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}et.report=function(){var ot=[],ut=null,ft=null,bt=null;function vt(nn){Ht(),ot.push(nn)}function yt(nn){for(var zt=ot.length-1;zt>=0;--zt)ot[zt]===nn&&ot.splice(zt,1)}function At(){Ot(),ot=[]}function Nt(nn,zt){var Ft=null;if(!(zt&&!et.collectWindowErrors)){for(var un in ot)if(ot.hasOwnProperty(un))try{ot[un].apply(null,[nn].concat(at.call(arguments,2)))}catch(vn){Ft=vn}if(Ft)throw Ft}}var St,wt;function Mt(nn,zt,Ft,un,vn){var yn=null;if(bt)et.computeStackTrace.augmentStackTraceWithInitialElement(bt,zt,Ft,nn),Dt();else if(vn)yn=et.computeStackTrace(vn),Nt(yn,!0);else{var cn={url:zt,line:Ft,column:un},gn=void 0,Cn=nn,fn;if({}.toString.call(nn)==="[object String]"){var fn=nn.match(dt);fn&&(gn=fn[1],Cn=fn[2])}cn.func=ht,yn={name:gn,message:Cn,url:pt(),stack:[cn]},Nt(yn,!0)}return St?St.apply(this,arguments):!1}function Ht(){wt||(St=nt.onerror,nt.onerror=Mt,wt=!0)}function Ot(){wt&&(nt.onerror=St,wt=!1,St=void 0)}function Dt(){var nn=bt,zt=ut;ut=null,bt=null,ft=null,Nt.apply(null,[nn,!1].concat(zt))}function Gt(nn,zt){var Ft=at.call(arguments,1);if(bt){if(ft===nn)return;Dt()}var un=et.computeStackTrace(nn);if(bt=un,ft=nn,ut=Ft,setTimeout(function(){ft===nn&&Dt()},un.incomplete?2e3:0),zt!==!1)throw nn}return Gt.subscribe=vt,Gt.unsubscribe=yt,Gt.uninstall=At,Gt}(),et.computeStackTrace=function(){function ot(vt){if(!(typeof vt.stack>"u"||!vt.stack)){var yt=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,At=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,Nt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,St=vt.stack.split(`
`),wt=[],Mt,Ht;/^(.*) is undefined$/.exec(vt.message);for(var Ot=0,Dt=St.length;Ot<Dt;++Ot){if(Mt=yt.exec(St[Ot])){var Gt=Mt[2]&&Mt[2].indexOf("native")!==-1;Ht={url:Gt?null:Mt[2],func:Mt[1]||ht,args:Gt?[Mt[2]]:[],line:Mt[3]?+Mt[3]:null,column:Mt[4]?+Mt[4]:null}}else if(Mt=Nt.exec(St[Ot]))Ht={url:Mt[2],func:Mt[1]||ht,args:[],line:+Mt[3],column:Mt[4]?+Mt[4]:null};else if(Mt=At.exec(St[Ot]))Ht={url:Mt[3],func:Mt[1]||ht,args:Mt[2]?Mt[2].split(","):[],line:Mt[4]?+Mt[4]:null,column:Mt[5]?+Mt[5]:null};else continue;!Ht.func&&Ht.line&&(Ht.func=ht),wt.push(Ht)}return wt.length?(!wt[0].column&&typeof vt.columnNumber<"u"&&(wt[0].column=vt.columnNumber+1),{name:vt.name,message:vt.message,url:pt(),stack:wt}):null}}function ut(vt,yt,At,Nt){var St={url:yt,line:At};if(St.url&&St.line){if(vt.incomplete=!1,St.func||(St.func=ht),vt.stack.length>0&&vt.stack[0].url===St.url){if(vt.stack[0].line===St.line)return!1;if(!vt.stack[0].line&&vt.stack[0].func===St.func)return vt.stack[0].line=St.line,!1}return vt.stack.unshift(St),vt.partial=!0,!0}else vt.incomplete=!0;return!1}function ft(vt,yt){for(var At=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,Nt=[],St={},wt=!1,Mt,Ht,Ot=ft.caller;Ot&&!wt;Ot=Ot.caller)if(!(Ot===bt||Ot===et.report)){if(Ht={url:null,func:ht,line:null,column:null},Ot.name?Ht.func=Ot.name:(Mt=At.exec(Ot.toString()))&&(Ht.func=Mt[1]),typeof Ht.func>"u")try{Ht.func=Mt.input.substring(0,Mt.input.indexOf("{"))}catch{}St[""+Ot]?wt=!0:St[""+Ot]=!0,Nt.push(Ht)}yt&&Nt.splice(0,yt);var Dt={name:vt.name,message:vt.message,url:pt(),stack:Nt};return ut(Dt,vt.sourceURL||vt.fileName,vt.line||vt.lineNumber,vt.message||vt.description),Dt}function bt(vt,yt){var At=null;yt=yt==null?0:+yt;try{if(At=ot(vt),At)return At}catch(Nt){if(et.debug)throw Nt}try{if(At=ft(vt,yt+1),At)return At}catch(Nt){if(et.debug)throw Nt}return{name:vt.name,message:vt.message,url:pt()}}return bt.augmentStackTraceWithInitialElement=ut,bt.computeStackTraceFromStackProp=ot,bt}();var lt=et;it.default=lt},"./packages/@logrocket/utils/src/addListener.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){var at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return at.addEventListener(et,nt,{capture:!0,passive:!0}),function(){at.removeEventListener(et,nt,{capture:!0,passive:!0})}}},"./packages/@logrocket/utils/src/adjustOsVersion.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.adjustOsVersion=s,it.adjustOs=et;function s(nt,at){var ht=at;return at&&nt.toLowerCase().replace(/\s/g,"").indexOf("macos")>-1&&(ht=at.replace("10.15.7","10.15.7+")),ht}function et(nt){return s(nt,nt)}},"./packages/@logrocket/utils/src/applyUrlSanitizer.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=et.logger,at=et.url,ht=at===void 0?"":at,dt=nt.getConfig("lr.browser")||{},pt=dt.urlSanitizer,lt=pt===void 0?function(ot){return ot}:pt,mt;try{mt=lt(ht)}catch(ot){console.error(ot)}return typeof mt=="string"?mt:""}},"./packages/@logrocket/utils/src/browserUtils.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getNodeName=s,it.getTargetForEvent=et,it.getNodePath=at;function s(ht){return ht.nodeName==="#document-fragment"&&ht.mode==="open"?"$shadow-root":ht.nodeName?ht.nodeName.toLowerCase():""}function et(ht){return typeof ht.composedPath=="function"&&ht.composed?ht.composedPath()[0]:ht.path?ht.path[0]:ht.target}var nt=1e3;function at(ht){for(var dt=ht,pt=[],lt=0;dt&&(dt.parentNode||dt.host);){var mt=s(dt);if(mt==="body")break;var ot={nodeName:mt},ut=ot.nodeName.length;if(dt.id&&dt.id.length>0&&(ot.id=dt.id,ut+=dt.id.length),dt.classList&&dt.classList.length>0){ot.classList=Array.prototype.slice.call(dt.classList,0);var ft=Array.prototype.join.call(dt.classList,"");ft&&(ut+=ft.length)}if(lt+ut>nt)break;if(dt.parentNode&&dt.parentNode.children)try{var bt=0,vt=dt;do bt+=1,vt=vt.previousElementSibling;while(vt);ot.nthChild=bt}catch{}lt+=ut,pt.push(ot),dt=dt.parentNode||dt.host}return pt}},"./packages/@logrocket/utils/src/constants/issues.ts":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.ES_ISSUE_TYPE_BASE_FILTER=it.ES_ISSUE_TYPES=it.ISSUE_GROUP_TYPE=it.ISSUE_TYPE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at,ht={EXCEPTION:"EXCEPTION",NETWORK_ERROR:"NETWORK_ERROR",RAGE_CLICK:"RAGE_CLICK",DEAD_CLICK:"DEAD_CLICK",FRUSTRATING_NETWORK:"FRUSTRATING_NETWORK",ERROR_STATE:"ERROR_STATE"};it.ISSUE_TYPE=ht;var dt={ENCODED_FILTER:"ENCODED_FILTER",SENTRY:"SENTRY",TROYTOWN:"TROYTOWN"};it.ISSUE_GROUP_TYPE=dt;var pt=[ht.RAGE_CLICK,ht.DEAD_CLICK,ht.FRUSTRATING_NETWORK,ht.ERROR_STATE];it.ES_ISSUE_TYPES=pt;var lt=(at={},(0,nt.default)(at,ht.RAGE_CLICK,{rageClicked:{operator:"TEXT_IS",strings:[]}}),(0,nt.default)(at,ht.DEAD_CLICK,{deadClicked:{operator:"TEXT_IS",strings:[]}}),at);it.ES_ISSUE_TYPE_BASE_FILTER=lt},"./packages/@logrocket/utils/src/constants/logTypes.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.LOG_FILTER_TYPES=it.LOG_TYPES=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at,ht={LOG:"LOG",WARN:"WARN",ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO",REDUX:"REDUX",LIFECYCLE:"LIFECYCLE",NAVIGATION:"NAVIGATION",NETWORK:"NETWORK",PREV_SESSION:"PREV_SESSION",NEXT_SESSION:"NEXT_SESSION",LOAD_MORE:"LOAD_MORE",EXCEPTION:"EXCEPTION"};it.LOG_TYPES=ht;var dt=(at={},(0,nt.default)(at,ht.LOG,{label:"Logs",filterLabel:"Log",types:[ht.LOG]}),(0,nt.default)(at,ht.WARN,{label:"Warnings",filterLabel:"Warning",types:[ht.WARN]}),(0,nt.default)(at,ht.ERROR,{label:"Errors",filterLabel:"Error",types:[ht.ERROR,ht.EXCEPTION]}),(0,nt.default)(at,ht.INFO,{label:"Info",filterLabel:"Info",types:[ht.INFO]}),(0,nt.default)(at,ht.DEBUG,{label:"Debug",filterLabel:"Debug",types:[ht.DEBUG]}),(0,nt.default)(at,ht.REDUX,{label:"Redux",types:[ht.REDUX]}),(0,nt.default)(at,ht.NAVIGATION,{label:"Navigation",types:[ht.NAVIGATION,ht.LIFECYCLE]}),at);it.LOG_FILTER_TYPES=dt},"./packages/@logrocket/utils/src/constants/metrics.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=it.DEFAULT_HEATMAP_FOR_URL_OPERATOR=it.nextSortDirection=it.SORT_DIRECTION=it.FEEDBACK_SORT_COLUMN=it.HEATMAP_FOR_URL_OPERATOR=it.METRIC_RETENTION_TYPE=it.METRIC_TIMESERIES_TYPE=void 0;var s={SESSION_COUNT:"SESSION_COUNT",PERCENTILE:"PERCENTILE",CONVERSION_RATE:"CONVERSION_RATE",SESSION_PERCENTAGE:"SESSION_PERCENTAGE",ACTIVE_USERS:"ACTIVE_USERS",EVENT_COUNT:"EVENT_COUNT"};it.METRIC_TIMESERIES_TYPE=s;var et={USER_PERCENTAGE:"USER_PERCENTAGE"};it.METRIC_RETENTION_TYPE=et;var nt={IS:"IS",CONTAINS:"CONTAINS",LIKE:"LIKE",HREF_LIKE:"HREF_LIKE"};it.HEATMAP_FOR_URL_OPERATOR=nt;var at={RATING:"RATING",SUBMISSION_DATE:"SUBMISSION_DATE"};it.FEEDBACK_SORT_COLUMN=at;var ht={UNSET:"UNSET",ASC:"ASC",DESC:"DESC"};it.SORT_DIRECTION=ht;var dt=function(ot){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=ut.reverse,bt=ft===void 0?!1:ft,vt=ht.UNSET,yt=ht.ASC,At=ht.DESC,Nt=[vt,At,yt];bt&&(Nt=[vt,yt,At]);var St=Nt.indexOf(ot);return Nt[(St+1)%Nt.length]};it.nextSortDirection=dt;var pt=nt.IS;it.DEFAULT_HEATMAP_FOR_URL_OPERATOR=pt;var lt=nt.HREF_LIKE;it.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR=lt},"./packages/@logrocket/utils/src/constants/mobile.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.MAXIMUM_SUPPORTED_VERSION=it.MINIMUM_SUPPORTED_VERSION=it.IOS_VERSION=it.ANDROID_VERSION=void 0;var s="1.25.0";it.ANDROID_VERSION=s;var et="1.25.0";it.IOS_VERSION=et;var nt="1.0.0";it.MINIMUM_SUPPORTED_VERSION=nt;var at="1.26.0";it.MAXIMUM_SUPPORTED_VERSION=at},"./packages/@logrocket/utils/src/constants/nps.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.DELIGHTED_FEEDBACK_PREFIX=it.DELIGHTED_RESPONSES_REGEX=it.WOOTRIC_RESPONSES_REGEX=void 0;var s=/^https:\/\/production.wootric.com\/responses/;it.WOOTRIC_RESPONSES_REGEX=s;var et=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;it.DELIGHTED_RESPONSES_REGEX=et;var nt="comment=";it.DELIGHTED_FEEDBACK_PREFIX=nt},"./packages/@logrocket/utils/src/constants/replayTypes.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.REPLAY_TYPE=void 0;var s;it.REPLAY_TYPE=s,function(et){et.SKIA="SKIA",et.DOM="DOM",et.PDF="PDF"}(s||(it.REPLAY_TYPE=s={}))},"./packages/@logrocket/utils/src/constants/sdkTypes.ts":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.SESSION_TYPE_TO_DISPLAY=it.SDK_REPLAY_TYPE=it.SDK_TYPE_TO_DISPLAY=it.SDK_TYPE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),ht,dt,pt;it.SDK_TYPE=pt,function(ut){ut.WEB="web",ut.MOBILE="mobile",ut.UNKNOWN="unknown"}(pt||(it.SDK_TYPE=pt={}));var lt=(ht={},(0,nt.default)(ht,pt.WEB,"Web"),(0,nt.default)(ht,pt.MOBILE,"Mobile"),ht);it.SDK_TYPE_TO_DISPLAY=lt;var mt=(dt={},(0,nt.default)(dt,pt.WEB,at.REPLAY_TYPE.DOM),(0,nt.default)(dt,pt.MOBILE,at.REPLAY_TYPE.SKIA),dt);it.SDK_REPLAY_TYPE=mt;var ot=lt;it.SESSION_TYPE_TO_DISPLAY=ot},"./packages/@logrocket/utils/src/constants/statusCodes.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getStatusText=et,it.STATUS_CODES=void 0;var s={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};it.STATUS_CODES=s;function et(nt){return s[String(nt)]}},"./packages/@logrocket/utils/src/contains.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){return et&&nt&&et.indexOf(nt)>-1}},"./packages/@logrocket/utils/src/deepArsonify.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var nt=ht(s("./packages/@logrocket/arson/src/index.js"));function at(pt){if(typeof WeakMap!="function")return null;var lt=new WeakMap,mt=new WeakMap;return(at=function(ut){return ut?mt:lt})(pt)}function ht(pt,lt){if(!lt&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var mt=at(lt);if(mt&&mt.has(pt))return mt.get(pt);var ot={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var bt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;bt&&(bt.get||bt.set)?Object.defineProperty(ot,ft,bt):ot[ft]=pt[ft]}return ot.default=pt,mt&&mt.set(pt,ot),ot}function dt(pt){return{arson:nt.encode(pt)}}},"./packages/@logrocket/utils/src/deepDearsonify.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var nt=ht(s("./packages/@logrocket/arson/src/index.js"));function at(pt){if(typeof WeakMap!="function")return null;var lt=new WeakMap,mt=new WeakMap;return(at=function(ut){return ut?mt:lt})(pt)}function ht(pt,lt){if(!lt&&pt&&pt.__esModule)return pt;if(pt===null||et(pt)!=="object"&&typeof pt!="function")return{default:pt};var mt=at(lt);if(mt&&mt.has(pt))return mt.get(pt);var ot={},ut=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ft in pt)if(ft!=="default"&&Object.prototype.hasOwnProperty.call(pt,ft)){var bt=ut?Object.getOwnPropertyDescriptor(pt,ft):null;bt&&(bt.get||bt.set)?Object.defineProperty(ot,ft,bt):ot[ft]=pt[ft]}return ot.default=pt,mt&&mt.set(pt,ot),ot}function dt(pt){return pt&&nt.decode(pt.arson)}},"./packages/@logrocket/utils/src/endsWith.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){return et&&nt&&et.substring(et.length-nt.length)===nt}},"./packages/@logrocket/utils/src/enhanceFunc.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt,at){var ht=et[nt];function dt(){for(var pt,lt=arguments.length,mt=new Array(lt),ot=0;ot<lt;ot++)mt[ot]=arguments[ot];return ht&&(pt=ht.apply(this,mt)),at.apply(this,mt),pt}return et[nt]=dt,function(){et[nt]=ht}}},"./packages/@logrocket/utils/src/find.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){for(var at=0;at<et.length;at++)if(nt(et[at]))return et[at]}},"./packages/@logrocket/utils/src/findIndex.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){for(var at=0;at<et.length;at++)if(nt(et[at]))return at;return-1}},"./packages/@logrocket/utils/src/findKeyFrames.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=at;var nt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js"));function at(ht,dt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},lt=pt.sdkThrottle,mt=lt===void 0?500:lt;if(!ht.length)return null;var ot=(0,nt.default)(ht,{time:dt},"time"),ut=ht[ot]||ht[ot-1],ft=ht[ot-1]||ut,bt=Math.min(ut.time-ft.time,mt),vt=Math.max(dt-(ut.time-bt),0),yt=bt===0?1:Math.min(vt/bt,1);return{prev:ft,next:ut,ratio:yt}}},"./packages/@logrocket/utils/src/flatten.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){return et.concat(nt)}},"./packages/@logrocket/utils/src/getCssRules.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.getCssRule=it.getCssRules=void 0;var s=function(at){try{var ht=at.cssRules;return!ht&&at instanceof CSSStyleSheet?at.rules:ht}catch{return null}};it.getCssRules=s;var et=function(at,ht){var dt=s(at);return!dt||ht>=dt.length?null:dt.item(ht)};it.getCssRule=et},"./packages/@logrocket/utils/src/getGraphQLOperation.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){if(et)try{var nt=typeof et=="string"?JSON.parse(et):et,at=nt.query.trim(),ht=at.match(/(query|mutation) ([a-z_-]+)/i);return ht?{operationType:ht[1],operationName:ht[2]}:{}}catch{return{}}return{}}},"./packages/@logrocket/utils/src/getMockDeveloperUser.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(){return{permissions:{dashboard:{metrics:!0,errors:!0},sessionPlayback:{developerPane:{networkPane:{requestBodiesAndHeaders:!0}}}},appRoles:[]}}},"./packages/@logrocket/utils/src/getNodeSelector.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var nt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),at=(0,nt.default)(function(dt){var pt=dt.nodeName?dt.nodeName.toLowerCase():"",lt={nodeName:pt};return dt.id&&dt.id.length>0&&(lt.id=dt.id),dt.classList&&dt.classList.length>0&&(lt.classList=Array.prototype.slice.call(dt.classList,0)),lt}),ht=at;it.default=ht},"./packages/@logrocket/utils/src/hashString.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.combineHashes=it.hashString=void 0;var nt=et(s("./packages/@logrocket/utils/src/protectFunc.js")),at=s("./packages/@logrocket/utils/src/sendTelemetryData.js");function ht(ot,ut){var ft=typeof Symbol<"u"&&ot[Symbol.iterator]||ot["@@iterator"];if(!ft){if(Array.isArray(ot)||(ft=dt(ot))||ut&&ot&&typeof ot.length=="number"){ft&&(ot=ft);var bt=0,vt=function(){};return{s:vt,n:function(){return bt>=ot.length?{done:!0}:{done:!1,value:ot[bt++]}},e:function(wt){throw wt},f:vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yt=!0,At=!1,Nt;return{s:function(){ft=ft.call(ot)},n:function(){var wt=ft.next();return yt=wt.done,wt},e:function(wt){At=!0,Nt=wt},f:function(){try{!yt&&ft.return!=null&&ft.return()}finally{if(At)throw Nt}}}}function dt(ot,ut){if(ot){if(typeof ot=="string")return pt(ot,ut);var ft=Object.prototype.toString.call(ot).slice(8,-1);if(ft==="Object"&&ot.constructor&&(ft=ot.constructor.name),ft==="Map"||ft==="Set")return Array.from(ot);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return pt(ot,ut)}}function pt(ot,ut){(ut==null||ut>ot.length)&&(ut=ot.length);for(var ft=0,bt=new Array(ut);ft<ut;ft++)bt[ft]=ot[ft];return bt}var lt=(0,nt.default)(function(ot){try{var ut=0;if(typeof ot=="string"&&ot.length)for(var ft=0;ft<ot.length;ft++)ut=31*ut+ot.charCodeAt(ft),ut|=0;return ut}catch{return(0,at.sendTelemetry)("Failed to hash string",{extra:{str:ot}}),null}});it.hashString=lt;var mt=function(ut){var ft=ut.shift()||0,bt=ht(ut),vt;try{for(bt.s();!(vt=bt.n()).done;){var yt=vt.value;ft^=yt+2654435769+(ft<<6)+(ft>>2)}}catch(At){bt.e(At)}finally{bt.f()}return ft};it.combineHashes=mt},"./packages/@logrocket/utils/src/identityStatus.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.parseIdentityStatus=et,it.IdentityStatus=void 0;var s;it.IdentityStatus=s,function(nt){nt[nt.Unknown=0]="Unknown",nt[nt.Anonymous=1]="Anonymous",nt[nt.Identified=2]="Identified"}(s||(it.IdentityStatus=s={}));function et(nt){if(!nt)return s.Unknown;switch(parseInt(nt,10)){case s.Anonymous:return s.Anonymous;case s.Identified:return s.Identified;default:return s.Unknown}}},"./packages/@logrocket/utils/src/index.ts":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),nt=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(it,"__esModule",{value:!0});var at={enhanceFunc:!0,shallowArsonify:!0,shallowDearsonify:!0,deepArsonify:!0,deepDearsonify:!0,addListener:!0,protectFunc:!0,findIndex:!0,find:!0,flatten:!0,selectorMatches:!0,parseSelectorForMatch:!0,querySelectorWithShadowDom:!0,sendErrorTelemetry:!0,sendTelemetry:!0,sanitizeValue:!0,adjustOs:!0,adjustOsVersion:!0,selectorFromNodePath:!0,startsWith:!0,endsWith:!0,contains:!0,uuid:!0,randomInt:!0,getCssRules:!0,getCssRule:!0,getNodeSelector:!0,getGraphQLOperation:!0,isSessionEvent:!0,isActivityEvent:!0,parseIntFromHex:!0,isRecordingSampled:!0,makeRecordingID:!0,setFromArray:!0,setToArray:!0,applyUrlSanitizer:!0,getMockDeveloperUser:!0,maybeCleanSwiftUIClassName:!0,LOG_FILTER_TYPES:!0,LOG_TYPES:!0,METRIC_TIMESERIES_TYPE:!0,HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_HEATMAP_FOR_URL_OPERATOR:!0,DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR:!0,SORT_DIRECTION:!0,FEEDBACK_SORT_COLUMN:!0,METRIC_RETENTION_TYPE:!0,ISSUE_TYPE:!0,ISSUE_GROUP_TYPE:!0,ES_ISSUE_TYPE_BASE_FILTER:!0,ES_ISSUE_TYPES:!0,findKeyFrames:!0,interpolate:!0,interpolateMobile:!0,removeOutdated:!0,DELIGHTED_RESPONSES_REGEX:!0,WOOTRIC_RESPONSES_REGEX:!0,REPLAY_TYPE:!0,SDK_REPLAY_TYPE:!0,SDK_TYPE:!0,SDK_TYPE_TO_DISPLAY:!0,SESSION_TYPE_TO_DISPLAY:!0,STATUS_CODES:!0,getStatusText:!0,parseQueryString:!0,likeOperator:!0,scrollMapHistogramToPercent:!0,combineHashes:!0,hashString:!0,encodeUserTraitString:!0,parseUserTraitString:!0,IdentityStatus:!0,parseIdentityStatus:!0,scrubException:!0,MobileConstants:!0};Object.defineProperty(it,"enhanceFunc",{enumerable:!0,get:function(){return ht.default}}),Object.defineProperty(it,"shallowArsonify",{enumerable:!0,get:function(){return dt.default}}),Object.defineProperty(it,"shallowDearsonify",{enumerable:!0,get:function(){return pt.default}}),Object.defineProperty(it,"deepArsonify",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(it,"deepDearsonify",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(it,"addListener",{enumerable:!0,get:function(){return ot.default}}),Object.defineProperty(it,"protectFunc",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(it,"findIndex",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(it,"find",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(it,"flatten",{enumerable:!0,get:function(){return vt.default}}),Object.defineProperty(it,"selectorMatches",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(it,"parseSelectorForMatch",{enumerable:!0,get:function(){return At.default}}),Object.defineProperty(it,"querySelectorWithShadowDom",{enumerable:!0,get:function(){return Nt.default}}),Object.defineProperty(it,"sendErrorTelemetry",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(it,"sendTelemetry",{enumerable:!0,get:function(){return St.sendTelemetry}}),Object.defineProperty(it,"sanitizeValue",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(it,"adjustOs",{enumerable:!0,get:function(){return Mt.adjustOs}}),Object.defineProperty(it,"adjustOsVersion",{enumerable:!0,get:function(){return Mt.adjustOsVersion}}),Object.defineProperty(it,"selectorFromNodePath",{enumerable:!0,get:function(){return Ht.default}}),Object.defineProperty(it,"startsWith",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(it,"endsWith",{enumerable:!0,get:function(){return Dt.default}}),Object.defineProperty(it,"contains",{enumerable:!0,get:function(){return Gt.default}}),Object.defineProperty(it,"uuid",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(it,"randomInt",{enumerable:!0,get:function(){return zt.default}}),Object.defineProperty(it,"getCssRules",{enumerable:!0,get:function(){return Ft.getCssRules}}),Object.defineProperty(it,"getCssRule",{enumerable:!0,get:function(){return Ft.getCssRule}}),Object.defineProperty(it,"getNodeSelector",{enumerable:!0,get:function(){return un.default}}),Object.defineProperty(it,"getGraphQLOperation",{enumerable:!0,get:function(){return vn.default}}),Object.defineProperty(it,"isSessionEvent",{enumerable:!0,get:function(){return yn.default}}),Object.defineProperty(it,"isActivityEvent",{enumerable:!0,get:function(){return cn.default}}),Object.defineProperty(it,"parseIntFromHex",{enumerable:!0,get:function(){return gn.default}}),Object.defineProperty(it,"isRecordingSampled",{enumerable:!0,get:function(){return Cn.default}}),Object.defineProperty(it,"makeRecordingID",{enumerable:!0,get:function(){return fn.default}}),Object.defineProperty(it,"setFromArray",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(it,"setToArray",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(it,"applyUrlSanitizer",{enumerable:!0,get:function(){return Ln.default}}),Object.defineProperty(it,"getMockDeveloperUser",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(it,"maybeCleanSwiftUIClassName",{enumerable:!0,get:function(){return Rn.default}}),Object.defineProperty(it,"LOG_FILTER_TYPES",{enumerable:!0,get:function(){return In.LOG_FILTER_TYPES}}),Object.defineProperty(it,"LOG_TYPES",{enumerable:!0,get:function(){return In.LOG_TYPES}}),Object.defineProperty(it,"METRIC_TIMESERIES_TYPE",{enumerable:!0,get:function(){return kn.METRIC_TIMESERIES_TYPE}}),Object.defineProperty(it,"HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return kn.HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"DEFAULT_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return kn.DEFAULT_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR",{enumerable:!0,get:function(){return kn.DEFAULT_INSIGHTS_HEATMAP_FOR_URL_OPERATOR}}),Object.defineProperty(it,"SORT_DIRECTION",{enumerable:!0,get:function(){return kn.SORT_DIRECTION}}),Object.defineProperty(it,"FEEDBACK_SORT_COLUMN",{enumerable:!0,get:function(){return kn.FEEDBACK_SORT_COLUMN}}),Object.defineProperty(it,"METRIC_RETENTION_TYPE",{enumerable:!0,get:function(){return kn.METRIC_RETENTION_TYPE}}),Object.defineProperty(it,"ISSUE_TYPE",{enumerable:!0,get:function(){return xn.ISSUE_TYPE}}),Object.defineProperty(it,"ISSUE_GROUP_TYPE",{enumerable:!0,get:function(){return xn.ISSUE_GROUP_TYPE}}),Object.defineProperty(it,"ES_ISSUE_TYPE_BASE_FILTER",{enumerable:!0,get:function(){return xn.ES_ISSUE_TYPE_BASE_FILTER}}),Object.defineProperty(it,"ES_ISSUE_TYPES",{enumerable:!0,get:function(){return xn.ES_ISSUE_TYPES}}),Object.defineProperty(it,"findKeyFrames",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(it,"interpolate",{enumerable:!0,get:function(){return Un.default}}),Object.defineProperty(it,"interpolateMobile",{enumerable:!0,get:function(){return Un.interpolateMobile}}),Object.defineProperty(it,"removeOutdated",{enumerable:!0,get:function(){return jn.default}}),Object.defineProperty(it,"DELIGHTED_RESPONSES_REGEX",{enumerable:!0,get:function(){return Qn.DELIGHTED_RESPONSES_REGEX}}),Object.defineProperty(it,"WOOTRIC_RESPONSES_REGEX",{enumerable:!0,get:function(){return Qn.WOOTRIC_RESPONSES_REGEX}}),Object.defineProperty(it,"REPLAY_TYPE",{enumerable:!0,get:function(){return on.REPLAY_TYPE}}),Object.defineProperty(it,"SDK_REPLAY_TYPE",{enumerable:!0,get:function(){return Hn.SDK_REPLAY_TYPE}}),Object.defineProperty(it,"SDK_TYPE",{enumerable:!0,get:function(){return Hn.SDK_TYPE}}),Object.defineProperty(it,"SDK_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Hn.SDK_TYPE_TO_DISPLAY}}),Object.defineProperty(it,"SESSION_TYPE_TO_DISPLAY",{enumerable:!0,get:function(){return Hn.SESSION_TYPE_TO_DISPLAY}}),Object.defineProperty(it,"STATUS_CODES",{enumerable:!0,get:function(){return Fn.STATUS_CODES}}),Object.defineProperty(it,"getStatusText",{enumerable:!0,get:function(){return Fn.getStatusText}}),Object.defineProperty(it,"parseQueryString",{enumerable:!0,get:function(){return Vn.parseQueryString}}),Object.defineProperty(it,"likeOperator",{enumerable:!0,get:function(){return Bn.likeOperator}}),Object.defineProperty(it,"scrollMapHistogramToPercent",{enumerable:!0,get:function(){return qn.default}}),Object.defineProperty(it,"combineHashes",{enumerable:!0,get:function(){return Gn.combineHashes}}),Object.defineProperty(it,"hashString",{enumerable:!0,get:function(){return Gn.hashString}}),Object.defineProperty(it,"encodeUserTraitString",{enumerable:!0,get:function(){return _n.encodeUserTraitString}}),Object.defineProperty(it,"parseUserTraitString",{enumerable:!0,get:function(){return _n.parseUserTraitString}}),Object.defineProperty(it,"IdentityStatus",{enumerable:!0,get:function(){return $n.IdentityStatus}}),Object.defineProperty(it,"parseIdentityStatus",{enumerable:!0,get:function(){return $n.parseIdentityStatus}}),Object.defineProperty(it,"scrubException",{enumerable:!0,get:function(){return bn.scrubException}}),it.MobileConstants=void 0;var ht=et(s("./packages/@logrocket/utils/src/enhanceFunc.js")),dt=et(s("./packages/@logrocket/utils/src/shallowArsonify.js")),pt=et(s("./packages/@logrocket/utils/src/shallowDearsonify.js")),lt=et(s("./packages/@logrocket/utils/src/deepArsonify.js")),mt=et(s("./packages/@logrocket/utils/src/deepDearsonify.js")),ot=et(s("./packages/@logrocket/utils/src/addListener.js")),ut=et(s("./packages/@logrocket/utils/src/protectFunc.js")),ft=et(s("./packages/@logrocket/utils/src/findIndex.js")),bt=et(s("./packages/@logrocket/utils/src/find.js")),vt=et(s("./packages/@logrocket/utils/src/flatten.js")),yt=et(s("./packages/@logrocket/utils/src/selectorMatches.js")),At=et(s("./packages/@logrocket/utils/src/parseSelectorForMatch.js")),Nt=et(s("./packages/@logrocket/utils/src/querySelectorWithShadowDom.js")),St=Lt(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),wt=et(s("./packages/@logrocket/utils/src/sanitizeValue.js")),Mt=s("./packages/@logrocket/utils/src/adjustOsVersion.ts"),Ht=et(s("./packages/@logrocket/utils/src/selectorFromNodePath.js")),Ot=et(s("./packages/@logrocket/utils/src/startsWith.js")),Dt=et(s("./packages/@logrocket/utils/src/endsWith.js")),Gt=et(s("./packages/@logrocket/utils/src/contains.js")),nn=et(s("./packages/@logrocket/utils/src/uuid.js")),zt=et(s("./packages/@logrocket/utils/src/randomInt.js")),Ft=s("./packages/@logrocket/utils/src/getCssRules.ts"),un=et(s("./packages/@logrocket/utils/src/getNodeSelector.js")),vn=et(s("./packages/@logrocket/utils/src/getGraphQLOperation.js")),yn=et(s("./packages/@logrocket/utils/src/isSessionEvent.js")),cn=et(s("./packages/@logrocket/utils/src/isActivityEvent.js")),gn=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),Cn=et(s("./packages/@logrocket/utils/src/isRecordingSampled.js")),fn=et(s("./packages/@logrocket/utils/src/makeRecordingID.js")),Tn=et(s("./packages/@logrocket/utils/src/setFromArray.js")),On=et(s("./packages/@logrocket/utils/src/setToArray.js")),Ln=et(s("./packages/@logrocket/utils/src/applyUrlSanitizer.js")),An=et(s("./packages/@logrocket/utils/src/getMockDeveloperUser.js")),Rn=et(s("./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts")),In=s("./packages/@logrocket/utils/src/constants/logTypes.js"),kn=s("./packages/@logrocket/utils/src/constants/metrics.js"),xn=s("./packages/@logrocket/utils/src/constants/issues.ts"),Yn=et(s("./packages/@logrocket/utils/src/findKeyFrames.js")),Un=Lt(s("./packages/@logrocket/utils/src/interpolate.js")),jn=et(s("./packages/@logrocket/utils/src/removeOutdated.js")),Qn=s("./packages/@logrocket/utils/src/constants/nps.js"),on=s("./packages/@logrocket/utils/src/constants/replayTypes.ts"),Hn=s("./packages/@logrocket/utils/src/constants/sdkTypes.ts"),Fn=s("./packages/@logrocket/utils/src/constants/statusCodes.ts"),Vn=s("./packages/@logrocket/utils/src/parseQueryString.js"),Bn=s("./packages/@logrocket/utils/src/likeOperator.js"),qn=et(s("./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js")),Gn=s("./packages/@logrocket/utils/src/hashString.js"),_n=s("./packages/@logrocket/utils/src/userTraitStrings.ts"),$n=s("./packages/@logrocket/utils/src/identityStatus.ts"),bn=s("./packages/@logrocket/utils/src/scrubException.ts"),wn=Lt(s("./packages/@logrocket/utils/src/constants/mobile.ts"));it.MobileConstants=wn;var Yt=s("./packages/@logrocket/utils/src/browserUtils.js");Object.keys(Yt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(at,Et)||Et in it&&it[Et]===Yt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return Yt[Et]}})});var kt=s("./packages/@logrocket/utils/src/isValidAppID.ts");Object.keys(kt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(at,Et)||Et in it&&it[Et]===kt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return kt[Et]}})});var st=s("./packages/@logrocket/utils/src/requireValue.ts");Object.keys(st).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(at,Et)||Et in it&&it[Et]===st[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return st[Et]}})});var Tt=s("./packages/@logrocket/utils/src/types.ts");Object.keys(Tt).forEach(function(Et){Et==="default"||Et==="__esModule"||Object.prototype.hasOwnProperty.call(at,Et)||Et in it&&it[Et]===Tt[Et]||Object.defineProperty(it,Et,{enumerable:!0,get:function(){return Tt[Et]}})});function Rt(Et){if(typeof WeakMap!="function")return null;var jt=new WeakMap,Pt=new WeakMap;return(Rt=function(Zt){return Zt?Pt:jt})(Et)}function Lt(Et,jt){if(!jt&&Et&&Et.__esModule)return Et;if(Et===null||nt(Et)!=="object"&&typeof Et!="function")return{default:Et};var Pt=Rt(jt);if(Pt&&Pt.has(Et))return Pt.get(Et);var Vt={},Zt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var rn in Et)if(rn!=="default"&&Object.prototype.hasOwnProperty.call(Et,rn)){var Jt=Zt?Object.getOwnPropertyDescriptor(Et,rn):null;Jt&&(Jt.get||Jt.set)?Object.defineProperty(Vt,rn,Jt):Vt[rn]=Et[rn]}return Vt.default=Et,Pt&&Pt.set(Et,Vt),Vt}},"./packages/@logrocket/utils/src/interpolate.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=mt,it.interpolateMobile=ot;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js"));function at(ut,ft){var bt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!bt){if(Array.isArray(ut)||(bt=ht(ut))||ft&&ut&&typeof ut.length=="number"){bt&&(ut=bt);var vt=0,yt=function(){};return{s:yt,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Mt){throw Mt},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At=!0,Nt=!1,St;return{s:function(){bt=bt.call(ut)},n:function(){var Mt=bt.next();return At=Mt.done,Mt},e:function(Mt){Nt=!0,St=Mt},f:function(){try{!At&&bt.return!=null&&bt.return()}finally{if(Nt)throw St}}}}function ht(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var bt=Object.prototype.toString.call(ut).slice(8,-1);if(bt==="Object"&&ut.constructor&&(bt=ut.constructor.name),bt==="Map"||bt==="Set")return Array.from(ut);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var bt=0,vt=new Array(ft);bt<ft;bt++)vt[bt]=ut[bt];return vt}function pt(ut,ft){var bt=Object.keys(ut);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ut);ft&&(vt=vt.filter(function(yt){return Object.getOwnPropertyDescriptor(ut,yt).enumerable})),bt.push.apply(bt,vt)}return bt}function lt(ut){for(var ft=1;ft<arguments.length;ft++){var bt=arguments[ft]!=null?arguments[ft]:{};ft%2?pt(Object(bt),!0).forEach(function(vt){(0,nt.default)(ut,vt,bt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(bt)):pt(Object(bt)).forEach(function(vt){Object.defineProperty(ut,vt,Object.getOwnPropertyDescriptor(bt,vt))})}return ut}function mt(ut,ft){if(!ut)return{};var bt=ut.prev,vt=ut.next,yt=ut.ratio,At=lt({},vt),Nt=at(ft),St;try{for(Nt.s();!(St=Nt.n()).done;){var wt=St.value;At[wt]=bt[wt]+(vt[wt]-bt[wt])*yt}}catch(Mt){Nt.e(Mt)}finally{Nt.f()}return At}function ot(ut,ft,bt){if(!ut)return{};var vt=ut.prev,yt=ut.next;return yt.type==="MOVE"?mt(ut,ft):vt===yt&&Math.abs(bt-yt.time)>500?null:yt}},"./packages/@logrocket/utils/src/isActivityEvent.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=["lr.browser.MouseEvent","lr.browser.ScrollEvent","lr.browser.InputEvent","lr.browser.InputChangeEvent","lr.android.TouchEvent","lr.android.InputChangeEvent","lr.ios.TouchEvent","lr.ios.InputChangeEvent"];return nt.indexOf(et)>-1}},"./packages/@logrocket/utils/src/isRecordingSampled.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ht;var nt=et(s("./packages/@logrocket/utils/src/parseIntFromHex.js")),at=1e4;function ht(dt,pt){if(pt<=0)return!1;var lt=Math.floor(pt*at),mt=(0,nt.default)(dt),ot=mt%at;return ot<=lt}},"./packages/@logrocket/utils/src/isSessionEvent.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s=["lr.browser.NavigationEvent","lr.browser.InputChangeEvent","lr.browser.InputEvent"];function et(nt){return s.indexOf(nt.type)>-1||nt.data.eventType==="CLICK"}},"./packages/@logrocket/utils/src/isValidAppID.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.isValidAppID=et;var s=/^[a-z0-9_-]+\/[a-z0-9_-]+$/;function et(nt){return typeof nt=="string"&&s.test(nt)}},"./packages/@logrocket/utils/src/likeOperator.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.likeOperator=s;function s(et,nt){var at=nt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ht=at.replace(/\\\*/g,".*").replace(/\\\?/g,"."),dt=new RegExp("^".concat(ht,"$"));return dt.test(et)}},"./packages/@logrocket/utils/src/logError.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var s=typeof console<"u"&&console.error&&console.error.bind,et=s?console.error.bind(console):function(){},nt=et;it.default=nt},"./packages/@logrocket/utils/src/makeRecordingID.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=at;var nt=et(s("./packages/@logrocket/utils/src/uuid.js"));function at(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=ht.prefix,pt=dt===void 0?5:dt;return"".concat(pt,"-").concat((0,nt.default)())}},"./packages/@logrocket/utils/src/mapValues.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){if(et==null)return{};var at={};return Object.keys(et).forEach(function(ht){at[ht]=nt(et[ht])}),at}},"./packages/@logrocket/utils/src/maybeCleanSwiftUIClassName.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){return et.replace(/</g,"%3c").replace(/>/g,"%3e").replace(/\s/g,"")}},"./packages/@logrocket/utils/src/parseIntFromHex.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=et.replace(/[^0-9a-f]/g,"");return parseInt("0x".concat(nt),16)||0}},"./packages/@logrocket/utils/src/parseQueryString.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.parseQueryString=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),at=function(pt){var lt={},mt=pt.split("&");return mt.forEach(function(ot){var ut=ot.split("=").map(function(yt){return yt.replace(/\+/g," ")}).map(decodeURIComponent),ft=(0,nt.default)(ut,2),bt=ft[0],vt=ft[1];lt[bt]=vt}),lt},ht=function(pt){var lt=pt.indexOf("?");if(lt===-1)return{};var mt=pt.substring(lt+1);return at(mt)};it.parseQueryString=ht},"./packages/@logrocket/utils/src/parseSelectorForMatch.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=lt;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),at=et(s("./node_modules/@babel/runtime/helpers/slicedToArray.js")),ht=et(s("./packages/@logrocket/utils/src/startsWith.js")),dt="~",pt=":nth-child(";function lt(mt){var ot=mt.replace(/\s*>\s*|:nth-child\(([1-9][0-9]*|odd|even)\)|\s+/gi,function(ut){return ut.indexOf(">")>-1?" >":ut.trim().length===0?" ":"".concat(dt).concat(ut.slice(pt.length))});return ot.split(/\s+/).map(function(ut){var ft={},bt=ut;if(bt.charAt(0)===">"&&(ft.directDesc=!0,bt=bt.slice(1)),bt=bt.replace(/^([a-z0-9-_]+)/ig,function(St){return ft.nodeName=St,""}),bt.charAt(0)===dt){var vt=bt.slice(1).split(")"),yt=(0,at.default)(vt,2),At=yt[0],Nt=yt[1];ft.nthChild=At,bt=Nt}return bt.replace(/\.|#/gi,function(St){return" ".concat(St)}).trim().split(" ").forEach(function(St){if((0,ht.default)(St,".")){var wt=St.slice(1);ft.classList=ft.classList?[].concat((0,nt.default)(ft.classList),[wt]):[wt]}else(0,ht.default)(St,"#")&&(ft.id=St.slice(1))}),ft})}},"./packages/@logrocket/utils/src/protectFunc.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ht;var nt=et(s("./packages/@logrocket/utils/src/sendTelemetryData.js")),at=et(s("./packages/@logrocket/utils/src/logError.js"));function ht(dt){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var lt;try{lt=dt.apply(void 0,arguments)}catch(ot){if(typeof window<"u"&&window._lrdebug)throw ot;var mt=pt(ot);(0,at.default)("LogRocket",ot),(0,nt.default)(ot,mt)}return lt}}},"./packages/@logrocket/utils/src/querySelectorWithShadowDom.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt,it.caseInsensitiveQuerySelector=void 0;function s(pt,lt){var mt=typeof Symbol<"u"&&pt[Symbol.iterator]||pt["@@iterator"];if(!mt){if(Array.isArray(pt)||(mt=et(pt))||lt&&pt&&typeof pt.length=="number"){mt&&(pt=mt);var ot=0,ut=function(){};return{s:ut,n:function(){return ot>=pt.length?{done:!0}:{done:!1,value:pt[ot++]}},e:function(At){throw At},f:ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ft=!0,bt=!1,vt;return{s:function(){mt=mt.call(pt)},n:function(){var At=mt.next();return ft=At.done,At},e:function(At){bt=!0,vt=At},f:function(){try{!ft&&mt.return!=null&&mt.return()}finally{if(bt)throw vt}}}}function et(pt,lt){if(pt){if(typeof pt=="string")return nt(pt,lt);var mt=Object.prototype.toString.call(pt).slice(8,-1);if(mt==="Object"&&pt.constructor&&(mt=pt.constructor.name),mt==="Map"||mt==="Set")return Array.from(pt);if(mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt))return nt(pt,lt)}}function nt(pt,lt){(lt==null||lt>pt.length)&&(lt=pt.length);for(var mt=0,ot=new Array(lt);mt<lt;mt++)ot[mt]=pt[mt];return ot}var at=function(lt){var mt=lt.root,ot=lt.selectorList,ut=lt.directDesc,ft=ot[0].split(/(?=\.)|(?=#)/),bt=ft.shift(),vt="",yt=[];ft.forEach(function(Ot){Ot[0]==="#"&&(vt=Ot.toLowerCase().substring(1).trim()),Ot[0]==="."&&yt.push(Ot.toLowerCase().substring(1).trim())});var At;ut?At=[mt.querySelector(":scope > ".concat(bt))]:At=mt.querySelectorAll(bt);var Nt=[],St=s(At),wt;try{var Mt=function(){var Dt=wt.value;if(!Dt||vt!==Dt.id.toLowerCase())return"continue";var Gt=Array.from(Dt.classList.values()).map(function(nn){return nn.toLowerCase()}).filter(function(nn){return nn!==""&&nn[0]!==":"});if(!yt.every(function(nn){return Gt.indexOf(nn)>-1}))return"continue";Nt.push(Dt)};for(St.s();!(wt=St.n()).done;)var Ht=Mt()}catch(Ot){St.e(Ot)}finally{St.f()}return Nt},ht=function(lt,mt){if(!mt.length)return null;var ot;if(lt.host?ot=lt:ot=lt.querySelector("body"),!ot)return null;for(var ut=[{matches:[ot],selectorList:mt.split(" > "),directDesc:!1}];ut.length;){var ft=ut.shift(),bt=ft.matches,vt=ft.selectorList,yt=ft.directDesc,At=s(bt),Nt;try{for(At.s();!(Nt=At.n()).done;){var St=Nt.value,wt=at({root:St,selectorList:vt,directDesc:yt});if(wt.length&&vt.length===1)return wt[0];wt.length&&ut.push({matches:wt,selectorList:vt.slice(1),directDesc:!0})}}catch(Mt){At.e(Mt)}finally{At.f()}}return null};it.caseInsensitiveQuerySelector=ht;function dt(pt,lt){if(lt.startsWith("$shadow-root >"))throw new Error("Malformed selector '".concat(lt,"': should not start with $shadow-root"));lt.endsWith("> $shadow-root")&&(lt=lt.slice(0,lt.length-14));for(var mt=pt,ot,ut=lt.split("> $shadow-root >"),ft=0;ft<ut.length;ft++)if(ot=ht(mt,ut[ft]),ot&&ft<ut.length-1)if(ot.shadowRoot)mt=ot.shadowRoot;else throw new Error("Missing shadowRoot for selector '".concat(lt,"' at depth ").concat(ft));return{root:mt,node:ot}}},"./packages/@logrocket/utils/src/randomInt.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){var at=Math.ceil(et),ht=Math.floor(nt);return Math.floor(Math.random()*(ht-at))+at}},"./packages/@logrocket/utils/src/removeOutdated.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ht;var nt=et(s("./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js")),at=5e3;function ht(dt,pt){if(dt.length===0)return dt;var lt=(0,nt.default)(dt,{time:pt.time-at},"time")-1,mt=dt[lt];return mt&&pt.time-mt.time>at&&lt>0?dt.slice(lt):dt}},"./packages/@logrocket/utils/src/requireValue.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.requireValue=void 0;var s=function(nt){if(typeof nt>"u")throw new Error("Value must not be undefined.");return nt};it.requireValue=s},"./packages/@logrocket/utils/src/sanitizeValue.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=et;var s=function(at){for(var ht="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ",dt=Math.ceil(at.length/ht.length),pt="";dt>0;)pt+=ht,dt--;return pt.slice(0,at.length)};function et(nt,at){var ht=String(nt);return String(at).toLowerCase()==="lipsum"?s(ht):""}},"./packages/@logrocket/utils/src/scrollMapHistogramToPercent.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){for(var at=[],ht=et.reduce(function(mt,ot){return mt+ot.count},0),dt=0,pt=1;pt<=100;pt++){var lt=nt*(pt*.01);dt>=et.length?at.push(0):(at.push(ht),lt>et[dt].maxScroll&&(ht-=et[dt].count,dt++))}return at}},"./packages/@logrocket/utils/src/scrubException.ts":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.scrubException=ot;var nt=et(s("./node_modules/@babel/runtime/helpers/typeof.js"));function at(ut,ft){var bt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!bt){if(Array.isArray(ut)||(bt=ht(ut))||ft&&ut&&typeof ut.length=="number"){bt&&(ut=bt);var vt=0,yt=function(){};return{s:yt,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Mt){throw Mt},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At=!0,Nt=!1,St;return{s:function(){bt=bt.call(ut)},n:function(){var Mt=bt.next();return At=Mt.done,Mt},e:function(Mt){Nt=!0,St=Mt},f:function(){try{!At&&bt.return!=null&&bt.return()}finally{if(Nt)throw St}}}}function ht(ut,ft){if(ut){if(typeof ut=="string")return dt(ut,ft);var bt=Object.prototype.toString.call(ut).slice(8,-1);if(bt==="Object"&&ut.constructor&&(bt=ut.constructor.name),bt==="Map"||bt==="Set")return Array.from(ut);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return dt(ut,ft)}}function dt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var bt=0,vt=new Array(ft);bt<ft;bt++)vt[bt]=ut[bt];return vt}function pt(ut){return/boolean|number|string/.test((0,nt.default)(ut))}var lt=["level","logger"],mt=["tags","extra"];function ot(ut,ft){if(ft){var bt=at(lt),vt;try{for(bt.s();!(vt=bt.n()).done;){var yt=vt.value,At=ft[yt];pt(At)&&(ut[yt]=At.toString())}}catch(zt){bt.e(zt)}finally{bt.f()}var Nt=at(mt),St;try{for(Nt.s();!(St=Nt.n()).done;){for(var wt=St.value,Mt=ft[wt]||{},Ht={},Ot=0,Dt=Object.keys(Mt);Ot<Dt.length;Ot++){var Gt=Dt[Ot],nn=Mt[Gt];pt(nn)&&(Ht[Gt.toString()]=nn.toString())}ut[wt]=Ht}}catch(zt){Nt.e(zt)}finally{Nt.f()}}}},"./packages/@logrocket/utils/src/selectorFromNodePath.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=pt;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"));function at(lt,mt){var ot=typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(!ot){if(Array.isArray(lt)||(ot=ht(lt))||mt&&lt&&typeof lt.length=="number"){ot&&(lt=ot);var ut=0,ft=function(){};return{s:ft,n:function(){return ut>=lt.length?{done:!0}:{done:!1,value:lt[ut++]}},e:function(Nt){throw Nt},f:ft}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bt=!0,vt=!1,yt;return{s:function(){ot=ot.call(lt)},n:function(){var Nt=ot.next();return bt=Nt.done,Nt},e:function(Nt){vt=!0,yt=Nt},f:function(){try{!bt&&ot.return!=null&&ot.return()}finally{if(vt)throw yt}}}}function ht(lt,mt){if(lt){if(typeof lt=="string")return dt(lt,mt);var ot=Object.prototype.toString.call(lt).slice(8,-1);if(ot==="Object"&&lt.constructor&&(ot=lt.constructor.name),ot==="Map"||ot==="Set")return Array.from(lt);if(ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot))return dt(lt,mt)}}function dt(lt,mt){(mt==null||mt>lt.length)&&(mt=lt.length);for(var ot=0,ut=new Array(mt);ot<mt;ot++)ut[ot]=lt[ot];return ut}function pt(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],mt=[],ot=at((0,nt.default)(lt).reverse()),ut;try{var ft=function(){var vt=ut.value,yt=vt.nodeName,At=vt.id,Nt=vt.nthChild,St=vt.classList,wt=[],Mt=[];Nt&&Mt.push("nth-child(".concat(Nt,")")),yt&&(wt.push(yt),Mt.sort().map(function(Ht){return wt.push(":".concat(Ht))})),At&&wt.push("#".concat(At)),St&&St.length&&(St=St.map(function(Ht){return Ht.toLowerCase()}).sort(),wt=[].concat((0,nt.default)(wt),(0,nt.default)(St.map(function(Ht){return".".concat(Ht)})))),wt.length&&mt.push(wt.join(" "))};for(ot.s();!(ut=ot.n()).done;)ft()}catch(bt){ot.e(bt)}finally{ot.f()}return mt.join(" > ")}},"./packages/@logrocket/utils/src/selectorMatches.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=ot;var nt=et(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),at=et(s("./node_modules/@babel/runtime/helpers/typeof.js")),ht=et(s("./packages/@logrocket/utils/src/findIndex.js"));function dt(ut,ft){var bt=typeof Symbol<"u"&&ut[Symbol.iterator]||ut["@@iterator"];if(!bt){if(Array.isArray(ut)||(bt=pt(ut))||ft&&ut&&typeof ut.length=="number"){bt&&(ut=bt);var vt=0,yt=function(){};return{s:yt,n:function(){return vt>=ut.length?{done:!0}:{done:!1,value:ut[vt++]}},e:function(Mt){throw Mt},f:yt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At=!0,Nt=!1,St;return{s:function(){bt=bt.call(ut)},n:function(){var Mt=bt.next();return At=Mt.done,Mt},e:function(Mt){Nt=!0,St=Mt},f:function(){try{!At&&bt.return!=null&&bt.return()}finally{if(Nt)throw St}}}}function pt(ut,ft){if(ut){if(typeof ut=="string")return lt(ut,ft);var bt=Object.prototype.toString.call(ut).slice(8,-1);if(bt==="Object"&&ut.constructor&&(bt=ut.constructor.name),bt==="Map"||bt==="Set")return Array.from(ut);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return lt(ut,ft)}}function lt(ut,ft){(ft==null||ft>ut.length)&&(ft=ut.length);for(var bt=0,vt=new Array(ft);bt<ft;bt++)vt[bt]=ut[bt];return vt}function mt(ut,ft){if(!(ut&&ft)||ut.id&&ut.id!==ft.id||ut.nodeName&&ut.nodeName!==ft.nodeName||ut.classList&&(!ft.classList||ut.classList.map(function(vt){return vt.toLowerCase()}).some(function(vt){return ft.classList.map(function(yt){return yt.toLowerCase()}).indexOf(vt)===-1})))return!1;if(ut.nthChild){var bt=parseInt(ut.nthChild,10);return isNaN(bt)?Math.abs(ft.nthChild%2)===(ut.nthChild==="odd"?1:0):bt===ft.nthChild}return!0}function ot(ut,ft){var bt=ut.slice(0).reverse(),vt,yt=dt(ft),At;try{var Nt=function(){var Mt=At.value;if(Mt.directDesc)return mt.apply(void 0,[Mt].concat((0,nt.default)(bt.splice(0,1))))?"continue":{v:!1};if(vt=(0,ht.default)(bt,function(Ht){return mt(Mt,Ht)}),vt===-1)return{v:!1};bt.splice(0,vt+1)};for(yt.s();!(At=yt.n()).done;){var St=Nt();if(St!=="continue"&&(0,at.default)(St)==="object")return St.v}}catch(wt){yt.e(wt)}finally{yt.f()}return!0}},"./packages/@logrocket/utils/src/sendTelemetryData.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.sendTelemetry=ot,it.default=ut;var nt=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),at=et(s("./packages/@logrocket/utils/src/logError.js")),ht=et(s("./packages/@logrocket/utils/src/TraceKit.js"));function dt(ft,bt){var vt=Object.keys(ft);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(ft);bt&&(yt=yt.filter(function(At){return Object.getOwnPropertyDescriptor(ft,At).enumerable})),vt.push.apply(vt,yt)}return vt}function pt(ft){for(var bt=1;bt<arguments.length;bt++){var vt=arguments[bt]!=null?arguments[bt]:{};bt%2?dt(Object(vt),!0).forEach(function(yt){(0,nt.default)(ft,yt,vt[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(vt)):dt(Object(vt)).forEach(function(yt){Object.defineProperty(ft,yt,Object.getOwnPropertyDescriptor(vt,yt))})}return ft}var lt="b0db2bde13abbdaac4ddf7651e7be60eb639ccf7";function mt(ft){var bt=window._lrXMLHttpRequest||XMLHttpRequest;try{var vt=new bt,yt=ft.message,At="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793";vt.open("POST",At),vt.send(JSON.stringify(pt({message:yt,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:lt,environment:"test"},ft)))}catch(Nt){(0,at.default)("Failed to send",Nt)}}function ot(ft,bt){if(typeof window<"u"&&window._lrdebug)return void(0,at.default)(ft);bt&&bt.extra&&bt.extra.appID&&typeof bt.extra.appID.indexOf=="function"&&bt.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||mt(pt({message:ft},bt))}function ut(ft,bt){try{var vt=ft.message,yt;try{yt=JSON.stringify(bt).slice(0,1e3)}catch{try{yt="Could not stringify payload: ".concat(Object.prototype.toString.call(bt))}catch{}}var At;try{At=ht.default.computeStackTrace(ft).stack.map(function(Nt){return{filename:Nt.url,lineno:Nt.line,colno:Nt.column,function:Nt.func||"?"}})}catch{}mt({message:vt,extra:{stringPayload:yt},exception:{values:[{type:ft.type,value:vt,stacktrace:{frames:At}}]}})}catch(Nt){(0,at.default)("Failed to send",Nt)}}},"./packages/@logrocket/utils/src/setFromArray.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=new Set;return et.forEach(function(at){return nt.add(at)}),nt}},"./packages/@logrocket/utils/src/setToArray.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=[];return et.forEach(function(at){return nt.push(at)}),nt}},"./packages/@logrocket/utils/src/shallowArsonify.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt={}.toString.call(et);switch(nt){case"[object Undefined]":return{undefined:{}};case"[object Null]":return{null:{}};case"[object Boolean]":return{boolean:{bool:et}};case"[object Number]":return{number:{double:et}};case"[object String]":return{string:{string:et}};case"[object Object]":return{object:{map:et}};case"[object Array]":return{array:{map:et}};case"[object Date]":return{date:{double:et.getTime()}};case"[object Error]":return{string:{string:"".concat(et.name,": ").concat(et.message)}};default:return{unsupported:{type:nt}}}}},"./packages/@logrocket/utils/src/shallowDearsonify.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){var nt=et.type||Object.keys(et)[0];switch(nt){case"undefined":return;case"null":return null;case"boolean":return et.boolean.bool;case"number":return et.number.double;case"string":return et.string.string;case"object":return et.object.map;case"array":return Object.keys(et.array.map).reduce(function(at,ht){return at[ht]=et.array.map[ht],at},[]);case"date":return new Date(et.date.double);case"unsupported":return et.unsupported.type;default:throw new TypeError("Unexpected value in shallowDearsonify: ".concat(et))}}},"./packages/@logrocket/utils/src/startsWith.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et,nt){var at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return et&&nt&&et.substring(at,at+nt.length)===nt}},"./packages/@logrocket/utils/src/types.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0})},"./packages/@logrocket/utils/src/userTraitStrings.ts":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.parseUserTraitString=it.encodeUserTraitString=void 0;var s=":",et=String.fromCharCode(26),nt=function(){for(var dt=arguments.length,pt=new Array(dt),lt=0;lt<dt;lt++)pt[lt]=arguments[lt];return pt.map(function(mt){return mt.replace(new RegExp(s,"g"),et)}).join(s)};it.encodeUserTraitString=nt;var at=function(dt){var pt=dt||s;return pt.split(s).map(function(lt){return lt.replace(new RegExp(et,"g"),s)})};it.parseUserTraitString=at},"./packages/@logrocket/utils/src/uuid.js":function(rt,it){Object.defineProperty(it,"__esModule",{value:!0}),it.default=s;function s(et){return et?(et^Math.random()*16>>et/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s)}},"./packages/logrocket/src/LogRocket.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=it.MAX_QUEUE_SIZE=void 0;var nt=et(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),at=et(s("./node_modules/@babel/runtime/helpers/createClass.js")),ht=et(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),dt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),pt=et(s("./packages/@logrocket/network/src/index.js")),lt=s("./packages/@logrocket/exceptions/src/index.js"),mt=et(s("./packages/@logrocket/console/src/index.js")),ot=s("./packages/@logrocket/redux/src/index.js");function ut(At,Nt){var St=Object.keys(At);if(Object.getOwnPropertySymbols){var wt=Object.getOwnPropertySymbols(At);Nt&&(wt=wt.filter(function(Mt){return Object.getOwnPropertyDescriptor(At,Mt).enumerable})),St.push.apply(St,wt)}return St}function ft(At){for(var Nt=1;Nt<arguments.length;Nt++){var St=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?ut(Object(St),!0).forEach(function(wt){(0,ht.default)(At,wt,St[wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(At,Object.getOwnPropertyDescriptors(St)):ut(Object(St)).forEach(function(wt){Object.defineProperty(At,wt,Object.getOwnPropertyDescriptor(St,wt))})}return At}var bt=1e3;it.MAX_QUEUE_SIZE=bt;var vt=function(){var Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=Nt.ingestServer,wt=(0,dt.default)(Nt,["ingestServer"]);return St?ft({serverURL:"".concat(St,"/i"),statsURL:"".concat(St,"/s")},wt):wt},yt=function(){function At(){var Nt=this;(0,nt.default)(this,At),this._buffer=[],["log","info","warn","error","debug"].forEach(function(St){Nt[St]=function(){for(var wt=arguments.length,Mt=new Array(wt),Ht=0;Ht<wt;Ht++)Mt[Ht]=arguments[Ht];Nt.addEvent("lr.core.LogEvent",function(){var Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return St==="error"&&Ot.shouldAggregateConsoleErrors&&lt.Capture.captureMessage(Nt,Mt[0],Mt,{},!0),{logLevel:St.toUpperCase(),args:Mt}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,at.default)(At,[{key:"addEvent",value:function(St,wt){var Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ht=Date.now();this._run(function(Ot){Ot.addEvent(St,wt,ft(ft({},Mt),{},{timeOverride:Ht}))})}},{key:"onLogger",value:function(St){for(this._logger=St;this._buffer.length>0;){var wt=this._buffer.shift();wt(this._logger)}}},{key:"_run",value:function(St){if(!this._isDisabled)if(this._logger)St(this._logger);else{if(this._buffer.length>=bt){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(St.bind(this))}}},{key:"init",value:function(St){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var Mt=wt.shouldAugmentNPS,Ht=Mt===void 0?!0:Mt,Ot=wt.shouldParseXHRBlob,Dt=Ot===void 0?!1:Ot,Gt=wt.shouldDetectExceptions,nn=Gt===void 0?!0:Gt;nn&&this._installed.push((0,lt.registerExceptions)(this)),this._installed.push((0,pt.default)(this,{shouldAugmentNPS:!!Ht,shouldParseXHRBlob:!!Dt})),this._installed.push((0,mt.default)(this)),this._isInitialized=!0,this._run(function(zt){zt.init(St,vt(wt))})}}},{key:"start",value:function(){this._run(function(St){St.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(St){return St()}),this._buffer=[],this._run(function(St){St.uninstall()})}},{key:"identify",value:function(St,wt){this._run(function(Mt){Mt.identify(St,wt)})}},{key:"startNewSession",value:function(){this._run(function(St){St.startNewSession()})}},{key:"track",value:function(St,wt){this._run(function(Mt){Mt.track(St,wt)})}},{key:"getSessionURL",value:function(St){if(typeof St!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(wt){wt.getSessionURL?wt.getSessionURL(St):St(wt.recordingURL)})}},{key:"getVersion",value:function(St){this._run(function(wt){St(wt.version)})}},{key:"captureMessage",value:function(St){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt.Capture.captureMessage(this,St,[St],wt)}},{key:"captureException",value:function(St){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt.Capture.captureException(this,St,wt)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,ot.createEnhancer)(this,St)}},{key:"reduxMiddleware",value:function(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,ot.createMiddleware)(this,St)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),At}();it.default=yt},"./packages/logrocket/src/makeLogRocket.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var nt=et(s("./packages/logrocket/src/LogRocket.js")),at="LogRocket does not yet support React Native.",ht=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(mt){return function(){return mt.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(mt){return function(ot){return mt(ot)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(at);if(typeof window<"u"){if(window._disableLogRocket)return ht();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var lt=new nt.default;return pt(lt),lt}}return ht()}},"./packages/logrocket/src/setup.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(it,"__esModule",{value:!0}),it.default=dt;var nt=et(s("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),at=et(s("./packages/logrocket/src/makeLogRocket.js")),ht={"cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com"};function dt(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=pt.enterpriseServer,mt=pt.sdkVersion,ot=mt===void 0?"6.0.1":mt,ut=(0,nt.default)(pt,["enterpriseServer","sdkVersion"]),ft="https://cdn.logrocket.io",bt;if(ot==="script")try{var vt=document.currentScript,yt=vt.src.match(/^(https?:\/\/([^\\]+))\/.+$/),At=yt&&yt[2];At&&ht[At]&&(ft=yt&&yt[1],bt=ht[At])}catch{}else ft="https://cdn.lr-intake.com",bt="https://r.lr-intake.com";var Nt=ut.sdkServer||lt,St=ut.ingestServer||lt||bt,wt=(0,at.default)(function(){var Mt=document.createElement("script");St&&(typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(St,"/i"),window.__SDKCONFIG__.statsURL="".concat(St,"/s")),Nt?Mt.src="".concat(Nt,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?Mt.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?Mt.src=window._lrAsyncScript:Mt.src="".concat(ft,"/logger-1.min.js"),Mt.async=!0,document.head.appendChild(Mt),Mt.onload=function(){typeof window._LRLogger=="function"?wt.onLogger(new window._LRLogger({sdkVersion:ot})):(console.warn("LogRocket: script execution has been blocked by a product or service."),wt.uninstall())},Mt.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),wt.uninstall()}});return wt}},"./packages/@logrocket/utils/node_modules/lodash/_DataView.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),at=et(nt,"DataView");rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_Hash.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_hashClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_hashGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_hashHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_hashSet.js");function pt(lt){var mt=-1,ot=lt==null?0:lt.length;for(this.clear();++mt<ot;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=at,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_ListCache.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js");function pt(lt){var mt=-1,ot=lt==null?0:lt.length;for(this.clear();++mt<ot;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=at,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Map.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),at=et(nt,"Map");rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_MapCache.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js");function pt(lt){var mt=-1,ot=lt==null?0:lt.length;for(this.clear();++mt<ot;){var ut=lt[mt];this.set(ut[0],ut[1])}}pt.prototype.clear=et,pt.prototype.delete=nt,pt.prototype.get=at,pt.prototype.has=ht,pt.prototype.set=dt,rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_Promise.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),at=et(nt,"Promise");rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_Set.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),at=et(nt,"Set");rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_SetCache.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js");function ht(dt){var pt=-1,lt=dt==null?0:dt.length;for(this.__data__=new et;++pt<lt;)this.add(dt[pt])}ht.prototype.add=ht.prototype.push=nt,ht.prototype.has=at,rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_Stack.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_stackClear.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_stackGet.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_stackHas.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_stackSet.js");function lt(mt){var ot=this.__data__=new et(mt);this.size=ot.size}lt.prototype.clear=nt,lt.prototype.delete=at,lt.prototype.get=ht,lt.prototype.has=dt,lt.prototype.set=pt,rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_Symbol.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et.Symbol;rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et.Uint8Array;rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),at=et(nt,"WeakMap");rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js":function(rt){function it(s,et){for(var nt=-1,at=s==null?0:s.length,ht=0,dt=[];++nt<at;){var pt=s[nt];et(pt,nt,s)&&(dt[ht++]=pt)}return dt}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),lt=Object.prototype,mt=lt.hasOwnProperty;function ot(ut,ft){var bt=at(ut),vt=!bt&&nt(ut),yt=!bt&&!vt&&ht(ut),At=!bt&&!vt&&!yt&&pt(ut),Nt=bt||vt||yt||At,St=Nt?et(ut.length,String):[],wt=St.length;for(var Mt in ut)(ft||mt.call(ut,Mt))&&!(Nt&&(Mt=="length"||yt&&(Mt=="offset"||Mt=="parent")||At&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||dt(Mt,wt)))&&St.push(Mt);return St}rt.exports=ot},"./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js":function(rt){function it(s,et){for(var nt=-1,at=s==null?0:s.length,ht=Array(at);++nt<at;)ht[nt]=et(s[nt],nt,s);return ht}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js":function(rt){function it(s,et){for(var nt=-1,at=et.length,ht=s.length;++nt<at;)s[ht+nt]=et[nt];return s}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_arraySome.js":function(rt){function it(s,et){for(var nt=-1,at=s==null?0:s.length;++nt<at;)if(et(s[nt],nt,s))return!0;return!1}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/eq.js");function nt(at,ht){for(var dt=at.length;dt--;)if(et(at[dt][0],ht))return dt;return-1}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_baseGet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function at(ht,dt){dt=et(dt,ht);for(var pt=0,lt=dt.length;ht!=null&&pt<lt;)ht=ht[nt(dt[pt++])];return pt&&pt==lt?ht:void 0}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayPush.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js");function at(ht,dt,pt){var lt=dt(ht);return nt(ht)?lt:et(lt,pt(ht))}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_objectToString.js"),ht="[object Null]",dt="[object Undefined]",pt=et?et.toStringTag:void 0;function lt(mt){return mt==null?mt===void 0?dt:ht:pt&&pt in Object(mt)?nt(mt):at(mt)}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js":function(rt){function it(s,et){return s!=null&&et in Object(s)}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),at="[object Arguments]";function ht(dt){return nt(dt)&&et(dt)==at}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js");function at(ht,dt,pt,lt,mt){return ht===dt?!0:ht==null||dt==null||!nt(ht)&&!nt(dt)?ht!==ht&&dt!==dt:et(ht,dt,pt,lt,at,mt)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_baseIsEqualDeep.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_getTag.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/isBuffer.js"),mt=s("./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js"),ot=1,ut="[object Arguments]",ft="[object Array]",bt="[object Object]",vt=Object.prototype,yt=vt.hasOwnProperty;function At(Nt,St,wt,Mt,Ht,Ot){var Dt=pt(Nt),Gt=pt(St),nn=Dt?ft:dt(Nt),zt=Gt?ft:dt(St);nn=nn==ut?bt:nn,zt=zt==ut?bt:zt;var Ft=nn==bt,un=zt==bt,vn=nn==zt;if(vn&&lt(Nt)){if(!lt(St))return!1;Dt=!0,Ft=!1}if(vn&&!Ft)return Ot||(Ot=new et),Dt||mt(Nt)?nt(Nt,St,wt,Mt,Ht,Ot):at(Nt,St,nn,wt,Mt,Ht,Ot);if(!(wt&ot)){var yn=Ft&&yt.call(Nt,"__wrapped__"),cn=un&&yt.call(St,"__wrapped__");if(yn||cn){var gn=yn?Nt.value():Nt,Cn=cn?St.value():St;return Ot||(Ot=new et),Ht(gn,Cn,wt,Mt,Ot)}}return vn?(Ot||(Ot=new et),ht(Nt,St,wt,Mt,Ht,Ot)):!1}rt.exports=At},"./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Stack.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),at=1,ht=2;function dt(pt,lt,mt,ot){var ut=mt.length,ft=ut,bt=!ot;if(pt==null)return!ft;for(pt=Object(pt);ut--;){var vt=mt[ut];if(bt&&vt[2]?vt[1]!==pt[vt[0]]:!(vt[0]in pt))return!1}for(;++ut<ft;){vt=mt[ut];var yt=vt[0],At=pt[yt],Nt=vt[1];if(bt&&vt[2]){if(At===void 0&&!(yt in pt))return!1}else{var St=new et;if(ot)var wt=ot(At,Nt,yt,pt,lt,St);if(!(wt===void 0?nt(Nt,At,at|ht,ot,St):wt))return!1}}return!0}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_isMasked.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),dt=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,lt=Function.prototype,mt=Object.prototype,ot=lt.toString,ut=mt.hasOwnProperty,ft=RegExp("^"+ot.call(ut).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bt(vt){if(!at(vt)||nt(vt))return!1;var yt=et(vt)?ft:pt;return yt.test(ht(vt))}rt.exports=bt},"./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),ht="[object Arguments]",dt="[object Array]",pt="[object Boolean]",lt="[object Date]",mt="[object Error]",ot="[object Function]",ut="[object Map]",ft="[object Number]",bt="[object Object]",vt="[object RegExp]",yt="[object Set]",At="[object String]",Nt="[object WeakMap]",St="[object ArrayBuffer]",wt="[object DataView]",Mt="[object Float32Array]",Ht="[object Float64Array]",Ot="[object Int8Array]",Dt="[object Int16Array]",Gt="[object Int32Array]",nn="[object Uint8Array]",zt="[object Uint8ClampedArray]",Ft="[object Uint16Array]",un="[object Uint32Array]",vn={};vn[Mt]=vn[Ht]=vn[Ot]=vn[Dt]=vn[Gt]=vn[nn]=vn[zt]=vn[Ft]=vn[un]=!0,vn[ht]=vn[dt]=vn[St]=vn[pt]=vn[wt]=vn[lt]=vn[mt]=vn[ot]=vn[ut]=vn[ft]=vn[bt]=vn[vt]=vn[yt]=vn[At]=vn[Nt]=!1;function yn(cn){return at(cn)&&nt(cn.length)&&!!vn[et(cn)]}rt.exports=yn},"./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/identity.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/property.js");function pt(lt){return typeof lt=="function"?lt:lt==null?at:typeof lt=="object"?ht(lt)?nt(lt[0],lt[1]):et(lt):dt(lt)}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js"),at=Object.prototype,ht=at.hasOwnProperty;function dt(pt){if(!et(pt))return nt(pt);var lt=[];for(var mt in Object(pt))ht.call(pt,mt)&&mt!="constructor"&&lt.push(mt);return lt}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_baseMatches.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsMatch.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js");function ht(dt){var pt=nt(dt);return pt.length==1&&pt[0][2]?at(pt[0][0],pt[0][1]):function(lt){return lt===dt||et(lt,dt,pt)}}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_baseMatchesProperty.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsEqual.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/get.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/hasIn.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js"),mt=1,ot=2;function ut(ft,bt){return ht(ft)&&dt(bt)?pt(lt(ft),bt):function(vt){var yt=nt(vt,ft);return yt===void 0&&yt===bt?at(vt,ft):et(bt,yt,mt|ot)}}rt.exports=ut},"./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js":function(rt){function it(s){return function(et){return et==null?void 0:et[s]}}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function nt(at){return function(ht){return et(ht,at)}}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),nt=4294967295,at=nt-1,ht=Math.floor,dt=Math.min;function pt(lt,mt,ot,ut){var ft=0,bt=lt==null?0:lt.length;if(bt===0)return 0;mt=ot(mt);for(var vt=mt!==mt,yt=mt===null,At=et(mt),Nt=mt===void 0;ft<bt;){var St=ht((ft+bt)/2),wt=ot(lt[St]),Mt=wt!==void 0,Ht=wt===null,Ot=wt===wt,Dt=et(wt);if(vt)var Gt=ut||Ot;else Nt?Gt=Ot&&(ut||Mt):yt?Gt=Ot&&Mt&&(ut||!Ht):At?Gt=Ot&&Mt&&!Ht&&(ut||!Dt):Ht||Dt?Gt=!1:Gt=ut?wt<=mt:wt<mt;Gt?ft=St+1:bt=St}return dt(bt,at)}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_baseTimes.js":function(rt){function it(s,et){for(var nt=-1,at=Array(s);++nt<s;)at[nt]=et(nt);return at}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_baseToString.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_arrayMap.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),dt=1/0,pt=et?et.prototype:void 0,lt=pt?pt.toString:void 0;function mt(ot){if(typeof ot=="string")return ot;if(at(ot))return nt(ot,mt)+"";if(ht(ot))return lt?lt.call(ot):"";var ut=ot+"";return ut=="0"&&1/ot==-dt?"-0":ut}rt.exports=mt},"./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js":function(rt){function it(s){return function(et){return s(et)}}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js":function(rt){function it(s,et){return s.has(et)}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_castPath.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/toString.js");function dt(pt,lt){return et(pt)?pt:nt(pt,lt)?[pt]:at(ht(pt))}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=et["__core-js_shared__"];rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_SetCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_arraySome.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_cacheHas.js"),ht=1,dt=2;function pt(lt,mt,ot,ut,ft,bt){var vt=ot&ht,yt=lt.length,At=mt.length;if(yt!=At&&!(vt&&At>yt))return!1;var Nt=bt.get(lt),St=bt.get(mt);if(Nt&&St)return Nt==mt&&St==lt;var wt=-1,Mt=!0,Ht=ot&dt?new et:void 0;for(bt.set(lt,mt),bt.set(mt,lt);++wt<yt;){var Ot=lt[wt],Dt=mt[wt];if(ut)var Gt=vt?ut(Dt,Ot,wt,mt,lt,bt):ut(Ot,Dt,wt,lt,mt,bt);if(Gt!==void 0){if(Gt)continue;Mt=!1;break}if(Ht){if(!nt(mt,function(nn,zt){if(!at(Ht,zt)&&(Ot===nn||ft(Ot,nn,ot,ut,bt)))return Ht.push(zt)})){Mt=!1;break}}else if(!(Ot===Dt||ft(Ot,Dt,ot,ut,bt))){Mt=!1;break}}return bt.delete(lt),bt.delete(mt),Mt}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_equalByTag.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Uint8Array.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/eq.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_equalArrays.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_setToArray.js"),lt=1,mt=2,ot="[object Boolean]",ut="[object Date]",ft="[object Error]",bt="[object Map]",vt="[object Number]",yt="[object RegExp]",At="[object Set]",Nt="[object String]",St="[object Symbol]",wt="[object ArrayBuffer]",Mt="[object DataView]",Ht=et?et.prototype:void 0,Ot=Ht?Ht.valueOf:void 0;function Dt(Gt,nn,zt,Ft,un,vn,yn){switch(zt){case Mt:if(Gt.byteLength!=nn.byteLength||Gt.byteOffset!=nn.byteOffset)return!1;Gt=Gt.buffer,nn=nn.buffer;case wt:return!(Gt.byteLength!=nn.byteLength||!vn(new nt(Gt),new nt(nn)));case ot:case ut:case vt:return at(+Gt,+nn);case ft:return Gt.name==nn.name&&Gt.message==nn.message;case yt:case Nt:return Gt==nn+"";case bt:var cn=dt;case At:var gn=Ft&lt;if(cn||(cn=pt),Gt.size!=nn.size&&!gn)return!1;var Cn=yn.get(Gt);if(Cn)return Cn==nn;Ft|=mt,yn.set(Gt,nn);var fn=ht(cn(Gt),cn(nn),Ft,un,vn,yn);return yn.delete(Gt),fn;case St:if(Ot)return Ot.call(Gt)==Ot.call(nn)}return!1}rt.exports=Dt},"./packages/@logrocket/utils/node_modules/lodash/_equalObjects.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js"),nt=1,at=Object.prototype,ht=at.hasOwnProperty;function dt(pt,lt,mt,ot,ut,ft){var bt=mt&nt,vt=et(pt),yt=vt.length,At=et(lt),Nt=At.length;if(yt!=Nt&&!bt)return!1;for(var St=yt;St--;){var wt=vt[St];if(!(bt?wt in lt:ht.call(lt,wt)))return!1}var Mt=ft.get(pt),Ht=ft.get(lt);if(Mt&&Ht)return Mt==lt&&Ht==pt;var Ot=!0;ft.set(pt,lt),ft.set(lt,pt);for(var Dt=bt;++St<yt;){wt=vt[St];var Gt=pt[wt],nn=lt[wt];if(ot)var zt=bt?ot(nn,Gt,wt,lt,pt,ft):ot(Gt,nn,wt,pt,lt,ft);if(!(zt===void 0?Gt===nn||ut(Gt,nn,mt,ot,ft):zt)){Ot=!1;break}Dt||(Dt=wt=="constructor")}if(Ot&&!Dt){var Ft=pt.constructor,un=lt.constructor;Ft!=un&&"constructor"in pt&&"constructor"in lt&&!(typeof Ft=="function"&&Ft instanceof Ft&&typeof un=="function"&&un instanceof un)&&(Ot=!1)}return ft.delete(pt),ft.delete(lt),Ot}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js":function(rt,it,s){var et=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g;rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_getAllKeys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetAllKeys.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function ht(dt){return et(dt,at,nt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_getMapData.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js");function nt(at,ht){var dt=at.__data__;return et(ht)?dt[typeof ht=="string"?"string":"hash"]:dt.map}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_getMatchData.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/keys.js");function at(ht){for(var dt=nt(ht),pt=dt.length;pt--;){var lt=dt[pt],mt=ht[lt];dt[pt]=[lt,mt,et(mt)]}return dt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_getNative.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsNative.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_getValue.js");function at(ht,dt){var pt=nt(ht,dt);return et(pt)?pt:void 0}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_getRawTag.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Symbol.js"),nt=Object.prototype,at=nt.hasOwnProperty,ht=nt.toString,dt=et?et.toStringTag:void 0;function pt(lt){var mt=at.call(lt,dt),ot=lt[dt];try{lt[dt]=void 0;var ut=!0}catch{}var ft=ht.call(lt);return ut&&(mt?lt[dt]=ot:delete lt[dt]),ft}rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getSymbols.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayFilter.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/stubArray.js"),at=Object.prototype,ht=at.propertyIsEnumerable,dt=Object.getOwnPropertySymbols,pt=dt?function(lt){return lt==null?[]:(lt=Object(lt),et(dt(lt),function(mt){return ht.call(lt,mt)}))}:nt;rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_getTag.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_DataView.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_Promise.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_Set.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/_WeakMap.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),lt=s("./packages/@logrocket/utils/node_modules/lodash/_toSource.js"),mt="[object Map]",ot="[object Object]",ut="[object Promise]",ft="[object Set]",bt="[object WeakMap]",vt="[object DataView]",yt=lt(et),At=lt(nt),Nt=lt(at),St=lt(ht),wt=lt(dt),Mt=pt;(et&&Mt(new et(new ArrayBuffer(1)))!=vt||nt&&Mt(new nt)!=mt||at&&Mt(at.resolve())!=ut||ht&&Mt(new ht)!=ft||dt&&Mt(new dt)!=bt)&&(Mt=function(Ht){var Ot=pt(Ht),Dt=Ot==ot?Ht.constructor:void 0,Gt=Dt?lt(Dt):"";if(Gt)switch(Gt){case yt:return vt;case At:return mt;case Nt:return ut;case St:return ft;case wt:return bt}return Ot}),rt.exports=Mt},"./packages/@logrocket/utils/node_modules/lodash/_getValue.js":function(rt){function it(s,et){return s==null?void 0:s[et]}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_hasPath.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_castPath.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isArguments.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_isIndex.js"),dt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js"),pt=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function lt(mt,ot,ut){ot=et(ot,mt);for(var ft=-1,bt=ot.length,vt=!1;++ft<bt;){var yt=pt(ot[ft]);if(!(vt=mt!=null&&ut(mt,yt)))break;mt=mt[yt]}return vt||++ft!=bt?vt:(bt=mt==null?0:mt.length,!!bt&&dt(bt)&&ht(yt,bt)&&(at(mt)||nt(mt)))}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/_hashClear.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js");function nt(){this.__data__=et?et(null):{},this.size=0}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_hashDelete.js":function(rt){function it(s){var et=this.has(s)&&delete this.__data__[s];return this.size-=et?1:0,et}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_hashGet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt="__lodash_hash_undefined__",at=Object.prototype,ht=at.hasOwnProperty;function dt(pt){var lt=this.__data__;if(et){var mt=lt[pt];return mt===nt?void 0:mt}return ht.call(lt,pt)?lt[pt]:void 0}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_hashHas.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt=Object.prototype,at=nt.hasOwnProperty;function ht(dt){var pt=this.__data__;return et?pt[dt]!==void 0:at.call(pt,dt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_hashSet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js"),nt="__lodash_hash_undefined__";function at(ht,dt){var pt=this.__data__;return this.size+=this.has(ht)?0:1,pt[ht]=et&&dt===void 0?nt:dt,this}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_isIndex.js":function(rt){var it=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function et(nt,at){var ht=typeof nt;return at=at??it,!!at&&(ht=="number"||ht!="symbol"&&s.test(nt))&&nt>-1&&nt%1==0&&nt<at}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_isKey.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),at=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;function dt(pt,lt){if(et(pt))return!1;var mt=typeof pt;return mt=="number"||mt=="symbol"||mt=="boolean"||pt==null||nt(pt)?!0:ht.test(pt)||!at.test(pt)||lt!=null&&pt in Object(lt)}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_isKeyable.js":function(rt){function it(s){var et=typeof s;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?s!=="__proto__":s===null}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_isMasked.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_coreJsData.js"),nt=function(){var ht=/[^.]+$/.exec(et&&et.keys&&et.keys.IE_PROTO||"");return ht?"Symbol(src)_1."+ht:""}();function at(ht){return!!nt&&nt in ht}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_isPrototype.js":function(rt){var it=Object.prototype;function s(et){var nt=et&&et.constructor,at=typeof nt=="function"&&nt.prototype||it;return et===at}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_isStrictComparable.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js");function nt(at){return at===at&&!et(at)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheClear.js":function(rt){function it(){this.__data__=[],this.size=0}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_listCacheDelete.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js"),nt=Array.prototype,at=nt.splice;function ht(dt){var pt=this.__data__,lt=et(pt,dt);if(lt<0)return!1;var mt=pt.length-1;return lt==mt?pt.pop():at.call(pt,lt,1),--this.size,!0}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_listCacheGet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(at){var ht=this.__data__,dt=et(ht,at);return dt<0?void 0:ht[dt][1]}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheHas.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(at){return et(this.__data__,at)>-1}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_listCacheSet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_assocIndexOf.js");function nt(at,ht){var dt=this.__data__,pt=et(dt,at);return pt<0?(++this.size,dt.push([at,ht])):dt[pt][1]=ht,this}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheClear.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_Hash.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js");function ht(){this.size=0,this.__data__={hash:new et,map:new(at||nt),string:new et}}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheDelete.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(at){var ht=et(this,at).delete(at);return this.size-=ht?1:0,ht}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheGet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(at){return et(this,at).get(at)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheHas.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(at){return et(this,at).has(at)}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapCacheSet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getMapData.js");function nt(at,ht){var dt=et(this,at),pt=dt.size;return dt.set(at,ht),this.size+=dt.size==pt?0:1,this}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_mapToArray.js":function(rt){function it(s){var et=-1,nt=Array(s.size);return s.forEach(function(at,ht){nt[++et]=[ht,at]}),nt}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_matchesStrictComparable.js":function(rt){function it(s,et){return function(nt){return nt==null?!1:nt[s]===et&&(et!==void 0||s in Object(nt))}}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/memoize.js"),nt=500;function at(ht){var dt=et(ht,function(lt){return pt.size===nt&&pt.clear(),lt}),pt=dt.cache;return dt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_nativeCreate.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_getNative.js"),nt=et(Object,"create");rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_nativeKeys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_overArg.js"),nt=et(Object.keys,Object);rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js":function(rt,it,s){rt=s.nmd(rt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),nt=it&&!it.nodeType&&it,at=nt&&!0&&rt&&!rt.nodeType&&rt,ht=at&&at.exports===nt,dt=ht&&et.process,pt=function(){try{var lt=at&&at.require&&at.require("util").types;return lt||dt&&dt.binding&&dt.binding("util")}catch{}}();rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/_objectToString.js":function(rt){var it=Object.prototype,s=it.toString;function et(nt){return s.call(nt)}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/_overArg.js":function(rt){function it(s,et){return function(nt){return s(et(nt))}}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_root.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_freeGlobal.js"),nt=typeof self=="object"&&self&&self.Object===Object&&self,at=et||nt||Function("return this")();rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_setCacheAdd.js":function(rt){var it="__lodash_hash_undefined__";function s(et){return this.__data__.set(et,it),this}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/_setCacheHas.js":function(rt){function it(s){return this.__data__.has(s)}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_setToArray.js":function(rt){function it(s){var et=-1,nt=Array(s.size);return s.forEach(function(at){nt[++et]=at}),nt}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackClear.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js");function nt(){this.__data__=new et,this.size=0}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/_stackDelete.js":function(rt){function it(s){var et=this.__data__,nt=et.delete(s);return this.size=et.size,nt}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackGet.js":function(rt){function it(s){return this.__data__.get(s)}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackHas.js":function(rt){function it(s){return this.__data__.has(s)}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/_stackSet.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_ListCache.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_Map.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),ht=200;function dt(pt,lt){var mt=this.__data__;if(mt instanceof et){var ot=mt.__data__;if(!nt||ot.length<ht-1)return ot.push([pt,lt]),this.size=++mt.size,this;mt=this.__data__=new at(ot)}return mt.set(pt,lt),this.size=mt.size,this}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/_stringToPath.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_memoizeCapped.js"),nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,at=/\\(\\)?/g,ht=et(function(dt){var pt=[];return dt.charCodeAt(0)===46&&pt.push(""),dt.replace(nt,function(lt,mt,ot,ut){pt.push(ot?ut.replace(at,"$1"):mt||lt)}),pt});rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/_toKey.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isSymbol.js"),nt=1/0;function at(ht){if(typeof ht=="string"||et(ht))return ht;var dt=ht+"";return dt=="0"&&1/ht==-nt?"-0":dt}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/_toSource.js":function(rt){var it=Function.prototype,s=it.toString;function et(nt){if(nt!=null){try{return s.call(nt)}catch{}try{return nt+""}catch{}}return""}rt.exports=et},"./packages/@logrocket/utils/node_modules/lodash/eq.js":function(rt){function it(s,et){return s===et||s!==s&&et!==et}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/get.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGet.js");function nt(at,ht,dt){var pt=at==null?void 0:et(at,ht);return pt===void 0?dt:pt}rt.exports=nt},"./packages/@logrocket/utils/node_modules/lodash/hasIn.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseHasIn.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_hasPath.js");function at(ht,dt){return ht!=null&&nt(ht,dt,et)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/identity.js":function(rt){function it(s){return s}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isArguments.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsArguments.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),at=Object.prototype,ht=at.hasOwnProperty,dt=at.propertyIsEnumerable,pt=et(function(){return arguments}())?et:function(lt){return nt(lt)&&ht.call(lt,"callee")&&!dt.call(lt,"callee")};rt.exports=pt},"./packages/@logrocket/utils/node_modules/lodash/isArray.js":function(rt){var it=Array.isArray;rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/isFunction.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isLength.js");function at(ht){return ht!=null&&nt(ht.length)&&!et(ht)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/isBuffer.js":function(rt,it,s){rt=s.nmd(rt);var et=s("./packages/@logrocket/utils/node_modules/lodash/_root.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/stubFalse.js"),at=it&&!it.nodeType&&it,ht=at&&!0&&rt&&!rt.nodeType&&rt,dt=ht&&ht.exports===at,pt=dt?et.Buffer:void 0,lt=pt?pt.isBuffer:void 0,mt=lt||nt;rt.exports=mt},"./packages/@logrocket/utils/node_modules/lodash/isFunction.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObject.js"),at="[object AsyncFunction]",ht="[object Function]",dt="[object GeneratorFunction]",pt="[object Proxy]";function lt(mt){if(!nt(mt))return!1;var ot=et(mt);return ot==ht||ot==dt||ot==at||ot==pt}rt.exports=lt},"./packages/@logrocket/utils/node_modules/lodash/isLength.js":function(rt){var it=9007199254740991;function s(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=it}rt.exports=s},"./packages/@logrocket/utils/node_modules/lodash/isObject.js":function(rt){function it(s){var et=typeof s;return s!=null&&(et=="object"||et=="function")}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js":function(rt){function it(s){return s!=null&&typeof s=="object"}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/isSymbol.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseGetTag.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/isObjectLike.js"),at="[object Symbol]";function ht(dt){return typeof dt=="symbol"||nt(dt)&&et(dt)==at}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/isTypedArray.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIsTypedArray.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseUnary.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_nodeUtil.js"),ht=at&&at.isTypedArray,dt=ht?nt(ht):et;rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/keys.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_arrayLikeKeys.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseKeys.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/isArrayLike.js");function ht(dt){return at(dt)?et(dt):nt(dt)}rt.exports=ht},"./packages/@logrocket/utils/node_modules/lodash/memoize.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_MapCache.js"),nt="Expected a function";function at(ht,dt){if(typeof ht!="function"||dt!=null&&typeof dt!="function")throw new TypeError(nt);var pt=function(){var lt=arguments,mt=dt?dt.apply(this,lt):lt[0],ot=pt.cache;if(ot.has(mt))return ot.get(mt);var ut=ht.apply(this,lt);return pt.cache=ot.set(mt,ut)||ot,ut};return pt.cache=new(at.Cache||et),pt}at.Cache=et,rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/property.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseProperty.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_basePropertyDeep.js"),at=s("./packages/@logrocket/utils/node_modules/lodash/_isKey.js"),ht=s("./packages/@logrocket/utils/node_modules/lodash/_toKey.js");function dt(pt){return at(pt)?et(ht(pt)):nt(pt)}rt.exports=dt},"./packages/@logrocket/utils/node_modules/lodash/sortedLastIndexBy.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseIteratee.js"),nt=s("./packages/@logrocket/utils/node_modules/lodash/_baseSortedIndexBy.js");function at(ht,dt,pt){return nt(ht,dt,et(pt,2),!0)}rt.exports=at},"./packages/@logrocket/utils/node_modules/lodash/stubArray.js":function(rt){function it(){return[]}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/stubFalse.js":function(rt){function it(){return!1}rt.exports=it},"./packages/@logrocket/utils/node_modules/lodash/toString.js":function(rt,it,s){var et=s("./packages/@logrocket/utils/node_modules/lodash/_baseToString.js");function nt(at){return at==null?"":et(at)}rt.exports=nt},"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":function(rt){function it(s,et){(et==null||et>s.length)&&(et=s.length);for(var nt=0,at=new Array(et);nt<et;nt++)at[nt]=s[nt];return at}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/arrayWithHoles.js":function(rt){function it(s){if(Array.isArray(s))return s}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function nt(at){if(Array.isArray(at))return et(at)}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(rt){function it(s,et){if(!(s instanceof et))throw new TypeError("Cannot call a class as a function")}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function nt(ht,dt){for(var pt=0;pt<dt.length;pt++){var lt=dt[pt];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(ht,et(lt.key),lt)}}function at(ht,dt,pt){return dt&&nt(ht.prototype,dt),pt&&nt(ht,pt),Object.defineProperty(ht,"prototype",{writable:!1}),ht}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function nt(at,ht,dt){return ht=et(ht),ht in at?Object.defineProperty(at,ht,{value:dt,enumerable:!0,configurable:!0,writable:!0}):at[ht]=dt,at}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function(rt){function it(s){return s&&s.__esModule?s:{default:s}}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/iterableToArray.js":function(rt){function it(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":function(rt){function it(s,et){var nt=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(nt!=null){var at,ht,dt,pt,lt=[],mt=!0,ot=!1;try{if(dt=(nt=nt.call(s)).next,et===0){if(Object(nt)!==nt)return;mt=!1}else for(;!(mt=(at=dt.call(nt)).done)&&(lt.push(at.value),lt.length!==et);mt=!0);}catch(ut){ot=!0,ht=ut}finally{try{if(!mt&&nt.return!=null&&(pt=nt.return(),Object(pt)!==pt))return}finally{if(ot)throw ht}}return lt}}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/nonIterableRest.js":function(rt){function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":function(rt){function it(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function nt(at,ht){if(at==null)return{};var dt=et(at,ht),pt,lt;if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(at);for(lt=0;lt<mt.length;lt++)pt=mt[lt],!(ht.indexOf(pt)>=0)&&Object.prototype.propertyIsEnumerable.call(at,pt)&&(dt[pt]=at[pt])}return dt}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":function(rt){function it(s,et){if(s==null)return{};var nt={},at=Object.keys(s),ht,dt;for(dt=0;dt<at.length;dt++)ht=at[dt],!(et.indexOf(ht)>=0)&&(nt[ht]=s[ht]);return nt}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/slicedToArray.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithHoles.js"),nt=s("./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js"),at=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),ht=s("./node_modules/@babel/runtime/helpers/nonIterableRest.js");function dt(pt,lt){return et(pt)||nt(pt,lt)||at(pt,lt)||ht()}rt.exports=dt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),nt=s("./node_modules/@babel/runtime/helpers/iterableToArray.js"),at=s("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),ht=s("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function dt(pt){return et(pt)||nt(pt)||at(pt)||ht()}rt.exports=dt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default;function nt(at,ht){if(et(at)!=="object"||at===null)return at;var dt=at[Symbol.toPrimitive];if(dt!==void 0){var pt=dt.call(at,ht||"default");if(et(pt)!=="object")return pt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ht==="string"?String:Number)(at)}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/typeof.js").default,nt=s("./node_modules/@babel/runtime/helpers/toPrimitive.js");function at(ht){var dt=nt(ht,"string");return et(dt)==="symbol"?dt:String(dt)}rt.exports=at,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(rt){function it(s){"@babel/helpers - typeof";return rt.exports=it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},rt.exports.__esModule=!0,rt.exports.default=rt.exports,it(s)}rt.exports=it,rt.exports.__esModule=!0,rt.exports.default=rt.exports},"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":function(rt,it,s){var et=s("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function nt(at,ht){if(at){if(typeof at=="string")return et(at,ht);var dt=Object.prototype.toString.call(at).slice(8,-1);if(dt==="Object"&&at.constructor&&(dt=at.constructor.name),dt==="Map"||dt==="Set")return Array.from(at);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return et(at,ht)}}rt.exports=nt,rt.exports.__esModule=!0,rt.exports.default=rt.exports}},tt={};function ct(rt){var it=tt[rt];if(it!==void 0)return it.exports;var s=tt[rt]={id:rt,loaded:!1,exports:{}};return _e[rt](s,s.exports,ct),s.loaded=!0,s.exports}(function(){ct.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){ct.nmd=function(rt){return rt.paths=[],rt.children||(rt.children=[]),rt}}();var gt={};return function(){var rt=gt;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var it=ct("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=void 0;var s=it(ct("./packages/logrocket/src/setup.js")),et=(0,s.default)(),nt=et;rt.default=nt}(),gt=gt.default,gt}()})})(build_umd);var build_umdExports=build_umd.exports;const LogRocket=getDefaultExportFromCjs(build_umdExports),ErrorPage=({errorType:a})=>{let o="An error occurred";switch(a){case 404:o="Invitation not found";break;case 500:o="Internal server error";break;case 401:o="You're not auhorized to join";break;default:o="An error occurred";break}return jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsx(Box$1,{children:jsxRuntimeExports.jsx(Typography$1,{variant:"h4",children:o})})})})})})};function getButtonUtilityClass(a){return generateUtilityClass("MuiButton",a)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,ButtonGroupButtonContext=reactExports.createContext(void 0),ButtonGroupButtonContext$1=ButtonGroupButtonContext,_excluded$3=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$3=a=>{const{color:o,disableElevation:_e,fullWidth:tt,size:ct,variant:gt,classes:rt}=a,it={root:["root",gt,`${gt}${capitalize(o)}`,`size${capitalize(ct)}`,`${gt}Size${capitalize(ct)}`,o==="inherit"&&"colorInherit",_e&&"disableElevation",tt&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(ct)}`],endIcon:["endIcon",`iconSize${capitalize(ct)}`]},s=composeClasses(it,getButtonUtilityClass,rt);return _extends({},rt,s)},commonIconStyles=a=>_extends({},a.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},a.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},a.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiButton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],o[`${_e.variant}${capitalize(_e.color)}`],o[`size${capitalize(_e.size)}`],o[`${_e.variant}Size${capitalize(_e.size)}`],_e.color==="inherit"&&o.colorInherit,_e.disableElevation&&o.disableElevation,_e.fullWidth&&o.fullWidth]}})(({theme:a,ownerState:o})=>{var _e,tt;const ct=a.palette.mode==="light"?a.palette.grey[300]:a.palette.grey[800],gt=a.palette.mode==="light"?a.palette.grey.A100:a.palette.grey[700];return _extends({},a.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="text"&&o.color!=="inherit"&&{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="outlined"&&o.color!=="inherit"&&{border:`1px solid ${(a.vars||a).palette[o.color].main}`,backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="contained"&&{backgroundColor:a.vars?a.vars.palette.Button.inheritContainedHoverBg:gt,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},o.variant==="contained"&&o.color!=="inherit"&&{backgroundColor:(a.vars||a).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[o.color].main}}),"&:active":_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},o.variant==="contained"&&{boxShadow:(a.vars||a).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:(a.vars||a).palette.action.disabled},o.variant==="outlined"&&{border:`1px solid ${(a.vars||a).palette.action.disabledBackground}`},o.variant==="contained"&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})},o.variant==="text"&&{padding:"6px 8px"},o.variant==="text"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main},o.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},o.variant==="outlined"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].main,border:a.vars?`1px solid rgba(${a.vars.palette[o.color].mainChannel} / 0.5)`:`1px solid ${alpha(a.palette[o.color].main,.5)}`},o.variant==="contained"&&{color:a.vars?a.vars.palette.text.primary:(_e=(tt=a.palette).getContrastText)==null?void 0:_e.call(tt,a.palette.grey[300]),backgroundColor:a.vars?a.vars.palette.Button.inheritContainedBg:ct,boxShadow:(a.vars||a).shadows[2]},o.variant==="contained"&&o.color!=="inherit"&&{color:(a.vars||a).palette[o.color].contrastText,backgroundColor:(a.vars||a).palette[o.color].main},o.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},o.size==="small"&&o.variant==="text"&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="text"&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="outlined"&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="outlined"&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},o.size==="small"&&o.variant==="contained"&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},o.size==="large"&&o.variant==="contained"&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})},({ownerState:a})=>a.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.startIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},a.size==="small"&&{marginLeft:-2},commonIconStyles(a))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.endIcon,o[`iconSize${capitalize(_e.size)}`]]}})(({ownerState:a})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},a.size==="small"&&{marginRight:-2},commonIconStyles(a))),Button=reactExports.forwardRef(function(o,_e){const tt=reactExports.useContext(ButtonGroupContext$1),ct=reactExports.useContext(ButtonGroupButtonContext$1),gt=resolveProps(tt,o),rt=useThemeProps({props:gt,name:"MuiButton"}),{children:it,color:s="primary",component:et="button",className:nt,disabled:at=!1,disableElevation:ht=!1,disableFocusRipple:dt=!1,endIcon:pt,focusVisibleClassName:lt,fullWidth:mt=!1,size:ot="medium",startIcon:ut,type:ft,variant:bt="text"}=rt,vt=_objectWithoutPropertiesLoose(rt,_excluded$3),yt=_extends({},rt,{color:s,component:et,disabled:at,disableElevation:ht,disableFocusRipple:dt,fullWidth:mt,size:ot,type:ft,variant:bt}),At=useUtilityClasses$3(yt),Nt=ut&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:At.startIcon,ownerState:yt,children:ut}),St=pt&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:At.endIcon,ownerState:yt,children:pt}),wt=ct||"";return jsxRuntimeExports.jsxs(ButtonRoot,_extends({ownerState:yt,className:clsx(tt.className,At.root,nt,wt),component:et,disabled:at,focusRipple:!dt,focusVisibleClassName:clsx(At.focusVisible,lt),ref:_e,type:ft},vt,{classes:At,children:[Nt,it,St]}))}),Button$1=Button;function getLinkUtilityClass(a){return generateUtilityClass("MuiLink",a)}const linkClasses=generateUtilityClasses("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),linkClasses$1=linkClasses,colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=a=>colorTransformations[a]||a,getTextDecoration=({theme:a,ownerState:o})=>{const _e=transformDeprecatedColors(o.color),tt=getPath(a,`palette.${_e}`,!1)||o.color,ct=getPath(a,`palette.${_e}Channel`);return"vars"in a&&ct?`rgba(${ct} / 0.4)`:alpha(tt,.4)},getTextDecoration$1=getTextDecoration,_excluded$2=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],useUtilityClasses$2=a=>{const{classes:o,component:_e,focusVisible:tt,underline:ct}=a,gt={root:["root",`underline${capitalize(ct)}`,_e==="button"&&"button",tt&&"focusVisible"]};return composeClasses(gt,getLinkUtilityClass,o)},LinkRoot=styled$1(Typography$1,{name:"MuiLink",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[`underline${capitalize(_e.underline)}`],_e.component==="button"&&o.button]}})(({theme:a,ownerState:o})=>_extends({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&_extends({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:getTextDecoration$1({theme:a,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${linkClasses$1.focusVisible}`]:{outline:"auto"}})),Link=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiLink"}),{className:ct,color:gt="primary",component:rt="a",onBlur:it,onFocus:s,TypographyClasses:et,underline:nt="always",variant:at="inherit",sx:ht}=tt,dt=_objectWithoutPropertiesLoose(tt,_excluded$2),{isFocusVisibleRef:pt,onBlur:lt,onFocus:mt,ref:ot}=useIsFocusVisible(),[ut,ft]=reactExports.useState(!1),bt=useForkRef(_e,ot),vt=St=>{lt(St),pt.current===!1&&ft(!1),it&&it(St)},yt=St=>{mt(St),pt.current===!0&&ft(!0),s&&s(St)},At=_extends({},tt,{color:gt,component:rt,focusVisible:ut,underline:nt,variant:at}),Nt=useUtilityClasses$2(At);return jsxRuntimeExports.jsx(LinkRoot,_extends({color:gt,className:clsx(Nt.root,ct),classes:et,component:rt,onBlur:vt,onFocus:yt,ref:bt,ownerState:At,variant:at,sx:[...Object.keys(colorTransformations).includes(gt)?[]:[{color:gt}],...Array.isArray(ht)?ht:[ht]]},dt))}),Link$1=Link,CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(a){return generateUtilityClass("MuiCheckbox",a)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),checkboxClasses$1=checkboxClasses,_excluded$1=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$1=a=>{const{classes:o,indeterminate:_e,color:tt,size:ct}=a,gt={root:["root",_e&&"indeterminate",`color${capitalize(tt)}`,`size${capitalize(ct)}`]},rt=composeClasses(gt,getCheckboxUtilityClass,o);return _extends({},o,rt)},CheckboxRoot=styled$1(SwitchBase$1,{shouldForwardProp:a=>rootShouldForwardProp(a)||a==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,_e.indeterminate&&o.indeterminate,_e.color!=="default"&&o[`color${capitalize(_e.color)}`]]}})(({theme:a,ownerState:o})=>_extends({color:(a.vars||a).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?`rgba(${o.color==="default"?a.vars.palette.action.activeChannel:a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:alpha(o.color==="default"?a.palette.action.active:a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${checkboxClasses$1.checked}, &.${checkboxClasses$1.indeterminate}`]:{color:(a.vars||a).palette[o.color].main},[`&.${checkboxClasses$1.disabled}`]:{color:(a.vars||a).palette.action.disabled}})),defaultCheckedIcon=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(o,_e){var tt,ct;const gt=useThemeProps({props:o,name:"MuiCheckbox"}),{checkedIcon:rt=defaultCheckedIcon,color:it="primary",icon:s=defaultIcon,indeterminate:et=!1,indeterminateIcon:nt=defaultIndeterminateIcon,inputProps:at,size:ht="medium",className:dt}=gt,pt=_objectWithoutPropertiesLoose(gt,_excluded$1),lt=et?nt:s,mt=et?nt:rt,ot=_extends({},gt,{color:it,indeterminate:et,size:ht}),ut=useUtilityClasses$1(ot);return jsxRuntimeExports.jsx(CheckboxRoot,_extends({type:"checkbox",inputProps:_extends({"data-indeterminate":et},at),icon:reactExports.cloneElement(lt,{fontSize:(tt=lt.props.fontSize)!=null?tt:ht}),checkedIcon:reactExports.cloneElement(mt,{fontSize:(ct=mt.props.fontSize)!=null?ct:ht}),ownerState:ot,ref:_e,className:clsx(ut.root,dt)},pt,{classes:ut}))}),Checkbox$1=Checkbox,OptIn=({id:a,checked:o,labels:_e,link:tt,onChange:ct})=>jsxRuntimeExports.jsx(FormControlLabel$1,{required:!0,control:jsxRuntimeExports.jsx(Checkbox$1,{id:`${a}`,"data-testid":`${a}`,checked:o,onChange:()=>ct(a),inputProps:{"aria-label":_e.aria}}),label:jsxRuntimeExports.jsxs(Typography$1,{variant:"body1",component:"span",children:[_e.prefix,jsxRuntimeExports.jsx(Link$1,{target:"_blank",href:tt,color:"info.main",children:_e.link})]}),sx:{".MuiFormControlLabel-asterisk":{display:"none"}}}),OptInList=({labels:a,optIns:o,onSubmit:_e})=>{const[tt,ct]=reactExports.useState(Object.assign({},...o.map(rt=>({[rt.id]:!1})))),gt=rt=>{ct({...tt,[rt]:!tt[rt]})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FormGroup$1,{children:o.map(rt=>jsxRuntimeExports.jsx(OptIn,{id:rt.id,checked:tt[rt.id],onChange:gt,labels:rt.labels,link:rt.link},rt.id))}),jsxRuntimeExports.jsx(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:!Object.values(tt).every(rt=>rt),onClick:_e,children:a.submit})})]})};function getSkeletonUtilityClass(a){return generateUtilityClass("MuiSkeleton",a)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const _excluded=["animation","className","component","height","style","variant","width"];let _=a=>a,_t,_t2,_t3,_t4;const useUtilityClasses=a=>{const{classes:o,variant:_e,animation:tt,hasChildren:ct,width:gt,height:rt}=a;return composeClasses({root:["root",_e,tt,ct&&"withChildren",ct&&!gt&&"fitContent",ct&&!rt&&"heightAuto"]},getSkeletonUtilityClass,o)},pulseKeyframe=keyframes(_t||(_t=_`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),waveKeyframe=keyframes(_t2||(_t2=_`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),SkeletonRoot=styled$1("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:_e}=a;return[o.root,o[_e.variant],_e.animation!==!1&&o[_e.animation],_e.hasChildren&&o.withChildren,_e.hasChildren&&!_e.width&&o.fitContent,_e.hasChildren&&!_e.height&&o.heightAuto]}})(({theme:a,ownerState:o})=>{const _e=getUnit(a.shape.borderRadius)||"px",tt=toUnitless(a.shape.borderRadius);return _extends({display:"block",backgroundColor:a.vars?a.vars.palette.Skeleton.bg:alpha(a.palette.text.primary,a.palette.mode==="light"?.11:.13),height:"1.2em"},o.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${tt}${_e}/${Math.round(tt/.6*10)/10}${_e}`,"&:empty:before":{content:'"\\00a0"'}},o.variant==="circular"&&{borderRadius:"50%"},o.variant==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius},o.hasChildren&&{"& > *":{visibility:"hidden"}},o.hasChildren&&!o.width&&{maxWidth:"fit-content"},o.hasChildren&&!o.height&&{height:"auto"})},({ownerState:a})=>a.animation==="pulse"&&css(_t3||(_t3=_`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),pulseKeyframe),({ownerState:a,theme:o})=>a.animation==="wave"&&css(_t4||(_t4=_`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),waveKeyframe,(o.vars||o).palette.action.hover)),Skeleton=reactExports.forwardRef(function(o,_e){const tt=useThemeProps({props:o,name:"MuiSkeleton"}),{animation:ct="pulse",className:gt,component:rt="span",height:it,style:s,variant:et="text",width:nt}=tt,at=_objectWithoutPropertiesLoose(tt,_excluded),ht=_extends({},tt,{animation:ct,component:rt,variant:et,hasChildren:!!at.children}),dt=useUtilityClasses(ht);return jsxRuntimeExports.jsx(SkeletonRoot,_extends({as:rt,ref:_e,className:clsx(dt.root,gt),ownerState:ht},at,{style:_extends({width:nt,height:it},s)}))}),Skeleton$1=Skeleton,ROOM_THEME_OPTIONS={components:{MuiChip:{variants:[{props:{},style:{color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"}}}]},MuiCircularProgress:{variants:[{props:{},style:{color:"#F7F7F8"}}]},MuiIconButton:{variants:[{props:{},style:{padding:4,margin:2,color:"#F7F7F8",backgroundColor:"#111313",borderRadius:"4px",opacity:"75%",":hover":{backgroundColor:"#1D1F20",opacity:"100%"},":disabled":{color:"#7A8085",backgroundColor:"#CACCCE",opacity:"75%"}}}]},MuiSwitch:{styleOverrides:{colorPrimary:{"&.Mui-checked":{color:"#17821A"}},track:{".Mui-checked.Mui-checked + &":{backgroundColor:"#17821A"}}}}}},VIDEO_ROUNDED_CORNERS={borderRadius:"4px",overflow:"hidden"},COMPONENT_NAME$2="Settings",Settings=a=>{var Dt,Gt,nn,zt,Ft,un;const o=useThemeProps({props:a,name:COMPONENT_NAME$2}),{userMediaStreamRequest:_e,displayMediaStreamRequest:tt,userMediaDevices:ct,selectedAudioIn:gt,setSelectedAudioIn:rt,selectedVideoIn:it,setSelectedVideoIn:s,createStreamOptions:et,grabbing:nt,localStream:at,cameraError:ht,streamAudioEnabled:dt,setStreamAudioEnabled:pt,streamVideoEnabled:lt,setStreamVideoEnabled:mt,screenShareStream:ot,setScreenShareStream:ut,handleBack:ft,toggleReady:bt,backButtonText:vt="Back",selectAtLeastOneMediaText:yt="Please select at least one media",cameraErrorText:At="Please check a device is available and not already grabbed by another software.",readyButtonText:Nt="Enter",selectDeviceHelperText:St="Please check what you want to share before entering the room.",shareScreenText:wt="Please click here to share your screen"}=o,Mt=()=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$2}|shareScreen calls createDisplayMediaStream`),apiRTC_minExports.Stream.createDisplayMediaStream({},!1).then(vn=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME$2}|createDisplayMediaStream`,vn),ut(vn)}).catch(vn=>{console.error(`${COMPONENT_NAME$2}|createDisplayMediaStream error`,vn)})},Ht=reactExports.useMemo(()=>{var vn,yn;return[..._e&&!dt&&!lt?[yt]:[],...(dt||lt)&&ht?[At]:[],...(vn=et.constraints)!=null&&vn.audio&&!nt&&at&&!at.hasAudio()?["Failed to grab audio"]:[],...(yn=et.constraints)!=null&&yn.video&&!nt&&at&&!at.hasVideo()?["Failed to grab video: Please check a device is available and not already grabbed by another software"]:[]]},[at,nt,ht,et]),Ot=reactExports.useDeferredValue(Ht);return jsxRuntimeExports.jsxs(Stack$1,{direction:"column",spacing:1,children:[_e&&jsxRuntimeExports.jsxs(Stack$1,{sx:{mt:1},direction:{xs:"column"},alignItems:"center",justifyContent:"center",useFlexGap:!0,flexWrap:"wrap",spacing:1,children:[jsxRuntimeExports.jsx(Box$1,{sx:{width:"100%",paddingTop:"75%",position:"relative","& .MuiBox-root":{position:"absolute",height:"100%",maxWidth:"100%"}},children:at?jsxRuntimeExports.jsx(K,{sx:{top:0,left:0,bottom:0,right:0,maxWidth:{xs:"100%",sm:"100%"},...!at.hasVideo()&&{position:"absolute",inset:0,borderRadius:"4px",backgroundColor:"#CACCCE"}},stream:at,muted:!0,controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[at.hasAudio()&&jsxRuntimeExports.jsx(j$1,{}),at.hasVideo()&&jsxRuntimeExports.jsx(Z,{})]}),children:at.hasVideo()?jsxRuntimeExports.jsx(X,{style:{height:"100%",...VIDEO_ROUNDED_CORNERS},"data-testid":"local-video"}):jsxRuntimeExports.jsx(F,{"data-testid":"local-audio"})}):jsxRuntimeExports.jsx(Skeleton$1,{variant:"rectangular",width:"100%",height:"100%",sx:{position:"absolute",top:0,left:0}})}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((Dt=_e.constraints)!=null&&Dt.audio),onClick:()=>pt(!dt),children:jsxRuntimeExports.jsx(Icon$1,{children:(Gt=et.constraints)!=null&&Gt.audio?"mic_on":"mic_off"})}),jsxRuntimeExports.jsx(C,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"audio-in",size:"small",disabled:!((nn=et.constraints)!=null&&nn.audio),devices:ct.audioinput,selectedDevice:gt,setSelectedDevice:rt})]}),jsxRuntimeExports.jsxs(Box$1,{sx:{minWidth:"120px",width:"100%",display:"flex"},children:[jsxRuntimeExports.jsx(Button$1,{sx:{minWidth:0,width:"3em",height:"3em",display:"flex",justifyContent:"center",alignItems:"center",border:"solid 1px rgba(0, 0, 0, 0.23)",borderRadius:"4px",boxSizing:"border-box",flexShrink:0,color:"black"},disabled:!((zt=_e.constraints)!=null&&zt.video),onClick:()=>{mt(!lt)},children:jsxRuntimeExports.jsx(Icon$1,{children:(Ft=et.constraints)!=null&&Ft.video?"videocam_on":"videocam_off"})}),jsxRuntimeExports.jsx(C,{sx:{marginLeft:"0.25em",minWidth:"120px",flexGrow:"1"},id:"video-in",size:"small",disabled:!((un=et.constraints)!=null&&un.video),devices:ct.videoinput,selectedDevice:it,setSelectedDevice:s})]})]}),tt&&jsxRuntimeExports.jsxs(Stack$1,{mt:1,alignItems:"center",spacing:1,children:[ot&&jsxRuntimeExports.jsx(X,{style:{display:"flex",maxWidth:"100%",...VIDEO_ROUNDED_CORNERS},"data-testid":"screen-share-video",stream:ot}),!ot&&jsxRuntimeExports.jsx(Button$1,{variant:"outlined",color:"primary",onClick:Mt,children:wt})]}),Ot.length!==0&&jsxRuntimeExports.jsx(Stack$1,{direction:"column",justifyContent:"center",alignItems:"center",spacing:1,children:Ot.map((vn,yn)=>jsxRuntimeExports.jsx(Alert$1,{variant:"outlined",severity:"error",children:vn},yn))}),jsxRuntimeExports.jsx(Alert$1,{sx:{mt:1},severity:"info",children:St}),jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"end",mt:1},children:[jsxRuntimeExports.jsx(Button$1,{onClick:ft,children:vt}),jsxRuntimeExports.jsx(Button$1,{variant:"outlined",disabled:Ot.length!==0||tt&&!ot||_e&&!at,onClick:bt,children:Nt})]})]})};function useMediaQueryOld(a,o,_e,tt,ct){const[gt,rt]=reactExports.useState(()=>ct&&_e?_e(a).matches:tt?tt(a).matches:o);return useEnhancedEffect$1(()=>{let it=!0;if(!_e)return;const s=_e(a),et=()=>{it&&rt(s.matches)};return et(),s.addListener(et),()=>{it=!1,s.removeListener(et)}},[a,_e]),gt}const maybeReactUseSyncExternalStore=React$2["useSyncExternalStore"];function useMediaQueryNew(a,o,_e,tt,ct){const gt=reactExports.useCallback(()=>o,[o]),rt=reactExports.useMemo(()=>{if(ct&&_e)return()=>_e(a).matches;if(tt!==null){const{matches:nt}=tt(a);return()=>nt}return gt},[gt,a,tt,ct,_e]),[it,s]=reactExports.useMemo(()=>{if(_e===null)return[gt,()=>()=>{}];const nt=_e(a);return[()=>nt.matches,at=>(nt.addListener(at),()=>{nt.removeListener(at)})]},[gt,_e,a]);return maybeReactUseSyncExternalStore(s,it,rt)}function useMediaQuery(a,o={}){const _e=useTheme$3(),tt=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:ct=!1,matchMedia:gt=tt?window.matchMedia:null,ssrMatchMedia:rt=null,noSsr:it=!1}=getThemeProps({name:"MuiUseMediaQuery",props:o,theme:_e});let s=typeof a=="function"?a(_e):a;return s=s.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(s,ct,gt,rt,it)}const TextStepper=({activeStep:a,children:o,header:_e,sx:tt={}})=>jsxRuntimeExports.jsxs(Box$1,{sx:{...tt},children:[jsxRuntimeExports.jsxs(Box$1,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_e,jsxRuntimeExports.jsxs(Typography$1,{sx:{fontWeight:500},children:[a+1,"/",React$1.Children.toArray(o).length]})]}),jsxRuntimeExports.jsx(Box$1,{sx:{padding:"16px 16px 0 16px"},children:React$1.Children.toArray(o)[a]})]}),video_sizing={height:"100%",width:"100%"},getName=a=>{var tt,ct;const o=(tt=a.getContact())==null?void 0:tt.getUserData().get("firstName"),_e=(ct=a.getContact())==null?void 0:ct.getUserData().get("lastName");return!o&&!_e?a.isScreensharing()?"screen":void 0:`${o||""} ${_e||""}${a.isScreensharing()?"-screen":""}`},COMPONENT_NAME$1="Room";function Room(a){const o=useThemeProps({props:a,name:COMPONENT_NAME$1}),{conversation:_e,facingMode:tt,localStream:ct,publishedStreams:gt,subscribedStreams:rt}=o,it=useMediaQuery(ut=>ut.breakpoints.down("xs")),[s,et]=reactExports.useState();reactExports.useEffect(()=>{if(_e){const ut=bt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|pointerSharingEnabled`,bt)};_e.on("pointerSharingEnabled",ut);const ft=bt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|pointerLocationChanged`,bt),ht(vt=>({...vt,[bt.source.contactId]:bt.data})),setTimeout(()=>{ht(vt=>(delete vt[bt.source.contactId],{pointer:vt}))},3e3)};return _e.on("pointerLocationChanged",ft),_e.enablePointerSharing(!0),()=>{_e.removeListener("pointerSharingEnabled",ut),_e.removeListener("pointerLocationChanged",ft)}}},[_e]),reactExports.useEffect(()=>{const ut=rt.find(ft=>ft.isScreensharing());if(ut){globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream screenShared`,ut),et(ut||void 0);return}if(tt==="environment"){globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream localStream`,ct),et(ct);return}rt.length===0?(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream localStream`,ct),et(ct)):(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|useEffect setSelectedStream undefined`),et(void 0))},[ct,rt,tt]);const nt=reactExports.useCallback((ut,ft)=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME$1}|onStreamMouseDown`,ut.getId(),ft),_e&&_e.sendPointerLocation({streamId:ut.getId(),contactId:ut.getContact()?ut.getContact().getId():apiRTC.userAgentInstance.userId},0,0,{top:`${Math.round(ft.nativeEvent.offsetY*100/ft.nativeEvent.target.offsetHeight)}%`,left:`${Math.round(ft.nativeEvent.offsetX*100/ft.nativeEvent.target.offsetWidth)}%`})},[_e]),[at,ht]=reactExports.useState({}),dt=(ut,ft,bt)=>jsxRuntimeExports.jsx(K,{id:`subscribed-stream-${ft}`,sx:{...ut.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:ut,name:getName(ut),controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ut.hasAudio()&&jsxRuntimeExports.jsx(_$1,{size:bt}),!ut.isScreensharing()&&jsxRuntimeExports.jsx(j$1,{size:bt,disabled:!0}),ut.hasVideo()&&!ut.isScreensharing()&&jsxRuntimeExports.jsx(Z,{size:bt,disabled:!0})]}),onClick:()=>et(vt=>vt===ut?void 0:ut),children:ut.hasVideo()?jsxRuntimeExports.jsx(X,{sx:video_sizing,style:{...video_sizing,objectFit:ut.isScreensharing()?"contain":at[ut.getContact().getId()]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:at[ut.getContact().getId()],onMouseDown:vt=>{nt(ut,vt)}}):jsxRuntimeExports.jsx(F,{})},ft),pt=(ut,ft,bt)=>jsxRuntimeExports.jsx(K,{id:`published-stream-${ft}`,sx:{...ut.hasVideo()?video_sizing:{backgroundColor:"grey"}},stream:ut,muted:!0,controls:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!ut.isScreensharing()&&jsxRuntimeExports.jsx(j$1,{size:bt}),ut.hasVideo()&&!ut.isScreensharing()&&jsxRuntimeExports.jsx(Z,{size:bt})]}),onClick:()=>et(vt=>vt===ut?void 0:ut),children:ut.hasVideo()?jsxRuntimeExports.jsx(X,{sx:video_sizing,style:{...video_sizing,objectFit:at[apiRTC.userAgentInstance.userId]?"fill":"cover",...VIDEO_ROUNDED_CORNERS},pointer:at[apiRTC.userAgentInstance.userId],onMouseDown:vt=>{nt(ut,vt)}}):jsxRuntimeExports.jsx(F,{})},ft),lt=gt.length+rt.length,mt=s?lt-1:gt.length,ot=mt>1&&it?"small":"medium";return jsxRuntimeExports.jsxs(Box$1,{sx:{position:"relative",height:"99vh",width:"100vw",maxWidth:"100%"},children:[jsxRuntimeExports.jsx(S$1,{sx:{height:"100%",width:"100%"},children:s?s.isRemote?dt(s,0,"large"):pt(s,0,"large"):rt.map((ut,ft)=>dt(ut,ft,rt.length>1&&it?"medium":"large"))}),jsxRuntimeExports.jsx(Stack$1,{direction:"row",sx:{position:"absolute",bottom:4,left:4,opacity:.9,height:{xs:"20%",sm:"32%",md:"32%",lg:"32%"},width:{xs:`${Math.min(mt*32,80)}%`,sm:`${Math.min(mt*20,80)}%`}},children:s?rt.filter(ut=>ut!==s).map((ut,ft)=>dt(ut,ft,ot)).concat(gt.filter(ut=>ut!==s).map((ut,ft)=>pt(ut,ft,ot))):gt.map((ut,ft)=>pt(ut,ft,ot))})]})}const App$1="",logo=""+new URL("apizee-6b3e8e8d.svg",import.meta.url).href;var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(a){var o=a.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _e=a.indexOf("=");_e===-1&&(_e=o);var tt=_e===o?0:4-_e%4;return[_e,tt]}function byteLength(a){var o=getLens(a),_e=o[0],tt=o[1];return(_e+tt)*3/4-tt}function _byteLength(a,o,_e){return(o+_e)*3/4-_e}function toByteArray(a){var o,_e=getLens(a),tt=_e[0],ct=_e[1],gt=new Arr(_byteLength(a,tt,ct)),rt=0,it=ct>0?tt-4:tt,s;for(s=0;s<it;s+=4)o=revLookup[a.charCodeAt(s)]<<18|revLookup[a.charCodeAt(s+1)]<<12|revLookup[a.charCodeAt(s+2)]<<6|revLookup[a.charCodeAt(s+3)],gt[rt++]=o>>16&255,gt[rt++]=o>>8&255,gt[rt++]=o&255;return ct===2&&(o=revLookup[a.charCodeAt(s)]<<2|revLookup[a.charCodeAt(s+1)]>>4,gt[rt++]=o&255),ct===1&&(o=revLookup[a.charCodeAt(s)]<<10|revLookup[a.charCodeAt(s+1)]<<4|revLookup[a.charCodeAt(s+2)]>>2,gt[rt++]=o>>8&255,gt[rt++]=o&255),gt}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,o,_e){for(var tt,ct=[],gt=o;gt<_e;gt+=3)tt=(a[gt]<<16&16711680)+(a[gt+1]<<8&65280)+(a[gt+2]&255),ct.push(tripletToBase64(tt));return ct.join("")}function fromByteArray(a){for(var o,_e=a.length,tt=_e%3,ct=[],gt=16383,rt=0,it=_e-tt;rt<it;rt+=gt)ct.push(encodeChunk(a,rt,rt+gt>it?it:rt+gt));return tt===1?(o=a[_e-1],ct.push(lookup[o>>2]+lookup[o<<4&63]+"==")):tt===2&&(o=(a[_e-2]<<8)+a[_e-1],ct.push(lookup[o>>10]+lookup[o>>4&63]+lookup[o<<2&63]+"=")),ct.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(a){return typeof a=="object"&&a.buffer&&a.buffer.constructor===ArrayBuffer});var createOutputMethod=function(a,o){return function(_e){return new Sha256(o,!0).update(_e)[a]()}},createMethod=function(a){var o=createOutputMethod("hex",a);NODE_JS&&(o=nodeWrap(o,a)),o.create=function(){return new Sha256(a)},o.update=function(ct){return o.create().update(ct)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createOutputMethod(tt,a)}return o},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(a){if(typeof a=="string")return crypto.createHash(algorithm).update(a,"utf8").digest("hex");if(a==null)throw new Error(ERROR);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),Array.isArray(a)||ArrayBuffer.isView(a)||a.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(a)).digest("hex"):method(a)};return nodeMethod},createHmacOutputMethod=function(a,o){return function(_e,tt){return new HmacSha256(_e,o,!0).update(tt)[a]()}},createHmacMethod=function(a){var o=createHmacOutputMethod("hex",a);o.create=function(ct){return new HmacSha256(ct,a)},o.update=function(ct,gt){return o.create(ct).update(gt)};for(var _e=0;_e<OUTPUT_TYPES.length;++_e){var tt=OUTPUT_TYPES[_e];o[tt]=createHmacOutputMethod(tt,a)}return o};function Sha256(a,o){o?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}Sha256.prototype.update=function(a){if(!this.finalized){var o,_e=typeof a;if(_e!=="string"){if(_e==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);o=!0}for(var tt,ct=0,gt,rt=a.length,it=this.blocks;ct<rt;){if(this.hashed&&(this.hashed=!1,it[0]=this.block,it[16]=it[1]=it[2]=it[3]=it[4]=it[5]=it[6]=it[7]=it[8]=it[9]=it[10]=it[11]=it[12]=it[13]=it[14]=it[15]=0),o)for(gt=this.start;ct<rt&&gt<64;++ct)it[gt>>2]|=a[ct]<<SHIFT[gt++&3];else for(gt=this.start;ct<rt&&gt<64;++ct)tt=a.charCodeAt(ct),tt<128?it[gt>>2]|=tt<<SHIFT[gt++&3]:tt<2048?(it[gt>>2]|=(192|tt>>6)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]):tt<55296||tt>=57344?(it[gt>>2]|=(224|tt>>12)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt>>6&63)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]):(tt=65536+((tt&1023)<<10|a.charCodeAt(++ct)&1023),it[gt>>2]|=(240|tt>>18)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt>>12&63)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt>>6&63)<<SHIFT[gt++&3],it[gt>>2]|=(128|tt&63)<<SHIFT[gt++&3]);this.lastByteIndex=gt,this.bytes+=gt-this.start,gt>=64?(this.block=it[16],this.start=gt-64,this.hash(),this.hashed=!0):this.start=gt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,o=this.lastByteIndex;a[16]=this.block,a[o>>2]|=EXTRA[o&3],this.block=a[16],o>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,it=this.h7,s=this.blocks,et,nt,at,ht,dt,pt,lt,mt,ot,ut,ft;for(et=16;et<64;++et)dt=s[et-15],nt=(dt>>>7|dt<<25)^(dt>>>18|dt<<14)^dt>>>3,dt=s[et-2],at=(dt>>>17|dt<<15)^(dt>>>19|dt<<13)^dt>>>10,s[et]=s[et-16]+nt+s[et-7]+at<<0;for(ft=o&_e,et=0;et<64;et+=4)this.first?(this.is224?(mt=300032,dt=s[0]-1413257819,it=dt-150054599<<0,tt=dt+24177077<<0):(mt=704751109,dt=s[0]-210244248,it=dt-1521486534<<0,tt=dt+143694565<<0),this.first=!1):(nt=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),at=(ct>>>6|ct<<26)^(ct>>>11|ct<<21)^(ct>>>25|ct<<7),mt=a&o,ht=mt^a&_e^ft,lt=ct&gt^~ct&rt,dt=it+at+lt+K[et]+s[et],pt=nt+ht,it=tt+dt<<0,tt=dt+pt<<0),nt=(tt>>>2|tt<<30)^(tt>>>13|tt<<19)^(tt>>>22|tt<<10),at=(it>>>6|it<<26)^(it>>>11|it<<21)^(it>>>25|it<<7),ot=tt&a,ht=ot^tt&o^mt,lt=it&ct^~it&gt,dt=rt+at+lt+K[et+1]+s[et+1],pt=nt+ht,rt=_e+dt<<0,_e=dt+pt<<0,nt=(_e>>>2|_e<<30)^(_e>>>13|_e<<19)^(_e>>>22|_e<<10),at=(rt>>>6|rt<<26)^(rt>>>11|rt<<21)^(rt>>>25|rt<<7),ut=_e&tt,ht=ut^_e&a^ot,lt=rt&it^~rt&ct,dt=gt+at+lt+K[et+2]+s[et+2],pt=nt+ht,gt=o+dt<<0,o=dt+pt<<0,nt=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),at=(gt>>>6|gt<<26)^(gt>>>11|gt<<21)^(gt>>>25|gt<<7),ft=o&_e,ht=ft^o&tt^ut,lt=gt&rt^~gt&it,dt=ct+at+lt+K[et+3]+s[et+3],pt=nt+ht,ct=a+dt<<0,a=dt+pt<<0;this.h0=this.h0+a<<0,this.h1=this.h1+o<<0,this.h2=this.h2+_e<<0,this.h3=this.h3+tt<<0,this.h4=this.h4+ct<<0,this.h5=this.h5+gt<<0,this.h6=this.h6+rt<<0,this.h7=this.h7+it<<0},Sha256.prototype.hex=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,it=this.h7,s=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]+HEX_CHARS[tt>>28&15]+HEX_CHARS[tt>>24&15]+HEX_CHARS[tt>>20&15]+HEX_CHARS[tt>>16&15]+HEX_CHARS[tt>>12&15]+HEX_CHARS[tt>>8&15]+HEX_CHARS[tt>>4&15]+HEX_CHARS[tt&15]+HEX_CHARS[ct>>28&15]+HEX_CHARS[ct>>24&15]+HEX_CHARS[ct>>20&15]+HEX_CHARS[ct>>16&15]+HEX_CHARS[ct>>12&15]+HEX_CHARS[ct>>8&15]+HEX_CHARS[ct>>4&15]+HEX_CHARS[ct&15]+HEX_CHARS[gt>>28&15]+HEX_CHARS[gt>>24&15]+HEX_CHARS[gt>>20&15]+HEX_CHARS[gt>>16&15]+HEX_CHARS[gt>>12&15]+HEX_CHARS[gt>>8&15]+HEX_CHARS[gt>>4&15]+HEX_CHARS[gt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15];return this.is224||(s+=HEX_CHARS[it>>28&15]+HEX_CHARS[it>>24&15]+HEX_CHARS[it>>20&15]+HEX_CHARS[it>>16&15]+HEX_CHARS[it>>12&15]+HEX_CHARS[it>>8&15]+HEX_CHARS[it>>4&15]+HEX_CHARS[it&15]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var a=this.h0,o=this.h1,_e=this.h2,tt=this.h3,ct=this.h4,gt=this.h5,rt=this.h6,it=this.h7,s=[a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,_e>>24&255,_e>>16&255,_e>>8&255,_e&255,tt>>24&255,tt>>16&255,tt>>8&255,tt&255,ct>>24&255,ct>>16&255,ct>>8&255,ct&255,gt>>24&255,gt>>16&255,gt>>8&255,gt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255];return this.is224||s.push(it>>24&255,it>>16&255,it>>8&255,it&255),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),o=new DataView(a);return o.setUint32(0,this.h0),o.setUint32(4,this.h1),o.setUint32(8,this.h2),o.setUint32(12,this.h3),o.setUint32(16,this.h4),o.setUint32(20,this.h5),o.setUint32(24,this.h6),this.is224||o.setUint32(28,this.h7),a};function HmacSha256(a,o,_e){var tt,ct=typeof a;if(ct==="string"){var gt=[],rt=a.length,it=0,s;for(tt=0;tt<rt;++tt)s=a.charCodeAt(tt),s<128?gt[it++]=s:s<2048?(gt[it++]=192|s>>6,gt[it++]=128|s&63):s<55296||s>=57344?(gt[it++]=224|s>>12,gt[it++]=128|s>>6&63,gt[it++]=128|s&63):(s=65536+((s&1023)<<10|a.charCodeAt(++tt)&1023),gt[it++]=240|s>>18,gt[it++]=128|s>>12&63,gt[it++]=128|s>>6&63,gt[it++]=128|s&63);a=gt}else if(ct==="object"){if(a===null)throw new Error(ERROR);if(ARRAY_BUFFER&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(a)))throw new Error(ERROR)}else throw new Error(ERROR);a.length>64&&(a=new Sha256(o,!0).update(a).array());var et=[],nt=[];for(tt=0;tt<64;++tt){var at=a[tt]||0;et[tt]=92^at,nt[tt]=54^at}Sha256.call(this,o,_e),this.update(nt),this.oKeyPad=et,this.inner=!0,this.sharedMemory=_e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var a=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(a),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(a){if(!(this instanceof Keycloak))return new Keycloak(a);for(var o=this,_e,tt=[],ct,gt={enable:!0,callbackList:[],interval:5},rt=document.getElementsByTagName("script"),it=0;it<rt.length;it++)(rt[it].src.indexOf("keycloak.js")!==-1||rt[it].src.indexOf("keycloak.min.js")!==-1)&&rt[it].src.indexOf("version=")!==-1&&(o.iframeVersion=rt[it].src.substring(rt[it].src.indexOf("version=")+8).split("&")[0]);var s=!0,et=yn(console.info),nt=yn(console.warn);o.init=function(cn){o.authenticated=!1,ct=vn();var gn=["default","cordova","cordova-native"];if(cn&&gn.indexOf(cn.adapter)>-1?_e=zt(cn.adapter):cn&&typeof cn.adapter=="object"?_e=cn.adapter:window.Cordova||window.cordova?_e=zt("cordova"):_e=zt(),cn){if(typeof cn.useNonce<"u"&&(s=cn.useNonce),typeof cn.checkLoginIframe<"u"&&(gt.enable=cn.checkLoginIframe),cn.checkLoginIframeInterval&&(gt.interval=cn.checkLoginIframeInterval),cn.onLoad==="login-required"&&(o.loginRequired=!0),cn.responseMode)if(cn.responseMode==="query"||cn.responseMode==="fragment")o.responseMode=cn.responseMode;else throw"Invalid value for responseMode";if(cn.flow){switch(cn.flow){case"standard":o.responseType="code";break;case"implicit":o.responseType="id_token token";break;case"hybrid":o.responseType="code id_token token";break;default:throw"Invalid value for flow"}o.flow=cn.flow}if(cn.timeSkew!=null&&(o.timeSkew=cn.timeSkew),cn.redirectUri&&(o.redirectUri=cn.redirectUri),cn.silentCheckSsoRedirectUri&&(o.silentCheckSsoRedirectUri=cn.silentCheckSsoRedirectUri),typeof cn.silentCheckSsoFallback=="boolean"?o.silentCheckSsoFallback=cn.silentCheckSsoFallback:o.silentCheckSsoFallback=!0,cn.pkceMethod){if(cn.pkceMethod!=="S256")throw"Invalid value for pkceMethod";o.pkceMethod=cn.pkceMethod}typeof cn.enableLogging=="boolean"?o.enableLogging=cn.enableLogging:o.enableLogging=!1,typeof cn.scope=="string"&&(o.scope=cn.scope),typeof cn.messageReceiveTimeout=="number"&&cn.messageReceiveTimeout>0?o.messageReceiveTimeout=cn.messageReceiveTimeout:o.messageReceiveTimeout=1e4}o.responseMode||(o.responseMode="fragment"),o.responseType||(o.responseType="code",o.flow="standard");var Cn=Mt(),fn=Mt();fn.promise.then(function(){o.onReady&&o.onReady(o.authenticated),Cn.setSuccess(o.authenticated)}).catch(function(Rn){Cn.setError(Rn)});var Tn=ft();function On(){var Rn=function(xn){xn||(kn.prompt="none"),o.login(kn).then(function(){fn.setSuccess()}).catch(function(Yn){fn.setError(Yn)})},In=function(){var xn=document.createElement("iframe"),Yn=o.createLoginUrl({prompt:"none",redirectUri:o.silentCheckSsoRedirectUri});xn.setAttribute("src",Yn),xn.setAttribute("title","keycloak-silent-check-sso"),xn.style.display="none",document.body.appendChild(xn);var Un=function(jn){if(!(jn.origin!==window.location.origin||xn.contentWindow!==jn.source)){var Qn=Nt(jn.data);ut(Qn,fn),document.body.removeChild(xn),window.removeEventListener("message",Un)}};window.addEventListener("message",Un)},kn={};switch(cn.onLoad){case"check-sso":gt.enable?Ot().then(function(){Gt().then(function(xn){xn?fn.setSuccess():o.silentCheckSsoRedirectUri?In():Rn(!1)}).catch(function(xn){fn.setError(xn)})}):o.silentCheckSsoRedirectUri?In():Rn(!1);break;case"login-required":Rn(!0);break;default:throw"Invalid value for onLoad"}}function Ln(){var Rn=Nt(window.location.href);if(Rn&&window.history.replaceState(window.history.state,null,Rn.newUrl),Rn&&Rn.valid)return Ot().then(function(){ut(Rn,fn)}).catch(function(In){fn.setError(In)});cn?cn.token&&cn.refreshToken?(vt(cn.token,cn.refreshToken,cn.idToken),gt.enable?Ot().then(function(){Gt().then(function(In){In?(o.onAuthSuccess&&o.onAuthSuccess(),fn.setSuccess(),Dt()):fn.setSuccess()}).catch(function(In){fn.setError(In)})}):o.updateToken(-1).then(function(){o.onAuthSuccess&&o.onAuthSuccess(),fn.setSuccess()}).catch(function(In){o.onAuthError&&o.onAuthError(),cn.onLoad?On():fn.setError(In)})):cn.onLoad?On():fn.setSuccess():fn.setSuccess()}function An(){var Rn=Mt(),In=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",In),Rn.setSuccess())};return document.addEventListener("readystatechange",In),In(),Rn.promise}return Tn.then(function(){An().then(nn).then(Ln).catch(function(Rn){Cn.setError(Rn)})}),Tn.catch(function(Rn){Cn.setError(Rn)}),Cn.promise},o.login=function(cn){return _e.login(cn)};function at(cn){var gn=null,Cn=window.crypto||window.msCrypto;if(Cn&&Cn.getRandomValues&&window.Uint8Array)return gn=new Uint8Array(cn),Cn.getRandomValues(gn),gn;gn=new Array(cn);for(var fn=0;fn<gn.length;fn++)gn[fn]=Math.floor(256*Math.random());return gn}function ht(cn){return dt(cn,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function dt(cn,gn){for(var Cn=at(cn),fn=new Array(cn),Tn=0;Tn<cn;Tn++)fn[Tn]=gn.charCodeAt(Cn[Tn]%gn.length);return String.fromCharCode.apply(null,fn)}function pt(cn,gn){switch(cn){case"S256":var Cn=new Uint8Array(sha256.arrayBuffer(gn)),fn=base64Js.fromByteArray(Cn).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return fn;default:throw"Invalid value for pkceMethod"}}function lt(cn){var gn={id_token:{acr:cn}};return JSON.stringify(gn)}o.createLoginUrl=function(cn){var gn=At(),Cn=At(),fn=_e.redirectUri(cn),Tn={state:gn,nonce:Cn,redirectUri:encodeURIComponent(fn)};cn&&cn.prompt&&(Tn.prompt=cn.prompt);var On;cn&&cn.action=="register"?On=o.endpoints.register():On=o.endpoints.authorize();var Ln=cn&&cn.scope||o.scope;Ln?Ln.indexOf("openid")===-1&&(Ln="openid "+Ln):Ln="openid";var An=On+"?client_id="+encodeURIComponent(o.clientId)+"&redirect_uri="+encodeURIComponent(fn)+"&state="+encodeURIComponent(gn)+"&response_mode="+encodeURIComponent(o.responseMode)+"&response_type="+encodeURIComponent(o.responseType)+"&scope="+encodeURIComponent(Ln);if(s&&(An=An+"&nonce="+encodeURIComponent(Cn)),cn&&cn.prompt&&(An+="&prompt="+encodeURIComponent(cn.prompt)),cn&&cn.maxAge&&(An+="&max_age="+encodeURIComponent(cn.maxAge)),cn&&cn.loginHint&&(An+="&login_hint="+encodeURIComponent(cn.loginHint)),cn&&cn.idpHint&&(An+="&kc_idp_hint="+encodeURIComponent(cn.idpHint)),cn&&cn.action&&cn.action!="register"&&(An+="&kc_action="+encodeURIComponent(cn.action)),cn&&cn.locale&&(An+="&ui_locales="+encodeURIComponent(cn.locale)),cn&&cn.acr){var Rn=lt(cn.acr);An+="&claims="+encodeURIComponent(Rn)}if(o.pkceMethod){var In=ht(96);Tn.pkceCodeVerifier=In;var kn=pt(o.pkceMethod,In);An+="&code_challenge="+kn,An+="&code_challenge_method="+o.pkceMethod}return ct.add(Tn),An},o.logout=function(cn){return _e.logout(cn)},o.createLogoutUrl=function(cn){var gn=o.endpoints.logout()+"?post_logout_redirect_uri="+encodeURIComponent(_e.redirectUri(cn,!1))+"&id_token_hint="+encodeURIComponent(o.idToken);return gn},o.register=function(cn){return _e.register(cn)},o.createRegisterUrl=function(cn){return cn||(cn={}),cn.action="register",o.createLoginUrl(cn)},o.createAccountUrl=function(cn){var gn=mt(),Cn=void 0;return typeof gn<"u"&&(Cn=gn+"/account?referrer="+encodeURIComponent(o.clientId)+"&referrer_uri="+encodeURIComponent(_e.redirectUri(cn))),Cn},o.accountManagement=function(){return _e.accountManagement()},o.hasRealmRole=function(cn){var gn=o.realmAccess;return!!gn&&gn.roles.indexOf(cn)>=0},o.hasResourceRole=function(cn,gn){if(!o.resourceAccess)return!1;var Cn=o.resourceAccess[gn||o.clientId];return!!Cn&&Cn.roles.indexOf(cn)>=0},o.loadUserProfile=function(){var cn=mt()+"/account",gn=new XMLHttpRequest;gn.open("GET",cn,!0),gn.setRequestHeader("Accept","application/json"),gn.setRequestHeader("Authorization","bearer "+o.token);var Cn=Mt();return gn.onreadystatechange=function(){gn.readyState==4&&(gn.status==200?(o.profile=JSON.parse(gn.responseText),Cn.setSuccess(o.profile)):Cn.setError())},gn.send(),Cn.promise},o.loadUserInfo=function(){var cn=o.endpoints.userinfo(),gn=new XMLHttpRequest;gn.open("GET",cn,!0),gn.setRequestHeader("Accept","application/json"),gn.setRequestHeader("Authorization","bearer "+o.token);var Cn=Mt();return gn.onreadystatechange=function(){gn.readyState==4&&(gn.status==200?(o.userInfo=JSON.parse(gn.responseText),Cn.setSuccess(o.userInfo)):Cn.setError())},gn.send(),Cn.promise},o.isTokenExpired=function(cn){if(!o.tokenParsed||!o.refreshToken&&o.flow!="implicit")throw"Not authenticated";if(o.timeSkew==null)return et("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var gn=o.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+o.timeSkew;if(cn){if(isNaN(cn))throw"Invalid minValidity";gn-=cn}return gn<0},o.updateToken=function(cn){var gn=Mt();if(!o.refreshToken)return gn.setError(),gn.promise;cn=cn||5;var Cn=function(){var Tn=!1;if(cn==-1?(Tn=!0,et("[KEYCLOAK] Refreshing token: forced refresh")):(!o.tokenParsed||o.isTokenExpired(cn))&&(Tn=!0,et("[KEYCLOAK] Refreshing token: token expired")),!Tn)gn.setSuccess(!1);else{var On="grant_type=refresh_token&refresh_token="+o.refreshToken,Ln=o.endpoints.token();if(tt.push(gn),tt.length==1){var An=new XMLHttpRequest;An.open("POST",Ln,!0),An.setRequestHeader("Content-type","application/x-www-form-urlencoded"),An.withCredentials=!0,On+="&client_id="+encodeURIComponent(o.clientId);var Rn=new Date().getTime();An.onreadystatechange=function(){if(An.readyState==4)if(An.status==200){et("[KEYCLOAK] Token refreshed"),Rn=(Rn+new Date().getTime())/2;var In=JSON.parse(An.responseText);vt(In.access_token,In.refresh_token,In.id_token,Rn),o.onAuthRefreshSuccess&&o.onAuthRefreshSuccess();for(var kn=tt.pop();kn!=null;kn=tt.pop())kn.setSuccess(!0)}else{nt("[KEYCLOAK] Failed to refresh token"),An.status==400&&o.clearToken(),o.onAuthRefreshError&&o.onAuthRefreshError();for(var kn=tt.pop();kn!=null;kn=tt.pop())kn.setError(!0)}},An.send(On)}}};if(gt.enable){var fn=Gt();fn.then(function(){Cn()}).catch(function(Tn){gn.setError(Tn)})}else Cn();return gn.promise},o.clearToken=function(){o.token&&(vt(null,null,null),o.onAuthLogout&&o.onAuthLogout(),o.loginRequired&&o.login())};function mt(){if(typeof o.authServerUrl<"u")return o.authServerUrl.charAt(o.authServerUrl.length-1)=="/"?o.authServerUrl+"realms/"+encodeURIComponent(o.realm):o.authServerUrl+"/realms/"+encodeURIComponent(o.realm)}function ot(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function ut(cn,gn){var Cn=cn.code,fn=cn.error,Tn=cn.prompt,On=new Date().getTime();if(cn.kc_action_status&&o.onActionUpdate&&o.onActionUpdate(cn.kc_action_status),fn){if(Tn!="none"){var Ln={error:fn,error_description:cn.error_description};o.onAuthError&&o.onAuthError(Ln),gn&&gn.setError(Ln)}else gn&&gn.setSuccess();return}else o.flow!="standard"&&(cn.access_token||cn.id_token)&&kn(cn.access_token,null,cn.id_token,!0);if(o.flow!="implicit"&&Cn){var An="code="+Cn+"&grant_type=authorization_code",Rn=o.endpoints.token(),In=new XMLHttpRequest;In.open("POST",Rn,!0),In.setRequestHeader("Content-type","application/x-www-form-urlencoded"),An+="&client_id="+encodeURIComponent(o.clientId),An+="&redirect_uri="+cn.redirectUri,cn.pkceCodeVerifier&&(An+="&code_verifier="+cn.pkceCodeVerifier),In.withCredentials=!0,In.onreadystatechange=function(){if(In.readyState==4)if(In.status==200){var xn=JSON.parse(In.responseText);kn(xn.access_token,xn.refresh_token,xn.id_token,o.flow==="standard"),Dt()}else o.onAuthError&&o.onAuthError(),gn&&gn.setError()},In.send(An)}function kn(xn,Yn,Un,jn){On=(On+new Date().getTime())/2,vt(xn,Yn,Un,On),s&&(o.tokenParsed&&o.tokenParsed.nonce!=cn.storedNonce||o.refreshTokenParsed&&o.refreshTokenParsed.nonce!=cn.storedNonce||o.idTokenParsed&&o.idTokenParsed.nonce!=cn.storedNonce)?(et("[KEYCLOAK] Invalid nonce, clearing token"),o.clearToken(),gn&&gn.setError()):jn&&(o.onAuthSuccess&&o.onAuthSuccess(),gn&&gn.setSuccess())}}function ft(cn){var gn=Mt(),Cn;a?typeof a=="string"&&(Cn=a):Cn="keycloak.json";function fn(In){In?o.endpoints={authorize:function(){return In.authorization_endpoint},token:function(){return In.token_endpoint},logout:function(){if(!In.end_session_endpoint)throw"Not supported by the OIDC server";return In.end_session_endpoint},checkSessionIframe:function(){if(!In.check_session_iframe)throw"Not supported by the OIDC server";return In.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!In.userinfo_endpoint)throw"Not supported by the OIDC server";return In.userinfo_endpoint}}:o.endpoints={authorize:function(){return mt()+"/protocol/openid-connect/auth"},token:function(){return mt()+"/protocol/openid-connect/token"},logout:function(){return mt()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var kn=mt()+"/protocol/openid-connect/login-status-iframe.html";return o.iframeVersion&&(kn=kn+"?version="+o.iframeVersion),kn},thirdPartyCookiesIframe:function(){var kn=mt()+"/protocol/openid-connect/3p-cookies/step1.html";return o.iframeVersion&&(kn=kn+"?version="+o.iframeVersion),kn},register:function(){return mt()+"/protocol/openid-connect/registrations"},userinfo:function(){return mt()+"/protocol/openid-connect/userinfo"}}}if(Cn){var Tn=new XMLHttpRequest;Tn.open("GET",Cn,!0),Tn.setRequestHeader("Accept","application/json"),Tn.onreadystatechange=function(){if(Tn.readyState==4)if(Tn.status==200||bt(Tn)){var In=JSON.parse(Tn.responseText);o.authServerUrl=In["auth-server-url"],o.realm=In.realm,o.clientId=In.resource,fn(null),gn.setSuccess()}else gn.setError()},Tn.send()}else{if(!a.clientId)throw"clientId missing";o.clientId=a.clientId;var On=a.oidcProvider;if(On)if(typeof On=="string"){var Rn;On.charAt(On.length-1)=="/"?Rn=On+".well-known/openid-configuration":Rn=On+"/.well-known/openid-configuration";var Tn=new XMLHttpRequest;Tn.open("GET",Rn,!0),Tn.setRequestHeader("Accept","application/json"),Tn.onreadystatechange=function(){if(Tn.readyState==4)if(Tn.status==200||bt(Tn)){var kn=JSON.parse(Tn.responseText);fn(kn),gn.setSuccess()}else gn.setError()},Tn.send()}else fn(On),gn.setSuccess();else{if(!a.url){for(var Ln=document.getElementsByTagName("script"),An=0;An<Ln.length;An++)if(Ln[An].src.match(/.*keycloak\.js/)){a.url=Ln[An].src.substr(0,Ln[An].src.indexOf("/js/keycloak.js"));break}}if(!a.realm)throw"realm missing";o.authServerUrl=a.url,o.realm=a.realm,fn(null),gn.setSuccess()}}return gn.promise}function bt(cn){return cn.status==0&&cn.responseText&&cn.responseURL.startsWith("file:")}function vt(cn,gn,Cn,fn){if(o.tokenTimeoutHandle&&(clearTimeout(o.tokenTimeoutHandle),o.tokenTimeoutHandle=null),gn?(o.refreshToken=gn,o.refreshTokenParsed=yt(gn)):(delete o.refreshToken,delete o.refreshTokenParsed),Cn?(o.idToken=Cn,o.idTokenParsed=yt(Cn)):(delete o.idToken,delete o.idTokenParsed),cn){if(o.token=cn,o.tokenParsed=yt(cn),o.sessionId=o.tokenParsed.session_state,o.authenticated=!0,o.subject=o.tokenParsed.sub,o.realmAccess=o.tokenParsed.realm_access,o.resourceAccess=o.tokenParsed.resource_access,fn&&(o.timeSkew=Math.floor(fn/1e3)-o.tokenParsed.iat),o.timeSkew!=null&&(et("[KEYCLOAK] Estimated time difference between browser and server is "+o.timeSkew+" seconds"),o.onTokenExpired)){var Tn=(o.tokenParsed.exp-new Date().getTime()/1e3+o.timeSkew)*1e3;et("[KEYCLOAK] Token expires in "+Math.round(Tn/1e3)+" s"),Tn<=0?o.onTokenExpired():o.tokenTimeoutHandle=setTimeout(o.onTokenExpired,Tn)}}else delete o.token,delete o.tokenParsed,delete o.subject,delete o.realmAccess,delete o.resourceAccess,o.authenticated=!1}function yt(cn){switch(cn=cn.split(".")[1],cn=cn.replace(/-/g,"+"),cn=cn.replace(/_/g,"/"),cn.length%4){case 0:break;case 2:cn+="==";break;case 3:cn+="=";break;default:throw"Invalid token"}return cn=decodeURIComponent(escape(atob(cn))),cn=JSON.parse(cn),cn}function At(){var cn="0123456789abcdef",gn=dt(36,cn).split("");gn[14]="4",gn[19]=cn.substr(gn[19]&3|8,1),gn[8]=gn[13]=gn[18]=gn[23]="-";var Cn=gn.join("");return Cn}function Nt(cn){var gn=St(cn);if(gn){var Cn=ct.get(gn.state);return Cn&&(gn.valid=!0,gn.redirectUri=Cn.redirectUri,gn.storedNonce=Cn.nonce,gn.prompt=Cn.prompt,gn.pkceCodeVerifier=Cn.pkceCodeVerifier),gn}}function St(cn){var gn;switch(o.flow){case"standard":gn=["code","state","session_state","kc_action_status"];break;case"implicit":gn=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":gn=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}gn.push("error"),gn.push("error_description"),gn.push("error_uri");var Cn=cn.indexOf("?"),fn=cn.indexOf("#"),Tn,On;if(o.responseMode==="query"&&Cn!==-1?(Tn=cn.substring(0,Cn),On=wt(cn.substring(Cn+1,fn!==-1?fn:cn.length),gn),On.paramsString!==""&&(Tn+="?"+On.paramsString),fn!==-1&&(Tn+=cn.substring(fn))):o.responseMode==="fragment"&&fn!==-1&&(Tn=cn.substring(0,fn),On=wt(cn.substring(fn+1),gn),On.paramsString!==""&&(Tn+="#"+On.paramsString)),On&&On.oauthParams){if(o.flow==="standard"||o.flow==="hybrid"){if((On.oauthParams.code||On.oauthParams.error)&&On.oauthParams.state)return On.oauthParams.newUrl=Tn,On.oauthParams}else if(o.flow==="implicit"&&(On.oauthParams.access_token||On.oauthParams.error)&&On.oauthParams.state)return On.oauthParams.newUrl=Tn,On.oauthParams}}function wt(cn,gn){for(var Cn=cn.split("&"),fn={paramsString:"",oauthParams:{}},Tn=0;Tn<Cn.length;Tn++){var On=Cn[Tn].indexOf("="),Ln=Cn[Tn].slice(0,On);gn.indexOf(Ln)!==-1?fn.oauthParams[Ln]=Cn[Tn].slice(On+1):(fn.paramsString!==""&&(fn.paramsString+="&"),fn.paramsString+=Cn[Tn])}return fn}function Mt(){var cn={setSuccess:function(gn){cn.resolve(gn)},setError:function(gn){cn.reject(gn)}};return cn.promise=new Promise(function(gn,Cn){cn.resolve=gn,cn.reject=Cn}),cn.promise.success=function(gn){return logPromiseDeprecation(),this.then(function(fn){gn(fn)}),this},cn.promise.error=function(gn){return logPromiseDeprecation(),this.catch(function(fn){gn(fn)}),this},cn}function Ht(cn,gn,Cn){var fn=null,Tn=new Promise(function(On,Ln){fn=setTimeout(function(){Ln({error:Cn||"Promise is not settled within timeout of "+gn+"ms"})},gn)});return Promise.race([cn,Tn]).finally(function(){clearTimeout(fn)})}function Ot(){var cn=Mt();if(!gt.enable||gt.iframe)return cn.setSuccess(),cn.promise;var gn=document.createElement("iframe");gt.iframe=gn,gn.onload=function(){var Tn=o.endpoints.authorize();Tn.charAt(0)==="/"?gt.iframeOrigin=ot():gt.iframeOrigin=Tn.substring(0,Tn.indexOf("/",8)),cn.setSuccess()};var Cn=o.endpoints.checkSessionIframe();gn.setAttribute("src",Cn),gn.setAttribute("title","keycloak-session-iframe"),gn.style.display="none",document.body.appendChild(gn);var fn=function(Tn){if(!(Tn.origin!==gt.iframeOrigin||gt.iframe.contentWindow!==Tn.source)&&(Tn.data=="unchanged"||Tn.data=="changed"||Tn.data=="error")){Tn.data!="unchanged"&&o.clearToken();for(var On=gt.callbackList.splice(0,gt.callbackList.length),Ln=On.length-1;Ln>=0;--Ln){var An=On[Ln];Tn.data=="error"?An.setError():An.setSuccess(Tn.data=="unchanged")}}};return window.addEventListener("message",fn,!1),cn.promise}function Dt(){gt.enable&&o.token&&setTimeout(function(){Gt().then(function(cn){cn&&Dt()})},gt.interval*1e3)}function Gt(){var cn=Mt();if(gt.iframe&&gt.iframeOrigin){var gn=o.clientId+" "+(o.sessionId?o.sessionId:"");gt.callbackList.push(cn);var Cn=gt.iframeOrigin;gt.callbackList.length==1&&gt.iframe.contentWindow.postMessage(gn,Cn)}else cn.setSuccess();return cn.promise}function nn(){var cn=Mt();if(gt.enable||o.silentCheckSsoRedirectUri){var gn=document.createElement("iframe");gn.setAttribute("src",o.endpoints.thirdPartyCookiesIframe()),gn.setAttribute("title","keycloak-3p-check-iframe"),gn.style.display="none",document.body.appendChild(gn);var Cn=function(fn){gn.contentWindow===fn.source&&(fn.data!=="supported"&&fn.data!=="unsupported"||(fn.data==="unsupported"&&(gt.enable=!1,o.silentCheckSsoFallback&&(o.silentCheckSsoRedirectUri=!1),nt("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(gn),window.removeEventListener("message",Cn),cn.setSuccess()))};window.addEventListener("message",Cn,!1)}else cn.setSuccess();return Ht(cn.promise,o.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function zt(cn){if(!cn||cn=="default")return{login:function(On){return window.location.replace(o.createLoginUrl(On)),Mt().promise},logout:function(On){return window.location.replace(o.createLogoutUrl(On)),Mt().promise},register:function(On){return window.location.replace(o.createRegisterUrl(On)),Mt().promise},accountManagement:function(){var On=o.createAccountUrl();if(typeof On<"u")window.location.href=On;else throw"Not supported by the OIDC server";return Mt().promise},redirectUri:function(On,Ln){return On&&On.redirectUri?On.redirectUri:o.redirectUri?o.redirectUri:location.href}};if(cn=="cordova"){gt.enable=!1;var gn=function(On,Ln,An){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(On,Ln,An):window.open(On,Ln,An)},Cn=function(On){return On&&On.cordovaOptions?Object.keys(On.cordovaOptions).reduce(function(Ln,An){return Ln[An]=On.cordovaOptions[An],Ln},{}):{}},fn=function(On){return Object.keys(On).reduce(function(Ln,An){return Ln.push(An+"="+On[An]),Ln},[]).join(",")},Tn=function(On){var Ln=Cn(On);return Ln.location="no",On&&On.prompt=="none"&&(Ln.hidden="yes"),fn(Ln)};return{login:function(On){var Ln=Mt(),An=Tn(On),Rn=o.createLoginUrl(On),In=gn(Rn,"_blank",An),kn=!1,xn=!1,Yn=function(){xn=!0,In.close()};return In.addEventListener("loadstart",function(Un){if(Un.url.indexOf("http://localhost")==0){var jn=Nt(Un.url);ut(jn,Ln),Yn(),kn=!0}}),In.addEventListener("loaderror",function(Un){if(!kn)if(Un.url.indexOf("http://localhost")==0){var jn=Nt(Un.url);ut(jn,Ln),Yn(),kn=!0}else Ln.setError(),Yn()}),In.addEventListener("exit",function(Un){xn||Ln.setError({reason:"closed_by_user"})}),Ln.promise},logout:function(On){var Ln=Mt(),An=o.createLogoutUrl(On),Rn=gn(An,"_blank","location=no,hidden=yes,clearcache=yes"),In;return Rn.addEventListener("loadstart",function(kn){kn.url.indexOf("http://localhost")==0&&Rn.close()}),Rn.addEventListener("loaderror",function(kn){kn.url.indexOf("http://localhost")==0||(In=!0),Rn.close()}),Rn.addEventListener("exit",function(kn){In?Ln.setError():(o.clearToken(),Ln.setSuccess())}),Ln.promise},register:function(On){var Ln=Mt(),An=o.createRegisterUrl(),Rn=Tn(On),In=gn(An,"_blank",Rn);return In.addEventListener("loadstart",function(kn){if(kn.url.indexOf("http://localhost")==0){In.close();var xn=Nt(kn.url);ut(xn,Ln)}}),Ln.promise},accountManagement:function(){var On=o.createAccountUrl();if(typeof On<"u"){var Ln=gn(On,"_blank","location=no");Ln.addEventListener("loadstart",function(An){An.url.indexOf("http://localhost")==0&&Ln.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(On){return"http://localhost"}}}if(cn=="cordova-native")return gt.enable=!1,{login:function(On){var Ln=Mt(),An=o.createLoginUrl(On);return universalLinks.subscribe("keycloak",function(Rn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var In=Nt(Rn.url);ut(In,Ln)}),window.cordova.plugins.browsertab.openUrl(An),Ln.promise},logout:function(On){var Ln=Mt(),An=o.createLogoutUrl(On);return universalLinks.subscribe("keycloak",function(Rn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),o.clearToken(),Ln.setSuccess()}),window.cordova.plugins.browsertab.openUrl(An),Ln.promise},register:function(On){var Ln=Mt(),An=o.createRegisterUrl(On);return universalLinks.subscribe("keycloak",function(Rn){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var In=Nt(Rn.url);ut(In,Ln)}),window.cordova.plugins.browsertab.openUrl(An),Ln.promise},accountManagement:function(){var On=o.createAccountUrl();if(typeof On<"u")window.cordova.plugins.browsertab.openUrl(On);else throw"Not supported by the OIDC server"},redirectUri:function(On){return On&&On.redirectUri?On.redirectUri:o.redirectUri?o.redirectUri:"http://localhost"}};throw"invalid adapter type: "+cn}var Ft=function(){if(!(this instanceof Ft))return new Ft;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var cn=this;function gn(){for(var Cn=new Date().getTime(),fn=0;fn<localStorage.length;fn++){var Tn=localStorage.key(fn);if(Tn&&Tn.indexOf("kc-callback-")==0){var On=localStorage.getItem(Tn);if(On)try{var Ln=JSON.parse(On).expires;(!Ln||Ln<Cn)&&localStorage.removeItem(Tn)}catch{localStorage.removeItem(Tn)}}}}cn.get=function(Cn){if(Cn){var fn="kc-callback-"+Cn,Tn=localStorage.getItem(fn);return Tn&&(localStorage.removeItem(fn),Tn=JSON.parse(Tn)),gn(),Tn}},cn.add=function(Cn){gn();var fn="kc-callback-"+Cn.state;Cn.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(fn,JSON.stringify(Cn))}},un=function(){if(!(this instanceof un))return new un;var cn=this;cn.get=function(Tn){if(Tn){var On=Cn("kc-callback-"+Tn);if(fn("kc-callback-"+Tn,"",gn(-100)),On)return JSON.parse(On)}},cn.add=function(Tn){fn("kc-callback-"+Tn.state,JSON.stringify(Tn),gn(60))},cn.removeItem=function(Tn){fn(Tn,"",gn(-100))};var gn=function(Tn){var On=new Date;return On.setTime(On.getTime()+Tn*60*1e3),On},Cn=function(Tn){for(var On=Tn+"=",Ln=document.cookie.split(";"),An=0;An<Ln.length;An++){for(var Rn=Ln[An];Rn.charAt(0)==" ";)Rn=Rn.substring(1);if(Rn.indexOf(On)==0)return Rn.substring(On.length,Rn.length)}return""},fn=function(Tn,On,Ln){var An=Tn+"="+On+"; expires="+Ln.toUTCString()+"; ";document.cookie=An}};function vn(){try{return new Ft}catch{}return new un}function yn(cn){return function(){o.enableLogging&&cn.apply(console,Array.prototype.slice.call(arguments))}}}function loginKeyCloakJS(){return new Promise((a,o)=>{const _e=new Keycloak({url:"https://idp.apizee.com/auth",realm:"APIZEE-POC-DGPN",clientId:"visio-assisted"});_e.init({onLoad:"login-required",checkLoginIframe:!1}).then(tt=>{tt?(console.log("Keycloak authenticated"),a(_e)):console.log("Keycloak NOT authenticated...")}).catch(tt=>{console.error("Authenticated Failed",tt),o(tt)})})}const DEBUG={level:"debug",isDebugEnabled:!0,isInfoEnabled:!0,isWarnEnabled:!0},INFO={level:"info",isDebugEnabled:!1,isInfoEnabled:!0,isWarnEnabled:!0},WARN={level:"warn",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!0},ERROR={level:"error",isDebugEnabled:!1,isInfoEnabled:!1,isWarnEnabled:!1};function setLogLevel(a){switch(a){case"debug":globalThis.logLevel=DEBUG;break;case"info":globalThis.logLevel=INFO;break;case"warn":globalThis.logLevel=WARN;break;case"error":globalThis.logLevel=ERROR;break;default:globalThis.logLevel=INFO}}function isInstanceOfTakeSnapshot(a){return typeof a!="object"?!1:"takeSnapshot"in a}function isInstanceOfSwitchFacingMode(a){return typeof a!="object"?!1:"switchFacingMode"in a}function isInstanceOfFileShared(a){return typeof a!="object"?!1:"fileShared"in a}function isInstanceOfHangup(a){return typeof a!="object"?!1:"hangUp"in a}const COMPONENT_NAME="App";function App(a){const o=useThemeProps({props:a,name:COMPONENT_NAME}),{optInCGUPrefixText:_e="I agree to the ",optInCGULinkText:tt="General Terms of Sale",optInCGUAriaLabel:ct="accept-terms-conditions",optInPrivacyPrefixText:gt="I agree to the ",optInPrivacyLinkText:rt="Privacy Policy",optInPrivacyAriaLabel:it="accept-privacy-policy",optInButtonText:s="Confirm",hangedUpText:et="The agent hanged up. Bye!"}=o,nt=useParams(),[at]=useSearchParams(),ht=reactExports.useMemo(()=>at.get("lL")??globalThis.logLevel.level,[at]);reactExports.useEffect(()=>{setLogLevel(ht),W(ht),te(ht)},[ht]);const dt=reactExports.useMemo(()=>at.get("lRAppID"),[at]);reactExports.useEffect(()=>{dt&&dt!==""&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket init`,dt),LogRocket.init(dt))},[dt]);const pt=reactExports.useMemo(()=>at.get("iU")??"https://is.dev.apizee.com/invitations",[at]),[lt,mt]=reactExports.useState(void 0),[ot,ut]=reactExports.useState(!1),[ft,bt]=reactExports.useState(void 0),[vt,yt]=reactExports.useState(),[At,Nt]=reactExports.useState(void 0),[St,wt]=reactExports.useState(void 0),[Mt,Ht]=reactExports.useState(0),Ot=()=>{Ht(wn=>wn+1)},Dt=()=>{Ht(wn=>wn-1)},Gt=reactExports.useMemo(()=>Mt>=1,[Mt]),{value:nn,toggle:zt}=q(!1),[Ft,un]=reactExports.useState(),[vn,yn]=reactExports.useState(!1),cn=reactExports.useMemo(()=>lt?{apiKey:lt.apiKey}:void 0,[lt]),gn=reactExports.useMemo(()=>lt?{cloudUrl:lt.cloudUrl?lt.cloudUrl:"https://cloud.apirtc.com",groups:[`${lt.conversation.name}-guests`],userData:new apiRTC_minExports.UserData({firstName:lt.user.firstName,lastName:lt.user.lastName})}:void 0,[lt]),{session:Cn,disconnect:fn}=D(cn,gn),{userMediaDevices:Tn,selectedAudioIn:On,selectedAudioInId:Ln,setSelectedAudioIn:An,selectedVideoIn:Rn,selectedVideoInId:In,setSelectedVideoIn:kn}=O(Cn,isMobile_1?void 0:"apirtc-web-guest"),xn=reactExports.useMemo(()=>lt?lt.streams.find(wn=>wn.type==="user-media"):void 0,[lt]),Yn=reactExports.useMemo(()=>lt?lt.streams.find(wn=>wn.type==="display-media"):void 0,[lt]);reactExports.useEffect(()=>{Cn&&lt&&Cn.getUserAgent().enableCallStatsMonitoring(lt.callStatsMonitoringInterval!==void 0,{interval:lt.callStatsMonitoringInterval})},[Cn,lt]),reactExports.useEffect(()=>{var wn,Yt;if(xn){const kt=(wn=xn.constraints)==null?void 0:wn.audio,st=(Yt=xn.constraints)==null?void 0:Yt.video;Nt(!!kt),wt(!!st),st instanceof Object&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useEffect invitationData has video constraints`,st),st.facingMode&&yt(st.facingMode))}},[xn]);const Un=reactExports.useMemo(()=>{const wn={...xn==null?void 0:xn.constraints};if(wn!=null&&wn.audio&&(At===void 0||At)){const Yt=wn.audio instanceof Object?{...wn.audio}:{};Ln&&(Yt.deviceId=Ln),wn.audio=Yt}else wn.audio=!1;if(wn!=null&&wn.video&&(St===void 0||St)){const Yt=wn.video instanceof Object?{...wn.video}:{};isMobile_1&&vt?(Yt.facingMode=vt,delete Yt.deviceId):In&&(Yt.deviceId=In,delete Yt.facingMode),wn.video=Yt}else wn.video=!1;return globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|useMemo new_constraints`,wn),{constraints:wn}},[xn,Ln,In,vt,At,St]),{stream:jn,grabbing:Qn,error:on}=d(Gt&&xn?Cn:void 0,Un),[Hn,Fn]=reactExports.useState(),{conversation:Vn}=u(Cn,lt?lt.conversation.name:void 0,lt?lt.conversation.getOrCreateOptions:void 0,!0,lt?lt.conversation.joinOptions:void 0),Bn=reactExports.useMemo(()=>[...jn&&nn?[{stream:jn,options:xn==null?void 0:xn.publishOptions}]:[],...Hn?[{stream:Hn}]:[]],[nn,jn,xn,Hn]),{publishedStreams:qn,subscribedStreams:Gn}=R(Vn,Bn),_n=reactExports.useCallback(wn=>{Vn&&Vn.sendData(wn).then(()=>{globalThis.logLevel.isDebugEnabled&&console.log(`${COMPONENT_NAME}|conversation sendData`,wn)}).catch(Yt=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation sendData error`,Yt)})},[Vn]),$n=async(wn,Yt)=>fetch(`${pt}/${wn}`,{method:"GET",headers:{Authorization:`Bearer ${Yt}`,"Content-Type":"application/json"}}).then(kt=>kt.status!==200?null:kt.json()).catch(kt=>{console.error(`${COMPONENT_NAME}|getInvitationData`,kt)});reactExports.useEffect(()=>{const wn=Yt=>{mt(void 0)};return window.addEventListener("beforeunload",wn),()=>{window.removeEventListener("beforeunload",wn)}},[]),reactExports.useEffect(()=>{const wn=at.get("i");if(wn)try{const Yt=JSON.parse(base64Exports.decode(wn));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify(Yt)),mt(Yt)}catch(Yt){if(Yt instanceof SyntaxError){$n(wn).then(kt=>{globalThis.logLevel.isInfoEnabled&&console.info(`${COMPONENT_NAME}|getInvitationData`,wn,kt),mt(kt.data)});return}else console.error(`${COMPONENT_NAME}|parsing i search parameter error`,Yt),ut(!0)}},[at]),reactExports.useEffect(()=>{if(nt.invitationData)try{const wn=JSON.parse(base64Exports.decode(nt.invitationData));globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|InvitationData`,JSON.stringify(wn)),mt(wn)}catch(wn){if(wn instanceof SyntaxError){const Yt=nt.invitationData;loginKeyCloakJS().then(kt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|keycloak.token`,kt.token),$n(Yt).then(st=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|getInvitationData`,Yt,st),mt(st)})}).catch(kt=>{console.error(`${COMPONENT_NAME}|loginKeyCloakJS error`,kt)})}}},[nt.invitationData]),reactExports.useEffect(()=>{lt&&Cn&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|logRocket identify`,lt.conversation.name,Cn.getId()),LogRocket.identify(`${lt.conversation.name}-${Cn.getId()}`))},[lt,Cn]),reactExports.useEffect(()=>{if(Cn){const wn=Cn.getUserAgent(),Yt=new uaParserExports.UAParser;globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|UAParser`,Yt.getResult());const kt=wn.getUserData();kt.setToSession(),kt.setProp("systemInfo",JSON.stringify(Yt.getResult())),wn.setUserData(kt)}},[Cn]),reactExports.useEffect(()=>{if(Cn&&jn){const wn=Yt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|onContactData`,Yt);const kt=Yt.sender,st=Yt.content;isInstanceOfTakeSnapshot(st)?jn.takeSnapshot(st.takeSnapshot).then(Tt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|takeSnapshot of`,jn,Tt),kt.sendFile({name:`snapshot_${new Date().toISOString()}.png`,type:"image/png"},Tt).on("statusChange",Lt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|statusChange`,Lt)})}).catch(Tt=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|takeSnapshot error`,Tt)}):isInstanceOfSwitchFacingMode(st)&&(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|SwitchFacingMode`),yt(Tt=>Tt==="user"?"environment":"user"))};return Cn.on("contactData",wn),()=>{Cn.removeListener("contactData",wn)}}},[Cn,jn]),reactExports.useEffect(()=>{if(Vn){const wn=Yt=>{globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|Conversation onData`,Yt);const kt=Yt.content;isInstanceOfFileShared(kt)?(globalThis.logLevel.isDebugEnabled&&console.debug(`${COMPONENT_NAME}|fileShared`,kt),fetch(kt.fileShared.link,{method:"get",mode:"cors",headers:new Headers({Authorization:`Bearer ${kt.fileShared.jwt}`})}).then(st=>st.blob()).then(st=>{const Tt=window.URL.createObjectURL(st);un(Tt)}).catch(st=>{console.error(`${COMPONENT_NAME}|fetch error`,kt.fileShared.link,st)})):isInstanceOfHangup(kt)&&(Vn.leave().then().catch(st=>{globalThis.logLevel.isWarnEnabled&&console.warn(`${COMPONENT_NAME}|conversation leave error`,st)}).finally(()=>{fn()}),yn(!0))};return Vn.on("data",wn),()=>{Vn.removeListener("data",wn)}}},[Vn,fn]),reactExports.useEffect(()=>{if(Hn)return Hn.on("stopped",()=>{globalThis.logLevel.isInfoEnabled&&console.log(`${COMPONENT_NAME}|The user has ended sharing the screen`),Fn(void 0)}),()=>{Hn.release()}},[Hn]),reactExports.useEffect(()=>{Gt&&_n({type:"timeline-event",event:"opt-in-accepted"})},[_n,Gt]),reactExports.useEffect(()=>{jn&&_n({type:"timeline-event",event:"camera-stream-grabbed"})},[_n,jn]),reactExports.useEffect(()=>{nn&&_n({type:"timeline-event",event:"enter-room"})},[_n,nn]);const bn=[{id:"CGU",labels:{aria:ct,prefix:_e,link:tt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/b87662d7-3e82-4519-a4db-9fb6ba67b5cc/Apizee-ConditionsGeneralesUtilisation.pdf":"https://cloud.apizee.com/attachments/cb744e03-182b-453e-bbdf-0d89cf42e182/Apizee-TermsOfUse.pdf"},{id:"Privacy",labels:{aria:it,prefix:gt,link:rt},link:navigator.language==="fr"||navigator.language==="fr-FR"?"https://cloud.apizee.com/attachments/f87493b0-483e-4723-a3ee-02d59a501b1c/Apizee-PolitiqueConfidentialite.pdf":"https://cloud.apizee.com/attachments/ae61f778-16d1-4dd4-baa1-cd1ba568a0d6/Apizee-PrivacyPolicy.pdf"}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Cn&&!ot&&jsxRuntimeExports.jsx(Box$1,{display:"flex",alignItems:"center",justifyContent:"center",sx:{mt:5},children:jsxRuntimeExports.jsx("img",{height:"320px",width:"320px",src:logo,alt:"logo"})}),ot&&jsxRuntimeExports.jsx(ErrorPage,{errorType:ft}),Cn&&!ot&&!nn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"sm",sx:{height:"100vh"},children:jsxRuntimeExports.jsx(Box$1,{sx:{height:"100%"},display:"flex",alignItems:"center",justifyContent:"center",children:jsxRuntimeExports.jsx(Card$1,{children:jsxRuntimeExports.jsx(CardContent$1,{children:jsxRuntimeExports.jsxs(TextStepper,{activeStep:Mt,header:jsxRuntimeExports.jsx("img",{src:logo,alt:"Apizee Logo",height:24}),children:[jsxRuntimeExports.jsx(Step$1,{children:jsxRuntimeExports.jsx(OptInList,{optIns:bn,labels:{submit:s},onSubmit:Ot})},"legal"),jsxRuntimeExports.jsx(Step$1,{children:jsxRuntimeExports.jsx(Settings,{userMediaStreamRequest:xn,displayMediaStreamRequest:Yn,userMediaDevices:Tn,selectedAudioIn:On,setSelectedAudioIn:An,selectedVideoIn:Rn,setSelectedVideoIn:kn,createStreamOptions:Un,grabbing:Qn,localStream:jn,cameraError:on,streamAudioEnabled:At,setStreamAudioEnabled:Nt,streamVideoEnabled:St,setStreamVideoEnabled:wt,screenShareStream:Hn,setScreenShareStream:Fn,handleBack:Dt,toggleReady:zt})},"device-selection")]})})})})}),Vn&&nn&&jsxRuntimeExports.jsx(Room,{conversation:Vn,facingMode:vt,localStream:jn,publishedStreams:qn,subscribedStreams:Gn}),Ft&&jsxRuntimeExports.jsx("img",{src:Ft,alt:"sharedImg"}),vn&&jsxRuntimeExports.jsx(Container$1,{maxWidth:"md",children:jsxRuntimeExports.jsx(Alert$1,{severity:"info",children:et})})]})}const index="",frFR={components:{App:{defaultProps:{acceptTitleText:"Documents légaux",optInCGUPrefixText:"J'accepte les ",optInCGULinkText:"Conditions générales d'utilisation",optInCGUAriaLabel:"conditions-générales",optInPrivacyPrefixText:"J'accepte la ",optInPrivacyLinkText:"Politique de confidentialité",optInPrivacyAriaLabel:"politique-confidentialité",optInButtonText:"Confirmer",hangedUpText:"L'agent a raccroché."}},Settings:{defaultProps:{cameraErrorText:"Vérifiez si votre périphérique n'est pas déjà utilisé.",backButtonText:"Retour",readyButtonText:"Entrer en communication",selectAtLeastOneMediaText:"Veuillez sélectionner au moins un média.",selectDeviceHelperText:"Avant d'entrer en communication, vérifiez ce que vous partagerez avec votre interlocuteur.",shareScreenText:"Cliquez ici pour activer le partage d'écran"}}}};setLogLevel("warn");W(globalThis.logLevel.level);te(globalThis.logLevel.level);function getLangFiles(){switch(navigator.language){case"fr":case"fr-FR":return[frFR,$$1];default:return[]}}document.documentElement.setAttribute("lang",navigator.language.slice(0,2));const theme=createTheme({palette:{mode:"light",primary:{main:"#F76B40",light:"#ba3108",dark:"#f88562"},secondary:{main:"#5b5baf",light:"#8eabc7",dark:"#2e455c"},success:{main:"#0F5712",light:"#17821A",dark:"#0A340B"},info:{main:"#1355AE"},neutral:{main:"rgba(0, 0, 0, 0.23)"}},typography:{button:{textTransform:"none"}},...ROOM_THEME_OPTIONS},...getLangFiles()),container=document.getElementById("root");container&&createRoot(container).render(jsxRuntimeExports.jsx(ThemeProvider,{theme,children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/web-guest",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(Route,{path:"/:invitationData",element:jsxRuntimeExports.jsx(App,{})})]})})}));
